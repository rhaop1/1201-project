var NQ=Object.defineProperty;var t3=r=>{throw TypeError(r)};var DQ=(r,e,t)=>e in r?NQ(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Pe=(r,e,t)=>DQ(r,typeof e!="symbol"?e+"":e,t),M2=(r,e,t)=>e.has(r)||t3("Cannot "+t);var m=(r,e,t)=>(M2(r,e,"read from private field"),t?t.call(r):e.get(r)),U=(r,e,t)=>e.has(r)?t3("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),k=(r,e,t,n)=>(M2(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),H=(r,e,t)=>(M2(r,e,"access private method"),t);var On=(r,e,t,n)=>({set _(i){k(r,e,i,t)},get _(){return m(r,e,n)}});function MQ(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var up=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function WT(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function IQ(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var wU={exports:{}},KT={},xU={exports:{}},Ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tx=Symbol.for("react.element"),PQ=Symbol.for("react.portal"),RQ=Symbol.for("react.fragment"),kQ=Symbol.for("react.strict_mode"),FQ=Symbol.for("react.profiler"),OQ=Symbol.for("react.provider"),BQ=Symbol.for("react.context"),LQ=Symbol.for("react.forward_ref"),$Q=Symbol.for("react.suspense"),VQ=Symbol.for("react.memo"),UQ=Symbol.for("react.lazy"),r3=Symbol.iterator;function zQ(r){return r===null||typeof r!="object"?null:(r=r3&&r[r3]||r["@@iterator"],typeof r=="function"?r:null)}var _U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AU=Object.assign,EU={};function O0(r,e,t){this.props=r,this.context=e,this.refs=EU,this.updater=t||_U}O0.prototype.isReactComponent={};O0.prototype.setState=function(r,e){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,e,"setState")};O0.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function SU(){}SU.prototype=O0.prototype;function VP(r,e,t){this.props=r,this.context=e,this.refs=EU,this.updater=t||_U}var UP=VP.prototype=new SU;UP.constructor=VP;AU(UP,O0.prototype);UP.isPureReactComponent=!0;var n3=Array.isArray,TU=Object.prototype.hasOwnProperty,zP={current:null},CU={key:!0,ref:!0,__self:!0,__source:!0};function NU(r,e,t){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)TU.call(e,n)&&!CU.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=t;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(r&&r.defaultProps)for(n in o=r.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:Tx,type:r,key:s,ref:a,props:i,_owner:zP.current}}function jQ(r,e){return{$$typeof:Tx,type:r.type,key:e,ref:r.ref,props:r.props,_owner:r._owner}}function jP(r){return typeof r=="object"&&r!==null&&r.$$typeof===Tx}function qQ(r){var e={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(t){return e[t]})}var i3=/\/+/g;function I2(r,e){return typeof r=="object"&&r!==null&&r.key!=null?qQ(""+r.key):e.toString(36)}function kA(r,e,t,n,i){var s=typeof r;(s==="undefined"||s==="boolean")&&(r=null);var a=!1;if(r===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(r.$$typeof){case Tx:case PQ:a=!0}}if(a)return a=r,i=i(a),r=n===""?"."+I2(a,0):n,n3(i)?(t="",r!=null&&(t=r.replace(i3,"$&/")+"/"),kA(i,e,t,"",function(u){return u})):i!=null&&(jP(i)&&(i=jQ(i,t+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(i3,"$&/")+"/")+r)),e.push(i)),1;if(a=0,n=n===""?".":n+":",n3(r))for(var o=0;o<r.length;o++){s=r[o];var l=n+I2(s,o);a+=kA(s,e,t,l,i)}else if(l=zQ(r),typeof l=="function")for(r=l.call(r),o=0;!(s=r.next()).done;)s=s.value,l=n+I2(s,o++),a+=kA(s,e,t,l,i);else if(s==="object")throw e=String(r),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function P_(r,e,t){if(r==null)return r;var n=[],i=0;return kA(r,n,"","",function(s){return e.call(t,s,i++)}),n}function HQ(r){if(r._status===-1){var e=r._result;e=e(),e.then(function(t){(r._status===0||r._status===-1)&&(r._status=1,r._result=t)},function(t){(r._status===0||r._status===-1)&&(r._status=2,r._result=t)}),r._status===-1&&(r._status=0,r._result=e)}if(r._status===1)return r._result.default;throw r._result}var Es={current:null},FA={transition:null},GQ={ReactCurrentDispatcher:Es,ReactCurrentBatchConfig:FA,ReactCurrentOwner:zP};function DU(){throw Error("act(...) is not supported in production builds of React.")}Ut.Children={map:P_,forEach:function(r,e,t){P_(r,function(){e.apply(this,arguments)},t)},count:function(r){var e=0;return P_(r,function(){e++}),e},toArray:function(r){return P_(r,function(e){return e})||[]},only:function(r){if(!jP(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};Ut.Component=O0;Ut.Fragment=RQ;Ut.Profiler=FQ;Ut.PureComponent=VP;Ut.StrictMode=kQ;Ut.Suspense=$Q;Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GQ;Ut.act=DU;Ut.cloneElement=function(r,e,t){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var n=AU({},r.props),i=r.key,s=r.ref,a=r._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=zP.current),e.key!==void 0&&(i=""+e.key),r.type&&r.type.defaultProps)var o=r.type.defaultProps;for(l in e)TU.call(e,l)&&!CU.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=t;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Tx,type:r.type,key:i,ref:s,props:n,_owner:a}};Ut.createContext=function(r){return r={$$typeof:BQ,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:OQ,_context:r},r.Consumer=r};Ut.createElement=NU;Ut.createFactory=function(r){var e=NU.bind(null,r);return e.type=r,e};Ut.createRef=function(){return{current:null}};Ut.forwardRef=function(r){return{$$typeof:LQ,render:r}};Ut.isValidElement=jP;Ut.lazy=function(r){return{$$typeof:UQ,_payload:{_status:-1,_result:r},_init:HQ}};Ut.memo=function(r,e){return{$$typeof:VQ,type:r,compare:e===void 0?null:e}};Ut.startTransition=function(r){var e=FA.transition;FA.transition={};try{r()}finally{FA.transition=e}};Ut.unstable_act=DU;Ut.useCallback=function(r,e){return Es.current.useCallback(r,e)};Ut.useContext=function(r){return Es.current.useContext(r)};Ut.useDebugValue=function(){};Ut.useDeferredValue=function(r){return Es.current.useDeferredValue(r)};Ut.useEffect=function(r,e){return Es.current.useEffect(r,e)};Ut.useId=function(){return Es.current.useId()};Ut.useImperativeHandle=function(r,e,t){return Es.current.useImperativeHandle(r,e,t)};Ut.useInsertionEffect=function(r,e){return Es.current.useInsertionEffect(r,e)};Ut.useLayoutEffect=function(r,e){return Es.current.useLayoutEffect(r,e)};Ut.useMemo=function(r,e){return Es.current.useMemo(r,e)};Ut.useReducer=function(r,e,t){return Es.current.useReducer(r,e,t)};Ut.useRef=function(r){return Es.current.useRef(r)};Ut.useState=function(r){return Es.current.useState(r)};Ut.useSyncExternalStore=function(r,e,t){return Es.current.useSyncExternalStore(r,e,t)};Ut.useTransition=function(){return Es.current.useTransition()};Ut.version="18.3.1";xU.exports=Ut;var he=xU.exports;const MU=WT(he),WQ=MQ({__proto__:null,default:MU},[he]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KQ=he,XQ=Symbol.for("react.element"),YQ=Symbol.for("react.fragment"),QQ=Object.prototype.hasOwnProperty,JQ=KQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZQ={key:!0,ref:!0,__self:!0,__source:!0};function IU(r,e,t){var n,i={},s=null,a=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)QQ.call(e,n)&&!ZQ.hasOwnProperty(n)&&(i[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:XQ,type:r,key:s,ref:a,props:i,_owner:JQ.current}}KT.Fragment=YQ;KT.jsx=IU;KT.jsxs=IU;wU.exports=KT;var R=wU.exports,ZN={},PU={exports:{}},Na={},RU={exports:{}},kU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function e($,z){var K=$.length;$.push(z);e:for(;0<K;){var re=K-1>>>1,Q=$[re];if(0<i(Q,z))$[re]=z,$[K]=Q,K=re;else break e}}function t($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var z=$[0],K=$.pop();if(K!==z){$[0]=K;e:for(var re=0,Q=$.length,O=Q>>>1;re<O;){var te=2*(re+1)-1,W=$[te],de=te+1,fe=$[de];if(0>i(W,K))de<Q&&0>i(fe,W)?($[re]=fe,$[de]=K,re=de):($[re]=W,$[te]=K,re=te);else if(de<Q&&0>i(fe,K))$[re]=fe,$[de]=K,re=de;else break e}}return z}function i($,z){var K=$.sortIndex-z.sortIndex;return K!==0?K:$.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();r.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,h=null,d=3,f=!1,p=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y($){for(var z=t(u);z!==null;){if(z.callback===null)n(u);else if(z.startTime<=$)n(u),z.sortIndex=z.expirationTime,e(l,z);else break;z=t(u)}}function E($){if(g=!1,y($),!p)if(t(l)!==null)p=!0,P(w);else{var z=t(u);z!==null&&L(E,z.startTime-$)}}function w($,z){p=!1,g&&(g=!1,v(S),S=-1),f=!0;var K=d;try{for(y(z),h=t(l);h!==null&&(!(h.expirationTime>z)||$&&!_());){var re=h.callback;if(typeof re=="function"){h.callback=null,d=h.priorityLevel;var Q=re(h.expirationTime<=z);z=r.unstable_now(),typeof Q=="function"?h.callback=Q:h===t(l)&&n(l),y(z)}else n(l);h=t(l)}if(h!==null)var O=!0;else{var te=t(u);te!==null&&L(E,te.startTime-z),O=!1}return O}finally{h=null,d=K,f=!1}}var A=!1,T=null,S=-1,N=5,D=-1;function _(){return!(r.unstable_now()-D<N)}function M(){if(T!==null){var $=r.unstable_now();D=$;var z=!0;try{z=T(!0,$)}finally{z?I():(A=!1,T=null)}}else A=!1}var I;if(typeof x=="function")I=function(){x(M)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,q=V.port2;V.port1.onmessage=M,I=function(){q.postMessage(null)}}else I=function(){b(M,0)};function P($){T=$,A||(A=!0,I())}function L($,z){S=b(function(){$(r.unstable_now())},z)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function($){$.callback=null},r.unstable_continueExecution=function(){p||f||(p=!0,P(w))},r.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<$?Math.floor(1e3/$):5},r.unstable_getCurrentPriorityLevel=function(){return d},r.unstable_getFirstCallbackNode=function(){return t(l)},r.unstable_next=function($){switch(d){case 1:case 2:case 3:var z=3;break;default:z=d}var K=d;d=z;try{return $()}finally{d=K}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function($,z){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var K=d;d=$;try{return z()}finally{d=K}},r.unstable_scheduleCallback=function($,z,K){var re=r.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?re+K:re):K=re,$){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=K+Q,$={id:c++,callback:z,priorityLevel:$,startTime:K,expirationTime:Q,sortIndex:-1},K>re?($.sortIndex=K,e(u,$),t(l)===null&&$===t(u)&&(g?(v(S),S=-1):g=!0,L(E,K-re))):($.sortIndex=Q,e(l,$),p||f||(p=!0,P(w))),$},r.unstable_shouldYield=_,r.unstable_wrapCallback=function($){var z=d;return function(){var K=d;d=z;try{return $.apply(this,arguments)}finally{d=K}}}})(kU);RU.exports=kU;var eJ=RU.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tJ=he,Ta=eJ;function Fe(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FU=new Set,qb={};function cp(r,e){f0(r,e),f0(r+"Capture",e)}function f0(r,e){for(qb[r]=e,r=0;r<e.length;r++)FU.add(e[r])}var hc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eD=Object.prototype.hasOwnProperty,rJ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,s3={},a3={};function nJ(r){return eD.call(a3,r)?!0:eD.call(s3,r)?!1:rJ.test(r)?a3[r]=!0:(s3[r]=!0,!1)}function iJ(r,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function sJ(r,e,t,n){if(e===null||typeof e>"u"||iJ(r,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ss(r,e,t,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Pi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){Pi[r]=new Ss(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=r[0];Pi[e]=new Ss(e,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){Pi[r]=new Ss(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){Pi[r]=new Ss(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){Pi[r]=new Ss(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){Pi[r]=new Ss(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){Pi[r]=new Ss(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){Pi[r]=new Ss(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){Pi[r]=new Ss(r,5,!1,r.toLowerCase(),null,!1,!1)});var qP=/[\-:]([a-z])/g;function HP(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var e=r.replace(qP,HP);Pi[e]=new Ss(e,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var e=r.replace(qP,HP);Pi[e]=new Ss(e,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(qP,HP);Pi[e]=new Ss(e,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){Pi[r]=new Ss(r,1,!1,r.toLowerCase(),null,!1,!1)});Pi.xlinkHref=new Ss("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){Pi[r]=new Ss(r,1,!1,r.toLowerCase(),null,!0,!0)});function GP(r,e,t,n){var i=Pi.hasOwnProperty(e)?Pi[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sJ(e,t,i,n)&&(t=null),n||i===null?nJ(e)&&(t===null?r.removeAttribute(e):r.setAttribute(e,""+t)):i.mustUseProperty?r[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,n=i.attributeNamespace,t===null?r.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,n?r.setAttributeNS(n,e,t):r.setAttribute(e,t))))}var Nc=tJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R_=Symbol.for("react.element"),eg=Symbol.for("react.portal"),tg=Symbol.for("react.fragment"),WP=Symbol.for("react.strict_mode"),tD=Symbol.for("react.profiler"),OU=Symbol.for("react.provider"),BU=Symbol.for("react.context"),KP=Symbol.for("react.forward_ref"),rD=Symbol.for("react.suspense"),nD=Symbol.for("react.suspense_list"),XP=Symbol.for("react.memo"),jc=Symbol.for("react.lazy"),LU=Symbol.for("react.offscreen"),o3=Symbol.iterator;function Sy(r){return r===null||typeof r!="object"?null:(r=o3&&r[o3]||r["@@iterator"],typeof r=="function"?r:null)}var tn=Object.assign,P2;function zy(r){if(P2===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);P2=e&&e[1]||""}return`
`+P2+r}var R2=!1;function k2(r,e){if(!r||R2)return"";R2=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(r,[],e)}else{try{e.call()}catch(u){n=u}r.call(e.prototype)}else{try{throw Error()}catch(u){n=u}r()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return r.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",r.displayName)),l}while(1<=a&&0<=o);break}}}finally{R2=!1,Error.prepareStackTrace=t}return(r=r?r.displayName||r.name:"")?zy(r):""}function aJ(r){switch(r.tag){case 5:return zy(r.type);case 16:return zy("Lazy");case 13:return zy("Suspense");case 19:return zy("SuspenseList");case 0:case 2:case 15:return r=k2(r.type,!1),r;case 11:return r=k2(r.type.render,!1),r;case 1:return r=k2(r.type,!0),r;default:return""}}function iD(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case tg:return"Fragment";case eg:return"Portal";case tD:return"Profiler";case WP:return"StrictMode";case rD:return"Suspense";case nD:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case BU:return(r.displayName||"Context")+".Consumer";case OU:return(r._context.displayName||"Context")+".Provider";case KP:var e=r.render;return r=r.displayName,r||(r=e.displayName||e.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case XP:return e=r.displayName||null,e!==null?e:iD(r.type)||"Memo";case jc:e=r._payload,r=r._init;try{return iD(r(e))}catch{}}return null}function oJ(r){var e=r.type;switch(r.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=e.render,r=r.displayName||r.name||"",e.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return iD(e);case 8:return e===WP?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hd(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function $U(r){var e=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lJ(r){var e=$U(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),n=""+r[e];if(!r.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function k_(r){r._valueTracker||(r._valueTracker=lJ(r))}function VU(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return r&&(n=$U(r)?r.checked?"true":"false":r.value),r=n,r!==t?(e.setValue(r),!0):!1}function qE(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function sD(r,e){var t=e.checked;return tn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??r._wrapperState.initialChecked})}function l3(r,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=hd(e.value!=null?e.value:t),r._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function UU(r,e){e=e.checked,e!=null&&GP(r,"checked",e,!1)}function aD(r,e){UU(r,e);var t=hd(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&r.value===""||r.value!=t)&&(r.value=""+t):r.value!==""+t&&(r.value=""+t);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}e.hasOwnProperty("value")?oD(r,e.type,t):e.hasOwnProperty("defaultValue")&&oD(r,e.type,hd(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(r.defaultChecked=!!e.defaultChecked)}function u3(r,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+r._wrapperState.initialValue,t||e===r.value||(r.value=e),r.defaultValue=e}t=r.name,t!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,t!==""&&(r.name=t)}function oD(r,e,t){(e!=="number"||qE(r.ownerDocument)!==r)&&(t==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+t&&(r.defaultValue=""+t))}var jy=Array.isArray;function Cg(r,e,t,n){if(r=r.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<r.length;t++)i=e.hasOwnProperty("$"+r[t].value),r[t].selected!==i&&(r[t].selected=i),i&&n&&(r[t].defaultSelected=!0)}else{for(t=""+hd(t),e=null,i=0;i<r.length;i++){if(r[i].value===t){r[i].selected=!0,n&&(r[i].defaultSelected=!0);return}e!==null||r[i].disabled||(e=r[i])}e!==null&&(e.selected=!0)}}function lD(r,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return tn({},e,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function c3(r,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Fe(92));if(jy(t)){if(1<t.length)throw Error(Fe(93));t=t[0]}e=t}e==null&&(e=""),t=e}r._wrapperState={initialValue:hd(t)}}function zU(r,e){var t=hd(e.value),n=hd(e.defaultValue);t!=null&&(t=""+t,t!==r.value&&(r.value=t),e.defaultValue==null&&r.defaultValue!==t&&(r.defaultValue=t)),n!=null&&(r.defaultValue=""+n)}function h3(r){var e=r.textContent;e===r._wrapperState.initialValue&&e!==""&&e!==null&&(r.value=e)}function jU(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uD(r,e){return r==null||r==="http://www.w3.org/1999/xhtml"?jU(e):r==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var F_,qU=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return r(e,t,n,i)})}:r}(function(r,e){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=e;else{for(F_=F_||document.createElement("div"),F_.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=F_.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;e.firstChild;)r.appendChild(e.firstChild)}});function Hb(r,e){if(e){var t=r.firstChild;if(t&&t===r.lastChild&&t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var _b={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uJ=["Webkit","ms","Moz","O"];Object.keys(_b).forEach(function(r){uJ.forEach(function(e){e=e+r.charAt(0).toUpperCase()+r.substring(1),_b[e]=_b[r]})});function HU(r,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||_b.hasOwnProperty(r)&&_b[r]?(""+e).trim():e+"px"}function GU(r,e){r=r.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,i=HU(t,e[t],n);t==="float"&&(t="cssFloat"),n?r.setProperty(t,i):r[t]=i}}var cJ=tn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cD(r,e){if(e){if(cJ[r]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Fe(137,r));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Fe(62))}}function hD(r,e){if(r.indexOf("-")===-1)return typeof e.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dD=null;function YP(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var fD=null,Ng=null,Dg=null;function d3(r){if(r=Dx(r)){if(typeof fD!="function")throw Error(Fe(280));var e=r.stateNode;e&&(e=ZT(e),fD(r.stateNode,r.type,e))}}function WU(r){Ng?Dg?Dg.push(r):Dg=[r]:Ng=r}function KU(){if(Ng){var r=Ng,e=Dg;if(Dg=Ng=null,d3(r),e)for(r=0;r<e.length;r++)d3(e[r])}}function XU(r,e){return r(e)}function YU(){}var F2=!1;function QU(r,e,t){if(F2)return r(e,t);F2=!0;try{return XU(r,e,t)}finally{F2=!1,(Ng!==null||Dg!==null)&&(YU(),KU())}}function Gb(r,e){var t=r.stateNode;if(t===null)return null;var n=ZT(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(t&&typeof t!="function")throw Error(Fe(231,e,typeof t));return t}var mD=!1;if(hc)try{var Ty={};Object.defineProperty(Ty,"passive",{get:function(){mD=!0}}),window.addEventListener("test",Ty,Ty),window.removeEventListener("test",Ty,Ty)}catch{mD=!1}function hJ(r,e,t,n,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var Ab=!1,HE=null,GE=!1,pD=null,dJ={onError:function(r){Ab=!0,HE=r}};function fJ(r,e,t,n,i,s,a,o,l){Ab=!1,HE=null,hJ.apply(dJ,arguments)}function mJ(r,e,t,n,i,s,a,o,l){if(fJ.apply(this,arguments),Ab){if(Ab){var u=HE;Ab=!1,HE=null}else throw Error(Fe(198));GE||(GE=!0,pD=u)}}function hp(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,e.flags&4098&&(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function JU(r){if(r.tag===13){var e=r.memoizedState;if(e===null&&(r=r.alternate,r!==null&&(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function f3(r){if(hp(r)!==r)throw Error(Fe(188))}function pJ(r){var e=r.alternate;if(!e){if(e=hp(r),e===null)throw Error(Fe(188));return e!==r?null:r}for(var t=r,n=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){t=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return f3(i),r;if(s===n)return f3(i),e;s=s.sibling}throw Error(Fe(188))}if(t.return!==n.return)t=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===t){a=!0,t=i,n=s;break}if(o===n){a=!0,n=i,t=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===t){a=!0,t=s,n=i;break}if(o===n){a=!0,n=s,t=i;break}o=o.sibling}if(!a)throw Error(Fe(189))}}if(t.alternate!==n)throw Error(Fe(190))}if(t.tag!==3)throw Error(Fe(188));return t.stateNode.current===t?r:e}function ZU(r){return r=pJ(r),r!==null?e9(r):null}function e9(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var e=e9(r);if(e!==null)return e;r=r.sibling}return null}var t9=Ta.unstable_scheduleCallback,m3=Ta.unstable_cancelCallback,gJ=Ta.unstable_shouldYield,vJ=Ta.unstable_requestPaint,An=Ta.unstable_now,yJ=Ta.unstable_getCurrentPriorityLevel,QP=Ta.unstable_ImmediatePriority,r9=Ta.unstable_UserBlockingPriority,WE=Ta.unstable_NormalPriority,bJ=Ta.unstable_LowPriority,n9=Ta.unstable_IdlePriority,XT=null,Bl=null;function wJ(r){if(Bl&&typeof Bl.onCommitFiberRoot=="function")try{Bl.onCommitFiberRoot(XT,r,void 0,(r.current.flags&128)===128)}catch{}}var qo=Math.clz32?Math.clz32:AJ,xJ=Math.log,_J=Math.LN2;function AJ(r){return r>>>=0,r===0?32:31-(xJ(r)/_J|0)|0}var O_=64,B_=4194304;function qy(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function KE(r,e){var t=r.pendingLanes;if(t===0)return 0;var n=0,i=r.suspendedLanes,s=r.pingedLanes,a=t&268435455;if(a!==0){var o=a&~i;o!==0?n=qy(o):(s&=a,s!==0&&(n=qy(s)))}else a=t&~i,a!==0?n=qy(a):s!==0&&(n=qy(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=t&16),e=r.entangledLanes,e!==0)for(r=r.entanglements,e&=n;0<e;)t=31-qo(e),i=1<<t,n|=r[t],e&=~i;return n}function EJ(r,e){switch(r){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SJ(r,e){for(var t=r.suspendedLanes,n=r.pingedLanes,i=r.expirationTimes,s=r.pendingLanes;0<s;){var a=31-qo(s),o=1<<a,l=i[a];l===-1?(!(o&t)||o&n)&&(i[a]=EJ(o,e)):l<=e&&(r.expiredLanes|=o),s&=~o}}function gD(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function i9(){var r=O_;return O_<<=1,!(O_&4194240)&&(O_=64),r}function O2(r){for(var e=[],t=0;31>t;t++)e.push(r);return e}function Cx(r,e,t){r.pendingLanes|=e,e!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,e=31-qo(e),r[e]=t}function TJ(r,e){var t=r.pendingLanes&~e;r.pendingLanes=e,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=e,r.mutableReadLanes&=e,r.entangledLanes&=e,e=r.entanglements;var n=r.eventTimes;for(r=r.expirationTimes;0<t;){var i=31-qo(t),s=1<<i;e[i]=0,n[i]=-1,r[i]=-1,t&=~s}}function JP(r,e){var t=r.entangledLanes|=e;for(r=r.entanglements;t;){var n=31-qo(t),i=1<<n;i&e|r[n]&e&&(r[n]|=e),t&=~i}}var fr=0;function s9(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var a9,ZP,o9,l9,u9,vD=!1,L_=[],Qh=null,Jh=null,Zh=null,Wb=new Map,Kb=new Map,Wc=[],CJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function p3(r,e){switch(r){case"focusin":case"focusout":Qh=null;break;case"dragenter":case"dragleave":Jh=null;break;case"mouseover":case"mouseout":Zh=null;break;case"pointerover":case"pointerout":Wb.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kb.delete(e.pointerId)}}function Cy(r,e,t,n,i,s){return r===null||r.nativeEvent!==s?(r={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Dx(e),e!==null&&ZP(e)),r):(r.eventSystemFlags|=n,e=r.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),r)}function NJ(r,e,t,n,i){switch(e){case"focusin":return Qh=Cy(Qh,r,e,t,n,i),!0;case"dragenter":return Jh=Cy(Jh,r,e,t,n,i),!0;case"mouseover":return Zh=Cy(Zh,r,e,t,n,i),!0;case"pointerover":var s=i.pointerId;return Wb.set(s,Cy(Wb.get(s)||null,r,e,t,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Kb.set(s,Cy(Kb.get(s)||null,r,e,t,n,i)),!0}return!1}function c9(r){var e=vf(r.target);if(e!==null){var t=hp(e);if(t!==null){if(e=t.tag,e===13){if(e=JU(t),e!==null){r.blockedOn=e,u9(r.priority,function(){o9(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function OA(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0<e.length;){var t=yD(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t===null){t=r.nativeEvent;var n=new t.constructor(t.type,t);dD=n,t.target.dispatchEvent(n),dD=null}else return e=Dx(t),e!==null&&ZP(e),r.blockedOn=t,!1;e.shift()}return!0}function g3(r,e,t){OA(r)&&t.delete(e)}function DJ(){vD=!1,Qh!==null&&OA(Qh)&&(Qh=null),Jh!==null&&OA(Jh)&&(Jh=null),Zh!==null&&OA(Zh)&&(Zh=null),Wb.forEach(g3),Kb.forEach(g3)}function Ny(r,e){r.blockedOn===e&&(r.blockedOn=null,vD||(vD=!0,Ta.unstable_scheduleCallback(Ta.unstable_NormalPriority,DJ)))}function Xb(r){function e(i){return Ny(i,r)}if(0<L_.length){Ny(L_[0],r);for(var t=1;t<L_.length;t++){var n=L_[t];n.blockedOn===r&&(n.blockedOn=null)}}for(Qh!==null&&Ny(Qh,r),Jh!==null&&Ny(Jh,r),Zh!==null&&Ny(Zh,r),Wb.forEach(e),Kb.forEach(e),t=0;t<Wc.length;t++)n=Wc[t],n.blockedOn===r&&(n.blockedOn=null);for(;0<Wc.length&&(t=Wc[0],t.blockedOn===null);)c9(t),t.blockedOn===null&&Wc.shift()}var Mg=Nc.ReactCurrentBatchConfig,XE=!0;function MJ(r,e,t,n){var i=fr,s=Mg.transition;Mg.transition=null;try{fr=1,eR(r,e,t,n)}finally{fr=i,Mg.transition=s}}function IJ(r,e,t,n){var i=fr,s=Mg.transition;Mg.transition=null;try{fr=4,eR(r,e,t,n)}finally{fr=i,Mg.transition=s}}function eR(r,e,t,n){if(XE){var i=yD(r,e,t,n);if(i===null)G2(r,e,n,YE,t),p3(r,n);else if(NJ(i,r,e,t,n))n.stopPropagation();else if(p3(r,n),e&4&&-1<CJ.indexOf(r)){for(;i!==null;){var s=Dx(i);if(s!==null&&a9(s),s=yD(r,e,t,n),s===null&&G2(r,e,n,YE,t),s===i)break;i=s}i!==null&&n.stopPropagation()}else G2(r,e,n,null,t)}}var YE=null;function yD(r,e,t,n){if(YE=null,r=YP(n),r=vf(r),r!==null)if(e=hp(r),e===null)r=null;else if(t=e.tag,t===13){if(r=JU(e),r!==null)return r;r=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;r=null}else e!==r&&(r=null);return YE=r,null}function h9(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yJ()){case QP:return 1;case r9:return 4;case WE:case bJ:return 16;case n9:return 536870912;default:return 16}default:return 16}}var Hh=null,tR=null,BA=null;function d9(){if(BA)return BA;var r,e=tR,t=e.length,n,i="value"in Hh?Hh.value:Hh.textContent,s=i.length;for(r=0;r<t&&e[r]===i[r];r++);var a=t-r;for(n=1;n<=a&&e[t-n]===i[s-n];n++);return BA=i.slice(r,1<n?1-n:void 0)}function LA(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}function $_(){return!0}function v3(){return!1}function Da(r){function e(t,n,i,s,a){this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in r)r.hasOwnProperty(o)&&(t=r[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$_:v3,this.isPropagationStopped=v3,this}return tn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=$_)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=$_)},persist:function(){},isPersistent:$_}),e}var B0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rR=Da(B0),Nx=tn({},B0,{view:0,detail:0}),PJ=Da(Nx),B2,L2,Dy,YT=tn({},Nx,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nR,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Dy&&(Dy&&r.type==="mousemove"?(B2=r.screenX-Dy.screenX,L2=r.screenY-Dy.screenY):L2=B2=0,Dy=r),B2)},movementY:function(r){return"movementY"in r?r.movementY:L2}}),y3=Da(YT),RJ=tn({},YT,{dataTransfer:0}),kJ=Da(RJ),FJ=tn({},Nx,{relatedTarget:0}),$2=Da(FJ),OJ=tn({},B0,{animationName:0,elapsedTime:0,pseudoElement:0}),BJ=Da(OJ),LJ=tn({},B0,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),$J=Da(LJ),VJ=tn({},B0,{data:0}),b3=Da(VJ),UJ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zJ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jJ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qJ(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=jJ[r])?!!e[r]:!1}function nR(){return qJ}var HJ=tn({},Nx,{key:function(r){if(r.key){var e=UJ[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=LA(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?zJ[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nR,charCode:function(r){return r.type==="keypress"?LA(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?LA(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),GJ=Da(HJ),WJ=tn({},YT,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w3=Da(WJ),KJ=tn({},Nx,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nR}),XJ=Da(KJ),YJ=tn({},B0,{propertyName:0,elapsedTime:0,pseudoElement:0}),QJ=Da(YJ),JJ=tn({},YT,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ZJ=Da(JJ),eZ=[9,13,27,32],iR=hc&&"CompositionEvent"in window,Eb=null;hc&&"documentMode"in document&&(Eb=document.documentMode);var tZ=hc&&"TextEvent"in window&&!Eb,f9=hc&&(!iR||Eb&&8<Eb&&11>=Eb),x3=" ",_3=!1;function m9(r,e){switch(r){case"keyup":return eZ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function p9(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var rg=!1;function rZ(r,e){switch(r){case"compositionend":return p9(e);case"keypress":return e.which!==32?null:(_3=!0,x3);case"textInput":return r=e.data,r===x3&&_3?null:r;default:return null}}function nZ(r,e){if(rg)return r==="compositionend"||!iR&&m9(r,e)?(r=d9(),BA=tR=Hh=null,rg=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return f9&&e.locale!=="ko"?null:e.data;default:return null}}var iZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A3(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e==="input"?!!iZ[r.type]:e==="textarea"}function g9(r,e,t,n){WU(n),e=QE(e,"onChange"),0<e.length&&(t=new rR("onChange","change",null,t,n),r.push({event:t,listeners:e}))}var Sb=null,Yb=null;function sZ(r){C9(r,0)}function QT(r){var e=sg(r);if(VU(e))return r}function aZ(r,e){if(r==="change")return e}var v9=!1;if(hc){var V2;if(hc){var U2="oninput"in document;if(!U2){var E3=document.createElement("div");E3.setAttribute("oninput","return;"),U2=typeof E3.oninput=="function"}V2=U2}else V2=!1;v9=V2&&(!document.documentMode||9<document.documentMode)}function S3(){Sb&&(Sb.detachEvent("onpropertychange",y9),Yb=Sb=null)}function y9(r){if(r.propertyName==="value"&&QT(Yb)){var e=[];g9(e,Yb,r,YP(r)),QU(sZ,e)}}function oZ(r,e,t){r==="focusin"?(S3(),Sb=e,Yb=t,Sb.attachEvent("onpropertychange",y9)):r==="focusout"&&S3()}function lZ(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return QT(Yb)}function uZ(r,e){if(r==="click")return QT(e)}function cZ(r,e){if(r==="input"||r==="change")return QT(e)}function hZ(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Wo=typeof Object.is=="function"?Object.is:hZ;function Qb(r,e){if(Wo(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var i=t[n];if(!eD.call(e,i)||!Wo(r[i],e[i]))return!1}return!0}function T3(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function C3(r,e){var t=T3(r);r=0;for(var n;t;){if(t.nodeType===3){if(n=r+t.textContent.length,r<=e&&n>=e)return{node:t,offset:e-r};r=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=T3(t)}}function b9(r,e){return r&&e?r===e?!0:r&&r.nodeType===3?!1:e&&e.nodeType===3?b9(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&16):!1:!1}function w9(){for(var r=window,e=qE();e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)r=e.contentWindow;else break;e=qE(r.document)}return e}function sR(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e&&(e==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}function dZ(r){var e=w9(),t=r.focusedElem,n=r.selectionRange;if(e!==t&&t&&t.ownerDocument&&b9(t.ownerDocument.documentElement,t)){if(n!==null&&sR(t)){if(e=n.start,r=n.end,r===void 0&&(r=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(r,t.value.length);else if(r=(e=t.ownerDocument||document)&&e.defaultView||window,r.getSelection){r=r.getSelection();var i=t.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!r.extend&&s>n&&(i=n,n=s,s=i),i=C3(t,s);var a=C3(t,n);i&&a&&(r.rangeCount!==1||r.anchorNode!==i.node||r.anchorOffset!==i.offset||r.focusNode!==a.node||r.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),r.removeAllRanges(),s>n?(r.addRange(e),r.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),r.addRange(e)))}}for(e=[],r=t;r=r.parentNode;)r.nodeType===1&&e.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)r=e[t],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var fZ=hc&&"documentMode"in document&&11>=document.documentMode,ng=null,bD=null,Tb=null,wD=!1;function N3(r,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;wD||ng==null||ng!==qE(n)||(n=ng,"selectionStart"in n&&sR(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Tb&&Qb(Tb,n)||(Tb=n,n=QE(bD,"onSelect"),0<n.length&&(e=new rR("onSelect","select",null,e,t),r.push({event:e,listeners:n}),e.target=ng)))}function V_(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var ig={animationend:V_("Animation","AnimationEnd"),animationiteration:V_("Animation","AnimationIteration"),animationstart:V_("Animation","AnimationStart"),transitionend:V_("Transition","TransitionEnd")},z2={},x9={};hc&&(x9=document.createElement("div").style,"AnimationEvent"in window||(delete ig.animationend.animation,delete ig.animationiteration.animation,delete ig.animationstart.animation),"TransitionEvent"in window||delete ig.transitionend.transition);function JT(r){if(z2[r])return z2[r];if(!ig[r])return r;var e=ig[r],t;for(t in e)if(e.hasOwnProperty(t)&&t in x9)return z2[r]=e[t];return r}var _9=JT("animationend"),A9=JT("animationiteration"),E9=JT("animationstart"),S9=JT("transitionend"),T9=new Map,D3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Id(r,e){T9.set(r,e),cp(e,[r])}for(var j2=0;j2<D3.length;j2++){var q2=D3[j2],mZ=q2.toLowerCase(),pZ=q2[0].toUpperCase()+q2.slice(1);Id(mZ,"on"+pZ)}Id(_9,"onAnimationEnd");Id(A9,"onAnimationIteration");Id(E9,"onAnimationStart");Id("dblclick","onDoubleClick");Id("focusin","onFocus");Id("focusout","onBlur");Id(S9,"onTransitionEnd");f0("onMouseEnter",["mouseout","mouseover"]);f0("onMouseLeave",["mouseout","mouseover"]);f0("onPointerEnter",["pointerout","pointerover"]);f0("onPointerLeave",["pointerout","pointerover"]);cp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cp("onBeforeInput",["compositionend","keypress","textInput","paste"]);cp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gZ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hy));function M3(r,e,t){var n=r.type||"unknown-event";r.currentTarget=t,mJ(n,e,void 0,r),r.currentTarget=null}function C9(r,e){e=(e&4)!==0;for(var t=0;t<r.length;t++){var n=r[t],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;M3(i,o,u),s=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;M3(i,o,u),s=l}}}if(GE)throw r=pD,GE=!1,pD=null,r}function Br(r,e){var t=e[SD];t===void 0&&(t=e[SD]=new Set);var n=r+"__bubble";t.has(n)||(N9(e,r,2,!1),t.add(n))}function H2(r,e,t){var n=0;e&&(n|=4),N9(t,r,n,e)}var U_="_reactListening"+Math.random().toString(36).slice(2);function Jb(r){if(!r[U_]){r[U_]=!0,FU.forEach(function(t){t!=="selectionchange"&&(gZ.has(t)||H2(t,!1,r),H2(t,!0,r))});var e=r.nodeType===9?r:r.ownerDocument;e===null||e[U_]||(e[U_]=!0,H2("selectionchange",!1,e))}}function N9(r,e,t,n){switch(h9(e)){case 1:var i=MJ;break;case 4:i=IJ;break;default:i=eR}t=i.bind(null,e,t,r),i=void 0,!mD||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?r.addEventListener(e,t,{capture:!0,passive:i}):r.addEventListener(e,t,!0):i!==void 0?r.addEventListener(e,t,{passive:i}):r.addEventListener(e,t,!1)}function G2(r,e,t,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=vf(o),a===null)return;if(l=a.tag,l===5||l===6){n=s=a;continue e}o=o.parentNode}}n=n.return}QU(function(){var u=s,c=YP(t),h=[];e:{var d=T9.get(r);if(d!==void 0){var f=rR,p=r;switch(r){case"keypress":if(LA(t)===0)break e;case"keydown":case"keyup":f=GJ;break;case"focusin":p="focus",f=$2;break;case"focusout":p="blur",f=$2;break;case"beforeblur":case"afterblur":f=$2;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=y3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=kJ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=XJ;break;case _9:case A9:case E9:f=BJ;break;case S9:f=QJ;break;case"scroll":f=PJ;break;case"wheel":f=ZJ;break;case"copy":case"cut":case"paste":f=$J;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=w3}var g=(e&4)!==0,b=!g&&r==="scroll",v=g?d!==null?d+"Capture":null:d;g=[];for(var x=u,y;x!==null;){y=x;var E=y.stateNode;if(y.tag===5&&E!==null&&(y=E,v!==null&&(E=Gb(x,v),E!=null&&g.push(Zb(x,E,y)))),b)break;x=x.return}0<g.length&&(d=new f(d,p,null,t,c),h.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=r==="mouseover"||r==="pointerover",f=r==="mouseout"||r==="pointerout",d&&t!==dD&&(p=t.relatedTarget||t.fromElement)&&(vf(p)||p[dc]))break e;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=t.relatedTarget||t.toElement,f=u,p=p?vf(p):null,p!==null&&(b=hp(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(g=y3,E="onMouseLeave",v="onMouseEnter",x="mouse",(r==="pointerout"||r==="pointerover")&&(g=w3,E="onPointerLeave",v="onPointerEnter",x="pointer"),b=f==null?d:sg(f),y=p==null?d:sg(p),d=new g(E,x+"leave",f,t,c),d.target=b,d.relatedTarget=y,E=null,vf(c)===u&&(g=new g(v,x+"enter",p,t,c),g.target=y,g.relatedTarget=b,E=g),b=E,f&&p)t:{for(g=f,v=p,x=0,y=g;y;y=Rp(y))x++;for(y=0,E=v;E;E=Rp(E))y++;for(;0<x-y;)g=Rp(g),x--;for(;0<y-x;)v=Rp(v),y--;for(;x--;){if(g===v||v!==null&&g===v.alternate)break t;g=Rp(g),v=Rp(v)}g=null}else g=null;f!==null&&I3(h,d,f,g,!1),p!==null&&b!==null&&I3(h,b,p,g,!0)}}e:{if(d=u?sg(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var w=aZ;else if(A3(d))if(v9)w=cZ;else{w=lZ;var A=oZ}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=uZ);if(w&&(w=w(r,u))){g9(h,w,t,c);break e}A&&A(r,d,u),r==="focusout"&&(A=d._wrapperState)&&A.controlled&&d.type==="number"&&oD(d,"number",d.value)}switch(A=u?sg(u):window,r){case"focusin":(A3(A)||A.contentEditable==="true")&&(ng=A,bD=u,Tb=null);break;case"focusout":Tb=bD=ng=null;break;case"mousedown":wD=!0;break;case"contextmenu":case"mouseup":case"dragend":wD=!1,N3(h,t,c);break;case"selectionchange":if(fZ)break;case"keydown":case"keyup":N3(h,t,c)}var T;if(iR)e:{switch(r){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else rg?m9(r,t)&&(S="onCompositionEnd"):r==="keydown"&&t.keyCode===229&&(S="onCompositionStart");S&&(f9&&t.locale!=="ko"&&(rg||S!=="onCompositionStart"?S==="onCompositionEnd"&&rg&&(T=d9()):(Hh=c,tR="value"in Hh?Hh.value:Hh.textContent,rg=!0)),A=QE(u,S),0<A.length&&(S=new b3(S,r,null,t,c),h.push({event:S,listeners:A}),T?S.data=T:(T=p9(t),T!==null&&(S.data=T)))),(T=tZ?rZ(r,t):nZ(r,t))&&(u=QE(u,"onBeforeInput"),0<u.length&&(c=new b3("onBeforeInput","beforeinput",null,t,c),h.push({event:c,listeners:u}),c.data=T))}C9(h,e)})}function Zb(r,e,t){return{instance:r,listener:e,currentTarget:t}}function QE(r,e){for(var t=e+"Capture",n=[];r!==null;){var i=r,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Gb(r,t),s!=null&&n.unshift(Zb(r,s,i)),s=Gb(r,e),s!=null&&n.push(Zb(r,s,i))),r=r.return}return n}function Rp(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function I3(r,e,t,n,i){for(var s=e._reactName,a=[];t!==null&&t!==n;){var o=t,l=o.alternate,u=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&u!==null&&(o=u,i?(l=Gb(t,s),l!=null&&a.unshift(Zb(t,l,o))):i||(l=Gb(t,s),l!=null&&a.push(Zb(t,l,o)))),t=t.return}a.length!==0&&r.push({event:e,listeners:a})}var vZ=/\r\n?/g,yZ=/\u0000|\uFFFD/g;function P3(r){return(typeof r=="string"?r:""+r).replace(vZ,`
`).replace(yZ,"")}function z_(r,e,t){if(e=P3(e),P3(r)!==e&&t)throw Error(Fe(425))}function JE(){}var xD=null,_D=null;function AD(r,e){return r==="textarea"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ED=typeof setTimeout=="function"?setTimeout:void 0,bZ=typeof clearTimeout=="function"?clearTimeout:void 0,R3=typeof Promise=="function"?Promise:void 0,wZ=typeof queueMicrotask=="function"?queueMicrotask:typeof R3<"u"?function(r){return R3.resolve(null).then(r).catch(xZ)}:ED;function xZ(r){setTimeout(function(){throw r})}function W2(r,e){var t=e,n=0;do{var i=t.nextSibling;if(r.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(n===0){r.removeChild(i),Xb(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=i}while(t);Xb(e)}function ed(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break;if(e===8){if(e=r.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return r}function k3(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&&e++}r=r.previousSibling}return null}var L0=Math.random().toString(36).slice(2),kl="__reactFiber$"+L0,e1="__reactProps$"+L0,dc="__reactContainer$"+L0,SD="__reactEvents$"+L0,_Z="__reactListeners$"+L0,AZ="__reactHandles$"+L0;function vf(r){var e=r[kl];if(e)return e;for(var t=r.parentNode;t;){if(e=t[dc]||t[kl]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(r=k3(r);r!==null;){if(t=r[kl])return t;r=k3(r)}return e}r=t,t=r.parentNode}return null}function Dx(r){return r=r[kl]||r[dc],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function sg(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(Fe(33))}function ZT(r){return r[e1]||null}var TD=[],ag=-1;function Pd(r){return{current:r}}function Vr(r){0>ag||(r.current=TD[ag],TD[ag]=null,ag--)}function kr(r,e){ag++,TD[ag]=r.current,r.current=e}var dd={},es=Pd(dd),js=Pd(!1),Km=dd;function m0(r,e){var t=r.type.contextTypes;if(!t)return dd;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=i),i}function qs(r){return r=r.childContextTypes,r!=null}function ZE(){Vr(js),Vr(es)}function F3(r,e,t){if(es.current!==dd)throw Error(Fe(168));kr(es,e),kr(js,t)}function D9(r,e,t){var n=r.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Fe(108,oJ(r)||"Unknown",i));return tn({},t,n)}function eS(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||dd,Km=es.current,kr(es,r),kr(js,js.current),!0}function O3(r,e,t){var n=r.stateNode;if(!n)throw Error(Fe(169));t?(r=D9(r,e,Km),n.__reactInternalMemoizedMergedChildContext=r,Vr(js),Vr(es),kr(es,r)):Vr(js),kr(js,t)}var mu=null,eC=!1,K2=!1;function M9(r){mu===null?mu=[r]:mu.push(r)}function EZ(r){eC=!0,M9(r)}function Rd(){if(!K2&&mu!==null){K2=!0;var r=0,e=fr;try{var t=mu;for(fr=1;r<t.length;r++){var n=t[r];do n=n(!0);while(n!==null)}mu=null,eC=!1}catch(i){throw mu!==null&&(mu=mu.slice(r+1)),t9(QP,Rd),i}finally{fr=e,K2=!1}}return null}var og=[],lg=0,tS=null,rS=0,Za=[],eo=0,Xm=null,Yu=1,Qu="";function sf(r,e){og[lg++]=rS,og[lg++]=tS,tS=r,rS=e}function I9(r,e,t){Za[eo++]=Yu,Za[eo++]=Qu,Za[eo++]=Xm,Xm=r;var n=Yu;r=Qu;var i=32-qo(n)-1;n&=~(1<<i),t+=1;var s=32-qo(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Yu=1<<32-qo(e)+i|t<<i|n,Qu=s+r}else Yu=1<<s|t<<i|n,Qu=r}function aR(r){r.return!==null&&(sf(r,1),I9(r,1,0))}function oR(r){for(;r===tS;)tS=og[--lg],og[lg]=null,rS=og[--lg],og[lg]=null;for(;r===Xm;)Xm=Za[--eo],Za[eo]=null,Qu=Za[--eo],Za[eo]=null,Yu=Za[--eo],Za[eo]=null}var Ea=null,_a=null,Hr=!1,$o=null;function P9(r,e){var t=io(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=r,e=r.deletions,e===null?(r.deletions=[t],r.flags|=16):e.push(t)}function B3(r,e){switch(r.tag){case 5:var t=r.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(r.stateNode=e,Ea=r,_a=ed(e.firstChild),!0):!1;case 6:return e=r.pendingProps===""||e.nodeType!==3?null:e,e!==null?(r.stateNode=e,Ea=r,_a=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Xm!==null?{id:Yu,overflow:Qu}:null,r.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=io(18,null,null,0),t.stateNode=e,t.return=r,r.child=t,Ea=r,_a=null,!0):!1;default:return!1}}function CD(r){return(r.mode&1)!==0&&(r.flags&128)===0}function ND(r){if(Hr){var e=_a;if(e){var t=e;if(!B3(r,e)){if(CD(r))throw Error(Fe(418));e=ed(t.nextSibling);var n=Ea;e&&B3(r,e)?P9(n,t):(r.flags=r.flags&-4097|2,Hr=!1,Ea=r)}}else{if(CD(r))throw Error(Fe(418));r.flags=r.flags&-4097|2,Hr=!1,Ea=r}}}function L3(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Ea=r}function j_(r){if(r!==Ea)return!1;if(!Hr)return L3(r),Hr=!0,!1;var e;if((e=r.tag!==3)&&!(e=r.tag!==5)&&(e=r.type,e=e!=="head"&&e!=="body"&&!AD(r.type,r.memoizedProps)),e&&(e=_a)){if(CD(r))throw R9(),Error(Fe(418));for(;e;)P9(r,e),e=ed(e.nextSibling)}if(L3(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Fe(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="/$"){if(e===0){_a=ed(r.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}r=r.nextSibling}_a=null}}else _a=Ea?ed(r.stateNode.nextSibling):null;return!0}function R9(){for(var r=_a;r;)r=ed(r.nextSibling)}function p0(){_a=Ea=null,Hr=!1}function lR(r){$o===null?$o=[r]:$o.push(r)}var SZ=Nc.ReactCurrentBatchConfig;function My(r,e,t){if(r=t.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Fe(309));var n=t.stateNode}if(!n)throw Error(Fe(147,r));var i=n,s=""+r;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof r!="string")throw Error(Fe(284));if(!t._owner)throw Error(Fe(290,r))}return r}function q_(r,e){throw r=Object.prototype.toString.call(e),Error(Fe(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r))}function $3(r){var e=r._init;return e(r._payload)}function k9(r){function e(v,x){if(r){var y=v.deletions;y===null?(v.deletions=[x],v.flags|=16):y.push(x)}}function t(v,x){if(!r)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function n(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function i(v,x){return v=id(v,x),v.index=0,v.sibling=null,v}function s(v,x,y){return v.index=y,r?(y=v.alternate,y!==null?(y=y.index,y<x?(v.flags|=2,x):y):(v.flags|=2,x)):(v.flags|=1048576,x)}function a(v){return r&&v.alternate===null&&(v.flags|=2),v}function o(v,x,y,E){return x===null||x.tag!==6?(x=tN(y,v.mode,E),x.return=v,x):(x=i(x,y),x.return=v,x)}function l(v,x,y,E){var w=y.type;return w===tg?c(v,x,y.props.children,E,y.key):x!==null&&(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===jc&&$3(w)===x.type)?(E=i(x,y.props),E.ref=My(v,x,y),E.return=v,E):(E=HA(y.type,y.key,y.props,null,v.mode,E),E.ref=My(v,x,y),E.return=v,E)}function u(v,x,y,E){return x===null||x.tag!==4||x.stateNode.containerInfo!==y.containerInfo||x.stateNode.implementation!==y.implementation?(x=rN(y,v.mode,E),x.return=v,x):(x=i(x,y.children||[]),x.return=v,x)}function c(v,x,y,E,w){return x===null||x.tag!==7?(x=Um(y,v.mode,E,w),x.return=v,x):(x=i(x,y),x.return=v,x)}function h(v,x,y){if(typeof x=="string"&&x!==""||typeof x=="number")return x=tN(""+x,v.mode,y),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case R_:return y=HA(x.type,x.key,x.props,null,v.mode,y),y.ref=My(v,null,x),y.return=v,y;case eg:return x=rN(x,v.mode,y),x.return=v,x;case jc:var E=x._init;return h(v,E(x._payload),y)}if(jy(x)||Sy(x))return x=Um(x,v.mode,y,null),x.return=v,x;q_(v,x)}return null}function d(v,x,y,E){var w=x!==null?x.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return w!==null?null:o(v,x,""+y,E);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case R_:return y.key===w?l(v,x,y,E):null;case eg:return y.key===w?u(v,x,y,E):null;case jc:return w=y._init,d(v,x,w(y._payload),E)}if(jy(y)||Sy(y))return w!==null?null:c(v,x,y,E,null);q_(v,y)}return null}function f(v,x,y,E,w){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(y)||null,o(x,v,""+E,w);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case R_:return v=v.get(E.key===null?y:E.key)||null,l(x,v,E,w);case eg:return v=v.get(E.key===null?y:E.key)||null,u(x,v,E,w);case jc:var A=E._init;return f(v,x,y,A(E._payload),w)}if(jy(E)||Sy(E))return v=v.get(y)||null,c(x,v,E,w,null);q_(x,E)}return null}function p(v,x,y,E){for(var w=null,A=null,T=x,S=x=0,N=null;T!==null&&S<y.length;S++){T.index>S?(N=T,T=null):N=T.sibling;var D=d(v,T,y[S],E);if(D===null){T===null&&(T=N);break}r&&T&&D.alternate===null&&e(v,T),x=s(D,x,S),A===null?w=D:A.sibling=D,A=D,T=N}if(S===y.length)return t(v,T),Hr&&sf(v,S),w;if(T===null){for(;S<y.length;S++)T=h(v,y[S],E),T!==null&&(x=s(T,x,S),A===null?w=T:A.sibling=T,A=T);return Hr&&sf(v,S),w}for(T=n(v,T);S<y.length;S++)N=f(T,v,S,y[S],E),N!==null&&(r&&N.alternate!==null&&T.delete(N.key===null?S:N.key),x=s(N,x,S),A===null?w=N:A.sibling=N,A=N);return r&&T.forEach(function(_){return e(v,_)}),Hr&&sf(v,S),w}function g(v,x,y,E){var w=Sy(y);if(typeof w!="function")throw Error(Fe(150));if(y=w.call(y),y==null)throw Error(Fe(151));for(var A=w=null,T=x,S=x=0,N=null,D=y.next();T!==null&&!D.done;S++,D=y.next()){T.index>S?(N=T,T=null):N=T.sibling;var _=d(v,T,D.value,E);if(_===null){T===null&&(T=N);break}r&&T&&_.alternate===null&&e(v,T),x=s(_,x,S),A===null?w=_:A.sibling=_,A=_,T=N}if(D.done)return t(v,T),Hr&&sf(v,S),w;if(T===null){for(;!D.done;S++,D=y.next())D=h(v,D.value,E),D!==null&&(x=s(D,x,S),A===null?w=D:A.sibling=D,A=D);return Hr&&sf(v,S),w}for(T=n(v,T);!D.done;S++,D=y.next())D=f(T,v,S,D.value,E),D!==null&&(r&&D.alternate!==null&&T.delete(D.key===null?S:D.key),x=s(D,x,S),A===null?w=D:A.sibling=D,A=D);return r&&T.forEach(function(M){return e(v,M)}),Hr&&sf(v,S),w}function b(v,x,y,E){if(typeof y=="object"&&y!==null&&y.type===tg&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case R_:e:{for(var w=y.key,A=x;A!==null;){if(A.key===w){if(w=y.type,w===tg){if(A.tag===7){t(v,A.sibling),x=i(A,y.props.children),x.return=v,v=x;break e}}else if(A.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===jc&&$3(w)===A.type){t(v,A.sibling),x=i(A,y.props),x.ref=My(v,A,y),x.return=v,v=x;break e}t(v,A);break}else e(v,A);A=A.sibling}y.type===tg?(x=Um(y.props.children,v.mode,E,y.key),x.return=v,v=x):(E=HA(y.type,y.key,y.props,null,v.mode,E),E.ref=My(v,x,y),E.return=v,v=E)}return a(v);case eg:e:{for(A=y.key;x!==null;){if(x.key===A)if(x.tag===4&&x.stateNode.containerInfo===y.containerInfo&&x.stateNode.implementation===y.implementation){t(v,x.sibling),x=i(x,y.children||[]),x.return=v,v=x;break e}else{t(v,x);break}else e(v,x);x=x.sibling}x=rN(y,v.mode,E),x.return=v,v=x}return a(v);case jc:return A=y._init,b(v,x,A(y._payload),E)}if(jy(y))return p(v,x,y,E);if(Sy(y))return g(v,x,y,E);q_(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,x!==null&&x.tag===6?(t(v,x.sibling),x=i(x,y),x.return=v,v=x):(t(v,x),x=tN(y,v.mode,E),x.return=v,v=x),a(v)):t(v,x)}return b}var g0=k9(!0),F9=k9(!1),nS=Pd(null),iS=null,ug=null,uR=null;function cR(){uR=ug=iS=null}function hR(r){var e=nS.current;Vr(nS),r._currentValue=e}function DD(r,e,t){for(;r!==null;){var n=r.alternate;if((r.childLanes&e)!==e?(r.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),r===t)break;r=r.return}}function Ig(r,e){iS=r,uR=ug=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&e&&(Us=!0),r.firstContext=null)}function ho(r){var e=r._currentValue;if(uR!==r)if(r={context:r,memoizedValue:e,next:null},ug===null){if(iS===null)throw Error(Fe(308));ug=r,iS.dependencies={lanes:0,firstContext:r}}else ug=ug.next=r;return e}var yf=null;function dR(r){yf===null?yf=[r]:yf.push(r)}function O9(r,e,t,n){var i=e.interleaved;return i===null?(t.next=t,dR(e)):(t.next=i.next,i.next=t),e.interleaved=t,fc(r,n)}function fc(r,e){r.lanes|=e;var t=r.alternate;for(t!==null&&(t.lanes|=e),t=r,r=r.return;r!==null;)r.childLanes|=e,t=r.alternate,t!==null&&(t.childLanes|=e),t=r,r=r.return;return t.tag===3?t.stateNode:null}var qc=!1;function fR(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function B9(r,e){r=r.updateQueue,e.updateQueue===r&&(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function rc(r,e){return{eventTime:r,lane:e,tag:0,payload:null,callback:null,next:null}}function td(r,e,t){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,er&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,fc(r,t)}return i=n.interleaved,i===null?(e.next=e,dR(n)):(e.next=i.next,i.next=e),n.interleaved=e,fc(r,t)}function $A(r,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,JP(r,t)}}function V3(r,e){var t=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=a:s=s.next=a,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}function sS(r,e,t,n){var i=r.updateQueue;qc=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var c=r.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;a=0,c=u=l=null,o=s;do{var d=o.lane,f=o.eventTime;if((n&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=r,g=o;switch(d=e,f=t,g.tag){case 1:if(p=g.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=tn({},h,d);break e;case 2:qc=!0}}o.callback!==null&&o.lane!==0&&(r.flags|=64,d=i.effects,d===null?i.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=f,l=h):c=c.next=f,a|=d;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;d=o,o=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Qm|=a,r.lanes=a,r.memoizedState=h}}function U3(r,e,t){if(r=e.effects,e.effects=null,r!==null)for(e=0;e<r.length;e++){var n=r[e],i=n.callback;if(i!==null){if(n.callback=null,n=t,typeof i!="function")throw Error(Fe(191,i));i.call(n)}}}var Mx={},Ll=Pd(Mx),t1=Pd(Mx),r1=Pd(Mx);function bf(r){if(r===Mx)throw Error(Fe(174));return r}function mR(r,e){switch(kr(r1,e),kr(t1,r),kr(Ll,Mx),r=e.nodeType,r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:uD(null,"");break;default:r=r===8?e.parentNode:e,e=r.namespaceURI||null,r=r.tagName,e=uD(e,r)}Vr(Ll),kr(Ll,e)}function v0(){Vr(Ll),Vr(t1),Vr(r1)}function L9(r){bf(r1.current);var e=bf(Ll.current),t=uD(e,r.type);e!==t&&(kr(t1,r),kr(Ll,t))}function pR(r){t1.current===r&&(Vr(Ll),Vr(t1))}var Yr=Pd(0);function aS(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var X2=[];function gR(){for(var r=0;r<X2.length;r++)X2[r]._workInProgressVersionPrimary=null;X2.length=0}var VA=Nc.ReactCurrentDispatcher,Y2=Nc.ReactCurrentBatchConfig,Ym=0,Jr=null,Un=null,ci=null,oS=!1,Cb=!1,n1=0,TZ=0;function Bi(){throw Error(Fe(321))}function vR(r,e){if(e===null)return!1;for(var t=0;t<e.length&&t<r.length;t++)if(!Wo(r[t],e[t]))return!1;return!0}function yR(r,e,t,n,i,s){if(Ym=s,Jr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,VA.current=r===null||r.memoizedState===null?MZ:IZ,r=t(n,i),Cb){s=0;do{if(Cb=!1,n1=0,25<=s)throw Error(Fe(301));s+=1,ci=Un=null,e.updateQueue=null,VA.current=PZ,r=t(n,i)}while(Cb)}if(VA.current=lS,e=Un!==null&&Un.next!==null,Ym=0,ci=Un=Jr=null,oS=!1,e)throw Error(Fe(300));return r}function bR(){var r=n1!==0;return n1=0,r}function cl(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ci===null?Jr.memoizedState=ci=r:ci=ci.next=r,ci}function fo(){if(Un===null){var r=Jr.alternate;r=r!==null?r.memoizedState:null}else r=Un.next;var e=ci===null?Jr.memoizedState:ci.next;if(e!==null)ci=e,Un=r;else{if(r===null)throw Error(Fe(310));Un=r,r={memoizedState:Un.memoizedState,baseState:Un.baseState,baseQueue:Un.baseQueue,queue:Un.queue,next:null},ci===null?Jr.memoizedState=ci=r:ci=ci.next=r}return ci}function i1(r,e){return typeof e=="function"?e(r):e}function Q2(r){var e=fo(),t=e.queue;if(t===null)throw Error(Fe(311));t.lastRenderedReducer=r;var n=Un,i=n.baseQueue,s=t.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,l=null,u=s;do{var c=u.lane;if((Ym&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:r(n,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=h,a=n):l=l.next=h,Jr.lanes|=c,Qm|=c}u=u.next}while(u!==null&&u!==s);l===null?a=n:l.next=o,Wo(n,e.memoizedState)||(Us=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,t.lastRenderedState=n}if(r=t.interleaved,r!==null){i=r;do s=i.lane,Jr.lanes|=s,Qm|=s,i=i.next;while(i!==r)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function J2(r){var e=fo(),t=e.queue;if(t===null)throw Error(Fe(311));t.lastRenderedReducer=r;var n=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var a=i=i.next;do s=r(s,a.action),a=a.next;while(a!==i);Wo(s,e.memoizedState)||(Us=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,n]}function $9(){}function V9(r,e){var t=Jr,n=fo(),i=e(),s=!Wo(n.memoizedState,i);if(s&&(n.memoizedState=i,Us=!0),n=n.queue,wR(j9.bind(null,t,n,r),[r]),n.getSnapshot!==e||s||ci!==null&&ci.memoizedState.tag&1){if(t.flags|=2048,s1(9,z9.bind(null,t,n,i,e),void 0,null),di===null)throw Error(Fe(349));Ym&30||U9(t,e,i)}return i}function U9(r,e,t){r.flags|=16384,r={getSnapshot:e,value:t},e=Jr.updateQueue,e===null?(e={lastEffect:null,stores:null},Jr.updateQueue=e,e.stores=[r]):(t=e.stores,t===null?e.stores=[r]:t.push(r))}function z9(r,e,t,n){e.value=t,e.getSnapshot=n,q9(e)&&H9(r)}function j9(r,e,t){return t(function(){q9(e)&&H9(r)})}function q9(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!Wo(r,t)}catch{return!0}}function H9(r){var e=fc(r,1);e!==null&&Ho(e,r,1,-1)}function z3(r){var e=cl();return typeof r=="function"&&(r=r()),e.memoizedState=e.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i1,lastRenderedState:r},e.queue=r,r=r.dispatch=DZ.bind(null,Jr,r),[e.memoizedState,r]}function s1(r,e,t,n){return r={tag:r,create:e,destroy:t,deps:n,next:null},e=Jr.updateQueue,e===null?(e={lastEffect:null,stores:null},Jr.updateQueue=e,e.lastEffect=r.next=r):(t=e.lastEffect,t===null?e.lastEffect=r.next=r:(n=t.next,t.next=r,r.next=n,e.lastEffect=r)),r}function G9(){return fo().memoizedState}function UA(r,e,t,n){var i=cl();Jr.flags|=r,i.memoizedState=s1(1|e,t,void 0,n===void 0?null:n)}function tC(r,e,t,n){var i=fo();n=n===void 0?null:n;var s=void 0;if(Un!==null){var a=Un.memoizedState;if(s=a.destroy,n!==null&&vR(n,a.deps)){i.memoizedState=s1(e,t,s,n);return}}Jr.flags|=r,i.memoizedState=s1(1|e,t,s,n)}function j3(r,e){return UA(8390656,8,r,e)}function wR(r,e){return tC(2048,8,r,e)}function W9(r,e){return tC(4,2,r,e)}function K9(r,e){return tC(4,4,r,e)}function X9(r,e){if(typeof e=="function")return r=r(),e(r),function(){e(null)};if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function Y9(r,e,t){return t=t!=null?t.concat([r]):null,tC(4,4,X9.bind(null,e,r),t)}function xR(){}function Q9(r,e){var t=fo();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&vR(e,n[1])?n[0]:(t.memoizedState=[r,e],r)}function J9(r,e){var t=fo();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&vR(e,n[1])?n[0]:(r=r(),t.memoizedState=[r,e],r)}function Z9(r,e,t){return Ym&21?(Wo(t,e)||(t=i9(),Jr.lanes|=t,Qm|=t,r.baseState=!0),e):(r.baseState&&(r.baseState=!1,Us=!0),r.memoizedState=t)}function CZ(r,e){var t=fr;fr=t!==0&&4>t?t:4,r(!0);var n=Y2.transition;Y2.transition={};try{r(!1),e()}finally{fr=t,Y2.transition=n}}function ez(){return fo().memoizedState}function NZ(r,e,t){var n=nd(r);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},tz(r))rz(e,t);else if(t=O9(r,e,t,n),t!==null){var i=vs();Ho(t,r,n,i),nz(t,e,n)}}function DZ(r,e,t){var n=nd(r),i={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(tz(r))rz(e,i);else{var s=r.alternate;if(r.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,t);if(i.hasEagerState=!0,i.eagerState=o,Wo(o,a)){var l=e.interleaved;l===null?(i.next=i,dR(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=O9(r,e,i,n),t!==null&&(i=vs(),Ho(t,r,n,i),nz(t,e,n))}}function tz(r){var e=r.alternate;return r===Jr||e!==null&&e===Jr}function rz(r,e){Cb=oS=!0;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}function nz(r,e,t){if(t&4194240){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,JP(r,t)}}var lS={readContext:ho,useCallback:Bi,useContext:Bi,useEffect:Bi,useImperativeHandle:Bi,useInsertionEffect:Bi,useLayoutEffect:Bi,useMemo:Bi,useReducer:Bi,useRef:Bi,useState:Bi,useDebugValue:Bi,useDeferredValue:Bi,useTransition:Bi,useMutableSource:Bi,useSyncExternalStore:Bi,useId:Bi,unstable_isNewReconciler:!1},MZ={readContext:ho,useCallback:function(r,e){return cl().memoizedState=[r,e===void 0?null:e],r},useContext:ho,useEffect:j3,useImperativeHandle:function(r,e,t){return t=t!=null?t.concat([r]):null,UA(4194308,4,X9.bind(null,e,r),t)},useLayoutEffect:function(r,e){return UA(4194308,4,r,e)},useInsertionEffect:function(r,e){return UA(4,2,r,e)},useMemo:function(r,e){var t=cl();return e=e===void 0?null:e,r=r(),t.memoizedState=[r,e],r},useReducer:function(r,e,t){var n=cl();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:e},n.queue=r,r=r.dispatch=NZ.bind(null,Jr,r),[n.memoizedState,r]},useRef:function(r){var e=cl();return r={current:r},e.memoizedState=r},useState:z3,useDebugValue:xR,useDeferredValue:function(r){return cl().memoizedState=r},useTransition:function(){var r=z3(!1),e=r[0];return r=CZ.bind(null,r[1]),cl().memoizedState=r,[e,r]},useMutableSource:function(){},useSyncExternalStore:function(r,e,t){var n=Jr,i=cl();if(Hr){if(t===void 0)throw Error(Fe(407));t=t()}else{if(t=e(),di===null)throw Error(Fe(349));Ym&30||U9(n,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,j3(j9.bind(null,n,s,r),[r]),n.flags|=2048,s1(9,z9.bind(null,n,s,t,e),void 0,null),t},useId:function(){var r=cl(),e=di.identifierPrefix;if(Hr){var t=Qu,n=Yu;t=(n&~(1<<32-qo(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=n1++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=TZ++,e=":"+e+"r"+t.toString(32)+":";return r.memoizedState=e},unstable_isNewReconciler:!1},IZ={readContext:ho,useCallback:Q9,useContext:ho,useEffect:wR,useImperativeHandle:Y9,useInsertionEffect:W9,useLayoutEffect:K9,useMemo:J9,useReducer:Q2,useRef:G9,useState:function(){return Q2(i1)},useDebugValue:xR,useDeferredValue:function(r){var e=fo();return Z9(e,Un.memoizedState,r)},useTransition:function(){var r=Q2(i1)[0],e=fo().memoizedState;return[r,e]},useMutableSource:$9,useSyncExternalStore:V9,useId:ez,unstable_isNewReconciler:!1},PZ={readContext:ho,useCallback:Q9,useContext:ho,useEffect:wR,useImperativeHandle:Y9,useInsertionEffect:W9,useLayoutEffect:K9,useMemo:J9,useReducer:J2,useRef:G9,useState:function(){return J2(i1)},useDebugValue:xR,useDeferredValue:function(r){var e=fo();return Un===null?e.memoizedState=r:Z9(e,Un.memoizedState,r)},useTransition:function(){var r=J2(i1)[0],e=fo().memoizedState;return[r,e]},useMutableSource:$9,useSyncExternalStore:V9,useId:ez,unstable_isNewReconciler:!1};function So(r,e){if(r&&r.defaultProps){e=tn({},e),r=r.defaultProps;for(var t in r)e[t]===void 0&&(e[t]=r[t]);return e}return e}function MD(r,e,t,n){e=r.memoizedState,t=t(n,e),t=t==null?e:tn({},e,t),r.memoizedState=t,r.lanes===0&&(r.updateQueue.baseState=t)}var rC={isMounted:function(r){return(r=r._reactInternals)?hp(r)===r:!1},enqueueSetState:function(r,e,t){r=r._reactInternals;var n=vs(),i=nd(r),s=rc(n,i);s.payload=e,t!=null&&(s.callback=t),e=td(r,s,i),e!==null&&(Ho(e,r,i,n),$A(e,r,i))},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var n=vs(),i=nd(r),s=rc(n,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=td(r,s,i),e!==null&&(Ho(e,r,i,n),$A(e,r,i))},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=vs(),n=nd(r),i=rc(t,n);i.tag=2,e!=null&&(i.callback=e),e=td(r,i,n),e!==null&&(Ho(e,r,n,t),$A(e,r,n))}};function q3(r,e,t,n,i,s,a){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!Qb(t,n)||!Qb(i,s):!0}function iz(r,e,t){var n=!1,i=dd,s=e.contextType;return typeof s=="object"&&s!==null?s=ho(s):(i=qs(e)?Km:es.current,n=e.contextTypes,s=(n=n!=null)?m0(r,i):dd),e=new e(t,s),r.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rC,r.stateNode=e,e._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=s),e}function H3(r,e,t,n){r=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==r&&rC.enqueueReplaceState(e,e.state,null)}function ID(r,e,t,n){var i=r.stateNode;i.props=t,i.state=r.memoizedState,i.refs={},fR(r);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ho(s):(s=qs(e)?Km:es.current,i.context=m0(r,s)),i.state=r.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(MD(r,e,s,t),i.state=r.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&rC.enqueueReplaceState(i,i.state,null),sS(r,t,i,n),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4194308)}function y0(r,e){try{var t="",n=e;do t+=aJ(n),n=n.return;while(n);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:r,source:e,stack:i,digest:null}}function Z2(r,e,t){return{value:r,source:null,stack:t??null,digest:e??null}}function PD(r,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var RZ=typeof WeakMap=="function"?WeakMap:Map;function sz(r,e,t){t=rc(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){cS||(cS=!0,zD=n),PD(r,e)},t}function az(r,e,t){t=rc(-1,t),t.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;t.payload=function(){return n(i)},t.callback=function(){PD(r,e)}}var s=r.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){PD(r,e),typeof n!="function"&&(rd===null?rd=new Set([this]):rd.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function G3(r,e,t){var n=r.pingCache;if(n===null){n=r.pingCache=new RZ;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(t)||(i.add(t),r=WZ.bind(null,r,e,t),e.then(r,r))}function W3(r){do{var e;if((e=r.tag===13)&&(e=r.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return r;r=r.return}while(r!==null);return null}function K3(r,e,t,n,i){return r.mode&1?(r.flags|=65536,r.lanes=i,r):(r===e?r.flags|=65536:(r.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=rc(-1,1),e.tag=2,td(t,e,1))),t.lanes|=1),r)}var kZ=Nc.ReactCurrentOwner,Us=!1;function ms(r,e,t,n){e.child=r===null?F9(e,null,t,n):g0(e,r.child,t,n)}function X3(r,e,t,n,i){t=t.render;var s=e.ref;return Ig(e,i),n=yR(r,e,t,n,s,i),t=bR(),r!==null&&!Us?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,mc(r,e,i)):(Hr&&t&&aR(e),e.flags|=1,ms(r,e,n,i),e.child)}function Y3(r,e,t,n,i){if(r===null){var s=t.type;return typeof s=="function"&&!DR(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,oz(r,e,s,n,i)):(r=HA(t.type,null,n,e,e.mode,i),r.ref=e.ref,r.return=e,e.child=r)}if(s=r.child,!(r.lanes&i)){var a=s.memoizedProps;if(t=t.compare,t=t!==null?t:Qb,t(a,n)&&r.ref===e.ref)return mc(r,e,i)}return e.flags|=1,r=id(s,n),r.ref=e.ref,r.return=e,e.child=r}function oz(r,e,t,n,i){if(r!==null){var s=r.memoizedProps;if(Qb(s,n)&&r.ref===e.ref)if(Us=!1,e.pendingProps=n=s,(r.lanes&i)!==0)r.flags&131072&&(Us=!0);else return e.lanes=r.lanes,mc(r,e,i)}return RD(r,e,t,n,i)}function lz(r,e,t){var n=e.pendingProps,i=n.children,s=r!==null?r.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kr(hg,va),va|=t;else{if(!(t&1073741824))return r=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:r,cachePool:null,transitions:null},e.updateQueue=null,kr(hg,va),va|=r,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:t,kr(hg,va),va|=n}else s!==null?(n=s.baseLanes|t,e.memoizedState=null):n=t,kr(hg,va),va|=n;return ms(r,e,i,t),e.child}function uz(r,e){var t=e.ref;(r===null&&t!==null||r!==null&&r.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function RD(r,e,t,n,i){var s=qs(t)?Km:es.current;return s=m0(e,s),Ig(e,i),t=yR(r,e,t,n,s,i),n=bR(),r!==null&&!Us?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,mc(r,e,i)):(Hr&&n&&aR(e),e.flags|=1,ms(r,e,t,i),e.child)}function Q3(r,e,t,n,i){if(qs(t)){var s=!0;eS(e)}else s=!1;if(Ig(e,i),e.stateNode===null)zA(r,e),iz(e,t,n),ID(e,t,n,i),n=!0;else if(r===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=t.contextType;typeof u=="object"&&u!==null?u=ho(u):(u=qs(t)?Km:es.current,u=m0(e,u));var c=t.getDerivedStateFromProps,h=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==u)&&H3(e,a,n,u),qc=!1;var d=e.memoizedState;a.state=d,sS(e,n,a,i),l=e.memoizedState,o!==n||d!==l||js.current||qc?(typeof c=="function"&&(MD(e,t,c,n),l=e.memoizedState),(o=qc||q3(e,t,o,n,d,l,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,B9(r,e),o=e.memoizedProps,u=e.type===e.elementType?o:So(e.type,o),a.props=u,h=e.pendingProps,d=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=ho(l):(l=qs(t)?Km:es.current,l=m0(e,l));var f=t.getDerivedStateFromProps;(c=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||d!==l)&&H3(e,a,n,l),qc=!1,d=e.memoizedState,a.state=d,sS(e,n,a,i);var p=e.memoizedState;o!==h||d!==p||js.current||qc?(typeof f=="function"&&(MD(e,t,f,n),p=e.memoizedState),(u=qc||q3(e,t,u,n,d,p,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,p,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,p,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===r.memoizedProps&&d===r.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===r.memoizedProps&&d===r.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),a.props=n,a.state=p,a.context=l,n=u):(typeof a.componentDidUpdate!="function"||o===r.memoizedProps&&d===r.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===r.memoizedProps&&d===r.memoizedState||(e.flags|=1024),n=!1)}return kD(r,e,t,n,s,i)}function kD(r,e,t,n,i,s){uz(r,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&O3(e,t,!1),mc(r,e,s);n=e.stateNode,kZ.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,r!==null&&a?(e.child=g0(e,r.child,null,s),e.child=g0(e,null,o,s)):ms(r,e,o,s),e.memoizedState=n.state,i&&O3(e,t,!0),e.child}function cz(r){var e=r.stateNode;e.pendingContext?F3(r,e.pendingContext,e.pendingContext!==e.context):e.context&&F3(r,e.context,!1),mR(r,e.containerInfo)}function J3(r,e,t,n,i){return p0(),lR(i),e.flags|=256,ms(r,e,t,n),e.child}var FD={dehydrated:null,treeContext:null,retryLane:0};function OD(r){return{baseLanes:r,cachePool:null,transitions:null}}function hz(r,e,t){var n=e.pendingProps,i=Yr.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=r!==null&&r.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(r===null||r.memoizedState!==null)&&(i|=1),kr(Yr,i&1),r===null)return ND(e),r=e.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(e.mode&1?r.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,r=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=sC(a,n,0,null),r=Um(r,n,t,null),s.return=e,r.return=e,s.sibling=r,e.child=s,e.child.memoizedState=OD(t),e.memoizedState=FD,r):_R(e,a));if(i=r.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return FZ(r,e,a,n,o,i,t);if(s){s=n.fallback,a=e.mode,i=r.child,o=i.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=id(i,l),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=id(o,s):(s=Um(s,a,t,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=r.child.memoizedState,a=a===null?OD(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=r.childLanes&~t,e.memoizedState=FD,n}return s=r.child,r=s.sibling,n=id(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,r!==null&&(t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)),e.child=n,e.memoizedState=null,n}function _R(r,e){return e=sC({mode:"visible",children:e},r.mode,0,null),e.return=r,r.child=e}function H_(r,e,t,n){return n!==null&&lR(n),g0(e,r.child,null,t),r=_R(e,e.pendingProps.children),r.flags|=2,e.memoizedState=null,r}function FZ(r,e,t,n,i,s,a){if(t)return e.flags&256?(e.flags&=-257,n=Z2(Error(Fe(422))),H_(r,e,a,n)):e.memoizedState!==null?(e.child=r.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=sC({mode:"visible",children:n.children},i,0,null),s=Um(s,i,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&g0(e,r.child,null,a),e.child.memoizedState=OD(a),e.memoizedState=FD,s);if(!(e.mode&1))return H_(r,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(Fe(419)),n=Z2(s,n,void 0),H_(r,e,a,n)}if(o=(a&r.childLanes)!==0,Us||o){if(n=di,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,fc(r,i),Ho(n,r,i,-1))}return NR(),n=Z2(Error(Fe(421))),H_(r,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=r.child,e=KZ.bind(null,r),i._reactRetry=e,null):(r=s.treeContext,_a=ed(i.nextSibling),Ea=e,Hr=!0,$o=null,r!==null&&(Za[eo++]=Yu,Za[eo++]=Qu,Za[eo++]=Xm,Yu=r.id,Qu=r.overflow,Xm=e),e=_R(e,n.children),e.flags|=4096,e)}function Z3(r,e,t){r.lanes|=e;var n=r.alternate;n!==null&&(n.lanes|=e),DD(r.return,e,t)}function eN(r,e,t,n,i){var s=r.memoizedState;s===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=t,s.tailMode=i)}function dz(r,e,t){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(ms(r,e,n.children,t),n=Yr.current,n&2)n=n&1|2,e.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Z3(r,t,e);else if(r.tag===19)Z3(r,t,e);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(kr(Yr,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)r=t.alternate,r!==null&&aS(r)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),eN(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(r=i.alternate,r!==null&&aS(r)===null){e.child=i;break}r=i.sibling,i.sibling=t,t=i,i=r}eN(e,!0,t,null,s);break;case"together":eN(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zA(r,e){!(e.mode&1)&&r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2)}function mc(r,e,t){if(r!==null&&(e.dependencies=r.dependencies),Qm|=e.lanes,!(t&e.childLanes))return null;if(r!==null&&e.child!==r.child)throw Error(Fe(153));if(e.child!==null){for(r=e.child,t=id(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=id(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}function OZ(r,e,t){switch(e.tag){case 3:cz(e),p0();break;case 5:L9(e);break;case 1:qs(e.type)&&eS(e);break;case 4:mR(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;kr(nS,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(kr(Yr,Yr.current&1),e.flags|=128,null):t&e.child.childLanes?hz(r,e,t):(kr(Yr,Yr.current&1),r=mc(r,e,t),r!==null?r.sibling:null);kr(Yr,Yr.current&1);break;case 19:if(n=(t&e.childLanes)!==0,r.flags&128){if(n)return dz(r,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),kr(Yr,Yr.current),n)break;return null;case 22:case 23:return e.lanes=0,lz(r,e,t)}return mc(r,e,t)}var fz,BD,mz,pz;fz=function(r,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)r.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};BD=function(){};mz=function(r,e,t,n){var i=r.memoizedProps;if(i!==n){r=e.stateNode,bf(Ll.current);var s=null;switch(t){case"input":i=sD(r,i),n=sD(r,n),s=[];break;case"select":i=tn({},i,{value:void 0}),n=tn({},n,{value:void 0}),s=[];break;case"textarea":i=lD(r,i),n=lD(r,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=JE)}cD(t,n);var a;t=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(qb.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(qb.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Br("scroll",r),s||o===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};pz=function(r,e,t,n){t!==n&&(e.flags|=4)};function Iy(r,e){if(!Hr)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function Li(r){var e=r.alternate!==null&&r.alternate.child===r.child,t=0,n=0;if(e)for(var i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=r,i=i.sibling;else for(i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=r,i=i.sibling;return r.subtreeFlags|=n,r.childLanes=t,e}function BZ(r,e,t){var n=e.pendingProps;switch(oR(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Li(e),null;case 1:return qs(e.type)&&ZE(),Li(e),null;case 3:return n=e.stateNode,v0(),Vr(js),Vr(es),gR(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(j_(e)?e.flags|=4:r===null||r.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,$o!==null&&(HD($o),$o=null))),BD(r,e),Li(e),null;case 5:pR(e);var i=bf(r1.current);if(t=e.type,r!==null&&e.stateNode!=null)mz(r,e,t,n,i),r.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Fe(166));return Li(e),null}if(r=bf(Ll.current),j_(e)){n=e.stateNode,t=e.type;var s=e.memoizedProps;switch(n[kl]=e,n[e1]=s,r=(e.mode&1)!==0,t){case"dialog":Br("cancel",n),Br("close",n);break;case"iframe":case"object":case"embed":Br("load",n);break;case"video":case"audio":for(i=0;i<Hy.length;i++)Br(Hy[i],n);break;case"source":Br("error",n);break;case"img":case"image":case"link":Br("error",n),Br("load",n);break;case"details":Br("toggle",n);break;case"input":l3(n,s),Br("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Br("invalid",n);break;case"textarea":c3(n,s),Br("invalid",n)}cD(t,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&z_(n.textContent,o,r),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&z_(n.textContent,o,r),i=["children",""+o]):qb.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Br("scroll",n)}switch(t){case"input":k_(n),u3(n,s,!0);break;case"textarea":k_(n),h3(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=JE)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=jU(t)),r==="http://www.w3.org/1999/xhtml"?t==="script"?(r=a.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=a.createElement(t,{is:n.is}):(r=a.createElement(t),t==="select"&&(a=r,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):r=a.createElementNS(r,t),r[kl]=e,r[e1]=n,fz(r,e,!1,!1),e.stateNode=r;e:{switch(a=hD(t,n),t){case"dialog":Br("cancel",r),Br("close",r),i=n;break;case"iframe":case"object":case"embed":Br("load",r),i=n;break;case"video":case"audio":for(i=0;i<Hy.length;i++)Br(Hy[i],r);i=n;break;case"source":Br("error",r),i=n;break;case"img":case"image":case"link":Br("error",r),Br("load",r),i=n;break;case"details":Br("toggle",r),i=n;break;case"input":l3(r,n),i=sD(r,n),Br("invalid",r);break;case"option":i=n;break;case"select":r._wrapperState={wasMultiple:!!n.multiple},i=tn({},n,{value:void 0}),Br("invalid",r);break;case"textarea":c3(r,n),i=lD(r,n),Br("invalid",r);break;default:i=n}cD(t,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?GU(r,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&qU(r,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Hb(r,l):typeof l=="number"&&Hb(r,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(qb.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Br("scroll",r):l!=null&&GP(r,s,l,a))}switch(t){case"input":k_(r),u3(r,n,!1);break;case"textarea":k_(r),h3(r);break;case"option":n.value!=null&&r.setAttribute("value",""+hd(n.value));break;case"select":r.multiple=!!n.multiple,s=n.value,s!=null?Cg(r,!!n.multiple,s,!1):n.defaultValue!=null&&Cg(r,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=JE)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Li(e),null;case 6:if(r&&e.stateNode!=null)pz(r,e,r.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Fe(166));if(t=bf(r1.current),bf(Ll.current),j_(e)){if(n=e.stateNode,t=e.memoizedProps,n[kl]=e,(s=n.nodeValue!==t)&&(r=Ea,r!==null))switch(r.tag){case 3:z_(n.nodeValue,t,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&z_(n.nodeValue,t,(r.mode&1)!==0)}s&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[kl]=e,e.stateNode=n}return Li(e),null;case 13:if(Vr(Yr),n=e.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Hr&&_a!==null&&e.mode&1&&!(e.flags&128))R9(),p0(),e.flags|=98560,s=!1;else if(s=j_(e),n!==null&&n.dehydrated!==null){if(r===null){if(!s)throw Error(Fe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Fe(317));s[kl]=e}else p0(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Li(e),s=!1}else $o!==null&&(HD($o),$o=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(r!==null&&r.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(r===null||Yr.current&1?jn===0&&(jn=3):NR())),e.updateQueue!==null&&(e.flags|=4),Li(e),null);case 4:return v0(),BD(r,e),r===null&&Jb(e.stateNode.containerInfo),Li(e),null;case 10:return hR(e.type._context),Li(e),null;case 17:return qs(e.type)&&ZE(),Li(e),null;case 19:if(Vr(Yr),s=e.memoizedState,s===null)return Li(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)Iy(s,!1);else{if(jn!==0||r!==null&&r.flags&128)for(r=e.child;r!==null;){if(a=aS(r),a!==null){for(e.flags|=128,Iy(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)s=t,r=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,r=a.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t=t.sibling;return kr(Yr,Yr.current&1|2),e.child}r=r.sibling}s.tail!==null&&An()>b0&&(e.flags|=128,n=!0,Iy(s,!1),e.lanes=4194304)}else{if(!n)if(r=aS(a),r!==null){if(e.flags|=128,n=!0,t=r.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Iy(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Hr)return Li(e),null}else 2*An()-s.renderingStartTime>b0&&t!==1073741824&&(e.flags|=128,n=!0,Iy(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(t=s.last,t!==null?t.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=An(),e.sibling=null,t=Yr.current,kr(Yr,n?t&1|2:t&1),e):(Li(e),null);case 22:case 23:return CR(),n=e.memoizedState!==null,r!==null&&r.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?va&1073741824&&(Li(e),e.subtreeFlags&6&&(e.flags|=8192)):Li(e),null;case 24:return null;case 25:return null}throw Error(Fe(156,e.tag))}function LZ(r,e){switch(oR(e),e.tag){case 1:return qs(e.type)&&ZE(),r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 3:return v0(),Vr(js),Vr(es),gR(),r=e.flags,r&65536&&!(r&128)?(e.flags=r&-65537|128,e):null;case 5:return pR(e),null;case 13:if(Vr(Yr),r=e.memoizedState,r!==null&&r.dehydrated!==null){if(e.alternate===null)throw Error(Fe(340));p0()}return r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 19:return Vr(Yr),null;case 4:return v0(),null;case 10:return hR(e.type._context),null;case 22:case 23:return CR(),null;case 24:return null;default:return null}}var G_=!1,Xi=!1,$Z=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function cg(r,e){var t=r.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){hn(r,e,n)}else t.current=null}function LD(r,e,t){try{t()}catch(n){hn(r,e,n)}}var eB=!1;function VZ(r,e){if(xD=XE,r=w9(),sR(r)){if("selectionStart"in r)var t={start:r.selectionStart,end:r.selectionEnd};else e:{t=(t=r.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,u=0,c=0,h=r,d=null;t:for(;;){for(var f;h!==t||i!==0&&h.nodeType!==3||(o=a+i),h!==s||n!==0&&h.nodeType!==3||(l=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===r)break t;if(d===t&&++u===i&&(o=a),d===s&&++c===n&&(l=a),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(_D={focusedElem:r,selectionRange:t},XE=!1,Qe=e;Qe!==null;)if(e=Qe,r=e.child,(e.subtreeFlags&1028)!==0&&r!==null)r.return=e,Qe=r;else for(;Qe!==null;){e=Qe;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,b=p.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:So(e.type,g),b);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(E){hn(e,e.return,E)}if(r=e.sibling,r!==null){r.return=e.return,Qe=r;break}Qe=e.return}return p=eB,eB=!1,p}function Nb(r,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&r)===r){var s=i.destroy;i.destroy=void 0,s!==void 0&&LD(e,t,s)}i=i.next}while(i!==n)}}function nC(r,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&r)===r){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function $D(r){var e=r.ref;if(e!==null){var t=r.stateNode;switch(r.tag){case 5:r=t;break;default:r=t}typeof e=="function"?e(r):e.current=r}}function gz(r){var e=r.alternate;e!==null&&(r.alternate=null,gz(e)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(e=r.stateNode,e!==null&&(delete e[kl],delete e[e1],delete e[SD],delete e[_Z],delete e[AZ])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function vz(r){return r.tag===5||r.tag===3||r.tag===4}function tB(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||vz(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function VD(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(r,e):t.insertBefore(r,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(r,t)):(e=t,e.appendChild(r)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=JE));else if(n!==4&&(r=r.child,r!==null))for(VD(r,e,t),r=r.sibling;r!==null;)VD(r,e,t),r=r.sibling}function UD(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.insertBefore(r,e):t.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(UD(r,e,t),r=r.sibling;r!==null;)UD(r,e,t),r=r.sibling}var xi=null,Lo=!1;function Lc(r,e,t){for(t=t.child;t!==null;)yz(r,e,t),t=t.sibling}function yz(r,e,t){if(Bl&&typeof Bl.onCommitFiberUnmount=="function")try{Bl.onCommitFiberUnmount(XT,t)}catch{}switch(t.tag){case 5:Xi||cg(t,e);case 6:var n=xi,i=Lo;xi=null,Lc(r,e,t),xi=n,Lo=i,xi!==null&&(Lo?(r=xi,t=t.stateNode,r.nodeType===8?r.parentNode.removeChild(t):r.removeChild(t)):xi.removeChild(t.stateNode));break;case 18:xi!==null&&(Lo?(r=xi,t=t.stateNode,r.nodeType===8?W2(r.parentNode,t):r.nodeType===1&&W2(r,t),Xb(r)):W2(xi,t.stateNode));break;case 4:n=xi,i=Lo,xi=t.stateNode.containerInfo,Lo=!0,Lc(r,e,t),xi=n,Lo=i;break;case 0:case 11:case 14:case 15:if(!Xi&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&LD(t,e,a),i=i.next}while(i!==n)}Lc(r,e,t);break;case 1:if(!Xi&&(cg(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(o){hn(t,e,o)}Lc(r,e,t);break;case 21:Lc(r,e,t);break;case 22:t.mode&1?(Xi=(n=Xi)||t.memoizedState!==null,Lc(r,e,t),Xi=n):Lc(r,e,t);break;default:Lc(r,e,t)}}function rB(r){var e=r.updateQueue;if(e!==null){r.updateQueue=null;var t=r.stateNode;t===null&&(t=r.stateNode=new $Z),e.forEach(function(n){var i=XZ.bind(null,r,n);t.has(n)||(t.add(n),n.then(i,i))})}}function wo(r,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];try{var s=r,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:xi=o.stateNode,Lo=!1;break e;case 3:xi=o.stateNode.containerInfo,Lo=!0;break e;case 4:xi=o.stateNode.containerInfo,Lo=!0;break e}o=o.return}if(xi===null)throw Error(Fe(160));yz(s,a,i),xi=null,Lo=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){hn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bz(e,r),e=e.sibling}function bz(r,e){var t=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(wo(e,r),al(r),n&4){try{Nb(3,r,r.return),nC(3,r)}catch(g){hn(r,r.return,g)}try{Nb(5,r,r.return)}catch(g){hn(r,r.return,g)}}break;case 1:wo(e,r),al(r),n&512&&t!==null&&cg(t,t.return);break;case 5:if(wo(e,r),al(r),n&512&&t!==null&&cg(t,t.return),r.flags&32){var i=r.stateNode;try{Hb(i,"")}catch(g){hn(r,r.return,g)}}if(n&4&&(i=r.stateNode,i!=null)){var s=r.memoizedProps,a=t!==null?t.memoizedProps:s,o=r.type,l=r.updateQueue;if(r.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&UU(i,s),hD(o,a);var u=hD(o,s);for(a=0;a<l.length;a+=2){var c=l[a],h=l[a+1];c==="style"?GU(i,h):c==="dangerouslySetInnerHTML"?qU(i,h):c==="children"?Hb(i,h):GP(i,c,h,u)}switch(o){case"input":aD(i,s);break;case"textarea":zU(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Cg(i,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?Cg(i,!!s.multiple,s.defaultValue,!0):Cg(i,!!s.multiple,s.multiple?[]:"",!1))}i[e1]=s}catch(g){hn(r,r.return,g)}}break;case 6:if(wo(e,r),al(r),n&4){if(r.stateNode===null)throw Error(Fe(162));i=r.stateNode,s=r.memoizedProps;try{i.nodeValue=s}catch(g){hn(r,r.return,g)}}break;case 3:if(wo(e,r),al(r),n&4&&t!==null&&t.memoizedState.isDehydrated)try{Xb(e.containerInfo)}catch(g){hn(r,r.return,g)}break;case 4:wo(e,r),al(r);break;case 13:wo(e,r),al(r),i=r.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(SR=An())),n&4&&rB(r);break;case 22:if(c=t!==null&&t.memoizedState!==null,r.mode&1?(Xi=(u=Xi)||c,wo(e,r),Xi=u):wo(e,r),al(r),n&8192){if(u=r.memoizedState!==null,(r.stateNode.isHidden=u)&&!c&&r.mode&1)for(Qe=r,c=r.child;c!==null;){for(h=Qe=c;Qe!==null;){switch(d=Qe,f=d.child,d.tag){case 0:case 11:case 14:case 15:Nb(4,d,d.return);break;case 1:cg(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){n=d,t=d.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){hn(n,t,g)}}break;case 5:cg(d,d.return);break;case 22:if(d.memoizedState!==null){iB(h);continue}}f!==null?(f.return=d,Qe=f):iB(h)}c=c.sibling}e:for(c=null,h=r;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=HU("display",a))}catch(g){hn(r,r.return,g)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){hn(r,r.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===r)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:wo(e,r),al(r),n&4&&rB(r);break;case 21:break;default:wo(e,r),al(r)}}function al(r){var e=r.flags;if(e&2){try{e:{for(var t=r.return;t!==null;){if(vz(t)){var n=t;break e}t=t.return}throw Error(Fe(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Hb(i,""),n.flags&=-33);var s=tB(r);UD(r,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=tB(r);VD(r,o,a);break;default:throw Error(Fe(161))}}catch(l){hn(r,r.return,l)}r.flags&=-3}e&4096&&(r.flags&=-4097)}function UZ(r,e,t){Qe=r,wz(r)}function wz(r,e,t){for(var n=(r.mode&1)!==0;Qe!==null;){var i=Qe,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||G_;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Xi;o=G_;var u=Xi;if(G_=a,(Xi=l)&&!u)for(Qe=i;Qe!==null;)a=Qe,l=a.child,a.tag===22&&a.memoizedState!==null?sB(i):l!==null?(l.return=a,Qe=l):sB(i);for(;s!==null;)Qe=s,wz(s),s=s.sibling;Qe=i,G_=o,Xi=u}nB(r)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Qe=s):nB(r)}}function nB(r){for(;Qe!==null;){var e=Qe;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Xi||nC(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Xi)if(t===null)n.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:So(e.type,t.memoizedProps);n.componentDidUpdate(i,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&U3(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}U3(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Xb(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}Xi||e.flags&512&&$D(e)}catch(d){hn(e,e.return,d)}}if(e===r){Qe=null;break}if(t=e.sibling,t!==null){t.return=e.return,Qe=t;break}Qe=e.return}}function iB(r){for(;Qe!==null;){var e=Qe;if(e===r){Qe=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Qe=t;break}Qe=e.return}}function sB(r){for(;Qe!==null;){var e=Qe;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{nC(4,e)}catch(l){hn(e,t,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){hn(e,i,l)}}var s=e.return;try{$D(e)}catch(l){hn(e,s,l)}break;case 5:var a=e.return;try{$D(e)}catch(l){hn(e,a,l)}}}catch(l){hn(e,e.return,l)}if(e===r){Qe=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Qe=o;break}Qe=e.return}}var zZ=Math.ceil,uS=Nc.ReactCurrentDispatcher,AR=Nc.ReactCurrentOwner,ao=Nc.ReactCurrentBatchConfig,er=0,di=null,Mn=null,Mi=0,va=0,hg=Pd(0),jn=0,a1=null,Qm=0,iC=0,ER=0,Db=null,$s=null,SR=0,b0=1/0,hu=null,cS=!1,zD=null,rd=null,W_=!1,Gh=null,hS=0,Mb=0,jD=null,jA=-1,qA=0;function vs(){return er&6?An():jA!==-1?jA:jA=An()}function nd(r){return r.mode&1?er&2&&Mi!==0?Mi&-Mi:SZ.transition!==null?(qA===0&&(qA=i9()),qA):(r=fr,r!==0||(r=window.event,r=r===void 0?16:h9(r.type)),r):1}function Ho(r,e,t,n){if(50<Mb)throw Mb=0,jD=null,Error(Fe(185));Cx(r,t,n),(!(er&2)||r!==di)&&(r===di&&(!(er&2)&&(iC|=t),jn===4&&Kc(r,Mi)),Hs(r,n),t===1&&er===0&&!(e.mode&1)&&(b0=An()+500,eC&&Rd()))}function Hs(r,e){var t=r.callbackNode;SJ(r,e);var n=KE(r,r===di?Mi:0);if(n===0)t!==null&&m3(t),r.callbackNode=null,r.callbackPriority=0;else if(e=n&-n,r.callbackPriority!==e){if(t!=null&&m3(t),e===1)r.tag===0?EZ(aB.bind(null,r)):M9(aB.bind(null,r)),wZ(function(){!(er&6)&&Rd()}),t=null;else{switch(s9(n)){case 1:t=QP;break;case 4:t=r9;break;case 16:t=WE;break;case 536870912:t=n9;break;default:t=WE}t=Nz(t,xz.bind(null,r))}r.callbackPriority=e,r.callbackNode=t}}function xz(r,e){if(jA=-1,qA=0,er&6)throw Error(Fe(327));var t=r.callbackNode;if(Pg()&&r.callbackNode!==t)return null;var n=KE(r,r===di?Mi:0);if(n===0)return null;if(n&30||n&r.expiredLanes||e)e=dS(r,n);else{e=n;var i=er;er|=2;var s=Az();(di!==r||Mi!==e)&&(hu=null,b0=An()+500,Vm(r,e));do try{HZ();break}catch(o){_z(r,o)}while(!0);cR(),uS.current=s,er=i,Mn!==null?e=0:(di=null,Mi=0,e=jn)}if(e!==0){if(e===2&&(i=gD(r),i!==0&&(n=i,e=qD(r,i))),e===1)throw t=a1,Vm(r,0),Kc(r,n),Hs(r,An()),t;if(e===6)Kc(r,n);else{if(i=r.current.alternate,!(n&30)&&!jZ(i)&&(e=dS(r,n),e===2&&(s=gD(r),s!==0&&(n=s,e=qD(r,s))),e===1))throw t=a1,Vm(r,0),Kc(r,n),Hs(r,An()),t;switch(r.finishedWork=i,r.finishedLanes=n,e){case 0:case 1:throw Error(Fe(345));case 2:af(r,$s,hu);break;case 3:if(Kc(r,n),(n&130023424)===n&&(e=SR+500-An(),10<e)){if(KE(r,0)!==0)break;if(i=r.suspendedLanes,(i&n)!==n){vs(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=ED(af.bind(null,r,$s,hu),e);break}af(r,$s,hu);break;case 4:if(Kc(r,n),(n&4194240)===n)break;for(e=r.eventTimes,i=-1;0<n;){var a=31-qo(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=An()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*zZ(n/1960))-n,10<n){r.timeoutHandle=ED(af.bind(null,r,$s,hu),n);break}af(r,$s,hu);break;case 5:af(r,$s,hu);break;default:throw Error(Fe(329))}}}return Hs(r,An()),r.callbackNode===t?xz.bind(null,r):null}function qD(r,e){var t=Db;return r.current.memoizedState.isDehydrated&&(Vm(r,e).flags|=256),r=dS(r,e),r!==2&&(e=$s,$s=t,e!==null&&HD(e)),r}function HD(r){$s===null?$s=r:$s.push.apply($s,r)}function jZ(r){for(var e=r;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var i=t[n],s=i.getSnapshot;i=i.value;try{if(!Wo(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Kc(r,e){for(e&=~ER,e&=~iC,r.suspendedLanes|=e,r.pingedLanes&=~e,r=r.expirationTimes;0<e;){var t=31-qo(e),n=1<<t;r[t]=-1,e&=~n}}function aB(r){if(er&6)throw Error(Fe(327));Pg();var e=KE(r,0);if(!(e&1))return Hs(r,An()),null;var t=dS(r,e);if(r.tag!==0&&t===2){var n=gD(r);n!==0&&(e=n,t=qD(r,n))}if(t===1)throw t=a1,Vm(r,0),Kc(r,e),Hs(r,An()),t;if(t===6)throw Error(Fe(345));return r.finishedWork=r.current.alternate,r.finishedLanes=e,af(r,$s,hu),Hs(r,An()),null}function TR(r,e){var t=er;er|=1;try{return r(e)}finally{er=t,er===0&&(b0=An()+500,eC&&Rd())}}function Jm(r){Gh!==null&&Gh.tag===0&&!(er&6)&&Pg();var e=er;er|=1;var t=ao.transition,n=fr;try{if(ao.transition=null,fr=1,r)return r()}finally{fr=n,ao.transition=t,er=e,!(er&6)&&Rd()}}function CR(){va=hg.current,Vr(hg)}function Vm(r,e){r.finishedWork=null,r.finishedLanes=0;var t=r.timeoutHandle;if(t!==-1&&(r.timeoutHandle=-1,bZ(t)),Mn!==null)for(t=Mn.return;t!==null;){var n=t;switch(oR(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ZE();break;case 3:v0(),Vr(js),Vr(es),gR();break;case 5:pR(n);break;case 4:v0();break;case 13:Vr(Yr);break;case 19:Vr(Yr);break;case 10:hR(n.type._context);break;case 22:case 23:CR()}t=t.return}if(di=r,Mn=r=id(r.current,null),Mi=va=e,jn=0,a1=null,ER=iC=Qm=0,$s=Db=null,yf!==null){for(e=0;e<yf.length;e++)if(t=yf[e],n=t.interleaved,n!==null){t.interleaved=null;var i=n.next,s=t.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}t.pending=n}yf=null}return r}function _z(r,e){do{var t=Mn;try{if(cR(),VA.current=lS,oS){for(var n=Jr.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}oS=!1}if(Ym=0,ci=Un=Jr=null,Cb=!1,n1=0,AR.current=null,t===null||t.return===null){jn=1,a1=e,Mn=null;break}e:{var s=r,a=t.return,o=t,l=e;if(e=Mi,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=W3(a);if(f!==null){f.flags&=-257,K3(f,a,o,s,e),f.mode&1&&G3(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){G3(s,u,e),NR();break e}l=Error(Fe(426))}}else if(Hr&&o.mode&1){var b=W3(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),K3(b,a,o,s,e),lR(y0(l,o));break e}}s=l=y0(l,o),jn!==4&&(jn=2),Db===null?Db=[s]:Db.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=sz(s,l,e);V3(s,v);break e;case 1:o=l;var x=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(rd===null||!rd.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=az(s,o,e);V3(s,E);break e}}s=s.return}while(s!==null)}Sz(t)}catch(w){e=w,Mn===t&&t!==null&&(Mn=t=t.return);continue}break}while(!0)}function Az(){var r=uS.current;return uS.current=lS,r===null?lS:r}function NR(){(jn===0||jn===3||jn===2)&&(jn=4),di===null||!(Qm&268435455)&&!(iC&268435455)||Kc(di,Mi)}function dS(r,e){var t=er;er|=2;var n=Az();(di!==r||Mi!==e)&&(hu=null,Vm(r,e));do try{qZ();break}catch(i){_z(r,i)}while(!0);if(cR(),er=t,uS.current=n,Mn!==null)throw Error(Fe(261));return di=null,Mi=0,jn}function qZ(){for(;Mn!==null;)Ez(Mn)}function HZ(){for(;Mn!==null&&!gJ();)Ez(Mn)}function Ez(r){var e=Cz(r.alternate,r,va);r.memoizedProps=r.pendingProps,e===null?Sz(r):Mn=e,AR.current=null}function Sz(r){var e=r;do{var t=e.alternate;if(r=e.return,e.flags&32768){if(t=LZ(t,e),t!==null){t.flags&=32767,Mn=t;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{jn=6,Mn=null;return}}else if(t=BZ(t,e,va),t!==null){Mn=t;return}if(e=e.sibling,e!==null){Mn=e;return}Mn=e=r}while(e!==null);jn===0&&(jn=5)}function af(r,e,t){var n=fr,i=ao.transition;try{ao.transition=null,fr=1,GZ(r,e,t,n)}finally{ao.transition=i,fr=n}return null}function GZ(r,e,t,n){do Pg();while(Gh!==null);if(er&6)throw Error(Fe(327));t=r.finishedWork;var i=r.finishedLanes;if(t===null)return null;if(r.finishedWork=null,r.finishedLanes=0,t===r.current)throw Error(Fe(177));r.callbackNode=null,r.callbackPriority=0;var s=t.lanes|t.childLanes;if(TJ(r,s),r===di&&(Mn=di=null,Mi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||W_||(W_=!0,Nz(WE,function(){return Pg(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=ao.transition,ao.transition=null;var a=fr;fr=1;var o=er;er|=4,AR.current=null,VZ(r,t),bz(t,r),dZ(_D),XE=!!xD,_D=xD=null,r.current=t,UZ(t),vJ(),er=o,fr=a,ao.transition=s}else r.current=t;if(W_&&(W_=!1,Gh=r,hS=i),s=r.pendingLanes,s===0&&(rd=null),wJ(t.stateNode),Hs(r,An()),e!==null)for(n=r.onRecoverableError,t=0;t<e.length;t++)i=e[t],n(i.value,{componentStack:i.stack,digest:i.digest});if(cS)throw cS=!1,r=zD,zD=null,r;return hS&1&&r.tag!==0&&Pg(),s=r.pendingLanes,s&1?r===jD?Mb++:(Mb=0,jD=r):Mb=0,Rd(),null}function Pg(){if(Gh!==null){var r=s9(hS),e=ao.transition,t=fr;try{if(ao.transition=null,fr=16>r?16:r,Gh===null)var n=!1;else{if(r=Gh,Gh=null,hS=0,er&6)throw Error(Fe(331));var i=er;for(er|=4,Qe=r.current;Qe!==null;){var s=Qe,a=s.child;if(Qe.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(Qe=u;Qe!==null;){var c=Qe;switch(c.tag){case 0:case 11:case 15:Nb(8,c,s)}var h=c.child;if(h!==null)h.return=c,Qe=h;else for(;Qe!==null;){c=Qe;var d=c.sibling,f=c.return;if(gz(c),c===u){Qe=null;break}if(d!==null){d.return=f,Qe=d;break}Qe=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}Qe=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Qe=a;else e:for(;Qe!==null;){if(s=Qe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Nb(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Qe=v;break e}Qe=s.return}}var x=r.current;for(Qe=x;Qe!==null;){a=Qe;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,Qe=y;else e:for(a=x;Qe!==null;){if(o=Qe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:nC(9,o)}}catch(w){hn(o,o.return,w)}if(o===a){Qe=null;break e}var E=o.sibling;if(E!==null){E.return=o.return,Qe=E;break e}Qe=o.return}}if(er=i,Rd(),Bl&&typeof Bl.onPostCommitFiberRoot=="function")try{Bl.onPostCommitFiberRoot(XT,r)}catch{}n=!0}return n}finally{fr=t,ao.transition=e}}return!1}function oB(r,e,t){e=y0(t,e),e=sz(r,e,1),r=td(r,e,1),e=vs(),r!==null&&(Cx(r,1,e),Hs(r,e))}function hn(r,e,t){if(r.tag===3)oB(r,r,t);else for(;e!==null;){if(e.tag===3){oB(e,r,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(rd===null||!rd.has(n))){r=y0(t,r),r=az(e,r,1),e=td(e,r,1),r=vs(),e!==null&&(Cx(e,1,r),Hs(e,r));break}}e=e.return}}function WZ(r,e,t){var n=r.pingCache;n!==null&&n.delete(e),e=vs(),r.pingedLanes|=r.suspendedLanes&t,di===r&&(Mi&t)===t&&(jn===4||jn===3&&(Mi&130023424)===Mi&&500>An()-SR?Vm(r,0):ER|=t),Hs(r,e)}function Tz(r,e){e===0&&(r.mode&1?(e=B_,B_<<=1,!(B_&130023424)&&(B_=4194304)):e=1);var t=vs();r=fc(r,e),r!==null&&(Cx(r,e,t),Hs(r,t))}function KZ(r){var e=r.memoizedState,t=0;e!==null&&(t=e.retryLane),Tz(r,t)}function XZ(r,e){var t=0;switch(r.tag){case 13:var n=r.stateNode,i=r.memoizedState;i!==null&&(t=i.retryLane);break;case 19:n=r.stateNode;break;default:throw Error(Fe(314))}n!==null&&n.delete(e),Tz(r,t)}var Cz;Cz=function(r,e,t){if(r!==null)if(r.memoizedProps!==e.pendingProps||js.current)Us=!0;else{if(!(r.lanes&t)&&!(e.flags&128))return Us=!1,OZ(r,e,t);Us=!!(r.flags&131072)}else Us=!1,Hr&&e.flags&1048576&&I9(e,rS,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;zA(r,e),r=e.pendingProps;var i=m0(e,es.current);Ig(e,t),i=yR(null,e,n,r,i,t);var s=bR();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qs(n)?(s=!0,eS(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,fR(e),i.updater=rC,e.stateNode=i,i._reactInternals=e,ID(e,n,r,t),e=kD(null,e,n,!0,s,t)):(e.tag=0,Hr&&s&&aR(e),ms(null,e,i,t),e=e.child),e;case 16:n=e.elementType;e:{switch(zA(r,e),r=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=QZ(n),r=So(n,r),i){case 0:e=RD(null,e,n,r,t);break e;case 1:e=Q3(null,e,n,r,t);break e;case 11:e=X3(null,e,n,r,t);break e;case 14:e=Y3(null,e,n,So(n.type,r),t);break e}throw Error(Fe(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:So(n,i),RD(r,e,n,i,t);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:So(n,i),Q3(r,e,n,i,t);case 3:e:{if(cz(e),r===null)throw Error(Fe(387));n=e.pendingProps,s=e.memoizedState,i=s.element,B9(r,e),sS(e,n,null,t);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=y0(Error(Fe(423)),e),e=J3(r,e,n,t,i);break e}else if(n!==i){i=y0(Error(Fe(424)),e),e=J3(r,e,n,t,i);break e}else for(_a=ed(e.stateNode.containerInfo.firstChild),Ea=e,Hr=!0,$o=null,t=F9(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(p0(),n===i){e=mc(r,e,t);break e}ms(r,e,n,t)}e=e.child}return e;case 5:return L9(e),r===null&&ND(e),n=e.type,i=e.pendingProps,s=r!==null?r.memoizedProps:null,a=i.children,AD(n,i)?a=null:s!==null&&AD(n,s)&&(e.flags|=32),uz(r,e),ms(r,e,a,t),e.child;case 6:return r===null&&ND(e),null;case 13:return hz(r,e,t);case 4:return mR(e,e.stateNode.containerInfo),n=e.pendingProps,r===null?e.child=g0(e,null,n,t):ms(r,e,n,t),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:So(n,i),X3(r,e,n,i,t);case 7:return ms(r,e,e.pendingProps,t),e.child;case 8:return ms(r,e,e.pendingProps.children,t),e.child;case 12:return ms(r,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,kr(nS,n._currentValue),n._currentValue=a,s!==null)if(Wo(s.value,a)){if(s.children===i.children&&!js.current){e=mc(r,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=rc(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),DD(s.return,t,e),o.lanes|=t;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Fe(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),DD(a,t,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}ms(r,e,i.children,t),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Ig(e,t),i=ho(i),n=n(i),e.flags|=1,ms(r,e,n,t),e.child;case 14:return n=e.type,i=So(n,e.pendingProps),i=So(n.type,i),Y3(r,e,n,i,t);case 15:return oz(r,e,e.type,e.pendingProps,t);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:So(n,i),zA(r,e),e.tag=1,qs(n)?(r=!0,eS(e)):r=!1,Ig(e,t),iz(e,n,i),ID(e,n,i,t),kD(null,e,n,!0,r,t);case 19:return dz(r,e,t);case 22:return lz(r,e,t)}throw Error(Fe(156,e.tag))};function Nz(r,e){return t9(r,e)}function YZ(r,e,t,n){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function io(r,e,t,n){return new YZ(r,e,t,n)}function DR(r){return r=r.prototype,!(!r||!r.isReactComponent)}function QZ(r){if(typeof r=="function")return DR(r)?1:0;if(r!=null){if(r=r.$$typeof,r===KP)return 11;if(r===XP)return 14}return 2}function id(r,e){var t=r.alternate;return t===null?(t=io(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=r.flags&14680064,t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t}function HA(r,e,t,n,i,s){var a=2;if(n=r,typeof r=="function")DR(r)&&(a=1);else if(typeof r=="string")a=5;else e:switch(r){case tg:return Um(t.children,i,s,e);case WP:a=8,i|=8;break;case tD:return r=io(12,t,e,i|2),r.elementType=tD,r.lanes=s,r;case rD:return r=io(13,t,e,i),r.elementType=rD,r.lanes=s,r;case nD:return r=io(19,t,e,i),r.elementType=nD,r.lanes=s,r;case LU:return sC(t,i,s,e);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case OU:a=10;break e;case BU:a=9;break e;case KP:a=11;break e;case XP:a=14;break e;case jc:a=16,n=null;break e}throw Error(Fe(130,r==null?r:typeof r,""))}return e=io(a,t,e,i),e.elementType=r,e.type=n,e.lanes=s,e}function Um(r,e,t,n){return r=io(7,r,n,e),r.lanes=t,r}function sC(r,e,t,n){return r=io(22,r,n,e),r.elementType=LU,r.lanes=t,r.stateNode={isHidden:!1},r}function tN(r,e,t){return r=io(6,r,null,e),r.lanes=t,r}function rN(r,e,t){return e=io(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}function JZ(r,e,t,n,i){this.tag=e,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=O2(0),this.expirationTimes=O2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=O2(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function MR(r,e,t,n,i,s,a,o,l){return r=new JZ(r,e,t,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=io(3,null,null,e),r.current=s,s.stateNode=r,s.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},fR(s),r}function ZZ(r,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:eg,key:n==null?null:""+n,children:r,containerInfo:e,implementation:t}}function Dz(r){if(!r)return dd;r=r._reactInternals;e:{if(hp(r)!==r||r.tag!==1)throw Error(Fe(170));var e=r;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Fe(171))}if(r.tag===1){var t=r.type;if(qs(t))return D9(r,t,e)}return e}function Mz(r,e,t,n,i,s,a,o,l){return r=MR(t,n,!0,r,i,s,a,o,l),r.context=Dz(null),t=r.current,n=vs(),i=nd(t),s=rc(n,i),s.callback=e??null,td(t,s,i),r.current.lanes=i,Cx(r,i,n),Hs(r,n),r}function aC(r,e,t,n){var i=e.current,s=vs(),a=nd(i);return t=Dz(t),e.context===null?e.context=t:e.pendingContext=t,e=rc(s,a),e.payload={element:r},n=n===void 0?null:n,n!==null&&(e.callback=n),r=td(i,e,a),r!==null&&(Ho(r,i,a,s),$A(r,i,a)),a}function fS(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function lB(r,e){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&&t<e?t:e}}function IR(r,e){lB(r,e),(r=r.alternate)&&lB(r,e)}function eee(){return null}var Iz=typeof reportError=="function"?reportError:function(r){console.error(r)};function PR(r){this._internalRoot=r}oC.prototype.render=PR.prototype.render=function(r){var e=this._internalRoot;if(e===null)throw Error(Fe(409));aC(r,e,null,null)};oC.prototype.unmount=PR.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var e=r.containerInfo;Jm(function(){aC(null,r,null,null)}),e[dc]=null}};function oC(r){this._internalRoot=r}oC.prototype.unstable_scheduleHydration=function(r){if(r){var e=l9();r={blockedOn:null,target:r,priority:e};for(var t=0;t<Wc.length&&e!==0&&e<Wc[t].priority;t++);Wc.splice(t,0,r),t===0&&c9(r)}};function RR(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function lC(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function uB(){}function tee(r,e,t,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=fS(a);s.call(u)}}var a=Mz(e,n,r,0,null,!1,!1,"",uB);return r._reactRootContainer=a,r[dc]=a.current,Jb(r.nodeType===8?r.parentNode:r),Jm(),a}for(;i=r.lastChild;)r.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=fS(l);o.call(u)}}var l=MR(r,0,!1,null,null,!1,!1,"",uB);return r._reactRootContainer=l,r[dc]=l.current,Jb(r.nodeType===8?r.parentNode:r),Jm(function(){aC(e,l,t,n)}),l}function uC(r,e,t,n,i){var s=t._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=fS(a);o.call(l)}}aC(e,a,r,i)}else a=tee(t,e,r,i,n);return fS(a)}a9=function(r){switch(r.tag){case 3:var e=r.stateNode;if(e.current.memoizedState.isDehydrated){var t=qy(e.pendingLanes);t!==0&&(JP(e,t|1),Hs(e,An()),!(er&6)&&(b0=An()+500,Rd()))}break;case 13:Jm(function(){var n=fc(r,1);if(n!==null){var i=vs();Ho(n,r,1,i)}}),IR(r,1)}};ZP=function(r){if(r.tag===13){var e=fc(r,134217728);if(e!==null){var t=vs();Ho(e,r,134217728,t)}IR(r,134217728)}};o9=function(r){if(r.tag===13){var e=nd(r),t=fc(r,e);if(t!==null){var n=vs();Ho(t,r,e,n)}IR(r,e)}};l9=function(){return fr};u9=function(r,e){var t=fr;try{return fr=r,e()}finally{fr=t}};fD=function(r,e,t){switch(e){case"input":if(aD(r,t),e=t.name,t.type==="radio"&&e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==r&&n.form===r.form){var i=ZT(n);if(!i)throw Error(Fe(90));VU(n),aD(n,i)}}}break;case"textarea":zU(r,t);break;case"select":e=t.value,e!=null&&Cg(r,!!t.multiple,e,!1)}};XU=TR;YU=Jm;var ree={usingClientEntryPoint:!1,Events:[Dx,sg,ZT,WU,KU,TR]},Py={findFiberByHostInstance:vf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nee={bundleType:Py.bundleType,version:Py.version,rendererPackageName:Py.rendererPackageName,rendererConfig:Py.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nc.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ZU(r),r===null?null:r.stateNode},findFiberByHostInstance:Py.findFiberByHostInstance||eee,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var K_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!K_.isDisabled&&K_.supportsFiber)try{XT=K_.inject(nee),Bl=K_}catch{}}Na.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ree;Na.createPortal=function(r,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!RR(e))throw Error(Fe(200));return ZZ(r,e,null,t)};Na.createRoot=function(r,e){if(!RR(r))throw Error(Fe(299));var t=!1,n="",i=Iz;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=MR(r,1,!1,null,null,t,!1,n,i),r[dc]=e.current,Jb(r.nodeType===8?r.parentNode:r),new PR(e)};Na.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(Fe(188)):(r=Object.keys(r).join(","),Error(Fe(268,r)));return r=ZU(e),r=r===null?null:r.stateNode,r};Na.flushSync=function(r){return Jm(r)};Na.hydrate=function(r,e,t){if(!lC(e))throw Error(Fe(200));return uC(null,r,e,!0,t)};Na.hydrateRoot=function(r,e,t){if(!RR(r))throw Error(Fe(405));var n=t!=null&&t.hydratedSources||null,i=!1,s="",a=Iz;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=Mz(e,null,r,1,t??null,i,!1,s,a),r[dc]=e.current,Jb(r),n)for(r=0;r<n.length;r++)t=n[r],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new oC(e)};Na.render=function(r,e,t){if(!lC(e))throw Error(Fe(200));return uC(null,r,e,!1,t)};Na.unmountComponentAtNode=function(r){if(!lC(r))throw Error(Fe(40));return r._reactRootContainer?(Jm(function(){uC(null,null,r,!1,function(){r._reactRootContainer=null,r[dc]=null})}),!0):!1};Na.unstable_batchedUpdates=TR;Na.unstable_renderSubtreeIntoContainer=function(r,e,t,n){if(!lC(t))throw Error(Fe(200));if(r==null||r._reactInternals===void 0)throw Error(Fe(38));return uC(r,e,t,!1,n)};Na.version="18.3.1-next-f1338f8080-20240426";function Pz(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Pz)}catch(r){console.error(r)}}Pz(),PU.exports=Na;var iee=PU.exports,cB=iee;ZN.createRoot=cB.createRoot,ZN.hydrateRoot=cB.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function o1(){return o1=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},o1.apply(this,arguments)}var Wh;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Wh||(Wh={}));const hB="popstate";function see(r){r===void 0&&(r={});function e(n,i){let{pathname:s,search:a,hash:o}=n.location;return GD("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:mS(i)}return oee(e,t,null,r)}function En(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function kR(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aee(){return Math.random().toString(36).substr(2,8)}function dB(r,e){return{usr:r.state,key:r.key,idx:e}}function GD(r,e,t,n){return t===void 0&&(t=null),o1({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?$0(e):e,{state:t,key:e&&e.key||n||aee()})}function mS(r){let{pathname:e="/",search:t="",hash:n=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function $0(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substr(n),r=r.substr(0,n)),r&&(e.pathname=r)}return e}function oee(r,e,t,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,o=Wh.Pop,l=null,u=c();u==null&&(u=0,a.replaceState(o1({},a.state,{idx:u}),""));function c(){return(a.state||{idx:null}).idx}function h(){o=Wh.Pop;let b=c(),v=b==null?null:b-u;u=b,l&&l({action:o,location:g.location,delta:v})}function d(b,v){o=Wh.Push;let x=GD(g.location,b,v);u=c()+1;let y=dB(x,u),E=g.createHref(x);try{a.pushState(y,"",E)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(E)}s&&l&&l({action:o,location:g.location,delta:1})}function f(b,v){o=Wh.Replace;let x=GD(g.location,b,v);u=c();let y=dB(x,u),E=g.createHref(x);a.replaceState(y,"",E),s&&l&&l({action:o,location:g.location,delta:0})}function p(b){let v=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof b=="string"?b:mS(b);return x=x.replace(/ $/,"%20"),En(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let g={get action(){return o},get location(){return r(i,a)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(hB,h),l=b,()=>{i.removeEventListener(hB,h),l=null}},createHref(b){return e(i,b)},createURL:p,encodeLocation(b){let v=p(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:f,go(b){return a.go(b)}};return g}var fB;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(fB||(fB={}));function lee(r,e,t){return t===void 0&&(t="/"),uee(r,e,t)}function uee(r,e,t,n){let i=typeof e=="string"?$0(e):e,s=FR(i.pathname||"/",t);if(s==null)return null;let a=Rz(r);cee(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=_ee(s);o=bee(a[l],u)}return o}function Rz(r,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(En(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=sd([n,l.relativePath]),c=t.concat(l);s.children&&s.children.length>0&&(En(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Rz(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:vee(u,s.index),routesMeta:c})};return r.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of kz(s.path))i(s,a,l)}),e}function kz(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=kz(n.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>r.startsWith("/")&&l===""?"/":l)}function cee(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:yee(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const hee=/^:[\w-]+$/,dee=3,fee=2,mee=1,pee=10,gee=-2,mB=r=>r==="*";function vee(r,e){let t=r.split("/"),n=t.length;return t.some(mB)&&(n+=gee),e&&(n+=fee),t.filter(i=>!mB(i)).reduce((i,s)=>i+(hee.test(s)?dee:s===""?mee:pee),n)}function yee(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function bee(r,e,t){let{routesMeta:n}=r,i={},s="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",h=wee({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),d=l.route;if(!h)return null;Object.assign(i,h.params),a.push({params:i,pathname:sd([s,h.pathname]),pathnameBase:Cee(sd([s,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(s=sd([s,h.pathnameBase]))}return a}function wee(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=xee(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((u,c,h)=>{let{paramName:d,isOptional:f}=c;if(d==="*"){let g=o[h]||"";a=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const p=o[h];return f&&!p?u[d]=void 0:u[d]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:r}}function xee(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),kR(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function _ee(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kR(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function FR(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}const Aee=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Eee=r=>Aee.test(r);function See(r,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?$0(r):r,s;if(t)if(Eee(t))s=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),kR(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+t))}t.startsWith("/")?s=pB(t.substring(1),"/"):s=pB(t,e)}else s=e;return{pathname:s,search:Nee(n),hash:Dee(i)}}function pB(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function nN(r,e,t,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Tee(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function OR(r,e){let t=Tee(r);return e?t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function BR(r,e,t,n){n===void 0&&(n=!1);let i;typeof r=="string"?i=$0(r):(i=o1({},r),En(!i.pathname||!i.pathname.includes("?"),nN("?","pathname","search",i)),En(!i.pathname||!i.pathname.includes("#"),nN("#","pathname","hash",i)),En(!i.search||!i.search.includes("#"),nN("#","search","hash",i)));let s=r===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=t;else{let h=e.length-1;if(!n&&a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),h-=1;i.pathname=d.join("/")}o=h>=0?e[h]:"/"}let l=See(i,o),u=a&&a!=="/"&&a.endsWith("/"),c=(s||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const sd=r=>r.join("/").replace(/\/\/+/g,"/"),Cee=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Nee=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Dee=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Mee(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Fz=["post","put","patch","delete"];new Set(Fz);const Iee=["get",...Fz];new Set(Iee);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function l1(){return l1=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},l1.apply(this,arguments)}const LR=he.createContext(null),Pee=he.createContext(null),kd=he.createContext(null),cC=he.createContext(null),Zl=he.createContext({outlet:null,matches:[],isDataRoute:!1}),Oz=he.createContext(null);function Ree(r,e){let{relative:t}=e===void 0?{}:e;V0()||En(!1);let{basename:n,navigator:i}=he.useContext(kd),{hash:s,pathname:a,search:o}=$z(r,{relative:t}),l=a;return n!=="/"&&(l=a==="/"?n:sd([n,a])),i.createHref({pathname:l,search:o,hash:s})}function V0(){return he.useContext(cC)!=null}function U0(){return V0()||En(!1),he.useContext(cC).location}function Bz(r){he.useContext(kd).static||he.useLayoutEffect(r)}function z0(){let{isDataRoute:r}=he.useContext(Zl);return r?Kee():kee()}function kee(){V0()||En(!1);let r=he.useContext(LR),{basename:e,future:t,navigator:n}=he.useContext(kd),{matches:i}=he.useContext(Zl),{pathname:s}=U0(),a=JSON.stringify(OR(i,t.v7_relativeSplatPath)),o=he.useRef(!1);return Bz(()=>{o.current=!0}),he.useCallback(function(u,c){if(c===void 0&&(c={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=BR(u,JSON.parse(a),s,c.relative==="path");r==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:sd([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,a,s,r])}const Fee=he.createContext(null);function Oee(r){let e=he.useContext(Zl).outlet;return e&&he.createElement(Fee.Provider,{value:r},e)}function Lz(){let{matches:r}=he.useContext(Zl),e=r[r.length-1];return e?e.params:{}}function $z(r,e){let{relative:t}=e===void 0?{}:e,{future:n}=he.useContext(kd),{matches:i}=he.useContext(Zl),{pathname:s}=U0(),a=JSON.stringify(OR(i,n.v7_relativeSplatPath));return he.useMemo(()=>BR(r,JSON.parse(a),s,t==="path"),[r,a,s,t])}function Bee(r,e){return Lee(r,e)}function Lee(r,e,t,n){V0()||En(!1);let{navigator:i}=he.useContext(kd),{matches:s}=he.useContext(Zl),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=U0(),c;if(e){var h;let b=typeof e=="string"?$0(e):e;l==="/"||(h=b.pathname)!=null&&h.startsWith(l)||En(!1),c=b}else c=u;let d=c.pathname||"/",f=d;if(l!=="/"){let b=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(b.length).join("/")}let p=lee(r,{pathname:f}),g=jee(p&&p.map(b=>Object.assign({},b,{params:Object.assign({},o,b.params),pathname:sd([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:sd([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,t,n);return e&&g?he.createElement(cC.Provider,{value:{location:l1({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Wh.Pop}},g):g}function $ee(){let r=Wee(),e=Mee(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return he.createElement(he.Fragment,null,he.createElement("h2",null,"Unexpected Application Error!"),he.createElement("h3",{style:{fontStyle:"italic"}},e),t?he.createElement("pre",{style:i},t):null,null)}const Vee=he.createElement($ee,null);class Uee extends he.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?he.createElement(Zl.Provider,{value:this.props.routeContext},he.createElement(Oz.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zee(r){let{routeContext:e,match:t,children:n}=r,i=he.useContext(LR);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),he.createElement(Zl.Provider,{value:e},n)}function jee(r,e,t,n){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),r==null){var s;if(!t)return null;if(t.errors)r=t.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let a=r,o=(i=t)==null?void 0:i.errors;if(o!=null){let c=a.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);c>=0||En(!1),a=a.slice(0,Math.min(a.length,c+1))}let l=!1,u=-1;if(t&&n&&n.v7_partialHydration)for(let c=0;c<a.length;c++){let h=a[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:d,errors:f}=t,p=h.route.loader&&d[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||p){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,h,d)=>{let f,p=!1,g=null,b=null;t&&(f=o&&h.route.id?o[h.route.id]:void 0,g=h.route.errorElement||Vee,l&&(u<0&&d===0?(Xee("route-fallback"),p=!0,b=null):u===d&&(p=!0,b=h.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,d+1)),x=()=>{let y;return f?y=g:p?y=b:h.route.Component?y=he.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=c,he.createElement(zee,{match:h,routeContext:{outlet:c,matches:v,isDataRoute:t!=null},children:y})};return t&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?he.createElement(Uee,{location:t.location,revalidation:t.revalidation,component:g,error:f,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var Vz=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(Vz||{}),Uz=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(Uz||{});function qee(r){let e=he.useContext(LR);return e||En(!1),e}function Hee(r){let e=he.useContext(Pee);return e||En(!1),e}function Gee(r){let e=he.useContext(Zl);return e||En(!1),e}function zz(r){let e=Gee(),t=e.matches[e.matches.length-1];return t.route.id||En(!1),t.route.id}function Wee(){var r;let e=he.useContext(Oz),t=Hee(),n=zz();return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function Kee(){let{router:r}=qee(Vz.UseNavigateStable),e=zz(Uz.UseNavigateStable),t=he.useRef(!1);return Bz(()=>{t.current=!0}),he.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?r.navigate(i):r.navigate(i,l1({fromRouteId:e},s)))},[r,e])}const gB={};function Xee(r,e,t){gB[r]||(gB[r]=!0)}function Yee(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function Qee(r){let{to:e,replace:t,state:n,relative:i}=r;V0()||En(!1);let{future:s,static:a}=he.useContext(kd),{matches:o}=he.useContext(Zl),{pathname:l}=U0(),u=z0(),c=BR(e,OR(o,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(c);return he.useEffect(()=>u(JSON.parse(h),{replace:t,state:n,relative:i}),[u,h,i,t,n]),null}function Jee(r){return Oee(r.context)}function mi(r){En(!1)}function Zee(r){let{basename:e="/",children:t=null,location:n,navigationType:i=Wh.Pop,navigator:s,static:a=!1,future:o}=r;V0()&&En(!1);let l=e.replace(/^\/*/,"/"),u=he.useMemo(()=>({basename:l,navigator:s,static:a,future:l1({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof n=="string"&&(n=$0(n));let{pathname:c="/",search:h="",hash:d="",state:f=null,key:p="default"}=n,g=he.useMemo(()=>{let b=FR(c,l);return b==null?null:{location:{pathname:b,search:h,hash:d,state:f,key:p},navigationType:i}},[l,c,h,d,f,p,i]);return g==null?null:he.createElement(kd.Provider,{value:u},he.createElement(cC.Provider,{children:t,value:g}))}function ete(r){let{children:e,location:t}=r;return Bee(WD(e),t)}new Promise(()=>{});function WD(r,e){e===void 0&&(e=[]);let t=[];return he.Children.forEach(r,(n,i)=>{if(!he.isValidElement(n))return;let s=[...e,i];if(n.type===he.Fragment){t.push.apply(t,WD(n.props.children,s));return}n.type!==mi&&En(!1),!n.props.index||!n.props.children||En(!1);let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=WD(n.props.children,s)),t.push(a)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function KD(){return KD=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},KD.apply(this,arguments)}function tte(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function rte(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function nte(r,e){return r.button===0&&(!e||e==="_self")&&!rte(r)}const ite=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ste="6";try{window.__reactRouterVersion=ste}catch{}const ate="startTransition",vB=WQ[ate];function ote(r){let{basename:e,children:t,future:n,window:i}=r,s=he.useRef();s.current==null&&(s.current=see({window:i,v5Compat:!0}));let a=s.current,[o,l]=he.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},c=he.useCallback(h=>{u&&vB?vB(()=>l(h)):l(h)},[l,u]);return he.useLayoutEffect(()=>a.listen(c),[a,c]),he.useEffect(()=>Yee(n),[n]),he.createElement(Zee,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,future:n})}const lte=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ute=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cr=he.forwardRef(function(e,t){let{onClick:n,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:u,preventScrollReset:c,viewTransition:h}=e,d=tte(e,ite),{basename:f}=he.useContext(kd),p,g=!1;if(typeof u=="string"&&ute.test(u)&&(p=u,lte))try{let y=new URL(window.location.href),E=u.startsWith("//")?new URL(y.protocol+u):new URL(u),w=FR(E.pathname,f);E.origin===y.origin&&w!=null?u=w+E.search+E.hash:g=!0}catch{}let b=Ree(u,{relative:i}),v=cte(u,{replace:a,state:o,target:l,preventScrollReset:c,relative:i,viewTransition:h});function x(y){n&&n(y),y.defaultPrevented||v(y)}return he.createElement("a",KD({},d,{href:p||b,onClick:g||s?n:x,ref:t,target:l}))});var yB;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(yB||(yB={}));var bB;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(bB||(bB={}));function cte(r,e){let{target:t,replace:n,state:i,preventScrollReset:s,relative:a,viewTransition:o}=e===void 0?{}:e,l=z0(),u=U0(),c=$z(r,{relative:a});return he.useCallback(h=>{if(nte(h,t)){h.preventDefault();let d=n!==void 0?n:mS(u)===mS(c);l(r,{replace:d,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[u,l,c,n,i,t,r,s,a,o])}const jz=he.createContext(),go=()=>{const r=he.useContext(jz);if(!r)throw new Error("useTheme must be used within ThemeProvider");return r},hte=({children:r})=>{const[e,t]=he.useState(()=>{const i=localStorage.getItem("theme");return i?i==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});he.useEffect(()=>{const i=document.documentElement;e?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",e?"dark":"light")},[e]);const n=()=>{t(i=>!i)};return R.jsx(jz.Provider,{value:{isDark:e,toggleTheme:n},children:r})},qz="authToken",Hz="user",dte=()=>localStorage.getItem(qz),fte=()=>{localStorage.removeItem(qz)},fd=()=>{const r=localStorage.getItem(Hz);return r?JSON.parse(r):null},mte=()=>{localStorage.removeItem(Hz)},XD=()=>!!dte(),pte=()=>{fte(),mte()};function gte(){const{isDark:r,toggleTheme:e}=go(),t=z0(),[n,i]=he.useState(!1),[s,a]=he.useState(!1),[o,l]=he.useState(null),[u,c]=he.useState(!1);he.useEffect(()=>{XD()&&(l(fd()),c(!0));const f=()=>{XD()?(l(fd()),c(!0)):(l(null),c(!1))};return window.addEventListener("auth-change",f),()=>window.removeEventListener("auth-change",f)},[]);const h=()=>{pte(),localStorage.removeItem("user"),localStorage.removeItem("authToken"),l(null),c(!1),a(!1),i(!1),window.dispatchEvent(new Event("auth-change")),t("/")},d=[{to:"/",label:""},{to:"/concepts",label:""},{to:"/papers",label:" "},{to:"/visualizations",label:""},{to:"/calculator",label:""},{to:"/forum",label:""},{to:"/glossary",label:" "},{to:"/references",label:" "},...u&&o?[{to:"/notes",label:""}]:[]];return R.jsx("header",{className:`sticky top-0 z-40 transition-colors duration-300 ${r?"bg-gray-900 border-gray-800":"bg-white border-gray-200"} border-b backdrop-blur`,children:R.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsx(Cr,{to:"/",className:"text-xl sm:text-2xl font-bold text-blue-500 dark:text-blue-400 whitespace-nowrap",children:"Astro Hub"}),R.jsxs("nav",{className:"hidden md:flex items-center gap-3 lg:gap-6",children:[d.map(f=>R.jsx(Cr,{to:f.to,className:`transition text-sm lg:text-base ${r?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,children:f.label},f.to)),R.jsx("button",{onClick:e,className:`p-2 rounded-lg border transition text-lg ${r?"border-gray-700 hover:bg-gray-800":"border-gray-300 hover:bg-gray-100"}`,"aria-label":" ",children:r?"":""}),u&&o?R.jsxs("div",{className:"relative",children:[R.jsxs("button",{onClick:()=>a(!s),className:`p-2 rounded-lg border transition ${r?"border-gray-700 hover:bg-gray-800":"border-gray-300 hover:bg-gray-100"}`,children:[" ",o.username]}),s&&R.jsxs("div",{className:`absolute right-0 mt-2 w-48 rounded-lg shadow-lg ${r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border`,children:[R.jsx(Cr,{to:"/profile",className:`block px-4 py-2 first:rounded-t-lg ${r?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>a(!1),children:""}),R.jsx(Cr,{to:"/bookmarks",className:`block px-4 py-2 ${r?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>a(!1),children:""}),R.jsx(Cr,{to:"/notes",className:`block px-4 py-2 ${r?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>a(!1),children:""}),R.jsx("button",{onClick:h,className:`w-full text-left px-4 py-2 last:rounded-b-lg ${r?"text-red-400 hover:bg-gray-700":"text-red-600 hover:bg-gray-100"}`,children:""})]})]}):R.jsxs("div",{className:"flex gap-2",children:[R.jsx(Cr,{to:"/login",className:`px-4 py-2 rounded-lg border transition ${r?"border-blue-400 text-blue-400 hover:bg-blue-400 hover:text-gray-900":"border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white"}`,children:""}),R.jsx(Cr,{to:"/signup",className:`px-4 py-2 rounded-lg transition text-white ${r?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"}`,children:""})]})]}),R.jsxs("div",{className:"md:hidden flex items-center gap-3",children:[R.jsx("button",{onClick:e,className:`p-2 rounded-lg border transition text-lg ${r?"border-gray-700 hover:bg-gray-800":"border-gray-300 hover:bg-gray-100"}`,"aria-label":" ",children:r?"":""}),R.jsx("button",{onClick:()=>i(!n),className:`p-2 transition ${r?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,"aria-label":"",children:n?"":""})]})]}),n&&R.jsxs("nav",{className:`md:hidden mt-4 space-y-2 pb-4 border-t transition-colors duration-300 pt-4 ${r?"border-gray-800":"border-gray-200"}`,children:[d.map(f=>R.jsx(Cr,{to:f.to,className:`block py-2 transition ${r?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:f.label},f.to)),u&&o?R.jsx(R.Fragment,{children:R.jsxs("div",{className:`py-2 border-t transition-colors duration-300 ${r?"border-gray-800":"border-gray-200"} mt-2 pt-2`,children:[R.jsx("div",{className:`px-2 py-1 text-sm ${r?"text-gray-400":"text-gray-500"}`,children:o.username}),R.jsx(Cr,{to:"/profile",className:`block py-2 transition ${r?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:""}),R.jsx(Cr,{to:"/bookmarks",className:`block py-2 transition ${r?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:""}),R.jsx(Cr,{to:"/notes",className:`block py-2 transition ${r?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:""}),R.jsx("button",{onClick:h,className:`w-full text-left py-2 transition ${r?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-700"}`,children:""})]})}):R.jsxs("div",{className:`py-2 border-t transition-colors duration-300 mt-2 pt-2 ${r?"border-gray-800":"border-gray-200"}`,children:[R.jsx(Cr,{to:"/login",className:`block py-2 transition ${r?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"}`,onClick:()=>i(!1),children:""}),R.jsx(Cr,{to:"/signup",className:`block py-2 transition ${r?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"}`,onClick:()=>i(!1),children:""})]})]})]})})}function vte(){const[r,e]=he.useState(0);return he.useEffect(()=>{const t=()=>{const n=window.scrollY,i=document.documentElement.scrollHeight-window.innerHeight,s=i>0?n/i*100:0;e(Math.min(100,Math.max(0,s)))};return window.addEventListener("scroll",t,{passive:!0}),()=>window.removeEventListener("scroll",t)},[]),R.jsx("div",{className:"scroll-progress",children:R.jsx("div",{className:"scroll-progress__bar",style:{transform:`scaleX(${r/100})`}})})}function yte(){const{isDark:r}=go();return R.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${r?"bg-gray-950 text-gray-100":"bg-white text-gray-900"}`,children:[R.jsx(vte,{}),R.jsx(gte,{}),R.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:R.jsx(Jee,{})}),R.jsx("footer",{className:`border-t py-6 text-center text-sm transition-colors duration-300 ${r?"bg-gray-900 border-gray-800 text-gray-400":"bg-gray-50 border-gray-200 text-gray-600"}`,children:R.jsx("p",{children:" 2025 Astrophysics Hub    "})})]})}const Gz=he.createContext({});function bte(r){const e=he.useRef(null);return e.current===null&&(e.current=r()),e.current}const $R=typeof window<"u",wte=$R?he.useLayoutEffect:he.useEffect,VR=he.createContext(null);function UR(r,e){r.indexOf(e)===-1&&r.push(e)}function zR(r,e){const t=r.indexOf(e);t>-1&&r.splice(t,1)}const pc=(r,e,t)=>t>e?e:t<r?r:t;let jR=()=>{};const gc={},Wz=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function Kz(r){return typeof r=="object"&&r!==null}const Xz=r=>/^0[^.\s]+$/u.test(r);function qR(r){let e;return()=>(e===void 0&&(e=r()),e)}const oo=r=>r,xte=(r,e)=>t=>e(r(t)),Ix=(...r)=>r.reduce(xte),u1=(r,e,t)=>{const n=e-r;return n===0?1:(t-r)/n};class HR{constructor(){this.subscriptions=[]}add(e){return UR(this.subscriptions,e),()=>zR(this.subscriptions,e)}notify(e,t,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,n);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const $l=r=>r*1e3,so=r=>r/1e3;function Yz(r,e){return e?r*(1e3/e):0}const Qz=(r,e,t)=>(((1-3*t+3*e)*r+(3*t-6*e))*r+3*e)*r,_te=1e-7,Ate=12;function Ete(r,e,t,n,i){let s,a,o=0;do a=e+(t-e)/2,s=Qz(a,n,i)-r,s>0?t=a:e=a;while(Math.abs(s)>_te&&++o<Ate);return a}function Px(r,e,t,n){if(r===e&&t===n)return oo;const i=s=>Ete(s,0,1,r,t);return s=>s===0||s===1?s:Qz(i(s),e,n)}const Jz=r=>e=>e<=.5?r(2*e)/2:(2-r(2*(1-e)))/2,Zz=r=>e=>1-r(1-e),e7=Px(.33,1.53,.69,.99),GR=Zz(e7),t7=Jz(GR),r7=r=>(r*=2)<1?.5*GR(r):.5*(2-Math.pow(2,-10*(r-1))),WR=r=>1-Math.sin(Math.acos(r)),n7=Zz(WR),i7=Jz(WR),Ste=Px(.42,0,1,1),Tte=Px(0,0,.58,1),s7=Px(.42,0,.58,1),Cte=r=>Array.isArray(r)&&typeof r[0]!="number",a7=r=>Array.isArray(r)&&typeof r[0]=="number",Nte={linear:oo,easeIn:Ste,easeInOut:s7,easeOut:Tte,circIn:WR,circInOut:i7,circOut:n7,backIn:GR,backInOut:t7,backOut:e7,anticipate:r7},Dte=r=>typeof r=="string",wB=r=>{if(a7(r)){jR(r.length===4);const[e,t,n,i]=r;return Px(e,t,n,i)}else if(Dte(r))return Nte[r];return r},X_=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Mte(r,e){let t=new Set,n=new Set,i=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(c){a.has(c)&&(u.schedule(c),r()),c(o)}const u={schedule:(c,h=!1,d=!1)=>{const p=d&&i?t:n;return h&&a.add(c),p.has(c)||p.add(c),c},cancel:c=>{n.delete(c),a.delete(c)},process:c=>{if(o=c,i){s=!0;return}i=!0,[t,n]=[n,t],t.forEach(l),t.clear(),i=!1,s&&(s=!1,u.process(c))}};return u}const Ite=40;function o7(r,e){let t=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,a=X_.reduce((y,E)=>(y[E]=Mte(s),y),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:c,update:h,preRender:d,render:f,postRender:p}=a,g=()=>{const y=gc.useManualTiming?i.timestamp:performance.now();t=!1,gc.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(y-i.timestamp,Ite),1)),i.timestamp=y,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),c.process(i),h.process(i),d.process(i),f.process(i),p.process(i),i.isProcessing=!1,t&&e&&(n=!1,r(g))},b=()=>{t=!0,n=!0,i.isProcessing||r(g)};return{schedule:X_.reduce((y,E)=>{const w=a[E];return y[E]=(A,T=!1,S=!1)=>(t||b(),w.schedule(A,T,S)),y},{}),cancel:y=>{for(let E=0;E<X_.length;E++)a[X_[E]].cancel(y)},state:i,steps:a}}const{schedule:Gr,cancel:md,state:_i,steps:iN}=o7(typeof requestAnimationFrame<"u"?requestAnimationFrame:oo,!0);let GA;function Pte(){GA=void 0}const zs={now:()=>(GA===void 0&&zs.set(_i.isProcessing||gc.useManualTiming?_i.timestamp:performance.now()),GA),set:r=>{GA=r,queueMicrotask(Pte)}},l7=r=>e=>typeof e=="string"&&e.startsWith(r),KR=l7("--"),Rte=l7("var(--"),XR=r=>Rte(r)?kte.test(r.split("/*")[0].trim()):!1,kte=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,j0={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},c1={...j0,transform:r=>pc(0,1,r)},Y_={...j0,default:1},Ib=r=>Math.round(r*1e5)/1e5,YR=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Fte(r){return r==null}const Ote=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,QR=(r,e)=>t=>!!(typeof t=="string"&&Ote.test(t)&&t.startsWith(r)||e&&!Fte(t)&&Object.prototype.hasOwnProperty.call(t,e)),u7=(r,e,t)=>n=>{if(typeof n!="string")return n;const[i,s,a,o]=n.match(YR);return{[r]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},Bte=r=>pc(0,255,r),sN={...j0,transform:r=>Math.round(Bte(r))},wf={test:QR("rgb","red"),parse:u7("red","green","blue"),transform:({red:r,green:e,blue:t,alpha:n=1})=>"rgba("+sN.transform(r)+", "+sN.transform(e)+", "+sN.transform(t)+", "+Ib(c1.transform(n))+")"};function Lte(r){let e="",t="",n="",i="";return r.length>5?(e=r.substring(1,3),t=r.substring(3,5),n=r.substring(5,7),i=r.substring(7,9)):(e=r.substring(1,2),t=r.substring(2,3),n=r.substring(3,4),i=r.substring(4,5),e+=e,t+=t,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const YD={test:QR("#"),parse:Lte,transform:wf.transform},Rx=r=>({test:e=>typeof e=="string"&&e.endsWith(r)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${r}`}),Vc=Rx("deg"),Vl=Rx("%"),pt=Rx("px"),$te=Rx("vh"),Vte=Rx("vw"),xB={...Vl,parse:r=>Vl.parse(r)/100,transform:r=>Vl.transform(r*100)},dg={test:QR("hsl","hue"),parse:u7("hue","saturation","lightness"),transform:({hue:r,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(r)+", "+Vl.transform(Ib(e))+", "+Vl.transform(Ib(t))+", "+Ib(c1.transform(n))+")"},Dn={test:r=>wf.test(r)||YD.test(r)||dg.test(r),parse:r=>wf.test(r)?wf.parse(r):dg.test(r)?dg.parse(r):YD.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?wf.transform(r):dg.transform(r),getAnimatableNone:r=>{const e=Dn.parse(r);return e.alpha=0,Dn.transform(e)}},Ute=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function zte(r){var e,t;return isNaN(r)&&typeof r=="string"&&(((e=r.match(YR))==null?void 0:e.length)||0)+(((t=r.match(Ute))==null?void 0:t.length)||0)>0}const c7="number",h7="color",jte="var",qte="var(",_B="${}",Hte=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function h1(r){const e=r.toString(),t=[],n={color:[],number:[],var:[]},i=[];let s=0;const o=e.replace(Hte,l=>(Dn.test(l)?(n.color.push(s),i.push(h7),t.push(Dn.parse(l))):l.startsWith(qte)?(n.var.push(s),i.push(jte),t.push(l)):(n.number.push(s),i.push(c7),t.push(parseFloat(l))),++s,_B)).split(_B);return{values:t,split:o,indexes:n,types:i}}function d7(r){return h1(r).values}function f7(r){const{split:e,types:t}=h1(r),n=e.length;return i=>{let s="";for(let a=0;a<n;a++)if(s+=e[a],i[a]!==void 0){const o=t[a];o===c7?s+=Ib(i[a]):o===h7?s+=Dn.transform(i[a]):s+=i[a]}return s}}const Gte=r=>typeof r=="number"?0:Dn.test(r)?Dn.getAnimatableNone(r):r;function Wte(r){const e=d7(r);return f7(r)(e.map(Gte))}const pd={test:zte,parse:d7,createTransformer:f7,getAnimatableNone:Wte};function aN(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function Kte({hue:r,saturation:e,lightness:t,alpha:n}){r/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;i=aN(l,o,r+1/3),s=aN(l,o,r),a=aN(l,o,r-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:n}}function pS(r,e){return t=>t>0?e:r}const Qr=(r,e,t)=>r+(e-r)*t,oN=(r,e,t)=>{const n=r*r,i=t*(e*e-n)+n;return i<0?0:Math.sqrt(i)},Xte=[YD,wf,dg],Yte=r=>Xte.find(e=>e.test(r));function AB(r){const e=Yte(r);if(!e)return!1;let t=e.parse(r);return e===dg&&(t=Kte(t)),t}const EB=(r,e)=>{const t=AB(r),n=AB(e);if(!t||!n)return pS(r,e);const i={...t};return s=>(i.red=oN(t.red,n.red,s),i.green=oN(t.green,n.green,s),i.blue=oN(t.blue,n.blue,s),i.alpha=Qr(t.alpha,n.alpha,s),wf.transform(i))},QD=new Set(["none","hidden"]);function Qte(r,e){return QD.has(r)?t=>t<=0?r:e:t=>t>=1?e:r}function Jte(r,e){return t=>Qr(r,e,t)}function JR(r){return typeof r=="number"?Jte:typeof r=="string"?XR(r)?pS:Dn.test(r)?EB:tre:Array.isArray(r)?m7:typeof r=="object"?Dn.test(r)?EB:Zte:pS}function m7(r,e){const t=[...r],n=t.length,i=r.map((s,a)=>JR(s)(s,e[a]));return s=>{for(let a=0;a<n;a++)t[a]=i[a](s);return t}}function Zte(r,e){const t={...r,...e},n={};for(const i in t)r[i]!==void 0&&e[i]!==void 0&&(n[i]=JR(r[i])(r[i],e[i]));return i=>{for(const s in n)t[s]=n[s](i);return t}}function ere(r,e){const t=[],n={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],a=r.indexes[s][n[s]],o=r.values[a]??0;t[i]=o,n[s]++}return t}const tre=(r,e)=>{const t=pd.createTransformer(e),n=h1(r),i=h1(e);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?QD.has(r)&&!i.values.length||QD.has(e)&&!n.values.length?Qte(r,e):Ix(m7(ere(n,i),i.values),t):pS(r,e)};function p7(r,e,t){return typeof r=="number"&&typeof e=="number"&&typeof t=="number"?Qr(r,e,t):JR(r)(r,e)}const rre=r=>{const e=({timestamp:t})=>r(t);return{start:(t=!0)=>Gr.update(e,t),stop:()=>md(e),now:()=>_i.isProcessing?_i.timestamp:zs.now()}},g7=(r,e,t=10)=>{let n="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)n+=Math.round(r(s/(i-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},gS=2e4;function ZR(r){let e=0;const t=50;let n=r.next(e);for(;!n.done&&e<gS;)e+=t,n=r.next(e);return e>=gS?1/0:e}function nre(r,e=100,t){const n=t({...r,keyframes:[0,e]}),i=Math.min(ZR(n),gS);return{type:"keyframes",ease:s=>n.next(i*s).value/e,duration:so(i)}}const ire=5;function v7(r,e,t){const n=Math.max(e-ire,0);return Yz(t-r(n),e-n)}const un={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},lN=.001;function sre({duration:r=un.duration,bounce:e=un.bounce,velocity:t=un.velocity,mass:n=un.mass}){let i,s,a=1-e;a=pc(un.minDamping,un.maxDamping,a),r=pc(un.minDuration,un.maxDuration,so(r)),a<1?(i=u=>{const c=u*a,h=c*r,d=c-t,f=JD(u,a),p=Math.exp(-h);return lN-d/f*p},s=u=>{const h=u*a*r,d=h*t+t,f=Math.pow(a,2)*Math.pow(u,2)*r,p=Math.exp(-h),g=JD(Math.pow(u,2),a);return(-i(u)+lN>0?-1:1)*((d-f)*p)/g}):(i=u=>{const c=Math.exp(-u*r),h=(u-t)*r+1;return-lN+c*h},s=u=>{const c=Math.exp(-u*r),h=(t-u)*(r*r);return c*h});const o=5/r,l=ore(i,s,o);if(r=$l(r),isNaN(l))return{stiffness:un.stiffness,damping:un.damping,duration:r};{const u=Math.pow(l,2)*n;return{stiffness:u,damping:a*2*Math.sqrt(n*u),duration:r}}}const are=12;function ore(r,e,t){let n=t;for(let i=1;i<are;i++)n=n-r(n)/e(n);return n}function JD(r,e){return r*Math.sqrt(1-e*e)}const lre=["duration","bounce"],ure=["stiffness","damping","mass"];function SB(r,e){return e.some(t=>r[t]!==void 0)}function cre(r){let e={velocity:un.velocity,stiffness:un.stiffness,damping:un.damping,mass:un.mass,isResolvedFromDuration:!1,...r};if(!SB(r,ure)&&SB(r,lre))if(r.visualDuration){const t=r.visualDuration,n=2*Math.PI/(t*1.2),i=n*n,s=2*pc(.05,1,1-(r.bounce||0))*Math.sqrt(i);e={...e,mass:un.mass,stiffness:i,damping:s}}else{const t=sre(r);e={...e,...t,mass:un.mass},e.isResolvedFromDuration=!0}return e}function vS(r=un.visualDuration,e=un.bounce){const t=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:e}:r;let{restSpeed:n,restDelta:i}=t;const s=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:h,velocity:d,isResolvedFromDuration:f}=cre({...t,velocity:-so(t.velocity||0)}),p=d||0,g=u/(2*Math.sqrt(l*c)),b=a-s,v=so(Math.sqrt(l/c)),x=Math.abs(b)<5;n||(n=x?un.restSpeed.granular:un.restSpeed.default),i||(i=x?un.restDelta.granular:un.restDelta.default);let y;if(g<1){const w=JD(v,g);y=A=>{const T=Math.exp(-g*v*A);return a-T*((p+g*v*b)/w*Math.sin(w*A)+b*Math.cos(w*A))}}else if(g===1)y=w=>a-Math.exp(-v*w)*(b+(p+v*b)*w);else{const w=v*Math.sqrt(g*g-1);y=A=>{const T=Math.exp(-g*v*A),S=Math.min(w*A,300);return a-T*((p+g*v*b)*Math.sinh(S)+w*b*Math.cosh(S))/w}}const E={calculatedDuration:f&&h||null,next:w=>{const A=y(w);if(f)o.done=w>=h;else{let T=w===0?p:0;g<1&&(T=w===0?$l(p):v7(y,w,A));const S=Math.abs(T)<=n,N=Math.abs(a-A)<=i;o.done=S&&N}return o.value=o.done?a:A,o},toString:()=>{const w=Math.min(ZR(E),gS),A=g7(T=>E.next(w*T).value,w,30);return w+"ms "+A},toTransition:()=>{}};return E}vS.applyToOptions=r=>{const e=nre(r,100,vS);return r.ease=e.ease,r.duration=$l(e.duration),r.type="keyframes",r};function ZD({keyframes:r,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:c}){const h=r[0],d={done:!1,value:h},f=S=>o!==void 0&&S<o||l!==void 0&&S>l,p=S=>o===void 0?l:l===void 0||Math.abs(o-S)<Math.abs(l-S)?o:l;let g=t*e;const b=h+g,v=a===void 0?b:a(b);v!==b&&(g=v-h);const x=S=>-g*Math.exp(-S/n),y=S=>v+x(S),E=S=>{const N=x(S),D=y(S);d.done=Math.abs(N)<=u,d.value=d.done?v:D};let w,A;const T=S=>{f(d.value)&&(w=S,A=vS({keyframes:[d.value,p(d.value)],velocity:v7(y,S,d.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return T(0),{calculatedDuration:null,next:S=>{let N=!1;return!A&&w===void 0&&(N=!0,E(S),T(S)),w!==void 0&&S>=w?A.next(S-w):(!N&&E(S),d)}}}function hre(r,e,t){const n=[],i=t||gc.mix||p7,s=r.length-1;for(let a=0;a<s;a++){let o=i(r[a],r[a+1]);if(e){const l=Array.isArray(e)?e[a]||oo:e;o=Ix(l,o)}n.push(o)}return n}function dre(r,e,{clamp:t=!0,ease:n,mixer:i}={}){const s=r.length;if(jR(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=r[0]===r[1];r[0]>r[s-1]&&(r=[...r].reverse(),e=[...e].reverse());const o=hre(e,n,i),l=o.length,u=c=>{if(a&&c<r[0])return e[0];let h=0;if(l>1)for(;h<r.length-2&&!(c<r[h+1]);h++);const d=u1(r[h],r[h+1],c);return o[h](d)};return t?c=>u(pc(r[0],r[s-1],c)):u}function fre(r,e){const t=r[r.length-1];for(let n=1;n<=e;n++){const i=u1(0,e,n);r.push(Qr(t,1,i))}}function mre(r){const e=[0];return fre(e,r.length-1),e}function pre(r,e){return r.map(t=>t*e)}function gre(r,e){return r.map(()=>e||s7).splice(0,r.length-1)}function Pb({duration:r=300,keyframes:e,times:t,ease:n="easeInOut"}){const i=Cte(n)?n.map(wB):wB(n),s={done:!1,value:e[0]},a=pre(t&&t.length===e.length?t:mre(e),r),o=dre(a,e,{ease:Array.isArray(i)?i:gre(e,i)});return{calculatedDuration:r,next:l=>(s.value=o(l),s.done=l>=r,s)}}const vre=r=>r!==null;function ek(r,{repeat:e,repeatType:t="loop"},n,i=1){const s=r.filter(vre),o=i<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!o||n===void 0?s[o]:n}const yre={decay:ZD,inertia:ZD,tween:Pb,keyframes:Pb,spring:vS};function y7(r){typeof r.type=="string"&&(r.type=yre[r.type])}class tk{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const bre=r=>r/100;class rk extends tk{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,i;const{motionValue:t}=this.options;t&&t.updatedAt!==zs.now()&&this.tick(zs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(n=this.options).onStop)==null||i.call(n))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;y7(e);const{type:t=Pb,repeat:n=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=e;let{keyframes:o}=e;const l=t||Pb;l!==Pb&&typeof o[0]!="number"&&(this.mixKeyframes=Ix(bre,p7(o[0],o[1])),o=[0,100]);const u=l({...e,keyframes:o});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=ZR(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=u}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:c,repeat:h,repeatType:d,repeatDelay:f,type:p,onUpdate:g,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const v=this.currentTime-u*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?v<0:v>i;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let y=this.currentTime,E=n;if(h){const S=Math.min(this.currentTime,i)/o;let N=Math.floor(S),D=S%1;!D&&S>=1&&(D=1),D===1&&N--,N=Math.min(N,h+1),!!(N%2)&&(d==="reverse"?(D=1-D,f&&(D-=f/o)):d==="mirror"&&(E=a)),y=pc(0,1,D)*o}const w=x?{done:!1,value:c[0]}:E.next(y);s&&(w.value=s(w.value));let{done:A}=w;!x&&l!==null&&(A=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return T&&p!==ZD&&(w.value=ek(c,this.options,b,this.speed)),g&&g(w.value),T&&this.finish(),w}then(e,t){return this.finished.then(e,t)}get duration(){return so(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+so(e)}get time(){return so(this.currentTime)}set time(e){var t;e=$l(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(zs.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=so(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=rre,startTime:t}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(s=(i=this.options).onPlay)==null||s.call(i);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=t??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(zs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function wre(r){for(let e=1;e<r.length;e++)r[e]??(r[e]=r[e-1])}const xf=r=>r*180/Math.PI,eM=r=>{const e=xf(Math.atan2(r[1],r[0]));return tM(e)},xre={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:eM,rotateZ:eM,skewX:r=>xf(Math.atan(r[1])),skewY:r=>xf(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},tM=r=>(r=r%360,r<0&&(r+=360),r),TB=eM,CB=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),NB=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),_re={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:CB,scaleY:NB,scale:r=>(CB(r)+NB(r))/2,rotateX:r=>tM(xf(Math.atan2(r[6],r[5]))),rotateY:r=>tM(xf(Math.atan2(-r[2],r[0]))),rotateZ:TB,rotate:TB,skewX:r=>xf(Math.atan(r[4])),skewY:r=>xf(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function rM(r){return r.includes("scale")?1:0}function nM(r,e){if(!r||r==="none")return rM(e);const t=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(t)n=_re,i=t;else{const o=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=xre,i=o}if(!i)return rM(e);const s=n[e],a=i[1].split(",").map(Ere);return typeof s=="function"?s(a):a[s]}const Are=(r,e)=>{const{transform:t="none"}=getComputedStyle(r);return nM(t,e)};function Ere(r){return parseFloat(r.trim())}const q0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],H0=new Set(q0),DB=r=>r===j0||r===pt,Sre=new Set(["x","y","z"]),Tre=q0.filter(r=>!Sre.has(r));function Cre(r){const e=[];return Tre.forEach(t=>{const n=r.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e}const zm={width:({x:r},{paddingLeft:e="0",paddingRight:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),height:({y:r},{paddingTop:e="0",paddingBottom:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),top:(r,{top:e})=>parseFloat(e),left:(r,{left:e})=>parseFloat(e),bottom:({y:r},{top:e})=>parseFloat(e)+(r.max-r.min),right:({x:r},{left:e})=>parseFloat(e)+(r.max-r.min),x:(r,{transform:e})=>nM(e,"x"),y:(r,{transform:e})=>nM(e,"y")};zm.translateX=zm.x;zm.translateY=zm.y;const jm=new Set;let iM=!1,sM=!1,aM=!1;function b7(){if(sM){const r=Array.from(jm).filter(n=>n.needsMeasurement),e=new Set(r.map(n=>n.element)),t=new Map;e.forEach(n=>{const i=Cre(n);i.length&&(t.set(n,i),n.render())}),r.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const i=t.get(n);i&&i.forEach(([s,a])=>{var o;(o=n.getValue(s))==null||o.set(a)})}),r.forEach(n=>n.measureEndState()),r.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}sM=!1,iM=!1,jm.forEach(r=>r.complete(aM)),jm.clear()}function w7(){jm.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(sM=!0)})}function Nre(){aM=!0,w7(),b7(),aM=!1}class nk{constructor(e,t,n,i,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(jm.add(this),iM||(iM=!0,Gr.read(w7),Gr.resolveKeyframes(b7))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(n&&t){const o=n.readValue(t,a);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=a),i&&s===void 0&&i.set(e[0])}wre(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),jm.delete(this)}cancel(){this.state==="scheduled"&&(jm.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Dre=r=>r.startsWith("--");function Mre(r,e,t){Dre(e)?r.style.setProperty(e,t):r.style[e]=t}const Ire=qR(()=>window.ScrollTimeline!==void 0),Pre={};function Rre(r,e){const t=qR(r);return()=>Pre[e]??t()}const x7=Rre(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Gy=([r,e,t,n])=>`cubic-bezier(${r}, ${e}, ${t}, ${n})`,MB={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Gy([0,.65,.55,1]),circOut:Gy([.55,0,1,.45]),backIn:Gy([.31,.01,.66,-.59]),backOut:Gy([.33,1.53,.69,.99])};function _7(r,e){if(r)return typeof r=="function"?x7()?g7(r,e):"ease-out":a7(r)?Gy(r):Array.isArray(r)?r.map(t=>_7(t,e)||MB.easeOut):MB[r]}function kre(r,e,t,{delay:n=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:l}={},u=void 0){const c={[e]:t};l&&(c.offset=l);const h=_7(o,i);Array.isArray(h)&&(c.easing=h);const d={delay:n,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return u&&(d.pseudoElement=u),r.animate(c,d)}function A7(r){return typeof r=="function"&&"applyToOptions"in r}function Fre({type:r,...e}){return A7(r)&&x7()?r.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Ore extends tk{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=e,jR(typeof e.type!="string");const u=Fre(e);this.animation=kre(t,n,i,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const c=ek(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(c):Mre(t,n,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,n;const e=((n=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:n.call(t).duration)||0;return so(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+so(e)}get time(){return so(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=$l(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Ire()?(this.animation.timeline=e,oo):t(this)}}const E7={anticipate:r7,backInOut:t7,circInOut:i7};function Bre(r){return r in E7}function Lre(r){typeof r.ease=="string"&&Bre(r.ease)&&(r.ease=E7[r.ease])}const IB=10;class $re extends Ore{constructor(e){Lre(e),y7(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:i,element:s,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const o=new rk({...a,autoplay:!1}),l=$l(this.finishedTime??this.time);t.setWithVelocity(o.sample(l-IB).value,o.sample(l).value,IB),o.stop()}}const PB=(r,e)=>e==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(pd.test(r)||r==="0")&&!r.startsWith("url("));function Vre(r){const e=r[0];if(r.length===1)return!0;for(let t=0;t<r.length;t++)if(r[t]!==e)return!0}function Ure(r,e,t,n){const i=r[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=r[r.length-1],a=PB(i,e),o=PB(s,e);return!a||!o?!1:Vre(r)||(t==="spring"||A7(t))&&n}function oM(r){r.duration=0,r.type="keyframes"}const zre=new Set(["opacity","clipPath","filter","transform"]),jre=qR(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function qre(r){var c;const{motionValue:e,name:t,repeatDelay:n,repeatType:i,damping:s,type:a}=r;if(!(((c=e==null?void 0:e.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return jre()&&t&&zre.has(t)&&(t!=="transform"||!u)&&!l&&!n&&i!=="mirror"&&s!==0&&a!=="inertia"}const Hre=40;class Gre extends tk{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:o,name:l,motionValue:u,element:c,...h}){var p;super(),this.stop=()=>{var g,b;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=zs.now();const d={autoplay:e,delay:t,type:n,repeat:i,repeatDelay:s,repeatType:a,name:l,motionValue:u,element:c,...h},f=(c==null?void 0:c.KeyframeResolver)||nk;this.keyframeResolver=new f(o,(g,b,v)=>this.onKeyframesResolved(g,b,d,!v),l,u,c),(p=this.keyframeResolver)==null||p.scheduleResolve()}onKeyframesResolved(e,t,n,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:o,delay:l,isHandoff:u,onUpdate:c}=n;this.resolvedAt=zs.now(),Ure(e,s,a,o)||((gc.instantAnimations||!l)&&(c==null||c(ek(e,n,t))),e[0]=e[e.length-1],oM(n),n.repeat=0);const d={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Hre?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},f=!u&&qre(d)?new $re({...d,element:d.motionValue.owner.current}):new rk(d);f.finished.then(()=>this.notifyFinished()).catch(oo),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Nre()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const Wre=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Kre(r){const e=Wre.exec(r);if(!e)return[,];const[,t,n,i]=e;return[`--${t??n}`,i]}function S7(r,e,t=1){const[n,i]=Kre(r);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const a=s.trim();return Wz(a)?parseFloat(a):a}return XR(i)?S7(i,e,t+1):i}function ik(r,e){return(r==null?void 0:r[e])??(r==null?void 0:r.default)??r}const T7=new Set(["width","height","top","left","right","bottom",...q0]),Xre={test:r=>r==="auto",parse:r=>r},C7=r=>e=>e.test(r),N7=[j0,pt,Vl,Vc,Vte,$te,Xre],RB=r=>N7.find(C7(r));function Yre(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||Xz(r):!0}const Qre=new Set(["brightness","contrast","saturate","opacity"]);function Jre(r){const[e,t]=r.slice(0,-1).split("(");if(e==="drop-shadow")return r;const[n]=t.match(YR)||[];if(!n)return r;const i=t.replace(n,"");let s=Qre.has(e)?1:0;return n!==t&&(s*=100),e+"("+s+i+")"}const Zre=/\b([a-z-]*)\(.*?\)/gu,lM={...pd,getAnimatableNone:r=>{const e=r.match(Zre);return e?e.map(Jre).join(" "):r}},kB={...j0,transform:Math.round},ene={rotate:Vc,rotateX:Vc,rotateY:Vc,rotateZ:Vc,scale:Y_,scaleX:Y_,scaleY:Y_,scaleZ:Y_,skew:Vc,skewX:Vc,skewY:Vc,distance:pt,translateX:pt,translateY:pt,translateZ:pt,x:pt,y:pt,z:pt,perspective:pt,transformPerspective:pt,opacity:c1,originX:xB,originY:xB,originZ:pt},sk={borderWidth:pt,borderTopWidth:pt,borderRightWidth:pt,borderBottomWidth:pt,borderLeftWidth:pt,borderRadius:pt,radius:pt,borderTopLeftRadius:pt,borderTopRightRadius:pt,borderBottomRightRadius:pt,borderBottomLeftRadius:pt,width:pt,maxWidth:pt,height:pt,maxHeight:pt,top:pt,right:pt,bottom:pt,left:pt,padding:pt,paddingTop:pt,paddingRight:pt,paddingBottom:pt,paddingLeft:pt,margin:pt,marginTop:pt,marginRight:pt,marginBottom:pt,marginLeft:pt,backgroundPositionX:pt,backgroundPositionY:pt,...ene,zIndex:kB,fillOpacity:c1,strokeOpacity:c1,numOctaves:kB},tne={...sk,color:Dn,backgroundColor:Dn,outlineColor:Dn,fill:Dn,stroke:Dn,borderColor:Dn,borderTopColor:Dn,borderRightColor:Dn,borderBottomColor:Dn,borderLeftColor:Dn,filter:lM,WebkitFilter:lM},D7=r=>tne[r];function M7(r,e){let t=D7(r);return t!==lM&&(t=pd),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const rne=new Set(["auto","none","0"]);function nne(r,e,t){let n=0,i;for(;n<r.length&&!i;){const s=r[n];typeof s=="string"&&!rne.has(s)&&h1(s).values.length&&(i=r[n]),n++}if(i&&t)for(const s of e)r[s]=M7(t,i)}class ine extends nk{constructor(e,t,n,i,s){super(e,t,n,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),XR(u))){const c=S7(u,t.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!T7.has(n)||e.length!==2)return;const[i,s]=e,a=RB(i),o=RB(s);if(a!==o)if(DB(a)&&DB(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else zm[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let i=0;i<e.length;i++)(e[i]===null||Yre(e[i]))&&n.push(i);n.length&&nne(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=zm[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(n,i).jump(i,!1)}measureEndState(){var o;const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const s=n.length-1,a=n[s];n[s]=zm[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function sne(r,e,t){if(r instanceof EventTarget)return[r];if(typeof r=="string"){let n=document;const i=(t==null?void 0:t[r])??n.querySelectorAll(r);return i?Array.from(i):[]}return Array.from(r)}const I7=(r,e)=>e&&typeof r=="number"?e.transform(r):r;function ane(r){return Kz(r)&&"offsetHeight"in r}const FB=30,one=r=>!isNaN(parseFloat(r));class lne{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var s;const i=zs.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=zs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=one(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new HR);const n=this.events[e].add(t);return e==="change"?()=>{n(),Gr.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=zs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>FB)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,FB);return Yz(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function w0(r,e){return new lne(r,e)}const{schedule:ak}=o7(queueMicrotask,!1),Ao={x:!1,y:!1};function P7(){return Ao.x||Ao.y}function une(r){return r==="x"||r==="y"?Ao[r]?null:(Ao[r]=!0,()=>{Ao[r]=!1}):Ao.x||Ao.y?null:(Ao.x=Ao.y=!0,()=>{Ao.x=Ao.y=!1})}function R7(r,e){const t=sne(r),n=new AbortController,i={passive:!0,...e,signal:n.signal};return[t,i,()=>n.abort()]}function OB(r){return!(r.pointerType==="touch"||P7())}function cne(r,e,t={}){const[n,i,s]=R7(r,t),a=o=>{if(!OB(o))return;const{target:l}=o,u=e(l,o);if(typeof u!="function"||!l)return;const c=h=>{OB(h)&&(u(h),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,i)};return n.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const k7=(r,e)=>e?r===e?!0:k7(r,e.parentElement):!1,ok=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,hne=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function dne(r){return hne.has(r.tagName)||r.tabIndex!==-1}const WA=new WeakSet;function BB(r){return e=>{e.key==="Enter"&&r(e)}}function uN(r,e){r.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const fne=(r,e)=>{const t=r.currentTarget;if(!t)return;const n=BB(()=>{if(WA.has(t))return;uN(t,"down");const i=BB(()=>{uN(t,"up")}),s=()=>uN(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",n,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",n),e)};function LB(r){return ok(r)&&!P7()}function mne(r,e,t={}){const[n,i,s]=R7(r,t),a=o=>{const l=o.currentTarget;if(!LB(o))return;WA.add(l);const u=e(l,o),c=(f,p)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",d),WA.has(l)&&WA.delete(l),LB(f)&&typeof u=="function"&&u(f,{success:p})},h=f=>{c(f,l===window||l===document||t.useGlobalTarget||k7(l,f.target))},d=f=>{c(f,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",d,i)};return n.forEach(o=>{(t.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),ane(o)&&(o.addEventListener("focus",u=>fne(u,i)),!dne(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),s}function F7(r){return Kz(r)&&"ownerSVGElement"in r}function pne(r){return F7(r)&&r.tagName==="svg"}const Qi=r=>!!(r&&r.getVelocity),gne=[...N7,Dn,pd],vne=r=>gne.find(C7(r)),O7=he.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});function yne(r=!0){const e=he.useContext(VR);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,s=he.useId();he.useEffect(()=>{if(r)return i(s)},[r]);const a=he.useCallback(()=>r&&n&&n(s),[s,n,r]);return!t&&n?[!1,a]:[!0]}const B7=he.createContext({strict:!1}),$B={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},x0={};for(const r in $B)x0[r]={isEnabled:e=>$B[r].some(t=>!!e[t])};function bne(r){for(const e in r)x0[e]={...x0[e],...r[e]}}const wne=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function yS(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||wne.has(r)}let L7=r=>!yS(r);function xne(r){typeof r=="function"&&(L7=e=>e.startsWith("on")?!yS(e):r(e))}try{xne(require("@emotion/is-prop-valid").default)}catch{}function _ne(r,e,t){const n={};for(const i in r)i==="values"&&typeof r.values=="object"||(L7(i)||t===!0&&yS(i)||!e&&!yS(i)||r.draggable&&i.startsWith("onDrag"))&&(n[i]=r[i]);return n}const hC=he.createContext({});function dC(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function d1(r){return typeof r=="string"||Array.isArray(r)}const lk=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],uk=["initial",...lk];function fC(r){return dC(r.animate)||uk.some(e=>d1(r[e]))}function $7(r){return!!(fC(r)||r.variants)}function Ane(r,e){if(fC(r)){const{initial:t,animate:n}=r;return{initial:t===!1||d1(t)?t:void 0,animate:d1(n)?n:void 0}}return r.inherit!==!1?e:{}}function Ene(r){const{initial:e,animate:t}=Ane(r,he.useContext(hC));return he.useMemo(()=>({initial:e,animate:t}),[VB(e),VB(t)])}function VB(r){return Array.isArray(r)?r.join(" "):r}const f1={};function Sne(r){for(const e in r)f1[e]=r[e],KR(e)&&(f1[e].isCSSVariable=!0)}function V7(r,{layout:e,layoutId:t}){return H0.has(r)||r.startsWith("origin")||(e||t!==void 0)&&(!!f1[r]||r==="opacity")}const Tne={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Cne=q0.length;function Nne(r,e,t){let n="",i=!0;for(let s=0;s<Cne;s++){const a=q0[s],o=r[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||t){const u=I7(o,sk[a]);if(!l){i=!1;const c=Tne[a]||a;n+=`${c}(${u}) `}t&&(e[a]=u)}}return n=n.trim(),t?n=t(e,i?"":n):i&&(n="none"),n}function ck(r,e,t){const{style:n,vars:i,transformOrigin:s}=r;let a=!1,o=!1;for(const l in e){const u=e[l];if(H0.has(l)){a=!0;continue}else if(KR(l)){i[l]=u;continue}else{const c=I7(u,sk[l]);l.startsWith("origin")?(o=!0,s[l]=c):n[l]=c}}if(e.transform||(a||t?n.transform=Nne(e,r.transform,t):n.transform&&(n.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;n.transformOrigin=`${l} ${u} ${c}`}}const hk=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function U7(r,e,t){for(const n in e)!Qi(e[n])&&!V7(n,t)&&(r[n]=e[n])}function Dne({transformTemplate:r},e){return he.useMemo(()=>{const t=hk();return ck(t,e,r),Object.assign({},t.vars,t.style)},[e])}function Mne(r,e){const t=r.style||{},n={};return U7(n,t,r),Object.assign(n,Dne(r,e)),n}function Ine(r,e){const t={},n=Mne(r,e);return r.drag&&r.dragListener!==!1&&(t.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(t.tabIndex=0),t.style=n,t}const Pne={offset:"stroke-dashoffset",array:"stroke-dasharray"},Rne={offset:"strokeDashoffset",array:"strokeDasharray"};function kne(r,e,t=1,n=0,i=!0){r.pathLength=1;const s=i?Pne:Rne;r[s.offset]=pt.transform(-n);const a=pt.transform(e),o=pt.transform(t);r[s.array]=`${a} ${o}`}function z7(r,{attrX:e,attrY:t,attrScale:n,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...o},l,u,c){if(ck(r,o,u),l){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:h,style:d}=r;h.transform&&(d.transform=h.transform,delete h.transform),(d.transform||h.transformOrigin)&&(d.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),d.transform&&(d.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),t!==void 0&&(h.y=t),n!==void 0&&(h.scale=n),i!==void 0&&kne(h,i,s,a,!1)}const j7=()=>({...hk(),attrs:{}}),q7=r=>typeof r=="string"&&r.toLowerCase()==="svg";function Fne(r,e,t,n){const i=he.useMemo(()=>{const s=j7();return z7(s,e,q7(n),r.transformTemplate,r.style),{...s.attrs,style:{...s.style}}},[e]);if(r.style){const s={};U7(s,r.style,r),i.style={...s,...i.style}}return i}const One=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function dk(r){return typeof r!="string"||r.includes("-")?!1:!!(One.indexOf(r)>-1||/[A-Z]/u.test(r))}function Bne(r,e,t,{latestValues:n},i,s=!1){const o=(dk(r)?Fne:Ine)(e,n,i,r),l=_ne(e,typeof r=="string",s),u=r!==he.Fragment?{...l,...o,ref:t}:{},{children:c}=e,h=he.useMemo(()=>Qi(c)?c.get():c,[c]);return he.createElement(r,{...u,children:h})}function UB(r){const e=[{},{}];return r==null||r.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function fk(r,e,t,n){if(typeof e=="function"){const[i,s]=UB(n);e=e(t!==void 0?t:r.custom,i,s)}if(typeof e=="string"&&(e=r.variants&&r.variants[e]),typeof e=="function"){const[i,s]=UB(n);e=e(t!==void 0?t:r.custom,i,s)}return e}function KA(r){return Qi(r)?r.get():r}function Lne({scrapeMotionValuesFromProps:r,createRenderState:e},t,n,i){return{latestValues:$ne(t,n,i,r),renderState:e()}}function $ne(r,e,t,n){const i={},s=n(r,{});for(const d in s)i[d]=KA(s[d]);let{initial:a,animate:o}=r;const l=fC(r),u=$7(r);e&&u&&!l&&r.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let c=t?t.initial===!1:!1;c=c||a===!1;const h=c?o:a;if(h&&typeof h!="boolean"&&!dC(h)){const d=Array.isArray(h)?h:[h];for(let f=0;f<d.length;f++){const p=fk(r,d[f]);if(p){const{transitionEnd:g,transition:b,...v}=p;for(const x in v){let y=v[x];if(Array.isArray(y)){const E=c?y.length-1:0;y=y[E]}y!==null&&(i[x]=y)}for(const x in g)i[x]=g[x]}}}return i}const H7=r=>(e,t)=>{const n=he.useContext(hC),i=he.useContext(VR),s=()=>Lne(r,e,n,i);return t?s():bte(s)};function mk(r,e,t){var s;const{style:n}=r,i={};for(const a in n)(Qi(n[a])||e.style&&Qi(e.style[a])||V7(a,r)||((s=t==null?void 0:t.getValue(a))==null?void 0:s.liveStyle)!==void 0)&&(i[a]=n[a]);return i}const Vne=H7({scrapeMotionValuesFromProps:mk,createRenderState:hk});function G7(r,e,t){const n=mk(r,e,t);for(const i in r)if(Qi(r[i])||Qi(e[i])){const s=q0.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[s]=r[i]}return n}const Une=H7({scrapeMotionValuesFromProps:G7,createRenderState:j7}),zne=Symbol.for("motionComponentSymbol");function fg(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function jne(r,e,t){return he.useCallback(n=>{n&&r.onMount&&r.onMount(n),e&&(n?e.mount(n):e.unmount()),t&&(typeof t=="function"?t(n):fg(t)&&(t.current=n))},[e])}const pk=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),qne="framerAppearId",W7="data-"+pk(qne),K7=he.createContext({});function Hne(r,e,t,n,i){var g,b;const{visualElement:s}=he.useContext(hC),a=he.useContext(B7),o=he.useContext(VR),l=he.useContext(O7).reducedMotion,u=he.useRef(null);n=n||a.renderer,!u.current&&n&&(u.current=n(r,{visualState:e,parent:s,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,h=he.useContext(K7);c&&!c.projection&&i&&(c.type==="html"||c.type==="svg")&&Gne(u.current,t,i,h);const d=he.useRef(!1);he.useInsertionEffect(()=>{c&&d.current&&c.update(t,o)});const f=t[W7],p=he.useRef(!!f&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,f))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,f)));return wte(()=>{c&&(d.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),p.current&&c.animationState&&c.animationState.animateChanges())}),he.useEffect(()=>{c&&(!p.current&&c.animationState&&c.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,f)}),p.current=!1),c.enteringChildren=void 0)}),c}function Gne(r,e,t,n){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=e;r.projection=new t(r.latestValues,e["data-framer-portal-id"]?void 0:X7(r.parent)),r.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&fg(o),visualElement:r,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,crossfade:c,layoutScroll:l,layoutRoot:u})}function X7(r){if(r)return r.options.allowProjection!==!1?r.projection:X7(r.parent)}function cN(r,{forwardMotionProps:e=!1}={},t,n){t&&bne(t);const i=dk(r)?Une:Vne;function s(o,l){let u;const c={...he.useContext(O7),...o,layoutId:Wne(o)},{isStatic:h}=c,d=Ene(o),f=i(o,h);if(!h&&$R){Kne();const p=Xne(c);u=p.MeasureLayout,d.visualElement=Hne(r,f,c,n,p.ProjectionNode)}return R.jsxs(hC.Provider,{value:d,children:[u&&d.visualElement?R.jsx(u,{visualElement:d.visualElement,...c}):null,Bne(r,o,jne(f,d.visualElement,l),f,h,e)]})}s.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const a=he.forwardRef(s);return a[zne]=r,a}function Wne({layoutId:r}){const e=he.useContext(Gz).id;return e&&r!==void 0?e+"-"+r:r}function Kne(r,e){he.useContext(B7).strict}function Xne(r){const{drag:e,layout:t}=x0;if(!e&&!t)return{};const n={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(r)||t!=null&&t.isEnabled(r)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function Yne(r,e){if(typeof Proxy>"u")return cN;const t=new Map,n=(s,a)=>cN(s,a,r,e),i=(s,a)=>n(s,a);return new Proxy(i,{get:(s,a)=>a==="create"?n:(t.has(a)||t.set(a,cN(a,void 0,r,e)),t.get(a))})}function Y7({top:r,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:r,max:n}}}function Qne({x:r,y:e}){return{top:e.min,right:r.max,bottom:e.max,left:r.min}}function Jne(r,e){if(!e)return r;const t=e({x:r.left,y:r.top}),n=e({x:r.right,y:r.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}function hN(r){return r===void 0||r===1}function uM({scale:r,scaleX:e,scaleY:t}){return!hN(r)||!hN(e)||!hN(t)}function of(r){return uM(r)||Q7(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function Q7(r){return zB(r.x)||zB(r.y)}function zB(r){return r&&r!=="0%"}function bS(r,e,t){const n=r-t,i=e*n;return t+i}function jB(r,e,t,n,i){return i!==void 0&&(r=bS(r,i,n)),bS(r,t,n)+e}function cM(r,e=0,t=1,n,i){r.min=jB(r.min,e,t,n,i),r.max=jB(r.max,e,t,n,i)}function J7(r,{x:e,y:t}){cM(r.x,e.translate,e.scale,e.originPoint),cM(r.y,t.translate,t.scale,t.originPoint)}const qB=.999999999999,HB=1.0000000000001;function Zne(r,e,t,n=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let o=0;o<i;o++){s=t[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&pg(r,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,J7(r,a)),n&&of(s.latestValues)&&pg(r,s.latestValues))}e.x<HB&&e.x>qB&&(e.x=1),e.y<HB&&e.y>qB&&(e.y=1)}function mg(r,e){r.min=r.min+e,r.max=r.max+e}function GB(r,e,t,n,i=.5){const s=Qr(r.min,r.max,i);cM(r,e,t,s,n)}function pg(r,e){GB(r.x,e.x,e.scaleX,e.scale,e.originX),GB(r.y,e.y,e.scaleY,e.scale,e.originY)}function Z7(r,e){return Y7(Jne(r.getBoundingClientRect(),e))}function eie(r,e,t){const n=Z7(r,t),{scroll:i}=e;return i&&(mg(n.x,i.offset.x),mg(n.y,i.offset.y)),n}const WB=()=>({translate:0,scale:1,origin:0,originPoint:0}),gg=()=>({x:WB(),y:WB()}),KB=()=>({min:0,max:0}),bn=()=>({x:KB(),y:KB()}),hM={current:null},ej={current:!1};function tie(){if(ej.current=!0,!!$R)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),e=()=>hM.current=r.matches;r.addEventListener("change",e),e()}else hM.current=!1}const rie=new WeakMap;function nie(r,e,t){for(const n in e){const i=e[n],s=t[n];if(Qi(i))r.addValue(n,i);else if(Qi(s))r.addValue(n,w0(i,{owner:r}));else if(s!==i)if(r.hasValue(n)){const a=r.getValue(n);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=r.getStaticValue(n);r.addValue(n,w0(a!==void 0?a:i,{owner:r}))}}for(const n in t)e[n]===void 0&&r.removeValue(n);return e}const XB=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class iie{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=nk,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const d=zs.now();this.renderScheduledAt<d&&(this.renderScheduledAt=d,Gr.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=fC(t),this.isVariantNode=$7(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(t,{},this);for(const d in h){const f=h[d];l[d]!==void 0&&Qi(f)&&f.set(l[d])}}mount(e){var t;this.current=e,rie.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),ej.current||tie(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:hM.current,(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),md(this.notifyUpdate),md(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=H0.has(e);n&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Gr.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in x0){const t=x0[e];if(!t)continue;const{isEnabled:n,Feature:i}=t;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):bn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<XB.length;n++){const i=XB[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=nie(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=w0(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(Wz(n)||Xz(n))?n=parseFloat(n):!vne(n)&&pd.test(t)&&(n=M7(e,t)),this.setBaseTarget(e,Qi(n)?n.get():n)),Qi(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var s;const{initial:t}=this.props;let n;if(typeof t=="string"||typeof t=="object"){const a=fk(this.props,t,(s=this.presenceContext)==null?void 0:s.custom);a&&(n=a[e])}if(t&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Qi(i)?i:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new HR),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){ak.render(this.render)}}class tj extends iie{constructor(){super(...arguments),this.KeyframeResolver=ine}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Qi(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function rj(r,{style:e,vars:t},n,i){const s=r.style;let a;for(a in e)s[a]=e[a];i==null||i.applyProjectionStyles(s,n);for(a in t)s.setProperty(a,t[a])}function sie(r){return window.getComputedStyle(r)}class aie extends tj{constructor(){super(...arguments),this.type="html",this.renderInstance=rj}readValueFromInstance(e,t){var n;if(H0.has(t))return(n=this.projection)!=null&&n.isProjecting?rM(t):Are(e,t);{const i=sie(e),s=(KR(t)?i.getPropertyValue(t):i[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Z7(e,t)}build(e,t,n){ck(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return mk(e,t,n)}}const nj=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function oie(r,e,t,n){rj(r,e,void 0,n);for(const i in e.attrs)r.setAttribute(nj.has(i)?i:pk(i),e.attrs[i])}class lie extends tj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=bn}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(H0.has(t)){const n=D7(t);return n&&n.default||0}return t=nj.has(t)?t:pk(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return G7(e,t,n)}build(e,t,n){z7(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,i){oie(e,t,n,i)}mount(e){this.isSVGTag=q7(e.tagName),super.mount(e)}}const uie=(r,e)=>dk(r)?new lie(e):new aie(e,{allowProjection:r!==he.Fragment});function Rg(r,e,t){const n=r.getProps();return fk(n,e,t!==void 0?t:n.custom,r)}const dM=r=>Array.isArray(r);function cie(r,e,t){r.hasValue(e)?r.getValue(e).set(t):r.addValue(e,w0(t))}function hie(r){return dM(r)?r[r.length-1]||0:r}function die(r,e){const t=Rg(r,e);let{transitionEnd:n={},transition:i={},...s}=t||{};s={...s,...n};for(const a in s){const o=hie(s[a]);cie(r,a,o)}}function fie(r){return!!(Qi(r)&&r.add)}function fM(r,e){const t=r.getValue("willChange");if(fie(t))return t.add(e);if(!t&&gc.WillChange){const n=new gc.WillChange("auto");r.addValue("willChange",n),n.add(e)}}function ij(r){return r.props[W7]}const mie=r=>r!==null;function pie(r,{repeat:e,repeatType:t="loop"},n){const i=r.filter(mie),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[s]}const gie={type:"spring",stiffness:500,damping:25,restSpeed:10},vie=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),yie={type:"keyframes",duration:.8},bie={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},wie=(r,{keyframes:e})=>e.length>2?yie:H0.has(r)?r.startsWith("scale")?vie(e[1]):gie:bie;function xie({when:r,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const gk=(r,e,t,n={},i,s)=>a=>{const o=ik(n,r)||{},l=o.delay||n.delay||0;let{elapsed:u=0}=n;u=u-$l(l);const c={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:d=>{e.set(d),o.onUpdate&&o.onUpdate(d)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:r,motionValue:e,element:s?void 0:i};xie(o)||Object.assign(c,wie(r,c)),c.duration&&(c.duration=$l(c.duration)),c.repeatDelay&&(c.repeatDelay=$l(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let h=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(oM(c),c.delay===0&&(h=!0)),(gc.instantAnimations||gc.skipAnimations)&&(h=!0,oM(c),c.delay=0),c.allowFlatten=!o.type&&!o.ease,h&&!s&&e.get()!==void 0){const d=pie(c.keyframes,o);if(d!==void 0){Gr.update(()=>{c.onUpdate(d),c.onComplete()});return}}return o.isSync?new rk(c):new Gre(c)};function _ie({protectedKeys:r,needsAnimating:e},t){const n=r.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function sj(r,e,{delay:t=0,transitionOverride:n,type:i}={}){let{transition:s=r.getDefaultTransition(),transitionEnd:a,...o}=e;n&&(s=n);const l=[],u=i&&r.animationState&&r.animationState.getState()[i];for(const c in o){const h=r.getValue(c,r.latestValues[c]??null),d=o[c];if(d===void 0||u&&_ie(u,c))continue;const f={delay:t,...ik(s||{},c)},p=h.get();if(p!==void 0&&!h.isAnimating&&!Array.isArray(d)&&d===p&&!f.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const v=ij(r);if(v){const x=window.MotionHandoffAnimation(v,c,Gr);x!==null&&(f.startTime=x,g=!0)}}fM(r,c),h.start(gk(c,h,d,r.shouldReduceMotion&&T7.has(c)?{type:!1}:f,r,g));const b=h.animation;b&&l.push(b)}return a&&Promise.all(l).then(()=>{Gr.update(()=>{a&&die(r,a)})}),l}function aj(r,e,t,n=0,i=1){const s=Array.from(r).sort((u,c)=>u.sortNodePosition(c)).indexOf(e),a=r.size,o=(a-1)*n;return typeof t=="function"?t(s,a):i===1?s*n:o-s*n}function mM(r,e,t={}){var l;const n=Rg(r,e,t.type==="exit"?(l=r.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=r.getDefaultTransition()||{}}=n||{};t.transitionOverride&&(i=t.transitionOverride);const s=n?()=>Promise.all(sj(r,n,t)):()=>Promise.resolve(),a=r.variantChildren&&r.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:d}=i;return Aie(r,e,u,c,h,d,t)}:()=>Promise.resolve(),{when:o}=i;if(o){const[u,c]=o==="beforeChildren"?[s,a]:[a,s];return u().then(()=>c())}else return Promise.all([s(),a(t.delay)])}function Aie(r,e,t=0,n=0,i=0,s=1,a){const o=[];for(const l of r.variantChildren)l.notify("AnimationStart",e),o.push(mM(l,e,{...a,delay:t+(typeof n=="function"?0:n)+aj(r.variantChildren,l,n,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(o)}function Eie(r,e,t={}){r.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(s=>mM(r,s,t));n=Promise.all(i)}else if(typeof e=="string")n=mM(r,e,t);else{const i=typeof e=="function"?Rg(r,e,t.custom):e;n=Promise.all(sj(r,i,t))}return n.then(()=>{r.notify("AnimationComplete",e)})}function oj(r,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==r.length)return!1;for(let n=0;n<t;n++)if(e[n]!==r[n])return!1;return!0}const Sie=uk.length;function lj(r){if(!r)return;if(!r.isControllingVariants){const t=r.parent?lj(r.parent)||{}:{};return r.props.initial!==void 0&&(t.initial=r.props.initial),t}const e={};for(let t=0;t<Sie;t++){const n=uk[t],i=r.props[n];(d1(i)||i===!1)&&(e[n]=i)}return e}const Tie=[...lk].reverse(),Cie=lk.length;function Nie(r){return e=>Promise.all(e.map(({animation:t,options:n})=>Eie(r,t,n)))}function Die(r){let e=Nie(r),t=YB(),n=!0;const i=l=>(u,c)=>{var d;const h=Rg(r,c,l==="exit"?(d=r.presenceContext)==null?void 0:d.custom:void 0);if(h){const{transition:f,transitionEnd:p,...g}=h;u={...u,...g,...p}}return u};function s(l){e=l(r)}function a(l){const{props:u}=r,c=lj(r.parent)||{},h=[],d=new Set;let f={},p=1/0;for(let b=0;b<Cie;b++){const v=Tie[b],x=t[v],y=u[v]!==void 0?u[v]:c[v],E=d1(y),w=v===l?x.isActive:null;w===!1&&(p=b);let A=y===c[v]&&y!==u[v]&&E;if(A&&n&&r.manuallyAnimateOnMount&&(A=!1),x.protectedKeys={...f},!x.isActive&&w===null||!y&&!x.prevProp||dC(y)||typeof y=="boolean")continue;const T=Mie(x.prevProp,y);let S=T||v===l&&x.isActive&&!A&&E||b>p&&E,N=!1;const D=Array.isArray(y)?y:[y];let _=D.reduce(i(v),{});w===!1&&(_={});const{prevResolvedValues:M={}}=x,I={...M,..._},V=L=>{S=!0,d.has(L)&&(N=!0,d.delete(L)),x.needsAnimating[L]=!0;const $=r.getValue(L);$&&($.liveStyle=!1)};for(const L in I){const $=_[L],z=M[L];if(f.hasOwnProperty(L))continue;let K=!1;dM($)&&dM(z)?K=!oj($,z):K=$!==z,K?$!=null?V(L):d.add(L):$!==void 0&&d.has(L)?V(L):x.protectedKeys[L]=!0}x.prevProp=y,x.prevResolvedValues=_,x.isActive&&(f={...f,..._}),n&&r.blockInitialAnimation&&(S=!1);const q=A&&T;S&&(!q||N)&&h.push(...D.map(L=>{const $={type:v};if(typeof L=="string"&&n&&!q&&r.manuallyAnimateOnMount&&r.parent){const{parent:z}=r,K=Rg(z,L);if(z.enteringChildren&&K){const{delayChildren:re}=K.transition||{};$.delay=aj(z.enteringChildren,r,re)}}return{animation:L,options:$}}))}if(d.size){const b={};if(typeof u.initial!="boolean"){const v=Rg(r,Array.isArray(u.initial)?u.initial[0]:u.initial);v&&v.transition&&(b.transition=v.transition)}d.forEach(v=>{const x=r.getBaseTarget(v),y=r.getValue(v);y&&(y.liveStyle=!0),b[v]=x??null}),h.push({animation:b})}let g=!!h.length;return n&&(u.initial===!1||u.initial===u.animate)&&!r.manuallyAnimateOnMount&&(g=!1),n=!1,g?e(h):Promise.resolve()}function o(l,u){var h;if(t[l].isActive===u)return Promise.resolve();(h=r.variantChildren)==null||h.forEach(d=>{var f;return(f=d.animationState)==null?void 0:f.setActive(l,u)}),t[l].isActive=u;const c=a(l);for(const d in t)t[d].protectedKeys={};return c}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>t,reset:()=>{t=YB()}}}function Mie(r,e){return typeof e=="string"?e!==r:Array.isArray(e)?!oj(e,r):!1}function nf(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function YB(){return{animate:nf(!0),whileInView:nf(),whileHover:nf(),whileTap:nf(),whileDrag:nf(),whileFocus:nf(),exit:nf()}}class Fd{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Iie extends Fd{constructor(e){super(e),e.animationState||(e.animationState=Die(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();dC(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Pie=0;class Rie extends Fd{constructor(){super(...arguments),this.id=Pie++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const kie={animation:{Feature:Iie},exit:{Feature:Rie}};function m1(r,e,t,n={passive:!0}){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t)}function kx(r){return{point:{x:r.pageX,y:r.pageY}}}const Fie=r=>e=>ok(e)&&r(e,kx(e));function Rb(r,e,t,n){return m1(r,e,Fie(t),n)}const uj=1e-4,Oie=1-uj,Bie=1+uj,cj=.01,Lie=0-cj,$ie=0+cj;function ps(r){return r.max-r.min}function Vie(r,e,t){return Math.abs(r-e)<=t}function QB(r,e,t,n=.5){r.origin=n,r.originPoint=Qr(e.min,e.max,r.origin),r.scale=ps(t)/ps(e),r.translate=Qr(t.min,t.max,r.origin)-r.originPoint,(r.scale>=Oie&&r.scale<=Bie||isNaN(r.scale))&&(r.scale=1),(r.translate>=Lie&&r.translate<=$ie||isNaN(r.translate))&&(r.translate=0)}function kb(r,e,t,n){QB(r.x,e.x,t.x,n?n.originX:void 0),QB(r.y,e.y,t.y,n?n.originY:void 0)}function JB(r,e,t){r.min=t.min+e.min,r.max=r.min+ps(e)}function Uie(r,e,t){JB(r.x,e.x,t.x),JB(r.y,e.y,t.y)}function ZB(r,e,t){r.min=e.min-t.min,r.max=r.min+ps(e)}function Fb(r,e,t){ZB(r.x,e.x,t.x),ZB(r.y,e.y,t.y)}function La(r){return[r("x"),r("y")]}const hj=({current:r})=>r?r.ownerDocument.defaultView:null,e4=(r,e)=>Math.abs(r-e);function zie(r,e){const t=e4(r.x,e.x),n=e4(r.y,e.y);return Math.sqrt(t**2+n**2)}class dj{constructor(e,t,{transformPagePoint:n,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=fN(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=zie(d.offset,{x:0,y:0})>=this.distanceThreshold;if(!f&&!p)return;const{point:g}=d,{timestamp:b}=_i;this.history.push({...g,timestamp:b});const{onStart:v,onMove:x}=this.handlers;f||(v&&v(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=dN(f,this.transformPagePoint),Gr.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:p,onSessionEnd:g,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=fN(d.type==="pointercancel"?this.lastMoveEventInfo:dN(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,v),g&&g(d,v)},!ok(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=a,this.contextWindow=i||window;const o=kx(e),l=dN(o,this.transformPagePoint),{point:u}=l,{timestamp:c}=_i;this.history=[{...u,timestamp:c}];const{onSessionStart:h}=t;h&&h(e,fN(l,this.history)),this.removeListeners=Ix(Rb(this.contextWindow,"pointermove",this.handlePointerMove),Rb(this.contextWindow,"pointerup",this.handlePointerUp),Rb(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),md(this.updatePoint)}}function dN(r,e){return e?{point:e(r.point)}:r}function t4(r,e){return{x:r.x-e.x,y:r.y-e.y}}function fN({point:r},e){return{point:r,delta:t4(r,fj(e)),offset:t4(r,jie(e)),velocity:qie(e,.1)}}function jie(r){return r[0]}function fj(r){return r[r.length-1]}function qie(r,e){if(r.length<2)return{x:0,y:0};let t=r.length-1,n=null;const i=fj(r);for(;t>=0&&(n=r[t],!(i.timestamp-n.timestamp>$l(e)));)t--;if(!n)return{x:0,y:0};const s=so(i.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Hie(r,{min:e,max:t},n){return e!==void 0&&r<e?r=n?Qr(e,r,n.min):Math.max(r,e):t!==void 0&&r>t&&(r=n?Qr(t,r,n.max):Math.min(r,t)),r}function r4(r,e,t){return{min:e!==void 0?r.min+e:void 0,max:t!==void 0?r.max+t-(r.max-r.min):void 0}}function Gie(r,{top:e,left:t,bottom:n,right:i}){return{x:r4(r.x,t,i),y:r4(r.y,e,n)}}function n4(r,e){let t=e.min-r.min,n=e.max-r.max;return e.max-e.min<r.max-r.min&&([t,n]=[n,t]),{min:t,max:n}}function Wie(r,e){return{x:n4(r.x,e.x),y:n4(r.y,e.y)}}function Kie(r,e){let t=.5;const n=ps(r),i=ps(e);return i>n?t=u1(e.min,e.max-n,r.min):n>i&&(t=u1(r.min,r.max-i,e.min)),pc(0,1,t)}function Xie(r,e){const t={};return e.min!==void 0&&(t.min=e.min-r.min),e.max!==void 0&&(t.max=e.max-r.min),t}const pM=.35;function Yie(r=pM){return r===!1?r=0:r===!0&&(r=pM),{x:i4(r,"left","right"),y:i4(r,"top","bottom")}}function i4(r,e,t){return{min:s4(r,e),max:s4(r,t)}}function s4(r,e){return typeof r=="number"?r:r[e]||0}const Qie=new WeakMap;class Jie{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=bn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:n}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(kx(h).point)},a=(h,d)=>{const{drag:f,dragPropagation:p,onDragStart:g}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=une(f),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=d,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),La(v=>{let x=this.getAxisMotionValue(v).get()||0;if(Vl.test(x)){const{projection:y}=this.visualElement;if(y&&y.layout){const E=y.layout.layoutBox[v];E&&(x=ps(E)*(parseFloat(x)/100))}}this.originPoint[v]=x}),g&&Gr.postRender(()=>g(h,d)),fM(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},o=(h,d)=>{this.latestPointerEvent=h,this.latestPanInfo=d;const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:g,onDrag:b}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:v}=d;if(p&&this.currentDirection===null){this.currentDirection=Zie(v),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",d.point,v),this.updateAxis("y",d.point,v),this.visualElement.render(),b&&b(h,d)},l=(h,d)=>{this.latestPointerEvent=h,this.latestPanInfo=d,this.stop(h,d),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>La(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)==null?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new dj(e,{onSessionStart:s,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:n,contextWindow:hj(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,i=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!n)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&Gr.postRender(()=>o(n,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:i}=this.getProps();if(!n||!Q_(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=Hie(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&fg(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=Gie(n.layoutBox,e):this.constraints=!1,this.elastic=Yie(t),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&La(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Xie(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!fg(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=eie(n,i.root,this.visualElement.getTransformPagePoint());let a=Wie(i.layout.layoutBox,s);if(t){const o=t(Qne(a));this.hasMutatedConstraints=!!o,o&&(a=Y7(o))}return a}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=La(c=>{if(!Q_(c,t,this.currentDirection))return;let h=l&&l[c]||{};a&&(h={min:0,max:0});const d=i?200:1e6,f=i?40:1e7,p={type:"inertia",velocity:n?e[c]:0,bounceStiffness:d,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(c,p)});return Promise.all(u).then(o)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return fM(this.visualElement,e),n.start(gk(e,n,0,t,this.visualElement,!1))}stopAnimation(){La(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){La(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[t];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){La(t=>{const{drag:n}=this.getProps();if(!Q_(t,n,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[t];s.set(e[t]-Qr(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!fg(t)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};La(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=Kie({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),La(a=>{if(!Q_(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(Qr(l,u,i[a]))})}addListeners(){if(!this.visualElement.current)return;Qie.set(this.visualElement,this);const e=this.visualElement.current,t=Rb(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();fg(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Gr.read(n);const a=m1(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(La(c=>{const h=this.getAxisMotionValue(c);h&&(this.originPoint[c]+=l[c].translate,h.set(h.get()+l[c].translate))}),this.visualElement.render())});return()=>{a(),t(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=pM,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function Q_(r,e,t){return(e===!0||e===r)&&(t===null||t===r)}function Zie(r,e=10){let t=null;return Math.abs(r.y)>e?t="y":Math.abs(r.x)>e&&(t="x"),t}class ese extends Fd{constructor(e){super(e),this.removeGroupControls=oo,this.removeListeners=oo,this.controls=new Jie(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||oo}unmount(){this.removeGroupControls(),this.removeListeners()}}const a4=r=>(e,t)=>{r&&Gr.postRender(()=>r(e,t))};class tse extends Fd{constructor(){super(...arguments),this.removePointerDownListener=oo}onPointerDown(e){this.session=new dj(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:hj(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:a4(e),onStart:a4(t),onMove:n,onEnd:(s,a)=>{delete this.session,i&&Gr.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=Rb(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const XA={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function o4(r,e){return e.max===e.min?0:r/(e.max-e.min)*100}const Ry={correct:(r,e)=>{if(!e.target)return r;if(typeof r=="string")if(pt.test(r))r=parseFloat(r);else return r;const t=o4(r,e.target.x),n=o4(r,e.target.y);return`${t}% ${n}%`}},rse={correct:(r,{treeScale:e,projectionDelta:t})=>{const n=r,i=pd.parse(r);if(i.length>5)return n;const s=pd.createTransformer(r),a=typeof i[0]!="number"?1:0,o=t.x.scale*e.x,l=t.y.scale*e.y;i[0+a]/=o,i[1+a]/=l;const u=Qr(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=u),typeof i[3+a]=="number"&&(i[3+a]/=u),s(i)}};let mN=!1;class nse extends he.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:i}=this.props,{projection:s}=e;Sne(ise),s&&(t.group&&t.group.add(s),n&&n.register&&i&&n.register(s),mN&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),XA.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:i,isPresent:s}=this.props,{projection:a}=n;return a&&(a.isPresent=s,mN=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Gr.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ak.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:i}=e;mN=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function mj(r){const[e,t]=yne(),n=he.useContext(Gz);return R.jsx(nse,{...r,layoutGroup:n,switchLayoutGroup:he.useContext(K7),isPresent:e,safeToRemove:t})}const ise={borderRadius:{...Ry,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ry,borderTopRightRadius:Ry,borderBottomLeftRadius:Ry,borderBottomRightRadius:Ry,boxShadow:rse};function sse(r,e,t){const n=Qi(r)?r:w0(r);return n.start(gk("",n,e,t)),n.animation}const ase=(r,e)=>r.depth-e.depth;class ose{constructor(){this.children=[],this.isDirty=!1}add(e){UR(this.children,e),this.isDirty=!0}remove(e){zR(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(ase),this.isDirty=!1,this.children.forEach(e)}}function lse(r,e){const t=zs.now(),n=({timestamp:i})=>{const s=i-t;s>=e&&(md(n),r(s-e))};return Gr.setup(n,!0),()=>md(n)}const pj=["TopLeft","TopRight","BottomLeft","BottomRight"],use=pj.length,l4=r=>typeof r=="string"?parseFloat(r):r,u4=r=>typeof r=="number"||pt.test(r);function cse(r,e,t,n,i,s){i?(r.opacity=Qr(0,t.opacity??1,hse(n)),r.opacityExit=Qr(e.opacity??1,0,dse(n))):s&&(r.opacity=Qr(e.opacity??1,t.opacity??1,n));for(let a=0;a<use;a++){const o=`border${pj[a]}Radius`;let l=c4(e,o),u=c4(t,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||u4(l)===u4(u)?(r[o]=Math.max(Qr(l4(l),l4(u),n),0),(Vl.test(u)||Vl.test(l))&&(r[o]+="%")):r[o]=u}(e.rotate||t.rotate)&&(r.rotate=Qr(e.rotate||0,t.rotate||0,n))}function c4(r,e){return r[e]!==void 0?r[e]:r.borderRadius}const hse=gj(0,.5,n7),dse=gj(.5,.95,oo);function gj(r,e,t){return n=>n<r?0:n>e?1:t(u1(r,e,n))}function h4(r,e){r.min=e.min,r.max=e.max}function Ra(r,e){h4(r.x,e.x),h4(r.y,e.y)}function d4(r,e){r.translate=e.translate,r.scale=e.scale,r.originPoint=e.originPoint,r.origin=e.origin}function f4(r,e,t,n,i){return r-=e,r=bS(r,1/t,n),i!==void 0&&(r=bS(r,1/i,n)),r}function fse(r,e=0,t=1,n=.5,i,s=r,a=r){if(Vl.test(e)&&(e=parseFloat(e),e=Qr(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=Qr(s.min,s.max,n);r===s&&(o-=e),r.min=f4(r.min,e,t,o,i),r.max=f4(r.max,e,t,o,i)}function m4(r,e,[t,n,i],s,a){fse(r,e[t],e[n],e[i],e.scale,s,a)}const mse=["x","scaleX","originX"],pse=["y","scaleY","originY"];function p4(r,e,t,n){m4(r.x,e,mse,t?t.x:void 0,n?n.x:void 0),m4(r.y,e,pse,t?t.y:void 0,n?n.y:void 0)}function g4(r){return r.translate===0&&r.scale===1}function vj(r){return g4(r.x)&&g4(r.y)}function v4(r,e){return r.min===e.min&&r.max===e.max}function gse(r,e){return v4(r.x,e.x)&&v4(r.y,e.y)}function y4(r,e){return Math.round(r.min)===Math.round(e.min)&&Math.round(r.max)===Math.round(e.max)}function yj(r,e){return y4(r.x,e.x)&&y4(r.y,e.y)}function b4(r){return ps(r.x)/ps(r.y)}function w4(r,e){return r.translate===e.translate&&r.scale===e.scale&&r.originPoint===e.originPoint}class vse{constructor(){this.members=[]}add(e){UR(this.members,e),e.scheduleRender()}remove(e){if(zR(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let n;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function yse(r,e,t){let n="";const i=r.x.translate/e.x,s=r.y.translate/e.y,a=(t==null?void 0:t.z)||0;if((i||s||a)&&(n=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:u,rotate:c,rotateX:h,rotateY:d,skewX:f,skewY:p}=t;u&&(n=`perspective(${u}px) ${n}`),c&&(n+=`rotate(${c}deg) `),h&&(n+=`rotateX(${h}deg) `),d&&(n+=`rotateY(${d}deg) `),f&&(n+=`skewX(${f}deg) `),p&&(n+=`skewY(${p}deg) `)}const o=r.x.scale*e.x,l=r.y.scale*e.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const pN=["","X","Y","Z"],bse=1e3;let wse=0;function gN(r,e,t,n){const{latestValues:i}=e;i[r]&&(t[r]=i[r],e.setStaticValue(r,0),n&&(n[r]=0))}function bj(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:e}=r.options;if(!e)return;const t=ij(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=r.options;window.MotionCancelOptimisedAnimation(t,"transform",Gr,!(i||s))}const{parent:n}=r;n&&!n.hasCheckedOptimisedAppear&&bj(n)}function wj({attachResizeListener:r,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(a={},o=e==null?void 0:e()){this.id=wse++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Ase),this.nodes.forEach(Cse),this.nodes.forEach(Nse),this.nodes.forEach(Ese)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new ose)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new HR),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=F7(a)&&!pne(a),this.instance=a;const{layoutId:o,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),r){let c,h=0;const d=()=>this.root.updateBlockedByResize=!1;Gr.read(()=>{h=window.innerWidth}),r(a,()=>{const f=window.innerWidth;f!==h&&(h=f,this.root.updateBlockedByResize=!0,c&&c(),c=lse(d,250),XA.hasAnimatedSinceResize&&(XA.hasAnimatedSinceResize=!1,this.nodes.forEach(A4)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:d,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||u.getDefaultTransition()||Rse,{onLayoutAnimationStart:g,onLayoutAnimationComplete:b}=u.getProps(),v=!this.targetLayout||!yj(this.targetLayout,f),x=!h&&d;if(this.options.layoutRoot||this.resumeFrom||x||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const y={...ik(p,"layout"),onPlay:g,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(y.delay=0,y.type=!1),this.startAnimation(y),this.setAnimationOrigin(c,x)}else h||A4(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),md(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Dse),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&bj(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const h=this.path[c];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(x4);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(_4);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Tse),this.nodes.forEach(xse),this.nodes.forEach(_se)):this.nodes.forEach(_4),this.clearAllSnapshots();const o=zs.now();_i.delta=pc(0,1e3/60,o-_i.timestamp),_i.timestamp=o,_i.isProcessing=!0,iN.update.process(_i),iN.preRender.process(_i),iN.render.process(_i),_i.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ak.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Sse),this.sharedNodes.forEach(Mse)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Gr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Gr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ps(this.snapshot.measuredBox.x)&&!ps(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=bn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!vj(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;a&&this.instance&&(o||of(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),kse(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:a}=this.options;if(!a)return bn();const o=a.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(Fse))){const{scroll:c}=this.root;c&&(mg(o.x,c.offset.x),mg(o.y,c.offset.y))}return o}removeElementScroll(a){var l;const o=bn();if(Ra(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:h,options:d}=c;c!==this.root&&h&&d.layoutScroll&&(h.wasRoot&&Ra(o,a),mg(o.x,h.offset.x),mg(o.y,h.offset.y))}return o}applyTransform(a,o=!1){const l=bn();Ra(l,a);for(let u=0;u<this.path.length;u++){const c=this.path[u];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&pg(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),of(c.latestValues)&&pg(l,c.latestValues)}return of(this.latestValues)&&pg(l,this.latestValues),l}removeTransform(a){const o=bn();Ra(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!of(u.latestValues))continue;uM(u.latestValues)&&u.updateSnapshot();const c=bn(),h=u.measurePageBox();Ra(c,h),p4(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return of(this.latestValues)&&p4(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_i.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var d;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(d=this.parent)!=null&&d.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:h}=this.options;if(!(!this.layout||!(c||h))){if(this.resolvedRelativeTargetAt=_i.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bn(),this.relativeTargetOrigin=bn(),Fb(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),Ra(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=bn(),this.targetWithTransforms=bn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Uie(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ra(this.target,this.layout.layoutBox),J7(this.target,this.targetDelta)):Ra(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bn(),this.relativeTargetOrigin=bn(),Fb(this.relativeTargetOrigin,this.target,f.target),Ra(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||uM(this.parent.latestValues)||Q7(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var p;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===_i.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;Ra(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,d=this.treeScale.y;Zne(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=bn());const{target:f}=a;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(d4(this.prevProjectionDelta.x,this.projectionDelta.x),d4(this.prevProjectionDelta.y,this.projectionDelta.y)),kb(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==d||!w4(this.projectionDelta.x,this.prevProjectionDelta.x)||!w4(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=gg(),this.projectionDelta=gg(),this.projectionDeltaWithTransform=gg()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},h=gg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const d=bn(),f=l?l.source:void 0,p=this.layout?this.layout.source:void 0,g=f!==p,b=this.getStack(),v=!b||b.members.length<=1,x=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(Pse));this.animationProgress=0;let y;this.mixTargetDelta=E=>{const w=E/1e3;E4(h.x,a.x,w),E4(h.y,a.y,w),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Fb(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Ise(this.relativeTarget,this.relativeTargetOrigin,d,w),y&&gse(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=bn()),Ra(y,this.relativeTarget)),g&&(this.animationValues=c,cse(c,u,this.latestValues,w,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var o,l,u;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(md(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Gr.update(()=>{XA.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=w0(0)),this.currentAnimation=sse(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),a.onUpdate&&a.onUpdate(c)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(bse),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:c}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&xj(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||bn();const h=ps(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+h;const d=ps(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+d}Ra(o,l),pg(o,c),kb(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new vse),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&gN("z",a,u,this.animationValues);for(let c=0;c<pN.length;c++)gN(`rotate${pN[c]}`,a,u,this.animationValues),gN(`skew${pN[c]}`,a,u,this.animationValues);a.render();for(const c in u)a.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=KA(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=KA(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!of(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=yse(this.projectionDeltaWithTransform,this.treeScale,c);l&&(h=l(c,h)),a.transform=h;const{x:d,y:f}=this.projectionDelta;a.transformOrigin=`${d.origin*100}% ${f.origin*100}% 0`,u.animationValues?a.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:a.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const p in f1){if(c[p]===void 0)continue;const{correct:g,applyTo:b,isCSSVariable:v}=f1[p],x=h==="none"?c[p]:g(c[p],u);if(b){const y=b.length;for(let E=0;E<y;E++)a[b[E]]=x}else v?this.options.visualElement.renderState.vars[p]=x:a[p]=x}this.options.layoutId&&(a.pointerEvents=u===this?KA(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(x4),this.root.sharedNodes.clear()}}}function xse(r){r.updateLayout()}function _se(r){var t;const e=((t=r.resumeFrom)==null?void 0:t.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&e&&r.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=r.layout,{animationType:s}=r.options,a=e.source!==r.layout.source;s==="size"?La(h=>{const d=a?e.measuredBox[h]:e.layoutBox[h],f=ps(d);d.min=n[h].min,d.max=d.min+f}):xj(s,e.layoutBox,n)&&La(h=>{const d=a?e.measuredBox[h]:e.layoutBox[h],f=ps(n[h]);d.max=d.min+f,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[h].max=r.relativeTarget[h].min+f)});const o=gg();kb(o,n,e.layoutBox);const l=gg();a?kb(l,r.applyTransform(i,!0),e.measuredBox):kb(l,n,e.layoutBox);const u=!vj(o);let c=!1;if(!r.resumeFrom){const h=r.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:d,layout:f}=h;if(d&&f){const p=bn();Fb(p,e.layoutBox,d.layoutBox);const g=bn();Fb(g,n,f.layoutBox),yj(p,g)||(c=!0),h.options.layoutRoot&&(r.relativeTarget=g,r.relativeTargetOrigin=p,r.relativeParent=h)}}}r.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(r.isLead()){const{onExitComplete:n}=r.options;n&&n()}r.options.transition=void 0}function Ase(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function Ese(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function Sse(r){r.clearSnapshot()}function x4(r){r.clearMeasurements()}function _4(r){r.isLayoutDirty=!1}function Tse(r){const{visualElement:e}=r.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),r.resetTransform()}function A4(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function Cse(r){r.resolveTargetDelta()}function Nse(r){r.calcProjection()}function Dse(r){r.resetSkewAndRotation()}function Mse(r){r.removeLeadSnapshot()}function E4(r,e,t){r.translate=Qr(e.translate,0,t),r.scale=Qr(e.scale,1,t),r.origin=e.origin,r.originPoint=e.originPoint}function S4(r,e,t,n){r.min=Qr(e.min,t.min,n),r.max=Qr(e.max,t.max,n)}function Ise(r,e,t,n){S4(r.x,e.x,t.x,n),S4(r.y,e.y,t.y,n)}function Pse(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const Rse={duration:.45,ease:[.4,0,.1,1]},T4=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),C4=T4("applewebkit/")&&!T4("chrome/")?Math.round:oo;function N4(r){r.min=C4(r.min),r.max=C4(r.max)}function kse(r){N4(r.x),N4(r.y)}function xj(r,e,t){return r==="position"||r==="preserve-aspect"&&!Vie(b4(e),b4(t),.2)}function Fse(r){var e;return r!==r.root&&((e=r.scroll)==null?void 0:e.wasRoot)}const Ose=wj({attachResizeListener:(r,e)=>m1(r,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),vN={current:void 0},_j=wj({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!vN.current){const r=new Ose({});r.mount(window),r.setOptions({layoutScroll:!0}),vN.current=r}return vN.current},resetTransform:(r,e)=>{r.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),Bse={pan:{Feature:tse},drag:{Feature:ese,ProjectionNode:_j,MeasureLayout:mj}};function D4(r,e,t){const{props:n}=r;r.animationState&&n.whileHover&&r.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=n[i];s&&Gr.postRender(()=>s(e,kx(e)))}class Lse extends Fd{mount(){const{current:e}=this.node;e&&(this.unmount=cne(e,(t,n)=>(D4(this.node,n,"Start"),i=>D4(this.node,i,"End"))))}unmount(){}}class $se extends Fd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ix(m1(this.node.current,"focus",()=>this.onFocus()),m1(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function M4(r,e,t){const{props:n}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&n.whileTap&&r.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=n[i];s&&Gr.postRender(()=>s(e,kx(e)))}class Vse extends Fd{mount(){const{current:e}=this.node;e&&(this.unmount=mne(e,(t,n)=>(M4(this.node,n,"Start"),(i,{success:s})=>M4(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const gM=new WeakMap,yN=new WeakMap,Use=r=>{const e=gM.get(r.target);e&&e(r)},zse=r=>{r.forEach(Use)};function jse({root:r,...e}){const t=r||document;yN.has(t)||yN.set(t,{});const n=yN.get(t),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(zse,{root:r,...e})),n[i]}function qse(r,e,t){const n=jse(e);return gM.set(r,t),n.observe(r),()=>{gM.delete(r),n.unobserve(r)}}const Hse={some:0,all:1};class Gse extends Fd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:Hse[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:h}=this.node.getProps(),d=u?c:h;d&&d(l)};return qse(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Wse(e,t))&&this.startObserver()}unmount(){}}function Wse({viewport:r={}},{viewport:e={}}={}){return t=>r[t]!==e[t]}const Kse={inView:{Feature:Gse},tap:{Feature:Vse},focus:{Feature:$se},hover:{Feature:Lse}},Xse={layout:{ProjectionNode:_j,MeasureLayout:mj}},Yse={...kie,...Kse,...Bse,...Xse},Ge=Yne(Yse,uie),vk=[{slug:"general-relativity",title:"   ",category:"relativity",description:"Einstein Field Equation, Schwarzschild/Kerr ,  ",content:{overview:"    . Schwarzschild Kerr        (vacuum solution).",keyPoints:["Einstein Field Equation: G = 8GT","Schwarzschild :  ,   ","Kerr :  , ergosphere "," :  / ","Shapiro delay:    ",": f = f0(1-2GM/rc)"],keyFormulas:[{tex:"G_{\\mu\\nu} = R_{\\mu\\nu} - \\frac{1}{2}g_{\\mu\\nu}R = \\frac{8\\pi G}{c^4}T_{\\mu\\nu}",desc:"Einstein Field Equation"},{tex:"ds^2 = -\\left(1 - \\frac{2GM}{c^2r}\\right)c^2dt^2 + \\left(1 - \\frac{2GM}{c^2r}\\right)^{-1}dr^2 + r^2(d\\theta^2 + \\sin^2\\theta\\,d\\phi^2)",desc:"Schwarzschild "},{tex:"r_s = \\frac{2GM}{c^2}",desc:"Schwarzschild "},{tex:"\\frac{d^2x^\\lambda}{d\\tau^2} + \\Gamma^\\lambda_{\\mu\\nu}\\frac{dx^\\mu}{d\\tau}\\frac{dx^\\nu}{d\\tau} = 0",desc:" "}],observations:'   (42.98"/century),  ,  ',relatedPapers:["The Mathematical Theory of Black Holes (Chandrasekhar, 1983)","General Relativity (Carroll, 2004)","Gravitational Waves from Coalescing Compact Binaries (Abbott et al. LIGO, 2016)"]}},{slug:"stellar-structure",title:"   ",category:"stars",description:"  , Lane-Emden ,   ",content:{overview:"         .         .",keyPoints:[" : dP/dr = -GM/r","  : radiative flux  opacity ","Lane-Emden  :   "," : PP chain (), CNO cycle ()"," : convection instability criterion (adiabatic gradient vs. radiative gradient)",": photosphere  "],keyFormulas:[{tex:"\\frac{dP}{dr} = -\\rho \\frac{GM(<r)}{r^2}",desc:"  "},{tex:"F_\\mathrm{rad} = -\\frac{c}{3\\kappa\\rho}\\frac{dT^4}{dr}",desc:" "},{tex:"\\frac{d^2u}{d\\xi^2} + \\frac{2}{\\xi}\\frac{du}{d\\xi} + u^n = 0",desc:"Lane-Emden "},{tex:"PP\\,\\mathrm{chain}: {}^1H + {}^1H \\to {}^2H + e^+ + \\nu",desc:"-  "}],observations:"  L=3.82810W,  R=6.9610m,   T_c~1.5710K,  _c~150 g/cm",relatedPapers:["Stellar Interiors: Physical Principles, Structure and Evolution (Hansen, Kawaler & Trimble, 2004)","The Theory of Stellar Structure and Evolution (Kippenhahn, Weigert & Weiss, 2012)"]}},{slug:"black-hole-astrophysics",title:" : Kerr  ",category:"relativity",description:"Kerr ergosphere, ISCO , Hawking ,  ",content:{overview:" (Kerr )   .  (Hawking )   ,       .",keyPoints:["Kerr :   a = J/M ","Ergosphere:   g_tt=0 ","ISCO (Innermost Stable Circular Orbit): a=0  r_ISCO = 6GM/c","Hawking :  T_H = c/(8kGM)","Penrose process:    ","Accretion disk: viscosity   "],keyFormulas:[{tex:"ds^2 = -\\frac{\\Delta}{\\rho^2}(c\\,dt - a\\sin^2\\theta\\,d\\phi)^2 + \\frac{\\rho^2}{\\Delta}dr^2 + \\rho^2 d\\theta^2 + \\frac{\\sin^2\\theta}{\\rho^2}(a c\\,dt - (r^2+a^2)d\\phi)^2",desc:"Kerr  (Boyer-Lindquist )"},{tex:"r_{\\mathrm{ISCO}} = \\frac{GM}{c^2}\\left(3 + Z_2 - \\sqrt{(3-Z_1)(3+Z_1+2Z_2)}\\right)",desc:"ISCO  (Kerr )"},{tex:"T_H = \\frac{\\hbar c^3}{8\\pi k_B G M}",desc:"Hawking "},{tex:"\\eta = 1 - \\sqrt{1 - \\frac{2GM}{c^2 r_{\\mathrm{ISCO}}}}",desc:" "}],observations:"M87   M=(6.50.7)10M (EHT 2019), Sagittarius A*  M=(4.2970.013)10M",relatedPapers:["Black Hole Accretion in Supermassive and Stellar Mass Regimes (Done et al. 2007)","The Event Horizon Telescope Collaboration (2019, ApJ Letters)","Information and the Nature of Reality (Wheeler & Ford, 1998)"]}},{slug:"galaxy-dynamics",title:"  ",category:"galaxies",description:"Jeans ,   , CDM,  ",content:{overview:"  , ,    . Jeans        .",keyPoints:["Jeans :    "," :   NFW  ","Virial theorem: 2K + U = 0 ( )"," :   ~85%","CDM : M0.3, 0.7"," : N-body + hydrodynamics"],keyFormulas:[{tex:"\\frac{d\\sigma_r^2}{dr} + 2\\frac{\\beta}{r}\\sigma_r^2 = -\\frac{GM(<r)}{r^2}",desc:"Jeans "},{tex:"v_{\\mathrm{c}}(r) = \\sqrt{\\frac{GM(<r)}{r}}",desc:"  "},{tex:"\\rho_{\\mathrm{NFW}}(r) = \\frac{\\rho_s}{(r/r_s)(1+r/r_s)^2}",desc:"Navarro-Frenk-White  "},{tex:"2\\langle K \\rangle + \\langle U \\rangle = 0",desc:" Virial "}],observations:"    (220 km/s at 8 kpc),    ( )",relatedPapers:["Galactic Dynamics (Binney & Tremaine, 2008)","The Concentration of Dark Matter Halos (Navarro, Frenk & White, 1997)","Simulations of the formation, evolution and clustering of galaxies and quasars (Springel et al. 2005)"]}},{slug:"cosmology",title:"  ",category:"cosmology",description:"Friedmann , CMB  ,  ",content:{overview:"      . Friedmann     , CMB    CDM  .",keyPoints:["Friedmann : a(t)  "," : t = 13.7870.020 Gyr (Planck 2018)"," : _   120 ","CMB :   T/T ~ 10","  : C_     "," : w(z) = p/(c)"],keyFormulas:[{tex:"\\left(\\frac{\\dot{a}}{a}\\right)^2 + \\frac{k}{a^2} = \\frac{8\\pi G}{3}\\rho",desc:"1 Friedmann "},{tex:"\\frac{\\ddot{a}}{a} = -\\frac{4\\pi G}{3}(\\rho + 3p) + \\frac{\\Lambda}{3}",desc:"2 Friedmann "},{tex:"T(z) = T_0 (1+z)",desc:"  "},{tex:"w = \\frac{p}{\\rho c^2}",desc:"  "}],observations:"CMB: b=0.049, cdm=0.264, =0.684, H0=67.4 km/s/Mpc (Planck 2018)",relatedPapers:["Planck 2018 results (Planck Collaboration, 2018)","A High-Resolution Cosmic Microwave Background Map (WMAP, 2003-2013)","Observational Evidence from Supernovae for an Accelerating Universe (Perlmutter et al. 1999)"]}},{slug:"observational-astronomy",title:" : , , ",category:"observations",description:"Equivalent Width, Voigt profile, CCD photometry,  ",content:{overview:"    .   (Equivalent Width, Doppler shift), CCD ,      .",keyPoints:["Equivalent Width (EW):    ","Voigt profile:  +   ","CCD : -(S/N), (dynamic range)",'X-ray : Chandra  0.5",   100 eV',"IR  (JWST): NIRCam  0.6-5m,  /~1600"," (VLBI): baseline ~10000 km,  ~as"],keyFormulas:[{tex:"EW = \\int_{\\lambda_1}^{\\lambda_2} \\left(1 - \\frac{F_\\lambda}{F_c}\\right)d\\lambda",desc:""},{tex:"f(\\nu) = \\frac{I(\\nu_0)}{\\sqrt{\\pi}}\\int_{-\\infty}^{\\infty}\\frac{e^{-t^2}}{1+(a(\\nu-\\nu_0+t\\Delta\\nu_D)/\\Delta\\nu_D)^2}dt",desc:"Voigt "},{tex:"(S/N)_{\\mathrm{CCD}} = \\frac{Ne}{\\sqrt{Ne + n_r^2 + n_d^2}}",desc:"CCD -"},{tex:"\\theta_{\\mathrm{res}} \\approx 1.22\\frac{\\lambda}{D}",desc:"  (Rayleigh criterion)"}],observations:"JWST NIRCam z~11   (_obs~2m), Chandra    , EHT   (48as)",relatedPapers:["Observational Astrophysics (Birney, Gonzalez & Oesper, 2006)","Modern Observational Astronomy: the Principles, Science and Techniques (Filippenko, 2006)"]}},{slug:"mass-luminosity",title:"- ",category:"stars",description:"    ",content:{overview:"       .       .",keyPoints:[": L  M^3.5 ()","     (2.5~4.5)","     "],keyFormulas:[{tex:"L \\approx M^{3.5}",desc:"-  ()"},{tex:"t_{\\mathrm{lifetime}} \\approx \\frac{M}{L} \\propto M^{-2.5}",desc:"  "}],observations:"  1   1, 10   ~3000",relatedPapers:["Mass-Luminosity Relations (1970)","Stellar Evolution Theory (1995)"]}},{slug:"dark-matter-rotation",title:"  ",category:"galaxies",description:"      ",content:{overview:"            ,    .",keyPoints:["   :    "," :  v  1/r ( )",": v   (100~300 km/s)"," :   ~85%"],keyFormulas:[{tex:"v(r) = \\sqrt{\\frac{GM(<r)}{r}}",desc:"   "},{tex:"M(<r) \\propto r",desc:" r  "}],observations:"M31 ,     ",relatedPapers:["The Rotation of Spiral Nebulae (1975)","Dark Matter and Galaxy Formation (2010)"]}},{slug:"cosmic-microwave-background",title:"  (CMB)",category:"cosmology",description:"    , ,  ",content:{overview:"CMB   38       .      .",keyPoints:[": 1965 Penzias & Wilson",": 2.725 K ( )",":   T/T ~ 10",":   "],keyFormulas:[{tex:"T(z) = T_0 (1 + z)",desc:"  CMB "},{tex:"T_0 = 2.725 \\, \\mathrm{K}",desc:"CMB  "}],observations:"WMAP, Planck   m=0.315, =0.685, H0=67 km/s/Mpc ",relatedPapers:["A Measurement of the Fluctuations in the Cosmic Microwave Background (1992)","Planck 2018 results (2018)"]}},{slug:"gravitational-waves",title:"   ",category:"observations",description:"LIGO/Virgo ,  ,  ,   ",content:{overview:"     . 2015  (GW150914) ,   (BBH),  (BNS),  (NSBH)    . /          .",keyPoints:["LIGO/Virgo :    h ~ 10  "," :  (inspection)  (merger)  (ringdown) 3"," :  , , ,   Bayesian "," : r-process     ",": GW + GRB() + kilonova()  "," :   H0  ,   "],keyFormulas:[{tex:"h_+(t) = \\frac{2G}{c^4}\\frac{M_c^{5/3}}{D_L}\\left(\\pi f(t)\\right)^{2/3}\\cos(\\Phi(t))",desc:"  +  ( )"},{tex:"\\frac{df}{dt} = \\frac{96}{5}\\pi^{8/3}\\frac{G^{5/3}}{c^5}M_c^{5/3}f^{11/3}",desc:"   (chirp)"},{tex:"M_c = \\frac{(m_1 m_2)^{3/5}}{(m_1 + m_2)^{1/5}}",desc:" (chirp mass)"},{tex:"T_{\\mathrm{merge}} = \\frac{5}{256}\\frac{c^5}{G^3}\\frac{1}{M_c^{5/3}\\pi^{8/3}f_0^{8/3}}",desc:"   (f)"},{tex:"Q = \\frac{M \\omega}{c} \\quad (\\text{ISCO})\\, Q_{\\text{Kerr}} \\sim \\frac{c^3}{G M} \\left(1 + \\sqrt{1-a^*/a}\\right)",desc:"  "}],observations:"GW150914:  36+29 M, GW170817:  1.36-1.60 M, GW190814: -  (  9:1)",relatedPapers:["Observation of Gravitational Waves from a Binary Black Hole Merger (Abbott et al., PRL 2016)","GW170817: Observation of Gravitational Waves from a Binary Neutron Star Inspiral (Abbott et al., PRL 2017)","Tests of General Relativity with GW150914 (Abbott et al., PRL 2016)"]}},{slug:"high-energy-astrophysics",title:"  X ",category:"observations",description:"X-ray binary, AGN  , Compton , Synchrotron ",content:{overview:"  X(0.1~100 keV), (>100 keV)   . X , (AGN),      .      Compton  Synchrotron     .",keyPoints:["X-ray binary: / +   ( )","Low-mass X-ray binary (LMXB):   < 1 M,  X ","High-mass X-ray binary (HMXB):   > 10 M,  ","Compton :   +    ,  ","Inverse Compton:   +     X/","Synchrotron :     ","AGN  :   Seyfert 1/2  (  )"],keyFormulas:[{tex:"E_\\gamma \\approx 4\\gamma k_B T_e",desc:"Compton   (Thomson regime)"},{tex:"\\nu_{\\mathrm{sync}} = \\frac{e B}{2\\pi m_e c} \\gamma^2",desc:"Synchrotron  "},{tex:"L_\\mathrm{Edd} = \\frac{4\\pi G M m_p c}{\\sigma_T} \\approx 1.3 \\times 10^{38} \\left(\\frac{M}{M_\\odot}\\right) \\, \\mathrm{erg~s^{-1}}",desc:"Eddington  "},{tex:"\\tau_T = n_e \\sigma_T L",desc:"Thomson "}],observations:"Cygnus X-1 ( HMXB), Sco X-1 ( LMXB), M87  AGN ( ), NGC 4151 ()",relatedPapers:["Physics of Compact Objects (Wheeler et al., 1996)","X-ray Binaries (Lewin & van der Klis, 2006)","AGN Unification Model (Antonucci, 1993)"]}},{slug:"cosmic-ray-physics",title:"   ",category:"observations",description:"Fermi ,  ,   , - ",content:{overview:"    ( ).  ,  ,    . Fermi          .   ,  ,     .",keyPoints:["Fermi 1 :  / ,   (E/E  %)","Fermi 2 :  (magnetic mirror)    ","  : SNe Ia  SNe II  "," : E^(-2.7) power law (  10~10 eV)"," : CR      (  )"," : ~90% , ~10% , ~1%  "," (UHECR): E > 10 eV,  (GZK cutoff)"],keyFormulas:[{tex:"\\frac{dE}{dt} \\propto E",desc:"Fermi 1  (  )"},{tex:"N(E) \\propto E^{-\\alpha}",desc:"  power law (  2.7)"},{tex:"E_c = \\frac{3eB\\,r_L^2}{2\\Delta t}",desc:"Fermi    (  r_L,   t)"},{tex:"E_{\\mathrm{GZK}} \\approx 5 \\times 10^{19} \\, \\mathrm{eV}",desc:"GZK cutoff  (CMB )"}],observations:"  :    , IceCube   ( CR  )",relatedPapers:["The Origin of Cosmic Rays (Jokipii, 1987)","Cosmic Ray Propagation and Solar Modulation (Potgieter, 2013)","Supernova Remnants as Cosmic Ray Accelerators (Berezhko & Vlk, 2007)"]}},{slug:"adaptive-optics-interferometry",title:"  ",category:"observations",description:"  , VLBI,  ,  ",content:{overview:"    . (AO)          . VLBI( )         .",keyPoints:[" seeing:      (typical ~0.5~2 arcsec)"," :  = /(2D), D  ",": (wavefront sensor) +  (deformable mirror)  ","Strehl ratio: AO  . Strehl  1 (), 0 (  )","VLBI (Very Long Baseline Interferometry):   ,   "," : Keck I&II, VLTI (  ~ 1 )"," (phase closure):     "],keyFormulas:[{tex:"\\theta_{\\mathrm{diff}} = 1.22 \\frac{\\lambda}{D}",desc:"Rayleigh  "},{tex:"B_{\\mathrm{eff}} = \\lambda D / d",desc:"   ( , D baseline, d  )"},{tex:"S = \\exp\\left(-\\frac{\\pi^2}{2\\ln 2} \\sigma_\\phi^2\\right)",desc:"Strehl ratio (_: RMS  )"}],observations:"Event Horizon Telescope (EHT): 10  VLBI M87, Sgr A*   (2019, 2022)",relatedPapers:["Adaptive Optics for Astronomy (Roddier, 1999)","VLBI Astrometry (Porcas et al., 2003)","First M87 Event Horizon Telescope Results (EHT Collaboration, 2019)"]}},{slug:"modified-gravity",title:" : MOND TeVeS",category:"relativity",description:"  ,   , CDM ",content:{overview:"           . MOND (  )      , TeVeS  .",keyPoints:["MOND : a < a  F = m(a/a)  (a ~ 1.210 m/s)","  :   MOND   ( )","Deep MOND (Deep Modified Newtonian Dynamics): a << a F  (GMm/r)","TeVeS (Tensor-Vector-Scalar):  MOND,    ","Bullet Cluster :     , MOND  ","  (UV completion): MOND   "],keyFormulas:[{tex:"F = m \\frac{a^2}{a_0}\\,\\, (a << a_0)",desc:"Deep MOND "},{tex:"a_0 = \\frac{cH_0}{6}\\approx 1.2 \\times 10^{-10}\\,\\mathrm{m/s^2}",desc:"MOND "},{tex:"v_\\mathrm{rot} \\approx \\sqrt[4]{GMa_0}\\,\\, (a << a_0)",desc:"MOND   ( )"}],observations:"  ,   , CMB , BBN  ",relatedPapers:["MOND and the Dark Matter Problem (Milgrom, 2015)","Relativistic MOND via TeVeS (Bekenstein, 2004)","The Bullet Cluster Evidence against Dark Matter (Clowe et al., 2006)"]}},{slug:"dark-matter-detection",title:" : WIMPs, Axions,  ",category:"galaxies",description:" ,  ,  ,  ",content:{overview:"    85%   . WIMPs (   ) axions  ,     .",keyPoints:["WIMPs (Weakly Interacting Massive Particles):  10~1000 GeV/c,   ","Axions:    (eV ), QCD  "," : XENON, LUX, SuperCDMS       "," :      ,  "," : LHC      "," :    "],keyFormulas:[{tex:"\\sigma_{\\mathrm{WIMP-nucleon}} \\sim 10^{-45}\\,\\mathrm{cm}^2\\,\\, (\\mathrm{spin\\text{-}independent})",desc:"WIMP-  "},{tex:"m_a \\sim 10^{-6}\\,\\mathrm{eV} \\sim 10^{-2}\\,\\mathrm{eV}",desc:"  "},{tex:"F_a = \\frac{m_e v^2}{g_{a\\gamma\\gamma} m_a}",desc:"  "}],observations:"Planck 2018: _cdm h = 0.1200.001, LHC Run 2: WIMP   , AMS:   ",relatedPapers:["Dark Matter Candidates: From Theory to Direct Detection (Hooper & Kolb, 2010)","Axion Dark Matter Searches (Irastorza & Redondo, 2018)","XENON1T Results on Light Dark Matter Particles (XENON Collaboration, 2019)"]}},{slug:"exoplanet-systems",title:": , ,  ",category:"stars",description:"  ,  ,   , TRAPPIST-1 ",content:{overview:"5500   (2024).   (protoplanetary disk)    , /     .",keyPoints:[" :          (  )"," :        (m sin i)"," (transit photometry):        ( 0.01%)"," :      (HO, CO, CH)","  :         ","TESS/JWST:   ,    "],keyFormulas:[{tex:"\\frac{\\Delta F}{F} = \\frac{R_p^2}{R_*^2}",desc:"   (R_p: , R_*:  )"},{tex:"a_\\mathrm{HZ} = \\sqrt{\\frac{L_*}{L_\\odot}}",desc:"   "},{tex:"K = \\frac{(m \\sin i)}{\\sqrt{1-e^2}} \\sqrt{\\frac{GM_*}{a^3}}",desc:"RV  ( )"}],observations:"Kepler  2662, TESS  600+ (), TRAPPIST-1: 7   (3   )",relatedPapers:["Exoplanet Atmospheres (Seager, 2010)","Planet Formation in Protoplanetary Disks (Nakano et al., 2015)","JWST Transiting Exoplanet Community Early Release Science Program (Louie et al., 2023)"]}},{slug:"supernova-cosmology",title:" :  Ia  ",category:"cosmology",description:"  Ia ,   ,  , w ",content:{overview:'1998,   Type Ia  "  "   (Nobel 2011). SNe Ia      .',keyPoints:["Type Ia SN:       ",":    M_V  -19.3 (0.3)","Phillips :       (  )","Dust extinction:     (E(B-V) )","Hubble diagram:   vs  _ _m  "," :  ()  , w = -1 "],keyFormulas:[{tex:"m = M + 5\\log_{10}(d_L) + 25",desc:"  (m:  , M:  )"},{tex:"d_L = \\frac{1+z}{H_0} \\int_0^z \\frac{dz^\\prime}{E(z^\\prime)}",desc:"  (CDM)"},{tex:"M_V^\\mathrm{corr} = M_V - 2.5\\alpha(s-1)",desc:"Phillips  (s:  )"}],observations:"Riess et al. 1998 42 SNe Ia, Perlmutter et al. 1999 52 SNe Ia,  1000+  , H = 73.041.04 km/s/Mpc (SH0ES 2022)",relatedPapers:["Observational Evidence from Supernovae for an Accelerating Universe (Riess et al., 1998)","Measurements of  and  from 42 High-Redshift Supernovae (Perlmutter et al., 1999)","Local Void is Consistent with CDM (Kenworthy et al., 2021)"]}},{slug:"agn-unified-model",title:"   : , ,  ",category:"galaxies",description:" ,  , Fanaroff-Riley , Eddington ",content:{overview:"AGN (Active Galactic Nuclei)  (SMBH)  .  ( ,  )    ,   .",keyPoints:["SMBH:    10~10 M",":   (inner disk) +   (outer disk)","(Torus):    ,    >> 1","(Jet):   ,    ~ 0.99","Fanaroff-Riley : FR I (,  ) vs FR II (,  )","Eddington : L_Edd = 4GMm_p c/_T  1.410(M/M) W"," (BLR/NLR):    "],keyFormulas:[{tex:"L_\\mathrm{Edd} = \\frac{4\\pi GMm_p c}{\\sigma_T} = 1.4 \\times 10^{31}\\left(\\frac{M}{M_\\odot}\\right)\\,\\mathrm{W}",desc:"Eddington "},{tex:"\\lambda_\\mathrm{Edd} = \\frac{L_\\mathrm{bol}}{L_\\mathrm{Edd}}",desc:"Eddington "},{tex:"\\dot{M} = \\frac{L}{\\eta c^2}",desc:" (: radiative efficiency)"}],observations:"M87 SMBH M=(6.50.7)10M, Centaurus A   >4 Mpc, NGC 1068   (ALMA)",relatedPapers:["AGN Unification: The Quest Continues (Krolik, 2007)","Accretion in Supermassive Black Holes (Narayan & Quataert, 2005)","First M87 Event Horizon Telescope Results (EHT Collaboration, 2019)"]}}],I4=[{term:"Absolute Magnitude ()",definition:"  10 pc    .    ."},{term:"Accretion Disk ( )",definition:",        .  40%   ."},{term:"Adiabatic Gradient ( )",definition:"        . dT/dP = T/(P)."},{term:"Blackbody Radiation ()",definition:"   ,      . Planck  ."},{term:"Blue Shift ()",definition:"      .  < 0."},{term:"CCD Photometry (CCD )",definition:"Charge-Coupled Device    . -  100  ."},{term:"CMB Power Spectrum (CMB )",definition:"CMB      C_ .  ,    ."},{term:"CNO Cycle (CNO )",definition:"   : C  N  C  N  O  N  C + He."},{term:"Doppler Shift ( )",definition:"    . v << c  / = v/c."},{term:"Dynamical Mass ( )",definition:"Jeans     .      ."},{term:"EOS Parameter ( )",definition:" w = p/(c). CDM w = -1.  ."},{term:"Equivalent Width (, EW)",definition:"     .  column density  ."},{term:"Ergosphere ()",definition:"Kerr   g_tt > 0 .       ."},{term:"Friedmann Equation ( )",definition:"    . (/a) + k/a = 8G/3."},{term:"Geodesic ()",definition:'    . Riemannian  "" .'},{term:"Gravitational Redshift ()",definition:"     . / = -GM/cr."},{term:"Gravitational Waves ()",definition:"   .  h ~ 10 (LIGO).  ,   ."},{term:"Gravitational Wave Strain ( )",definition:"LIGO     : h = L/L ~ 10.   ."},{term:"Gravitational Wave Detector ( )",definition:"LIGO, Virgo, KAGRA    .      ."},{term:"MOND (Modified Newtonian Dynamics)",definition:"      . a < a ~ 10 m/s   ."},{term:"TeVeS (Tensor-Vector-Scalar Gravity)",definition:"MOND  .   = ."},{term:"Bullet Cluster ( )",definition:"    . X-        ."},{term:"WIMPs (Weakly Interacting Massive Particles)",definition:" .  10~1000 GeV/c,     ."},{term:"Axion ()",definition:"     (eV~meV ). QCD  Peccei-Quinn  ."},{term:"Exoplanet ()",definition:"    . 5500+  (2024).  ,   ."},{term:"Habitable Zone (  )",definition:"          .    ."},{term:"Type Ia Supernova (Ia )",definition:"      .      ."},{term:"Phillips Relation (Phillips )",definition:"Type Ia SN     .      ."},{term:"AGN (Active Galactic Nuclei)",definition:" .       ."},{term:"SMBH (Supermassive Black Hole)",definition:"   .  10~10 M.     ."},{term:"AGN Torus (AGN )",definition:"AGN     .    >> 1.     ."},{term:"Eddington Luminosity (Eddington )",definition:"    . L_Edd = 4GMm_p c/_T  1.410(M/M) W."},{term:"Fanaroff-Riley Classification",definition:"Radio galaxy  . FR I:    . FR II:    ."},{term:"Hawking Radiation ( )",definition:"   .  T_H = c/(8kGM)."},{term:"Hubble Constant ( )",definition:"   . H  67-73 km/s/Mpc (   )."},{term:"Hubble Distance ( )",definition:"     . d_H = c/H  4400 Mpc."},{term:"ISCO (  )",definition:"Innermost Stable Circular Orbit.     . r_ISCO = 6GM/c (Schwarzschild)."},{term:"Jeans Equation ( )",definition:"   . d_r/dr + 2_r/r = -GM/r."},{term:"Jeans Mass ( )",definition:"    . M_J = (kT/G)^(3/2)(5T/G)^(1/2)."},{term:"Kerr Metric ( )",definition:"   .   a = J/Mc .    ."},{term:"Lane-Emden Equation (- )",definition:"     . du/d + 2/du/d + u^n = 0."},{term:"Luminosity Distance ( )",definition:"      . d_L = (1+z)d_c (CDM)."},{term:"LIGO (Laser Interferometer Gravitational-Wave Observatory)",definition:"  . Hanford & Livingston   .   4 km,   125 W."},{term:"Mass-Luminosity Relation (- )",definition:"L  M^,    3.5.    ."},{term:"MHD Simulations ( )",definition:"     .  , ,   ."},{term:"Matched Filtering ( )",definition:"   .   (cross-correlation) S/N ."},{term:"Merger ()",definition:"   . /     ."},{term:"NFW Profile (NFW  )",definition:"Navarro-Frenk-White   :   1/(r/r_s(1+r/r_s))."},{term:"Neutron Star ()",definition:"     .  ~10 km,  ~10^17 kg/cm,  ."},{term:"Opacity ()",definition:"    .  = /().     ."},{term:"Photometric Redshift ( )",definition:"     .     ."},{term:"Planck Function ( )",definition:"   . B_ = 2h/c1/(e^(h/kT)-1)."},{term:"QFT in Curved Spacetime (  )",definition:" . Hawking   ."},{term:"Radiative Transfer ( )",definition:"    . F_rad = -c/(3)dT/dr."},{term:"Redshift ()",definition:"    . z = (_obs - _emit)/_emit."},{term:"Rotation Curve ()",definition:"   vs  .     ."},{term:"Schwarzschild Metric ( )",definition:"   .   . r_s = 2GM/c ."},{term:"Shapiro Delay ( )",definition:"   . t = (2GM/c)ln(4rr/b)."},{term:"Spectral Classification ( )",definition:"   : O B A F G K M.   100 K ."},{term:"Starburst Galaxy ( )",definition:"     . SFR > 1 M/yr.    ."},{term:"Stefan-Boltzmann Law (- )",definition:"  : L = 4RT,  = 5.6710 W m K."},{term:"Tully-Fisher Relation (- )",definition:"     .    ."},{term:"Tidal Deformability ( )",definition:"    .  .    ."},{term:"Time Delay ( )",definition:"     .  (sky localization) ."},{term:"Virial Theorem ( )",definition:"  : 2K + U = 0 ( )."},{term:"Virgo (  )",definition:" Cascina  .   3 km,   200 W. LIGO 3  ."},{term:"Voigt Profile ( )",definition:" ( + )   .    ."},{term:"White Dwarf ()",definition:"   .    .   (Hubble time > age)."},{term:"X-ray Spectroscopy (X )",definition:"Chandra, XMM-Newton     .  K (6.4 keV)    ."},{term:"Zero-Age Main Sequence (ZAMS)",definition:"      . Hertzsprung-Russell  ."}],Qse=[{id:1,title:"Observation of Gravitational Waves from a Binary Black Hole Merger",authors:"Abbott, B. P. et al. (LIGO/Virgo Collaboration)",year:2016,arxivId:"1602.03837",journal:"Physical Review Letters 116, 061102",doi:"10.1103/PhysRevLett.116.061102",abstract:"On 14 September 2015 at 09:50:45 UTC the two detectors of the Laser Interferometer Gravitational-Wave Observatory observed a transient gravitational-wave signal. The signal sweeps upward in frequency from 35 to 250 Hz, with peak gravitational-wave strain of 1.0  10.",summary:{background:"  100     .        .",methodology:"Matched filtering :     . S/N > 24 . Bayesian parameter estimation , , ,  .",theory:"   : dE/dt = -32/5G/(c)(mm)(m+m)/(a).    Kerr  .",data_analysis:"Advanced LIGO (2 ): N = 510/Hz @ 100Hz. 4 km arm interferometer, Fabry-Prot cavity resonator .  :   , /  subtraction.",results:"  () q = 1.20.1,   M = 65 M,    M_f = 62 M,  E = 3.0 Mc (   ).",limiting_factors:" shot noise  thermal noise ,   0.2  parameter inference  ."}},{id:2,title:"First M87 Event Horizon Telescope Results. I. The Shadow of the Supermassive Black Hole",authors:"Event Horizon Telescope Collaboration",year:2019,arxivId:"1906.11238",journal:"The Astrophysical Journal Letters 875, L1",doi:"10.3847/2041-8213/ab0ec7",abstract:"We present the first Event Horizon Telescope (EHT) observations at 1.3 mm wavelength of the supermassive black hole candidate in the galactic center of the radio galaxy M87. We have resolved the central compact radio source on angular scales of ~5 microarcseconds.",summary:{background:"         . VLBI    10,000 km .",methodology:"Very Long Baseline Interferometry (VLBI): 8    .    . Phase calibration, self-calibration  . Imaging: CLEAN ,   .",theory:"General relativistic magnetohydrodynamics (GRMHD)    . Kerr     (null geodesics).   : r_shadow  5.2 GM/c (M87  r_shadow  42 as).",data_analysis:"Visibility :   . u-v plane   .     . Uncertainty quantification:    .",results:"  M = (6.50.7)10 M.     d = 42.03.0 as.   10%  .    .",limiting_factors:"  ,    ,  (intraday variability) ,    ."}},{id:3,title:"A Universe of Black Holes and Bulges Revealed by JWST",authors:"Labb, I. et al.",year:2023,arxivId:"2306.02465",journal:"Nature ( )",doi:"10.1038/nature25755",abstract:"The James Webb Space Telescope (JWST) has revealed a population of surprisingly massive galaxies at z > 10, indicating accelerated galaxy assembly in the early universe.",summary:{background:"JWST     (z > 6)    .        .",methodology:"NIRCam : 0.6-5 m ,   SED fitting.  : NIRSpec   (R ~ 1000). (PSF) ,  .",theory:"SED modeling: Stellar population synthesis (FSPS, BAGPIPES). Dust attenuation curve . Photometric redshift vs spectroscopic redshift . Virial mass : M_vir = r/G ( ).",data_analysis:": P(z, params | data)  L(data | z, params)  Prior(z, params). Bayesian inference , , SFR .     (confidence interval) .",results:" z = 13.2  JADES-GS-z13-0:  M* = (3.21.9)10 M.  ~500 Myr.    330 Myr   (   a = 0.07).",limiting_factors:"  ,      degeneracy,  -    ,   ."}},{id:4,title:"The Weak Gravitational Lensing Signal and the Clustering of GAMA Galaxies",authors:"Leauthaud, A. et al.",year:2017,arxivId:"1511.06428",journal:"Monthly Notices of the Royal Astronomical Society",doi:"10.1093/mnras/stw2897",abstract:"We present joint measurements of the weak gravitational lensing signal around GAMA galaxies and their clustering. These measurements allow direct constraints on galaxy assembly bias and the dark matter halo profiles.",summary:{background:"          .     .",methodology:"Weak lensing shear : background     (typical  ~ 0.01).  :  = _cr  _tan. 2-point correlation   clustering .",theory:"NFW : (r) = _s / [(r/r_s)(1+r/r_s)].  c  r    M = (4/3)_crit200r. Halo mass function  .",data_analysis:"Forward modeling:   shear     .  galaxy-halo  (P(halo mass | galaxy properties)). Likelihood: L = _i P(data_i | model, params).",results:"  M* = 10 M     M_DM ~ 10 M.   c = 5.01.5.      .",limiting_factors:"    S/N,    (shape noise), systematic lensing , photometric redshift ."}},{id:5,title:"GW170817: Observation of Gravitational Waves from a Binary Neutron Star Inspiral",authors:"Abbott, B. P. et al. (LIGO/Virgo Collaboration)",year:2017,arxivId:"1710.05832",journal:"Physical Review Letters 119, 161101",doi:"10.1103/PhysRevLett.119.161101",abstract:"On August 17, 2017 at 12:41:04 UTC the Advanced LIGO and Advanced Virgo gravitational-wave detectors made their first observation of a binary neutron star inspiral. A loud gravitational-wave signal was detected with a duration of approximately 100 seconds.",summary:{background:"   r-process (  )  .  +  (kilonova)     .",methodology:"Bayesian parameter estimation: 9  ~ , , ,  . Matched filtering  . 3 (LIGO Hanford, LIGO Livingston, Virgo)  source localization (sky position ).",theory:"  :   M_max . Tidal deformability   (compressibility) .    5 (  ).",data_analysis:"  ~100 sec     . Nested sampling    (marginalized probability) . Model comparison: BNS vs NSBH vs BBH.",results:"  : m = 1.36-1.60 M, m = 1.17-1.36 M. Tidal deformability  = 560. r-process    0.03-0.05 M.  kilonova AT2017gfo   .",limiting_factors:"Virgo    source localization  (~600 sq deg),   (gap),  merger   ."}}],Up=[{id:1,name:"  ",description:", ,    "},{id:2,name:" ",description:" , , CCD, , VLBI  "},{id:3,name:" ",description:"LIGO, EHT, JWST     "},{id:4,name:" ",description:"N-body, MHD, hydrodynamics   "},{id:5,name:" ",description:", Bayesian ,   "},{id:6,name:" ",description:", ,  ,   "}],bN={textbooks:[{title:"Gravitational Waves Volume 1: Theory and Experiments",authors:"Maggiore, M.",year:2007},{title:"The Theory of Stellar Structure and Evolution",authors:"Kippenhahn, R., Weigert, A. & Weiss, A.",year:2012},{title:"Galactic Dynamics",authors:"Binney, J. & Tremaine, S.",year:2008},{title:"General Relativity",authors:"Carroll, S. M.",year:2004},{title:"Black Hole Thermodynamics",authors:"Wald, R. M.",year:2001},{title:"Observational Astrophysics",authors:"Birney, D. S., Gonzalez, G. & Oesper, D. A.",year:2006},{title:"The Early Universe",authors:"Kolb, E. W. & Turner, M. S.",year:1990},{title:"Modern Astrophysics",authors:"Carroll, B. W., Ostlie, D. A. & et al.",year:2007}],databases:[{name:"NASA ADS (Astrophysics Data System)",url:"https://ui.adsabs.harvard.edu/",desc:"    . 240+  ."},{name:"arXiv Astro-ph",url:"https://arxiv.org/archive/astro-ph",desc:" .  ~50  .   ."},{name:"Simbad",url:"https://simbad.u-strasbg.fr/",desc:", ,      , ."},{name:"NED (NASA Extragalactic Database)",url:"https://ned.ipac.caltech.edu/",desc:"   . , ,    ."},{name:"VizieR",url:"https://vizier.cds.unistra.fr/",desc:"700+      ."},{name:"Gravitational Wave Open Science Center (GWOSC)",url:"https://gwosc.readthedocs.io/",desc:"LIGO/Virgo  ,  , ."}],tools:[{name:"GIZMO",url:"https://www.tapir.caltech.edu/~phopkins/Site/GIZMO.html",desc:"N-body +  +  +    ."},{name:"ATHENA++",url:"https://www.athena-code.org/",desc:"  (GRMHD) .    ."},{name:"Planck 2018 Legacy Release",url:"https://irsa.ipac.caltech.edu/data/Planck/",desc:"CMB  ,  ,   ."},{name:"FSPS (Flexible Stellar Population Synthesis)",url:"https://github.com/bd-j/fsps",desc:"   . SED ."},{name:"dynesty (Dynamic Nested Sampling)",url:"https://github.com/joshspeagle/dynesty",desc:"   Bayesian .   ."},{name:"SIMBAD Sky Map",url:"http://simbad.u-strasbg.fr/simbad/sim-fcoo",desc:"      ."},{name:"JWST Exposure Time Calculator",url:"https://jwst.etc.stsci.edu/",desc:"JWST     S/N ."}]},YA={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},QA={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4}}};function Jse(){const{isDark:r}=go(),e=vk.slice(0,3);return he.useEffect(()=>{if(!localStorage.getItem("registeredUsers")){const n={[btoa("test@example.com")]:{email:"test@example.com",password:btoa("Test1234"),username:"",affiliation:" ",createdAt:new Date().toISOString()}};localStorage.setItem("registeredUsers",JSON.stringify(n)),console.log("   : test@example.com / Test1234")}},[]),R.jsxs("div",{className:"space-y-8 sm:space-y-12",children:[R.jsxs("section",{className:"py-8 sm:py-12 md:py-20 text-center",children:[R.jsx(Ge.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},children:R.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-bold mb-4 bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-400 dark:to-purple-500 bg-clip-text text-transparent",children:" "})}),R.jsx(Ge.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-base sm:text-lg md:text-xl text-gray-600 dark:text-gray-300 mb-8 px-4",children:" ,  ,   "}),R.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"flex flex-col sm:flex-row gap-4 justify-center px-4",children:[R.jsx(Ge.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:R.jsx(Cr,{to:"/concepts",className:"block px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition font-medium shadow-lg hover:shadow-xl",children:" "})}),R.jsx(Ge.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:R.jsx(Cr,{to:"/papers",className:"block px-8 py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg hover:from-orange-700 hover:to-orange-800 transition font-medium shadow-lg hover:shadow-xl",children:" "})})]})]}),R.jsx(Ge.section,{variants:YA,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6",children:[{title:" ",description:", ,        ",icon:""},{title:" ",description:"    .    ",icon:""},{title:"",description:", ,    .    ",icon:""}].map((t,n)=>R.jsxs(Ge.div,{variants:QA,whileHover:{y:-8,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},className:`p-6 rounded-lg border transition ${r?"bg-gray-800 border-gray-700 hover:border-blue-500":"bg-white border-gray-200 hover:border-blue-500"}`,children:[R.jsx("div",{className:"text-4xl mb-3",children:t.icon}),R.jsx("h3",{className:`text-lg sm:text-xl font-bold mb-2 ${r?"text-white":"text-gray-900"}`,children:t.title}),R.jsx("p",{className:`text-sm sm:text-base ${r?"text-gray-300":"text-gray-600"}`,children:t.description})]},n))}),R.jsxs(Ge.section,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6},viewport:{once:!0,amount:.2},children:[R.jsx(Ge.h2,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-6 text-gray-900 dark:text-white",children:" "}),R.jsx(Ge.div,{variants:YA,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:e.map(t=>R.jsx(Ge.div,{variants:QA,whileHover:{y:-8},className:`p-6 rounded-lg border transition cursor-pointer ${r?"bg-gray-800 border-gray-700 hover:border-blue-500":"bg-white border-gray-200 hover:border-blue-500"}`,children:R.jsxs(Cr,{to:`/concepts/${t.slug}`,children:[R.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 mb-2",children:t.title}),R.jsx("p",{className:`text-sm sm:text-base ${r?"text-gray-300":"text-gray-600"}`,children:t.description})]})},t.slug))})]}),R.jsxs(Ge.section,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6},viewport:{once:!0,amount:.2},children:[R.jsx(Ge.h2,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-6 text-gray-900 dark:text-white",children:"  "}),R.jsx(Ge.div,{variants:YA,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},className:"space-y-4",children:Qse.map(t=>R.jsxs(Ge.div,{variants:QA,whileHover:{x:8},className:`p-4 sm:p-6 rounded-lg border transition ${r?"bg-gray-800 border-gray-700 hover:border-orange-500":"bg-white border-gray-200 hover:border-orange-500"}`,children:[R.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2",children:[R.jsxs("div",{className:"flex-1",children:[R.jsx("h3",{className:"font-bold text-blue-600 dark:text-blue-400 text-sm sm:text-base",children:t.title}),R.jsxs("p",{className:`text-xs sm:text-sm ${r?"text-gray-400":"text-gray-500"}`,children:[t.authors," (",t.year,")"]})]}),R.jsx("span",{className:`text-xs px-3 py-1 rounded whitespace-nowrap ${r?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:t.year})]}),R.jsx("p",{className:`text-xs sm:text-sm mt-3 ${r?"text-gray-300":"text-gray-600"}`,children:t.abstract})]},t.id))}),R.jsx(Ge.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"mt-8 text-center",children:R.jsx(Ge.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:R.jsx(Cr,{to:"/papers",className:"inline-block px-8 py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg hover:from-orange-700 hover:to-orange-800 transition font-medium shadow-lg hover:shadow-xl",children:"   "})})})]})]})}function Zse(){const{isDark:r}=go(),e={relativity:"",stars:"",galaxies:"",cosmology:"",observations:""},t={relativity:"from-red-500 to-pink-500",stars:"from-yellow-500 to-orange-500",galaxies:"from-purple-500 to-indigo-500",cosmology:"from-blue-500 to-cyan-500",observations:"from-green-500 to-emerald-500"};return R.jsxs("div",{className:"space-y-12 sm:space-y-16",children:[R.jsxs(Ge.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6},children:[R.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent",children:" "}),R.jsx(Ge.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`text-sm sm:text-base ${r?"text-gray-300":"text-gray-600"}`,children:"  5  , 14     ."})]}),Object.entries(e).map(([n,i],s)=>{const a=vk.filter(o=>o.category===n);return a.length===0?null:R.jsxs(Ge.section,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6},viewport:{once:!0,amount:.1},children:[R.jsx(Ge.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},className:"mb-6",children:R.jsx("div",{className:`inline-block bg-gradient-to-r ${t[n]} p-0.5 rounded-lg`,children:R.jsx("div",{className:`px-4 py-2 rounded-md ${r?"bg-gray-900":"bg-white"}`,children:R.jsx("h2",{className:`text-lg sm:text-xl font-bold bg-gradient-to-r ${t[n]} bg-clip-text text-transparent`,children:i})})})}),R.jsx(Ge.div,{variants:YA,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:a.map((o,l)=>R.jsxs(Ge.div,{variants:QA,whileHover:{y:-12,boxShadow:"0 20px 40px -10px rgba(0, 0, 0, 0.15)"},className:`group relative overflow-hidden rounded-xl border-2 transition cursor-pointer ${r?"bg-gradient-to-br from-gray-800 to-gray-900 border-gray-700 hover:border-blue-500":"bg-gradient-to-br from-white to-gray-50 border-gray-200 hover:border-blue-500"}`,children:[R.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${t[n]} opacity-0 group-hover:opacity-5 transition-opacity duration-300`}),R.jsxs(Cr,{to:`/concepts/${o.slug}`,className:"relative block p-6",children:[R.jsx("div",{className:"mb-4",children:R.jsx("span",{className:`inline-block px-3 py-1 text-xs font-semibold rounded-full ${r?"bg-gray-700 text-blue-300":"bg-blue-100 text-blue-700"}`,children:i})}),R.jsx("h3",{className:"text-base sm:text-lg font-bold mb-2 text-blue-600 dark:text-blue-400 group-hover:translate-x-1 transition-transform",children:o.title}),R.jsx("p",{className:`text-sm sm:text-base line-clamp-2 mb-4 ${r?"text-gray-300":"text-gray-600"}`,children:o.description}),R.jsxs("div",{className:`text-xs space-y-1 ${r?"text-gray-400":"text-gray-500"}`,children:[o.content.keyPoints.slice(0,2).map((u,c)=>R.jsxs("div",{className:"flex items-start gap-2",children:[R.jsx("span",{className:"text-blue-400",children:""}),R.jsx("span",{className:"line-clamp-1",children:u})]},c)),o.content.keyPoints.length>2&&R.jsxs("div",{className:"text-blue-500 font-medium",children:["+ ",o.content.keyPoints.length-2," ..."]})]})]})]},o.slug))})]},n)})]})}function eae({tex:r,display:e=!1}){return he.useEffect(()=>{if(window.katex)try{window.katex.render(r,document.getElementById(`math-${r}`),{displayMode:e,throwOnError:!1})}catch(t){console.error("KaTeX error:",t)}},[r,e]),R.jsx("div",{id:`math-${r}`,className:"inline-block"})}function tae(){const{slug:r}=Lz(),e=vk.find(n=>n.slug===r);if(!e)return R.jsx("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:"   ."});const{content:t}=e;return R.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 sm:space-y-8",children:[R.jsxs("div",{children:[R.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-2 text-gray-900 dark:text-white",children:e.title}),R.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm sm:text-base",children:e.description})]}),R.jsxs("section",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg",children:[R.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:""}),R.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed text-sm sm:text-base",children:t.overview})]}),R.jsxs("section",{className:"px-4 sm:px-0",children:[R.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),R.jsx("ul",{className:"space-y-2",children:t.keyPoints.map((n,i)=>R.jsxs("li",{className:"flex gap-3 text-sm sm:text-base",children:[R.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-bold flex-shrink-0",children:""}),R.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:n})]},i))})]}),t.keyFormulas&&t.keyFormulas.length>0&&R.jsxs("section",{className:"px-4 sm:px-0",children:[R.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),R.jsx("div",{className:"space-y-4",children:t.keyFormulas.map((n,i)=>R.jsxs("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg overflow-x-auto",children:[R.jsx(eae,{tex:n.tex}),R.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-2",children:n.desc})]},i))})]}),R.jsxs("section",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg",children:[R.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),R.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm sm:text-base",children:t.observations})]}),t.relatedPapers&&t.relatedPapers.length>0&&R.jsxs("section",{className:"px-4 sm:px-0",children:[R.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),R.jsx("ul",{className:"space-y-2",children:t.relatedPapers.map((n,i)=>R.jsx("li",{className:"text-gray-700 dark:text-gray-300 border-l-2 border-blue-600 dark:border-blue-400 pl-4 text-sm sm:text-base",children:n},i))})]})]})}const rae=()=>{};var P4={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},nae=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=r[t++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=r[t++],a=r[t++],o=r[t++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const s=r[t++],a=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Ej={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const s=r[i],a=i+1<r.length,o=a?r[i+1]:0,l=i+2<r.length,u=l?r[i+2]:0,c=s>>2,h=(s&3)<<4|o>>4;let d=(o&15)<<2|u>>6,f=u&63;l||(f=64,a||(d=64)),n.push(t[c],t[h],t[d],t[f])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Aj(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):nae(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const s=t[r.charAt(i++)],o=i<r.length?t[r.charAt(i)]:0;++i;const u=i<r.length?t[r.charAt(i)]:64;++i;const h=i<r.length?t[r.charAt(i)]:64;if(++i,s==null||o==null||u==null||h==null)throw new iae;const d=s<<2|o>>4;if(n.push(d),u!==64){const f=o<<4&240|u>>2;if(n.push(f),h!==64){const p=u<<6&192|h;n.push(p)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class iae extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sae=function(r){const e=Aj(r);return Ej.encodeByteArray(e,!0)},wS=function(r){return sae(r).replace(/\./g,"")},Sj=function(r){try{return Ej.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aae(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oae=()=>aae().__FIREBASE_DEFAULTS__,lae=()=>{if(typeof process>"u"||typeof P4>"u")return;const r=P4.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},uae=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Sj(r[1]);return e&&JSON.parse(e)},mC=()=>{try{return rae()||oae()||lae()||uae()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Tj=r=>{var e,t;return(t=(e=mC())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},Cj=r=>{const e=Tj(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},Nj=()=>{var r;return(r=mC())==null?void 0:r.config},Dj=r=>{var e;return(e=mC())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function yk(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,s=r.sub||r.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...r};return[wS(JSON.stringify(t)),wS(JSON.stringify(a)),""].join(".")}const Ob={};function hae(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ob))Ob[e]?r.emulator.push(e):r.prod.push(e);return r}function dae(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let R4=!1;function bk(r,e){if(typeof window>"u"||typeof document>"u"||!dp(window.location.host)||Ob[r]===e||Ob[r]||R4)return;Ob[r]=e;function t(d){return`__firebase__banner__${d}`}const n="__firebase__banner",s=hae().prod.length>0;function a(){const d=document.getElementById(n);d&&d.remove()}function o(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function l(d,f){d.setAttribute("width","24"),d.setAttribute("id",f),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function u(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{R4=!0,a()},d}function c(d,f){d.setAttribute("id",f),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function h(){const d=dae(n),f=t("text"),p=document.getElementById(f)||document.createElement("span"),g=t("learnmore"),b=document.getElementById(g)||document.createElement("a"),v=t("preprendIcon"),x=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const y=d.element;o(y),c(b,g);const E=u();l(x,v),y.append(x,p,b,E),document.body.appendChild(y)}s?(p.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",f)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fae(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ts())}function mae(){var e;const r=(e=mC())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pae(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gae(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function vae(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yae(){const r=ts();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function bae(){return!mae()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wae(){try{return typeof indexedDB=="object"}catch{return!1}}function xae(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ae="FirebaseError";class eu extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=_ae,Object.setPrototypeOf(this,eu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fx.prototype.create)}}class Fx{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?Aae(s,n):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new eu(i,o,n)}}function Aae(r,e){return r.replace(Eae,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const Eae=/\{\$([^}]+)}/g;function Sae(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Zm(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const s=r[i],a=e[i];if(k4(s)&&k4(a)){if(!Zm(s,a))return!1}else if(s!==a)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function k4(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Wy(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,s]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ky(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function Tae(r,e){const t=new Cae(r,e);return t.subscribe.bind(t)}class Cae{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");Nae(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=wN),i.error===void 0&&(i.error=wN),i.complete===void 0&&(i.complete=wN);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nae(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function wN(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(r){return r&&r._delegate?r._delegate:r}class gd{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dae{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new cae;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Iae(e))try{this.getOrInitializeService({instanceIdentifier:lf})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=lf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=lf){return this.instances.has(e)}getOptions(e=lf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&a.resolve(i)}return i}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Mae(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=lf){return this.component?this.component.multipleInstances?e:lf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Mae(r){return r===lf?void 0:r}function Iae(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pae{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Dae(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(qt||(qt={}));const Rae={debug:qt.DEBUG,verbose:qt.VERBOSE,info:qt.INFO,warn:qt.WARN,error:qt.ERROR,silent:qt.SILENT},kae=qt.INFO,Fae={[qt.DEBUG]:"log",[qt.VERBOSE]:"log",[qt.INFO]:"info",[qt.WARN]:"warn",[qt.ERROR]:"error"},Oae=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=Fae[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wk{constructor(e){this.name=e,this._logLevel=kae,this._logHandler=Oae,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Rae[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qt.DEBUG,...e),this._logHandler(this,qt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qt.VERBOSE,...e),this._logHandler(this,qt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qt.INFO,...e),this._logHandler(this,qt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qt.WARN,...e),this._logHandler(this,qt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qt.ERROR,...e),this._logHandler(this,qt.ERROR,...e)}}const Bae=(r,e)=>e.some(t=>r instanceof t);let F4,O4;function Lae(){return F4||(F4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $ae(){return O4||(O4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ij=new WeakMap,vM=new WeakMap,Pj=new WeakMap,xN=new WeakMap,xk=new WeakMap;function Vae(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",s),r.removeEventListener("error",a)},s=()=>{t(ad(r.result)),i()},a=()=>{n(r.error),i()};r.addEventListener("success",s),r.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Ij.set(t,r)}).catch(()=>{}),xk.set(e,r),e}function Uae(r){if(vM.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",s),r.removeEventListener("error",a),r.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",s),r.addEventListener("error",a),r.addEventListener("abort",a)});vM.set(r,e)}let yM={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return vM.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Pj.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ad(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function zae(r){yM=r(yM)}function jae(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(_N(this),e,...t);return Pj.set(n,e.sort?e.sort():[e]),ad(n)}:$ae().includes(r)?function(...e){return r.apply(_N(this),e),ad(Ij.get(this))}:function(...e){return ad(r.apply(_N(this),e))}}function qae(r){return typeof r=="function"?jae(r):(r instanceof IDBTransaction&&Uae(r),Bae(r,Lae())?new Proxy(r,yM):r)}function ad(r){if(r instanceof IDBRequest)return Vae(r);if(xN.has(r))return xN.get(r);const e=qae(r);return e!==r&&(xN.set(r,e),xk.set(e,r)),e}const _N=r=>xk.get(r);function Hae(r,e,{blocked:t,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(r,e),o=ad(a);return n&&a.addEventListener("upgradeneeded",l=>{n(ad(a.result),l.oldVersion,l.newVersion,ad(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const Gae=["get","getKey","getAll","getAllKeys","count"],Wae=["put","add","delete","clear"],AN=new Map;function B4(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(AN.get(e))return AN.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=Wae.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||Gae.includes(t)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let u=l.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[t](...o),i&&l.done]))[0]};return AN.set(e,s),s}zae(r=>({...r,get:(e,t,n)=>B4(e,t)||r.get(e,t,n),has:(e,t)=>!!B4(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kae{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Xae(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function Xae(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bM="@firebase/app",L4="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=new wk("@firebase/app"),Yae="@firebase/app-compat",Qae="@firebase/analytics-compat",Jae="@firebase/analytics",Zae="@firebase/app-check-compat",eoe="@firebase/app-check",toe="@firebase/auth",roe="@firebase/auth-compat",noe="@firebase/database",ioe="@firebase/data-connect",soe="@firebase/database-compat",aoe="@firebase/functions",ooe="@firebase/functions-compat",loe="@firebase/installations",uoe="@firebase/installations-compat",coe="@firebase/messaging",hoe="@firebase/messaging-compat",doe="@firebase/performance",foe="@firebase/performance-compat",moe="@firebase/remote-config",poe="@firebase/remote-config-compat",goe="@firebase/storage",voe="@firebase/storage-compat",yoe="@firebase/firestore",boe="@firebase/ai",woe="@firebase/firestore-compat",xoe="firebase",_oe="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM="[DEFAULT]",Aoe={[bM]:"fire-core",[Yae]:"fire-core-compat",[Jae]:"fire-analytics",[Qae]:"fire-analytics-compat",[eoe]:"fire-app-check",[Zae]:"fire-app-check-compat",[toe]:"fire-auth",[roe]:"fire-auth-compat",[noe]:"fire-rtdb",[ioe]:"fire-data-connect",[soe]:"fire-rtdb-compat",[aoe]:"fire-fn",[ooe]:"fire-fn-compat",[loe]:"fire-iid",[uoe]:"fire-iid-compat",[coe]:"fire-fcm",[hoe]:"fire-fcm-compat",[doe]:"fire-perf",[foe]:"fire-perf-compat",[moe]:"fire-rc",[poe]:"fire-rc-compat",[goe]:"fire-gcs",[voe]:"fire-gcs-compat",[yoe]:"fire-fst",[woe]:"fire-fst-compat",[boe]:"fire-vertex","fire-js":"fire-js",[xoe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=new Map,Eoe=new Map,xM=new Map;function $4(r,e){try{r.container.addComponent(e)}catch(t){vc.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function ep(r){const e=r.name;if(xM.has(e))return vc.debug(`There were multiple attempts to register component ${e}.`),!1;xM.set(e,r);for(const t of xS.values())$4(t,r);for(const t of Eoe.values())$4(t,r);return!0}function pC(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function xa(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Soe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},od=new Fx("app","Firebase",Soe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Toe{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new gd("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw od.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp=_oe;function Rj(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:wM,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw od.create("bad-app-name",{appName:String(i)});if(t||(t=Nj()),!t)throw od.create("no-options");const s=xS.get(i);if(s){if(Zm(t,s.options)&&Zm(n,s.config))return s;throw od.create("duplicate-app",{appName:i})}const a=new Pae(i);for(const l of xM.values())a.addComponent(l);const o=new Toe(t,n,a);return xS.set(i,o),o}function _k(r=wM){const e=xS.get(r);if(!e&&r===wM&&Nj())return Rj();if(!e)throw od.create("no-app",{appName:r});return e}function Ul(r,e,t){let n=Aoe[r]??r;t&&(n+=`-${t}`);const i=n.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${n}" with version "${e}":`];i&&a.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vc.warn(a.join(" "));return}ep(new gd(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Coe="firebase-heartbeat-database",Noe=1,p1="firebase-heartbeat-store";let EN=null;function kj(){return EN||(EN=Hae(Coe,Noe,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(p1)}catch(t){console.warn(t)}}}}).catch(r=>{throw od.create("idb-open",{originalErrorMessage:r.message})})),EN}async function Doe(r){try{const t=(await kj()).transaction(p1),n=await t.objectStore(p1).get(Fj(r));return await t.done,n}catch(e){if(e instanceof eu)vc.warn(e.message);else{const t=od.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vc.warn(t.message)}}}async function V4(r,e){try{const n=(await kj()).transaction(p1,"readwrite");await n.objectStore(p1).put(e,Fj(r)),await n.done}catch(t){if(t instanceof eu)vc.warn(t.message);else{const n=od.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});vc.warn(n.message)}}}function Fj(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Moe=1024,Ioe=30;class Poe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new koe(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=U4();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Ioe){const a=Foe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){vc.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=U4(),{heartbeatsToSend:n,unsentEntries:i}=Roe(this._heartbeatsCache.heartbeats),s=wS(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return vc.warn(t),""}}}function U4(){return new Date().toISOString().substring(0,10)}function Roe(r,e=Moe){const t=[];let n=r.slice();for(const i of r){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),z4(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),z4(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class koe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wae()?xae().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Doe(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return V4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return V4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function z4(r){return wS(JSON.stringify({version:2,heartbeats:r})).length}function Foe(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ooe(r){ep(new gd("platform-logger",e=>new Kae(e),"PRIVATE")),ep(new gd("heartbeat",e=>new Poe(e),"PRIVATE")),Ul(bM,L4,r),Ul(bM,L4,"esm2020"),Ul("fire-js","")}Ooe("");var j4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ld,Oj;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,S){function N(){}N.prototype=S.prototype,T.F=S.prototype,T.prototype=new N,T.prototype.constructor=T,T.D=function(D,_,M){for(var I=Array(arguments.length-2),V=2;V<arguments.length;V++)I[V-2]=arguments[V];return S.prototype[_].apply(D,I)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,S,N){N||(N=0);const D=Array(16);if(typeof S=="string")for(var _=0;_<16;++_)D[_]=S.charCodeAt(N++)|S.charCodeAt(N++)<<8|S.charCodeAt(N++)<<16|S.charCodeAt(N++)<<24;else for(_=0;_<16;++_)D[_]=S[N++]|S[N++]<<8|S[N++]<<16|S[N++]<<24;S=T.g[0],N=T.g[1],_=T.g[2];let M=T.g[3],I;I=S+(M^N&(_^M))+D[0]+3614090360&4294967295,S=N+(I<<7&4294967295|I>>>25),I=M+(_^S&(N^_))+D[1]+3905402710&4294967295,M=S+(I<<12&4294967295|I>>>20),I=_+(N^M&(S^N))+D[2]+606105819&4294967295,_=M+(I<<17&4294967295|I>>>15),I=N+(S^_&(M^S))+D[3]+3250441966&4294967295,N=_+(I<<22&4294967295|I>>>10),I=S+(M^N&(_^M))+D[4]+4118548399&4294967295,S=N+(I<<7&4294967295|I>>>25),I=M+(_^S&(N^_))+D[5]+1200080426&4294967295,M=S+(I<<12&4294967295|I>>>20),I=_+(N^M&(S^N))+D[6]+2821735955&4294967295,_=M+(I<<17&4294967295|I>>>15),I=N+(S^_&(M^S))+D[7]+4249261313&4294967295,N=_+(I<<22&4294967295|I>>>10),I=S+(M^N&(_^M))+D[8]+1770035416&4294967295,S=N+(I<<7&4294967295|I>>>25),I=M+(_^S&(N^_))+D[9]+2336552879&4294967295,M=S+(I<<12&4294967295|I>>>20),I=_+(N^M&(S^N))+D[10]+4294925233&4294967295,_=M+(I<<17&4294967295|I>>>15),I=N+(S^_&(M^S))+D[11]+2304563134&4294967295,N=_+(I<<22&4294967295|I>>>10),I=S+(M^N&(_^M))+D[12]+1804603682&4294967295,S=N+(I<<7&4294967295|I>>>25),I=M+(_^S&(N^_))+D[13]+4254626195&4294967295,M=S+(I<<12&4294967295|I>>>20),I=_+(N^M&(S^N))+D[14]+2792965006&4294967295,_=M+(I<<17&4294967295|I>>>15),I=N+(S^_&(M^S))+D[15]+1236535329&4294967295,N=_+(I<<22&4294967295|I>>>10),I=S+(_^M&(N^_))+D[1]+4129170786&4294967295,S=N+(I<<5&4294967295|I>>>27),I=M+(N^_&(S^N))+D[6]+3225465664&4294967295,M=S+(I<<9&4294967295|I>>>23),I=_+(S^N&(M^S))+D[11]+643717713&4294967295,_=M+(I<<14&4294967295|I>>>18),I=N+(M^S&(_^M))+D[0]+3921069994&4294967295,N=_+(I<<20&4294967295|I>>>12),I=S+(_^M&(N^_))+D[5]+3593408605&4294967295,S=N+(I<<5&4294967295|I>>>27),I=M+(N^_&(S^N))+D[10]+38016083&4294967295,M=S+(I<<9&4294967295|I>>>23),I=_+(S^N&(M^S))+D[15]+3634488961&4294967295,_=M+(I<<14&4294967295|I>>>18),I=N+(M^S&(_^M))+D[4]+3889429448&4294967295,N=_+(I<<20&4294967295|I>>>12),I=S+(_^M&(N^_))+D[9]+568446438&4294967295,S=N+(I<<5&4294967295|I>>>27),I=M+(N^_&(S^N))+D[14]+3275163606&4294967295,M=S+(I<<9&4294967295|I>>>23),I=_+(S^N&(M^S))+D[3]+4107603335&4294967295,_=M+(I<<14&4294967295|I>>>18),I=N+(M^S&(_^M))+D[8]+1163531501&4294967295,N=_+(I<<20&4294967295|I>>>12),I=S+(_^M&(N^_))+D[13]+2850285829&4294967295,S=N+(I<<5&4294967295|I>>>27),I=M+(N^_&(S^N))+D[2]+4243563512&4294967295,M=S+(I<<9&4294967295|I>>>23),I=_+(S^N&(M^S))+D[7]+1735328473&4294967295,_=M+(I<<14&4294967295|I>>>18),I=N+(M^S&(_^M))+D[12]+2368359562&4294967295,N=_+(I<<20&4294967295|I>>>12),I=S+(N^_^M)+D[5]+4294588738&4294967295,S=N+(I<<4&4294967295|I>>>28),I=M+(S^N^_)+D[8]+2272392833&4294967295,M=S+(I<<11&4294967295|I>>>21),I=_+(M^S^N)+D[11]+1839030562&4294967295,_=M+(I<<16&4294967295|I>>>16),I=N+(_^M^S)+D[14]+4259657740&4294967295,N=_+(I<<23&4294967295|I>>>9),I=S+(N^_^M)+D[1]+2763975236&4294967295,S=N+(I<<4&4294967295|I>>>28),I=M+(S^N^_)+D[4]+1272893353&4294967295,M=S+(I<<11&4294967295|I>>>21),I=_+(M^S^N)+D[7]+4139469664&4294967295,_=M+(I<<16&4294967295|I>>>16),I=N+(_^M^S)+D[10]+3200236656&4294967295,N=_+(I<<23&4294967295|I>>>9),I=S+(N^_^M)+D[13]+681279174&4294967295,S=N+(I<<4&4294967295|I>>>28),I=M+(S^N^_)+D[0]+3936430074&4294967295,M=S+(I<<11&4294967295|I>>>21),I=_+(M^S^N)+D[3]+3572445317&4294967295,_=M+(I<<16&4294967295|I>>>16),I=N+(_^M^S)+D[6]+76029189&4294967295,N=_+(I<<23&4294967295|I>>>9),I=S+(N^_^M)+D[9]+3654602809&4294967295,S=N+(I<<4&4294967295|I>>>28),I=M+(S^N^_)+D[12]+3873151461&4294967295,M=S+(I<<11&4294967295|I>>>21),I=_+(M^S^N)+D[15]+530742520&4294967295,_=M+(I<<16&4294967295|I>>>16),I=N+(_^M^S)+D[2]+3299628645&4294967295,N=_+(I<<23&4294967295|I>>>9),I=S+(_^(N|~M))+D[0]+4096336452&4294967295,S=N+(I<<6&4294967295|I>>>26),I=M+(N^(S|~_))+D[7]+1126891415&4294967295,M=S+(I<<10&4294967295|I>>>22),I=_+(S^(M|~N))+D[14]+2878612391&4294967295,_=M+(I<<15&4294967295|I>>>17),I=N+(M^(_|~S))+D[5]+4237533241&4294967295,N=_+(I<<21&4294967295|I>>>11),I=S+(_^(N|~M))+D[12]+1700485571&4294967295,S=N+(I<<6&4294967295|I>>>26),I=M+(N^(S|~_))+D[3]+2399980690&4294967295,M=S+(I<<10&4294967295|I>>>22),I=_+(S^(M|~N))+D[10]+4293915773&4294967295,_=M+(I<<15&4294967295|I>>>17),I=N+(M^(_|~S))+D[1]+2240044497&4294967295,N=_+(I<<21&4294967295|I>>>11),I=S+(_^(N|~M))+D[8]+1873313359&4294967295,S=N+(I<<6&4294967295|I>>>26),I=M+(N^(S|~_))+D[15]+4264355552&4294967295,M=S+(I<<10&4294967295|I>>>22),I=_+(S^(M|~N))+D[6]+2734768916&4294967295,_=M+(I<<15&4294967295|I>>>17),I=N+(M^(_|~S))+D[13]+1309151649&4294967295,N=_+(I<<21&4294967295|I>>>11),I=S+(_^(N|~M))+D[4]+4149444226&4294967295,S=N+(I<<6&4294967295|I>>>26),I=M+(N^(S|~_))+D[11]+3174756917&4294967295,M=S+(I<<10&4294967295|I>>>22),I=_+(S^(M|~N))+D[2]+718787259&4294967295,_=M+(I<<15&4294967295|I>>>17),I=N+(M^(_|~S))+D[9]+3951481745&4294967295,T.g[0]=T.g[0]+S&4294967295,T.g[1]=T.g[1]+(_+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+_&4294967295,T.g[3]=T.g[3]+M&4294967295}n.prototype.v=function(T,S){S===void 0&&(S=T.length);const N=S-this.blockSize,D=this.C;let _=this.h,M=0;for(;M<S;){if(_==0)for(;M<=N;)i(this,T,M),M+=this.blockSize;if(typeof T=="string"){for(;M<S;)if(D[_++]=T.charCodeAt(M++),_==this.blockSize){i(this,D),_=0;break}}else for(;M<S;)if(D[_++]=T[M++],_==this.blockSize){i(this,D),_=0;break}}this.h=_,this.o+=S},n.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var S=1;S<T.length-8;++S)T[S]=0;S=this.o*8;for(var N=T.length-8;N<T.length;++N)T[N]=S&255,S/=256;for(this.v(T),T=Array(16),S=0,N=0;N<4;++N)for(let D=0;D<32;D+=8)T[S++]=this.g[N]>>>D&255;return T};function s(T,S){var N=o;return Object.prototype.hasOwnProperty.call(N,T)?N[T]:N[T]=S(T)}function a(T,S){this.h=S;const N=[];let D=!0;for(let _=T.length-1;_>=0;_--){const M=T[_]|0;D&&M==S||(N[_]=M,D=!1)}this.g=N}var o={};function l(T){return-128<=T&&T<128?s(T,function(S){return new a([S|0],S<0?-1:0)}):new a([T|0],T<0?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return h;if(T<0)return b(u(-T));const S=[];let N=1;for(let D=0;T>=N;D++)S[D]=T/N|0,N*=4294967296;return new a(S,0)}function c(T,S){if(T.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(T.charAt(0)=="-")return b(c(T.substring(1),S));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=u(Math.pow(S,8));let D=h;for(let M=0;M<T.length;M+=8){var _=Math.min(8,T.length-M);const I=parseInt(T.substring(M,M+_),S);_<8?(_=u(Math.pow(S,_)),D=D.j(_).add(u(I))):(D=D.j(N),D=D.add(u(I)))}return D}var h=l(0),d=l(1),f=l(16777216);r=a.prototype,r.m=function(){if(g(this))return-b(this).m();let T=0,S=1;for(let N=0;N<this.g.length;N++){const D=this.i(N);T+=(D>=0?D:4294967296+D)*S,S*=4294967296}return T},r.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(p(this))return"0";if(g(this))return"-"+b(this).toString(T);const S=u(Math.pow(T,6));var N=this;let D="";for(;;){const _=E(N,S).g;N=v(N,_.j(S));let M=((N.g.length>0?N.g[0]:N.h)>>>0).toString(T);if(N=_,p(N))return M+D;for(;M.length<6;)M="0"+M;D=M+D}},r.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function p(T){if(T.h!=0)return!1;for(let S=0;S<T.g.length;S++)if(T.g[S]!=0)return!1;return!0}function g(T){return T.h==-1}r.l=function(T){return T=v(this,T),g(T)?-1:p(T)?0:1};function b(T){const S=T.g.length,N=[];for(let D=0;D<S;D++)N[D]=~T.g[D];return new a(N,~T.h).add(d)}r.abs=function(){return g(this)?b(this):this},r.add=function(T){const S=Math.max(this.g.length,T.g.length),N=[];let D=0;for(let _=0;_<=S;_++){let M=D+(this.i(_)&65535)+(T.i(_)&65535),I=(M>>>16)+(this.i(_)>>>16)+(T.i(_)>>>16);D=I>>>16,M&=65535,I&=65535,N[_]=I<<16|M}return new a(N,N[N.length-1]&-2147483648?-1:0)};function v(T,S){return T.add(b(S))}r.j=function(T){if(p(this)||p(T))return h;if(g(this))return g(T)?b(this).j(b(T)):b(b(this).j(T));if(g(T))return b(this.j(b(T)));if(this.l(f)<0&&T.l(f)<0)return u(this.m()*T.m());const S=this.g.length+T.g.length,N=[];for(var D=0;D<2*S;D++)N[D]=0;for(D=0;D<this.g.length;D++)for(let _=0;_<T.g.length;_++){const M=this.i(D)>>>16,I=this.i(D)&65535,V=T.i(_)>>>16,q=T.i(_)&65535;N[2*D+2*_]+=I*q,x(N,2*D+2*_),N[2*D+2*_+1]+=M*q,x(N,2*D+2*_+1),N[2*D+2*_+1]+=I*V,x(N,2*D+2*_+1),N[2*D+2*_+2]+=M*V,x(N,2*D+2*_+2)}for(T=0;T<S;T++)N[T]=N[2*T+1]<<16|N[2*T];for(T=S;T<2*S;T++)N[T]=0;return new a(N,0)};function x(T,S){for(;(T[S]&65535)!=T[S];)T[S+1]+=T[S]>>>16,T[S]&=65535,S++}function y(T,S){this.g=T,this.h=S}function E(T,S){if(p(S))throw Error("division by zero");if(p(T))return new y(h,h);if(g(T))return S=E(b(T),S),new y(b(S.g),b(S.h));if(g(S))return S=E(T,b(S)),new y(b(S.g),S.h);if(T.g.length>30){if(g(T)||g(S))throw Error("slowDivide_ only works with positive integers.");for(var N=d,D=S;D.l(T)<=0;)N=w(N),D=w(D);var _=A(N,1),M=A(D,1);for(D=A(D,2),N=A(N,2);!p(D);){var I=M.add(D);I.l(T)<=0&&(_=_.add(N),M=I),D=A(D,1),N=A(N,1)}return S=v(T,_.j(S)),new y(_,S)}for(_=h;T.l(S)>=0;){for(N=Math.max(1,Math.floor(T.m()/S.m())),D=Math.ceil(Math.log(N)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),M=u(N),I=M.j(S);g(I)||I.l(T)>0;)N-=D,M=u(N),I=M.j(S);p(M)&&(M=d),_=_.add(M),T=v(T,I)}return new y(_,T)}r.B=function(T){return E(this,T).h},r.and=function(T){const S=Math.max(this.g.length,T.g.length),N=[];for(let D=0;D<S;D++)N[D]=this.i(D)&T.i(D);return new a(N,this.h&T.h)},r.or=function(T){const S=Math.max(this.g.length,T.g.length),N=[];for(let D=0;D<S;D++)N[D]=this.i(D)|T.i(D);return new a(N,this.h|T.h)},r.xor=function(T){const S=Math.max(this.g.length,T.g.length),N=[];for(let D=0;D<S;D++)N[D]=this.i(D)^T.i(D);return new a(N,this.h^T.h)};function w(T){const S=T.g.length+1,N=[];for(let D=0;D<S;D++)N[D]=T.i(D)<<1|T.i(D-1)>>>31;return new a(N,T.h)}function A(T,S){const N=S>>5;S%=32;const D=T.g.length-N,_=[];for(let M=0;M<D;M++)_[M]=S>0?T.i(M+N)>>>S|T.i(M+N+1)<<32-S:T.i(M+N);return new a(_,T.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,Oj=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=c,ld=a}).apply(typeof j4<"u"?j4:typeof self<"u"?self:typeof window<"u"?window:{});var J_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bj,Xy,Lj,JA,_M,$j,Vj,Uj;(function(){var r,e=Object.defineProperty;function t(C){C=[typeof globalThis=="object"&&globalThis,C,typeof window=="object"&&window,typeof self=="object"&&self,typeof J_=="object"&&J_];for(var F=0;F<C.length;++F){var j=C[F];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var n=t(this);function i(C,F){if(F)e:{var j=n;C=C.split(".");for(var Z=0;Z<C.length-1;Z++){var ve=C[Z];if(!(ve in j))break e;j=j[ve]}C=C[C.length-1],Z=j[C],F=F(Z),F!=Z&&F!=null&&e(j,C,{configurable:!0,writable:!0,value:F})}}i("Symbol.dispose",function(C){return C||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(C){return C||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(C){return C||function(F){var j=[],Z;for(Z in F)Object.prototype.hasOwnProperty.call(F,Z)&&j.push([Z,F[Z]]);return j}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function o(C){var F=typeof C;return F=="object"&&C!=null||F=="function"}function l(C,F,j){return C.call.apply(C.bind,arguments)}function u(C,F,j){return u=l,u.apply(null,arguments)}function c(C,F){var j=Array.prototype.slice.call(arguments,1);return function(){var Z=j.slice();return Z.push.apply(Z,arguments),C.apply(this,Z)}}function h(C,F){function j(){}j.prototype=F.prototype,C.Z=F.prototype,C.prototype=new j,C.prototype.constructor=C,C.Ob=function(Z,ve,_e){for(var Le=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)Le[Ot-2]=arguments[Ot];return F.prototype[ve].apply(Z,Le)}}var d=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?C=>C&&AsyncContext.Snapshot.wrap(C):C=>C;function f(C){const F=C.length;if(F>0){const j=Array(F);for(let Z=0;Z<F;Z++)j[Z]=C[Z];return j}return[]}function p(C,F){for(let Z=1;Z<arguments.length;Z++){const ve=arguments[Z];var j=typeof ve;if(j=j!="object"?j:ve?Array.isArray(ve)?"array":j:"null",j=="array"||j=="object"&&typeof ve.length=="number"){j=C.length||0;const _e=ve.length||0;C.length=j+_e;for(let Le=0;Le<_e;Le++)C[j+Le]=ve[Le]}else C.push(ve)}}class g{constructor(F,j){this.i=F,this.j=j,this.h=0,this.g=null}get(){let F;return this.h>0?(this.h--,F=this.g,this.g=F.next,F.next=null):F=this.i(),F}}function b(C){a.setTimeout(()=>{throw C},0)}function v(){var C=T;let F=null;return C.g&&(F=C.g,C.g=C.g.next,C.g||(C.h=null),F.next=null),F}class x{constructor(){this.h=this.g=null}add(F,j){const Z=y.get();Z.set(F,j),this.h?this.h.next=Z:this.g=Z,this.h=Z}}var y=new g(()=>new E,C=>C.reset());class E{constructor(){this.next=this.g=this.h=null}set(F,j){this.h=F,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let w,A=!1,T=new x,S=()=>{const C=Promise.resolve(void 0);w=()=>{C.then(N)}};function N(){for(var C;C=v();){try{C.h.call(C.g)}catch(j){b(j)}var F=y;F.j(C),F.h<100&&(F.h++,C.next=F.g,F.g=C)}A=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _(C,F){this.type=C,this.g=this.target=F,this.defaultPrevented=!1}_.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var C=!1,F=Object.defineProperty({},"passive",{get:function(){C=!0}});try{const j=()=>{};a.addEventListener("test",j,F),a.removeEventListener("test",j,F)}catch{}return C}();function I(C){return/^[\s\xa0]*$/.test(C)}function V(C,F){_.call(this,C?C.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,C&&this.init(C,F)}h(V,_),V.prototype.init=function(C,F){const j=this.type=C.type,Z=C.changedTouches&&C.changedTouches.length?C.changedTouches[0]:null;this.target=C.target||C.srcElement,this.g=F,F=C.relatedTarget,F||(j=="mouseover"?F=C.fromElement:j=="mouseout"&&(F=C.toElement)),this.relatedTarget=F,Z?(this.clientX=Z.clientX!==void 0?Z.clientX:Z.pageX,this.clientY=Z.clientY!==void 0?Z.clientY:Z.pageY,this.screenX=Z.screenX||0,this.screenY=Z.screenY||0):(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0),this.button=C.button,this.key=C.key||"",this.ctrlKey=C.ctrlKey,this.altKey=C.altKey,this.shiftKey=C.shiftKey,this.metaKey=C.metaKey,this.pointerId=C.pointerId||0,this.pointerType=C.pointerType,this.state=C.state,this.i=C,C.defaultPrevented&&V.Z.h.call(this)},V.prototype.h=function(){V.Z.h.call(this);const C=this.i;C.preventDefault?C.preventDefault():C.returnValue=!1};var q="closure_listenable_"+(Math.random()*1e6|0),P=0;function L(C,F,j,Z,ve){this.listener=C,this.proxy=null,this.src=F,this.type=j,this.capture=!!Z,this.ha=ve,this.key=++P,this.da=this.fa=!1}function $(C){C.da=!0,C.listener=null,C.proxy=null,C.src=null,C.ha=null}function z(C,F,j){for(const Z in C)F.call(j,C[Z],Z,C)}function K(C,F){for(const j in C)F.call(void 0,C[j],j,C)}function re(C){const F={};for(const j in C)F[j]=C[j];return F}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(C,F){let j,Z;for(let ve=1;ve<arguments.length;ve++){Z=arguments[ve];for(j in Z)C[j]=Z[j];for(let _e=0;_e<Q.length;_e++)j=Q[_e],Object.prototype.hasOwnProperty.call(Z,j)&&(C[j]=Z[j])}}function te(C){this.src=C,this.g={},this.h=0}te.prototype.add=function(C,F,j,Z,ve){const _e=C.toString();C=this.g[_e],C||(C=this.g[_e]=[],this.h++);const Le=de(C,F,Z,ve);return Le>-1?(F=C[Le],j||(F.fa=!1)):(F=new L(F,this.src,_e,!!Z,ve),F.fa=j,C.push(F)),F};function W(C,F){const j=F.type;if(j in C.g){var Z=C.g[j],ve=Array.prototype.indexOf.call(Z,F,void 0),_e;(_e=ve>=0)&&Array.prototype.splice.call(Z,ve,1),_e&&($(F),C.g[j].length==0&&(delete C.g[j],C.h--))}}function de(C,F,j,Z){for(let ve=0;ve<C.length;++ve){const _e=C[ve];if(!_e.da&&_e.listener==F&&_e.capture==!!j&&_e.ha==Z)return ve}return-1}var fe="closure_lm_"+(Math.random()*1e6|0),ne={};function X(C,F,j,Z,ve){if(Array.isArray(F)){for(let _e=0;_e<F.length;_e++)X(C,F[_e],j,Z,ve);return null}return j=Be(j),C&&C[q]?C.J(F,j,o(Z)?!!Z.capture:!1,ve):se(C,F,j,!1,Z,ve)}function se(C,F,j,Z,ve,_e){if(!F)throw Error("Invalid event type");const Le=o(ve)?!!ve.capture:!!ve;let Ot=Ue(C);if(Ot||(C[fe]=Ot=new te(C)),j=Ot.add(F,j,Z,Le,_e),j.proxy)return j;if(Z=me(),j.proxy=Z,Z.src=C,Z.listener=j,C.addEventListener)M||(ve=Le),ve===void 0&&(ve=!1),C.addEventListener(F.toString(),Z,ve);else if(C.attachEvent)C.attachEvent(ye(F.toString()),Z);else if(C.addListener&&C.removeListener)C.addListener(Z);else throw Error("addEventListener and attachEvent are unavailable.");return j}function me(){function C(j){return F.call(C.src,C.listener,j)}const F=Ie;return C}function ue(C,F,j,Z,ve){if(Array.isArray(F))for(var _e=0;_e<F.length;_e++)ue(C,F[_e],j,Z,ve);else Z=o(Z)?!!Z.capture:!!Z,j=Be(j),C&&C[q]?(C=C.i,_e=String(F).toString(),_e in C.g&&(F=C.g[_e],j=de(F,j,Z,ve),j>-1&&($(F[j]),Array.prototype.splice.call(F,j,1),F.length==0&&(delete C.g[_e],C.h--)))):C&&(C=Ue(C))&&(F=C.g[F.toString()],C=-1,F&&(C=de(F,j,Z,ve)),(j=C>-1?F[C]:null)&&be(j))}function be(C){if(typeof C!="number"&&C&&!C.da){var F=C.src;if(F&&F[q])W(F.i,C);else{var j=C.type,Z=C.proxy;F.removeEventListener?F.removeEventListener(j,Z,C.capture):F.detachEvent?F.detachEvent(ye(j),Z):F.addListener&&F.removeListener&&F.removeListener(Z),(j=Ue(F))?(W(j,C),j.h==0&&(j.src=null,F[fe]=null)):$(C)}}}function ye(C){return C in ne?ne[C]:ne[C]="on"+C}function Ie(C,F){if(C.da)C=!0;else{F=new V(F,this);const j=C.listener,Z=C.ha||C.src;C.fa&&be(C),C=j.call(Z,F)}return C}function Ue(C){return C=C[fe],C instanceof te?C:null}var We="__closure_events_fn_"+(Math.random()*1e9>>>0);function Be(C){return typeof C=="function"?C:(C[We]||(C[We]=function(F){return C.handleEvent(F)}),C[We])}function $e(){D.call(this),this.i=new te(this),this.M=this,this.G=null}h($e,D),$e.prototype[q]=!0,$e.prototype.removeEventListener=function(C,F,j,Z){ue(this,C,F,j,Z)};function He(C,F){var j,Z=C.G;if(Z)for(j=[];Z;Z=Z.G)j.push(Z);if(C=C.M,Z=F.type||F,typeof F=="string")F=new _(F,C);else if(F instanceof _)F.target=F.target||C;else{var ve=F;F=new _(Z,C),O(F,ve)}ve=!0;let _e,Le;if(j)for(Le=j.length-1;Le>=0;Le--)_e=F.g=j[Le],ve=ee(_e,Z,!0,F)&&ve;if(_e=F.g=C,ve=ee(_e,Z,!0,F)&&ve,ve=ee(_e,Z,!1,F)&&ve,j)for(Le=0;Le<j.length;Le++)_e=F.g=j[Le],ve=ee(_e,Z,!1,F)&&ve}$e.prototype.N=function(){if($e.Z.N.call(this),this.i){var C=this.i;for(const F in C.g){const j=C.g[F];for(let Z=0;Z<j.length;Z++)$(j[Z]);delete C.g[F],C.h--}}this.G=null},$e.prototype.J=function(C,F,j,Z){return this.i.add(String(C),F,!1,j,Z)},$e.prototype.K=function(C,F,j,Z){return this.i.add(String(C),F,!0,j,Z)};function ee(C,F,j,Z){if(F=C.i.g[String(F)],!F)return!0;F=F.concat();let ve=!0;for(let _e=0;_e<F.length;++_e){const Le=F[_e];if(Le&&!Le.da&&Le.capture==j){const Ot=Le.listener,Fn=Le.ha||Le.src;Le.fa&&W(C.i,Le),ve=Ot.call(Fn,Z)!==!1&&ve}}return ve&&!Z.defaultPrevented}function le(C,F){if(typeof C!="function")if(C&&typeof C.handleEvent=="function")C=u(C.handleEvent,C);else throw Error("Invalid listener argument");return Number(F)>2147483647?-1:a.setTimeout(C,F||0)}function G(C){C.g=le(()=>{C.g=null,C.i&&(C.i=!1,G(C))},C.l);const F=C.h;C.h=null,C.m.apply(null,F)}class J extends D{constructor(F,j){super(),this.m=F,this.l=j,this.h=null,this.i=!1,this.g=null}j(F){this.h=arguments,this.g?this.i=!0:G(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ae(C){D.call(this),this.h=C,this.g={}}h(ae,D);var ce=[];function ge(C){z(C.g,function(F,j){this.g.hasOwnProperty(j)&&be(F)},C),C.g={}}ae.prototype.N=function(){ae.Z.N.call(this),ge(this)},ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pe=a.JSON.stringify,Ne=a.JSON.parse,Ee=class{stringify(C){return a.JSON.stringify(C,void 0)}parse(C){return a.JSON.parse(C,void 0)}};function Oe(){}function Se(){}var et={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ct(){_.call(this,"d")}h(Ct,_);function zt(){_.call(this,"c")}h(zt,_);var lt={},pr=null;function B(){return pr=pr||new $e}lt.Ia="serverreachability";function oe(C){_.call(this,lt.Ia,C)}h(oe,_);function we(C){const F=B();He(F,new oe(F))}lt.STAT_EVENT="statevent";function Me(C,F){_.call(this,lt.STAT_EVENT,C),this.stat=F}h(Me,_);function ze(C){const F=B();He(F,new Me(F,C))}lt.Ja="timingevent";function ut(C,F){_.call(this,lt.Ja,C),this.size=F}h(ut,_);function gn(C,F){if(typeof C!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){C()},F)}function Pa(){this.g=!0}Pa.prototype.ua=function(){this.g=!1};function cy(C,F,j,Z,ve,_e){C.info(function(){if(C.g)if(_e){var Le="",Ot=_e.split("&");for(let Er=0;Er<Ot.length;Er++){var Fn=Ot[Er].split("=");if(Fn.length>1){const Jn=Fn[0];Fn=Fn[1];const sl=Jn.split("_");Le=sl.length>=2&&sl[1]=="type"?Le+(Jn+"="+Fn+"&"):Le+(Jn+"=redacted&")}}}else Le=null;else Le=_e;return"XMLHTTP REQ ("+Z+") [attempt "+ve+"]: "+F+`
`+j+`
`+Le})}function g2(C,F,j,Z,ve,_e,Le){C.info(function(){return"XMLHTTP RESP ("+Z+") [ attempt "+ve+"]: "+F+`
`+j+`
`+_e+" "+Le})}function Ic(C,F,j,Z){C.info(function(){return"XMLHTTP TEXT ("+F+"): "+y2(C,j)+(Z?" "+Z:"")})}function v2(C,F){C.info(function(){return"TIMEOUT: "+F})}Pa.prototype.info=function(){};function y2(C,F){if(!C.g)return F;if(!F)return null;try{const _e=JSON.parse(F);if(_e){for(C=0;C<_e.length;C++)if(Array.isArray(_e[C])){var j=_e[C];if(!(j.length<2)){var Z=j[1];if(Array.isArray(Z)&&!(Z.length<1)){var ve=Z[0];if(ve!="noop"&&ve!="stop"&&ve!="close")for(let Le=1;Le<Z.length;Le++)Z[Le]=""}}}}return pe(_e)}catch{return F}}var Dp={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},g_={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},v_;function hy(){}h(hy,Oe),hy.prototype.g=function(){return new XMLHttpRequest},v_=new hy;function Qd(C){return encodeURIComponent(String(C))}function b2(C){var F=1;C=C.split(":");const j=[];for(;F>0&&C.length;)j.push(C.shift()),F--;return C.length&&j.push(C.join(":")),j}function nl(C,F,j,Z){this.j=C,this.i=F,this.l=j,this.S=Z||1,this.V=new ae(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new y_}function y_(){this.i=null,this.g="",this.h=!1}var b_={},dy={};function fy(C,F,j){C.M=1,C.A=E_(il(F)),C.u=j,C.R=!0,w_(C,null)}function w_(C,F){C.F=Date.now(),Mp(C),C.B=il(C.A);var j=C.B,Z=C.S;Array.isArray(Z)||(Z=[String(Z)]),RO(j.i,"t",Z),C.C=0,j=C.j.L,C.h=new y_,C.g=QO(C.j,j?F:null,!C.u),C.P>0&&(C.O=new J(u(C.Y,C,C.g),C.P)),F=C.V,j=C.g,Z=C.ba;var ve="readystatechange";Array.isArray(ve)||(ve&&(ce[0]=ve.toString()),ve=ce);for(let _e=0;_e<ve.length;_e++){const Le=X(j,ve[_e],Z||F.handleEvent,!1,F.h||F);if(!Le)break;F.g[Le.key]=Le}F=C.J?re(C.J):{},C.u?(C.v||(C.v="POST"),F["Content-Type"]="application/x-www-form-urlencoded",C.g.ea(C.B,C.v,C.u,F)):(C.v="GET",C.g.ea(C.B,C.v,null,F)),we(),cy(C.i,C.v,C.B,C.l,C.S,C.u)}nl.prototype.ba=function(C){C=C.target;const F=this.O;F&&Fc(C)==3?F.j():this.Y(C)},nl.prototype.Y=function(C){try{if(C==this.g)e:{const Ot=Fc(this.g),Fn=this.g.ya(),Er=this.g.ca();if(!(Ot<3)&&(Ot!=3||this.g&&(this.h.h||this.g.la()||VO(this.g)))){this.K||Ot!=4||Fn==7||(Fn==8||Er<=0?we(3):we(2)),my(this);var F=this.g.ca();this.X=F;var j=w2(this);if(this.o=F==200,g2(this.i,this.v,this.B,this.l,this.S,Ot,F),this.o){if(this.U&&!this.L){t:{if(this.g){var Z,ve=this.g;if((Z=ve.g?ve.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Z)){var _e=Z;break t}}_e=null}if(C=_e)Ic(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Zt(this,C);else{this.o=!1,this.m=3,ze(12),Xs(this),Jd(this);break e}}if(this.R){C=!0;let Jn;for(;!this.K&&this.C<j.length;)if(Jn=x2(this,j),Jn==dy){Ot==4&&(this.m=4,ze(14),C=!1),Ic(this.i,this.l,null,"[Incomplete Response]");break}else if(Jn==b_){this.m=4,ze(15),Ic(this.i,this.l,j,"[Invalid Chunk]"),C=!1;break}else Ic(this.i,this.l,Jn,null),Zt(this,Jn);if(x_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||j.length!=0||this.h.h||(this.m=1,ze(16),C=!1),this.o=this.o&&C,!C)Ic(this.i,this.l,j,"[Invalid Chunked Response]"),Xs(this),Jd(this);else if(j.length>0&&!this.W){this.W=!0;var Le=this.j;Le.g==this&&Le.aa&&!Le.P&&(Le.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),N2(Le),Le.P=!0,ze(11))}}else Ic(this.i,this.l,j,null),Zt(this,j);Ot==4&&Xs(this),this.o&&!this.K&&(Ot==4?WO(this.j,this):(this.o=!1,Mp(this)))}else TQ(this.g),F==400&&j.indexOf("Unknown SID")>0?(this.m=3,ze(12)):(this.m=0,ze(13)),Xs(this),Jd(this)}}}catch{}finally{}};function w2(C){if(!x_(C))return C.g.la();const F=VO(C.g);if(F==="")return"";let j="";const Z=F.length,ve=Fc(C.g)==4;if(!C.h.i){if(typeof TextDecoder>"u")return Xs(C),Jd(C),"";C.h.i=new a.TextDecoder}for(let _e=0;_e<Z;_e++)C.h.h=!0,j+=C.h.i.decode(F[_e],{stream:!(ve&&_e==Z-1)});return F.length=0,C.h.g+=j,C.C=0,C.h.g}function x_(C){return C.g?C.v=="GET"&&C.M!=2&&C.j.Aa:!1}function x2(C,F){var j=C.C,Z=F.indexOf(`
`,j);return Z==-1?dy:(j=Number(F.substring(j,Z)),isNaN(j)?b_:(Z+=1,Z+j>F.length?dy:(F=F.slice(Z,Z+j),C.C=Z+j,F)))}nl.prototype.cancel=function(){this.K=!0,Xs(this)};function Mp(C){C.T=Date.now()+C.H,__(C,C.H)}function __(C,F){if(C.D!=null)throw Error("WatchDog timer not null");C.D=gn(u(C.aa,C),F)}function my(C){C.D&&(a.clearTimeout(C.D),C.D=null)}nl.prototype.aa=function(){this.D=null;const C=Date.now();C-this.T>=0?(v2(this.i,this.B),this.M!=2&&(we(),ze(17)),Xs(this),this.m=2,Jd(this)):__(this,this.T-C)};function Jd(C){C.j.I==0||C.K||WO(C.j,C)}function Xs(C){my(C);var F=C.O;F&&typeof F.dispose=="function"&&F.dispose(),C.O=null,ge(C.V),C.g&&(F=C.g,C.g=null,F.abort(),F.dispose())}function Zt(C,F){try{var j=C.j;if(j.I!=0&&(j.g==C||py(j.h,C))){if(!C.L&&py(j.h,C)&&j.I==3){try{var Z=j.Ba.g.parse(F)}catch{Z=null}if(Array.isArray(Z)&&Z.length==3){var ve=Z;if(ve[0]==0){e:if(!j.v){if(j.g)if(j.g.F+3e3<C.F)D_(j),C_(j);else break e;C2(j),ze(18)}}else j.xa=ve[1],0<j.xa-j.K&&ve[2]<37500&&j.F&&j.A==0&&!j.C&&(j.C=gn(u(j.Va,j),6e3));Pc(j.h)<=1&&j.ta&&(j.ta=void 0)}else tf(j,11)}else if((C.L||j.g==C)&&D_(j),!I(F))for(ve=j.Ba.g.parse(F),F=0;F<ve.length;F++){let Er=ve[F];const Jn=Er[0];if(!(Jn<=j.K))if(j.K=Jn,Er=Er[1],j.I==2)if(Er[0]=="c"){j.M=Er[1],j.ba=Er[2];const sl=Er[3];sl!=null&&(j.ka=sl,j.j.info("VER="+j.ka));const rf=Er[4];rf!=null&&(j.za=rf,j.j.info("SVER="+j.za));const Oc=Er[5];Oc!=null&&typeof Oc=="number"&&Oc>0&&(Z=1.5*Oc,j.O=Z,j.j.info("backChannelRequestTimeoutMs_="+Z)),Z=j;const Bc=C.g;if(Bc){const I_=Bc.g?Bc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(I_){var _e=Z.h;_e.g||I_.indexOf("spdy")==-1&&I_.indexOf("quic")==-1&&I_.indexOf("h2")==-1||(_e.j=_e.l,_e.g=new Set,_e.h&&(_2(_e,_e.h),_e.h=null))}if(Z.G){const D2=Bc.g?Bc.g.getResponseHeader("X-HTTP-Session-Id"):null;D2&&(Z.wa=D2,Or(Z.J,Z.G,D2))}}j.I=3,j.l&&j.l.ra(),j.aa&&(j.T=Date.now()-C.F,j.j.info("Handshake RTT: "+j.T+"ms")),Z=j;var Le=C;if(Z.na=YO(Z,Z.L?Z.ba:null,Z.W),Le.L){TO(Z.h,Le);var Ot=Le,Fn=Z.O;Fn&&(Ot.H=Fn),Ot.D&&(my(Ot),Mp(Ot)),Z.g=Le}else HO(Z);j.i.length>0&&N_(j)}else Er[0]!="stop"&&Er[0]!="close"||tf(j,7);else j.I==3&&(Er[0]=="stop"||Er[0]=="close"?Er[0]=="stop"?tf(j,7):T2(j):Er[0]!="noop"&&j.l&&j.l.qa(Er),j.A=0)}}we(4)}catch{}}var Oi=class{constructor(C,F){this.g=C,this.map=F}};function A_(C){this.l=C||10,a.PerformanceNavigationTiming?(C=a.performance.getEntriesByType("navigation"),C=C.length>0&&(C[0].nextHopProtocol=="hq"||C[0].nextHopProtocol=="h2")):C=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=C?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Zd(C){return C.h?!0:C.g?C.g.size>=C.j:!1}function Pc(C){return C.h?1:C.g?C.g.size:0}function py(C,F){return C.h?C.h==F:C.g?C.g.has(F):!1}function _2(C,F){C.g?C.g.add(F):C.h=F}function TO(C,F){C.h&&C.h==F?C.h=null:C.g&&C.g.has(F)&&C.g.delete(F)}A_.prototype.cancel=function(){if(this.i=CO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const C of this.g.values())C.cancel();this.g.clear()}};function CO(C){if(C.h!=null)return C.i.concat(C.h.G);if(C.g!=null&&C.g.size!==0){let F=C.i;for(const j of C.g.values())F=F.concat(j.G);return F}return f(C.i)}var NO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mQ(C,F){if(C){C=C.split("&");for(let j=0;j<C.length;j++){const Z=C[j].indexOf("=");let ve,_e=null;Z>=0?(ve=C[j].substring(0,Z),_e=C[j].substring(Z+1)):ve=C[j],F(ve,_e?decodeURIComponent(_e.replace(/\+/g," ")):"")}}}function Rc(C){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let F;C instanceof Rc?(this.l=C.l,gy(this,C.j),this.o=C.o,this.g=C.g,vy(this,C.u),this.h=C.h,A2(this,kO(C.i)),this.m=C.m):C&&(F=String(C).match(NO))?(this.l=!1,gy(this,F[1]||"",!0),this.o=yy(F[2]||""),this.g=yy(F[3]||"",!0),vy(this,F[4]),this.h=yy(F[5]||"",!0),A2(this,F[6]||"",!0),this.m=yy(F[7]||"")):(this.l=!1,this.i=new wy(null,this.l))}Rc.prototype.toString=function(){const C=[];var F=this.j;F&&C.push(by(F,DO,!0),":");var j=this.g;return(j||F=="file")&&(C.push("//"),(F=this.o)&&C.push(by(F,DO,!0),"@"),C.push(Qd(j).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.u,j!=null&&C.push(":",String(j))),(j=this.h)&&(this.g&&j.charAt(0)!="/"&&C.push("/"),C.push(by(j,j.charAt(0)=="/"?vQ:gQ,!0))),(j=this.i.toString())&&C.push("?",j),(j=this.m)&&C.push("#",by(j,bQ)),C.join("")},Rc.prototype.resolve=function(C){const F=il(this);let j=!!C.j;j?gy(F,C.j):j=!!C.o,j?F.o=C.o:j=!!C.g,j?F.g=C.g:j=C.u!=null;var Z=C.h;if(j)vy(F,C.u);else if(j=!!C.h){if(Z.charAt(0)!="/")if(this.g&&!this.h)Z="/"+Z;else{var ve=F.h.lastIndexOf("/");ve!=-1&&(Z=F.h.slice(0,ve+1)+Z)}if(ve=Z,ve==".."||ve==".")Z="";else if(ve.indexOf("./")!=-1||ve.indexOf("/.")!=-1){Z=ve.lastIndexOf("/",0)==0,ve=ve.split("/");const _e=[];for(let Le=0;Le<ve.length;){const Ot=ve[Le++];Ot=="."?Z&&Le==ve.length&&_e.push(""):Ot==".."?((_e.length>1||_e.length==1&&_e[0]!="")&&_e.pop(),Z&&Le==ve.length&&_e.push("")):(_e.push(Ot),Z=!0)}Z=_e.join("/")}else Z=ve}return j?F.h=Z:j=C.i.toString()!=="",j?A2(F,kO(C.i)):j=!!C.m,j&&(F.m=C.m),F};function il(C){return new Rc(C)}function gy(C,F,j){C.j=j?yy(F,!0):F,C.j&&(C.j=C.j.replace(/:$/,""))}function vy(C,F){if(F){if(F=Number(F),isNaN(F)||F<0)throw Error("Bad port number "+F);C.u=F}else C.u=null}function A2(C,F,j){F instanceof wy?(C.i=F,wQ(C.i,C.l)):(j||(F=by(F,yQ)),C.i=new wy(F,C.l))}function Or(C,F,j){C.i.set(F,j)}function E_(C){return Or(C,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),C}function yy(C,F){return C?F?decodeURI(C.replace(/%25/g,"%2525")):decodeURIComponent(C):""}function by(C,F,j){return typeof C=="string"?(C=encodeURI(C).replace(F,pQ),j&&(C=C.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C):null}function pQ(C){return C=C.charCodeAt(0),"%"+(C>>4&15).toString(16)+(C&15).toString(16)}var DO=/[#\/\?@]/g,gQ=/[#\?:]/g,vQ=/[#\?]/g,yQ=/[#\?@]/g,bQ=/#/g;function wy(C,F){this.h=this.g=null,this.i=C||null,this.j=!!F}function ef(C){C.g||(C.g=new Map,C.h=0,C.i&&mQ(C.i,function(F,j){C.add(decodeURIComponent(F.replace(/\+/g," ")),j)}))}r=wy.prototype,r.add=function(C,F){ef(this),this.i=null,C=Ip(this,C);let j=this.g.get(C);return j||this.g.set(C,j=[]),j.push(F),this.h+=1,this};function MO(C,F){ef(C),F=Ip(C,F),C.g.has(F)&&(C.i=null,C.h-=C.g.get(F).length,C.g.delete(F))}function IO(C,F){return ef(C),F=Ip(C,F),C.g.has(F)}r.forEach=function(C,F){ef(this),this.g.forEach(function(j,Z){j.forEach(function(ve){C.call(F,ve,Z,this)},this)},this)};function PO(C,F){ef(C);let j=[];if(typeof F=="string")IO(C,F)&&(j=j.concat(C.g.get(Ip(C,F))));else for(C=Array.from(C.g.values()),F=0;F<C.length;F++)j=j.concat(C[F]);return j}r.set=function(C,F){return ef(this),this.i=null,C=Ip(this,C),IO(this,C)&&(this.h-=this.g.get(C).length),this.g.set(C,[F]),this.h+=1,this},r.get=function(C,F){return C?(C=PO(this,C),C.length>0?String(C[0]):F):F};function RO(C,F,j){MO(C,F),j.length>0&&(C.i=null,C.g.set(Ip(C,F),f(j)),C.h+=j.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const C=[],F=Array.from(this.g.keys());for(let Z=0;Z<F.length;Z++){var j=F[Z];const ve=Qd(j);j=PO(this,j);for(let _e=0;_e<j.length;_e++){let Le=ve;j[_e]!==""&&(Le+="="+Qd(j[_e])),C.push(Le)}}return this.i=C.join("&")};function kO(C){const F=new wy;return F.i=C.i,C.g&&(F.g=new Map(C.g),F.h=C.h),F}function Ip(C,F){return F=String(F),C.j&&(F=F.toLowerCase()),F}function wQ(C,F){F&&!C.j&&(ef(C),C.i=null,C.g.forEach(function(j,Z){const ve=Z.toLowerCase();Z!=ve&&(MO(this,Z),RO(this,ve,j))},C)),C.j=F}function xQ(C,F){const j=new Pa;if(a.Image){const Z=new Image;Z.onload=c(kc,j,"TestLoadImage: loaded",!0,F,Z),Z.onerror=c(kc,j,"TestLoadImage: error",!1,F,Z),Z.onabort=c(kc,j,"TestLoadImage: abort",!1,F,Z),Z.ontimeout=c(kc,j,"TestLoadImage: timeout",!1,F,Z),a.setTimeout(function(){Z.ontimeout&&Z.ontimeout()},1e4),Z.src=C}else F(!1)}function _Q(C,F){const j=new Pa,Z=new AbortController,ve=setTimeout(()=>{Z.abort(),kc(j,"TestPingServer: timeout",!1,F)},1e4);fetch(C,{signal:Z.signal}).then(_e=>{clearTimeout(ve),_e.ok?kc(j,"TestPingServer: ok",!0,F):kc(j,"TestPingServer: server error",!1,F)}).catch(()=>{clearTimeout(ve),kc(j,"TestPingServer: error",!1,F)})}function kc(C,F,j,Z,ve){try{ve&&(ve.onload=null,ve.onerror=null,ve.onabort=null,ve.ontimeout=null),Z(j)}catch{}}function AQ(){this.g=new Ee}function E2(C){this.i=C.Sb||null,this.h=C.ab||!1}h(E2,Oe),E2.prototype.g=function(){return new S_(this.i,this.h)};function S_(C,F){$e.call(this),this.H=C,this.o=F,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(S_,$e),r=S_.prototype,r.open=function(C,F){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=C,this.D=F,this.readyState=1,_y(this)},r.send=function(C){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const F={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};C&&(F.body=C),(this.H||a).fetch(new Request(this.D,F)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,xy(this)),this.readyState=0},r.Pa=function(C){if(this.g&&(this.l=C,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=C.headers,this.readyState=2,_y(this)),this.g&&(this.readyState=3,_y(this),this.g)))if(this.responseType==="arraybuffer")C.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in C){if(this.j=C.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;FO(this)}else C.text().then(this.Oa.bind(this),this.ga.bind(this))};function FO(C){C.j.read().then(C.Ma.bind(C)).catch(C.ga.bind(C))}r.Ma=function(C){if(this.g){if(this.o&&C.value)this.response.push(C.value);else if(!this.o){var F=C.value?C.value:new Uint8Array(0);(F=this.B.decode(F,{stream:!C.done}))&&(this.response=this.responseText+=F)}C.done?xy(this):_y(this),this.readyState==3&&FO(this)}},r.Oa=function(C){this.g&&(this.response=this.responseText=C,xy(this))},r.Na=function(C){this.g&&(this.response=C,xy(this))},r.ga=function(){this.g&&xy(this)};function xy(C){C.readyState=4,C.l=null,C.j=null,C.B=null,_y(C)}r.setRequestHeader=function(C,F){this.A.append(C,F)},r.getResponseHeader=function(C){return this.h&&this.h.get(C.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const C=[],F=this.h.entries();for(var j=F.next();!j.done;)j=j.value,C.push(j[0]+": "+j[1]),j=F.next();return C.join(`\r
`)};function _y(C){C.onreadystatechange&&C.onreadystatechange.call(C)}Object.defineProperty(S_.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(C){this.m=C?"include":"same-origin"}});function OO(C){let F="";return z(C,function(j,Z){F+=Z,F+=":",F+=j,F+=`\r
`}),F}function S2(C,F,j){e:{for(Z in j){var Z=!1;break e}Z=!0}Z||(j=OO(j),typeof C=="string"?j!=null&&Qd(j):Or(C,F,j))}function nn(C){$e.call(this),this.headers=new Map,this.L=C||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(nn,$e);var EQ=/^https?$/i,SQ=["POST","PUT"];r=nn.prototype,r.Fa=function(C){this.H=C},r.ea=function(C,F,j,Z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+C);F=F?F.toUpperCase():"GET",this.D=C,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():v_.g(),this.g.onreadystatechange=d(u(this.Ca,this));try{this.B=!0,this.g.open(F,String(C),!0),this.B=!1}catch(_e){BO(this,_e);return}if(C=j||"",j=new Map(this.headers),Z)if(Object.getPrototypeOf(Z)===Object.prototype)for(var ve in Z)j.set(ve,Z[ve]);else if(typeof Z.keys=="function"&&typeof Z.get=="function")for(const _e of Z.keys())j.set(_e,Z.get(_e));else throw Error("Unknown input type for opt_headers: "+String(Z));Z=Array.from(j.keys()).find(_e=>_e.toLowerCase()=="content-type"),ve=a.FormData&&C instanceof a.FormData,!(Array.prototype.indexOf.call(SQ,F,void 0)>=0)||Z||ve||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[_e,Le]of j)this.g.setRequestHeader(_e,Le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(C),this.v=!1}catch(_e){BO(this,_e)}};function BO(C,F){C.h=!1,C.g&&(C.j=!0,C.g.abort(),C.j=!1),C.l=F,C.o=5,LO(C),T_(C)}function LO(C){C.A||(C.A=!0,He(C,"complete"),He(C,"error"))}r.abort=function(C){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=C||7,He(this,"complete"),He(this,"abort"),T_(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),T_(this,!0)),nn.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?$O(this):this.Xa())},r.Xa=function(){$O(this)};function $O(C){if(C.h&&typeof s<"u"){if(C.v&&Fc(C)==4)setTimeout(C.Ca.bind(C),0);else if(He(C,"readystatechange"),Fc(C)==4){C.h=!1;try{const _e=C.ca();e:switch(_e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var F=!0;break e;default:F=!1}var j;if(!(j=F)){var Z;if(Z=_e===0){let Le=String(C.D).match(NO)[1]||null;!Le&&a.self&&a.self.location&&(Le=a.self.location.protocol.slice(0,-1)),Z=!EQ.test(Le?Le.toLowerCase():"")}j=Z}if(j)He(C,"complete"),He(C,"success");else{C.o=6;try{var ve=Fc(C)>2?C.g.statusText:""}catch{ve=""}C.l=ve+" ["+C.ca()+"]",LO(C)}}finally{T_(C)}}}}function T_(C,F){if(C.g){C.m&&(clearTimeout(C.m),C.m=null);const j=C.g;C.g=null,F||He(C,"ready");try{j.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Fc(C){return C.g?C.g.readyState:0}r.ca=function(){try{return Fc(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(C){if(this.g){var F=this.g.responseText;return C&&F.indexOf(C)==0&&(F=F.substring(C.length)),Ne(F)}};function VO(C){try{if(!C.g)return null;if("response"in C.g)return C.g.response;switch(C.F){case"":case"text":return C.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in C.g)return C.g.mozResponseArrayBuffer}return null}catch{return null}}function TQ(C){const F={};C=(C.g&&Fc(C)>=2&&C.g.getAllResponseHeaders()||"").split(`\r
`);for(let Z=0;Z<C.length;Z++){if(I(C[Z]))continue;var j=b2(C[Z]);const ve=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const _e=F[ve]||[];F[ve]=_e,_e.push(j)}K(F,function(Z){return Z.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ay(C,F,j){return j&&j.internalChannelParams&&j.internalChannelParams[C]||F}function UO(C){this.za=0,this.i=[],this.j=new Pa,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ay("failFast",!1,C),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ay("baseRetryDelayMs",5e3,C),this.Za=Ay("retryDelaySeedMs",1e4,C),this.Ta=Ay("forwardChannelMaxRetries",2,C),this.va=Ay("forwardChannelRequestTimeoutMs",2e4,C),this.ma=C&&C.xmlHttpFactory||void 0,this.Ua=C&&C.Rb||void 0,this.Aa=C&&C.useFetchStreams||!1,this.O=void 0,this.L=C&&C.supportsCrossDomainXhr||!1,this.M="",this.h=new A_(C&&C.concurrentRequestLimit),this.Ba=new AQ,this.S=C&&C.fastHandshake||!1,this.R=C&&C.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=C&&C.Pb||!1,C&&C.ua&&this.j.ua(),C&&C.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&C&&C.detectBufferingProxy||!1,this.ia=void 0,C&&C.longPollingTimeout&&C.longPollingTimeout>0&&(this.ia=C.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=UO.prototype,r.ka=8,r.I=1,r.connect=function(C,F,j,Z){ze(0),this.W=C,this.H=F||{},j&&Z!==void 0&&(this.H.OSID=j,this.H.OAID=Z),this.F=this.X,this.J=YO(this,null,this.W),N_(this)};function T2(C){if(zO(C),C.I==3){var F=C.V++,j=il(C.J);if(Or(j,"SID",C.M),Or(j,"RID",F),Or(j,"TYPE","terminate"),Ey(C,j),F=new nl(C,C.j,F),F.M=2,F.A=E_(il(j)),j=!1,a.navigator&&a.navigator.sendBeacon)try{j=a.navigator.sendBeacon(F.A.toString(),"")}catch{}!j&&a.Image&&(new Image().src=F.A,j=!0),j||(F.g=QO(F.j,null),F.g.ea(F.A)),F.F=Date.now(),Mp(F)}XO(C)}function C_(C){C.g&&(N2(C),C.g.cancel(),C.g=null)}function zO(C){C_(C),C.v&&(a.clearTimeout(C.v),C.v=null),D_(C),C.h.cancel(),C.m&&(typeof C.m=="number"&&a.clearTimeout(C.m),C.m=null)}function N_(C){if(!Zd(C.h)&&!C.m){C.m=!0;var F=C.Ea;w||S(),A||(w(),A=!0),T.add(F,C),C.D=0}}function CQ(C,F){return Pc(C.h)>=C.h.j-(C.m?1:0)?!1:C.m?(C.i=F.G.concat(C.i),!0):C.I==1||C.I==2||C.D>=(C.Sa?0:C.Ta)?!1:(C.m=gn(u(C.Ea,C,F),KO(C,C.D)),C.D++,!0)}r.Ea=function(C){if(this.m)if(this.m=null,this.I==1){if(!C){this.V=Math.floor(Math.random()*1e5),C=this.V++;const ve=new nl(this,this.j,C);let _e=this.o;if(this.U&&(_e?(_e=re(_e),O(_e,this.U)):_e=this.U),this.u!==null||this.R||(ve.J=_e,_e=null),this.S)e:{for(var F=0,j=0;j<this.i.length;j++){t:{var Z=this.i[j];if("__data__"in Z.map&&(Z=Z.map.__data__,typeof Z=="string")){Z=Z.length;break t}Z=void 0}if(Z===void 0)break;if(F+=Z,F>4096){F=j;break e}if(F===4096||j===this.i.length-1){F=j+1;break e}}F=1e3}else F=1e3;F=qO(this,ve,F),j=il(this.J),Or(j,"RID",C),Or(j,"CVER",22),this.G&&Or(j,"X-HTTP-Session-Id",this.G),Ey(this,j),_e&&(this.R?F="headers="+Qd(OO(_e))+"&"+F:this.u&&S2(j,this.u,_e)),_2(this.h,ve),this.Ra&&Or(j,"TYPE","init"),this.S?(Or(j,"$req",F),Or(j,"SID","null"),ve.U=!0,fy(ve,j,null)):fy(ve,j,F),this.I=2}}else this.I==3&&(C?jO(this,C):this.i.length==0||Zd(this.h)||jO(this))};function jO(C,F){var j;F?j=F.l:j=C.V++;const Z=il(C.J);Or(Z,"SID",C.M),Or(Z,"RID",j),Or(Z,"AID",C.K),Ey(C,Z),C.u&&C.o&&S2(Z,C.u,C.o),j=new nl(C,C.j,j,C.D+1),C.u===null&&(j.J=C.o),F&&(C.i=F.G.concat(C.i)),F=qO(C,j,1e3),j.H=Math.round(C.va*.5)+Math.round(C.va*.5*Math.random()),_2(C.h,j),fy(j,Z,F)}function Ey(C,F){C.H&&z(C.H,function(j,Z){Or(F,Z,j)}),C.l&&z({},function(j,Z){Or(F,Z,j)})}function qO(C,F,j){j=Math.min(C.i.length,j);const Z=C.l?u(C.l.Ka,C.l,C):null;e:{var ve=C.i;let Ot=-1;for(;;){const Fn=["count="+j];Ot==-1?j>0?(Ot=ve[0].g,Fn.push("ofs="+Ot)):Ot=0:Fn.push("ofs="+Ot);let Er=!0;for(let Jn=0;Jn<j;Jn++){var _e=ve[Jn].g;const sl=ve[Jn].map;if(_e-=Ot,_e<0)Ot=Math.max(0,ve[Jn].g-100),Er=!1;else try{_e="req"+_e+"_"||"";try{var Le=sl instanceof Map?sl:Object.entries(sl);for(const[rf,Oc]of Le){let Bc=Oc;o(Oc)&&(Bc=pe(Oc)),Fn.push(_e+rf+"="+encodeURIComponent(Bc))}}catch(rf){throw Fn.push(_e+"type="+encodeURIComponent("_badmap")),rf}}catch{Z&&Z(sl)}}if(Er){Le=Fn.join("&");break e}}Le=void 0}return C=C.i.splice(0,j),F.G=C,Le}function HO(C){if(!C.g&&!C.v){C.Y=1;var F=C.Da;w||S(),A||(w(),A=!0),T.add(F,C),C.A=0}}function C2(C){return C.g||C.v||C.A>=3?!1:(C.Y++,C.v=gn(u(C.Da,C),KO(C,C.A)),C.A++,!0)}r.Da=function(){if(this.v=null,GO(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var C=4*this.T;this.j.info("BP detection timer enabled: "+C),this.B=gn(u(this.Wa,this),C)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ze(10),C_(this),GO(this))};function N2(C){C.B!=null&&(a.clearTimeout(C.B),C.B=null)}function GO(C){C.g=new nl(C,C.j,"rpc",C.Y),C.u===null&&(C.g.J=C.o),C.g.P=0;var F=il(C.na);Or(F,"RID","rpc"),Or(F,"SID",C.M),Or(F,"AID",C.K),Or(F,"CI",C.F?"0":"1"),!C.F&&C.ia&&Or(F,"TO",C.ia),Or(F,"TYPE","xmlhttp"),Ey(C,F),C.u&&C.o&&S2(F,C.u,C.o),C.O&&(C.g.H=C.O);var j=C.g;C=C.ba,j.M=1,j.A=E_(il(F)),j.u=null,j.R=!0,w_(j,C)}r.Va=function(){this.C!=null&&(this.C=null,C_(this),C2(this),ze(19))};function D_(C){C.C!=null&&(a.clearTimeout(C.C),C.C=null)}function WO(C,F){var j=null;if(C.g==F){D_(C),N2(C),C.g=null;var Z=2}else if(py(C.h,F))j=F.G,TO(C.h,F),Z=1;else return;if(C.I!=0){if(F.o)if(Z==1){j=F.u?F.u.length:0,F=Date.now()-F.F;var ve=C.D;Z=B(),He(Z,new ut(Z,j)),N_(C)}else HO(C);else if(ve=F.m,ve==3||ve==0&&F.X>0||!(Z==1&&CQ(C,F)||Z==2&&C2(C)))switch(j&&j.length>0&&(F=C.h,F.i=F.i.concat(j)),ve){case 1:tf(C,5);break;case 4:tf(C,10);break;case 3:tf(C,6);break;default:tf(C,2)}}}function KO(C,F){let j=C.Qa+Math.floor(Math.random()*C.Za);return C.isActive()||(j*=2),j*F}function tf(C,F){if(C.j.info("Error code "+F),F==2){var j=u(C.bb,C),Z=C.Ua;const ve=!Z;Z=new Rc(Z||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||gy(Z,"https"),E_(Z),ve?xQ(Z.toString(),j):_Q(Z.toString(),j)}else ze(2);C.I=0,C.l&&C.l.pa(F),XO(C),zO(C)}r.bb=function(C){C?(this.j.info("Successfully pinged google.com"),ze(2)):(this.j.info("Failed to ping google.com"),ze(1))};function XO(C){if(C.I=0,C.ja=[],C.l){const F=CO(C.h);(F.length!=0||C.i.length!=0)&&(p(C.ja,F),p(C.ja,C.i),C.h.i.length=0,f(C.i),C.i.length=0),C.l.oa()}}function YO(C,F,j){var Z=j instanceof Rc?il(j):new Rc(j);if(Z.g!="")F&&(Z.g=F+"."+Z.g),vy(Z,Z.u);else{var ve=a.location;Z=ve.protocol,F=F?F+"."+ve.hostname:ve.hostname,ve=+ve.port;const _e=new Rc(null);Z&&gy(_e,Z),F&&(_e.g=F),ve&&vy(_e,ve),j&&(_e.h=j),Z=_e}return j=C.G,F=C.wa,j&&F&&Or(Z,j,F),Or(Z,"VER",C.ka),Ey(C,Z),Z}function QO(C,F,j){if(F&&!C.L)throw Error("Can't create secondary domain capable XhrIo object.");return F=C.Aa&&!C.ma?new nn(new E2({ab:j})):new nn(C.ma),F.Fa(C.L),F}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function JO(){}r=JO.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function M_(){}M_.prototype.g=function(C,F){return new Ys(C,F)};function Ys(C,F){$e.call(this),this.g=new UO(F),this.l=C,this.h=F&&F.messageUrlParams||null,C=F&&F.messageHeaders||null,F&&F.clientProtocolHeaderRequired&&(C?C["X-Client-Protocol"]="webchannel":C={"X-Client-Protocol":"webchannel"}),this.g.o=C,C=F&&F.initMessageHeaders||null,F&&F.messageContentType&&(C?C["X-WebChannel-Content-Type"]=F.messageContentType:C={"X-WebChannel-Content-Type":F.messageContentType}),F&&F.sa&&(C?C["X-WebChannel-Client-Profile"]=F.sa:C={"X-WebChannel-Client-Profile":F.sa}),this.g.U=C,(C=F&&F.Qb)&&!I(C)&&(this.g.u=C),this.A=F&&F.supportsCrossDomainXhr||!1,this.v=F&&F.sendRawJson||!1,(F=F&&F.httpSessionIdParam)&&!I(F)&&(this.g.G=F,C=this.h,C!==null&&F in C&&(C=this.h,F in C&&delete C[F])),this.j=new Pp(this)}h(Ys,$e),Ys.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ys.prototype.close=function(){T2(this.g)},Ys.prototype.o=function(C){var F=this.g;if(typeof C=="string"){var j={};j.__data__=C,C=j}else this.v&&(j={},j.__data__=pe(C),C=j);F.i.push(new Oi(F.Ya++,C)),F.I==3&&N_(F)},Ys.prototype.N=function(){this.g.l=null,delete this.j,T2(this.g),delete this.g,Ys.Z.N.call(this)};function ZO(C){Ct.call(this),C.__headers__&&(this.headers=C.__headers__,this.statusCode=C.__status__,delete C.__headers__,delete C.__status__);var F=C.__sm__;if(F){e:{for(const j in F){C=j;break e}C=void 0}(this.i=C)&&(C=this.i,F=F!==null&&C in F?F[C]:void 0),this.data=F}else this.data=C}h(ZO,Ct);function e3(){zt.call(this),this.status=1}h(e3,zt);function Pp(C){this.g=C}h(Pp,JO),Pp.prototype.ra=function(){He(this.g,"a")},Pp.prototype.qa=function(C){He(this.g,new ZO(C))},Pp.prototype.pa=function(C){He(this.g,new e3)},Pp.prototype.oa=function(){He(this.g,"b")},M_.prototype.createWebChannel=M_.prototype.g,Ys.prototype.send=Ys.prototype.o,Ys.prototype.open=Ys.prototype.m,Ys.prototype.close=Ys.prototype.close,Uj=function(){return new M_},Vj=function(){return B()},$j=lt,_M={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Dp.NO_ERROR=0,Dp.TIMEOUT=8,Dp.HTTP_ERROR=6,JA=Dp,g_.COMPLETE="complete",Lj=g_,Se.EventType=et,et.OPEN="a",et.CLOSE="b",et.ERROR="c",et.MESSAGE="d",$e.prototype.listen=$e.prototype.J,Xy=Se,nn.prototype.listenOnce=nn.prototype.K,nn.prototype.getLastError=nn.prototype.Ha,nn.prototype.getLastErrorCode=nn.prototype.ya,nn.prototype.getStatus=nn.prototype.ca,nn.prototype.getResponseJson=nn.prototype.La,nn.prototype.getResponseText=nn.prototype.la,nn.prototype.send=nn.prototype.ea,nn.prototype.setWithCredentials=nn.prototype.Fa,Bj=nn}).apply(typeof J_<"u"?J_:typeof self<"u"?self:typeof window<"u"?window:{});const q4="@firebase/firestore",H4="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ki.UNAUTHENTICATED=new Ki(null),Ki.GOOGLE_CREDENTIALS=new Ki("google-credentials-uid"),Ki.FIRST_PARTY=new Ki("first-party-uid"),Ki.MOCK_USER=new Ki("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let G0="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp=new wk("@firebase/firestore");function zp(){return tp.logLevel}function Ke(r,...e){if(tp.logLevel<=qt.DEBUG){const t=e.map(Ak);tp.debug(`Firestore (${G0}): ${r}`,...t)}}function yc(r,...e){if(tp.logLevel<=qt.ERROR){const t=e.map(Ak);tp.error(`Firestore (${G0}): ${r}`,...t)}}function _0(r,...e){if(tp.logLevel<=qt.WARN){const t=e.map(Ak);tp.warn(`Firestore (${G0}): ${r}`,...t)}}function Ak(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,zj(r,n,t)}function zj(r,e,t){let n=`FIRESTORE (${G0}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw yc(n),new Error(n)}function ar(r,e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,r||zj(e,i,n)}function St(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends eu{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Boe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ki.UNAUTHENTICATED))}shutdown(){}}class Loe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class $oe{constructor(e){this.t=e,this.currentUser=Ki.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ar(this.o===void 0,42304);let n=this.i;const i=l=>this.i!==n?(n=this.i,t(l)):Promise.resolve();let s=new nc;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new nc,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new nc)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ar(typeof n.accessToken=="string",31837,{l:n}),new jj(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ar(e===null||typeof e=="string",2055,{h:e}),new Ki(e)}}class Voe{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Ki.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Uoe{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Voe(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ki.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class G4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zoe{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xa(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ar(this.o===void 0,3512);const n=s=>{s.error!=null&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Ke("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const i=s=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new G4(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ar(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new G4(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function joe(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=joe(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<t&&(n+=e.charAt(i[s]%62))}return n}}function Ht(r,e){return r<e?-1:r>e?1:0}function AM(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const i=r.charAt(n),s=e.charAt(n);if(i!==s)return SN(i)===SN(s)?Ht(i,s):SN(i)?1:-1}return Ht(r.length,e.length)}const qoe=55296,Hoe=57343;function SN(r){const e=r.charCodeAt(0);return e>=qoe&&e<=Hoe}function A0(r,e,t){return r.length===e.length&&r.every((n,i)=>t(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4="__name__";class hl{constructor(e,t,n){t===void 0?t=0:t>e.length&&mt(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&mt(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return hl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hl?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=hl.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Ht(e.length,t.length)}static compareSegments(e,t){const n=hl.isNumericId(e),i=hl.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?hl.extractNumericId(e).compare(hl.extractNumericId(t)):AM(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ld.fromString(e.substring(4,e.length-2))}}class Rr extends hl{construct(e,t,n){return new Rr(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new qe(Te.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(i=>i.length>0))}return new Rr(t)}static emptyPath(){return new Rr([])}}const Goe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ti extends hl{construct(e,t,n){return new Ti(e,t,n)}static isValidIdentifier(e){return Goe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ti.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===W4}static keyField(){return new Ti([W4])}static fromServerFormat(e){const t=[];let n="",i=0;const s=()=>{if(n.length===0)throw new qe(Te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new qe(Te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new qe(Te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(n+=o,i++):(s(),i++)}if(s(),a)throw new qe(Te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ti(t)}static emptyPath(){return new Ti([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.path=e}static fromPath(e){return new at(Rr.fromString(e))}static fromName(e){return new at(Rr.fromString(e).popFirst(5))}static empty(){return new at(Rr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Rr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Rr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new at(new Rr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qj(r,e,t){if(!t)throw new qe(Te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Woe(r,e,t,n){if(e===!0&&n===!0)throw new qe(Te.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function K4(r){if(!at.isDocumentKey(r))throw new qe(Te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function X4(r){if(at.isDocumentKey(r))throw new qe(Te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Hj(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function gC(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":mt(12329,{type:typeof r})}function Gs(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new qe(Te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=gC(r);throw new qe(Te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(r,e){const t={typeString:r};return e&&(t.value=e),t}function Bx(r,e){if(!Hj(r))throw new qe(Te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const i=e[n].typeString,s="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const a=r[n];if(i&&typeof a!==i){t=`JSON field '${n}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${n}' field to equal '${s.value}'`;break}}if(t)throw new qe(Te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4=-62135596800,Q4=1e6;class $r{static now(){return $r.fromMillis(Date.now())}static fromDate(e){return $r.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Q4);return new $r(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new qe(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new qe(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Y4)throw new qe(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Q4}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$r._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Bx(e,$r._jsonSchema))return new $r(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Y4;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$r._jsonSchemaVersion="firestore/timestamp/1.0",$r._jsonSchema={type:Pn("string",$r._jsonSchemaVersion),seconds:Pn("number"),nanoseconds:Pn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{static fromTimestamp(e){return new wt(e)}static min(){return new wt(new $r(0,0))}static max(){return new wt(new $r(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=-1;function Koe(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=wt.fromTimestamp(n===1e9?new $r(t+1,0):new $r(t,n));return new vd(i,at.empty(),e)}function Xoe(r){return new vd(r.readTime,r.key,g1)}class vd{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new vd(wt.min(),at.empty(),g1)}static max(){return new vd(wt.max(),at.empty(),g1)}}function Yoe(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=at.comparator(r.documentKey,e.documentKey),t!==0?t:Ht(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qoe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Joe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W0(r){if(r.code!==Te.FAILED_PRECONDITION||r.message!==Qoe)throw r;Ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&mt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ce((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ce?t:Ce.resolve(t)}catch(t){return Ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ce.reject(t)}static resolve(e){return new Ce((t,n)=>{t(e)})}static reject(e){return new Ce((t,n)=>{n(e)})}static waitFor(e){return new Ce((t,n)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&t()},l=>n(l))}),a=!0,s===i&&t()})}static or(e){let t=Ce.resolve(!1);for(const n of e)t=t.next(i=>i?Ce.resolve(i):n());return t}static forEach(e,t){const n=[];return e.forEach((i,s)=>{n.push(t.call(this,i,s))}),this.waitFor(n)}static mapArray(e,t){return new Ce((n,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const u=l;t(e[u]).next(c=>{a[u]=c,++o,o===s&&n(a)},c=>i(c))}})}static doWhile(e,t){return new Ce((n,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):n()};s()})}}function Zoe(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function K0(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vC.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=-1;function yC(r){return r==null}function _S(r){return r===0&&1/r==-1/0}function ele(r){return typeof r=="number"&&Number.isInteger(r)&&!_S(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj="";function tle(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=J4(e)),e=rle(r.get(t),e);return J4(e)}function rle(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const s=r.charAt(i);switch(s){case"\0":t+="";break;case Gj:t+="";break;default:t+=s}}return t}function J4(r){return r+Gj+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Od(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Wj(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,t){this.comparator=e,this.root=t||Ai.EMPTY}insert(e,t){return new rn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ai.BLACK,null,null))}remove(e){return new rn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ai.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Z_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Z_(this.root,e,this.comparator,!1)}getReverseIterator(){return new Z_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Z_(this.root,e,this.comparator,!0)}}class Z_{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ai{constructor(e,t,n,i,s){this.key=e,this.value=t,this.color=n??Ai.RED,this.left=i??Ai.EMPTY,this.right=s??Ai.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,s){return new Ai(e??this.key,t??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,n),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ai.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Ai.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ai.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ai.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw mt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw mt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw mt(27949);return e+(this.isRed()?0:1)}}Ai.EMPTY=null,Ai.RED=!0,Ai.BLACK=!1;Ai.EMPTY=new class{constructor(){this.size=0}get key(){throw mt(57766)}get value(){throw mt(16141)}get color(){throw mt(16727)}get left(){throw mt(29726)}get right(){throw mt(36894)}copy(e,t,n,i,s){return this}insert(e,t,n){return new Ai(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.comparator=e,this.data=new rn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new eL(this.data.getIterator())}getIteratorFrom(e){return new eL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof Hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Hn(this.comparator);return t.data=e,t}}class eL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this.fields=e,e.sort(Ti.comparator)}static empty(){return new Aa([])}unionWith(e){let t=new Hn(Ti.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Aa(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return A0(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Kj("Invalid base64 string: "+s):s}}(e);return new Ri(t)}static fromUint8Array(e){const t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new Ri(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ri.EMPTY_BYTE_STRING=new Ri("");const nle=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yd(r){if(ar(!!r,39018),typeof r=="string"){let e=0;const t=nle.exec(r);if(ar(!!t,46558,{timestamp:r}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:xn(r.seconds),nanos:xn(r.nanos)}}function xn(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function bd(r){return typeof r=="string"?Ri.fromBase64String(r):Ri.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj="server_timestamp",Yj="__type__",Qj="__previous_value__",Jj="__local_write_time__";function Tk(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Yj])==null?void 0:n.stringValue)===Xj}function bC(r){const e=r.mapValue.fields[Qj];return Tk(e)?bC(e):e}function v1(r){const e=yd(r.mapValue.fields[Jj].timestampValue);return new $r(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ile{constructor(e,t,n,i,s,a,o,l,u,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=c}}const AS="(default)";class y1{constructor(e,t){this.projectId=e,this.database=t||AS}static empty(){return new y1("","")}get isDefaultDatabase(){return this.database===AS}isEqual(e){return e instanceof y1&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj="__type__",sle="__max__",eA={mapValue:{}},eq="__vector__",ES="value";function wd(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Tk(r)?4:ole(r)?9007199254740991:ale(r)?10:11:mt(28295,{value:r})}function Kl(r,e){if(r===e)return!0;const t=wd(r);if(t!==wd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return v1(r).isEqual(v1(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=yd(i.timestampValue),o=yd(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(i,s){return bd(i.bytesValue).isEqual(bd(s.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(i,s){return xn(i.geoPointValue.latitude)===xn(s.geoPointValue.latitude)&&xn(i.geoPointValue.longitude)===xn(s.geoPointValue.longitude)}(r,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return xn(i.integerValue)===xn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=xn(i.doubleValue),o=xn(s.doubleValue);return a===o?_S(a)===_S(o):isNaN(a)&&isNaN(o)}return!1}(r,e);case 9:return A0(r.arrayValue.values||[],e.arrayValue.values||[],Kl);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(Z4(a)!==Z4(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Kl(a[l],o[l])))return!1;return!0}(r,e);default:return mt(52216,{left:r})}}function b1(r,e){return(r.values||[]).find(t=>Kl(t,e))!==void 0}function E0(r,e){if(r===e)return 0;const t=wd(r),n=wd(e);if(t!==n)return Ht(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ht(r.booleanValue,e.booleanValue);case 2:return function(s,a){const o=xn(s.integerValue||s.doubleValue),l=xn(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(r,e);case 3:return tL(r.timestampValue,e.timestampValue);case 4:return tL(v1(r),v1(e));case 5:return AM(r.stringValue,e.stringValue);case 6:return function(s,a){const o=bd(s),l=bd(a);return o.compareTo(l)}(r.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let u=0;u<o.length&&u<l.length;u++){const c=Ht(o[u],l[u]);if(c!==0)return c}return Ht(o.length,l.length)}(r.referenceValue,e.referenceValue);case 8:return function(s,a){const o=Ht(xn(s.latitude),xn(a.latitude));return o!==0?o:Ht(xn(s.longitude),xn(a.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return rL(r.arrayValue,e.arrayValue);case 10:return function(s,a){var d,f,p,g;const o=s.fields||{},l=a.fields||{},u=(d=o[ES])==null?void 0:d.arrayValue,c=(f=l[ES])==null?void 0:f.arrayValue,h=Ht(((p=u==null?void 0:u.values)==null?void 0:p.length)||0,((g=c==null?void 0:c.values)==null?void 0:g.length)||0);return h!==0?h:rL(u,c)}(r.mapValue,e.mapValue);case 11:return function(s,a){if(s===eA.mapValue&&a===eA.mapValue)return 0;if(s===eA.mapValue)return 1;if(a===eA.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),u=a.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let h=0;h<l.length&&h<c.length;++h){const d=AM(l[h],c[h]);if(d!==0)return d;const f=E0(o[l[h]],u[c[h]]);if(f!==0)return f}return Ht(l.length,c.length)}(r.mapValue,e.mapValue);default:throw mt(23264,{he:t})}}function tL(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ht(r,e);const t=yd(r),n=yd(e),i=Ht(t.seconds,n.seconds);return i!==0?i:Ht(t.nanos,n.nanos)}function rL(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const s=E0(t[i],n[i]);if(s)return s}return Ht(t.length,n.length)}function S0(r){return EM(r)}function EM(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const n=yd(t);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return bd(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return at.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let n="[",i=!0;for(const s of t.values||[])i?i=!1:n+=",",n+=EM(s);return n+"]"}(r.arrayValue):"mapValue"in r?function(t){const n=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of n)s?s=!1:i+=",",i+=`${a}:${EM(t.fields[a])}`;return i+"}"}(r.mapValue):mt(61005,{value:r})}function ZA(r){switch(wd(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bC(r);return e?16+ZA(e):16;case 5:return 2*r.stringValue.length;case 6:return bd(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,s)=>i+ZA(s),0)}(r.arrayValue);case 10:case 11:return function(n){let i=0;return Od(n.fields,(s,a)=>{i+=s.length+ZA(a)}),i}(r.mapValue);default:throw mt(13486,{value:r})}}function nL(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function SM(r){return!!r&&"integerValue"in r}function Ck(r){return!!r&&"arrayValue"in r}function iL(r){return!!r&&"nullValue"in r}function sL(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function eE(r){return!!r&&"mapValue"in r}function ale(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Zj])==null?void 0:n.stringValue)===eq}function Bb(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Od(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=Bb(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bb(r.arrayValue.values[t]);return e}return{...r}}function ole(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===sle}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this.value=e}static empty(){return new Vs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!eE(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bb(t)}setAll(e){let t=Ti.emptyPath(),n={},i=[];e.forEach((a,o)=>{if(!t.isImmediateParentOf(o)){const l=this.getFieldsMap(t);this.applyChanges(l,n,i),n={},i=[],t=o.popLast()}a?n[o.lastSegment()]=Bb(a):i.push(o.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,i)}delete(e){const t=this.field(e.popLast());eE(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Kl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];eE(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Od(t,(i,s)=>e[i]=s);for(const i of n)delete e[i]}clone(){return new Vs(Bb(this.value))}}function tq(r){const e=[];return Od(r.fields,(t,n)=>{const i=new Ti([t]);if(eE(n)){const s=tq(n.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Aa(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,t,n,i,s,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Yi(e,0,wt.min(),wt.min(),wt.min(),Vs.empty(),0)}static newFoundDocument(e,t,n,i){return new Yi(e,1,t,wt.min(),n,i,0)}static newNoDocument(e,t){return new Yi(e,2,t,wt.min(),wt.min(),Vs.empty(),0)}static newUnknownDocument(e,t){return new Yi(e,3,t,wt.min(),wt.min(),Vs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,t){this.position=e,this.inclusive=t}}function aL(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const s=e[i],a=r.position[i];if(s.field.isKeyField()?n=at.comparator(at.fromName(a.referenceValue),t.key):n=E0(a,t.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function oL(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Kl(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,t="asc"){this.field=e,this.dir=t}}function lle(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rq{}class In extends rq{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new cle(e,t,n):t==="array-contains"?new fle(e,n):t==="in"?new mle(e,n):t==="not-in"?new ple(e,n):t==="array-contains-any"?new gle(e,n):new In(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new hle(e,n):new dle(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(E0(t,this.value)):t!==null&&wd(this.value)===wd(t)&&this.matchesComparison(E0(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return mt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ko extends rq{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ko(e,t)}matches(e){return nq(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function nq(r){return r.op==="and"}function iq(r){return ule(r)&&nq(r)}function ule(r){for(const e of r.filters)if(e instanceof Ko)return!1;return!0}function TM(r){if(r instanceof In)return r.field.canonicalString()+r.op.toString()+S0(r.value);if(iq(r))return r.filters.map(e=>TM(e)).join(",");{const e=r.filters.map(t=>TM(t)).join(",");return`${r.op}(${e})`}}function sq(r,e){return r instanceof In?function(n,i){return i instanceof In&&n.op===i.op&&n.field.isEqual(i.field)&&Kl(n.value,i.value)}(r,e):r instanceof Ko?function(n,i){return i instanceof Ko&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((s,a,o)=>s&&sq(a,i.filters[o]),!0):!1}(r,e):void mt(19439)}function aq(r){return r instanceof In?function(t){return`${t.field.canonicalString()} ${t.op} ${S0(t.value)}`}(r):r instanceof Ko?function(t){return t.op.toString()+" {"+t.getFilters().map(aq).join(" ,")+"}"}(r):"Filter"}class cle extends In{constructor(e,t,n){super(e,t,n),this.key=at.fromName(n.referenceValue)}matches(e){const t=at.comparator(e.key,this.key);return this.matchesComparison(t)}}class hle extends In{constructor(e,t){super(e,"in",t),this.keys=oq("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class dle extends In{constructor(e,t){super(e,"not-in",t),this.keys=oq("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function oq(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(n=>at.fromName(n.referenceValue))}class fle extends In{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ck(t)&&b1(t.arrayValue,this.value)}}class mle extends In{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&b1(this.value.arrayValue,t)}}class ple extends In{constructor(e,t){super(e,"not-in",t)}matches(e){if(b1(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!b1(this.value.arrayValue,t)}}class gle extends In{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ck(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>b1(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vle{constructor(e,t=null,n=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function lL(r,e=null,t=[],n=[],i=null,s=null,a=null){return new vle(r,e,t,n,i,s,a)}function Nk(r){const e=St(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>TM(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),yC(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>S0(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>S0(n)).join(",")),e.Te=t}return e.Te}function Dk(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!lle(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!sq(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!oL(r.startAt,e.startAt)&&oL(r.endAt,e.endAt)}function CM(r){return at.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,t=null,n=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function yle(r,e,t,n,i,s,a,o){return new X0(r,e,t,n,i,s,a,o)}function wC(r){return new X0(r)}function uL(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function lq(r){return r.collectionGroup!==null}function Lb(r){const e=St(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Hn(Ti.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new w1(s,n))}),t.has(Ti.keyField().canonicalString())||e.Ie.push(new w1(Ti.keyField(),n))}return e.Ie}function zl(r){const e=St(r);return e.Ee||(e.Ee=ble(e,Lb(r))),e.Ee}function ble(r,e){if(r.limitType==="F")return lL(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new w1(i.field,s)});const t=r.endAt?new SS(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new SS(r.startAt.position,r.startAt.inclusive):null;return lL(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function NM(r,e){const t=r.filters.concat([e]);return new X0(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function TS(r,e,t){return new X0(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function xC(r,e){return Dk(zl(r),zl(e))&&r.limitType===e.limitType}function uq(r){return`${Nk(zl(r))}|lt:${r.limitType}`}function jp(r){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(i=>aq(i)).join(", ")}]`),yC(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>S0(i)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>S0(i)).join(",")),`Target(${n})`}(zl(r))}; limitType=${r.limitType})`}function _C(r,e){return e.isFoundDocument()&&function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):at.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(r,e)&&function(n,i){for(const s of Lb(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(r,e)&&function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0}(r,e)&&function(n,i){return!(n.startAt&&!function(a,o,l){const u=aL(a,o,l);return a.inclusive?u<=0:u<0}(n.startAt,Lb(n),i)||n.endAt&&!function(a,o,l){const u=aL(a,o,l);return a.inclusive?u>=0:u>0}(n.endAt,Lb(n),i))}(r,e)}function wle(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function cq(r){return(e,t)=>{let n=!1;for(const i of Lb(r)){const s=xle(i,e,t);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function xle(r,e,t){const n=r.field.isKeyField()?at.comparator(e.key,t.key):function(s,a,o){const l=a.data.field(s),u=o.data.field(s);return l!==null&&u!==null?E0(l,u):mt(42886)}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return mt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Od(this.inner,(t,n)=>{for(const[i,s]of n)e(i,s)})}isEmpty(){return Wj(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _le=new rn(at.comparator);function bc(){return _le}const hq=new rn(at.comparator);function Yy(...r){let e=hq;for(const t of r)e=e.insert(t.key,t);return e}function dq(r){let e=hq;return r.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function _f(){return $b()}function fq(){return $b()}function $b(){return new mp(r=>r.toString(),(r,e)=>r.isEqual(e))}const Ale=new rn(at.comparator),Ele=new Hn(at.comparator);function Gt(...r){let e=Ele;for(const t of r)e=e.add(t);return e}const Sle=new Hn(Ht);function Tle(){return Sle}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_S(e)?"-0":e}}function mq(r){return{integerValue:""+r}}function pq(r,e){return ele(e)?mq(e):Mk(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(){this._=void 0}}function Cle(r,e,t){return r instanceof x1?function(i,s){const a={fields:{[Yj]:{stringValue:Xj},[Jj]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Tk(s)&&(s=bC(s)),s&&(a.fields[Qj]=s),{mapValue:a}}(t,e):r instanceof _1?vq(r,e):r instanceof A1?yq(r,e):function(i,s){const a=gq(i,s),o=cL(a)+cL(i.Ae);return SM(a)&&SM(i.Ae)?mq(o):Mk(i.serializer,o)}(r,e)}function Nle(r,e,t){return r instanceof _1?vq(r,e):r instanceof A1?yq(r,e):t}function gq(r,e){return r instanceof E1?function(n){return SM(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class x1 extends AC{}class _1 extends AC{constructor(e){super(),this.elements=e}}function vq(r,e){const t=bq(e);for(const n of r.elements)t.some(i=>Kl(i,n))||t.push(n);return{arrayValue:{values:t}}}class A1 extends AC{constructor(e){super(),this.elements=e}}function yq(r,e){let t=bq(e);for(const n of r.elements)t=t.filter(i=>!Kl(i,n));return{arrayValue:{values:t}}}class E1 extends AC{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function cL(r){return xn(r.integerValue||r.doubleValue)}function bq(r){return Ck(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wq{constructor(e,t){this.field=e,this.transform=t}}function Dle(r,e){return r.field.isEqual(e.field)&&function(n,i){return n instanceof _1&&i instanceof _1||n instanceof A1&&i instanceof A1?A0(n.elements,i.elements,Kl):n instanceof E1&&i instanceof E1?Kl(n.Ae,i.Ae):n instanceof x1&&i instanceof x1}(r.transform,e.transform)}class Mle{constructor(e,t){this.version=e,this.transformResults=t}}class lo{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new lo}static exists(e){return new lo(void 0,e)}static updateTime(e){return new lo(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tE(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class EC{}function xq(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Ik(r.key,lo.none()):new Lx(r.key,r.data,lo.none());{const t=r.data,n=Vs.empty();let i=new Hn(Ti.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?n.delete(s):n.set(s,a),i=i.add(s)}return new Bd(r.key,n,new Aa(i.toArray()),lo.none())}}function Ile(r,e,t){r instanceof Lx?function(i,s,a){const o=i.value.clone(),l=dL(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(r,e,t):r instanceof Bd?function(i,s,a){if(!tE(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=dL(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(_q(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(r,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function Vb(r,e,t,n){return r instanceof Lx?function(s,a,o,l){if(!tE(s.precondition,a))return o;const u=s.value.clone(),c=fL(s.fieldTransforms,l,a);return u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(r,e,t,n):r instanceof Bd?function(s,a,o,l){if(!tE(s.precondition,a))return o;const u=fL(s.fieldTransforms,l,a),c=a.data;return c.setAll(_q(s)),c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(r,e,t,n):function(s,a,o){return tE(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(r,e,t)}function Ple(r,e){let t=null;for(const n of r.fieldTransforms){const i=e.data.field(n.field),s=gq(n.transform,i||null);s!=null&&(t===null&&(t=Vs.empty()),t.set(n.field,s))}return t||null}function hL(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&A0(n,i,(s,a)=>Dle(s,a))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Lx extends EC{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Bd extends EC{constructor(e,t,n,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function _q(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function dL(r,e,t){const n=new Map;ar(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let i=0;i<t.length;i++){const s=r[i],a=s.transform,o=e.data.field(s.field);n.set(s.field,Nle(a,o,t[i]))}return n}function fL(r,e,t){const n=new Map;for(const i of r){const s=i.transform,a=t.data.field(i.field);n.set(i.field,Cle(s,a,e))}return n}class Ik extends EC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Rle extends EC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kle{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Ile(s,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Vb(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Vb(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=fq();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=t.has(i.key)?null:o;const l=xq(a,o);l!==null&&n.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(wt.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gt())}isEqual(e){return this.batchId===e.batchId&&A0(this.mutations,e.mutations,(t,n)=>hL(t,n))&&A0(this.baseMutations,e.baseMutations,(t,n)=>hL(t,n))}}class Pk{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){ar(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=function(){return Ale}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,n[a].version);return new Pk(e,t,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fle{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ole{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cn,Jt;function Ble(r){switch(r){case Te.OK:return mt(64938);case Te.CANCELLED:case Te.UNKNOWN:case Te.DEADLINE_EXCEEDED:case Te.RESOURCE_EXHAUSTED:case Te.INTERNAL:case Te.UNAVAILABLE:case Te.UNAUTHENTICATED:return!1;case Te.INVALID_ARGUMENT:case Te.NOT_FOUND:case Te.ALREADY_EXISTS:case Te.PERMISSION_DENIED:case Te.FAILED_PRECONDITION:case Te.ABORTED:case Te.OUT_OF_RANGE:case Te.UNIMPLEMENTED:case Te.DATA_LOSS:return!0;default:return mt(15467,{code:r})}}function Aq(r){if(r===void 0)return yc("GRPC error has no .code"),Te.UNKNOWN;switch(r){case Cn.OK:return Te.OK;case Cn.CANCELLED:return Te.CANCELLED;case Cn.UNKNOWN:return Te.UNKNOWN;case Cn.DEADLINE_EXCEEDED:return Te.DEADLINE_EXCEEDED;case Cn.RESOURCE_EXHAUSTED:return Te.RESOURCE_EXHAUSTED;case Cn.INTERNAL:return Te.INTERNAL;case Cn.UNAVAILABLE:return Te.UNAVAILABLE;case Cn.UNAUTHENTICATED:return Te.UNAUTHENTICATED;case Cn.INVALID_ARGUMENT:return Te.INVALID_ARGUMENT;case Cn.NOT_FOUND:return Te.NOT_FOUND;case Cn.ALREADY_EXISTS:return Te.ALREADY_EXISTS;case Cn.PERMISSION_DENIED:return Te.PERMISSION_DENIED;case Cn.FAILED_PRECONDITION:return Te.FAILED_PRECONDITION;case Cn.ABORTED:return Te.ABORTED;case Cn.OUT_OF_RANGE:return Te.OUT_OF_RANGE;case Cn.UNIMPLEMENTED:return Te.UNIMPLEMENTED;case Cn.DATA_LOSS:return Te.DATA_LOSS;default:return mt(39323,{code:r})}}(Jt=Cn||(Cn={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lle(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $le=new ld([4294967295,4294967295],0);function mL(r){const e=Lle().encode(r),t=new Oj;return t.update(e),new Uint8Array(t.digest())}function pL(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ld([t,n],0),new ld([i,s],0)]}class Rk{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Qy(`Invalid padding: ${t}`);if(n<0)throw new Qy(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Qy(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Qy(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ld.fromNumber(this.ge)}ye(e,t,n){let i=e.add(t.multiply(ld.fromNumber(n)));return i.compare($le)===1&&(i=new ld([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=mL(e),[n,i]=pL(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(n,i,s);if(!this.we(a))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Rk(s,i,t);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.ge===0)return;const t=mL(e),[n,i]=pL(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(n,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Qy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,t,n,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,$x.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new SC(wt.min(),i,new rn(Ht),bc(),Gt())}}class $x{constructor(e,t,n,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new $x(n,t,Gt(),Gt(),Gt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,t,n,i){this.be=e,this.removedTargetIds=t,this.key=n,this.De=i}}class Eq{constructor(e,t){this.targetId=e,this.Ce=t}}class Sq{constructor(e,t,n=Ri.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class gL{constructor(){this.ve=0,this.Fe=vL(),this.Me=Ri.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Gt(),t=Gt(),n=Gt();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:mt(38017,{changeType:s})}}),new $x(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=vL()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ar(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Vle{constructor(e){this.Ge=e,this.ze=new Map,this.je=bc(),this.Je=tA(),this.He=tA(),this.Ye=new rn(Ht)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:mt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((n,i)=>{this.rt(i)&&t(i)})}st(e){const t=e.targetId,n=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(CM(s))if(n===0){const a=new at(s.path);this.et(t,a,Yi.newNoDocument(a,wt.min()))}else ar(n===1,20013,{expectedCount:n});else{const a=this._t(t);if(a!==n){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=t;let a,o;try{a=bd(n).toUint8Array()}catch(l){if(l instanceof Kj)return _0("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new Rk(a,i,s)}catch(l){return _0(l instanceof Qy?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let i=0;return n.forEach(s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(t,s,null),i++)}),i}Tt(e){const t=new Map;this.ze.forEach((s,a)=>{const o=this.ot(a);if(o){if(s.current&&CM(o.target)){const l=new at(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,Yi.newNoDocument(l,e))}s.Be&&(t.set(a,s.ke()),s.qe())}});let n=Gt();this.He.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const i=new SC(e,t,this.Ye,this.je,n);return this.je=bc(),this.Je=tA(),this.He=tA(),this.Ye=new rn(Ht),i}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new gL,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Hn(Ht),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Hn(Ht),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ke("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new gL),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function tA(){return new rn(at.comparator)}function vL(){return new rn(at.comparator)}const Ule={asc:"ASCENDING",desc:"DESCENDING"},zle={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jle={and:"AND",or:"OR"};class qle{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function DM(r,e){return r.useProto3Json||yC(e)?e:{value:e}}function CS(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Tq(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Hle(r,e){return CS(r,e.toTimestamp())}function jl(r){return ar(!!r,49232),wt.fromTimestamp(function(t){const n=yd(t);return new $r(n.seconds,n.nanos)}(r))}function kk(r,e){return MM(r,e).canonicalString()}function MM(r,e){const t=function(i){return new Rr(["projects",i.projectId,"databases",i.database])}(r).child("documents");return e===void 0?t:t.child(e)}function Cq(r){const e=Rr.fromString(r);return ar(Pq(e),10190,{key:e.toString()}),e}function IM(r,e){return kk(r.databaseId,e.path)}function TN(r,e){const t=Cq(e);if(t.get(1)!==r.databaseId.projectId)throw new qe(Te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new qe(Te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new at(Dq(t))}function Nq(r,e){return kk(r.databaseId,e)}function Gle(r){const e=Cq(r);return e.length===4?Rr.emptyPath():Dq(e)}function PM(r){return new Rr(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Dq(r){return ar(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function yL(r,e,t){return{name:IM(r,e),fields:t.value.mapValue.fields}}function Wle(r,e){let t;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:mt(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(ar(c===void 0||typeof c=="string",58123),Ri.fromBase64String(c||"")):(ar(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),Ri.fromUint8Array(c||new Uint8Array))}(r,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(u){const c=u.code===void 0?Te.UNKNOWN:Aq(u.code);return new qe(c,u.message||"")}(a);t=new Sq(n,i,s,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=TN(r,n.document.name),s=jl(n.document.updateTime),a=n.document.createTime?jl(n.document.createTime):wt.min(),o=new Vs({mapValue:{fields:n.document.fields}}),l=Yi.newFoundDocument(i,s,a,o),u=n.targetIds||[],c=n.removedTargetIds||[];t=new rE(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=TN(r,n.document),s=n.readTime?jl(n.readTime):wt.min(),a=Yi.newNoDocument(i,s),o=n.removedTargetIds||[];t=new rE([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=TN(r,n.document),s=n.removedTargetIds||[];t=new rE([],s,i,null)}else{if(!("filter"in e))return mt(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,a=new Ole(i,s),o=n.targetId;t=new Eq(o,a)}}return t}function Kle(r,e){let t;if(e instanceof Lx)t={update:yL(r,e.key,e.value)};else if(e instanceof Ik)t={delete:IM(r,e.key)};else if(e instanceof Bd)t={update:yL(r,e.key,e.data),updateMask:nue(e.fieldMask)};else{if(!(e instanceof Rle))return mt(16599,{Vt:e.type});t={verify:IM(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(s,a){const o=a.transform;if(o instanceof x1)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof _1)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof A1)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof E1)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw mt(20930,{transform:a.transform})}(0,n))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Hle(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:mt(27497)}(r,e.precondition)),t}function Xle(r,e){return r&&r.length>0?(ar(e!==void 0,14353),r.map(t=>function(i,s){let a=i.updateTime?jl(i.updateTime):jl(s);return a.isEqual(wt.min())&&(a=jl(s)),new Mle(a,i.transformResults||[])}(t,e))):[]}function Yle(r,e){return{documents:[Nq(r,e.path)]}}function Qle(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=Nq(r,i);const s=function(u){if(u.length!==0)return Iq(Ko.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const a=function(u){if(u.length!==0)return u.map(c=>function(d){return{field:qp(d.field),direction:eue(d.dir)}}(c))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const o=DM(r,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:t,parent:i}}function Jle(r){let e=Gle(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){ar(n===1,65062);const c=t.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];t.where&&(s=function(h){const d=Mq(h);return d instanceof Ko&&iq(d)?d.getFilters():[d]}(t.where));let a=[];t.orderBy&&(a=function(h){return h.map(d=>function(p){return new w1(Hp(p.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(t.orderBy));let o=null;t.limit&&(o=function(h){let d;return d=typeof h=="object"?h.value:h,yC(d)?null:d}(t.limit));let l=null;t.startAt&&(l=function(h){const d=!!h.before,f=h.values||[];return new SS(f,d)}(t.startAt));let u=null;return t.endAt&&(u=function(h){const d=!h.before,f=h.values||[];return new SS(f,d)}(t.endAt)),yle(e,i,a,s,o,"F",l,u)}function Zle(r,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mt(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Mq(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Hp(t.unaryFilter.field);return In.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Hp(t.unaryFilter.field);return In.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Hp(t.unaryFilter.field);return In.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Hp(t.unaryFilter.field);return In.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return mt(61313);default:return mt(60726)}}(r):r.fieldFilter!==void 0?function(t){return In.create(Hp(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return mt(58110);default:return mt(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Ko.create(t.compositeFilter.filters.map(n=>Mq(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return mt(1026)}}(t.compositeFilter.op))}(r):mt(30097,{filter:r})}function eue(r){return Ule[r]}function tue(r){return zle[r]}function rue(r){return jle[r]}function qp(r){return{fieldPath:r.canonicalString()}}function Hp(r){return Ti.fromServerFormat(r.fieldPath)}function Iq(r){return r instanceof In?function(t){if(t.op==="=="){if(sL(t.value))return{unaryFilter:{field:qp(t.field),op:"IS_NAN"}};if(iL(t.value))return{unaryFilter:{field:qp(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(sL(t.value))return{unaryFilter:{field:qp(t.field),op:"IS_NOT_NAN"}};if(iL(t.value))return{unaryFilter:{field:qp(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qp(t.field),op:tue(t.op),value:t.value}}}(r):r instanceof Ko?function(t){const n=t.getFilters().map(i=>Iq(i));return n.length===1?n[0]:{compositeFilter:{op:rue(t.op),filters:n}}}(r):mt(54877,{filter:r})}function nue(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Pq(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,t,n,i,s=wt.min(),a=wt.min(),o=Ri.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Kh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Kh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iue{constructor(e){this.yt=e}}function sue(r){const e=Jle({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?TS(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aue{constructor(){this.Cn=new oue}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ce.resolve()}getCollectionParents(e,t){return Ce.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ce.resolve()}deleteFieldIndex(e,t){return Ce.resolve()}deleteAllFieldIndexes(e){return Ce.resolve()}createTargetIndexes(e,t){return Ce.resolve()}getDocumentsMatchingTarget(e,t){return Ce.resolve(null)}getIndexType(e,t){return Ce.resolve(0)}getFieldIndexes(e,t){return Ce.resolve([])}getNextCollectionGroupToUpdate(e){return Ce.resolve(null)}getMinOffset(e,t){return Ce.resolve(vd.min())}getMinOffsetFromCollectionGroup(e,t){return Ce.resolve(vd.min())}updateCollectionGroup(e,t,n){return Ce.resolve()}updateIndexEntries(e,t){return Ce.resolve()}}class oue{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Hn(Rr.comparator),s=!i.has(n);return this.index[t]=i.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Hn(Rr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rq=41943040;class Bs{static withCacheSize(e){return new Bs(e,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bs.DEFAULT_COLLECTION_PERCENTILE=10,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bs.DEFAULT=new Bs(Rq,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bs.DISABLED=new Bs(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new T0(0)}static cr(){return new T0(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL="LruGarbageCollector",lue=1048576;function xL([r,e],[t,n]){const i=Ht(r,t);return i===0?Ht(e,n):i}class uue{constructor(e){this.Ir=e,this.buffer=new Hn(xL),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();xL(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class cue{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ke(wL,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){K0(t)?Ke(wL,"Ignoring IndexedDB error during garbage collection: ",t):await W0(t)}await this.Vr(3e5)})}}class hue{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return Ce.resolve(vC.ce);const n=new uue(t);return this.mr.forEachTarget(e,i=>n.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>n.Ar(i))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),Ce.resolve(bL)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bL):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,i,s,a,o,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,a=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(n=h,o=Date.now(),this.removeTargets(e,n,t))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(u=Date.now(),zp()<=qt.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-c}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),Ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function due(r,e){return new hue(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fue{constructor(){this.changes=new mp(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?Ce.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mue{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pue{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(n!==null&&Vb(n.mutation,i,Aa.empty(),$r.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,Gt()).next(()=>n))}getLocalViewOfDocuments(e,t,n=Gt()){const i=_f();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,n).next(s=>{let a=Yy();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const n=_f();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Gt()))}populateOverlays(e,t,n){const i=[];return n.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{t.set(a,o)})})}computeViews(e,t,n,i){let s=bc();const a=$b(),o=function(){return $b()}();return t.forEach((l,u)=>{const c=n.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof Bd)?s=s.insert(u.key,u):c!==void 0?(a.set(u.key,c.mutation.getFieldMask()),Vb(c.mutation,u,c.mutation.getFieldMask(),$r.now())):a.set(u.key,Aa.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>a.set(u,c)),t.forEach((u,c)=>o.set(u,new mue(c,a.get(u)??null))),o))}recalculateAndSaveOverlays(e,t){const n=$b();let i=new rn((a,o)=>a-o),s=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const o of a)o.keys().forEach(l=>{const u=t.get(l);if(u===null)return;let c=n.get(l)||Aa.empty();c=o.applyToLocalView(u,c),n.set(l,c);const h=(i.get(o.batchId)||Gt()).add(l);i=i.insert(o.batchId,h)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,c=l.value,h=fq();c.forEach(d=>{if(!s.has(d)){const f=xq(t.get(d),n.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,h))}return Ce.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,i){return function(a){return at.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lq(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-s.size):Ce.resolve(_f());let o=g1,l=s;return a.next(u=>Ce.forEach(u,(c,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(c)?Ce.resolve():this.remoteDocumentCache.getEntry(e,c).next(d=>{l=l.insert(c,d)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Gt())).next(c=>({batchId:o,changes:dq(c)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new at(t)).next(n=>{let i=Yy();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const s=t.collectionGroup;let a=Yy();return this.indexManager.getCollectionParents(e,s).next(o=>Ce.forEach(o,l=>{const u=function(h,d){return new X0(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,i).next(c=>{c.forEach((h,d)=>{a=a.insert(h,d)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,i))).next(a=>{s.forEach((l,u)=>{const c=u.getKey();a.get(c)===null&&(a=a.insert(c,Yi.newInvalidDocument(c)))});let o=Yy();return a.forEach((l,u)=>{const c=s.get(l);c!==void 0&&Vb(c.mutation,u,Aa.empty(),$r.now()),_C(t,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gue{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ce.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:jl(i.createTime)}}(t)),Ce.resolve()}getNamedQuery(e,t){return Ce.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:sue(i.bundledQuery),readTime:jl(i.readTime)}}(t)),Ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vue{constructor(){this.overlays=new rn(at.comparator),this.qr=new Map}getOverlay(e,t){return Ce.resolve(this.overlays.get(t))}getOverlays(e,t){const n=_f();return Ce.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&n.set(i,s)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((i,s)=>{this.St(e,t,s)}),Ce.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),Ce.resolve()}getOverlaysForCollection(e,t,n){const i=_f(),s=t.length+1,a=new at(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>n&&i.set(l.getKey(),l)}return Ce.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let s=new rn((u,c)=>u-c);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>n){let c=s.get(u.largestBatchId);c===null&&(c=_f(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const o=_f(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>o.set(u,c)),!(o.size()>=i)););return Ce.resolve(o)}St(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new Fle(t,n));let s=this.qr.get(t);s===void 0&&(s=Gt(),this.qr.set(t,s)),this.qr.set(t,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yue{constructor(){this.sessionToken=Ri.EMPTY_BYTE_STRING}getSessionToken(e){return Ce.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.Qr=new Hn(ui.$r),this.Ur=new Hn(ui.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new ui(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.Gr(new ui(e,t))}zr(e,t){e.forEach(n=>this.removeReference(n,t))}jr(e){const t=new at(new Rr([])),n=new ui(t,e),i=new ui(t,e+1),s=[];return this.Ur.forEachInRange([n,i],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new at(new Rr([])),n=new ui(t,e),i=new ui(t,e+1);let s=Gt();return this.Ur.forEachInRange([n,i],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new ui(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class ui{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return at.comparator(e.key,t.key)||Ht(e.Yr,t.Yr)}static Kr(e,t){return Ht(e.Yr,t.Yr)||at.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bue{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Hn(ui.$r)}checkEmpty(e){return Ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new kle(s,t,n,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new ui(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ce.resolve(a)}lookupMutationBatch(e,t){return Ce.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.ei(n),s=i<0?0:i;return Ce.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ce.resolve(this.mutationQueue.length===0?Sk:this.tr-1)}getAllMutationBatches(e){return Ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ui(t,0),i=new ui(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,i],a=>{const o=this.Xr(a.Yr);s.push(o)}),Ce.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Hn(Ht);return t.forEach(i=>{const s=new ui(i,0),a=new ui(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],o=>{n=n.add(o.Yr)})}),Ce.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let s=n;at.isDocumentKey(s)||(s=s.child(""));const a=new ui(new at(s),0);let o=new Hn(Ht);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!n.isPrefixOf(u)&&(u.length===i&&(o=o.add(l.Yr)),!0)},a),Ce.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(n=>{const i=this.Xr(n);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ar(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Ce.forEach(t.mutations,i=>{const s=new ui(i.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new ui(t,0),i=this.Zr.firstAfterOrEqual(n);return Ce.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ce.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wue{constructor(e){this.ri=e,this.docs=function(){return new rn(at.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),s=i?i.size:0,a=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ce.resolve(n?n.document.mutableCopy():Yi.newInvalidDocument(t))}getEntries(e,t){let n=bc();return t.forEach(i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():Yi.newInvalidDocument(i))}),Ce.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let s=bc();const a=t.path,o=new at(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||Yoe(Xoe(c),n)<=0||(i.has(c.key)||_C(t,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Ce.resolve(s)}getAllFromCollectionGroup(e,t,n,i){mt(9500)}ii(e,t){return Ce.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new xue(this)}getSize(e){return Ce.resolve(this.size)}}class xue extends fue{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)}),Ce.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ue{constructor(e){this.persistence=e,this.si=new mp(t=>Nk(t),Dk),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.oi=0,this._i=new Fk,this.targetCount=0,this.ai=T0.ur()}forEachTarget(e,t){return this.si.forEach((n,i)=>t(i)),Ce.resolve()}getLastRemoteSnapshotVersion(e){return Ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ce.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Ce.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new T0(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ce.resolve()}updateTargetData(e,t){return this.Pr(t),Ce.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ce.resolve()}removeTargets(e,t,n){let i=0;const s=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),Ce.waitFor(s).next(()=>i)}getTargetCount(e){return Ce.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Ce.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Ce.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),Ce.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ce.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Ce.resolve(n)}containsKey(e,t){return Ce.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kq{constructor(e,t){this.ui={},this.overlays={},this.ci=new vC(0),this.li=!1,this.li=!0,this.hi=new yue,this.referenceDelegate=e(this),this.Pi=new _ue(this),this.indexManager=new aue,this.remoteDocumentCache=function(i){return new wue(i)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new iue(t),this.Ii=new gue(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vue,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new bue(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Ke("MemoryPersistence","Starting transaction:",e);const i=new Aue(this.ci.next());return this.referenceDelegate.Ei(),n(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return Ce.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Aue extends Joe{constructor(e){super(),this.currentSequenceNumber=e}}class Ok{constructor(e){this.persistence=e,this.Ri=new Fk,this.Vi=null}static mi(e){return new Ok(e)}get fi(){if(this.Vi)return this.Vi;throw mt(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Ce.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Ce.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ce.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ce.forEach(this.fi,n=>{const i=at.fromPath(n);return this.gi(e,i).next(s=>{s||t.removeEntry(i,wt.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Ce.or([()=>Ce.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class NS{constructor(e,t){this.persistence=e,this.pi=new mp(n=>tle(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=due(this,t)}static mi(e,t){return new NS(e,t)}Ei(){}di(e){return Ce.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(i=>n+i))}wr(e){let t=0;return this.pr(e,n=>{t++}).next(()=>t)}pr(e,t){return Ce.forEach(this.pi,(n,i)=>this.br(e,n,i).next(s=>s?Ce.resolve():t(i)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,a=>this.br(e,a,t).next(o=>{o||(n++,s.removeEntry(a,wt.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ce.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ce.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ce.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ce.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ZA(e.data.value)),t}br(e,t,n){return Ce.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return Ce.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=i}static As(e,t){let n=Gt(),i=Gt();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Bk(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eue{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sue{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return bae()?8:Zoe(ts())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,i){const s={result:null};return this.ys(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(e,t,i,n).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new Eue;return this.Ss(e,t,a).next(o=>{if(s.result=o,this.Vs)return this.bs(e,t,a,o.size)})}).next(()=>s.result)}bs(e,t,n,i){return n.documentReadCount<this.fs?(zp()<=qt.DEBUG&&Ke("QueryEngine","SDK will not create cache indexes for query:",jp(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ce.resolve()):(zp()<=qt.DEBUG&&Ke("QueryEngine","Query:",jp(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(zp()<=qt.DEBUG&&Ke("QueryEngine","The SDK decides to create cache indexes for query:",jp(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zl(t))):Ce.resolve())}ys(e,t){if(uL(t))return Ce.resolve(null);let n=zl(t);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=TS(t,null,"F"),n=zl(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const a=Gt(...s);return this.ps.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const u=this.Ds(t,o);return this.Cs(t,u,a,l.readTime)?this.ys(e,TS(t,null,"F")):this.vs(e,u,t,l)}))})))}ws(e,t,n,i){return uL(t)||i.isEqual(wt.min())?Ce.resolve(null):this.ps.getDocuments(e,n).next(s=>{const a=this.Ds(t,s);return this.Cs(t,a,n,i)?Ce.resolve(null):(zp()<=qt.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),jp(t)),this.vs(e,a,t,Koe(i,g1)).next(o=>o))})}Ds(e,t){let n=new Hn(cq(e));return t.forEach((i,s)=>{_C(e,s)&&(n=n.add(s))}),n}Cs(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,n){return zp()<=qt.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",jp(t)),this.ps.getDocumentsMatchingQuery(e,t,vd.min(),n)}vs(e,t,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk="LocalStore",Tue=3e8;class Cue{constructor(e,t,n,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new rn(Ht),this.xs=new mp(s=>Nk(s),Dk),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pue(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Nue(r,e,t,n){return new Cue(r,e,t,n)}async function Fq(r,e){const t=St(r);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(n))).next(s=>{const a=[],o=[];let l=Gt();for(const u of i){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return t.localDocuments.getDocuments(n,l).next(u=>({Ls:u,removedBatchIds:a,addedBatchIds:o}))})})}function Due(r,e){const t=St(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,u,c){const h=u.batch,d=h.keys();let f=Ce.resolve();return d.forEach(p=>{f=f.next(()=>c.getEntry(l,p)).next(g=>{const b=u.docVersions.get(p);ar(b!==null,48541),g.version.compareTo(b)<0&&(h.applyToRemoteDocument(g,u),g.isValidDocument()&&(g.setReadTime(u.commitVersion),c.addEntry(g)))})}),f.next(()=>o.mutationQueue.removeMutationBatch(l,h))}(t,n,e,s).next(()=>s.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=Gt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(n,i))})}function Oq(r){const e=St(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function Mue(r,e){const t=St(r),n=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const o=[];e.targetChanges.forEach((c,h)=>{const d=i.get(h);if(!d)return;o.push(t.Pi.removeMatchingKeys(s,c.removedDocuments,h).next(()=>t.Pi.addMatchingKeys(s,c.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(Ri.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,n)),i=i.insert(h,f),function(g,b,v){return g.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=Tue?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(d,f,c)&&o.push(t.Pi.updateTargetData(s,f))});let l=bc(),u=Gt();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(s,c))}),o.push(Iue(s,a,e.documentUpdates).next(c=>{l=c.ks,u=c.qs})),!n.isEqual(wt.min())){const c=t.Pi.getLastRemoteSnapshotVersion(s).next(h=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(c)}return Ce.waitFor(o).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(t.Ms=i,s))}function Iue(r,e,t){let n=Gt(),i=Gt();return t.forEach(s=>n=n.add(s)),e.getEntries(r,n).next(s=>{let a=bc();return t.forEach((o,l)=>{const u=s.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(wt.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):Ke(Lk,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{ks:a,qs:i}})}function Pue(r,e){const t=St(r);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=Sk),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Rue(r,e){const t=St(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return t.Pi.getTargetData(n,e).next(s=>s?(i=s,Ce.resolve(i)):t.Pi.allocateTargetId(n).next(a=>(i=new Kh(e,a,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=t.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n})}async function RM(r,e,t){const n=St(r),i=n.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",s,a=>n.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!K0(a))throw a;Ke(Lk,`Failed to update sequence numbers for target ${e}: ${a}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function _L(r,e,t){const n=St(r);let i=wt.min(),s=Gt();return n.persistence.runTransaction("Execute query","readwrite",a=>function(l,u,c){const h=St(l),d=h.xs.get(c);return d!==void 0?Ce.resolve(h.Ms.get(d)):h.Pi.getTargetData(u,c)}(n,a,zl(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(a,e,t?i:wt.min(),t?s:Gt())).next(o=>(kue(n,wle(e),o),{documents:o,Qs:s})))}function kue(r,e,t){let n=r.Os.get(e)||wt.min();t.forEach((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),r.Os.set(e,n)}class AL{constructor(){this.activeTargetIds=Tle()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fue{constructor(){this.Mo=new AL,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new AL,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oue{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL="ConnectivityMonitor";class SL{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ke(EL,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ke(EL,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rA=null;function kM(){return rA===null?rA=function(){return 268435456+Math.round(2147483648*Math.random())}():rA++,"0x"+rA.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN="RestConnection",Bue={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Lue{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===AS?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,t,n,i,s){const a=kM(),o=this.zo(e,t.toUriEncodedString());Ke(CN,`Sending RPC '${e}' ${a}:`,o,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(o),c=dp(u);return this.Jo(e,o,l,n,c).then(h=>(Ke(CN,`Received RPC '${e}' ${a}: `,h),h),h=>{throw _0(CN,`RPC '${e}' ${a} failed with error: `,h,"url: ",o,"request:",n),h})}Ho(e,t,n,i,s,a){return this.Go(e,t,n,i,s)}jo(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+G0}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),n&&n.headers.forEach((i,s)=>e[s]=i)}zo(e,t){const n=Bue[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ue{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i="WebChannelConnection";class Vue extends Lue{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,i,s){const a=kM();return new Promise((o,l)=>{const u=new Bj;u.setWithCredentials(!0),u.listenOnce(Lj.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case JA.NO_ERROR:const h=u.getResponseJson();Ke($i,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),o(h);break;case JA.TIMEOUT:Ke($i,`RPC '${e}' ${a} timed out`),l(new qe(Te.DEADLINE_EXCEEDED,"Request time out"));break;case JA.HTTP_ERROR:const d=u.getStatus();if(Ke($i,`RPC '${e}' ${a} failed with status:`,d,"response text:",u.getResponseText()),d>0){let f=u.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f==null?void 0:f.error;if(p&&p.status&&p.message){const g=function(v){const x=v.toLowerCase().replace(/_/g,"-");return Object.values(Te).indexOf(x)>=0?x:Te.UNKNOWN}(p.status);l(new qe(g,p.message))}else l(new qe(Te.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new qe(Te.UNAVAILABLE,"Connection failed."));break;default:mt(9055,{l_:e,streamId:a,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Ke($i,`RPC '${e}' ${a} completed.`)}});const c=JSON.stringify(i);Ke($i,`RPC '${e}' ${a} sending request:`,i),u.send(t,"POST",c,n,15)})}T_(e,t,n){const i=kM(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Uj(),o=Vj(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,n),l.encodeInitMessageHeaders=!0;const c=s.join("");Ke($i,`Creating RPC '${e}' stream ${i}: ${c}`,l);const h=a.createWebChannel(c,l);this.I_(h);let d=!1,f=!1;const p=new $ue({Yo:b=>{f?Ke($i,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(d||(Ke($i,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),Ke($i,`RPC '${e}' stream ${i} sending:`,b),h.send(b))},Zo:()=>h.close()}),g=(b,v,x)=>{b.listen(v,y=>{try{x(y)}catch(E){setTimeout(()=>{throw E},0)}})};return g(h,Xy.EventType.OPEN,()=>{f||(Ke($i,`RPC '${e}' stream ${i} transport opened.`),p.o_())}),g(h,Xy.EventType.CLOSE,()=>{f||(f=!0,Ke($i,`RPC '${e}' stream ${i} transport closed`),p.a_(),this.E_(h))}),g(h,Xy.EventType.ERROR,b=>{f||(f=!0,_0($i,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),p.a_(new qe(Te.UNAVAILABLE,"The operation could not be completed")))}),g(h,Xy.EventType.MESSAGE,b=>{var v;if(!f){const x=b.data[0];ar(!!x,16349);const y=x,E=(y==null?void 0:y.error)||((v=y[0])==null?void 0:v.error);if(E){Ke($i,`RPC '${e}' stream ${i} received error:`,E);const w=E.status;let A=function(N){const D=Cn[N];if(D!==void 0)return Aq(D)}(w),T=E.message;A===void 0&&(A=Te.INTERNAL,T="Unknown error status: "+w+" with message "+E.message),f=!0,p.a_(new qe(A,T)),h.close()}else Ke($i,`RPC '${e}' stream ${i} received:`,x),p.u_(x)}}),g(o,$j.STAT_EVENT,b=>{b.stat===_M.PROXY?Ke($i,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===_M.NOPROXY&&Ke($i,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.__()},0),p}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function NN(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(r){return new qle(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bq{constructor(e,t,n=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-n);i>0&&Ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL="PersistentStream";class Lq{constructor(e,t,n,i,s,a,o,l){this.Mi=e,this.S_=n,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Bq(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Te.RESOURCE_EXHAUSTED?(yc(t.toString()),yc("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.D_===t&&this.G_(n,i)},n=>{e(()=>{const i=new qe(Te.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{n(()=>this.z_(i))}),this.stream.onMessage(i=>{n(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ke(TL,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Ke(TL,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Uue extends Lq{constructor(e,t,n,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Wle(this.serializer,e),n=function(s){if(!("targetChange"in s))return wt.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?wt.min():a.readTime?jl(a.readTime):wt.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=PM(this.serializer),t.addTarget=function(s,a){let o;const l=a.target;if(o=CM(l)?{documents:Yle(s,l)}:{query:Qle(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=Tq(s,a.resumeToken);const u=DM(s,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(wt.min())>0){o.readTime=CS(s,a.snapshotVersion.toTimestamp());const u=DM(s,a.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const n=Zle(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=PM(this.serializer),t.removeTarget=e,this.q_(t)}}class zue extends Lq{constructor(e,t,n,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ar(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ar(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ar(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Xle(e.writeResults,e.commitTime),n=jl(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=PM(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>Kle(this.serializer,n))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jue{}class que extends jue{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new qe(Te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(e,MM(t,n),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new qe(Te.UNKNOWN,s.toString())})}Ho(e,t,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(e,MM(t,n),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new qe(Te.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Hue{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yc(t),this.aa=!1):Ke("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="RemoteStore";class Gue{constructor(e,t,n,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{n.enqueueAndForget(async()=>{pp(this)&&(Ke(rp,"Restarting streams for network reachability change."),await async function(l){const u=St(l);u.Ea.add(4),await Vx(u),u.Ra.set("Unknown"),u.Ea.delete(4),await CC(u)}(this))})}),this.Ra=new Hue(n,i)}}async function CC(r){if(pp(r))for(const e of r.da)await e(!0)}async function Vx(r){for(const e of r.da)await e(!1)}function $q(r,e){const t=St(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),zk(t)?Uk(t):Y0(t).O_()&&Vk(t,e))}function $k(r,e){const t=St(r),n=Y0(t);t.Ia.delete(e),n.O_()&&Vq(t,e),t.Ia.size===0&&(n.O_()?n.L_():pp(t)&&t.Ra.set("Unknown"))}function Vk(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(wt.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Y0(r).Y_(e)}function Vq(r,e){r.Va.Ue(e),Y0(r).Z_(e)}function Uk(r){r.Va=new Vle({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Y0(r).start(),r.Ra.ua()}function zk(r){return pp(r)&&!Y0(r).x_()&&r.Ia.size>0}function pp(r){return St(r).Ea.size===0}function Uq(r){r.Va=void 0}async function Wue(r){r.Ra.set("Online")}async function Kue(r){r.Ia.forEach((e,t)=>{Vk(r,e)})}async function Xue(r,e){Uq(r),zk(r)?(r.Ra.ha(e),Uk(r)):r.Ra.set("Unknown")}async function Yue(r,e,t){if(r.Ra.set("Online"),e instanceof Sq&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))}(r,e)}catch(n){Ke(rp,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await DS(r,n)}else if(e instanceof rE?r.Va.Ze(e):e instanceof Eq?r.Va.st(e):r.Va.tt(e),!t.isEqual(wt.min()))try{const n=await Oq(r.localStore);t.compareTo(n)>=0&&await function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.Ia.get(u);c&&s.Ia.set(u,c.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,u)=>{const c=s.Ia.get(l);if(!c)return;s.Ia.set(l,c.withResumeToken(Ri.EMPTY_BYTE_STRING,c.snapshotVersion)),Vq(s,l);const h=new Kh(c.target,l,u,c.sequenceNumber);Vk(s,h)}),s.remoteSyncer.applyRemoteEvent(o)}(r,t)}catch(n){Ke(rp,"Failed to raise snapshot:",n),await DS(r,n)}}async function DS(r,e,t){if(!K0(e))throw e;r.Ea.add(1),await Vx(r),r.Ra.set("Offline"),t||(t=()=>Oq(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{Ke(rp,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await CC(r)})}function zq(r,e){return e().catch(t=>DS(r,t,e))}async function NC(r){const e=St(r),t=xd(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Sk;for(;Que(e);)try{const i=await Pue(e.localStore,n);if(i===null){e.Ta.length===0&&t.L_();break}n=i.batchId,Jue(e,i)}catch(i){await DS(e,i)}jq(e)&&qq(e)}function Que(r){return pp(r)&&r.Ta.length<10}function Jue(r,e){r.Ta.push(e);const t=xd(r);t.O_()&&t.X_&&t.ea(e.mutations)}function jq(r){return pp(r)&&!xd(r).x_()&&r.Ta.length>0}function qq(r){xd(r).start()}async function Zue(r){xd(r).ra()}async function ece(r){const e=xd(r);for(const t of r.Ta)e.ea(t.mutations)}async function tce(r,e,t){const n=r.Ta.shift(),i=Pk.from(n,e,t);await zq(r,()=>r.remoteSyncer.applySuccessfulWrite(i)),await NC(r)}async function rce(r,e){e&&xd(r).X_&&await async function(n,i){if(function(a){return Ble(a)&&a!==Te.ABORTED}(i.code)){const s=n.Ta.shift();xd(n).B_(),await zq(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i)),await NC(n)}}(r,e),jq(r)&&qq(r)}async function CL(r,e){const t=St(r);t.asyncQueue.verifyOperationInProgress(),Ke(rp,"RemoteStore received new credentials");const n=pp(t);t.Ea.add(3),await Vx(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await CC(t)}async function nce(r,e){const t=St(r);e?(t.Ea.delete(2),await CC(t)):e||(t.Ea.add(2),await Vx(t),t.Ra.set("Unknown"))}function Y0(r){return r.ma||(r.ma=function(t,n,i){const s=St(t);return s.sa(),new Uue(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(r.datastore,r.asyncQueue,{Xo:Wue.bind(null,r),t_:Kue.bind(null,r),r_:Xue.bind(null,r),H_:Yue.bind(null,r)}),r.da.push(async e=>{e?(r.ma.B_(),zk(r)?Uk(r):r.Ra.set("Unknown")):(await r.ma.stop(),Uq(r))})),r.ma}function xd(r){return r.fa||(r.fa=function(t,n,i){const s=St(t);return s.sa(),new zue(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:Zue.bind(null,r),r_:rce.bind(null,r),ta:ece.bind(null,r),na:tce.bind(null,r)}),r.da.push(async e=>{e?(r.fa.B_(),await NC(r)):(await r.fa.stop(),r.Ta.length>0&&(Ke(rp,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))})),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,t,n,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new nc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,s){const a=Date.now()+n,o=new jk(e,t,a,i,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(Te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qk(r,e){if(yc("AsyncQueue",`${e}: ${r}`),K0(r))return new qe(Te.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{static emptySet(e){return new kg(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||at.comparator(t.key,n.key):(t,n)=>at.comparator(t.key,n.key),this.keyedMap=Yy(),this.sortedSet=new rn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof kg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new kg;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(){this.ga=new rn(at.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):mt(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class C0{constructor(e,t,n,i,s,a,o,l,u){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,n,i,s){const a=[];return t.forEach(o=>{a.push({type:0,doc:o})}),new C0(e,t,kg.emptySet(t),a,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xC(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ice{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class sce{constructor(){this.queries=DL(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const i=St(t),s=i.queries;i.queries=DL(),s.forEach((a,o)=>{for(const l of o.Sa)l.onError(n)})})(this,new qe(Te.ABORTED,"Firestore shutting down"))}}function DL(){return new mp(r=>uq(r),xC)}async function Hk(r,e){const t=St(r);let n=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(n=2):(s=new ice,n=e.Da()?0:1);try{switch(n){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const o=qk(a,`Initialization of query '${jp(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&Wk(t)}async function Gk(r,e){const t=St(r),n=e.query;let i=3;const s=t.queries.get(n);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function ace(r,e){const t=St(r);let n=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(n=!0);a.wa=i}}n&&Wk(t)}function oce(r,e,t){const n=St(r),i=n.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);n.queries.delete(e)}function Wk(r){r.Ca.forEach(e=>{e.next()})}var FM,ML;(ML=FM||(FM={})).Ma="default",ML.Cache="cache";class Kk{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new C0(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=C0.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==FM.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hq{constructor(e){this.key=e}}class Gq{constructor(e){this.key=e}}class lce{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Gt(),this.mutatedKeys=Gt(),this.eu=cq(e),this.tu=new kg(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new NL,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,h)=>{const d=i.get(c),f=_C(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let b=!1;d&&f?d.data.isEqual(f.data)?p!==g&&(n.track({type:3,doc:f}),b=!0):this.su(d,f)||(n.track({type:2,doc:f}),b=!0,(l&&this.eu(f,l)>0||u&&this.eu(f,u)<0)&&(o=!0)):!d&&f?(n.track({type:0,doc:f}),b=!0):d&&!f&&(n.track({type:1,doc:d}),b=!0,(l||u)&&(o=!0)),b&&(f?(a=a.add(f),s=g?s.add(c):s.delete(c)):(a=a.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const c=this.query.limitType==="F"?a.last():a.first();a=a.delete(c.key),s=s.delete(c.key),n.track({type:1,doc:c})}return{tu:a,iu:n,Cs:o,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((c,h)=>function(f,p){const g=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt(20277,{Rt:b})}};return g(f)-g(p)}(c.type,h.type)||this.eu(c.doc,h.doc)),this.ou(n),i=i??!1;const o=t&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,a.length!==0||u?{snapshot:new C0(this.query,e.tu,s,a,e.mutatedKeys,l===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new NL,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Gt(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const t=[];return e.forEach(n=>{this.Xa.has(n)||t.push(new Gq(n))}),this.Xa.forEach(n=>{e.has(n)||t.push(new Hq(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=Gt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return C0.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Xk="SyncEngine";class uce{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class cce{constructor(e){this.key=e,this.hu=!1}}class hce{constructor(e,t,n,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new mp(o=>uq(o),xC),this.Iu=new Map,this.Eu=new Set,this.du=new rn(at.comparator),this.Au=new Map,this.Ru=new Fk,this.Vu={},this.mu=new Map,this.fu=T0.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function dce(r,e,t=!0){const n=Jq(r);let i;const s=n.Tu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Wq(n,e,t,!0),i}async function fce(r,e){const t=Jq(r);await Wq(t,e,!0,!1)}async function Wq(r,e,t,n){const i=await Rue(r.localStore,zl(e)),s=i.targetId,a=r.sharedClientState.addLocalQueryTarget(s,t);let o;return n&&(o=await mce(r,e,s,a==="current",i.resumeToken)),r.isPrimaryClient&&t&&$q(r.remoteStore,i),o}async function mce(r,e,t,n,i){r.pu=(h,d,f)=>async function(g,b,v,x){let y=b.view.ru(v);y.Cs&&(y=await _L(g.localStore,b.query,!1).then(({documents:T})=>b.view.ru(T,y)));const E=x&&x.targetChanges.get(b.targetId),w=x&&x.targetMismatches.get(b.targetId)!=null,A=b.view.applyChanges(y,g.isPrimaryClient,E,w);return PL(g,b.targetId,A.au),A.snapshot}(r,h,d,f);const s=await _L(r.localStore,e,!0),a=new lce(e,s.Qs),o=a.ru(s.documents),l=$x.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),u=a.applyChanges(o,r.isPrimaryClient,l);PL(r,t,u.au);const c=new uce(e,t,a);return r.Tu.set(e,c),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),u.snapshot}async function pce(r,e,t){const n=St(r),i=n.Tu.get(e),s=n.Iu.get(i.targetId);if(s.length>1)return n.Iu.set(i.targetId,s.filter(a=>!xC(a,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await RM(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),t&&$k(n.remoteStore,i.targetId),OM(n,i.targetId)}).catch(W0)):(OM(n,i.targetId),await RM(n.localStore,i.targetId,!0))}async function gce(r,e){const t=St(r),n=t.Tu.get(e),i=t.Iu.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),$k(t.remoteStore,n.targetId))}async function vce(r,e,t){const n=Ece(r);try{const i=await function(a,o){const l=St(a),u=$r.now(),c=o.reduce((f,p)=>f.add(p.key),Gt());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=bc(),g=Gt();return l.Ns.getEntries(f,c).next(b=>{p=b,p.forEach((v,x)=>{x.isValidDocument()||(g=g.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,p)).next(b=>{h=b;const v=[];for(const x of o){const y=Ple(x,h.get(x.key).overlayedDocument);y!=null&&v.push(new Bd(x.key,y,tq(y.value.mapValue),lo.exists(!0)))}return l.mutationQueue.addMutationBatch(f,u,v,o)}).next(b=>{d=b;const v=b.applyToLocalDocumentSet(h,g);return l.documentOverlayCache.saveOverlays(f,b.batchId,v)})}).then(()=>({batchId:d.batchId,changes:dq(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(a,o,l){let u=a.Vu[a.currentUser.toKey()];u||(u=new rn(Ht)),u=u.insert(o,l),a.Vu[a.currentUser.toKey()]=u}(n,i.batchId,t),await Ux(n,i.changes),await NC(n.remoteStore)}catch(i){const s=qk(i,"Failed to persist write");t.reject(s)}}async function Kq(r,e){const t=St(r);try{const n=await Mue(t.localStore,e);e.targetChanges.forEach((i,s)=>{const a=t.Au.get(s);a&&(ar(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?ar(a.hu,14607):i.removedDocuments.size>0&&(ar(a.hu,42227),a.hu=!1))}),await Ux(t,n,e)}catch(n){await W0(n)}}function IL(r,e,t){const n=St(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.Tu.forEach((s,a)=>{const o=a.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const l=St(a);l.onlineState=o;let u=!1;l.queries.forEach((c,h)=>{for(const d of h.Sa)d.va(o)&&(u=!0)}),u&&Wk(l)}(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function yce(r,e,t){const n=St(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.Au.get(e),s=i&&i.key;if(s){let a=new rn(at.comparator);a=a.insert(s,Yi.newNoDocument(s,wt.min()));const o=Gt().add(s),l=new SC(wt.min(),new Map,new rn(Ht),a,o);await Kq(n,l),n.du=n.du.remove(s),n.Au.delete(e),Yk(n)}else await RM(n.localStore,e,!1).then(()=>OM(n,e,t)).catch(W0)}async function bce(r,e){const t=St(r),n=e.batch.batchId;try{const i=await Due(t.localStore,e);Yq(t,n,null),Xq(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Ux(t,i)}catch(i){await W0(i)}}async function wce(r,e,t){const n=St(r);try{const i=await function(a,o){const l=St(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,o).next(h=>(ar(h!==null,37113),c=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(n.localStore,e);Yq(n,e,t),Xq(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Ux(n,i)}catch(i){await W0(i)}}function Xq(r,e){(r.mu.get(e)||[]).forEach(t=>{t.resolve()}),r.mu.delete(e)}function Yq(r,e,t){const n=St(r);let i=n.Vu[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function OM(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach(n=>{r.Ru.containsKey(n)||Qq(r,n)})}function Qq(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&($k(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Yk(r))}function PL(r,e,t){for(const n of t)n instanceof Hq?(r.Ru.addReference(n.key,e),xce(r,n)):n instanceof Gq?(Ke(Xk,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||Qq(r,n.key)):mt(19791,{wu:n})}function xce(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(Ke(Xk,"New document in limbo: "+t),r.Eu.add(n),Yk(r))}function Yk(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new at(Rr.fromString(e)),n=r.fu.next();r.Au.set(n,new cce(t)),r.du=r.du.insert(t,n),$q(r.remoteStore,new Kh(zl(wC(t.path)),n,"TargetPurposeLimboResolution",vC.ce))}}async function Ux(r,e,t){const n=St(r),i=[],s=[],a=[];n.Tu.isEmpty()||(n.Tu.forEach((o,l)=>{a.push(n.pu(l,e,t).then(u=>{var c;if((u||t)&&n.isPrimaryClient){const h=u?!u.fromCache:(c=t==null?void 0:t.targetChanges.get(l.targetId))==null?void 0:c.current;n.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=Bk.As(l.targetId,u);s.push(h)}}))}),await Promise.all(a),n.Pu.H_(i),await async function(l,u){const c=St(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Ce.forEach(u,d=>Ce.forEach(d.Es,f=>c.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>Ce.forEach(d.ds,f=>c.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!K0(h))throw h;Ke(Lk,"Failed to update sequence numbers: "+h)}for(const h of u){const d=h.targetId;if(!h.fromCache){const f=c.Ms.get(d),p=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(p);c.Ms=c.Ms.insert(d,g)}}}(n.localStore,s))}async function _ce(r,e){const t=St(r);if(!t.currentUser.isEqual(e)){Ke(Xk,"User change. New user:",e.toKey());const n=await Fq(t.localStore,e);t.currentUser=e,function(s,a){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new qe(Te.CANCELLED,a))})}),s.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Ux(t,n.Ls)}}function Ace(r,e){const t=St(r),n=t.Au.get(e);if(n&&n.hu)return Gt().add(n.key);{let i=Gt();const s=t.Iu.get(e);if(!s)return i;for(const a of s){const o=t.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}function Jq(r){const e=St(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Kq.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ace.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yce.bind(null,e),e.Pu.H_=ace.bind(null,e.eventManager),e.Pu.yu=oce.bind(null,e.eventManager),e}function Ece(r){const e=St(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bce.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wce.bind(null,e),e}class MS{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=TC(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Nue(this.persistence,new Sue,e.initialUser,this.serializer)}Cu(e){return new kq(Ok.mi,this.serializer)}Du(e){return new Fue}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}MS.provider={build:()=>new MS};class Sce extends MS{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ar(this.persistence.referenceDelegate instanceof NS,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new cue(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Bs.withCacheSize(this.cacheSizeBytes):Bs.DEFAULT;return new kq(n=>NS.mi(n,t),this.serializer)}}class BM{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>IL(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=_ce.bind(null,this.syncEngine),await nce(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sce}()}createDatastore(e){const t=TC(e.databaseInfo.databaseId),n=function(s){return new Vue(s)}(e.databaseInfo);return function(s,a,o,l){return new que(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,i,s,a,o){return new Gue(n,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,t=>IL(this.syncEngine,t,0),function(){return SL.v()?new SL:new Oue}())}createSyncEngine(e,t){return function(i,s,a,o,l,u,c){const h=new hce(i,s,a,o,l,u);return c&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=St(i);Ke(rp,"RemoteStore shutting down."),s.Ea.add(5),await Vx(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}BM.provider={build:()=>new BM};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):yc("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d="FirestoreClient";class Tce{constructor(e,t,n,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Ki.UNAUTHENTICATED,this.clientId=Ek.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async a=>{Ke(_d,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(Ke(_d,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new nc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=qk(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function DN(r,e){r.asyncQueue.verifyOperationInProgress(),Ke(_d,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(async i=>{n.isEqual(i)||(await Fq(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function RL(r,e){r.asyncQueue.verifyOperationInProgress();const t=await Cce(r);Ke(_d,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(n=>CL(e.remoteStore,n)),r.setAppCheckTokenChangeListener((n,i)=>CL(e.remoteStore,i)),r._onlineComponents=e}async function Cce(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Ke(_d,"Using user provided OfflineComponentProvider");try{await DN(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Te.FAILED_PRECONDITION||i.code===Te.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;_0("Error using user provided cache. Falling back to memory cache: "+t),await DN(r,new MS)}}else Ke(_d,"Using default OfflineComponentProvider"),await DN(r,new Sce(void 0));return r._offlineComponents}async function Zq(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Ke(_d,"Using user provided OnlineComponentProvider"),await RL(r,r._uninitializedComponentsProvider._online)):(Ke(_d,"Using default OnlineComponentProvider"),await RL(r,new BM))),r._onlineComponents}function Nce(r){return Zq(r).then(e=>e.syncEngine)}async function IS(r){const e=await Zq(r),t=e.eventManager;return t.onListen=dce.bind(null,e.syncEngine),t.onUnlisten=pce.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=fce.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=gce.bind(null,e.syncEngine),t}function Dce(r,e,t={}){const n=new nc;return r.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,u){const c=new Qk({next:d=>{c.Nu(),a.enqueueAndForget(()=>Gk(s,h));const f=d.docs.has(o);!f&&d.fromCache?u.reject(new qe(Te.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&l&&l.source==="server"?u.reject(new qe(Te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new Kk(wC(o.path),c,{includeMetadataChanges:!0,qa:!0});return Hk(s,h)}(await IS(r),r.asyncQueue,e,t,n)),n.promise}function Mce(r,e,t={}){const n=new nc;return r.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,u){const c=new Qk({next:d=>{c.Nu(),a.enqueueAndForget(()=>Gk(s,h)),d.fromCache&&l.source==="server"?u.reject(new qe(Te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new Kk(o,c,{includeMetadataChanges:!0,qa:!0});return Hk(s,h)}(await IS(r),r.asyncQueue,e,t,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eH(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tH="firestore.googleapis.com",FL=!0;class OL{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new qe(Te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tH,this.ssl=FL}else this.host=e.host,this.ssl=e.ssl??FL;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Rq;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lue)throw new qe(Te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Woe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eH(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new qe(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new qe(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new qe(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class DC{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new OL({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(Te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new qe(Te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new OL(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Boe;switch(n.type){case"firstParty":return new Uoe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new qe(Te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=kL.get(t);n&&(Ke("ComponentProvider","Removing Datastore"),kL.delete(t),n.terminate())}(this),Promise.resolve()}}function Ice(r,e,t,n={}){var u;r=Gs(r,DC);const i=dp(e),s=r._getSettings(),a={...s,emulatorOptions:r._getEmulatorOptions()},o=`${e}:${t}`;i&&(yk(`https://${o}`),bk("Firestore",!0)),s.host!==tH&&s.host!==o&&_0("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:i,emulatorOptions:n};if(!Zm(l,a)&&(r._setSettings(l),n.mockUserToken)){let c,h;if(typeof n.mockUserToken=="string")c=n.mockUserToken,h=Ki.MOCK_USER;else{c=Mj(n.mockUserToken,(u=r._app)==null?void 0:u.options.projectId);const d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new qe(Te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ki(d)}r._authCredentials=new Loe(new jj(c,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Dc(this.firestore,e,this._query)}}class mn{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ud(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}toJSON(){return{type:mn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Bx(t,mn._jsonSchema))return new mn(e,n||null,new at(Rr.fromString(t.referencePath)))}}mn._jsonSchemaVersion="firestore/documentReference/1.0",mn._jsonSchema={type:Pn("string",mn._jsonSchemaVersion),referencePath:Pn("string")};class ud extends Dc{constructor(e,t,n){super(e,t,wC(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new at(e))}withConverter(e){return new ud(this.firestore,e,this._path)}}function wc(r,e,...t){if(r=Wn(r),qj("collection","path",e),r instanceof DC){const n=Rr.fromString(e,...t);return X4(n),new ud(r,null,n)}{if(!(r instanceof mn||r instanceof ud))throw new qe(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Rr.fromString(e,...t));return X4(n),new ud(r.firestore,null,n)}}function Ad(r,e,...t){if(r=Wn(r),arguments.length===1&&(e=Ek.newId()),qj("doc","path",e),r instanceof DC){const n=Rr.fromString(e,...t);return K4(n),new mn(r,null,new at(n))}{if(!(r instanceof mn||r instanceof ud))throw new qe(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Rr.fromString(e,...t));return K4(n),new mn(r.firestore,r instanceof ud?r.converter:null,new at(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL="AsyncQueue";class LL{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Bq(this,"async_queue_retry"),this._c=()=>{const n=NN();n&&Ke(BL,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=NN();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=NN();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new nc;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!K0(e))throw e;Ke(BL,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,yc("INTERNAL UNHANDLED ERROR: ",$L(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=jk.createAndSchedule(this,e,t,n,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&mt(47125,{Pc:$L(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function $L(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(r){return function(t,n){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1}(r,["next","error","complete"])}class xc extends DC{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new LL,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new LL(e),this._firestoreClient=void 0,await e}}}function Pce(r,e){const t=typeof r=="object"?r:_k(),n=typeof r=="string"?r:AS,i=pC(t,"firestore").getImmediate({identifier:n});if(!i._initialized){const s=Cj("firestore");s&&Ice(i,...s)}return i}function MC(r){if(r._terminated)throw new qe(Te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Rce(r),r._firestoreClient}function Rce(r){var n,i,s;const e=r._freezeSettings(),t=function(o,l,u,c){return new ile(o,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,eH(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(r._databaseId,((n=r._app)==null?void 0:n.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new Tce(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this._byteString=e}static fromBase64String(e){try{return new to(Ri.fromBase64String(e))}catch(t){throw new qe(Te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new to(Ri.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:to._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Bx(e,to._jsonSchema))return to.fromBase64String(e.bytes)}}to._jsonSchemaVersion="firestore/bytes/1.0",to._jsonSchema={type:Pn("string",to._jsonSchemaVersion),bytes:Pn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new qe(Te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ti(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new qe(Te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new qe(Te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ql._jsonSchemaVersion}}static fromJSON(e){if(Bx(e,ql._jsonSchema))return new ql(e.latitude,e.longitude)}}ql._jsonSchemaVersion="firestore/geoPoint/1.0",ql._jsonSchema={type:Pn("string",ql._jsonSchemaVersion),latitude:Pn("number"),longitude:Pn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Hl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Bx(e,Hl._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Hl(e.vectorValues);throw new qe(Te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hl._jsonSchemaVersion="firestore/vectorValue/1.0",Hl._jsonSchema={type:Pn("string",Hl._jsonSchemaVersion),vectorValues:Pn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kce=/^__.*__$/;class Fce{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Bd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lx(e,this.data,t,this.fieldTransforms)}}class rH{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Bd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function nH(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt(40011,{Ac:r})}}class Jk{constructor(e,t,n,i,s,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Jk({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return PS(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(nH(this.Ac)&&kce.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Oce{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||TC(e)}Cc(e,t,n,i=!1){return new Jk({Ac:e,methodName:t,Dc:n,path:Ti.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function PC(r){const e=r._freezeSettings(),t=TC(r._databaseId);return new Oce(r._databaseId,!!e.ignoreUndefinedProperties,t)}function iH(r,e,t,n,i,s={}){const a=r.Cc(s.merge||s.mergeFields?2:0,e,t,i);tF("Data must be an object, but it was:",a,n);const o=sH(n,a);let l,u;if(s.merge)l=new Aa(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const c=[];for(const h of s.mergeFields){const d=LM(e,h,t);if(!a.contains(d))throw new qe(Te.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);oH(c,d)||c.push(d)}l=new Aa(c),u=a.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=a.fieldTransforms;return new Fce(new Vs(o),l,u)}class RC extends zx{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof RC}}class Zk extends zx{_toFieldTransform(e){return new wq(e.path,new x1)}isEqual(e){return e instanceof Zk}}class eF extends zx{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new E1(e.serializer,pq(e.serializer,this.Fc));return new wq(e.path,t)}isEqual(e){return e instanceof eF&&this.Fc===e.Fc}}function Bce(r,e,t,n){const i=r.Cc(1,e,t);tF("Data must be an object, but it was:",i,n);const s=[],a=Vs.empty();Od(n,(l,u)=>{const c=rF(e,l,t);u=Wn(u);const h=i.yc(c);if(u instanceof RC)s.push(c);else{const d=jx(u,h);d!=null&&(s.push(c),a.set(c,d))}});const o=new Aa(s);return new rH(a,o,i.fieldTransforms)}function Lce(r,e,t,n,i,s){const a=r.Cc(1,e,t),o=[LM(e,n,t)],l=[i];if(s.length%2!=0)throw new qe(Te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)o.push(LM(e,s[d])),l.push(s[d+1]);const u=[],c=Vs.empty();for(let d=o.length-1;d>=0;--d)if(!oH(u,o[d])){const f=o[d];let p=l[d];p=Wn(p);const g=a.yc(f);if(p instanceof RC)u.push(f);else{const b=jx(p,g);b!=null&&(u.push(f),c.set(f,b))}}const h=new Aa(u);return new rH(c,h,a.fieldTransforms)}function $ce(r,e,t,n=!1){return jx(t,r.Cc(n?4:3,e))}function jx(r,e){if(aH(r=Wn(r)))return tF("Unsupported field value:",e,r),sH(r,e);if(r instanceof zx)return function(n,i){if(!nH(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,i){const s=[];let a=0;for(const o of n){let l=jx(o,i.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(r,e)}return function(n,i){if((n=Wn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return pq(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=$r.fromDate(n);return{timestampValue:CS(i.serializer,s)}}if(n instanceof $r){const s=new $r(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:CS(i.serializer,s)}}if(n instanceof ql)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof to)return{bytesValue:Tq(i.serializer,n._byteString)};if(n instanceof mn){const s=i.databaseId,a=n.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:kk(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Hl)return function(a,o){return{mapValue:{fields:{[Zj]:{stringValue:eq},[ES]:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return Mk(o.serializer,u)})}}}}}}(n,i);throw i.Sc(`Unsupported field value: ${gC(n)}`)}(r,e)}function sH(r,e){const t={};return Wj(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Od(r,(n,i)=>{const s=jx(i,e.mc(n));s!=null&&(t[n]=s)}),{mapValue:{fields:t}}}function aH(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof $r||r instanceof ql||r instanceof to||r instanceof mn||r instanceof zx||r instanceof Hl)}function tF(r,e,t){if(!aH(t)||!Hj(t)){const n=gC(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function LM(r,e,t){if((e=Wn(e))instanceof IC)return e._internalPath;if(typeof e=="string")return rF(r,e);throw PS("Field path arguments must be of type string or ",r,!1,void 0,t)}const Vce=new RegExp("[~\\*/\\[\\]]");function rF(r,e,t){if(e.search(Vce)>=0)throw PS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new IC(...e.split("."))._internalPath}catch{throw PS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function PS(r,e,t,n,i){const s=n&&!n.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${n}`),a&&(l+=` in document ${i}`),l+=")"),new qe(Te.INVALID_ARGUMENT,o+r+l)}function oH(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{constructor(e,t,n,i,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Uce(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Uce extends lH{data(){return super.data()}}function kC(r,e){return typeof e=="string"?rF(r,e):e instanceof IC?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uH(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new qe(Te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nF{}class iF extends nF{}function qx(r,e,...t){let n=[];e instanceof nF&&n.push(e),n=n.concat(t),function(s){const a=s.filter(l=>l instanceof sF).length,o=s.filter(l=>l instanceof FC).length;if(a>1||a>0&&o>0)throw new qe(Te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)r=i._apply(r);return r}class FC extends iF{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new FC(e,t,n)}_apply(e){const t=this._parse(e);return hH(e._query,t),new Dc(e.firestore,e.converter,NM(e._query,t))}_parse(e){const t=PC(e.firestore);return function(s,a,o,l,u,c,h){let d;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new qe(Te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){zL(h,c);const p=[];for(const g of h)p.push(UL(l,s,g));d={arrayValue:{values:p}}}else d=UL(l,s,h)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||zL(h,c),d=$ce(o,a,h,c==="in"||c==="not-in");return In.create(u,c,d)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function cH(r,e,t){const n=e,i=kC("where",r);return FC._create(i,n,t)}class sF extends nF{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new sF(e,t)}_parse(e){const t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:Ko.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)hH(a,l),a=NM(a,l)}(e._query,t),new Dc(e.firestore,e.converter,NM(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class aF extends iF{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new aF(e,t)}_apply(e){const t=function(i,s,a){if(i.startAt!==null)throw new qe(Te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new qe(Te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new w1(s,a)}(e._query,this._field,this._direction);return new Dc(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new X0(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function oF(r,e="asc"){const t=e,n=kC("orderBy",r);return aF._create(n,t)}class lF extends iF{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new lF(e,t,n)}_apply(e){return new Dc(e.firestore,e.converter,TS(e._query,this._limit,this._limitType))}}function zce(r){return lF._create("limit",r,"F")}function UL(r,e,t){if(typeof(t=Wn(t))=="string"){if(t==="")throw new qe(Te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lq(e)&&t.indexOf("/")!==-1)throw new qe(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Rr.fromString(t));if(!at.isDocumentKey(n))throw new qe(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return nL(r,new at(n))}if(t instanceof mn)return nL(r,t._key);throw new qe(Te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gC(t)}.`)}function zL(r,e){if(!Array.isArray(r)||r.length===0)throw new qe(Te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hH(r,e){const t=function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(r.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new qe(Te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new qe(Te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class jce{convertValue(e,t="none"){switch(wd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw mt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Od(e,(i,s)=>{n[i]=this.convertValue(s,t)}),n}convertVectorValue(e){var n,i,s;const t=(s=(i=(n=e.fields)==null?void 0:n[ES].arrayValue)==null?void 0:i.values)==null?void 0:s.map(a=>xn(a.doubleValue));return new Hl(t)}convertGeoPoint(e){return new ql(xn(e.latitude),xn(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=bC(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(v1(e));default:return null}}convertTimestamp(e){const t=yd(e);return new $r(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Rr.fromString(e);ar(Pq(n),9688,{name:e});const i=new y1(n.get(1),n.get(3)),s=new at(n.popFirst(5));return i.isEqual(t)||yc(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dH(r,e,t){let n;return n=r?r.toFirestore(e):e,n}class Jy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qm extends lH{constructor(e,t,n,i,s,a){super(e,t,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new nE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(kC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(Te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=qm._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}qm._jsonSchemaVersion="firestore/documentSnapshot/1.0",qm._jsonSchema={type:Pn("string",qm._jsonSchemaVersion),bundleSource:Pn("string","DocumentSnapshot"),bundleName:Pn("string"),bundle:Pn("string")};class nE extends qm{data(e={}){return super.data(e)}}class Hm{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Jy(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new nE(this._firestore,this._userDataWriter,n.key,n,new Jy(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new qe(Te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const l=new nE(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Jy(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new nE(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Jy(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),c=a.indexOf(o.doc.key)),{type:qce(o.type),doc:l,oldIndex:u,newIndex:c}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(Te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Hm._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ek.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function qce(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fH(r){r=Gs(r,mn);const e=Gs(r.firestore,xc);return Dce(MC(e),r._key).then(t=>gH(e,r,t))}Hm._jsonSchemaVersion="firestore/querySnapshot/1.0",Hm._jsonSchema={type:Pn("string",Hm._jsonSchemaVersion),bundleSource:Pn("string","QuerySnapshot"),bundleName:Pn("string"),bundle:Pn("string")};class uF extends jce{constructor(e){super(),this.firestore=e}convertBytes(e){return new to(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,t)}}function OC(r){r=Gs(r,Dc);const e=Gs(r.firestore,xc),t=MC(e),n=new uF(e);return uH(r._query),Mce(t,r._query).then(i=>new Hm(e,n,r,i))}function Hce(r,e,t){r=Gs(r,mn);const n=Gs(r.firestore,xc),i=dH(r.converter,e);return LC(n,[iH(PC(n),"setDoc",r._key,i,r.converter!==null,t).toMutation(r._key,lo.none())])}function mH(r,e,t,...n){r=Gs(r,mn);const i=Gs(r.firestore,xc),s=PC(i);let a;return a=typeof(e=Wn(e))=="string"||e instanceof IC?Lce(s,"updateDoc",r._key,e,t,n):Bce(s,"updateDoc",r._key,e),LC(i,[a.toMutation(r._key,lo.exists(!0))])}function pH(r){return LC(Gs(r.firestore,xc),[new Ik(r._key,lo.none())])}function BC(r,e){const t=Gs(r.firestore,xc),n=Ad(r),i=dH(r.converter,e);return LC(t,[iH(PC(r.firestore),"addDoc",n._key,i,r.converter!==null,{}).toMutation(n._key,lo.exists(!1))]).then(()=>n)}function Gce(r,...e){var l,u,c;r=Wn(r);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||VL(e[n])||(t=e[n++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(VL(e[n])){const h=e[n];e[n]=(l=h.next)==null?void 0:l.bind(h),e[n+1]=(u=h.error)==null?void 0:u.bind(h),e[n+2]=(c=h.complete)==null?void 0:c.bind(h)}let s,a,o;if(r instanceof mn)a=Gs(r.firestore,xc),o=wC(r._key.path),s={next:h=>{e[n]&&e[n](gH(a,r,h))},error:e[n+1],complete:e[n+2]};else{const h=Gs(r,Dc);a=Gs(h.firestore,xc),o=h._query;const d=new uF(a);s={next:f=>{e[n]&&e[n](new Hm(a,d,h,f))},error:e[n+1],complete:e[n+2]},uH(r._query)}return function(d,f,p,g){const b=new Qk(g),v=new Kk(f,b,p);return d.asyncQueue.enqueueAndForget(async()=>Hk(await IS(d),v)),()=>{b.Nu(),d.asyncQueue.enqueueAndForget(async()=>Gk(await IS(d),v))}}(MC(a),o,i,s)}function LC(r,e){return function(n,i){const s=new nc;return n.asyncQueue.enqueueAndForget(async()=>vce(await Nce(n),i,s)),s.promise}(MC(r),e)}function gH(r,e,t){const n=t.docs.get(e._key),i=new uF(r);return new qm(r,i,e._key,n,new Jy(t.hasPendingWrites,t.fromCache),e.converter)}function ic(){return new Zk("serverTimestamp")}function Wce(r){return new eF("increment",r)}(function(e,t=!0){(function(i){G0=i})(fp),ep(new gd("firestore",(n,{instanceIdentifier:i,options:s})=>{const a=n.getProvider("app").getImmediate(),o=new xc(new $oe(n.getProvider("auth-internal")),new zoe(a,n.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new qe(Te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new y1(u.options.projectId,c)}(a,i),a);return s={useFetchStreams:t,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Ul(q4,H4,e),Ul(q4,H4,"esm2020")})();const ds=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),$M=[.001,0,0,.001,0,0],MN=1.35,ga={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Xc={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},S1="pdfjs_internal_editor_",Dt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Kt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Kce={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},VM={TRIANGLES:1,LATTICE:2},pi={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},iE={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Tn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Gp={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},$C={ERRORS:0,WARNINGS:1,INFOS:5},T1={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},ky={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},Xce={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let VC=$C.WARNINGS;function Yce(r){Number.isInteger(r)&&(VC=r)}function Qce(){return VC}function UC(r){VC>=$C.INFOS&&console.info(`Info: ${r}`)}function At(r){VC>=$C.WARNINGS&&console.warn(`Warning: ${r}`)}function Dr(r){throw new Error(r)}function Xt(r,e){r||Dr(e)}function Jce(r){switch(r==null?void 0:r.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function vH(r,e=null,t=null){if(!r)return null;if(t&&typeof r=="string"){if(t.addDefaultProtocol&&r.startsWith("www.")){const i=r.match(/\./g);(i==null?void 0:i.length)>=2&&(r=`http://${r}`)}if(t.tryConvertEncoding)try{r=nhe(r)}catch{}}const n=e?URL.parse(r,e):URL.parse(r);return Jce(n)?n:null}function yH(r,e,t=!1){const n=URL.parse(r);return n?(n.hash=e,n.href):t&&vH(r,"http://example.com")?r.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Et(r,e,t,n=!1){return Object.defineProperty(r,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const gp=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class jL extends gp{constructor(e,t){super(e,"PasswordException"),this.code=t}}class IN extends gp{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class UM extends gp{constructor(e){super(e,"InvalidPDFException")}}class RS extends gp{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class Zce extends gp{constructor(e){super(e,"FormatError")}}class Ed extends gp{constructor(e){super(e,"AbortException")}}function bH(r){(typeof r!="object"||(r==null?void 0:r.length)===void 0)&&Dr("Invalid argument for bytesToString");const e=r.length,t=8192;if(e<t)return String.fromCharCode.apply(null,r);const n=[];for(let i=0;i<e;i+=t){const s=Math.min(i+t,e),a=r.subarray(i,s);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function Hx(r){typeof r!="string"&&Dr("Invalid argument for stringToBytes");const e=r.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=r.charCodeAt(n)&255;return t}function ehe(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function the(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function rhe(){try{return new Function(""),!0}catch{return!1}}class Ii{static get isLittleEndian(){return Et(this,"isLittleEndian",the())}static get isEvalSupported(){return Et(this,"isEvalSupported",rhe())}static get isOffscreenCanvasSupported(){return Et(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Et(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Et(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Et(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Et(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Et(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const PN=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));var lc,sE,zM;class Ze{static makeHexColor(e,t,n){return`#${PN[e]}${PN[t]}${PN[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const i=e[n],s=e[n+1];e[n]=i*t[0]+s*t[2]+t[4],e[n+1]=i*t[1]+s*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const i=t[0],s=t[1],a=t[2],o=t[3],l=t[4],u=t[5];for(let c=0;c<6;c+=2){const h=e[n+c],d=e[n+c+1];e[n+c]=h*i+d*a+l,e[n+c+1]=h*s+d*o+u}}static applyInverseTransform(e,t){const n=e[0],i=e[1],s=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/s,e[1]=(-n*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/s}static axialAlignedBoundingBox(e,t,n){const i=t[0],s=t[1],a=t[2],o=t[3],l=t[4],u=t[5],c=e[0],h=e[1],d=e[2],f=e[3];let p=i*c+l,g=p,b=i*d+l,v=b,x=o*h+u,y=x,E=o*f+u,w=E;if(s!==0||a!==0){const A=s*c,T=s*d,S=a*h,N=a*f;p+=S,v+=S,b+=N,g+=N,x+=A,w+=A,E+=T,y+=T}n[0]=Math.min(n[0],p,b,g,v),n[1]=Math.min(n[1],x,E,y,w),n[2]=Math.max(n[2],p,b,g,v),n[3]=Math.max(n[3],x,E,y,w)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],i=e[1],s=e[2],a=e[3],o=n**2+i**2,l=n*s+i*a,u=s**2+a**2,c=(o+u)/2,h=Math.sqrt(c**2-(o*u-l**2));t[0]=Math.sqrt(c+h||1),t[1]=Math.sqrt(c-h||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>a?null:[n,s,i,a]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,i,s){s[0]=Math.min(s[0],e,n),s[1]=Math.min(s[1],t,i),s[2]=Math.max(s[2],e,n),s[3]=Math.max(s[3],t,i)}static bezierBoundingBox(e,t,n,i,s,a,o,l,u){u[0]=Math.min(u[0],e,o),u[1]=Math.min(u[1],t,l),u[2]=Math.max(u[2],e,o),u[3]=Math.max(u[3],t,l),H(this,lc,zM).call(this,e,n,s,o,t,i,a,l,3*(-e+3*(n-s)+o),6*(e-2*n+s),3*(n-e),u),H(this,lc,zM).call(this,e,n,s,o,t,i,a,l,3*(-t+3*(i-a)+l),6*(t-2*i+a),3*(i-t),u)}}lc=new WeakSet,sE=function(e,t,n,i,s,a,o,l,u,c){if(u<=0||u>=1)return;const h=1-u,d=u*u,f=d*u,p=h*(h*(h*e+3*u*t)+3*d*n)+f*i,g=h*(h*(h*s+3*u*a)+3*d*o)+f*l;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],g),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],g)},zM=function(e,t,n,i,s,a,o,l,u,c,h,d){if(Math.abs(u)<1e-12){Math.abs(c)>=1e-12&&H(this,lc,sE).call(this,e,t,n,i,s,a,o,l,-h/c,d);return}const f=c**2-4*h*u;if(f<0)return;const p=Math.sqrt(f),g=2*u;H(this,lc,sE).call(this,e,t,n,i,s,a,o,l,(-c+p)/g,d),H(this,lc,sE).call(this,e,t,n,i,s,a,o,l,(-c-p)/g,d)},U(Ze,lc);function nhe(r){return decodeURIComponent(escape(r))}let RN=null,qL=null;function ihe(r){return RN||(RN=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,qL=new Map([["","t"]])),r.replaceAll(RN,(e,t,n)=>t?t.normalize("NFKC"):qL.get(n))}function wH(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),bH(r)}const vg="pdfjs_internal_id_";function she(r,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,i,...s]=t;if(!r(n)&&!Number.isInteger(n)||!e(i))return!1;const a=s.length;let o=!0;switch(i.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;o=!1;break;default:return!1}for(const l of s)if(!(typeof l=="number"||o&&l===null))return!1;return!0}function fs(r,e,t){return Math.min(Math.max(r,e),t)}function xH(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(bH(r))}function ahe(r){return Uint8Array.fromBase64?Uint8Array.fromBase64(r):Hx(atob(r))}typeof Promise.try!="function"&&(Promise.try=function(r,...e){return new Promise(t=>{t(r(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((e,t)=>e+t,0)});class C1{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function i(s){var l;if(!s)return;let a=null;const o=s.name;if(o==="#text")a=s.value;else if(C1.shouldBuildText(o))(l=s==null?void 0:s.attributes)!=null&&l.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&t.push({str:a}),!!s.children)for(const u of s.children)i(u)}return i(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class _H{static setupStorage(e,t,n,i,s){const a=i.getValue(t,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),s==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",o=>{i.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),s==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of n.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:i,linkService:s}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${i}`);for(const[l,u]of Object.entries(a))if(u!=null)switch(l){case"class":u.length&&e.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,u)}o&&s.addLinkAttributes(e,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(e,a.dataId,t,n)}static render(e){var h,d;const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,s=e.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:s,linkService:n});const o=s!=="richText",l=e.div;if(l.append(a),e.viewport){const f=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=f}o&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const f=document.createTextNode(i.value);a.append(f),o&&C1.shouldBuildText(i.name)&&u.push(f)}return{textDivs:u}}const c=[[i,-1,a]];for(;c.length>0;){const[f,p,g]=c.at(-1);if(p+1===f.children.length){c.pop();continue}const b=f.children[++c.at(-1)[1]];if(b===null)continue;const{name:v}=b;if(v==="#text"){const y=document.createTextNode(b.value);u.push(y),g.append(y);continue}const x=(h=b==null?void 0:b.attributes)!=null&&h.xmlns?document.createElementNS(b.attributes.xmlns,v):document.createElement(v);if(g.append(x),b.attributes&&this.setAttributes({html:x,element:b,storage:t,intent:s,linkService:n}),((d=b.children)==null?void 0:d.length)>0)c.push([b,-1,x]);else if(b.value){const y=document.createTextNode(b.value);o&&C1.shouldBuildText(v)&&u.push(y),x.append(y)}}for(const f of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const lu="http://www.w3.org/2000/svg",mf=class mf{};Pe(mf,"CSS",96),Pe(mf,"PDF",72),Pe(mf,"PDF_TO_CSS_UNITS",mf.CSS/mf.PDF);let Sd=mf;async function Gx(r,e="text"){if(Zy(r,document.baseURI)){const t=await fetch(r);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const i=new XMLHttpRequest;i.open("GET",r,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class Wx{constructor({viewBox:e,userUnit:t,scale:n,rotation:i,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=i,this.offsetX=s,this.offsetY=a,n*=t;const l=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let c,h,d,f;switch(i%=360,i<0&&(i+=360),i){case 180:c=-1,h=0,d=0,f=1;break;case 90:c=0,h=1,d=1,f=0;break;case 270:c=0,h=-1,d=-1,f=0;break;case 0:c=1,h=0,d=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,f=-f);let p,g,b,v;c===0?(p=Math.abs(u-e[1])*n+s,g=Math.abs(l-e[0])*n+a,b=(e[3]-e[1])*n,v=(e[2]-e[0])*n):(p=Math.abs(l-e[0])*n+s,g=Math.abs(u-e[1])*n+a,b=(e[2]-e[0])*n,v=(e[3]-e[1])*n),this.transform=[c*n,h*n,d*n,f*n,p-c*n*l-d*n*u,g-h*n*l-f*n*u],this.width=b,this.height=v}get rawDims(){const e=this.viewBox;return Et(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new Wx({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:s})}convertToViewportPoint(e,t){const n=[e,t];return Ze.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];Ze.applyTransform(t,this.transform);const n=[e[2],e[3]];return Ze.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return Ze.applyInverseTransform(n,this.transform),n}}class cF extends gp{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function zC(r){const e=r.length;let t=0;for(;t<e&&r[t].trim()==="";)t++;return r.substring(t,t+5).toLowerCase()==="data:"}function hF(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function ohe(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function lhe(r,e="document.pdf"){if(typeof r!="string")return e;if(zC(r))return At('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(r);if(!n)return e;const i=o=>{try{let l=decodeURIComponent(o);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:o):l}catch{return o}},s=/\.pdf$/i,a=n.pathname.split("/").at(-1);if(s.test(a))return i(a);if(n.searchParams.size>0){const o=Array.from(n.searchParams.values()).reverse();for(const u of o)if(s.test(u))return i(u);const l=Array.from(n.searchParams.keys()).reverse();for(const u of l)if(s.test(u))return i(u)}if(n.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(l)return i(l[0])}return e}class HL{constructor(){Pe(this,"started",Object.create(null));Pe(this,"times",[])}time(e){e in this.started&&At(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||At(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:s}of this.times)e.push(`${n.padEnd(t)} ${s-i}ms
`);return e.join("")}}function Zy(r,e){const t=e?URL.parse(r,e):URL.parse(r);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function mo(r){r.preventDefault()}function dn(r){r.preventDefault(),r.stopPropagation()}function uhe(r){console.log("Deprecated API usage: "+r)}var B1;class kS{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;m(this,B1)||k(this,B1,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=m(this,B1).exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const u=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,u==="-"?(a+=c,o+=h):u==="+"&&(a-=c,o-=h),new Date(Date.UTC(n,i,s,a,o,l))}}B1=new WeakMap,U(kS,B1);function che(r,{scale:e=1,rotation:t=0}){const{width:n,height:i}=r.attributes.style,s=[0,0,parseInt(n),parseInt(i)];return new Wx({viewBox:s,userUnit:1,scale:e,rotation:t})}function Kx(r){if(r.startsWith("#")){const e=parseInt(r.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(e=>parseInt(e)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(At(`Not a valid color format: "${r}"`),[0,0,0])}function hhe(r){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of r.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;r.set(t,Kx(n))}e.remove()}function Xr(r){const{a:e,b:t,c:n,d:i,e:s,f:a}=r.getTransform();return[e,t,n,i,s,a]}function ol(r){const{a:e,b:t,c:n,d:i,e:s,f:a}=r.getTransform().invertSelf();return[e,t,n,i,s,a]}function np(r,e,t=!1,n=!0){if(e instanceof Wx){const{pageWidth:i,pageHeight:s}=e.rawDims,{style:a}=r,o=Ii.isCSSRoundSupported,l=`var(--total-scale-factor) * ${i}px`,u=`var(--total-scale-factor) * ${s}px`,c=o?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,h=o?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!t||e.rotation%180===0?(a.width=c,a.height=h):(a.width=h,a.height=c)}n&&r.setAttribute("data-main-rotation",e.rotation)}class Xl{constructor(){const{pixelRatio:e}=Xl;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,i,s=-1){let a=1/0,o=1/0,l=1/0;n=Xl.capPixels(n,s),n>0&&(a=Math.sqrt(n/(e*t))),i!==-1&&(o=i/e,l=i/t);const u=Math.min(a,o,l);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const jM=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class dhe{static get isDarkMode(){var e;return Et(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class fhe{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),Et(this,"commentForegroundColor",Kx(n))}}function mhe(r,e,t,n){n=Math.min(Math.max(n??1,0),1);const i=255*(1-n);return r=Math.round(r*n+i),e=Math.round(e*n+i),t=Math.round(t*n+i),[r,e,t]}function GL(r,e){const t=r[0]/255,n=r[1]/255,i=r[2]/255,s=Math.max(t,n,i),a=Math.min(t,n,i),o=(s+a)/2;if(s===a)e[0]=e[1]=0;else{const l=s-a;switch(e[1]=o<.5?l/(s+a):l/(2-s-a),s){case t:e[0]=((n-i)/l+(n<i?6:0))*60;break;case n:e[0]=((i-t)/l+2)*60;break;case i:e[0]=((t-n)/l+4)*60;break}}e[2]=o}function qM(r,e){const t=r[0],n=r[1],i=r[2],s=(1-Math.abs(2*i-1))*n,a=s*(1-Math.abs(t/60%2-1)),o=i-s/2;switch(Math.floor(t/60)){case 0:e[0]=s+o,e[1]=a+o,e[2]=o;break;case 1:e[0]=a+o,e[1]=s+o,e[2]=o;break;case 2:e[0]=o,e[1]=s+o,e[2]=a+o;break;case 3:e[0]=o,e[1]=a+o,e[2]=s+o;break;case 4:e[0]=a+o,e[1]=o,e[2]=s+o;break;case 5:case 6:e[0]=s+o,e[1]=o,e[2]=a+o;break}}function WL(r){return r<=.03928?r/12.92:((r+.055)/1.055)**2.4}function KL(r,e,t){qM(r,t),t.map(WL);const n=.2126*t[0]+.7152*t[1]+.0722*t[2];qM(e,t),t.map(WL);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)}const XL=new Map;function phe(r,e){const t=r[0]+r[1]*256+r[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=XL.get(t);if(n)return n;const i=new Float32Array(9),s=i.subarray(0,3),a=i.subarray(3,6);GL(r,a);const o=i.subarray(6,9);GL(e,o);const l=o[2]<.5,u=l?12:4.5;if(a[2]=l?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),KL(a,o,s)<u){let c,h;l?(c=a[2],h=1):(c=0,h=a[2]);const d=.005;for(;h-c>d;){const f=a[2]=(c+h)/2;l===KL(a,o,s)<u?c=f:h=f}a[2]=l?h:c}return qM(a,s),n=Ze.makeHexColor(Math.round(s[0]*255),Math.round(s[1]*255),Math.round(s[2]*255)),XL.set(t,n),n}function AH({html:r,dir:e,className:t},n){const i=document.createDocumentFragment();if(typeof r=="string"){const s=document.createElement("p");s.dir=e||"auto";const a=r.split(/(?:\r\n?|\n)/);for(let o=0,l=a.length;o<l;++o){const u=a[o];s.append(document.createTextNode(u)),o<l-1&&s.append(document.createElement("br"))}i.append(s)}else _H.render({xfaHtml:r,div:i,intent:"richText"});i.firstElementChild.classList.add("richText",t),n.append(i)}function EH(r){const e=new Path2D;if(!r)return e;for(let t=0,n=r.length;t<n;)switch(r[t++]){case ky.moveTo:e.moveTo(r[t++],r[t++]);break;case ky.lineTo:e.lineTo(r[t++],r[t++]);break;case ky.curveTo:e.bezierCurveTo(r[t++],r[t++],r[t++],r[t++],r[t++],r[t++]);break;case ky.quadraticCurveTo:e.quadraticCurveTo(r[t++],r[t++],r[t++],r[t++]);break;case ky.closePath:e.closePath();break;default:At(`Unrecognized drawing path operator: ${r[t-1]}`);break}return e}var eh,th,Va,Ua,L1,rh,zg,jg,$1,NT,SH,Ci,TH,CH,Wp,eb;const du=class du{constructor(e){U(this,Ci);U(this,eh,null);U(this,th,null);U(this,Va);U(this,Ua,null);U(this,L1,null);U(this,rh,null);U(this,zg,null);U(this,jg,null);k(this,Va,e),m(du,$1)||k(du,$1,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=k(this,eh,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=m(this,Va)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",mo,{signal:t}),e.addEventListener("pointerdown",H(du,NT,SH),{signal:t}));const n=k(this,Ua,document.createElement("div"));n.className="buttons",e.append(n);const i=m(this,Va).toolbarPosition;if(i){const{style:s}=e,a=m(this,Va)._uiManager.direction==="ltr"?1-i[0]:i[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return m(this,eh)}hide(){var e;m(this,eh).classList.add("hidden"),(e=m(this,th))==null||e.hideDropdown()}show(){var e,t;m(this,eh).classList.remove("hidden"),(e=m(this,L1))==null||e.shown(),(t=m(this,rh))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=m(this,Va),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",m(du,$1)[e]),H(this,Ci,Wp).call(this,n)&&n.addEventListener("click",i=>{t.delete()},{signal:t._signal}),m(this,Ua).append(n)}async addAltText(e){const t=await e.render();H(this,Ci,Wp).call(this,t),m(this,Ua).append(t,m(this,Ci,eb)),k(this,L1,e)}addComment(e,t=null){if(m(this,rh))return;const n=e.renderForToolbar();if(!n)return;H(this,Ci,Wp).call(this,n);const i=k(this,zg,m(this,Ci,eb));t?(m(this,Ua).insertBefore(n,t),m(this,Ua).insertBefore(i,t)):m(this,Ua).append(n,i),k(this,rh,e),e.toolbar=this}addColorPicker(e){if(m(this,th))return;k(this,th,e);const t=e.renderButton();H(this,Ci,Wp).call(this,t),m(this,Ua).append(t,m(this,Ci,eb))}async addEditSignatureButton(e){const t=k(this,jg,await e.renderEditButton(m(this,Va)));H(this,Ci,Wp).call(this,t),m(this,Ua).append(t,m(this,Ci,eb))}removeButton(e){var t,n;switch(e){case"comment":(t=m(this,rh))==null||t.removeToolbarCommentButton(),k(this,rh,null),(n=m(this,zg))==null||n.remove(),k(this,zg,null);break}}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,n){if(!t&&e==="comment")return;const i=m(this,Ua).querySelector(n);i&&e==="comment"&&this.addComment(t,i)}updateEditSignatureButton(e){m(this,jg)&&(m(this,jg).title=e)}remove(){var e;m(this,eh).remove(),(e=m(this,th))==null||e.destroy(),k(this,th,null)}};eh=new WeakMap,th=new WeakMap,Va=new WeakMap,Ua=new WeakMap,L1=new WeakMap,rh=new WeakMap,zg=new WeakMap,jg=new WeakMap,$1=new WeakMap,NT=new WeakSet,SH=function(e){e.stopPropagation()},Ci=new WeakSet,TH=function(e){m(this,Va)._focusEventsAllowed=!1,dn(e)},CH=function(e){m(this,Va)._focusEventsAllowed=!0,dn(e)},Wp=function(e){const t=m(this,Va)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",H(this,Ci,TH).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",H(this,Ci,CH).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",mo,{signal:t}),!0)},eb=function(){const e=document.createElement("div");return e.className="divider",e},U(du,NT),U(du,$1,null);let HM=du;var V1,Sf,pu,Tc,NH,DH,GM;class ghe{constructor(e){U(this,Tc);U(this,V1,null);U(this,Sf,null);U(this,pu);k(this,pu,e)}show(e,t,n){const[i,s]=H(this,Tc,DH).call(this,t,n),{style:a}=m(this,Sf)||k(this,Sf,H(this,Tc,NH).call(this));e.append(m(this,Sf)),a.insetInlineEnd=`${100*i}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){m(this,Sf).remove()}}V1=new WeakMap,Sf=new WeakMap,pu=new WeakMap,Tc=new WeakSet,NH=function(){const e=k(this,Sf,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=m(this,pu)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",mo,{signal:t});const n=k(this,V1,document.createElement("div"));return n.className="buttons",e.append(n),m(this,pu).hasCommentManager()&&H(this,Tc,GM).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{m(this,pu).commentSelection("floating_button")}),H(this,Tc,GM).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{m(this,pu).highlightSelection("floating_button")}),e},DH=function(e,t){let n=0,i=0;for(const s of e){const a=s.y+s.height;if(a<n)continue;const o=s.x+(t?s.width:0);if(a>n){i=o,n=a;continue}t?o>i&&(i=o):o<i&&(i=o)}return[t?1-i:i,n]},GM=function(e,t,n,i){const s=document.createElement("button");s.classList.add("basic",e),s.tabIndex=0,s.setAttribute("data-l10n-id",t);const a=document.createElement("span");s.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",n);const o=m(this,pu)._signal;o instanceof AbortSignal&&!o.aborted&&(s.addEventListener("contextmenu",mo,{signal:o}),s.addEventListener("click",i,{signal:o})),m(this,V1).append(s)};function MH(r,e,t){for(const n of t)e.addEventListener(n,r[n].bind(r))}var Tf,Cf,qg,Nf;const gr=class gr{static initializeAndAddPointerId(e){(m(gr,Cf)||k(gr,Cf,new Set)).add(e)}static setPointer(e,t){m(gr,Tf)||k(gr,Tf,t),m(gr,Nf)??k(gr,Nf,e)}static setTimeStamp(e){k(gr,qg,e)}static isSamePointerId(e){return m(gr,Tf)===e}static isSamePointerIdOrRemove(e){var t;return m(gr,Tf)===e?!0:((t=m(gr,Cf))==null||t.delete(e),!1)}static isSamePointerType(e){return m(gr,Nf)===e}static isInitializedAndDifferentPointerType(e){return m(gr,Nf)!==null&&!gr.isSamePointerType(e)}static isSameTimeStamp(e){return m(gr,qg)===e}static isUsingMultiplePointers(){var e;return((e=m(gr,Cf))==null?void 0:e.size)>=1}static clearPointerType(){k(gr,Nf,null)}static clearPointerIds(){k(gr,Tf,NaN),k(gr,Cf,null)}static clearTimeStamp(){k(gr,qg,NaN)}};Tf=new WeakMap,Cf=new WeakMap,qg=new WeakMap,Nf=new WeakMap,U(gr,Tf,NaN),U(gr,Cf,null),U(gr,qg,NaN),U(gr,Nf,null);let zi=gr;var DT;class vhe{constructor(){U(this,DT,0)}get id(){return`${S1}${On(this,DT)._++}`}}DT=new WeakMap;var Hg,U1,ji,Gg,aE;const wO=class wO{constructor(){U(this,Gg);U(this,Hg,wH());U(this,U1,0);U(this,ji,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const s=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Et(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:t,name:n,size:i,type:s}=e;return H(this,Gg,aE).call(this,`${t}_${n}_${i}_${s}`,e)}async getFromUrl(e){return H(this,Gg,aE).call(this,e,e)}async getFromBlob(e,t){const n=await t;return H(this,Gg,aE).call(this,e,n)}async getFromId(e){m(this,ji)||k(this,ji,new Map);const t=m(this,ji).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){m(this,ji)||k(this,ji,new Map);let n=m(this,ji).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${m(this,Hg)}_${On(this,U1)._++}`,refCounter:1,isSvg:!1},m(this,ji).set(e,n),m(this,ji).set(n.id,n),n}getSvgUrl(e){const t=m(this,ji).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;m(this,ji)||k(this,ji,new Map);const t=m(this,ji).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(n.width,n.height);s.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=s.convertToBlob()}(i=n.close)==null||i.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${m(this,Hg)}_`)}};Hg=new WeakMap,U1=new WeakMap,ji=new WeakMap,Gg=new WeakSet,aE=async function(e,t){m(this,ji)||k(this,ji,new Map);let n=m(this,ji).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${m(this,Hg)}_${On(this,U1)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(n.url=t,i=await Gx(t,"blob")):t instanceof File?i=n.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const s=wO._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((u,c)=>{o.onload=()=>{n.bitmap=o,n.isSvg=!0,u()},a.onload=async()=>{const h=n.svgUrl=a.result;o.src=await s?`${h}#svgView(preserveAspectRatio(none))`:h},o.onerror=a.onerror=c});a.readAsDataURL(i),await l}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){At(i),n=null}return m(this,ji).set(e,n),n&&m(this,ji).set(n.id,n),n};let WM=wO;var vn,nh,z1,Kr;class yhe{constructor(e=128){U(this,vn,[]);U(this,nh,!1);U(this,z1);U(this,Kr,-1);k(this,z1,e)}add({cmd:e,undo:t,post:n,mustExec:i,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(i&&e(),m(this,nh))return;const l={cmd:e,undo:t,post:n,type:s};if(m(this,Kr)===-1){m(this,vn).length>0&&(m(this,vn).length=0),k(this,Kr,0),m(this,vn).push(l);return}if(a&&m(this,vn)[m(this,Kr)].type===s){o&&(l.undo=m(this,vn)[m(this,Kr)].undo),m(this,vn)[m(this,Kr)]=l;return}const u=m(this,Kr)+1;u===m(this,z1)?m(this,vn).splice(0,1):(k(this,Kr,u),u<m(this,vn).length&&m(this,vn).splice(u)),m(this,vn).push(l)}undo(){if(m(this,Kr)===-1)return;k(this,nh,!0);const{undo:e,post:t}=m(this,vn)[m(this,Kr)];e(),t==null||t(),k(this,nh,!1),k(this,Kr,m(this,Kr)-1)}redo(){if(m(this,Kr)<m(this,vn).length-1){k(this,Kr,m(this,Kr)+1),k(this,nh,!0);const{cmd:e,post:t}=m(this,vn)[m(this,Kr)];e(),t==null||t(),k(this,nh,!1)}}hasSomethingToUndo(){return m(this,Kr)!==-1}hasSomethingToRedo(){return m(this,Kr)<m(this,vn).length-1}cleanType(e){if(m(this,Kr)!==-1){for(let t=m(this,Kr);t>=0;t--)if(m(this,vn)[t].type!==e){m(this,vn).splice(t+1,m(this,Kr)-t),k(this,Kr,t);return}m(this,vn).length=0,k(this,Kr,-1)}}destroy(){k(this,vn,null)}}vn=new WeakMap,nh=new WeakMap,z1=new WeakMap,Kr=new WeakMap;var MT,IH;class Xx{constructor(e){U(this,MT);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Ii.platform;for(const[n,i,s={}]of e)for(const a of n){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:i,options:s}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:i,options:s}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(H(this,MT,IH).call(this,t));if(!n)return;const{callback:i,options:{bubbles:s=!1,args:a=[],checker:o=null}}=n;o&&!o(e,t)||(i.bind(e,...a,t)(),s||dn(t))}}MT=new WeakSet,IH=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const IT=class IT{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return hhe(e),Et(this,"_colors",e)}convert(e){const t=Kx(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every((s,a)=>s===t[a]))return IT._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?Ze.makeHexColor(...t):e}};Pe(IT,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let KM=IT;var Wg,Js,Kg,sn,$n,Xg,za,Yg,ja,qi,ih,sh,Qg,ah,dl,qa,Df,j1,q1,Jg,H1,fl,oh,Zg,lh,ml,PT,uh,ev,G1,ch,Mf,tv,hh,W1,Nn,lr,gu,dh,fh,K1,rv,X1,mh,pl,vu,Y1,Q1,Ha,je,oE,XM,PH,RH,tb,kH,FH,OH,YM,BH,LH,$H,VH,os,uu,UH,zH,QM,jH,rb,JM;const Ag=class Ag{constructor(e,t,n,i,s,a,o,l,u,c,h,d,f,p,g,b){U(this,je);U(this,Wg,new AbortController);U(this,Js,null);U(this,Kg,null);U(this,sn,new Map);U(this,$n,new Map);U(this,Xg,null);U(this,za,null);U(this,Yg,null);U(this,ja,new yhe);U(this,qi,null);U(this,ih,null);U(this,sh,null);U(this,Qg,0);U(this,ah,new Set);U(this,dl,null);U(this,qa,null);U(this,Df,new Set);Pe(this,"_editorUndoBar",null);U(this,j1,!1);U(this,q1,!1);U(this,Jg,!1);U(this,H1,null);U(this,fl,null);U(this,oh,null);U(this,Zg,null);U(this,lh,!1);U(this,ml,null);U(this,PT,new vhe);U(this,uh,!1);U(this,ev,!1);U(this,G1,!1);U(this,ch,null);U(this,Mf,null);U(this,tv,null);U(this,hh,null);U(this,W1,null);U(this,Nn,Dt.NONE);U(this,lr,new Set);U(this,gu,null);U(this,dh,null);U(this,fh,null);U(this,K1,null);U(this,rv,null);U(this,X1,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});U(this,mh,[0,0]);U(this,pl,null);U(this,vu,null);U(this,Y1,null);U(this,Q1,null);U(this,Ha,null);const v=this._signal=m(this,Wg).signal;k(this,vu,e),k(this,Y1,t),k(this,Q1,n),k(this,Xg,i),k(this,qi,s),k(this,dh,a),k(this,rv,l),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:v}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),o._on("setpreference",this.onSetPreference.bind(this),{signal:v}),o._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:v}),window.addEventListener("pointerdown",()=>{k(this,ev,!0)},{capture:!0,signal:v}),window.addEventListener("pointerup",()=>{k(this,ev,!1)},{capture:!0,signal:v}),H(this,je,kH).call(this),H(this,je,VH).call(this),H(this,je,YM).call(this),k(this,za,l.annotationStorage),k(this,H1,l.filterFactory),k(this,fh,u),k(this,Zg,c||null),k(this,j1,h),k(this,q1,d),k(this,Jg,f),k(this,W1,p||null),this.viewParameters={realScale:Sd.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=b!==!1,s==null||s.setSidebarUiManager(this)}static get _keyboardManager(){const e=Ag.prototype,t=a=>m(a,vu).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return Et(this,"_keyboardManager",new Xx([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&m(a,vu).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&m(a,vu).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}destroy(){var e,t,n,i,s,a,o,l,u;(e=m(this,Ha))==null||e.resolve(),k(this,Ha,null),(t=m(this,Wg))==null||t.abort(),k(this,Wg,null),this._signal=null;for(const c of m(this,$n).values())c.destroy();m(this,$n).clear(),m(this,sn).clear(),m(this,Df).clear(),(n=m(this,hh))==null||n.clear(),k(this,Js,null),m(this,lr).clear(),m(this,ja).destroy(),(i=m(this,Xg))==null||i.destroy(),(s=m(this,qi))==null||s.destroy(),(a=m(this,dh))==null||a.destroy(),(o=m(this,ml))==null||o.hide(),k(this,ml,null),(l=m(this,tv))==null||l.destroy(),k(this,tv,null),k(this,Kg,null),m(this,fl)&&(clearTimeout(m(this,fl)),k(this,fl,null)),m(this,pl)&&(clearTimeout(m(this,pl)),k(this,pl,null)),(u=this._editorUndoBar)==null||u.destroy(),k(this,rv,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return m(this,W1)}get useNewAltTextFlow(){return m(this,q1)}get useNewAltTextWhenAddingImage(){return m(this,Jg)}get hcmFilter(){return Et(this,"hcmFilter",m(this,fh)?m(this,H1).addHCMFilter(m(this,fh).foreground,m(this,fh).background):"none")}get direction(){return Et(this,"direction",getComputedStyle(m(this,vu)).direction)}get _highlightColors(){return Et(this,"_highlightColors",m(this,Zg)?new Map(m(this,Zg).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Et(this,"highlightColors",null);const t=new Map,n=!!m(this,fh);for(const[i,s]of e){const a=i.endsWith("_HCM");if(n&&a){t.set(i.replace("_HCM",""),s);continue}!n&&!a&&t.set(i,s)}return Et(this,"highlightColors",t)}get highlightColorNames(){return Et(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),k(this,sh,e)}setMainHighlightColorPicker(e){k(this,tv,e)}editAltText(e,t=!1){var n;(n=m(this,Xg))==null||n.editAltText(this,e,t)}hasCommentManager(){return!!m(this,qi)}editComment(e,t,n,i){var s;(s=m(this,qi))==null||s.showDialog(this,e,t,n,i)}selectComment(e,t){const n=m(this,$n).get(e),i=n==null?void 0:n.getEditorByUID(t);i==null||i.toggleComment(!0,!0)}updateComment(e){var t;(t=m(this,qi))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=m(this,qi))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=m(this,qi))==null||t.removeComments([e.uid])}toggleComment(e,t,n=void 0){var i;(i=m(this,qi))==null||i.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){var n;return e&&((n=m(this,qi))==null?void 0:n.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=m(this,qi))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(m(this,$n).has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),i=s=>{s.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await n}getSignature(e){var t;(t=m(this,dh))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return m(this,dh)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":k(this,Jg,t);break}}onPageChanging({pageNumber:e}){k(this,Qg,e-1)}focusMainContainer(){m(this,vu).focus()}findParent(e,t){for(const n of m(this,$n).values()){const{x:i,y:s,width:a,height:o}=n.div.getBoundingClientRect();if(e>=i&&e<=i+a&&t>=s&&t<=s+o)return n}return null}disableUserSelect(e=!1){m(this,Y1).classList.toggle("noUserSelect",e)}addShouldRescale(e){m(this,Df).add(e)}removeShouldRescale(e){m(this,Df).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Sd.PDF_TO_CSS_UNITS;for(const n of m(this,Df))n.onScaleChanging();(t=m(this,sh))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:a,focusOffset:o}=n,l=n.toString(),c=H(this,je,oE).call(this,n).closest(".textLayer"),h=this.getSelectionBoxes(c);if(!h)return;n.empty();const d=H(this,je,XM).call(this,c),f=m(this,Nn)===Dt.NONE,p=()=>{const g=d==null?void 0:d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:i,anchorOffset:s,focusNode:a,focusOffset:o,text:l});f&&this.showAllEditors("highlight",!0,!0),t&&(g==null||g.editComment())};if(f){this.switchToMode(Dt.HIGHLIGHT,p);return}p()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!m(this,za))return null;const t=`${S1}${e}`,n=m(this,za).getRawValue(t);return n&&m(this,za).remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&m(this,za)&&!m(this,za).has(e.id)&&m(this,za).setValue(e.id,e)}a11yAlert(e,t=null){const n=m(this,Q1);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,m(this,lh)&&(k(this,lh,!1),H(this,je,tb).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of m(this,lr))if(t.div.contains(e)){k(this,Mf,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!m(this,Mf))return;const[e,t]=m(this,Mf);k(this,Mf,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){H(this,je,YM).call(this),this.setEditingState(!0)}removeEditListeners(){H(this,je,BH).call(this),this.setEditingState(!1)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of m(this,qa))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of m(this,qa))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=m(this,Js))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of m(this,lr)){const s=i.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const a of m(this,qa))if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(s){At(`paste: "${s.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const s=[];for(const l of n){const u=await i.deserialize(l);if(!u)return;s.push(u)}const a=()=>{for(const l of s)H(this,je,QM).call(this,l);H(this,je,JM).call(this,s)},o=()=>{for(const l of s)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(s){At(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),m(this,Nn)!==Dt.NONE&&!this.isEditorHandlingKeyboard&&Ag._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,m(this,lh)&&(k(this,lh,!1),H(this,je,tb).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(H(this,je,FH).call(this),H(this,je,LH).call(this),H(this,je,os).call(this,{isEditing:m(this,Nn)!==Dt.NONE,isEmpty:H(this,je,rb).call(this),hasSomethingToUndo:m(this,ja).hasSomethingToUndo(),hasSomethingToRedo:m(this,ja).hasSomethingToRedo(),hasSelectedEditor:!1})):(H(this,je,OH).call(this),H(this,je,$H).call(this),H(this,je,os).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!m(this,qa)){k(this,qa,e);for(const t of m(this,qa))H(this,je,uu).call(this,t.defaultPropertiesToUpdate)}}getId(){return m(this,PT).id}get currentLayer(){return m(this,$n).get(m(this,Qg))}getLayer(e){return m(this,$n).get(e)}get currentPageIndex(){return m(this,Qg)}addLayer(e){m(this,$n).set(e.pageIndex,e),m(this,uh)?e.enable():e.disable()}removeLayer(e){m(this,$n).delete(e.pageIndex)}async updateMode(e,t=null,n=!1,i=!1,s=!1){var a,o,l,u,c,h;if(m(this,Nn)!==e&&!(m(this,Ha)&&(await m(this,Ha).promise,!m(this,Ha)))){if(k(this,Ha,Promise.withResolvers()),(a=m(this,sh))==null||a.commitOrRemove(),m(this,Nn)===Dt.POPUP&&((o=m(this,qi))==null||o.hideSidebar()),(l=m(this,qi))==null||l.destroyPopup(),k(this,Nn,e),e===Dt.NONE){this.setEditingState(!1),H(this,je,zH).call(this);for(const d of m(this,sn).values())d.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),m(this,Ha).resolve();return}for(const d of m(this,sn).values())d.addStandaloneCommentButton();e===Dt.SIGNATURE&&await((c=m(this,dh))==null?void 0:c.loadSignatures()),this.setEditingState(!0),await H(this,je,UH).call(this),this.unselectAll();for(const d of m(this,$n).values())d.updateMode(e);if(e===Dt.POPUP){m(this,Kg)||k(this,Kg,await m(this,rv).getAnnotationsByType(new Set(m(this,qa).map(p=>p._editorType))));const d=new Set,f=[];for(const p of m(this,sn).values()){const{annotationElementId:g,hasComment:b,deleted:v}=p;g&&d.add(g),b&&!v&&f.push(p.getData())}for(const p of m(this,Kg)){const{id:g,popupRef:b,contentsObj:v}=p;b&&(v!=null&&v.str)&&!d.has(g)&&!m(this,ah).has(g)&&f.push(p)}(h=m(this,qi))==null||h.showSidebar(f)}if(!t){n&&this.addNewEditorFromKeyboard(),m(this,Ha).resolve();return}for(const d of m(this,sn).values())d.uid===t?(this.setSelected(d),s?d.editComment():i?d.enterInEditMode():d.focus()):d.unselect();m(this,Ha).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==m(this,Nn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(m(this,qa)){switch(e){case Kt.CREATE:this.currentLayer.addNewEditor(t);return;case Kt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(m(this,K1)||k(this,K1,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of m(this,lr))n.updateParams(e,t);else for(const n of m(this,qa))n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var s;for(const a of m(this,sn).values())a.editorType===e&&a.show(t);(((s=m(this,K1))==null?void 0:s.get(Kt.HIGHLIGHT_SHOW_ALL))??!0)!==t&&H(this,je,uu).call(this,[[Kt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(m(this,G1)!==e){k(this,G1,e);for(const t of m(this,$n).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of m(this,sn).values())t.pageIndex===e&&(yield t)}getEditor(e){return m(this,sn).get(e)}addEditor(e){m(this,sn).set(e.id,e)}removeEditor(e){var t,n;e.div.contains(document.activeElement)&&(m(this,fl)&&clearTimeout(m(this,fl)),k(this,fl,setTimeout(()=>{this.focusMainContainer(),k(this,fl,null)},0))),m(this,sn).delete(e.id),e.annotationElementId&&((t=m(this,hh))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!m(this,ah).has(e.annotationElementId))&&((n=m(this,za))==null||n.remove(e.id))}addDeletedAnnotationElement(e){m(this,ah).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return m(this,ah).has(e)}removeDeletedAnnotationElement(e){m(this,ah).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){m(this,Js)!==e&&(k(this,Js,e),e&&H(this,je,uu).call(this,e.propertiesToUpdate))}updateUI(e){m(this,je,jH)===e&&H(this,je,uu).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){H(this,je,uu).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(m(this,lr).has(e)){m(this,lr).delete(e),e.unselect(),H(this,je,os).call(this,{hasSelectedEditor:this.hasSelection});return}m(this,lr).add(e),e.select(),H(this,je,uu).call(this,e.propertiesToUpdate),H(this,je,os).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.uid}),(t=m(this,sh))==null||t.commitOrRemove();for(const n of m(this,lr))n!==e&&n.unselect();m(this,lr).clear(),m(this,lr).add(e),e.select(),H(this,je,uu).call(this,e.propertiesToUpdate),H(this,je,os).call(this,{hasSelectedEditor:!0})}isSelected(e){return m(this,lr).has(e)}get firstSelectedEditor(){return m(this,lr).values().next().value}unselect(e){e.unselect(),m(this,lr).delete(e),H(this,je,os).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return m(this,lr).size!==0}get isEnterHandled(){return m(this,lr).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;m(this,ja).undo(),H(this,je,os).call(this,{hasSomethingToUndo:m(this,ja).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:H(this,je,rb).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){m(this,ja).redo(),H(this,je,os).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:m(this,ja).hasSomethingToRedo(),isEmpty:H(this,je,rb).call(this)})}addCommands(e){m(this,ja).add(e),H(this,je,os).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:H(this,je,rb).call(this)})}cleanUndoStack(e){m(this,ja).cleanType(e)}delete(){var s;this.commitOrRemove();const e=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...m(this,lr)],n=()=>{var a;(a=this._editorUndoBar)==null||a.show(i,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},i=()=>{for(const a of t)H(this,je,QM).call(this,a)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=m(this,Js))==null||e.commitOrRemove()}hasSomethingToControl(){return m(this,Js)||this.hasSelection}selectAll(){for(const e of m(this,lr))e.commit();H(this,je,JM).call(this,m(this,sn).values())}unselectAll(){var e;if(!(m(this,Js)&&(m(this,Js).commitOrRemove(),m(this,Nn)!==Dt.NONE))&&!((e=m(this,sh))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of m(this,lr))t.unselect();m(this,lr).clear(),H(this,je,os).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;m(this,mh)[0]+=e,m(this,mh)[1]+=t;const[i,s]=m(this,mh),a=[...m(this,lr)],o=1e3;m(this,pl)&&clearTimeout(m(this,pl)),k(this,pl,setTimeout(()=>{k(this,pl,null),m(this,mh)[0]=m(this,mh)[1]=0,this.addCommands({cmd:()=>{for(const l of a)m(this,sn).has(l.id)&&(l.translateInPage(i,s),l.translationDone())},undo:()=>{for(const l of a)m(this,sn).has(l.id)&&(l.translateInPage(-i,-s),l.translationDone())},mustExec:!1})},o));for(const l of a)l.translateInPage(e,t),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),k(this,dl,new Map);for(const e of m(this,lr))m(this,dl).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!m(this,dl))return!1;this.disableUserSelect(!1);const e=m(this,dl);k(this,dl,null);let t=!1;for(const[{x:i,y:s,pageIndex:a},o]of e)o.newX=i,o.newY=s,o.newPageIndex=a,t||(t=i!==o.savedX||s!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const n=(i,s,a,o)=>{if(m(this,sn).has(i.id)){const l=m(this,$n).get(o);l?i._setParentAndPosition(l,s,a):(i.pageIndex=o,i.x=s,i.y=a)}};return this.addCommands({cmd:()=>{for(const[i,{newX:s,newY:a,newPageIndex:o}]of e)n(i,s,a,o)},undo:()=>{for(const[i,{savedX:s,savedY:a,savedPageIndex:o}]of e)n(i,s,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(m(this,dl))for(const n of m(this,dl).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||m(this,lr).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return m(this,Js)===e}getActive(){return m(this,Js)}getMode(){return m(this,Nn)}isEditingMode(){return m(this,Nn)!==Dt.NONE}get imageManager(){return Et(this,"imageManager",new WM)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,c=t.rangeCount;u<c;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:n,y:i,width:s,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(u,c,h,d)=>({x:(c-i)/a,y:1-(u+h-n)/s,width:d/a,height:h/s});break;case"180":o=(u,c,h,d)=>({x:1-(u+h-n)/s,y:1-(c+d-i)/a,width:h/s,height:d/a});break;case"270":o=(u,c,h,d)=>({x:1-(c+d-i)/a,y:(u-n)/s,width:d/a,height:h/s});break;default:o=(u,c,h,d)=>({x:(u-n)/s,y:(c-i)/a,width:h/s,height:d/a});break}const l=[];for(let u=0,c=t.rangeCount;u<c;u++){const h=t.getRangeAt(u);if(!h.collapsed)for(const{x:d,y:f,width:p,height:g}of h.getClientRects())p===0||g===0||l.push(o(d,f,p,g))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(m(this,Yg)||k(this,Yg,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=m(this,Yg))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=m(this,Yg))==null?void 0:i.get(e.data.id);if(!t)return;const n=m(this,za).getRawValue(t);n&&(m(this,Nn)===Dt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){var s;const i=(s=m(this,hh))==null?void 0:s.get(e);i&&(i.setCanvas(t,n),m(this,hh).delete(e))}addMissingCanvas(e,t){(m(this,hh)||k(this,hh,new Map)).set(e,t)}};Wg=new WeakMap,Js=new WeakMap,Kg=new WeakMap,sn=new WeakMap,$n=new WeakMap,Xg=new WeakMap,za=new WeakMap,Yg=new WeakMap,ja=new WeakMap,qi=new WeakMap,ih=new WeakMap,sh=new WeakMap,Qg=new WeakMap,ah=new WeakMap,dl=new WeakMap,qa=new WeakMap,Df=new WeakMap,j1=new WeakMap,q1=new WeakMap,Jg=new WeakMap,H1=new WeakMap,fl=new WeakMap,oh=new WeakMap,Zg=new WeakMap,lh=new WeakMap,ml=new WeakMap,PT=new WeakMap,uh=new WeakMap,ev=new WeakMap,G1=new WeakMap,ch=new WeakMap,Mf=new WeakMap,tv=new WeakMap,hh=new WeakMap,W1=new WeakMap,Nn=new WeakMap,lr=new WeakMap,gu=new WeakMap,dh=new WeakMap,fh=new WeakMap,K1=new WeakMap,rv=new WeakMap,X1=new WeakMap,mh=new WeakMap,pl=new WeakMap,vu=new WeakMap,Y1=new WeakMap,Q1=new WeakMap,Ha=new WeakMap,je=new WeakSet,oE=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},XM=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of m(this,$n).values())if(n.hasTextLayer(e))return n;return null},PH=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=H(this,je,oE).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(m(this,ml)||k(this,ml,new ghe(this)),m(this,ml).show(n,i,this.direction==="ltr"))},RH=function(){var s,a,o;const e=document.getSelection();if(!e||e.isCollapsed){m(this,gu)&&((s=m(this,ml))==null||s.hide(),k(this,gu,null),H(this,je,os).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===m(this,gu))return;const i=H(this,je,oE).call(this,e).closest(".textLayer");if(!i){m(this,gu)&&((a=m(this,ml))==null||a.hide(),k(this,gu,null),H(this,je,os).call(this,{hasSelectedText:!1}));return}if((o=m(this,ml))==null||o.hide(),k(this,gu,t),H(this,je,os).call(this,{hasSelectedText:!0}),!(m(this,Nn)!==Dt.HIGHLIGHT&&m(this,Nn)!==Dt.NONE)&&(m(this,Nn)===Dt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),k(this,lh,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=m(this,Nn)===Dt.HIGHLIGHT?H(this,je,XM).call(this,i):null;if(l==null||l.toggleDrawing(),m(this,ev)){const u=new AbortController,c=this.combinedSignal(u),h=d=>{d.type==="pointerup"&&d.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),d.type==="pointerup"&&H(this,je,tb).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:c}),window.addEventListener("blur",h,{signal:c})}else l==null||l.toggleDrawing(!0),H(this,je,tb).call(this,"main_toolbar")}},tb=function(e=""){m(this,Nn)===Dt.HIGHLIGHT?this.highlightSelection(e):m(this,j1)&&H(this,je,PH).call(this)},kH=function(){document.addEventListener("selectionchange",H(this,je,RH).bind(this),{signal:this._signal})},FH=function(){if(m(this,oh))return;k(this,oh,new AbortController);const e=this.combinedSignal(m(this,oh));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},OH=function(){var e;(e=m(this,oh))==null||e.abort(),k(this,oh,null)},YM=function(){if(m(this,ch))return;k(this,ch,new AbortController);const e=this.combinedSignal(m(this,ch));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},BH=function(){var e;(e=m(this,ch))==null||e.abort(),k(this,ch,null)},LH=function(){if(m(this,ih))return;k(this,ih,new AbortController);const e=this.combinedSignal(m(this,ih));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},$H=function(){var e;(e=m(this,ih))==null||e.abort(),k(this,ih,null)},VH=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},os=function(e){Object.entries(e).some(([n,i])=>m(this,X1)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(m(this,X1),e)}),m(this,Nn)===Dt.HIGHLIGHT&&e.hasSelectedEditor===!1&&H(this,je,uu).call(this,[[Kt.HIGHLIGHT_FREE,!0]]))},uu=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},UH=async function(){if(!m(this,uh)){k(this,uh,!0);const e=[];for(const t of m(this,$n).values())e.push(t.enable());await Promise.all(e);for(const t of m(this,sn).values())t.enable()}},zH=function(){if(this.unselectAll(),m(this,uh)){k(this,uh,!1);for(const e of m(this,$n).values())e.disable();for(const e of m(this,sn).values())e.disable()}},QM=function(e){const t=m(this,$n).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},jH=function(){let e=null;for(e of m(this,lr));return e},rb=function(){if(m(this,sn).size===0)return!0;if(m(this,sn).size===1)for(const e of m(this,sn).values())return e.isEmpty();return!1},JM=function(e){for(const t of m(this,lr))t.unselect();m(this,lr).clear();for(const t of e)t.isEmpty()||(m(this,lr).add(t),t.select());H(this,je,os).call(this,{hasSelectedEditor:this.hasSelection})},Pe(Ag,"TRANSLATE_SMALL",1),Pe(Ag,"TRANSLATE_BIG",10);let ip=Ag;var ti,gl,To,nv,vl,Zs,iv,yl,Ds,yu,If,bl,ph,jo,nb,lE;const ls=class ls{constructor(e){U(this,jo);U(this,ti,null);U(this,gl,!1);U(this,To,null);U(this,nv,null);U(this,vl,null);U(this,Zs,null);U(this,iv,!1);U(this,yl,null);U(this,Ds,null);U(this,yu,null);U(this,If,null);U(this,bl,!1);k(this,Ds,e),k(this,bl,e._uiManager.useNewAltTextFlow),m(ls,ph)||k(ls,ph,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){ls._l10n??(ls._l10n=e)}async render(){const e=k(this,To,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=k(this,nv,document.createElement("span"));e.append(t),m(this,bl)?(e.classList.add("new"),e.setAttribute("data-l10n-id",m(ls,ph).missing),t.setAttribute("data-l10n-id",m(ls,ph)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=m(this,Ds)._uiManager._signal;e.addEventListener("contextmenu",mo,{signal:n}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:n});const i=s=>{s.preventDefault(),m(this,Ds)._uiManager.editAltText(m(this,Ds)),m(this,bl)&&m(this,Ds)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:m(this,jo,nb)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(k(this,iv,!0),i(s))},{signal:n}),await H(this,jo,lE).call(this),e}finish(){m(this,To)&&(m(this,To).focus({focusVisible:m(this,iv)}),k(this,iv,!1))}isEmpty(){return m(this,bl)?m(this,ti)===null:!m(this,ti)&&!m(this,gl)}hasData(){return m(this,bl)?m(this,ti)!==null||!!m(this,yu):this.isEmpty()}get guessedText(){return m(this,yu)}async setGuessedText(e){m(this,ti)===null&&(k(this,yu,e),k(this,If,await ls._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),H(this,jo,lE).call(this))}toggleAltTextBadge(e=!1){var t;if(!m(this,bl)||m(this,ti)){(t=m(this,yl))==null||t.remove(),k(this,yl,null);return}if(!m(this,yl)){const n=k(this,yl,document.createElement("div"));n.className="noAltTextBadge",m(this,Ds).div.append(n)}m(this,yl).classList.toggle("hidden",!e)}serialize(e){let t=m(this,ti);return!e&&m(this,yu)===t&&(t=m(this,If)),{altText:t,decorative:m(this,gl),guessedText:m(this,yu),textWithDisclaimer:m(this,If)}}get data(){return{altText:m(this,ti),decorative:m(this,gl)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:i,cancel:s=!1}){n&&(k(this,yu,n),k(this,If,i)),!(m(this,ti)===e&&m(this,gl)===t)&&(s||(k(this,ti,e),k(this,gl,t)),H(this,jo,lE).call(this))}toggle(e=!1){m(this,To)&&(!e&&m(this,Zs)&&(clearTimeout(m(this,Zs)),k(this,Zs,null)),m(this,To).disabled=!e)}shown(){m(this,Ds)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:m(this,jo,nb)}})}destroy(){var e,t;(e=m(this,To))==null||e.remove(),k(this,To,null),k(this,nv,null),k(this,vl,null),(t=m(this,yl))==null||t.remove(),k(this,yl,null)}};ti=new WeakMap,gl=new WeakMap,To=new WeakMap,nv=new WeakMap,vl=new WeakMap,Zs=new WeakMap,iv=new WeakMap,yl=new WeakMap,Ds=new WeakMap,yu=new WeakMap,If=new WeakMap,bl=new WeakMap,ph=new WeakMap,jo=new WeakSet,nb=function(){return m(this,ti)&&"added"||m(this,ti)===null&&this.guessedText&&"review"||"missing"},lE=async function(){var i,s,a;const e=m(this,To);if(!e)return;if(m(this,bl)){if(e.classList.toggle("done",!!m(this,ti)),e.setAttribute("data-l10n-id",m(ls,ph)[m(this,jo,nb)]),(i=m(this,nv))==null||i.setAttribute("data-l10n-id",m(ls,ph)[`${m(this,jo,nb)}-label`]),!m(this,ti)){(s=m(this,vl))==null||s.remove();return}}else{if(!m(this,ti)&&!m(this,gl)){e.classList.remove("done"),(a=m(this,vl))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=m(this,vl);if(!t){k(this,vl,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${m(this,Ds).id}`;const o=100,l=m(this,Ds)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(m(this,Zs)),k(this,Zs,null)},{once:!0}),e.addEventListener("mouseenter",()=>{k(this,Zs,setTimeout(()=>{k(this,Zs,null),m(this,vl).classList.add("show"),m(this,Ds)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:l}),e.addEventListener("mouseleave",()=>{var u;m(this,Zs)&&(clearTimeout(m(this,Zs)),k(this,Zs,null)),(u=m(this,vl))==null||u.classList.remove("show")},{signal:l})}m(this,gl)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=m(this,ti)),t.parentNode||e.append(t);const n=m(this,Ds).getElementForAltText();n==null||n.setAttribute("aria-describedby",t.id)},U(ls,ph,null),Pe(ls,"_l10n",null);let FS=ls;var gi,Ga,Pf,Pr,J1,Rf,Co,kf,Ff,Of,Z1,ZM;class nA{constructor(e){U(this,Z1);U(this,gi,null);U(this,Ga,null);U(this,Pf,!1);U(this,Pr,null);U(this,J1,null);U(this,Rf,null);U(this,Co,null);U(this,kf,null);U(this,Ff,!1);U(this,Of,null);k(this,Pr,e)}renderForToolbar(){const e=k(this,Ga,document.createElement("button"));return e.className="comment",H(this,Z1,ZM).call(this,e,!1)}renderForStandalone(){const e=k(this,gi,document.createElement("button"));e.className="annotationCommentButton";const t=m(this,Pr).commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd=`calc(${100*(m(this,Pr)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const i=m(this,Pr).commentButtonColor;i&&(n.backgroundColor=i)}return H(this,Z1,ZM).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=m(this,gi)??m(this,Ga))==null||e.focus()},0)}onUpdatedColor(){if(!m(this,gi))return;const e=m(this,Pr).commentButtonColor;e&&(m(this,gi).style.backgroundColor=e),m(this,Pr)._uiManager.updatePopupColor(m(this,Pr))}get commentButtonWidth(){var e;return(((e=m(this,gi))==null?void 0:e.getBoundingClientRect().width)??0)/m(this,Pr).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(m(this,Of))return m(this,Of);if(!m(this,gi))return null;const{x:e,y:t,height:n}=m(this,gi).getBoundingClientRect(),{x:i,y:s,width:a,height:o}=m(this,Pr).parent.boundingClientRect;return[(e-i)/a,(t+n-s)/o]}set commentPopupPositionInLayer(e){k(this,Of,e)}hasDefaultPopupPosition(){return m(this,Of)===null}removeStandaloneCommentButton(){var e;(e=m(this,gi))==null||e.remove(),k(this,gi,null)}removeToolbarCommentButton(){var e;(e=m(this,Ga))==null||e.remove(),k(this,Ga,null)}setCommentButtonStates({selected:e,hasPopup:t}){m(this,gi)&&(m(this,gi).classList.toggle("selected",e),m(this,gi).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let n,i;if(t)[n,i]=t;else{[n,i]=m(this,Pr).commentButtonPosition;const{width:c,height:h,x:d,y:f}=m(this,Pr);n=d+n*c,i=f+i*h}const s=m(this,Pr).parent.boundingClientRect,{x:a,y:o,width:l,height:u}=s;m(this,Pr)._uiManager.editComment(m(this,Pr),a+n*l,o+i*u,{...e,parentDimensions:s})}finish(){m(this,Ga)&&(m(this,Ga).focus({focusVisible:m(this,Pf)}),k(this,Pf,!1))}isDeleted(){return m(this,Ff)||m(this,Co)===""}isEmpty(){return m(this,Co)===null}hasBeenEdited(){return this.isDeleted()||m(this,Co)!==m(this,J1)}serialize(){return this.data}get data(){return{text:m(this,Co),richText:m(this,Rf),date:m(this,kf),deleted:this.isDeleted()}}set data(e){if(e!==m(this,Co)&&k(this,Rf,null),e===null){k(this,Co,""),k(this,Ff,!0);return}k(this,Co,e),k(this,kf,new Date),k(this,Ff,!1)}setInitialText(e,t=null){k(this,J1,e),this.data=e,k(this,kf,null),k(this,Rf,t)}shown(){}destroy(){var e,t;(e=m(this,Ga))==null||e.remove(),k(this,Ga,null),(t=m(this,gi))==null||t.remove(),k(this,gi,null),k(this,Co,""),k(this,Rf,null),k(this,kf,null),k(this,Pr,null),k(this,Pf,!1),k(this,Ff,!1)}}gi=new WeakMap,Ga=new WeakMap,Pf=new WeakMap,Pr=new WeakMap,J1=new WeakMap,Rf=new WeakMap,Co=new WeakMap,kf=new WeakMap,Ff=new WeakMap,Of=new WeakMap,Z1=new WeakSet,ZM=function(e,t){if(!m(this,Pr)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[m(this,Pr)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=m(this,Pr)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",mo,{signal:n}),t&&(e.addEventListener("focusin",s=>{m(this,Pr)._focusEventsAllowed=!1,dn(s)},{capture:!0,signal:n}),e.addEventListener("focusout",s=>{m(this,Pr)._focusEventsAllowed=!0,dn(s)},{capture:!0,signal:n})),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:n});const i=s=>{s.preventDefault(),e===m(this,Ga)?this.edit():m(this,Pr).toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(k(this,Pf,!0),i(s))},{signal:n}),e.addEventListener("pointerenter",()=>{m(this,Pr).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{m(this,Pr).toggleComment(!1,!1)},{signal:n}),e};var sv,Bf,ew,tw,rw,nw,iw,bu,Lf,wu,$f,xu,Md,qH,HH,GH;const xO=class xO{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:s=null,onPinchEnd:a=null,signal:o}){U(this,Md);U(this,sv);U(this,Bf,!1);U(this,ew,null);U(this,tw);U(this,rw);U(this,nw);U(this,iw);U(this,bu,null);U(this,Lf);U(this,wu,null);U(this,$f);U(this,xu,null);k(this,sv,e),k(this,ew,n),k(this,tw,t),k(this,rw,i),k(this,nw,s),k(this,iw,a),k(this,$f,new AbortController),k(this,Lf,AbortSignal.any([o,m(this,$f).signal])),e.addEventListener("touchstart",H(this,Md,qH).bind(this),{passive:!1,signal:m(this,Lf)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Xl.pixelRatio}destroy(){var e,t;(e=m(this,$f))==null||e.abort(),k(this,$f,null),(t=m(this,bu))==null||t.abort(),k(this,bu,null)}};sv=new WeakMap,Bf=new WeakMap,ew=new WeakMap,tw=new WeakMap,rw=new WeakMap,nw=new WeakMap,iw=new WeakMap,bu=new WeakMap,Lf=new WeakMap,wu=new WeakMap,$f=new WeakMap,xu=new WeakMap,Md=new WeakSet,qH=function(e){var i,s,a;if((i=m(this,tw))!=null&&i.call(this))return;if(e.touches.length===1){if(m(this,bu))return;const o=k(this,bu,new AbortController),l=AbortSignal.any([m(this,Lf),o.signal]),u=m(this,sv),c={capture:!0,signal:l,passive:!1},h=d=>{var f;d.pointerType==="touch"&&((f=m(this,bu))==null||f.abort(),k(this,bu,null))};u.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(dn(d),h(d))},c),u.addEventListener("pointerup",h,c),u.addEventListener("pointercancel",h,c);return}if(!m(this,xu)){k(this,xu,new AbortController);const o=AbortSignal.any([m(this,Lf),m(this,xu).signal]),l=m(this,sv),u={signal:o,capture:!1,passive:!1};l.addEventListener("touchmove",H(this,Md,HH).bind(this),u);const c=H(this,Md,GH).bind(this);l.addEventListener("touchend",c,u),l.addEventListener("touchcancel",c,u),u.capture=!0,l.addEventListener("pointerdown",dn,u),l.addEventListener("pointermove",dn,u),l.addEventListener("pointercancel",dn,u),l.addEventListener("pointerup",dn,u),(s=m(this,rw))==null||s.call(this)}if(dn(e),e.touches.length!==2||(a=m(this,ew))!=null&&a.call(this)){k(this,wu,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),k(this,wu,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},HH=function(e){var E;if(!m(this,wu)||e.touches.length!==2)return;dn(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:i,screenY:s}=t,{screenX:a,screenY:o}=n,l=m(this,wu),{touch0X:u,touch0Y:c,touch1X:h,touch1Y:d}=l,f=h-u,p=d-c,g=a-i,b=o-s,v=Math.hypot(g,b)||1,x=Math.hypot(f,p)||1;if(!m(this,Bf)&&Math.abs(x-v)<=xO.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=s,l.touch1X=a,l.touch1Y=o,!m(this,Bf)){k(this,Bf,!0);return}const y=[(i+a)/2,(s+o)/2];(E=m(this,nw))==null||E.call(this,y,x,v)},GH=function(e){var t;e.touches.length>=2||(m(this,xu)&&(m(this,xu).abort(),k(this,xu,null),(t=m(this,iw))==null||t.call(this)),m(this,wu)&&(dn(e),k(this,wu,null),k(this,Bf,!1)))};let OS=xO;var Vf,No,jr,Sr,_u,av,gh,sw,vi,Uf,Au,Wa,vh,aw,zf,ea,ow,jf,Eu,wl,ov,lv,Ka,qf,lw,RT,ht,eI,uw,tI,uE,WH,KH,rI,cE,nI,XH,YH,QH,iI,JH,sI,ZH,eG,tG,aI,ib;const Nt=class Nt{constructor(e){U(this,ht);U(this,Vf,null);U(this,No,null);U(this,jr,null);U(this,Sr,null);U(this,_u,null);U(this,av,!1);U(this,gh,null);U(this,sw,"");U(this,vi,null);U(this,Uf,null);U(this,Au,null);U(this,Wa,null);U(this,vh,null);U(this,aw,"");U(this,zf,!1);U(this,ea,null);U(this,ow,!1);U(this,jf,!1);U(this,Eu,!1);U(this,wl,null);U(this,ov,0);U(this,lv,0);U(this,Ka,null);U(this,qf,null);Pe(this,"isSelected",!1);Pe(this,"_isCopy",!1);Pe(this,"_editToolbar",null);Pe(this,"_initialOptions",Object.create(null));Pe(this,"_initialData",null);Pe(this,"_isVisible",!0);Pe(this,"_uiManager",null);Pe(this,"_focusEventsAllowed",!0);U(this,lw,!1);U(this,RT,Nt._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[s,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Nt.prototype._resizeWithKeyboard,t=ip.TRANSLATE_SMALL,n=ip.TRANSLATE_BIG;return Et(this,"_resizerKeyboardManager",new Xx([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Nt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Et(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new bhe({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Nt._l10n??(Nt._l10n=e),Nt._l10nResizer||(Nt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Nt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Nt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Dr("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return m(this,lw)}set _isDraggable(e){var t;k(this,lw,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=m(this,RT)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(H(this,ht,ib).call(this),(t=m(this,Wa))==null||t.remove(),k(this,Wa,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(m(this,zf)?k(this,zf,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[s,a]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/s,this.y=(t+i)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,i]=this.parentDimensions;this.setAt(e*n,t*i,this.width*n,this.height*i),this._onTranslated()}translate(e,t){H(this,ht,eI).call(this,this.parentDimensions,e,t)}translateInPage(e,t){m(this,ea)||k(this,ea,[this.x,this.y,this.width,this.height]),H(this,ht,eI).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){m(this,ea)||k(this,ea,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,s]}=this;if(this.x+=e/i,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[l,u]=this.getBaseTranslation();a+=l,o+=u;const{style:c}=n;c.left=`${(100*a).toFixed(2)}%`,c.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!m(this,ea)&&(m(this,ea)[0]!==this.x||m(this,ea)[1]!==this.y)}get _hasBeenResized(){return!!m(this,ea)&&(m(this,ea)[2]!==this.width||m(this,ea)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Nt,i=n/e,s=n/t;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,i]}=this;let{x:s,y:a,width:o,height:l}=this;if(o*=n,l*=i,s*=n,a*=i,this._mustFixPosition)switch(e){case 0:s=fs(s,0,n-o),a=fs(a,0,i-l);break;case 90:s=fs(s,0,n-l),a=fs(a,o,i);break;case 180:s=fs(s,o,n),a=fs(a,l,i);break;case 270:s=fs(s,l,n),a=fs(a,0,i-o);break}this.x=s/=n,this.y=a/=i;const[u,c]=this.getBaseTranslation();s+=u,a+=c,t.left=`${(100*s).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return H(n=Nt,uw,tI).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return H(n=Nt,uw,tI).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=m(this,jr))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||m(this,jf))return this._editToolbar;this._editToolbar=new HM(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=m(this,jr))==null||t.destroy()}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return m(this,jr)||(FS.initialize(Nt._l10n),k(this,jr,new FS(this)),m(this,Vf)&&(m(this,jr).data=m(this,Vf),k(this,Vf,null))),m(this,jr)}get altTextData(){var e;return(e=m(this,jr))==null?void 0:e.data}set altTextData(e){m(this,jr)&&(m(this,jr).data=e)}get guessedAltText(){var e;return(e=m(this,jr))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=m(this,jr))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=m(this,jr))==null?void 0:t.serialize(e)}hasAltText(){return!!m(this,jr)&&!m(this,jr).isEmpty()}hasAltTextData(){var e;return((e=m(this,jr))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=m(this,Sr))==null||e.focusButton()}addCommentButton(){return this.canAddComment?m(this,Sr)||k(this,Sr,new nA(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(m(this,_u)){this._uiManager.isEditingMode()&&m(this,_u).classList.remove("hidden");return}this.hasComment&&(k(this,_u,m(this,Sr).renderForStandalone()),this.div.append(m(this,_u)))}}removeStandaloneCommentButton(){m(this,Sr).removeStandaloneCommentButton(),k(this,_u,null)}hideStandaloneCommentButton(){var e;(e=m(this,_u))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:n,deleted:i}}=m(this,Sr);return{text:t,richText:e,date:n,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){m(this,Sr)||k(this,Sr,new nA(this)),m(this,Sr).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(m(this,Sr)||k(this,Sr,new nA(this)),m(this,Sr).setInitialText(e,n),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){var e;return(e=m(this,Sr))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=m(this,Sr))==null?void 0:e.isDeleted()}get hasComment(){return!!m(this,Sr)&&!m(this,Sr).isEmpty()&&!m(this,Sr).isDeleted()}async editComment(e){m(this,Sr)||k(this,Sr,new nA(this)),m(this,Sr).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){m(this,Sr).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[s]=this.pageDimensions,[a]=this.pageTranslation,o=a+s+1,l=i-100,u=o+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[o,l,u,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){m(this,Sr).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var a;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=m(this,av)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),H(this,ht,sI).call(this);const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),MH(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(m(this,qf)||k(this,qf,new OS({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:H(this,ht,XH).bind(this),onPinching:H(this,ht,YH).bind(this),onPinchEnd:H(this,ht,QH).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(a=this._uiManager._editorUndoBar)==null||a.hide(),e}pointerdown(e){const{isMac:t}=Ii.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(k(this,zf,!0),this._isDraggable){H(this,ht,JH).call(this,e);return}H(this,ht,iI).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){m(this,wl)&&clearTimeout(m(this,wl)),k(this,wl,setTimeout(()=>{var e;k(this,wl,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const i=this.parentScale,[s,a]=this.pageDimensions,[o,l]=this.pageTranslation,u=e/i,c=t/i,h=this.x*s,d=this.y*a,f=this.width*s,p=this.height*a;switch(n){case 0:return[h+u+o,a-d-c-p+l,h+u+f+o,a-d-c+l];case 90:return[h+c+o,a-d+u+l,h+c+p+o,a-d+u+f+l];case 180:return[h-u-f+o,a-d+c+l,h-u+o,a-d+c+p+l];case 270:return[h-c-p+o,a-d-u-f+l,h-c+o,a-d-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,s,a]=e,o=s-n,l=a-i;switch(this.rotation){case 0:return[n,t-a,o,l];case 90:return[n,t-i,l,o];case 180:return[s,t-i,o,l];case 270:return[s,t-a,l,o];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Nt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=m(this,Sr))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:i,deleted:s,richText:a},uid:o,pageIndex:l,creationDate:u,modificationDate:c}=this;return{id:o,pageIndex:l,rect:this.getPDFRect(),richText:a,contentsObj:{str:e},creationDate:u,modificationDate:n||c,popupRef:!s,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),k(this,jf,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),k(this,jf,!1),!0):!1}isInEditMode(){return m(this,jf)}shouldGetKeyboardEvents(){return m(this,Eu)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return t<a&&i>0&&e<s&&n>0}rebuild(){H(this,ht,sI).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,k(i,Vf,e.accessibilityData),i._isCopy=e.isCopy||!1;const[s,a]=i.pageDimensions,[o,l,u,c]=i.getRectInCurrentCoords(e.rect,a);return i.x=o/s,i.y=l/a,i.width=u/s,i.height=c/a,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t,n;if((e=m(this,vh))==null||e.abort(),k(this,vh,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),m(this,wl)&&(clearTimeout(m(this,wl)),k(this,wl,null)),H(this,ht,ib).call(this),this.removeEditToolbar(),m(this,Ka)){for(const i of m(this,Ka).values())clearTimeout(i);k(this,Ka,null)}this.parent=null,(t=m(this,qf))==null||t.destroy(),k(this,qf,null),(n=m(this,Wa))==null||n.remove(),k(this,Wa,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(H(this,ht,WH).call(this),m(this,vi).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,i,s,a]=this.getPDFRect();return[Nt._round(n+(s-n)*e),Nt._round(i+(a-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return m(this,Sr).commentPopupPositionInLayer}set commentPopupPosition(e){m(this,Sr).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return m(this,Sr).hasDefaultPopupPosition()}get commentButtonWidth(){return m(this,Sr).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){var t;(t=m(this,Sr))==null||t.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),k(this,Au,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=m(this,vi).children;if(!m(this,No)){k(this,No,Array.from(t));const a=H(this,ht,ZH).bind(this),o=H(this,ht,eG).bind(this),l=this._uiManager._signal;for(const u of m(this,No)){const c=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",a,{signal:l}),u.addEventListener("blur",o,{signal:l}),u.addEventListener("focus",H(this,ht,tG).bind(this,c),{signal:l}),u.setAttribute("data-l10n-id",Nt._l10nResizer[c])}}const n=m(this,No)[0];let i=0;for(const a of t){if(a===n)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(m(this,No).length/4);if(s!==i){if(s<i)for(let o=0;o<i-s;o++)m(this,vi).append(m(this,vi).firstElementChild);else if(s>i)for(let o=0;o<s-i;o++)m(this,vi).firstElementChild.before(m(this,vi).lastElementChild);let a=0;for(const o of t){const u=m(this,No)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",Nt._l10nResizer[u])}}H(this,ht,aI).call(this,0),k(this,Eu,!0),m(this,vi).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){m(this,Eu)&&H(this,ht,nI).call(this,m(this,aw),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){H(this,ht,ib).call(this),this.div.focus()}select(){var e,t,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,s;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(t=this._editToolbar)==null||t.show(),(n=m(this,jr))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,n,i,s;this.isSelected&&(this.isSelected=!1,(e=m(this,vi))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(s=m(this,jr))==null||s.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return m(this,ow)}set isEditing(e){k(this,ow,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){m(this,Ka)||k(this,Ka,new Map);const{action:n}=e;let i=m(this,Ka).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),m(this,Ka).delete(n),m(this,Ka).size===0&&k(this,Ka,null)},Nt._telemetryTimeout),m(this,Ka).set(n,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),k(this,av,!1)}disable(){this.div&&(this.div.tabIndex=-1),k(this,av,!0)}updateFakeAnnotationElement(e){if(!m(this,Wa)&&!this.deleted){k(this,Wa,e.addFakeAnnotation(this));return}if(this.deleted){m(this,Wa).remove(),k(this,Wa,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&m(this,Wa).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstElementChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Vf=new WeakMap,No=new WeakMap,jr=new WeakMap,Sr=new WeakMap,_u=new WeakMap,av=new WeakMap,gh=new WeakMap,sw=new WeakMap,vi=new WeakMap,Uf=new WeakMap,Au=new WeakMap,Wa=new WeakMap,vh=new WeakMap,aw=new WeakMap,zf=new WeakMap,ea=new WeakMap,ow=new WeakMap,jf=new WeakMap,Eu=new WeakMap,wl=new WeakMap,ov=new WeakMap,lv=new WeakMap,Ka=new WeakMap,qf=new WeakMap,lw=new WeakMap,RT=new WeakMap,ht=new WeakSet,eI=function([e,t],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},uw=new WeakSet,tI=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},uE=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},WH=function(){if(m(this,vi))return;k(this,vi,document.createElement("div")),m(this,vi).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const i=document.createElement("div");m(this,vi).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",H(this,ht,KH).bind(this,n),{signal:t}),i.addEventListener("contextmenu",mo,{signal:t}),i.tabIndex=-1}this.div.prepend(m(this,vi))},KH=function(e,t){var c;t.preventDefault();const{isMac:n}=Ii.platform;if(t.button!==0||t.ctrlKey&&n)return;(c=m(this,jr))==null||c.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,k(this,Uf,[t.screenX,t.screenY]);const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",H(this,ht,nI).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",dn,{passive:!1,signal:a}),window.addEventListener("contextmenu",mo,{signal:a}),k(this,Au,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var h;s.abort(),this.parent.togglePointerEvents(!0),(h=m(this,jr))==null||h.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=o,this.div.style.cursor=l,H(this,ht,cE).call(this)};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})},rI=function(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},cE=function(){if(!m(this,Au))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=m(this,Au);k(this,Au,null);const s=this.x,a=this.y,o=this.width,l=this.height;s===e&&a===t&&o===n&&l===i||this.addCommands({cmd:H(this,ht,rI).bind(this,s,a,o,l),undo:H(this,ht,rI).bind(this,e,t,n,i),mustExec:!0})},nI=function(e,t){const[n,i]=this.parentDimensions,s=this.x,a=this.y,o=this.width,l=this.height,u=Nt.MIN_SIZE/n,c=Nt.MIN_SIZE/i,h=H(this,ht,uE).call(this,this.rotation),d=(P,L)=>[h[0]*P+h[2]*L,h[1]*P+h[3]*L],f=H(this,ht,uE).call(this,360-this.rotation),p=(P,L)=>[f[0]*P+f[2]*L,f[1]*P+f[3]*L];let g,b,v=!1,x=!1;switch(e){case"topLeft":v=!0,g=(P,L)=>[0,0],b=(P,L)=>[P,L];break;case"topMiddle":g=(P,L)=>[P/2,0],b=(P,L)=>[P/2,L];break;case"topRight":v=!0,g=(P,L)=>[P,0],b=(P,L)=>[0,L];break;case"middleRight":x=!0,g=(P,L)=>[P,L/2],b=(P,L)=>[0,L/2];break;case"bottomRight":v=!0,g=(P,L)=>[P,L],b=(P,L)=>[0,0];break;case"bottomMiddle":g=(P,L)=>[P/2,L],b=(P,L)=>[P/2,0];break;case"bottomLeft":v=!0,g=(P,L)=>[0,L],b=(P,L)=>[P,0];break;case"middleLeft":x=!0,g=(P,L)=>[0,L/2],b=(P,L)=>[P,L/2];break}const y=g(o,l),E=b(o,l);let w=d(...E);const A=Nt._round(s+w[0]),T=Nt._round(a+w[1]);let S=1,N=1,D,_;if(t.fromKeyboard)({deltaX:D,deltaY:_}=t);else{const{screenX:P,screenY:L}=t,[$,z]=m(this,Uf);[D,_]=this.screenToPageTranslation(P-$,L-z),m(this,Uf)[0]=P,m(this,Uf)[1]=L}if([D,_]=p(D/n,_/i),v){const P=Math.hypot(o,l);S=N=Math.max(Math.min(Math.hypot(E[0]-y[0]-D,E[1]-y[1]-_)/P,1/o,1/l),u/o,c/l)}else x?S=fs(Math.abs(E[0]-y[0]-D),u,1)/o:N=fs(Math.abs(E[1]-y[1]-_),c,1)/l;const M=Nt._round(o*S),I=Nt._round(l*N);w=d(...b(M,I));const V=A-w[0],q=T-w[1];m(this,ea)||k(this,ea,[this.x,this.y,this.width,this.height]),this.width=M,this.height=I,this.x=V,this.y=q,this.setDims(),this.fixAndSetPosition(),this._onResizing()},XH=function(){var e;k(this,Au,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=m(this,jr))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},YH=function(e,t,n){let s=.7*(n/t)+1-.7;if(s===1)return;const a=H(this,ht,uE).call(this,this.rotation),o=(A,T)=>[a[0]*A+a[2]*T,a[1]*A+a[3]*T],[l,u]=this.parentDimensions,c=this.x,h=this.y,d=this.width,f=this.height,p=Nt.MIN_SIZE/l,g=Nt.MIN_SIZE/u;s=Math.max(Math.min(s,1/d,1/f),p/d,g/f);const b=Nt._round(d*s),v=Nt._round(f*s);if(b===d&&v===f)return;m(this,ea)||k(this,ea,[c,h,d,f]);const x=o(d/2,f/2),y=Nt._round(c+x[0]),E=Nt._round(h+x[1]),w=o(b/2,v/2);this.x=y-w[0],this.y=E-w[1],this.width=b,this.height=v,this.setDims(),this.fixAndSetPosition(),this._onResizing()},QH=function(){var e;(e=m(this,jr))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),H(this,ht,cE).call(this)},iI=function(e){const{isMac:t}=Ii.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},JH=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,s=this._uiManager.combinedSignal(i),a={capture:!0,passive:!1,signal:s},o=u=>{i.abort(),k(this,gh,null),k(this,zf,!1),this._uiManager.endDragSession()||H(this,ht,iI).call(this,u),n&&this._onStopDragging()};t&&(k(this,ov,e.clientX),k(this,lv,e.clientY),k(this,gh,e.pointerId),k(this,sw,e.pointerType),window.addEventListener("pointermove",u=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:c,clientY:h,pointerId:d}=u;if(d!==m(this,gh)){dn(u);return}const[f,p]=this.screenToPageTranslation(c-m(this,ov),h-m(this,lv));k(this,ov,c),k(this,lv,h),this._uiManager.dragSelectedEditors(f,p)},a),window.addEventListener("touchmove",dn,a),window.addEventListener("pointerdown",u=>{u.pointerType===m(this,sw)&&(m(this,qf)||u.isPrimary)&&o(u),dn(u)},a));const l=u=>{if(!m(this,gh)||m(this,gh)===u.pointerId){o(u);return}dn(u)};window.addEventListener("pointerup",l,{signal:s}),window.addEventListener("blur",l,{signal:s})},sI=function(){if(m(this,vh)||!this.div)return;k(this,vh,new AbortController);const e=this._uiManager.combinedSignal(m(this,vh));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},ZH=function(e){Nt._resizerKeyboardManager.exec(this,e)},eG=function(e){var t;m(this,Eu)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==m(this,vi)&&H(this,ht,ib).call(this)},tG=function(e){k(this,aw,m(this,Eu)?e:"")},aI=function(e){if(m(this,No))for(const t of m(this,No))t.tabIndex=e},ib=function(){k(this,Eu,!1),H(this,ht,aI).call(this,-1),H(this,ht,cE).call(this)},U(Nt,uw),Pe(Nt,"_l10n",null),Pe(Nt,"_l10nResizer",null),Pe(Nt,"_borderLineWidth",-1),Pe(Nt,"_colorManager",new KM),Pe(Nt,"_zIndex",1),Pe(Nt,"_telemetryTimeout",1e3);let Fr=Nt;class bhe extends Fr{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const YL=3285377520,ka=4294901760,ll=65535;class rG{constructor(e){this.h1=e?e&4294967295:YL,this.h2=e?e&4294967295:YL}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let g=0,b=e.length;g<b;g++){const v=e.charCodeAt(g);v<=255?t[n++]=v:(t[n++]=v>>>8,t[n++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,s=n-i*4,a=new Uint32Array(t.buffer,0,i);let o=0,l=0,u=this.h1,c=this.h2;const h=3432918353,d=461845907,f=h&ll,p=d&ll;for(let g=0;g<i;g++)g&1?(o=a[g],o=o*h&ka|o*f&ll,o=o<<15|o>>>17,o=o*d&ka|o*p&ll,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(l=a[g],l=l*h&ka|l*f&ll,l=l<<15|l>>>17,l=l*d&ka|l*p&ll,c^=l,c=c<<13|c>>>19,c=c*5+3864292196);switch(o=0,s){case 3:o^=t[i*4+2]<<16;case 2:o^=t[i*4+1]<<8;case 1:o^=t[i*4],o=o*h&ka|o*f&ll,o=o<<15|o>>>17,o=o*d&ka|o*p&ll,i&1?u^=o:c^=o}this.h1=u,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&ka|e*36045&ll,t=t*4283543511&ka|((t<<16|e>>>16)*2950163797&ka)>>>16,e^=t>>>1,e=e*444984403&ka|e*60499&ll,t=t*3301882366&ka|((t<<16|e>>>16)*3120437893&ka)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const oI=Object.freeze({map:null,hash:"",transfer:void 0});var Hf,Gf,Su,yi,kT,nG;class dF{constructor(){U(this,kT);U(this,Hf,!1);U(this,Gf,null);U(this,Su,null);U(this,yi,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=m(this,yi).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return m(this,yi).get(e)}remove(e){const t=m(this,yi).get(e);if(t!==void 0&&(t instanceof Fr&&m(this,Su).delete(t.annotationElementId),m(this,yi).delete(e),m(this,yi).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of m(this,yi).values())if(n instanceof Fr)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=m(this,yi).get(e);let i=!1;if(n!==void 0)for(const[s,a]of Object.entries(t))n[s]!==a&&(i=!0,n[s]=a);else i=!0,m(this,yi).set(e,t);i&&H(this,kT,nG).call(this),t instanceof Fr&&((m(this,Su)||k(this,Su,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return m(this,yi).has(e)}get size(){return m(this,yi).size}resetModified(){m(this,Hf)&&(k(this,Hf,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new iG(this)}get serializable(){if(m(this,yi).size===0)return oI;const e=new Map,t=new rG,n=[],i=Object.create(null);let s=!1;for(const[a,o]of m(this,yi)){const l=o instanceof Fr?o.serialize(!1,i):o;l&&(e.set(a,l),t.update(`${a}:${JSON.stringify(l)}`),s||(s=!!l.bitmap))}if(s)for(const a of e.values())a.bitmap&&n.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:oI}get editorStats(){let e=null;const t=new Map;let n=0,i=0;for(const s of m(this,yi).values()){if(!(s instanceof Fr)){s.popup&&(s.popup.deleted?i+=1:n+=1);continue}s.isCommentDeleted?i+=1:s.hasEditedComment&&(n+=1);const a=s.telemetryFinalData;if(!a)continue;const{type:o}=a;t.has(o)||t.set(o,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const l=e[o]||(e[o]=new Map);for(const[u,c]of Object.entries(a)){if(u==="type")continue;let h=l.get(u);h||(h=new Map,l.set(u,h));const d=h.get(c)??0;h.set(c,d+1)}}if((i>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:i,edited:n}),!e)return null;for(const[s,a]of t)e[s]=a.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){k(this,Gf,null)}updateEditor(e,t){var i;const n=(i=m(this,Su))==null?void 0:i.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=m(this,Su))==null?void 0:t.get(e))||null}get modifiedIds(){if(m(this,Gf))return m(this,Gf);const e=[];if(m(this,Su))for(const t of m(this,Su).values())t.serialize()&&e.push(t.annotationElementId);return k(this,Gf,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return m(this,yi).entries()}}Hf=new WeakMap,Gf=new WeakMap,Su=new WeakMap,yi=new WeakMap,kT=new WeakSet,nG=function(){m(this,Hf)||(k(this,Hf,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var cw;class iG extends dF{constructor(t){super();U(this,cw);const{map:n,hash:i,transfer:s}=t.serializable,a=structuredClone(n,s?{transfer:s}:null);k(this,cw,{map:a,hash:i,transfer:s})}get print(){Dr("Should not call PrintAnnotationStorage.print")}get serializable(){return m(this,cw)}get modifiedIds(){return Et(this,"modifiedIds",{ids:new Set,hash:""})}}cw=new WeakMap;var uv;class whe{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){U(this,uv,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),m(this,uv).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||m(this,uv).has(e.loadedName))){if(Xt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:a}=e,o=new FontFace(i,s,a);this.addNativeFontFace(o);try{await o.load(),m(this,uv).add(i),n==null||n(e)}catch{At(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Dr("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw At(`Failed to load font '${n.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Et(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Et(this,"isSyncFontLoadingSupported",ds||Ii.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Xt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const s=n.shift();setTimeout(s.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:t,callback:e};return n.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Et(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(E,w){return E.charCodeAt(w)<<24|E.charCodeAt(w+1)<<16|E.charCodeAt(w+2)<<8|E.charCodeAt(w+3)&255}function i(E,w,A,T){const S=E.substring(0,w),N=E.substring(w+A);return S+T+N}let s,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let u=0;function c(E,w){if(++u>30){At("Load test font never loaded."),w();return}if(l.font="30px "+E,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){w();return}setTimeout(c.bind(null,E,w))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=i(d,976,h.length,h);const p=16,g=1482184792;let b=n(d,p);for(s=0,a=h.length-3;s<a;s+=4)b=b-g+n(h,s)|0;s<h.length&&(b=b-g+n(h+"XXX",s)|0),d=i(d,p,4,ehe(b));const v=`url(data:font/opentype;base64,${btoa(d)});`,x=`@font-face {font-family:"${h}";src:${v}}`;this.insertRule(x);const y=this._document.createElement("div");y.style.visibility="hidden",y.style.width=y.style.height="10px",y.style.position="absolute",y.style.top=y.style.left="0px";for(const E of[e.loadedName,h]){const w=this._document.createElement("span");w.textContent="Hi",w.style.fontFamily=E,y.append(w)}this._document.body.append(y),c(h,()=>{y.remove(),t.complete()})}}uv=new WeakMap;var vr;class xhe{constructor(e,t=null,n,i){U(this,vr);this.compiledGlyphs=Object.create(null),k(this,vr,e),this._inspectFont=t,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${xH(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let i;try{i=e.get(n)}catch(a){At(`getPathGenerator - ignoring character: "${a}".`)}const s=EH(i);return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=s}get black(){return m(this,vr).black}get bold(){return m(this,vr).bold}get disableFontFace(){return m(this,vr).disableFontFace??!1}set disableFontFace(e){Et(this,"disableFontFace",!!e)}get fontExtraProperties(){return m(this,vr).fontExtraProperties??!1}get isInvalidPDFjsFont(){return m(this,vr).isInvalidPDFjsFont}get isType3Font(){return m(this,vr).isType3Font}get italic(){return m(this,vr).italic}get missingFile(){return m(this,vr).missingFile}get remeasure(){return m(this,vr).remeasure}get vertical(){return m(this,vr).vertical}get ascent(){return m(this,vr).ascent}get defaultWidth(){return m(this,vr).defaultWidth}get descent(){return m(this,vr).descent}get bbox(){return m(this,vr).bbox}set bbox(e){Et(this,"bbox",e)}get fontMatrix(){return m(this,vr).fontMatrix}get fallbackName(){return m(this,vr).fallbackName}get loadedName(){return m(this,vr).loadedName}get mimetype(){return m(this,vr).mimetype}get name(){return m(this,vr).name}get data(){return m(this,vr).data}clearData(){m(this,vr).clearData()}get cssFontInfo(){return m(this,vr).cssFontInfo}get systemFontInfo(){return m(this,vr).systemFontInfo}get defaultVMetrics(){return m(this,vr).defaultVMetrics}}vr=new WeakMap;var cv,hv,hw,dv,hE;const Eg=class Eg{constructor(e){U(this,dv);U(this,cv);U(this,hv);U(this,hw);k(this,cv,e),k(this,hv,new DataView(m(this,cv))),k(this,hw,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let i=0;for(const u of Eg.strings){const c=t.encode(e[u]);n[u]=c,i+=4+c.length}const s=new ArrayBuffer(i),a=new Uint8Array(s),o=new DataView(s);let l=0;for(const u of Eg.strings){const c=n[u],h=c.length;o.setUint32(l,h),a.set(c,l+4),l+=4+h}return Xt(l===s.byteLength,"CssFontInfo.write: Buffer overflow"),s}get fontFamily(){return H(this,dv,hE).call(this,0)}get fontWeight(){return H(this,dv,hE).call(this,1)}get italicAngle(){return H(this,dv,hE).call(this,2)}};cv=new WeakMap,hv=new WeakMap,hw=new WeakMap,dv=new WeakSet,hE=function(e){Xt(e<Eg.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=m(this,hv).getUint32(t)+4;const n=m(this,hv).getUint32(t);return m(this,hw).decode(new Uint8Array(m(this,cv),t+4,n))},Pe(Eg,"strings",["fontFamily","fontWeight","italicAngle"]);let BS=Eg;var yh,xl,Wf,Kf,sb;const Sg=class Sg{constructor(e){U(this,Kf);U(this,yh);U(this,xl);U(this,Wf);k(this,yh,e),k(this,xl,new DataView(m(this,yh))),k(this,Wf,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let i=0;for(const d of Sg.strings){const f=t.encode(e[d]);n[d]=f,i+=4+f.length}i+=4;let s,a,o=1+i;e.style&&(s=t.encode(e.style.style),a=t.encode(e.style.weight),o+=4+s.length+4+a.length);const l=new ArrayBuffer(o),u=new Uint8Array(l),c=new DataView(l);let h=0;c.setUint8(h++,e.guessFallback?1:0),c.setUint32(h,0),h+=4,i=0;for(const d of Sg.strings){const f=n[d],p=f.length;i+=4+p,c.setUint32(h,p),u.set(f,h+4),h+=4+p}return c.setUint32(h-i-4,i),e.style&&(c.setUint32(h,s.length),u.set(s,h+4),h+=4+s.length,c.setUint32(h,a.length),u.set(a,h+4),h+=4+a.length),Xt(h<=l.byteLength,"SubstitionInfo.write: Buffer overflow"),l.transferToFixedLength(h)}get guessFallback(){return m(this,xl).getUint8(0)!==0}get css(){return H(this,Kf,sb).call(this,0)}get loadedName(){return H(this,Kf,sb).call(this,1)}get baseFontName(){return H(this,Kf,sb).call(this,2)}get src(){return H(this,Kf,sb).call(this,3)}get style(){let e=1;e+=4+m(this,xl).getUint32(e);const t=m(this,xl).getUint32(e),n=m(this,Wf).decode(new Uint8Array(m(this,yh),e+4,t));e+=4+t;const i=m(this,xl).getUint32(e),s=m(this,Wf).decode(new Uint8Array(m(this,yh),e+4,i));return{style:n,weight:s}}};yh=new WeakMap,xl=new WeakMap,Wf=new WeakMap,Kf=new WeakSet,sb=function(e){Xt(e<Sg.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=m(this,xl).getUint32(t)+4;const n=m(this,xl).getUint32(t);return m(this,Wf).decode(new Uint8Array(m(this,yh),t+4,n))},Pe(Sg,"strings",["css","loadedName","baseFontName","src"]);let LS=Sg;var fv,mv,pv,gv,ta,_l,dw,yr,cn,_o,dE,ab;const It=class It{constructor({data:e,extra:t}){U(this,cn);U(this,_l);U(this,dw);U(this,yr);k(this,_l,e),k(this,dw,new TextDecoder),k(this,yr,new DataView(m(this,_l))),t&&Object.assign(this,t)}get black(){return H(this,cn,_o).call(this,0)}get bold(){return H(this,cn,_o).call(this,1)}get disableFontFace(){return H(this,cn,_o).call(this,2)}get fontExtraProperties(){return H(this,cn,_o).call(this,3)}get isInvalidPDFjsFont(){return H(this,cn,_o).call(this,4)}get isType3Font(){return H(this,cn,_o).call(this,5)}get italic(){return H(this,cn,_o).call(this,6)}get missingFile(){return H(this,cn,_o).call(this,7)}get remeasure(){return H(this,cn,_o).call(this,8)}get vertical(){return H(this,cn,_o).call(this,9)}get ascent(){return H(this,cn,dE).call(this,0)}get defaultWidth(){return H(this,cn,dE).call(this,1)}get descent(){return H(this,cn,dE).call(this,2)}get bbox(){let e=m(It,mv);if(m(this,yr).getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<4;i++)n.push(m(this,yr).getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=m(It,pv);if(m(this,yr).getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<6;i++)n.push(m(this,yr).getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=m(It,gv);if(m(this,yr).getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<3;i++)n.push(m(this,yr).getInt16(e,!0)),e+=2;return n}get fallbackName(){return H(this,cn,ab).call(this,0)}get loadedName(){return H(this,cn,ab).call(this,1)}get mimetype(){return H(this,cn,ab).call(this,2)}get name(){return H(this,cn,ab).call(this,3)}get data(){let e=m(It,ta);const t=m(this,yr).getUint32(e);e+=4+t;const n=m(this,yr).getUint32(e);e+=4+n;const i=m(this,yr).getUint32(e);e+=4+i;const s=m(this,yr).getUint32(e);if(s!==0)return new Uint8Array(m(this,_l),e+4,s)}clearData(){let e=m(It,ta);const t=m(this,yr).getUint32(e);e+=4+t;const n=m(this,yr).getUint32(e);e+=4+n;const i=m(this,yr).getUint32(e);e+=4+i;const s=m(this,yr).getUint32(e);new Uint8Array(m(this,_l),e+4,s).fill(0),m(this,yr).setUint32(e,0)}get cssFontInfo(){let e=m(It,ta);const t=m(this,yr).getUint32(e);e+=4+t;const n=m(this,yr).getUint32(e);e+=4+n;const i=m(this,yr).getUint32(e);if(i===0)return null;const s=new Uint8Array(i);return s.set(new Uint8Array(m(this,_l),e+4,i)),new BS(s.buffer)}get systemFontInfo(){let e=m(It,ta);const t=m(this,yr).getUint32(e);e+=4+t;const n=m(this,yr).getUint32(e);if(n===0)return null;const i=new Uint8Array(n);return i.set(new Uint8Array(m(this,_l),e+4,n)),new LS(i.buffer)}static write(e){const t=e.systemFontInfo?LS.write(e.systemFontInfo):null,n=e.cssFontInfo?BS.write(e.cssFontInfo):null,i=new TextEncoder,s={};let a=0;for(const g of It.strings)s[g]=i.encode(e[g]),a+=4+s[g].length;const o=m(It,ta)+4+a+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),l=new ArrayBuffer(o),u=new Uint8Array(l),c=new DataView(l);let h=0;const d=It.bools.length;let f=0,p=0;for(let g=0;g<d;g++){const b=e[It.bools[g]];f|=(b===void 0?0:b?2:1)<<p,p+=2,(p===8||g===d-1)&&(c.setUint8(h++,f),f=0,p=0)}Xt(h===m(It,fv),"FontInfo.write: Boolean properties offset mismatch");for(const g of It.numbers)c.setFloat64(h,e[g]),h+=8;if(Xt(h===m(It,mv),"FontInfo.write: Number properties offset mismatch"),e.bbox){c.setUint8(h++,4);for(const g of e.bbox)c.setInt16(h,g,!0),h+=2}else c.setUint8(h++,0),h+=2*4;if(Xt(h===m(It,pv),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){c.setUint8(h++,6);for(const g of e.fontMatrix)c.setFloat64(h,g,!0),h+=8}else c.setUint8(h++,0),h+=8*6;if(Xt(h===m(It,gv),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){c.setUint8(h++,1);for(const g of e.defaultVMetrics)c.setInt16(h,g,!0),h+=2}else c.setUint8(h++,0),h+=3*2;Xt(h===m(It,ta),"FontInfo.write: DefaultVMetrics properties offset mismatch"),c.setUint32(m(It,ta),0),h+=4;for(const g of It.strings){const b=s[g],v=b.length;c.setUint32(h,v),u.set(b,h+4),h+=4+v}if(c.setUint32(m(It,ta),h-m(It,ta)-4),!t)c.setUint32(h,0),h+=4;else{const g=t.byteLength;c.setUint32(h,g),Xt(h+4+g<=l.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(t),h+4),h+=4+g}if(!n)c.setUint32(h,0),h+=4;else{const g=n.byteLength;c.setUint32(h,g),Xt(h+4+g<=l.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(n),h+4),h+=4+g}return e.data===void 0?(c.setUint32(h,0),h+=4):(c.setUint32(h,e.data.length),u.set(e.data,h+4),h+=4+e.data.length),Xt(h<=l.byteLength,"FontInfo.write: Buffer overflow"),l.transferToFixedLength(h)}};fv=new WeakMap,mv=new WeakMap,pv=new WeakMap,gv=new WeakMap,ta=new WeakMap,_l=new WeakMap,dw=new WeakMap,yr=new WeakMap,cn=new WeakSet,_o=function(e){Xt(e<It.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=e*2%8,i=m(this,yr).getUint8(t)>>n&3;return i===0?void 0:i===2},dE=function(e){return Xt(e<It.numbers.length,"Invalid number index"),m(this,yr).getFloat64(m(It,fv)+e*8)},ab=function(e){Xt(e<It.strings.length,"Invalid string index");let t=m(It,ta)+4;for(let s=0;s<e;s++)t+=m(this,yr).getUint32(t)+4;const n=m(this,yr).getUint32(t),i=new Uint8Array(n);return i.set(new Uint8Array(m(this,_l),t+4,n)),m(this,dw).decode(i)},Pe(It,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),Pe(It,"numbers",["ascent","defaultWidth","descent"]),Pe(It,"strings",["fallbackName","loadedName","mimetype","name"]),U(It,fv,Math.ceil(It.bools.length*2/8)),U(It,mv,m(It,fv)+It.numbers.length*8),U(It,pv,m(It,mv)+1+2*4),U(It,gv,m(It,pv)+1+8*6),U(It,ta,m(It,gv)+1+2*3);let lI=It;var fw,mw,pw,gw,vw,yw,bw,ww;const Ir=class Ir{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,n=null,i=[],s=[],a=[],o=[],l=null,u=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,n=e[2],a=e[3],t===1?i.push(...e[4],...e[5]):i.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,l=e[1],i=e[2],s=e[3],o=e[4]||[],n=e[6],u=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const c=Math.floor(i.length/2),h=Math.floor(s.length/3),d=a.length,f=o.length;let p=0;for(const w of o)p+=1,p=Math.ceil(p/4)*4,p+=4+w.coords.length*4,p+=4+w.colors.length*4,w.verticesPerRow!==void 0&&(p+=4);const g=20+c*8+h*3+d*8+(n?16:0)+(u?3:0)+p,b=new ArrayBuffer(g),v=new DataView(b),x=new Uint8Array(b);v.setUint8(m(Ir,fw),t),v.setUint8(m(Ir,mw),n?1:0),v.setUint8(m(Ir,pw),u?1:0),v.setUint8(m(Ir,gw),l),v.setUint32(m(Ir,vw),c,!0),v.setUint32(m(Ir,yw),h,!0),v.setUint32(m(Ir,bw),d,!0),v.setUint32(m(Ir,ww),f,!0);let y=20;new Float32Array(b,y,c*2).set(i),y+=c*8,x.set(s,y),y+=h*3;for(const[w,A]of a)v.setFloat32(y,w,!0),y+=4,v.setUint32(y,parseInt(A.slice(1),16),!0),y+=4;if(n)for(const w of n)v.setFloat32(y,w,!0),y+=4;u&&(x.set(u,y),y+=3);for(let w=0;w<o.length;w++){const A=o[w];v.setUint8(y,A.type),y+=1,y=Math.ceil(y/4)*4,v.setUint32(y,A.coords.length,!0),y+=4,new Int32Array(b,y,A.coords.length).set(A.coords),y+=A.coords.length*4,v.setUint32(y,A.colors.length,!0),y+=4,new Int32Array(b,y,A.colors.length).set(A.colors),y+=A.colors.length*4,A.verticesPerRow!==void 0&&(v.setUint32(y,A.verticesPerRow,!0),y+=4)}return b}getIR(){const e=this.view,t=this.data[m(Ir,fw)],n=!!this.data[m(Ir,mw)],i=!!this.data[m(Ir,pw)],s=e.getUint32(m(Ir,vw),!0),a=e.getUint32(m(Ir,yw),!0),o=e.getUint32(m(Ir,bw),!0),l=e.getUint32(m(Ir,ww),!0);let u=20;const c=new Float32Array(this.buffer,u,s*2);u+=s*8;const h=new Uint8Array(this.buffer,u,a*3);u+=a*3;const d=[];for(let b=0;b<o;++b){const v=e.getFloat32(u,!0);u+=4;const x=e.getUint32(u,!0);u+=4,d.push([v,`#${x.toString(16).padStart(6,"0")}`])}let f=null;if(n){f=[];for(let b=0;b<4;++b)f.push(e.getFloat32(u,!0)),u+=4}let p=null;i&&(p=new Uint8Array(this.buffer,u,3),u+=3);const g=[];for(let b=0;b<l;++b){const v=e.getUint8(u);u+=1,u=Math.ceil(u/4)*4;const x=e.getUint32(u,!0);u+=4;const y=new Int32Array(this.buffer,u,x);u+=x*4;const E=e.getUint32(u,!0);u+=4;const w=new Int32Array(this.buffer,u,E);u+=E*4;const A={type:v,coords:y,colors:w};v===VM.LATTICE&&(A.verticesPerRow=e.getUint32(u,!0),u+=4),g.push(A)}if(t===1)return["RadialAxial","axial",f,d,Array.from(c.slice(0,2)),Array.from(c.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",f,d,[c[0],c[1]],[c[3],c[4]],c[2],c[5]];if(t===3){const b=this.data[m(Ir,gw)];let v=null;if(c.length>0){let x=c[0],y=c[0],E=c[1],w=c[1];for(let A=0;A<c.length;A+=2){const T=c[A],S=c[A+1];x=x>T?T:x,E=E>S?S:E,y=y<T?T:y,w=w<S?S:w}v=[x,E,y,w]}return["Mesh",b,c,h,g,v,f,p]}throw new Error(`Unsupported pattern kind: ${t}`)}};fw=new WeakMap,mw=new WeakMap,pw=new WeakMap,gw=new WeakMap,vw=new WeakMap,yw=new WeakMap,bw=new WeakMap,ww=new WeakMap,U(Ir,fw,0),U(Ir,mw,1),U(Ir,pw,2),U(Ir,gw,3),U(Ir,vw,4),U(Ir,yw,8),U(Ir,bw,12),U(Ir,ww,16);let uI=Ir;function _he(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(ds)return r;const e=URL.parse(r,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Ahe(r){if(ds&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return Hx(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r==null?void 0:r.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function iA(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const cI=r=>typeof r=="object"&&Number.isInteger(r==null?void 0:r.num)&&r.num>=0&&Number.isInteger(r==null?void 0:r.gen)&&r.gen>=0,Ehe=r=>typeof r=="object"&&typeof(r==null?void 0:r.name)=="string",She=she.bind(null,cI,Ehe);var Tu,FT;class The{constructor(){U(this,Tu,new Map);U(this,FT,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};m(this,FT).then(()=>{for(const[i]of m(this,Tu))i.call(this,n)})}addEventListener(e,t,n=null){let i=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:s}=n;if(s.aborted){At("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);i=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}m(this,Tu).set(t,i)}removeEventListener(e,t){const n=m(this,Tu).get(t);n==null||n(),m(this,Tu).delete(t)}terminate(){for(const[,e]of m(this,Tu))e==null||e();m(this,Tu).clear()}}Tu=new WeakMap,FT=new WeakMap;const sA={DATA:1,ERROR:2},Sn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function QL(){}function Cs(r){if(r instanceof Ed||r instanceof UM||r instanceof jL||r instanceof RS||r instanceof IN)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||Dr('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new Ed(r.message);case"InvalidPDFException":return new UM(r.message);case"PasswordException":return new jL(r.message,r.code);case"ResponseException":return new RS(r.message,r.status,r.missing);case"UnknownErrorException":return new IN(r.message,r.details)}return new IN(r.message,r.toString())}var vv,co,sG,aG,oG,fE;class ob{constructor(e,t,n){U(this,co);U(this,vv,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",H(this,co,sG).bind(this),{signal:m(this,vv).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,t,n,i){const s=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const c=Promise.withResolvers();return this.streamControllers[s]={controller:u,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:e,streamId:s,data:t,desiredSize:u.desiredSize},i),c.promise},pull:u=>{const c=Promise.withResolvers();return this.streamControllers[s].pullCall=c,l.postMessage({sourceName:a,targetName:o,stream:Sn.PULL,streamId:s,desiredSize:u.desiredSize}),c.promise},cancel:u=>{Xt(u instanceof Error,"cancel must have a valid reason");const c=Promise.withResolvers();return this.streamControllers[s].cancelCall=c,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:Sn.CANCEL,streamId:s,reason:Cs(u)}),c.promise}},n)}destroy(){var e;(e=m(this,vv))==null||e.abort(),k(this,vv,null)}}vv=new WeakMap,co=new WeakSet,sG=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){H(this,co,oG).call(this,e);return}if(e.callback){const n=e.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===sA.DATA)i.resolve(e.data);else if(e.callback===sA.ERROR)i.reject(Cs(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,i=e.sourceName,s=this.comObj;Promise.try(t,e.data).then(function(a){s.postMessage({sourceName:n,targetName:i,callback:sA.DATA,callbackId:e.callbackId,data:a})},function(a){s.postMessage({sourceName:n,targetName:i,callback:sA.ERROR,callbackId:e.callbackId,reason:Cs(a)})});return}if(e.streamId){H(this,co,aG).call(this,e);return}t(e.data)},aG=function(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,s=this.comObj,a=this,o=this.actionHandler[e.action],l={enqueue(u,c=1,h){if(this.isCancelled)return;const d=this.desiredSize;this.desiredSize-=c,d>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:i,stream:Sn.ENQUEUE,streamId:t,chunk:u},h)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:Sn.CLOSE,streamId:t}),delete a.streamSinks[t])},error(u){Xt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:Sn.ERROR,streamId:t,reason:Cs(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(o,e.data,l).then(function(){s.postMessage({sourceName:n,targetName:i,stream:Sn.START_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:n,targetName:i,stream:Sn.START_COMPLETE,streamId:t,reason:Cs(u)})})},oG=function(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,s=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case Sn.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Cs(e.reason));break;case Sn.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Cs(e.reason));break;case Sn.PULL:if(!o){s.postMessage({sourceName:n,targetName:i,stream:Sn.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||QL).then(function(){s.postMessage({sourceName:n,targetName:i,stream:Sn.PULL_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:n,targetName:i,stream:Sn.PULL_COMPLETE,streamId:t,reason:Cs(u)})});break;case Sn.ENQUEUE:if(Xt(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Sn.CLOSE:if(Xt(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),H(this,co,fE).call(this,a,t);break;case Sn.ERROR:Xt(a,"error should have stream controller"),a.controller.error(Cs(e.reason)),H(this,co,fE).call(this,a,t);break;case Sn.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Cs(e.reason)),H(this,co,fE).call(this,a,t);break;case Sn.CANCEL:if(!o)break;const l=Cs(e.reason);Promise.try(o.onCancel||QL,l).then(function(){s.postMessage({sourceName:n,targetName:i,stream:Sn.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:n,targetName:i,stream:Sn.CANCEL_COMPLETE,streamId:t,reason:Cs(u)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},fE=async function(e,t){var n,i,s;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(i=e.pullCall)==null?void 0:i.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[t]};var xw;class lG{constructor({enableHWA:e=!1}){U(this,xw,!1);k(this,xw,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!m(this,xw)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Dr("Abstract method `_createCanvas` called.")}}xw=new WeakMap;class Che extends lG{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class uG{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Dr("Abstract method `_fetch` called.")}}class JL extends uG{async _fetch(e){const t=await Gx(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Hx(t)}}class cG{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,s){return"none"}destroy(e=!1){}}var Xf,yv,Cu,Nu,Hi,Yf,Qf,Xe,Ui,lb,Kp,mE,Xp,hG,hI,Yp,ub,cb,dI,hb;class Nhe extends cG{constructor({docId:t,ownerDocument:n=globalThis.document}){super();U(this,Xe);U(this,Xf);U(this,yv);U(this,Cu);U(this,Nu);U(this,Hi);U(this,Yf);U(this,Qf,0);k(this,Nu,t),k(this,Hi,n)}addFilter(t){if(!t)return"none";let n=m(this,Xe,Ui).get(t);if(n)return n;const[i,s,a]=H(this,Xe,mE).call(this,t),o=t.length===1?i:`${i}${s}${a}`;if(n=m(this,Xe,Ui).get(o),n)return m(this,Xe,Ui).set(t,n),n;const l=`g_${m(this,Nu)}_transfer_map_${On(this,Qf)._++}`,u=H(this,Xe,Xp).call(this,l);m(this,Xe,Ui).set(t,u),m(this,Xe,Ui).set(o,u);const c=H(this,Xe,Yp).call(this,l);return H(this,Xe,cb).call(this,i,s,a,c),u}addHCMFilter(t,n){var p;const i=`${t}-${n}`,s="base";let a=m(this,Xe,lb).get(s);if((a==null?void 0:a.key)===i||(a?((p=a.filter)==null||p.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},m(this,Xe,lb).set(s,a)),!t||!n))return a.url;const o=H(this,Xe,hb).call(this,t);t=Ze.makeHexColor(...o);const l=H(this,Xe,hb).call(this,n);if(n=Ze.makeHexColor(...l),m(this,Xe,Kp).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return a.url;const u=new Array(256);for(let g=0;g<=255;g++){const b=g/255;u[g]=b<=.03928?b/12.92:((b+.055)/1.055)**2.4}const c=u.join(","),h=`g_${m(this,Nu)}_hcm_filter`,d=a.filter=H(this,Xe,Yp).call(this,h);H(this,Xe,cb).call(this,c,c,c,d),H(this,Xe,hI).call(this,d);const f=(g,b)=>{const v=o[g]/255,x=l[g]/255,y=new Array(b+1);for(let E=0;E<=b;E++)y[E]=v+E/b*(x-v);return y.join(",")};return H(this,Xe,cb).call(this,f(0,5),f(1,5),f(2,5),d),a.url=H(this,Xe,Xp).call(this,h),a.url}addAlphaFilter(t){let n=m(this,Xe,Ui).get(t);if(n)return n;const[i]=H(this,Xe,mE).call(this,[t]),s=`alpha_${i}`;if(n=m(this,Xe,Ui).get(s),n)return m(this,Xe,Ui).set(t,n),n;const a=`g_${m(this,Nu)}_alpha_map_${On(this,Qf)._++}`,o=H(this,Xe,Xp).call(this,a);m(this,Xe,Ui).set(t,o),m(this,Xe,Ui).set(s,o);const l=H(this,Xe,Yp).call(this,a);return H(this,Xe,dI).call(this,i,l),o}addLuminosityFilter(t){let n=m(this,Xe,Ui).get(t||"luminosity");if(n)return n;let i,s;if(t?([i]=H(this,Xe,mE).call(this,[t]),s=`luminosity_${i}`):s="luminosity",n=m(this,Xe,Ui).get(s),n)return m(this,Xe,Ui).set(t,n),n;const a=`g_${m(this,Nu)}_luminosity_map_${On(this,Qf)._++}`,o=H(this,Xe,Xp).call(this,a);m(this,Xe,Ui).set(t,o),m(this,Xe,Ui).set(s,o);const l=H(this,Xe,Yp).call(this,a);return H(this,Xe,hG).call(this,l),t&&H(this,Xe,dI).call(this,i,l),o}addHighlightHCMFilter(t,n,i,s,a){var x;const o=`${n}-${i}-${s}-${a}`;let l=m(this,Xe,lb).get(t);if((l==null?void 0:l.key)===o||(l?((x=l.filter)==null||x.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},m(this,Xe,lb).set(t,l)),!n||!i))return l.url;const[u,c]=[n,i].map(H(this,Xe,hb).bind(this));let h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[f,p]=[s,a].map(H(this,Xe,hb).bind(this));d<h&&([h,d,f,p]=[d,h,p,f]),m(this,Xe,Kp).style.color="";const g=(y,E,w)=>{const A=new Array(256),T=(d-h)/w,S=y/255,N=(E-y)/(255*w);let D=0;for(let _=0;_<=w;_++){const M=Math.round(h+_*T),I=S+_*N;for(let V=D;V<=M;V++)A[V]=I;D=M+1}for(let _=D;_<256;_++)A[_]=A[D-1];return A.join(",")},b=`g_${m(this,Nu)}_hcm_${t}_filter`,v=l.filter=H(this,Xe,Yp).call(this,b);return H(this,Xe,hI).call(this,v),H(this,Xe,cb).call(this,g(f[0],p[0],5),g(f[1],p[1],5),g(f[2],p[2],5),v),l.url=H(this,Xe,Xp).call(this,b),l.url}destroy(t=!1){var n,i,s,a;t&&((n=m(this,Yf))!=null&&n.size)||((i=m(this,Cu))==null||i.parentNode.parentNode.remove(),k(this,Cu,null),(s=m(this,yv))==null||s.clear(),k(this,yv,null),(a=m(this,Yf))==null||a.clear(),k(this,Yf,null),k(this,Qf,0))}}Xf=new WeakMap,yv=new WeakMap,Cu=new WeakMap,Nu=new WeakMap,Hi=new WeakMap,Yf=new WeakMap,Qf=new WeakMap,Xe=new WeakSet,Ui=function(){return m(this,yv)||k(this,yv,new Map)},lb=function(){return m(this,Yf)||k(this,Yf,new Map)},Kp=function(){if(!m(this,Cu)){const t=m(this,Hi).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=m(this,Hi).createElementNS(lu,"svg");i.setAttribute("width",0),i.setAttribute("height",0),k(this,Cu,m(this,Hi).createElementNS(lu,"defs")),t.append(i),i.append(m(this,Cu)),m(this,Hi).body.append(t)}return m(this,Cu)},mE=function(t){if(t.length===1){const u=t[0],c=new Array(256);for(let d=0;d<256;d++)c[d]=u[d]/255;const h=c.join(",");return[h,h,h]}const[n,i,s]=t,a=new Array(256),o=new Array(256),l=new Array(256);for(let u=0;u<256;u++)a[u]=n[u]/255,o[u]=i[u]/255,l[u]=s[u]/255;return[a.join(","),o.join(","),l.join(",")]},Xp=function(t){if(m(this,Xf)===void 0){k(this,Xf,"");const n=m(this,Hi).URL;n!==m(this,Hi).baseURI&&(zC(n)?At('#createUrl: ignore "data:"-URL for performance reasons.'):k(this,Xf,yH(n,"")))}return`url(${m(this,Xf)}#${t})`},hG=function(t){const n=m(this,Hi).createElementNS(lu,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},hI=function(t){const n=m(this,Hi).createElementNS(lu,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},Yp=function(t){const n=m(this,Hi).createElementNS(lu,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),m(this,Xe,Kp).append(n),n},ub=function(t,n,i){const s=m(this,Hi).createElementNS(lu,n);s.setAttribute("type","discrete"),s.setAttribute("tableValues",i),t.append(s)},cb=function(t,n,i,s){const a=m(this,Hi).createElementNS(lu,"feComponentTransfer");s.append(a),H(this,Xe,ub).call(this,a,"feFuncR",t),H(this,Xe,ub).call(this,a,"feFuncG",n),H(this,Xe,ub).call(this,a,"feFuncB",i)},dI=function(t,n){const i=m(this,Hi).createElementNS(lu,"feComponentTransfer");n.append(i),H(this,Xe,ub).call(this,i,"feFuncA",t)},hb=function(t){return m(this,Xe,Kp).style.color=t,Kx(getComputedStyle(m(this,Xe,Kp)).getPropertyValue("color"))};class dG{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Dr("Abstract method `_fetch` called.")}}class ZL extends dG{async _fetch(e){const t=await Gx(e,"arraybuffer");return new Uint8Array(t)}}class fG{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Dr("Abstract method `_fetch` called.")}}class e5 extends fG{async _fetch(e){const t=await Gx(e,"arraybuffer");return new Uint8Array(t)}}ds&&At("Please use the `legacy` build in Node.js environments.");async function fF(r){const t=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(t)}class Dhe extends cG{}class Mhe extends lG{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class Ihe extends uG{async _fetch(e){return fF(e)}}class Phe extends dG{async _fetch(e){return fF(e)}}class Rhe extends fG{async _fetch(e){return fF(e)}}const kp="__forcedDependency",{floor:t5,ceil:r5}=Math;function aA(r,e,t,n,i,s){r[e*4+0]=Math.min(r[e*4+0],t),r[e*4+1]=Math.min(r[e*4+1],n),r[e*4+2]=Math.max(r[e*4+2],i),r[e*4+3]=Math.max(r[e*4+3],s)}const fI=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var bv,bh;class khe{constructor(e,t){U(this,bv);U(this,bh);k(this,bv,e),k(this,bh,t)}get length(){return m(this,bv).length}isEmpty(e){return m(this,bv)[e]===fI}minX(e){return m(this,bh)[e*4+0]/256}minY(e){return m(this,bh)[e*4+1]/256}maxX(e){return(m(this,bh)[e*4+2]+1)/256}maxY(e){return(m(this,bh)[e*4+3]+1)/256}}bv=new WeakMap,bh=new WeakMap;const oA=(r,e)=>{if(!r)return;let t=r.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},r.set(e,t)),t};var Ms,Is,Jf,Do,Zf,Du,ur,br,Mu,Ps,_w,wv,em,tm,Iu,Gi,Al,Aw,mI;class Fhe{constructor(e,t,n=!1){U(this,Aw);U(this,Ms,{__proto__:null});U(this,Is,{__proto__:null,transform:[],moveText:[],sameLineText:[],[kp]:[]});U(this,Jf,new Map);U(this,Do,[]);U(this,Zf,[]);U(this,Du,[[1,0,0,1,0,0]]);U(this,ur,[-1/0,-1/0,1/0,1/0]);U(this,br,new Float64Array([1/0,1/0,-1/0,-1/0]));U(this,Mu,-1);U(this,Ps,new Set);U(this,_w,new Map);U(this,wv,new Map);U(this,em);U(this,tm);U(this,Iu);U(this,Gi);U(this,Al);k(this,em,e.width),k(this,tm,e.height),H(this,Aw,mI).call(this,t),n&&k(this,Al,new Map)}growOperationsCount(e){e>=m(this,Gi).length&&H(this,Aw,mI).call(this,e,m(this,Gi))}save(e){return k(this,Ms,{__proto__:m(this,Ms)}),k(this,Is,{__proto__:m(this,Is),transform:{__proto__:m(this,Is).transform},moveText:{__proto__:m(this,Is).moveText},sameLineText:{__proto__:m(this,Is).sameLineText},[kp]:{__proto__:m(this,Is)[kp]}}),k(this,ur,{__proto__:m(this,ur)}),m(this,Do).push(e),this}restore(e){var i;const t=Object.getPrototypeOf(m(this,Ms));if(t===null)return this;k(this,Ms,t),k(this,Is,Object.getPrototypeOf(m(this,Is))),k(this,ur,Object.getPrototypeOf(m(this,ur)));const n=m(this,Do).pop();return n!==void 0&&((i=oA(m(this,Al),e))==null||i.dependencies.add(n),m(this,Gi)[e]=m(this,Gi)[n]),this}recordOpenMarker(e){return m(this,Do).push(e),this}getOpenMarker(){return m(this,Do).length===0?null:m(this,Do).at(-1)}recordCloseMarker(e){var n;const t=m(this,Do).pop();return t!==void 0&&((n=oA(m(this,Al),e))==null||n.dependencies.add(t),m(this,Gi)[e]=m(this,Gi)[t]),this}beginMarkedContent(e){return m(this,Zf).push(e),this}endMarkedContent(e){var n;const t=m(this,Zf).pop();return t!==void 0&&((n=oA(m(this,Al),e))==null||n.dependencies.add(t),m(this,Gi)[e]=m(this,Gi)[t]),this}pushBaseTransform(e){return m(this,Du).push(Ze.multiplyByDOMMatrix(m(this,Du).at(-1),e.getTransform())),this}popBaseTransform(){return m(this,Du).length>1&&m(this,Du).pop(),this}recordSimpleData(e,t){return m(this,Ms)[e]=t,this}recordIncrementalData(e,t){return m(this,Is)[e].push(t),this}resetIncrementalData(e,t){return m(this,Is)[e].length=0,this}recordNamedData(e,t){return m(this,Jf).set(e,t),this}recordSimpleDataFromNamed(e,t,n){m(this,Ms)[e]=m(this,Jf).get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(kp,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in m(this,Ms)&&this.recordFutureForcedDependency(t,m(this,Ms)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of m(this,Ps))this.recordFutureForcedDependency(kp,e);return this}resetBBox(e){return m(this,Mu)!==e&&(k(this,Mu,e),m(this,br)[0]=1/0,m(this,br)[1]=1/0,m(this,br)[2]=-1/0,m(this,br)[3]=-1/0),this}recordClipBox(e,t,n,i,s,a){const o=Ze.multiplyByDOMMatrix(m(this,Du).at(-1),t.getTransform()),l=[1/0,1/0,-1/0,-1/0];Ze.axialAlignedBoundingBox([n,s,i,a],o,l);const u=Ze.intersect(m(this,ur),l);return u?(m(this,ur)[0]=u[0],m(this,ur)[1]=u[1],m(this,ur)[2]=u[2],m(this,ur)[3]=u[3]):(m(this,ur)[0]=m(this,ur)[1]=1/0,m(this,ur)[2]=m(this,ur)[3]=-1/0),this}recordBBox(e,t,n,i,s,a){const o=m(this,ur);if(o[0]===1/0)return this;const l=Ze.multiplyByDOMMatrix(m(this,Du).at(-1),t.getTransform());if(o[0]===-1/0)return Ze.axialAlignedBoundingBox([n,s,i,a],l,m(this,br)),this;const u=[1/0,1/0,-1/0,-1/0];return Ze.axialAlignedBoundingBox([n,s,i,a],l,u),m(this,br)[0]=Math.min(m(this,br)[0],Math.max(u[0],o[0])),m(this,br)[1]=Math.min(m(this,br)[1],Math.max(u[1],o[1])),m(this,br)[2]=Math.max(m(this,br)[2],Math.min(u[2],o[2])),m(this,br)[3]=Math.max(m(this,br)[3],Math.min(u[3],o[3])),this}recordCharacterBBox(e,t,n,i=1,s=0,a=0,o){const l=n.bbox;let u,c;if(l&&(u=l[2]!==l[0]&&l[3]!==l[1]&&m(this,wv).get(n),u!==!1&&(c=[0,0,0,0],Ze.axialAlignedBoundingBox(l,n.fontMatrix,c),(i!==1||s!==0||a!==0)&&Ze.scaleMinMax([i,0,0,-i,s,a],c),u)))return this.recordBBox(e,t,c[0],c[2],c[1],c[3]);if(!o)return this.recordFullPageBBox(e);const h=o();return l&&c&&u===void 0&&(u=c[0]<=s-h.actualBoundingBoxLeft&&c[2]>=s+h.actualBoundingBoxRight&&c[1]<=a-h.actualBoundingBoxAscent&&c[3]>=a+h.actualBoundingBoxDescent,m(this,wv).set(n,u),u)?this.recordBBox(e,t,c[0],c[2],c[1],c[3]):this.recordBBox(e,t,s-h.actualBoundingBoxLeft,s+h.actualBoundingBoxRight,a-h.actualBoundingBoxAscent,a+h.actualBoundingBoxDescent)}recordFullPageBBox(e){return m(this,br)[0]=Math.max(0,m(this,ur)[0]),m(this,br)[1]=Math.max(0,m(this,ur)[1]),m(this,br)[2]=Math.min(m(this,em),m(this,ur)[2]),m(this,br)[3]=Math.min(m(this,tm),m(this,ur)[3]),this}getSimpleIndex(e){return m(this,Ms)[e]}recordDependencies(e,t){const n=m(this,Ps),i=m(this,Ms),s=m(this,Is);for(const a of t)a in m(this,Ms)?n.add(i[a]):a in s&&s[a].forEach(n.add,n);return this}recordNamedDependency(e,t){return m(this,Jf).has(t)&&m(this,Ps).add(m(this,Jf).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[kp]),m(this,Al)){const n=oA(m(this,Al),e),{dependencies:i}=n;m(this,Ps).forEach(i.add,i),m(this,Do).forEach(i.add,i),m(this,Zf).forEach(i.add,i),i.delete(e),n.isRenderingOperation=!0}if(m(this,Mu)===e){const n=t5(m(this,br)[0]*256/m(this,em)),i=t5(m(this,br)[1]*256/m(this,tm)),s=r5(m(this,br)[2]*256/m(this,em)),a=r5(m(this,br)[3]*256/m(this,tm));aA(m(this,Iu),e,n,i,s,a);for(const o of m(this,Ps))o!==e&&aA(m(this,Iu),o,n,i,s,a);for(const o of m(this,Do))o!==e&&aA(m(this,Iu),o,n,i,s,a);for(const o of m(this,Zf))o!==e&&aA(m(this,Iu),o,n,i,s,a);t||(m(this,Ps).clear(),k(this,Mu,-1))}return this}recordShowTextOperation(e,t=!1){const n=Array.from(m(this,Ps));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return m(this,Mu)===e&&(k(this,Mu,-1),m(this,ur)[0]=Math.max(m(this,ur)[0],m(this,br)[0]),m(this,ur)[1]=Math.max(m(this,ur)[1],m(this,br)[1]),m(this,ur)[2]=Math.min(m(this,ur)[2],m(this,br)[2]),m(this,ur)[3]=Math.min(m(this,ur)[3],m(this,br)[3]),t||m(this,Ps).clear()),this}_takePendingDependencies(){const e=m(this,Ps);return k(this,Ps,new Set),e}_extractOperation(e){const t=m(this,_w).get(e);return m(this,_w).delete(e),t}_pushPendingDependencies(e){for(const t of e)m(this,Ps).add(t)}take(){return m(this,wv).clear(),new khe(m(this,Gi),m(this,Iu))}takeDebugMetadata(){return m(this,Al)}}Ms=new WeakMap,Is=new WeakMap,Jf=new WeakMap,Do=new WeakMap,Zf=new WeakMap,Du=new WeakMap,ur=new WeakMap,br=new WeakMap,Mu=new WeakMap,Ps=new WeakMap,_w=new WeakMap,wv=new WeakMap,em=new WeakMap,tm=new WeakMap,Iu=new WeakMap,Gi=new WeakMap,Al=new WeakMap,Aw=new WeakSet,mI=function(e,t){const n=new ArrayBuffer(e*4);k(this,Iu,new Uint8ClampedArray(n)),k(this,Gi,new Uint32Array(n)),t&&t.length>0?(m(this,Gi).set(t),m(this,Gi).fill(fI,t.length)):m(this,Gi).fill(fI)};var Tr,an,Mo,xv,_v;const _O=class _O{constructor(e,t,n){U(this,Tr);U(this,an);U(this,Mo);U(this,xv,0);U(this,_v,0);if(e instanceof _O&&m(e,Mo)===!!n)return e;k(this,Tr,e),k(this,an,t),k(this,Mo,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(e){return On(this,_v)._++,m(this,Tr).save(m(this,an)),this}restore(e){return m(this,_v)>0&&(m(this,Tr).restore(m(this,an)),On(this,_v)._--),this}recordOpenMarker(e){return On(this,xv)._++,this}getOpenMarker(){return m(this,xv)>0?m(this,an):m(this,Tr).getOpenMarker()}recordCloseMarker(e){return On(this,xv)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return m(this,Tr).pushBaseTransform(e),this}popBaseTransform(){return m(this,Tr).popBaseTransform(),this}recordSimpleData(e,t){return m(this,Tr).recordSimpleData(e,m(this,an)),this}recordIncrementalData(e,t){return m(this,Tr).recordIncrementalData(e,m(this,an)),this}resetIncrementalData(e,t){return m(this,Tr).resetIncrementalData(e,m(this,an)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return m(this,Tr).recordSimpleDataFromNamed(e,t,m(this,an)),this}recordFutureForcedDependency(e,t){return m(this,Tr).recordFutureForcedDependency(e,m(this,an)),this}inheritSimpleDataAsFutureForcedDependencies(e){return m(this,Tr).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return m(this,Tr).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return m(this,Mo)||m(this,Tr).resetBBox(m(this,an)),this}recordClipBox(e,t,n,i,s,a){return m(this,Mo)||m(this,Tr).recordClipBox(m(this,an),t,n,i,s,a),this}recordBBox(e,t,n,i,s,a){return m(this,Mo)||m(this,Tr).recordBBox(m(this,an),t,n,i,s,a),this}recordCharacterBBox(e,t,n,i,s,a,o){return m(this,Mo)||m(this,Tr).recordCharacterBBox(m(this,an),t,n,i,s,a,o),this}recordFullPageBBox(e){return m(this,Mo)||m(this,Tr).recordFullPageBBox(m(this,an)),this}getSimpleIndex(e){return m(this,Tr).getSimpleIndex(e)}recordDependencies(e,t){return m(this,Tr).recordDependencies(m(this,an),t),this}recordNamedDependency(e,t){return m(this,Tr).recordNamedDependency(m(this,an),t),this}recordOperation(e){return m(this,Tr).recordOperation(m(this,an),!0),this}recordShowTextOperation(e){return m(this,Tr).recordShowTextOperation(m(this,an),!0),this}bboxToClipBoxDropOperation(e){return m(this,Mo)||m(this,Tr).bboxToClipBoxDropOperation(m(this,an),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Tr=new WeakMap,an=new WeakMap,Mo=new WeakMap,xv=new WeakMap,_v=new WeakMap;let $S=_O;const Fa={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Ei={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function pI(r,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,n),r.clip(i)}class mF{isModifyingCurrentTransform(){return!1}getPattern(){Dr("Abstract method `getPattern` called.")}}class Ohe extends mF{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,i){let s;if(i===Ei.STROKE||i===Ei.FILL){const a=t.current.getClippedPathBoundingBox(i,Xr(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,u=t.cachedCanvases.getCanvas("pattern",o,l),c=u.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-a[0],-a[1]),n=Ze.transform(n,[1,0,0,1,a[0],a[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),pI(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),s=e.createPattern(u.canvas,"no-repeat");const h=new DOMMatrix(n);s.setTransform(h)}else pI(e,this._bbox),s=this._createGradient(e);return s}}function kN(r,e,t,n,i,s,a,o){const l=e.coords,u=e.colors,c=r.data,h=r.width*4;let d;l[t+1]>l[n+1]&&(d=t,t=n,n=d,d=s,s=a,a=d),l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=a,a=o,o=d),l[t+1]>l[n+1]&&(d=t,t=n,n=d,d=s,s=a,a=d);const f=(l[t]+e.offsetX)*e.scaleX,p=(l[t+1]+e.offsetY)*e.scaleY,g=(l[n]+e.offsetX)*e.scaleX,b=(l[n+1]+e.offsetY)*e.scaleY,v=(l[i]+e.offsetX)*e.scaleX,x=(l[i+1]+e.offsetY)*e.scaleY;if(p>=x)return;const y=u[s],E=u[s+1],w=u[s+2],A=u[a],T=u[a+1],S=u[a+2],N=u[o],D=u[o+1],_=u[o+2],M=Math.round(p),I=Math.round(x);let V,q,P,L,$,z,K,re;for(let Q=M;Q<=I;Q++){if(Q<b){const fe=Q<p?0:(p-Q)/(p-b);V=f-(f-g)*fe,q=y-(y-A)*fe,P=E-(E-T)*fe,L=w-(w-S)*fe}else{let fe;Q>x?fe=1:b===x?fe=0:fe=(b-Q)/(b-x),V=g-(g-v)*fe,q=A-(A-N)*fe,P=T-(T-D)*fe,L=S-(S-_)*fe}let O;Q<p?O=0:Q>x?O=1:O=(p-Q)/(p-x),$=f-(f-v)*O,z=y-(y-N)*O,K=E-(E-D)*O,re=w-(w-_)*O;const te=Math.round(Math.min(V,$)),W=Math.round(Math.max(V,$));let de=h*Q+te*4;for(let fe=te;fe<=W;fe++)O=(V-fe)/(V-$),O<0?O=0:O>1&&(O=1),c[de++]=q-(q-z)*O|0,c[de++]=P-(P-K)*O|0,c[de++]=L-(L-re)*O|0,c[de++]=255}}function Bhe(r,e,t){const n=e.coords,i=e.colors;let s,a;switch(e.type){case VM.LATTICE:const o=e.verticesPerRow,l=Math.floor(n.length/o)-1,u=o-1;for(s=0;s<l;s++){let c=s*o;for(let h=0;h<u;h++,c++)kN(r,t,n[c],n[c+1],n[c+o],i[c],i[c+1],i[c+o]),kN(r,t,n[c+o+1],n[c+1],n[c+o],i[c+o+1],i[c+1],i[c+o])}break;case VM.TRIANGLES:for(s=0,a=n.length;s<a;s+=3)kN(r,t,n[s],n[s+1],n[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class Lhe extends mF{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,c=Math.ceil(this._bounds[3])-l,h=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),d=Math.min(Math.ceil(Math.abs(c*e[1]*1.1)),3e3),f=u/h,p=c/d,g={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/f,scaleY:1/p},b=h+2*2,v=d+2*2,x=n.getCanvas("mesh",b,v),y=x.context,E=y.createImageData(h,d);if(t){const A=E.data;for(let T=0,S=A.length;T<S;T+=4)A[T]=t[0],A[T+1]=t[1],A[T+2]=t[2],A[T+3]=255}for(const A of this._figures)Bhe(E,A,g);return y.putImageData(E,2,2),{canvas:x.canvas,offsetX:o-2*f,offsetY:l-2*p,scaleX:f,scaleY:p}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,i){pI(e,this._bbox);const s=new Float32Array(2);if(i===Ei.SHADING)Ze.singularValueDecompose2dScale(Xr(e),s);else if(this.matrix){Ze.singularValueDecompose2dScale(this.matrix,s);const[o,l]=s;Ze.singularValueDecompose2dScale(t.baseTransform,s),s[0]*=o,s[1]*=l}else Ze.singularValueDecompose2dScale(t.baseTransform,s);const a=this._createMeshCanvas(s,i===Ei.SHADING?null:this._background,t.cachedCanvases);return i!==Ei.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class $he extends mF{getPattern(){return"hotpink"}}function Vhe(r){switch(r[0]){case"RadialAxial":return new Ohe(r);case"Mesh":return new Lhe(r);case"Dummy":return new $he}throw new Error(`Unknown IR type: ${r[0]}`)}const n5={COLORED:1,UNCOLORED:2},OT=class OT{constructor(e,t,n,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e,t){var z,K;const{bbox:n,operatorList:i,paintType:s,tilingType:a,color:o,canvasGraphicsFactory:l}=this;let{xstep:u,ystep:c}=this;u=Math.abs(u),c=Math.abs(c),UC("TilingType: "+a);const h=n[0],d=n[1],f=n[2],p=n[3],g=f-h,b=p-d,v=new Float32Array(2);Ze.singularValueDecompose2dScale(this.matrix,v);const[x,y]=v;Ze.singularValueDecompose2dScale(this.baseTransform,v);const E=x*v[0],w=y*v[1];let A=g,T=b,S=!1,N=!1;const D=Math.ceil(u*E),_=Math.ceil(c*w),M=Math.ceil(g*E),I=Math.ceil(b*w);D>=M?A=u:S=!0,_>=I?T=c:N=!0;const V=this.getSizeAndScale(A,this.ctx.canvas.width,E),q=this.getSizeAndScale(T,this.ctx.canvas.height,w),P=e.cachedCanvases.getCanvas("pattern",V.size,q.size),L=P.context,$=l.createCanvasGraphics(L,t);if($.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext($,s,o),L.translate(-V.scale*h,-q.scale*d),$.transform(0,V.scale,0,0,q.scale,0,0),L.save(),(z=$.dependencyTracker)==null||z.save(),this.clipBbox($,h,d,f,p),$.baseTransform=Xr($.ctx),$.executeOperatorList(i),$.endDrawing(),(K=$.dependencyTracker)==null||K.restore(),L.restore(),S||N){const re=P.canvas;S&&(A=u),N&&(T=c);const Q=this.getSizeAndScale(A,this.ctx.canvas.width,E),O=this.getSizeAndScale(T,this.ctx.canvas.height,w),te=Q.size,W=O.size,de=e.cachedCanvases.getCanvas("pattern-workaround",te,W),fe=de.context,ne=S?Math.floor(g/u):0,X=N?Math.floor(b/c):0;for(let se=0;se<=ne;se++)for(let me=0;me<=X;me++)fe.drawImage(re,te*se,W*me,te,W,0,0,te,W);return{canvas:de.canvas,scaleX:Q.scale,scaleY:O.scale,offsetX:h,offsetY:d}}return{canvas:P.canvas,scaleX:V.scale,scaleY:q.scale,offsetX:h,offsetY:d}}getSizeAndScale(e,t,n){const i=Math.max(OT.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*n);return s>=i?s=i:n=s/e,{scale:n,size:s}}clipBbox(e,t,n,i,s){const a=i-t,o=s-n;e.ctx.rect(t,n,a,o),Ze.axialAlignedBoundingBox([t,n,i,s],Xr(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,s=e.current;switch(t){case n5.COLORED:const{fillStyle:a,strokeStyle:o}=this.ctx;i.fillStyle=s.fillColor=a,i.strokeStyle=s.strokeColor=o;break;case n5.UNCOLORED:i.fillStyle=i.strokeStyle=n,s.fillColor=s.strokeColor=n;break;default:throw new Zce(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,i,s){let a=n;i!==Ei.SHADING&&(a=Ze.transform(a,t.baseTransform),this.matrix&&(a=Ze.transform(a,this.matrix)));const o=this.createPatternCanvas(t,s);let l=new DOMMatrix(a);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const u=e.createPattern(o.canvas,"repeat");return u.setTransform(l),u}};Pe(OT,"MAX_PATTERN_SIZE",3e3);let gI=OT;function Uhe({src:r,srcPos:e=0,dest:t,width:n,height:i,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const o=Ii.isLittleEndian?4278190080:255,[l,u]=a?[s,o]:[o,s],c=n>>3,h=n&7,d=r.length;t=new Uint32Array(t.buffer);let f=0;for(let p=0;p<i;p++){for(const b=e+c;e<b;e++){const v=e<d?r[e]:255;t[f++]=v&128?u:l,t[f++]=v&64?u:l,t[f++]=v&32?u:l,t[f++]=v&16?u:l,t[f++]=v&8?u:l,t[f++]=v&4?u:l,t[f++]=v&2?u:l,t[f++]=v&1?u:l}if(h===0)continue;const g=e<d?r[e++]:255;for(let b=0;b<h;b++)t[f++]=g&1<<7-b?u:l}return{srcPos:e,destPos:f}}const i5=16,s5=100,zhe=15,a5=10,Os=16,FN=new DOMMatrix,ya=new Float32Array(2),yg=new Float32Array([1/0,1/0,-1/0,-1/0]);function jhe(r,e){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){e.save(),this.__originalSave()},r.restore=function(){e.restore(),this.__originalRestore()},r.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},r.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},r.transform=function(t,n,i,s,a,o){e.transform(t,n,i,s,a,o),this.__originalTransform(t,n,i,s,a,o)},r.setTransform=function(t,n,i,s,a,o){e.setTransform(t,n,i,s,a,o),this.__originalSetTransform(t,n,i,s,a,o)},r.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},r.rotate=function(t){e.rotate(t),this.__originalRotate(t)},r.clip=function(t){e.clip(t),this.__originalClip(t)},r.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},r.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},r.bezierCurveTo=function(t,n,i,s,a,o){e.bezierCurveTo(t,n,i,s,a,o),this.__originalBezierCurveTo(t,n,i,s,a,o)},r.rect=function(t,n,i,s){e.rect(t,n,i,s),this.__originalRect(t,n,i,s)},r.closePath=function(){e.closePath(),this.__originalClosePath()},r.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class qhe{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function lA(r,e,t,n,i,s,a,o,l,u){const[c,h,d,f,p,g]=Xr(r);if(h===0&&d===0){const x=a*c+p,y=Math.round(x),E=o*f+g,w=Math.round(E),A=(a+l)*c+p,T=Math.abs(Math.round(A)-y)||1,S=(o+u)*f+g,N=Math.abs(Math.round(S)-w)||1;return r.setTransform(Math.sign(c),0,0,Math.sign(f),y,w),r.drawImage(e,t,n,i,s,0,0,T,N),r.setTransform(c,h,d,f,p,g),[T,N]}if(c===0&&f===0){const x=o*d+p,y=Math.round(x),E=a*h+g,w=Math.round(E),A=(o+u)*d+p,T=Math.abs(Math.round(A)-y)||1,S=(a+l)*h+g,N=Math.abs(Math.round(S)-w)||1;return r.setTransform(0,Math.sign(h),Math.sign(d),0,y,w),r.drawImage(e,t,n,i,s,0,0,N,T),r.setTransform(c,h,d,f,p,g),[N,T]}r.drawImage(e,t,n,i,s,a,o,l,u);const b=Math.hypot(c,h),v=Math.hypot(d,f);return[b*l,v*u]}class o5{constructor(e,t,n){Pe(this,"alphaIsShape",!1);Pe(this,"fontSize",0);Pe(this,"fontSizeScale",1);Pe(this,"textMatrix",null);Pe(this,"textMatrixScale",1);Pe(this,"fontMatrix",$M);Pe(this,"leading",0);Pe(this,"x",0);Pe(this,"y",0);Pe(this,"lineX",0);Pe(this,"lineY",0);Pe(this,"charSpacing",0);Pe(this,"wordSpacing",0);Pe(this,"textHScale",1);Pe(this,"textRenderingMode",pi.FILL);Pe(this,"textRise",0);Pe(this,"fillColor","#000000");Pe(this,"strokeColor","#000000");Pe(this,"patternFill",!1);Pe(this,"patternStroke",!1);Pe(this,"fillAlpha",1);Pe(this,"strokeAlpha",1);Pe(this,"lineWidth",1);Pe(this,"activeSMask",null);Pe(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=yg.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Ei.FILL,t=null){const n=this.minMax.slice();if(e===Ei.STROKE){t||Dr("Stroke bounding box must include transform."),Ze.singularValueDecompose2dScale(t,ya);const i=ya[0]*this.lineWidth/2,s=ya[1]*this.lineWidth/2;n[0]-=i,n[1]-=s,n[2]+=i,n[3]+=s}return n}updateClipFromPath(){const e=Ze.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(yg,0)}getClippedPathBoundingBox(e=Ei.FILL,t=null){return Ze.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function l5(r,e){if(e instanceof ImageData){r.putImageData(e,0,0);return}const t=e.height,n=e.width,i=t%Os,s=(t-i)/Os,a=i===0?s:s+1,o=r.createImageData(n,Os);let l=0,u;const c=e.data,h=o.data;let d,f,p,g;if(e.kind===iE.GRAYSCALE_1BPP){const b=c.byteLength,v=new Uint32Array(h.buffer,0,h.byteLength>>2),x=v.length,y=n+7>>3,E=4294967295,w=Ii.isLittleEndian?4278190080:255;for(d=0;d<a;d++){for(p=d<s?Os:i,u=0,f=0;f<p;f++){const A=b-l;let T=0;const S=A>y?n:A*8-7,N=S&-8;let D=0,_=0;for(;T<N;T+=8)_=c[l++],v[u++]=_&128?E:w,v[u++]=_&64?E:w,v[u++]=_&32?E:w,v[u++]=_&16?E:w,v[u++]=_&8?E:w,v[u++]=_&4?E:w,v[u++]=_&2?E:w,v[u++]=_&1?E:w;for(;T<S;T++)D===0&&(_=c[l++],D=128),v[u++]=_&D?E:w,D>>=1}for(;u<x;)v[u++]=0;r.putImageData(o,0,d*Os)}}else if(e.kind===iE.RGBA_32BPP){for(f=0,g=n*Os*4,d=0;d<s;d++)h.set(c.subarray(l,l+g)),l+=g,r.putImageData(o,0,f),f+=Os;d<a&&(g=n*i*4,h.set(c.subarray(l,l+g)),r.putImageData(o,0,f))}else if(e.kind===iE.RGB_24BPP)for(p=Os,g=n*p,d=0;d<a;d++){for(d>=s&&(p=i,g=n*p),u=0,f=g;f--;)h[u++]=c[l++],h[u++]=c[l++],h[u++]=c[l++],h[u++]=255;r.putImageData(o,0,d*Os)}else throw new Error(`bad image kind: ${e.kind}`)}function u5(r,e){if(e.bitmap){r.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,i=t%Os,s=(t-i)/Os,a=i===0?s:s+1,o=r.createImageData(n,Os);let l=0;const u=e.data,c=o.data;for(let h=0;h<a;h++){const d=h<s?Os:i;({srcPos:l}=Uhe({src:u,srcPos:l,dest:c,width:n,height:d,nonBlackColor:0})),r.putImageData(o,0,h*Os)}}function Fy(r,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)r[n]!==void 0&&(e[n]=r[n]);r.setLineDash!==void 0&&(e.setLineDash(r.getLineDash()),e.lineDashOffset=r.lineDashOffset)}function uA(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:e}=r;e!=="none"&&e!==""&&(r.filter="none")}function c5(r,e){if(e)return!0;Ze.singularValueDecompose2dScale(r,ya);const t=Math.fround(Xl.pixelRatio*Sd.PDF_TO_CSS_UNITS);return ya[0]<=t&&ya[1]<=t}const Hhe=["butt","round","square"],Ghe=["miter","round","bevel"],Whe={},h5={};var Yo,vI,yI,bI;const AO=class AO{constructor(e,t,n,i,s,{optionalContentConfig:a,markedContentStack:o=null},l,u,c){U(this,Yo);this.ctx=e,this.current=new o5(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new qhe(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=c??null}getObject(e,t,n=null){var i;return typeof t=="string"?((i=this.dependencyTracker)==null||i.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:i=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,n){const l=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Xr(this.compositeCtx))}this.ctx.save(),uA(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Xr(this.ctx)}executeOperatorList(e,t,n,i,s){var v;const a=e.argsArray,o=e.fnArray;let l=t||0;const u=a.length;if(u===l)return l;const c=u-l>a5&&typeof n=="function",h=c?Date.now()+zhe:0;let d=0;const f=this.commonObjs,p=this.objs;let g,b;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,n),l;if(!s||s(l))if(g=o[l],b=a[l]??null,g!==T1.dependency)b===null?this[g](l):this[g](l,...b);else for(const x of b){(v=this.dependencyTracker)==null||v.recordNamedData(x,l);const y=x.startsWith("g_")?f:p;if(!y.has(x))return y.get(x,n),l}if(l++,l===u)return l;if(c&&++d>a5){if(Date.now()>h)return n(),l;d=0}}}endDrawing(){H(this,Yo,vI).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),H(this,Yo,yI).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,i=e.height??e.displayHeight;let s=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=n,l=i,u="prescale1",c,h;for(;s>2&&o>1||a>2&&l>1;){let d=o,f=l;s>2&&o>1&&(d=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),s/=o/d),a>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/f),c=this.cachedCanvases.getCanvas(u,d,f),h=c.context,h.clearRect(0,0,d,f),h.drawImage(e,0,0,o,l,0,0,d,f),e=c.canvas,o=d,l=f,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e,t){var D,_;const n=this.ctx,{width:i,height:s}=t,a=this.current.fillColor,o=this.current.patternFill,l=Xr(n);let u,c,h,d;if((t.bitmap||t.data)&&t.count>1){const M=t.bitmap||t.data.buffer;c=JSON.stringify(o?l:[l.slice(0,4),a]),u=this._cachedBitmapsMap.get(M),u||(u=new Map,this._cachedBitmapsMap.set(M,u));const I=u.get(c);if(I&&!o){const V=Math.round(Math.min(l[0],l[2])+l[4]),q=Math.round(Math.min(l[1],l[3])+l[5]);return(D=this.dependencyTracker)==null||D.recordDependencies(e,Fa.transformAndFill),{canvas:I,offsetX:V,offsetY:q}}h=I}h||(d=this.cachedCanvases.getCanvas("maskCanvas",i,s),u5(d.context,t));let f=Ze.transform(l,[1/i,0,0,-1/s,0,0]);f=Ze.transform(f,[1,0,0,1,0,-s]);const p=yg.slice();Ze.axialAlignedBoundingBox([0,0,i,s],f,p);const[g,b,v,x]=p,y=Math.round(v-g)||1,E=Math.round(x-b)||1,w=this.cachedCanvases.getCanvas("fillCanvas",y,E),A=w.context,T=g,S=b;A.translate(-T,-S),A.transform(...f),h||(h=this._scaleImage(d.canvas,ol(A)),h=h.img,u&&o&&u.set(c,h)),A.imageSmoothingEnabled=c5(Xr(A),t.interpolate),lA(A,h,0,0,h.width,h.height,0,0,i,s),A.globalCompositeOperation="source-in";const N=Ze.transform(ol(A),[1,0,0,1,-T,-S]);return A.fillStyle=o?a.getPattern(n,this,N,Ei.FILL,e):a,A.fillRect(0,0,i,s),u&&!o&&(this.cachedCanvases.delete("fillCanvas"),u.set(c,w.canvas)),(_=this.dependencyTracker)==null||_.recordDependencies(e,Fa.transformAndFill),{canvas:w.canvas,offsetX:Math.round(T),offsetY:Math.round(S)}}setLineWidth(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",e),this.ctx.lineCap=Hhe[t]}setLineJoin(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=Ghe[t]}setMiterLimit(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var n,i,s,a,o;for(const[l,u]of t)switch(l){case"LW":this.setLineWidth(e,u);break;case"LC":this.setLineCap(e,u);break;case"LJ":this.setLineJoin(e,u);break;case"ML":this.setMiterLimit(e,u);break;case"D":this.setDash(e,u[0],u[1]);break;case"RI":this.setRenderingIntent(e,u);break;case"FL":this.setFlatness(e,u);break;case"Font":this.setFont(e,u[0],u[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=u;break;case"ca":(i=this.dependencyTracker)==null||i.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(s=this.dependencyTracker)==null||s.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=u;break;case"SMask":(a=this.dependencyTracker)==null||a.recordSimpleData("SMask",e),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(o=this.dependencyTracker)==null||o.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,t,n);this.suspendedCtx=this.ctx;const a=this.ctx=s.context;a.setTransform(this.suspendedCtx.getTransform()),Fy(this.suspendedCtx,a),jhe(a,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Fy(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const s=i[0],a=i[1],o=i[2]-s,l=i[3]-a;o===0||l===0||(this.genericComposeSMask(t.context,n,o,l,t.subtype,t.backdrop,t.transferMap,s,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,s,a,o,l,u,c,h){let d=e.canvas,f=l-c,p=u-h;if(a)if(f<0||p<0||f+n>d.width||p+i>d.height){const b=this.cachedCanvases.getCanvas("maskExtension",n,i),v=b.context;v.drawImage(d,-f,-p),v.globalCompositeOperation="destination-atop",v.fillStyle=a,v.fillRect(0,0,n,i),v.globalCompositeOperation="source-over",d=b.canvas,f=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const b=new Path2D;b.rect(f,p,n,i),e.clip(b),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(f,p,n,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const g=new Path2D;g.rect(l,u,n,i),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(d,f,p,n,i,l,u,n,i),t.restore()}save(e){var n;this.inSMaskMode&&Fy(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(n=this.dependencyTracker)==null||n.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Fy(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,i,s,a,o){var l;(l=this.dependencyTracker)==null||l.recordIncrementalData("transform",e),this.ctx.transform(t,n,i,s,a,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,i){let[s]=n;if(!i){s||(s=n[0]=new Path2D),this[t](e,s);return}if(this.dependencyTracker!==null){const a=t===T1.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-a,i[2]+a,i[1]-a,i[3]+a).recordDependencies(e,["transform"])}s instanceof Path2D||(s=n[0]=EH(s)),Ze.axialAlignedBoundingBox(i,Xr(this.ctx),this.current.minMax),this[t](e,s),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){var a;const i=this.ctx,s=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const o=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=s.getPattern(i,this,ol(i),Ei.STROKE,e),o){const l=new Path2D;l.addPath(t,i.getTransform().invertSelf().multiplySelf(o)),t=l}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);(a=this.dependencyTracker)==null||a.recordDependencies(e,Fa.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Ei.STROKE,Xr(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){var u,c,h;const i=this.ctx,s=this.current.fillColor,a=this.current.patternFill;let o=!1;if(a){const d=s.isModifyingCurrentTransform()?i.getTransform():null;if((u=this.dependencyTracker)==null||u.save(e),i.save(),i.fillStyle=s.getPattern(i,this,ol(i),Ei.FILL,e),d){const f=new Path2D;f.addPath(t,i.getTransform().invertSelf().multiplySelf(d)),t=f}o=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),(c=this.dependencyTracker)==null||c.recordDependencies(e,Fa.fill),o&&(i.restore(),(h=this.dependencyTracker)==null||h.restore(e)),n&&this.consumePath(e,t,l)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var n;this.ctx.fill(t),(n=this.dependencyTracker)==null||n.recordDependencies(e,Fa.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=Whe}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=h5}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){const i=new Path2D,s=n.getTransform().invertSelf();for(const{transform:a,x:o,y:l,fontSize:u,path:c}of t)c&&i.addPath(c,new DOMMatrix(a).preMultiplySelf(s).translate(o,l).scale(u,-u));n.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){var h,d;(h=this.dependencyTracker)==null||h.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const i=this.commonObjs.get(t),s=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=i.fontMatrix||$M,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&At("Invalid font matrix for font "+t),n<0?(n=-n,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;const a=i.loadedName||"sans-serif",o=((d=i.systemFontInfo)==null?void 0:d.css)||`"${a}", ${i.fallbackName}`;let l="normal";i.black?l="900":i.bold&&(l="bold");const u=i.italic?"italic":"normal";let c=n;n<i5?c=i5:n>s5&&(c=s5),this.current.fontSizeScale=n/c,this.ctx.font=`${u} ${l} ${c}px ${o}`}setTextRenderingMode(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,n,i,s,a){var v,x,y,E;const o=this.ctx,l=this.current,u=l.font,c=l.textRenderingMode,h=l.fontSize/l.fontSizeScale,d=c&pi.FILL_STROKE_MASK,f=!!(c&pi.ADD_TO_PATH_FLAG),p=l.patternFill&&!u.missingFile,g=l.patternStroke&&!u.missingFile;let b;if((u.disableFontFace||f||p||g)&&!u.missingFile&&(b=u.getPathGenerator(this.commonObjs,t)),b&&(u.disableFontFace||p||g)){o.save(),o.translate(n,i),o.scale(h,-h),(v=this.dependencyTracker)==null||v.recordCharacterBBox(e,o,u);let w;if(d===pi.FILL||d===pi.FILL_STROKE)if(s){w=o.getTransform(),o.setTransform(...s);const A=H(this,Yo,bI).call(this,b,w,s);o.fill(A)}else o.fill(b);if(d===pi.STROKE||d===pi.FILL_STROKE)if(a){w||(w=o.getTransform()),o.setTransform(...a);const{a:A,b:T,c:S,d:N}=w,D=Ze.inverseTransform(a),_=Ze.transform([A,T,S,N,0,0],D);Ze.singularValueDecompose2dScale(_,ya),o.lineWidth*=Math.max(ya[0],ya[1])/h,o.stroke(H(this,Yo,bI).call(this,b,w,a))}else o.lineWidth/=h,o.stroke(b);o.restore()}else(d===pi.FILL||d===pi.FILL_STROKE)&&(o.fillText(t,n,i),(x=this.dependencyTracker)==null||x.recordCharacterBBox(e,o,u,h,n,i,()=>o.measureText(t))),(d===pi.STROKE||d===pi.FILL_STROKE)&&(this.dependencyTracker&&((y=this.dependencyTracker)==null||y.recordCharacterBBox(e,o,u,h,n,i,()=>o.measureText(t)).recordDependencies(e,Fa.stroke)),o.strokeText(t,n,i));f&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Xr(o),x:n,y:i,fontSize:h,path:b}),(E=this.dependencyTracker)==null||E.recordCharacterBBox(e,o,u,h,n,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return Et(this,"isFontSubpixelAAEnabled",n)}showText(e,t){var S,N,D,_;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Fa.showText).resetBBox(e),this.current.textRenderingMode&pi.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,i=n.font;if(i.isType3Font){this.showType3Text(e,t),(S=this.dependencyTracker)==null||S.recordShowTextOperation(e);return}const s=n.fontSize;if(s===0){(N=this.dependencyTracker)==null||N.recordOperation(e);return}const a=this.ctx,o=n.fontSizeScale,l=n.charSpacing,u=n.wordSpacing,c=n.fontDirection,h=n.textHScale*c,d=t.length,f=i.vertical,p=f?1:-1,g=i.defaultVMetrics,b=s*n.fontMatrix[0],v=n.textRenderingMode===pi.FILL&&!i.disableFontFace&&!n.patternFill;a.save(),n.textMatrix&&a.transform(...n.textMatrix),a.translate(n.x,n.y+n.textRise),c>0?a.scale(h,-1):a.scale(h,1);let x,y;if(n.patternFill){a.save();const M=n.fillColor.getPattern(a,this,ol(a),Ei.FILL,e);x=Xr(a),a.restore(),a.fillStyle=M}if(n.patternStroke){a.save();const M=n.strokeColor.getPattern(a,this,ol(a),Ei.STROKE,e);y=Xr(a),a.restore(),a.strokeStyle=M}let E=n.lineWidth;const w=n.textMatrixScale;if(w===0||E===0){const M=n.textRenderingMode&pi.FILL_STROKE_MASK;(M===pi.STROKE||M===pi.FILL_STROKE)&&(E=this.getSinglePixelWidth())}else E/=w;if(o!==1&&(a.scale(o,o),E/=o),a.lineWidth=E,i.isInvalidPDFjsFont){const M=[];let I=0;for(const q of t)M.push(q.unicode),I+=q.width;const V=M.join("");if(a.fillText(V,0,0),this.dependencyTracker!==null){const q=a.measureText(V);this.dependencyTracker.recordBBox(e,this.ctx,-q.actualBoundingBoxLeft,q.actualBoundingBoxRight,-q.actualBoundingBoxAscent,q.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=I*b*h,a.restore(),this.compose();return}let A=0,T;for(T=0;T<d;++T){const M=t[T];if(typeof M=="number"){A+=p*M*s/1e3;continue}let I=!1;const V=(M.isSpace?u:0)+l,q=M.fontChar,P=M.accent;let L,$,z=M.width;if(f){const Q=M.vmetric||g,O=-(M.vmetric?Q[1]:z*.5)*b,te=Q[2]*b;z=Q?-Q[0]:z,L=O/o,$=(A+te)/o}else L=A/o,$=0;let K;if(i.remeasure&&z>0){K=a.measureText(q);const Q=K.width*1e3/s*o;if(z<Q&&this.isFontSubpixelAAEnabled){const O=z/Q;I=!0,a.save(),a.scale(O,1),L/=O}else z!==Q&&(L+=(z-Q)/2e3*s/o)}if(this.contentVisible&&(M.isInFont||i.missingFile)){if(v&&!P)a.fillText(q,L,$),(D=this.dependencyTracker)==null||D.recordCharacterBBox(e,a,K?{bbox:null}:i,s/o,L,$,()=>K??a.measureText(q));else if(this.paintChar(e,q,L,$,x,y),P){const Q=L+s*P.offset.x/o,O=$-s*P.offset.y/o;this.paintChar(e,P.fontChar,Q,O,x,y)}}const re=f?z*b-V*c:z*b+V*c;A+=re,I&&a.restore()}f?n.y-=A:n.x+=A*h,a.restore(),this.compose(),(_=this.dependencyTracker)==null||_.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,i=this.current,s=i.font,a=i.fontSize,o=i.fontDirection,l=s.vertical?1:-1,u=i.charSpacing,c=i.wordSpacing,h=i.textHScale*o,d=i.fontMatrix||$M,f=t.length,p=i.textRenderingMode===pi.INVISIBLE;let g,b,v,x;if(p||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(h,o);const y=this.dependencyTracker;for(this.dependencyTracker=y?new $S(y,e):null,g=0;g<f;++g){if(b=t[g],typeof b=="number"){x=l*b*a/1e3,this.ctx.translate(x,0),i.x+=x*h;continue}const E=(b.isSpace?c:0)+u,w=s.charProcOperatorList[b.operatorListId];w?this.contentVisible&&(this.save(),n.scale(a,a),n.transform(...d),this.executeOperatorList(w),this.restore()):At(`Type3 character "${b.operatorListId}" is not available.`);const A=[b.width,0];Ze.applyTransform(A,d),v=A[0]*a+E,n.translate(v,0),i.x+=v*h}n.restore(),y&&(this.dependencyTracker=y)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,i,s,a,o){var u;const l=new Path2D;l.rect(i,s,a-i,o-s),this.ctx.clip(l),(u=this.dependencyTracker)==null||u.recordBBox(e,this.ctx,i,a,s,o).recordClipBox(e,this.ctx,i,a,s,o),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const i=this.baseTransform||Xr(this.ctx),s={createCanvasGraphics:(a,o)=>new AO(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new $S(this.dependencyTracker,o,!0):null)};n=new gI(t,this.ctx,s,i)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=Vhe(this.getObject(e,t)),this.cachedPatterns.set(t,i)),n&&(i.matrix=n),i}shadingFill(e,t){var a;if(!this.contentVisible)return;const n=this.ctx;this.save(e);const i=this._getPattern(e,t);n.fillStyle=i.getPattern(n,this,ol(n),Ei.SHADING,e);const s=ol(n);if(s){const{width:o,height:l}=n.canvas,u=yg.slice();Ze.axialAlignedBoundingBox([0,0,o,l],s,u);const[c,h,d,f]=u;this.ctx.fillRect(c,h,d-c,f-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(a=this.dependencyTracker)==null||a.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Fa.transform).recordDependencies(e,Fa.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Dr("Should not call beginInlineImage")}beginImageData(){Dr("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){var i;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Xr(this.ctx),n)){Ze.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[s,a,o,l]=n,u=new Path2D;u.rect(s,a,o-s,l-a),this.ctx.clip(u),(i=this.dependencyTracker)==null||i.recordClipBox(e,this.ctx,s,o,a,l),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var y;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||UC("TODO: Support non-isolated groups."),t.knockout&&At("Knockout groups not supported.");const i=Xr(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=yg.slice();Ze.axialAlignedBoundingBox(t.bbox,Xr(n),s);const a=[0,0,n.canvas.width,n.canvas.height];s=Ze.intersect(s,a)||[0,0,0,0];const o=Math.floor(s[0]),l=Math.floor(s[1]),u=Math.max(Math.ceil(s[2])-o,1),c=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,u,c]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,u,c),f=d.context;f.translate(-o,-l),f.transform(...i);let p=new Path2D;const[g,b,v,x]=t.bbox;if(p.rect(g,b,v-g,x-b),t.matrix){const E=new Path2D;E.addPath(p,new DOMMatrix(t.matrix)),p=E}f.clip(p),t.smask&&this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(o,l),n.save()),Fy(n,f),this.ctx=f,(y=this.dependencyTracker)==null||y.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){var s;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,(s=this.dependencyTracker)==null||s.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=Xr(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...a);const o=yg.slice();Ze.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],a,o),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,n,i,s,a){if(H(this,Yo,vI).call(this),uA(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const o=n[2]-n[0],l=n[3]-n[1];if(a&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=o,n[3]=l,Ze.singularValueDecompose2dScale(Xr(this.ctx),ya);const{viewportScale:u}=this,c=Math.ceil(o*this.outputScaleX*u),h=Math.ceil(l*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(c,h);const{canvas:d,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(t,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(ya[0],0,0,-ya[1],0,l*ya[1]),uA(this.ctx)}else{uA(this.ctx),this.endPath(e);const u=new Path2D;u.rect(n[0],n[1],o,l),this.ctx.clip(u)}}this.current=new o5(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...s)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),H(this,Yo,yI).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var o;if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const i=this.ctx,s=this._createMaskCanvas(e,t),a=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,s.offsetX,s.offsetY),(o=this.dependencyTracker)==null||o.resetBBox(e).recordBBox(e,this.ctx,s.offsetX,s.offsetX+a.width,s.offsetY,s.offsetY+a.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,i=0,s=0,a,o){var h,d,f;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const l=this.ctx;l.save();const u=Xr(l);l.transform(n,i,s,a,0,0);const c=this._createMaskCanvas(e,t);l.setTransform(1,0,0,1,c.offsetX-u[4],c.offsetY-u[5]),(h=this.dependencyTracker)==null||h.resetBBox(e);for(let p=0,g=o.length;p<g;p+=2){const b=Ze.transform(u,[n,i,s,a,o[p],o[p+1]]);l.drawImage(c.canvas,b[4],b[5]),(d=this.dependencyTracker)==null||d.recordBBox(e,this.ctx,b[4],b[4]+c.canvas.width,b[5],b[5]+c.canvas.height)}l.restore(),this.compose(),(f=this.dependencyTracker)==null||f.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var a,o,l;if(!this.contentVisible)return;const n=this.ctx,i=this.current.fillColor,s=this.current.patternFill;(a=this.dependencyTracker)==null||a.resetBBox(e).recordDependencies(e,Fa.transformAndFill);for(const u of t){const{data:c,width:h,height:d,transform:f}=u,p=this.cachedCanvases.getCanvas("maskCanvas",h,d),g=p.context;g.save();const b=this.getObject(e,c,u);u5(g,b),g.globalCompositeOperation="source-in",g.fillStyle=s?i.getPattern(g,this,ol(n),Ei.FILL,e):i,g.fillRect(0,0,h,d),g.restore(),n.save(),n.transform(...f),n.scale(1,-1),lA(n,p.canvas,0,0,h,d,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,n,0,h,0,d),n.restore()}this.compose(),(l=this.dependencyTracker)==null||l.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){At("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,i,s){if(!this.contentVisible)return;const a=this.getObject(e,t);if(!a){At("Dependent image isn't ready yet");return}const o=a.width,l=a.height,u=[];for(let c=0,h=s.length;c<h;c+=2)u.push({transform:[n,0,0,i,s[c],s[c+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(e,a,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:i}=e,s=this.cachedCanvases.getCanvas("inlineImage",n,i),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",s.canvas}paintInlineImageXObject(e,t){var u;if(!this.contentVisible)return;const n=t.width,i=t.height,s=this.ctx;this.save(e);const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none"),s.scale(1/n,-1/i);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",n,i).context;l5(h,t),o=this.applyTransferMapsToCanvas(h)}const l=this._scaleImage(o,ol(s));s.imageSmoothingEnabled=c5(Xr(s),t.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,s,0,n,-i,0).recordDependencies(e,Fa.imageXObject).recordOperation(e),lA(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-i,n,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){var a,o,l;if(!this.contentVisible)return;const i=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const u=t.width,c=t.height,d=this.cachedCanvases.getCanvas("inlineImage",u,c).context;l5(d,t),s=this.applyTransferMapsToCanvas(d)}(a=this.dependencyTracker)==null||a.resetBBox(e);for(const u of n)i.save(),i.transform(...u.transform),i.scale(1,-1),lA(i,s,u.x,u.y,u.w,u.h,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,i,0,1,-1,0),i.restore();(l=this.dependencyTracker)==null||l.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Fa.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){var a,o;const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const s=this.ctx;this.pendingClip?(i||(this.pendingClip===h5?s.clip(t,"evenodd"):s.clip(t)),this.pendingClip=null,(a=this.dependencyTracker)==null||a.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(o=this.dependencyTracker)==null||o.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Xr(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:s}=this.ctx.getTransform();let a,o;if(n===0&&i===0){const l=Math.abs(t),u=Math.abs(s);if(l===u)if(e===0)a=o=1/l;else{const c=l*e;a=o=c<1?1/c:1}else if(e===0)a=1/l,o=1/u;else{const c=l*e,h=u*e;a=c<1?1/c:1,o=h<1?1/h:1}}else{const l=Math.abs(t*s-n*i),u=Math.hypot(t,n),c=Math.hypot(i,s);if(e===0)a=c/l,o=u/l;else{const h=e*l;a=c>h?c/h:1,o=u>h?u/h:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:i}}=this,[s,a]=this.getScaleForStroking();if(s===a){n.lineWidth=(i||1)*s,n.stroke(e);return}const o=n.getLineDash();t&&n.save(),n.scale(s,a),FN.a=1/s,FN.d=1/a;const l=new Path2D;if(l.addPath(e,FN),o.length>0){const u=Math.max(s,a);n.setLineDash(o.map(c=>c/u)),n.lineDashOffset/=u}n.lineWidth=i||1,n.stroke(l),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Yo=new WeakSet,vI=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},yI=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},bI=function(e,t,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i};let Fg=AO;for(const r in T1)Fg.prototype[r]!==void 0&&(Fg.prototype[T1[r]]=Fg.prototype[r]);var Ew,Sw;class Fl{static get workerPort(){return m(this,Ew)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");k(this,Ew,e)}static get workerSrc(){return m(this,Sw)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");k(this,Sw,e)}}Ew=new WeakMap,Sw=new WeakMap,U(Fl,Ew,null),U(Fl,Sw,"");var Av,Tw;class Khe{constructor({parsedData:e,rawData:t}){U(this,Av);U(this,Tw);k(this,Av,e),k(this,Tw,t)}getRaw(){return m(this,Tw)}get(e){return m(this,Av).get(e)??null}[Symbol.iterator](){return m(this,Av).entries()}}Av=new WeakMap,Tw=new WeakMap;const Qp=Symbol("INTERNAL");var Cw,Nw,Dw,Ev;class Xhe{constructor(e,{name:t,intent:n,usage:i,rbGroups:s}){U(this,Cw,!1);U(this,Nw,!1);U(this,Dw,!1);U(this,Ev,!0);k(this,Cw,!!(e&ga.DISPLAY)),k(this,Nw,!!(e&ga.PRINT)),this.name=t,this.intent=n,this.usage=i,this.rbGroups=s}get visible(){if(m(this,Dw))return m(this,Ev);if(!m(this,Ev))return!1;const{print:e,view:t}=this.usage;return m(this,Cw)?(t==null?void 0:t.viewState)!=="OFF":m(this,Nw)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==Qp&&Dr("Internal method `_setVisible` called."),k(this,Dw,n),k(this,Ev,t)}}Cw=new WeakMap,Nw=new WeakMap,Dw=new WeakMap,Ev=new WeakMap;var wh,wr,Sv,Tv,Mw,wI;class Yhe{constructor(e,t=ga.DISPLAY){U(this,Mw);U(this,wh,null);U(this,wr,new Map);U(this,Sv,null);U(this,Tv,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,k(this,Tv,e.order);for(const n of e.groups)m(this,wr).set(n.id,new Xhe(t,n));if(e.baseState==="OFF")for(const n of m(this,wr).values())n._setVisible(Qp,!1);for(const n of e.on)m(this,wr).get(n)._setVisible(Qp,!0);for(const n of e.off)m(this,wr).get(n)._setVisible(Qp,!1);k(this,Sv,this.getHash())}}isVisible(e){if(m(this,wr).size===0)return!0;if(!e)return UC("Optional content group not defined."),!0;if(e.type==="OCG")return m(this,wr).has(e.id)?m(this,wr).get(e.id).visible:(At(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return H(this,Mw,wI).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!m(this,wr).has(t))return At(`Optional content group not found: ${t}`),!0;if(m(this,wr).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!m(this,wr).has(t))return At(`Optional content group not found: ${t}`),!0;if(!m(this,wr).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!m(this,wr).has(t))return At(`Optional content group not found: ${t}`),!0;if(!m(this,wr).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!m(this,wr).has(t))return At(`Optional content group not found: ${t}`),!0;if(m(this,wr).get(t).visible)return!1}return!0}return At(`Unknown optional content policy ${e.policy}.`),!0}return At(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var s;const i=m(this,wr).get(e);if(!i){At(`Optional content group not found: ${e}`);return}if(n&&t&&i.rbGroups.length)for(const a of i.rbGroups)for(const o of a)o!==e&&((s=m(this,wr).get(o))==null||s._setVisible(Qp,!1,!0));i._setVisible(Qp,!!t,!0),k(this,wh,null)}setOCGState({state:e,preserveRB:t}){let n;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const s=m(this,wr).get(i);if(s)switch(n){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!s.visible,t);break}}k(this,wh,null)}get hasInitialVisibility(){return m(this,Sv)===null||this.getHash()===m(this,Sv)}getOrder(){return m(this,wr).size?m(this,Tv)?m(this,Tv).slice():[...m(this,wr).keys()]:null}getGroup(e){return m(this,wr).get(e)||null}getHash(){if(m(this,wh)!==null)return m(this,wh);const e=new rG;for(const[t,n]of m(this,wr))e.update(`${t}:${n.visible}`);return k(this,wh,e.hexdigest())}[Symbol.iterator](){return m(this,wr).entries()}}wh=new WeakMap,wr=new WeakMap,Sv=new WeakMap,Tv=new WeakMap,Mw=new WeakSet,wI=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const s=e[i];let a;if(Array.isArray(s))a=H(this,Mw,wI).call(this,s);else if(m(this,wr).has(s))a=m(this,wr).get(s).visible;else return At(`Optional content group not found: ${s}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};class Qhe{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Xt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:s,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(s==null?void 0:s.length)>0){const l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),e.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(n),!0)});Xt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,i,s;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(s=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||s.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Xt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new Jhe(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new Zhe(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class Jhe{constructor(e,t,n=!1,i=null){this._stream=e,this._done=n||!1,this._filename=hF(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Zhe{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function ede(r){let e=!0,t=n("filename\\*","i").exec(r);if(t){t=t[1];let c=o(t);return c=unescape(c),c=l(c),c=u(c),s(c)}if(t=a(r),t){const c=u(t);return s(c)}if(t=n("filename","i").exec(r),t){t=t[1];let c=o(t);return c=u(c),s(c)}function n(c,h){return new RegExp("(?:^|;)\\s*"+c+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function i(c,h){if(c){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const d=new TextDecoder(c,{fatal:!0}),f=Hx(h);h=d.decode(f),e=!1}catch{}}return h}function s(c){return e&&/[\x80-\xff]/.test(c)&&(c=i("utf-8",c),e&&(c=i("iso-8859-1",c))),c}function a(c){const h=[];let d;const f=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(d=f.exec(c))!==null;){let[,g,b,v]=d;if(g=parseInt(g,10),g in h){if(g===0)break;continue}h[g]=[b,v]}const p=[];for(let g=0;g<h.length&&g in h;++g){let[b,v]=h[g];v=o(v),b&&(v=unescape(v),g===0&&(v=l(v))),p.push(v)}return p.join("")}function o(c){if(c.startsWith('"')){const h=c.slice(1).split('\\"');for(let d=0;d<h.length;++d){const f=h[d].indexOf('"');f!==-1&&(h[d]=h[d].slice(0,f),h.length=d+1),h[d]=h[d].replaceAll(/\\(.)/g,"$1")}c=h.join('"')}return c}function l(c){const h=c.indexOf("'");if(h===-1)return c;const d=c.slice(0,h),p=c.slice(h+1).replace(/^[^']*'/,"");return i(d,p)}function u(c){return!c.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(c)?c:c.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,d,f,p){if(f==="q"||f==="Q")return p=p.replaceAll("_"," "),p=p.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,b){return String.fromCharCode(parseInt(b,16))}),i(d,p);try{p=atob(p)}catch{}return i(d,p)})}return""}function mG(r,e){const t=new Headers;if(!r||!e||typeof e!="object")return t;for(const n in e){const i=e[n];i!==void 0&&t.append(n,i)}return t}function jC(r){var e;return((e=URL.parse(r))==null?void 0:e.origin)??null}function pG({responseHeaders:r,isHttp:e,rangeChunkSize:t,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(r.get("Content-Length"),10);return!Number.isInteger(s)||(i.suggestedLength=s,s<=2*t)||n||!e||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function gG(r){const e=r.get("Content-Disposition");if(e){let t=ede(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(hF(t))return t}return null}function Yx(r,e){return new RS(`Unexpected server response (${r}) while retrieving PDF "${e}".`,r,r===404||r===0&&e.startsWith("file:"))}function vG(r){return r===200||r===206}function yG(r,e,t){return{method:"GET",headers:r,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function bG(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(At(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class tde{constructor(e){Pe(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=mG(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Xt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new rde(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new nde(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class rde{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),i=t.url;fetch(i,yG(n,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=jC(s.url),!vG(s.status))throw Yx(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();const a=s.headers,{allowRangeRequests:o,suggestedLength:l}=pG({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=gG(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ed("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:bG(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class nde{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${n-1}`);const a=i.url;fetch(a,yG(s,this._withCredentials,this._abortController)).then(o=>{const l=jC(o.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!vG(o.status))throw Yx(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:bG(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const ON=200,BN=206;function ide(r){const e=r.response;return typeof e!="string"?e:Hx(e).buffer}class sde{constructor({url:e,httpHeaders:t,withCredentials:n}){Pe(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=mG(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,a]of this.headers)t.setRequestHeader(s,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=BN):i.expectedStatus=ON,t.responseType="arraybuffer",Xt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var i;const n=this.pendingRequests[e];n&&((i=n.onProgress)==null||i.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){n.onError(i.status);return}const s=i.status||ON;if(!(s===ON&&n.expectedStatus===BN)&&s!==n.expectedStatus){n.onError(i.status);return}const o=ide(i);if(s===BN){const l=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);u?n.onDone({begin:parseInt(u[1],10),chunk:o}):(At('Missing or invalid "Content-Range" header.'),n.onError(0))}else o?n.onDone({begin:0,chunk:o}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class ade{constructor(e){this._source=e,this._manager=new sde(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Xt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new ode(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new lde(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class ode{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=jC(t.responseURL);const n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[l,...u]=o.split(": ");return[l,u.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:a}=pG({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=gG(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Yx(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class lde{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=jC((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Yx(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const ude=/^[a-z][a-z0-9\-+.]+:/i;function cde(r){if(ude.test(r))return new URL(r);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(r))}class hde{constructor(e){this.source=e,this.url=cde(e.url),Xt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Xt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new dde(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new fde(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class dde{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=Yx(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ed("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class fde{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Oy=Symbol("INITIAL_DATA");var ra,Iw,xI;class wG{constructor(){U(this,Iw);U(this,ra,Object.create(null))}get(e,t=null){if(t){const i=H(this,Iw,xI).call(this,e);return i.promise.then(()=>t(i.data)),null}const n=m(this,ra)[e];if(!n||n.data===Oy)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=m(this,ra)[e];return!!t&&t.data!==Oy}delete(e){const t=m(this,ra)[e];return!t||t.data===Oy?!1:(delete m(this,ra)[e],!0)}resolve(e,t=null){const n=H(this,Iw,xI).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in m(this,ra)){const{data:n}=m(this,ra)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}k(this,ra,Object.create(null))}*[Symbol.iterator](){for(const e in m(this,ra)){const{data:t}=m(this,ra)[e];t!==Oy&&(yield[e,t])}}}ra=new WeakMap,Iw=new WeakSet,xI=function(e){var t;return(t=m(this,ra))[e]||(t[e]={...Promise.withResolvers(),data:Oy})};const mde=1e5,d5=30;var bU,xh,Rs,Pw,Rw,rm,Pu,kw,Fw,nm,Cv,Nv,_h,Dv,Ow,Mv,im,Bw,Lw,Iv,sm,$w,Ah,Pv,Cc,xG,_G,_I,Sa,pE,AI,AG,EG;const Bn=class Bn{constructor({textContentSource:e,container:t,viewport:n}){U(this,Cc);U(this,xh,Promise.withResolvers());U(this,Rs,null);U(this,Pw,!1);U(this,Rw,!!((bU=globalThis.FontInspector)!=null&&bU.enabled));U(this,rm,null);U(this,Pu,null);U(this,kw,0);U(this,Fw,0);U(this,nm,null);U(this,Cv,null);U(this,Nv,0);U(this,_h,0);U(this,Dv,Object.create(null));U(this,Ow,[]);U(this,Mv,null);U(this,im,[]);U(this,Bw,new WeakMap);U(this,Lw,null);var l;if(e instanceof ReadableStream)k(this,Mv,e);else if(typeof e=="object")k(this,Mv,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');k(this,Rs,k(this,Cv,t)),k(this,_h,n.scale*Xl.pixelRatio),k(this,Nv,n.rotation),k(this,Pu,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:s,pageX:a,pageY:o}=n.rawDims;k(this,Lw,[1,0,0,-1,-a,o+s]),k(this,Fw,i),k(this,kw,s),H(l=Bn,Sa,AG).call(l),np(t,n),m(this,xh).promise.finally(()=>{m(Bn,Pv).delete(this),k(this,Pu,null),k(this,Dv,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Ii.platform;return Et(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{m(this,nm).read().then(({value:t,done:n})=>{if(n){m(this,xh).resolve();return}m(this,rm)??k(this,rm,t.lang),Object.assign(m(this,Dv),t.styles),H(this,Cc,xG).call(this,t.items),e()},m(this,xh).reject)};return k(this,nm,m(this,Mv).getReader()),m(Bn,Pv).add(this),e(),m(this,xh).promise}update({viewport:e,onBefore:t=null}){var s;const n=e.scale*Xl.pixelRatio,i=e.rotation;if(i!==m(this,Nv)&&(t==null||t(),k(this,Nv,i),np(m(this,Cv),{rotation:i})),n!==m(this,_h)){t==null||t(),k(this,_h,n);const a={div:null,properties:null,ctx:H(s=Bn,Sa,pE).call(s,m(this,rm))};for(const o of m(this,im))a.properties=m(this,Bw).get(o),a.div=o,H(this,Cc,_I).call(this,a)}}cancel(){var t;const e=new Ed("TextLayer task cancelled.");(t=m(this,nm))==null||t.cancel(e).catch(()=>{}),k(this,nm,null),m(this,xh).reject(e)}get textDivs(){return m(this,im)}get textContentItemsStr(){return m(this,Ow)}static cleanup(){if(!(m(this,Pv).size>0)){m(this,Iv).clear();for(const{canvas:e}of m(this,sm).values())e.remove();m(this,sm).clear()}}};xh=new WeakMap,Rs=new WeakMap,Pw=new WeakMap,Rw=new WeakMap,rm=new WeakMap,Pu=new WeakMap,kw=new WeakMap,Fw=new WeakMap,nm=new WeakMap,Cv=new WeakMap,Nv=new WeakMap,_h=new WeakMap,Dv=new WeakMap,Ow=new WeakMap,Mv=new WeakMap,im=new WeakMap,Bw=new WeakMap,Lw=new WeakMap,Iv=new WeakMap,sm=new WeakMap,$w=new WeakMap,Ah=new WeakMap,Pv=new WeakMap,Cc=new WeakSet,xG=function(e){var i,s;if(m(this,Pw))return;(s=m(this,Pu)).ctx??(s.ctx=H(i=Bn,Sa,pE).call(i,m(this,rm)));const t=m(this,im),n=m(this,Ow);for(const a of e){if(t.length>mde){At("Ignoring additional textDivs for performance reasons."),k(this,Pw,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=m(this,Rs);k(this,Rs,document.createElement("span")),m(this,Rs).classList.add("markedContent"),a.id&&m(this,Rs).setAttribute("id",`${a.id}`),o.append(m(this,Rs))}else a.type==="endMarkedContent"&&k(this,Rs,m(this,Rs).parentNode);continue}n.push(a.str),H(this,Cc,_G).call(this,a)}},_G=function(e){var g;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};m(this,im).push(t);const i=Ze.transform(m(this,Lw),e.transform);let s=Math.atan2(i[1],i[0]);const a=m(this,Dv)[e.fontName];a.vertical&&(s+=Math.PI/2);let o=m(this,Rw)&&a.fontSubstitution||a.fontFamily;o=Bn.fontFamilyMap.get(o)||o;const l=Math.hypot(i[2],i[3]),u=l*H(g=Bn,Sa,EG).call(g,o,a,m(this,rm));let c,h;s===0?(c=i[4],h=i[5]-u):(c=i[4]+u*Math.sin(s),h=i[5]-u*Math.cos(s));const d="calc(var(--total-scale-factor) *",f=t.style;m(this,Rs)===m(this,Cv)?(f.left=`${(100*c/m(this,Fw)).toFixed(2)}%`,f.top=`${(100*h/m(this,kw)).toFixed(2)}%`):(f.left=`${d}${c.toFixed(2)}px)`,f.top=`${d}${h.toFixed(2)}px)`),f.fontSize=`${d}${(m(Bn,Ah)*l).toFixed(2)}px)`,f.fontFamily=o,n.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,m(this,Rw)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),s!==0&&(n.angle=s*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const b=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);b!==v&&Math.max(b,v)/Math.min(b,v)>1.5&&(p=!0)}if(p&&(n.canvasWidth=a.vertical?e.height:e.width),m(this,Bw).set(t,n),m(this,Pu).div=t,m(this,Pu).properties=n,H(this,Cc,_I).call(this,m(this,Pu)),n.hasText&&m(this,Rs).append(t),n.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),m(this,Rs).append(b)}},_I=function(e){var o;const{div:t,properties:n,ctx:i}=e,{style:s}=t;let a="";if(m(Bn,Ah)>1&&(a=`scale(${1/m(Bn,Ah)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:l}=s,{canvasWidth:u,fontSize:c}=n;H(o=Bn,Sa,AI).call(o,i,c*m(this,_h),l);const{width:h}=i.measureText(t.textContent);h>0&&(a=`scaleX(${u*m(this,_h)/h}) ${a}`)}n.angle!==0&&(a=`rotate(${n.angle}deg) ${a}`),a.length>0&&(s.transform=a)},Sa=new WeakSet,pE=function(e=null){let t=m(this,sm).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),m(this,sm).set(e,t),m(this,$w).set(t,{size:0,family:""})}return t},AI=function(e,t,n){const i=m(this,$w).get(e);t===i.size&&n===i.family||(e.font=`${t}px ${n}`,i.size=t,i.family=n)},AG=function(){if(m(this,Ah)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),k(this,Ah,e.getBoundingClientRect().height),e.remove()},EG=function(e,t,n){const i=m(this,Iv).get(e);if(i)return i;const s=H(this,Sa,pE).call(this,n);s.canvas.width=s.canvas.height=d5,H(this,Sa,AI).call(this,s,d5,e);const a=s.measureText(""),o=a.fontBoundingBoxAscent,l=Math.abs(a.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let u=.8;return o?u=o/(o+l):(Ii.platform.isFirefox&&At("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?u=t.ascent:t.descent&&(u=1+t.descent)),m(this,Iv).set(e,u),u},U(Bn,Sa),U(Bn,Iv,new Map),U(Bn,sm,new Map),U(Bn,$w,new WeakMap),U(Bn,Ah,null),U(Bn,Pv,new Set);let N1=Bn;const pde=100;function SG(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const e=new EI,{docId:t}=e,n=r.url?_he(r.url):null,i=r.data?Ahe(r.data):null,s=r.httpHeaders||null,a=r.withCredentials===!0,o=r.password??null,l=r.range instanceof TG?r.range:null,u=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let c=r.worker instanceof D1?r.worker:null;const h=r.verbosity,d=typeof r.docBaseUrl=="string"&&!zC(r.docBaseUrl)?r.docBaseUrl:null,f=iA(r.cMapUrl),p=r.cMapPacked!==!1,g=r.CMapReaderFactory||(ds?Ihe:JL),b=iA(r.iccUrl),v=iA(r.standardFontDataUrl),x=r.StandardFontDataFactory||(ds?Phe:ZL),y=iA(r.wasmUrl),E=r.WasmFactory||(ds?Rhe:e5),w=r.stopAtErrors!==!0,A=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,T=r.isEvalSupported!==!1,S=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!ds,N=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!ds&&(Ii.platform.isFirefox||!globalThis.chrome),D=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,_=typeof r.disableFontFace=="boolean"?r.disableFontFace:ds,M=r.fontExtraProperties===!0,I=r.enableXfa===!0,V=r.ownerDocument||globalThis.document,q=r.disableRange===!0,P=r.disableStream===!0,L=r.disableAutoFetch===!0,$=r.pdfBug===!0,z=r.CanvasFactory||(ds?Mhe:Che),K=r.FilterFactory||(ds?Dhe:Nhe),re=r.enableHWA===!0,Q=r.useWasm!==!1,O=l?l.length:r.length??NaN,te=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!ds&&!_,W=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(g===JL&&x===ZL&&E===e5&&f&&v&&y&&Zy(f,document.baseURI)&&Zy(v,document.baseURI)&&Zy(y,document.baseURI)),de=null;Yce(h);const fe={canvasFactory:new z({ownerDocument:V,enableHWA:re}),filterFactory:new K({docId:t,ownerDocument:V}),cMapReaderFactory:W?null:new g({baseUrl:f,isCompressed:p}),standardFontDataFactory:W?null:new x({baseUrl:v}),wasmFactory:W?null:new E({baseUrl:y})};c||(c=D1.create({verbosity:h,port:Fl.workerPort}),e._worker=c);const ne={docId:t,apiVersion:"5.4.449",data:i,password:o,disableAutoFetch:L,rangeChunkSize:u,length:O,docBaseUrl:d,enableXfa:I,evaluatorOptions:{maxImageSize:A,disableFontFace:_,ignoreErrors:w,isEvalSupported:T,isOffscreenCanvasSupported:S,isImageDecoderSupported:N,canvasMaxAreaInBytes:D,fontExtraProperties:M,useSystemFonts:te,useWasm:Q,useWorkerFetch:W,cMapUrl:f,iccUrl:b,standardFontDataUrl:v,wasmUrl:y}},X={ownerDocument:V,pdfBug:$,styleElement:de,loadingParams:{disableAutoFetch:L,enableXfa:I}};return c.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const se=c.messageHandler.sendWithPromise("GetDocRequest",ne,i?[i.buffer]:null);let me;if(l)me=new Qhe(l,{disableRange:q,disableStream:P});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");const ue=Zy(n)?tde:ds?hde:ade;me=new ue({url:n,length:O,httpHeaders:s,withCredentials:a,rangeChunkSize:u,disableRange:q,disableStream:P})}return se.then(ue=>{if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const be=new ob(t,ue,c.port),ye=new yde(be,e,me,X,fe,re);e._transport=ye,be.send("Ready",null)})}).catch(e._capability.reject),e}var BT;const LT=class LT{constructor(){Pe(this,"_capability",Promise.withResolvers());Pe(this,"_transport",null);Pe(this,"_worker",null);Pe(this,"docId",`d${On(LT,BT)._++}`);Pe(this,"destroyed",!1);Pe(this,"onPassword",null);Pe(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,n,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,s}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};BT=new WeakMap,U(LT,BT,0);let EI=LT;var am,Vw,Uw,zw,jw;class TG{constructor(e,t,n=!1,i=null){U(this,am,Promise.withResolvers());U(this,Vw,[]);U(this,Uw,[]);U(this,zw,[]);U(this,jw,[]);this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(e){m(this,jw).push(e)}addProgressListener(e){m(this,zw).push(e)}addProgressiveReadListener(e){m(this,Uw).push(e)}addProgressiveDoneListener(e){m(this,Vw).push(e)}onDataRange(e,t){for(const n of m(this,jw))n(e,t)}onDataProgress(e,t){m(this,am).promise.then(()=>{for(const n of m(this,zw))n(e,t)})}onDataProgressiveRead(e){m(this,am).promise.then(()=>{for(const t of m(this,Uw))t(e)})}onDataProgressiveDone(){m(this,am).promise.then(()=>{for(const e of m(this,Vw))e()})}transportReady(){m(this,am).resolve()}requestDataRange(e,t){Dr("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}am=new WeakMap,Vw=new WeakMap,Uw=new WeakMap,zw=new WeakMap,jw=new WeakMap;class gde{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Et(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Ru,om,db;class vde{constructor(e,t,n,i=!1){U(this,om);U(this,Ru,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new HL:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new wG,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:s=!1}={}){return new Wx({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Et(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:i="display",annotationMode:s=Xc.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:u=null,pageColors:c=null,printAnnotationStorage:h=null,isEditing:d=!1,recordOperations:f=!1,operationsFilter:p=null}){var N,D,_;(N=this._stats)==null||N.time("Overall");const g=this._transport.getRenderingIntent(i,s,h,d),{renderingIntent:b,cacheKey:v}=g;k(this,Ru,!1),l||(l=this._transport.getOptionalContentConfig(b));let x=this._intentStates.get(v);x||(x=Object.create(null),this._intentStates.set(v,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const y=!!(b&ga.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(D=this._stats)==null||D.time("Page Request"),this._pumpOperatorList(g));const E=!!(this._pdfBug&&((_=globalThis.StepperManager)!=null&&_.enabled)),w=!this.recordedBBoxes&&(f||E),A=M=>{var I,V;if(x.renderTasks.delete(T),w){const q=(I=T.gfx)==null?void 0:I.dependencyTracker.take();q&&(T.stepper&&T.stepper.setOperatorBBoxes(q,T.gfx.dependencyTracker.takeDebugMetadata()),f&&(this.recordedBBoxes=q))}y&&k(this,Ru,!0),H(this,om,db).call(this),M?(T.capability.reject(M),this._abortOperatorList({intentState:x,reason:M instanceof Error?M:new Error(M)})):T.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(V=globalThis.Stats)!=null&&V.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},T=new SI({callback:A,params:{canvas:t,canvasContext:e,dependencyTracker:w?new Fhe(t,x.operatorList.length,E):null,viewport:n,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!y,pdfBug:this._pdfBug,pageColors:c,enableHWA:this._transport.enableHWA,operationsFilter:p});(x.renderTasks||(x.renderTasks=new Set)).add(T);const S=T.task;return Promise.all([x.displayReadyCapability.promise,l]).then(([M,I])=>{var V;if(this.destroyed){A();return}if((V=this._stats)==null||V.time("Rendering"),!(I.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");T.initializeGraphics({transparency:M,optionalContentConfig:I}),T.operatorListChanged()}).catch(A),S}getOperatorList({intent:e="display",annotationMode:t=Xc.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){var u;function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(e,t,n,i,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>C1.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,i){function s(){a.read().then(function({value:l,done:u}){if(u){n(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),s()},i)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),k(this,Ru,!1),Promise.all(e)}cleanup(e=!1){k(this,Ru,!0);const t=H(this,om,db).call(this);return e&&t&&this._stats&&(this._stats=new HL),t}_startRenderPage(e,t){var i,s;const n=this._intentStates.get(t);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(s=n.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&H(this,om,db).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:i}){const{map:s,transfer:a}=n,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:i},a).getReader(),u=this._intentStates.get(t);u.streamReader=l;const c=()=>{l.read().then(({value:h,done:d})=>{if(d){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,u),c())},h=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const d of u.renderTasks)d.operatorListChanged();H(this,om,db).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(h);else if(u.opListReadCapability)u.opListReadCapability.reject(h);else throw h}})};c()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof cF){let i=pde;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new Ed(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,s]of this._intentStates)if(s===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Ru=new WeakMap,om=new WeakSet,db=function(){if(!m(this,Ru)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),k(this,Ru,!1),!0};var Eh,Io,ku,lm,$T,um,cm,gs,gE,CG,NG,fb,Rv,vE;const zr=class zr{constructor({name:e=null,port:t=null,verbosity:n=Qce()}={}){U(this,gs);U(this,Eh,Promise.withResolvers());U(this,Io,null);U(this,ku,null);U(this,lm,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(m(zr,cm).has(t))throw new Error("Cannot use more than one PDFWorker per port.");m(zr,cm).set(t,this),H(this,gs,CG).call(this,t)}else H(this,gs,NG).call(this)}get promise(){return m(this,Eh).promise}get port(){return m(this,ku)}get messageHandler(){return m(this,Io)}destroy(){var e,t;this.destroyed=!0,(e=m(this,lm))==null||e.terminate(),k(this,lm,null),m(zr,cm).delete(m(this,ku)),k(this,ku,null),(t=m(this,Io))==null||t.destroy(),k(this,Io,null)}static create(e){const t=m(this,cm).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new zr(e)}static get workerSrc(){if(Fl.workerSrc)return Fl.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Et(this,"_setupFakeWorkerGlobal",(async()=>m(this,Rv,vE)?m(this,Rv,vE):(await import(this.workerSrc)).WorkerMessageHandler)())}};Eh=new WeakMap,Io=new WeakMap,ku=new WeakMap,lm=new WeakMap,$T=new WeakMap,um=new WeakMap,cm=new WeakMap,gs=new WeakSet,gE=function(){m(this,Eh).resolve(),m(this,Io).send("configure",{verbosity:this.verbosity})},CG=function(e){k(this,ku,e),k(this,Io,new ob("main","worker",e)),m(this,Io).on("ready",()=>{}),H(this,gs,gE).call(this)},NG=function(){if(m(zr,um)||m(zr,Rv,vE)){H(this,gs,fb).call(this);return}let{workerSrc:e}=zr;try{zr._isSameOrigin(window.location,e)||(e=zr._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new ob("main","worker",t),i=()=>{s.abort(),n.destroy(),t.terminate(),this.destroyed?m(this,Eh).reject(new Error("Worker was destroyed")):H(this,gs,fb).call(this)},s=new AbortController;t.addEventListener("error",()=>{m(this,lm)||i()},{signal:s.signal}),n.on("test",o=>{if(s.abort(),this.destroyed||!o){i();return}k(this,Io,n),k(this,ku,t),k(this,lm,t),H(this,gs,gE).call(this)}),n.on("ready",o=>{if(s.abort(),this.destroyed){i();return}try{a()}catch{H(this,gs,fb).call(this)}});const a=()=>{const o=new Uint8Array;n.send("test",o,[o.buffer])};a();return}catch{UC("The worker has been disabled.")}H(this,gs,fb).call(this)},fb=function(){m(zr,um)||(At("Setting up fake worker."),k(zr,um,!0)),zr._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){m(this,Eh).reject(new Error("Worker was destroyed"));return}const t=new The;k(this,ku,t);const n=`fake${On(zr,$T)._++}`,i=new ob(n+"_worker",n,t);e.setup(i,t),k(this,Io,new ob(n,n+"_worker",t)),H(this,gs,gE).call(this)}).catch(e=>{m(this,Eh).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Rv=new WeakSet,vE=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},U(zr,Rv),U(zr,$T,0),U(zr,um,!1),U(zr,cm,new WeakMap),ds&&(k(zr,um,!0),Fl.workerSrc||(Fl.workerSrc="./pdf.worker.mjs")),zr._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const i=new URL(t,n);return n.origin===i.origin},zr._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},zr.fromPort=e=>{if(uhe("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return zr.create(e)};let D1=zr;var Fu,El,kv,Fv,Ou,hm,mb;class yde{constructor(e,t,n,i,s,a){U(this,hm);U(this,Fu,new Map);U(this,El,new Map);U(this,kv,new Map);U(this,Fv,new Map);U(this,Ou,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new wG,this.fontLoader=new whe({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}get annotationStorage(){return Et(this,"annotationStorage",new dF)}getRenderingIntent(e,t=Xc.ENABLE,n=null,i=!1,s=!1){let a=ga.DISPLAY,o=oI;switch(e){case"any":a=ga.ANY;break;case"display":break;case"print":a=ga.PRINT;break;default:At(`getRenderingIntent - invalid intent: ${e}`)}const l=a&ga.PRINT&&n instanceof iG?n:this.annotationStorage;switch(t){case Xc.DISABLE:a+=ga.ANNOTATIONS_DISABLE;break;case Xc.ENABLE:break;case Xc.ENABLE_FORMS:a+=ga.ANNOTATIONS_FORMS;break;case Xc.ENABLE_STORAGE:a+=ga.ANNOTATIONS_STORAGE,o=l.serializable;break;default:At(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(a+=ga.IS_EDITING),s&&(a+=ga.OPLIST);const{ids:u,hash:c}=l.modifiedIds,h=[a,o.hash,c];return{renderingIntent:a,cacheKey:h.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=m(this,Ou))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of m(this,El).values())e.push(i._destroy());m(this,El).clear(),m(this,kv).clear(),m(this,Fv).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,s;this.commonObjs.clear(),this.fontLoader.clear(),m(this,Fu).clear(),this.filterFactory.destroy(),N1.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new Ed("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,i)=>{Xt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},i.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){i.close();return}Xt(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this._fullReader.cancel(s),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async n=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:s,contentLength:a}=this._fullReader;return(!i||!s)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:s,contentLength:a}}),e.on("GetRangeReader",(n,i)=>{Xt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(n.begin,n.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:a,done:o}){if(o){i.close();return}Xt(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{s.cancel(a),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new gde(n,this))}),e.on("DocException",n=>{t._capability.reject(Cs(n))}),e.on("PasswordRequest",n=>{k(this,Ou,Promise.withResolvers());try{if(!t.onPassword)throw Cs(n);const i=s=>{s instanceof Error?m(this,Ou).reject(s):m(this,Ou).resolve({password:s})};t.onPassword(i,n.code)}catch(i){m(this,Ou).reject(i)}return m(this,Ou).promise}),e.on("DataLoaded",n=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;m(this,El).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,i,s])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in s){const d=s.error;At(`Error during font loading: ${d}`),this.commonObjs.resolve(n,d);break}const o=new lI(s),l=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(d,f)=>globalThis.FontInspector.fontAdded(d,f):null,u=new xhe(o,l,s.extra,s.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(n,u)});break;case"CopyLocalImage":const{imageRef:c}=s;Xt(c,"The imageRef must be defined.");for(const d of m(this,El).values())for(const[,f]of d.objs)if((f==null?void 0:f.ref)===c)return f.dataLen?(this.commonObjs.resolve(n,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":this.commonObjs.resolve(n,s);break;case"Pattern":const h=new uI(s);this.commonObjs.resolve(n,h.getIR());break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([n,i,s,a])=>{var l;if(this.destroyed)return;const o=m(this,El).get(i);if(!o.objs.has(n)){if(o._intentStates.size===0){(l=a==null?void 0:a.bitmap)==null||l.close();return}switch(s){case"Image":case"Pattern":o.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",n=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&At("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=m(this,kv).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&m(this,Fv).set(s.refStr,e);const a=new vde(t,s,this,this._params.pdfBug);return m(this,El).set(t,a),a});return m(this,kv).set(t,i),i}getPageIndex(e){return cI(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return H(this,hm,mb).call(this,"GetFieldObjects")}hasJSActions(){return H(this,hm,mb).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return H(this,hm,mb).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return H(this,hm,mb).call(this,"GetOptionalContentConfig").then(t=>new Yhe(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=m(this,Fu).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(i=>{var s,a;return{info:i[0],metadata:i[1]?new Khe(i[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null,hasStructTree:i[2]}});return m(this,Fu).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of m(this,El).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),m(this,Fu).clear(),this.filterFactory.destroy(!0),N1.cleanup()}}cachedPageNumber(e){if(!cI(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return m(this,Fv).get(t)??null}}Fu=new WeakMap,El=new WeakMap,kv=new WeakMap,Fv=new WeakMap,Ou=new WeakMap,hm=new WeakSet,mb=function(e,t=null){const n=m(this,Fu).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return m(this,Fu).set(e,i),i};var Sh;class bde{constructor(e){U(this,Sh,null);Pe(this,"onContinue",null);Pe(this,"onError",null);k(this,Sh,e)}get promise(){return m(this,Sh).capability.promise}cancel(e=0){m(this,Sh).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=m(this,Sh).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=m(this,Sh);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Sh=new WeakMap;var Th,dm;const pf=class pf{constructor({callback:e,params:t,objs:n,commonObjs:i,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:c=!1,pdfBug:h=!1,pageColors:d=null,enableHWA:f=!1,operationsFilter:p=null}){U(this,Th,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=h,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=c===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new bde(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=f,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=p}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var l,u;if(this.cancelled)return;if(this._canvas){if(m(pf,dm).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");m(pf,dm).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:i,background:s,dependencyTracker:a}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Fg(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:i,viewport:n,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,t=0){var n,i,s;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),m(this,Th)&&(window.cancelAnimationFrame(m(this,Th)),k(this,Th,null)),m(pf,dm).delete(this._canvas),e||(e=new cF(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(s=(i=this.task).onError)==null||s.call(i,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?k(this,Th,window.requestAnimationFrame(()=>{k(this,Th,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),m(pf,dm).delete(this._canvas),this.callback())))}};Th=new WeakMap,dm=new WeakMap,U(pf,dm,new WeakSet);let SI=pf;const wde="5.4.449",xde="f44e5f0e6";var na,fm,Ov,Vn,qw,Bv,Bu,Hw,Ch,Po,Gw,_r,TI,CI,NI,uf,DG,Uc;const Ns=class Ns{constructor({editor:e=null,uiManager:t=null}){U(this,_r);U(this,na,null);U(this,fm,null);U(this,Ov);U(this,Vn,null);U(this,qw,!1);U(this,Bv,!1);U(this,Bu,null);U(this,Hw);U(this,Ch,null);U(this,Po,null);var n,i;e?(k(this,Bv,!1),k(this,Bu,e)):k(this,Bv,!0),k(this,Po,(e==null?void 0:e._uiManager)||t),k(this,Hw,m(this,Po)._eventBus),k(this,Ov,((n=e==null?void 0:e.color)==null?void 0:n.toUpperCase())||((i=m(this,Po))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),m(Ns,Gw)||k(Ns,Gw,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Et(this,"_keyboardManager",new Xx([[["Escape","mac+Escape"],Ns.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ns.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ns.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ns.prototype._moveToPrevious],[["Home","mac+Home"],Ns.prototype._moveToBeginning],[["End","mac+End"],Ns.prototype._moveToEnd]]))}renderButton(){const e=k(this,na,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",m(this,Bu)&&(e.ariaControls=`${m(this,Bu).id}_colorpicker_dropdown`);const t=m(this,Po)._signal;e.addEventListener("click",H(this,_r,uf).bind(this),{signal:t}),e.addEventListener("keydown",H(this,_r,NI).bind(this),{signal:t});const n=k(this,fm,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=m(this,Ov),e.append(n),e}renderMainDropdown(){const e=k(this,Vn,H(this,_r,TI).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===m(this,na)){H(this,_r,uf).call(this,e);return}const t=e.target.getAttribute("data-color");t&&H(this,_r,CI).call(this,t,e)}_moveToNext(e){var t,n;if(!m(this,_r,Uc)){H(this,_r,uf).call(this,e);return}if(e.target===m(this,na)){(t=m(this,Vn).firstElementChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=m(this,Vn))==null?void 0:t.firstElementChild)||e.target===m(this,na)){m(this,_r,Uc)&&this._hideDropdownFromKeyboard();return}m(this,_r,Uc)||H(this,_r,uf).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!m(this,_r,Uc)){H(this,_r,uf).call(this,e);return}(t=m(this,Vn).firstElementChild)==null||t.focus()}_moveToEnd(e){var t;if(!m(this,_r,Uc)){H(this,_r,uf).call(this,e);return}(t=m(this,Vn).lastElementChild)==null||t.focus()}hideDropdown(){var e,t;(e=m(this,Vn))==null||e.classList.add("hidden"),m(this,na).ariaExpanded="false",(t=m(this,Ch))==null||t.abort(),k(this,Ch,null)}_hideDropdownFromKeyboard(){var e;if(!m(this,Bv)){if(!m(this,_r,Uc)){(e=m(this,Bu))==null||e.unselect();return}this.hideDropdown(),m(this,na).focus({preventScroll:!0,focusVisible:m(this,qw)})}}updateColor(e){if(m(this,fm)&&(m(this,fm).style.backgroundColor=e),!m(this,Vn))return;const t=m(this,Po).highlightColors.values();for(const n of m(this,Vn).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=m(this,na))==null||e.remove(),k(this,na,null),k(this,fm,null),(t=m(this,Vn))==null||t.remove(),k(this,Vn,null)}};na=new WeakMap,fm=new WeakMap,Ov=new WeakMap,Vn=new WeakMap,qw=new WeakMap,Bv=new WeakMap,Bu=new WeakMap,Hw=new WeakMap,Ch=new WeakMap,Po=new WeakMap,Gw=new WeakMap,_r=new WeakSet,TI=function(){const e=document.createElement("div"),t=m(this,Po)._signal;e.addEventListener("contextmenu",mo,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),m(this,Bu)&&(e.id=`${m(this,Bu).id}_colorpicker_dropdown`);for(const[n,i]of m(this,Po).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=n,s.setAttribute("data-l10n-id",m(Ns,Gw)[n]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=i,s.ariaSelected=i===m(this,Ov),s.addEventListener("click",H(this,_r,CI).bind(this,i),{signal:t}),e.append(s)}return e.addEventListener("keydown",H(this,_r,NI).bind(this),{signal:t}),e},CI=function(e,t){t.stopPropagation(),m(this,Hw).dispatch("switchannotationeditorparams",{source:this,type:Kt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},NI=function(e){Ns._keyboardManager.exec(this,e)},uf=function(e){if(m(this,_r,Uc)){this.hideDropdown();return}if(k(this,qw,e.detail===0),m(this,Ch)||(k(this,Ch,new AbortController),window.addEventListener("pointerdown",H(this,_r,DG).bind(this),{signal:m(this,Po).combinedSignal(m(this,Ch))})),m(this,na).ariaExpanded="true",m(this,Vn)){m(this,Vn).classList.remove("hidden");return}const t=k(this,Vn,H(this,_r,TI).call(this));m(this,na).append(t)},DG=function(e){var t;(t=m(this,Vn))!=null&&t.contains(e.target)||this.hideDropdown()},Uc=function(){return m(this,Vn)&&!m(this,Vn).classList.contains("hidden")},U(Ns,Gw,null);let VS=Ns;var Sl,Ww,Lv,Kw;const gf=class gf{constructor(e){U(this,Sl,null);U(this,Ww,null);U(this,Lv,null);k(this,Ww,e),k(this,Lv,e._uiManager),m(gf,Kw)||k(gf,Kw,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(m(this,Sl))return m(this,Sl);const{editorType:e,colorType:t,color:n}=m(this,Ww),i=k(this,Sl,document.createElement("input"));return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",m(gf,Kw)[e]),i.addEventListener("input",()=>{m(this,Lv).updateParams(t,i.value)},{signal:m(this,Lv)._signal}),i}update(e){m(this,Sl)&&(m(this,Sl).value=e)}destroy(){var e;(e=m(this,Sl))==null||e.remove(),k(this,Sl,null)}hideDropdown(){}};Sl=new WeakMap,Ww=new WeakMap,Lv=new WeakMap,Kw=new WeakMap,U(gf,Kw,null);let US=gf;function f5(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function By(r){return Math.max(0,Math.min(255,255*r))}class m5{static CMYK_G([e,t,n,i]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=By(e),[e,e,e]}static G_HTML([e]){const t=f5(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(By)}static RGB_HTML(e){return`#${e.map(f5).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,n+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,n,i]){return[By(1-Math.min(1,e+i)),By(1-Math.min(1,n+i)),By(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const i=1-e,s=1-t,a=1-n,o=Math.min(i,s,a);return["CMYK",i,s,a,o]}}class _de{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Dr("Abstract method `_createSVG` called.")}}class zS extends _de{_createSVG(e){return document.createElementNS(lu,e)}}const Ade=9,sp=new WeakSet,Ede=new Date().getTimezoneOffset()*60*1e3;class LN{static create(e){switch(e.data.annotationType){case Tn.LINK:return new pF(e);case Tn.TEXT:return new Tde(e);case Tn.WIDGET:switch(e.data.fieldType){case"Tx":return new Cde(e);case"Btn":return e.data.radioButton?new PG(e):e.data.checkBox?new Dde(e):new Mde(e);case"Ch":return new Ide(e);case"Sig":return new Nde(e)}return new vp(e);case Tn.POPUP:return new MI(e);case Tn.FREETEXT:return new BG(e);case Tn.LINE:return new Rde(e);case Tn.SQUARE:return new kde(e);case Tn.CIRCLE:return new Fde(e);case Tn.POLYLINE:return new LG(e);case Tn.CARET:return new Bde(e);case Tn.INK:return new gF(e);case Tn.POLYGON:return new Ode(e);case Tn.HIGHLIGHT:return new $G(e);case Tn.UNDERLINE:return new Lde(e);case Tn.SQUIGGLY:return new $de(e);case Tn.STRIKEOUT:return new Vde(e);case Tn.STAMP:return new VG(e);case Tn.FILEATTACHMENT:return new Ude(e);default:return new Zr(e)}}}var mm,$v,Xa,Xw,DI;const EO=class EO{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){U(this,Xw);U(this,mm,null);U(this,$v,!1);U(this,Xa,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return EO._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:e}=this,t=(n=this.annotationStorage)==null?void 0:n.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var o;const e=(o=this.annotationStorage)==null?void 0:o.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:n,rect:i}=this.data;let s=-1/0,a=-1/0;if((t==null?void 0:t.length)>=8){for(let l=0;l<t.length;l+=8)t[l+1]>a?(a=t[l+1],s=t[l+2]):t[l+1]===a&&(s=Math.max(s,t[l+2]));return[s,a]}if((n==null?void 0:n.length)>=1){for(const l of n)for(let u=0,c=l.length;u<c;u+=2)l[u+1]>a?(a=l[u+1],s=l[u]):l[u+1]===a&&(s=Math.max(s,l[u]));if(s!==1/0)return[s,a]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:s,pageY:a}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-s)/n,e[1]=100*(e[1]-a)/i,e}get commentText(){var t,n,i;const{data:e}=this;return((n=(t=this.annotationStorage.getRawValue(`${S1}${e.id}`))==null?void 0:t.popup)==null?void 0:n.contents)||((i=e.contentsObj)==null?void 0:i.str)||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${S1}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=m(this,Xa))==null?void 0:e.popup)||this.popup)==null||t.remove(),k(this,Xa,this.popup=null)}updateEdited(e){var s;if(!this.container)return;e.rect&&(m(this,mm)||k(this,mm,{rect:this.data.rect.slice(0)}));const{rect:t,popup:n}=e;t&&H(this,Xw,DI).call(this,t);let i=((s=m(this,Xa))==null?void 0:s.popup)||this.popup;!i&&(n!=null&&n.text)&&(this._createPopup(n),i=m(this,Xa).popup),i&&(i.updateEdited(e),n!=null&&n.deleted&&(i.remove(),k(this,Xa,null),this.popup=null))}resetEdited(){var e;m(this,mm)&&(H(this,Xw,DI).call(this,m(this,mm).rect),(e=m(this,Xa))==null||e.popup.resetEdited(),k(this,mm,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),!(this instanceof vp)&&!(this instanceof pF)&&(s.tabIndex=0);const{style:a}=s;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof MI){const{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,s),s}const{width:o,height:l}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,b=t.borderStyle.verticalCornerRadius;if(g>0||b>0){const x=`calc(${g}px * var(--total-scale-factor)) / calc(${b}px * var(--total-scale-factor))`;a.borderRadius=x}else if(this instanceof PG){const x=`calc(${o}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;a.borderRadius=x}switch(t.borderStyle.style){case Gp.SOLID:a.borderStyle="solid";break;case Gp.DASHED:a.borderStyle="dashed";break;case Gp.BEVELED:At("Unimplemented border style: beveled");break;case Gp.INSET:At("Unimplemented border style: inset");break;case Gp.UNDERLINE:a.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(k(this,$v,!0),a.borderColor=Ze.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):a.borderWidth=0}const u=Ze.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:h,pageX:d,pageY:f}=i.rawDims;a.left=`${100*(u[0]-d)/c}%`,a.top=`${100*(u[1]-f)/h}%`;const{rotation:p}=t;return t.hasOwnCanvas||p===0?(a.width=`${100*o/c}%`,a.height=`${100*l/h}%`):this.setRotation(p,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:s,height:a}=this;e%180!==0&&([s,a]=[a,s]),t.style.width=`${100*s/n}%`,t.style.height=`${100*a/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,i)=>{const s=i.detail[t],a=s[0],o=s.slice(1);i.target.style[n]=m5[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[n]:m5[`${a}_rgb`](o)})};return Et(this,"_commonActions",{display:t=>{const{display:n}=t.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail)){const s=e[i]||n[i];s==null||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,s]of Object.entries(t)){const a=n[i];if(a){const o={detail:{[i]:s},target:e};a(o),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,s]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){const[g,b,v,x]=e.subarray(2,6);if(i===g&&s===b&&t===v&&n===x)return}const{style:a}=this.container;let o;if(m(this,$v)){const{borderColor:g,borderWidth:b}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${b}">`],this.container.classList.add("hasBorder")}const l=i-t,u=s-n,{svgFactory:c}=this,h=c.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const d=c.createElement("defs");h.append(d);const f=c.createElement("clipPath"),p=`clippath_${this.data.id}`;f.setAttribute("id",p),f.setAttribute("clipPathUnits","objectBoundingBox"),d.append(f);for(let g=2,b=e.length;g<b;g+=8){const v=e[g],x=e[g+1],y=e[g+2],E=e[g+3],w=c.createElement("rect"),A=(y-t)/l,T=(s-x)/u,S=(v-y)/l,N=(x-E)/u;w.setAttribute("x",A),w.setAttribute("y",T),w.setAttribute("width",S),w.setAttribute("height",N),f.append(w),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${A}" y="${T}" width="${S}" height="${N}"/>`)}m(this,$v)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(h),this.container.style.clipPath=`url(#${p})`}_createPopup(e=null){const{data:t}=this;let n,i;e?(n={str:e.text},i=e.date):(n=t.contentsObj,i=t.modificationDate),k(this,Xa,new MI({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(m(this,Xa)||this.popup||this.data.popupRef)}get extraPopupElement(){return m(this,Xa)}render(){Dr("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:s,id:a,exportValues:o}of i){if(s===-1||a===t)continue;const l=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!sp.has(u)){At(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:l,domElement:u})}return n}for(const i of document.getElementsByName(e)){const{exportValue:s}=i,a=i.getAttribute("data-element-id");a!==t&&sp.has(i)&&n.push({id:a,exportValue:s,domElement:i})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};mm=new WeakMap,$v=new WeakMap,Xa=new WeakMap,Xw=new WeakSet,DI=function(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}}}=this;n==null||n.splice(0,4,...e),t.left=`${100*(e[0]-o)/s}%`,t.top=`${100*(a-e[3]+l)/a}%`,i===0?(t.width=`${100*(e[2]-e[0])/s}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(i)};let Zr=EO;class Sde extends Zr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var wa,cf,MG,IG;class pF extends Zr{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});U(this,wa);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let s=!1;return t.url?(n.addLinkAttributes(i,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),s=!0):t.attachment?(H(this,wa,MG).call(this,i,t.attachment,t.overlaidText,t.attachmentDest),s=!0):t.setOCGState?(H(this,wa,IG).call(this,i,t.setOCGState,t.overlaidText),s=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),s=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&(this.contentElement=i,this.container.append(i)),this.container}_bindLink(t,n,i=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&H(this,wa,cf).call(this),i&&(t.title=i)}_bindNamedAction(t,n,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),i&&(t.title=i),H(this,wa,cf).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(n.actions)){const a=i.get(s);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:s}}),!1})}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),H(this,wa,cf).call(this)}_bindResetFormAction(t,n){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),H(this,wa,cf).call(this),!this._fieldObjects){At('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var h;i==null||i();const{fields:s,refs:a,include:o}=n,l=[];if(s.length!==0||a.length!==0){const d=new Set(a);for(const f of s){const p=this._fieldObjects[f]||[];for(const{id:g}of p)d.add(g)}for(const f of Object.values(this._fieldObjects))for(const p of f)d.has(p.id)===o&&l.push(p)}else for(const d of Object.values(this._fieldObjects))l.push(...d);const u=this.annotationStorage,c=[];for(const d of l){const{id:f}=d;switch(c.push(f),d.type){case"text":{const g=d.defaultValue||"";u.setValue(f,{value:g});break}case"checkbox":case"radiobutton":{const g=d.defaultValue===d.exportValues;u.setValue(f,{value:g});break}case"combobox":case"listbox":{const g=d.defaultValue||"";u.setValue(f,{value:g});break}default:continue}const p=document.querySelector(`[data-element-id="${f}"]`);if(p){if(!sp.has(p)){At(`_bindResetFormAction - element not allowed: ${f}`);continue}}else continue;p.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}})),!1}}}wa=new WeakSet,cf=function(){this.container.setAttribute("data-internal-link","")},MG=function(t,n,i="",s=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:i&&(t.title=i),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(n.content,n.filename,s),!1},H(this,wa,cf).call(this)},IG=function(t,n,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),i&&(t.title=i),H(this,wa,cf).call(this)};class Tde extends Zr{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class vp extends Zr{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Ii.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,s){n.includes("mouse")?e.addEventListener(n,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(n,a=>{var o;if(n==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}s&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(a)}}))})}_setEventListeners(e,t,n,i){var s,a,o;for(const[l,u]of n)(u==="Action"||(s=this.data.actions)!=null&&s[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,u,i),u==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Ze.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||Ade,s=e.style;let a;const o=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),c=Math.round(u/(MN*i))||1,h=u/c;a=Math.min(i,l(h/MN))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(i,l(u/MN))}s.fontSize=`calc(${a}px * var(--total-scale-factor))`,s.color=Ze.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Cde extends vp{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,i){const s=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),s.setValue(a.id,{[i]:n})}render(){var i,s;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=a.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const c={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=u??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",u??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),sp.add(n),this.contentElement=n,n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:h,datetimeType:d,timeStep:f}=this.data,p=!!d&&this.enableScripting;h&&(n.title=h),this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",b=>{e.setValue(t,{value:b.target.value}),this.setPropertyOnSiblings(n,"value",b.target.value,"value"),c.formattedValue=null}),n.addEventListener("resetform",b=>{const v=this.data.defaultFieldValue??"";n.value=c.userValue=v,c.formattedValue=null});let g=b=>{const{formattedValue:v}=c;v!=null&&(b.target.value=v),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",v=>{var y;if(c.focused)return;const{target:x}=v;if(p&&(x.type=d,f&&(x.step=f)),c.userValue){const E=c.userValue;if(p)if(d==="time"){const w=new Date(E),A=[w.getHours(),w.getMinutes(),w.getSeconds()];x.value=A.map(T=>T.toString().padStart(2,"0")).join(":")}else x.value=new Date(E-Ede).toISOString().split(d==="date"?"T":".",1)[0];else x.value=E}c.lastCommittedValue=x.value,c.commitKey=1,(y=this.data.actions)!=null&&y.Focus||(c.focused=!0)}),n.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const x={value(y){c.userValue=y.detail.value??"",p||e.setValue(t,{value:c.userValue.toString()}),y.target.value=c.userValue},formattedValue(y){const{formattedValue:E}=y.detail;c.formattedValue=E,E!=null&&y.target!==document.activeElement&&(y.target.value=E);const w={formattedValue:E};p&&(w.value=E),e.setValue(t,w)},selRange(y){y.target.setSelectionRange(...y.detail.selRange)},charLimit:y=>{var T;const{charLimit:E}=y.detail,{target:w}=y;if(E===0){w.removeAttribute("maxLength");return}w.setAttribute("maxLength",E);let A=c.userValue;!A||A.length<=E||(A=A.slice(0,E),w.value=c.userValue=A,e.setValue(t,{value:A}),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:1,selStart:w.selectionStart,selEnd:w.selectionEnd}}))}};this._dispatchEventFromSandbox(x,v)}),n.addEventListener("keydown",v=>{var E;c.commitKey=1;let x=-1;if(v.key==="Escape"?x=0:v.key==="Enter"&&!this.data.multiLine?x=2:v.key==="Tab"&&(c.commitKey=3),x===-1)return;const{value:y}=v.target;c.lastCommittedValue!==y&&(c.lastCommittedValue=y,c.userValue=y,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:x,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const b=g;g=null,n.addEventListener("blur",v=>{var E,w;if(!c.focused||!v.relatedTarget)return;(E=this.data.actions)!=null&&E.Blur||(c.focused=!1);const{target:x}=v;let{value:y}=x;if(p){if(y&&d==="time"){const A=y.split(":").map(T=>parseInt(T,10));y=new Date(2e3,0,1,A[0],A[1],A[2]||0).valueOf(),x.step=""}else y.includes("T")||(y=`${y}T00:00`),y=new Date(y).valueOf();x.type="text"}c.userValue=y,c.lastCommittedValue!==y&&((w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:c.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),b(v)}),(s=this.data.actions)!=null&&s.Keystroke&&n.addEventListener("beforeinput",v=>{var N;c.lastCommittedValue=null;const{data:x,target:y}=v,{value:E,selectionStart:w,selectionEnd:A}=y;let T=w,S=A;switch(v.inputType){case"deleteWordBackward":{const D=E.substring(0,w).match(/\w*[^\w]*$/);D&&(T-=D[0].length);break}case"deleteWordForward":{const D=E.substring(w).match(/^[^\w]*\w*/);D&&(S+=D[0].length);break}case"deleteContentBackward":w===A&&(T-=1);break;case"deleteContentForward":w===A&&(S+=1);break}v.preventDefault(),(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,change:x||"",willCommit:!1,selStart:T,selEnd:S}})}),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(g&&n.addEventListener("blur",g),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Nde extends vp{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Dde extends vp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return sp.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=0,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const u of this._getElementsByName(o,n)){const c=l&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=c),e.setValue(u.id,{value:c})}e.setValue(n,{value:l})}),s.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(n,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class PG extends vp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const a of this._getElementsByName(t.fieldName,n))e.setValue(a.id,{value:!1});const s=document.createElement("input");if(sp.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const u of this._getElementsByName(o,n))e.setValue(u.id,{value:!1});e.setValue(n,{value:l})}),s.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;s.addEventListener("updatefromsandbox",o=>{const l={value:u=>{const c=a===u.detail.value;for(const h of this._getElementsByName(u.target.name)){const d=c&&h.id===n;h.domElement&&(h.domElement.checked=d),e.setValue(h.id,{value:d})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Mde extends pF{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class Ide extends vp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");sp.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",c=>{const h=this.data.defaultFieldValue;for(const d of i.options)d.selected=d.value===h});for(const c of this.data.options){const h=document.createElement("option");h.textContent=c.displayValue,h.value=c.exportValue,n.value.includes(c.exportValue)&&(h.setAttribute("selected",!0),s=!1),i.append(h)}let a=null;if(s){const c=document.createElement("option");c.value=" ",c.setAttribute("hidden",!0),c.setAttribute("selected",!0),i.prepend(c),a=()=>{c.remove(),i.removeEventListener("input",a),a=null},i.addEventListener("input",a)}const o=c=>{const h=c?"value":"textContent",{options:d,multiple:f}=i;return f?Array.prototype.filter.call(d,p=>p.selected).map(p=>p[h]):d.selectedIndex===-1?null:d[d.selectedIndex][h]};let l=o(!1);const u=c=>{const h=c.target.options;return Array.prototype.map.call(h,d=>({displayValue:d.textContent,exportValue:d.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",c=>{const h={value(d){a==null||a();const f=d.detail.value,p=new Set(Array.isArray(f)?f:[f]);for(const g of i.options)g.selected=p.has(g.value);e.setValue(t,{value:o(!0)}),l=o(!1)},multipleSelection(d){i.multiple=!0},remove(d){const f=i.options,p=d.detail.remove;f[p].selected=!1,i.remove(p),f.length>0&&Array.prototype.findIndex.call(f,b=>b.selected)===-1&&(f[0].selected=!0),e.setValue(t,{value:o(!0),items:u(d)}),l=o(!1)},clear(d){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),l=o(!1)},insert(d){const{index:f,displayValue:p,exportValue:g}=d.detail.insert,b=i.children[f],v=document.createElement("option");v.textContent=p,v.value=g,b?b.before(v):i.append(v),e.setValue(t,{value:o(!0),items:u(d)}),l=o(!1)},items(d){const{items:f}=d.detail;for(;i.length!==0;)i.remove(0);for(const p of f){const{displayValue:g,exportValue:b}=p,v=document.createElement("option");v.textContent=g,v.value=b,i.append(v)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:o(!0),items:u(d)}),l=o(!1)},indices(d){const f=new Set(d.detail.indices);for(const p of d.target.options)p.selected=f.has(p.index);e.setValue(t,{value:o(!0)}),l=o(!1)},editable(d){d.target.disabled=!d.detail.editable}};this._dispatchEventFromSandbox(h,c)}),i.addEventListener("input",c=>{var f;const h=o(!0),d=o(!1);e.setValue(t,{value:h}),c.preventDefault(),(f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:d,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],c=>c.target.value)):i.addEventListener("input",function(c){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var Yw,II;class MI extends Zr{constructor(t){const{data:n,elements:i,parent:s}=t,a=!!s._commentManager;super(t,{isRenderable:!a&&Zr._hasPopupData(n)});U(this,Yw);if(this.elements=i,a&&Zr._hasPopupData(n)){const o=this.popup=H(this,Yw,II).call(this);for(const l of i)l.popup=o}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const n=this.popup=H(this,Yw,II).call(this),i=[];for(const s of this.elements)s.popup=n,s.container.ariaHasPopup="dialog",i.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(s=>`${vg}${s}`).join(",")),this.container}}Yw=new WeakSet,II=function(){return new Pde({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var ia,Nh,VT,UT,Vv,Uv,on,Tl,Dh,pm,zv,jv,Cl,sa,Lu,$u,ln,Vu,Mh,Qw,Uu,qv,gm,Ih,ri,Ph,Ft,yE,PI,RI,kI,bE,FI,RG,kG,FG,OG,wE,xE,OI;class Pde{constructor({container:e,color:t,elements:n,titleObj:i,modificationDate:s,contentsObj:a,richText:o,parent:l,rect:u,parentRect:c,open:h,commentManager:d=null}){U(this,Ft);U(this,ia,null);U(this,Nh,H(this,Ft,FG).bind(this));U(this,VT,H(this,Ft,OI).bind(this));U(this,UT,H(this,Ft,xE).bind(this));U(this,Vv,H(this,Ft,wE).bind(this));U(this,Uv,null);U(this,on,null);U(this,Tl,null);U(this,Dh,null);U(this,pm,null);U(this,zv,null);U(this,jv,null);U(this,Cl,!1);U(this,sa,null);U(this,Lu,null);U(this,$u,null);U(this,ln,null);U(this,Vu,null);U(this,Mh,null);U(this,Qw,null);U(this,Uu,null);U(this,qv,null);U(this,gm,null);U(this,Ih,!1);U(this,ri,null);U(this,Ph,null);k(this,on,e),k(this,qv,i),k(this,Tl,a),k(this,Uu,o),k(this,zv,l),k(this,Uv,t),k(this,Qw,u),k(this,jv,c),k(this,pm,n),k(this,ia,d),k(this,ri,n[0]),k(this,Dh,kS.toDateObject(s)),this.trigger=n.flatMap(f=>f.getElementsToTriggerPopup()),d||(H(this,Ft,yE).call(this),m(this,on).hidden=!0,h&&H(this,Ft,wE).call(this))}renderCommentButton(){if(m(this,ln)){m(this,ln).parentNode||m(this,ri).container.after(m(this,ln));return}if(m(this,Vu)||H(this,Ft,PI).call(this),!m(this,Vu))return;const{signal:e}=k(this,Lu,new AbortController),t=m(this,ri).hasOwnCommentButton,n=()=>{m(this,ia).toggleCommentPopup(this,!0,void 0,!t)},i=()=>{m(this,ia).toggleCommentPopup(this,!1,!0,!t)},s=()=>{m(this,ia).toggleCommentPopup(this,!1,!1)};if(t){k(this,ln,m(this,ri).container);for(const a of this.trigger)a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.addEventListener("keydown",m(this,Nh),{signal:e}),a.addEventListener("click",n,{signal:e}),a.addEventListener("pointerenter",i,{signal:e}),a.addEventListener("pointerleave",s,{signal:e}),a.classList.add("popupTriggerArea")}else{const a=k(this,ln,document.createElement("button"));a.className="annotationCommentButton";const o=m(this,ri).container;a.style.zIndex=o.style.zIndex+1,a.tabIndex=0,a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.setAttribute("data-l10n-id","pdfjs-show-comment-button"),H(this,Ft,kI).call(this),H(this,Ft,RI).call(this),a.addEventListener("keydown",m(this,Nh),{signal:e}),a.addEventListener("click",n,{signal:e}),a.addEventListener("pointerenter",i,{signal:e}),a.addEventListener("pointerleave",s,{signal:e}),o.after(a)}}get commentButtonColor(){const{color:e,opacity:t}=m(this,ri).commentData;return e?m(this,zv)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=m(this,ln))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:i,modificationDate:s}=m(this,ri).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:i,modificationDate:s}}get elementBeforePopup(){return m(this,ln)}get comment(){return m(this,Ph)||k(this,Ph,m(this,ri).commentText),m(this,Ph)}set comment(e){e!==this.comment&&(m(this,ri).commentText=k(this,Ph,e))}focus(){var e;(e=m(this,ri).container)==null||e.focus()}get parentBoundingClientRect(){return m(this,ri).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){m(this,ln)&&(m(this,ln).classList.toggle("selected",e),m(this,ln).ariaExpanded=t)}setSelectedCommentButton(e){m(this,ln).classList.toggle("selected",e)}get commentPopupPosition(){if(m(this,Mh))return m(this,Mh);const{x:e,y:t,height:n}=m(this,ln).getBoundingClientRect(),{x:i,y:s,width:a,height:o}=m(this,ri).layer.getBoundingClientRect();return[(e-i)/a,(t+n-s)/o]}set commentPopupPosition(e){k(this,Mh,e)}hasDefaultPopupPosition(){return m(this,Mh)===null}get commentButtonPosition(){return m(this,Vu)}get commentButtonWidth(){return m(this,ln).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=m(this,Mh)||this.commentButtonPosition.map(u=>u/100),i=this.parentBoundingClientRect,{x:s,y:a,width:o,height:l}=i;m(this,ia).showDialog(null,this,s+t*o,a+n*l,{...e,parentDimensions:i})}render(){var n,i;if(m(this,sa))return;const e=k(this,sa,document.createElement("div"));if(e.className="popup",m(this,Uv)){const s=e.style.outlineColor=Ze.makeHexColor(...m(this,Uv));e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const t=document.createElement("span");if(t.className="header",(n=m(this,qv))!=null&&n.str){const s=document.createElement("span");s.className="title",t.append(s),{dir:s.dir,str:s.textContent}=m(this,qv)}if(e.append(t),m(this,Dh)){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:m(this,Dh).valueOf()})),s.dateTime=m(this,Dh).toISOString(),t.append(s)}AH({html:m(this,Ft,bE)||m(this,Tl).str,dir:(i=m(this,Tl))==null?void 0:i.dir,className:"popupContent"},e),m(this,on).append(e)}updateEdited({rect:e,popup:t,deleted:n}){var i;if(m(this,ia)){n?(this.remove(),k(this,Ph,null)):t&&(t.deleted?this.remove():(H(this,Ft,kI).call(this),k(this,Ph,t.text))),e&&(k(this,Vu,null),H(this,Ft,PI).call(this),H(this,Ft,RI).call(this));return}if(n||t!=null&&t.deleted){this.remove();return}H(this,Ft,yE).call(this),m(this,gm)||k(this,gm,{contentsObj:m(this,Tl),richText:m(this,Uu)}),e&&k(this,$u,null),t&&t.text&&(k(this,Uu,H(this,Ft,kG).call(this,t.text)),k(this,Dh,kS.toDateObject(t.date)),k(this,Tl,null)),(i=m(this,sa))==null||i.remove(),k(this,sa,null)}resetEdited(){var e;m(this,gm)&&({contentsObj:On(this,Tl)._,richText:On(this,Uu)._}=m(this,gm),k(this,gm,null),(e=m(this,sa))==null||e.remove(),k(this,sa,null),k(this,$u,null))}remove(){var e,t,n;if((e=m(this,Lu))==null||e.abort(),k(this,Lu,null),(t=m(this,sa))==null||t.remove(),k(this,sa,null),k(this,Ih,!1),k(this,Cl,!1),(n=m(this,ln))==null||n.remove(),k(this,ln,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){k(this,Ih,this.isVisible),m(this,Ih)&&(m(this,on).hidden=!0)}maybeShow(){m(this,ia)||(H(this,Ft,yE).call(this),m(this,Ih)&&(m(this,sa)||H(this,Ft,xE).call(this),k(this,Ih,!1),m(this,on).hidden=!1))}get isVisible(){return m(this,ia)?!1:m(this,on).hidden===!1}}ia=new WeakMap,Nh=new WeakMap,VT=new WeakMap,UT=new WeakMap,Vv=new WeakMap,Uv=new WeakMap,on=new WeakMap,Tl=new WeakMap,Dh=new WeakMap,pm=new WeakMap,zv=new WeakMap,jv=new WeakMap,Cl=new WeakMap,sa=new WeakMap,Lu=new WeakMap,$u=new WeakMap,ln=new WeakMap,Vu=new WeakMap,Mh=new WeakMap,Qw=new WeakMap,Uu=new WeakMap,qv=new WeakMap,gm=new WeakMap,Ih=new WeakMap,ri=new WeakMap,Ph=new WeakMap,Ft=new WeakSet,yE=function(){var t;if(m(this,Lu))return;k(this,Lu,new AbortController);const{signal:e}=m(this,Lu);for(const n of this.trigger)n.addEventListener("click",m(this,Vv),{signal:e}),n.addEventListener("pointerenter",m(this,UT),{signal:e}),n.addEventListener("pointerleave",m(this,VT),{signal:e}),n.classList.add("popupTriggerArea");for(const n of m(this,pm))(t=n.container)==null||t.addEventListener("keydown",m(this,Nh),{signal:e})},PI=function(){const e=m(this,pm).find(t=>t.hasCommentButton);e&&k(this,Vu,e._normalizePoint(e.commentButtonPosition))},RI=function(){if(m(this,ri).extraPopupElement&&!m(this,ri).editor)return;m(this,ln)||this.renderCommentButton();const[e,t]=m(this,Vu),{style:n}=m(this,ln);n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`},kI=function(){m(this,ri).extraPopupElement||(m(this,ln)||this.renderCommentButton(),m(this,ln).style.backgroundColor=this.commentButtonColor||"")},bE=function(){const e=m(this,Uu),t=m(this,Tl);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&m(this,Uu).html||null},FI=function(){var e,t,n;return((n=(t=(e=m(this,Ft,bE))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},RG=function(){var e,t,n;return((n=(t=(e=m(this,Ft,bE))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},kG=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:m(this,Ft,RG),fontSize:m(this,Ft,FI)?`calc(${m(this,Ft,FI)}px * var(--total-scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:i});return n},FG=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&m(this,Cl))&&H(this,Ft,wE).call(this)},OG=function(){if(m(this,$u)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:s}}}=m(this,zv);let a=!!m(this,jv),o=a?m(this,jv):m(this,Qw);for(const p of m(this,pm))if(!o||Ze.intersect(p.data.rect,o)!==null){o=p.data.rect,a=!0;break}const l=Ze.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),c=a?o[2]-o[0]+5:0,h=l[0]+c,d=l[1];k(this,$u,[100*(h-i)/t,100*(d-s)/n]);const{style:f}=m(this,on);f.left=`${m(this,$u)[0]}%`,f.top=`${m(this,$u)[1]}%`},wE=function(){if(m(this,ia)){m(this,ia).toggleCommentPopup(this,!1);return}k(this,Cl,!m(this,Cl)),m(this,Cl)?(H(this,Ft,xE).call(this),m(this,on).addEventListener("click",m(this,Vv)),m(this,on).addEventListener("keydown",m(this,Nh))):(H(this,Ft,OI).call(this),m(this,on).removeEventListener("click",m(this,Vv)),m(this,on).removeEventListener("keydown",m(this,Nh)))},xE=function(){m(this,sa)||this.render(),this.isVisible?m(this,Cl)&&m(this,on).classList.add("focused"):(H(this,Ft,OG).call(this),m(this,on).hidden=!1,m(this,on).style.zIndex=parseInt(m(this,on).style.zIndex)+1e3)},OI=function(){m(this,on).classList.remove("focused"),!(m(this,Cl)||!this.isVisible)&&(m(this,on).hidden=!0,m(this,on).style.zIndex=parseInt(m(this,on).style.zIndex)-1e3)};class BG extends Zr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Dt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Jw;class Rde extends Zr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});U(this,Jw,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:i}=this,s=this.svgFactory.create(n,i,!0),a=k(this,Jw,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return m(this,Jw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Jw=new WeakMap;var Zw;class kde extends Zr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});U(this,Zw,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:i}=this,s=this.svgFactory.create(n,i,!0),a=t.borderStyle.width,o=k(this,Zw,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",n-a),o.setAttribute("height",i-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return m(this,Zw)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zw=new WeakMap;var ex;class Fde extends Zr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});U(this,ex,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:i}=this,s=this.svgFactory.create(n,i,!0),a=t.borderStyle.width,o=k(this,ex,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",n/2),o.setAttribute("cy",i/2),o.setAttribute("rx",n/2-a/2),o.setAttribute("ry",i/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return m(this,ex)}addHighlightArea(){this.container.classList.add("highlightArea")}}ex=new WeakMap;var tx;class LG extends Zr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});U(this,tx,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:i,popupRef:s},width:a,height:o}=this;if(!n)return this.container;const l=this.svgFactory.create(a,o,!0);let u=[];for(let h=0,d=n.length;h<d;h+=2){const f=n[h]-t[0],p=t[3]-n[h+1];u.push(`${f},${p}`)}u=u.join(" ");const c=k(this,tx,this.svgFactory.createElement(this.svgElementName));return c.setAttribute("points",u),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),l.append(c),this.container.append(l),!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return m(this,tx)}addHighlightArea(){this.container.classList.add("highlightArea")}}tx=new WeakMap;class Ode extends LG{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Bde extends Zr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var rx,vm,nx,BI;class gF extends Zr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});U(this,nx);U(this,rx,null);U(this,vm,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Dt.HIGHLIGHT:Dt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:i,borderStyle:s,popupRef:a}}=this,{transform:o,width:l,height:u}=H(this,nx,BI).call(this,n,t),c=this.svgFactory.create(l,u,!0),h=k(this,rx,this.svgFactory.createElement("svg:g"));c.append(h),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",o);for(let d=0,f=i.length;d<f;d++){const p=this.svgFactory.createElement(this.svgElementName);m(this,vm).push(p),p.setAttribute("points",i[d].join(",")),h.append(p)}return!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:i,rect:s}=t,a=m(this,rx);if(n>=0&&a.setAttribute("stroke-width",n||1),i)for(let o=0,l=m(this,vm).length;o<l;o++)m(this,vm)[o].setAttribute("points",i[o].join(","));if(s){const{transform:o,width:l,height:u}=H(this,nx,BI).call(this,this.data.rotation,s);a.parentElement.setAttribute("viewBox",`0 0 ${l} ${u}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return m(this,vm)}addHighlightArea(){this.container.classList.add("highlightArea")}}rx=new WeakMap,vm=new WeakMap,nx=new WeakSet,BI=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class $G extends Zr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Dt.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class Lde extends Zr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class $de extends Zr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class Vde extends Zr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class VG extends Zr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Dt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var ix,sx,LI;class Ude extends Zr{constructor(t){var i;super(t,{isRenderable:!0});U(this,sx);U(this,ix,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",H(this,sx,LI).bind(this)),k(this,ix,i);const{isMac:s}=Ii.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(s?a.metaKey:a.ctrlKey)&&H(this,sx,LI).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return m(this,ix)}addHighlightArea(){this.container.classList.add("highlightArea")}}ix=new WeakMap,sx=new WeakSet,LI=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var ym,bm,Hv,Rh,ax,wm,aa,ox,uc,_E,VI;const SO=class SO{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:i,page:s,viewport:a,structTreeLayer:o,commentManager:l,linkService:u,annotationStorage:c}){U(this,uc);U(this,ym,null);U(this,bm,null);U(this,Hv,null);U(this,Rh,new Map);U(this,ax,null);U(this,wm,null);U(this,aa,[]);U(this,ox,!1);this.div=e,k(this,ym,t),k(this,bm,n),k(this,ax,o||null),k(this,wm,u||null),k(this,Hv,c||new dF),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=l||null}hasEditableAnnotations(){return m(this,Rh).size>0}async render(e){var o;const{annotations:t}=e,n=this.div;np(n,this.viewport);const i=new Map,s=[],a={data:null,layer:n,linkService:m(this,wm),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new zS,annotationStorage:m(this,Hv),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const u=l.annotationType===Tn.POPUP;if(u){const d=i.get(l.id);if(!d)continue;if(!this._commentManager){s.push(l);continue}a.elements=d}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;a.data=l;const c=LN.create(a);if(!c.isRenderable)continue;if(!u&&(m(this,aa).push(c),l.popupRef)){const d=i.get(l.popupRef);d?d.push(c):i.set(l.popupRef,[c])}const h=c.render();l.hidden&&(h.style.visibility="hidden"),c._isEditable&&(m(this,Rh).set(c.data.id,c),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(c))}await H(this,uc,_E).call(this);for(const l of s){const u=a.elements=i.get(l.id);a.data=l;const c=LN.create(a);if(!c.isRenderable)continue;const h=c.render();c.contentElement.id=`${vg}${l.id}`,l.hidden&&(h.style.visibility="hidden"),u.at(-1).container.after(h)}H(this,uc,VI).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:m(this,wm),svgFactory:new zS,parent:this};for(const n of e){n.borderStyle||(n.borderStyle=SO._defaultBorderStyle),t.data=n;const i=LN.create(t);i.isRenderable&&(i.render(),i.contentElement.id=`${vg}${n.id}`,m(this,aa).push(i))}await H(this,uc,_E).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,np(t,{rotation:e.rotation}),H(this,uc,VI).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(m(this,Rh).values())}getEditableAnnotation(e){return m(this,Rh).get(e)}addFakeAnnotation(e){const{div:t}=this,{id:n,rotation:i}=e,s=new Sde({data:{id:n,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:m(this,wm),annotationStorage:m(this,Hv)});return s.render(),s.contentElement.id=`${vg}${n}`,s.createOrUpdatePopup(),m(this,aa).push(s),s}removeAnnotation(e){var i;const t=m(this,aa).findIndex(s=>s.data.id===e);if(t<0)return;const[n]=m(this,aa).splice(t,1);(i=m(this,ym))==null||i.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const t of e)t.updateFakeAnnotationElement(this);H(this,uc,_E).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return Et(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Gp.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};ym=new WeakMap,bm=new WeakMap,Hv=new WeakMap,Rh=new WeakMap,ax=new WeakMap,wm=new WeakMap,aa=new WeakMap,ox=new WeakMap,uc=new WeakSet,_E=async function(){var n,i,s;if(m(this,aa).length===0)return;this.div.replaceChildren();const e=[];if(!m(this,ox)){k(this,ox,!0);for(const{contentElement:a,data:{id:o}}of m(this,aa)){const l=a.id=`${vg}${o}`;e.push((n=m(this,ax))==null?void 0:n.getAriaAttributes(l).then(u=>{if(u)for(const[c,h]of u)a.setAttribute(c,h)}))}}m(this,aa).sort(({data:{rect:[a,o,l,u]}},{data:{rect:[c,h,d,f]}})=>{if(a===l&&o===u)return 1;if(c===d&&h===f)return-1;const p=u,g=o,b=(o+u)/2,v=f,x=h,y=(h+f)/2;if(b>=v&&y<=g)return-1;if(y>=p&&b<=x)return 1;const E=(a+l)/2,w=(c+d)/2;return E-w});const t=document.createDocumentFragment();for(const a of m(this,aa))t.append(a.container),this._commentManager?(s=((i=a.extraPopupElement)==null?void 0:i.popup)||a.popup)==null||s.renderCommentButton():a.extraPopupElement&&t.append(a.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),m(this,ym))for(const a of m(this,aa))m(this,ym).addPointerInTextLayer(a.contentElement,!1)},VI=function(){var t;if(!m(this,bm))return;const e=this.div;for(const[n,i]of m(this,bm)){const s=e.querySelector(`[data-annotation-id="${n}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:a}=s;a?a.nodeName==="CANVAS"?a.replaceWith(i):a.classList.contains("annotationContent")?a.after(i):a.before(i):s.append(i);const o=m(this,Rh).get(n);o&&(o._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(n,s.id,i),o._hasNoCanvas=!1):o.canvas=i)}m(this,bm).clear()};let $I=SO;const cA=/\r\n?|\n/g;var oa,lx,xm,la,kn,UG,zG,jG,AE,cc,EE,SE,qG,zI,HG;const Lr=class Lr extends Fr{constructor(t){super({...t,name:"freeTextEditor"});U(this,kn);U(this,oa,"");U(this,lx,`${this.id}-editor`);U(this,xm,null);U(this,la);Pe(this,"_colorPicker",null);this.color=t.color||Lr._defaultColor||Fr._defaultLineColor,k(this,la,t.fontSize||Lr._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const t=Lr.prototype,n=a=>a.isEmpty(),i=ip.TRANSLATE_SMALL,s=ip.TRANSLATE_BIG;return Et(this,"_keyboardManager",new Xx([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}]]))}static initialize(t,n){Fr.initialize(t,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Kt.FREETEXT_SIZE:Lr._defaultFontSize=n;break;case Kt.FREETEXT_COLOR:Lr._defaultColor=n;break}}updateParams(t,n){switch(t){case Kt.FREETEXT_SIZE:H(this,kn,UG).call(this,n);break;case Kt.FREETEXT_COLOR:H(this,kn,zG).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Kt.FREETEXT_SIZE,Lr._defaultFontSize],[Kt.FREETEXT_COLOR,Lr._defaultColor||Fr._defaultLineColor]]}get propertiesToUpdate(){return[[Kt.FREETEXT_SIZE,m(this,la)],[Kt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new US(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Kt.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-Lr._internalPadding*t,-(Lr._internalPadding+m(this,la))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),k(this,xm,new AbortController);const t=this._uiManager.combinedSignal(m(this,xm));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",m(this,lx)),this._isDraggable=!0,(t=m(this,xm))==null||t.abort(),k(this,xm,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=m(this,oa),n=k(this,oa,H(this,kn,jG).call(this).trimEnd());if(t===n)return;const i=s=>{if(k(this,oa,s),!s){this.remove();return}H(this,kn,SE).call(this),this._uiManager.rebuild(this),H(this,kn,AE).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(t)},mustExec:!1}),H(this,kn,AE).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Lr._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",m(this,lx)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${m(this,la)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[c,h]=this.pageDimensions,[d,f]=this.pageTranslation;let p,g;switch(this.rotation){case 0:p=t+(o[0]-d)/c,g=n+this.height-(o[1]-f)/h;break;case 90:p=t+(o[0]-d)/c,g=n-(o[1]-f)/h,[l,u]=[u,-l];break;case 180:p=t-this.width+(o[0]-d)/c,g=n-(o[1]-f)/h,[l,u]=[-l,-u];break;case 270:p=t+(o[0]-d-this.height*h)/c,g=n+(o[1]-f-this.width*c)/h,[l,u]=[-u,l];break}this.setAt(p*s,g*a,l,u)}else this._moveAfterPaste(t,n);H(this,kn,SE).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var p,g,b;const n=t.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const s=H(p=Lr,cc,zI).call(p,n.getData("text")||"").replaceAll(cA,`
`);if(!s)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!s.includes(`
`)){o.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:u}=o,c=[],h=[];if(l.nodeType===Node.TEXT_NODE){const v=l.parentElement;if(h.push(l.nodeValue.slice(u).replaceAll(cA,"")),v!==this.editorDiv){let x=c;for(const y of this.editorDiv.childNodes){if(y===v){x=h;continue}x.push(H(g=Lr,cc,EE).call(g,y))}}c.push(l.nodeValue.slice(0,u).replaceAll(cA,""))}else if(l===this.editorDiv){let v=c,x=0;for(const y of this.editorDiv.childNodes)x++===u&&(v=h),v.push(H(b=Lr,cc,EE).call(b,y))}k(this,oa,`${c.join(`
`)}${s}${h.join(`
`)}`),H(this,kn,SE).call(this);const d=new Range;let f=Math.sumPrecise(c.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const x=v.nodeValue.length;if(f<=x){d.setStart(v,f),d.setEnd(v,f);break}f-=x}a.removeAllRanges(),a.addRange(d)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Lr._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,i){var o;let s=null;if(t instanceof BG){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:c,rotation:h,id:d,popupRef:f,richText:p,contentsObj:g,creationDate:b,modificationDate:v},textContent:x,textPosition:y,parent:{page:{pageNumber:E}}}=t;if(!x||x.length===0)return null;s=t={annotationType:Dt.FREETEXT,color:Array.from(u),fontSize:l,value:x.join(`
`),position:y,pageIndex:E-1,rect:c.slice(0),rotation:h,annotationElementId:d,id:d,deleted:!1,popupRef:f,comment:(g==null?void 0:g.str)||null,richText:p,creationDate:b,modificationDate:v}}const a=await super.deserialize(t,n,i);return k(a,la,t.fontSize),a.color=Ze.makeHexColor(...t.color),k(a,oa,H(o=Lr,cc,zI).call(o,t.value)),a._initialData=s,t.comment&&a.setCommentData(t),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Fr._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:n,fontSize:m(this,la),value:H(this,kn,qG).call(this)});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!H(this,kn,HG).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(!n)return null;const{style:i}=n;i.fontSize=`calc(${m(this,la)}px * var(--total-scale-factor))`,i.color=this.color,n.replaceChildren();for(const s of m(this,oa).split(`
`)){const a=document.createElement("div");a.append(s?document.createTextNode(s):document.createElement("br")),n.append(a)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:m(this,oa)}}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};oa=new WeakMap,lx=new WeakMap,xm=new WeakMap,la=new WeakMap,kn=new WeakSet,UG=function(t){const n=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-m(this,la))*this.parentScale),k(this,la,s),H(this,kn,AE).call(this)},i=m(this,la);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Kt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},zG=function(t){const n=s=>{this.color=s,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Kt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},jG=function(){var i;const t=[];this.editorDiv.normalize();let n=null;for(const s of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(H(i=Lr,cc,EE).call(i,s)),n=s);return t.join(`
`)},AE=function(){const[t,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:s,div:a}=this,o=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",s.div.append(this.div),i=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/n):(this.width=i.height/t,this.height=i.width/n),this.fixAndSetPosition()},cc=new WeakSet,EE=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(cA,"")},SE=function(){if(this.editorDiv.replaceChildren(),!!m(this,oa))for(const t of m(this,oa).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},qG=function(){return m(this,oa).replaceAll(""," ")},zI=function(t){return t.replaceAll(" ","")},HG=function(t){const{value:n,fontSize:i,color:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==i||t.color.some((o,l)=>o!==s[l])||t.pageIndex!==a},U(Lr,cc),Pe(Lr,"_freeTextDefaultContent",""),Pe(Lr,"_internalPadding",0),Pe(Lr,"_defaultColor",null),Pe(Lr,"_defaultFontSize",10),Pe(Lr,"_type","freetext"),Pe(Lr,"_editorType",Dt.FREETEXT);let UI=Lr;class Ye{toSVGPath(){Dr("Abstract method `toSVGPath` must be implemented.")}get box(){Dr("Abstract getter `box` must be implemented.")}serialize(e,t){Dr("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,s,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o]*i,a[o+1]=n+e[o+1]*s;return a}static _rescaleAndSwap(e,t,n,i,s,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o+1]*i,a[o+1]=n+e[o]*s;return a}static _translate(e,t,n,i){i||(i=new Float32Array(e.length));for(let s=0,a=e.length;s<a;s+=2)i[s]=t+e[s],i[s+1]=n+e[s+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,i,s){switch(s){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,s,a){return[(e+5*n)/6,(t+5*i)/6,(5*n+s)/6,(5*i+a)/6,(n+s)/2,(i+a)/2]}}Pe(Ye,"PRECISION",1e-4);var ua,Ro,Gv,Wv,Nl,$t,_m,Am,ux,cx,Kv,Xv,kh,hx,zT,jT,qn,pb,GG,WG,KG,XG,YG,QG;const fu=class fu{constructor({x:e,y:t},n,i,s,a,o=0){U(this,qn);U(this,ua);U(this,Ro,[]);U(this,Gv);U(this,Wv);U(this,Nl,[]);U(this,$t,new Float32Array(18));U(this,_m);U(this,Am);U(this,ux);U(this,cx);U(this,Kv);U(this,Xv);U(this,kh,[]);k(this,ua,n),k(this,Xv,s*i),k(this,Wv,a),m(this,$t).set([NaN,NaN,NaN,NaN,e,t],6),k(this,Gv,o),k(this,cx,m(fu,hx)*i),k(this,ux,m(fu,jT)*i),k(this,Kv,i),m(this,kh).push(e,t)}isEmpty(){return isNaN(m(this,$t)[8])}add({x:e,y:t}){var N;k(this,_m,e),k(this,Am,t);const[n,i,s,a]=m(this,ua);let[o,l,u,c]=m(this,$t).subarray(8,12);const h=e-u,d=t-c,f=Math.hypot(h,d);if(f<m(this,ux))return!1;const p=f-m(this,cx),g=p/f,b=g*h,v=g*d;let x=o,y=l;o=u,l=c,u+=b,c+=v,(N=m(this,kh))==null||N.push(e,t);const E=-v/p,w=b/p,A=E*m(this,Xv),T=w*m(this,Xv);return m(this,$t).set(m(this,$t).subarray(2,8),0),m(this,$t).set([u+A,c+T],4),m(this,$t).set(m(this,$t).subarray(14,18),12),m(this,$t).set([u-A,c-T],16),isNaN(m(this,$t)[6])?(m(this,Nl).length===0&&(m(this,$t).set([o+A,l+T],2),m(this,Nl).push(NaN,NaN,NaN,NaN,(o+A-n)/s,(l+T-i)/a),m(this,$t).set([o-A,l-T],14),m(this,Ro).push(NaN,NaN,NaN,NaN,(o-A-n)/s,(l-T-i)/a)),m(this,$t).set([x,y,o,l,u,c],6),!this.isEmpty()):(m(this,$t).set([x,y,o,l,u,c],6),Math.abs(Math.atan2(y-l,x-o)-Math.atan2(v,b))<Math.PI/2?([o,l,u,c]=m(this,$t).subarray(2,6),m(this,Nl).push(NaN,NaN,NaN,NaN,((o+u)/2-n)/s,((l+c)/2-i)/a),[o,l,x,y]=m(this,$t).subarray(14,18),m(this,Ro).push(NaN,NaN,NaN,NaN,((x+o)/2-n)/s,((y+l)/2-i)/a),!0):([x,y,o,l,u,c]=m(this,$t).subarray(0,6),m(this,Nl).push(((x+5*o)/6-n)/s,((y+5*l)/6-i)/a,((5*o+u)/6-n)/s,((5*l+c)/6-i)/a,((o+u)/2-n)/s,((l+c)/2-i)/a),[u,c,o,l,x,y]=m(this,$t).subarray(12,18),m(this,Ro).push(((x+5*o)/6-n)/s,((y+5*l)/6-i)/a,((5*o+u)/6-n)/s,((5*l+c)/6-i)/a,((o+u)/2-n)/s,((l+c)/2-i)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=m(this,Nl),t=m(this,Ro);if(isNaN(m(this,$t)[6])&&!this.isEmpty())return H(this,qn,GG).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);H(this,qn,KG).call(this,n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return H(this,qn,WG).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,i,s,a){return new JG(e,t,n,i,s,a)}getOutlines(){var h;const e=m(this,Nl),t=m(this,Ro),n=m(this,$t),[i,s,a,o]=m(this,ua),l=new Float32Array((((h=m(this,kh))==null?void 0:h.length)??0)+2);for(let d=0,f=l.length-2;d<f;d+=2)l[d]=(m(this,kh)[d]-i)/a,l[d+1]=(m(this,kh)[d+1]-s)/o;if(l[l.length-2]=(m(this,_m)-i)/a,l[l.length-1]=(m(this,Am)-s)/o,isNaN(n[6])&&!this.isEmpty())return H(this,qn,XG).call(this,l);const u=new Float32Array(m(this,Nl).length+24+m(this,Ro).length);let c=e.length;for(let d=0;d<c;d+=2){if(isNaN(e[d])){u[d]=u[d+1]=NaN;continue}u[d]=e[d],u[d+1]=e[d+1]}c=H(this,qn,QG).call(this,u,c);for(let d=t.length-6;d>=6;d-=6)for(let f=0;f<6;f+=2){if(isNaN(t[d+f])){u[c]=u[c+1]=NaN,c+=2;continue}u[c]=t[d+f],u[c+1]=t[d+f+1],c+=2}return H(this,qn,YG).call(this,u,c),this.newFreeDrawOutline(u,l,m(this,ua),m(this,Kv),m(this,Gv),m(this,Wv))}};ua=new WeakMap,Ro=new WeakMap,Gv=new WeakMap,Wv=new WeakMap,Nl=new WeakMap,$t=new WeakMap,_m=new WeakMap,Am=new WeakMap,ux=new WeakMap,cx=new WeakMap,Kv=new WeakMap,Xv=new WeakMap,kh=new WeakMap,hx=new WeakMap,zT=new WeakMap,jT=new WeakMap,qn=new WeakSet,pb=function(){const e=m(this,$t).subarray(4,6),t=m(this,$t).subarray(16,18),[n,i,s,a]=m(this,ua);return[(m(this,_m)+(e[0]-t[0])/2-n)/s,(m(this,Am)+(e[1]-t[1])/2-i)/a,(m(this,_m)+(t[0]-e[0])/2-n)/s,(m(this,Am)+(t[1]-e[1])/2-i)/a]},GG=function(){const[e,t,n,i]=m(this,ua),[s,a,o,l]=H(this,qn,pb).call(this);return`M${(m(this,$t)[2]-e)/n} ${(m(this,$t)[3]-t)/i} L${(m(this,$t)[4]-e)/n} ${(m(this,$t)[5]-t)/i} L${s} ${a} L${o} ${l} L${(m(this,$t)[16]-e)/n} ${(m(this,$t)[17]-t)/i} L${(m(this,$t)[14]-e)/n} ${(m(this,$t)[15]-t)/i} Z`},WG=function(e){const t=m(this,Ro);e.push(`L${t[4]} ${t[5]} Z`)},KG=function(e){const[t,n,i,s]=m(this,ua),a=m(this,$t).subarray(4,6),o=m(this,$t).subarray(16,18),[l,u,c,h]=H(this,qn,pb).call(this);e.push(`L${(a[0]-t)/i} ${(a[1]-n)/s} L${l} ${u} L${c} ${h} L${(o[0]-t)/i} ${(o[1]-n)/s}`)},XG=function(e){const t=m(this,$t),[n,i,s,a]=m(this,ua),[o,l,u,c]=H(this,qn,pb).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-n)/s,(t[3]-i)/a,NaN,NaN,NaN,NaN,(t[4]-n)/s,(t[5]-i)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,u,c,NaN,NaN,NaN,NaN,(t[16]-n)/s,(t[17]-i)/a,NaN,NaN,NaN,NaN,(t[14]-n)/s,(t[15]-i)/a],0),this.newFreeDrawOutline(h,e,m(this,ua),m(this,Kv),m(this,Gv),m(this,Wv))},YG=function(e,t){const n=m(this,Ro);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},QG=function(e,t){const n=m(this,$t).subarray(4,6),i=m(this,$t).subarray(16,18),[s,a,o,l]=m(this,ua),[u,c,h,d]=H(this,qn,pb).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-s)/o,(n[1]-a)/l,NaN,NaN,NaN,NaN,u,c,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,(i[0]-s)/o,(i[1]-a)/l],t),t+=24},U(fu,hx,8),U(fu,zT,2),U(fu,jT,m(fu,hx)+m(fu,zT));let jS=fu;var Yv,Em,zu,dx,ca,fx,yn,qT,ZG;class JG extends Ye{constructor(t,n,i,s,a,o){super();U(this,qT);U(this,Yv);U(this,Em,new Float32Array(4));U(this,zu);U(this,dx);U(this,ca);U(this,fx);U(this,yn);k(this,yn,t),k(this,ca,n),k(this,Yv,i),k(this,fx,s),k(this,zu,a),k(this,dx,o),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],H(this,qT,ZG).call(this,o);const[l,u,c,h]=m(this,Em);for(let d=0,f=t.length;d<f;d+=2)t[d]=(t[d]-l)/c,t[d+1]=(t[d+1]-u)/h;for(let d=0,f=n.length;d<f;d+=2)n[d]=(n[d]-l)/c,n[d+1]=(n[d+1]-u)/h}toSVGPath(){const t=[`M${m(this,yn)[4]} ${m(this,yn)[5]}`];for(let n=6,i=m(this,yn).length;n<i;n+=6){if(isNaN(m(this,yn)[n])){t.push(`L${m(this,yn)[n+4]} ${m(this,yn)[n+5]}`);continue}t.push(`C${m(this,yn)[n]} ${m(this,yn)[n+1]} ${m(this,yn)[n+2]} ${m(this,yn)[n+3]} ${m(this,yn)[n+4]} ${m(this,yn)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,i,s],a){const o=i-t,l=s-n;let u,c;switch(a){case 0:u=Ye._rescale(m(this,yn),t,s,o,-l),c=Ye._rescale(m(this,ca),t,s,o,-l);break;case 90:u=Ye._rescaleAndSwap(m(this,yn),t,n,o,l),c=Ye._rescaleAndSwap(m(this,ca),t,n,o,l);break;case 180:u=Ye._rescale(m(this,yn),i,n,-o,l),c=Ye._rescale(m(this,ca),i,n,-o,l);break;case 270:u=Ye._rescaleAndSwap(m(this,yn),i,s,-o,-l),c=Ye._rescaleAndSwap(m(this,ca),i,s,-o,-l);break}return{outline:Array.from(u),points:[Array.from(c)]}}get box(){return m(this,Em)}newOutliner(t,n,i,s,a,o=0){return new jS(t,n,i,s,a,o)}getNewOutline(t,n){const[i,s,a,o]=m(this,Em),[l,u,c,h]=m(this,Yv),d=a*c,f=o*h,p=i*c+l,g=s*h+u,b=this.newOutliner({x:m(this,ca)[0]*d+p,y:m(this,ca)[1]*f+g},m(this,Yv),m(this,fx),t,m(this,dx),n??m(this,zu));for(let v=2;v<m(this,ca).length;v+=2)b.add({x:m(this,ca)[v]*d+p,y:m(this,ca)[v+1]*f+g});return b.getOutlines()}}Yv=new WeakMap,Em=new WeakMap,zu=new WeakMap,dx=new WeakMap,ca=new WeakMap,fx=new WeakMap,yn=new WeakMap,qT=new WeakSet,ZG=function(t){const n=m(this,yn);let i=n[4],s=n[5];const a=[i,s,i,s];let o=i,l=s,u=i,c=s;const h=t?Math.max:Math.min,d=new Float32Array(4);for(let p=6,g=n.length;p<g;p+=6){const b=n[p+4],v=n[p+5];isNaN(n[p])?(Ze.pointBoundingBox(b,v,a),l>v?(o=b,l=v):l===v&&(o=h(o,b)),c<v?(u=b,c=v):c===v&&(u=h(u,b))):(d[0]=d[1]=1/0,d[2]=d[3]=-1/0,Ze.bezierBoundingBox(i,s,...n.slice(p,p+6),d),Ze.rectBoundingBox(d[0],d[1],d[2],d[3],a),l>d[1]?(o=d[0],l=d[1]):l===d[1]&&(o=h(o,d[0])),c<d[3]?(u=d[2],c=d[3]):c===d[3]&&(u=h(u,d[2]))),i=b,s=v}const f=m(this,Em);f[0]=a[0]-m(this,zu),f[1]=a[1]-m(this,zu),f[2]=a[2]-a[0]+2*m(this,zu),f[3]=a[3]-a[1]+2*m(this,zu),this.firstPoint=[o,l],this.lastPoint=[u,c]};var mx,px,gx,Fh,ko,_s,eW,TE,tW,rW,qI;class jI{constructor(e,t=0,n=0,i=!0){U(this,_s);U(this,mx);U(this,px);U(this,gx);U(this,Fh,[]);U(this,ko,[]);const s=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:g,y:b,width:v,height:x}of e){const y=Math.floor((g-t)/a)*a,E=Math.ceil((g+v+t)/a)*a,w=Math.floor((b-t)/a)*a,A=Math.ceil((b+x+t)/a)*a,T=[y,w,A,!0],S=[E,w,A,!1];m(this,Fh).push(T,S),Ze.rectBoundingBox(y,w,E,A,s)}const o=s[2]-s[0]+2*n,l=s[3]-s[1]+2*n,u=s[0]-n,c=s[1]-n;let h=i?-1/0:1/0,d=1/0;const f=m(this,Fh).at(i?-1:-2),p=[f[0],f[2]];for(const g of m(this,Fh)){const[b,v,x,y]=g;!y&&i?v<d?(d=v,h=b):v===d&&(h=Math.max(h,b)):y&&!i&&(v<d?(d=v,h=b):v===d&&(h=Math.min(h,b))),g[0]=(b-u)/o,g[1]=(v-c)/l,g[2]=(x-c)/l}k(this,mx,new Float32Array([u,c,o,l])),k(this,px,[h,d]),k(this,gx,p)}getOutlines(){m(this,Fh).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of m(this,Fh))t[3]?(e.push(...H(this,_s,qI).call(this,t)),H(this,_s,tW).call(this,t)):(H(this,_s,rW).call(this,t),e.push(...H(this,_s,qI).call(this,t)));return H(this,_s,eW).call(this,e)}}mx=new WeakMap,px=new WeakMap,gx=new WeakMap,Fh=new WeakMap,ko=new WeakMap,_s=new WeakSet,eW=function(e){const t=[],n=new Set;for(const a of e){const[o,l,u]=a;t.push([o,l,a],[o,u,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const l=t[a][2],u=t[a+1][2];l.push(u),u.push(l),n.add(l),n.add(u)}const i=[];let s;for(;n.size>0;){const a=n.values().next().value;let[o,l,u,c,h]=a;n.delete(a);let d=o,f=l;for(s=[o,u],i.push(s);;){let p;if(n.has(c))p=c;else if(n.has(h))p=h;else break;n.delete(p),[o,l,u,c,h]=p,d!==o&&(s.push(d,f,o,f===l?l:u),d=o),f=f===l?u:l}s.push(d,f)}return new zde(i,m(this,mx),m(this,px),m(this,gx))},TE=function(e){const t=m(this,ko);let n=0,i=t.length-1;for(;n<=i;){const s=n+i>>1,a=t[s][0];if(a===e)return s;a<e?n=s+1:i=s-1}return i+1},tW=function([,e,t]){const n=H(this,_s,TE).call(this,e);m(this,ko).splice(n,0,[e,t])},rW=function([,e,t]){const n=H(this,_s,TE).call(this,e);for(let i=n;i<m(this,ko).length;i++){const[s,a]=m(this,ko)[i];if(s!==e)break;if(s===e&&a===t){m(this,ko).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[s,a]=m(this,ko)[i];if(s!==e)break;if(s===e&&a===t){m(this,ko).splice(i,1);return}}},qI=function(e){const[t,n,i]=e,s=[[t,n,i]],a=H(this,_s,TE).call(this,i);for(let o=0;o<a;o++){const[l,u]=m(this,ko)[o];for(let c=0,h=s.length;c<h;c++){const[,d,f]=s[c];if(!(u<=d||f<=l)){if(d>=l){if(f>u)s[c][1]=u;else{if(h===1)return[];s.splice(c,1),c--,h--}continue}s[c][2]=l,f>u&&s.push([t,u,f])}}}return s};var vx,Qv;class zde extends Ye{constructor(t,n,i,s){super();U(this,vx);U(this,Qv);k(this,Qv,t),k(this,vx,n),this.firstPoint=i,this.lastPoint=s}toSVGPath(){const t=[];for(const n of m(this,Qv)){let[i,s]=n;t.push(`M${i} ${s}`);for(let a=2;a<n.length;a+=2){const o=n[a],l=n[a+1];o===i?(t.push(`V${l}`),s=l):l===s&&(t.push(`H${o}`),i=o)}t.push("Z")}return t.join(" ")}serialize([t,n,i,s],a){const o=[],l=i-t,u=s-n;for(const c of m(this,Qv)){const h=new Array(c.length);for(let d=0;d<c.length;d+=2)h[d]=t+c[d]*l,h[d+1]=s-c[d+1]*u;o.push(h)}return o}get box(){return m(this,vx)}get classNamesForOutlining(){return["highlightOutline"]}}vx=new WeakMap,Qv=new WeakMap;class HI extends jS{newFreeDrawOutline(e,t,n,i,s,a){return new jde(e,t,n,i,s,a)}}class jde extends JG{newOutliner(e,t,n,i,s,a=0){return new HI(e,t,n,i,s,a)}}var Jv,yx,ju,Sm,bx,ks,wx,xx,Tm,ha,da,bi,Zv,e0,Wi,t0,Ya,_x,kt,GI,CE,nW,iW,sW,WI,hf,no,Jp,aW,NE,DE,oW,lW,uW,cW,hW;const ir=class ir extends Fr{constructor(t){super({...t,name:"highlightEditor"});U(this,kt);U(this,Jv,null);U(this,yx,0);U(this,ju);U(this,Sm,null);U(this,bx,null);U(this,ks,null);U(this,wx,null);U(this,xx,0);U(this,Tm,null);U(this,ha,null);U(this,da,null);U(this,bi,!1);U(this,Zv,null);U(this,e0,null);U(this,Wi,null);U(this,t0,"");U(this,Ya);U(this,_x,"");this.color=t.color||ir._defaultColor,k(this,Ya,t.thickness||ir._defaultThickness),this.opacity=t.opacity||ir._defaultOpacity,k(this,ju,t.boxes||null),k(this,_x,t.methodOfCreation||""),k(this,t0,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(k(this,bi,!0),H(this,kt,CE).call(this,t),H(this,kt,hf).call(this)):m(this,ju)&&(k(this,Jv,t.anchorNode),k(this,yx,t.anchorOffset),k(this,wx,t.focusNode),k(this,xx,t.focusOffset),H(this,kt,GI).call(this),H(this,kt,hf).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=ir.prototype;return Et(this,"_keyboardManager",new Xx([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:m(this,bi)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:m(this,Ya),methodOfCreation:m(this,_x)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var i;Fr.initialize(t,n),ir._defaultColor||(ir._defaultColor=((i=n.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case Kt.HIGHLIGHT_COLOR:ir._defaultColor=n;break;case Kt.HIGHLIGHT_THICKNESS:ir._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return m(this,e0)}get commentButtonPosition(){return m(this,Zv)}updateParams(t,n){switch(t){case Kt.HIGHLIGHT_COLOR:H(this,kt,nW).call(this,n);break;case Kt.HIGHLIGHT_THICKNESS:H(this,kt,iW).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Kt.HIGHLIGHT_COLOR,ir._defaultColor],[Kt.HIGHLIGHT_THICKNESS,ir._defaultThickness]]}get propertiesToUpdate(){return[[Kt.HIGHLIGHT_COLOR,this.color||ir._defaultColor],[Kt.HIGHLIGHT_THICKNESS,m(this,Ya)||ir._defaultThickness],[Kt.HIGHLIGHT_FREE,m(this,bi)]]}onUpdatedColor(){var t,n;(t=this.parent)==null||t.drawLayer.updateProperties(m(this,da),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=m(this,bx))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",k(this,bx,new VS({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(H(this,kt,DE).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,H(this,kt,DE).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){H(this,kt,WI).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(H(this,kt,hf).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let n=!1;this.parent&&!t?H(this,kt,WI).call(this):t&&(H(this,kt,hf).call(this,t),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var s,a,o;const{drawLayer:n}=this.parent;let i;m(this,bi)?(t=(t-this.rotation+360)%360,i=H(s=ir,no,Jp).call(s,m(this,ha).box,t)):i=H(a=ir,no,Jp).call(a,[this.x,this.y,this.width,this.height],t),n.updateProperties(m(this,da),{bbox:i,root:{"data-main-rotation":t}}),n.updateProperties(m(this,Wi),{bbox:H(o=ir,no,Jp).call(o,m(this,ks).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();m(this,t0)&&(t.setAttribute("aria-label",m(this,t0)),t.setAttribute("role","mark")),m(this,bi)?t.classList.add("free"):this.div.addEventListener("keydown",H(this,kt,aW).bind(this),{signal:this._uiManager._signal});const n=k(this,Tm,document.createElement("div"));return t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=m(this,Sm),this.setDims(),MH(this,m(this,Tm),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(m(this,Wi),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(m(this,Wi),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:H(this,kt,NE).call(this,!0);break;case 1:case 3:H(this,kt,NE).call(this,!1);break}}select(){var t;super.select(),m(this,Wi)&&((t=this.parent)==null||t.drawLayer.updateProperties(m(this,Wi),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),m(this,Wi)&&((t=this.parent)==null||t.drawLayer.updateProperties(m(this,Wi),{rootClass:{selected:!1}}),m(this,bi)||H(this,kt,NE).call(this,!1))}get _mustFixPosition(){return!m(this,bi)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(m(this,da),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(m(this,Wi),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:i,x:s,y:a}){const{x:o,y:l,width:u,height:c}=i.getBoundingClientRect(),h=new AbortController,d=t.combinedSignal(h),f=p=>{h.abort(),H(this,no,cW).call(this,t,p)};window.addEventListener("blur",f,{signal:d}),window.addEventListener("pointerup",f,{signal:d}),window.addEventListener("pointerdown",dn,{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",mo,{signal:d}),i.addEventListener("pointermove",H(this,no,uW).bind(this,t),{signal:d}),this._freeHighlight=new HI({x:s,y:a},[o,l,u,c],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,i){var g,b,v,x;let s=null;if(t instanceof $G){const{data:{quadPoints:y,rect:E,rotation:w,id:A,color:T,opacity:S,popupRef:N,richText:D,contentsObj:_,creationDate:M,modificationDate:I},parent:{page:{pageNumber:V}}}=t;s=t={annotationType:Dt.HIGHLIGHT,color:Array.from(T),opacity:S,quadPoints:y,boxes:null,pageIndex:V-1,rect:E.slice(0),rotation:w,annotationElementId:A,id:A,deleted:!1,popupRef:N,richText:D,comment:(_==null?void 0:_.str)||null,creationDate:M,modificationDate:I}}else if(t instanceof gF){const{data:{inkLists:y,rect:E,rotation:w,id:A,color:T,borderStyle:{rawWidth:S},popupRef:N,richText:D,contentsObj:_,creationDate:M,modificationDate:I},parent:{page:{pageNumber:V}}}=t;s=t={annotationType:Dt.HIGHLIGHT,color:Array.from(T),thickness:S,inkLists:y,boxes:null,pageIndex:V-1,rect:E.slice(0),rotation:w,annotationElementId:A,id:A,deleted:!1,popupRef:N,richText:D,comment:(_==null?void 0:_.str)||null,creationDate:M,modificationDate:I}}const{color:a,quadPoints:o,inkLists:l,opacity:u}=t,c=await super.deserialize(t,n,i);c.color=Ze.makeHexColor(...a),c.opacity=u||1,l&&k(c,Ya,t.thickness),c._initialData=s,t.comment&&c.setCommentData(t);const[h,d]=c.pageDimensions,[f,p]=c.pageTranslation;if(o){const y=k(c,ju,[]);for(let E=0;E<o.length;E+=8)y.push({x:(o[E]-f)/h,y:1-(o[E+1]-p)/d,width:(o[E+2]-o[E])/h,height:(o[E+1]-o[E+5])/d});H(g=c,kt,GI).call(g),H(b=c,kt,hf).call(b),c.rotate(c.rotation)}else if(l){k(c,bi,!0);const y=l[0],E={x:y[0]-f,y:d-(y[1]-p)},w=new HI(E,[0,0,h,d],1,m(c,Ya)/2,!0,.001);for(let S=0,N=y.length;S<N;S+=2)E.x=y[S]-f,E.y=d-(y[S+1]-p),w.add(E);const{id:A,clipPathId:T}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:c.color,"fill-opacity":c._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:w.toSVGPath()}},!0,!0);H(v=c,kt,CE).call(v,{highlightOutlines:w.getOutlines(),highlightId:A,clipPathId:T}),H(x=c,kt,hf).call(x),c.rotate(c.parentRotation)}return c}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=Fr._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:n,opacity:this.opacity,thickness:m(this,Ya),quadPoints:H(this,kt,oW).call(this),outlines:H(this,kt,lW).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!H(this,kt,hW).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Jv=new WeakMap,yx=new WeakMap,ju=new WeakMap,Sm=new WeakMap,bx=new WeakMap,ks=new WeakMap,wx=new WeakMap,xx=new WeakMap,Tm=new WeakMap,ha=new WeakMap,da=new WeakMap,bi=new WeakMap,Zv=new WeakMap,e0=new WeakMap,Wi=new WeakMap,t0=new WeakMap,Ya=new WeakMap,_x=new WeakMap,kt=new WeakSet,GI=function(){const t=new jI(m(this,ju),.001);k(this,ha,t.getOutlines()),[this.x,this.y,this.width,this.height]=m(this,ha).box;const n=new jI(m(this,ju),.0025,.001,this._uiManager.direction==="ltr");k(this,ks,n.getOutlines());const{firstPoint:i}=m(this,ha);k(this,Zv,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);const{lastPoint:s}=m(this,ks);k(this,e0,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},CE=function({highlightOutlines:t,highlightId:n,clipPathId:i}){var d,f;if(k(this,ha,t),k(this,ks,t.getNewOutline(m(this,Ya)/2+1.5,.0025)),n>=0)k(this,da,n),k(this,Sm,i),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),k(this,Wi,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:m(this,ks).box,path:{d:m(this,ks).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(m(this,da),{bbox:H(d=ir,no,Jp).call(d,m(this,ha).box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(m(this,Wi),{bbox:H(f=ir,no,Jp).call(f,m(this,ks).box,p),path:{d:m(this,ks).toSVGPath()}})}const[a,o,l,u]=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=l,this.height=u;break;case 90:{const[p,g]=this.parentDimensions;this.x=o,this.y=1-a,this.width=l*g/p,this.height=u*p/g;break}case 180:this.x=1-a,this.y=1-o,this.width=l,this.height=u;break;case 270:{const[p,g]=this.parentDimensions;this.x=1-o,this.y=a,this.width=l*g/p,this.height=u*p/g;break}}const{firstPoint:c}=t;k(this,Zv,[(c[0]-a)/l,(c[1]-o)/u]);const{lastPoint:h}=m(this,ks);k(this,e0,[(h[0]-a)/l,(h[1]-o)/u])},nW=function(t){const n=(a,o)=>{this.color=a,this.opacity=o,this.onUpdatedColor()},i=this.color,s=this.opacity;this.addCommands({cmd:n.bind(this,t,ir._defaultOpacity),undo:n.bind(this,i,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Kt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},iW=function(t){const n=m(this,Ya),i=s=>{k(this,Ya,s),H(this,kt,sW).call(this,s)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Kt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},sW=function(t){m(this,bi)&&(H(this,kt,CE).call(this,{highlightOutlines:m(this,ha).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())},WI=function(){m(this,da)===null||!this.parent||(this.parent.drawLayer.remove(m(this,da)),k(this,da,null),this.parent.drawLayer.remove(m(this,Wi)),k(this,Wi,null))},hf=function(t=this.parent){m(this,da)===null&&({id:On(this,da)._,clipPathId:On(this,Sm)._}=t.drawLayer.draw({bbox:m(this,ha).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:m(this,bi)},path:{d:m(this,ha).toSVGPath()}},!1,!0),k(this,Wi,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:m(this,bi)},bbox:m(this,ks).box,path:{d:m(this,ks).toSVGPath()}},m(this,bi))),m(this,Tm)&&(m(this,Tm).style.clipPath=m(this,Sm)))},no=new WeakSet,Jp=function([t,n,i,s],a){switch(a){case 90:return[1-n-s,t,s,i];case 180:return[1-t-i,1-n-s,i,s];case 270:return[n,1-t-i,s,i]}return[t,n,i,s]},aW=function(t){ir._keyboardManager.exec(this,t)},NE=function(t){if(!m(this,Jv))return;const n=window.getSelection();t?n.setPosition(m(this,Jv),m(this,yx)):n.setPosition(m(this,wx),m(this,xx))},DE=function(){return m(this,bi)?this.rotation:0},oW=function(){if(m(this,bi))return null;const[t,n]=this.pageDimensions,[i,s]=this.pageTranslation,a=m(this,ju),o=new Float32Array(a.length*8);let l=0;for(const{x:u,y:c,width:h,height:d}of a){const f=u*t+i,p=(1-c)*n+s;o[l]=o[l+4]=f,o[l+1]=o[l+3]=p,o[l+2]=o[l+6]=f+h*t,o[l+5]=o[l+7]=p-d*n,l+=8}return o},lW=function(t){return m(this,ha).serialize(t,H(this,kt,DE).call(this))},uW=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},cW=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},hW=function(t){const{color:n}=this._initialData;return this.hasEditedComment||t.color.some((i,s)=>i!==n[s])},U(ir,no),Pe(ir,"_defaultColor",null),Pe(ir,"_defaultOpacity",1),Pe(ir,"_defaultThickness",12),Pe(ir,"_type","highlight"),Pe(ir,"_editorType",Dt.HIGHLIGHT),Pe(ir,"_freeHighlightId",-1),Pe(ir,"_freeHighlight",null),Pe(ir,"_freeHighlightClipId","");let qS=ir;var Cm;class dW{constructor(){U(this,Cm,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){m(this,Cm)[e]=t}toSVGProperties(){const e=m(this,Cm);return k(this,Cm,Object.create(null)),{root:e}}reset(){k(this,Cm,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Dr("Not implemented")}}Cm=new WeakMap;var fa,r0,ni,Nm,Dm,tr,KI,XI,YI,gb,fW,ME,vb,Zp;const jt=class jt extends Fr{constructor(t){super(t);U(this,tr);U(this,fa,null);U(this,r0);Pe(this,"_colorPicker",null);Pe(this,"_drawId",null);k(this,r0,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(H(this,tr,KI).call(this,t),H(this,tr,gb).call(this))}static _mergeSVGProperties(t,n){const i=new Set(Object.keys(t));for(const[s,a]of Object.entries(n))i.has(s)?Object.assign(t[s],a):t[s]=a;return t}static getDefaultDrawingOptions(t){Dr("Not implemented")}static get typesMap(){Dr("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(m(jt,ni).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[i,s]of this.typesMap)t.push([i,n[s]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[i,s]of this.constructor.typesMap)t.push([i,n[s]]);return t}_updateProperty(t,n,i){const s=this._drawingOptions,a=s[n],o=l=>{var c;s.updateProperty(n,l);const u=m(this,fa).updateProperty(n,l);u&&H(this,tr,vb).call(this,u),(c=this.parent)==null||c.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,i),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,jt._mergeSVGProperties(m(this,fa).getPathResizingSVGProperties(H(this,tr,ME).call(this)),{bbox:H(this,tr,Zp).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,jt._mergeSVGProperties(m(this,fa).getPathResizedSVGProperties(H(this,tr,ME).call(this)),{bbox:H(this,tr,Zp).call(this)}))}_onTranslating(t,n){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:H(this,tr,Zp).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,jt._mergeSVGProperties(m(this,fa).getPathTranslatedSVGProperties(H(this,tr,ME).call(this),this.parentDimensions),{bbox:H(this,tr,Zp).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,m(this,r0)&&(k(this,r0,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){H(this,tr,YI).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(H(this,tr,gb).call(this),H(this,tr,vb).call(this,m(this,fa).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),H(this,tr,YI).call(this)):t&&(this._uiManager.addShouldRescale(this),H(this,tr,gb).call(this,t),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,jt._mergeSVGProperties({bbox:H(this,tr,Zp).call(this)},m(this,fa).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&H(this,tr,vb).call(this,m(this,fa).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const i=super.render();i.classList.add("draw");const s=document.createElement("div");return i.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),i}static createDrawerInstance(t,n,i,s,a){Dr("Not implemented")}static startDrawing(t,n,i,s){var b;const{target:a,offsetX:o,offsetY:l,pointerId:u,pointerType:c}=s;if(zi.isInitializedAndDifferentPointerType(c))return;const{viewport:{rotation:h}}=t,{width:d,height:f}=a.getBoundingClientRect(),p=k(jt,Nm,new AbortController),g=t.combinedSignal(p);if(zi.setPointer(c,u),window.addEventListener("pointerup",v=>{zi.isSamePointerIdOrRemove(v.pointerId)&&this._endDraw(v)},{signal:g}),window.addEventListener("pointercancel",v=>{zi.isSamePointerIdOrRemove(v.pointerId)&&this._currentParent.endDrawingSession()},{signal:g}),window.addEventListener("pointerdown",v=>{zi.isSamePointerType(v.pointerType)&&(zi.initializeAndAddPointerId(v.pointerId),m(jt,ni).isCancellable()&&(m(jt,ni).removeLastElement(),m(jt,ni).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",mo,{signal:g}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),a.addEventListener("touchmove",v=>{zi.isSameTimeStamp(v.timeStamp)&&dn(v)},{signal:g}),t.toggleDrawing(),(b=n._editorUndoBar)==null||b.hide(),m(jt,ni)){t.drawLayer.updateProperties(this._currentDrawId,m(jt,ni).startNew(o,l,d,f,h));return}n.updateUIForDefaultProperties(this),k(jt,ni,this.createDrawerInstance(o,l,d,f,h)),k(jt,Dm,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(m(jt,Dm).toSVGProperties(),m(jt,ni).defaultSVGProperties),!0,!1)}static _drawMove(t){if(zi.isSameTimeStamp(t.timeStamp),!m(jt,ni))return;const{offsetX:n,offsetY:i,pointerId:s}=t;if(zi.isSamePointerId(s)){if(zi.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,m(jt,ni).add(n,i)),zi.setTimeStamp(t.timeStamp),dn(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,k(jt,ni,null),k(jt,Dm,null),zi.clearPointerType(),zi.clearTimeStamp()),m(jt,Nm)&&(m(jt,Nm).abort(),k(jt,Nm,null),zi.clearPointerIds())}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,m(jt,ni).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=m(jt,ni),s=this._currentDrawId,a=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(s,i.setLastElement(a))},undo:()=>{n.drawLayer.updateProperties(s,i.removeLastElement())},mustExec:!1,type:Kt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Kt.DRAW_STEP),!m(jt,ni).isEmpty()){const{pageDimensions:[i,s],scale:a}=n,o=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:m(jt,ni).getOutlines(i*a,s*a,a,this._INNER_MARGIN),drawingOptions:m(jt,Dm),mustBeCommitted:!t});return this._cleanup(!0),o}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,i,s,a,o){Dr("Not implemented")}static async deserialize(t,n,i){var h,d;const{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}=n.viewport,u=this.deserializeDraw(o,l,s,a,this._INNER_MARGIN,t),c=await super.deserialize(t,n,i);return c.createDrawingOptions(t),H(h=c,tr,KI).call(h,{drawOutlines:u}),H(d=c,tr,gb).call(d),c.onScaleChanging(),c.rotate(),c}serializeDraw(t){const[n,i]=this.pageTranslation,[s,a]=this.pageDimensions;return m(this,fa).serialize([n,i,s,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};fa=new WeakMap,r0=new WeakMap,ni=new WeakMap,Nm=new WeakMap,Dm=new WeakMap,tr=new WeakSet,KI=function({drawOutlines:t,drawId:n,drawingOptions:i}){k(this,fa,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=H(this,tr,XI).call(this,t,this.parent),H(this,tr,vb).call(this,t.box)},XI=function(t,n){const{id:i}=n.drawLayer.draw(jt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},YI=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},gb=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=H(this,tr,XI).call(this,m(this,fa),t)}},fW=function([t,n,i,s]){const{parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[n,1-t,i*(o/a),s*(a/o)];case 180:return[1-t,1-n,i,s];case 270:return[1-n,t,i*(o/a),s*(a/o)];default:return[t,n,i,s]}},ME=function(){const{x:t,y:n,width:i,height:s,parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[1-n,t,i*(a/o),s*(o/a)];case 180:return[1-t,1-n,i,s];case 270:return[n,1-t,i*(a/o),s*(o/a)];default:return[t,n,i,s]}},vb=function(t){[this.x,this.y,this.width,this.height]=H(this,tr,fW).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Zp=function(){const{x:t,y:n,width:i,height:s,rotation:a,parentRotation:o,parentDimensions:[l,u]}=this;switch((a*4+o)/90){case 1:return[1-n-s,t,s,i];case 2:return[1-t-i,1-n-s,i,s];case 3:return[n,1-t-i,s,i];case 4:return[t,n-i*(l/u),s*(u/l),i*(l/u)];case 5:return[1-n,t,i*(l/u),s*(u/l)];case 6:return[1-t-s*(u/l),1-n,s*(u/l),i*(l/u)];case 7:return[n-i*(l/u),1-t-s*(u/l),i*(l/u),s*(u/l)];case 8:return[t-i,n-s,i,s];case 9:return[1-n,t-i,s,i];case 10:return[1-t,1-n,i,s];case 11:return[n-s,1-t,s,i];case 12:return[t-s*(u/l),n,s*(u/l),i*(l/u)];case 13:return[1-n-i*(l/u),t-s*(u/l),i*(l/u),s*(u/l)];case 14:return[1-t,1-n-i*(l/u),s*(u/l),i*(l/u)];case 15:return[n,1-t,i*(l/u),s*(u/l)];default:return[t,n,i,s]}},Pe(jt,"_currentDrawId",-1),Pe(jt,"_currentParent",null),U(jt,ni,null),U(jt,Nm,null),U(jt,Dm,null),Pe(jt,"_INNER_MARGIN",3);let HS=jt;var Dl,ii,si,Mm,n0,us,wi,Qa,Im,Pm,Rm,i0,IE;class qde{constructor(e,t,n,i,s,a){U(this,i0);U(this,Dl,new Float64Array(6));U(this,ii);U(this,si);U(this,Mm);U(this,n0);U(this,us);U(this,wi,"");U(this,Qa,0);U(this,Im,new Qx);U(this,Pm);U(this,Rm);k(this,Pm,n),k(this,Rm,i),k(this,Mm,s),k(this,n0,a),[e,t]=H(this,i0,IE).call(this,e,t);const o=k(this,ii,[NaN,NaN,NaN,NaN,e,t]);k(this,us,[e,t]),k(this,si,[{line:o,points:m(this,us)}]),m(this,Dl).set(o,0)}updateProperty(e,t){e==="stroke-width"&&k(this,n0,t)}isEmpty(){return!m(this,si)||m(this,si).length===0}isCancellable(){return m(this,us).length<=10}add(e,t){[e,t]=H(this,i0,IE).call(this,e,t);const[n,i,s,a]=m(this,Dl).subarray(2,6),o=e-s,l=t-a;return Math.hypot(m(this,Pm)*o,m(this,Rm)*l)<=2?null:(m(this,us).push(e,t),isNaN(n)?(m(this,Dl).set([s,a,e,t],2),m(this,ii).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(m(this,Dl)[0])&&m(this,ii).splice(6,6),m(this,Dl).set([n,i,s,a,e,t],0),m(this,ii).push(...Ye.createBezierPoints(n,i,s,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(m(this,us).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,s){k(this,Pm,n),k(this,Rm,i),k(this,Mm,s),[e,t]=H(this,i0,IE).call(this,e,t);const a=k(this,ii,[NaN,NaN,NaN,NaN,e,t]);k(this,us,[e,t]);const o=m(this,si).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),m(this,si).push({line:a,points:m(this,us)}),m(this,Dl).set(a,0),k(this,Qa,0),this.toSVGPath(),null}getLastElement(){return m(this,si).at(-1)}setLastElement(e){return m(this,si)?(m(this,si).push(e),k(this,ii,e.line),k(this,us,e.points),k(this,Qa,0),{path:{d:this.toSVGPath()}}):m(this,Im).setLastElement(e)}removeLastElement(){if(!m(this,si))return m(this,Im).removeLastElement();m(this,si).pop(),k(this,wi,"");for(let e=0,t=m(this,si).length;e<t;e++){const{line:n,points:i}=m(this,si)[e];k(this,ii,n),k(this,us,i),k(this,Qa,0),this.toSVGPath()}return{path:{d:m(this,wi)}}}toSVGPath(){const e=Ye.svgRound(m(this,ii)[4]),t=Ye.svgRound(m(this,ii)[5]);if(m(this,us).length===2)return k(this,wi,`${m(this,wi)} M ${e} ${t} Z`),m(this,wi);if(m(this,us).length<=6){const i=m(this,wi).lastIndexOf("M");k(this,wi,`${m(this,wi).slice(0,i)} M ${e} ${t}`),k(this,Qa,6)}if(m(this,us).length===4){const i=Ye.svgRound(m(this,ii)[10]),s=Ye.svgRound(m(this,ii)[11]);return k(this,wi,`${m(this,wi)} L ${i} ${s}`),k(this,Qa,12),m(this,wi)}const n=[];m(this,Qa)===0&&(n.push(`M ${e} ${t}`),k(this,Qa,6));for(let i=m(this,Qa),s=m(this,ii).length;i<s;i+=6){const[a,o,l,u,c,h]=m(this,ii).slice(i,i+6).map(Ye.svgRound);n.push(`C${a} ${o} ${l} ${u} ${c} ${h}`)}return k(this,wi,m(this,wi)+n.join(" ")),k(this,Qa,m(this,ii).length),m(this,wi)}getOutlines(e,t,n,i){const s=m(this,si).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),m(this,Im).build(m(this,si),e,t,n,m(this,Mm),m(this,n0),i),k(this,Dl,null),k(this,ii,null),k(this,si,null),k(this,wi,null),m(this,Im)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Dl=new WeakMap,ii=new WeakMap,si=new WeakMap,Mm=new WeakMap,n0=new WeakMap,us=new WeakMap,wi=new WeakMap,Qa=new WeakMap,Im=new WeakMap,Pm=new WeakMap,Rm=new WeakMap,i0=new WeakSet,IE=function(e,t){return Ye._normalizePoint(e,t,m(this,Pm),m(this,Rm),m(this,Mm))};var cs,Ax,Ex,ma,Ml,Il,s0,a0,km,Si,cu,mW,pW,gW;class Qx extends Ye{constructor(){super(...arguments);U(this,Si);U(this,cs);U(this,Ax,0);U(this,Ex);U(this,ma);U(this,Ml);U(this,Il);U(this,s0);U(this,a0);U(this,km)}build(t,n,i,s,a,o,l){k(this,Ml,n),k(this,Il,i),k(this,s0,s),k(this,a0,a),k(this,km,o),k(this,Ex,l??0),k(this,ma,t),H(this,Si,pW).call(this)}get thickness(){return m(this,km)}setLastElement(t){return m(this,ma).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return m(this,ma).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of m(this,ma)){if(t.push(`M${Ye.svgRound(n[4])} ${Ye.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${Ye.svgRound(n[10])} ${Ye.svgRound(n[11])}`);continue}for(let i=6,s=n.length;i<s;i+=6){const[a,o,l,u,c,h]=n.subarray(i,i+6).map(Ye.svgRound);t.push(`C${a} ${o} ${l} ${u} ${c} ${h}`)}}return t.join("")}serialize([t,n,i,s],a){const o=[],l=[],[u,c,h,d]=H(this,Si,mW).call(this);let f,p,g,b,v,x,y,E,w;switch(m(this,a0)){case 0:w=Ye._rescale,f=t,p=n+s,g=i,b=-s,v=t+u*i,x=n+(1-c-d)*s,y=t+(u+h)*i,E=n+(1-c)*s;break;case 90:w=Ye._rescaleAndSwap,f=t,p=n,g=i,b=s,v=t+c*i,x=n+u*s,y=t+(c+d)*i,E=n+(u+h)*s;break;case 180:w=Ye._rescale,f=t+i,p=n,g=-i,b=s,v=t+(1-u-h)*i,x=n+c*s,y=t+(1-u)*i,E=n+(c+d)*s;break;case 270:w=Ye._rescaleAndSwap,f=t+i,p=n+s,g=-i,b=-s,v=t+(1-c-d)*i,x=n+(1-u-h)*s,y=t+(1-c)*i,E=n+(1-u)*s;break}for(const{line:A,points:T}of m(this,ma))o.push(w(A,f,p,g,b,a?new Array(A.length):null)),l.push(w(T,f,p,g,b,a?new Array(T.length):null));return{lines:o,points:l,rect:[v,x,y,E]}}static deserialize(t,n,i,s,a,{paths:{lines:o,points:l},rotation:u,thickness:c}){const h=[];let d,f,p,g,b;switch(u){case 0:b=Ye._rescale,d=-t/i,f=n/s+1,p=1/i,g=-1/s;break;case 90:b=Ye._rescaleAndSwap,d=-n/s,f=-t/i,p=1/s,g=1/i;break;case 180:b=Ye._rescale,d=t/i+1,f=-n/s,p=-1/i,g=1/s;break;case 270:b=Ye._rescaleAndSwap,d=n/s+1,f=t/i+1,p=-1/s,g=-1/i;break}if(!o){o=[];for(const x of l){const y=x.length;if(y===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(y===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}const E=new Float32Array(3*(y-2));o.push(E);let[w,A,T,S]=x.subarray(0,4);E.set([NaN,NaN,NaN,NaN,w,A],0);for(let N=4;N<y;N+=2){const D=x[N],_=x[N+1];E.set(Ye.createBezierPoints(w,A,T,S,D,_),(N-2)*3),[w,A,T,S]=[T,S,D,_]}}}for(let x=0,y=o.length;x<y;x++)h.push({line:b(o[x].map(E=>E??NaN),d,f,p,g),points:b(l[x].map(E=>E??NaN),d,f,p,g)});const v=new this.prototype.constructor;return v.build(h,i,s,1,u,c,a),v}get box(){return m(this,cs)}updateProperty(t,n){return t==="stroke-width"?H(this,Si,gW).call(this,n):null}updateParentDimensions([t,n],i){const[s,a]=H(this,Si,cu).call(this);k(this,Ml,t),k(this,Il,n),k(this,s0,i);const[o,l]=H(this,Si,cu).call(this),u=o-s,c=l-a,h=m(this,cs);return h[0]-=u,h[1]-=c,h[2]+=2*u,h[3]+=2*c,h}updateRotation(t){return k(this,Ax,t),{path:{transform:this.rotationTransform}}}get viewBox(){return m(this,cs).map(Ye.svgRound).join(" ")}get defaultProperties(){const[t,n]=m(this,cs);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ye.svgRound(t)} ${Ye.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=m(this,cs);let i=0,s=0,a=0,o=0,l=0,u=0;switch(m(this,Ax)){case 90:s=n/t,a=-t/n,l=t;break;case 180:i=-1,o=-1,l=t,u=n;break;case 270:s=-n/t,a=t/n,u=n;break;default:return""}return`matrix(${i} ${s} ${a} ${o} ${Ye.svgRound(l)} ${Ye.svgRound(u)})`}getPathResizingSVGProperties([t,n,i,s]){const[a,o]=H(this,Si,cu).call(this),[l,u,c,h]=m(this,cs);if(Math.abs(c-a)<=Ye.PRECISION||Math.abs(h-o)<=Ye.PRECISION){const b=t+i/2-(l+c/2),v=n+s/2-(u+h/2);return{path:{"transform-origin":`${Ye.svgRound(t)} ${Ye.svgRound(n)}`,transform:`${this.rotationTransform} translate(${b} ${v})`}}}const d=(i-2*a)/(c-2*a),f=(s-2*o)/(h-2*o),p=c/i,g=h/s;return{path:{"transform-origin":`${Ye.svgRound(l)} ${Ye.svgRound(u)}`,transform:`${this.rotationTransform} scale(${p} ${g}) translate(${Ye.svgRound(a)} ${Ye.svgRound(o)}) scale(${d} ${f}) translate(${Ye.svgRound(-a)} ${Ye.svgRound(-o)})`}}}getPathResizedSVGProperties([t,n,i,s]){const[a,o]=H(this,Si,cu).call(this),l=m(this,cs),[u,c,h,d]=l;if(l[0]=t,l[1]=n,l[2]=i,l[3]=s,Math.abs(h-a)<=Ye.PRECISION||Math.abs(d-o)<=Ye.PRECISION){const v=t+i/2-(u+h/2),x=n+s/2-(c+d/2);for(const{line:y,points:E}of m(this,ma))Ye._translate(y,v,x,y),Ye._translate(E,v,x,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ye.svgRound(t)} ${Ye.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const f=(i-2*a)/(h-2*a),p=(s-2*o)/(d-2*o),g=-f*(u+a)+t+a,b=-p*(c+o)+n+o;if(f!==1||p!==1||g!==0||b!==0)for(const{line:v,points:x}of m(this,ma))Ye._rescale(v,g,b,f,p,v),Ye._rescale(x,g,b,f,p,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ye.svgRound(t)} ${Ye.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],i){const[s,a]=i,o=m(this,cs),l=t-o[0],u=n-o[1];if(m(this,Ml)===s&&m(this,Il)===a)for(const{line:c,points:h}of m(this,ma))Ye._translate(c,l,u,c),Ye._translate(h,l,u,h);else{const c=m(this,Ml)/s,h=m(this,Il)/a;k(this,Ml,s),k(this,Il,a);for(const{line:d,points:f}of m(this,ma))Ye._rescale(d,l,u,c,h,d),Ye._rescale(f,l,u,c,h,f);o[2]*=c,o[3]*=h}return o[0]=t,o[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Ye.svgRound(t)} ${Ye.svgRound(n)}`}}}get defaultSVGProperties(){const t=m(this,cs);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Ye.svgRound(t[0])} ${Ye.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}cs=new WeakMap,Ax=new WeakMap,Ex=new WeakMap,ma=new WeakMap,Ml=new WeakMap,Il=new WeakMap,s0=new WeakMap,a0=new WeakMap,km=new WeakMap,Si=new WeakSet,cu=function(t=m(this,km)){const n=m(this,Ex)+t/2*m(this,s0);return m(this,a0)%180===0?[n/m(this,Ml),n/m(this,Il)]:[n/m(this,Il),n/m(this,Ml)]},mW=function(){const[t,n,i,s]=m(this,cs),[a,o]=H(this,Si,cu).call(this,0);return[t+a,n+o,i-2*a,s-2*o]},pW=function(){const t=k(this,cs,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of m(this,ma)){if(s.length<=12){for(let l=4,u=s.length;l<u;l+=6)Ze.pointBoundingBox(s[l],s[l+1],t);continue}let a=s[4],o=s[5];for(let l=6,u=s.length;l<u;l+=6){const[c,h,d,f,p,g]=s.subarray(l,l+6);Ze.bezierBoundingBox(a,o,c,h,d,f,p,g,t),a=p,o=g}}const[n,i]=H(this,Si,cu).call(this);t[0]=fs(t[0]-n,0,1),t[1]=fs(t[1]-i,0,1),t[2]=fs(t[2]+n,0,1),t[3]=fs(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]},gW=function(t){const[n,i]=H(this,Si,cu).call(this);k(this,km,t);const[s,a]=H(this,Si,cu).call(this),[o,l]=[s-n,a-i],u=m(this,cs);return u[0]-=o,u[1]-=l,u[2]+=2*o,u[3]+=2*l,u};class qC extends dW{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Fr._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new qC(this._viewParameters);return e.updateAll(this),e}}var HT,vW;const Tg=class Tg extends HS{constructor(t){super({...t,name:"inkEditor"});U(this,HT);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){Fr.initialize(t,n),this._defaultDrawingOptions=new qC(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Et(this,"typesMap",new Map([[Kt.INK_THICKNESS,"stroke-width"],[Kt.INK_COLOR,"stroke"],[Kt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,i,s,a){return new qde(t,n,i,s,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,i,s,a,o){return Qx.deserialize(t,n,i,s,a,o)}static async deserialize(t,n,i){let s=null;if(t instanceof gF){const{data:{inkLists:o,rect:l,rotation:u,id:c,color:h,opacity:d,borderStyle:{rawWidth:f},popupRef:p,richText:g,contentsObj:b,creationDate:v,modificationDate:x},parent:{page:{pageNumber:y}}}=t;s=t={annotationType:Dt.INK,color:Array.from(h),thickness:f,opacity:d,paths:{points:o},boxes:null,pageIndex:y-1,rect:l.slice(0),rotation:u,annotationElementId:c,id:c,deleted:!1,popupRef:p,richText:g,comment:(b==null?void 0:b.str)||null,creationDate:v,modificationDate:x}}const a=await super.deserialize(t,n,i);return a._initialData=s,t.comment&&a.setCommentData(t),a}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new US(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Kt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:i}){this._drawingOptions=Tg.getDefaultDrawingOptions({stroke:Ze.makeHexColor(...t),"stroke-width":n,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:s,"stroke-opacity":a,"stroke-width":o}}=this,l=Object.assign(super.serialize(t),{color:Fr._colorManager.convert(s),opacity:a,thickness:o,paths:{lines:n,points:i}});return this.addComment(l),t?(l.isCopy=!0,l):this.annotationElementId&&!H(this,HT,vW).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:n,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};HT=new WeakSet,vW=function(t){const{color:n,thickness:i,opacity:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((o,l)=>o!==n[l])||t.thickness!==i||t.opacity!==s||t.pageIndex!==a},Pe(Tg,"_type","ink"),Pe(Tg,"_editorType",Dt.INK),Pe(Tg,"_defaultDrawingOptions",null);let QI=Tg;class JI extends Qx{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const hA=8,Ly=3;var Fm,or,ZI,Fo,yW,bW,eP,PE,wW,xW,_W,tP,rP,AW;class Xu{static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:i},s,a,o,l){let u=new OffscreenCanvas(1,1),c=u.getContext("2d",{alpha:!1});const h=200,d=c.font=`${n} ${i} ${h}px ${t}`,{actualBoundingBoxLeft:f,actualBoundingBoxRight:p,actualBoundingBoxAscent:g,actualBoundingBoxDescent:b,fontBoundingBoxAscent:v,fontBoundingBoxDescent:x,width:y}=c.measureText(e),E=1.5,w=Math.ceil(Math.max(Math.abs(f)+Math.abs(p)||0,y)*E),A=Math.ceil(Math.max(Math.abs(g)+Math.abs(b)||h,Math.abs(v)+Math.abs(x)||h)*E);u=new OffscreenCanvas(w,A),c=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),c.font=d,c.filter="grayscale(1)",c.fillStyle="white",c.fillRect(0,0,w,A),c.fillStyle="black",c.fillText(e,w*(E-1)/2,A*(3-E)/2);const T=H(this,or,tP).call(this,c.getImageData(0,0,w,A).data),S=H(this,or,_W).call(this,T),N=H(this,or,rP).call(this,S),D=H(this,or,eP).call(this,T,w,A,N);return this.processDrawnLines({lines:{curves:D,width:w,height:A},pageWidth:s,pageHeight:a,rotation:o,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,n,i,s){const[a,o,l]=H(this,or,AW).call(this,e),[u,c]=H(this,or,xW).call(this,a,o,l,Math.hypot(o,l)*m(this,Fm).sigmaSFactor,m(this,Fm).sigmaR,m(this,Fm).kernelSize),h=H(this,or,rP).call(this,c),d=H(this,or,eP).call(this,u,o,l,h);return this.processDrawnLines({lines:{curves:d,width:o,height:l},pageWidth:t,pageHeight:n,rotation:i,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:s,mustSmooth:a,areContours:o}){i%180!==0&&([t,n]=[n,t]);const{curves:l,width:u,height:c}=e,h=e.thickness??0,d=[],f=Math.min(t/u,n/c),p=f/t,g=f/n,b=[];for(const{points:x}of l){const y=a?H(this,or,wW).call(this,x):x;if(!y)continue;b.push(y);const E=y.length,w=new Float32Array(E),A=new Float32Array(3*(E===2?2:E-2));if(d.push({line:A,points:w}),E===2){w[0]=y[0]*p,w[1]=y[1]*g,A.set([NaN,NaN,NaN,NaN,w[0],w[1]],0);continue}let[T,S,N,D]=y;T*=p,S*=g,N*=p,D*=g,w.set([T,S,N,D],0),A.set([NaN,NaN,NaN,NaN,T,S],0);for(let _=4;_<E;_+=2){const M=w[_]=y[_]*p,I=w[_+1]=y[_+1]*g;A.set(Ye.createBezierPoints(T,S,N,D,M,I),(_-2)*3),[T,S,N,D]=[N,D,M,I]}}if(d.length===0)return null;const v=o?new JI:new Qx;return v.build(d,t,n,1,i,o?0:h,s),{outline:v,newCurves:b,areContours:o,thickness:h,width:u,height:c}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:i,height:s}){let a=1/0,o=-1/0,l=0;for(const y of e){l+=y.length;for(let E=2,w=y.length;E<w;E++){const A=y[E]-y[E-2];a=Math.min(a,A),o=Math.max(o,A)}}let u;a>=-128&&o<=127?u=Int8Array:a>=-32768&&o<=32767?u=Int16Array:u=Int32Array;const c=e.length,h=hA+Ly*c,d=new Uint32Array(h);let f=0;d[f++]=h*Uint32Array.BYTES_PER_ELEMENT+(l-2*c)*u.BYTES_PER_ELEMENT,d[f++]=0,d[f++]=i,d[f++]=s,d[f++]=t?0:1,d[f++]=Math.max(0,Math.floor(n??0)),d[f++]=c,d[f++]=u.BYTES_PER_ELEMENT;for(const y of e)d[f++]=y.length-2,d[f++]=y[0],d[f++]=y[1];const p=new CompressionStream("deflate-raw"),g=p.writable.getWriter();await g.ready,g.write(d);const b=u.prototype.constructor;for(const y of e){const E=new b(y.length-2);for(let w=2,A=y.length;w<A;w++)E[w-2]=y[w]-y[w-2];g.write(E)}g.close();const v=await new Response(p.readable).arrayBuffer(),x=new Uint8Array(v);return xH(x)}static async decompressSignature(e){try{const t=ahe(e),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),s=i.getWriter();await s.ready,s.write(t).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let a=null,o=0;for await(const y of n)a||(a=new Uint8Array(new Uint32Array(y.buffer,0,4)[0])),a.set(y,o),o+=y.length;const l=new Uint32Array(a.buffer,0,a.length>>2),u=l[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const c=l[2],h=l[3],d=l[4]===0,f=l[5],p=l[6],g=l[7],b=[],v=(hA+Ly*p)*Uint32Array.BYTES_PER_ELEMENT;let x;switch(g){case Int8Array.BYTES_PER_ELEMENT:x=new Int8Array(a.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:x=new Int16Array(a.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:x=new Int32Array(a.buffer,v);break}o=0;for(let y=0;y<p;y++){const E=l[Ly*y+hA],w=new Float32Array(E+2);b.push(w);for(let A=0;A<Ly-1;A++)w[A]=l[Ly*y+hA+A+1];for(let A=0;A<E;A++)w[A+2]=w[A]+x[o++]}return{areContours:d,thickness:f,outlines:b,width:c,height:h}}catch(t){return At(`decompressSignature: ${t}`),null}}}Fm=new WeakMap,or=new WeakSet,ZI=function(e,t,n,i){return n-=e,i-=t,n===0?i>0?0:4:n===1?i+6:2-i},Fo=new WeakMap,yW=function(e,t,n,i,s,a,o){const l=H(this,or,ZI).call(this,n,i,s,a);for(let u=0;u<8;u++){const c=(-u+l-o+16)%8,h=m(this,Fo)[2*c],d=m(this,Fo)[2*c+1];if(e[(n+h)*t+(i+d)]!==0)return c}return-1},bW=function(e,t,n,i,s,a,o){const l=H(this,or,ZI).call(this,n,i,s,a);for(let u=0;u<8;u++){const c=(u+l+o+16)%8,h=m(this,Fo)[2*c],d=m(this,Fo)[2*c+1];if(e[(n+h)*t+(i+d)]!==0)return c}return-1},eP=function(e,t,n,i){const s=e.length,a=new Int32Array(s);for(let c=0;c<s;c++)a[c]=e[c]<=i?1:0;for(let c=1;c<n-1;c++)a[c*t]=a[c*t+t-1]=0;for(let c=0;c<t;c++)a[c]=a[t*n-1-c]=0;let o=1,l;const u=[];for(let c=1;c<n-1;c++){l=1;for(let h=1;h<t-1;h++){const d=c*t+h,f=a[d];if(f===0)continue;let p=c,g=h;if(f===1&&a[d-1]===0)o+=1,g-=1;else if(f>=1&&a[d+1]===0)o+=1,g+=1,f>1&&(l=f);else{f!==1&&(l=Math.abs(f));continue}const b=[h,c],v=g===h+1,x={isHole:v,points:b,id:o,parent:0};u.push(x);let y;for(const _ of u)if(_.id===l){y=_;break}y?y.isHole?x.parent=v?y.parent:l:x.parent=v?l:y.parent:x.parent=v?l:0;const E=H(this,or,yW).call(this,a,t,c,h,p,g,0);if(E===-1){a[d]=-o,a[d]!==1&&(l=Math.abs(a[d]));continue}let w=m(this,Fo)[2*E],A=m(this,Fo)[2*E+1];const T=c+w,S=h+A;p=T,g=S;let N=c,D=h;for(;;){const _=H(this,or,bW).call(this,a,t,N,D,p,g,1);w=m(this,Fo)[2*_],A=m(this,Fo)[2*_+1];const M=N+w,I=D+A;b.push(I,M);const V=N*t+D;if(a[V+1]===0?a[V]=-o:a[V]===1&&(a[V]=o),M===c&&I===h&&N===T&&D===S){a[d]!==1&&(l=Math.abs(a[d]));break}else p=N,g=D,N=M,D=I}}}return u},PE=function(e,t,n,i){if(n-t<=4){for(let T=t;T<n-2;T+=2)i.push(e[T],e[T+1]);return}const s=e[t],a=e[t+1],o=e[n-4]-s,l=e[n-3]-a,u=Math.hypot(o,l),c=o/u,h=l/u,d=c*a-h*s,f=l/o,p=1/u,g=Math.atan(f),b=Math.cos(g),v=Math.sin(g),x=p*(Math.abs(b)+Math.abs(v)),y=p*(1-x+x**2),E=Math.max(Math.atan(Math.abs(v+b)*y),Math.atan(Math.abs(v-b)*y));let w=0,A=t;for(let T=t+2;T<n-2;T+=2){const S=Math.abs(d-c*e[T+1]+h*e[T]);S>w&&(A=T,w=S)}w>(u*E)**2?(H(this,or,PE).call(this,e,t,A+2,i),H(this,or,PE).call(this,e,A,n,i)):i.push(s,a)},wW=function(e){const t=[],n=e.length;return H(this,or,PE).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t},xW=function(e,t,n,i,s,a){const o=new Float32Array(a**2),l=-2*i**2,u=a>>1;for(let g=0;g<a;g++){const b=(g-u)**2;for(let v=0;v<a;v++)o[g*a+v]=Math.exp((b+(v-u)**2)/l)}const c=new Float32Array(256),h=-2*s**2;for(let g=0;g<256;g++)c[g]=Math.exp(g**2/h);const d=e.length,f=new Uint8Array(d),p=new Uint32Array(256);for(let g=0;g<n;g++)for(let b=0;b<t;b++){const v=g*t+b,x=e[v];let y=0,E=0;for(let A=0;A<a;A++){const T=g+A-u;if(!(T<0||T>=n))for(let S=0;S<a;S++){const N=b+S-u;if(N<0||N>=t)continue;const D=e[T*t+N],_=o[A*a+S]*c[Math.abs(D-x)];y+=D*_,E+=_}}const w=f[v]=Math.round(y/E);p[w]++}return[f,p]},_W=function(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t},tP=function(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let i=-1/0,s=1/0;for(let o=0,l=n.length;o<l;o++){const u=n[o]=e[o<<2];i=Math.max(i,u),s=Math.min(s,u)}const a=255/(i-s);for(let o=0,l=n.length;o<l;o++)n[o]=(n[o]-s)*a;return n},rP=function(e){let t,n=-1/0,i=-1/0;const s=e.findIndex(l=>l!==0);let a=s,o=s;for(t=s;t<256;t++){const l=e[t];l>n&&(t-a>i&&(i=t-a,o=t-1),n=l,a=t)}for(t=o-1;t>=0&&!(e[t]>e[t+1]);t--);return t},AW=function(e){const t=e,{width:n,height:i}=e,{maxDim:s}=m(this,Fm);let a=n,o=i;if(n>s||i>s){let d=n,f=i,p=Math.log2(Math.max(n,i)/s);const g=Math.floor(p);p=p===g?g-1:g;for(let v=0;v<p;v++){a=Math.ceil(d/2),o=Math.ceil(f/2);const x=new OffscreenCanvas(a,o);x.getContext("2d").drawImage(e,0,0,d,f,0,0,a,o),d=a,f=o,e!==t&&e.close(),e=x.transferToImageBitmap()}const b=Math.min(s/a,s/o);a=Math.round(a*b),o=Math.round(o*b)}const u=new OffscreenCanvas(a,o).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,a,o),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,a,o);const c=u.getImageData(0,0,a,o).data;return[H(this,or,tP).call(this,c),a,o]},U(Xu,or),U(Xu,Fm,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),U(Xu,Fo,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class vF extends dW{constructor(){super(),super.updateProperties({fill:Fr._defaultLineColor,"stroke-width":0})}clone(){const e=new vF;return e.updateAll(this),e}}class yF extends qC{constructor(e){super(e),super.updateProperties({stroke:Fr._defaultLineColor,"stroke-width":1})}clone(){const e=new yF(this._viewParameters);return e.updateAll(this),e}}var Oh,Pl,Bh,Om;const Qs=class Qs extends HS{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});U(this,Oh,!1);U(this,Pl,null);U(this,Bh,null);U(this,Om,null);this._willKeepAspectRatio=!0,k(this,Bh,t.signatureData||null),k(this,Pl,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){Fr.initialize(t,n),this._defaultDrawingOptions=new vF,this._defaultDrawnSignatureOptions=new yF(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Et(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!m(this,Pl)}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(m(this,Bh)){const{lines:s,mustSmooth:a,areContours:o,description:l,uuid:u,heightInPage:c}=m(this,Bh),{rawDims:{pageWidth:h,pageHeight:d},rotation:f}=this.parent.viewport,p=Xu.processDrawnLines({lines:s,pageWidth:h,pageHeight:d,rotation:f,innerMargin:Qs._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(p,c,l,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:m(this,Pl)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){k(this,Om,t),this.addEditToolbar()}getUuid(){return m(this,Om)}get description(){return m(this,Pl)}set description(t){k(this,Pl,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:i,width:s,height:a}=m(this,Bh),o=Math.max(s,a),l=Xu.processDrawnLines({lines:{curves:t.map(u=>({points:u})),thickness:i,width:s,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,i,s){const{x:a,y:o}=this,{outline:l}=k(this,Bh,t);k(this,Oh,l instanceof JI),this.description=i;let u;m(this,Oh)?u=Qs.getDefaultDrawingOptions():(u=Qs._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:u});const[,c]=this.pageDimensions;let h=n/c;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:s}=this.parent.viewport;return Xu.process(t,n,i,s,Qs._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:i,pageHeight:s},rotation:a}=this.parent.viewport;return Xu.extractContoursFromText(t,n,i,s,a,Qs._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:s}=this.parent.viewport;return Xu.processDrawnLines({lines:t,pageWidth:n,pageHeight:i,rotation:s,innerMargin:Qs._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=Qs.getDefaultDrawingOptions():(this._drawingOptions=Qs._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":s}}=this,a=Object.assign(super.serialize(t),{isSignature:!0,areContours:m(this,Oh),color:[0,0,0],thickness:m(this,Oh)?0:s});return this.addComment(a),t?(a.paths={lines:n,points:i},a.uuid=m(this,Om),a.isCopy=!0):a.lines=n,m(this,Pl)&&(a.accessibilityData={type:"Figure",alt:m(this,Pl)}),a}static deserializeDraw(t,n,i,s,a,o){return o.areContours?JI.deserialize(t,n,i,s,a,o):Qx.deserialize(t,n,i,s,a,o)}static async deserialize(t,n,i){var a;const s=await super.deserialize(t,n,i);return k(s,Oh,t.areContours),s.description=((a=t.accessibilityData)==null?void 0:a.alt)||"",k(s,Om,t.uuid),s}};Oh=new WeakMap,Pl=new WeakMap,Bh=new WeakMap,Om=new WeakMap,Pe(Qs,"_type","signature"),Pe(Qs,"_editorType",Dt.SIGNATURE),Pe(Qs,"_defaultDrawingOptions",null);let nP=Qs;var qr,ai,Lh,qu,$h,o0,Hu,Bm,Rl,pa,l0,rr,yb,bb,RE,kE,FE,sP,OE,EW;class iP extends Fr{constructor(t){super({...t,name:"stampEditor"});U(this,rr);U(this,qr,null);U(this,ai,null);U(this,Lh,null);U(this,qu,null);U(this,$h,null);U(this,o0,"");U(this,Hu,null);U(this,Bm,!1);U(this,Rl,null);U(this,pa,!1);U(this,l0,!1);k(this,qu,t.bitmapUrl),k(this,$h,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){Fr.initialize(t,n)}static isHandlingMimeForPasting(t){return jM.includes(t)}static paste(t,n){n.pasteEditor({mode:Dt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,l=await i.guess({name:"altText",request:{data:s,width:a,height:o,channels:s.length/(a*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),n&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;m(this,ai)&&(k(this,qr,null),this._uiManager.imageManager.deleteId(m(this,ai)),(t=m(this,Hu))==null||t.remove(),k(this,Hu,null),m(this,Rl)&&(clearTimeout(m(this,Rl)),k(this,Rl,null))),super.remove()}rebuild(){if(!this.parent){m(this,ai)&&H(this,rr,RE).call(this);return}super.rebuild(),this.div!==null&&(m(this,ai)&&m(this,Hu)===null&&H(this,rr,RE).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(m(this,Lh)||m(this,qr)||m(this,qu)||m(this,$h)||m(this,ai)||m(this,Bm))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),m(this,Bm)||(m(this,qr)?H(this,rr,kE).call(this):H(this,rr,RE).call(this)),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:i,bitmap:s}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(k(this,ai,i),s&&k(this,qr,s),k(this,Bm,!1),H(this,rr,kE).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;m(this,Rl)!==null&&clearTimeout(m(this,Rl)),k(this,Rl,setTimeout(()=>{k(this,Rl,null),H(this,rr,sP).call(this)},200))}copyCanvas(t,n,i=!1){t||(t=224);const{width:s,height:a}=m(this,qr),o=new Xl;let l=m(this,qr),u=s,c=a,h=null;if(n){if(s>n||a>n){const T=Math.min(n/s,n/a);u=Math.floor(s*T),c=Math.floor(a*T)}h=document.createElement("canvas");const f=h.width=Math.ceil(u*o.sx),p=h.height=Math.ceil(c*o.sy);m(this,pa)||(l=H(this,rr,FE).call(this,f,p));const g=h.getContext("2d");g.filter=this._uiManager.hcmFilter;let b="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":dhe.isDarkMode&&(b="#8f8f9d",v="#42414d");const x=15,y=x*o.sx,E=x*o.sy,w=new OffscreenCanvas(y*2,E*2),A=w.getContext("2d");A.fillStyle=b,A.fillRect(0,0,y*2,E*2),A.fillStyle=v,A.fillRect(0,0,y,E),A.fillRect(y,E,y,E),g.fillStyle=g.createPattern(w,"repeat"),g.fillRect(0,0,f,p),g.drawImage(l,0,0,l.width,l.height,0,0,f,p)}let d=null;if(i){let f,p;if(o.symmetric&&l.width<t&&l.height<t)f=l.width,p=l.height;else if(l=m(this,qr),s>t||a>t){const v=Math.min(t/s,t/a);f=Math.floor(s*v),p=Math.floor(a*v),m(this,pa)||(l=H(this,rr,FE).call(this,f,p))}const b=new OffscreenCanvas(f,p).getContext("2d",{willReadFrequently:!0});b.drawImage(l,0,0,l.width,l.height,0,0,f,p),d={width:f,height:p,data:b.getImageData(0,0,f,p).data}}return{canvas:h,width:u,height:c,imageData:d}}static async deserialize(t,n,i){var b;let s=null,a=!1;if(t instanceof VG){const{data:{rect:v,rotation:x,id:y,structParent:E,popupRef:w,richText:A,contentsObj:T,creationDate:S,modificationDate:N},container:D,parent:{page:{pageNumber:_}},canvas:M}=t;let I,V;M?(delete t.canvas,{id:I,bitmap:V}=i.imageManager.getFromCanvas(D.id,M),M.remove()):(a=!0,t._hasNoCanvas=!0);const q=((b=await n._structTree.getAriaAttributes(`${vg}${y}`))==null?void 0:b.get("aria-label"))||"";s=t={annotationType:Dt.STAMP,bitmapId:I,bitmap:V,pageIndex:_-1,rect:v.slice(0),rotation:x,annotationElementId:y,id:y,deleted:!1,accessibilityData:{decorative:!1,altText:q},isSvg:!1,structParent:E,popupRef:w,richText:A,comment:(T==null?void 0:T.str)||null,creationDate:S,modificationDate:N}}const o=await super.deserialize(t,n,i),{rect:l,bitmap:u,bitmapUrl:c,bitmapId:h,isSvg:d,accessibilityData:f}=t;a?(i.addMissingCanvas(t.id,o),k(o,Bm,!0)):h&&i.imageManager.isValidId(h)?(k(o,ai,h),u&&k(o,qr,u)):k(o,qu,c),k(o,pa,d);const[p,g]=o.pageDimensions;return o.width=(l[2]-l[0])/p,o.height=(l[3]-l[1])/g,f&&(o.altTextData=f),o._initialData=s,t.comment&&o.setCommentData(t),k(o,l0,!!s),o}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(t),{bitmapId:m(this,ai),isSvg:m(this,pa)});if(this.addComment(i),t)return i.bitmapUrl=H(this,rr,OE).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:s,altText:a}=this.serializeAltText(!1);if(!s&&a&&(i.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const l=H(this,rr,EW).call(this,i);return l.isSame?null:(l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(n===null)return i;n.stamps||(n.stamps=new Map);const o=m(this,pa)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(m(this,ai)))n.stamps.set(m(this,ai),{area:o,serialized:i}),i.bitmap=H(this,rr,OE).call(this,!1);else if(m(this,pa)){const l=n.stamps.get(m(this,ai));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=H(this,rr,OE).call(this,!1))}return i}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}qr=new WeakMap,ai=new WeakMap,Lh=new WeakMap,qu=new WeakMap,$h=new WeakMap,o0=new WeakMap,Hu=new WeakMap,Bm=new WeakMap,Rl=new WeakMap,pa=new WeakMap,l0=new WeakMap,rr=new WeakSet,yb=function(t,n=!1){if(!t){this.remove();return}k(this,qr,t.bitmap),n||(k(this,ai,t.id),k(this,pa,t.isSvg)),t.file&&k(this,o0,t.file.name),H(this,rr,kE).call(this)},bb=function(){if(k(this,Lh,null),this._uiManager.enableWaiting(!1),!!m(this,Hu)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&m(this,qr)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&m(this,qr)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},RE=function(){if(m(this,ai)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(m(this,ai)).then(i=>H(this,rr,yb).call(this,i,!0)).finally(()=>H(this,rr,bb).call(this));return}if(m(this,qu)){const i=m(this,qu);k(this,qu,null),this._uiManager.enableWaiting(!0),k(this,Lh,this._uiManager.imageManager.getFromUrl(i).then(s=>H(this,rr,yb).call(this,s)).finally(()=>H(this,rr,bb).call(this)));return}if(m(this,$h)){const i=m(this,$h);k(this,$h,null),this._uiManager.enableWaiting(!0),k(this,Lh,this._uiManager.imageManager.getFromFile(i).then(s=>H(this,rr,yb).call(this,s)).finally(()=>H(this,rr,bb).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=jM.join(",");const n=this._uiManager._signal;k(this,Lh,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),H(this,rr,yb).call(this,s)}i()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>H(this,rr,bb).call(this))),t.click()},kE=function(){var u;const{div:t}=this;let{width:n,height:i}=m(this,qr);const[s,a]=this.pageDimensions,o=.75;if(this.width)n=this.width*s,i=this.height*a;else if(n>o*s||i>o*a){const c=Math.min(o*s/n,o*a/i);n*=c,i*=c}this._uiManager.enableWaiting(!1);const l=k(this,Hu,document.createElement("canvas"));l.setAttribute("role","img"),this.addContainer(l),this.width=n/s,this.height=i/a,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),H(this,rr,sP).call(this),m(this,l0)||(this.parent.addUndoableEditor(this),k(this,l0,!0)),this._reportTelemetry({action:"inserted_image"}),m(this,o0)&&this.div.setAttribute("aria-description",m(this,o0)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},FE=function(t,n){const{width:i,height:s}=m(this,qr);let a=i,o=s,l=m(this,qr);for(;a>2*t||o>2*n;){const u=a,c=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*n&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const h=new OffscreenCanvas(a,o);h.getContext("2d").drawImage(l,0,0,u,c,0,0,a,o),l=h.transferToImageBitmap()}return l},sP=function(){const[t,n]=this.parentDimensions,{width:i,height:s}=this,a=new Xl,o=Math.ceil(i*t*a.sx),l=Math.ceil(s*n*a.sy),u=m(this,Hu);if(!u||u.width===o&&u.height===l)return;u.width=o,u.height=l;const c=m(this,pa)?m(this,qr):H(this,rr,FE).call(this,o,l),h=u.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(c,0,0,c.width,c.height,0,0,o,l)},OE=function(t){if(t){if(m(this,pa)){const s=this._uiManager.imageManager.getSvgUrl(m(this,ai));if(s)return s}const n=document.createElement("canvas");return{width:n.width,height:n.height}=m(this,qr),n.getContext("2d").drawImage(m(this,qr),0,0),n.toDataURL()}if(m(this,pa)){const[n,i]=this.pageDimensions,s=Math.round(this.width*n*Sd.PDF_TO_CSS_UNITS),a=Math.round(this.height*i*Sd.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(s,a);return o.getContext("2d").drawImage(m(this,qr),0,0,m(this,qr).width,m(this,qr).height,0,0,s,a),o.transferToImageBitmap()}return structuredClone(m(this,qr))},EW=function(t){var o;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,s=t.pageIndex===n,a=(((o=t.accessibilityData)==null?void 0:o.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}},Pe(iP,"_type","stamp"),Pe(iP,"_editorType",Dt.STAMP);var Lm,u0,Vh,Uh,Gu,Fs,zh,c0,h0,Oo,Wu,oi,Ku,jh,d0,rt,qh,Nr,oP,SW,ul,lP,uP,BE;const Eo=class Eo{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:i,accessibilityManager:s,annotationLayer:a,drawLayer:o,textLayer:l,viewport:u,l10n:c}){U(this,Nr);U(this,Lm);U(this,u0,!1);U(this,Vh,null);U(this,Uh,null);U(this,Gu,null);U(this,Fs,new Map);U(this,zh,!1);U(this,c0,!1);U(this,h0,!1);U(this,Oo,null);U(this,Wu,null);U(this,oi,null);U(this,Ku,null);U(this,jh,null);U(this,d0,-1);U(this,rt);const h=[...m(Eo,qh).values()];if(!Eo._initialized){Eo._initialized=!0;for(const d of h)d.initialize(c,e)}e.registerEditorTypes(h),k(this,rt,e),this.pageIndex=t,this.div=n,k(this,Lm,s),k(this,Vh,a),this.viewport=u,k(this,oi,l),this.drawLayer=o,this._structTree=i,m(this,rt).addLayer(this)}get isEmpty(){return m(this,Fs).size===0}get isInvisible(){return this.isEmpty&&m(this,rt).getMode()===Dt.NONE}updateToolbar(e){m(this,rt).updateToolbar(e)}updateMode(e=m(this,rt).getMode()){switch(H(this,Nr,BE).call(this),e){case Dt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Dt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Dt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Dt.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of m(Eo,qh).values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=m(this,oi))==null?void 0:t.div)}setEditingState(e){m(this,rt).setEditingState(e)}addCommands(e){m(this,rt).addCommands(e)}cleanUndoStack(e){m(this,rt).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=m(this,Vh))==null||t.togglePointerEvents(e)}async enable(){var n;k(this,h0,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=m(this,jh))==null||n.abort(),k(this,jh,null);const e=new Set;for(const i of m(this,Nr,oP))i.enableEditing(),i.show(!0),i.annotationElementId&&(m(this,rt).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const t=m(this,Vh);if(t)for(const i of t.getEditableAnnotations()){if(i.hide(),m(this,rt).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}k(this,h0,!1),m(this,rt)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var i;if(k(this,c0,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),m(this,oi)&&!m(this,jh)){k(this,jh,new AbortController);const s=m(this,rt).combinedSignal(m(this,jh));m(this,oi).div.addEventListener("pointerdown",a=>{const{clientX:l,clientY:u,timeStamp:c}=a,h=m(this,d0);if(c-h>500){k(this,d0,c);return}k(this,d0,-1);const{classList:d}=this.div;d.toggle("getElements",!0);const f=document.elementsFromPoint(l,u);if(d.toggle("getElements",!1),!this.div.contains(f[0]))return;let p;const g=new RegExp(`^${S1}[0-9]+$`);for(const v of f)if(g.test(v.id)){p=v.id;break}if(!p)return;const b=m(this,Fs).get(p);(b==null?void 0:b.annotationElementId)===null&&(a.stopPropagation(),a.preventDefault(),b.dblclick(a))},{signal:s,capture:!0})}const e=m(this,Vh),t=[];if(e){const s=new Map,a=new Map;for(const l of m(this,Nr,oP)){if(l.disableEditing(),!l.annotationElementId){t.push(l);continue}if(l.serialize()!==null){s.set(l.annotationElementId,l);continue}else a.set(l.annotationElementId,l);(i=this.getEditableAnnotation(l.annotationElementId))==null||i.show(),l.remove()}const o=e.getEditableAnnotations();for(const l of o){const{id:u}=l.data;if(m(this,rt).isDeletedAnnotationElement(u)){l.updateEdited({deleted:!0});continue}let c=a.get(u);if(c){c.resetAnnotationElement(l),c.show(!1),l.show();continue}c=s.get(u),c&&(m(this,rt).addChangedExistingAnnotation(c),c.renderAnnotationElement(l)&&c.show(!1)),l.show()}}H(this,Nr,BE).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const s of m(Eo,qh).values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e==null||e.updateFakeAnnotations(t),k(this,c0,!1)}getEditableAnnotation(e){var t;return((t=m(this,Vh))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){m(this,rt).getActive()!==e&&m(this,rt).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=m(this,oi))!=null&&e.div&&!m(this,Ku)){k(this,Ku,new AbortController);const t=m(this,rt).combinedSignal(m(this,Ku));m(this,oi).div.addEventListener("pointerdown",H(this,Nr,SW).bind(this),{signal:t}),m(this,oi).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=m(this,oi))!=null&&e.div&&m(this,Ku)&&(m(this,Ku).abort(),k(this,Ku,null),m(this,oi).div.classList.remove("highlighting"))}enableClick(){if(m(this,Uh))return;k(this,Uh,new AbortController);const e=m(this,rt).combinedSignal(m(this,Uh));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=m(this,Uh))==null||e.abort(),k(this,Uh,null)}attach(e){m(this,Fs).set(e.id,e);const{annotationElementId:t}=e;t&&m(this,rt).isDeletedAnnotationElement(t)&&m(this,rt).removeDeletedAnnotationElement(e)}detach(e){var t;m(this,Fs).delete(e.id),(t=m(this,Lm))==null||t.removePointerInTextLayer(e.contentDiv),!m(this,c0)&&e.annotationElementId&&m(this,rt).addDeletedAnnotationElement(e)}remove(e){this.detach(e),m(this,rt).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(m(this,rt).addDeletedAnnotationElement(e),Fr.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),m(this,rt).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!m(this,h0)),m(this,rt).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!m(this,Gu)&&(e._focusEventsAllowed=!1,k(this,Gu,setTimeout(()=>{k(this,Gu,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:m(this,rt)._signal}),t.focus())},0))),e._structTreeParentId=(n=m(this,Lm))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(const t of m(this,Fs).values())if(t.uid===e)return t;return null}getNextId(){return m(this,rt).getId()}combinedSignal(e){return m(this,rt).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=m(this,Nr,ul))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await m(this,rt).updateMode(e.mode);const{offsetX:n,offsetY:i}=H(this,Nr,uP).call(this),s=this.getNextId(),a=H(this,Nr,lP).call(this,{parent:this,id:s,x:n,y:i,uiManager:m(this,rt),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=m(Eo,qh).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,m(this,rt)))||null}createAndAddNewEditor(e,t,n={}){const i=this.getNextId(),s=H(this,Nr,lP).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:m(this,rt),isCentered:t,...n});return s&&this.add(s),s}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(H(this,Nr,uP).call(this),!0,e)}setSelected(e){m(this,rt).setSelected(e)}toggleSelected(e){m(this,rt).toggleSelected(e)}unselect(e){m(this,rt).unselect(e)}pointerup(e){var i;const{isMac:t}=Ii.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!m(this,zh)||(k(this,zh,!1),(i=m(this,Nr,ul))!=null&&i.isDrawer&&m(this,Nr,ul).supportMultipleDrawings))return;if(!m(this,u0)){k(this,u0,!0);return}const n=m(this,rt).getMode();if(n===Dt.STAMP||n===Dt.SIGNATURE){m(this,rt).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(m(this,rt).getMode()===Dt.HIGHLIGHT&&this.enableTextSelection(),m(this,zh)){k(this,zh,!1);return}const{isMac:t}=Ii.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(k(this,zh,!0),(i=m(this,Nr,ul))!=null&&i.isDrawer){this.startDrawingSession(e);return}const n=m(this,rt).getActive();k(this,u0,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),m(this,Oo)){m(this,Nr,ul).startDrawing(this,m(this,rt),!1,e);return}m(this,rt).setCurrentDrawingSession(this),k(this,Oo,new AbortController);const t=m(this,rt).combinedSignal(m(this,Oo));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(k(this,Wu,null),this.commitOrRemove())},{signal:t}),m(this,Nr,ul).startDrawing(this,m(this,rt),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&k(this,Wu,t);return}m(this,Wu)&&setTimeout(()=>{var t;(t=m(this,Wu))==null||t.focus(),k(this,Wu,null)},0)}endDrawingSession(e=!1){return m(this,Oo)?(m(this,rt).setCurrentDrawingSession(null),m(this,Oo).abort(),k(this,Oo,null),k(this,Wu,null),m(this,Nr,ul).endDrawing(e)):null}findNewParent(e,t,n){const i=m(this,rt).findParent(t,n);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return m(this,Oo)?(this.endDrawingSession(),!0):!1}onScaleChanging(){m(this,Oo)&&m(this,Nr,ul).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=m(this,rt).getActive())==null?void 0:e.parent)===this&&(m(this,rt).commitOrRemove(),m(this,rt).setActiveEditor(null)),m(this,Gu)&&(clearTimeout(m(this,Gu)),k(this,Gu,null));for(const n of m(this,Fs).values())(t=m(this,Lm))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,m(this,Fs).clear(),m(this,rt).removeLayer(this)}render({viewport:e}){this.viewport=e,np(this.div,e);for(const t of m(this,rt).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){m(this,rt).commitOrRemove(),H(this,Nr,BE).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,np(this.div,{rotation:n}),t!==n)for(const i of m(this,Fs).values())i.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return m(this,rt).viewParameters.realScale}};Lm=new WeakMap,u0=new WeakMap,Vh=new WeakMap,Uh=new WeakMap,Gu=new WeakMap,Fs=new WeakMap,zh=new WeakMap,c0=new WeakMap,h0=new WeakMap,Oo=new WeakMap,Wu=new WeakMap,oi=new WeakMap,Ku=new WeakMap,jh=new WeakMap,d0=new WeakMap,rt=new WeakMap,qh=new WeakMap,Nr=new WeakSet,oP=function(){return m(this,Fs).size!==0?m(this,Fs).values():m(this,rt).getEditors(this.pageIndex)},SW=function(e){m(this,rt).unselectAll();const{target:t}=e;if(t===m(this,oi).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&m(this,oi).div.contains(t)){const{isMac:n}=Ii.platform;if(e.button!==0||e.ctrlKey&&n)return;m(this,rt).showAllEditors("highlight",!0,!0),m(this,oi).div.classList.add("free"),this.toggleDrawing(),qS.startHighlighting(this,m(this,rt).direction==="ltr",{target:m(this,oi).div,x:e.x,y:e.y}),m(this,oi).div.addEventListener("pointerup",()=>{m(this,oi).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:m(this,rt)._signal}),e.preventDefault()}},ul=function(){return m(Eo,qh).get(m(this,rt).getMode())},lP=function(e){const t=m(this,Nr,ul);return t?new t.prototype.constructor(e):null},uP=function(){const{x:e,y:t,width:n,height:i}=this.boundingClientRect,s=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+n),l=Math.min(window.innerHeight,t+i),u=(s+o)/2-e,c=(a+l)/2-t,[h,d]=this.viewport.rotation%180===0?[u,c]:[c,u];return{offsetX:h,offsetY:d}},BE=function(){for(const e of m(this,Fs).values())e.isEmpty()&&e.remove()},Pe(Eo,"_initialized",!1),U(Eo,qh,new Map([UI,QI,iP,qS,nP].map(e=>[e._editorType,e])));let aP=Eo;var Bo,hs,$m,Sx,GT,TW,Jl,hP,CW,dP;const Ln=class Ln{constructor({pageIndex:e}){U(this,Jl);U(this,Bo,null);U(this,hs,new Map);U(this,$m,new Map);this.pageIndex=e}setParent(e){if(!m(this,Bo)){k(this,Bo,e);return}if(m(this,Bo)!==e){if(m(this,hs).size>0)for(const t of m(this,hs).values())t.remove(),e.append(t);k(this,Bo,e)}}static get _svgFactory(){return Et(this,"_svgFactory",new zS)}draw(e,t=!1,n=!1){const i=On(Ln,Sx)._++,s=H(this,Jl,hP).call(this),a=Ln._svgFactory.createElement("defs");s.append(a);const o=Ln._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t&&m(this,$m).set(i,o);const u=n?H(this,Jl,CW).call(this,a,l):null,c=Ln._svgFactory.createElement("use");return s.append(c),c.setAttribute("href",`#${l}`),this.updateProperties(s,e),m(this,hs).set(i,s),{id:i,clipPathId:`url(#${u})`}}drawOutline(e,t){const n=On(Ln,Sx)._++,i=H(this,Jl,hP).call(this),s=Ln._svgFactory.createElement("defs");i.append(s);const a=Ln._svgFactory.createElement("path");s.append(a);const o=`path_p${this.pageIndex}_${n}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const h=Ln._svgFactory.createElement("mask");s.append(h),l=`mask_p${this.pageIndex}_${n}`,h.setAttribute("id",l),h.setAttribute("maskUnits","objectBoundingBox");const d=Ln._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const f=Ln._svgFactory.createElement("use");h.append(f),f.setAttribute("href",`#${o}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const u=Ln._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${o}`),l&&u.setAttribute("mask",`url(#${l})`);const c=u.cloneNode();return i.append(c),u.classList.add("mainOutline"),c.classList.add("secondaryOutline"),this.updateProperties(i,e),m(this,hs).set(n,i),n}finalizeDraw(e,t){m(this,$m).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:n,bbox:i,rootClass:s,path:a}=t,o=typeof e=="number"?m(this,hs).get(e):e;if(o){if(n&&H(this,Jl,dP).call(this,o,n),i&&H(l=Ln,GT,TW).call(l,o,i),s){const{classList:u}=o;for(const[c,h]of Object.entries(s))u.toggle(c,h)}if(a){const c=o.firstElementChild.firstElementChild;H(this,Jl,dP).call(this,c,a)}}}updateParent(e,t){if(t===this)return;const n=m(this,hs).get(e);n&&(m(t,Bo).append(n),m(this,hs).delete(e),m(t,hs).set(e,n))}remove(e){m(this,$m).delete(e),m(this,Bo)!==null&&(m(this,hs).get(e).remove(),m(this,hs).delete(e))}destroy(){k(this,Bo,null);for(const e of m(this,hs).values())e.remove();m(this,hs).clear(),m(this,$m).clear()}};Bo=new WeakMap,hs=new WeakMap,$m=new WeakMap,Sx=new WeakMap,GT=new WeakSet,TW=function(e,[t,n,i,s]){const{style:a}=e;a.top=`${100*n}%`,a.left=`${100*t}%`,a.width=`${100*i}%`,a.height=`${100*s}%`},Jl=new WeakSet,hP=function(){const e=Ln._svgFactory.create(1,1,!0);return m(this,Bo).append(e),e.setAttribute("aria-hidden",!0),e},CW=function(e,t){const n=Ln._svgFactory.createElement("clipPath");e.append(n);const i=`clip_${t}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const s=Ln._svgFactory.createElement("use");return n.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),i},dP=function(e,t){for(const[n,i]of Object.entries(t))i===null?e.removeAttribute(n):e.setAttribute(n,i)},U(Ln,GT),U(Ln,Sx,0);let cP=Ln;globalThis._pdfjsTestingUtils={HighlightOutliner:jI};globalThis.pdfjsLib={AbortException:Ed,AnnotationEditorLayer:aP,AnnotationEditorParamsType:Kt,AnnotationEditorType:Dt,AnnotationEditorUIManager:ip,AnnotationLayer:$I,AnnotationMode:Xc,AnnotationType:Tn,applyOpacity:mhe,build:xde,ColorPicker:VS,createValidAbsoluteUrl:vH,CSSConstants:fhe,DOMSVGFactory:zS,DrawLayer:cP,FeatureTest:Ii,fetchData:Gx,findContrastColor:phe,getDocument:SG,getFilenameFromUrl:ohe,getPdfFilenameFromUrl:lhe,getRGB:Kx,getUuid:wH,getXfaPageViewport:che,GlobalWorkerOptions:Fl,ImageKind:iE,InvalidPDFException:UM,isDataScheme:zC,isPdfFile:hF,isValidExplicitDest:She,MathClamp:fs,noContextMenu:mo,normalizeUnicode:ihe,OPS:T1,OutputScale:Xl,PasswordResponses:Xce,PDFDataRangeTransport:TG,PDFDateString:kS,PDFWorker:D1,PermissionFlag:Kce,PixelsPerInch:Sd,RenderingCancelledException:cF,renderRichText:AH,ResponseException:RS,setLayerDimensions:np,shadow:Et,SignatureExtractor:Xu,stopEvent:dn,SupportedImageMimeTypes:jM,TextLayer:N1,TouchManager:OS,updateUrlHash:yH,Util:Ze,VerbosityLevel:$C,version:wde,XfaLayer:_H};Fl.workerSrc="/1201-project/pdf.worker.min.js";const Hde="",Gde="https://api-inference.huggingface.co/models/facebook/bart-large-cnn";async function Wde(r){try{const e=await r.arrayBuffer(),t=await SG({data:e}).promise;let n="";const i=Math.min(t.numPages,15);console.log(`PDF  : ${t.numPages},  : ${i}`);for(let s=1;s<=i;s++)try{const o=await(await t.getPage(s)).getTextContent();let l="";for(const u of o.items)u.str&&u.str.trim()&&(l+=u.str+" ");l.trim()&&(n+=l+`
`,console.log(` ${s}   (${l.length})`))}catch(a){console.warn(` ${s}  :`,a);continue}if(!n.trim())throw new Error("PDF    .   PDF  .");return console.log(`  : ${n.length}`),n}catch(e){throw console.error("PDF   :",e),new Error("PDF   : "+e.message)}}async function Kde(r){var e;try{const n=r.substring(0,1024),i=await fetch(Gde,{headers:{Authorization:`Bearer ${Hde}`},method:"POST",body:JSON.stringify({inputs:n})});if(!i.ok)throw new Error(`API : ${i.status}`);const s=await i.json();if(Array.isArray(s)&&((e=s[0])!=null&&e.summary_text))return s[0].summary_text;throw new Error("  ")}catch(t){throw console.error("AI  :",t),t}}function Xde(r){const e=r.match(/[^.!?]+[.!?]+/g)||[],t=["","","","","","",""];return e.map((s,a)=>{let o=t.reduce((l,u)=>l+(s.toLowerCase().includes(u)?1:0),0);return o+=1/(a+1),{sentence:s.trim(),score:o}}).sort((s,a)=>a.score-s.score).slice(0,3).map(s=>s.sentence).join(" ")||"  "}async function Yde(r){try{return{summary:await Kde(r),method:"AI"}}catch(e){return console.warn("AI  ,    :",e),{summary:Xde(r),method:"Rule-based"}}}var Qde="firebase",Jde="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ul(Qde,Jde,"app");function NW(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Zde=NW,DW=new Fx("auth","Firebase",NW());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=new wk("@firebase/auth");function efe(r,...e){GS.logLevel<=qt.WARN&&GS.warn(`Auth (${fp}): ${r}`,...e)}function LE(r,...e){GS.logLevel<=qt.ERROR&&GS.error(`Auth (${fp}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(r,...e){throw bF(r,...e)}function Gl(r,...e){return bF(r,...e)}function MW(r,e,t){const n={...Zde(),[e]:t};return new Fx("auth","Firebase",n).create(e,{appName:r.name})}function sc(r){return MW(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bF(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return DW.create(r,...e)}function ft(r,e,...t){if(!r)throw bF(e,...t)}function Ju(r){const e="INTERNAL ASSERTION FAILED: "+r;throw LE(e),new Error(e)}function _c(r,e){r||Ju(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function tfe(){return p5()==="http:"||p5()==="https:"}function p5(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rfe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tfe()||gae()||"connection"in navigator)?navigator.onLine:!0}function nfe(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,t){this.shortDelay=e,this.longDelay=t,_c(t>e,"Short delay should be less than long delay!"),this.isMobile=fae()||vae()}get(){return rfe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wF(r,e){_c(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IW{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ju("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ju("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ju("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ife={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sfe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],afe=new Jx(3e4,6e4);function Ld(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function $d(r,e,t,n,i={}){return PW(r,i,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const o=Ox({key:r.config.apiKey,...a}).slice(1),l=await r._getAdditionalHeaders();l["Content-Type"]="application/json",r.languageCode&&(l["X-Firebase-Locale"]=r.languageCode);const u={method:e,headers:l,...s};return pae()||(u.referrerPolicy="no-referrer"),r.emulatorConfig&&dp(r.emulatorConfig.host)&&(u.credentials="include"),IW.fetch()(await RW(r,r.config.apiHost,t,o),u)})}async function PW(r,e,t){r._canInitEmulator=!1;const n={...ife,...e};try{const i=new lfe(r),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw dA(r,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw dA(r,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw dA(r,"email-already-in-use",a);if(l==="USER_DISABLED")throw dA(r,"user-disabled",a);const c=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw MW(r,c,u);Xo(r,c)}}catch(i){if(i instanceof eu)throw i;Xo(r,"network-request-failed",{message:String(i)})}}async function Zx(r,e,t,n,i={}){const s=await $d(r,e,t,n,i);return"mfaPendingCredential"in s&&Xo(r,"multi-factor-auth-required",{_serverResponse:s}),s}async function RW(r,e,t,n){const i=`${e}${t}?${n}`,s=r,a=s.config.emulator?wF(r.config,i):`${r.config.apiScheme}://${i}`;return sfe.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function ofe(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lfe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Gl(this.auth,"network-request-failed")),afe.get())})}}function dA(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const i=Gl(r,e,n);return i.customData._tokenResponse=t,i}function g5(r){return r!==void 0&&r.enterprise!==void 0}class ufe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ofe(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cfe(r,e){return $d(r,"GET","/v2/recaptchaConfig",Ld(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hfe(r,e){return $d(r,"POST","/v1/accounts:delete",e)}async function WS(r,e){return $d(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dfe(r,e=!1){const t=Wn(r),n=await t.getIdToken(e),i=xF(n);ft(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:n,authTime:Ub($N(i.auth_time)),issuedAtTime:Ub($N(i.iat)),expirationTime:Ub($N(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function $N(r){return Number(r)*1e3}function xF(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return LE("JWT malformed, contained fewer than 3 sections"),null;try{const i=Sj(t);return i?JSON.parse(i):(LE("Failed to decode base64 JWT payload"),null)}catch(i){return LE("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function v5(r){const e=xF(r);return ft(e,"internal-error"),ft(typeof e.exp<"u","internal-error"),ft(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M1(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof eu&&ffe(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function ffe({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mfe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ub(this.lastLoginAt),this.creationTime=Ub(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KS(r){var h;const e=r.auth,t=await r.getIdToken(),n=await M1(r,WS(e,{idToken:t}));ft(n==null?void 0:n.users.length,e,"internal-error");const i=n.users[0];r._notifyReloadListener(i);const s=(h=i.providerUserInfo)!=null&&h.length?kW(i.providerUserInfo):[],a=gfe(r.providerData,s),o=r.isAnonymous,l=!(r.email&&i.passwordHash)&&!(a!=null&&a.length),u=o?l:!1,c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new mP(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(r,c)}async function pfe(r){const e=Wn(r);await KS(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gfe(r,e){return[...r.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function kW(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vfe(r,e){const t=await PW(r,{},async()=>{const n=Ox({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=r.config,a=await RW(r,i,"/v1/token",`key=${s}`),o=await r._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return r.emulatorConfig&&dp(r.emulatorConfig.host)&&(l.credentials="include"),IW.fetch()(a,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function yfe(r,e){return $d(r,"POST","/v2/accounts:revokeToken",Ld(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ft(e.idToken,"internal-error"),ft(typeof e.idToken<"u","internal-error"),ft(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):v5(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ft(e.length!==0,"internal-error");const t=v5(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ft(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await vfe(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:s}=t,a=new Og;return n&&(ft(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(ft(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(ft(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Og,this.toJSON())}_performRefresh(){return Ju("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(r,e){ft(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Uo{constructor({uid:e,auth:t,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new mfe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new mP(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await M1(this,this.stsTokenManager.getToken(this.auth,e));return ft(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return dfe(this,e)}reload(){return pfe(this)}_assign(e){this!==e&&(ft(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Uo({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ft(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await KS(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xa(this.auth.app))return Promise.reject(sc(this.auth));const e=await this.getIdToken();return await M1(this,hfe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,o=t.tenantId??void 0,l=t._redirectEventId??void 0,u=t.createdAt??void 0,c=t.lastLoginAt??void 0,{uid:h,emailVerified:d,isAnonymous:f,providerData:p,stsTokenManager:g}=t;ft(h&&g,e,"internal-error");const b=Og.fromJSON(this.name,g);ft(typeof h=="string",e,"internal-error"),$c(n,e.name),$c(i,e.name),ft(typeof d=="boolean",e,"internal-error"),ft(typeof f=="boolean",e,"internal-error"),$c(s,e.name),$c(a,e.name),$c(o,e.name),$c(l,e.name),$c(u,e.name),$c(c,e.name);const v=new Uo({uid:h,auth:e,email:i,emailVerified:d,displayName:n,isAnonymous:f,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:b,createdAt:u,lastLoginAt:c});return p&&Array.isArray(p)&&(v.providerData=p.map(x=>({...x}))),l&&(v._redirectEventId=l),v}static async _fromIdTokenResponse(e,t,n=!1){const i=new Og;i.updateFromServerResponse(t);const s=new Uo({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await KS(s),s}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];ft(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?kW(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new Og;o.updateFromIdToken(n);const l=new Uo({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new mP(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5=new Map;function Zu(r){_c(r instanceof Function,"Expected a class definition");let e=y5.get(r);return e?(_c(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,y5.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FW{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}FW.type="NONE";const b5=FW;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(r,e,t){return`firebase:${r}:${e}:${t}`}class Bg{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=$E(this.userKey,i.apiKey,s),this.fullPersistenceKey=$E("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await WS(this.auth,{idToken:e}).catch(()=>{});return t?Uo._fromGetAccountInfoResponse(this.auth,t,e):null}return Uo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Bg(Zu(b5),e,n);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Zu(b5);const a=$E(n,e.config.apiKey,e.name);let o=null;for(const u of t)try{const c=await u._get(a);if(c){let h;if(typeof c=="string"){const d=await WS(e,{idToken:c}).catch(()=>{});if(!d)break;h=await Uo._fromGetAccountInfoResponse(e,d,c)}else h=Uo._fromJSON(e,c);u!==s&&(o=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Bg(s,e,n):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new Bg(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($W(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OW(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UW(e))return"Blackberry";if(zW(e))return"Webos";if(BW(e))return"Safari";if((e.includes("chrome/")||LW(e))&&!e.includes("edge/"))return"Chrome";if(VW(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function OW(r=ts()){return/firefox\//i.test(r)}function BW(r=ts()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LW(r=ts()){return/crios\//i.test(r)}function $W(r=ts()){return/iemobile/i.test(r)}function VW(r=ts()){return/android/i.test(r)}function UW(r=ts()){return/blackberry/i.test(r)}function zW(r=ts()){return/webos/i.test(r)}function _F(r=ts()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function bfe(r=ts()){var e;return _F(r)&&!!((e=window.navigator)!=null&&e.standalone)}function wfe(){return yae()&&document.documentMode===10}function jW(r=ts()){return _F(r)||VW(r)||zW(r)||UW(r)||/windows phone/i.test(r)||$W(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qW(r,e=[]){let t;switch(r){case"Browser":t=w5(ts());break;case"Worker":t=`${w5(ts())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fp}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xfe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _fe(r,e={}){return $d(r,"GET","/v2/passwordPolicy",Ld(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Afe=6;class Efe{constructor(e){var n;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Afe,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sfe{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new x5(this),this.idTokenSubscription=new x5(this),this.beforeStateQueue=new xfe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DW,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Zu(t)),this._initializationPromise=this.queue(async()=>{var n,i,s;if(!this._deleted&&(this.persistenceManager=await Bg.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await WS(this,{idToken:e}),n=await Uo._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(xa(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=n==null?void 0:n._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(n=l.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return ft(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await KS(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nfe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xa(this.app))return Promise.reject(sc(this));const t=e?Wn(e):null;return t&&ft(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ft(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xa(this.app)?Promise.reject(sc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xa(this.app)?Promise.reject(sc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zu(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _fe(this),t=new Efe(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fx("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await yfe(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Zu(e)||this._popupRedirectResolver;ft(t,this,"argument-error"),this.redirectPersistenceManager=await Bg.create(this,[Zu(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ft(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,n,i);return()=>{a=!0,l()}}else{const l=e.addObserver(t);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ft(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qW(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var t;if(xa(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&efe(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function yp(r){return Wn(r)}class x5{constructor(e){this.auth=e,this.observer=null,this.addObserver=Tae(t=>this.observer=t)}get next(){return ft(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HC={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Tfe(r){HC=r}function HW(r){return HC.loadJS(r)}function Cfe(){return HC.recaptchaEnterpriseScript}function Nfe(){return HC.gapiScript}function Dfe(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Mfe{constructor(){this.enterprise=new Ife}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ife{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Pfe="recaptcha-enterprise",GW="NO_RECAPTCHA";class Rfe{constructor(e){this.type=Pfe,this.auth=yp(e)}async verify(e="verify",t=!1){async function n(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{cfe(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new ufe(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,a(u.siteKey)}}).catch(l=>{o(l)})})}function i(s,a,o){const l=window.grecaptcha;g5(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{a(u)}).catch(()=>{a(GW)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Mfe().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{n(this.auth).then(o=>{if(!t&&g5(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Cfe();l.length!==0&&(l+=o),HW(l).then(()=>{i(o,s,a)}).catch(u=>{a(u)})}}).catch(o=>{a(o)})})}}async function _5(r,e,t,n=!1,i=!1){const s=new Rfe(r);let a;if(i)a=GW;else try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const o={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function pP(r,e,t,n,i){var s;if((s=r._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await _5(r,e,t,t==="getOobCode");return n(r,a)}else return n(r,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await _5(r,e,t,t==="getOobCode");return n(r,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kfe(r,e){const t=pC(r,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Zm(s,e??{}))return i;Xo(i,"already-initialized")}return t.initialize({options:e})}function Ffe(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(Zu);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Ofe(r,e,t){const n=yp(r);ft(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,s=WW(e),{host:a,port:o}=Bfe(e),l=o===null?"":`:${o}`,u={url:`${s}//${a}${l}/`},c=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){ft(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),ft(Zm(u,n.config.emulator)&&Zm(c,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=c,n.settings.appVerificationDisabledForTesting=!0,dp(a)?(yk(`${s}//${a}${l}`),bk("Auth",!0)):Lfe()}function WW(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Bfe(r){const e=WW(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:A5(n.substr(s.length+1))}}else{const[s,a]=n.split(":");return{host:s,port:A5(a)}}}function A5(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function Lfe(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ju("not implemented")}_getIdTokenResponse(e){return Ju("not implemented")}_linkToIdToken(e,t){return Ju("not implemented")}_getReauthenticationResolver(e){return Ju("not implemented")}}async function $fe(r,e){return $d(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vfe(r,e){return Zx(r,"POST","/v1/accounts:signInWithPassword",Ld(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ufe(r,e){return Zx(r,"POST","/v1/accounts:signInWithEmailLink",Ld(r,e))}async function zfe(r,e){return Zx(r,"POST","/v1/accounts:signInWithEmailLink",Ld(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1 extends AF{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new I1(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new I1(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pP(e,t,"signInWithPassword",Vfe);case"emailLink":return Ufe(e,{email:this._email,oobCode:this._password});default:Xo(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pP(e,n,"signUpPassword",$fe);case"emailLink":return zfe(e,{idToken:t,email:this._email,oobCode:this._password});default:Xo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lg(r,e){return Zx(r,"POST","/v1/accounts:signInWithIdp",Ld(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jfe="http://localhost";class ap extends AF{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ap(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...s}=t;if(!n||!i)return null;const a=new ap(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Lg(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Lg(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Lg(e,t)}buildRequest(){const e={requestUri:jfe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ox(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qfe(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Hfe(r){const e=Wy(Ky(r)).link,t=e?Wy(Ky(e)).deep_link_id:null,n=Wy(Ky(r)).deep_link_id;return(n?Wy(Ky(n)).link:null)||n||t||e||r}class EF{constructor(e){const t=Wy(Ky(e)),n=t.apiKey??null,i=t.oobCode??null,s=qfe(t.mode??null);ft(n&&i&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Hfe(e);try{return new EF(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(){this.providerId=Q0.PROVIDER_ID}static credential(e,t){return I1._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=EF.parseLink(t);return ft(n,"argument-error"),I1._fromEmailAndCode(e,n.code,n.tenantId)}}Q0.PROVIDER_ID="password";Q0.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Q0.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KW{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_ extends KW{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc extends e_{constructor(){super("facebook.com")}static credential(e){return ap._fromParams({providerId:Yc.PROVIDER_ID,signInMethod:Yc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yc.credentialFromTaggedObject(e)}static credentialFromError(e){return Yc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yc.credential(e.oauthAccessToken)}catch{return null}}}Yc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends e_{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ap._fromParams({providerId:Qc.PROVIDER_ID,signInMethod:Qc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qc.credentialFromTaggedObject(e)}static credentialFromError(e){return Qc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Qc.credential(t,n)}catch{return null}}}Qc.GOOGLE_SIGN_IN_METHOD="google.com";Qc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc extends e_{constructor(){super("github.com")}static credential(e){return ap._fromParams({providerId:Jc.PROVIDER_ID,signInMethod:Jc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jc.credentialFromTaggedObject(e)}static credentialFromError(e){return Jc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jc.credential(e.oauthAccessToken)}catch{return null}}}Jc.GITHUB_SIGN_IN_METHOD="github.com";Jc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc extends e_{constructor(){super("twitter.com")}static credential(e,t){return ap._fromParams({providerId:Zc.PROVIDER_ID,signInMethod:Zc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Zc.credentialFromTaggedObject(e)}static credentialFromError(e){return Zc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Zc.credential(t,n)}catch{return null}}}Zc.TWITTER_SIGN_IN_METHOD="twitter.com";Zc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gfe(r,e){return Zx(r,"POST","/v1/accounts:signUp",Ld(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const s=await Uo._fromIdTokenResponse(e,n,i),a=E5(n);return new op({user:s,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=E5(n);return new op({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function E5(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS extends eu{constructor(e,t,n,i){super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,XS.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new XS(e,t,n,i)}}function XW(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?XS._fromErrorAndOperation(r,s,e,n):s})}async function Wfe(r,e,t=!1){const n=await M1(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return op._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kfe(r,e,t=!1){const{auth:n}=r;if(xa(n.app))return Promise.reject(sc(n));const i="reauthenticate";try{const s=await M1(r,XW(n,i,e,r),t);ft(s.idToken,n,"internal-error");const a=xF(s.idToken);ft(a,n,"internal-error");const{sub:o}=a;return ft(r.uid===o,n,"user-mismatch"),op._forOperation(r,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Xo(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YW(r,e,t=!1){if(xa(r.app))return Promise.reject(sc(r));const n="signIn",i=await XW(r,n,e),s=await op._fromIdTokenResponse(r,n,i);return t||await r._updateCurrentUser(s.user),s}async function Xfe(r,e){return YW(yp(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QW(r){const e=yp(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Yfe(r,e,t){if(xa(r.app))return Promise.reject(sc(r));const n=yp(r),a=await pP(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Gfe).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&QW(r),l}),o=await op._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(o.user),o}function Qfe(r,e,t){return xa(r.app)?Promise.reject(sc(r)):Xfe(Wn(r),Q0.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&QW(r),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JW(r,e){return Wn(r).setPersistence(e)}function Jfe(r,e,t,n){return Wn(r).onIdTokenChanged(e,t,n)}function Zfe(r,e,t){return Wn(r).beforeAuthStateChanged(e,t)}const YS="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZW{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(YS,"1"),this.storage.removeItem(YS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eme=1e3,tme=10;class eK extends ZW{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jW(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(n);!t&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);wfe()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,tme):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},eme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}eK.type="LOCAL";const SF=eK;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tK extends ZW{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}tK.type="SESSION";const rK=tK;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rme(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const n=new GC(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(a).map(async u=>u(t.origin,s)),l=await rme(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}GC.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TF(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nme{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const u=TF("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(d.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(){return window}function ime(r){Wl().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nK(){return typeof Wl().WorkerGlobalScope<"u"&&typeof Wl().importScripts=="function"}async function sme(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ame(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function ome(){return nK()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iK="firebaseLocalStorageDb",lme=1,QS="firebaseLocalStorage",sK="fbase_key";class t_{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function WC(r,e){return r.transaction([QS],e?"readwrite":"readonly").objectStore(QS)}function ume(){const r=indexedDB.deleteDatabase(iK);return new t_(r).toPromise()}function gP(){const r=indexedDB.open(iK,lme);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(QS,{keyPath:sK})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(QS)?e(n):(n.close(),await ume(),e(await gP()))})})}async function S5(r,e,t){const n=WC(r,!0).put({[sK]:e,value:t});return new t_(n).toPromise()}async function cme(r,e){const t=WC(r,!1).get(e),n=await new t_(t).toPromise();return n===void 0?null:n.value}function T5(r,e){const t=WC(r,!0).delete(e);return new t_(t).toPromise()}const hme=800,dme=3;class aK{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gP(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>dme)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nK()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=GC._getInstance(ome()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await sme(),!this.activeServiceWorker)return;this.sender=new nme(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ame()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gP();return await S5(e,YS,"1"),await T5(e,YS),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>S5(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>cme(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>T5(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=WC(i,!1).getAll();return new t_(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aK.type="LOCAL";const fme=aK;new Jx(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mme(r,e){return e?Zu(e):(ft(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF extends AF{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lg(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Lg(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Lg(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function pme(r){return YW(r.auth,new CF(r),r.bypassAuthState)}function gme(r){const{auth:e,user:t}=r;return ft(t,e,"internal-error"),Kfe(t,new CF(r),r.bypassAuthState)}async function vme(r){const{auth:e,user:t}=r;return ft(t,e,"internal-error"),Wfe(t,new CF(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oK{constructor(e,t,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pme;case"linkViaPopup":case"linkViaRedirect":return vme;case"reauthViaPopup":case"reauthViaRedirect":return gme;default:Xo(this.auth,"internal-error")}}resolve(e){_c(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_c(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yme=new Jx(2e3,1e4);class bg extends oK{constructor(e,t,n,i,s){super(e,t,i,s),this.provider=n,this.authWindow=null,this.pollId=null,bg.currentPopupAction&&bg.currentPopupAction.cancel(),bg.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ft(e,this.auth,"internal-error"),e}async onExecution(){_c(this.filter.length===1,"Popup operations only handle one event");const e=TF();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Gl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Gl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bg.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if((n=(t=this.authWindow)==null?void 0:t.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yme.get())};e()}}bg.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bme="pendingRedirect",VE=new Map;class wme extends oK{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=VE.get(this.auth._key());if(!e){try{const n=await xme(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}VE.set(this.auth._key(),e)}return this.bypassAuthState||VE.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xme(r,e){const t=Eme(e),n=Ame(r);if(!await n._isAvailable())return!1;const i=await n._get(t)==="true";return await n._remove(t),i}function _me(r,e){VE.set(r._key(),e)}function Ame(r){return Zu(r._redirectPersistence)}function Eme(r){return $E(bme,r.config.apiKey,r.name)}async function Sme(r,e,t=!1){if(xa(r.app))return Promise.reject(sc(r));const n=yp(r),i=mme(n,e),a=await new wme(n,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tme=10*60*1e3;class Cme{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Nme(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!lK(e)){const i=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";t.onError(Gl(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Tme&&this.cachedEventUids.clear(),this.cachedEventUids.has(C5(e))}saveEventToCache(e){this.cachedEventUids.add(C5(e)),this.lastProcessedEventTime=Date.now()}}function C5(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function lK({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Nme(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lK(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dme(r,e={}){return $d(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mme=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ime=/^https?/;async function Pme(r){if(r.config.emulator)return;const{authorizedDomains:e}=await Dme(r);for(const t of e)try{if(Rme(t))return}catch{}Xo(r,"unauthorized-domain")}function Rme(r){const e=fP(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const a=new URL(r);return a.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===n}if(!Ime.test(t))return!1;if(Mme.test(r))return n===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kme=new Jx(3e4,6e4);function N5(){const r=Wl().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function Fme(r){return new Promise((e,t)=>{var i,s,a;function n(){N5(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{N5(),t(Gl(r,"network-request-failed"))},timeout:kme.get()})}if((s=(i=Wl().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((a=Wl().gapi)!=null&&a.load)n();else{const o=Dfe("iframefcb");return Wl()[o]=()=>{gapi.load?n():t(Gl(r,"network-request-failed"))},HW(`${Nfe()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw UE=null,e})}let UE=null;function Ome(r){return UE=UE||Fme(r),UE}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bme=new Jx(5e3,15e3),Lme="__/auth/iframe",$me="emulator/auth/iframe",Vme={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ume=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zme(r){const e=r.config;ft(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?wF(e,$me):`https://${r.config.authDomain}/${Lme}`,n={apiKey:e.apiKey,appName:r.name,v:fp},i=Ume.get(r.config.apiHost);i&&(n.eid=i);const s=r._getFrameworks();return s.length&&(n.fw=s.join(",")),`${t}?${Ox(n).slice(1)}`}async function jme(r){const e=await Ome(r),t=Wl().gapi;return ft(t,r,"internal-error"),e.open({where:document.body,url:zme(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vme,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const a=Gl(r,"network-request-failed"),o=Wl().setTimeout(()=>{s(a)},Bme.get());function l(){Wl().clearTimeout(o),i(n)}n.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qme={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Hme=500,Gme=600,Wme="_blank",Kme="http://localhost";class D5{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Xme(r,e,t,n=Hme,i=Gme){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l={...qme,width:n.toString(),height:i.toString(),top:s,left:a},u=ts().toLowerCase();t&&(o=LW(u)?Wme:t),OW(u)&&(e=e||Kme,l.scrollbars="yes");const c=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(bfe(u)&&o!=="_self")return Yme(e||"",o),new D5(null);const h=window.open(e||"",o,c);ft(h,r,"popup-blocked");try{h.focus()}catch{}return new D5(h)}function Yme(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qme="__/auth/handler",Jme="emulator/auth/handler",Zme=encodeURIComponent("fac");async function M5(r,e,t,n,i,s){ft(r.config.authDomain,r,"auth-domain-config-required"),ft(r.config.apiKey,r,"invalid-api-key");const a={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:fp,eventId:i};if(e instanceof KW){e.setDefaultLanguage(r.languageCode),a.providerId=e.providerId||"",Sae(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,h]of Object.entries({}))a[c]=h}if(e instanceof e_){const c=e.getScopes().filter(h=>h!=="");c.length>0&&(a.scopes=c.join(","))}r.tenantId&&(a.tid=r.tenantId);const o=a;for(const c of Object.keys(o))o[c]===void 0&&delete o[c];const l=await r._getAppCheckToken(),u=l?`#${Zme}=${encodeURIComponent(l)}`:"";return`${epe(r)}?${Ox(o).slice(1)}${u}`}function epe({config:r}){return r.emulator?wF(r,Jme):`https://${r.authDomain}/${Qme}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="webStorageSupport";class tpe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rK,this._completeRedirectFn=Sme,this._overrideRedirectResult=_me}async _openPopup(e,t,n,i){var a;_c((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await M5(e,t,n,fP(),i);return Xme(e,s,TF())}async _openRedirect(e,t,n,i){await this._originValidation(e);const s=await M5(e,t,n,fP(),i);return ime(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(_c(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await jme(e),n=new Cme(e);return t.register("authEvent",i=>(ft(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(VN,{type:VN},i=>{var a;const s=(a=i==null?void 0:i[0])==null?void 0:a[VN];s!==void 0&&t(!!s),Xo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Pme(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jW()||BW()||_F()}}const rpe=tpe;var I5="@firebase/auth",P5="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class npe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ft(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ipe(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function spe(r){ep(new gd("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;ft(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:a,authDomain:o,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qW(r)},u=new Sfe(n,i,s,l);return Ffe(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),ep(new gd("auth-internal",e=>{const t=yp(e.getProvider("auth").getImmediate());return(n=>new npe(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ul(I5,P5,ipe(r)),Ul(I5,P5,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ape=5*60,ope=Dj("authIdTokenMaxAge")||ape;let R5=null;const lpe=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>ope)return;const i=t==null?void 0:t.token;R5!==i&&(R5=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function upe(r=_k()){const e=pC(r,"auth");if(e.isInitialized())return e.getImmediate();const t=kfe(r,{popupRedirectResolver:rpe,persistence:[fme,SF,rK]}),n=Dj("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const a=lpe(s.toString());Zfe(t,a,()=>a(t.currentUser)),Jfe(t,o=>a(o))}}const i=Tj("auth");return i&&Ofe(t,`http://${i}`),t}function cpe(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}Tfe({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=i=>{const s=Gl("internal-error");s.customData=i,t(s)},n.type="text/javascript",n.charset="UTF-8",cpe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});spe("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uK="firebasestorage.googleapis.com",hpe="storageBucket",dpe=2*60*1e3,fpe=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends eu{constructor(e,t,n=0){super(UN(e),`Firebase Storage: ${t} (${UN(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tu.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return UN(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Yl;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Yl||(Yl={}));function UN(r){return"storage/"+r}function mpe(){const r="An unknown error occurred, please check the error payload for server response.";return new tu(Yl.UNKNOWN,r)}function ppe(){return new tu(Yl.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gpe(){return new tu(Yl.CANCELED,"User canceled the upload/download.")}function vpe(r){return new tu(Yl.INVALID_URL,"Invalid URL '"+r+"'.")}function ype(r){return new tu(Yl.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function k5(r){return new tu(Yl.INVALID_ARGUMENT,r)}function cK(){return new tu(Yl.APP_DELETED,"The Firebase app was deleted.")}function bpe(r){return new tu(Yl.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=zo.makeFromUrl(e,t)}catch{return new zo(e,"")}if(n.path==="")return n;throw ype(e)}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";function s(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function u(E){E.path_=decodeURIComponent(E.path)}const c="v[A-Za-z0-9_]+",h=t.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},g=t===uK?"(?:storage.googleapis.com|storage.cloud.google.com)":t,b="([^?#]*)",v=new RegExp(`^https?://${g}/${i}/${b}`,"i"),y=[{regex:o,indices:l,postModify:s},{regex:f,indices:p,postModify:u},{regex:v,indices:{bucket:1,path:2},postModify:u}];for(let E=0;E<y.length;E++){const w=y[E],A=w.regex.exec(e);if(A){const T=A[w.indices.bucket];let S=A[w.indices.path];S||(S=""),n=new zo(T,S),w.postModify(n);break}}if(n==null)throw vpe(e);return n}}class wpe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xpe(r,e,t){let n=1,i=null,s=null,a=!1,o=0;function l(){return o===2}let u=!1;function c(...b){u||(u=!0,e.apply(null,b))}function h(b){i=setTimeout(()=>{i=null,r(f,l())},b)}function d(){s&&clearTimeout(s)}function f(b,...v){if(u){d();return}if(b){d(),c.call(null,b,...v);return}if(l()||a){d(),c.call(null,b,...v);return}n<64&&(n*=2);let y;o===1?(o=2,y=0):y=(n+Math.random())*1e3,h(y)}let p=!1;function g(b){p||(p=!0,d(),!u&&(i!==null?(b||(o=2),clearTimeout(i),h(0)):b||(o=1)))}return h(0),s=setTimeout(()=>{a=!0,g(!0)},t),g}function _pe(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ape(r){return r!==void 0}function F5(r,e,t,n){if(n<e)throw k5(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw k5(`Invalid value for '${r}'. Expected ${t} or less.`)}function Epe(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const i=e(n)+"="+e(r[n]);t=t+i+"&"}return t=t.slice(0,-1),t}var JS;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(JS||(JS={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Spe(r,e){const t=r>=500&&r<600,i=[408,429].indexOf(r)!==-1,s=e.indexOf(r)!==-1;return t||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tpe{constructor(e,t,n,i,s,a,o,l,u,c,h,d=!0,f=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=h,this.retry=d,this.isUsingEmulator=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,g)=>{this.resolve_=p,this.reject_=g,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new fA(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===JS.NO_ERROR,l=s.getStatus();if(!o||Spe(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===JS.ABORT;n(!1,new fA(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;n(!0,new fA(u,s))})},t=(n,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());Ape(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=mpe();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(i.canceled){const l=this.appDelete_?cK():gpe();a(l)}else{const l=ppe();a(l)}};this.canceled_?t(!1,new fA(!1,null,!0)):this.backoffId_=xpe(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_pe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class fA{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Cpe(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function Npe(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Dpe(r,e){e&&(r["X-Firebase-GMPID"]=e)}function Mpe(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function Ipe(r,e,t,n,i,s,a=!0,o=!1){const l=Epe(r.urlParams),u=r.url+l,c=Object.assign({},r.headers);return Dpe(c,e),Cpe(c,t),Npe(c,s),Mpe(c,n),new Tpe(u,r.method,c,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,i,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ppe(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function Rpe(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,t){this._service=e,t instanceof zo?this._location=t:this._location=zo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ZS(e,t)}get root(){const e=new zo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Rpe(this._location.path)}get storage(){return this._service}get parent(){const e=Ppe(this._location.path);if(e===null)return null;const t=new zo(this._location.bucket,e);return new ZS(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw bpe(e)}}function O5(r,e){const t=e==null?void 0:e[hpe];return t==null?null:zo.makeFromBucketSpec(t,r)}function kpe(r,e,t,n={}){r.host=`${e}:${t}`;const i=dp(e);i&&(yk(`https://${r.host}/b`),bk("Storage",!0)),r._isUsingEmulator=!0,r._protocol=i?"https":"http";const{mockUserToken:s}=n;s&&(r._overrideAuthToken=typeof s=="string"?s:Mj(s,r.app.options.projectId))}class Fpe{constructor(e,t,n,i,s,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=uK,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=dpe,this._maxUploadRetryTime=fpe,this._requests=new Set,i!=null?this._bucket=zo.makeFromBucketSpec(i,this._host):this._bucket=O5(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=zo.makeFromBucketSpec(this._url,e):this._bucket=O5(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){F5("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){F5("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(xa(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ZS(this,e)}_makeRequest(e,t,n,i,s=!0){if(this._deleted)return new wpe(cK());{const a=Ipe(e,this._appId,n,i,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const B5="@firebase/storage",L5="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hK="storage";function Ope(r=_k(),e){r=Wn(r);const n=pC(r,hK).getImmediate({identifier:e}),i=Cj("storage");return i&&Bpe(n,...i),n}function Bpe(r,e,t,n={}){kpe(r,e,t,n)}function Lpe(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),i=r.getProvider("app-check-internal");return new Fpe(t,n,i,e,fp)}function $pe(){ep(new gd(hK,Lpe,"PUBLIC").setMultipleInstances(!0)),Ul(B5,L5,""),Ul(B5,L5,"esm2020")}$pe();const Vpe={apiKey:"AIzaSyCuCYH38ZqKbtPYPR2ED1nMdD6yBuo1ReA",authDomain:"shop-d542c.firebaseapp.com",projectId:"shop-d542c",storageBucket:"shop-d542c.firebasestorage.app",messagingSenderId:"592347281413",appId:"1:592347281413:web:ed7c8752b195dcbb02846c",measurementId:"G-DFV2PBV8X2"},NF=Rj(Vpe),eT=upe(NF),Ji=Pce(NF);Ope(NF);const Upe={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},zpe=15;function jpe(){const[r,e]=he.useState(null),[t,n]=he.useState(!1),[i,s]=he.useState(null),[a,o]=he.useState(null),[l,u]=he.useState(""),[c,h]=he.useState(""),[d,f]=he.useState("idle"),[p,g]=he.useState([]),[b,v]=he.useState(!0),x=fd();he.useEffect(()=>{const T=wc(Ji,"paperSummaries"),S=qx(T,oF("createdAt","desc"),zce(15)),N=Gce(S,D=>{const _=D.docs.map(M=>({id:M.id,...M.data()}));g(_),v(!1)},D=>{console.error("   :",D),v(!1)});return()=>N()},[]);const y=T=>T?T.toDate?T.toDate().toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):new Date(T).toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):" ",E=T=>{var N;const S=(N=T.target.files)==null?void 0:N[0];S&&(S.type==="application/pdf"?(e(S),u(S.name.replace(".pdf","")),o(null)):(o("PDF   ."),e(null)))},w=async()=>{if(!r){o("PDF  .");return}n(!0),o(null),s(null);try{const T=await Wde(r);if(!T||T.trim().length<100)throw new Error("   .  PDF .");const S=await Yde(T);s(S.summary),h(S.method)}catch(T){o(T.message||"    ."),console.error(" :",T)}finally{n(!1)}},A=async()=>{if(!i){o("  .");return}if(!(x!=null&&x.email)){o("  .");return}try{f("loading"),await BC(wc(Ji,"paperSummaries"),{title:l||"  ",summary:i,method:c,authorEmail:x.email,authorName:x.username||x.email.split("@")[0],createdAt:ic(),publishedAt:new Date().toISOString()}),f("success"),setTimeout(()=>f("idle"),2500)}catch(T){console.error("  :",T),o("    ."),f("error"),setTimeout(()=>f("idle"),3e3)}};return R.jsx("div",{className:"min-h-screen bg-white dark:bg-dark-50 pt-24 pb-12",children:R.jsxs(Ge.div,{className:"max-w-4xl mx-auto px-4",variants:Upe,initial:"hidden",animate:"visible",children:[R.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"   AI"}),R.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"PDF   AI   ."}),R.jsxs(Ge.div,{className:"bg-gray-50 dark:bg-dark-100 rounded-lg p-8 mb-8 border-2 border-dashed border-blue-400",whileHover:{scale:1.02},children:[R.jsxs("div",{className:"text-center",children:[R.jsx("input",{type:"file",accept:".pdf",onChange:E,className:"hidden",id:"pdf-upload"}),R.jsxs("label",{htmlFor:"pdf-upload",className:"cursor-pointer block",children:[R.jsx("div",{className:"text-6xl mb-4",children:""}),R.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"PDF    "}),R.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["( ",zpe," )"]})]})]}),r&&R.jsx("div",{className:"mt-6 p-4 bg-blue-100 dark:bg-blue-900/30 rounded-lg border border-blue-400",children:R.jsxs("p",{className:"text-blue-900 dark:text-blue-100",children:[" : ",R.jsx("strong",{children:r.name})]})})]}),R.jsxs("div",{className:"flex gap-4 mb-8",children:[R.jsx(Ge.button,{onClick:w,disabled:!r||t,whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-bold py-3 px-6 rounded-lg transition",children:t?"   ...":" AI "}),R.jsx(Ge.button,{onClick:()=>{e(null),u(""),s(null),o(null)},whileHover:{scale:1.05},className:"bg-gray-400 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition",children:" "})]}),a&&R.jsxs(Ge.div,{className:"bg-red-100 dark:bg-red-900/30 border border-red-400 text-red-700 dark:text-red-200 px-6 py-4 rounded-lg mb-8",initial:{opacity:0},animate:{opacity:1},children:[R.jsx("strong",{children:":"})," ",a]}),i&&R.jsxs(Ge.div,{className:"bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 p-6 rounded-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[R.jsxs("div",{className:"flex items-center mb-4",children:[R.jsx("span",{className:"text-2xl mr-3",children:""}),R.jsxs("div",{children:[R.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:l}),R.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[": ",c==="AI"?" AI  (Hugging Face)":"   "]})]})]}),R.jsx("div",{className:"bg-white dark:bg-dark-100 p-4 rounded-lg",children:R.jsx("p",{className:"text-gray-800 dark:text-gray-200 leading-relaxed",children:i})}),R.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[R.jsx(Ge.button,{onClick:()=>{const T=document.createElement("a");T.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(i)),T.setAttribute("download",`${l}_summary.txt`),T.style.display="none",document.body.appendChild(T),T.click(),document.body.removeChild(T)},whileHover:{scale:1.05},className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded transition text-sm",children:"  "}),R.jsx(Ge.button,{onClick:()=>{navigator.clipboard.writeText(i),alert(" !")},whileHover:{scale:1.05},className:"bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded transition text-sm",children:" "}),R.jsx(Ge.button,{onClick:A,disabled:d==="loading"||!i,whileHover:{scale:i?1.05:1},className:`py-2 px-4 rounded transition text-sm font-semibold ${d==="success"?"bg-emerald-600 text-white":d==="loading"?"bg-gray-400 text-gray-100":"bg-purple-600 hover:bg-purple-700 text-white"}`,children:d==="success"?"  ":d==="loading"?" ...":"  "})]}),!x&&R.jsx("p",{className:"text-xs text-yellow-600 mt-2",children:"     ."})]}),R.jsxs(Ge.div,{className:"mt-12 bg-gray-50 dark:bg-dark-100 rounded-lg p-6 border border-gray-200 dark:border-gray-800",initial:{opacity:0},animate:{opacity:1},children:[R.jsxs("div",{className:"flex items-center justify-between mb-4",children:[R.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"   "}),R.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:" 15 "})]}),b?R.jsx("p",{className:"text-sm text-gray-500",children:"  ..."}):p.length===0?R.jsx("p",{className:"text-sm text-gray-500",children:"   .   !"}):R.jsx("div",{className:"space-y-4",children:p.map(T=>R.jsxs("div",{className:"p-4 rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-dark-200",children:[R.jsxs("div",{className:"flex items-start justify-between gap-4",children:[R.jsxs("div",{children:[R.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:T.title}),R.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[T.authorName||" ","  ",y(T.createdAt||T.publishedAt)]})]}),R.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-200",children:T.method==="AI"?"AI ":"Rule "})]}),R.jsx("p",{className:"mt-3 text-sm text-gray-700 dark:text-gray-200 leading-relaxed whitespace-pre-wrap",children:T.summary})]},T.id))})]}),R.jsxs(Ge.div,{className:"mt-12 bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg border border-blue-200 dark:border-blue-800",initial:{opacity:0},whileInView:{opacity:1},children:[R.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"  "}),R.jsxs("ol",{className:"space-y-2 text-gray-700 dark:text-gray-300",children:[R.jsxs("li",{children:[R.jsx("strong",{children:"1."}),"   PDF  "]}),R.jsxs("li",{children:[R.jsx("strong",{children:"2."}),' "AI "  ']}),R.jsxs("li",{children:[R.jsx("strong",{children:"3."})," AI    "]}),R.jsxs("li",{children:[R.jsx("strong",{children:"4."}),"      "]})]}),R.jsx("div",{className:"mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/30 rounded border border-yellow-200 dark:border-yellow-800",children:R.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[" ",R.jsx("strong",{children:":"})," PDF   5 .       ."]})})]})]})})}function qpe(){var y;const[r,e]=he.useState([]),[t,n]=he.useState(!0),[i,s]=he.useState(""),[a,o]=he.useState(null),[l,u]=he.useState({title:"",category:((y=Up[0])==null?void 0:y.id)??1,content:""}),[c,h]=he.useState(!1),[d,f]=he.useState(!1),p=fd(),g=E=>E?typeof E=="string"?E:E.toDate?E.toDate().toLocaleDateString("ko-KR"):E instanceof Date?E.toLocaleDateString("ko-KR"):new Date(E).toLocaleDateString("ko-KR"):"",b=he.useCallback(async()=>{n(!0),s("");try{const E=qx(wc(Ji,"forumPosts"),oF("createdAt","desc")),A=(await OC(E)).docs.map(T=>{var N;const S=T.data();return{id:T.id,...S,createdAt:(N=S.createdAt)!=null&&N.toDate?S.createdAt.toDate():S.createdAt||new Date,replies:S.replies??0}});e(A)}catch(E){console.error("  :",E),s("  .    .")}finally{n(!1)}},[]);he.useEffect(()=>{b()},[b]);const v=async E=>{var w;if(E.preventDefault(),!l.title.trim()||!l.content.trim()){alert("  .");return}f(!0);try{const A=(p==null?void 0:p.username)||(p==null?void 0:p.email)||" ",T={title:l.title.trim(),content:l.content.trim(),category:Number(l.category),author:A,authorEmail:(p==null?void 0:p.email)||null,replies:0,createdAt:ic(),updatedAt:ic()},S=await BC(wc(Ji,"forumPosts"),T);console.log("   :",S.id);const N={id:S.id,...T,createdAt:new Date};e(D=>[N,...D]),u({title:"",category:((w=Up[0])==null?void 0:w.id)??1,content:""}),h(!1),alert(" .")}catch(A){console.error("   :",A),console.error(" :",A.code),console.error(" :",A.message),alert("  : "+A.message)}finally{f(!1)}},x=a?r.filter(E=>E.category===a):r;return R.jsxs("div",{className:"space-y-8 sm:space-y-12",children:[R.jsxs("div",{children:[R.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),R.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base",children:" ,  ,  ,        ."})]}),R.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[R.jsx("button",{onClick:()=>h(!c),className:"w-full sm:w-auto px-6 py-3 bg-blue-600 dark:bg-blue-600 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-700 transition font-medium text-sm sm:text-base",children:c?"":"  "}),R.jsx("button",{onClick:b,className:"w-full sm:w-auto px-6 py-3 border border-gray-300 dark:border-gray-600 rounded-lg text-sm sm:text-base font-medium hover:bg-gray-100 dark:hover:bg-gray-800",children:""})]}),c&&R.jsxs("form",{onSubmit:v,className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:""}),R.jsx("input",{type:"text",value:l.title,onChange:E=>u({...l,title:E.target.value}),className:"w-full bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:" "})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:""}),R.jsx("select",{value:l.category,onChange:E=>u({...l,category:parseInt(E.target.value)}),className:"w-full bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white",children:Up.map(E=>R.jsx("option",{value:E.id,children:E.name},E.id))})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:""}),R.jsx("textarea",{rows:"6",value:l.content,onChange:E=>u({...l,content:E.target.value}),className:"w-full bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 resize-none",placeholder:" "})]}),R.jsx("button",{type:"submit",disabled:d,className:"w-full bg-green-600 dark:bg-green-600 hover:bg-green-700 dark:hover:bg-green-700 disabled:bg-gray-500 text-white px-6 py-2 rounded font-bold transition text-sm sm:text-base",children:d?" ...":""})]}),R.jsxs("div",{className:"flex flex-wrap gap-2",children:[R.jsx("button",{onClick:()=>o(null),className:`px-3 sm:px-4 py-2 rounded transition text-sm sm:text-base ${a===null?"bg-blue-600 text-white":"bg-gray-200 dark:bg-dark-300 text-gray-900 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-dark-200"}`,children:""}),Up.map(E=>R.jsx("button",{onClick:()=>o(E.id),className:`px-3 sm:px-4 py-2 rounded transition text-sm sm:text-base ${a===E.id?"bg-blue-600 text-white":"bg-gray-200 dark:bg-dark-300 text-gray-900 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-dark-200"}`,children:E.name},E.id))]}),R.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[t&&R.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"  ..."}),!t&&x.length===0&&R.jsx("div",{className:"text-center py-10 text-gray-500 dark:text-gray-400 border border-dashed rounded-lg",children:"   ."}),!t&&x.map(E=>{var w;return R.jsx(Cr,{to:`/forum/${E.id}`,state:{post:E},children:R.jsx("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md transition cursor-pointer",children:R.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2",children:[R.jsxs("div",{className:"flex-1 min-w-0",children:[R.jsx("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:R.jsx("span",{className:"text-xs bg-gray-200 dark:bg-dark-300 text-gray-700 dark:text-gray-300 px-2 py-1 rounded",children:((w=Up.find(A=>A.id===E.category))==null?void 0:w.name)||""})}),R.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 break-words",children:E.title}),R.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-2 line-clamp-2",children:E.content}),R.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-2",children:[E.author,"  ",g(E.createdAt)]})]}),R.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 whitespace-nowrap",children:[" ",E.replies??0]})]})})},E.id)})]}),i&&R.jsx("p",{className:"text-sm text-red-500",children:i})]})}function Hpe(){var y,E,w;const{postId:r}=Lz();z0();const e=U0(),{isDark:t}=go(),n=fd(),[i,s]=he.useState(((y=e.state)==null?void 0:y.post)||null),[a,o]=he.useState(!((E=e.state)!=null&&E.post)),[l,u]=he.useState([]),[c,h]=he.useState(""),[d,f]=he.useState(""),p=A=>A?typeof A=="string"?A:A.toDate?A.toDate().toLocaleDateString("ko-KR"):A instanceof Date?A.toLocaleDateString("ko-KR"):new Date(A).toLocaleDateString("ko-KR"):"",g=he.useCallback(async()=>{var A;o(!0);try{const T=Ad(Ji,"forumPosts",r),S=await fH(T);if(S.exists()){const N=S.data();s({id:S.id,...N,createdAt:(A=N.createdAt)!=null&&A.toDate?N.createdAt.toDate():N.createdAt||new Date})}else s(null)}catch(T){console.error("  :",T),s(null)}finally{o(!1)}},[r]),b=he.useCallback(async()=>{try{const A=wc(Ji,"forumPosts",r,"replies"),T=qx(A,oF("createdAt","asc")),N=(await OC(T)).docs.map(D=>{var M;const _=D.data();return{id:D.id,..._,createdAt:(M=_.createdAt)!=null&&M.toDate?_.createdAt.toDate():_.createdAt||new Date}});u(N)}catch(A){console.error("  :",A)}},[r]);he.useEffect(()=>{var A;(A=e.state)!=null&&A.post||g()},[g,(w=e.state)==null?void 0:w.post]),he.useEffect(()=>{b()},[b]);const v=async A=>{if(A.preventDefault(),f(""),!c.trim()){f(" .");return}try{const T=wc(Ji,"forumPosts",r,"replies"),N={author:(n==null?void 0:n.username)||(n==null?void 0:n.email)||" ",authorEmail:(n==null?void 0:n.email)||null,content:c.trim(),likes:0,createdAt:ic()},_={id:(await BC(T,N)).id,...N,createdAt:new Date};u(I=>[...I,_]),h("");const M=Ad(Ji,"forumPosts",r);await mH(M,{replies:Wce(1),updatedAt:ic()}),s(I=>I&&{...I,replies:(I.replies||0)+1})}catch(T){console.error("  :",T),f("  .    .")}};if(a)return R.jsx("div",{className:`text-center py-12 ${t?"text-gray-300":"text-gray-700"}`,children:"  ..."});if(!i)return R.jsxs("div",{className:"text-center py-12",children:[R.jsx("h1",{className:`text-2xl font-bold mb-4 ${t?"text-white":"text-gray-900"}`,children:"   ."}),R.jsx(Cr,{to:"/forum",className:"text-blue-600 hover:text-blue-700 font-medium",children:" "})]});const x=Up.find(A=>A.id===(i==null?void 0:i.category));return R.jsxs("div",{className:"space-y-8",children:[R.jsxs(Ge.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[R.jsx(Cr,{to:"/forum",className:`inline-flex items-center gap-2 mb-4 transition ${t?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"}`,children:"  "}),R.jsxs("div",{className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[R.jsx("div",{className:"mb-3",children:R.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${t?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-700"}`,children:x==null?void 0:x.name})}),R.jsx("h1",{className:`text-3xl sm:text-4xl font-bold mb-4 ${t?"text-white":"text-gray-900"}`,children:i.title}),R.jsxs("div",{className:`flex flex-wrap gap-4 mb-6 pb-6 border-b ${t?"border-gray-700 text-gray-300":"border-gray-200 text-gray-600"} text-sm`,children:[R.jsxs("div",{children:[R.jsx("span",{className:"font-medium",children:":"})," ",i.author]}),R.jsxs("div",{children:[R.jsx("span",{className:"font-medium",children:":"})," ",p(i.createdAt)]}),R.jsxs("div",{children:[R.jsx("span",{className:"font-medium",children:":"})," ",i.replies||l.length,""]}),R.jsxs("div",{children:[R.jsx("span",{className:"font-medium",children:":"})," ",i.views||0,""]})]}),R.jsx("div",{className:`prose prose-sm ${t?"prose-invert":""} max-w-none mb-8`,children:R.jsx("div",{className:`${t?"text-gray-200":"text-gray-700"} leading-7 whitespace-pre-wrap`,children:i.content})})]})]}),R.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[R.jsx("h2",{className:`text-xl font-bold mb-4 ${t?"text-white":"text-gray-900"}`,children:" "}),R.jsxs("form",{onSubmit:v,className:"space-y-4",children:[R.jsx("textarea",{value:c,onChange:A=>h(A.target.value),placeholder:" ...",rows:"4",className:`w-full px-4 py-3 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`}),d&&R.jsx("p",{className:"text-sm text-red-400",children:d}),R.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:" "})]})]}),R.jsxs(Ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"space-y-4",children:[R.jsxs("h2",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:[" ",l.length,""]}),l.map(A=>R.jsxs(Ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`p-4 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[R.jsxs("div",{className:`flex justify-between items-start mb-2 ${t?"text-gray-300":"text-gray-600"} text-sm`,children:[R.jsxs("div",{children:[R.jsx("span",{className:"font-medium",children:A.author}),R.jsx("span",{className:"ml-4",children:p(A.createdAt)})]}),R.jsxs("button",{className:`transition ${t?"text-gray-400 hover:text-gray-200":"text-gray-400 hover:text-gray-600"}`,children:[" ",A.likes]})]}),R.jsx("p",{className:`${t?"text-gray-200":"text-gray-700"} leading-6`,children:A.content})]},A.id))]})]})}function Gpe(){const[r,e]=he.useState(""),t=I4.filter(n=>n.term.toLowerCase().includes(r.toLowerCase())||n.definition.toLowerCase().includes(r.toLowerCase()));return R.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[R.jsxs("div",{children:[R.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),R.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base mb-6",children:"      ."}),R.jsx("input",{type:"search",placeholder:"   ...",value:r,onChange:n=>e(n.target.value),className:"w-full max-w-md bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 text-sm sm:text-base"})]}),R.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[t.map((n,i)=>R.jsxs("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:shadow-md transition",children:[R.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 mb-2",children:n.term}),R.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm sm:text-base",children:n.definition})]},i)),t.length===0&&R.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8 text-sm sm:text-base",children:"  ."})]}),R.jsxs("div",{className:"bg-gray-100 dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 rounded-lg text-center text-gray-600 dark:text-gray-400 text-sm sm:text-base",children:[" ",I4.length,"   ",t.length,"  "]})]})}function Wpe(){return R.jsxs("div",{className:"space-y-8 sm:space-y-12",children:[R.jsxs("div",{children:[R.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),R.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base",children:"    , ,  ."})]}),R.jsxs("section",{children:[R.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:" "}),R.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:bN.textbooks.map((r,e)=>R.jsxs("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:shadow-md transition",children:[R.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 mb-1",children:r.title}),R.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:[r.authors," (",r.year,")"]})]},e))})]}),R.jsxs("section",{children:[R.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"  "}),R.jsx("div",{className:"space-y-3 sm:space-y-4",children:bN.databases.map((r,e)=>R.jsxs("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"block bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md transition",children:[R.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400",children:r.name}),R.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:r.desc}),R.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2 break-all",children:r.url})]},e))})]}),R.jsxs("section",{children:[R.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"   "}),R.jsx("div",{className:"space-y-3 sm:space-y-4",children:bN.tools.map((r,e)=>R.jsxs("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"block bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md transition",children:[R.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400",children:r.name}),R.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:r.desc}),R.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2 break-all",children:r.url})]},e))})]})]})}function Kpe(){const{isDark:r}=go(),e=fd(),[t,n]=he.useState({username:"",email:"",affiliation:"",bio:""}),[i,s]=he.useState(!1),[a,o]=he.useState(!0),[l,u]=he.useState(!1),[c,h]=he.useState("");he.useEffect(()=>{if(!(e!=null&&e.email)){o(!1);return}(async()=>{try{const g=Ad(Ji,"profiles",e.email),b=await fH(g),v={username:e.username||"",email:e.email,affiliation:"",bio:""};b.exists()?(n({...v,...b.data()}),console.log(" Firestore  :",e.email)):(n(v),console.log("   (Firestore )"))}catch(g){console.error(" Firestore  :",g),n({username:e.username,email:e.email||"",affiliation:"",bio:""})}finally{o(!1)}})()},[e==null?void 0:e.email,e==null?void 0:e.username]);const d=p=>{const{name:g,value:b}=p.target;n(v=>({...v,[g]:b}))},f=async p=>{p.preventDefault(),u(!0);try{await Hce(Ad(Ji,"profiles",e.email),{username:t.username,email:t.email,affiliation:t.affiliation,bio:t.bio,updatedAt:ic()}),console.log(" Firestore :",e.email),h("  ."),s(!1),setTimeout(()=>h(""),3e3)}catch(g){console.error("  :",g.code,g.message),h("  : "+g.message)}finally{u(!1)}};return e?a?R.jsx("div",{className:`text-center py-12 ${r?"text-gray-400":"text-gray-600"}`,children:"   ..."}):R.jsxs("div",{className:"max-w-2xl mx-auto",children:[R.jsx("h1",{className:`text-3xl font-bold mb-8 ${r?"text-white":"text-gray-900"}`,children:""}),c&&R.jsx("div",{className:`mb-4 p-4 rounded-lg ${c.includes("")?"bg-red-50 text-red-700 dark:bg-red-900 dark:text-red-200":"bg-green-50 text-green-700 dark:bg-green-900 dark:text-green-200"}`,children:c}),R.jsxs("div",{className:`rounded-lg p-8 ${r?"bg-gray-800":"bg-white"} border ${r?"border-gray-700":"border-gray-200"}`,children:[R.jsxs("div",{className:"flex justify-between items-center mb-6",children:[R.jsx("h2",{className:`text-xl font-bold ${r?"text-white":"text-gray-900"}`,children:" "}),R.jsx("button",{onClick:()=>s(!i),className:`px-4 py-2 rounded-lg transition ${r?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white`,children:i?"":""})]}),i?R.jsxs("form",{onSubmit:f,className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:`block text-sm font-medium mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:""}),R.jsx("input",{type:"text",name:"username",value:t.username,onChange:d,className:`w-full px-4 py-2 border rounded-lg ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),R.jsxs("div",{children:[R.jsx("label",{className:`block text-sm font-medium mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:""}),R.jsx("input",{type:"email",name:"email",value:t.email,onChange:d,disabled:!0,className:`w-full px-4 py-2 border rounded-lg opacity-50 cursor-not-allowed ${r?"bg-gray-700 border-gray-600 text-gray-400":"bg-gray-100 border-gray-300 text-gray-600"}`})]}),R.jsxs("div",{children:[R.jsx("label",{className:`block text-sm font-medium mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:" "}),R.jsx("input",{type:"text",name:"affiliation",value:t.affiliation,onChange:d,placeholder:",  ",className:`w-full px-4 py-2 border rounded-lg ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),R.jsxs("div",{children:[R.jsx("label",{className:`block text-sm font-medium mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:""}),R.jsx("textarea",{name:"bio",value:t.bio,onChange:d,placeholder:" ...",rows:"4",className:`w-full px-4 py-2 border rounded-lg ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),R.jsx("button",{type:"submit",disabled:l,className:`w-full py-2 px-4 rounded-lg font-medium text-white transition ${l?"bg-blue-400 cursor-not-allowed opacity-50":"bg-blue-600 hover:bg-blue-700"}`,children:l?" ...":""})]}):R.jsxs("div",{className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:""}),R.jsx("p",{className:`text-lg font-medium ${r?"text-white":"text-gray-900"}`,children:t.username})]}),R.jsxs("div",{children:[R.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:""}),R.jsx("p",{className:`text-lg font-medium ${r?"text-white":"text-gray-900"}`,children:t.email})]}),R.jsxs("div",{children:[R.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:" "}),R.jsx("p",{className:`text-lg font-medium ${r?"text-white":"text-gray-900"}`,children:t.affiliation||""})]}),R.jsxs("div",{children:[R.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:""}),R.jsx("p",{className:`text-lg font-medium ${r?"text-white":"text-gray-900"}`,children:t.bio||""})]}),R.jsx("hr",{className:r?"border-gray-700":"border-gray-200"}),R.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[R.jsxs(Cr,{to:"/bookmarks",className:`p-4 rounded-lg border text-center transition hover:shadow-md ${r?"bg-gray-700 border-gray-600 text-gray-200 hover:bg-gray-600":"bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100"}`,children:[R.jsx("p",{className:"text-2xl mb-1",children:""}),R.jsx("p",{className:"font-semibold",children:""})]}),R.jsxs(Cr,{to:"/notes",className:`p-4 rounded-lg border text-center transition hover:shadow-md ${r?"bg-gray-700 border-gray-600 text-gray-200 hover:bg-gray-600":"bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100"}`,children:[R.jsx("p",{className:"text-2xl mb-1",children:""}),R.jsx("p",{className:"font-semibold",children:""})]})]})]})]})]}):R.jsx("div",{className:`text-center py-12 ${r?"text-gray-400":"text-gray-600"}`,children:"   ."})}function Xpe(){const{isDark:r}=go(),e=fd(),[t,n]=he.useState([]),[i,s]=he.useState(!0),[a,o]=he.useState("");he.useEffect(()=>{if(!(e!=null&&e.email)){s(!1);return}l()},[e==null?void 0:e.email]);const l=async()=>{try{const c=qx(wc(Ji,"bookmarks"),cH("userEmail","==",e.email)),d=(await OC(c)).docs.map(f=>({id:f.id,...f.data()}));n(d),console.log("  :",e.email,":",d.length)}catch(c){console.error("   :",c),o("   .")}finally{s(!1)}},u=async c=>{try{const h=Ad(Ji,"bookmarks",c);await pH(h),n(d=>d.filter(f=>f.id!==c)),console.log("  :",c)}catch(h){o(h.message)}};return R.jsxs("div",{className:"max-w-4xl mx-auto",children:[R.jsx("h1",{className:`text-3xl font-bold mb-8 ${r?"text-white":"text-gray-900"}`,children:""}),a&&R.jsx("div",{className:`mb-4 p-4 rounded-lg ${r?"bg-red-900 text-red-200 border border-red-700":"bg-red-50 text-red-700 border border-red-200"}`,children:a}),i?R.jsx("div",{className:`text-center py-12 ${r?"text-gray-400":"text-gray-600"}`,children:" ..."}):t.length===0?R.jsxs("div",{className:`text-center py-12 ${r?"text-gray-400":"text-gray-600"}`,children:[R.jsx("p",{className:"mb-4",children:"  ."}),R.jsx(Cr,{to:"/concepts",className:`px-4 py-2 rounded-lg inline-block transition ${r?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white`,children:" "})]}):R.jsx("div",{className:"space-y-4",children:t.map(c=>R.jsxs("div",{className:`p-6 rounded-lg border transition ${r?"bg-gray-800 border-gray-700 hover:border-gray-600":"bg-white border-gray-200 hover:border-gray-300"}`,children:[R.jsxs("div",{className:"flex justify-between items-start gap-4",children:[R.jsxs("div",{className:"flex-1 min-w-0",children:[R.jsx("h2",{className:`text-xl font-bold mb-2 ${r?"text-white":"text-gray-900"}`,children:c.title}),R.jsxs("p",{className:`text-sm mb-3 ${r?"text-gray-400":"text-gray-600"}`,children:[": ",R.jsx("span",{className:"font-medium",children:c.type==="paper"?"":""})]}),R.jsx("p",{className:`line-clamp-2 ${r?"text-gray-300":"text-gray-700"}`,children:c.description})]}),R.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[R.jsx(Cr,{to:c.type==="paper"?`/papers/${c.slug}`:`/concepts/${c.slug}`,className:`px-4 py-2 rounded-lg transition ${r?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white text-sm`,children:""}),R.jsx("button",{onClick:()=>u(c.id),className:`px-4 py-2 rounded-lg transition ${r?"bg-red-600 hover:bg-red-700":"bg-red-500 hover:bg-red-600"} text-white text-sm`,children:""})]})]}),R.jsxs("p",{className:`text-xs mt-4 ${r?"text-gray-500":"text-gray-400"}`,children:[" : ",new Date(c.created_at).toLocaleDateString("ko-KR")]})]},c.id))})]})}function Ype(){const{isDark:r}=go(),e=fd(),[t,n]=he.useState([]),[i,s]=he.useState(null),[a,o]=he.useState(!1),[l,u]=he.useState(""),[c,h]=he.useState(""),[d,f]=he.useState(""),[p,g]=he.useState(!0),[b,v]=he.useState("");he.useEffect(()=>{if(!(e!=null&&e.email)){g(!1);return}(async()=>{try{const _=qx(wc(Ji,"notes"),cH("userEmail","==",e.email)),I=(await OC(_)).docs.map(V=>({id:V.id,...V.data()}));n(I),console.log("   :",e.email,":",I.length)}catch(_){console.log(" Firestore  :",_)}finally{g(!1)}})()},[e==null?void 0:e.email]);const x=()=>{o(!0),s(null),u(""),h(""),f("")},y=D=>{s(D.id),o(!1),u(D.title),h(D.content),f(D.tags.join(", "))},E=async()=>{if(!l.trim()){alert(" .");return}try{if(a){const _={id:(await BC(wc(Ji,"notes"),{title:l,content:c,tags:d.split(",").map(I=>I.trim()).filter(I=>I),userEmail:e.email,createdAt:ic(),updatedAt:ic()})).id,title:l,content:c,tags:d.split(",").map(I=>I.trim()).filter(I=>I),userEmail:e.email,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},M=[_,...t];n(M),o(!1),s(_.id),v("  !"),setTimeout(()=>v(""),2e3),console.log("  :",e.email,l)}else if(i){const D=Ad(Ji,"notes",i);await mH(D,{title:l,content:c,tags:d.split(",").map(M=>M.trim()).filter(M=>M),userEmail:e.email,updatedAt:ic()});const _=t.map(M=>M.id===i?{...M,title:l,content:c,tags:d.split(",").map(I=>I.trim()).filter(I=>I),updatedAt:new Date().toISOString()}:M);n(_),v("  !"),setTimeout(()=>v(""),2e3)}}catch(D){console.error("  :",D),v("  ."),setTimeout(()=>v(""),2e3)}},w=async D=>{if(confirm("  ?"))try{await pH(Ad(Ji,"notes",D));const _=t.filter(M=>M.id!==D);n(_),i===D&&(s(null),o(!1))}catch(_){console.error("  :",_),alert("  .")}},A=D=>new Date(D).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric"}),T=r?"bg-gray-800 border-gray-700":"bg-white border-gray-200",S=r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300",N=r?"text-gray-300":"text-gray-700";return R.jsxs("div",{className:"min-h-screen space-y-8",children:[b&&R.jsx(Ge.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`fixed top-20 right-4 px-6 py-3 rounded-lg shadow-lg font-semibold text-white z-50 ${b.includes("")?"bg-red-600":"bg-green-600"}`,children:b}),R.jsxs(Ge.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6},children:[R.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-indigo-600 to-blue-600 dark:from-indigo-400 dark:to-blue-400 bg-clip-text text-transparent",children:" "}),R.jsx("p",{className:`text-sm sm:text-base ${r?"text-gray-300":"text-gray-600"}`,children:", ,    "})]}),R.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[R.jsxs(Ge.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.6},className:`p-6 rounded-lg border ${T}`,children:[R.jsxs("div",{className:"flex justify-between items-center mb-4",children:[R.jsx("h2",{className:"text-xl font-bold",children:" "}),R.jsx("button",{onClick:x,className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium",children:"+  "})]}),R.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:t.length===0?R.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:" ."}):t.map(D=>R.jsxs("div",{onClick:()=>y(D),className:`p-3 rounded-lg cursor-pointer transition-all ${i===D.id?r?"bg-blue-900 border-blue-500":"bg-blue-100 border-blue-400":r?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} border`,children:[R.jsx("p",{className:"font-semibold text-sm truncate",children:D.title}),R.jsx("p",{className:`text-xs ${r?"text-gray-400":"text-gray-500"}`,children:A(D.updatedAt)})]},D.id))})]}),R.jsx(Ge.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:`p-6 rounded-lg border lg:col-span-2 ${T}`,children:a||i?R.jsxs("div",{className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{className:`block text-sm font-semibold mb-2 ${N}`,children:""}),R.jsx("input",{type:"text",value:l,onChange:D=>u(D.target.value),placeholder:"  ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${S}`})]}),R.jsxs("div",{children:[R.jsx("label",{className:`block text-sm font-semibold mb-2 ${N}`,children:" ( )"}),R.jsx("input",{type:"text",value:d,onChange:D=>f(D.target.value),placeholder:": , Kerr metric, ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${S}`})]}),R.jsxs("div",{children:[R.jsx("label",{className:`block text-sm font-semibold mb-2 ${N}`,children:""}),R.jsx("textarea",{value:c,onChange:D=>h(D.target.value),placeholder:"  ",rows:"12",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none ${S}`})]}),R.jsxs("div",{className:"flex gap-2 justify-end",children:[R.jsx("button",{onClick:()=>{o(!1),s(null)},className:`px-4 py-2 rounded-lg font-medium ${r?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"}`,children:""}),i&&R.jsx("button",{onClick:()=>w(i),className:"px-4 py-2 rounded-lg font-medium bg-red-600 hover:bg-red-700 text-white",children:""}),R.jsx("button",{onClick:E,className:"px-4 py-2 rounded-lg font-medium bg-blue-600 hover:bg-blue-700 text-white",children:""})]})]}):R.jsxs("div",{className:`text-center py-12 ${r?"text-gray-400":"text-gray-500"}`,children:[R.jsx("p",{className:"text-lg",children:"     "}),R.jsx("p",{className:"text-sm mt-2",children:" : ,  ,      !"})]})})]}),t.length>0&&R.jsxs(Ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`p-6 rounded-lg border ${T}`,children:[R.jsx("h3",{className:"text-lg font-bold mb-3",children:""}),R.jsx("div",{className:"flex flex-wrap gap-2",children:[...new Set(t.flatMap(D=>D.tags).sort())].map(D=>R.jsxs("button",{onClick:()=>{const _=t.filter(M=>M.tags.includes(D));_.length>0&&y(_[0])},className:`px-3 py-1 rounded-full text-sm font-medium transition-all ${r?"bg-gray-700 text-gray-200 hover:bg-blue-600":"bg-gray-200 text-gray-800 hover:bg-blue-500 hover:text-white"}`,children:["#",D]},D))})]})]})}function Qpe(){var D;const{isDark:r}=go(),[e,t]=he.useState("inflation"),[n,i]=he.useState(.5),[s,a]=he.useState(1),[o,l]=he.useState(!0),u=he.useRef(null),c=(_,M)=>{const I=_.canvas.width,V=_.canvas.height;_.fillStyle=r?"#111":"#fff",_.fillRect(0,0,I,V);const q=.2+M*2,P=I/2,L=V/2;_.strokeStyle=r?"#333":"#ddd",_.lineWidth=1;for(let z=-5;z<6;z++){const K=P+z*50*q,re=L-250*q,Q=L+250*q;_.beginPath(),_.moveTo(K,re),_.lineTo(K,Q),_.stroke();const O=L+z*50*q,te=P-250*q,W=P+250*q;_.beginPath(),_.moveTo(te,O),_.lineTo(W,O),_.stroke()}_.fillStyle=`rgba(100, 200, 255, ${.3+.2*Math.sin(M*5)})`;for(let z=0;z<30;z++){const K=z/30*Math.PI*2+M,re=80*q+Math.sin(M*3+z)*20,Q=P+Math.cos(K)*re,O=L+Math.sin(K)*re,te=3+Math.sin(M*2+z)*2;_.beginPath(),_.arc(Q,O,te,0,Math.PI*2),_.fill()}const $=5+M*10;_.fillStyle=`rgba(255, 100, 100, ${1-M})`,_.beginPath(),_.arc(P,L,$,0,Math.PI*2),_.fill(),_.strokeStyle=`rgba(100, 200, 255, ${.5-M*.3})`,_.lineWidth=2;for(let z=0;z<3;z++){const K=(50+z*40)*q;_.beginPath(),_.arc(P,L,K,0,Math.PI*2),_.stroke()}},h=(_,M)=>{const I=_.canvas.width,V=_.canvas.height,q=I/2,P=V/2;_.fillStyle=r?"#111":"#fff",_.fillRect(0,0,I,V),_.fillStyle=r?"#fff":"#000";for(let $=0;$<100;$++){const z=Math.sin($*12.9898)*43758.5453%I,K=Math.sin($*78.233)*43758.5453%V;_.fillRect(z,K,1,1)}for(let $=0;$<8;$++){const z=50+$*15,K=.1+$*.08,re=50+$*20+M*50;_.fillStyle=`hsla(${re}, 100%, 50%, ${K})`,_.beginPath(),_.arc(q,P,z,0,Math.PI*2),_.fill();for(let Q=0;Q<12;Q++){const O=Q/12*Math.PI*2+M*(3-$*.3),te=q+Math.cos(O)*z,W=P+Math.sin(O)*z+Math.sin(M*2+Q)*3;_.fillStyle=`hsla(${re}, 100%, 60%, 0.8)`,_.fillRect(te-2,W-1,4,2)}}const L=15;_.fillStyle="#000",_.beginPath(),_.arc(q,P,L,0,Math.PI*2),_.fill(),_.strokeStyle=`rgba(255, 150, 0, ${.6+.2*Math.sin(M*3)})`,_.lineWidth=3,_.beginPath(),_.arc(q,P,L*1.5,0,Math.PI*2),_.stroke(),_.strokeStyle="rgba(100, 200, 255, 0.7)",_.lineWidth=4;for(let $=0;$<3;$++){const z=$*40-40;_.beginPath(),_.moveTo(q+z,P-L-20),_.lineTo(q+z-15*Math.sin(M*2),P-L-100),_.stroke(),_.beginPath(),_.moveTo(q+z,P+L+20),_.lineTo(q+z+15*Math.sin(M*2),P+L+100),_.stroke()}},d=(_,M)=>{const I=_.canvas.width,V=_.canvas.height;_.fillStyle=r?"#111":"#fff",_.fillRect(0,0,I,V);const q=I/2-80+M*60,P=V/2;f(_,q,P,40,M*.5);const L=I/2+80-M*60,$=V/2;if(f(_,L,$,40,-M*.6),_.strokeStyle=`rgba(100, 150, 255, ${.2+.1*Math.sin(M*5)})`,_.lineWidth=1,_.beginPath(),_.moveTo(q+40,P),_.lineTo(L-40,$),_.stroke(),M>.5){_.fillStyle="rgba(255, 100, 100, 0.5)";const z=I/2+Math.sin(M*2)*30,K=V/2+Math.cos(M*2)*30;_.beginPath(),_.arc(z,K,50,0,Math.PI*2),_.fill()}},f=(_,M,I,V,q)=>{_.save(),_.translate(M,I),_.rotate(q),_.fillStyle=r?"rgba(255, 200, 100, 0.8)":"rgba(255, 180, 50, 0.7)",_.beginPath(),_.arc(0,0,V*.3,0,Math.PI*2),_.fill();for(let P=0;P<3;P++){_.strokeStyle=`rgba(${100+P*50}, ${150+P*30}, 255, 0.6)`,_.lineWidth=3,_.beginPath();const L=P/3*Math.PI*2;for(let $=0;$<20;$++){const z=L+$/20*Math.PI*3,K=$/20*V,re=Math.cos(z)*K,Q=Math.sin(z)*K;$===0?_.moveTo(re,Q):_.lineTo(re,Q)}_.stroke()}_.restore()},S=[{id:"inflation",name:" ",fn:c},{id:"bh-accretion",name:" ",fn:h},{id:"galaxy-merger",name:"  ",fn:d},{id:"ns-collision",name:"  ",fn:(_,M)=>{const I=_.canvas.width,V=_.canvas.height;_.fillStyle=r?"#111":"#fff",_.fillRect(0,0,I,V);const q=M%1,P=I/2,L=V/2;if(q<.5){const $=150*(1-q*2);_.fillStyle="rgba(100, 150, 255, 0.9)",_.beginPath(),_.arc(P-$,L,15,0,Math.PI*2),_.fill(),_.fillStyle="rgba(255, 100, 100, 0.9)",_.beginPath(),_.arc(P+$,L,15,0,Math.PI*2),_.fill(),_.strokeStyle=`rgba(100, 200, 255, ${.5-q})`,_.lineWidth=2;for(let z=0;z<3;z++){const K=(50+z*40)*(1-q);_.beginPath(),_.arc(P,L,K,0,Math.PI*2),_.stroke()}}else{const $=(q-.5)*2;_.fillStyle=`rgba(255, 150, 0, ${1-$})`,_.beginPath(),_.arc(P,L,20*$,0,Math.PI*2),_.fill(),_.strokeStyle=`rgba(100, 200, 255, ${.8-$*.5})`,_.lineWidth=3;for(let z=0;z<5;z++){const K=50+z*30+$*100;_.beginPath(),_.arc(P,L,K,0,Math.PI*2),_.stroke()}for(let z=0;z<20;z++){const K=z/20*Math.PI*2,re=100*$,Q=P+Math.cos(K)*re,O=L+Math.sin(K)*re;_.fillStyle=`rgba(255, ${200-$*100}, 0, ${1-$})`,_.beginPath(),_.arc(Q,O,3,0,Math.PI*2),_.fill()}}}},{id:"supernova",name:" ",fn:(_,M)=>{const I=_.canvas.width,V=_.canvas.height,q=I/2,P=V/2;_.fillStyle=r?"#111":"#fff",_.fillRect(0,0,I,V);const L=M%1;_.strokeStyle=`rgba(255, 100, 50, ${.8-L*.8})`,_.lineWidth=3;for(let z=0;z<5;z++){const K=30+L*150+z*15;_.beginPath(),_.arc(q,P,K,0,Math.PI*2),_.stroke()}for(let z=0;z<40;z++){const K=z/40*Math.PI*2,re=40+L*120,Q=q+Math.cos(K)*re,O=P+Math.sin(K)*re,te=30+Math.random()*30,W=1-L;_.fillStyle=`hsla(${te}, 100%, 50%, ${W*.7})`;const de=2+Math.random()*4;_.fillRect(Q-de/2,O-de/2,de,de)}_.fillStyle=`rgba(255, 200, 0, ${1-L*.5})`;const $=20-L*15;_.beginPath(),_.arc(q,P,Math.max($,5),0,Math.PI*2),_.fill()}},{id:"cosmic-web",name:"  ",fn:(_,M)=>{const I=_.canvas.width,V=_.canvas.height;_.fillStyle=r?"#111":"#fff",_.fillRect(0,0,I,V);for(let q=0;q<50;q++){const P=(Math.sin(q*12.9898+M)*.5+.5)*I,L=(Math.sin(q*78.233+M*.7)*.5+.5)*V;_.fillStyle=`hsla(${q*7}, 100%, 60%, 0.8)`;const $=3+Math.sin(M+q)*2;if(_.beginPath(),_.arc(P,L,$,0,Math.PI*2),_.fill(),q<25){const z=(Math.sin((q+1)*12.9898+M)*.5+.5)*I,K=(Math.sin((q+1)*78.233+M*.7)*.5+.5)*V;_.strokeStyle=`rgba(100, 150, 255, ${.3+.1*Math.sin(M+q)})`,_.lineWidth=1,_.beginPath(),_.moveTo(P,L),_.lineTo(z,K),_.stroke()}}}},{id:"exoplanet",name:" ",fn:(_,M)=>{const I=_.canvas.width,V=_.canvas.height,q=I/2,P=V/2;_.fillStyle=r?"#111":"#fff",_.fillRect(0,0,I,V),_.fillStyle="rgba(255, 200, 0, 0.9)",_.beginPath(),_.arc(q,P,20,0,Math.PI*2),_.fill(),_.strokeStyle="rgba(255, 150, 0, 0.6)",_.lineWidth=1;for(let $=0;$<8;$++){const z=$/8*Math.PI*2+M*.3,K=q+Math.cos(z)*18,re=P+Math.sin(z)*18,Q=q+Math.cos(z+.3)*20,O=P+Math.sin(z+.3)*20;_.beginPath(),_.moveTo(K,re),_.lineTo(Q,O),_.stroke()}[{radius:80,period:2,size:4,color:"rgba(100, 150, 255, 0.8)"},{radius:120,period:4,size:6,color:"rgba(255, 100, 100, 0.8)"},{radius:150,period:6,size:5,color:"rgba(100, 200, 100, 0.8)"},{radius:180,period:8,size:4,color:"rgba(255, 200, 100, 0.8)"}].forEach($=>{_.strokeStyle=`${$.color.slice(0,-3)}, 0.3)`,_.lineWidth=1,_.beginPath(),_.arc(q,P,$.radius,0,Math.PI*2),_.stroke();const z=M/$.period*Math.PI*2,K=q+Math.cos(z)*$.radius,re=P+Math.sin(z)*$.radius;_.fillStyle=$.color,_.beginPath(),_.arc(K,re,$.size,0,Math.PI*2),_.fill(),_.strokeStyle=$.color,_.lineWidth=1,_.beginPath(),_.moveTo(K,re),_.lineTo(K+Math.cos(z+Math.PI/4)*3,re+Math.sin(z+Math.PI/4)*3),_.stroke()})}},{id:"pulsar",name:" ",fn:(_,M)=>{const I=_.canvas.width,V=_.canvas.height,q=I/2,P=V/2;_.fillStyle=r?"#111":"#fff",_.fillRect(0,0,I,V),_.strokeStyle=`rgba(100, 150, 255, ${.2+.1*Math.sin(M*10)})`,_.lineWidth=1;for(let $=0;$<6;$++){const z=40+$*20;_.beginPath(),_.arc(q,P,z,0,Math.PI*2),_.stroke()}_.save(),_.translate(q,P),_.rotate(M*8),_.fillStyle="rgba(200, 100, 255, 0.9)",_.beginPath(),_.arc(0,0,12,0,Math.PI*2),_.fill(),_.fillStyle=`rgba(100, 200, 255, ${.5+.3*Math.sin(M*10)})`,_.beginPath(),_.moveTo(0,0),_.lineTo(30,15),_.lineTo(80,5),_.lineTo(50,-5),_.closePath(),_.fill(),_.beginPath(),_.moveTo(0,0),_.lineTo(30,-15),_.lineTo(80,-5),_.lineTo(50,5),_.closePath(),_.fill(),_.restore(),_.strokeStyle=`rgba(100, 200, 255, ${.5-M%.2*2.5})`,_.lineWidth=2;const L=100+M%.2*100;_.beginPath(),_.arc(q,P,L,0,Math.PI*2),_.stroke()}},{id:"magnetar",name:" ",fn:(_,M)=>{const I=_.canvas.width,V=_.canvas.height,q=I/2,P=V/2;_.fillStyle=r?"#111":"#fff",_.fillRect(0,0,I,V);for(let L=0;L<12;L++){const $=L/12*Math.PI*2,z=30,K=120;_.strokeStyle=`rgba(255, ${100+L*15}, 100, ${.3+.2*Math.sin(M*3+L)})`,_.lineWidth=2,_.beginPath();for(let re=0;re<50;re++){const Q=z+(K-z)*(re/50),O=Math.sin($*2+re*.1)*10,te=q+Math.cos($)*Q+O,W=P+Math.sin($)*Q;re===0?_.moveTo(te,W):_.lineTo(te,W)}_.stroke()}if(_.fillStyle="rgba(150, 100, 255, 0.9)",_.beginPath(),_.arc(q,P,20,0,Math.PI*2),_.fill(),Math.sin(M*5)>.5)for(let L=0;L<15;L++){const $=L/15*Math.PI*2+Math.random()*.5,z=50+Math.random()*80,K=q+Math.cos($)*z,re=P+Math.sin($)*z;_.fillStyle=`rgba(255, ${150+Math.random()*100}, 0, ${.7+Math.random()*.3})`;const Q=2+Math.random()*6;_.beginPath(),_.arc(K,re,Q,0,Math.PI*2),_.fill()}}},{id:"quasar",name:" ",fn:(_,M)=>{const I=_.canvas.width,V=_.canvas.height,q=I/2,P=V/2;_.fillStyle=r?"#111":"#fff",_.fillRect(0,0,I,V),_.fillStyle=r?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.1)";for(let K=0;K<50;K++){const re=Math.sin(K*12.9898)*I*.4+I/2,Q=Math.sin(K*78.233)*V*.4+V/2,O=.5+Math.sin(M+K)*.5;_.fillRect(re,Q,O,O)}_.fillStyle="rgba(255, 100, 50, 0.9)",_.beginPath(),_.arc(q,P,15,0,Math.PI*2),_.fill();const L=150,$=M*.5,z=$+Math.PI;for(let K=0;K<2;K++){const re=K===0?$:z;_.strokeStyle="rgba(100, 150, 255, 0.8)",_.lineWidth=8,_.beginPath(),_.moveTo(q+Math.cos(re)*15,P+Math.sin(re)*15),_.lineTo(q+Math.cos(re)*(15+L),P+Math.sin(re)*(15+L)),_.stroke();for(let Q=0;Q<20;Q++){const O=20+(M*100+Q*10)%L,te=q+Math.cos(re)*O,W=P+Math.sin(re)*O;_.fillStyle=`hsla(200, 100%, ${50+Q*2}%, ${1-O/L})`,_.beginPath(),_.arc(te,W,3,0,Math.PI*2),_.fill()}}}},{id:"wormhole",name:" ",fn:(_,M)=>{const I=_.canvas.width,V=_.canvas.height,q=I/2,P=V/2;_.fillStyle=r?"#111":"#fff",_.fillRect(0,0,I,V),_.fillStyle=r?"rgba(255, 255, 255, 0.4)":"rgba(0, 0, 0, 0.2)";for(let L=0;L<80;L++){const $=Math.sin(L*12.9898+M*.2)*I*.45+I/2,z=Math.sin(L*78.233+M*.2)*V*.45+V/2,K=Math.sin(M*2+L)*.5+.5;_.fillRect($,z,K,K)}for(let L=0;L<20;L++){const $=(L/20+M*.5)%1,z=30+L*5,K=Math.sin($*Math.PI)*.8;_.strokeStyle=`hsla(${280+L*5}, 100%, ${50+L*2}%, ${K})`,_.lineWidth=2,_.beginPath(),_.arc(q,P,z,0,Math.PI*2),_.stroke()}_.fillStyle=`rgba(100, 50, 200, ${.5+.3*Math.sin(M*5)})`,_.beginPath(),_.arc(q,P,10,0,Math.PI*2),_.fill(),_.strokeStyle=`rgba(255, 100, 100, ${.5-M%.5*1})`,_.lineWidth=1;for(let L=0;L<5;L++){const $=50+M%.5*100;_.beginPath(),_.moveTo(q-30+L*15,P-$),_.lineTo(q-30+L*15,P+$),_.stroke()}}},{id:"clouds",name:" ",fn:(_,M)=>{const I=_.canvas.width,V=_.canvas.height;_.fillStyle=r?"#111":"#fff",_.fillRect(0,0,I,V);for(let q=0;q<200;q++){const P=(Math.sin(q*12.9898+M)*.5+.5)*I,L=(Math.sin(q*78.233+M*.8)*.5+.5)*V,$=Math.sin(P*.01+M)*Math.sin(L*.01+M*.7),z=200+$*60,K=Math.max(0,$)*.8;_.fillStyle=`hsla(${z}, 80%, 50%, ${K})`;const re=1+Math.sin(M*2+q)*.5;_.fillRect(P-re/2,L-re/2,re,re)}_.fillStyle=`rgba(255, 150, 0, ${.4+.2*Math.sin(M*3)})`;for(let q=0;q<8;q++){const P=q/8*Math.PI*2+M*.3,L=100,$=I/2+Math.cos(P)*L,z=V/2+Math.sin(P)*L;_.beginPath(),_.arc($,z,5+Math.sin(M*2+q)*3,0,Math.PI*2),_.fill()}}},{id:"cme",name:"  ",fn:(_,M)=>{const I=_.canvas.width,V=_.canvas.height,q=I/2,P=V/2;_.fillStyle=r?"#111":"#fff",_.fillRect(0,0,I,V),_.fillStyle="rgba(255, 200, 0, 0.9)",_.beginPath(),_.arc(q,P,30,0,Math.PI*2),_.fill(),_.strokeStyle=`rgba(255, 100, 100, ${.4+.2*Math.sin(M*4)})`,_.lineWidth=2;for(let $=0;$<3;$++){const z=q-40+$*40;_.beginPath(),_.arc(z,P-40,20+$*10,0,Math.PI),_.stroke()}const L=M*2%3;if(L>1){const $=(L-1)/1;_.fillStyle=`rgba(100, 150, 255, ${.8-$*.8})`,_.beginPath();const z=40+$*100;_.arc(q,P-30,z,0,Math.PI*2),_.fill();for(let K=0;K<30;K++){const re=K/30*Math.PI*2,Q=50+$*120,O=q+Math.cos(re)*Q,te=P-30+Math.sin(re)*Q;_.fillStyle=`rgba(255, 150, 100, ${1-$})`;const W=2+Math.random()*2;_.fillRect(O-W/2,te-W/2,W,W)}}}}];he.useEffect(()=>{const _=u.current;if(!_)return;const M=_.getContext("2d");let I,V=0;const q=()=>{const P=S.find(L=>L.id===e);if(P){const L=o?V:n;P.fn(M,L)}o&&(V+=.01*s),I=requestAnimationFrame(q)};return q(),()=>cancelAnimationFrame(I)},[e,n,o,s,r]);const N=r?"bg-gray-900 border-gray-800 text-white":"bg-white border-gray-200 text-gray-900";return R.jsxs("div",{className:"space-y-6",children:[R.jsxs(Ge.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.5},children:[R.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-purple-500 to-blue-500 dark:from-purple-300 dark:to-blue-300 bg-clip-text text-transparent",children:"  "}),R.jsx("p",{className:`text-sm sm:text-base ${r?"text-gray-300":"text-gray-600"}`,children:"13      3D  "})]}),R.jsx(Ge.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},className:`p-6 rounded-3xl border shadow-lg ${N}`,children:R.jsx("canvas",{ref:u,width:800,height:500,className:`w-full border rounded-2xl ${r?"border-gray-700":"border-gray-300"}`})}),R.jsxs(Ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:`p-6 rounded-3xl border shadow-sm ${N}`,children:[R.jsx("h2",{className:"text-2xl font-bold mb-6",children:"   "}),R.jsxs("div",{className:"mb-6",children:[R.jsx("p",{className:"font-semibold mb-3",children:" :"}),R.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2",children:S.map(_=>R.jsx("button",{onClick:()=>t(_.id),className:`py-2 px-3 rounded-lg text-sm font-medium transition-all ${e===_.id?"bg-gradient-to-r from-purple-500 to-blue-500 text-white":r?"bg-gray-700 hover:bg-gray-600":"bg-gray-200 hover:bg-gray-300"}`,children:_.name},_.id))})]}),R.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[R.jsxs("div",{className:"lg:col-span-2",children:[R.jsxs("label",{className:"block text-sm font-semibold mb-3",children:["  (",(n*100).toFixed(0),"%)"]}),R.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:n,onChange:_=>{i(parseFloat(_.target.value)),l(!1)},className:"w-full"})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-semibold mb-3",children:" "}),R.jsxs("select",{value:s,onChange:_=>a(parseFloat(_.target.value)),className:`w-full px-3 py-2 rounded-lg border ${r?"bg-gray-800 border-gray-700":"bg-white border-gray-300"}`,children:[R.jsx("option",{value:.5,children:"0.5x"}),R.jsx("option",{value:1,children:"1x"}),R.jsx("option",{value:2,children:"2x"}),R.jsx("option",{value:3,children:"3x"})]})]})]}),R.jsx("button",{onClick:()=>l(!o),className:`w-full py-3 px-4 rounded-xl font-bold transition-all ${o?"bg-gradient-to-r from-red-500 to-pink-500 text-white":"bg-gradient-to-r from-green-500 to-blue-500 text-white"}`,children:o?"  ":" "})]}),R.jsxs(Ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:`p-6 rounded-3xl border shadow-sm ${N}`,children:[R.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["  : ",(D=S.find(_=>_.id===e))==null?void 0:D.name]}),R.jsxs("div",{className:`space-y-2 text-sm ${r?"text-gray-300":"text-gray-600"}`,children:[R.jsxs("p",{children:[R.jsx("strong",{children:":"}),"       ."]}),R.jsx("p",{children:"         ."}),R.jsx("p",{children:"     ,   ."})]})]})]})}function _n(){return _n=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},_n.apply(null,arguments)}var dK={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null,legacySubset:!1};function ys(r,e){if(tT(r,e))return r[e];throw typeof r[e]=="function"&&DF(r,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function N0(r,e,t){if(tT(r,e))return r[e]=t,t;throw new Error('No access to property "'+e+'"')}function tT(r,e){return!Zpe(r)&&!Array.isArray(r)?!1:Je(ege,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Jpe(r,e){if(!DF(r,e))throw new Error('No access to method "'+e+'"');return r[e]}function DF(r,e){return r==null||typeof r[e]!="function"||Je(r,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(r)?!1:Je(tge,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Zpe(r){return typeof r=="object"&&r&&r.constructor===Object}var ege={length:!0,name:!0},tge={toString:!0,valueOf:!0,toLocaleString:!0};class KC{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return ys(this.wrappedObject,e)}set(e,t){return N0(this.wrappedObject,e,t),this}has(e){return tT(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return mK(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){tT(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class fK{constructor(e,t,n){this.a=e,this.b=t,this.bKeys=n,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,t){return this.bKeys.has(e)?this.b.set(e,t):this.a.set(e,t),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return mK(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function mK(r,e){return{next:()=>{var t=r.next();return t.done?t:{value:e(t.value),done:!1}}}}function P1(){return new Map}function $g(r){if(!r)return P1();if(vK(r))return r;if(YC(r))return new KC(r);throw new Error("createMap can create maps from objects or Maps")}function rge(r){if(r instanceof KC)return r.wrappedObject;var e={};for(var t of r.keys()){var n=r.get(t);N0(e,t,n)}return e}function it(r){return typeof r=="number"}function xt(r){return!r||typeof r!="object"||typeof r.constructor!="function"?!1:r.isBigNumber===!0&&typeof r.constructor.prototype=="object"&&r.constructor.prototype.isBigNumber===!0||typeof r.constructor.isDecimal=="function"&&r.constructor.isDecimal(r)===!0}function zb(r){return typeof r=="bigint"}function ac(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isComplex===!0||!1}function r_(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isFraction===!0||!1}function ba(r){return r&&r.constructor.prototype.isUnit===!0||!1}function fn(r){return typeof r=="string"}var cr=Array.isArray;function ot(r){return r&&r.constructor.prototype.isMatrix===!0||!1}function Ca(r){return Array.isArray(r)||ot(r)}function rT(r){return r&&r.isDenseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function Af(r){return r&&r.isSparseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function MF(r){return r&&r.constructor.prototype.isRange===!0||!1}function XC(r){return r&&r.constructor.prototype.isIndex===!0||!1}function nge(r){return typeof r=="boolean"}function ige(r){return r&&r.constructor.prototype.isResultSet===!0||!1}function pK(r){return r&&r.constructor.prototype.isHelp===!0||!1}function gK(r){return typeof r=="function"}function sge(r){return r instanceof Date}function age(r){return r instanceof RegExp}function YC(r){return!!(r&&typeof r=="object"&&r.constructor===Object&&!ac(r)&&!r_(r))}function vK(r){return r?r instanceof Map||r instanceof KC||typeof r.set=="function"&&typeof r.get=="function"&&typeof r.keys=="function"&&typeof r.has=="function":!1}function oge(r){return r===null}function lge(r){return r===void 0}function Ac(r){return r&&r.isAccessorNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ja(r){return r&&r.isArrayNode===!0&&r.constructor.prototype.isNode===!0||!1}function uge(r){return r&&r.isAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function cge(r){return r&&r.isBlockNode===!0&&r.constructor.prototype.isNode===!0||!1}function hge(r){return r&&r.isConditionalNode===!0&&r.constructor.prototype.isNode===!0||!1}function Vt(r){return r&&r.isConstantNode===!0&&r.constructor.prototype.isNode===!0||!1}function vP(r){return Vt(r)||wn(r)&&r.args.length===1&&Vt(r.args[0])&&"-+~".includes(r.op)}function n_(r){return r&&r.isFunctionAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function Td(r){return r&&r.isFunctionNode===!0&&r.constructor.prototype.isNode===!0||!1}function J0(r){return r&&r.isIndexNode===!0&&r.constructor.prototype.isNode===!0||!1}function sr(r){return r&&r.isNode===!0&&r.constructor.prototype.isNode===!0||!1}function QC(r){return r&&r.isObjectNode===!0&&r.constructor.prototype.isNode===!0||!1}function wn(r){return r&&r.isOperatorNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ec(r){return r&&r.isParenthesisNode===!0&&r.constructor.prototype.isNode===!0||!1}function dge(r){return r&&r.isRangeNode===!0&&r.constructor.prototype.isNode===!0||!1}function fge(r){return r&&r.isRelationalNode===!0&&r.constructor.prototype.isNode===!0||!1}function hi(r){return r&&r.isSymbolNode===!0&&r.constructor.prototype.isNode===!0||!1}function yK(r){return r&&r.constructor.prototype.isChain===!0||!1}function dr(r){var e=typeof r;return e==="object"?r===null?"null":xt(r)?"BigNumber":r.constructor&&r.constructor.name?r.constructor.name:"Object":e}function gt(r){var e=typeof r;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||r===null||r===void 0)return r;if(typeof r.clone=="function")return r.clone();if(Array.isArray(r))return r.map(function(t){return gt(t)});if(r instanceof Date)return new Date(r.valueOf());if(xt(r))return r;if(YC(r))return mge(r,gt);if(e==="function")return r;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(r,")"))}function mge(r,e){var t={};for(var n in r)Je(r,n)&&(t[n]=e(r[n]));return t}function bK(r,e){for(var t in e)Je(e,t)&&(r[t]=e[t]);return r}function Sc(r,e){var t,n,i;if(Array.isArray(r)){if(!Array.isArray(e)||r.length!==e.length)return!1;for(n=0,i=r.length;n<i;n++)if(!Sc(r[n],e[n]))return!1;return!0}else{if(typeof r=="function")return r===e;if(r instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(t in r)if(!(t in e)||!Sc(r[t],e[t]))return!1;for(t in e)if(!(t in r))return!1;return!0}else return r===e}}function pge(r,e,t){var n=!0,i;Object.defineProperty(r,e,{get:function(){return n&&(i=t(),n=!1),i},set:function(a){i=a,n=!1},configurable:!0,enumerable:!0})}function Je(r,e){return r&&Object.hasOwnProperty.call(r,e)}function gge(r,e){for(var t={},n=0;n<e.length;n++){var i=e[n],s=r[i];s!==void 0&&(t[i]=s)}return t}var vge=["Matrix","Array"],yge=["number","BigNumber","bigint","Fraction"],Ae=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(dK)};_n(Ae,dK,{MATRIX_OPTIONS:vge,NUMBER_OPTIONS:yge});function $5(){return!0}function Oa(){return!1}function Fp(){}const V5="Argument is not a typed-function.";function wK(){function r(G){return typeof G=="object"&&G!==null&&G.constructor===Object}const e=[{name:"number",test:function(G){return typeof G=="number"}},{name:"string",test:function(G){return typeof G=="string"}},{name:"boolean",test:function(G){return typeof G=="boolean"}},{name:"Function",test:function(G){return typeof G=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(G){return G instanceof Date}},{name:"RegExp",test:function(G){return G instanceof RegExp}},{name:"Object",test:r},{name:"null",test:function(G){return G===null}},{name:"undefined",test:function(G){return G===void 0}}],t={name:"any",test:$5,isAny:!0};let n,i,s=0,a={createCount:0};function o(G){const J=n.get(G);if(J)return J;let ae='Unknown type "'+G+'"';const ce=G.toLowerCase();let ge;for(ge of i)if(ge.toLowerCase()===ce){ae+='. Did you mean "'+ge+'" ?';break}throw new TypeError(ae)}function l(G){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const ae=J?o(J).index:i.length,ce=[];for(let pe=0;pe<G.length;++pe){if(!G[pe]||typeof G[pe].name!="string"||typeof G[pe].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Ne=G[pe].name;if(n.has(Ne))throw new TypeError('Duplicate type name "'+Ne+'"');ce.push(Ne),n.set(Ne,{name:Ne,test:G[pe].test,isAny:G[pe].isAny,index:ae+pe,conversionsTo:[]})}const ge=i.slice(ae);i=i.slice(0,ae).concat(ce).concat(ge);for(let pe=ae+ce.length;pe<i.length;++pe)n.get(i[pe]).index=pe}function u(){n=new Map,i=[],s=0,l([t],!1)}u(),l(e);function c(){let G;for(G of i)n.get(G).conversionsTo=[];s=0}function h(G){const J=i.filter(ae=>{const ce=n.get(ae);return!ce.isAny&&ce.test(G)});return J.length?J:["any"]}function d(G){return G&&typeof G=="function"&&"_typedFunctionData"in G}function f(G,J,ae){if(!d(G))throw new TypeError(V5);const ce=ae&&ae.exact,ge=Array.isArray(J)?J.join(","):J,pe=E(ge),Ne=b(pe);if(!ce||Ne in G.signatures){const et=G._typedFunctionData.signatureMap.get(Ne);if(et)return et}const Ee=pe.length;let Oe;if(ce){Oe=[];let et;for(et in G.signatures)Oe.push(G._typedFunctionData.signatureMap.get(et))}else Oe=G._typedFunctionData.signatures;for(let et=0;et<Ee;++et){const Ct=pe[et],zt=[];let lt;for(lt of Oe){const pr=S(lt.params,et);if(!(!pr||Ct.restParam&&!pr.restParam)){if(!pr.hasAny){const B=y(pr);if(Ct.types.some(oe=>!B.has(oe.name)))continue}zt.push(lt)}}if(Oe=zt,Oe.length===0)break}let Se;for(Se of Oe)if(Se.params.length<=Ee)return Se;throw new TypeError("Signature not found (signature: "+(G.name||"unnamed")+"("+b(pe,", ")+"))")}function p(G,J,ae){return f(G,J,ae).implementation}function g(G,J){const ae=o(J);if(ae.test(G))return G;const ce=ae.conversionsTo;if(ce.length===0)throw new Error("There are no conversions to "+J+" defined.");for(let ge=0;ge<ce.length;ge++)if(o(ce[ge].from).test(G))return ce[ge].convert(G);throw new Error("Cannot convert "+G+" to "+J)}function b(G){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return G.map(ae=>ae.name).join(J)}function v(G){const J=G.indexOf("...")===0,ce=(J?G.length>3?G.slice(3):"any":G).split("|").map(Ee=>o(Ee.trim()));let ge=!1,pe=J?"...":"";return{types:ce.map(function(Ee){return ge=Ee.isAny||ge,pe+=Ee.name+"|",{name:Ee.name,typeIndex:Ee.index,test:Ee.test,isAny:Ee.isAny,conversion:null,conversionIndex:-1}}),name:pe.slice(0,-1),hasAny:ge,hasConversion:!1,restParam:J}}function x(G){const J=G.types.map(Ne=>Ne.name),ae=L(J);let ce=G.hasAny,ge=G.name;const pe=ae.map(function(Ne){const Ee=o(Ne.from);return ce=Ee.isAny||ce,ge+="|"+Ne.from,{name:Ne.from,typeIndex:Ee.index,test:Ee.test,isAny:Ee.isAny,conversion:Ne,conversionIndex:Ne.index}});return{types:G.types.concat(pe),name:ge,hasAny:ce,hasConversion:pe.length>0,restParam:G.restParam}}function y(G){return G.typeSet||(G.typeSet=new Set,G.types.forEach(J=>G.typeSet.add(J.name))),G.typeSet}function E(G){const J=[];if(typeof G!="string")throw new TypeError("Signatures must be strings");const ae=G.trim();if(ae==="")return J;const ce=ae.split(",");for(let ge=0;ge<ce.length;++ge){const pe=v(ce[ge].trim());if(pe.restParam&&ge!==ce.length-1)throw new SyntaxError('Unexpected rest parameter "'+ce[ge]+'": only allowed for the last parameter');if(pe.types.length===0)return null;J.push(pe)}return J}function w(G){const J=X(G);return J?J.restParam:!1}function A(G){if(!G||G.types.length===0)return $5;if(G.types.length===1)return o(G.types[0].name).test;if(G.types.length===2){const J=o(G.types[0].name).test,ae=o(G.types[1].name).test;return function(ge){return J(ge)||ae(ge)}}else{const J=G.types.map(function(ae){return o(ae.name).test});return function(ce){for(let ge=0;ge<J.length;ge++)if(J[ge](ce))return!0;return!1}}}function T(G){let J,ae,ce;if(w(G)){J=ne(G).map(A);const ge=J.length,pe=A(X(G)),Ne=function(Ee){for(let Oe=ge;Oe<Ee.length;Oe++)if(!pe(Ee[Oe]))return!1;return!0};return function(Oe){for(let Se=0;Se<J.length;Se++)if(!J[Se](Oe[Se]))return!1;return Ne(Oe)&&Oe.length>=ge+1}}else return G.length===0?function(pe){return pe.length===0}:G.length===1?(ae=A(G[0]),function(pe){return ae(pe[0])&&pe.length===1}):G.length===2?(ae=A(G[0]),ce=A(G[1]),function(pe){return ae(pe[0])&&ce(pe[1])&&pe.length===2}):(J=G.map(A),function(pe){for(let Ne=0;Ne<J.length;Ne++)if(!J[Ne](pe[Ne]))return!1;return pe.length===J.length})}function S(G,J){return J<G.length?G[J]:w(G)?X(G):null}function N(G,J){const ae=S(G,J);return ae?y(ae):new Set}function D(G){return G.conversion===null||G.conversion===void 0}function _(G,J){const ae=new Set;return G.forEach(ce=>{const ge=N(ce.params,J);let pe;for(pe of ge)ae.add(pe)}),ae.has("any")?["any"]:Array.from(ae)}function M(G,J,ae){let ce,ge;const pe=G||"unnamed";let Ne=ae,Ee;for(Ee=0;Ee<J.length;Ee++){const Ct=[];if(Ne.forEach(zt=>{const lt=S(zt.params,Ee),pr=A(lt);(Ee<zt.params.length||w(zt.params))&&pr(J[Ee])&&Ct.push(zt)}),Ct.length===0){if(ge=_(Ne,Ee),ge.length>0){const zt=h(J[Ee]);return ce=new TypeError("Unexpected type of argument in function "+pe+" (expected: "+ge.join(" or ")+", actual: "+zt.join(" | ")+", index: "+Ee+")"),ce.data={category:"wrongType",fn:pe,index:Ee,actual:zt,expected:ge},ce}}else Ne=Ct}const Oe=Ne.map(function(Ct){return w(Ct.params)?1/0:Ct.params.length});if(J.length<Math.min.apply(null,Oe))return ge=_(Ne,Ee),ce=new TypeError("Too few arguments in function "+pe+" (expected: "+ge.join(" or ")+", index: "+J.length+")"),ce.data={category:"tooFewArgs",fn:pe,index:J.length,expected:ge},ce;const Se=Math.max.apply(null,Oe);if(J.length>Se)return ce=new TypeError("Too many arguments in function "+pe+" (expected: "+Se+", actual: "+J.length+")"),ce.data={category:"tooManyArgs",fn:pe,index:J.length,expectedLength:Se},ce;const et=[];for(let Ct=0;Ct<J.length;++Ct)et.push(h(J[Ct]).join("|"));return ce=new TypeError('Arguments of type "'+et.join(", ")+'" do not match any of the defined signatures of function '+pe+"."),ce.data={category:"mismatch",actual:et},ce}function I(G){let J=i.length+1;for(let ae=0;ae<G.types.length;ae++)J=Math.min(J,G.types[ae].typeIndex);return J}function V(G){let J=s+1;for(let ae=0;ae<G.types.length;ae++)D(G.types[ae])||(J=Math.min(J,G.types[ae].conversionIndex));return J}function q(G,J){if(G.hasAny){if(!J.hasAny)return .1}else if(J.hasAny)return-.1;if(G.restParam){if(!J.restParam)return .01}else if(J.restParam)return-.01;const ae=I(G)-I(J);if(ae<0)return-.001;if(ae>0)return .001;const ce=V(G),ge=V(J);if(G.hasConversion){if(!J.hasConversion)return(1+ce)*1e-6}else if(J.hasConversion)return-(1+ge)*1e-6;const pe=ce-ge;return pe<0?-1e-7:pe>0?1e-7:0}function P(G,J){const ae=G.params,ce=J.params,ge=X(ae),pe=X(ce),Ne=w(ae),Ee=w(ce);if(Ne&&ge.hasAny){if(!Ee||!pe.hasAny)return 1e7}else if(Ee&&pe.hasAny)return-1e7;let Oe=0,Se=0,et;for(et of ae)et.hasAny&&++Oe,et.hasConversion&&++Se;let Ct=0,zt=0;for(et of ce)et.hasAny&&++Ct,et.hasConversion&&++zt;if(Oe!==Ct)return(Oe-Ct)*1e6;if(Ne&&ge.hasConversion){if(!Ee||!pe.hasConversion)return 1e5}else if(Ee&&pe.hasConversion)return-1e5;if(Se!==zt)return(Se-zt)*1e4;if(Ne){if(!Ee)return 1e3}else if(Ee)return-1e3;const lt=(ae.length-ce.length)*(Ne?-100:100);if(lt!==0)return lt;const pr=[];let B=0;for(let ze=0;ze<ae.length;++ze){const ut=q(ae[ze],ce[ze]);pr.push(ut),B+=ut}if(B!==0)return(B<0?-10:10)+B;let oe,we=9;const Me=we/(pr.length+1);for(oe of pr){if(oe!==0)return(oe<0?-we:we)+oe;we-=Me}return 0}function L(G){if(G.length===0)return[];const J=G.map(o);if(G.length===1)return J[0].conversionsTo;const ae=new Set(G),ce=new Set;for(let pe=0;pe<J.length;++pe)for(const Ne of J[pe].conversionsTo)ae.has(Ne.from)||ce.add(Ne.from);const ge=[];for(const pe of ce){let Ne=s+1,Ee=null;for(let Oe=0;Oe<J.length;++Oe)for(const Se of J[Oe].conversionsTo)Se.from===pe&&Se.index<Ne&&(Ne=Se.index,Ee=Se);ge.push(Ee)}return ge}function $(G,J){let ae=J,ce="";if(G.some(pe=>pe.hasConversion)){const pe=w(G),Ne=G.map(z);ce=Ne.map(Ee=>Ee.name).join(";"),ae=function(){const Oe=[],Se=pe?arguments.length-1:arguments.length;for(let et=0;et<Se;et++)Oe[et]=Ne[et](arguments[et]);return pe&&(Oe[Se]=arguments[Se].map(Ne[Se])),J.apply(this,Oe)}}let ge=ae;if(w(G)){const pe=G.length-1;ge=function(){return ae.apply(this,se(arguments,0,pe).concat([se(arguments,pe)]))}}return ce&&Object.defineProperty(ge,"name",{value:ce}),ge}function z(G){let J,ae,ce,ge;const pe=[],Ne=[];let Ee="";G.types.forEach(function(Se){Se.conversion&&(Ee+=Se.conversion.from+"~>"+Se.conversion.to+",",pe.push(o(Se.conversion.from).test),Ne.push(Se.conversion.convert))}),Ee?Ee=Ee.slice(0,-1):Ee="pass";let Oe=Se=>Se;switch(Ne.length){case 0:break;case 1:J=pe[0],ce=Ne[0],Oe=function(et){return J(et)?ce(et):et};break;case 2:J=pe[0],ae=pe[1],ce=Ne[0],ge=Ne[1],Oe=function(et){return J(et)?ce(et):ae(et)?ge(et):et};break;default:Oe=function(et){for(let Ct=0;Ct<Ne.length;Ct++)if(pe[Ct](et))return Ne[Ct](et);return et}}return Object.defineProperty(Oe,"name",{value:Ee}),Oe}function K(G){function J(ae,ce,ge){if(ce<ae.length){const pe=ae[ce];let Ne=[];if(pe.restParam){const Ee=pe.types.filter(D);Ee.length<pe.types.length&&Ne.push({types:Ee,name:"..."+Ee.map(Oe=>Oe.name).join("|"),hasAny:Ee.some(Oe=>Oe.isAny),hasConversion:!1,restParam:!0}),Ne.push(pe)}else Ne=pe.types.map(function(Ee){return{types:[Ee],name:Ee.name,hasAny:Ee.isAny,hasConversion:Ee.conversion,restParam:!1}});return ue(Ne,function(Ee){return J(ae,ce+1,ge.concat([Ee]))})}else return[ge]}return J(G,0,[])}function re(G,J){const ae=Math.max(G.length,J.length);for(let Ee=0;Ee<ae;Ee++){const Oe=N(G,Ee),Se=N(J,Ee);let et=!1,Ct;for(Ct of Se)if(Oe.has(Ct)){et=!0;break}if(!et)return!1}const ce=G.length,ge=J.length,pe=w(G),Ne=w(J);return pe?Ne?ce===ge:ge>=ce:Ne?ce>=ge:ce===ge}function Q(G){return G.map(J=>We(J)?Ie(J.referToSelf.callback):Ue(J)?ye(J.referTo.references,J.referTo.callback):J)}function O(G,J,ae){const ce=[];let ge;for(ge of G){let pe=ae[ge];if(typeof pe!="number")throw new TypeError('No definition for referenced signature "'+ge+'"');if(pe=J[pe],typeof pe!="function")return!1;ce.push(pe)}return ce}function te(G,J,ae){const ce=Q(G),ge=new Array(ce.length).fill(!1);let pe=!0;for(;pe;){pe=!1;let Ne=!0;for(let Ee=0;Ee<ce.length;++Ee){if(ge[Ee])continue;const Oe=ce[Ee];if(We(Oe))ce[Ee]=Oe.referToSelf.callback(ae),ce[Ee].referToSelf=Oe.referToSelf,ge[Ee]=!0,Ne=!1;else if(Ue(Oe)){const Se=O(Oe.referTo.references,ce,J);Se?(ce[Ee]=Oe.referTo.callback.apply(this,Se),ce[Ee].referTo=Oe.referTo,ge[Ee]=!0,Ne=!1):pe=!0}}if(Ne&&pe)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return ce}function W(G){const J=/\bthis(\(|\.signatures\b)/;Object.keys(G).forEach(ae=>{const ce=G[ae];if(J.test(ce.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function de(G,J){if(a.createCount++,Object.keys(J).length===0)throw new SyntaxError("No signatures provided");a.warnAgainstDeprecatedThis&&W(J);const ae=[],ce=[],ge={},pe=[];let Ne;for(Ne in J){if(!Object.prototype.hasOwnProperty.call(J,Ne))continue;const Zt=E(Ne);if(!Zt)continue;ae.forEach(function(Pc){if(re(Pc,Zt))throw new TypeError('Conflicting signatures "'+b(Pc)+'" and "'+b(Zt)+'".')}),ae.push(Zt);const Oi=ce.length;ce.push(J[Ne]);const A_=Zt.map(x);let Zd;for(Zd of K(A_)){const Pc=b(Zd);pe.push({params:Zd,name:Pc,fn:Oi}),Zd.every(py=>!py.hasConversion)&&(ge[Pc]=Oi)}}pe.sort(P);const Ee=te(ce,ge,Xs);let Oe;for(Oe in ge)Object.prototype.hasOwnProperty.call(ge,Oe)&&(ge[Oe]=Ee[ge[Oe]]);const Se=[],et=new Map;for(Oe of pe)et.has(Oe.name)||(Oe.fn=Ee[Oe.fn],Se.push(Oe),et.set(Oe.name,Oe));const Ct=Se[0]&&Se[0].params.length<=2&&!w(Se[0].params),zt=Se[1]&&Se[1].params.length<=2&&!w(Se[1].params),lt=Se[2]&&Se[2].params.length<=2&&!w(Se[2].params),pr=Se[3]&&Se[3].params.length<=2&&!w(Se[3].params),B=Se[4]&&Se[4].params.length<=2&&!w(Se[4].params),oe=Se[5]&&Se[5].params.length<=2&&!w(Se[5].params),we=Ct&&zt&&lt&&pr&&B&&oe;for(let Zt=0;Zt<Se.length;++Zt)Se[Zt].test=T(Se[Zt].params);const Me=Ct?A(Se[0].params[0]):Oa,ze=zt?A(Se[1].params[0]):Oa,ut=lt?A(Se[2].params[0]):Oa,gn=pr?A(Se[3].params[0]):Oa,Pa=B?A(Se[4].params[0]):Oa,cy=oe?A(Se[5].params[0]):Oa,g2=Ct?A(Se[0].params[1]):Oa,Ic=zt?A(Se[1].params[1]):Oa,v2=lt?A(Se[2].params[1]):Oa,y2=pr?A(Se[3].params[1]):Oa,Dp=B?A(Se[4].params[1]):Oa,g_=oe?A(Se[5].params[1]):Oa;for(let Zt=0;Zt<Se.length;++Zt)Se[Zt].implementation=$(Se[Zt].params,Se[Zt].fn);const v_=Ct?Se[0].implementation:Fp,hy=zt?Se[1].implementation:Fp,Qd=lt?Se[2].implementation:Fp,b2=pr?Se[3].implementation:Fp,nl=B?Se[4].implementation:Fp,y_=oe?Se[5].implementation:Fp,b_=Ct?Se[0].params.length:-1,dy=zt?Se[1].params.length:-1,fy=lt?Se[2].params.length:-1,w_=pr?Se[3].params.length:-1,w2=B?Se[4].params.length:-1,x_=oe?Se[5].params.length:-1,x2=we?6:0,Mp=Se.length,__=Se.map(Zt=>Zt.test),my=Se.map(Zt=>Zt.implementation),Jd=function(){for(let Oi=x2;Oi<Mp;Oi++)if(__[Oi](arguments))return my[Oi].apply(this,arguments);return a.onMismatch(G,arguments,Se)};function Xs(Zt,Oi){return arguments.length===b_&&Me(Zt)&&g2(Oi)?v_.apply(this,arguments):arguments.length===dy&&ze(Zt)&&Ic(Oi)?hy.apply(this,arguments):arguments.length===fy&&ut(Zt)&&v2(Oi)?Qd.apply(this,arguments):arguments.length===w_&&gn(Zt)&&y2(Oi)?b2.apply(this,arguments):arguments.length===w2&&Pa(Zt)&&Dp(Oi)?nl.apply(this,arguments):arguments.length===x_&&cy(Zt)&&g_(Oi)?y_.apply(this,arguments):Jd.apply(this,arguments)}try{Object.defineProperty(Xs,"name",{value:G})}catch{}return Xs.signatures=ge,Xs._typedFunctionData={signatures:Se,signatureMap:et},Xs}function fe(G,J,ae){throw M(G,J,ae)}function ne(G){return se(G,0,G.length-1)}function X(G){return G[G.length-1]}function se(G,J,ae){return Array.prototype.slice.call(G,J,ae)}function me(G,J){for(let ae=0;ae<G.length;ae++)if(J(G[ae]))return G[ae]}function ue(G,J){return Array.prototype.concat.apply([],G.map(J))}function be(){const G=ne(arguments).map(ae=>b(E(ae))),J=X(arguments);if(typeof J!="function")throw new TypeError("Callback function expected as last argument");return ye(G,J)}function ye(G,J){return{referTo:{references:G,callback:J}}}function Ie(G){if(typeof G!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:G}}}function Ue(G){return G&&typeof G.referTo=="object"&&Array.isArray(G.referTo.references)&&typeof G.referTo.callback=="function"}function We(G){return G&&typeof G.referToSelf=="object"&&typeof G.referToSelf.callback=="function"}function Be(G,J){if(!G)return J;if(J&&J!==G){const ae=new Error("Function names do not match (expected: "+G+", actual: "+J+")");throw ae.data={actual:J,expected:G},ae}return G}function $e(G){let J;for(const ae in G)Object.prototype.hasOwnProperty.call(G,ae)&&(d(G[ae])||typeof G[ae].signature=="string")&&(J=Be(J,G[ae].name));return J}function He(G,J){let ae;for(ae in J)if(Object.prototype.hasOwnProperty.call(J,ae)){if(ae in G&&J[ae]!==G[ae]){const ce=new Error('Signature "'+ae+'" is defined twice');throw ce.data={signature:ae,sourceFunction:J[ae],destFunction:G[ae]},ce}G[ae]=J[ae]}}const ee=a;a=function(G){const J=typeof G=="string",ae=J?1:0;let ce=J?G:"";const ge={};for(let pe=ae;pe<arguments.length;++pe){const Ne=arguments[pe];let Ee={},Oe;if(typeof Ne=="function"?(Oe=Ne.name,typeof Ne.signature=="string"?Ee[Ne.signature]=Ne:d(Ne)&&(Ee=Ne.signatures)):r(Ne)&&(Ee=Ne,J||(Oe=$e(Ne))),Object.keys(Ee).length===0){const Se=new TypeError("Argument to 'typed' at index "+pe+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Se.data={index:pe,argument:Ne},Se}J||(ce=Be(ce,Oe)),He(ge,Ee)}return de(ce||"",ge)},a.create=wK,a.createCount=ee.createCount,a.onMismatch=fe,a.throwMismatchError=fe,a.createError=M,a.clear=u,a.clearConversions=c,a.addTypes=l,a._findType=o,a.referTo=be,a.referToSelf=Ie,a.convert=g,a.findSignature=f,a.find=p,a.isTypedFunction=d,a.warnAgainstDeprecatedThis=!0,a.addType=function(G,J){let ae="any";J!==!1&&n.has("Object")&&(ae="Object"),a.addTypes([G],ae)};function le(G){if(!G||typeof G.from!="string"||typeof G.to!="string"||typeof G.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(G.to===G.from)throw new SyntaxError('Illegal to define conversion from "'+G.from+'" to itself.')}return a.addConversion=function(G){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};le(G);const ae=o(G.to),ce=ae.conversionsTo.find(ge=>ge.from===G.from);if(ce)if(J&&J.override)a.removeConversion({from:ce.from,to:G.to,convert:ce.convert});else throw new Error('There is already a conversion from "'+G.from+'" to "'+ae.name+'"');ae.conversionsTo.push({from:G.from,to:ae.name,convert:G.convert,index:s++})},a.addConversions=function(G,J){G.forEach(ae=>a.addConversion(ae,J))},a.removeConversion=function(G){le(G);const J=o(G.to),ae=me(J.conversionsTo,ge=>ge.from===G.from);if(!ae)throw new Error("Attempt to remove nonexistent conversion from "+G.from+" to "+G.to);if(ae.convert!==G.convert)throw new Error("Conversion to remove does not match existing conversion");const ce=J.conversionsTo.indexOf(ae);J.conversionsTo.splice(ce,1)},a.resolve=function(G,J){if(!d(G))throw new TypeError(V5);const ae=G._typedFunctionData.signatures;for(let ce=0;ce<ae.length;++ce)if(ae[ce].test(J))return ae[ce];return null},a}const nT=wK();function Y(r,e,t,n){function i(s){var a=gge(s,e.map(xge));return bge(r,e,s),t(a)}return i.isFactory=!0,i.fn=r,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function bge(r,e,t){var n=e.filter(s=>!wge(s)).every(s=>t[s]!==void 0);if(!n){var i=e.filter(s=>t[s]===void 0);throw new Error('Cannot create function "'.concat(r,'", ')+"some dependencies are missing: ".concat(i.map(s=>'"'.concat(s,'"')).join(", "),"."))}}function wge(r){return r&&r[0]==="?"}function xge(r){return r&&r[0]==="?"?r.slice(1):r}function tt(r){return typeof r=="boolean"?!0:Number.isFinite(r)?r===Math.round(r):!1}function Vd(r,e){if(e.number==="bigint")try{BigInt(r)}catch{return e.numberFallback}return e.number}var Xh=Math.sign||function(r){return r>0?1:r<0?-1:0},_ge=Math.log2||function(e){return Math.log(e)/Math.LN2},Age=Math.log10||function(e){return Math.log(e)/Math.LN10},Ege=Math.log1p||function(r){return Math.log(r+1)},Sge=Math.cbrt||function(e){if(e===0)return e;var t=e<0,n;return t&&(e=-e),Number.isFinite(e)?(n=Math.exp(Math.log(e)/3),n=(e/(n*n)+2*n)/3):n=e,t?-n:n},Tge=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function zN(r,e,t){var n={2:"0b",8:"0o",16:"0x"},i=n[e],s="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!tt(t))throw new Error("size must be an integer");if(r>2**(t-1)-1||r<-(2**(t-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!tt(r))throw new Error("Value must be an integer");r<0&&(r=r+2**t),s="i".concat(t)}var a="";return r<0&&(r=-r,a="-"),"".concat(a).concat(i).concat(r.toString(e)).concat(s)}function Gm(r,e){if(typeof e=="function")return e(r);if(r===1/0)return"Infinity";if(r===-1/0)return"-Infinity";if(isNaN(r))return"NaN";var{notation:t,precision:n,wordSize:i}=xK(e);switch(t){case"fixed":return _K(r,n);case"exponential":return AK(r,n);case"engineering":return Cge(r,n);case"bin":return zN(r,2,i);case"oct":return zN(r,8,i);case"hex":return zN(r,16,i);case"auto":return Nge(r,n,e).replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],a=arguments[4];return s!=="."?s+a:a});default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function xK(r){var e="auto",t,n;if(r!==void 0)if(it(r))t=r;else if(xt(r))t=r.toNumber();else if(YC(r))r.precision!==void 0&&(t=U5(r.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),r.wordSize!==void 0&&(n=U5(r.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),r.notation&&(e=r.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:t,wordSize:n}}function i_(r){var e=String(r).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+r);var t=e[1],n=e[2],i=parseFloat(e[4]||"0"),s=n.indexOf(".");i+=s!==-1?s-1:n.length-1;var a=n.replace(".","").replace(/^0*/,function(o){return i-=o.length,""}).replace(/0*$/,"").split("").map(function(o){return parseInt(o)});return a.length===0&&(a.push(0),i++),{sign:t,coefficients:a,exponent:i}}function Cge(r,e){if(isNaN(r)||!Number.isFinite(r))return String(r);var t=i_(r),n=JC(t,e),i=n.exponent,s=n.coefficients,a=i%3===0?i:i<0?i-3-i%3:i-i%3;if(it(e))for(;e>s.length||i-a+1>s.length;)s.push(0);else for(var o=Math.abs(i-a)-(s.length-1),l=0;l<o;l++)s.push(0);for(var u=Math.abs(i-a),c=1;u>0;)c++,u--;var h=s.slice(c).join(""),d=it(e)&&h.length||h.match(/[1-9]/)?"."+h:"",f=s.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+a.toString();return n.sign+f}function _K(r,e){if(isNaN(r)||!Number.isFinite(r))return String(r);var t=i_(r),n=typeof e=="number"?JC(t,t.exponent+1+e):t,i=n.coefficients,s=n.exponent+1,a=s+(e||0);return i.length<a&&(i=i.concat(Vg(a-i.length))),s<0&&(i=Vg(-s+1).concat(i),s=1),s<i.length&&i.splice(s,0,s===0?"0.":"."),n.sign+i.join("")}function AK(r,e){if(isNaN(r)||!Number.isFinite(Number(r)))return String(r);var t=i_(r),n=e?JC(t,e):t,i=n.coefficients,s=n.exponent;i.length<e&&(i=i.concat(Vg(e-i.length)));var a=i.shift();return n.sign+a+(i.length>0?"."+i.join(""):"")+"e"+(s>=0?"+":"")+s}function Nge(r,e,t){if(isNaN(r)||!Number.isFinite(r))return String(r);var n=z5(t==null?void 0:t.lowerExp,-3),i=z5(t==null?void 0:t.upperExp,5),s=i_(r),a=e?JC(s,e):s;if(a.exponent<n||a.exponent>=i)return AK(r,e);var o=a.coefficients,l=a.exponent;o.length<e&&(o=o.concat(Vg(e-o.length))),o=o.concat(Vg(l-o.length+1+(o.length<e?e-o.length:0))),o=Vg(-l).concat(o);var u=l>0?l:0;return u<o.length-1&&o.splice(u+1,0,"."),a.sign+o.join("")}function JC(r,e){for(var t={sign:r.sign,coefficients:r.coefficients,exponent:r.exponent},n=t.coefficients;e<=0;)n.unshift(0),t.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var s=e-1;for(n[s]++;n[s]===10;)n.pop(),s===0&&(n.unshift(0),t.exponent++,s++),s--,n[s]++}}return t}function Vg(r){for(var e=[],t=0;t<r;t++)e.push(0);return e}function Dge(r){return r.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function fi(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(t<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(r)||isNaN(e)?!1:!Number.isFinite(r)||!Number.isFinite(e)?r===e:r===e?!0:Math.abs(r-e)<=Math.max(t*Math.max(Math.abs(r),Math.abs(e)),n)}var Mge=Math.acosh||function(r){return Math.log(Math.sqrt(r*r-1)+r)},Ige=Math.asinh||function(r){return Math.log(Math.sqrt(r*r+1)+r)},Pge=Math.atanh||function(r){return Math.log((1+r)/(1-r))/2},Rge=Math.cosh||function(r){return(Math.exp(r)+Math.exp(-r))/2},kge=Math.sinh||function(r){return(Math.exp(r)-Math.exp(-r))/2},Fge=Math.tanh||function(r){var e=Math.exp(2*r);return(e-1)/(e+1)};function Oge(r,e){var t=!0,n=e>0?!0:e<0?!1:1/e===1/0;return t^n?-r:r}function U5(r,e){if(it(r))return r;if(xt(r))return r.toNumber();e()}function z5(r,e){return it(r)?r:xt(r)?r.toNumber():e}var EK=function(){return EK=nT.create,nT},Bge=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Lge=Y("typed",Bge,function(e){var{BigNumber:t,Complex:n,DenseMatrix:i,Fraction:s}=e,a=EK();return a.clear(),a.addTypes([{name:"number",test:it},{name:"Complex",test:ac},{name:"BigNumber",test:xt},{name:"bigint",test:zb},{name:"Fraction",test:r_},{name:"Unit",test:ba},{name:"identifier",test:o=>fn&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(o)},{name:"string",test:fn},{name:"Chain",test:yK},{name:"Array",test:cr},{name:"Matrix",test:ot},{name:"DenseMatrix",test:rT},{name:"SparseMatrix",test:Af},{name:"Range",test:MF},{name:"Index",test:XC},{name:"boolean",test:nge},{name:"ResultSet",test:ige},{name:"Help",test:pK},{name:"function",test:gK},{name:"Date",test:sge},{name:"RegExp",test:age},{name:"null",test:oge},{name:"undefined",test:lge},{name:"AccessorNode",test:Ac},{name:"ArrayNode",test:Ja},{name:"AssignmentNode",test:uge},{name:"BlockNode",test:cge},{name:"ConditionalNode",test:hge},{name:"ConstantNode",test:Vt},{name:"FunctionNode",test:Td},{name:"FunctionAssignmentNode",test:n_},{name:"IndexNode",test:J0},{name:"Node",test:sr},{name:"ObjectNode",test:QC},{name:"OperatorNode",test:wn},{name:"ParenthesisNode",test:Ec},{name:"RangeNode",test:dge},{name:"RelationalNode",test:fge},{name:"SymbolNode",test:hi},{name:"Map",test:vK},{name:"Object",test:YC}]),a.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(t||mA(l),Dge(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new t(l)}},{from:"number",to:"Complex",convert:function(l){return n||pA(l),new n(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return n||pA(l),new n(l.toNumber(),0)}},{from:"bigint",to:"number",convert:function(l){if(l>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+l+")");return Number(l)}},{from:"bigint",to:"BigNumber",convert:function(l){return t||mA(l),new t(l.toString())}},{from:"bigint",to:"Fraction",convert:function(l){return s||gA(l),new s(l)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return n||pA(l),new n(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){s||gA(l);var u=new s(l);if(u.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return u}},{from:"string",to:"number",convert:function(l){var u=Number(l);if(isNaN(u))throw new Error('Cannot convert "'+l+'" to a number');return u}},{from:"string",to:"BigNumber",convert:function(l){t||mA(l);try{return new t(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(l){try{return BigInt(l)}catch{throw new Error('Cannot convert "'+l+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(l){s||gA(l);try{return new s(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){n||pA(l);try{return new n(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return t||mA(l),new t(+l)}},{from:"boolean",to:"bigint",convert:function(l){return BigInt(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return s||gA(l),new s(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return i||$ge(),new i(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),a.onMismatch=(o,l,u)=>{var c=a.createError(o,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Ca(l[0])&&u.some(d=>!d.params.includes(","))){var h=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw h.data=c.data,h}throw c},a.onMismatch=(o,l,u)=>{var c=a.createError(o,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Ca(l[0])&&u.some(d=>!d.params.includes(","))){var h=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw h.data=c.data,h}throw c},a});function mA(r){throw new Error("Cannot convert value ".concat(r," into a BigNumber: no class 'BigNumber' provided"))}function pA(r){throw new Error("Cannot convert value ".concat(r," into a Complex number: no class 'Complex' provided"))}function $ge(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function gA(r){throw new Error("Cannot convert value ".concat(r," into a Fraction, no class 'Fraction' provided."))}var Vge="ResultSet",Uge=[],zge=Y(Vge,Uge,()=>{function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return r.prototype.type="ResultSet",r.prototype.isResultSet=!0,r.prototype.valueOf=function(){return this.entries},r.prototype.toString=function(){return"["+this.entries.map(String).join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},r.fromJSON=function(e){return new r(e.entries)},r},{isClass:!0});/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var wg=9e15,Ud=1e9,yP="0123456789abcdef",iT="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",sT="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",bP={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-wg,maxE:wg,crypto:!1},SK,ec,bt=!0,ZC="[DecimalError] ",Cd=ZC+"Invalid argument: ",TK=ZC+"Precision limit exceeded",CK=ZC+"crypto unavailable",NK="[object Decimal]",rs=Math.floor,zn=Math.pow,jge=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,qge=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Hge=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,DK=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Go=1e7,ct=7,Gge=9007199254740991,Wge=iT.length-1,wP=sT.length-1,De={toStringTag:NK};De.absoluteValue=De.abs=function(){var r=new this.constructor(this);return r.s<0&&(r.s=1),st(r)};De.ceil=function(){return st(new this.constructor(this),this.e+1,2)};De.clampedTo=De.clamp=function(r,e){var t,n=this,i=n.constructor;if(r=new i(r),e=new i(e),!r.s||!e.s)return new i(NaN);if(r.gt(e))throw Error(Cd+e);return t=n.cmp(r),t<0?r:n.cmp(e)>0?e:new i(n)};De.comparedTo=De.cmp=function(r){var e,t,n,i,s=this,a=s.d,o=(r=new s.constructor(r)).d,l=s.s,u=r.s;if(!a||!o)return!l||!u?NaN:l!==u?l:a===o?0:!a^l<0?1:-1;if(!a[0]||!o[0])return a[0]?l:o[0]?-u:0;if(l!==u)return l;if(s.e!==r.e)return s.e>r.e^l<0?1:-1;for(n=a.length,i=o.length,e=0,t=n<i?n:i;e<t;++e)if(a[e]!==o[e])return a[e]>o[e]^l<0?1:-1;return n===i?0:n>i^l<0?1:-1};De.cosine=De.cos=function(){var r,e,t=this,n=t.constructor;return t.d?t.d[0]?(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+ct,n.rounding=1,t=Kge(n,kK(n,t)),n.precision=r,n.rounding=e,st(ec==2||ec==3?t.neg():t,r,e,!0)):new n(1):new n(NaN)};De.cubeRoot=De.cbrt=function(){var r,e,t,n,i,s,a,o,l,u,c=this,h=c.constructor;if(!c.isFinite()||c.isZero())return new h(c);for(bt=!1,s=c.s*zn(c.s*c,1/3),!s||Math.abs(s)==1/0?(t=Ni(c.d),r=c.e,(s=(r-t.length+1)%3)&&(t+=s==1||s==-2?"0":"00"),s=zn(t,1/3),r=rs((r+1)/3)-(r%3==(r<0?-1:2)),s==1/0?t="5e"+r:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+r),n=new h(t),n.s=c.s):n=new h(s.toString()),a=(r=h.precision)+3;;)if(o=n,l=o.times(o).times(o),u=l.plus(c),n=Mr(u.plus(c).times(o),u.plus(l),a+2,1),Ni(o.d).slice(0,a)===(t=Ni(n.d)).slice(0,a))if(t=t.slice(a-3,a+1),t=="9999"||!i&&t=="4999"){if(!i&&(st(o,r+1,0),o.times(o).times(o).eq(c))){n=o;break}a+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(st(n,r+1,1),e=!n.times(n).times(n).eq(c));break}return bt=!0,st(n,r,h.rounding,e)};De.decimalPlaces=De.dp=function(){var r,e=this.d,t=NaN;if(e){if(r=e.length-1,t=(r-rs(this.e/ct))*ct,r=e[r],r)for(;r%10==0;r/=10)t--;t<0&&(t=0)}return t};De.dividedBy=De.div=function(r){return Mr(this,new this.constructor(r))};De.dividedToIntegerBy=De.divToInt=function(r){var e=this,t=e.constructor;return st(Mr(e,new t(r),0,1,1),t.precision,t.rounding)};De.equals=De.eq=function(r){return this.cmp(r)===0};De.floor=function(){return st(new this.constructor(this),this.e+1,3)};De.greaterThan=De.gt=function(r){return this.cmp(r)>0};De.greaterThanOrEqualTo=De.gte=function(r){var e=this.cmp(r);return e==1||e===0};De.hyperbolicCosine=De.cosh=function(){var r,e,t,n,i,s=this,a=s.constructor,o=new a(1);if(!s.isFinite())return new a(s.s?1/0:NaN);if(s.isZero())return o;t=a.precision,n=a.rounding,a.precision=t+Math.max(s.e,s.sd())+4,a.rounding=1,i=s.d.length,i<32?(r=Math.ceil(i/3),e=(1/t2(4,r)).toString()):(r=16,e="2.3283064365386962890625e-10"),s=D0(a,1,s.times(e),new a(1),!0);for(var l,u=r,c=new a(8);u--;)l=s.times(s),s=o.minus(l.times(c.minus(l.times(c))));return st(s,a.precision=t,a.rounding=n,!0)};De.hyperbolicSine=De.sinh=function(){var r,e,t,n,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(e=s.precision,t=s.rounding,s.precision=e+Math.max(i.e,i.sd())+4,s.rounding=1,n=i.d.length,n<3)i=D0(s,2,i,i,!0);else{r=1.4*Math.sqrt(n),r=r>16?16:r|0,i=i.times(1/t2(5,r)),i=D0(s,2,i,i,!0);for(var a,o=new s(5),l=new s(16),u=new s(20);r--;)a=i.times(i),i=i.times(o.plus(a.times(l.times(a).plus(u))))}return s.precision=e,s.rounding=t,st(i,e,t,!0)};De.hyperbolicTangent=De.tanh=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+7,n.rounding=1,Mr(t.sinh(),t.cosh(),n.precision=r,n.rounding=e)):new n(t.s)};De.inverseCosine=De.acos=function(){var r=this,e=r.constructor,t=r.abs().cmp(1),n=e.precision,i=e.rounding;return t!==-1?t===0?r.isNeg()?Ol(e,n,i):new e(0):new e(NaN):r.isZero()?Ol(e,n+4,i).times(.5):(e.precision=n+6,e.rounding=1,r=new e(1).minus(r).div(r.plus(1)).sqrt().atan(),e.precision=n,e.rounding=i,r.times(2))};De.inverseHyperbolicCosine=De.acosh=function(){var r,e,t=this,n=t.constructor;return t.lte(1)?new n(t.eq(1)?0:NaN):t.isFinite()?(r=n.precision,e=n.rounding,n.precision=r+Math.max(Math.abs(t.e),t.sd())+4,n.rounding=1,bt=!1,t=t.times(t).minus(1).sqrt().plus(t),bt=!0,n.precision=r,n.rounding=e,t.ln()):new n(t)};De.inverseHyperbolicSine=De.asinh=function(){var r,e,t=this,n=t.constructor;return!t.isFinite()||t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+2*Math.max(Math.abs(t.e),t.sd())+6,n.rounding=1,bt=!1,t=t.times(t).plus(1).sqrt().plus(t),bt=!0,n.precision=r,n.rounding=e,t.ln())};De.inverseHyperbolicTangent=De.atanh=function(){var r,e,t,n,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(r=s.precision,e=s.rounding,n=i.sd(),Math.max(n,r)<2*-i.e-1?st(new s(i),r,e,!0):(s.precision=t=n-i.e,i=Mr(i.plus(1),new s(1).minus(i),t+r,1),s.precision=r+4,s.rounding=1,i=i.ln(),s.precision=r,s.rounding=e,i.times(.5))):new s(NaN)};De.inverseSine=De.asin=function(){var r,e,t,n,i=this,s=i.constructor;return i.isZero()?new s(i):(e=i.abs().cmp(1),t=s.precision,n=s.rounding,e!==-1?e===0?(r=Ol(s,t+4,n).times(.5),r.s=i.s,r):new s(NaN):(s.precision=t+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=t,s.rounding=n,i.times(2)))};De.inverseTangent=De.atan=function(){var r,e,t,n,i,s,a,o,l,u=this,c=u.constructor,h=c.precision,d=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&h+4<=wP)return a=Ol(c,h+4,d).times(.25),a.s=u.s,a}else{if(!u.s)return new c(NaN);if(h+4<=wP)return a=Ol(c,h+4,d).times(.5),a.s=u.s,a}for(c.precision=o=h+10,c.rounding=1,t=Math.min(28,o/ct+2|0),r=t;r;--r)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(bt=!1,e=Math.ceil(o/ct),n=1,l=u.times(u),a=new c(u),i=u;r!==-1;)if(i=i.times(l),s=a.minus(i.div(n+=2)),i=i.times(l),a=s.plus(i.div(n+=2)),a.d[e]!==void 0)for(r=e;a.d[r]===s.d[r]&&r--;);return t&&(a=a.times(2<<t-1)),bt=!0,st(a,c.precision=h,c.rounding=d,!0)};De.isFinite=function(){return!!this.d};De.isInteger=De.isInt=function(){return!!this.d&&rs(this.e/ct)>this.d.length-2};De.isNaN=function(){return!this.s};De.isNegative=De.isNeg=function(){return this.s<0};De.isPositive=De.isPos=function(){return this.s>0};De.isZero=function(){return!!this.d&&this.d[0]===0};De.lessThan=De.lt=function(r){return this.cmp(r)<0};De.lessThanOrEqualTo=De.lte=function(r){return this.cmp(r)<1};De.logarithm=De.log=function(r){var e,t,n,i,s,a,o,l,u=this,c=u.constructor,h=c.precision,d=c.rounding,f=5;if(r==null)r=new c(10),e=!0;else{if(r=new c(r),t=r.d,r.s<0||!t||!t[0]||r.eq(1))return new c(NaN);e=r.eq(10)}if(t=u.d,u.s<0||!t||!t[0]||u.eq(1))return new c(t&&!t[0]?-1/0:u.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)s=!0;else{for(i=t[0];i%10===0;)i/=10;s=i!==1}if(bt=!1,o=h+f,a=Yh(u,o),n=e?aT(c,o+10):Yh(r,o),l=Mr(a,n,o,1),R1(l.d,i=h,d))do if(o+=10,a=Yh(u,o),n=e?aT(c,o+10):Yh(r,o),l=Mr(a,n,o,1),!s){+Ni(l.d).slice(i+1,i+15)+1==1e14&&(l=st(l,h+1,0));break}while(R1(l.d,i+=10,d));return bt=!0,st(l,h,d)};De.minus=De.sub=function(r){var e,t,n,i,s,a,o,l,u,c,h,d,f=this,p=f.constructor;if(r=new p(r),!f.d||!r.d)return!f.s||!r.s?r=new p(NaN):f.d?r.s=-r.s:r=new p(r.d||f.s!==r.s?f:NaN),r;if(f.s!=r.s)return r.s=-r.s,f.plus(r);if(u=f.d,d=r.d,o=p.precision,l=p.rounding,!u[0]||!d[0]){if(d[0])r.s=-r.s;else if(u[0])r=new p(f);else return new p(l===3?-0:0);return bt?st(r,o,l):r}if(t=rs(r.e/ct),c=rs(f.e/ct),u=u.slice(),s=c-t,s){for(h=s<0,h?(e=u,s=-s,a=d.length):(e=d,t=c,a=u.length),n=Math.max(Math.ceil(o/ct),a)+2,s>n&&(s=n,e.length=1),e.reverse(),n=s;n--;)e.push(0);e.reverse()}else{for(n=u.length,a=d.length,h=n<a,h&&(a=n),n=0;n<a;n++)if(u[n]!=d[n]){h=u[n]<d[n];break}s=0}for(h&&(e=u,u=d,d=e,r.s=-r.s),a=u.length,n=d.length-a;n>0;--n)u[a++]=0;for(n=d.length;n>s;){if(u[--n]<d[n]){for(i=n;i&&u[--i]===0;)u[i]=Go-1;--u[i],u[n]+=Go}u[n]-=d[n]}for(;u[--a]===0;)u.pop();for(;u[0]===0;u.shift())--t;return u[0]?(r.d=u,r.e=e2(u,t),bt?st(r,o,l):r):new p(l===3?-0:0)};De.modulo=De.mod=function(r){var e,t=this,n=t.constructor;return r=new n(r),!t.d||!r.s||r.d&&!r.d[0]?new n(NaN):!r.d||t.d&&!t.d[0]?st(new n(t),n.precision,n.rounding):(bt=!1,n.modulo==9?(e=Mr(t,r.abs(),0,3,1),e.s*=r.s):e=Mr(t,r,0,n.modulo,1),e=e.times(r),bt=!0,t.minus(e))};De.naturalExponential=De.exp=function(){return xP(this)};De.naturalLogarithm=De.ln=function(){return Yh(this)};De.negated=De.neg=function(){var r=new this.constructor(this);return r.s=-r.s,st(r)};De.plus=De.add=function(r){var e,t,n,i,s,a,o,l,u,c,h=this,d=h.constructor;if(r=new d(r),!h.d||!r.d)return!h.s||!r.s?r=new d(NaN):h.d||(r=new d(r.d||h.s===r.s?h:NaN)),r;if(h.s!=r.s)return r.s=-r.s,h.minus(r);if(u=h.d,c=r.d,o=d.precision,l=d.rounding,!u[0]||!c[0])return c[0]||(r=new d(h)),bt?st(r,o,l):r;if(s=rs(h.e/ct),n=rs(r.e/ct),u=u.slice(),i=s-n,i){for(i<0?(t=u,i=-i,a=c.length):(t=c,n=s,a=u.length),s=Math.ceil(o/ct),a=s>a?s+1:a+1,i>a&&(i=a,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(a=u.length,i=c.length,a-i<0&&(i=a,t=c,c=u,u=t),e=0;i;)e=(u[--i]=u[i]+c[i]+e)/Go|0,u[i]%=Go;for(e&&(u.unshift(e),++n),a=u.length;u[--a]==0;)u.pop();return r.d=u,r.e=e2(u,n),bt?st(r,o,l):r};De.precision=De.sd=function(r){var e,t=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(Cd+r);return t.d?(e=MK(t.d),r&&t.e+1>e&&(e=t.e+1)):e=NaN,e};De.round=function(){var r=this,e=r.constructor;return st(new e(r),r.e+1,e.rounding)};De.sine=De.sin=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+ct,n.rounding=1,t=Yge(n,kK(n,t)),n.precision=r,n.rounding=e,st(ec>2?t.neg():t,r,e,!0)):new n(NaN)};De.squareRoot=De.sqrt=function(){var r,e,t,n,i,s,a=this,o=a.d,l=a.e,u=a.s,c=a.constructor;if(u!==1||!o||!o[0])return new c(!u||u<0&&(!o||o[0])?NaN:o?a:1/0);for(bt=!1,u=Math.sqrt(+a),u==0||u==1/0?(e=Ni(o),(e.length+l)%2==0&&(e+="0"),u=Math.sqrt(e),l=rs((l+1)/2)-(l<0||l%2),u==1/0?e="5e"+l:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),n=new c(e)):n=new c(u.toString()),t=(l=c.precision)+3;;)if(s=n,n=s.plus(Mr(a,s,t+2,1)).times(.5),Ni(s.d).slice(0,t)===(e=Ni(n.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!i&&e=="4999"){if(!i&&(st(s,l+1,0),s.times(s).eq(a))){n=s;break}t+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(st(n,l+1,1),r=!n.times(n).eq(a));break}return bt=!0,st(n,l,c.rounding,r)};De.tangent=De.tan=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+10,n.rounding=1,t=t.sin(),t.s=1,t=Mr(t,new n(1).minus(t.times(t)).sqrt(),r+10,0),n.precision=r,n.rounding=e,st(ec==2||ec==4?t.neg():t,r,e,!0)):new n(NaN)};De.times=De.mul=function(r){var e,t,n,i,s,a,o,l,u,c=this,h=c.constructor,d=c.d,f=(r=new h(r)).d;if(r.s*=c.s,!d||!d[0]||!f||!f[0])return new h(!r.s||d&&!d[0]&&!f||f&&!f[0]&&!d?NaN:!d||!f?r.s/0:r.s*0);for(t=rs(c.e/ct)+rs(r.e/ct),l=d.length,u=f.length,l<u&&(s=d,d=f,f=s,a=l,l=u,u=a),s=[],a=l+u,n=a;n--;)s.push(0);for(n=u;--n>=0;){for(e=0,i=l+n;i>n;)o=s[i]+f[n]*d[i-n-1]+e,s[i--]=o%Go|0,e=o/Go|0;s[i]=(s[i]+e)%Go|0}for(;!s[--a];)s.pop();return e?++t:s.shift(),r.d=s,r.e=e2(s,t),bt?st(r,h.precision,h.rounding):r};De.toBinary=function(r,e){return IF(this,2,r,e)};De.toDecimalPlaces=De.toDP=function(r,e){var t=this,n=t.constructor;return t=new n(t),r===void 0?t:(Ks(r,0,Ud),e===void 0?e=n.rounding:Ks(e,0,8),st(t,r+t.e+1,e))};De.toExponential=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=Ql(n,!0):(Ks(r,0,Ud),e===void 0?e=i.rounding:Ks(e,0,8),n=st(new i(n),r+1,e),t=Ql(n,!0,r+1)),n.isNeg()&&!n.isZero()?"-"+t:t};De.toFixed=function(r,e){var t,n,i=this,s=i.constructor;return r===void 0?t=Ql(i):(Ks(r,0,Ud),e===void 0?e=s.rounding:Ks(e,0,8),n=st(new s(i),r+i.e+1,e),t=Ql(n,!1,r+n.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};De.toFraction=function(r){var e,t,n,i,s,a,o,l,u,c,h,d,f=this,p=f.d,g=f.constructor;if(!p)return new g(f);if(u=t=new g(1),n=l=new g(0),e=new g(n),s=e.e=MK(p)-f.e-1,a=s%ct,e.d[0]=zn(10,a<0?ct+a:a),r==null)r=s>0?e:u;else{if(o=new g(r),!o.isInt()||o.lt(u))throw Error(Cd+o);r=o.gt(e)?s>0?e:u:o}for(bt=!1,o=new g(Ni(p)),c=g.precision,g.precision=s=p.length*ct*2;h=Mr(o,e,0,1,1),i=t.plus(h.times(n)),i.cmp(r)!=1;)t=n,n=i,i=u,u=l.plus(h.times(i)),l=i,i=e,e=o.minus(h.times(i)),o=i;return i=Mr(r.minus(t),n,0,1,1),l=l.plus(i.times(u)),t=t.plus(i.times(n)),l.s=u.s=f.s,d=Mr(u,n,s,1).minus(f).abs().cmp(Mr(l,t,s,1).minus(f).abs())<1?[u,n]:[l,t],g.precision=c,bt=!0,d};De.toHexadecimal=De.toHex=function(r,e){return IF(this,16,r,e)};De.toNearest=function(r,e){var t=this,n=t.constructor;if(t=new n(t),r==null){if(!t.d)return t;r=new n(1),e=n.rounding}else{if(r=new n(r),e===void 0?e=n.rounding:Ks(e,0,8),!t.d)return r.s?t:r;if(!r.d)return r.s&&(r.s=t.s),r}return r.d[0]?(bt=!1,t=Mr(t,r,0,e,1).times(r),bt=!0,st(t)):(r.s=t.s,t=r),t};De.toNumber=function(){return+this};De.toOctal=function(r,e){return IF(this,8,r,e)};De.toPower=De.pow=function(r){var e,t,n,i,s,a,o=this,l=o.constructor,u=+(r=new l(r));if(!o.d||!r.d||!o.d[0]||!r.d[0])return new l(zn(+o,u));if(o=new l(o),o.eq(1))return o;if(n=l.precision,s=l.rounding,r.eq(1))return st(o,n,s);if(e=rs(r.e/ct),e>=r.d.length-1&&(t=u<0?-u:u)<=Gge)return i=IK(l,o,t,n),r.s<0?new l(1).div(i):st(i,n,s);if(a=o.s,a<0){if(e<r.d.length-1)return new l(NaN);if(r.d[e]&1||(a=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=a,o}return t=zn(+o,u),e=t==0||!isFinite(t)?rs(u*(Math.log("0."+Ni(o.d))/Math.LN10+o.e+1)):new l(t+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?a/0:0):(bt=!1,l.rounding=o.s=1,t=Math.min(12,(e+"").length),i=xP(r.times(Yh(o,n+t)),n),i.d&&(i=st(i,n+5,1),R1(i.d,n,s)&&(e=n+10,i=st(xP(r.times(Yh(o,e+t)),e),e+5,1),+Ni(i.d).slice(n+1,n+15)+1==1e14&&(i=st(i,n+1,0)))),i.s=a,bt=!0,l.rounding=s,st(i,n,s))};De.toPrecision=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=Ql(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(Ks(r,1,Ud),e===void 0?e=i.rounding:Ks(e,0,8),n=st(new i(n),r,e),t=Ql(n,r<=n.e||n.e<=i.toExpNeg,r)),n.isNeg()&&!n.isZero()?"-"+t:t};De.toSignificantDigits=De.toSD=function(r,e){var t=this,n=t.constructor;return r===void 0?(r=n.precision,e=n.rounding):(Ks(r,1,Ud),e===void 0?e=n.rounding:Ks(e,0,8)),st(new n(t),r,e)};De.toString=function(){var r=this,e=r.constructor,t=Ql(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()&&!r.isZero()?"-"+t:t};De.truncated=De.trunc=function(){return st(new this.constructor(this),this.e+1,1)};De.valueOf=De.toJSON=function(){var r=this,e=r.constructor,t=Ql(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()?"-"+t:t};function Ni(r){var e,t,n,i=r.length-1,s="",a=r[0];if(i>0){for(s+=a,e=1;e<i;e++)n=r[e]+"",t=ct-n.length,t&&(s+=Hc(t)),s+=n;a=r[e],n=a+"",t=ct-n.length,t&&(s+=Hc(t))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}function Ks(r,e,t){if(r!==~~r||r<e||r>t)throw Error(Cd+r)}function R1(r,e,t,n){var i,s,a,o;for(s=r[0];s>=10;s/=10)--e;return--e<0?(e+=ct,i=0):(i=Math.ceil((e+1)/ct),e%=ct),s=zn(10,ct-e),o=r[i]%s|0,n==null?e<3?(e==0?o=o/100|0:e==1&&(o=o/10|0),a=t<4&&o==99999||t>3&&o==49999||o==5e4||o==0):a=(t<4&&o+1==s||t>3&&o+1==s/2)&&(r[i+1]/s/100|0)==zn(10,e-2)-1||(o==s/2||o==0)&&(r[i+1]/s/100|0)==0:e<4?(e==0?o=o/1e3|0:e==1?o=o/100|0:e==2&&(o=o/10|0),a=(n||t<4)&&o==9999||!n&&t>3&&o==4999):a=((n||t<4)&&o+1==s||!n&&t>3&&o+1==s/2)&&(r[i+1]/s/1e3|0)==zn(10,e-3)-1,a}function zE(r,e,t){for(var n,i=[0],s,a=0,o=r.length;a<o;){for(s=i.length;s--;)i[s]*=e;for(i[0]+=yP.indexOf(r.charAt(a++)),n=0;n<i.length;n++)i[n]>t-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/t|0,i[n]%=t)}return i.reverse()}function Kge(r,e){var t,n,i;if(e.isZero())return e;n=e.d.length,n<32?(t=Math.ceil(n/3),i=(1/t2(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),r.precision+=t,e=D0(r,1,e.times(i),new r(1));for(var s=t;s--;){var a=e.times(e);e=a.times(a).minus(a).times(8).plus(1)}return r.precision-=t,e}var Mr=function(){function r(n,i,s){var a,o=0,l=n.length;for(n=n.slice();l--;)a=n[l]*i+o,n[l]=a%s|0,o=a/s|0;return o&&n.unshift(o),n}function e(n,i,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(n[o]!=i[o]){l=n[o]>i[o]?1:-1;break}return l}function t(n,i,s,a){for(var o=0;s--;)n[s]-=o,o=n[s]<i[s]?1:0,n[s]=o*a+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,a,o,l){var u,c,h,d,f,p,g,b,v,x,y,E,w,A,T,S,N,D,_,M,I=n.constructor,V=n.s==i.s?1:-1,q=n.d,P=i.d;if(!q||!q[0]||!P||!P[0])return new I(!n.s||!i.s||(q?P&&q[0]==P[0]:!P)?NaN:q&&q[0]==0||!P?V*0:V/0);for(l?(f=1,c=n.e-i.e):(l=Go,f=ct,c=rs(n.e/f)-rs(i.e/f)),_=P.length,N=q.length,v=new I(V),x=v.d=[],h=0;P[h]==(q[h]||0);h++);if(P[h]>(q[h]||0)&&c--,s==null?(A=s=I.precision,a=I.rounding):o?A=s+(n.e-i.e)+1:A=s,A<0)x.push(1),p=!0;else{if(A=A/f+2|0,h=0,_==1){for(d=0,P=P[0],A++;(h<N||d)&&A--;h++)T=d*l+(q[h]||0),x[h]=T/P|0,d=T%P|0;p=d||h<N}else{for(d=l/(P[0]+1)|0,d>1&&(P=r(P,d,l),q=r(q,d,l),_=P.length,N=q.length),S=_,y=q.slice(0,_),E=y.length;E<_;)y[E++]=0;M=P.slice(),M.unshift(0),D=P[0],P[1]>=l/2&&++D;do d=0,u=e(P,y,_,E),u<0?(w=y[0],_!=E&&(w=w*l+(y[1]||0)),d=w/D|0,d>1?(d>=l&&(d=l-1),g=r(P,d,l),b=g.length,E=y.length,u=e(g,y,b,E),u==1&&(d--,t(g,_<b?M:P,b,l))):(d==0&&(u=d=1),g=P.slice()),b=g.length,b<E&&g.unshift(0),t(y,g,E,l),u==-1&&(E=y.length,u=e(P,y,_,E),u<1&&(d++,t(y,_<E?M:P,E,l))),E=y.length):u===0&&(d++,y=[0]),x[h++]=d,u&&y[0]?y[E++]=q[S]||0:(y=[q[S]],E=1);while((S++<N||y[0]!==void 0)&&A--);p=y[0]!==void 0}x[0]||x.shift()}if(f==1)v.e=c,SK=p;else{for(h=1,d=x[0];d>=10;d/=10)h++;v.e=h+c*f-1,st(v,o?s+v.e+1:s,a,p)}return v}}();function st(r,e,t,n){var i,s,a,o,l,u,c,h,d,f=r.constructor;e:if(e!=null){if(h=r.d,!h)return r;for(i=1,o=h[0];o>=10;o/=10)i++;if(s=e-i,s<0)s+=ct,a=e,c=h[d=0],l=c/zn(10,i-a-1)%10|0;else if(d=Math.ceil((s+1)/ct),o=h.length,d>=o)if(n){for(;o++<=d;)h.push(0);c=l=0,i=1,s%=ct,a=s-ct+1}else break e;else{for(c=o=h[d],i=1;o>=10;o/=10)i++;s%=ct,a=s-ct+i,l=a<0?0:c/zn(10,i-a-1)%10|0}if(n=n||e<0||h[d+1]!==void 0||(a<0?c:c%zn(10,i-a-1)),u=t<4?(l||n)&&(t==0||t==(r.s<0?3:2)):l>5||l==5&&(t==4||n||t==6&&(s>0?a>0?c/zn(10,i-a):0:h[d-1])%10&1||t==(r.s<0?8:7)),e<1||!h[0])return h.length=0,u?(e-=r.e+1,h[0]=zn(10,(ct-e%ct)%ct),r.e=-e||0):h[0]=r.e=0,r;if(s==0?(h.length=d,o=1,d--):(h.length=d+1,o=zn(10,ct-s),h[d]=a>0?(c/zn(10,i-a)%zn(10,a)|0)*o:0),u)for(;;)if(d==0){for(s=1,a=h[0];a>=10;a/=10)s++;for(a=h[0]+=o,o=1;a>=10;a/=10)o++;s!=o&&(r.e++,h[0]==Go&&(h[0]=1));break}else{if(h[d]+=o,h[d]!=Go)break;h[d--]=0,o=1}for(s=h.length;h[--s]===0;)h.pop()}return bt&&(r.e>f.maxE?(r.d=null,r.e=NaN):r.e<f.minE&&(r.e=0,r.d=[0])),r}function Ql(r,e,t){if(!r.isFinite())return RK(r);var n,i=r.e,s=Ni(r.d),a=s.length;return e?(t&&(n=t-a)>0?s=s.charAt(0)+"."+s.slice(1)+Hc(n):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(r.e<0?"e":"e+")+r.e):i<0?(s="0."+Hc(-i-1)+s,t&&(n=t-a)>0&&(s+=Hc(n))):i>=a?(s+=Hc(i+1-a),t&&(n=t-i-1)>0&&(s=s+"."+Hc(n))):((n=i+1)<a&&(s=s.slice(0,n)+"."+s.slice(n)),t&&(n=t-a)>0&&(i+1===a&&(s+="."),s+=Hc(n))),s}function e2(r,e){var t=r[0];for(e*=ct;t>=10;t/=10)e++;return e}function aT(r,e,t){if(e>Wge)throw bt=!0,t&&(r.precision=t),Error(TK);return st(new r(iT),e,1,!0)}function Ol(r,e,t){if(e>wP)throw Error(TK);return st(new r(sT),e,t,!0)}function MK(r){var e=r.length-1,t=e*ct+1;if(e=r[e],e){for(;e%10==0;e/=10)t--;for(e=r[0];e>=10;e/=10)t++}return t}function Hc(r){for(var e="";r--;)e+="0";return e}function IK(r,e,t,n){var i,s=new r(1),a=Math.ceil(n/ct+4);for(bt=!1;;){if(t%2&&(s=s.times(e),q5(s.d,a)&&(i=!0)),t=rs(t/2),t===0){t=s.d.length-1,i&&s.d[t]===0&&++s.d[t];break}e=e.times(e),q5(e.d,a)}return bt=!0,s}function j5(r){return r.d[r.d.length-1]&1}function PK(r,e,t){for(var n,i,s=new r(e[0]),a=0;++a<e.length;){if(i=new r(e[a]),!i.s){s=i;break}n=s.cmp(i),(n===t||n===0&&s.s===t)&&(s=i)}return s}function xP(r,e){var t,n,i,s,a,o,l,u=0,c=0,h=0,d=r.constructor,f=d.rounding,p=d.precision;if(!r.d||!r.d[0]||r.e>17)return new d(r.d?r.d[0]?r.s<0?0:1/0:1:r.s?r.s<0?0:r:NaN);for(e==null?(bt=!1,l=p):l=e,o=new d(.03125);r.e>-2;)r=r.times(o),h+=5;for(n=Math.log(zn(2,h))/Math.LN10*2+5|0,l+=n,t=s=a=new d(1),d.precision=l;;){if(s=st(s.times(r),l,1),t=t.times(++c),o=a.plus(Mr(s,t,l,1)),Ni(o.d).slice(0,l)===Ni(a.d).slice(0,l)){for(i=h;i--;)a=st(a.times(a),l,1);if(e==null)if(u<3&&R1(a.d,l-n,f,u))d.precision=l+=10,t=s=o=new d(1),c=0,u++;else return st(a,d.precision=p,f,bt=!0);else return d.precision=p,a}a=o}}function Yh(r,e){var t,n,i,s,a,o,l,u,c,h,d,f=1,p=10,g=r,b=g.d,v=g.constructor,x=v.rounding,y=v.precision;if(g.s<0||!b||!b[0]||!g.e&&b[0]==1&&b.length==1)return new v(b&&!b[0]?-1/0:g.s!=1?NaN:b?0:g);if(e==null?(bt=!1,c=y):c=e,v.precision=c+=p,t=Ni(b),n=t.charAt(0),Math.abs(s=g.e)<15e14){for(;n<7&&n!=1||n==1&&t.charAt(1)>3;)g=g.times(r),t=Ni(g.d),n=t.charAt(0),f++;s=g.e,n>1?(g=new v("0."+t),s++):g=new v(n+"."+t.slice(1))}else return u=aT(v,c+2,y).times(s+""),g=Yh(new v(n+"."+t.slice(1)),c-p).plus(u),v.precision=y,e==null?st(g,y,x,bt=!0):g;for(h=g,l=a=g=Mr(g.minus(1),g.plus(1),c,1),d=st(g.times(g),c,1),i=3;;){if(a=st(a.times(d),c,1),u=l.plus(Mr(a,new v(i),c,1)),Ni(u.d).slice(0,c)===Ni(l.d).slice(0,c))if(l=l.times(2),s!==0&&(l=l.plus(aT(v,c+2,y).times(s+""))),l=Mr(l,new v(f),c,1),e==null)if(R1(l.d,c-p,x,o))v.precision=c+=p,u=a=g=Mr(h.minus(1),h.plus(1),c,1),d=st(g.times(g),c,1),i=o=1;else return st(l,v.precision=y,x,bt=!0);else return v.precision=y,l;l=u,i+=2}}function RK(r){return String(r.s*r.s/0)}function jE(r,e){var t,n,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(t<0&&(t=n),t+=+e.slice(n+1),e=e.substring(0,n)):t<0&&(t=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,r.e=t=t-n-1,r.d=[],n=(t+1)%ct,t<0&&(n+=ct),n<i){for(n&&r.d.push(+e.slice(0,n)),i-=ct;n<i;)r.d.push(+e.slice(n,n+=ct));e=e.slice(n),n=ct-e.length}else n-=i;for(;n--;)e+="0";r.d.push(+e),bt&&(r.e>r.constructor.maxE?(r.d=null,r.e=NaN):r.e<r.constructor.minE&&(r.e=0,r.d=[0]))}else r.e=0,r.d=[0];return r}function Xge(r,e){var t,n,i,s,a,o,l,u,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),DK.test(e))return jE(r,e)}else if(e==="Infinity"||e==="NaN")return+e||(r.s=NaN),r.e=NaN,r.d=null,r;if(qge.test(e))t=16,e=e.toLowerCase();else if(jge.test(e))t=2;else if(Hge.test(e))t=8;else throw Error(Cd+e);for(s=e.search(/p/i),s>0?(l=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),a=s>=0,n=r.constructor,a&&(e=e.replace(".",""),o=e.length,s=o-s,i=IK(n,new n(t),s,s*2)),u=zE(e,t,Go),c=u.length-1,s=c;u[s]===0;--s)u.pop();return s<0?new n(r.s*0):(r.e=e2(u,c),r.d=u,bt=!1,a&&(r=Mr(r,i,o*4)),l&&(r=r.times(Math.abs(l)<54?zn(2,l):Nd.pow(2,l))),bt=!0,r)}function Yge(r,e){var t,n=e.d.length;if(n<3)return e.isZero()?e:D0(r,2,e,e);t=1.4*Math.sqrt(n),t=t>16?16:t|0,e=e.times(1/t2(5,t)),e=D0(r,2,e,e);for(var i,s=new r(5),a=new r(16),o=new r(20);t--;)i=e.times(e),e=e.times(s.plus(i.times(a.times(i).minus(o))));return e}function D0(r,e,t,n,i){var s,a,o,l,u=r.precision,c=Math.ceil(u/ct);for(bt=!1,l=t.times(t),o=new r(n);;){if(a=Mr(o.times(l),new r(e++*e++),u,1),o=i?n.plus(a):n.minus(a),n=Mr(a.times(l),new r(e++*e++),u,1),a=o.plus(n),a.d[c]!==void 0){for(s=c;a.d[s]===o.d[s]&&s--;);if(s==-1)break}s=o,o=n,n=a,a=s}return bt=!0,a.d.length=c+1,a}function t2(r,e){for(var t=r;--e;)t*=r;return t}function kK(r,e){var t,n=e.s<0,i=Ol(r,r.precision,1),s=i.times(.5);if(e=e.abs(),e.lte(s))return ec=n?4:1,e;if(t=e.divToInt(i),t.isZero())ec=n?3:2;else{if(e=e.minus(t.times(i)),e.lte(s))return ec=j5(t)?n?2:3:n?4:1,e;ec=j5(t)?n?1:4:n?3:2}return e.minus(i).abs()}function IF(r,e,t,n){var i,s,a,o,l,u,c,h,d,f=r.constructor,p=t!==void 0;if(p?(Ks(t,1,Ud),n===void 0?n=f.rounding:Ks(n,0,8)):(t=f.precision,n=f.rounding),!r.isFinite())c=RK(r);else{for(c=Ql(r),a=c.indexOf("."),p?(i=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):i=e,a>=0&&(c=c.replace(".",""),d=new f(1),d.e=c.length-a,d.d=zE(Ql(d),10,i),d.e=d.d.length),h=zE(c,10,i),s=l=h.length;h[--l]==0;)h.pop();if(!h[0])c=p?"0p+0":"0";else{if(a<0?s--:(r=new f(r),r.d=h,r.e=s,r=Mr(r,d,t,n,0,i),h=r.d,s=r.e,u=SK),a=h[t],o=i/2,u=u||h[t+1]!==void 0,u=n<4?(a!==void 0||u)&&(n===0||n===(r.s<0?3:2)):a>o||a===o&&(n===4||u||n===6&&h[t-1]&1||n===(r.s<0?8:7)),h.length=t,u)for(;++h[--t]>i-1;)h[t]=0,t||(++s,h.unshift(1));for(l=h.length;!h[l-1];--l);for(a=0,c="";a<l;a++)c+=yP.charAt(h[a]);if(p){if(l>1)if(e==16||e==8){for(a=e==16?4:3,--l;l%a;l++)c+="0";for(h=zE(c,i,e),l=h.length;!h[l-1];--l);for(a=1,c="1.";a<l;a++)c+=yP.charAt(h[a])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>l)for(s-=l;s--;)c+="0";else s<l&&(c=c.slice(0,s)+"."+c.slice(s))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return r.s<0?"-"+c:c}function q5(r,e){if(r.length>e)return r.length=e,!0}function Qge(r){return new this(r).abs()}function Jge(r){return new this(r).acos()}function Zge(r){return new this(r).acosh()}function eve(r,e){return new this(r).plus(e)}function tve(r){return new this(r).asin()}function rve(r){return new this(r).asinh()}function nve(r){return new this(r).atan()}function ive(r){return new this(r).atanh()}function sve(r,e){r=new this(r),e=new this(e);var t,n=this.precision,i=this.rounding,s=n+4;return!r.s||!e.s?t=new this(NaN):!r.d&&!e.d?(t=Ol(this,s,1).times(e.s>0?.25:.75),t.s=r.s):!e.d||r.isZero()?(t=e.s<0?Ol(this,n,i):new this(0),t.s=r.s):!r.d||e.isZero()?(t=Ol(this,s,1).times(.5),t.s=r.s):e.s<0?(this.precision=s,this.rounding=1,t=this.atan(Mr(r,e,s,1)),e=Ol(this,s,1),this.precision=n,this.rounding=i,t=r.s<0?t.minus(e):t.plus(e)):t=this.atan(Mr(r,e,s,1)),t}function ave(r){return new this(r).cbrt()}function ove(r){return st(r=new this(r),r.e+1,2)}function lve(r,e,t){return new this(r).clamp(e,t)}function uve(r){if(!r||typeof r!="object")throw Error(ZC+"Object expected");var e,t,n,i=r.defaults===!0,s=["precision",1,Ud,"rounding",0,8,"toExpNeg",-wg,0,"toExpPos",0,wg,"maxE",0,wg,"minE",-wg,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(t=s[e],i&&(this[t]=bP[t]),(n=r[t])!==void 0)if(rs(n)===n&&n>=s[e+1]&&n<=s[e+2])this[t]=n;else throw Error(Cd+t+": "+n);if(t="crypto",i&&(this[t]=bP[t]),(n=r[t])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(CK);else this[t]=!1;else throw Error(Cd+t+": "+n);return this}function cve(r){return new this(r).cos()}function hve(r){return new this(r).cosh()}function FK(r){var e,t,n;function i(s){var a,o,l,u=this;if(!(u instanceof i))return new i(s);if(u.constructor=i,H5(s)){u.s=s.s,bt?!s.d||s.e>i.maxE?(u.e=NaN,u.d=null):s.e<i.minE?(u.e=0,u.d=[0]):(u.e=s.e,u.d=s.d.slice()):(u.e=s.e,u.d=s.d?s.d.slice():s.d);return}if(l=typeof s,l==="number"){if(s===0){u.s=1/s<0?-1:1,u.e=0,u.d=[0];return}if(s<0?(s=-s,u.s=-1):u.s=1,s===~~s&&s<1e7){for(a=0,o=s;o>=10;o/=10)a++;bt?a>i.maxE?(u.e=NaN,u.d=null):a<i.minE?(u.e=0,u.d=[0]):(u.e=a,u.d=[s]):(u.e=a,u.d=[s]);return}if(s*0!==0){s||(u.s=NaN),u.e=NaN,u.d=null;return}return jE(u,s.toString())}if(l==="string")return(o=s.charCodeAt(0))===45?(s=s.slice(1),u.s=-1):(o===43&&(s=s.slice(1)),u.s=1),DK.test(s)?jE(u,s):Xge(u,s);if(l==="bigint")return s<0?(s=-s,u.s=-1):u.s=1,jE(u,s.toString());throw Error(Cd+s)}if(i.prototype=De,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=uve,i.clone=FK,i.isDecimal=H5,i.abs=Qge,i.acos=Jge,i.acosh=Zge,i.add=eve,i.asin=tve,i.asinh=rve,i.atan=nve,i.atanh=ive,i.atan2=sve,i.cbrt=ave,i.ceil=ove,i.clamp=lve,i.cos=cve,i.cosh=hve,i.div=dve,i.exp=fve,i.floor=mve,i.hypot=pve,i.ln=gve,i.log=vve,i.log10=bve,i.log2=yve,i.max=wve,i.min=xve,i.mod=_ve,i.mul=Ave,i.pow=Eve,i.random=Sve,i.round=Tve,i.sign=Cve,i.sin=Nve,i.sinh=Dve,i.sqrt=Mve,i.sub=Ive,i.sum=Pve,i.tan=Rve,i.tanh=kve,i.trunc=Fve,r===void 0&&(r={}),r&&r.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)r.hasOwnProperty(t=n[e++])||(r[t]=this[t]);return i.config(r),i}function dve(r,e){return new this(r).div(e)}function fve(r){return new this(r).exp()}function mve(r){return st(r=new this(r),r.e+1,3)}function pve(){var r,e,t=new this(0);for(bt=!1,r=0;r<arguments.length;)if(e=new this(arguments[r++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return bt=!0,new this(1/0);t=e}return bt=!0,t.sqrt()}function H5(r){return r instanceof Nd||r&&r.toStringTag===NK||!1}function gve(r){return new this(r).ln()}function vve(r,e){return new this(r).log(e)}function yve(r){return new this(r).log(2)}function bve(r){return new this(r).log(10)}function wve(){return PK(this,arguments,-1)}function xve(){return PK(this,arguments,1)}function _ve(r,e){return new this(r).mod(e)}function Ave(r,e){return new this(r).mul(e)}function Eve(r,e){return new this(r).pow(e)}function Sve(r){var e,t,n,i,s=0,a=new this(1),o=[];if(r===void 0?r=this.precision:Ks(r,1,Ud),n=Math.ceil(r/ct),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));s<n;)i=e[s],i>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:o[s++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);s<n;)i=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,s):(o.push(i%1e7),s+=4);s=n/4}else throw Error(CK);else for(;s<n;)o[s++]=Math.random()*1e7|0;for(n=o[--s],r%=ct,n&&r&&(i=zn(10,ct-r),o[s]=(n/i|0)*i);o[s]===0;s--)o.pop();if(s<0)t=0,o=[0];else{for(t=-1;o[0]===0;t-=ct)o.shift();for(n=1,i=o[0];i>=10;i/=10)n++;n<ct&&(t-=ct-n)}return a.e=t,a.d=o,a}function Tve(r){return st(r=new this(r),r.e+1,this.rounding)}function Cve(r){return r=new this(r),r.d?r.d[0]?r.s:0*r.s:r.s||NaN}function Nve(r){return new this(r).sin()}function Dve(r){return new this(r).sinh()}function Mve(r){return new this(r).sqrt()}function Ive(r,e){return new this(r).sub(e)}function Pve(){var r=0,e=arguments,t=new this(e[r]);for(bt=!1;t.s&&++r<e.length;)t=t.plus(e[r]);return bt=!0,st(t,this.precision,this.rounding)}function Rve(r){return new this(r).tan()}function kve(r){return new this(r).tanh()}function Fve(r){return st(r=new this(r),r.e+1,1)}De[Symbol.for("nodejs.util.inspect.custom")]=De.toString;De[Symbol.toStringTag]="Decimal";var Nd=De.constructor=FK(bP);iT=new Nd(iT);sT=new Nd(sT);var Ove="BigNumber",Bve=["?on","config"],Lve=Y(Ove,Bve,r=>{var{on:e,config:t}=r,n=Nd.clone({precision:t.precision,modulo:Nd.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,s){i.precision!==s.precision&&n.config({precision:i.precision})}),n},{isClass:!0});const Vi=Math.cosh||function(r){return Math.abs(r)<1e-9?1-r:(Math.exp(r)+Math.exp(-r))*.5},Ba=Math.sinh||function(r){return Math.abs(r)<1e-9?r:(Math.exp(r)-Math.exp(-r))*.5},$ve=r=>{const e=Math.sin(.5*r);return-2*e*e},jN=function(r,e){return r=Math.abs(r),e=Math.abs(e),r<e&&([r,e]=[e,r]),r<1e8?Math.sqrt(r*r+e*e):(e/=r,r*Math.sqrt(1+e*e))},Op=function(){throw SyntaxError("Invalid Param")};function qN(r,e){const t=Math.abs(r),n=Math.abs(e);return r===0?Math.log(n):e===0?Math.log(t):t<3e3&&n<3e3?Math.log(r*r+e*e)*.5:(r=r*.5,e=e*.5,.5*Math.log(r*r+e*e)+Math.LN2)}const Vve={re:0,im:0},df=function(r,e){const t=Vve;if(r==null)t.re=t.im=0;else if(e!==void 0)t.re=r,t.im=e;else switch(typeof r){case"object":if("im"in r&&"re"in r)t.re=r.re,t.im=r.im;else if("abs"in r&&"arg"in r){if(!isFinite(r.abs)&&isFinite(r.arg))return xe.INFINITY;t.re=r.abs*Math.cos(r.arg),t.im=r.abs*Math.sin(r.arg)}else if("r"in r&&"phi"in r){if(!isFinite(r.r)&&isFinite(r.phi))return xe.INFINITY;t.re=r.r*Math.cos(r.phi),t.im=r.r*Math.sin(r.phi)}else r.length===2?(t.re=r[0],t.im=r[1]):Op();break;case"string":t.im=t.re=0;const n=r.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,s=0;n===null&&Op();for(let a=0;a<n.length;a++){const o=n[a];o===" "||o==="	"||o===`
`||(o==="+"?i++:o==="-"?s++:o==="i"||o==="I"?(i+s===0&&Op(),n[a+1]!==" "&&!isNaN(n[a+1])?(t.im+=parseFloat((s%2?"-":"")+n[a+1]),a++):t.im+=parseFloat((s%2?"-":"")+"1"),i=s=0):((i+s===0||isNaN(o))&&Op(),n[a+1]==="i"||n[a+1]==="I"?(t.im+=parseFloat((s%2?"-":"")+o),a++):t.re+=parseFloat((s%2?"-":"")+o),i=s=0))}i+s>0&&Op();break;case"number":t.im=0,t.re=r;break;default:Op()}return isNaN(t.re)||isNaN(t.im),t};function xe(r,e){if(!(this instanceof xe))return new xe(r,e);const t=df(r,e);this.re=t.re,this.im=t.im}xe.prototype={re:0,im:0,sign:function(){const r=jN(this.re,this.im);return new xe(this.re/r,this.im/r)},add:function(r,e){const t=df(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im));return n||i?n&&i?xe.NAN:xe.INFINITY:new xe(this.re+t.re,this.im+t.im)},sub:function(r,e){const t=df(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im));return n||i?n&&i?xe.NAN:xe.INFINITY:new xe(this.re-t.re,this.im-t.im)},mul:function(r,e){const t=df(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im)),s=this.re===0&&this.im===0,a=t.re===0&&t.im===0;return n&&a||i&&s?xe.NAN:n||i?xe.INFINITY:t.im===0&&this.im===0?new xe(this.re*t.re,0):new xe(this.re*t.re-this.im*t.im,this.re*t.im+this.im*t.re)},div:function(r,e){const t=df(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im)),s=this.re===0&&this.im===0,a=t.re===0&&t.im===0;if(s&&a||n&&i)return xe.NAN;if(a||n)return xe.INFINITY;if(s||i)return xe.ZERO;if(t.im===0)return new xe(this.re/t.re,this.im/t.re);if(Math.abs(t.re)<Math.abs(t.im)){const o=t.re/t.im,l=t.re*o+t.im;return new xe((this.re*o+this.im)/l,(this.im*o-this.re)/l)}else{const o=t.im/t.re,l=t.im*o+t.re;return new xe((this.re+this.im*o)/l,(this.im-this.re*o)/l)}},pow:function(r,e){const t=df(r,e),n=this.re===0&&this.im===0;if(t.re===0&&t.im===0)return xe.ONE;if(t.im===0){if(this.im===0&&this.re>0)return new xe(Math.pow(this.re,t.re),0);if(this.re===0)switch((t.re%4+4)%4){case 0:return new xe(Math.pow(this.im,t.re),0);case 1:return new xe(0,Math.pow(this.im,t.re));case 2:return new xe(-Math.pow(this.im,t.re),0);case 3:return new xe(0,-Math.pow(this.im,t.re))}}if(n&&t.re>0)return xe.ZERO;const s=Math.atan2(this.im,this.re),a=qN(this.re,this.im);let o=Math.exp(t.re*a-t.im*s),l=t.im*a+t.re*s;return new xe(o*Math.cos(l),o*Math.sin(l))},sqrt:function(){const r=this.re,e=this.im;if(e===0)return r>=0?new xe(Math.sqrt(r),0):new xe(0,Math.sqrt(-r));const t=jN(r,e);let n=Math.sqrt(.5*(t+Math.abs(r))),i=Math.abs(e)/(2*n);return r>=0?new xe(n,e<0?-i:i):new xe(i,e<0?-n:n)},exp:function(){const r=Math.exp(this.re);return this.im===0?new xe(r,0):new xe(r*Math.cos(this.im),r*Math.sin(this.im))},expm1:function(){const r=this.re,e=this.im;return new xe(Math.expm1(r)*Math.cos(e)+$ve(e),Math.exp(r)*Math.sin(e))},log:function(){const r=this.re,e=this.im;return e===0&&r>0?new xe(Math.log(r),0):new xe(qN(r,e),Math.atan2(e,r))},abs:function(){return jN(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const r=this.re,e=this.im;return new xe(Math.sin(r)*Vi(e),Math.cos(r)*Ba(e))},cos:function(){const r=this.re,e=this.im;return new xe(Math.cos(r)*Vi(e),-Math.sin(r)*Ba(e))},tan:function(){const r=2*this.re,e=2*this.im,t=Math.cos(r)+Vi(e);return new xe(Math.sin(r)/t,Ba(e)/t)},cot:function(){const r=2*this.re,e=2*this.im,t=Math.cos(r)-Vi(e);return new xe(-Math.sin(r)/t,Ba(e)/t)},sec:function(){const r=this.re,e=this.im,t=.5*Vi(2*e)+.5*Math.cos(2*r);return new xe(Math.cos(r)*Vi(e)/t,Math.sin(r)*Ba(e)/t)},csc:function(){const r=this.re,e=this.im,t=.5*Vi(2*e)-.5*Math.cos(2*r);return new xe(Math.sin(r)*Vi(e)/t,-Math.cos(r)*Ba(e)/t)},asin:function(){const r=this.re,e=this.im,t=new xe(e*e-r*r+1,-2*r*e).sqrt(),n=new xe(t.re-e,t.im+r).log();return new xe(n.im,-n.re)},acos:function(){const r=this.re,e=this.im,t=new xe(e*e-r*r+1,-2*r*e).sqrt(),n=new xe(t.re-e,t.im+r).log();return new xe(Math.PI/2-n.im,n.re)},atan:function(){const r=this.re,e=this.im;if(r===0){if(e===1)return new xe(0,1/0);if(e===-1)return new xe(0,-1/0)}const t=r*r+(1-e)*(1-e),n=new xe((1-e*e-r*r)/t,-2*r/t).log();return new xe(-.5*n.im,.5*n.re)},acot:function(){const r=this.re,e=this.im;if(e===0)return new xe(Math.atan2(1,r),0);const t=r*r+e*e;return t!==0?new xe(r/t,-e/t).atan():new xe(r!==0?r/0:0,e!==0?-e/0:0).atan()},asec:function(){const r=this.re,e=this.im;if(r===0&&e===0)return new xe(0,1/0);const t=r*r+e*e;return t!==0?new xe(r/t,-e/t).acos():new xe(r!==0?r/0:0,e!==0?-e/0:0).acos()},acsc:function(){const r=this.re,e=this.im;if(r===0&&e===0)return new xe(Math.PI/2,1/0);const t=r*r+e*e;return t!==0?new xe(r/t,-e/t).asin():new xe(r!==0?r/0:0,e!==0?-e/0:0).asin()},sinh:function(){const r=this.re,e=this.im;return new xe(Ba(r)*Math.cos(e),Vi(r)*Math.sin(e))},cosh:function(){const r=this.re,e=this.im;return new xe(Vi(r)*Math.cos(e),Ba(r)*Math.sin(e))},tanh:function(){const r=2*this.re,e=2*this.im,t=Vi(r)+Math.cos(e);return new xe(Ba(r)/t,Math.sin(e)/t)},coth:function(){const r=2*this.re,e=2*this.im,t=Vi(r)-Math.cos(e);return new xe(Ba(r)/t,-Math.sin(e)/t)},csch:function(){const r=this.re,e=this.im,t=Math.cos(2*e)-Vi(2*r);return new xe(-2*Ba(r)*Math.cos(e)/t,2*Vi(r)*Math.sin(e)/t)},sech:function(){const r=this.re,e=this.im,t=Math.cos(2*e)+Vi(2*r);return new xe(2*Vi(r)*Math.cos(e)/t,-2*Ba(r)*Math.sin(e)/t)},asinh:function(){const r=this.re,e=this.im;if(e===0){if(r===0)return new xe(0,0);const s=Math.abs(r),a=Math.log(s+Math.sqrt(s*s+1));return new xe(r<0?-a:a,0)}const t=r*r-e*e+1,n=2*r*e,i=new xe(t,n).sqrt();return new xe(r+i.re,e+i.im).log()},acosh:function(){const r=this.re,e=this.im;if(e===0){if(r>1)return new xe(Math.log(r+Math.sqrt(r-1)*Math.sqrt(r+1)),0);if(r<-1){const i=Math.sqrt(r*r-1);return new xe(Math.log(-r+i),Math.PI)}return new xe(0,Math.acos(r))}const t=new xe(r-1,e).sqrt(),n=new xe(r+1,e).sqrt();return new xe(r+t.re*n.re-t.im*n.im,e+t.re*n.im+t.im*n.re).log()},atanh:function(){const r=this.re,e=this.im;if(e===0){if(r===0)return new xe(0,0);if(r===1)return new xe(1/0,0);if(r===-1)return new xe(-1/0,0);if(-1<r&&r<1)return new xe(.5*Math.log((1+r)/(1-r)),0);if(r>1){const l=(r+1)/(r-1);return new xe(.5*Math.log(l),-Math.PI/2)}const o=(1+r)/(1-r);return new xe(.5*Math.log(-o),Math.PI/2)}const t=1-r,n=1+r,i=t*t+e*e;if(i===0)return new xe(r!==-1?r/0:0,e!==0?e/0:0);const s=(n*t-e*e)/i,a=(e*t+n*e)/i;return new xe(qN(s,a)/2,Math.atan2(a,s)/2)},acoth:function(){const r=this.re,e=this.im;if(r===0&&e===0)return new xe(0,Math.PI/2);const t=r*r+e*e;return t!==0?new xe(r/t,-e/t).atanh():new xe(r!==0?r/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const r=this.re,e=this.im;if(e===0){if(r===0)return new xe(1/0,0);const n=1/r;return new xe(Math.log(n+Math.sqrt(n*n+1)),0)}const t=r*r+e*e;return t!==0?new xe(r/t,-e/t).asinh():new xe(r!==0?r/0:0,e!==0?-e/0:0).asinh()},asech:function(){const r=this.re,e=this.im;if(this.isZero())return xe.INFINITY;const t=r*r+e*e;return t!==0?new xe(r/t,-e/t).acosh():new xe(r!==0?r/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return xe.INFINITY;if(this.isInfinite())return xe.ZERO;const r=this.re,e=this.im,t=r*r+e*e;return new xe(r/t,-e/t)},conjugate:function(){return new xe(this.re,-this.im)},neg:function(){return new xe(-this.re,-this.im)},ceil:function(r){return r=Math.pow(10,r||0),new xe(Math.ceil(this.re*r)/r,Math.ceil(this.im*r)/r)},floor:function(r){return r=Math.pow(10,r||0),new xe(Math.floor(this.re*r)/r,Math.floor(this.im*r)/r)},round:function(r){return r=Math.pow(10,r||0),new xe(Math.round(this.re*r)/r,Math.round(this.im*r)/r)},equals:function(r,e){const t=df(r,e);return Math.abs(t.re-this.re)<=xe.EPSILON&&Math.abs(t.im-this.im)<=xe.EPSILON},clone:function(){return new xe(this.re,this.im)},toString:function(){let r=this.re,e=this.im,t="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(r)<xe.EPSILON&&(r=0),Math.abs(e)<xe.EPSILON&&(e=0),e===0?t+r:(r!==0?(t+=r,t+=" ",e<0?(e=-e,t+="-"):t+="+",t+=" "):e<0&&(e=-e,t+="-"),e!==1&&(t+=e),t+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};xe.ZERO=new xe(0,0);xe.ONE=new xe(1,0);xe.I=new xe(0,1);xe.PI=new xe(Math.PI,0);xe.E=new xe(Math.E,0);xe.INFINITY=new xe(1/0,1/0);xe.NAN=new xe(NaN,NaN);xe.EPSILON=1e-15;var Uve="Complex",zve=[],jve=Y(Uve,zve,()=>(Object.defineProperty(xe,"name",{value:"Complex"}),xe.prototype.constructor=xe,xe.prototype.type="Complex",xe.prototype.isComplex=!0,xe.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},xe.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},xe.prototype.format=function(r){var e="",t=this.im,n=this.re,i=Gm(this.re,r),s=Gm(this.im,r),a=it(r)?r:r?r.precision:null;if(a!==null){var o=Math.pow(10,-a);Math.abs(n/t)<o&&(n=0),Math.abs(t/n)<o&&(t=0)}return t===0?e=i:n===0?t===1?e="i":t===-1?e="-i":e=s+"i":t<0?t===-1?e=i+" - i":e=i+" - "+s.substring(1)+"i":t===1?e=i+" + i":e=i+" + "+s+"i",e},xe.fromPolar=function(r){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return xe(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var t=arguments[0],n=arguments[1];if(it(t)){if(ba(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),it(n))return new xe({r:t,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},xe.prototype.valueOf=xe.prototype.toString,xe.fromJSON=function(r){return new xe(r)},xe.compare=function(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0},xe),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(r){if(isNaN(r))throw new Error("");return r});const nt=BigInt(0),Bt=BigInt(1),li=BigInt(2),jb=BigInt(3),xg=BigInt(5),Ls=BigInt(10);BigInt(Number.MAX_SAFE_INTEGER);const qve=2e3,Ve={s:Bt,n:nt,d:Bt};function au(r,e){try{r=BigInt(r)}catch{throw zc()}return r*e}function xo(r){return typeof r=="bigint"?r:Math.floor(r)}function Ur(r,e){if(e===nt)throw PF();const t=Object.create($a.prototype);t.s=r<nt?-Bt:Bt,r=r<nt?-r:r;const n=ff(r,e);return t.n=r/n,t.d=e/n,t}const Hve=[li*li,li,li*li,li,li*li,li*jb,li,li*jb];function Bp(r){const e=Object.create(null);if(r<=Bt)return e[r]=Bt,e;const t=n=>{e[n]=(e[n]||nt)+Bt};for(;r%li===nt;)t(li),r/=li;for(;r%jb===nt;)t(jb),r/=jb;for(;r%xg===nt;)t(xg),r/=xg;for(let n=0,i=li+xg;i*i<=r;){for(;r%i===nt;)t(i),r/=i;i+=Hve[n],n=n+1&7}return r>Bt&&t(r),e}const ei=function(r,e){let t=nt,n=Bt,i=Bt;if(r!=null)if(e!==void 0){if(typeof r=="bigint")t=r;else{if(isNaN(r))throw zc();if(r%1!==0)throw G5();t=BigInt(r)}if(typeof e=="bigint")n=e;else{if(isNaN(e))throw zc();if(e%1!==0)throw G5();n=BigInt(e)}i=t*n}else if(typeof r=="object"){if("d"in r&&"n"in r)t=BigInt(r.n),n=BigInt(r.d),"s"in r&&(t*=BigInt(r.s));else if(0 in r)t=BigInt(r[0]),1 in r&&(n=BigInt(r[1]));else if(typeof r=="bigint")t=r;else throw zc();i=t*n}else if(typeof r=="number"){if(isNaN(r))throw zc();if(r<0&&(i=-Bt,r=-r),r%1===0)t=BigInt(r);else{let s=1,a=0,o=1,l=1,u=1,c=1e7;for(r>=1&&(s=10**Math.floor(1+Math.log10(r)),r/=s);o<=c&&u<=c;){let h=(a+l)/(o+u);if(r===h){o+u<=c?(t=a+l,n=o+u):u>o?(t=l,n=u):(t=a,n=o);break}else r>h?(a+=l,o+=u):(l+=a,u+=o),o>c?(t=l,n=u):(t=a,n=o)}t=BigInt(t)*BigInt(s),n=BigInt(n)}}else if(typeof r=="string"){let s=0,a=nt,o=nt,l=nt,u=Bt,c=Bt,h=r.replace(/_/g,"").match(/\d+|./g);if(h===null)throw zc();if(h[s]==="-"?(i=-Bt,s++):h[s]==="+"&&s++,h.length===s+1?o=au(h[s++],i):h[s+1]==="."||h[s]==="."?(h[s]!=="."&&(a=au(h[s++],i)),s++,(s+1===h.length||h[s+1]==="("&&h[s+3]===")"||h[s+1]==="'"&&h[s+3]==="'")&&(o=au(h[s],i),u=Ls**BigInt(h[s].length),s++),(h[s]==="("&&h[s+2]===")"||h[s]==="'"&&h[s+2]==="'")&&(l=au(h[s+1],i),c=Ls**BigInt(h[s+1].length)-Bt,s+=3)):h[s+1]==="/"||h[s+1]===":"?(o=au(h[s],i),u=au(h[s+2],Bt),s+=3):h[s+3]==="/"&&h[s+1]===" "&&(a=au(h[s],i),o=au(h[s+2],i),u=au(h[s+4],Bt),s+=5),h.length<=s)n=u*c,i=t=l+n*a+c*o;else throw zc()}else if(typeof r=="bigint")t=r,i=r,n=Bt;else throw zc();if(n===nt)throw PF();Ve.s=i<nt?-Bt:Bt,Ve.n=t<nt?-t:t,Ve.d=n<nt?-n:n};function Gve(r,e,t){let n=Bt;for(;e>nt;r=r*r%t,e>>=Bt)e&Bt&&(n=n*r%t);return n}function Wve(r,e){for(;e%li===nt;e/=li);for(;e%xg===nt;e/=xg);if(e===Bt)return nt;let t=Ls%e,n=1;for(;t!==Bt;n++)if(t=t*Ls%e,n>qve)return nt;return BigInt(n)}function Kve(r,e,t){let n=Bt,i=Gve(Ls,t,e);for(let s=0;s<300;s++){if(n===i)return BigInt(s);n=n*Ls%e,i=i*Ls%e}return 0}function ff(r,e){if(!r)return e;if(!e)return r;for(;;){if(r%=e,!r)return e;if(e%=r,!e)return r}}function $a(r,e){if(ei(r,e),this instanceof $a)r=ff(Ve.d,Ve.n),this.s=Ve.s,this.n=Ve.n/r,this.d=Ve.d/r;else return Ur(Ve.s*Ve.n,Ve.d)}const PF=function(){return new Error("Division by Zero")},zc=function(){return new Error("Invalid argument")},G5=function(){return new Error("Parameters must be integer")};$a.prototype={s:Bt,n:nt,d:Bt,abs:function(){return Ur(this.n,this.d)},neg:function(){return Ur(-this.s*this.n,this.d)},add:function(r,e){return ei(r,e),Ur(this.s*this.n*Ve.d+Ve.s*this.d*Ve.n,this.d*Ve.d)},sub:function(r,e){return ei(r,e),Ur(this.s*this.n*Ve.d-Ve.s*this.d*Ve.n,this.d*Ve.d)},mul:function(r,e){return ei(r,e),Ur(this.s*Ve.s*this.n*Ve.n,this.d*Ve.d)},div:function(r,e){return ei(r,e),Ur(this.s*Ve.s*this.n*Ve.d,this.d*Ve.n)},clone:function(){return Ur(this.s*this.n,this.d)},mod:function(r,e){if(r===void 0)return Ur(this.s*this.n%this.d,Bt);if(ei(r,e),nt===Ve.n*this.d)throw PF();return Ur(this.s*(Ve.d*this.n)%(Ve.n*this.d),Ve.d*this.d)},gcd:function(r,e){return ei(r,e),Ur(ff(Ve.n,this.n)*ff(Ve.d,this.d),Ve.d*this.d)},lcm:function(r,e){return ei(r,e),Ve.n===nt&&this.n===nt?Ur(nt,Bt):Ur(Ve.n*this.n,ff(Ve.n,this.n)*ff(Ve.d,this.d))},inverse:function(){return Ur(this.s*this.d,this.n)},pow:function(r,e){if(ei(r,e),Ve.d===Bt)return Ve.s<nt?Ur((this.s*this.d)**Ve.n,this.n**Ve.n):Ur((this.s*this.n)**Ve.n,this.d**Ve.n);if(this.s<nt)return null;let t=Bp(this.n),n=Bp(this.d),i=Bt,s=Bt;for(let a in t)if(a!=="1"){if(a==="0"){i=nt;break}if(t[a]*=Ve.n,t[a]%Ve.d===nt)t[a]/=Ve.d;else return null;i*=BigInt(a)**t[a]}for(let a in n)if(a!=="1"){if(n[a]*=Ve.n,n[a]%Ve.d===nt)n[a]/=Ve.d;else return null;s*=BigInt(a)**n[a]}return Ve.s<nt?Ur(s,i):Ur(i,s)},log:function(r,e){if(ei(r,e),this.s<=nt||Ve.s<=nt)return null;const t=Object.create(null),n=Bp(Ve.n),i=Bp(Ve.d),s=Bp(this.n),a=Bp(this.d);for(const u in i)n[u]=(n[u]||nt)-i[u];for(const u in a)s[u]=(s[u]||nt)-a[u];for(const u in n)u!=="1"&&(t[u]=!0);for(const u in s)u!=="1"&&(t[u]=!0);let o=null,l=null;for(const u in t){const c=n[u]||nt,h=s[u]||nt;if(c===nt){if(h!==nt)return null;continue}let d=h,f=c;const p=ff(d,f);if(d/=p,f/=p,o===null&&l===null)o=d,l=f;else if(d*l!==o*f)return null}return o!==null&&l!==null?Ur(o,l):null},equals:function(r,e){return ei(r,e),this.s*this.n*Ve.d===Ve.s*Ve.n*this.d},lt:function(r,e){return ei(r,e),this.s*this.n*Ve.d<Ve.s*Ve.n*this.d},lte:function(r,e){return ei(r,e),this.s*this.n*Ve.d<=Ve.s*Ve.n*this.d},gt:function(r,e){return ei(r,e),this.s*this.n*Ve.d>Ve.s*Ve.n*this.d},gte:function(r,e){return ei(r,e),this.s*this.n*Ve.d>=Ve.s*Ve.n*this.d},compare:function(r,e){ei(r,e);let t=this.s*this.n*Ve.d-Ve.s*Ve.n*this.d;return(nt<t)-(t<nt)},ceil:function(r){return r=Ls**BigInt(r||0),Ur(xo(this.s*r*this.n/this.d)+(r*this.n%this.d>nt&&this.s>=nt?Bt:nt),r)},floor:function(r){return r=Ls**BigInt(r||0),Ur(xo(this.s*r*this.n/this.d)-(r*this.n%this.d>nt&&this.s<nt?Bt:nt),r)},round:function(r){return r=Ls**BigInt(r||0),Ur(xo(this.s*r*this.n/this.d)+this.s*((this.s>=nt?Bt:nt)+li*(r*this.n%this.d)>this.d?Bt:nt),r)},roundTo:function(r,e){ei(r,e);const t=this.n*Ve.d,n=this.d*Ve.n,i=t%n;let s=xo(t/n);return i+i>=n&&s++,Ur(this.s*s*Ve.n,Ve.d)},divisible:function(r,e){return ei(r,e),Ve.n===nt?!1:this.n*Ve.d%(Ve.n*this.d)===nt},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(r=15){let e=this.n,t=this.d,n=Wve(e,t),i=Kve(e,t,n),s=this.s<nt?"-":"";if(s+=xo(e/t),e%=t,e*=Ls,e&&(s+="."),n){for(let a=i;a--;)s+=xo(e/t),e%=t,e*=Ls;s+="(";for(let a=n;a--;)s+=xo(e/t),e%=t,e*=Ls;s+=")"}else for(let a=r;e&&a--;)s+=xo(e/t),e%=t,e*=Ls;return s},toFraction:function(r=!1){let e=this.n,t=this.d,n=this.s<nt?"-":"";if(t===Bt)n+=e;else{const i=xo(e/t);r&&i>nt&&(n+=i,n+=" ",e%=t),n+=e,n+="/",n+=t}return n},toLatex:function(r=!1){let e=this.n,t=this.d,n=this.s<nt?"-":"";if(t===Bt)n+=e;else{const i=xo(e/t);r&&i>nt&&(n+=i,e%=t),n+="\\frac{",n+=e,n+="}{",n+=t,n+="}"}return n},toContinued:function(){let r=this.n,e=this.d;const t=[];for(;e;){t.push(xo(r/e));const n=r%e;r=e,e=n}return t},simplify:function(r=.001){const e=BigInt(Math.ceil(1/r)),t=this.abs(),n=t.toContinued();for(let i=1;i<n.length;i++){let s=Ur(n[i-1],Bt);for(let o=i-2;o>=0;o--)s=s.inverse().add(n[o]);let a=s.sub(t);if(a.n*e<a.d)return s.mul(this.s)}return this}};var Xve="Fraction",Yve=[],Qve=Y(Xve,Yve,()=>(Object.defineProperty($a,"name",{value:"Fraction"}),$a.prototype.constructor=$a,$a.prototype.type="Fraction",$a.prototype.isFraction=!0,$a.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},$a.fromJSON=function(r){return new $a(r)},$a),{isClass:!0}),Jve="Range",Zve=[],e0e=Y(Jve,Zve,()=>{function r(e,t,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");var i=e!=null,s=t!=null,a=n!=null;if(i){if(xt(e))e=e.toNumber();else if(typeof e!="number"&&!zb(e))throw new TypeError("Parameter start must be a number or bigint")}if(s){if(xt(t))t=t.toNumber();else if(typeof t!="number"&&!zb(t))throw new TypeError("Parameter end must be a number or bigint")}if(a){if(xt(n))n=n.toNumber();else if(typeof n!="number"&&!zb(n))throw new TypeError("Parameter step must be a number or bigint")}if(this.start=i?parseFloat(e):0,this.end=s?parseFloat(t):0,this.step=a?parseFloat(n):1,a&&fi(this.step,0))throw new Error("Step must not be zero")}return r.prototype.type="Range",r.prototype.isRange=!0,r.parse=function(e){if(typeof e!="string")return null;var t=e.split(":"),n=t.map(function(s){return parseFloat(s)}),i=n.some(function(s){return isNaN(s)});if(i)return null;switch(n.length){case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[2],n[1]);default:return null}},r.prototype.clone=function(){return new r(this.start,this.end,this.step)},r.prototype.size=function(){var e=0,t=this.start,n=this.step,i=this.end,s=i-t;return Xh(n)===Xh(s)?e=Math.ceil(s/n):s===0&&(e=0),isNaN(e)&&(e=0),[e]},r.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},r.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},r.prototype.forEach=function(e){var t=this.start,n=this.step,i=this.end,s=0;if(n>0)for(;t<i;)e(t,[s],this),t+=n,s++;else if(n<0)for(;t>i;)e(t,[s],this),t+=n,s++},r.prototype.map=function(e){var t=[];return this.forEach(function(n,i,s){t[i[0]]=e(n,i,s)}),t},r.prototype.toArray=function(){var e=[];return this.forEach(function(t,n){e[n[0]]=t}),e},r.prototype.valueOf=function(){return this.toArray()},r.prototype.format=function(e){var t=Gm(this.start,e);return this.step!==1&&(t+=":"+Gm(this.step,e)),t+=":"+Gm(this.end,e),t},r.prototype.toString=function(){return this.format()},r.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},r.fromJSON=function(e){return new r(e.start,e.end,e.step)},r},{isClass:!0}),t0e="Matrix",r0e=[],n0e=Y(t0e,r0e,()=>{function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator")}return r.prototype.type="Matrix",r.prototype.isMatrix=!0,r.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},r.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},r.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},r.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},r.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},r.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},r.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},r.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},r.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},r.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},r.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},r.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},r.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},r.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},r.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},r.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},r.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},r},{isClass:!0});function HN(r,e,t){var n=r.constructor,i=new n(2),s="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!tt(t))throw new Error("size must be an integer");if(r.greaterThan(i.pow(t-1).sub(1))||r.lessThan(i.pow(t-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!r.isInteger())throw new Error("Value must be an integer");r.lessThan(0)&&(r=r.add(i.pow(t))),s="i".concat(t)}switch(e){case 2:return"".concat(r.toBinary()).concat(s);case 8:return"".concat(r.toOctal()).concat(s);case 16:return"".concat(r.toHexadecimal()).concat(s);default:throw new Error("Base ".concat(e," not supported "))}}function i0e(r,e){if(typeof e=="function")return e(r);if(!r.isFinite())return r.isNaN()?"NaN":r.gt(0)?"Infinity":"-Infinity";var{notation:t,precision:n,wordSize:i}=xK(e);switch(t){case"fixed":return a0e(r,n);case"exponential":return W5(r,n);case"engineering":return s0e(r,n);case"bin":return HN(r,2,i);case"oct":return HN(r,8,i);case"hex":return HN(r,16,i);case"auto":{var s=K5(e==null?void 0:e.lowerExp,-3),a=K5(e==null?void 0:e.upperExp,5);if(r.isZero())return"0";var o,l=r.toSignificantDigits(n),u=l.e;return u>=s&&u<a?o=l.toFixed():o=W5(r,n),o.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],h=arguments[4];return c!=="."?c+h:h})}default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function s0e(r,e){var t=r.e,n=t%3===0?t:t<0?t-3-t%3:t-t%3,i=r.mul(Math.pow(10,-n)),s=i.toPrecision(e);if(s.includes("e")){var a=r.constructor;s=new a(s).toFixed()}return s+"e"+(t>=0?"+":"")+n.toString()}function W5(r,e){return e!==void 0?r.toExponential(e-1):r.toExponential()}function a0e(r,e){return r.toFixed(e)}function K5(r,e){return it(r)?r:xt(r)?r.toNumber():e}function o0e(r,e){var t=r.length-e.length,n=r.length;return r.substring(t,n)===e}function Pt(r,e){var t=l0e(r,e);return e&&typeof e=="object"&&"truncate"in e&&t.length>e.truncate?t.substring(0,e.truncate-3)+"...":t}function l0e(r,e){if(typeof r=="number")return Gm(r,e);if(xt(r))return i0e(r,e);if(u0e(r))return!e||e.fraction!=="decimal"?"".concat(r.s*r.n,"/").concat(r.d):r.toString();if(Array.isArray(r))return OK(r,e);if(fn(r))return _g(r);if(typeof r=="function")return r.syntax?String(r.syntax):"function";if(r&&typeof r=="object"){if(typeof r.format=="function")return r.format(e);if(r&&r.toString(e)!=={}.toString())return r.toString(e);var t=Object.keys(r).map(n=>_g(n)+": "+Pt(r[n],e));return"{"+t.join(", ")+"}"}return String(r)}function _g(r){for(var e=String(r),t="",n=0;n<e.length;){var i=e.charAt(n);t+=i in X5?X5[i]:i,n++}return'"'+t+'"'}var X5={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function ro(r){var e=String(r);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function OK(r,e){if(Array.isArray(r)){for(var t="[",n=r.length,i=0;i<n;i++)i!==0&&(t+=", "),t+=OK(r[i],e);return t+="]",t}else return Pt(r,e)}function u0e(r){return r&&typeof r=="object"&&typeof r.s=="bigint"&&typeof r.n=="bigint"&&typeof r.d=="bigint"||!1}function _P(r,e){if(!fn(r))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+dr(r)+", index: 0)");if(!fn(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+dr(e)+", index: 1)");return r===e?0:r>e?1:-1}function Mt(r,e,t){if(!(this instanceof Mt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=r,this.expected=e,this.relation=t,this.message="Dimension mismatch ("+(Array.isArray(r)?"["+r.join(", ")+"]":r)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}Mt.prototype=new RangeError;Mt.prototype.constructor=RangeError;Mt.prototype.name="DimensionError";Mt.prototype.isDimensionError=!0;function Qo(r,e,t){if(!(this instanceof Qo))throw new SyntaxError("Constructor must be called with the new operator");this.index=r,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=t),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Qo.prototype=new RangeError;Qo.prototype.constructor=RangeError;Qo.prototype.name="IndexError";Qo.prototype.isIndexError=!0;function vt(r){for(var e=[];Array.isArray(r);)e.push(r.length),r=r[0];return e}function BK(r,e,t){var n,i=r.length;if(i!==e[t])throw new Mt(i,e[t]);if(t<e.length-1){var s=t+1;for(n=0;n<i;n++){var a=r[n];if(!Array.isArray(a))throw new Mt(e.length-1,e.length,"<");BK(r[n],e,s)}}else for(n=0;n<i;n++)if(Array.isArray(r[n]))throw new Mt(e.length+1,e.length,">")}function Y5(r,e){var t=e.length===0;if(t){if(Array.isArray(r))throw new Mt(r.length,0)}else BK(r,e,0)}function oT(r,e){var t=r.isMatrix?r._size:vt(r),n=e._sourceSize;n.forEach((i,s)=>{if(i!==null&&i!==t[s])throw new Mt(i,t[s])})}function xr(r,e){if(r!==void 0){if(!it(r)||!tt(r))throw new TypeError("Index must be an integer (value: "+r+")");if(r<0||typeof e=="number"&&r>=e)throw new Qo(r,e)}}function M0(r){for(var e=0;e<r._dimensions.length;++e){var t=r._dimensions[e];if(t._data&&cr(t._data)){if(t._size[0]===0)return!0}else if(t.isRange){if(t.start===t.end)return!0}else if(fn(t)&&t.length===0)return!0}return!1}function I0(r,e,t){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!it(i)||!tt(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Pt(e)+")")}),(it(r)||xt(r))&&(r=[r]);var n=t!==void 0?t:0;return AP(r,e,0,n),r}function AP(r,e,t,n){var i,s,a=r.length,o=e[t],l=Math.min(a,o);if(r.length=o,t<e.length-1){var u=t+1;for(i=0;i<l;i++)s=r[i],Array.isArray(s)||(s=[s],r[i]=s),AP(s,e,u,n);for(i=l;i<o;i++)s=[],r[i]=s,AP(s,e,u,n)}else{for(i=0;i<l;i++)for(;Array.isArray(r[i]);)r[i]=r[i][0];for(i=l;i<o;i++)r[i]=n}}function RF(r,e){var t=Yt(r,!0),n=t.length;if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Mt(0,n,"!=");e=kF(e,n);var i=LK(e);if(n!==i)throw new Mt(i,n,"!=");try{return c0e(t,e)}catch(s){throw s instanceof Mt?new Mt(i,n,"!="):s}}function kF(r,e){var t=LK(r),n=r.slice(),i=-1,s=r.indexOf(i),a=r.indexOf(i,s+1)>=0;if(a)throw new Error("More than one wildcard in sizes");var o=s>=0,l=e%t===0;if(o)if(l)n[s]=-e/t;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-t);return n}function LK(r){return r.reduce((e,t)=>e*t,1)}function c0e(r,e){for(var t=r,n,i=e.length-1;i>0;i--){var s=e[i];n=[];for(var a=t.length/s,o=0;o<a;o++)n.push(t.slice(o*s,(o+1)*s));t=n}return t}function lT(r,e){for(var t=vt(r);Array.isArray(r)&&r.length===1;)r=r[0],t.shift();for(var n=t.length;t[n-1]===1;)n--;return n<t.length&&(r=$K(r,n,0),t.length=n),r}function $K(r,e,t){var n,i;if(t<e){var s=t+1;for(n=0,i=r.length;n<i;n++)r[n]=$K(r[n],e,s)}else for(;Array.isArray(r);)r=r[0];return r}function VK(r,e,t,n){var i=n||vt(r);if(t)for(var s=0;s<t;s++)r=[r],i.unshift(1);for(r=UK(r,e,0);i.length<e;)i.push(1);return r}function UK(r,e,t){var n,i;if(Array.isArray(r)){var s=t+1;for(n=0,i=r.length;n<i;n++)r[n]=UK(r[n],e,s)}else for(var a=t;a<e;a++)r=[r];return r}function Yt(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(r))return r;if(typeof e!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var t=[];return e?i(r):n(r),t;function n(s){for(var a=0;a<s.length;a++){var o=s[a];Array.isArray(o)?n(o):t.push(o)}}function i(s){if(Array.isArray(s[0]))for(var a=0;a<s.length;a++)i(s[a]);else for(var o=0;o<s.length;o++)t.push(s[o])}}function cd(r,e){return Array.prototype.map.call(r,e)}function zK(r,e){Array.prototype.forEach.call(r,e)}function Q5(r,e){if(vt(r).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(r,e)}function J5(r,e){if(vt(r).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(r,t=>e.test(t))}function Z5(r,e){return Array.prototype.join.call(r,e)}function P0(r){if(!Array.isArray(r))throw new TypeError("Array input expected");if(r.length===0)return r;var e=[],t=0;e[0]={value:r[0],identifier:0};for(var n=1;n<r.length;n++)r[n]===r[n-1]?t++:t=0,e.push({value:r[n],identifier:t});return e}function uT(r){if(!Array.isArray(r))throw new TypeError("Array input expected");if(r.length===0)return r;for(var e=[],t=0;t<r.length;t++)e.push(r[t].value);return e}function r2(r,e){for(var t,n=0,i=0;i<r.length;i++){var s=r[i],a=Array.isArray(s);if(i===0&&a&&(n=s.length),a&&s.length!==n)return;var o=a?r2(s,e):e(s);if(t===void 0)t=o;else if(t!==o)return"mixed"}return t}function jK(r,e,t,n){if(n<t){if(r.length!==e.length)throw new Mt(r.length,e.length);for(var i=[],s=0;s<r.length;s++)i[s]=jK(r[s],e[s],t,n+1);return i}else return r.concat(e)}function qK(){var r=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(r.length===1)return r[0];if(r.length>1)return r.slice(1).reduce(function(t,n){return jK(t,n,e,0)},r[0]);throw new Error("Wrong number of arguments in function concat")}function cT(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];for(var n=e.map(d=>d.length),i=Math.max(...n),s=new Array(i).fill(null),a=0;a<e.length;a++)for(var o=e[a],l=n[a],u=0;u<l;u++){var c=i-l+u;o[u]>s[c]&&(s[c]=o[u])}for(var h=0;h<e.length;h++)HK(e[h],s);return s}function HK(r,e){for(var t=e.length,n=r.length,i=0;i<n;i++){var s=t-n+i;if(r[i]<e[s]&&r[i]>1||r[i]>e[s])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(r,") not possible to broadcast dimension ").concat(n," with size ").concat(r[i]," to size ").concat(e[s]))}}function Ef(r,e){var t=vt(r);if(Sc(t,e))return r;HK(t,e);var n=cT(t,e),i=n.length,s=[...Array(i-t.length).fill(1),...t],a=d0e(r);t.length<i&&(a=RF(a,s),t=vt(a));for(var o=0;o<i;o++)t[o]<n[o]&&(a=h0e(a,n[o],o),t=vt(a));return a}function h0e(r,e,t){return qK(...Array(e).fill(r),t)}function hT(r,e){if(!Array.isArray(r))throw new Error("Array expected");var t=vt(r);if(e.length!==t.length)throw new Mt(e.length,t.length);for(var n=0;n<e.length;n++)xr(e[n],t[n]);return e.reduce((i,s)=>i[s],r)}function EP(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(r.length===0)return[];if(t)return s(r);var n=[];return i(r,0);function i(a,o){if(Array.isArray(a)){for(var l=a.length,u=Array(l),c=0;c<l;c++)n[o]=c,u[c]=i(a[c],o+1);return u}else return e(a,n.slice(0,o),r)}function s(a){if(Array.isArray(a)){for(var o=a.length,l=Array(o),u=0;u<o;u++)l[u]=s(a[u]);return l}else return e(a)}}function GK(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(r.length===0)return;if(t){s(r);return}var n=[];i(r,0);function i(a,o){if(Array.isArray(a))for(var l=a.length,u=0;u<l;u++)n[o]=u,i(a[u],o+1);else e(a,n.slice(0,o),r)}function s(a){if(Array.isArray(a))for(var o=a.length,l=0;l<o;l++)s(a[l]);else e(a)}}function d0e(r){return _n([],r)}function lp(r,e,t,n){if(nT.isTypedFunction(r)){var i;if(n)i=1;else{var s=e.isMatrix?e.size():vt(e),a=s.length?s[s.length-1]===0:!0;if(a)return{isUnary:n,fn:r};var o=s.map(()=>0),l=e.isMatrix?e.get(o):hT(e,o);i=p0e(r,l,o,e)}var u;if(e.isMatrix&&e.dataType!=="mixed"&&e.dataType!==void 0){var c=f0e(r,i);u=c!==void 0?c:r}else u=r;return i>=1&&i<=3?{isUnary:i===1,fn:function(){for(var d=arguments.length,f=new Array(d),p=0;p<d;p++)f[p]=arguments[p];return e6(u,f.slice(0,i),t,r.name)}}:{isUnary:!1,fn:function(){for(var d=arguments.length,f=new Array(d),p=0;p<d;p++)f[p]=arguments[p];return e6(u,f,t,r.name)}}}return n===void 0?{isUnary:m0e(r),fn:r}:{isUnary:n,fn:r}}function f0e(r,e){var t=[];if(Object.entries(r.signatures).forEach(n=>{var[i,s]=n;i.split(",").length===e&&t.push(s)}),t.length===1)return t[0]}function m0e(r){if(r.length!==1)return!1;var e=r.toString();if(/arguments/.test(e))return!1;var t=e.match(/\(.*?\)/);return!/\.\.\./.test(t)}function p0e(r,e,t,n){for(var i=[e,t,n],s=3;s>0;s--){var a=i.slice(0,s);if(nT.resolve(r,a)!==null)return s}}function e6(r,e,t,n){try{return r(...e)}catch(i){g0e(i,e,t,n)}}function g0e(r,e,t,n){var i;if(r instanceof TypeError&&((i=r.data)===null||i===void 0?void 0:i.category)==="wrongType"){var s=[];throw s.push("value: ".concat(dr(e[0]))),e.length>=2&&s.push("index: ".concat(dr(e[1]))),e.length>=3&&s.push("array: ".concat(dr(e[2]))),new TypeError("Function ".concat(t," cannot apply callback arguments ")+"".concat(n,"(").concat(s.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(t," cannot apply callback arguments ")+"to function ".concat(n,": ").concat(r.message))}var v0e="DenseMatrix",y0e=["Matrix","config"],b0e=Y(v0e,y0e,r=>{var{Matrix:e,config:t}=r;function n(h,d){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(d&&!fn(d))throw new Error("Invalid datatype: "+d);if(ot(h))h.type==="DenseMatrix"?(this._data=gt(h._data),this._size=gt(h._size),this._datatype=d||h._datatype):(this._data=h.toArray(),this._size=h.size(),this._datatype=d||h._datatype);else if(h&&cr(h.data)&&cr(h.size))this._data=h.data,this._size=h.size,Y5(this._data,this._size),this._datatype=d||h.datatype;else if(cr(h))this._data=c(h),this._size=vt(this._data),Y5(this._data,this._size),this._datatype=d;else{if(h)throw new TypeError("Unsupported type of data ("+dr(h)+")");this._data=[],this._size=[0],this._datatype=d}}n.prototype=new e,n.prototype.createDenseMatrix=function(h,d){return new n(h,d)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return r2(this._data,dr)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(h,d){return new n(h,d)},n.prototype.subset=function(h,d,f){switch(arguments.length){case 1:return i(this,h);case 2:case 3:return a(this,h,d,f);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(h){return hT(this._data,h)},n.prototype.set=function(h,d,f){if(!cr(h))throw new TypeError("Array expected");if(h.length<this._size.length)throw new Mt(h.length,this._size.length,"<");var p,g,b,v=h.map(function(y){return y+1});u(this,v,f);var x=this._data;for(p=0,g=h.length-1;p<g;p++)b=h[p],xr(b,x.length),x=x[b];return b=h[h.length-1],xr(b,x.length),x[b]=d,this};function i(h,d){if(!XC(d))throw new TypeError("Invalid index");var f=t.legacySubset?d.size().every(w=>w===1):d.isScalar();if(f)return h.get(d.min());var p=d.size();if(p.length!==h._size.length)throw new Mt(p.length,h._size.length);for(var g=d.min(),b=d.max(),v=0,x=h._size.length;v<x;v++)xr(g[v],h._size[v]),xr(b[v],h._size[v]);var y=new n,E=s(h._data,d);return y._size=E.size,y._datatype=h._datatype,y._data=E.data,t.legacySubset?y.reshape(d.size()):y}function s(h,d){var f=d.size().length-1,p=Array(f);return{data:g(h),size:p.filter(b=>b!==null)};function g(b){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,x=d.dimension(v);function y(E,w){return it(E)?w(E):E.map(w).valueOf()}return it(x)?p[v]=null:p[v]=x.size()[0],v<f?y(x,E=>(xr(E,b.length),g(b[E],v+1))):y(x,E=>(xr(E,b.length),b[E]))}}function a(h,d,f,p){if(!d||d.isIndex!==!0)throw new TypeError("Invalid index");var g=d.size(),b=d.isScalar(),v;if(ot(f)?(v=f.size(),f=f.valueOf()):v=vt(f),b){if(v.length!==0)throw new TypeError("Scalar expected");h.set(d.min(),f,p)}else{if(!Sc(v,g)){if(v.length===0)f=Ef([f],g);else try{f=Ef(f,g)}catch{}v=vt(f)}if(g.length<h._size.length)throw new Mt(g.length,h._size.length,"<");if(v.length<g.length){for(var x=0,y=0;g[x]===1&&v[x]===1;)x++;for(;g[x]===1;)y++,x++;f=VK(f,g.length,y,v)}if(!Sc(g,v))throw new Mt(g,v,">");var E=d.max().map(function(w){return w+1});u(h,E,p),o(h._data,d,f)}return h}function o(h,d,f){var p=d.size().length-1;g(h,f);function g(b,v){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,y=d.dimension(x),E=(A,T)=>{xr(A,b.length),g(b[A],v[T[0]],x+1)},w=(A,T)=>{xr(A,b.length),b[A]=v[T[0]]};x<p?it(y)?E(y,[0]):y.forEach(E):it(y)?w(y,[0]):y.forEach(w)}}n.prototype.resize=function(h,d,f){if(!Ca(h))throw new TypeError("Array or Matrix expected");var p=h.valueOf().map(b=>Array.isArray(b)&&b.length===1?b[0]:b),g=f?this.clone():this;return l(g,p,d)};function l(h,d,f){if(d.length===0){for(var p=h._data;cr(p);)p=p[0];return p}return h._size=d.slice(0),h._data=I0(h._data,h._size,f),h}n.prototype.reshape=function(h,d){var f=d?this.clone():this;f._data=RF(f._data,h);var p=f._size.reduce((g,b)=>g*b);return f._size=kF(h,p),f};function u(h,d,f){for(var p=h._size.slice(0),g=!1;p.length<d.length;)p.push(0),g=!0;for(var b=0,v=d.length;b<v;b++)d[b]>p[b]&&(p[b]=d[b],g=!0);g&&l(h,p,f)}n.prototype.clone=function(){var h=new n({data:gt(this._data),size:gt(this._size),datatype:this._datatype});return h},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(h){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=this,p=f._size.length-1;if(p<0)return f.clone();var g=lp(h,f,"map",d),b=g.fn,v=f.create(void 0,f._datatype);if(v._size=f._size,d||g.isUnary)return v._data=T(f._data),v;if(p===0){for(var x=f.valueOf(),y=Array(x.length),E=0;E<x.length;E++)y[E]=b(x[E],[E],f);return v._data=y,v}var w=[];return v._data=A(f._data),v;function A(S){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,D=Array(S.length);if(N<p)for(var _=0;_<S.length;_++)w[N]=_,D[_]=A(S[_],N+1);else for(var M=0;M<S.length;M++)w[N]=M,D[M]=b(S[M],w.slice(),f);return D}function T(S){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,D=Array(S.length);if(N<p)for(var _=0;_<S.length;_++)D[_]=T(S[_],N+1);else for(var M=0;M<S.length;M++)D[M]=b(S[M]);return D}},n.prototype.forEach=function(h){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=this,p=f._size.length-1;if(p<0)return;var g=lp(h,f,"map",d),b=g.fn;if(d||g.isUnary){E(f._data);return}if(p===0){for(var v=0;v<f._data.length;v++)b(f._data[v],[v],f);return}var x=[];y(f._data);function y(w){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(A<p)for(var T=0;T<w.length;T++)x[A]=T,y(w[T],A+1);else for(var S=0;S<w.length;S++)x[A]=S,b(w[S],x.slice(),f)}function E(w){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(A<p)for(var T=0;T<w.length;T++)E(w[T],A+1);else for(var S=0;S<w.length;S++)b(w[S])}},n.prototype[Symbol.iterator]=function*(){var h=this._size.length-1;if(!(h<0)){if(h===0){for(var d=0;d<this._data.length;d++)yield{value:this._data[d],index:[d]};return}for(var f=Array(h+1).fill(0),p=this._size.reduce((y,E)=>y*E,1),g=0;g<p;g++){for(var b=this._data,v=0;v<h;v++)b=b[f[v]];yield{value:b[f[h]],index:f.slice()};for(var x=h;x>=0&&(f[x]++,!(f[x]<this._size[x]));x--)f[x]=0}}},n.prototype.rows=function(){var h=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var f=this._data;for(var p of f)h.push(new n([p],this._datatype));return h},n.prototype.columns=function(){var h=this,d=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var p=this._data,g=function(x){var y=p.map(E=>[E[x]]);d.push(new n(y,h._datatype))},b=0;b<f[1];b++)g(b);return d},n.prototype.toArray=function(){return gt(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(h){return Pt(this._data,h)},n.prototype.toString=function(){return Pt(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(h){if(h){if(xt(h)&&(h=h.toNumber()),!it(h)||!tt(h))throw new TypeError("The parameter k must be an integer number")}else h=0;for(var d=h>0?h:0,f=h<0?-h:0,p=this._size[0],g=this._size[1],b=Math.min(p-f,g-d),v=[],x=0;x<b;x++)v[x]=this._data[x+f][x+d];return new n({data:v,size:[b],datatype:this._datatype})},n.diagonal=function(h,d,f,p){if(!cr(h))throw new TypeError("Array expected, size parameter");if(h.length!==2)throw new Error("Only two dimensions matrix are supported");if(h=h.map(function(S){if(xt(S)&&(S=S.toNumber()),!it(S)||!tt(S)||S<1)throw new Error("Size values must be positive integers");return S}),f){if(xt(f)&&(f=f.toNumber()),!it(f)||!tt(f))throw new TypeError("The parameter k must be an integer number")}else f=0;var g=f>0?f:0,b=f<0?-f:0,v=h[0],x=h[1],y=Math.min(v-b,x-g),E;if(cr(d)){if(d.length!==y)throw new Error("Invalid value array length");E=function(N){return d[N]}}else if(ot(d)){var w=d.size();if(w.length!==1||w[0]!==y)throw new Error("Invalid matrix length");E=function(N){return d.get([N])}}else E=function(){return d};p||(p=xt(E(0))?E(0).mul(0):0);var A=[];if(h.length>0){A=I0(A,h,p);for(var T=0;T<y;T++)A[T+b][T+g]=E(T)}return new n({data:A,size:[v,x]})},n.fromJSON=function(h){return new n(h)},n.prototype.swapRows=function(h,d){if(!it(h)||!tt(h)||!it(d)||!tt(d))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return xr(h,this._size[0]),xr(d,this._size[0]),n._swapRows(h,d,this._data),this},n._swapRows=function(h,d,f){var p=f[h];f[h]=f[d],f[d]=p};function c(h){return ot(h)?c(h.valueOf()):cr(h)?h.map(c):h}return n},{isClass:!0}),t6="clone",w0e=["typed"],x0e=Y(t6,w0e,r=>{var{typed:e}=r;return e(t6,{any:gt})});function WK(r){var e=r.length,t=r[0].length,n,i,s=[];for(i=0;i<t;i++){var a=[];for(n=0;n<e;n++)a.push(r[n][i]);s.push(a)}return s}function Z0(r){for(var e=0;e<r.length;e++)if(Ca(r[e]))return!0;return!1}function Dd(r,e){ot(r)?r.forEach(t=>e(t),!1,!0):GK(r,e,!0)}function _t(r,e,t){if(!t)return ot(r)?r.map(i=>e(i),!1,!0):EP(r,e,!0);var n=i=>i===0?i:e(i);return ot(r)?r.map(i=>n(i),!1,!0):EP(r,n,!0)}function n2(r,e,t){var n=Array.isArray(r)?vt(r):r.size();if(e<0||e>=n.length)throw new Qo(e,n.length);return ot(r)?r.create(dT(r.valueOf(),e,t),r.datatype()):dT(r,e,t)}function dT(r,e,t){var n,i,s,a;if(e<=0)if(Array.isArray(r[0])){for(a=WK(r),i=[],n=0;n<a.length;n++)i[n]=dT(a[n],e-1,t);return i}else{for(s=r[0],n=1;n<r.length;n++)s=t(s,r[n]);return s}else{for(i=[],n=0;n<r.length;n++)i[n]=dT(r[n],e-1,t);return i}}function r6(r,e,t,n,i,s,a,o,l,u,c){var h=r._values,d=r._index,f=r._ptr,p,g,b,v;if(n)for(g=f[e],b=f[e+1],p=g;p<b;p++)v=d[p],t[v]!==s?(t[v]=s,a.push(v),n[v]=h[p]):(n[v]=o(n[v],h[p]),i[v]=s);else for(g=f[e],b=f[e+1],p=g;p<b;p++)v=d[p],t[v]!==s?(t[v]=s,a.push(v)):i[v]=s}var n6="isInteger",_0e=["typed","equal"],A0e=Y(n6,_0e,r=>{var{typed:e,equal:t}=r;return e(n6,{number:n=>Number.isFinite(n)?t(n,Math.round(n)):!1,BigNumber:n=>n.isFinite()?t(n.round(),n):!1,bigint:n=>!0,Fraction:n=>n.d===1n,"Array | Matrix":e.referToSelf(n=>i=>_t(i,n))})}),Jo="number",ey="number, number";function KK(r){return Math.abs(r)}KK.signature=Jo;function XK(r,e){return r+e}XK.signature=ey;function YK(r,e){return r-e}YK.signature=ey;function QK(r,e){return r*e}QK.signature=ey;function JK(r){return-r}JK.signature=Jo;function ZK(r){return r}ZK.signature=Jo;function wb(r){return Sge(r)}wb.signature=Jo;function eX(r){return r*r*r}eX.signature=Jo;function tX(r){return Math.exp(r)}tX.signature=Jo;function rX(r){return Tge(r)}rX.signature=Jo;function nX(r,e){if(!tt(r)||!tt(e))throw new Error("Parameters in function lcm must be integer numbers");if(r===0||e===0)return 0;for(var t,n=r*e;e!==0;)t=e,e=r%t,r=t;return Math.abs(n/r)}nX.signature=ey;function i6(r,e){return e?Math.log(r)/Math.log(e):Math.log(r)}function fT(r){return Age(r)}fT.signature=Jo;function SP(r){return _ge(r)}SP.signature=Jo;function s6(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,t=e<0;if(t&&(e=-e),e===0)throw new Error("Root must be non-zero");if(r<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(r===0)return t?1/0:0;if(!isFinite(r))return t?0:r;var n=Math.pow(Math.abs(r),1/e);return n=r<0?-n:n,t?1/n:n}function TP(r){return Xh(r)}TP.signature=Jo;function iX(r){return r*r}iX.signature=Jo;function sX(r,e){var t,n,i,s=0,a=1,o=1,l=0;if(!tt(r)||!tt(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)n=Math.floor(r/e),i=r-n*e,t=s,s=a-n*s,a=t,t=o,o=l-n*o,l=t,r=e,e=i;var u;return r<0?u=[-r,-a,-l]:u=[r,r?a:0,l],u}sX.signature=ey;function aX(r,e){return r*r<1&&e===1/0||r*r>1&&e===-1/0?0:Math.pow(r,e)}aX.signature=ey;function $y(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!tt(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(_K(r,e))}var E0e="number",ty="number, number";function oX(r,e){if(!tt(r)||!tt(e))throw new Error("Integers expected in function bitAnd");return r&e}oX.signature=ty;function lX(r){if(!tt(r))throw new Error("Integer expected in function bitNot");return~r}lX.signature=E0e;function uX(r,e){if(!tt(r)||!tt(e))throw new Error("Integers expected in function bitOr");return r|e}uX.signature=ty;function cX(r,e){if(!tt(r)||!tt(e))throw new Error("Integers expected in function bitXor");return r^e}cX.signature=ty;function hX(r,e){if(!tt(r)||!tt(e))throw new Error("Integers expected in function leftShift");return r<<e}hX.signature=ty;function dX(r,e){if(!tt(r)||!tt(e))throw new Error("Integers expected in function rightArithShift");return r>>e}dX.signature=ty;function fX(r,e){if(!tt(r)||!tt(e))throw new Error("Integers expected in function rightLogShift");return r>>>e}fX.signature=ty;function tc(r,e){if(e<r)return 1;if(e===r)return e;var t=e+r>>1;return tc(r,t)*tc(t+1,e)}function mX(r,e){if(!tt(r)||r<0)throw new TypeError("Positive integer value expected in function combinations");if(!tt(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>r)throw new TypeError("k must be less than or equal to n");for(var t=r-e,n=1,i=e<t?t+1:e+1,s=2,a=e<t?e:t,o=i;o<=r;++o)for(n*=o;s<=a&&n%s===0;)n/=s,++s;return s<=a&&(n/=tc(s,a)),n}mX.signature="number, number";var S0e=Math.PI,T0e=2*Math.PI,C0e=Math.E,N0e=1.618033988749895,D0e="number",FF="number, number";function pX(r){return!r}pX.signature=D0e;function CP(r,e){return!!(r||e)}CP.signature=FF;function NP(r,e){return!!r!=!!e}NP.signature=FF;function DP(r,e){return!!(r&&e)}DP.signature=FF;function mT(r){var e;if(tt(r))return r<=0?Number.isFinite(r)?1/0:NaN:r>171?1/0:tc(1,r-1);if(r<.5)return Math.PI/(Math.sin(Math.PI*r)*mT(1-r));if(r>=171.35)return 1/0;if(r>85){var t=r*r,n=t*r,i=n*r,s=i*r;return Math.sqrt(2*Math.PI/r)*Math.pow(r/Math.E,r)*(1+1/(12*r)+1/(288*t)-139/(51840*n)-571/(2488320*i)+163879/(209018880*s)+5246819/(75246796800*s*r))}--r,e=Ug[0];for(var a=1;a<Ug.length;++a)e+=Ug[a]/(r+a);var o=r+gX+.5;return Math.sqrt(2*Math.PI)*Math.pow(o,r+.5)*Math.exp(-o)*e}mT.signature="number";var gX=4.7421875,Ug=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],vX=.9189385332046728,M0e=5,I0e=7,a6=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function pT(r){if(r<0)return NaN;if(r===0)return 1/0;if(!Number.isFinite(r))return r;if(r<.5)return Math.log(Math.PI/Math.sin(Math.PI*r))-pT(1-r);r=r-1;for(var e=r+M0e+.5,t=a6[0],n=I0e-1;n>=1;n--)t+=a6[n]/(r+n);return vX+(r+.5)*Math.log(e)-e+Math.log(t)}pT.signature="number";var ns="number";function yX(r){return Mge(r)}yX.signature=ns;function bX(r){return Math.atan(1/r)}bX.signature=ns;function wX(r){return Number.isFinite(r)?(Math.log((r+1)/r)+Math.log(r/(r-1)))/2:0}wX.signature=ns;function xX(r){return Math.asin(1/r)}xX.signature=ns;function _X(r){var e=1/r;return Math.log(e+Math.sqrt(e*e+1))}_X.signature=ns;function AX(r){return Math.acos(1/r)}AX.signature=ns;function EX(r){var e=1/r,t=Math.sqrt(e*e-1);return Math.log(t+e)}EX.signature=ns;function SX(r){return Ige(r)}SX.signature=ns;function TX(r){return Pge(r)}TX.signature=ns;function CX(r){return 1/Math.tan(r)}CX.signature=ns;function NX(r){var e=Math.exp(2*r);return(e+1)/(e-1)}NX.signature=ns;function DX(r){return 1/Math.sin(r)}DX.signature=ns;function MX(r){return r===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(r)-Math.exp(-r)))*Xh(r)}MX.signature=ns;function IX(r){return 1/Math.cos(r)}IX.signature=ns;function PX(r){return 2/(Math.exp(r)+Math.exp(-r))}PX.signature=ns;function RX(r){return kge(r)}RX.signature=ns;var OF="number";function kX(r){return r<0}kX.signature=OF;function FX(r){return r>0}FX.signature=OF;function OX(r){return Number.isNaN(r)}OX.signature=OF;function po(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(t<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return r.isNaN()||e.isNaN()?!1:!r.isFinite()||!e.isFinite()?r.eq(e):r.eq(e)?!0:r.minus(e).abs().lte(r.constructor.max(r.constructor.max(r.abs(),e.abs()).mul(t),n))}var o6="isNegative",P0e=["typed","config"],R0e=Y(o6,P0e,r=>{var{typed:e,config:t}=r;return e(o6,{number:n=>fi(n,0,t.relTol,t.absTol)?!1:kX(n),BigNumber:n=>po(n,new n.constructor(0),t.relTol,t.absTol)?!1:n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n<0n,Fraction:n=>n.s<0n,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>_t(i,n))})}),l6="isNumeric",k0e=["typed"],F0e=Y(l6,k0e,r=>{var{typed:e}=r;return e(l6,{"number | BigNumber | bigint | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(t=>n=>_t(n,t))})}),u6="hasNumericValue",O0e=["typed","isNumeric"],B0e=Y(u6,O0e,r=>{var{typed:e,isNumeric:t}=r;return e(u6,{boolean:()=>!0,string:function(i){return i.trim().length>0&&!isNaN(Number(i))},any:function(i){return t(i)}})}),c6="isPositive",L0e=["typed","config"],$0e=Y(c6,L0e,r=>{var{typed:e,config:t}=r;return e(c6,{number:n=>fi(n,0,t.relTol,t.absTol)?!1:FX(n),BigNumber:n=>po(n,new n.constructor(0),t.relTol,t.absTol)?!1:!n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n>0n,Fraction:n=>n.s>0n&&n.n>0n,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>_t(i,n))})}),h6="isZero",V0e=["typed","equalScalar"],U0e=Y(h6,V0e,r=>{var{typed:e,equalScalar:t}=r;return e(h6,{"number | BigNumber | Complex | Fraction":n=>t(n,0),bigint:n=>n===0n,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>_t(i,n))})}),d6="isNaN",z0e=["typed"],j0e=Y(d6,z0e,r=>{var{typed:e}=r;return e(d6,{number:OX,BigNumber:function(n){return n.isNaN()},bigint:function(n){return!1},Fraction:function(n){return!1},Complex:function(n){return n.isNaN()},Unit:function(n){return Number.isNaN(n.value)},"Array | Matrix":e.referToSelf(t=>n=>_t(n,t))})}),f6="isBounded",q0e=["typed"],H0e=Y(f6,q0e,r=>{var{typed:e}=r;return e(f6,{number:t=>Number.isFinite(t),"BigNumber | Complex":t=>t.isFinite(),"bigint | Fraction":()=>!0,"null | undefined":()=>!1,Unit:e.referToSelf(t=>n=>t(n.value)),"Array | Matrix":e.referToSelf(t=>n=>(Array.isArray(n)||(n=n.valueOf()),n.every(i=>t(i))))})}),m6="isFinite",G0e=["typed","isBounded","map"],W0e=Y(m6,G0e,r=>{var{typed:e,isBounded:t,map:n}=r;return e(m6,{"Array | Matrix":i=>n(i,t),any:i=>t(i)})}),p6="typeOf",K0e=["typed"],X0e=Y(p6,K0e,r=>{var{typed:e}=r;return e(p6,{any:dr})});function Y0e(r,e,t,n){return fi(r.re,e.re,t,n)&&fi(r.im,e.im,t,n)}var ry=Y("compareUnits",["typed"],r=>{var{typed:e}=r;return{"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(t,[n.valueType(),i.valueType()])(n.value,i.value)})}}),gT="equalScalar",Q0e=["typed","config"],J0e=Y(gT,Q0e,r=>{var{typed:e,config:t}=r,n=ry({typed:e});return e(gT,{"boolean, boolean":function(s,a){return s===a},"number, number":function(s,a){return fi(s,a,t.relTol,t.absTol)},"BigNumber, BigNumber":function(s,a){return s.eq(a)||po(s,a,t.relTol,t.absTol)},"bigint, bigint":function(s,a){return s===a},"Fraction, Fraction":function(s,a){return s.equals(a)},"Complex, Complex":function(s,a){return Y0e(s,a,t.relTol,t.absTol)}},n)});Y(gT,["typed","config"],r=>{var{typed:e,config:t}=r;return e(gT,{"number, number":function(i,s){return fi(i,s,t.relTol,t.absTol)}})});var Z0e="SparseMatrix",eye=["typed","equalScalar","Matrix"],tye=Y(Z0e,eye,r=>{var{typed:e,equalScalar:t,Matrix:n}=r;function i(g,b){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(b&&!fn(b))throw new Error("Invalid datatype: "+b);if(ot(g))s(this,g,b);else if(g&&cr(g.index)&&cr(g.ptr)&&cr(g.size))this._values=g.values,this._index=g.index,this._ptr=g.ptr,this._size=g.size,this._datatype=b||g.datatype;else if(cr(g))a(this,g,b);else{if(g)throw new TypeError("Unsupported type of data ("+dr(g)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=b}}function s(g,b,v){b.type==="SparseMatrix"?(g._values=b._values?gt(b._values):void 0,g._index=gt(b._index),g._ptr=gt(b._ptr),g._size=gt(b._size),g._datatype=v||b._datatype):a(g,b.valueOf(),v||b._datatype)}function a(g,b,v){g._values=[],g._index=[],g._ptr=[],g._datatype=v;var x=b.length,y=0,E=t,w=0;if(fn(v)&&(E=e.find(t,[v,v])||t,w=e.convert(0,v)),x>0){var A=0;do{g._ptr.push(g._index.length);for(var T=0;T<x;T++){var S=b[T];if(cr(S)){if(A===0&&y<S.length&&(y=S.length),A<S.length){var N=S[A];E(N,w)||(g._values.push(N),g._index.push(T))}}else A===0&&y<1&&(y=1),E(S,w)||(g._values.push(S),g._index.push(T))}A++}while(A<y)}for(;g._ptr.length<=y;)g._ptr.push(g._index.length);g._size=[x,y]}i.prototype=new n,i.prototype.createSparseMatrix=function(g,b){return new i(g,b)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return r2(this._values,dr)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(g,b){return new i(g,b)},i.prototype.density=function(){var g=this._size[0],b=this._size[1];return g!==0&&b!==0?this._index.length/(g*b):0},i.prototype.subset=function(g,b,v){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,g);case 2:case 3:return l(this,g,b,v);default:throw new SyntaxError("Wrong number of arguments")}};function o(g,b){if(!XC(b))throw new TypeError("Invalid index");var v=b.isScalar();if(v)return g.get(b.min());var x=b.size();if(x.length!==g._size.length)throw new Mt(x.length,g._size.length);var y,E,w,A,T=b.min(),S=b.max();for(y=0,E=g._size.length;y<E;y++)xr(T[y],g._size[y]),xr(S[y],g._size[y]);var N=g._values,D=g._index,_=g._ptr,M=b.dimension(0),I=b.dimension(1),V=[],q=[];function P(re,Q){q[re]=Q[0],V[re]=!0}Number.isInteger(M)?P(M,[0]):M.forEach(P);var L=N?[]:void 0,$=[],z=[];function K(re){for(z.push($.length),w=_[re],A=_[re+1];w<A;w++)y=D[w],V[y]===!0&&($.push(q[y]),L&&L.push(N[w]))}return Number.isInteger(I)?K(I):I.forEach(K),z.push($.length),new i({values:L,index:$,ptr:z,size:x,datatype:g._datatype})}function l(g,b,v,x){if(!b||b.isIndex!==!0)throw new TypeError("Invalid index");var y=b.size(),E=b.isScalar(),w;if(ot(v)?(w=v.size(),v=v.toArray()):w=vt(v),E){if(w.length!==0)throw new TypeError("Scalar expected");g.set(b.min(),v,x)}else{if(y.length!==1&&y.length!==2)throw new Mt(y.length,g._size.length,"<");if(w.length<y.length){for(var A=0,T=0;y[A]===1&&w[A]===1;)A++;for(;y[A]===1;)T++,A++;v=VK(v,y.length,T,w)}if(!Sc(y,w))throw new Mt(y,w,">");if(y.length===1){var S=b.dimension(0);_(S,(M,I)=>{xr(M),g.set([M,0],v[I[0]],x)})}else{var N=b.dimension(0),D=b.dimension(1);_(N,(M,I)=>{xr(M),_(D,(V,q)=>{xr(V),g.set([M,V],v[I[0]][q[0]],x)})})}}return g;function _(M,I){it(M)?I(M,[0]):M.forEach(I)}}i.prototype.get=function(g){if(!cr(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new Mt(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var b=g[0],v=g[1];xr(b,this._size[0]),xr(v,this._size[1]);var x=u(b,this._ptr[v],this._ptr[v+1],this._index);return x<this._ptr[v+1]&&this._index[x]===b?this._values[x]:0},i.prototype.set=function(g,b,v){if(!cr(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new Mt(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var x=g[0],y=g[1],E=this._size[0],w=this._size[1],A=t,T=0;fn(this._datatype)&&(A=e.find(t,[this._datatype,this._datatype])||t,T=e.convert(0,this._datatype)),(x>E-1||y>w-1)&&(d(this,Math.max(x+1,E),Math.max(y+1,w),v),E=this._size[0],w=this._size[1]),xr(x,E),xr(y,w);var S=u(x,this._ptr[y],this._ptr[y+1],this._index);return S<this._ptr[y+1]&&this._index[S]===x?A(b,T)?c(S,y,this._values,this._index,this._ptr):this._values[S]=b:A(b,T)||h(S,x,y,b,this._values,this._index,this._ptr),this};function u(g,b,v,x){if(v-b===0)return v;for(var y=b;y<v;y++)if(x[y]===g)return y;return b}function c(g,b,v,x,y){v.splice(g,1),x.splice(g,1);for(var E=b+1;E<y.length;E++)y[E]--}function h(g,b,v,x,y,E,w){y.splice(g,0,x),E.splice(g,0,b);for(var A=v+1;A<w.length;A++)w[A]++}i.prototype.resize=function(g,b,v){if(!Ca(g))throw new TypeError("Array or Matrix expected");var x=g.valueOf().map(E=>Array.isArray(E)&&E.length===1?E[0]:E);if(x.length!==2)throw new Error("Only two dimensions matrix are supported");x.forEach(function(E){if(!it(E)||!tt(E)||E<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Pt(x)+")")});var y=v?this.clone():this;return d(y,x[0],x[1],b)};function d(g,b,v,x){var y=x||0,E=t,w=0;fn(g._datatype)&&(E=e.find(t,[g._datatype,g._datatype])||t,w=e.convert(0,g._datatype),y=e.convert(y,g._datatype));var A=!E(y,w),T=g._size[0],S=g._size[1],N,D,_;if(v>S){for(D=S;D<v;D++)if(g._ptr[D]=g._values.length,A)for(N=0;N<T;N++)g._values.push(y),g._index.push(N);g._ptr[v]=g._values.length}else v<S&&(g._ptr.splice(v+1,S-v),g._values.splice(g._ptr[v],g._values.length),g._index.splice(g._ptr[v],g._index.length));if(S=v,b>T){if(A){var M=0;for(D=0;D<S;D++){g._ptr[D]=g._ptr[D]+M,_=g._ptr[D+1]+M;var I=0;for(N=T;N<b;N++,I++)g._values.splice(_+I,0,y),g._index.splice(_+I,0,N),M++}g._ptr[S]=g._values.length}}else if(b<T){var V=0;for(D=0;D<S;D++){g._ptr[D]=g._ptr[D]-V;var q=g._ptr[D],P=g._ptr[D+1]-V;for(_=q;_<P;_++)N=g._index[_],N>b-1&&(g._values.splice(_,1),g._index.splice(_,1),V++)}g._ptr[D]=g._values.length}return g._size[0]=b,g._size[1]=v,g}i.prototype.reshape=function(g,b){if(!cr(g))throw new TypeError("Array expected");if(g.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");g.forEach(function(z){if(!it(z)||!tt(z)||z<=-2||z===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Pt(g)+")")});var v=this._size[0]*this._size[1];g=kF(g,v);var x=g[0]*g[1];if(v!==x)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var y=b?this.clone():this;if(this._size[0]===g[0]&&this._size[1]===g[1])return y;for(var E=[],w=0;w<y._ptr.length;w++)for(var A=0;A<y._ptr[w+1]-y._ptr[w];A++)E.push(w);for(var T=y._values.slice(),S=y._index.slice(),N=0;N<y._index.length;N++){var D=S[N],_=E[N],M=D*y._size[1]+_;E[N]=M%g[1],S[N]=Math.floor(M/g[1])}y._values.length=0,y._index.length=0,y._ptr.length=g[1]+1,y._size=g.slice();for(var I=0;I<y._ptr.length;I++)y._ptr[I]=0;for(var V=0;V<T.length;V++){var q=S[V],P=E[V],L=T[V],$=u(q,y._ptr[P],y._ptr[P+1],y._index);h($,q,P,L,y._values,y._index,y._ptr)}return y},i.prototype.clone=function(){var g=new i({values:this._values?gt(this._values):void 0,index:gt(this._index),ptr:gt(this._ptr),size:gt(this._size),datatype:this._datatype});return g},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(g,b){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var v=this,x=this._size[0],y=this._size[1],E=lp(g,v,"map"),w=function(T,S,N){return E.fn(T,[S,N],v)};return f(this,0,x-1,0,y-1,w,b)};function f(g,b,v,x,y,E,w){var A=[],T=[],S=[],N=t,D=0;fn(g._datatype)&&(N=e.find(t,[g._datatype,g._datatype])||t,D=e.convert(0,g._datatype));for(var _=function(O,te,W){var de=E(O,te,W);N(de,D)||(A.push(de),T.push(te))},M=x;M<=y;M++){S.push(A.length);var I=g._ptr[M],V=g._ptr[M+1];if(w)for(var q=I;q<V;q++){var P=g._index[q];P>=b&&P<=v&&_(g._values[q],P-b,M-x)}else{for(var L={},$=I;$<V;$++){var z=g._index[$];L[z]=g._values[$]}for(var K=b;K<=v;K++){var re=K in L?L[K]:0;_(re,K-b,M-x)}}}return S.push(A.length),new i({values:A,index:T,ptr:S,size:[v-b+1,y-x+1]})}i.prototype.forEach=function(g,b){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var v=this,x=this._size[0],y=this._size[1],E=lp(g,v,"forEach"),w=0;w<y;w++){var A=this._ptr[w],T=this._ptr[w+1];if(b)for(var S=A;S<T;S++){var N=this._index[S];E.fn(this._values[S],[N,w],v)}else{for(var D={},_=A;_<T;_++){var M=this._index[_];D[M]=this._values[_]}for(var I=0;I<x;I++){var V=I in D?D[I]:0;E.fn(V,[I,w],v)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var g=this._size[1],b=0;b<g;b++)for(var v=this._ptr[b],x=this._ptr[b+1],y=v;y<x;y++){var E=this._index[y];yield{value:this._values[y],index:[E,b]}}},i.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)};function p(g,b,v,x,y){var E=x[0],w=x[1],A=[],T,S;for(T=0;T<E;T++)for(A[T]=[],S=0;S<w;S++)A[T][S]=0;for(S=0;S<w;S++)for(var N=v[S],D=v[S+1],_=N;_<D;_++)T=b[_],A[T][S]=g?y?gt(g[_]):g[_]:1;return A}return i.prototype.format=function(g){for(var b=this._size[0],v=this._size[1],x=this.density(),y="Sparse Matrix ["+Pt(b,g)+" x "+Pt(v,g)+"] density: "+Pt(x,g)+`
`,E=0;E<v;E++)for(var w=this._ptr[E],A=this._ptr[E+1],T=w;T<A;T++){var S=this._index[T];y+=`
    (`+Pt(S,g)+", "+Pt(E,g)+") ==> "+(this._values?Pt(this._values[T],g):"X")}return y},i.prototype.toString=function(){return Pt(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(g){if(g){if(xt(g)&&(g=g.toNumber()),!it(g)||!tt(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var b=g>0?g:0,v=g<0?-g:0,x=this._size[0],y=this._size[1],E=Math.min(x-v,y-b),w=[],A=[],T=[];T[0]=0;for(var S=b;S<y&&w.length<E;S++)for(var N=this._ptr[S],D=this._ptr[S+1],_=N;_<D;_++){var M=this._index[_];if(M===S-b+v){w.push(this._values[_]),A[w.length-1]=M-v;break}}return T.push(w.length),new i({values:w,index:A,ptr:T,size:[E,1]})},i.fromJSON=function(g){return new i(g)},i.diagonal=function(g,b,v,x,y){if(!cr(g))throw new TypeError("Array expected, size parameter");if(g.length!==2)throw new Error("Only two dimensions matrix are supported");if(g=g.map(function(z){if(xt(z)&&(z=z.toNumber()),!it(z)||!tt(z)||z<1)throw new Error("Size values must be positive integers");return z}),v){if(xt(v)&&(v=v.toNumber()),!it(v)||!tt(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var E=t,w=0;fn(y)&&(E=e.find(t,[y,y])||t,w=e.convert(0,y));var A=v>0?v:0,T=v<0?-v:0,S=g[0],N=g[1],D=Math.min(S-T,N-A),_;if(cr(b)){if(b.length!==D)throw new Error("Invalid value array length");_=function(K){return b[K]}}else if(ot(b)){var M=b.size();if(M.length!==1||M[0]!==D)throw new Error("Invalid matrix length");_=function(K){return b.get([K])}}else _=function(){return b};for(var I=[],V=[],q=[],P=0;P<N;P++){q.push(I.length);var L=P-A;if(L>=0&&L<D){var $=_(L);E($,w)||(V.push(L+T),I.push($))}}return q.push(I.length),new i({values:I,index:V,ptr:q,size:[S,N]})},i.prototype.swapRows=function(g,b){if(!it(g)||!tt(g)||!it(b)||!tt(b))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return xr(g,this._size[0]),xr(b,this._size[0]),i._swapRows(g,b,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(g,b,v,x,y){for(var E=x[g],w=x[g+1],A=E;A<w;A++)y(v[A],b[A])},i._swapRows=function(g,b,v,x,y,E){for(var w=0;w<v;w++){var A=E[w],T=E[w+1],S=u(g,A,T,y),N=u(b,A,T,y);if(S<T&&N<T&&y[S]===g&&y[N]===b){if(x){var D=x[S];x[S]=x[N],x[N]=D}continue}if(S<T&&y[S]===g&&(N>=T||y[N]!==b)){var _=x?x[S]:void 0;y.splice(N,0,b),x&&x.splice(N,0,_),y.splice(N<=S?S+1:S,1),x&&x.splice(N<=S?S+1:S,1);continue}if(N<T&&y[N]===b&&(S>=T||y[S]!==g)){var M=x?x[N]:void 0;y.splice(S,0,g),x&&x.splice(S,0,M),y.splice(S<=N?N+1:N,1),x&&x.splice(S<=N?N+1:N,1)}}},i},{isClass:!0}),rye="number",nye=["typed"];function iye(r){var e=r.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var t={"0b":2,"0o":8,"0x":16}[e[1]],n=e[2],i=e[3];return{input:r,radix:t,integerPart:n,fractionalPart:i}}else return null}function sye(r){for(var e=parseInt(r.integerPart,r.radix),t=0,n=0;n<r.fractionalPart.length;n++){var i=parseInt(r.fractionalPart[n],r.radix);t+=i/Math.pow(r.radix,n+1)}var s=e+t;if(isNaN(s))throw new SyntaxError('String "'+r.input+'" is not a valid number');return s}var aye=Y(rye,nye,r=>{var{typed:e}=r,t=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var s=iye(i);if(s)return sye(s);var a=0,o=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);o&&(a=Number(o[2]),i=o[1]);var l=Number(i);if(isNaN(l))throw new SyntaxError('String "'+i+'" is not a valid number');if(o){if(l>2**a-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));l>=2**(a-1)&&(l=l-2**a)}return l},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:e.referToSelf(n=>i=>{var s=i.clone();return s.value=n(i.value),s}),null:function(i){return 0},"Unit, string | Unit":function(i,s){return i.toNumber(s)},"Array | Matrix":e.referToSelf(n=>i=>_t(i,n))});return t.fromJSON=function(n){return parseFloat(n.value)},t}),oye="bigint",lye=["typed"],uye=Y(oye,lye,r=>{var{typed:e}=r,t=e("bigint",{"":function(){return 0n},bigint:function(i){return i},number:function(i){return BigInt(i.toFixed())},BigNumber:function(i){return BigInt(i.round().toString())},Fraction:function(i){return BigInt(i.valueOf().toFixed())},"string | boolean":function(i){return BigInt(i)},null:function(i){return 0n},"Array | Matrix":e.referToSelf(n=>i=>_t(i,n))});return t.fromJSON=function(n){return BigInt(n.value)},t}),g6="string",cye=["typed"],hye=Y(g6,cye,r=>{var{typed:e}=r;return e(g6,{"":function(){return""},number:Gm,null:function(n){return"null"},boolean:function(n){return n+""},string:function(n){return n},"Array | Matrix":e.referToSelf(t=>n=>_t(n,t)),any:function(n){return String(n)}})}),v6="boolean",dye=["typed"],fye=Y(v6,dye,r=>{var{typed:e}=r;return e(v6,{"":function(){return!1},boolean:function(n){return n},number:function(n){return!!n},null:function(n){return!1},BigNumber:function(n){return!n.isZero()},string:function(n){var i=n.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;var s=Number(n);if(n!==""&&!isNaN(s))return!!s;throw new Error('Cannot convert "'+n+'" to a boolean')},"Array | Matrix":e.referToSelf(t=>n=>_t(n,t))})}),mye="bignumber",pye=["typed","BigNumber"],gye=Y(mye,pye,r=>{var{typed:e,BigNumber:t}=r;return e("bignumber",{"":function(){return new t(0)},number:function(i){return new t(i+"")},string:function(i){var s=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(s){var a=s[2],o=t(s[1]),l=new t(2).pow(Number(a));if(o.gt(l.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var u=new t(2).pow(Number(a)-1);return o.gte(u)?o.sub(l):o}return new t(i)},BigNumber:function(i){return i},bigint:function(i){return new t(i.toString())},Unit:e.referToSelf(n=>i=>{var s=i.clone();return s.value=n(i.value),s}),Fraction:function(i){return new t(String(i.n)).div(String(i.d)).times(String(i.s))},null:function(i){return new t(0)},"Array | Matrix":e.referToSelf(n=>i=>_t(i,n))})}),vye="complex",yye=["typed","Complex"],bye=Y(vye,yye,r=>{var{typed:e,Complex:t}=r;return e("complex",{"":function(){return t.ZERO},number:function(i){return new t(i,0)},"number, number":function(i,s){return new t(i,s)},"BigNumber, BigNumber":function(i,s){return new t(i.toNumber(),s.toNumber())},Fraction:function(i){return new t(i.valueOf(),0)},Complex:function(i){return i.clone()},string:function(i){return t(i)},null:function(i){return t(0)},Object:function(i){if("re"in i&&"im"in i)return new t(i.re,i.im);if("r"in i&&"phi"in i||"abs"in i&&"arg"in i)return new t(i);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(n=>i=>_t(i,n))})}),wye="fraction",xye=["typed","Fraction"],_ye=Y(wye,xye,r=>{var{typed:e,Fraction:t}=r;return e("fraction",{number:function(i){if(!Number.isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new t(i)},string:function(i){return new t(i)},"number, number":function(i,s){return new t(i,s)},"bigint, bigint":function(i,s){return new t(i,s)},null:function(i){return new t(0)},BigNumber:function(i){return new t(i.toString())},bigint:function(i){return new t(i.toString())},Fraction:function(i){return i},Unit:e.referToSelf(n=>i=>{var s=i.clone();return s.value=n(i.value),s}),Object:function(i){return new t(i)},"Array | Matrix":e.referToSelf(n=>i=>_t(i,n))})}),y6="matrix",Aye=["typed","Matrix","DenseMatrix","SparseMatrix"],Eye=Y(y6,Aye,r=>{var{typed:e,Matrix:t,DenseMatrix:n,SparseMatrix:i}=r;return e(y6,{"":function(){return s([])},string:function(o){return s([],o)},"string, string":function(o,l){return s([],o,l)},Array:function(o){return s(o)},Matrix:function(o){return s(o,o.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(a,o,l){if(o==="dense"||o==="default"||o===void 0)return new n(a,l);if(o==="sparse")return new i(a,l);throw new TypeError("Unknown matrix type "+JSON.stringify(o)+".")}}),b6="matrixFromFunction",Sye=["typed","matrix","isZero"],Tye=Y(b6,Sye,r=>{var{typed:e,matrix:t,isZero:n}=r;return e(b6,{"Array | Matrix, function, string, string":function(a,o,l,u){return i(a,o,l,u)},"Array | Matrix, function, string":function(a,o,l){return i(a,o,l)},"Matrix, function":function(a,o){return i(a,o,"dense")},"Array, function":function(a,o){return i(a,o,"dense").toArray()},"Array | Matrix, string, function":function(a,o,l){return i(a,l,o)},"Array | Matrix, string, string, function":function(a,o,l,u){return i(a,u,o,l)}});function i(s,a,o,l){var u;return l!==void 0?u=t(o,l):u=t(o),u.resize(s),u.forEach(function(c,h){var d=a(h);n(d)||u.set(h,d)}),u}}),w6="matrixFromRows",Cye=["typed","matrix","flatten","size"],Nye=Y(w6,Cye,r=>{var{typed:e,matrix:t,flatten:n,size:i}=r;return e(w6,{"...Array":function(l){return s(l)},"...Matrix":function(l){return t(s(l.map(u=>u.toArray())))}});function s(o){if(o.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var l=a(o[0]),u=[];for(var c of o){var h=a(c);if(h!==l)throw new TypeError("The vectors had different length: "+(l|0)+"  "+(h|0));u.push(n(c))}return u}function a(o){var l=i(o);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),x6="matrixFromColumns",Dye=["typed","matrix","flatten","size"],Mye=Y(x6,Dye,r=>{var{typed:e,matrix:t,flatten:n,size:i}=r;return e(x6,{"...Array":function(l){return s(l)},"...Matrix":function(l){return t(s(l.map(u=>u.toArray())))}});function s(o){if(o.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var l=a(o[0]),u=[],c=0;c<l;c++)u[c]=[];for(var h of o){var d=a(h);if(d!==l)throw new TypeError("The vectors had different length: "+(l|0)+"  "+(d|0));for(var f=n(h),p=0;p<l;p++)u[p].push(f[p])}return u}function a(o){var l=i(o);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),_6="splitUnit",Iye=["typed"],Pye=Y(_6,Iye,r=>{var{typed:e}=r;return e(_6,{"Unit, Array":function(n,i){return n.splitUnit(i)}})}),A6="unaryMinus",Rye=["typed"],kye=Y(A6,Rye,r=>{var{typed:e}=r;return e(A6,{number:JK,"Complex | BigNumber | Fraction":t=>t.neg(),bigint:t=>-t,Unit:e.referToSelf(t=>n=>{var i=n.clone();return i.value=e.find(t,i.valueType())(n.value),i}),"Array | Matrix":e.referToSelf(t=>n=>_t(n,t,!0))})}),E6="unaryPlus",Fye=["typed","config","numeric"],Oye=Y(E6,Fye,r=>{var{typed:e,config:t,numeric:n}=r;return e(E6,{number:ZK,Complex:function(s){return s},BigNumber:function(s){return s},bigint:function(s){return s},Fraction:function(s){return s},Unit:function(s){return s.clone()},"Array | Matrix":e.referToSelf(i=>s=>_t(s,i,!0)),boolean:function(s){return n(s?1:0,t.number)},string:function(s){return n(s,Vd(s,t))}})}),S6="abs",Bye=["typed"],Lye=Y(S6,Bye,r=>{var{typed:e}=r;return e(S6,{number:KK,"Complex | BigNumber | Fraction | Unit":t=>t.abs(),bigint:t=>t<0n?-t:t,"Array | Matrix":e.referToSelf(t=>n=>_t(n,t,!0))})}),T6="mapSlices",$ye=["typed","isInteger"],MP=Y(T6,$ye,r=>{var{typed:e,isInteger:t}=r;return e(T6,{"Array | Matrix, number | BigNumber, function":function(i,s,a){if(!t(s))throw new TypeError("Integer number expected for dimension");var o=Array.isArray(i)?vt(i):i.size();if(s<0||s>=o.length)throw new Qo(s,o.length);return ot(i)?i.create(vT(i.valueOf(),s,a),i.datatype()):vT(i,s,a)}})},{formerly:"apply"});function vT(r,e,t){var n,i,s;if(e<=0)if(Array.isArray(r[0])){for(s=Vye(r),i=[],n=0;n<s.length;n++)i[n]=vT(s[n],e-1,t);return i}else return t(r);else{for(i=[],n=0;n<r.length;n++)i[n]=vT(r[n],e-1,t);return i}}function Vye(r){var e=r.length,t=r[0].length,n,i,s=[];for(i=0;i<t;i++){var a=[];for(n=0;n<e;n++)a.push(r[n][i]);s.push(a)}return s}var C6="addScalar",Uye=["typed"],zye=Y(C6,Uye,r=>{var{typed:e}=r;return e(C6,{"number, number":XK,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"bigint, bigint":function(n,i){return n+i},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var s=n.clone();return s.value=e.find(t,[s.valueType(),i.valueType()])(s.value,i.value),s.fixPrefix=!1,s})})}),N6="subtractScalar",jye=["typed"],qye=Y(N6,jye,r=>{var{typed:e}=r;return e(N6,{"number, number":YK,"Complex, Complex":function(n,i){return n.sub(i)},"BigNumber, BigNumber":function(n,i){return n.minus(i)},"bigint, bigint":function(n,i){return n-i},"Fraction, Fraction":function(n,i){return n.sub(i)},"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var s=n.clone();return s.value=e.find(t,[s.valueType(),i.valueType()])(s.value,i.value),s.fixPrefix=!1,s})})}),D6="cbrt",Hye=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],Gye=Y(D6,Hye,r=>{var{config:e,typed:t,isNegative:n,unaryMinus:i,matrix:s,Complex:a,BigNumber:o,Fraction:l}=r;return t(D6,{number:wb,Complex:u,"Complex, boolean":u,BigNumber:function(d){return d.cbrt()},Unit:c});function u(h,d){var f=h.arg()/3,p=h.abs(),g=new a(wb(p),0).mul(new a(0,f).exp());if(d){var b=[g,new a(wb(p),0).mul(new a(0,f+Math.PI*2/3).exp()),new a(wb(p),0).mul(new a(0,f-Math.PI*2/3).exp())];return e.matrix==="Array"?b:s(b)}else return g}function c(h){if(h.value&&ac(h.value)){var d=h.clone();return d.value=1,d=d.pow(1/3),d.value=u(h.value),d}else{var f=n(h.value);f&&(h.value=i(h.value));var p;xt(h.value)?p=new o(1).div(3):r_(h.value)?p=new l(1,3):p=1/3;var g=h.pow(p);return f&&(g.value=i(g.value)),g}}}),Wye="matAlgo11xS0s",Kye=["typed","equalScalar"],Fi=Y(Wye,Kye,r=>{var{typed:e,equalScalar:t}=r;return function(i,s,a,o){var l=i._values,u=i._index,c=i._ptr,h=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f=h[0],p=h[1],g,b=t,v=0,x=a;typeof d=="string"&&(g=d,b=e.find(t,[g,g]),v=e.convert(0,g),s=e.convert(s,g),x=e.find(a,[g,g]));for(var y=[],E=[],w=[],A=0;A<p;A++){w[A]=E.length;for(var T=c[A],S=c[A+1],N=T;N<S;N++){var D=u[N],_=o?x(s,l[N]):x(l[N],s);b(_,v)||(E.push(D),y.push(_))}}return w[p]=E.length,i.createSparseMatrix({values:y,index:E,ptr:w,size:[f,p],datatype:g})}}),Xye="matAlgo12xSfs",Yye=["typed","DenseMatrix"],Kn=Y(Xye,Yye,r=>{var{typed:e,DenseMatrix:t}=r;return function(i,s,a,o){var l=i._values,u=i._index,c=i._ptr,h=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f=h[0],p=h[1],g,b=a;typeof d=="string"&&(g=d,s=e.convert(s,g),b=e.find(a,[g,g]));for(var v=[],x=[],y=[],E=0;E<p;E++){for(var w=E+1,A=c[E],T=c[E+1],S=A;S<T;S++){var N=u[S];x[N]=l[S],y[N]=w}for(var D=0;D<f;D++)E===0&&(v[D]=[]),y[D]===w?v[D][E]=o?b(s,x[D]):b(x[D],s):v[D][E]=o?b(s,0):b(0,s)}return new t({data:v,size:[f,p],datatype:g})}}),Qye="matAlgo14xDs",Jye=["typed"],vo=Y(Qye,Jye,r=>{var{typed:e}=r;return function(i,s,a,o){var l=i._data,u=i._size,c=i._datatype,h,d=a;typeof c=="string"&&(h=c,s=e.convert(s,h),d=e.find(a,[h,h]));var f=u.length>0?t(d,0,u,u[0],l,s,o):[];return i.createDenseMatrix({data:f,size:gt(u),datatype:h})};function t(n,i,s,a,o,l,u){var c=[];if(i===s.length-1)for(var h=0;h<a;h++)c[h]=u?n(l,o[h]):n(o[h],l);else for(var d=0;d<a;d++)c[d]=t(n,i+1,s,s[i+1],o[d],l,u);return c}}),IP="ceil",Zye=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],ebe=new Nd(10),tbe=Y(IP,["typed","config","round"],r=>{var{typed:e,config:t,round:n}=r;function i(s){var a=Math.ceil(s),o=n(s);return a===o?a:fi(s,o,t.relTol,t.absTol)&&!fi(s,a,t.relTol,t.absTol)?o:a}return e(IP,{number:i,"number, number":function(a,o){if(!tt(o))throw new RangeError("number of decimals in function ceil must be an integer");if(o<0||o>15)throw new RangeError("number of decimals in ceil number must be in range 0-15");var l=10**o;return i(a*l)/l}})}),rbe=Y(IP,Zye,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:s,zeros:a,DenseMatrix:o}=r,l=Fi({typed:e,equalScalar:s}),u=Kn({typed:e,DenseMatrix:o}),c=vo({typed:e}),h=tbe({typed:e,config:t,round:n});function d(f){var p=(v,x)=>po(v,x,t.relTol,t.absTol),g=f.ceil(),b=n(f);return g.eq(b)?g:p(f,b)&&!p(f,g)?b:g}return e("ceil",{number:h.signatures.number,"number,number":h.signatures["number,number"],Complex:function(p){return p.ceil()},"Complex, number":function(p,g){return p.ceil(g)},"Complex, BigNumber":function(p,g){return p.ceil(g.toNumber())},BigNumber:d,"BigNumber, BigNumber":function(p,g){var b=ebe.pow(g);return d(p.mul(b)).div(b)},bigint:f=>f,"bigint, number":(f,p)=>f,"bigint, BigNumber":(f,p)=>f,Fraction:function(p){return p.ceil()},"Fraction, number":function(p,g){return p.ceil(g)},"Fraction, BigNumber":function(p,g){return p.ceil(g.toNumber())},"Unit, number, Unit":e.referToSelf(f=>function(p,g,b){var v=p.toNumeric(b);return b.multiply(f(v,g))}),"Unit, BigNumber, Unit":e.referToSelf(f=>(p,g,b)=>f(p,g.toNumber(),b)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(f=>(p,g,b)=>_t(p,v=>f(v,g,b),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(f=>(p,g)=>f(p,0,g)),"Array | Matrix":e.referToSelf(f=>p=>_t(p,f,!0)),"Array, number | BigNumber":e.referToSelf(f=>(p,g)=>_t(p,b=>f(b,g),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(f=>(p,g)=>l(p,g,f,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(f=>(p,g)=>c(p,g,f,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(f=>(p,g)=>c(i(g),p,f,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(f=>(p,g)=>s(p,0)?a(g.size(),g.storage()):g.storage()==="dense"?c(g,p,f,!0):u(g,p,f,!0))})}),M6="cube",nbe=["typed"],ibe=Y(M6,nbe,r=>{var{typed:e}=r;return e(M6,{number:eX,Complex:function(n){return n.mul(n).mul(n)},BigNumber:function(n){return n.times(n).times(n)},bigint:function(n){return n*n*n},Fraction:function(n){return n.pow(3)},Unit:function(n){return n.pow(3)}})}),I6="exp",sbe=["typed"],abe=Y(I6,sbe,r=>{var{typed:e}=r;return e(I6,{number:tX,Complex:function(n){return n.exp()},BigNumber:function(n){return n.exp()}})}),P6="expm1",obe=["typed","Complex"],lbe=Y(P6,obe,r=>{var{typed:e,Complex:t}=r;return e(P6,{number:rX,Complex:function(i){var s=Math.exp(i.re);return new t(s*Math.cos(i.im)-1,s*Math.sin(i.im))},BigNumber:function(i){return i.exp().minus(1)}})}),PP="fix",ube=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],cbe=Y(PP,["typed","ceil","floor"],r=>{var{typed:e,ceil:t,floor:n}=r;return e(PP,{number:function(s){return s>0?n(s):t(s)},"number, number":function(s,a){return s>0?n(s,a):t(s,a)}})}),hbe=Y(PP,ube,r=>{var{typed:e,Complex:t,matrix:n,ceil:i,floor:s,equalScalar:a,zeros:o,DenseMatrix:l}=r,u=Kn({typed:e,DenseMatrix:l}),c=vo({typed:e}),h=cbe({typed:e,ceil:i,floor:s});return e("fix",{number:h.signatures.number,"number, number | BigNumber":h.signatures["number,number"],Complex:function(f){return new t(f.re>0?Math.floor(f.re):Math.ceil(f.re),f.im>0?Math.floor(f.im):Math.ceil(f.im))},"Complex, number":function(f,p){return new t(f.re>0?s(f.re,p):i(f.re,p),f.im>0?s(f.im,p):i(f.im,p))},"Complex, BigNumber":function(f,p){var g=p.toNumber();return new t(f.re>0?s(f.re,g):i(f.re,g),f.im>0?s(f.im,g):i(f.im,g))},BigNumber:function(f){return f.isNegative()?i(f):s(f)},"BigNumber, number | BigNumber":function(f,p){return f.isNegative()?i(f,p):s(f,p)},bigint:d=>d,"bigint, number":(d,f)=>d,"bigint, BigNumber":(d,f)=>d,Fraction:function(f){return f.s<0n?f.ceil():f.floor()},"Fraction, number | BigNumber":function(f,p){return f.s<0n?i(f,p):s(f,p)},"Unit, number, Unit":e.referToSelf(d=>function(f,p,g){var b=f.toNumeric(g);return g.multiply(d(b,p))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(f,p,g)=>d(f,p.toNumber(),g)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(f,p,g)=>_t(f,b=>d(b,p,g),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(f,p)=>d(f,0,p)),"Array | Matrix":e.referToSelf(d=>f=>_t(f,d,!0)),"Array | Matrix, number | BigNumber":e.referToSelf(d=>(f,p)=>_t(f,g=>d(g,p),!0)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(f,p)=>c(n(p),f,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(f,p)=>a(f,0)?o(p.size(),p.storage()):p.storage()==="dense"?c(p,f,d,!0):u(p,f,d,!0))})}),RP="floor",dbe=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],fbe=new Nd(10),mbe=Y(RP,["typed","config","round"],r=>{var{typed:e,config:t,round:n}=r;function i(s){var a=Math.floor(s),o=n(s);return a===o?a:fi(s,o,t.relTol,t.absTol)&&!fi(s,a,t.relTol,t.absTol)?o:a}return e(RP,{number:i,"number, number":function(a,o){if(!tt(o))throw new RangeError("number of decimals in function floor must be an integer");if(o<0||o>15)throw new RangeError("number of decimals in floor number must be in range 0 - 15");var l=10**o;return i(a*l)/l}})}),BX=Y(RP,dbe,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:s,zeros:a,DenseMatrix:o}=r,l=Fi({typed:e,equalScalar:s}),u=Kn({typed:e,DenseMatrix:o}),c=vo({typed:e}),h=mbe({typed:e,config:t,round:n});function d(f){var p=(v,x)=>po(v,x,t.relTol,t.absTol),g=f.floor(),b=n(f);return g.eq(b)?g:p(f,b)&&!p(f,g)?b:g}return e("floor",{number:h.signatures.number,"number,number":h.signatures["number,number"],Complex:function(p){return p.floor()},"Complex, number":function(p,g){return p.floor(g)},"Complex, BigNumber":function(p,g){return p.floor(g.toNumber())},BigNumber:d,"BigNumber, BigNumber":function(p,g){var b=fbe.pow(g);return d(p.mul(b)).div(b)},bigint:f=>f,"bigint, number":(f,p)=>f,"bigint, BigNumber":(f,p)=>f,Fraction:function(p){return p.floor()},"Fraction, number":function(p,g){return p.floor(g)},"Fraction, BigNumber":function(p,g){return p.floor(g.toNumber())},"Unit, number, Unit":e.referToSelf(f=>function(p,g,b){var v=p.toNumeric(b);return b.multiply(f(v,g))}),"Unit, BigNumber, Unit":e.referToSelf(f=>(p,g,b)=>f(p,g.toNumber(),b)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(f=>(p,g,b)=>_t(p,v=>f(v,g,b),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(f=>(p,g)=>f(p,0,g)),"Array | Matrix":e.referToSelf(f=>p=>_t(p,f,!0)),"Array, number | BigNumber":e.referToSelf(f=>(p,g)=>_t(p,b=>f(b,g),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(f=>(p,g)=>l(p,g,f,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(f=>(p,g)=>c(p,g,f,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(f=>(p,g)=>c(i(g),p,f,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(f=>(p,g)=>s(p,0)?a(g.size(),g.storage()):g.storage()==="dense"?c(g,p,f,!0):u(g,p,f,!0))})}),pbe="matAlgo02xDS0",gbe=["typed","equalScalar"],Zo=Y(pbe,gbe,r=>{var{typed:e,equalScalar:t}=r;return function(i,s,a,o){var l=i._data,u=i._size,c=i._datatype||i.getDataType(),h=s._values,d=s._index,f=s._ptr,p=s._size,g=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(u.length!==p.length)throw new Mt(u.length,p.length);if(u[0]!==p[0]||u[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+p+")");if(!h)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var b=u[0],v=u[1],x,y=t,E=0,w=a;typeof c=="string"&&c===g&&c!=="mixed"&&(x=c,y=e.find(t,[x,x]),E=e.convert(0,x),w=e.find(a,[x,x]));for(var A=[],T=[],S=[],N=0;N<v;N++){S[N]=T.length;for(var D=f[N],_=f[N+1],M=D;M<_;M++){var I=d[M],V=o?w(h[M],l[I][N]):w(l[I][N],h[M]);y(V,E)||(T.push(I),A.push(V))}}return S[v]=T.length,s.createSparseMatrix({values:A,index:T,ptr:S,size:[b,v],datatype:c===i._datatype&&g===s._datatype?x:void 0})}}),vbe="matAlgo03xDSf",ybe=["typed"],is=Y(vbe,ybe,r=>{var{typed:e}=r;return function(n,i,s,a){var o=n._data,l=n._size,u=n._datatype||n.getDataType(),c=i._values,h=i._index,d=i._ptr,f=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==f.length)throw new Mt(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g=l[0],b=l[1],v,x=0,y=s;typeof u=="string"&&u===p&&u!=="mixed"&&(v=u,x=e.convert(0,v),y=e.find(s,[v,v]));for(var E=[],w=0;w<g;w++)E[w]=[];for(var A=[],T=[],S=0;S<b;S++){for(var N=S+1,D=d[S],_=d[S+1],M=D;M<_;M++){var I=h[M];A[I]=a?y(c[M],o[I][S]):y(o[I][S],c[M]),T[I]=N}for(var V=0;V<g;V++)T[V]===N?E[V][S]=A[V]:E[V][S]=a?y(x,o[V][S]):y(o[V][S],x)}return n.createDenseMatrix({data:E,size:[g,b],datatype:u===n._datatype&&p===i._datatype?v:void 0})}}),bbe="matAlgo05xSfSf",wbe=["typed","equalScalar"],i2=Y(bbe,wbe,r=>{var{typed:e,equalScalar:t}=r;return function(i,s,a){var o=i._values,l=i._index,u=i._ptr,c=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,f=s._index,p=s._ptr,g=s._size,b=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==g.length)throw new Mt(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");var v=c[0],x=c[1],y,E=t,w=0,A=a;typeof h=="string"&&h===b&&h!=="mixed"&&(y=h,E=e.find(t,[y,y]),w=e.convert(0,y),A=e.find(a,[y,y]));var T=o&&d?[]:void 0,S=[],N=[],D=T?[]:void 0,_=T?[]:void 0,M=[],I=[],V,q,P,L;for(q=0;q<x;q++){N[q]=S.length;var $=q+1;for(P=u[q],L=u[q+1];P<L;P++)V=l[P],S.push(V),M[V]=$,D&&(D[V]=o[P]);for(P=p[q],L=p[q+1];P<L;P++)V=f[P],M[V]!==$&&S.push(V),I[V]=$,_&&(_[V]=d[P]);if(T)for(P=N[q];P<S.length;){V=S[P];var z=M[V],K=I[V];if(z===$||K===$){var re=z===$?D[V]:w,Q=K===$?_[V]:w,O=A(re,Q);E(O,w)?S.splice(P,1):(T.push(O),P++)}}}return N[x]=S.length,i.createSparseMatrix({values:T,index:S,ptr:N,size:[v,x],datatype:h===i._datatype&&b===s._datatype?y:void 0})}}),xbe="matAlgo13xDD",_be=["typed"],LX=Y(xbe,_be,r=>{var{typed:e}=r;return function(i,s,a){var o=i._data,l=i._size,u=i._datatype,c=s._data,h=s._size,d=s._datatype,f=[];if(l.length!==h.length)throw new Mt(l.length,h.length);for(var p=0;p<l.length;p++){if(l[p]!==h[p])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");f[p]=l[p]}var g,b=a;typeof u=="string"&&u===d&&(g=u,b=e.find(a,[g,g]));var v=f.length>0?t(b,0,f,f[0],o,c):[];return i.createDenseMatrix({data:v,size:f,datatype:g})};function t(n,i,s,a,o,l){var u=[];if(i===s.length-1)for(var c=0;c<a;c++)u[c]=n(o[c],l[c]);else for(var h=0;h<a;h++)u[h]=t(n,i+1,s,s[i+1],o[h],l[h]);return u}});function Zn(r,e){if(Sc(r.size(),e.size()))return[r,e];var t=cT(r.size(),e.size());return[r,e].map(n=>Abe(n,t))}function Abe(r,e){return Sc(r.size(),e)?r:r.create(Ef(r.valueOf(),e),r.datatype())}var Ebe="matrixAlgorithmSuite",Sbe=["typed","matrix"],Ar=Y(Ebe,Sbe,r=>{var{typed:e,matrix:t}=r,n=LX({typed:e}),i=vo({typed:e});return function(a){var o=a.elop,l=a.SD||a.DS,u;o?(u={"DenseMatrix, DenseMatrix":(f,p)=>n(...Zn(f,p),o),"Array, Array":(f,p)=>n(...Zn(t(f),t(p)),o).valueOf(),"Array, DenseMatrix":(f,p)=>n(...Zn(t(f),p),o),"DenseMatrix, Array":(f,p)=>n(...Zn(f,t(p)),o)},a.SS&&(u["SparseMatrix, SparseMatrix"]=(f,p)=>a.SS(...Zn(f,p),o,!1)),a.DS&&(u["DenseMatrix, SparseMatrix"]=(f,p)=>a.DS(...Zn(f,p),o,!1),u["Array, SparseMatrix"]=(f,p)=>a.DS(...Zn(t(f),p),o,!1)),l&&(u["SparseMatrix, DenseMatrix"]=(f,p)=>l(...Zn(p,f),o,!0),u["SparseMatrix, Array"]=(f,p)=>l(...Zn(t(p),f),o,!0))):(u={"DenseMatrix, DenseMatrix":e.referToSelf(f=>(p,g)=>n(...Zn(p,g),f)),"Array, Array":e.referToSelf(f=>(p,g)=>n(...Zn(t(p),t(g)),f).valueOf()),"Array, DenseMatrix":e.referToSelf(f=>(p,g)=>n(...Zn(t(p),g),f)),"DenseMatrix, Array":e.referToSelf(f=>(p,g)=>n(...Zn(p,t(g)),f))},a.SS&&(u["SparseMatrix, SparseMatrix"]=e.referToSelf(f=>(p,g)=>a.SS(...Zn(p,g),f,!1))),a.DS&&(u["DenseMatrix, SparseMatrix"]=e.referToSelf(f=>(p,g)=>a.DS(...Zn(p,g),f,!1)),u["Array, SparseMatrix"]=e.referToSelf(f=>(p,g)=>a.DS(...Zn(t(p),g),f,!1))),l&&(u["SparseMatrix, DenseMatrix"]=e.referToSelf(f=>(p,g)=>l(...Zn(g,p),f,!0)),u["SparseMatrix, Array"]=e.referToSelf(f=>(p,g)=>l(...Zn(t(g),p),f,!0))));var c=a.scalar||"any",h=a.Ds||a.Ss;h&&(o?(u["DenseMatrix,"+c]=(f,p)=>i(f,p,o,!1),u[c+", DenseMatrix"]=(f,p)=>i(p,f,o,!0),u["Array,"+c]=(f,p)=>i(t(f),p,o,!1).valueOf(),u[c+", Array"]=(f,p)=>i(t(p),f,o,!0).valueOf()):(u["DenseMatrix,"+c]=e.referToSelf(f=>(p,g)=>i(p,g,f,!1)),u[c+", DenseMatrix"]=e.referToSelf(f=>(p,g)=>i(g,p,f,!0)),u["Array,"+c]=e.referToSelf(f=>(p,g)=>i(t(p),g,f,!1).valueOf()),u[c+", Array"]=e.referToSelf(f=>(p,g)=>i(t(g),p,f,!0).valueOf())));var d=a.sS!==void 0?a.sS:a.Ss;return o?(a.Ss&&(u["SparseMatrix,"+c]=(f,p)=>a.Ss(f,p,o,!1)),d&&(u[c+", SparseMatrix"]=(f,p)=>d(p,f,o,!0))):(a.Ss&&(u["SparseMatrix,"+c]=e.referToSelf(f=>(p,g)=>a.Ss(p,g,f,!1))),d&&(u[c+", SparseMatrix"]=e.referToSelf(f=>(p,g)=>d(g,p,f,!0)))),o&&o.signatures&&bK(u,o.signatures),u}}),R6="mod",Tbe=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],$X=Y(R6,Tbe,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:s,zeros:a,DenseMatrix:o,concat:l}=r,u=BX({typed:e,config:t,round:n,matrix:i,equalScalar:s,zeros:a,DenseMatrix:o}),c=Zo({typed:e,equalScalar:s}),h=is({typed:e}),d=i2({typed:e,equalScalar:s}),f=Fi({typed:e,equalScalar:s}),p=Kn({typed:e,DenseMatrix:o}),g=Ar({typed:e,matrix:i,concat:l});return e(R6,{"number, number":b,"BigNumber, BigNumber":function(x,y){return y.isZero()?x:x.sub(y.mul(u(x.div(y))))},"bigint, bigint":function(x,y){if(y===0n)return x;if(x<0){var E=x%y;return E===0n?E:E+y}return x%y},"Fraction, Fraction":function(x,y){return y.equals(0)?x:x.sub(y.mul(u(x.div(y))))}},g({SS:d,DS:h,SD:c,Ss:f,sS:p}));function b(v,x){return x===0?v:v-x*u(v/x)}}),Cbe="matAlgo01xDSid",Nbe=["typed"],zd=Y(Cbe,Nbe,r=>{var{typed:e}=r;return function(n,i,s,a){var o=n._data,l=n._size,u=n._datatype||n.getDataType(),c=i._values,h=i._index,d=i._ptr,f=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==f.length)throw new Mt(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g=l[0],b=l[1],v=typeof u=="string"&&u!=="mixed"&&u===p?u:void 0,x=v?e.find(s,[v,v]):s,y,E,w=[];for(y=0;y<g;y++)w[y]=[];var A=[],T=[];for(E=0;E<b;E++){for(var S=E+1,N=d[E],D=d[E+1],_=N;_<D;_++)y=h[_],A[y]=a?x(c[_],o[y][E]):x(o[y][E],c[_]),T[y]=S;for(y=0;y<g;y++)T[y]===S?w[y][E]=A[y]:w[y][E]=o[y][E]}return n.createDenseMatrix({data:w,size:[g,b],datatype:u===n._datatype&&p===i._datatype?v:void 0})}}),Dbe="matAlgo04xSidSid",Mbe=["typed","equalScalar"],BF=Y(Dbe,Mbe,r=>{var{typed:e,equalScalar:t}=r;return function(i,s,a){var o=i._values,l=i._index,u=i._ptr,c=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,f=s._index,p=s._ptr,g=s._size,b=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==g.length)throw new Mt(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");var v=c[0],x=c[1],y,E=t,w=0,A=a;typeof h=="string"&&h===b&&h!=="mixed"&&(y=h,E=e.find(t,[y,y]),w=e.convert(0,y),A=e.find(a,[y,y]));var T=o&&d?[]:void 0,S=[],N=[],D=o&&d?[]:void 0,_=o&&d?[]:void 0,M=[],I=[],V,q,P,L,$;for(q=0;q<x;q++){N[q]=S.length;var z=q+1;for(L=u[q],$=u[q+1],P=L;P<$;P++)V=l[P],S.push(V),M[V]=z,D&&(D[V]=o[P]);for(L=p[q],$=p[q+1],P=L;P<$;P++)if(V=f[P],M[V]===z){if(D){var K=A(D[V],d[P]);E(K,w)?M[V]=null:D[V]=K}}else S.push(V),I[V]=z,_&&(_[V]=d[P]);if(D&&_)for(P=N[q];P<S.length;)V=S[P],M[V]===z?(T[P]=D[V],P++):I[V]===z?(T[P]=_[V],P++):S.splice(P,1)}return N[x]=S.length,i.createSparseMatrix({values:T,index:S,ptr:N,size:[v,x],datatype:h===i._datatype&&b===s._datatype?y:void 0})}}),Ibe="matAlgo10xSids",Pbe=["typed","DenseMatrix"],bp=Y(Ibe,Pbe,r=>{var{typed:e,DenseMatrix:t}=r;return function(i,s,a,o){var l=i._values,u=i._index,c=i._ptr,h=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f=h[0],p=h[1],g,b=a;typeof d=="string"&&(g=d,s=e.convert(s,g),b=e.find(a,[g,g]));for(var v=[],x=[],y=[],E=0;E<p;E++){for(var w=E+1,A=c[E],T=c[E+1],S=A;S<T;S++){var N=u[S];x[N]=l[S],y[N]=w}for(var D=0;D<f;D++)E===0&&(v[D]=[]),y[D]===w?v[D][E]=o?b(s,x[D]):b(x[D],s):v[D][E]=s}return new t({data:v,size:[f,p],datatype:g})}});function wp(r,e,t,n){if(!(this instanceof wp))throw new SyntaxError("Constructor must be called with the new operator");this.fn=r,this.count=e,this.min=t,this.max=n,this.message="Wrong number of arguments in function "+r+" ("+e+" provided, "+t+(n!=null?"-"+n:"")+" expected)",this.stack=new Error().stack}wp.prototype=new Error;wp.prototype.constructor=Error;wp.prototype.name="ArgumentsError";wp.prototype.isArgumentsError=!0;var k6="gcd",Rbe=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],GN="number | BigNumber | Fraction | Matrix | Array",kbe="".concat(GN,", ").concat(GN,", ...").concat(GN);function F6(r){return!r.some(e=>Array.isArray(e))}var Fbe=Y(k6,Rbe,r=>{var{typed:e,matrix:t,config:n,round:i,equalScalar:s,zeros:a,BigNumber:o,DenseMatrix:l,concat:u}=r,c=$X({typed:e,config:n,round:i,matrix:t,equalScalar:s,zeros:a,DenseMatrix:l,concat:u}),h=zd({typed:e}),d=BF({typed:e,equalScalar:s}),f=bp({typed:e,DenseMatrix:l}),p=Ar({typed:e,matrix:t,concat:u});return e(k6,{"number, number":g,"BigNumber, BigNumber":b,"Fraction, Fraction":(v,x)=>v.gcd(x)},p({SS:d,DS:h,Ss:f}),{[kbe]:e.referToSelf(v=>(x,y,E)=>{for(var w=v(x,y),A=0;A<E.length;A++)w=v(w,E[A]);return w}),Array:e.referToSelf(v=>x=>{if(x.length===1&&Array.isArray(x[0])&&F6(x[0]))return v(...x[0]);if(F6(x))return v(...x);throw new wp("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(v=>x=>v(x.toArray()))});function g(v,x){if(!tt(v)||!tt(x))throw new Error("Parameters in function gcd must be integer numbers");for(var y;x!==0;)y=c(v,x),v=x,x=y;return v<0?-v:v}function b(v,x){if(!v.isInt()||!x.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var y=new o(0);!x.isZero();){var E=c(v,x);v=x,x=E}return v.lt(y)?v.neg():v}}),Obe="matAlgo06xS0S0",Bbe=["typed","equalScalar"],s2=Y(Obe,Bbe,r=>{var{typed:e,equalScalar:t}=r;return function(i,s,a){var o=i._values,l=i._size,u=i._datatype||i._data===void 0?i._datatype:i.getDataType(),c=s._values,h=s._size,d=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(l.length!==h.length)throw new Mt(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");var f=l[0],p=l[1],g,b=t,v=0,x=a;typeof u=="string"&&u===d&&u!=="mixed"&&(g=u,b=e.find(t,[g,g]),v=e.convert(0,g),x=e.find(a,[g,g]));for(var y=o&&c?[]:void 0,E=[],w=[],A=y?[]:void 0,T=[],S=[],N=0;N<p;N++){w[N]=E.length;var D=N+1;if(r6(i,N,T,A,S,D,E,x),r6(s,N,T,A,S,D,E,x),A)for(var _=w[N];_<E.length;){var M=E[_];if(S[M]===D){var I=A[M];b(I,v)?E.splice(_,1):(y.push(I),_++)}else E.splice(_,1)}else for(var V=w[N];V<E.length;){var q=E[V];S[q]!==D?E.splice(V,1):V++}}return w[p]=E.length,i.createSparseMatrix({values:y,index:E,ptr:w,size:[f,p],datatype:u===i._datatype&&d===s._datatype?g:void 0})}}),O6="lcm",Lbe=["typed","matrix","equalScalar","concat"],$be=Y(O6,Lbe,r=>{var{typed:e,matrix:t,equalScalar:n,concat:i}=r,s=Zo({typed:e,equalScalar:n}),a=s2({typed:e,equalScalar:n}),o=Fi({typed:e,equalScalar:n}),l=Ar({typed:e,matrix:t,concat:i}),u="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(u,", ").concat(u,", ...").concat(u)]=e.referToSelf(d=>(f,p,g)=>{for(var b=d(f,p),v=0;v<g.length;v++)b=d(b,g[v]);return b}),e(O6,{"number, number":nX,"BigNumber, BigNumber":h,"Fraction, Fraction":(d,f)=>d.lcm(f)},l({SS:a,DS:s,Ss:o}),c);function h(d,f){if(!d.isInt()||!f.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(d.isZero())return d;if(f.isZero())return f;for(var p=d.times(f);!f.isZero();){var g=f;f=d.mod(g),d=g}return p.div(d).abs()}});function LF(r,e,t,n){return function(i){if(i>0||t.predictable){if(i<=0)return NaN;var s=i.toString(16),a=s.substring(0,15);return r*(s.length-a.length)+e(+("0x"+a))}return n(i.toNumber())}}var B6="log10",Vbe=["typed","config","Complex"],Ube=fT(16),zbe=Y(B6,Vbe,r=>{var{typed:e,config:t,Complex:n}=r;function i(a){return a.log().div(Math.LN10)}function s(a){return i(new n(a,0))}return e(B6,{number:function(o){return o>=0||t.predictable?fT(o):s(o)},bigint:LF(Ube,fT,t,s),Complex:i,BigNumber:function(o){return!o.isNegative()||t.predictable?o.log():s(o.toNumber())},"Array | Matrix":e.referToSelf(a=>o=>_t(o,a))})}),L6="log2",jbe=["typed","config","Complex"],qbe=Y(L6,jbe,r=>{var{typed:e,config:t,Complex:n}=r;function i(a){return s(new n(a,0))}return e(L6,{number:function(o){return o>=0||t.predictable?SP(o):i(o)},bigint:LF(4,SP,t,i),Complex:s,BigNumber:function(o){return!o.isNegative()||t.predictable?o.log(2):i(o.toNumber())},"Array | Matrix":e.referToSelf(a=>o=>_t(o,a))});function s(a){var o=Math.sqrt(a.re*a.re+a.im*a.im);return new n(Math.log2?Math.log2(o):Math.log(o)/Math.LN2,Math.atan2(a.im,a.re)/Math.LN2)}}),Hbe="multiplyScalar",Gbe=["typed"],Wbe=Y(Hbe,Gbe,r=>{var{typed:e}=r;return e("multiplyScalar",{"number, number":QK,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"bigint, bigint":function(n,i){return n*i},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(t,n)=>n.multiply(t),"Unit, number | Fraction | BigNumber | Complex | Unit":(t,n)=>t.multiply(n)})}),$6="multiply",Kbe=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Xbe=Y($6,Kbe,r=>{var{typed:e,matrix:t,addScalar:n,multiplyScalar:i,equalScalar:s,dot:a}=r,o=Fi({typed:e,equalScalar:s}),l=vo({typed:e});function u(w,A){switch(w.length){case 1:switch(A.length){case 1:if(w[0]!==A[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(w[0]!==A[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+w[0]+") must match Matrix rows ("+A[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+A.length+" dimensions)")}break;case 2:switch(A.length){case 1:if(w[1]!==A[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+w[1]+") must match Vector length ("+A[0]+")");break;case 2:if(w[1]!==A[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+w[1]+") must match Matrix B rows ("+A[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+A.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+w.length+" dimensions)")}}function c(w,A,T){if(T===0)throw new Error("Cannot multiply two empty vectors");return a(w,A)}function h(w,A){if(A.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(w,A)}function d(w,A){var T=w._data,S=w._size,N=w._datatype||w.getDataType(),D=A._data,_=A._size,M=A._datatype||A.getDataType(),I=S[0],V=_[1],q,P=n,L=i;N&&M&&N===M&&typeof N=="string"&&N!=="mixed"&&(q=N,P=e.find(n,[q,q]),L=e.find(i,[q,q]));for(var $=[],z=0;z<V;z++){for(var K=L(T[0],D[0][z]),re=1;re<I;re++)K=P(K,L(T[re],D[re][z]));$[z]=K}return w.createDenseMatrix({data:$,size:[V],datatype:N===w._datatype&&M===A._datatype?q:void 0})}var f=e("_multiplyMatrixVector",{"DenseMatrix, any":g,"SparseMatrix, any":x}),p=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":b,"DenseMatrix, SparseMatrix":v,"SparseMatrix, DenseMatrix":y,"SparseMatrix, SparseMatrix":E});function g(w,A){var T=w._data,S=w._size,N=w._datatype||w.getDataType(),D=A._data,_=A._datatype||A.getDataType(),M=S[0],I=S[1],V,q=n,P=i;N&&_&&N===_&&typeof N=="string"&&N!=="mixed"&&(V=N,q=e.find(n,[V,V]),P=e.find(i,[V,V]));for(var L=[],$=0;$<M;$++){for(var z=T[$],K=P(z[0],D[0]),re=1;re<I;re++)K=q(K,P(z[re],D[re]));L[$]=K}return w.createDenseMatrix({data:L,size:[M],datatype:N===w._datatype&&_===A._datatype?V:void 0})}function b(w,A){var T=w._data,S=w._size,N=w._datatype||w.getDataType(),D=A._data,_=A._size,M=A._datatype||A.getDataType(),I=S[0],V=S[1],q=_[1],P,L=n,$=i;N&&M&&N===M&&typeof N=="string"&&N!=="mixed"&&N!=="mixed"&&(P=N,L=e.find(n,[P,P]),$=e.find(i,[P,P]));for(var z=[],K=0;K<I;K++){var re=T[K];z[K]=[];for(var Q=0;Q<q;Q++){for(var O=$(re[0],D[0][Q]),te=1;te<V;te++)O=L(O,$(re[te],D[te][Q]));z[K][Q]=O}}return w.createDenseMatrix({data:z,size:[I,q],datatype:N===w._datatype&&M===A._datatype?P:void 0})}function v(w,A){var T=w._data,S=w._size,N=w._datatype||w.getDataType(),D=A._values,_=A._index,M=A._ptr,I=A._size,V=A._datatype||A._data===void 0?A._datatype:A.getDataType();if(!D)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var q=S[0],P=I[1],L,$=n,z=i,K=s,re=0;N&&V&&N===V&&typeof N=="string"&&N!=="mixed"&&(L=N,$=e.find(n,[L,L]),z=e.find(i,[L,L]),K=e.find(s,[L,L]),re=e.convert(0,L));for(var Q=[],O=[],te=[],W=A.createSparseMatrix({values:Q,index:O,ptr:te,size:[q,P],datatype:N===w._datatype&&V===A._datatype?L:void 0}),de=0;de<P;de++){te[de]=O.length;var fe=M[de],ne=M[de+1];if(ne>fe)for(var X=0,se=0;se<q;se++){for(var me=se+1,ue=void 0,be=fe;be<ne;be++){var ye=_[be];X!==me?(ue=z(T[se][ye],D[be]),X=me):ue=$(ue,z(T[se][ye],D[be]))}X===me&&!K(ue,re)&&(O.push(se),Q.push(ue))}}return te[P]=O.length,W}function x(w,A){var T=w._values,S=w._index,N=w._ptr,D=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!T)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var _=A._data,M=A._datatype||A.getDataType(),I=w._size[0],V=A._size[0],q=[],P=[],L=[],$,z=n,K=i,re=s,Q=0;D&&M&&D===M&&typeof D=="string"&&D!=="mixed"&&($=D,z=e.find(n,[$,$]),K=e.find(i,[$,$]),re=e.find(s,[$,$]),Q=e.convert(0,$));var O=[],te=[];L[0]=0;for(var W=0;W<V;W++){var de=_[W];if(!re(de,Q))for(var fe=N[W],ne=N[W+1],X=fe;X<ne;X++){var se=S[X];te[se]?O[se]=z(O[se],K(de,T[X])):(te[se]=!0,P.push(se),O[se]=K(de,T[X]))}}for(var me=P.length,ue=0;ue<me;ue++){var be=P[ue];q[ue]=O[be]}return L[1]=P.length,w.createSparseMatrix({values:q,index:P,ptr:L,size:[I,1],datatype:D===w._datatype&&M===A._datatype?$:void 0})}function y(w,A){var T=w._values,S=w._index,N=w._ptr,D=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!T)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var _=A._data,M=A._datatype||A.getDataType(),I=w._size[0],V=A._size[0],q=A._size[1],P,L=n,$=i,z=s,K=0;D&&M&&D===M&&typeof D=="string"&&D!=="mixed"&&(P=D,L=e.find(n,[P,P]),$=e.find(i,[P,P]),z=e.find(s,[P,P]),K=e.convert(0,P));for(var re=[],Q=[],O=[],te=w.createSparseMatrix({values:re,index:Q,ptr:O,size:[I,q],datatype:D===w._datatype&&M===A._datatype?P:void 0}),W=[],de=[],fe=0;fe<q;fe++){O[fe]=Q.length;for(var ne=fe+1,X=0;X<V;X++){var se=_[X][fe];if(!z(se,K))for(var me=N[X],ue=N[X+1],be=me;be<ue;be++){var ye=S[be];de[ye]!==ne?(de[ye]=ne,Q.push(ye),W[ye]=$(se,T[be])):W[ye]=L(W[ye],$(se,T[be]))}}for(var Ie=O[fe],Ue=Q.length,We=Ie;We<Ue;We++){var Be=Q[We];re[We]=W[Be]}}return O[q]=Q.length,te}function E(w,A){var T=w._values,S=w._index,N=w._ptr,D=w._datatype||w._data===void 0?w._datatype:w.getDataType(),_=A._values,M=A._index,I=A._ptr,V=A._datatype||A._data===void 0?A._datatype:A.getDataType(),q=w._size[0],P=A._size[1],L=T&&_,$,z=n,K=i;D&&V&&D===V&&typeof D=="string"&&D!=="mixed"&&($=D,z=e.find(n,[$,$]),K=e.find(i,[$,$]));for(var re=L?[]:void 0,Q=[],O=[],te=w.createSparseMatrix({values:re,index:Q,ptr:O,size:[q,P],datatype:D===w._datatype&&V===A._datatype?$:void 0}),W=L?[]:void 0,de=[],fe,ne,X,se,me,ue,be,ye,Ie=0;Ie<P;Ie++){O[Ie]=Q.length;var Ue=Ie+1;for(me=I[Ie],ue=I[Ie+1],se=me;se<ue;se++)if(ye=M[se],L)for(ne=N[ye],X=N[ye+1],fe=ne;fe<X;fe++)be=S[fe],de[be]!==Ue?(de[be]=Ue,Q.push(be),W[be]=K(_[se],T[fe])):W[be]=z(W[be],K(_[se],T[fe]));else for(ne=N[ye],X=N[ye+1],fe=ne;fe<X;fe++)be=S[fe],de[be]!==Ue&&(de[be]=Ue,Q.push(be));if(L)for(var We=O[Ie],Be=Q.length,$e=We;$e<Be;$e++){var He=Q[$e];re[$e]=W[He]}}return O[P]=Q.length,te}return e($6,i,{"Array, Array":e.referTo("Matrix, Matrix",w=>(A,T)=>{u(vt(A),vt(T));var S=w(t(A),t(T));return ot(S)?S.valueOf():S}),"Matrix, Matrix":function(A,T){var S=A.size(),N=T.size();return u(S,N),S.length===1?N.length===1?c(A,T,S[0]):h(A,T):N.length===1?f(A,T):p(A,T)},"Matrix, Array":e.referTo("Matrix,Matrix",w=>(A,T)=>w(A,t(T))),"Array, Matrix":e.referToSelf(w=>(A,T)=>w(t(A,T.storage()),T)),"SparseMatrix, any":function(A,T){return o(A,T,i,!1)},"DenseMatrix, any":function(A,T){return l(A,T,i,!1)},"any, SparseMatrix":function(A,T){return o(T,A,i,!0)},"any, DenseMatrix":function(A,T){return l(T,A,i,!0)},"Array, any":function(A,T){return l(t(A),T,i,!1).valueOf()},"any, Array":function(A,T){return l(t(T),A,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(w=>(A,T,S)=>{for(var N=w(A,T),D=0;D<S.length;D++)N=w(N,S[D]);return N})})}),V6="nthRoot",Ybe=["typed","matrix","equalScalar","BigNumber","concat"],Qbe=Y(V6,Ybe,r=>{var{typed:e,matrix:t,equalScalar:n,BigNumber:i,concat:s}=r,a=zd({typed:e}),o=Zo({typed:e,equalScalar:n}),l=s2({typed:e,equalScalar:n}),u=Fi({typed:e,equalScalar:n}),c=Ar({typed:e,matrix:t,concat:s});function h(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(V6,{number:s6,"number, number":s6,BigNumber:f=>d(f,new i(2)),"BigNumber, BigNumber":d,Complex:h,"Complex, number":h,Array:e.referTo("DenseMatrix,number",f=>p=>f(t(p),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",f=>p=>f(p,2)),SparseMatrix:e.referTo("SparseMatrix,number",f=>p=>f(p,2)),"SparseMatrix, SparseMatrix":e.referToSelf(f=>(p,g)=>{if(g.density()===1)return l(p,g,f);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(f=>(p,g)=>{if(g.density()===1)return a(p,g,f,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",f=>(p,g)=>f(t(p),g)),"number | BigNumber, SparseMatrix":e.referToSelf(f=>(p,g)=>{if(g.density()===1)return u(g,p,f,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:o,Ss:u,sS:!1}));function d(f,p){var g=i.precision,b=i.clone({precision:g+2}),v=new i(0),x=new b(1),y=p.isNegative();if(y&&(p=p.neg()),p.isZero())throw new Error("Root must be non-zero");if(f.isNegative()&&!p.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(f.isZero())return y?new b(1/0):0;if(!f.isFinite())return y?v:f;var E=f.abs().pow(x.div(p));return E=f.isNeg()?E.neg():E,new i((y?x.div(E):E).toPrecision(g))}}),U6="sign",Jbe=["typed","BigNumber","Fraction","complex"],Zbe=Y(U6,Jbe,r=>{var{typed:e,BigNumber:t,complex:n,Fraction:i}=r;return e(U6,{number:TP,Complex:function(a){return a.im===0?n(TP(a.re)):a.sign()},BigNumber:function(a){return new t(a.cmp(0))},bigint:function(a){return a>0n?1n:a<0n?-1n:0n},Fraction:function(a){return a.n===0n?new i(0):new i(a.s)},"Array | Matrix":e.referToSelf(s=>a=>_t(a,s,!0)),Unit:e.referToSelf(s=>a=>{if(!a._isDerived()&&a.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(s,a.valueType())(a.value)})})}),e1e="sqrt",t1e=["config","typed","Complex"],r1e=Y(e1e,t1e,r=>{var{config:e,typed:t,Complex:n}=r;return t("sqrt",{number:i,Complex:function(a){return a.sqrt()},BigNumber:function(a){return!a.isNegative()||e.predictable?a.sqrt():i(a.toNumber())},Unit:function(a){return a.pow(.5)}});function i(s){return isNaN(s)?NaN:s>=0||e.predictable?Math.sqrt(s):new n(s,0).sqrt()}}),z6="square",n1e=["typed"],i1e=Y(z6,n1e,r=>{var{typed:e}=r;return e(z6,{number:iX,Complex:function(n){return n.mul(n)},BigNumber:function(n){return n.times(n)},bigint:function(n){return n*n},Fraction:function(n){return n.mul(n)},Unit:function(n){return n.pow(2)}})}),j6="subtract",s1e=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],a1e=Y(j6,s1e,r=>{var{typed:e,matrix:t,equalScalar:n,subtractScalar:i,unaryMinus:s,DenseMatrix:a,concat:o}=r,l=zd({typed:e}),u=is({typed:e}),c=i2({typed:e,equalScalar:n}),h=bp({typed:e,DenseMatrix:a}),d=Kn({typed:e,DenseMatrix:a}),f=Ar({typed:e,matrix:t,concat:o});return e(j6,{"any, any":i},f({elop:i,SS:c,DS:l,SD:u,Ss:d,sS:h}))}),q6="xgcd",o1e=["typed","config","matrix","BigNumber"],l1e=Y(q6,o1e,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e(q6,{"number, number":function(o,l){var u=sX(o,l);return t.matrix==="Array"?u:n(u)},"BigNumber, BigNumber":s});function s(a,o){var l,u,c,h=new i(0),d=new i(1),f=h,p=d,g=d,b=h;if(!a.isInt()||!o.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!o.isZero();)u=a.div(o).floor(),c=a.mod(o),l=f,f=p.minus(u.times(f)),p=l,l=g,g=b.minus(u.times(g)),b=l,a=o,o=c;var v;return a.lt(h)?v=[a.neg(),p.neg(),b.neg()]:v=[a,a.isZero()?0:p,b],t.matrix==="Array"?v:n(v)}}),H6="invmod",u1e=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],c1e=Y(H6,u1e,r=>{var{typed:e,config:t,BigNumber:n,xgcd:i,equal:s,smaller:a,mod:o,add:l,isInteger:u}=r;return e(H6,{"number, number":c,"BigNumber, BigNumber":c});function c(h,d){if(!u(h)||!u(d))throw new Error("Parameters in function invmod must be integer numbers");if(h=o(h,d),s(d,0))throw new Error("Divisor must be non zero");var f=i(h,d);f=f.valueOf();var[p,g]=f;return s(p,n(1))?(g=o(g,d),a(g,n(0))&&(g=l(g,d)),g):NaN}}),h1e="matAlgo09xS0Sf",d1e=["typed","equalScalar"],VX=Y(h1e,d1e,r=>{var{typed:e,equalScalar:t}=r;return function(i,s,a){var o=i._values,l=i._index,u=i._ptr,c=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,f=s._index,p=s._ptr,g=s._size,b=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==g.length)throw new Mt(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");var v=c[0],x=c[1],y,E=t,w=0,A=a;typeof h=="string"&&h===b&&h!=="mixed"&&(y=h,E=e.find(t,[y,y]),w=e.convert(0,y),A=e.find(a,[y,y]));var T=o&&d?[]:void 0,S=[],N=[],D=T?[]:void 0,_=[],M,I,V,q,P;for(I=0;I<x;I++){N[I]=S.length;var L=I+1;if(D)for(q=p[I],P=p[I+1],V=q;V<P;V++)M=f[V],_[M]=L,D[M]=d[V];for(q=u[I],P=u[I+1],V=q;V<P;V++)if(M=l[V],D){var $=_[M]===L?D[M]:w,z=A(o[V],$);E(z,w)||(S.push(M),T.push(z))}else S.push(M)}return N[x]=S.length,i.createSparseMatrix({values:T,index:S,ptr:N,size:[v,x],datatype:h===i._datatype&&b===s._datatype?y:void 0})}}),G6="dotMultiply",f1e=["typed","matrix","equalScalar","multiplyScalar","concat"],m1e=Y(G6,f1e,r=>{var{typed:e,matrix:t,equalScalar:n,multiplyScalar:i,concat:s}=r,a=Zo({typed:e,equalScalar:n}),o=VX({typed:e,equalScalar:n}),l=Fi({typed:e,equalScalar:n}),u=Ar({typed:e,matrix:t,concat:s});return e(G6,u({elop:i,SS:o,DS:a,Ss:l}))});function p1e(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);if(r.isZero()||e.eq(-1)||r.eq(e))return r;if(e.isZero()||r.eq(-1))return e;if(!r.isFinite()||!e.isFinite()){if(!r.isFinite()&&!e.isFinite())return r.isNegative()===e.isNegative()?r:new t(0);if(!r.isFinite())return e.isNegative()?r:r.isNegative()?new t(0):e;if(!e.isFinite())return r.isNegative()?e:e.isNegative()?new t(0):r}return $F(r,e,function(n,i){return n&i})}function k1(r){if(r.isFinite()&&!r.isInteger())throw new Error("Integer expected in function bitNot");var e=r.constructor,t=e.precision;e.config({precision:1e9});var n=r.plus(new e(1));return n.s=-n.s||null,e.config({precision:t}),n}function g1e(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);var n=new t(-1);return r.isZero()||e.eq(n)||r.eq(e)?e:e.isZero()||r.eq(n)?r:!r.isFinite()||!e.isFinite()?!r.isFinite()&&!r.isNegative()&&e.isNegative()||r.isNegative()&&!e.isNegative()&&!e.isFinite()?n:r.isNegative()&&e.isNegative()?r.isFinite()?r:e:r.isFinite()?e:r:$F(r,e,function(i,s){return i|s})}function $F(r,e,t){var n=r.constructor,i,s,a=+(r.s<0),o=+(e.s<0);if(a){i=vA(k1(r));for(var l=0;l<i.length;++l)i[l]^=1}else i=vA(r);if(o){s=vA(k1(e));for(var u=0;u<s.length;++u)s[u]^=1}else s=vA(e);var c,h,d;i.length<=s.length?(c=i,h=s,d=a):(c=s,h=i,d=o);var f=c.length,p=h.length,g=t(a,o)^1,b=new n(g^1),v=new n(1),x=new n(2),y=n.precision;for(n.config({precision:1e9});f>0;)t(c[--f],h[--p])===g&&(b=b.plus(v)),v=v.times(x);for(;p>0;)t(d,h[--p])===g&&(b=b.plus(v)),v=v.times(x);return n.config({precision:y}),g===0&&(b.s=-b.s),b}function vA(r){for(var e=r.d,t=e[0]+"",n=1;n<e.length;++n){for(var i=e[n]+"",s=7-i.length;s--;)i="0"+i;t+=i}for(var a=t.length;t.charAt(a)==="0";)a--;var o=r.e,l=t.slice(0,a+1||1),u=l.length;if(o>0)if(++o>u)for(o-=u;o--;)l+="0";else o<u&&(l=l.slice(0,o)+"."+l.slice(o));for(var c=[0],h=0;h<l.length;){for(var d=c.length;d--;)c[d]*=10;c[0]+=parseInt(l.charAt(h++));for(var f=0;f<c.length;++f)c[f]>1&&((c[f+1]===null||c[f+1]===void 0)&&(c[f+1]=0),c[f+1]+=c[f]>>1,c[f]&=1)}return c.reverse()}function v1e(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);if(r.isZero())return e;if(e.isZero())return r;if(r.eq(e))return new t(0);var n=new t(-1);return r.eq(n)?k1(e):e.eq(n)?k1(r):!r.isFinite()||!e.isFinite()?!r.isFinite()&&!e.isFinite()?n:new t(r.isNegative()===e.isNegative()?1/0:-1/0):$F(r,e,function(i,s){return i^s})}function y1e(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var t=r.constructor;return r.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):r.isZero()||e.isZero()?r:!r.isFinite()&&!e.isFinite()?new t(NaN):e.lt(55)?r.times(Math.pow(2,e.toNumber())+""):r.times(new t(2).pow(e))}function b1e(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var t=r.constructor;return r.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):r.isZero()||e.isZero()?r:e.isFinite()?e.lt(55)?r.div(Math.pow(2,e.toNumber())+"").floor():r.div(new t(2).pow(e)).floor():r.isNegative()?new t(-1):r.isFinite()?new t(0):new t(NaN)}var W6="bitAnd",w1e=["typed","matrix","equalScalar","concat"],UX=Y(W6,w1e,r=>{var{typed:e,matrix:t,equalScalar:n,concat:i}=r,s=Zo({typed:e,equalScalar:n}),a=s2({typed:e,equalScalar:n}),o=Fi({typed:e,equalScalar:n}),l=Ar({typed:e,matrix:t,concat:i});return e(W6,{"number, number":oX,"BigNumber, BigNumber":p1e,"bigint, bigint":(u,c)=>u&c},l({SS:a,DS:s,Ss:o}))}),K6="bitNot",x1e=["typed"],_1e=Y(K6,x1e,r=>{var{typed:e}=r;return e(K6,{number:lX,BigNumber:k1,bigint:t=>~t,"Array | Matrix":e.referToSelf(t=>n=>_t(n,t))})}),X6="bitOr",A1e=["typed","matrix","equalScalar","DenseMatrix","concat"],zX=Y(X6,A1e,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:s}=r,a=zd({typed:e}),o=BF({typed:e,equalScalar:n}),l=bp({typed:e,DenseMatrix:i}),u=Ar({typed:e,matrix:t,concat:s});return e(X6,{"number, number":uX,"BigNumber, BigNumber":g1e,"bigint, bigint":(c,h)=>c|h},u({SS:o,DS:a,Ss:l}))}),E1e="matAlgo07xSSf",S1e=["typed","SparseMatrix"],ru=Y(E1e,S1e,r=>{var{typed:e,SparseMatrix:t}=r;return function(s,a,o){var l=s._size,u=s._datatype||s._data===void 0?s._datatype:s.getDataType(),c=a._size,h=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(l.length!==c.length)throw new Mt(l.length,c.length);if(l[0]!==c[0]||l[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+c+")");var d=l[0],f=l[1],p,g=0,b=o;typeof u=="string"&&u===h&&u!=="mixed"&&(p=u,g=e.convert(0,p),b=e.find(o,[p,p]));for(var v=[],x=[],y=new Array(f+1).fill(0),E=[],w=[],A=[],T=[],S=0;S<f;S++){var N=S+1,D=0;n(s,S,A,E,N),n(a,S,T,w,N);for(var _=0;_<d;_++){var M=A[_]===N?E[_]:g,I=T[_]===N?w[_]:g,V=b(M,I);V!==0&&V!==!1&&(x.push(_),v.push(V),D++)}y[S+1]=y[S]+D}return new t({values:v,index:x,ptr:y,size:[d,f],datatype:u===s._datatype&&h===a._datatype?p:void 0})};function n(i,s,a,o,l){for(var u=i._values,c=i._index,h=i._ptr,d=h[s],f=h[s+1];d<f;d++){var p=c[d];a[p]=l,o[p]=u[d]}}}),Y6="bitXor",T1e=["typed","matrix","DenseMatrix","concat","SparseMatrix"],C1e=Y(Y6,T1e,r=>{var{typed:e,matrix:t,DenseMatrix:n,concat:i,SparseMatrix:s}=r,a=is({typed:e}),o=ru({typed:e,SparseMatrix:s}),l=Kn({typed:e,DenseMatrix:n}),u=Ar({typed:e,matrix:t,concat:i});return e(Y6,{"number, number":cX,"BigNumber, BigNumber":v1e,"bigint, bigint":(c,h)=>c^h},u({SS:o,DS:a,Ss:l}))}),Q6="arg",N1e=["typed"],D1e=Y(Q6,N1e,r=>{var{typed:e}=r;return e(Q6,{number:function(n){return Math.atan2(0,n)},BigNumber:function(n){return n.constructor.atan2(0,n)},Complex:function(n){return n.arg()},"Array | Matrix":e.referToSelf(t=>n=>_t(n,t))})}),J6="conj",M1e=["typed"],I1e=Y(J6,M1e,r=>{var{typed:e}=r;return e(J6,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.conjugate(),Unit:e.referToSelf(t=>n=>new n.constructor(t(n.toNumeric()),n.formatUnits())),"Array | Matrix":e.referToSelf(t=>n=>_t(n,t))})}),Z6="im",P1e=["typed"],R1e=Y(Z6,P1e,r=>{var{typed:e}=r;return e(Z6,{number:()=>0,"BigNumber | Fraction":t=>t.mul(0),Complex:t=>t.im,"Array | Matrix":e.referToSelf(t=>n=>_t(n,t))})}),e$="re",k1e=["typed"],F1e=Y(e$,k1e,r=>{var{typed:e}=r;return e(e$,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.re,"Array | Matrix":e.referToSelf(t=>n=>_t(n,t))})}),t$="not",O1e=["typed"],B1e=Y(t$,O1e,r=>{var{typed:e}=r;return e(t$,{"null | undefined":()=>!0,number:pX,Complex:function(n){return n.re===0&&n.im===0},BigNumber:function(n){return n.isZero()||n.isNaN()},bigint:t=>!t,Unit:e.referToSelf(t=>n=>e.find(t,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(t=>n=>_t(n,t))})}),r$="nullish",L1e=["typed","matrix","size","flatten","deepEqual"],jX=Y(r$,L1e,r=>{var{typed:e,matrix:t,size:n,flatten:i,deepEqual:s}=r,a=is({typed:e}),o=vo({typed:e}),l=LX({typed:e});return e(r$,{"number|bigint|Complex|BigNumber|Fraction|Unit|string|boolean|SparseMatrix, any":(u,c)=>u,"null, any":(u,c)=>c,"undefined, any":(u,c)=>c,"SparseMatrix, Array | Matrix":(u,c)=>{var h=n(u),d=n(c);if(s(h,d))return u;throw new Mt(h,d)},"DenseMatrix, DenseMatrix":e.referToSelf(u=>(c,h)=>l(c,h,u)),"DenseMatrix, SparseMatrix":e.referToSelf(u=>(c,h)=>a(c,h,u,!1)),"DenseMatrix, Array":e.referToSelf(u=>(c,h)=>l(c,t(h),u)),"DenseMatrix, any":e.referToSelf(u=>(c,h)=>o(c,h,u,!1)),"Array, Array":e.referToSelf(u=>(c,h)=>l(t(c),t(h),u).valueOf()),"Array, DenseMatrix":e.referToSelf(u=>(c,h)=>l(t(c),h,u)),"Array, SparseMatrix":e.referToSelf(u=>(c,h)=>a(t(c),h,u,!1)),"Array, any":e.referToSelf(u=>(c,h)=>o(t(c),h,u,!1).valueOf())})}),n$="or",$1e=["typed","matrix","equalScalar","DenseMatrix","concat"],qX=Y(n$,$1e,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:s}=r,a=is({typed:e}),o=i2({typed:e,equalScalar:n}),l=Kn({typed:e,DenseMatrix:i}),u=Ar({typed:e,matrix:t,concat:s});return e(n$,{"number, number":CP,"Complex, Complex":function(h,d){return h.re!==0||h.im!==0||d.re!==0||d.im!==0},"BigNumber, BigNumber":function(h,d){return!h.isZero()&&!h.isNaN()||!d.isZero()&&!d.isNaN()},"bigint, bigint":CP,"Unit, Unit":e.referToSelf(c=>(h,d)=>c(h.value||0,d.value||0))},u({SS:o,DS:a,Ss:l}))}),i$="xor",V1e=["typed","matrix","DenseMatrix","concat","SparseMatrix"],U1e=Y(i$,V1e,r=>{var{typed:e,matrix:t,DenseMatrix:n,concat:i,SparseMatrix:s}=r,a=is({typed:e}),o=ru({typed:e,SparseMatrix:s}),l=Kn({typed:e,DenseMatrix:n}),u=Ar({typed:e,matrix:t,concat:i});return e(i$,{"number, number":NP,"Complex, Complex":function(h,d){return(h.re!==0||h.im!==0)!=(d.re!==0||d.im!==0)},"bigint, bigint":NP,"BigNumber, BigNumber":function(h,d){return(!h.isZero()&&!h.isNaN())!=(!d.isZero()&&!d.isNaN())},"Unit, Unit":e.referToSelf(c=>(h,d)=>c(h.value||0,d.value||0))},u({SS:o,DS:a,Ss:l}))}),s$="concat",z1e=["typed","matrix","isInteger"],HX=Y(s$,z1e,r=>{var{typed:e,matrix:t,isInteger:n}=r;return e(s$,{"...Array | Matrix | number | BigNumber":function(s){var a,o=s.length,l=-1,u,c=!1,h=[];for(a=0;a<o;a++){var d=s[a];if(ot(d)&&(c=!0),it(d)||xt(d)){if(a!==o-1)throw new Error("Dimension must be specified as last argument");if(u=l,l=d.valueOf(),!n(l))throw new TypeError("Integer number expected for dimension");if(l<0||a>0&&l>u)throw new Qo(l,u+1)}else{var f=gt(d).valueOf(),p=vt(f);if(h[a]=f,u=l,l=p.length-1,a>0&&l!==u)throw new Mt(u+1,l+1)}}if(h.length===0)throw new SyntaxError("At least one matrix expected");for(var g=h.shift();h.length;)g=qK(g,h.shift(),l);return c?t(g):g},"...string":function(s){return s.join("")}})}),a$="column",j1e=["typed","Index","matrix","range"],GX=Y(a$,j1e,r=>{var{typed:e,Index:t,matrix:n,range:i}=r;return e(a$,{"Matrix, number":s,"Array, number":function(o,l){return s(n(gt(o)),l).valueOf()}});function s(a,o){if(a.size().length!==2)throw new Error("Only two dimensional matrix is supported");xr(o,a.size()[1]);var l=i(0,a.size()[0]),u=new t(l,[o]),c=a.subset(u);return ot(c)?c:n([[c]])}}),o$="count",q1e=["typed","size","prod"],H1e=Y(o$,q1e,r=>{var{typed:e,size:t,prod:n}=r;return e(o$,{string:function(s){return s.length},"Matrix | Array":function(s){return n(t(s))}})}),l$="cross",G1e=["typed","matrix","subtract","multiply"],W1e=Y(l$,G1e,r=>{var{typed:e,matrix:t,subtract:n,multiply:i}=r;return e(l$,{"Matrix, Matrix":function(o,l){return t(s(o.toArray(),l.toArray()))},"Matrix, Array":function(o,l){return t(s(o.toArray(),l))},"Array, Matrix":function(o,l){return t(s(o,l.toArray()))},"Array, Array":s});function s(a,o){var l=Math.max(vt(a).length,vt(o).length);a=lT(a),o=lT(o);var u=vt(a),c=vt(o);if(u.length!==1||c.length!==1||u[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+u.join(", ")+"], B = ["+c.join(", ")+"])");var h=[n(i(a[1],o[2]),i(a[2],o[1])),n(i(a[2],o[0]),i(a[0],o[2])),n(i(a[0],o[1]),i(a[1],o[0]))];return l>1?[h]:h}}),u$="diag",K1e=["typed","matrix","DenseMatrix","SparseMatrix"],X1e=Y(u$,K1e,r=>{var{typed:e,matrix:t,DenseMatrix:n,SparseMatrix:i}=r;return e(u$,{Array:function(u){return s(u,0,vt(u),null)},"Array, number":function(u,c){return s(u,c,vt(u),null)},"Array, BigNumber":function(u,c){return s(u,c.toNumber(),vt(u),null)},"Array, string":function(u,c){return s(u,0,vt(u),c)},"Array, number, string":function(u,c,h){return s(u,c,vt(u),h)},"Array, BigNumber, string":function(u,c,h){return s(u,c.toNumber(),vt(u),h)},Matrix:function(u){return s(u,0,u.size(),u.storage())},"Matrix, number":function(u,c){return s(u,c,u.size(),u.storage())},"Matrix, BigNumber":function(u,c){return s(u,c.toNumber(),u.size(),u.storage())},"Matrix, string":function(u,c){return s(u,0,u.size(),c)},"Matrix, number, string":function(u,c,h){return s(u,c,u.size(),h)},"Matrix, BigNumber, string":function(u,c,h){return s(u,c.toNumber(),u.size(),h)}});function s(l,u,c,h){if(!tt(u))throw new TypeError("Second parameter in function diag must be an integer");var d=u>0?u:0,f=u<0?-u:0;switch(c.length){case 1:return a(l,u,h,c[0],f,d);case 2:return o(l,u,h,c,f,d)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function a(l,u,c,h,d,f){var p=[h+d,h+f];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var g=c==="sparse"?i.diagonal(p,l,u):n.diagonal(p,l,u);return c!==null?g:g.valueOf()}function o(l,u,c,h,d,f){if(ot(l)){var p=l.diagonal(u);return c!==null?c!==p.storage()?t(p,c):p:p.valueOf()}for(var g=Math.min(h[0]-d,h[1]-f),b=[],v=0;v<g;v++)b[v]=l[v+d][v+f];return c!==null?t(b):b}}),Y1e="filter",Q1e=["typed"],WX=Y(Y1e,Q1e,r=>{var{typed:e}=r;return e("filter",{"Array, function":c$,"Matrix, function":function(n,i){return n.create(c$(n.valueOf(),i),n.datatype())},"Array, RegExp":J5,"Matrix, RegExp":function(n,i){return n.create(J5(n.valueOf(),i),n.datatype())}})});function c$(r,e){var t=lp(e,r,"filter");return t.isUnary?Q5(r,t.fn):Q5(r,function(n,i,s){return t.fn(n,[i],s)})}var h$="flatten",J1e=["typed"],Z1e=Y(h$,J1e,r=>{var{typed:e}=r;return e(h$,{Array:function(n){return Yt(n)},DenseMatrix:function(n){return n.create(Yt(n.valueOf(),!0),n.datatype())},SparseMatrix:function(n){throw new TypeError("SparseMatrix is not supported by function flatten because it does not support 1D vectors. Convert to a DenseMatrix or Array first. Example: flatten(x.toArray())")}})}),kP="forEach",ewe=["typed"],KX=Y(kP,ewe,r=>{var{typed:e}=r;return e(kP,{"Array, function":twe,"Matrix, function":function(n,i){n.forEach(i)}})});function twe(r,e){var t=lp(e,r,kP);GK(r,t.fn,t.isUnary)}var d$="getMatrixDataType",rwe=["typed"],nwe=Y(d$,rwe,r=>{var{typed:e}=r;return e(d$,{Array:function(n){return r2(n,dr)},Matrix:function(n){return n.getDataType()}})}),f$="identity",iwe=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],swe=Y(f$,iwe,r=>{var{typed:e,config:t,matrix:n,BigNumber:i,DenseMatrix:s,SparseMatrix:a}=r;return e(f$,{"":function(){return t.matrix==="Matrix"?n([]):[]},string:function(c){return n(c)},"number | BigNumber":function(c){return l(c,c,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,h){return l(c,c,h)},"number | BigNumber, number | BigNumber":function(c,h){return l(c,h,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,h,d){return l(c,h,d)},Array:function(c){return o(c)},"Array, string":function(c,h){return o(c,h)},Matrix:function(c){return o(c.valueOf(),c.storage())},"Matrix, string":function(c,h){return o(c.valueOf(),h)}});function o(u,c){switch(u.length){case 0:return c?n(c):[];case 1:return l(u[0],u[0],c);case 2:return l(u[0],u[1],c);default:throw new Error("Vector containing two values expected")}}function l(u,c,h){var d=xt(u)||xt(c)?i:null;if(xt(u)&&(u=u.toNumber()),xt(c)&&(c=c.toNumber()),!tt(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!tt(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var f=d?new i(1):1,p=d?new d(0):0,g=[u,c];if(h){if(h==="sparse")return a.diagonal(g,f,0,p);if(h==="dense")return s.diagonal(g,f,0,p);throw new TypeError('Unknown matrix type "'.concat(h,'"'))}for(var b=I0([],g,p),v=u<c?u:c,x=0;x<v;x++)b[x][x]=f;return b}}),m$="kron",awe=["typed","matrix","multiplyScalar"],owe=Y(m$,awe,r=>{var{typed:e,matrix:t,multiplyScalar:n}=r;return e(m$,{"Matrix, Matrix":function(o,l){return t(s(o.toArray(),l.toArray()))},"Matrix, Array":function(o,l){return t(s(o.toArray(),l))},"Array, Matrix":function(o,l){return t(s(o,l.toArray()))},"Array, Array":s});function i(a,o){return a.flatMap(l=>o.map(u=>n(l,u)))}function s(a,o){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(l<0){var u=vt(a).length,c=vt(o).length;for(l=Math.max(u,c);u++<l;)a=[a];for(;c++<l;)o=[o]}return l===1?i(a,o):a.flatMap(h=>o.map(d=>s(h,d,l-1)))}}),WN="map",lwe=["typed"],XX=Y(WN,lwe,r=>{var{typed:e}=r;return e(WN,{"Array, function":o,"Matrix, function":function(u,c){return u.map(c)},"Array|Matrix, Array|Matrix, ...Array|Matrix|function":(l,u,c)=>t([l,u,...c.slice(0,c.length-1)],c[c.length-1])});function t(l,u){if(typeof u!="function")throw new Error("Last argument must be a callback function");var c=l[0].isMatrix,h=l.map(w=>w.isMatrix?w.size():vt(w)),d=cT(...h),f=l.length,p=c?(w,A)=>w.get(A):hT,g=l.map((w,A)=>{var T=h[A].map(()=>0);return w.isMatrix?w.get(T):hT(w,T)}),b=e.isTypedFunction(u)?a(u,g,d.map(()=>0),l):s(u,f);if(b<2){var v=i(b,u,null);return n(l,v)}var x=c?l.map(w=>w.isMatrix?w.create(Ef(w.toArray(),d),w.datatype()):l[0].create(Ef(w.valueOf(),d))):l.map(w=>w.isMatrix?Ef(w.toArray(),d):Ef(w,d)),y=i(b,u,x),E=(w,A)=>y([w,...x.slice(1).map(T=>p(T,A))],A);return c?x[0].map(E):o(x[0],E)}function n(l,u){var c=l[0],h=l.map(w=>w.isMatrix?w.valueOf():w),d=l.map(w=>w.isMatrix?w.size():vt(w)),f=cT(...d),p=d.map(w=>f.length-w.length),g=f.length-1,b=u.length>1,v=b?[]:null,x=E(h,0);if(c.isMatrix){var y=c.create();return y._data=x,y._size=f,y}else return x;function E(w){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,T=f[A],S=Array(T);if(A<g)for(var N=function(V){v&&(v[A]=V),S[V]=E(w.map((q,P)=>p[P]>A?q:q.length===1?q[0]:q[V]),A+1)},D=0;D<T;D++)N(D);else for(var _=function(V){v&&(v[A]=V),S[V]=u(w.map(q=>q.length===1?q[0]:q[V]),v?v.slice():void 0)},M=0;M<T;M++)_(M);return S}}function i(l,u,c){switch(l){case 0:return h=>u(...h);case 1:return(h,d)=>u(...h,d);case 2:return(h,d)=>u(...h,d,...c)}}function s(l,u){var c=l.toString();if(/arguments/.test(c))return 2;var h=c.match(/\(.*?\)/);return/\.\.\./.test(h)||l.length>u+1?2:l.length===u+1?1:0}function a(l,u,c,h){return e.resolve(l,[...u,c,...h])!==null?2:e.resolve(l,[...u,c])!==null?1:(e.resolve(l,u)!==null,0)}function o(l,u){var c=lp(u,l,WN);return EP(l,c.fn,c.isUnary)}}),p$="diff",uwe=["typed","matrix","subtract","number"],YX=Y(p$,uwe,r=>{var{typed:e,matrix:t,subtract:n,number:i}=r;return e(p$,{"Array | Matrix":function(c){return ot(c)?t(a(c.toArray())):a(c)},"Array | Matrix, number":function(c,h){if(!tt(h))throw new RangeError("Dimension must be a whole number");return ot(c)?t(s(c.toArray(),h)):s(c,h)},"Array, BigNumber":e.referTo("Array,number",u=>(c,h)=>u(c,i(h))),"Matrix, BigNumber":e.referTo("Matrix,number",u=>(c,h)=>u(c,i(h)))});function s(u,c){if(ot(u)&&(u=u.toArray()),!Array.isArray(u))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var h=[];return u.forEach(d=>{h.push(s(d,c-1))}),h}else{if(c===0)return a(u);throw RangeError("Cannot have negative dimension")}}function a(u){for(var c=[],h=u.length,d=1;d<h;d++)c.push(o(u[d-1],u[d]));return c}function o(u,c){ot(u)&&(u=u.toArray()),ot(c)&&(c=c.toArray());var h=Array.isArray(u),d=Array.isArray(c);if(h&&d)return l(u,c);if(!h&&!d)return n(c,u);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function l(u,c){if(u.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var h=[],d=u.length,f=0;f<d;f++)h.push(o(u[f],c[f]));return h}}),cwe="ones",hwe=["typed","config","matrix","BigNumber"],dwe=Y(cwe,hwe,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e("ones",{"":function(){return t.matrix==="Array"?s([]):s([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var h=u.pop();return s(u,h)}else return t.matrix==="Array"?s(u):s(u,"default")},Array:s,Matrix:function(u){var c=u.storage();return s(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return s(u.valueOf(),c)}});function s(l,u){var c=a(l),h=c?new i(1):1;if(o(l),u){var d=n(u);return l.length>0?d.resize(l,h):d}else{var f=[];return l.length>0?I0(f,l,h):f}}function a(l){var u=!1;return l.forEach(function(c,h,d){xt(c)&&(u=!0,d[h]=c.toNumber())}),u}function o(l){l.forEach(function(u){if(typeof u!="number"||!tt(u)||u<0)throw new Error("Parameters in function ones must be positive integers")})}});function VF(){throw new Error('No "bignumber" implementation available')}function QX(){throw new Error('No "fraction" implementation available')}function fwe(){throw new Error('No "matrix" implementation available')}var g$="range",mwe=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],JX=Y(g$,mwe,r=>{var{typed:e,config:t,matrix:n,bignumber:i,smaller:s,smallerEq:a,larger:o,largerEq:l,add:u,isZero:c,isPositive:h}=r;return e(g$,{string:f,"string, boolean":f,number:function(v){throw new TypeError("Too few arguments to function range(): ".concat(v))},boolean:function(v){throw new TypeError("Unexpected type of argument 1 to function range(): ".concat(v,", number|bigint|BigNumber|Fraction"))},"number, number":function(v,x){return d(p(v,x,1,!1))},"number, number, number":function(v,x,y){return d(p(v,x,y,!1))},"number, number, boolean":function(v,x,y){return d(p(v,x,1,y))},"number, number, number, boolean":function(v,x,y,E){return d(p(v,x,y,E))},"bigint, bigint|number":function(v,x){return d(p(v,x,1n,!1))},"number, bigint":function(v,x){return d(p(BigInt(v),x,1n,!1))},"bigint, bigint|number, bigint|number":function(v,x,y){return d(p(v,x,BigInt(y),!1))},"number, bigint, bigint|number":function(v,x,y){return d(p(BigInt(v),x,BigInt(y),!1))},"bigint, bigint|number, boolean":function(v,x,y){return d(p(v,x,1n,y))},"number, bigint, boolean":function(v,x,y){return d(p(BigInt(v),x,1n,y))},"bigint, bigint|number, bigint|number, boolean":function(v,x,y,E){return d(p(v,x,BigInt(y),E))},"number, bigint, bigint|number, boolean":function(v,x,y,E){return d(p(BigInt(v),x,BigInt(y),E))},"BigNumber, BigNumber":function(v,x){var y=v.constructor;return d(p(v,x,new y(1),!1))},"BigNumber, BigNumber, BigNumber":function(v,x,y){return d(p(v,x,y,!1))},"BigNumber, BigNumber, boolean":function(v,x,y){var E=v.constructor;return d(p(v,x,new E(1),y))},"BigNumber, BigNumber, BigNumber, boolean":function(v,x,y,E){return d(p(v,x,y,E))},"Fraction, Fraction":function(v,x){return d(p(v,x,1,!1))},"Fraction, Fraction, Fraction":function(v,x,y){return d(p(v,x,y,!1))},"Fraction, Fraction, boolean":function(v,x,y){return d(p(v,x,1,y))},"Fraction, Fraction, Fraction, boolean":function(v,x,y,E){return d(p(v,x,y,E))},"Unit, Unit, Unit":function(v,x,y){return d(p(v,x,y,!1))},"Unit, Unit, Unit, boolean":function(v,x,y,E){return d(p(v,x,y,E))}});function d(b){return t.matrix==="Matrix"?n?n(b):fwe():b}function f(b,v){var x=g(b);if(!x)throw new SyntaxError('String "'+b+'" is no valid range');return t.number==="BigNumber"?(i===void 0&&VF(),d(p(i(x.start),i(x.end),i(x.step)))):d(p(x.start,x.end,x.step,v))}function p(b,v,x,y){var E=[];if(c(x))throw new Error("Step must be non-zero");for(var w=h(x)?y?a:s:y?l:o,A=b;w(A,v);)E.push(A),A=u(A,x);return E}function g(b){var v=b.split(":"),x=v.map(function(E){return Number(E)}),y=x.some(function(E){return isNaN(E)});if(y)return null;switch(x.length){case 2:return{start:x[0],end:x[1],step:1};case 3:return{start:x[0],end:x[2],step:x[1]};default:return null}}}),v$="reshape",pwe=["typed","isInteger","matrix"],gwe=Y(v$,pwe,r=>{var{typed:e,isInteger:t}=r;return e(v$,{"Matrix, Array":function(i,s){return i.reshape(s,!0)},"Array, Array":function(i,s){return s.forEach(function(a){if(!t(a))throw new TypeError("Invalid size for dimension: "+a)}),RF(i,s)}})}),vwe="resize",ywe=["config","matrix"],bwe=Y(vwe,ywe,r=>{var{config:e,matrix:t}=r;return function(s,a,o){if(arguments.length!==2&&arguments.length!==3)throw new wp("resize",arguments.length,2,3);if(ot(a)&&(a=a.valueOf()),xt(a[0])&&(a=a.map(function(c){return xt(c)?c.toNumber():c})),ot(s))return s.resize(a,o,!0);if(typeof s=="string")return n(s,a,o);var l=Array.isArray(s)?!1:e.matrix!=="Array";if(a.length===0){for(;Array.isArray(s);)s=s[0];return gt(s)}else{Array.isArray(s)||(s=[s]),s=gt(s);var u=I0(s,a,o);return l?t(u):u}};function n(i,s,a){if(a!==void 0){if(typeof a!="string"||a.length!==1)throw new TypeError("Single character expected as defaultValue")}else a=" ";if(s.length!==1)throw new Mt(s.length,1);var o=s[0];if(typeof o!="number"||!tt(o))throw new TypeError("Invalid size, must contain positive integers (size: "+Pt(s)+")");if(i.length>o)return i.substring(0,o);if(i.length<o){for(var l=i,u=0,c=o-i.length;u<c;u++)l+=a;return l}else return i}}),y$="rotate",wwe=["typed","multiply","rotationMatrix"],xwe=Y(y$,wwe,r=>{var{typed:e,multiply:t,rotationMatrix:n}=r;return e(y$,{"Array , number | BigNumber | Complex | Unit":function(a,o){i(a,2);var l=t(n(o),a);return l.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(a,o){return i(a,2),t(n(o),a)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(a,o,l){i(a,3);var u=t(n(o,l),a);return u},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(a,o,l){return i(a,3),t(n(o,l),a)}});function i(s,a){var o=Array.isArray(s)?vt(s):s.size();if(o.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(a));if(o.length===2&&o[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(a));if(o[0]!==a)throw new RangeError("Vector must be of dimensions 1x".concat(a))}}),b$="rotationMatrix",_we=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],Awe=Y(b$,_we,r=>{var{typed:e,config:t,multiplyScalar:n,addScalar:i,unaryMinus:s,norm:a,BigNumber:o,matrix:l,DenseMatrix:u,SparseMatrix:c,cos:h,sin:d}=r;return e(b$,{"":function(){return t.matrix==="Matrix"?l([]):[]},string:function(y){return l(y)},"number | BigNumber | Complex | Unit":function(y){return f(y,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(y,E){return f(y,E)},"number | BigNumber | Complex | Unit, Array":function(y,E){var w=l(E);return p(w),v(y,w,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(y,E){p(E);var w=E.storage()||(t.matrix==="Matrix"?"dense":void 0);return v(y,E,w)},"number | BigNumber | Complex | Unit, Array, string":function(y,E,w){var A=l(E);return p(A),v(y,A,w)},"number | BigNumber | Complex | Unit, Matrix, string":function(y,E,w){return p(E),v(y,E,w)}});function f(x,y){var E=xt(x),w=E?new o(-1):-1,A=h(x),T=d(x),S=[[A,n(w,T)],[T,A]];return b(S,y)}function p(x){var y=x.size();if(y.length<1||y[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function g(x){return x.reduce((y,E)=>n(y,E))}function b(x,y){if(y){if(y==="sparse")return new c(x);if(y==="dense")return new u(x);throw new TypeError('Unknown matrix type "'.concat(y,'"'))}return x}function v(x,y,E){var w=a(y);if(w===0)throw new RangeError("Rotation around zero vector");var A=xt(x)?o:null,T=A?new A(1):1,S=A?new A(-1):-1,N=A?new A(y.get([0])/w):y.get([0])/w,D=A?new A(y.get([1])/w):y.get([1])/w,_=A?new A(y.get([2])/w):y.get([2])/w,M=h(x),I=i(T,s(M)),V=d(x),q=i(M,g([N,N,I])),P=i(g([N,D,I]),g([S,_,V])),L=i(g([N,_,I]),g([D,V])),$=i(g([N,D,I]),g([_,V])),z=i(M,g([D,D,I])),K=i(g([D,_,I]),g([S,N,V])),re=i(g([N,_,I]),g([S,D,V])),Q=i(g([D,_,I]),g([N,V])),O=i(M,g([_,_,I])),te=[[q,P,L],[$,z,K],[re,Q,O]];return b(te,E)}}),w$="row",Ewe=["typed","Index","matrix","range"],ZX=Y(w$,Ewe,r=>{var{typed:e,Index:t,matrix:n,range:i}=r;return e(w$,{"Matrix, number":s,"Array, number":function(o,l){return s(n(gt(o)),l).valueOf()}});function s(a,o){if(a.size().length!==2)throw new Error("Only two dimensional matrix is supported");xr(o,a.size()[0]);var l=i(0,a.size()[1]),u=new t([o],l),c=a.subset(u);return ot(c)?c:n([[c]])}}),x$="size",Swe=["typed"],Twe=Y(x$,Swe,r=>{var{typed:e}=r;return e(x$,{Matrix:t=>t.size(),Array:vt,string:t=>[t.length],"number | Complex | BigNumber | Unit | boolean | null":t=>[]})}),_$="squeeze",Cwe=["typed"],Nwe=Y(_$,Cwe,r=>{var{typed:e}=r;return e(_$,{Array:function(n){return lT(gt(n))},Matrix:function(n){var i=lT(n.toArray());return Array.isArray(i)?n.create(i,n.datatype()):i},any:function(n){return gt(n)}})}),A$="subset",Dwe=["typed","matrix","zeros","add"],eY=Y(A$,Dwe,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r;return e(A$,{"Matrix, Index":function(o,l){return M0(l)?t():(oT(o,l),o.subset(l))},"Array, Index":e.referTo("Matrix, Index",function(a){return function(o,l){var u=a(t(o),l);return l.isScalar()?u:u.valueOf()}}),"Object, Index":Iwe,"string, Index":Mwe,"Matrix, Index, any, any":function(o,l,u,c){return M0(l)?o:(oT(o,l),o.clone().subset(l,s(u,l),c))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(a){return function(o,l,u,c){var h=a(t(o),l,u,c);return h.isMatrix?h.valueOf():h}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(a){return function(o,l,u){return a(t(o),l,u,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(a){return function(o,l,u){return a(o,l,u,void 0)}}),"string, Index, string":E$,"string, Index, string, string":E$,"Object, Index, any":Pwe});function s(a,o){if(typeof a=="string")throw new Error("can't boradcast a string");if(o.isScalar())return a;var l=o.size();if(l.every(u=>u>0))try{return i(a,n(l))}catch{return a}else return a}});function Mwe(r,e){if(!XC(e))throw new TypeError("Index expected");if(M0(e))return"";if(oT(Array.from(r),e),e.size().length!==1)throw new Mt(e.size().length,1);var t=r.length;xr(e.min()[0],t),xr(e.max()[0],t);var n=e.dimension(0),i="";function s(a){i+=r.charAt(a)}return Number.isInteger(n)?s(n):n.forEach(s),i}function E$(r,e,t,n){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(M0(e))return r;if(oT(Array.from(r),e),e.size().length!==1)throw new Mt(e.size().length,1);if(n!==void 0){if(typeof n!="string"||n.length!==1)throw new TypeError("Single character expected as defaultValue")}else n=" ";var i=e.dimension(0),s=Number.isInteger(i)?1:i.size()[0];if(s!==t.length)throw new Mt(i.size()[0],t.length);var a=r.length;xr(e.min()[0]),xr(e.max()[0]);for(var o=[],l=0;l<a;l++)o[l]=r.charAt(l);function u(d,f){o[d]=t.charAt(f[0])}if(Number.isInteger(i)?u(i,[0]):i.forEach(u),o.length>a)for(var c=a-1,h=o.length;c<h;c++)o[c]||(o[c]=n);return o.join("")}function Iwe(r,e){if(!M0(e)){if(e.size().length!==1)throw new Mt(e.size(),1);var t=e.dimension(0);if(typeof t!="string")throw new TypeError("String expected as index to retrieve an object property");return ys(r,t)}}function Pwe(r,e,t){if(M0(e))return r;if(e.size().length!==1)throw new Mt(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");var i=gt(r);return N0(i,n,t),i}var S$="transpose",Rwe=["typed","matrix"],kwe=Y(S$,Rwe,r=>{var{typed:e,matrix:t}=r;return e(S$,{Array:a=>n(t(a)).valueOf(),Matrix:n,any:gt});function n(a){var o=a.size(),l;switch(o.length){case 1:l=a.clone();break;case 2:{var u=o[0],c=o[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+Pt(o)+")");switch(a.storage()){case"dense":l=i(a,u,c);break;case"sparse":l=s(a,u,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+Pt(o)+")")}return l}function i(a,o,l){for(var u=a._data,c=[],h,d=0;d<l;d++){h=c[d]=[];for(var f=0;f<o;f++)h[f]=gt(u[f][d])}return a.createDenseMatrix({data:c,size:[l,o],datatype:a._datatype})}function s(a,o,l){for(var u=a._values,c=a._index,h=a._ptr,d=u?[]:void 0,f=[],p=[],g=[],b=0;b<o;b++)g[b]=0;var v,x,y;for(v=0,x=c.length;v<x;v++)g[c[v]]++;for(var E=0,w=0;w<o;w++)p.push(E),E+=g[w],g[w]=p[w];for(p.push(E),y=0;y<l;y++)for(var A=h[y],T=h[y+1],S=A;S<T;S++){var N=g[c[S]]++;f[N]=y,u&&(d[N]=gt(u[S]))}return a.createSparseMatrix({values:d,index:f,ptr:p,size:[l,o],datatype:a._datatype})}}),T$="ctranspose",Fwe=["typed","transpose","conj"],Owe=Y(T$,Fwe,r=>{var{typed:e,transpose:t,conj:n}=r;return e(T$,{any:function(s){return n(t(s))}})}),C$="zeros",Bwe=["typed","config","matrix","BigNumber"],Lwe=Y(C$,Bwe,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e(C$,{"":function(){return t.matrix==="Array"?s([]):s([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var h=u.pop();return s(u,h)}else return t.matrix==="Array"?s(u):s(u,"default")},Array:s,Matrix:function(u){var c=u.storage();return s(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return s(u.valueOf(),c)}});function s(l,u){var c=a(l),h=c?new i(0):0;if(o(l),u){var d=n(u);return l.length>0?d.resize(l,h):d}else{var f=[];return l.length>0?I0(f,l,h):f}}function a(l){var u=!1;return l.forEach(function(c,h,d){xt(c)&&(u=!0,d[h]=c.toNumber())}),u}function o(l){l.forEach(function(u){if(typeof u!="number"||!tt(u)||u<0)throw new Error("Parameters in function zeros must be positive integers")})}}),N$="fft",$we=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],Vwe=Y(N$,$we,r=>{var{typed:e,matrix:t,addScalar:n,multiplyScalar:i,divideScalar:s,exp:a,tau:o,i:l,dotDivide:u,conj:c,pow:h,ceil:d,log2:f}=r;return e(N$,{Array:p,Matrix:function(y){return y.create(p(y.valueOf()),y.datatype())}});function p(x){var y=vt(x);return y.length===1?v(x,y[0]):g(x.map(E=>p(E,y.slice(1))),0)}function g(x,y){var E=vt(x);if(y!==0)return new Array(E[0]).fill(0).map((A,T)=>g(x[T],y-1));if(E.length===1)return v(x);function w(A){var T=vt(A);return new Array(T[1]).fill(0).map((S,N)=>new Array(T[0]).fill(0).map((D,_)=>A[_][N]))}return w(g(w(x),1))}function b(x){for(var y=x.length,E=a(s(i(-1,i(l,o)),y)),w=[],A=1-y;A<y;A++)w.push(h(E,s(h(A,2),2)));for(var T=h(2,d(f(y+y-1))),S=[...new Array(y).fill(0).map((P,L)=>i(x[L],w[y-1+L])),...new Array(T-y).fill(0)],N=[...new Array(y+y-1).fill(0).map((P,L)=>s(1,w[L])),...new Array(T-(y+y-1)).fill(0)],D=v(S),_=v(N),M=new Array(T).fill(0).map((P,L)=>i(D[L],_[L])),I=u(c(p(c(M))),T),V=[],q=y-1;q<y+y-1;q++)V.push(i(I[q],w[q]));return V}function v(x){var y=x.length;if(y===1)return[x[0]];if(y%2===0){for(var E=[...v(x.filter((S,N)=>N%2===0)),...v(x.filter((S,N)=>N%2===1))],w=0;w<y/2;w++){var A=E[w],T=i(E[w+y/2],a(i(i(o,l),s(-w,y))));E[w]=n(A,T),E[w+y/2]=n(A,i(-1,T))}return E}else return b(x)}}),D$="ifft",Uwe=["typed","fft","dotDivide","conj"],zwe=Y(D$,Uwe,r=>{var{typed:e,fft:t,dotDivide:n,conj:i}=r;return e(D$,{"Array | Matrix":function(a){var o=ot(a)?a.size():vt(a);return n(i(t(i(a))),o.reduce((l,u)=>l*u,1))}})});function F1(r){"@babel/helpers - typeof";return F1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F1(r)}function jwe(r,e){if(F1(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(F1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function qwe(r){var e=jwe(r,"string");return F1(e)=="symbol"?e:e+""}function Rn(r,e,t){return(e=qwe(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function M$(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Hwe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?M$(Object(t),!0).forEach(function(n){Rn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):M$(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Gwe="solveODE",Wwe=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],Kwe=Y(Gwe,Wwe,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:s,max:a,map:o,abs:l,isPositive:u,isNegative:c,larger:h,smaller:d,matrix:f,bignumber:p,unaryMinus:g}=r;function b(S){return function(N,D,_,M){var I=!(D.length===2&&(D.every(A)||D.every(ba)));if(I)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var V=D[0],q=D[1],P=h(q,V),L=M.firstStep;if(L!==void 0&&!u(L))throw new Error('"firstStep" must be positive');var $=M.maxStep;if($!==void 0&&!u($))throw new Error('"maxStep" must be positive');var z=M.minStep;if(z&&c(z))throw new Error('"minStep" must be positive or zero');var K=[V,q,L,z,$].filter(G=>G!==void 0);if(!(K.every(A)||K.every(ba)))throw new Error('Inconsistent type of "t" dependant variables');for(var re=1,Q=M.tol?M.tol:1e-4,O=M.minDelta?M.minDelta:.2,te=M.maxDelta?M.maxDelta:5,W=M.maxIter?M.maxIter:1e4,de=[V,q,..._,$,z].some(xt),[fe,ne,X,se]=de?[p(S.a),p(S.c),p(S.b),p(S.bp)]:[S.a,S.c,S.b,S.bp],me=L?P?L:g(L):s(n(q,V),re),ue=[V],be=[_],ye=n(X,se),Ie=0,Ue=0,We=E(P),Be=w(P);We(ue[Ie],q);){var $e=[];me=Be(ue[Ie],q,me),$e.push(N(ue[Ie],be[Ie]));for(var He=1;He<ne.length;++He)$e.push(N(t(ue[Ie],i(ne[He],me)),t(be[Ie],i(me,fe[He],$e))));var ee=a(l(o(i(ye,$e),G=>ba(G)?G.value:G)));ee<Q&&Q/ee>1/4&&(ue.push(t(ue[Ie],me)),be.push(t(be[Ie],i(me,X,$e))),Ie++);var le=.84*(Q/ee)**(1/5);if(d(le,O)?le=O:h(le,te)&&(le=te),le=de?p(le):le,me=i(me,le),$&&h(l(me),$)?me=P?$:g($):z&&d(l(me),z)&&(me=P?z:g(z)),Ue++,Ue>W)throw new Error("Maximum number of iterations reached, try changing options")}return{t:ue,y:be}}}function v(S,N,D,_){var M=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],I=[null,1/2,3/4,1],V=[2/9,1/3,4/9,0],q=[7/24,1/4,1/3,1/8],P={a:M,c:I,b:V,bp:q};return b(P)(S,N,D,_)}function x(S,N,D,_){var M=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],I=[null,1/5,3/10,4/5,8/9,1,1],V=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],q=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],P={a:M,c:I,b:V,bp:q};return b(P)(S,N,D,_)}function y(S,N,D,_){var M=_.method?_.method:"RK45",I={RK23:v,RK45:x};if(M.toUpperCase()in I){var V=Hwe({},_);return delete V.method,I[M.toUpperCase()](S,N,D,V)}else{var q=Object.keys(I).map(L=>'"'.concat(L,'"')),P="".concat(q.slice(0,-1).join(", ")," and ").concat(q.slice(-1));throw new Error('Unavailable method "'.concat(M,'". Available methods are ').concat(P))}}function E(S){return S?d:h}function w(S){var N=S?h:d;return function(D,_,M){var I=t(D,M);return N(I,_)?n(_,D):M}}function A(S){return xt(S)||it(S)}function T(S,N,D,_){var M=y(S,N.toArray(),D.toArray(),_);return{t:f(M.t),y:f(M.y)}}return e("solveODE",{"function, Array, Array, Object":y,"function, Matrix, Matrix, Object":T,"function, Array, Array":(S,N,D)=>y(S,N,D,{}),"function, Matrix, Matrix":(S,N,D)=>T(S,N,D,{}),"function, Array, number | BigNumber | Unit":(S,N,D)=>{var _=y(S,N,[D],{});return{t:_.t,y:_.y.map(M=>M[0])}},"function, Matrix, number | BigNumber | Unit":(S,N,D)=>{var _=y(S,N.toArray(),[D],{});return{t:f(_.t),y:f(_.y.map(M=>M[0]))}},"function, Array, number | BigNumber | Unit, Object":(S,N,D,_)=>{var M=y(S,N,[D],_);return{t:M.t,y:M.y.map(I=>I[0])}},"function, Matrix, number | BigNumber | Unit, Object":(S,N,D,_)=>{var M=y(S,N.toArray(),[D],_);return{t:f(M.t),y:f(M.y.map(I=>I[0]))}}})}),Xwe="erf",Ywe=["typed"],Qwe=Y(Xwe,Ywe,r=>{var{typed:e}=r;return e("name",{number:function(a){var o=Math.abs(a);return o>=exe?Xh(a):o<=Jwe?Xh(a)*t(o):o<=4?Xh(a)*(1-n(o)):Xh(a)*(1-i(o))},"Array | Matrix":e.referToSelf(s=>a=>_t(a,s))});function t(s){var a=s*s,o=ou[0][4]*a,l=a,u;for(u=0;u<3;u+=1)o=(o+ou[0][u])*a,l=(l+Lp[0][u])*a;return s*(o+ou[0][3])/(l+Lp[0][3])}function n(s){var a=ou[1][8]*s,o=s,l;for(l=0;l<7;l+=1)a=(a+ou[1][l])*s,o=(o+Lp[1][l])*s;var u=(a+ou[1][7])/(o+Lp[1][7]),c=parseInt(s*16)/16,h=(s-c)*(s+c);return Math.exp(-c*c)*Math.exp(-h)*u}function i(s){var a=1/(s*s),o=ou[2][5]*a,l=a,u;for(u=0;u<4;u+=1)o=(o+ou[2][u])*a,l=(l+Lp[2][u])*a;var c=a*(o+ou[2][4])/(l+Lp[2][4]);c=(Zwe-c)/s,a=parseInt(s*16)/16;var h=(s-a)*(s+a);return Math.exp(-a*a)*Math.exp(-h)*c}}),Jwe=.46875,Zwe=.5641895835477563,ou=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],Lp=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],exe=Math.pow(2,53),I$="zeta",txe=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isBounded","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],rxe=Y(I$,txe,r=>{var{typed:e,config:t,multiply:n,pow:i,divide:s,factorial:a,equal:o,smallerEq:l,isBounded:u,isNegative:c,gamma:h,sin:d,subtract:f,add:p,Complex:g,BigNumber:b,pi:v}=r;return e(I$,{number:T=>x(T,S=>S,()=>20),BigNumber:T=>x(T,S=>new b(S),()=>Math.abs(Math.log10(t.relTol))),Complex:y});function x(T,S,N){return o(T,0)?S(-.5):o(T,1)?S(NaN):u(T)?E(T,S,N,D=>D):c(T)?S(NaN):S(1)}function y(T){return T.re===0&&T.im===0?new g(-.5):T.re===1?new g(NaN,NaN):T.re===1/0&&T.im===0?new g(1):T.im===1/0||T.re===-1/0?new g(NaN,NaN):E(T,S=>S,S=>Math.round(1.3*15+.9*Math.abs(S.im)),S=>S.re)}function E(T,S,N,D){var _=N(T);if(D(T)>-(_-1)/2)return A(T,S(_),S);var M=n(i(2,T),i(S(v),f(T,1)));return M=n(M,d(n(s(S(v),2),T))),M=n(M,h(f(1,T))),n(M,E(f(1,T),S,N,D))}function w(T,S){for(var N=T,D=T;l(D,S);D=p(D,1)){var _=s(n(a(p(S,f(D,1))),i(4,D)),n(a(f(S,D)),a(n(2,D))));N=p(N,_)}return n(S,N)}function A(T,S,N){for(var D=s(1,n(w(N(0),S),f(1,i(2,f(1,T))))),_=N(0),M=N(1);l(M,S);M=p(M,1))_=p(_,s(n((-1)**(M-1),w(M,S)),i(M,T)));return n(D,_)}}),P$="mode",nxe=["typed","isNaN","isNumeric"],ixe=Y(P$,nxe,r=>{var{typed:e,isNaN:t,isNumeric:n}=r;return e(P$,{"Array | Matrix":i,"...":function(a){return i(a)}});function i(s){s=Yt(s.valueOf());var a=s.length;if(a===0)throw new Error("Cannot calculate mode of an empty array");for(var o={},l=[],u=0,c=0;c<s.length;c++){var h=s[c];if(n(h)&&t(h))throw new Error("Cannot calculate mode of an array containing NaN values");h in o||(o[h]=0),o[h]++,o[h]===u?l.push(h):o[h]>u&&(u=o[h],l=[h])}return l}});function As(r,e,t){var n;return String(r).includes("Unexpected type")?(n=arguments.length>2?" (type: "+dr(t)+", value: "+JSON.stringify(t)+")":" (type: "+r.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+n)):String(r).includes("complex numbers")?(n=arguments.length>2?" (type: "+dr(t)+", value: "+JSON.stringify(t)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+n)):r}var R$="prod",sxe=["typed","config","multiplyScalar","numeric"],axe=Y(R$,sxe,r=>{var{typed:e,config:t,multiplyScalar:n,numeric:i}=r;return e(R$,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(o,l){throw new Error("prod(A, dim) is not yet supported")},"...":function(o){return s(o)}});function s(a){var o;if(Dd(a,function(l){try{o=o===void 0?l:n(o,l)}catch(u){throw As(u,"prod",l)}}),typeof o=="string"&&(o=i(o,Vd(o,t))),o===void 0)throw new Error("Cannot calculate prod of an empty array");return o}}),k$="format",oxe=["typed"],lxe=Y(k$,oxe,r=>{var{typed:e}=r;return e(k$,{any:Pt,"any, Object | function | number | BigNumber":Pt})}),F$="bin",uxe=["typed","format"],cxe=Y(F$,uxe,r=>{var{typed:e,format:t}=r;return e(F$,{"number | BigNumber":function(i){return t(i,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(i,s){return t(i,{notation:"bin",wordSize:s})}})}),O$="oct",hxe=["typed","format"],dxe=Y(O$,hxe,r=>{var{typed:e,format:t}=r;return e(O$,{"number | BigNumber":function(i){return t(i,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(i,s){return t(i,{notation:"oct",wordSize:s})}})}),B$="hex",fxe=["typed","format"],mxe=Y(B$,fxe,r=>{var{typed:e,format:t}=r;return e(B$,{"number | BigNumber":function(i){return t(i,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(i,s){return t(i,{notation:"hex",wordSize:s})}})}),tY=/\$([\w.]+)/g,L$="print",pxe=["typed"],rY=Y(L$,pxe,r=>{var{typed:e}=r;return e(L$,{"string, Object | Array":$$,"string, Object | Array, number | Object":$$})});function $$(r,e,t){return r.replace(tY,function(n,i){var s=i.split("."),a=e[s.shift()];for(a!==void 0&&a.isMatrix&&(a=a.toArray());s.length&&a!==void 0;){var o=s.shift();a=o?a[o]:a+"."}return a!==void 0?fn(a)?a:Pt(a,t):n})}var V$="to",gxe=["typed","matrix","concat"],vxe=Y(V$,gxe,r=>{var{typed:e,matrix:t,concat:n}=r,i=Ar({typed:e,matrix:t,concat:n});return e(V$,{"Unit, Unit | string":(s,a)=>s.to(a)},i({Ds:!0}))}),U$="toBest",yxe=["typed"],bxe=Y(U$,yxe,r=>{var{typed:e}=r;return e(U$,{Unit:t=>t.toBest(),"Unit, string":(t,n)=>t.toBest(n.split(",")),"Unit, string, Object":(t,n,i)=>t.toBest(n.split(","),i),"Unit, Array":(t,n)=>t.toBest(n),"Unit, Array, Object":(t,n,i)=>t.toBest(n,i)})}),z$="isPrime",wxe=["typed"],xxe=Y(z$,wxe,r=>{var{typed:e}=r;return e(z$,{number:function(n){if(n<=3)return n>1;if(n%2===0||n%3===0)return!1;for(var i=5;i*i<=n;i+=6)if(n%i===0||n%(i+2)===0)return!1;return!0},bigint:function(n){if(n<=3n)return n>1n;if(n%2n===0n||n%3n===0n)return!1;for(var i=5n;i*i<=n;i+=6n)if(n%i===0n||n%(i+2n)===0n)return!1;return!0},BigNumber:function(n){if(n.lte(3))return n.gt(1);if(n.mod(2).eq(0)||n.mod(3).eq(0))return!1;if(n.lt(Math.pow(2,32))){for(var i=n.toNumber(),s=5;s*s<=i;s+=6)if(i%s===0||i%(s+2)===0)return!1;return!0}function a(x,y,E){for(var w=1;!y.eq(0);)y.mod(2).eq(0)?(y=y.div(2),x=x.mul(x).mod(E)):(y=y.sub(1),w=x.mul(w).mod(E));return w}var o=n.constructor.clone({precision:n.toFixed(0).length*2});n=new o(n);for(var l=0,u=n.sub(1);u.mod(2).eq(0);)u=u.div(2),l+=1;var c=null;if(n.lt("3317044064679887385961981"))c=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(x=>x<n);else{var h=Math.min(n.toNumber()-2,Math.floor(2*Math.pow(n.toFixed(0).length*Math.log(10),2)));c=[];for(var d=2;d<=h;d+=1)c.push(h)}for(var f=0;f<c.length;f+=1){var p=c[f],g=a(n.sub(n).add(p),u,n);if(!g.eq(1)){for(var b=0,v=g;!v.eq(n.sub(1));b+=1,v=v.mul(v).mod(n))if(b===l-1)return!1}}return!0},"Array | Matrix":e.referToSelf(t=>n=>_t(n,t))})}),_xe="numeric",Axe=["number","?bignumber","?fraction"],Exe=Y(_xe,Axe,r=>{var{number:e,bignumber:t,fraction:n}=r,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},s={number:a=>e(a),BigNumber:t?a=>t(a):VF,bigint:a=>BigInt(a),Fraction:n?a=>n(a):QX};return function(o){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",u=arguments.length>2?arguments[2]:void 0;if(u!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=dr(o);if(!(c in i))throw new TypeError("Cannot convert "+o+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(l in s))throw new TypeError("Cannot convert "+o+' to type "'+l+'"; valid output types are '+Object.keys(s).join(", "));return l===c?o:s[l](o)}}),j$="divideScalar",Sxe=["typed","numeric"],Txe=Y(j$,Sxe,r=>{var{typed:e,numeric:t}=r;return e(j$,{"number, number":function(i,s){return i/s},"Complex, Complex":function(i,s){return i.div(s)},"BigNumber, BigNumber":function(i,s){return i.div(s)},"bigint, bigint":function(i,s){return i/s},"Fraction, Fraction":function(i,s){return i.div(s)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,i)=>n.divide(i),"number | Fraction | Complex | BigNumber, Unit":(n,i)=>i.divideInto(n)})}),q$="pow",Cxe=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],Nxe=Y(q$,Cxe,r=>{var{typed:e,config:t,identity:n,multiply:i,matrix:s,inv:a,number:o,fraction:l,Complex:u}=r;return e(q$,{"number, number":c,"Complex, Complex":function(p,g){return p.pow(g)},"BigNumber, BigNumber":function(p,g){return g.isInteger()||p>=0||t.predictable?p.pow(g):new u(p.toNumber(),0).pow(g.toNumber(),0)},"bigint, bigint":(f,p)=>f**p,"Fraction, Fraction":function(p,g){var b=p.pow(g);if(b!=null)return b;if(t.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(p.valueOf(),g.valueOf())},"Array, number":h,"Array, BigNumber":function(p,g){return h(p,g.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(p,g){return d(p,g.toNumber())},"Unit, number | BigNumber":function(p,g){return p.pow(g)}});function c(f,p){if(t.predictable&&!tt(p)&&f<0)try{var g=l(p),b=o(g);if((p===b||Math.abs((p-b)/p)<1e-14)&&g.d%2n===1n)return(g.n%2n===0n?1:-1)*Math.pow(-f,p)}catch{}return t.predictable&&(f<-1&&p===1/0||f>-1&&f<0&&p===-1/0)?NaN:tt(p)||f>=0||t.predictable?aX(f,p):f*f<1&&p===1/0||f*f>1&&p===-1/0?0:new u(f,0).pow(p,0)}function h(f,p){if(!tt(p))throw new TypeError("For A^b, b must be an integer (value is "+p+")");var g=vt(f);if(g.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+g.length+" dimensions)");if(g[0]!==g[1])throw new Error("For A^b, A must be square (size is "+g[0]+"x"+g[1]+")");if(p<0)try{return h(a(f),-p)}catch(x){throw x.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+p+")"):x}for(var b=n(g[0]).valueOf(),v=f;p>=1;)(p&1)===1&&(b=i(v,b)),p>>=1,v=i(v,v);return b}function d(f,p){return s(h(f.valueOf(),p))}}),$p="Number of decimals in function round must be an integer",H$="round",Dxe=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],Mxe=Y(H$,Dxe,r=>{var{typed:e,config:t,matrix:n,equalScalar:i,zeros:s,BigNumber:a,DenseMatrix:o}=r,l=Fi({typed:e,equalScalar:i}),u=Kn({typed:e,DenseMatrix:o}),c=vo({typed:e});function h(d){return Math.abs(i_(d).exponent)}return e(H$,{number:function(f){var p=$y(f,h(t.relTol)),g=fi(f,p,t.relTol,t.absTol)?p:f;return $y(g)},"number, number":function(f,p){var g=h(t.relTol);if(p>=g)return $y(f,p);var b=$y(f,g),v=fi(f,b,t.relTol,t.absTol)?b:f;return $y(v,p)},"number, BigNumber":function(f,p){if(!p.isInteger())throw new TypeError($p);return new a(f).toDecimalPlaces(p.toNumber())},Complex:function(f){return f.round()},"Complex, number":function(f,p){if(p%1)throw new TypeError($p);return f.round(p)},"Complex, BigNumber":function(f,p){if(!p.isInteger())throw new TypeError($p);var g=p.toNumber();return f.round(g)},BigNumber:function(f){var p=new a(f).toDecimalPlaces(h(t.relTol)),g=po(f,p,t.relTol,t.absTol)?p:f;return g.toDecimalPlaces(0)},"BigNumber, BigNumber":function(f,p){if(!p.isInteger())throw new TypeError($p);var g=h(t.relTol);if(p>=g)return f.toDecimalPlaces(p.toNumber());var b=f.toDecimalPlaces(g),v=po(f,b,t.relTol,t.absTol)?b:f;return v.toDecimalPlaces(p.toNumber())},bigint:d=>d,"bigint, number":(d,f)=>d,"bigint, BigNumber":(d,f)=>d,Fraction:function(f){return f.round()},"Fraction, number":function(f,p){if(p%1)throw new TypeError($p);return f.round(p)},"Fraction, BigNumber":function(f,p){if(!p.isInteger())throw new TypeError($p);return f.round(p.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(f,p,g){var b=f.toNumeric(g);return g.multiply(d(b,p))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(f,p,g)=>d(f,p.toNumber(),g)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(f,p,g)=>_t(f,b=>d(b,p,g),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(f,p)=>d(f,0,p)),"Array | Matrix":e.referToSelf(d=>f=>_t(f,d,!0)),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(f,p)=>l(f,p,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(f,p)=>c(f,p,d,!1)),"Array, number | BigNumber":e.referToSelf(d=>(f,p)=>c(n(f),p,d,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(d=>(f,p)=>i(f,0)?s(p.size(),p.storage()):u(p,f,d,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(d=>(f,p)=>i(f,0)?s(p.size(),p.storage()):c(p,f,d,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(d=>(f,p)=>c(n(p),f,d,!0).valueOf())})}),G$="log",Ixe=["config","typed","typeOf","divideScalar","Complex"],Pxe=Math.log(16),Rxe=Y(G$,Ixe,r=>{var{typed:e,typeOf:t,config:n,divideScalar:i,Complex:s}=r;function a(l){return l.log()}function o(l){return a(new s(l,0))}return e(G$,{number:function(u){return u>=0||n.predictable?i6(u):o(u)},bigint:LF(Pxe,i6,n,o),Complex:a,BigNumber:function(u){return!u.isNegative()||n.predictable?u.ln():o(u.toNumber())},"any, any":e.referToSelf(l=>(u,c)=>{if(t(u)==="Fraction"&&t(c)==="Fraction"){var h=u.log(c);if(h!==null)return h}return i(l(u),l(c))})})}),W$="log1p",kxe=["typed","config","divideScalar","log","Complex"],Fxe=Y(W$,kxe,r=>{var{typed:e,config:t,divideScalar:n,log:i,Complex:s}=r;return e(W$,{number:function(l){return l>=-1||t.predictable?Ege(l):a(new s(l,0))},Complex:a,BigNumber:function(l){var u=l.plus(1);return!u.isNegative()||t.predictable?u.ln():a(new s(l.toNumber(),0))},"Array | Matrix":e.referToSelf(o=>l=>_t(l,o)),"any, any":e.referToSelf(o=>(l,u)=>n(o(l),i(u)))});function a(o){var l=o.re+1;return new s(Math.log(Math.sqrt(l*l+o.im*o.im)),Math.atan2(o.im,l))}}),K$="nthRoots",Oxe=["config","typed","divideScalar","Complex"],Bxe=Y(K$,Oxe,r=>{var{typed:e,config:t,divideScalar:n,Complex:i}=r,s=[function(l){return new i(l,0)},function(l){return new i(0,l)},function(l){return new i(-l,0)},function(l){return new i(0,-l)}];function a(o,l){if(l<0)throw new Error("Root must be greater than zero");if(l===0)throw new Error("Root must be non-zero");if(l%1!==0)throw new Error("Root must be an integer");if(o===0||o.abs()===0)return[new i(0,0)];var u=typeof o=="number",c;(u||o.re===0||o.im===0)&&(u?c=2*+(o<0):o.im===0?c=2*+(o.re<0):c=2*+(o.im<0)+1);for(var h=o.arg(),d=o.abs(),f=[],p=Math.pow(d,1/l),g=0;g<l;g++){var b=(c+4*g)/l;if(b===Math.round(b)){f.push(s[b%4](p));continue}f.push(new i({r:p,phi:(h+2*Math.PI*g)/l}))}return f}return e(K$,{Complex:function(l){return a(l,2)},"Complex, number":a})}),X$="dotPow",Lxe=["typed","equalScalar","matrix","pow","DenseMatrix","concat","SparseMatrix"],$xe=Y(X$,Lxe,r=>{var{typed:e,equalScalar:t,matrix:n,pow:i,DenseMatrix:s,concat:a,SparseMatrix:o}=r,l=is({typed:e}),u=ru({typed:e,SparseMatrix:o}),c=Fi({typed:e,equalScalar:t}),h=Kn({typed:e,DenseMatrix:s}),d=Ar({typed:e,matrix:n,concat:a}),f={};for(var p in i.signatures)Object.prototype.hasOwnProperty.call(i.signatures,p)&&!p.includes("Matrix")&&!p.includes("Array")&&(f[p]=i.signatures[p]);var g=e(f);return e(X$,d({elop:g,SS:u,DS:l,Ss:c,sS:h}))}),Y$="dotDivide",Vxe=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat","SparseMatrix"],Uxe=Y(Y$,Vxe,r=>{var{typed:e,matrix:t,equalScalar:n,divideScalar:i,DenseMatrix:s,concat:a,SparseMatrix:o}=r,l=Zo({typed:e,equalScalar:n}),u=is({typed:e}),c=ru({typed:e,SparseMatrix:o}),h=Fi({typed:e,equalScalar:n}),d=Kn({typed:e,DenseMatrix:s}),f=Ar({typed:e,matrix:t,concat:a});return e(Y$,f({elop:i,SS:c,DS:u,SD:l,Ss:h,sS:d}))});function s_(r){var{DenseMatrix:e}=r;return function(n,i,s){var a=n.size();if(a.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+Pt(a)+")");var o=a[0],l=a[1];if(o!==l)throw new RangeError("Matrix must be square (size: "+Pt(a)+")");var u=[];if(ot(i)){var c=i.size(),h=i._data;if(c.length===1){if(c[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var d=0;d<o;d++)u[d]=[h[d]];return new e({data:u,size:[o,1],datatype:i._datatype})}if(c.length===2){if(c[0]!==o||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(rT(i)){if(s){u=[];for(var f=0;f<o;f++)u[f]=[h[f][0]];return new e({data:u,size:[o,1],datatype:i._datatype})}return i}if(Af(i)){for(var p=0;p<o;p++)u[p]=[0];for(var g=i._values,b=i._index,v=i._ptr,x=v[1],y=v[0];y<x;y++){var E=b[y];u[E][0]=g[y]}return new e({data:u,size:[o,1],datatype:i._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(cr(i)){var w=vt(i);if(w.length===1){if(w[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var A=0;A<o;A++)u[A]=[i[A]];return new e({data:u,size:[o,1]})}if(w.length===2){if(w[0]!==o||w[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var T=0;T<o;T++)u[T]=[i[T][0]];return new e({data:u,size:[o,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var Q$="lsolve",zxe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],jxe=Y(Q$,zxe,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:s,equalScalar:a,DenseMatrix:o}=r,l=s_({DenseMatrix:o});return e(Q$,{"SparseMatrix, Array | Matrix":function(d,f){return c(d,f)},"DenseMatrix, Array | Matrix":function(d,f){return u(d,f)},"Array, Array | Matrix":function(d,f){var p=t(d),g=u(p,f);return g.valueOf()}});function u(h,d){d=l(h,d,!0);for(var f=d._data,p=h._size[0],g=h._size[1],b=[],v=h._data,x=0;x<g;x++){var y=f[x][0]||0,E=void 0;if(a(y,0))E=0;else{var w=v[x][x];if(a(w,0))throw new Error("Linear system cannot be solved since matrix is singular");E=n(y,w);for(var A=x+1;A<p;A++)f[A]=[s(f[A][0]||0,i(E,v[A][x]))]}b[x]=[E]}return new o({data:b,size:[p,1]})}function c(h,d){d=l(h,d,!0);for(var f=d._data,p=h._size[0],g=h._size[1],b=h._values,v=h._index,x=h._ptr,y=[],E=0;E<g;E++){var w=f[E][0]||0;if(a(w,0))y[E]=[0];else{for(var A=0,T=[],S=[],N=x[E],D=x[E+1],_=N;_<D;_++){var M=v[_];M===E?A=b[_]:M>E&&(T.push(b[_]),S.push(M))}if(a(A,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var I=n(w,A),V=0,q=S.length;V<q;V++){var P=S[V];f[P]=[s(f[P][0]||0,i(I,T[V]))]}y[E]=[I]}}return new o({data:y,size:[p,1]})}}),J$="usolve",qxe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Hxe=Y(J$,qxe,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:s,equalScalar:a,DenseMatrix:o}=r,l=s_({DenseMatrix:o});return e(J$,{"SparseMatrix, Array | Matrix":function(d,f){return c(d,f)},"DenseMatrix, Array | Matrix":function(d,f){return u(d,f)},"Array, Array | Matrix":function(d,f){var p=t(d),g=u(p,f);return g.valueOf()}});function u(h,d){d=l(h,d,!0);for(var f=d._data,p=h._size[0],g=h._size[1],b=[],v=h._data,x=g-1;x>=0;x--){var y=f[x][0]||0,E=void 0;if(a(y,0))E=0;else{var w=v[x][x];if(a(w,0))throw new Error("Linear system cannot be solved since matrix is singular");E=n(y,w);for(var A=x-1;A>=0;A--)f[A]=[s(f[A][0]||0,i(E,v[A][x]))]}b[x]=[E]}return new o({data:b,size:[p,1]})}function c(h,d){d=l(h,d,!0);for(var f=d._data,p=h._size[0],g=h._size[1],b=h._values,v=h._index,x=h._ptr,y=[],E=g-1;E>=0;E--){var w=f[E][0]||0;if(a(w,0))y[E]=[0];else{for(var A=0,T=[],S=[],N=x[E],D=x[E+1],_=D-1;_>=N;_--){var M=v[_];M===E?A=b[_]:M<E&&(T.push(b[_]),S.push(M))}if(a(A,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var I=n(w,A),V=0,q=S.length;V<q;V++){var P=S[V];f[P]=[s(f[P][0],i(I,T[V]))]}y[E]=[I]}}return new o({data:y,size:[p,1]})}}),Z$="lsolveAll",Gxe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Wxe=Y(Z$,Gxe,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:s,equalScalar:a,DenseMatrix:o}=r,l=s_({DenseMatrix:o});return e(Z$,{"SparseMatrix, Array | Matrix":function(d,f){return c(d,f)},"DenseMatrix, Array | Matrix":function(d,f){return u(d,f)},"Array, Array | Matrix":function(d,f){var p=t(d),g=u(p,f);return g.map(b=>b.valueOf())}});function u(h,d){for(var f=[l(h,d,!0)._data.map(S=>S[0])],p=h._data,g=h._size[0],b=h._size[1],v=0;v<b;v++)for(var x=f.length,y=0;y<x;y++){var E=f[y];if(a(p[v][v],0))if(a(E[v],0)){if(y===0){var A=[...E];A[v]=1;for(var T=v+1;T<b;T++)A[T]=s(A[T],p[T][v]);f.push(A)}}else{if(y===0)return[];f.splice(y,1),y-=1,x-=1}else{E[v]=n(E[v],p[v][v]);for(var w=v+1;w<b;w++)E[w]=s(E[w],i(E[v],p[w][v]))}}return f.map(S=>new o({data:S.map(N=>[N]),size:[g,1]}))}function c(h,d){for(var f=[l(h,d,!0)._data.map(re=>re[0])],p=h._size[0],g=h._size[1],b=h._values,v=h._index,x=h._ptr,y=0;y<g;y++)for(var E=f.length,w=0;w<E;w++){for(var A=f[w],T=[],S=[],N=x[y],D=x[y+1],_=0,M=N;M<D;M++){var I=v[M];I===y?_=b[M]:I>y&&(T.push(b[M]),S.push(I))}if(a(_,0))if(a(A[y],0)){if(w===0){var L=[...A];L[y]=1;for(var $=0,z=S.length;$<z;$++){var K=S[$];L[K]=s(L[K],T[$])}f.push(L)}}else{if(w===0)return[];f.splice(w,1),w-=1,E-=1}else{A[y]=n(A[y],_);for(var V=0,q=S.length;V<q;V++){var P=S[V];A[P]=s(A[P],i(A[y],T[V]))}}}return f.map(re=>new o({data:re.map(Q=>[Q]),size:[p,1]}))}}),eV="usolveAll",Kxe=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],Xxe=Y(eV,Kxe,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:s,equalScalar:a,DenseMatrix:o}=r,l=s_({DenseMatrix:o});return e(eV,{"SparseMatrix, Array | Matrix":function(d,f){return c(d,f)},"DenseMatrix, Array | Matrix":function(d,f){return u(d,f)},"Array, Array | Matrix":function(d,f){var p=t(d),g=u(p,f);return g.map(b=>b.valueOf())}});function u(h,d){for(var f=[l(h,d,!0)._data.map(S=>S[0])],p=h._data,g=h._size[0],b=h._size[1],v=b-1;v>=0;v--)for(var x=f.length,y=0;y<x;y++){var E=f[y];if(a(p[v][v],0))if(a(E[v],0)){if(y===0){var A=[...E];A[v]=1;for(var T=v-1;T>=0;T--)A[T]=s(A[T],p[T][v]);f.push(A)}}else{if(y===0)return[];f.splice(y,1),y-=1,x-=1}else{E[v]=n(E[v],p[v][v]);for(var w=v-1;w>=0;w--)E[w]=s(E[w],i(E[v],p[w][v]))}}return f.map(S=>new o({data:S.map(N=>[N]),size:[g,1]}))}function c(h,d){for(var f=[l(h,d,!0)._data.map(re=>re[0])],p=h._size[0],g=h._size[1],b=h._values,v=h._index,x=h._ptr,y=g-1;y>=0;y--)for(var E=f.length,w=0;w<E;w++){for(var A=f[w],T=[],S=[],N=x[y],D=x[y+1],_=0,M=D-1;M>=N;M--){var I=v[M];I===y?_=b[M]:I<y&&(T.push(b[M]),S.push(I))}if(a(_,0))if(a(A[y],0)){if(w===0){var L=[...A];L[y]=1;for(var $=0,z=S.length;$<z;$++){var K=S[$];L[K]=s(L[K],T[$])}f.push(L)}}else{if(w===0)return[];f.splice(w,1),w-=1,E-=1}else{A[y]=n(A[y],_);for(var V=0,q=S.length;V<q;V++){var P=S[V];A[P]=s(A[P],i(A[y],T[V]))}}}return f.map(re=>new o({data:re.map(Q=>[Q]),size:[p,1]}))}}),Yxe="matAlgo08xS0Sid",Qxe=["typed","equalScalar"],UF=Y(Yxe,Qxe,r=>{var{typed:e,equalScalar:t}=r;return function(i,s,a){var o=i._values,l=i._index,u=i._ptr,c=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,f=s._index,p=s._ptr,g=s._size,b=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==g.length)throw new Mt(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");if(!o||!d)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var v=c[0],x=c[1],y,E=t,w=0,A=a;typeof h=="string"&&h===b&&h!=="mixed"&&(y=h,E=e.find(t,[y,y]),w=e.convert(0,y),A=e.find(a,[y,y]));for(var T=[],S=[],N=[],D=[],_=[],M,I,V,q,P=0;P<x;P++){N[P]=S.length;var L=P+1;for(I=u[P],V=u[P+1],M=I;M<V;M++)q=l[M],_[q]=L,D[q]=o[M],S.push(q);for(I=p[P],V=p[P+1],M=I;M<V;M++)q=f[M],_[q]===L&&(D[q]=A(D[q],d[M]));for(M=N[P];M<S.length;){q=S[M];var $=D[q];E($,w)?S.splice(M,1):(T.push($),M++)}}return N[x]=S.length,i.createSparseMatrix({values:T,index:S,ptr:N,size:[v,x],datatype:h===i._datatype&&b===s._datatype?y:void 0})}}),zF=Y("useMatrixForArrayScalar",["typed","matrix"],r=>{var{typed:e,matrix:t}=r;return{"Array, number":e.referTo("DenseMatrix, number",n=>(i,s)=>n(t(i),s).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",n=>(i,s)=>n(t(i),s).valueOf()),"number, Array":e.referTo("number, DenseMatrix",n=>(i,s)=>n(i,t(s)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",n=>(i,s)=>n(i,t(s)).valueOf())}}),tV="leftShift",Jxe=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],Zxe=Y(tV,Jxe,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:s,concat:a}=r,o=zd({typed:e}),l=Zo({typed:e,equalScalar:n}),u=UF({typed:e,equalScalar:n}),c=bp({typed:e,DenseMatrix:s}),h=Fi({typed:e,equalScalar:n}),d=vo({typed:e}),f=Ar({typed:e,matrix:t,concat:a}),p=zF({typed:e,matrix:t});return e(tV,{"number, number":hX,"BigNumber, BigNumber":y1e,"bigint, bigint":(g,b)=>g<<b,"SparseMatrix, number | BigNumber":e.referToSelf(g=>(b,v)=>n(v,0)?b.clone():h(b,v,g,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(g=>(b,v)=>n(v,0)?b.clone():d(b,v,g,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(g=>(b,v)=>n(b,0)?i(v.size(),v.storage()):c(v,b,g,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(g=>(b,v)=>n(b,0)?i(v.size(),v.storage()):d(v,b,g,!0))},p,f({SS:u,DS:o,SD:l}))}),rV="rightArithShift",e_e=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],t_e=Y(rV,e_e,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:s,concat:a}=r,o=zd({typed:e}),l=Zo({typed:e,equalScalar:n}),u=UF({typed:e,equalScalar:n}),c=bp({typed:e,DenseMatrix:s}),h=Fi({typed:e,equalScalar:n}),d=vo({typed:e}),f=Ar({typed:e,matrix:t,concat:a}),p=zF({typed:e,matrix:t});return e(rV,{"number, number":dX,"BigNumber, BigNumber":b1e,"bigint, bigint":(g,b)=>g>>b,"SparseMatrix, number | BigNumber":e.referToSelf(g=>(b,v)=>n(v,0)?b.clone():h(b,v,g,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(g=>(b,v)=>n(v,0)?b.clone():d(b,v,g,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(g=>(b,v)=>n(b,0)?i(v.size(),v.storage()):c(v,b,g,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(g=>(b,v)=>n(b,0)?i(v.size(),v.storage()):d(v,b,g,!0))},p,f({SS:u,DS:o,SD:l}))}),nV="rightLogShift",r_e=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],n_e=Y(nV,r_e,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:s,concat:a}=r,o=zd({typed:e}),l=Zo({typed:e,equalScalar:n}),u=UF({typed:e,equalScalar:n}),c=bp({typed:e,DenseMatrix:s}),h=Fi({typed:e,equalScalar:n}),d=vo({typed:e}),f=Ar({typed:e,matrix:t,concat:a}),p=zF({typed:e,matrix:t});return e(nV,{"number, number":fX,"SparseMatrix, number | BigNumber":e.referToSelf(g=>(b,v)=>n(v,0)?b.clone():h(b,v,g,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(g=>(b,v)=>n(v,0)?b.clone():d(b,v,g,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(g=>(b,v)=>n(b,0)?i(v.size(),v.storage()):c(v,b,g,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(g=>(b,v)=>n(b,0)?i(v.size(),v.storage()):d(v,b,g,!0))},p,f({SS:u,DS:o,SD:l}))}),iV="and",i_e=["typed","matrix","equalScalar","zeros","not","concat"],nY=Y(iV,i_e,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,not:s,concat:a}=r,o=Zo({typed:e,equalScalar:n}),l=s2({typed:e,equalScalar:n}),u=Fi({typed:e,equalScalar:n}),c=vo({typed:e}),h=Ar({typed:e,matrix:t,concat:a});return e(iV,{"number, number":DP,"Complex, Complex":function(f,p){return(f.re!==0||f.im!==0)&&(p.re!==0||p.im!==0)},"BigNumber, BigNumber":function(f,p){return!f.isZero()&&!p.isZero()&&!f.isNaN()&&!p.isNaN()},"bigint, bigint":DP,"Unit, Unit":e.referToSelf(d=>(f,p)=>d(f.value||0,p.value||0)),"SparseMatrix, any":e.referToSelf(d=>(f,p)=>s(p)?i(f.size(),f.storage()):u(f,p,d,!1)),"DenseMatrix, any":e.referToSelf(d=>(f,p)=>s(p)?i(f.size(),f.storage()):c(f,p,d,!1)),"any, SparseMatrix":e.referToSelf(d=>(f,p)=>s(f)?i(f.size(),f.storage()):u(p,f,d,!0)),"any, DenseMatrix":e.referToSelf(d=>(f,p)=>s(f)?i(f.size(),f.storage()):c(p,f,d,!0)),"Array, any":e.referToSelf(d=>(f,p)=>d(t(f),p).valueOf()),"any, Array":e.referToSelf(d=>(f,p)=>d(f,t(p)).valueOf())},h({SS:l,DS:o}))}),yT="compare",s_e=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],a_e=Y(yT,s_e,r=>{var{typed:e,config:t,equalScalar:n,matrix:i,BigNumber:s,Fraction:a,DenseMatrix:o,concat:l}=r,u=is({typed:e}),c=i2({typed:e,equalScalar:n}),h=Kn({typed:e,DenseMatrix:o}),d=Ar({typed:e,matrix:i,concat:l}),f=ry({typed:e});return e(yT,o_e({typed:e,config:t}),{"boolean, boolean":function(g,b){return g===b?0:g>b?1:-1},"BigNumber, BigNumber":function(g,b){return po(g,b,t.relTol,t.absTol)?new s(0):new s(g.cmp(b))},"bigint, bigint":function(g,b){return g===b?0n:g>b?1n:-1n},"Fraction, Fraction":function(g,b){return new a(g.compare(b))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,d({SS:c,DS:u,Ss:h}))}),o_e=Y(yT,["typed","config"],r=>{var{typed:e,config:t}=r;return e(yT,{"number, number":function(i,s){return fi(i,s,t.relTol,t.absTol)?0:i>s?1:-1}})}),l_e=function r(e,t){var n=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,i=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,a=/^0x[0-9a-f]+$/i,o=/^0/,l=function(y){return r.insensitive&&(""+y).toLowerCase()||""+y},u=l(e).replace(i,"")||"",c=l(t).replace(i,"")||"",h=u.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=c.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=parseInt(u.match(a),16)||h.length!==1&&u.match(s)&&Date.parse(u),p=parseInt(c.match(a),16)||f&&c.match(s)&&Date.parse(c)||null,g,b;if(p){if(f<p)return-1;if(f>p)return 1}for(var v=0,x=Math.max(h.length,d.length);v<x;v++){if(g=!(h[v]||"").match(o)&&parseFloat(h[v])||h[v]||0,b=!(d[v]||"").match(o)&&parseFloat(d[v])||d[v]||0,isNaN(g)!==isNaN(b))return isNaN(g)?1:-1;if(typeof g!=typeof b&&(g+="",b+=""),g<b)return-1;if(g>b)return 1}return 0};const Vp=WT(l_e);var sV="compareNatural",u_e=["typed","compare"],c_e=Y(sV,u_e,r=>{var{typed:e,compare:t}=r,n=t.signatures["boolean,boolean"];return e(sV,{"any, any":i});function i(l,u){var c=dr(l),h=dr(u),d;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(h==="number"||h==="BigNumber"||h==="Fraction"))return d=t(l,u),d.toString()!=="0"?d>0?1:-1:Vp(c,h);var f=["Array","DenseMatrix","SparseMatrix"];if(f.includes(c)||f.includes(h))return d=s(i,l,u),d!==0?d:Vp(c,h);if(c!==h)return Vp(c,h);if(c==="Complex")return h_e(l,u);if(c==="Unit")return l.equalBase(u)?i(l.value,u.value):a(i,l.formatUnits(),u.formatUnits());if(c==="boolean")return n(l,u);if(c==="string")return Vp(l,u);if(c==="Object")return o(i,l,u);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function s(l,u,c){return Af(u)&&Af(c)?a(l,u.toJSON().values,c.toJSON().values):Af(u)?s(l,u.toArray(),c):Af(c)?s(l,u,c.toArray()):rT(u)?s(l,u.toJSON().data,c):rT(c)?s(l,u,c.toJSON().data):Array.isArray(u)?Array.isArray(c)?a(l,u,c):s(l,u,[c]):s(l,[u],c)}function a(l,u,c){for(var h=0,d=Math.min(u.length,c.length);h<d;h++){var f=l(u[h],c[h]);if(f!==0)return f}return u.length>c.length?1:u.length<c.length?-1:0}function o(l,u,c){var h=Object.keys(u),d=Object.keys(c);h.sort(Vp),d.sort(Vp);var f=a(l,h,d);if(f!==0)return f;for(var p=0;p<h.length;p++){var g=l(u[h[p]],c[d[p]]);if(g!==0)return g}return 0}});function h_e(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0}var aV="compareText",d_e=["typed","matrix","concat"];_P.signature="any, any";var f_e=Y(aV,d_e,r=>{var{typed:e,matrix:t,concat:n}=r,i=Ar({typed:e,matrix:t,concat:n});return e(aV,_P,i({elop:_P,Ds:!0}))}),bT="equal",m_e=["typed","matrix","equalScalar","DenseMatrix","SparseMatrix"],p_e=Y(bT,m_e,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:s,SparseMatrix:a}=r,o=is({typed:e}),l=ru({typed:e,SparseMatrix:a}),u=Kn({typed:e,DenseMatrix:i}),c=Ar({typed:e,matrix:t});return e(bT,g_e({typed:e,equalScalar:n}),c({elop:n,SS:l,DS:o,Ss:u}))}),g_e=Y(bT,["typed","equalScalar"],r=>{var{typed:e,equalScalar:t}=r;return e(bT,{"any, any":function(i,s){return i===null?s===null:s===null?i===null:i===void 0?s===void 0:s===void 0?i===void 0:t(i,s)}})}),oV="equalText",v_e=["typed","compareText","isZero"],y_e=Y(oV,v_e,r=>{var{typed:e,compareText:t,isZero:n}=r;return e(oV,{"any, any":function(s,a){return n(t(s,a))}})}),wT="smaller",b_e=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],w_e=Y(wT,b_e,r=>{var{typed:e,config:t,bignumber:n,matrix:i,DenseMatrix:s,concat:a,SparseMatrix:o}=r,l=is({typed:e}),u=ru({typed:e,SparseMatrix:o}),c=Kn({typed:e,DenseMatrix:s}),h=Ar({typed:e,matrix:i,concat:a}),d=ry({typed:e});function f(p,g){return p.lt(g)&&!po(p,g,t.relTol,t.absTol)}return e(wT,x_e({typed:e,config:t}),{"boolean, boolean":(p,g)=>p<g,"BigNumber, BigNumber":f,"bigint, bigint":(p,g)=>p<g,"Fraction, Fraction":(p,g)=>p.compare(g)===-1,"Fraction, BigNumber":function(g,b){return f(n(g),b)},"BigNumber, Fraction":function(g,b){return f(g,n(b))},"Complex, Complex":function(g,b){throw new TypeError("No ordering relation is defined for complex numbers")}},d,h({SS:u,DS:l,Ss:c}))}),x_e=Y(wT,["typed","config"],r=>{var{typed:e,config:t}=r;return e(wT,{"number, number":function(i,s){return i<s&&!fi(i,s,t.relTol,t.absTol)}})}),xT="smallerEq",__e=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],A_e=Y(xT,__e,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:s,SparseMatrix:a}=r,o=is({typed:e}),l=ru({typed:e,SparseMatrix:a}),u=Kn({typed:e,DenseMatrix:i}),c=Ar({typed:e,matrix:n,concat:s}),h=ry({typed:e});return e(xT,E_e({typed:e,config:t}),{"boolean, boolean":(d,f)=>d<=f,"BigNumber, BigNumber":function(f,p){return f.lte(p)||po(f,p,t.relTol,t.absTol)},"bigint, bigint":(d,f)=>d<=f,"Fraction, Fraction":(d,f)=>d.compare(f)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,c({SS:l,DS:o,Ss:u}))}),E_e=Y(xT,["typed","config"],r=>{var{typed:e,config:t}=r;return e(xT,{"number, number":function(i,s){return i<=s||fi(i,s,t.relTol,t.absTol)}})}),_T="larger",S_e=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],T_e=Y(_T,S_e,r=>{var{typed:e,config:t,bignumber:n,matrix:i,DenseMatrix:s,concat:a,SparseMatrix:o}=r,l=is({typed:e}),u=ru({typed:e,SparseMatrix:o}),c=Kn({typed:e,DenseMatrix:s}),h=Ar({typed:e,matrix:i,concat:a}),d=ry({typed:e});function f(p,g){return p.gt(g)&&!po(p,g,t.relTol,t.absTol)}return e(_T,C_e({typed:e,config:t}),{"boolean, boolean":(p,g)=>p>g,"BigNumber, BigNumber":f,"bigint, bigint":(p,g)=>p>g,"Fraction, Fraction":(p,g)=>p.compare(g)===1,"Fraction, BigNumber":function(g,b){return f(n(g),b)},"BigNumber, Fraction":function(g,b){return f(g,n(b))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},d,h({SS:u,DS:l,Ss:c}))}),C_e=Y(_T,["typed","config"],r=>{var{typed:e,config:t}=r;return e(_T,{"number, number":function(i,s){return i>s&&!fi(i,s,t.relTol,t.absTol)}})}),AT="largerEq",N_e=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],D_e=Y(AT,N_e,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:s,SparseMatrix:a}=r,o=is({typed:e}),l=ru({typed:e,SparseMatrix:a}),u=Kn({typed:e,DenseMatrix:i}),c=Ar({typed:e,matrix:n,concat:s}),h=ry({typed:e});return e(AT,M_e({typed:e,config:t}),{"boolean, boolean":(d,f)=>d>=f,"BigNumber, BigNumber":function(f,p){return f.gte(p)||po(f,p,t.relTol,t.absTol)},"bigint, bigint":function(f,p){return f>=p},"Fraction, Fraction":(d,f)=>d.compare(f)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,c({SS:l,DS:o,Ss:u}))}),M_e=Y(AT,["typed","config"],r=>{var{typed:e,config:t}=r;return e(AT,{"number, number":function(i,s){return i>=s||fi(i,s,t.relTol,t.absTol)}})}),lV="deepEqual",I_e=["typed","equal"],P_e=Y(lV,I_e,r=>{var{typed:e,equal:t}=r;return e(lV,{"any, any":function(s,a){return n(s.valueOf(),a.valueOf())}});function n(i,s){if(Array.isArray(i))if(Array.isArray(s)){var a=i.length;if(a!==s.length)return!1;for(var o=0;o<a;o++)if(!n(i[o],s[o]))return!1;return!0}else return!1;else return Array.isArray(s)?!1:t(i,s)}}),ET="unequal",R_e=["typed","config","equalScalar","matrix","DenseMatrix","concat","SparseMatrix"],k_e=Y(ET,R_e,r=>{var{typed:e,config:t,equalScalar:n,matrix:i,DenseMatrix:s,concat:a,SparseMatrix:o}=r,l=is({typed:e}),u=ru({typed:e,SparseMatrix:o}),c=Kn({typed:e,DenseMatrix:s}),h=Ar({typed:e,matrix:i,concat:a});return e(ET,F_e({typed:e,equalScalar:n}),h({elop:d,SS:u,DS:l,Ss:c}));function d(f,p){return!n(f,p)}}),F_e=Y(ET,["typed","equalScalar"],r=>{var{typed:e,equalScalar:t}=r;return e(ET,{"any, any":function(i,s){return i===null?s!==null:s===null?i!==null:i===void 0?s!==void 0:s===void 0?i!==void 0:!t(i,s)}})}),uV="partitionSelect",O_e=["typed","isNumeric","isNaN","compare"],B_e=Y(uV,O_e,r=>{var{typed:e,isNumeric:t,isNaN:n,compare:i}=r,s=i,a=(u,c)=>-i(u,c);return e(uV,{"Array | Matrix, number":function(c,h){return o(c,h,s)},"Array | Matrix, number, string":function(c,h,d){if(d==="asc")return o(c,h,s);if(d==="desc")return o(c,h,a);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":o});function o(u,c,h){if(!tt(c)||c<0)throw new Error("k must be a non-negative integer");if(ot(u)){var d=u.size();if(d.length>1)throw new Error("Only one dimensional matrices supported");return l(u.valueOf(),c,h)}if(Array.isArray(u))return l(u,c,h)}function l(u,c,h){if(c>=u.length)throw new Error("k out of bounds");for(var d=0;d<u.length;d++)if(t(u[d])&&n(u[d]))return u[d];for(var f=0,p=u.length-1;f<p;){for(var g=f,b=p,v=u[Math.floor(Math.random()*(p-f+1))+f];g<b;)if(h(u[g],v)>=0){var x=u[b];u[b]=u[g],u[g]=x,--b}else++g;h(u[g],v)>0&&--g,c<=g?p=g:f=g+1}return u[c]}}),cV="sort",L_e=["typed","matrix","compare","compareNatural"],$_e=Y(cV,L_e,r=>{var{typed:e,matrix:t,compare:n,compareNatural:i}=r,s=n,a=(c,h)=>-n(c,h);return e(cV,{Array:function(h){return l(h),h.sort(s)},Matrix:function(h){return u(h),t(h.toArray().sort(s),h.storage())},"Array, function":function(h,d){return l(h),h.sort(d)},"Matrix, function":function(h,d){return u(h),t(h.toArray().sort(d),h.storage())},"Array, string":function(h,d){return l(h),h.sort(o(d))},"Matrix, string":function(h,d){return u(h),t(h.toArray().sort(o(d)),h.storage())}});function o(c){if(c==="asc")return s;if(c==="desc")return a;if(c==="natural")return i;throw new Error('String "asc", "desc", or "natural" expected')}function l(c){if(vt(c).length!==1)throw new Error("One dimensional array expected")}function u(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),hV="max",V_e=["typed","config","numeric","larger","isNaN"],iY=Y(hV,V_e,r=>{var{typed:e,config:t,numeric:n,larger:i,isNaN:s}=r;return e(hV,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(u,c){return n2(u,c.valueOf(),a)},"...":function(u){if(Z0(u))throw new TypeError("Scalar values expected in function max");return o(u)}});function a(l,u){try{return i(l,u)?l:u}catch(c){throw As(c,"max",u)}}function o(l){var u;if(Dd(l,function(c){try{(s(c)||u===void 0||i(c,u))&&(u=c)}catch(h){throw As(h,"max",c)}}),u===void 0)throw new Error("Cannot calculate max of an empty array");return typeof u=="string"&&(u=n(u,Vd(u,t))),u}}),dV="min",U_e=["typed","config","numeric","smaller","isNaN"],sY=Y(dV,U_e,r=>{var{typed:e,config:t,numeric:n,smaller:i,isNaN:s}=r;return e(dV,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(u,c){return n2(u,c.valueOf(),a)},"...":function(u){if(Z0(u))throw new TypeError("Scalar values expected in function min");return o(u)}});function a(l,u){try{return i(l,u)?l:u}catch(c){throw As(c,"min",u)}}function o(l){var u;if(Dd(l,function(c){try{(s(c)||u===void 0||i(c,u))&&(u=c)}catch(h){throw As(h,"min",c)}}),u===void 0)throw new Error("Cannot calculate min of an empty array");return typeof u=="string"&&(u=n(u,Vd(u,t))),u}}),z_e="ImmutableDenseMatrix",j_e=["smaller","DenseMatrix"],q_e=Y(z_e,j_e,r=>{var{smaller:e,DenseMatrix:t}=r;function n(i,s){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(s&&!fn(s))throw new Error("Invalid datatype: "+s);if(ot(i)||cr(i)){var a=new t(i,s);this._data=a._data,this._size=a._size,this._datatype=a._datatype,this._min=null,this._max=null}else if(i&&cr(i.data)&&cr(i.size))this._data=i.data,this._size=i.size,this._datatype=i.datatype,this._min=typeof i.min<"u"?i.min:null,this._max=typeof i.max<"u"?i.max:null;else{if(i)throw new TypeError("Unsupported type of data ("+dr(i)+")");this._data=[],this._size=[0],this._datatype=s,this._min=null,this._max=null}}return n.prototype=new t,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(i){switch(arguments.length){case 1:{var s=t.prototype.subset.call(this,i);return ot(s)?new n({data:s._data,size:s._size,datatype:s._datatype}):s}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:gt(this._data),size:gt(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(i){return new n(i)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(this._min===null){var i=null;this.forEach(function(s){(i===null||e(s,i))&&(i=s)}),this._min=i!==null?i:void 0}return this._min},n.prototype.max=function(){if(this._max===null){var i=null;this.forEach(function(s){(i===null||e(i,s))&&(i=s)}),this._max=i!==null?i:void 0}return this._max},n},{isClass:!0}),H_e="Index",G_e=["ImmutableDenseMatrix","getMatrixDataType"],W_e=Y(H_e,G_e,r=>{var{ImmutableDenseMatrix:e,getMatrixDataType:t}=r;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var s=0,a=arguments.length;s<a;s++){var o=s<0||arguments.length<=s?void 0:arguments[s],l=cr(o),u=ot(o),c=typeof o,h=null;if(MF(o))this._dimensions.push(o),this._isScalar=!1;else if(l||u){var d=void 0;this._isScalar=!1,t(o)==="boolean"?(l&&(d=i(fV(o).valueOf())),u&&(d=i(fV(o._data).valueOf())),h=o.valueOf().length):d=i(o.valueOf()),this._dimensions.push(d)}else if(c==="number")this._dimensions.push(o);else if(c==="bigint")this._dimensions.push(Number(o));else if(c==="string")this._dimensions.push(o);else throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");this._sourceSize.push(h)}}n.prototype.type="Index",n.prototype.isIndex=!0;function i(s){for(var a=0,o=s.length;a<o;a++)if(!it(s[a])||!tt(s[a]))throw new TypeError("Index parameters must be positive integer numbers");var l=new e;return l._data=s,l._size=[s.length],l}return n.prototype.clone=function(){var s=new n;return s._dimensions=gt(this._dimensions),s._isScalar=this._isScalar,s._sourceSize=this._sourceSize,s},n.create=function(s){var a=new n;return n.apply(a,s),a},n.prototype.size=function(){for(var s=[],a=0,o=this._dimensions.length;a<o;a++){var l=this._dimensions[a];s[a]=fn(l)||it(l)?1:l.size()[0]}return s},n.prototype.max=function(){for(var s=[],a=0,o=this._dimensions.length;a<o;a++){var l=this._dimensions[a];s[a]=fn(l)||it(l)?l:l.max()}return s},n.prototype.min=function(){for(var s=[],a=0,o=this._dimensions.length;a<o;a++){var l=this._dimensions[a];s[a]=fn(l)||it(l)?l:l.min()}return s},n.prototype.forEach=function(s){for(var a=0,o=this._dimensions.length;a<o;a++)s(this._dimensions[a],a,this)},n.prototype.dimension=function(s){var a;return it(s)&&(a=this._dimensions[s])!==null&&a!==void 0?a:null},n.prototype.isObjectProperty=function(){return this._dimensions.length===1&&fn(this._dimensions[0])},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},n.prototype.isScalar=function(){return this._isScalar},n.prototype.toArray=function(){for(var s=[],a=0,o=this._dimensions.length;a<o;a++){var l=this._dimensions[a];s.push(fn(l)||it(l)?l:l.toArray())}return s},n.prototype.valueOf=n.prototype.toArray,n.prototype.toString=function(){for(var s=[],a=0,o=this._dimensions.length;a<o;a++){var l=this._dimensions[a];fn(l)?s.push(JSON.stringify(l)):s.push(l.toString())}return"["+s.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},n.fromJSON=function(s){return n.create(s.dimensions)},n},{isClass:!0});function fV(r){var e=[];return r.forEach((t,n)=>{t&&e.push(n)}),e}var K_e="FibonacciHeap",X_e=["smaller","larger"],Y_e=Y(K_e,X_e,r=>{var{smaller:e,larger:t}=r,n=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(c,h){var d={key:c,value:h,degree:0};if(this._minimum){var f=this._minimum;d.left=f,d.right=f.right,f.right=d,d.right.left=d,e(c,f.key)&&(this._minimum=d)}else d.left=d,d.right=d,this._minimum=d;return this._size++,d},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var h=this._minimum,d=c.degree,f=c.child;d>0;){var p=f.right;f.left.right=f.right,f.right.left=f.left,f.left=h,f.right=h.right,h.right=f,f.right.left=f,f.parent=null,f=p,d--}return c.left.right=c.right,c.right.left=c.left,c===c.right?h=null:(h=c.right,h=u(h,this._size)),this._size--,this._minimum=h,c},i.prototype.remove=function(c){this._minimum=s(this._minimum,c,-1),this.extractMinimum()};function s(c,h,d){h.key=d;var f=h.parent;return f&&e(h.key,f.key)&&(a(c,h,f),o(c,f)),e(h.key,c.key)&&(c=h),c}function a(c,h,d){h.left.right=h.right,h.right.left=h.left,d.degree--,d.child===h&&(d.child=h.right),d.degree===0&&(d.child=null),h.left=c,h.right=c.right,c.right=h,h.right.left=h,h.parent=null,h.mark=!1}function o(c,h){var d=h.parent;d&&(h.mark?(a(c,h,d),o(d)):h.mark=!0)}var l=function(h,d){h.left.right=h.right,h.right.left=h.left,h.parent=d,d.child?(h.left=d.child,h.right=d.child.right,d.child.right=h,h.right.left=h):(d.child=h,h.right=h,h.left=h),d.degree++,h.mark=!1};function u(c,h){var d=Math.floor(Math.log(h)*n)+1,f=new Array(d),p=0,g=c;if(g)for(p++,g=g.right;g!==c;)p++,g=g.right;for(var b;p>0;){for(var v=g.degree,x=g.right;b=f[v],!!b;){if(t(g.key,b.key)){var y=b;b=g,g=y}l(b,g),f[v]=null,v++}f[v]=g,g=x,p--}c=null;for(var E=0;E<d;E++)b=f[E],b&&(c?(b.left.right=b.right,b.right.left=b.left,b.left=c,b.right=c.right,c.right=b,b.right.left=b,e(b.key,c.key)&&(c=b)):c=b);return c}return i},{isClass:!0}),Q_e="Spa",J_e=["addScalar","equalScalar","FibonacciHeap"],Z_e=Y(Q_e,J_e,r=>{var{addScalar:e,equalScalar:t,FibonacciHeap:n}=r;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(s,a){if(this._values[s])this._values[s].value=a;else{var o=this._heap.insert(s,a);this._values[s]=o}},i.prototype.get=function(s){var a=this._values[s];return a?a.value:0},i.prototype.accumulate=function(s,a){var o=this._values[s];o?o.value=e(o.value,a):(o=this._heap.insert(s,a),this._values[s]=o)},i.prototype.forEach=function(s,a,o){var l=this._heap,u=this._values,c=[],h=l.extractMinimum();for(h&&c.push(h);h&&h.key<=a;)h.key>=s&&(t(h.value,0)||o(h.key,h.value,this)),h=l.extractMinimum(),h&&c.push(h);for(var d=0;d<c.length;d++){var f=c[d];h=l.insert(f.key,f.value),u[h.key]=h}},i.prototype.swap=function(s,a){var o=this._values[s],l=this._values[a];if(!o&&l)o=this._heap.insert(s,l.value),this._heap.remove(l),this._values[s]=o,this._values[a]=void 0;else if(o&&!l)l=this._heap.insert(a,o.value),this._heap.remove(o),this._values[a]=l,this._values[s]=void 0;else if(o&&l){var u=o.value;o.value=l.value,l.value=u}},i},{isClass:!0});function eAe(r){var e=0,t=1,n=Object.create(null),i=Object.create(null),s=0,a=function(l){var u=i[l];if(u&&(delete n[u],delete i[l],--e,t===u)){if(!e){s=0,t=1;return}for(;!Object.prototype.hasOwnProperty.call(n,++t););}};return r=Math.abs(r),{hit:function(l){var u=i[l],c=++s;if(n[c]=l,i[l]=c,!u)return++e,e<=r?void 0:(l=n[t],a(l),l);if(delete n[u],t===u)for(;!Object.prototype.hasOwnProperty.call(n,++t););},delete:a,clear:function(){e=s=0,t=1,n=Object.create(null),i=Object.create(null)}}}function a_(r){var{hasher:e,limit:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t=t??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function n(){typeof n.cache!="object"&&(n.cache={values:new Map,lru:eAe(t||Number.POSITIVE_INFINITY)});for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=e(i);if(n.cache.values.has(a))return n.cache.lru.hit(a),n.cache.values.get(a);var o=r.apply(r,i);return n.cache.values.set(a,o),n.cache.values.delete(n.cache.lru.hit(a)),o}}var tAe=a_(function(r){return new r(1).exp()},{hasher:a2}),rAe=a_(function(r){return new r(1).plus(new r(5).sqrt()).div(2)},{hasher:a2}),jF=a_(function(r){return r.acos(-1)},{hasher:a2}),nAe=a_(function(r){return jF(r).times(2)},{hasher:a2});function a2(r){return r[0].precision}function mV(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function KN(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?mV(Object(t),!0).forEach(function(n){Rn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):mV(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var iAe="Unit",sAe=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],aAe=Y(iAe,sAe,r=>{var{on:e,config:t,addScalar:n,subtractScalar:i,multiplyScalar:s,divideScalar:a,pow:o,abs:l,fix:u,round:c,equal:h,isNumeric:d,format:f,number:p,Complex:g,BigNumber:b,Fraction:v}=r,x=p,y=!1,E=!0;function w(ee,le){if(!(this instanceof w))throw new Error("Constructor must be called with the new operator");if(!(ee==null||d(ee)||ac(ee)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=y,this.skipAutomaticSimplification=E,le===void 0)this.units=[],this.dimensions=te.map(J=>0);else if(typeof le=="string"){var G=w.parse(le);this.units=G.units,this.dimensions=G.dimensions}else if(ba(le)&&le.value===null)this.fixPrefix=le.fixPrefix,this.skipAutomaticSimplification=le.skipAutomaticSimplification,this.dimensions=le.dimensions.slice(0),this.units=le.units.map(J=>_n({},J));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(ee)}Object.defineProperty(w,"name",{value:"Unit"}),w.prototype.constructor=w,w.prototype.type="Unit",w.prototype.isUnit=!0;var A,T,S;function N(){for(;S===" "||S==="	";)M()}function D(ee){return ee>="0"&&ee<="9"||ee==="."}function _(ee){return ee>="0"&&ee<="9"}function M(){T++,S=A.charAt(T)}function I(ee){T=ee,S=A.charAt(T)}function V(){var ee="",le=T;if(S==="+"?M():S==="-"&&(ee+=S,M()),!D(S))return I(le),null;if(S==="."){if(ee+=S,M(),!_(S))return I(le),null}else{for(;_(S);)ee+=S,M();S==="."&&(ee+=S,M())}for(;_(S);)ee+=S,M();if(S==="E"||S==="e"){var G="",J=T;if(G+=S,M(),(S==="+"||S==="-")&&(G+=S,M()),!_(S))return I(J),ee;for(ee=ee+G;_(S);)ee+=S,M()}return ee}function q(){for(var ee="";_(S)||w.isValidAlpha(S);)ee+=S,M();var le=ee.charAt(0);return w.isValidAlpha(le)?ee:null}function P(ee){return S===ee?(M(),ee):null}w.parse=function(ee,le){if(le=le||{},A=ee,T=-1,S="",typeof A!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var G=new w;G.units=[];var J=1,ae=!1;M(),N();var ce=V(),ge=null;if(ce){if(t.number==="BigNumber")ge=new b(ce);else if(t.number==="Fraction")try{ge=new v(ce)}catch{ge=parseFloat(ce)}else ge=parseFloat(ce);N(),P("*")?(J=1,ae=!0):P("/")&&(J=-1,ae=!0)}for(var pe=[],Ne=1;;){for(N();S==="(";)pe.push(J),Ne*=J,J=1,M(),N();var Ee=void 0;if(S){var Oe=S;if(Ee=q(),Ee===null)throw new SyntaxError('Unexpected "'+Oe+'" in "'+A+'" at index '+T.toString())}else break;var Se=L(Ee);if(Se===null)throw new SyntaxError('Unit "'+Ee+'" not found.');var et=J*Ne;if(N(),P("^")){N();var Ct=V();if(Ct===null)throw new SyntaxError('In "'+ee+'", "^" must be followed by a floating-point number');et*=Ct}G.units.push({unit:Se.unit,prefix:Se.prefix,power:et});for(var zt=0;zt<te.length;zt++)G.dimensions[zt]+=(Se.unit.dimensions[zt]||0)*et;for(N();S===")";){if(pe.length===0)throw new SyntaxError('Unmatched ")" in "'+A+'" at index '+T.toString());Ne/=pe.pop(),M(),N()}if(ae=!1,P("*")?(J=1,ae=!0):P("/")?(J=-1,ae=!0):J=1,Se.unit.base){var lt=Se.unit.base.key;ue.auto[lt]={unit:Se.unit,prefix:Se.prefix}}}if(N(),S)throw new SyntaxError('Could not parse: "'+ee+'"');if(ae)throw new SyntaxError('Trailing characters: "'+ee+'"');if(pe.length!==0)throw new SyntaxError('Unmatched "(" in "'+A+'"');if(G.units.length===0&&!le.allowNoUnits)throw new SyntaxError('"'+ee+'" contains no units');return G.value=ge!==void 0?G._normalize(ge):null,G},w.prototype.clone=function(){var ee=new w;ee.fixPrefix=this.fixPrefix,ee.skipAutomaticSimplification=this.skipAutomaticSimplification,ee.value=gt(this.value),ee.dimensions=this.dimensions.slice(0),ee.units=[];for(var le=0;le<this.units.length;le++){ee.units[le]={};for(var G in this.units[le])Je(this.units[le],G)&&(ee.units[le][G]=this.units[le][G])}return ee},w.prototype.valueType=function(){return dr(this.value)},w.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},w.prototype._normalize=function(ee){if(ee==null||this.units.length===0)return ee;for(var le=ee,G=w._getNumberConverter(dr(ee)),J=0;J<this.units.length;J++){var ae=G(this.units[J].unit.value),ce=G(this.units[J].prefix.value),ge=G(this.units[J].power);le=s(le,o(s(ae,ce),ge))}return le},w.prototype._denormalize=function(ee,le){if(ee==null||this.units.length===0)return ee;for(var G=ee,J=w._getNumberConverter(dr(ee)),ae=0;ae<this.units.length;ae++){var ce=J(this.units[ae].unit.value),ge=J(this.units[ae].prefix.value),pe=J(this.units[ae].power);G=a(G,o(s(ce,ge),pe))}return G};var L=a_(ee=>{if(Je(X,ee)){var le=X[ee],G=le.prefixes[""];return{unit:le,prefix:G}}for(var J in X)if(Je(X,J)&&o0e(ee,J)){var ae=X[J],ce=ee.length-J.length,ge=ee.substring(0,ce),pe=Je(ae.prefixes,ge)?ae.prefixes[ge]:void 0;if(pe!==void 0)return{unit:ae,prefix:pe}}return null},{hasher:ee=>ee[0],limit:100});w.isValuelessUnit=function(ee){return L(ee)!==null},w.prototype.hasBase=function(ee){if(typeof ee=="string"&&(ee=W[ee]),!ee)return!1;for(var le=0;le<te.length;le++)if(Math.abs((this.dimensions[le]||0)-(ee.dimensions[le]||0))>1e-12)return!1;return!0},w.prototype.equalBase=function(ee){for(var le=0;le<te.length;le++)if(Math.abs((this.dimensions[le]||0)-(ee.dimensions[le]||0))>1e-12)return!1;return!0},w.prototype.equals=function(ee){return this.equalBase(ee)&&h(this.value,ee.value)},w.prototype.multiply=function(ee){for(var le=this.clone(),G=ba(ee)?ee:new w(ee),J=0;J<te.length;J++)le.dimensions[J]=(this.dimensions[J]||0)+(G.dimensions[J]||0);for(var ae=0;ae<G.units.length;ae++){var ce=KN({},G.units[ae]);le.units.push(ce)}if(this.value!==null||G.value!==null){var ge=this.value===null?this._normalize(z(G.value)):this.value,pe=G.value===null?G._normalize(z(this.value)):G.value;le.value=s(ge,pe)}else le.value=null;return ba(ee)&&(le.skipAutomaticSimplification=!1),$(le)},w.prototype.divideInto=function(ee){return new w(ee).divide(this)},w.prototype.divide=function(ee){for(var le=this.clone(),G=ba(ee)?ee:new w(ee),J=0;J<te.length;J++)le.dimensions[J]=(this.dimensions[J]||0)-(G.dimensions[J]||0);for(var ae=0;ae<G.units.length;ae++){var ce=KN(KN({},G.units[ae]),{},{power:-G.units[ae].power});le.units.push(ce)}if(this.value!==null||G.value!==null){var ge=this.value===null?this._normalize(z(G.value)):this.value,pe=G.value===null?G._normalize(z(this.value)):G.value;le.value=a(ge,pe)}else le.value=null;return ba(ee)&&(le.skipAutomaticSimplification=!1),$(le)},w.prototype.pow=function(ee){for(var le=this.clone(),G=0;G<te.length;G++)le.dimensions[G]=(this.dimensions[G]||0)*ee;for(var J=0;J<le.units.length;J++)le.units[J].power*=ee;return le.value!==null?le.value=o(le.value,ee):le.value=null,le.skipAutomaticSimplification=!1,$(le)};function $(ee){return ee.equalBase(W.NONE)&&ee.value!==null&&!t.predictable?ee.value:ee}function z(ee){var le=w._getNumberConverter(dr(ee));return le(1)}w.prototype.abs=function(){var ee=this.clone();if(ee.value!==null)if(ee._isDerived()||ee.units.length===0||ee.units[0].unit.offset===0)ee.value=l(ee.value);else{var le=ee._numberConverter(),G=le(ee.units[0].unit.value),J=le(ee.units[0].unit.offset),ae=s(G,J);ee.value=i(l(n(ee.value,ae)),ae)}for(var ce in ee.units)(ee.units[ce].unit.name==="VA"||ee.units[ce].unit.name==="VAR")&&(ee.units[ce].unit=X.W);return ee},w.prototype.to=function(ee){var le=this.value===null?this._normalize(1):this.value,G;if(typeof ee=="string")G=w.parse(ee);else if(ba(ee))G=ee.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(G))throw new Error("Units do not match ('".concat(G.toString(),"' != '").concat(this.toString(),"')"));if(G.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||G.units.length===0||this.units[0].unit.offset===G.units[0].unit.offset)G.value=gt(le);else{var J=w._getNumberConverter(dr(le)),ae=this.units[0].unit.value,ce=this.units[0].unit.offset,ge=s(ae,ce),pe=G.units[0].unit.value,Ne=G.units[0].unit.offset,Ee=s(pe,Ne);G.value=n(le,J(i(ge,Ee)))}return G.fixPrefix=!0,G.skipAutomaticSimplification=!0,G},w.prototype.toNumber=function(ee){return x(this.toNumeric(ee))},w.prototype.toNumeric=function(ee){var le;return ee?le=this.to(ee):le=this.clone(),le._isDerived()||le.units.length===0?le._denormalize(le.value):le._denormalize(le.value,le.units[0].prefix.value)},w.prototype.toString=function(){return this.format()},w.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix,skipSimp:this.skipAutomaticSimplification}},w.fromJSON=function(ee){var le,G,J,ae=new w(ee.value,(le=ee.unit)!==null&&le!==void 0?le:void 0);return ae.fixPrefix=(G=ee.fixPrefix)!==null&&G!==void 0?G:y,ae.skipAutomaticSimplification=(J=ee.skipSimp)!==null&&J!==void 0?J:E,ae},w.prototype.valueOf=w.prototype.toString,w.prototype.simplify=function(){var ee=this.clone(),le=[],G;for(var J in be)if(Je(be,J)&&ee.hasBase(W[J])){G=J;break}if(G==="NONE")ee.units=[];else{var ae;if(G&&Je(be,G)&&(ae=be[G]),ae)ee.units=[{unit:ae.unit,prefix:ae.prefix,power:1}];else{for(var ce=!1,ge=0;ge<te.length;ge++){var pe=te[ge];Math.abs(ee.dimensions[ge]||0)>1e-12&&(Je(be,pe)?le.push({unit:be[pe].unit,prefix:be[pe].prefix,power:ee.dimensions[ge]||0}):ce=!0)}le.length<ee.units.length&&!ce&&(ee.units=le)}}return ee},w.prototype.toSI=function(){for(var ee=this.clone(),le=[],G=0;G<te.length;G++){var J=te[G];if(Math.abs(ee.dimensions[G]||0)>1e-12)if(Je(ue.si,J))le.push({unit:ue.si[J].unit,prefix:ue.si[J].prefix,power:ee.dimensions[G]||0});else throw new Error("Cannot express custom unit "+J+" in SI units")}return ee.units=le,ee.fixPrefix=!0,ee.skipAutomaticSimplification=!0,this.value!==null?(ee.value=null,this.to(ee)):ee},w.prototype.formatUnits=function(){for(var ee="",le="",G=0,J=0,ae=0;ae<this.units.length;ae++)this.units[ae].power>0?(G++,ee+=" "+this.units[ae].prefix.name+this.units[ae].unit.name,Math.abs(this.units[ae].power-1)>1e-15&&(ee+="^"+this.units[ae].power)):this.units[ae].power<0&&J++;if(J>0)for(var ce=0;ce<this.units.length;ce++)this.units[ce].power<0&&(G>0?(le+=" "+this.units[ce].prefix.name+this.units[ce].unit.name,Math.abs(this.units[ce].power+1)>1e-15&&(le+="^"+-this.units[ce].power)):(le+=" "+this.units[ce].prefix.name+this.units[ce].unit.name,le+="^"+this.units[ce].power));ee=ee.substr(1),le=le.substr(1),G>1&&J>0&&(ee="("+ee+")"),J>1&&G>0&&(le="("+le+")");var ge=ee;return G>0&&J>0&&(ge+=" / "),ge+=le,ge},w.prototype.toBest=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ee&&!Array.isArray(ee))throw new Error("Invalid unit type. Expected string or Unit.");var G=this.units[0].unit.prefixes;if(ee&&ee.length>0){var J=ee.map(ge=>{var pe=null;if(typeof ge=="string"){if(pe=w.parse(ge),!pe)throw new Error("Invalid unit type. Expected compatible string or Unit.")}else if(!ba(ge))throw new Error("Invalid unit type. Expected compatible string or Unit.");pe===null&&(pe=ge.clone());try{return this.to(pe.formatUnits()),pe}catch{throw new Error("Invalid unit type. Expected compatible string or Unit.")}}),ae=J.map(ge=>ge.units[0].prefix);this.units[0].unit.prefixes=ae.reduce((ge,pe)=>(ge[pe.name]=pe,ge),{}),this.units[0].prefix=ae[0]}var ce=K(this,le).simp;return this.units[0].unit.prefixes=G,ce.fixPrefix=!0,ce},w.prototype.format=function(ee){var{simp:le,valueStr:G,unitStr:J}=K(this,ee),ae=G;return le.value&&ac(le.value)&&(ae="("+ae+")"),J.length>0&&ae.length>0&&(ae+=" "),ae+=J,ae};function K(ee){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},G=ee.skipAutomaticSimplification||ee.value===null?ee.clone():ee.simplify();re(G),Q(G,le.offset);var J=G._denormalize(G.value),ae=G.value!==null?f(J,le||{}):"",ce=G.formatUnits();return{simp:G,valueStr:ae,unitStr:ce}}function re(ee){var le=!1;typeof ee.value<"u"&&ee.value!==null&&ac(ee.value)&&(le=Math.abs(ee.value.re)<1e-14);for(var G in ee.units)Je(ee.units,G)&&ee.units[G].unit&&(ee.units[G].unit.name==="VA"&&le?ee.units[G].unit=X.VAR:ee.units[G].unit.name==="VAR"&&!le&&(ee.units[G].unit=X.VA))}function Q(ee,le){ee.units.length===1&&!ee.fixPrefix&&Math.abs(ee.units[0].power-Math.round(ee.units[0].power))<1e-14&&(ee.units[0].prefix=ee._bestPrefix(le))}w.prototype._bestPrefix=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1.2;if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var le=this.value!==null?l(this.value):0,G=l(this.units[0].unit.value),J=this.units[0].prefix;if(le===0)return J;var ae=this.units[0].power,ce=Math.log(le/Math.pow(J.value*G,ae))/Math.LN10-ee;if(ce>-2.200001&&ce<1.800001)return J;ce=Math.abs(ce);var ge=this.units[0].unit.prefixes;for(var pe in ge)if(Je(ge,pe)){var Ne=ge[pe];if(Ne.scientific){var Ee=Math.abs(Math.log(le/Math.pow(Ne.value*G,ae))/Math.LN10-ee);(Ee<ce||Ee===ce&&Ne.name.length<J.name.length)&&(J=Ne,ce=Ee)}}return J},w.prototype.splitUnit=function(ee){for(var le=this.clone(),G=[],J=0;J<ee.length&&(le=le.to(ee[J]),J!==ee.length-1);J++){var ae=le.toNumeric(),ce=c(ae),ge=void 0,pe=h(ce,ae);pe?ge=ce:ge=u(le.toNumeric());var Ne=new w(ge,ee[J].toString());G.push(Ne),le=i(le,Ne)}for(var Ee=0,Oe=0;Oe<G.length;Oe++)Ee=n(Ee,G[Oe].value);return h(Ee,this.value)&&(le.value=0),G.push(le),G};var O={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};O.SHORTLONG=_n({},O.SHORT,O.LONG),O.BINARY_SHORT=_n({},O.BINARY_SHORT_SI,O.BINARY_SHORT_IEC),O.BINARY_LONG=_n({},O.BINARY_LONG_SI,O.BINARY_LONG_IEC);var te=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],W={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var de in W)Je(W,de)&&(W[de].key=de);var fe={},ne={name:"",base:fe,value:1,offset:0,dimensions:te.map(ee=>0)},X={meter:{name:"meter",base:W.LENGTH,prefixes:O.LONG,value:1,offset:0},inch:{name:"inch",base:W.LENGTH,prefixes:O.NONE,value:.0254,offset:0},foot:{name:"foot",base:W.LENGTH,prefixes:O.NONE,value:.3048,offset:0},yard:{name:"yard",base:W.LENGTH,prefixes:O.NONE,value:.9144,offset:0},mile:{name:"mile",base:W.LENGTH,prefixes:O.NONE,value:1609.344,offset:0},link:{name:"link",base:W.LENGTH,prefixes:O.NONE,value:.201168,offset:0},rod:{name:"rod",base:W.LENGTH,prefixes:O.NONE,value:5.0292,offset:0},chain:{name:"chain",base:W.LENGTH,prefixes:O.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:W.LENGTH,prefixes:O.NONE,value:1e-10,offset:0},m:{name:"m",base:W.LENGTH,prefixes:O.SHORT,value:1,offset:0},in:{name:"in",base:W.LENGTH,prefixes:O.NONE,value:.0254,offset:0},ft:{name:"ft",base:W.LENGTH,prefixes:O.NONE,value:.3048,offset:0},yd:{name:"yd",base:W.LENGTH,prefixes:O.NONE,value:.9144,offset:0},mi:{name:"mi",base:W.LENGTH,prefixes:O.NONE,value:1609.344,offset:0},li:{name:"li",base:W.LENGTH,prefixes:O.NONE,value:.201168,offset:0},rd:{name:"rd",base:W.LENGTH,prefixes:O.NONE,value:5.02921,offset:0},ch:{name:"ch",base:W.LENGTH,prefixes:O.NONE,value:20.1168,offset:0},mil:{name:"mil",base:W.LENGTH,prefixes:O.NONE,value:254e-7,offset:0},m2:{name:"m2",base:W.SURFACE,prefixes:O.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:W.SURFACE,prefixes:O.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:W.SURFACE,prefixes:O.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:W.SURFACE,prefixes:O.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:W.SURFACE,prefixes:O.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:W.SURFACE,prefixes:O.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:W.SURFACE,prefixes:O.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:W.SURFACE,prefixes:O.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:W.SURFACE,prefixes:O.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:W.SURFACE,prefixes:O.NONE,value:1e4,offset:0},m3:{name:"m3",base:W.VOLUME,prefixes:O.CUBIC,value:1,offset:0},L:{name:"L",base:W.VOLUME,prefixes:O.SHORT,value:.001,offset:0},l:{name:"l",base:W.VOLUME,prefixes:O.SHORT,value:.001,offset:0},litre:{name:"litre",base:W.VOLUME,prefixes:O.LONG,value:.001,offset:0},cuin:{name:"cuin",base:W.VOLUME,prefixes:O.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:W.VOLUME,prefixes:O.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:W.VOLUME,prefixes:O.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:W.VOLUME,prefixes:O.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:W.VOLUME,prefixes:O.NONE,value:15e-6,offset:0},drop:{name:"drop",base:W.VOLUME,prefixes:O.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:W.VOLUME,prefixes:O.NONE,value:5e-8,offset:0},minim:{name:"minim",base:W.VOLUME,prefixes:O.NONE,value:61611519921875e-21,offset:0},fluiddram:{name:"fluiddram",base:W.VOLUME,prefixes:O.NONE,value:36966911953125e-19,offset:0},fluidounce:{name:"fluidounce",base:W.VOLUME,prefixes:O.NONE,value:295735295625e-16,offset:0},gill:{name:"gill",base:W.VOLUME,prefixes:O.NONE,value:.00011829411825,offset:0},cc:{name:"cc",base:W.VOLUME,prefixes:O.NONE,value:1e-6,offset:0},cup:{name:"cup",base:W.VOLUME,prefixes:O.NONE,value:.0002365882365,offset:0},pint:{name:"pint",base:W.VOLUME,prefixes:O.NONE,value:.000473176473,offset:0},quart:{name:"quart",base:W.VOLUME,prefixes:O.NONE,value:.000946352946,offset:0},gallon:{name:"gallon",base:W.VOLUME,prefixes:O.NONE,value:.003785411784,offset:0},beerbarrel:{name:"beerbarrel",base:W.VOLUME,prefixes:O.NONE,value:.117347765304,offset:0},oilbarrel:{name:"oilbarrel",base:W.VOLUME,prefixes:O.NONE,value:.158987294928,offset:0},hogshead:{name:"hogshead",base:W.VOLUME,prefixes:O.NONE,value:.238480942392,offset:0},g:{name:"g",base:W.MASS,prefixes:O.SHORT,value:.001,offset:0},gram:{name:"gram",base:W.MASS,prefixes:O.LONG,value:.001,offset:0},ton:{name:"ton",base:W.MASS,prefixes:O.SHORT,value:907.18474,offset:0},t:{name:"t",base:W.MASS,prefixes:O.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:W.MASS,prefixes:O.LONG,value:1e3,offset:0},grain:{name:"grain",base:W.MASS,prefixes:O.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:W.MASS,prefixes:O.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:W.MASS,prefixes:O.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:W.MASS,prefixes:O.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:W.MASS,prefixes:O.NONE,value:45.359237,offset:0},stick:{name:"stick",base:W.MASS,prefixes:O.NONE,value:.115,offset:0},stone:{name:"stone",base:W.MASS,prefixes:O.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:W.MASS,prefixes:O.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:W.MASS,prefixes:O.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:W.MASS,prefixes:O.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:W.MASS,prefixes:O.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:W.MASS,prefixes:O.NONE,value:45.359237,offset:0},s:{name:"s",base:W.TIME,prefixes:O.SHORT,value:1,offset:0},min:{name:"min",base:W.TIME,prefixes:O.NONE,value:60,offset:0},h:{name:"h",base:W.TIME,prefixes:O.NONE,value:3600,offset:0},second:{name:"second",base:W.TIME,prefixes:O.LONG,value:1,offset:0},sec:{name:"sec",base:W.TIME,prefixes:O.LONG,value:1,offset:0},minute:{name:"minute",base:W.TIME,prefixes:O.NONE,value:60,offset:0},hour:{name:"hour",base:W.TIME,prefixes:O.NONE,value:3600,offset:0},day:{name:"day",base:W.TIME,prefixes:O.NONE,value:86400,offset:0},week:{name:"week",base:W.TIME,prefixes:O.NONE,value:7*86400,offset:0},month:{name:"month",base:W.TIME,prefixes:O.NONE,value:2629800,offset:0},year:{name:"year",base:W.TIME,prefixes:O.NONE,value:31557600,offset:0},decade:{name:"decade",base:W.TIME,prefixes:O.NONE,value:315576e3,offset:0},century:{name:"century",base:W.TIME,prefixes:O.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:W.TIME,prefixes:O.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:W.FREQUENCY,prefixes:O.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:W.FREQUENCY,prefixes:O.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:W.ANGLE,prefixes:O.SHORT,value:1,offset:0},radian:{name:"radian",base:W.ANGLE,prefixes:O.LONG,value:1,offset:0},deg:{name:"deg",base:W.ANGLE,prefixes:O.SHORT,value:null,offset:0},degree:{name:"degree",base:W.ANGLE,prefixes:O.LONG,value:null,offset:0},grad:{name:"grad",base:W.ANGLE,prefixes:O.SHORT,value:null,offset:0},gradian:{name:"gradian",base:W.ANGLE,prefixes:O.LONG,value:null,offset:0},cycle:{name:"cycle",base:W.ANGLE,prefixes:O.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:W.ANGLE,prefixes:O.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:W.ANGLE,prefixes:O.NONE,value:null,offset:0},A:{name:"A",base:W.CURRENT,prefixes:O.SHORT,value:1,offset:0},ampere:{name:"ampere",base:W.CURRENT,prefixes:O.LONG,value:1,offset:0},K:{name:"K",base:W.TEMPERATURE,prefixes:O.SHORT,value:1,offset:0},degC:{name:"degC",base:W.TEMPERATURE,prefixes:O.SHORT,value:1,offset:273.15},degF:{name:"degF",base:W.TEMPERATURE,prefixes:O.SHORT,value:new v(5,9),offset:459.67},degR:{name:"degR",base:W.TEMPERATURE,prefixes:O.SHORT,value:new v(5,9),offset:0},kelvin:{name:"kelvin",base:W.TEMPERATURE,prefixes:O.LONG,value:1,offset:0},celsius:{name:"celsius",base:W.TEMPERATURE,prefixes:O.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:W.TEMPERATURE,prefixes:O.LONG,value:new v(5,9),offset:459.67},rankine:{name:"rankine",base:W.TEMPERATURE,prefixes:O.LONG,value:new v(5,9),offset:0},mol:{name:"mol",base:W.AMOUNT_OF_SUBSTANCE,prefixes:O.SHORT,value:1,offset:0},mole:{name:"mole",base:W.AMOUNT_OF_SUBSTANCE,prefixes:O.LONG,value:1,offset:0},cd:{name:"cd",base:W.LUMINOUS_INTENSITY,prefixes:O.SHORT,value:1,offset:0},candela:{name:"candela",base:W.LUMINOUS_INTENSITY,prefixes:O.LONG,value:1,offset:0},N:{name:"N",base:W.FORCE,prefixes:O.SHORT,value:1,offset:0},newton:{name:"newton",base:W.FORCE,prefixes:O.LONG,value:1,offset:0},dyn:{name:"dyn",base:W.FORCE,prefixes:O.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:W.FORCE,prefixes:O.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:W.FORCE,prefixes:O.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:W.FORCE,prefixes:O.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:W.FORCE,prefixes:O.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:W.FORCE,prefixes:O.NONE,value:9.80665,offset:0},J:{name:"J",base:W.ENERGY,prefixes:O.SHORT,value:1,offset:0},joule:{name:"joule",base:W.ENERGY,prefixes:O.LONG,value:1,offset:0},erg:{name:"erg",base:W.ENERGY,prefixes:O.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:W.ENERGY,prefixes:O.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:W.ENERGY,prefixes:O.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:W.ENERGY,prefixes:O.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:W.ENERGY,prefixes:O.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:W.POWER,prefixes:O.SHORT,value:1,offset:0},watt:{name:"watt",base:W.POWER,prefixes:O.LONG,value:1,offset:0},hp:{name:"hp",base:W.POWER,prefixes:O.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:W.POWER,prefixes:O.SHORT,value:g.I,offset:0},VA:{name:"VA",base:W.POWER,prefixes:O.SHORT,value:1,offset:0},Pa:{name:"Pa",base:W.PRESSURE,prefixes:O.SHORT,value:1,offset:0},psi:{name:"psi",base:W.PRESSURE,prefixes:O.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:W.PRESSURE,prefixes:O.NONE,value:101325,offset:0},bar:{name:"bar",base:W.PRESSURE,prefixes:O.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:W.PRESSURE,prefixes:O.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:W.PRESSURE,prefixes:O.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:W.PRESSURE,prefixes:O.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:W.PRESSURE,prefixes:O.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:W.ELECTRIC_CHARGE,prefixes:O.LONG,value:1,offset:0},C:{name:"C",base:W.ELECTRIC_CHARGE,prefixes:O.SHORT,value:1,offset:0},farad:{name:"farad",base:W.ELECTRIC_CAPACITANCE,prefixes:O.LONG,value:1,offset:0},F:{name:"F",base:W.ELECTRIC_CAPACITANCE,prefixes:O.SHORT,value:1,offset:0},volt:{name:"volt",base:W.ELECTRIC_POTENTIAL,prefixes:O.LONG,value:1,offset:0},V:{name:"V",base:W.ELECTRIC_POTENTIAL,prefixes:O.SHORT,value:1,offset:0},ohm:{name:"ohm",base:W.ELECTRIC_RESISTANCE,prefixes:O.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:W.ELECTRIC_INDUCTANCE,prefixes:O.LONG,value:1,offset:0},H:{name:"H",base:W.ELECTRIC_INDUCTANCE,prefixes:O.SHORT,value:1,offset:0},siemens:{name:"siemens",base:W.ELECTRIC_CONDUCTANCE,prefixes:O.LONG,value:1,offset:0},S:{name:"S",base:W.ELECTRIC_CONDUCTANCE,prefixes:O.SHORT,value:1,offset:0},weber:{name:"weber",base:W.MAGNETIC_FLUX,prefixes:O.LONG,value:1,offset:0},Wb:{name:"Wb",base:W.MAGNETIC_FLUX,prefixes:O.SHORT,value:1,offset:0},tesla:{name:"tesla",base:W.MAGNETIC_FLUX_DENSITY,prefixes:O.LONG,value:1,offset:0},T:{name:"T",base:W.MAGNETIC_FLUX_DENSITY,prefixes:O.SHORT,value:1,offset:0},b:{name:"b",base:W.BIT,prefixes:O.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:W.BIT,prefixes:O.BINARY_LONG,value:1,offset:0},B:{name:"B",base:W.BIT,prefixes:O.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:W.BIT,prefixes:O.BINARY_LONG,value:8,offset:0}},se={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fldr:"fluiddram",fluiddrams:"fluiddram",floz:"fluidounce",fluidounces:"fluidounce",gi:"gill",gills:"gill",cp:"cup",cups:"cup",pt:"pint",pints:"pint",qt:"quart",quarts:"quart",gal:"gallon",gallons:"gallon",bbl:"beerbarrel",beerbarrels:"beerbarrel",obl:"oilbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function me(ee){if(ee.number==="BigNumber"){var le=jF(b);X.rad.value=new b(1),X.deg.value=le.div(180),X.grad.value=le.div(200),X.cycle.value=le.times(2),X.arcsec.value=le.div(648e3),X.arcmin.value=le.div(10800)}else X.rad.value=1,X.deg.value=Math.PI/180,X.grad.value=Math.PI/200,X.cycle.value=Math.PI*2,X.arcsec.value=Math.PI/648e3,X.arcmin.value=Math.PI/10800;X.radian.value=X.rad.value,X.degree.value=X.deg.value,X.gradian.value=X.grad.value}me(t),e&&e("config",function(ee,le){ee.number!==le.number&&me(ee)});var ue={si:{NONE:{unit:ne,prefix:O.NONE[""]},LENGTH:{unit:X.m,prefix:O.SHORT[""]},MASS:{unit:X.g,prefix:O.SHORT.k},TIME:{unit:X.s,prefix:O.SHORT[""]},CURRENT:{unit:X.A,prefix:O.SHORT[""]},TEMPERATURE:{unit:X.K,prefix:O.SHORT[""]},LUMINOUS_INTENSITY:{unit:X.cd,prefix:O.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:X.mol,prefix:O.SHORT[""]},ANGLE:{unit:X.rad,prefix:O.SHORT[""]},BIT:{unit:X.bits,prefix:O.SHORT[""]},FORCE:{unit:X.N,prefix:O.SHORT[""]},ENERGY:{unit:X.J,prefix:O.SHORT[""]},POWER:{unit:X.W,prefix:O.SHORT[""]},PRESSURE:{unit:X.Pa,prefix:O.SHORT[""]},ELECTRIC_CHARGE:{unit:X.C,prefix:O.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:X.F,prefix:O.SHORT[""]},ELECTRIC_POTENTIAL:{unit:X.V,prefix:O.SHORT[""]},ELECTRIC_RESISTANCE:{unit:X.ohm,prefix:O.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:X.H,prefix:O.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:X.S,prefix:O.SHORT[""]},MAGNETIC_FLUX:{unit:X.Wb,prefix:O.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:X.T,prefix:O.SHORT[""]},FREQUENCY:{unit:X.Hz,prefix:O.SHORT[""]}}};ue.cgs=JSON.parse(JSON.stringify(ue.si)),ue.cgs.LENGTH={unit:X.m,prefix:O.SHORT.c},ue.cgs.MASS={unit:X.g,prefix:O.SHORT[""]},ue.cgs.FORCE={unit:X.dyn,prefix:O.SHORT[""]},ue.cgs.ENERGY={unit:X.erg,prefix:O.NONE[""]},ue.us=JSON.parse(JSON.stringify(ue.si)),ue.us.LENGTH={unit:X.ft,prefix:O.NONE[""]},ue.us.MASS={unit:X.lbm,prefix:O.NONE[""]},ue.us.TEMPERATURE={unit:X.degF,prefix:O.NONE[""]},ue.us.FORCE={unit:X.lbf,prefix:O.NONE[""]},ue.us.ENERGY={unit:X.BTU,prefix:O.BTU[""]},ue.us.POWER={unit:X.hp,prefix:O.NONE[""]},ue.us.PRESSURE={unit:X.psi,prefix:O.NONE[""]},ue.auto=JSON.parse(JSON.stringify(ue.si));var be=ue.auto;w.setUnitSystem=function(ee){if(Je(ue,ee))be=ue[ee];else throw new Error("Unit system "+ee+" does not exist. Choices are: "+Object.keys(ue).join(", "))},w.getUnitSystem=function(){for(var ee in ue)if(Je(ue,ee)&&ue[ee]===be)return ee},w.typeConverters={BigNumber:function(le){return le!=null&&le.isFraction?new b(String(le.n)).div(String(le.d)).times(String(le.s)):new b(le+"")},Fraction:function(le){return new v(le)},Complex:function(le){return le},number:function(le){return le!=null&&le.isFraction?p(le):le}},w.prototype._numberConverter=function(){var ee=w.typeConverters[this.valueType()];if(ee)return ee;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},w._getNumberConverter=function(ee){if(!w.typeConverters[ee])throw new TypeError('Unsupported type "'+ee+'"');return w.typeConverters[ee]};for(var ye in X)if(Je(X,ye)){var Ie=X[ye];Ie.dimensions=Ie.base.dimensions}for(var Ue in se)if(Je(se,Ue)){var We=X[se[Ue]],Be={};for(var $e in We)Je(We,$e)&&(Be[$e]=We[$e]);Be.name=Ue,X[Ue]=Be}w.isValidAlpha=function(le){return/^[a-zA-Z]$/.test(le)};function He(ee){for(var le=0;le<ee.length;le++){if(S=ee.charAt(le),le===0&&!w.isValidAlpha(S))throw new Error('Invalid unit name (must begin with alpha character): "'+ee+'"');if(le>0&&!(w.isValidAlpha(S)||_(S)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+ee+'"')}}return w.createUnit=function(ee,le){if(typeof ee!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(le&&le.override){for(var G in ee)if(Je(ee,G)&&w.deleteUnit(G),ee[G].aliases)for(var J=0;J<ee[G].aliases.length;J++)w.deleteUnit(ee[G].aliases[J])}var ae;for(var ce in ee)Je(ee,ce)&&(ae=w.createUnitSingle(ce,ee[ce]));return ae},w.createUnitSingle=function(ee,le){if((typeof le>"u"||le===null)&&(le={}),typeof ee!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(Je(X,ee))throw new Error('Cannot create unit "'+ee+'": a unit with that name already exists');He(ee);var G=null,J=[],ae=0,ce,ge,pe;if(le&&le.type==="Unit")G=le.clone();else if(typeof le=="string")le!==""&&(ce=le);else if(typeof le=="object")ce=le.definition,ge=le.prefixes,ae=le.offset,pe=le.baseName,le.aliases&&(J=le.aliases.valueOf());else throw new TypeError('Cannot create unit "'+ee+'" from "'+le.toString()+'": expecting "string" or "Unit" or "Object"');if(J){for(var Ne=0;Ne<J.length;Ne++)if(Je(X,J[Ne]))throw new Error('Cannot create alias "'+J[Ne]+'": a unit with that name already exists')}if(ce&&typeof ce=="string"&&!G)try{G=w.parse(ce,{allowNoUnits:!0})}catch(ut){throw ut.message='Could not create unit "'+ee+'" from "'+ce+'": '+ut.message,ut}else ce&&ce.type==="Unit"&&(G=ce.clone());J=J||[],ae=ae||0,ge&&ge.toUpperCase?ge=O[ge.toUpperCase()]||O.NONE:ge=O.NONE;var Ee={};if(G){Ee={name:ee,value:G.value,dimensions:G.dimensions.slice(0),prefixes:ge,offset:ae};var Ct=!1;for(var zt in W)if(Je(W,zt)){for(var lt=!0,pr=0;pr<te.length;pr++)if(Math.abs((Ee.dimensions[pr]||0)-(W[zt].dimensions[pr]||0))>1e-12){lt=!1;break}if(lt){Ct=!0,Ee.base=W[zt];break}}if(!Ct){pe=pe||ee+"_STUFF";var B={dimensions:G.dimensions.slice(0)};B.key=pe,W[pe]=B,be[pe]={unit:Ee,prefix:O.NONE[""]},Ee.base=W[pe]}}else{if(pe=pe||ee+"_STUFF",te.indexOf(pe)>=0)throw new Error('Cannot create new base unit "'+ee+'": a base unit with that name already exists (and cannot be overridden)');te.push(pe);for(var Oe in W)Je(W,Oe)&&(W[Oe].dimensions[te.length-1]=0);for(var Se={dimensions:[]},et=0;et<te.length;et++)Se.dimensions[et]=0;Se.dimensions[te.length-1]=1,Se.key=pe,W[pe]=Se,Ee={name:ee,value:1,dimensions:W[pe].dimensions.slice(0),prefixes:ge,offset:ae,base:W[pe]},be[pe]={unit:Ee,prefix:O.NONE[""]}}w.UNITS[ee]=Ee;for(var oe=0;oe<J.length;oe++){var we=J[oe],Me={};for(var ze in Ee)Je(Ee,ze)&&(Me[ze]=Ee[ze]);Me.name=we,w.UNITS[we]=Me}return delete L.cache,new w(null,ee)},w.deleteUnit=function(ee){delete w.UNITS[ee],delete L.cache},w.PREFIXES=O,w.BASE_DIMENSIONS=te,w.BASE_UNITS=W,w.UNIT_SYSTEMS=ue,w.UNITS=X,w},{isClass:!0}),pV="unit",oAe=["typed","Unit"],lAe=Y(pV,oAe,r=>{var{typed:e,Unit:t}=r;return e(pV,{Unit:function(i){return i.clone()},string:function(i){return t.isValuelessUnit(i)?new t(null,i):t.parse(i,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(i,s){return new t(i,s)},"number | BigNumber | Fraction":function(i){return new t(i)},"Array | Matrix":e.referToSelf(n=>i=>_t(i,n))})}),gV="sparse",uAe=["typed","SparseMatrix"],cAe=Y(gV,uAe,r=>{var{typed:e,SparseMatrix:t}=r;return e(gV,{"":function(){return new t([])},string:function(i){return new t([],i)},"Array | Matrix":function(i){return new t(i)},"Array | Matrix, string":function(i,s){return new t(i,s)}})}),vV="createUnit",hAe=["typed","Unit"],dAe=Y(vV,hAe,r=>{var{typed:e,Unit:t}=r;return e(vV,{"Object, Object":function(i,s){return t.createUnit(i,s)},Object:function(i){return t.createUnit(i,{})},"string, Unit | string | Object, Object":function(i,s,a){var o={};return o[i]=s,t.createUnit(o,a)},"string, Unit | string | Object":function(i,s){var a={};return a[i]=s,t.createUnit(a,{})},string:function(i){var s={};return s[i]={},t.createUnit(s,{})}})}),yV="acos",fAe=["typed","config","Complex"],mAe=Y(yV,fAe,r=>{var{typed:e,config:t,Complex:n}=r;return e(yV,{number:function(s){return s>=-1&&s<=1||t.predictable?Math.acos(s):new n(s,0).acos()},Complex:function(s){return s.acos()},BigNumber:function(s){return s.acos()}})}),bV="acosh",pAe=["typed","config","Complex"],gAe=Y(bV,pAe,r=>{var{typed:e,config:t,Complex:n}=r;return e(bV,{number:function(s){return s>=1||t.predictable?yX(s):s<=-1?new n(Math.log(Math.sqrt(s*s-1)-s),Math.PI):new n(s,0).acosh()},Complex:function(s){return s.acosh()},BigNumber:function(s){return s.acosh()}})}),wV="acot",vAe=["typed","BigNumber"],yAe=Y(wV,vAe,r=>{var{typed:e,BigNumber:t}=r;return e(wV,{number:bX,Complex:function(i){return i.acot()},BigNumber:function(i){return new t(1).div(i).atan()}})}),xV="acoth",bAe=["typed","config","Complex","BigNumber"],wAe=Y(xV,bAe,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(xV,{number:function(a){return a>=1||a<=-1||t.predictable?wX(a):new n(a,0).acoth()},Complex:function(a){return a.acoth()},BigNumber:function(a){return new i(1).div(a).atanh()}})}),_V="acsc",xAe=["typed","config","Complex","BigNumber"],_Ae=Y(_V,xAe,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(_V,{number:function(a){return a<=-1||a>=1||t.predictable?xX(a):new n(a,0).acsc()},Complex:function(a){return a.acsc()},BigNumber:function(a){return new i(1).div(a).asin()}})}),AV="acsch",AAe=["typed","BigNumber"],EAe=Y(AV,AAe,r=>{var{typed:e,BigNumber:t}=r;return e(AV,{number:_X,Complex:function(i){return i.acsch()},BigNumber:function(i){return new t(1).div(i).asinh()}})}),EV="asec",SAe=["typed","config","Complex","BigNumber"],TAe=Y(EV,SAe,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(EV,{number:function(a){return a<=-1||a>=1||t.predictable?AX(a):new n(a,0).asec()},Complex:function(a){return a.asec()},BigNumber:function(a){return new i(1).div(a).acos()}})}),SV="asech",CAe=["typed","config","Complex","BigNumber"],NAe=Y(SV,CAe,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(SV,{number:function(a){if(a<=1&&a>=-1||t.predictable){var o=1/a;if(o>0||t.predictable)return EX(a);var l=Math.sqrt(o*o-1);return new n(Math.log(l-o),Math.PI)}return new n(a,0).asech()},Complex:function(a){return a.asech()},BigNumber:function(a){return new i(1).div(a).acosh()}})}),TV="asin",DAe=["typed","config","Complex"],MAe=Y(TV,DAe,r=>{var{typed:e,config:t,Complex:n}=r;return e(TV,{number:function(s){return s>=-1&&s<=1||t.predictable?Math.asin(s):new n(s,0).asin()},Complex:function(s){return s.asin()},BigNumber:function(s){return s.asin()}})}),IAe="asinh",PAe=["typed"],RAe=Y(IAe,PAe,r=>{var{typed:e}=r;return e("asinh",{number:SX,Complex:function(n){return n.asinh()},BigNumber:function(n){return n.asinh()}})}),kAe="atan",FAe=["typed"],OAe=Y(kAe,FAe,r=>{var{typed:e}=r;return e("atan",{number:function(n){return Math.atan(n)},Complex:function(n){return n.atan()},BigNumber:function(n){return n.atan()}})}),CV="atan2",BAe=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],LAe=Y(CV,BAe,r=>{var{typed:e,matrix:t,equalScalar:n,BigNumber:i,DenseMatrix:s,concat:a}=r,o=Zo({typed:e,equalScalar:n}),l=is({typed:e}),u=VX({typed:e,equalScalar:n}),c=Fi({typed:e,equalScalar:n}),h=Kn({typed:e,DenseMatrix:s}),d=Ar({typed:e,matrix:t,concat:a});return e(CV,{"number, number":Math.atan2,"BigNumber, BigNumber":(f,p)=>i.atan2(f,p)},d({scalar:"number | BigNumber",SS:u,DS:l,SD:o,Ss:c,sS:h}))}),NV="atanh",$Ae=["typed","config","Complex"],VAe=Y(NV,$Ae,r=>{var{typed:e,config:t,Complex:n}=r;return e(NV,{number:function(s){return s<=1&&s>=-1||t.predictable?TX(s):new n(s,0).atanh()},Complex:function(s){return s.atanh()},BigNumber:function(s){return s.atanh()}})}),ny=Y("trigUnit",["typed"],r=>{var{typed:e}=r;return{Unit:e.referToSelf(t=>n=>{if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(t,n.valueType())(n.value)})}}),DV="cos",UAe=["typed"],zAe=Y(DV,UAe,r=>{var{typed:e}=r,t=ny({typed:e});return e(DV,{number:Math.cos,"Complex | BigNumber":n=>n.cos()},t)}),MV="cosh",jAe=["typed"],qAe=Y(MV,jAe,r=>{var{typed:e}=r;return e(MV,{number:Rge,"Complex | BigNumber":t=>t.cosh()})}),IV="cot",HAe=["typed","BigNumber"],GAe=Y(IV,HAe,r=>{var{typed:e,BigNumber:t}=r,n=ny({typed:e});return e(IV,{number:CX,Complex:i=>i.cot(),BigNumber:i=>new t(1).div(i.tan())},n)}),PV="coth",WAe=["typed","BigNumber"],KAe=Y(PV,WAe,r=>{var{typed:e,BigNumber:t}=r;return e(PV,{number:NX,Complex:n=>n.coth(),BigNumber:n=>new t(1).div(n.tanh())})}),RV="csc",XAe=["typed","BigNumber"],YAe=Y(RV,XAe,r=>{var{typed:e,BigNumber:t}=r,n=ny({typed:e});return e(RV,{number:DX,Complex:i=>i.csc(),BigNumber:i=>new t(1).div(i.sin())},n)}),kV="csch",QAe=["typed","BigNumber"],JAe=Y(kV,QAe,r=>{var{typed:e,BigNumber:t}=r;return e(kV,{number:MX,Complex:n=>n.csch(),BigNumber:n=>new t(1).div(n.sinh())})}),FV="sec",ZAe=["typed","BigNumber"],eEe=Y(FV,ZAe,r=>{var{typed:e,BigNumber:t}=r,n=ny({typed:e});return e(FV,{number:IX,Complex:i=>i.sec(),BigNumber:i=>new t(1).div(i.cos())},n)}),OV="sech",tEe=["typed","BigNumber"],rEe=Y(OV,tEe,r=>{var{typed:e,BigNumber:t}=r;return e(OV,{number:PX,Complex:n=>n.sech(),BigNumber:n=>new t(1).div(n.cosh())})}),BV="sin",nEe=["typed"],iEe=Y(BV,nEe,r=>{var{typed:e}=r,t=ny({typed:e});return e(BV,{number:Math.sin,"Complex | BigNumber":n=>n.sin()},t)}),LV="sinh",sEe=["typed"],aEe=Y(LV,sEe,r=>{var{typed:e}=r;return e(LV,{number:RX,"Complex | BigNumber":t=>t.sinh()})}),$V="tan",oEe=["typed"],lEe=Y($V,oEe,r=>{var{typed:e}=r,t=ny({typed:e});return e($V,{number:Math.tan,"Complex | BigNumber":n=>n.tan()},t)}),uEe="tanh",cEe=["typed"],hEe=Y(uEe,cEe,r=>{var{typed:e}=r;return e("tanh",{number:Fge,"Complex | BigNumber":t=>t.tanh()})}),VV="setCartesian",dEe=["typed","size","subset","compareNatural","Index","DenseMatrix"],fEe=Y(VV,dEe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:s,DenseMatrix:a}=r;return e(VV,{"Array | Matrix, Array | Matrix":function(l,u){var c=[];if(n(t(l),new s(0))!==0&&n(t(u),new s(0))!==0){var h=Yt(Array.isArray(l)?l:l.toArray()).sort(i),d=Yt(Array.isArray(u)?u:u.toArray()).sort(i);c=[];for(var f=0;f<h.length;f++)for(var p=0;p<d.length;p++)c.push([h[f],d[p]])}return Array.isArray(l)&&Array.isArray(u)?c:new a(c)}})}),UV="setDifference",mEe=["typed","size","subset","compareNatural","Index","DenseMatrix"],pEe=Y(UV,mEe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:s,DenseMatrix:a}=r;return e(UV,{"Array | Matrix, Array | Matrix":function(l,u){var c;if(n(t(l),new s(0))===0)c=[];else{if(n(t(u),new s(0))===0)return Yt(l.toArray());var h=P0(Yt(Array.isArray(l)?l:l.toArray()).sort(i)),d=P0(Yt(Array.isArray(u)?u:u.toArray()).sort(i));c=[];for(var f,p=0;p<h.length;p++){f=!1;for(var g=0;g<d.length;g++)if(i(h[p].value,d[g].value)===0&&h[p].identifier===d[g].identifier){f=!0;break}f||c.push(h[p])}}return Array.isArray(l)&&Array.isArray(u)?uT(c):new a(uT(c))}})}),zV="setDistinct",gEe=["typed","size","subset","compareNatural","Index","DenseMatrix"],vEe=Y(zV,gEe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:s,DenseMatrix:a}=r;return e(zV,{"Array | Matrix":function(l){var u;if(n(t(l),new s(0))===0)u=[];else{var c=Yt(Array.isArray(l)?l:l.toArray()).sort(i);u=[],u.push(c[0]);for(var h=1;h<c.length;h++)i(c[h],c[h-1])!==0&&u.push(c[h])}return Array.isArray(l)?u:new a(u)}})}),jV="setIntersect",yEe=["typed","size","subset","compareNatural","Index","DenseMatrix"],bEe=Y(jV,yEe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:s,DenseMatrix:a}=r;return e(jV,{"Array | Matrix, Array | Matrix":function(l,u){var c;if(n(t(l),new s(0))===0||n(t(u),new s(0))===0)c=[];else{var h=P0(Yt(Array.isArray(l)?l:l.toArray()).sort(i)),d=P0(Yt(Array.isArray(u)?u:u.toArray()).sort(i));c=[];for(var f=0;f<h.length;f++)for(var p=0;p<d.length;p++)if(i(h[f].value,d[p].value)===0&&h[f].identifier===d[p].identifier){c.push(h[f]);break}}return Array.isArray(l)&&Array.isArray(u)?uT(c):new a(uT(c))}})}),qV="setIsSubset",wEe=["typed","size","subset","compareNatural","Index"],xEe=Y(qV,wEe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:s}=r;return e(qV,{"Array | Matrix, Array | Matrix":function(o,l){if(n(t(o),new s(0))===0)return!0;if(n(t(l),new s(0))===0)return!1;for(var u=P0(Yt(Array.isArray(o)?o:o.toArray()).sort(i)),c=P0(Yt(Array.isArray(l)?l:l.toArray()).sort(i)),h,d=0;d<u.length;d++){h=!1;for(var f=0;f<c.length;f++)if(i(u[d].value,c[f].value)===0&&u[d].identifier===c[f].identifier){h=!0;break}if(h===!1)return!1}return!0}})}),HV="setMultiplicity",_Ee=["typed","size","subset","compareNatural","Index"],AEe=Y(HV,_Ee,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:s}=r;return e(HV,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(o,l){if(n(t(l),new s(0))===0)return 0;for(var u=Yt(Array.isArray(l)?l:l.toArray()),c=0,h=0;h<u.length;h++)i(u[h],o)===0&&c++;return c}})}),GV="setPowerset",EEe=["typed","size","subset","compareNatural","Index"],SEe=Y(GV,EEe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:s}=r;return e(GV,{"Array | Matrix":function(u){if(n(t(u),new s(0))===0)return[];for(var c=Yt(Array.isArray(u)?u:u.toArray()).sort(i),h=[],d=0;d.toString(2).length<=c.length;)h.push(a(c,d.toString(2).split("").reverse())),d++;return o(h)}});function a(l,u){for(var c=[],h=0;h<u.length;h++)u[h]==="1"&&c.push(l[h]);return c}function o(l){for(var u=[],c=l.length-1;c>0;c--)for(var h=0;h<c;h++)l[h].length>l[h+1].length&&(u=l[h],l[h]=l[h+1],l[h+1]=u);return l}}),WV="setSize",TEe=["typed","compareNatural"],CEe=Y(WV,TEe,r=>{var{typed:e,compareNatural:t}=r;return e(WV,{"Array | Matrix":function(i){return Array.isArray(i)?Yt(i).length:Yt(i.toArray()).length},"Array | Matrix, boolean":function(i,s){if(s===!1||i.length===0)return Array.isArray(i)?Yt(i).length:Yt(i.toArray()).length;for(var a=Yt(Array.isArray(i)?i:i.toArray()).sort(t),o=1,l=1;l<a.length;l++)t(a[l],a[l-1])!==0&&o++;return o}})}),KV="setSymDifference",NEe=["typed","size","concat","subset","setDifference","Index"],DEe=Y(KV,NEe,r=>{var{typed:e,size:t,concat:n,subset:i,setDifference:s,Index:a}=r;return e(KV,{"Array | Matrix, Array | Matrix":function(l,u){if(i(t(l),new a(0))===0)return Yt(u);if(i(t(u),new a(0))===0)return Yt(l);var c=Yt(l),h=Yt(u);return n(s(c,h),s(h,c))}})}),XV="setUnion",MEe=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],IEe=Y(XV,MEe,r=>{var{typed:e,size:t,concat:n,subset:i,setIntersect:s,setSymDifference:a,Index:o}=r;return e(XV,{"Array | Matrix, Array | Matrix":function(u,c){if(i(t(u),new o(0))===0)return Yt(c);if(i(t(c),new o(0))===0)return Yt(u);var h=Yt(u),d=Yt(c);return n(a(h,d),s(h,d))}})}),YV="add",PEe=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],REe=Y(YV,PEe,r=>{var{typed:e,matrix:t,addScalar:n,equalScalar:i,DenseMatrix:s,SparseMatrix:a,concat:o}=r,l=zd({typed:e}),u=BF({typed:e,equalScalar:i}),c=bp({typed:e,DenseMatrix:s}),h=Ar({typed:e,matrix:t,concat:o});return e(YV,{"any, any":n,"any, any, ...any":e.referToSelf(d=>(f,p,g)=>{for(var b=d(f,p),v=0;v<g.length;v++)b=d(b,g[v]);return b})},h({elop:n,DS:l,SS:u,Ss:c}))}),QV="hypot",kEe=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],FEe=Y(QV,kEe,r=>{var{typed:e,abs:t,addScalar:n,divideScalar:i,multiplyScalar:s,sqrt:a,smaller:o,isPositive:l}=r;return e(QV,{"... number | BigNumber":u,Array:u,Matrix:c=>u(Yt(c.toArray(),!0))});function u(c){for(var h=0,d=0,f=0;f<c.length;f++){if(ac(c[f]))throw new TypeError("Unexpected type of argument to hypot");var p=t(c[f]);o(d,p)?(h=s(h,s(i(d,p),i(d,p))),h=n(h,1),d=p):h=n(h,l(p)?s(i(p,d),i(p,d)):p)}return s(d,a(h))}}),JV="norm",OEe=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],BEe=Y(JV,OEe,r=>{var{typed:e,abs:t,add:n,pow:i,conj:s,sqrt:a,multiply:o,equalScalar:l,larger:u,smaller:c,matrix:h,ctranspose:d,eigs:f}=r;return e(JV,{number:Math.abs,Complex:function(S){return S.abs()},BigNumber:function(S){return S.abs()},boolean:function(S){return Math.abs(S)},Array:function(S){return A(h(S),2)},Matrix:function(S){return A(S,2)},"Array, number | BigNumber | string":function(S,N){return A(h(S),N)},"Matrix, number | BigNumber | string":function(S,N){return A(S,N)}});function p(T){var S=0;return T.forEach(function(N){var D=t(N);u(D,S)&&(S=D)},!0),S}function g(T){var S;return T.forEach(function(N){var D=t(N);(!S||c(D,S))&&(S=D)},!0),S||0}function b(T,S){if(S===Number.POSITIVE_INFINITY||S==="inf")return p(T);if(S===Number.NEGATIVE_INFINITY||S==="-inf")return g(T);if(S==="fro")return A(T,2);if(typeof S=="number"&&!isNaN(S)){if(!l(S,0)){var N=0;return T.forEach(function(D){N=n(i(t(D),S),N)},!0),i(N,1/S)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function v(T){var S=0;return T.forEach(function(N,D){S=n(S,o(N,s(N)))}),t(a(S))}function x(T){var S=[],N=0;return T.forEach(function(D,_){var M=_[1],I=n(S[M]||0,t(D));u(I,N)&&(N=I),S[M]=I},!0),N}function y(T){var S=T.size();if(S[0]!==S[1])throw new RangeError("Invalid matrix dimensions");var N=d(T),D=o(N,T),_=f(D).values.toArray(),M=_[_.length-1];return t(a(M))}function E(T){var S=[],N=0;return T.forEach(function(D,_){var M=_[0],I=n(S[M]||0,t(D));u(I,N)&&(N=I),S[M]=I},!0),N}function w(T,S){if(S===1)return x(T);if(S===Number.POSITIVE_INFINITY||S==="inf")return E(T);if(S==="fro")return v(T);if(S===2)return y(T);throw new Error("Unsupported parameter value "+S)}function A(T,S){var N=T.size();if(N.length===1)return b(T,S);if(N.length===2){if(N[0]&&N[1])return w(T,S);throw new RangeError("Invalid matrix dimensions")}}}),ZV="dot",LEe=["typed","addScalar","multiplyScalar","conj","size"],$Ee=Y(ZV,LEe,r=>{var{typed:e,addScalar:t,multiplyScalar:n,conj:i,size:s}=r;return e(ZV,{"Array | DenseMatrix, Array | DenseMatrix":o,"SparseMatrix, SparseMatrix":l});function a(u,c){var h=s(u),d=s(c),f,p;if(h.length===1)f=h[0];else if(h.length===2&&h[1]===1)f=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(d.length===1)p=d[0];else if(d.length===2&&d[1]===1)p=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(f!==p)throw new RangeError("Vectors must have equal length ("+f+" != "+p+")");if(f===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return f}function o(u,c){var h=a(u,c),d=ot(u)?u._data:u,f=ot(u)?u._datatype||u.getDataType():void 0,p=ot(c)?c._data:c,g=ot(c)?c._datatype||c.getDataType():void 0,b=s(u).length===2,v=s(c).length===2,x=t,y=n;if(f&&g&&f===g&&typeof f=="string"&&f!=="mixed"){var E=f;x=e.find(t,[E,E]),y=e.find(n,[E,E])}if(!b&&!v){for(var w=y(i(d[0]),p[0]),A=1;A<h;A++)w=x(w,y(i(d[A]),p[A]));return w}if(!b&&v){for(var T=y(i(d[0]),p[0][0]),S=1;S<h;S++)T=x(T,y(i(d[S]),p[S][0]));return T}if(b&&!v){for(var N=y(i(d[0][0]),p[0]),D=1;D<h;D++)N=x(N,y(i(d[D][0]),p[D]));return N}if(b&&v){for(var _=y(i(d[0][0]),p[0][0]),M=1;M<h;M++)_=x(_,y(i(d[M][0]),p[M][0]));return _}}function l(u,c){a(u,c);for(var h=u._index,d=u._values,f=c._index,p=c._values,g=0,b=t,v=n,x=0,y=0;x<h.length&&y<f.length;){var E=h[x],w=f[y];if(E<w){x++;continue}if(E>w){y++;continue}E===w&&(g=b(g,v(d[x],p[y])),x++,y++)}return g}}),VEe="trace",UEe=["typed","matrix","add"],zEe=Y(VEe,UEe,r=>{var{typed:e,matrix:t,add:n}=r;return e("trace",{Array:function(o){return i(t(o))},SparseMatrix:s,DenseMatrix:i,any:gt});function i(a){var o=a._size,l=a._data;switch(o.length){case 1:if(o[0]===1)return gt(l[0]);throw new RangeError("Matrix must be square (size: "+Pt(o)+")");case 2:{var u=o[0],c=o[1];if(u===c){for(var h=0,d=0;d<u;d++)h=n(h,l[d][d]);return h}else throw new RangeError("Matrix must be square (size: "+Pt(o)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Pt(o)+")")}}function s(a){var o=a._values,l=a._index,u=a._ptr,c=a._size,h=c[0],d=c[1];if(h===d){var f=0;if(o.length>0)for(var p=0;p<d;p++)for(var g=u[p],b=u[p+1],v=g;v<b;v++){var x=l[v];if(x===p){f=n(f,o[v]);break}if(x>p)break}return f}throw new RangeError("Matrix must be square (size: "+Pt(c)+")")}}),e8="index",jEe=["typed","Index"],qEe=Y(e8,jEe,r=>{var{typed:e,Index:t}=r;return e(e8,{"...number | string | BigNumber | Range | Array | Matrix":function(i){var s=i.map(function(o){return xt(o)?o.toNumber():cr(o)||ot(o)?o.map(function(l){return xt(l)?l.toNumber():l}):o}),a=new t;return t.apply(a,s),a}})}),aY=new Set(["end"]),HEe="Node",GEe=["mathWithTransform"],WEe=Y(HEe,GEe,r=>{var{mathWithTransform:e}=r;function t(i){for(var s of[...aY])if(i.has(s))throw new Error('Scope contains an illegal symbol, "'+s+'" is a reserved keyword')}class n{get type(){return"Node"}get isNode(){return!0}evaluate(s){return this.compile().evaluate(s)}compile(){var s=this._compile(e,{}),a={},o=null;function l(u){var c=$g(u);return t(c),s(c,a,o)}return{evaluate:l}}_compile(s,a){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(s){throw new Error("Cannot run forEach on a Node interface")}map(s){throw new Error("Cannot run map on a Node interface")}_ifNode(s){if(!sr(s))throw new TypeError("Callback function must return a Node");return s}traverse(s){s(this,null,null);function a(o,l){o.forEach(function(u,c,h){l(u,c,h),a(u,l)})}a(this,s)}transform(s){function a(o,l,u){var c=s(o,l,u);return c!==o?c:o.map(a)}return a(this,null,null)}filter(s){var a=[];return this.traverse(function(o,l,u){s(o,l,u)&&a.push(o)}),a}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(s){return s.cloneDeep()})}equals(s){return s?this.type===s.type&&Sc(this,s):!1}toString(s){var a=this._getCustomString(s);return typeof a<"u"?a:this._toString(s)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(s){var a=this._getCustomString(s);return typeof a<"u"?a:this._toHTML(s)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(s){var a=this._getCustomString(s);return typeof a<"u"?a:this._toTex(s)}_toTex(s){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(s){if(s&&typeof s=="object")switch(typeof s.handler){case"object":case"undefined":return;case"function":return s.handler(this,s);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return n},{isClass:!0,isNode:!0});function Ts(r){return r&&r.isIndexError?new Qo(r.index+1,r.min+1,r.max!==void 0?r.max+1:void 0):r}function oY(r){var{subset:e}=r;return function(n,i){try{if(Array.isArray(n))return e(n,i);if(n&&typeof n.subset=="function")return n.subset(i);if(typeof n=="string")return e(n,i);if(typeof n=="object"){if(!i.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return ys(n,i.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(s){throw Ts(s)}}}var yA="AccessorNode",KEe=["subset","Node"],XEe=Y(yA,KEe,r=>{var{subset:e,Node:t}=r,n=oY({subset:e});function i(a){return!(Ac(a)||Ja(a)||Vt(a)||Td(a)||QC(a)||Ec(a)||hi(a))}class s extends t{constructor(o,l){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(super(),!sr(o))throw new TypeError('Node expected for parameter "object"');if(!J0(l))throw new TypeError('IndexNode expected for parameter "index"');this.object=o,this.index=l,this.optionalChaining=u}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return yA}get isAccessorNode(){return!0}_compile(o,l){var u=this.object._compile(o,l),c=this.index._compile(o,l),h=this.optionalChaining,d=Ac(this.object)&&this.object.optionalChaining;if(this.index.isObjectProperty()){var f=this.index.getObjectProperty();return function(g,b,v){var x=v||{},y=u(g,b,x);if(h&&y==null){x.optionalShortCircuit=!0;return}if(!(d&&x!==null&&x!==void 0&&x.optionalShortCircuit))return ys(y,f)}}else return function(g,b,v){var x=v||{},y=u(g,b,x);if(h&&y==null){x.optionalShortCircuit=!0;return}if(!(d&&x!==null&&x!==void 0&&x.optionalShortCircuit)){var E=c(g,b,y);return n(y,E)}}}forEach(o){o(this.object,"object",this),o(this.index,"index",this)}map(o){return new s(this._ifNode(o(this.object,"object",this)),this._ifNode(o(this.index,"index",this)),this.optionalChaining)}clone(){return new s(this.object,this.index,this.optionalChaining)}_toString(o){var l=this.object.toString(o);i(this.object)&&(l="("+l+")");var u=this.optionalChaining?this.index.dotNotation?"?":"?.":"";return l+u+this.index.toString(o)}_toHTML(o){var l=this.object.toHTML(o);return i(this.object)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+this.index.toHTML(o)}_toTex(o){var l=this.object.toTex(o);return i(this.object)&&(l="\\left(' + object + '\\right)"),l+this.index.toTex(o)}toJSON(){return{mathjs:yA,object:this.object,index:this.index,optionalChaining:this.optionalChaining}}static fromJSON(o){return new s(o.object,o.index,o.optionalChaining)}}return Rn(s,"name",yA),s},{isClass:!0,isNode:!0}),bA="ArrayNode",YEe=["Node"],QEe=Y(bA,YEe,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),this.items=i||[],!Array.isArray(this.items)||!this.items.every(sr))throw new TypeError("Array containing Nodes expected")}get type(){return bA}get isArrayNode(){return!0}_compile(i,s){var a=cd(this.items,function(u){return u._compile(i,s)}),o=i.config.matrix!=="Array";if(o){var l=i.matrix;return function(c,h,d){return l(cd(a,function(f){return f(c,h,d)}))}}else return function(c,h,d){return cd(a,function(f){return f(c,h,d)})}}forEach(i){for(var s=0;s<this.items.length;s++){var a=this.items[s];i(a,"items["+s+"]",this)}}map(i){for(var s=[],a=0;a<this.items.length;a++)s[a]=this._ifNode(i(this.items[a],"items["+a+"]",this));return new t(s)}clone(){return new t(this.items.slice(0))}_toString(i){var s=this.items.map(function(a){return a.toString(i)});return"["+s.join(", ")+"]"}toJSON(){return{mathjs:bA,items:this.items}}static fromJSON(i){return new t(i.items)}_toHTML(i){var s=this.items.map(function(a){return a.toHTML(i)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){function s(a,o){var l=a.some(Ja)&&!a.every(Ja),u=o||l,c=u?"&":"\\\\",h=a.map(function(d){return d.items?s(d.items,!o):d.toTex(i)}).join(c);return l||!u||u&&!o?"\\begin{bmatrix}"+h+"\\end{bmatrix}":h}return s(this.items,!1)}}return Rn(t,"name",bA),t},{isClass:!0,isNode:!0});function JEe(r){var{subset:e,matrix:t}=r;return function(i,s,a){try{if(Array.isArray(i)){var o=t(i).subset(s,a).valueOf();return o.forEach((l,u)=>{i[u]=l}),i}else{if(i&&typeof i.subset=="function")return i.subset(s,a);if(typeof i=="string")return e(i,s,a);if(typeof i=="object"){if(!s.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return N0(i,s.getObjectProperty(),a),i}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(l){throw Ts(l)}}}var Vo=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:nullish":{op:"??",associativity:"left",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function wA(r,e){if(!e||e!=="auto")return r;for(var t=r;Ec(t);)t=t.content;return t}function hr(r,e,t,n){var i=r;e!=="keep"&&(i=r.getContent());for(var s=i.getIdentifier(),a=null,o=0;o<Vo.length;o++)if(s in Vo[o]){a=o;break}if(s==="OperatorNode:multiply"&&i.implicit&&t!=="show"){var l=wA(i.args[0],e);!(Vt(l)&&n&&n.getIdentifier()==="OperatorNode:divide"&&vP(wA(n.args[0],e)))&&!(l.getIdentifier()==="OperatorNode:divide"&&vP(wA(l.args[0],e))&&Vt(wA(l.args[1])))&&(a+=1)}return a}function Vy(r,e){var t=r;e!=="keep"&&(t=r.getContent());var n=t.getIdentifier(),i=hr(t,e);if(i===null)return null;var s=Vo[i][n];if(Je(s,"associativity")){if(s.associativity==="left")return"left";if(s.associativity==="right")return"right";throw Error("'"+n+"' has the invalid associativity '"+s.associativity+"'.")}return null}function XN(r,e,t){var n=t!=="keep"?r.getContent():r,i=t!=="keep"?r.getContent():e,s=n.getIdentifier(),a=i.getIdentifier(),o=hr(n,t);if(o===null)return null;var l=Vo[o][s];if(Je(l,"associativeWith")&&l.associativeWith instanceof Array){for(var u=0;u<l.associativeWith.length;u++)if(l.associativeWith[u]===a)return!0;return!1}return null}function ZEe(r){var e="OperatorNode:"+r;for(var t of Vo)if(e in t)return t[e].op;return null}var xA="AssignmentNode",eSe=["subset","?matrix","Node"],tSe=Y(xA,eSe,r=>{var{subset:e,matrix:t,Node:n}=r,i=oY({subset:e}),s=JEe({subset:e,matrix:t});function a(l,u,c){u||(u="keep");var h=hr(l,u,c),d=hr(l.value,u,c);return u==="all"||d!==null&&d<=h}class o extends n{constructor(u,c,h){if(super(),this.object=u,this.index=h?c:null,this.value=h||c,!hi(u)&&!Ac(u))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(hi(u)&&u.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!J0(this.index))throw new TypeError('IndexNode expected as "index"');if(!sr(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return xA}get isAssignmentNode(){return!0}_compile(u,c){var h=this.object._compile(u,c),d=this.index?this.index._compile(u,c):null,f=this.value._compile(u,c),p=this.object.name;if(this.index)if(this.index.isObjectProperty()){var g=this.index.getObjectProperty();return function(E,w,A){var T=h(E,w,A),S=f(E,w,A);return N0(T,g,S),S}}else{if(hi(this.object))return function(E,w,A){var T=h(E,w,A),S=f(E,w,A),N=d(E,w,T);return E.set(p,s(T,N,S)),S};var b=this.object.object._compile(u,c);if(this.object.index.isObjectProperty()){var v=this.object.index.getObjectProperty();return function(E,w,A){var T=b(E,w,A),S=ys(T,v),N=d(E,w,S),D=f(E,w,A);return N0(T,v,s(S,N,D)),D}}else{var x=this.object.index._compile(u,c);return function(E,w,A){var T=b(E,w,A),S=x(E,w,T),N=i(T,S),D=d(E,w,N),_=f(E,w,A);return s(T,S,s(N,D,_)),_}}}else{if(!hi(this.object))throw new TypeError("SymbolNode expected as object");return function(E,w,A){var T=f(E,w,A);return E.set(p,T),T}}}forEach(u){u(this.object,"object",this),this.index&&u(this.index,"index",this),u(this.value,"value",this)}map(u){var c=this._ifNode(u(this.object,"object",this)),h=this.index?this._ifNode(u(this.index,"index",this)):null,d=this._ifNode(u(this.value,"value",this));return new o(c,h,d)}clone(){return new o(this.object,this.index,this.value)}_toString(u){var c=this.object.toString(u),h=this.index?this.index.toString(u):"",d=this.value.toString(u);return a(this,u&&u.parenthesis,u&&u.implicit)&&(d="("+d+")"),c+h+" = "+d}toJSON(){return{mathjs:xA,object:this.object,index:this.index,value:this.value}}static fromJSON(u){return new o(u.object,u.index,u.value)}_toHTML(u){var c=this.object.toHTML(u),h=this.index?this.index.toHTML(u):"",d=this.value.toHTML(u);return a(this,u&&u.parenthesis,u&&u.implicit)&&(d='<span class="math-paranthesis math-round-parenthesis">(</span>'+d+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+h+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+d}_toTex(u){var c=this.object.toTex(u),h=this.index?this.index.toTex(u):"",d=this.value.toTex(u);return a(this,u&&u.parenthesis,u&&u.implicit)&&(d="\\left(".concat(d,"\\right)")),c+h+"="+d}}return Rn(o,"name",xA),o},{isClass:!0,isNode:!0}),_A="BlockNode",rSe=["ResultSet","Node"],nSe=Y(_A,rSe,r=>{var{ResultSet:e,Node:t}=r;class n extends t{constructor(s){if(super(),!Array.isArray(s))throw new Error("Array expected");this.blocks=s.map(function(a){var o=a&&a.node,l=a&&a.visible!==void 0?a.visible:!0;if(!sr(o))throw new TypeError('Property "node" must be a Node');if(typeof l!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:o,visible:l}})}get type(){return _A}get isBlockNode(){return!0}_compile(s,a){var o=cd(this.blocks,function(l){return{evaluate:l.node._compile(s,a),visible:l.visible}});return function(u,c,h){var d=[];return zK(o,function(p){var g=p.evaluate(u,c,h);p.visible&&d.push(g)}),new e(d)}}forEach(s){for(var a=0;a<this.blocks.length;a++)s(this.blocks[a].node,"blocks["+a+"].node",this)}map(s){for(var a=[],o=0;o<this.blocks.length;o++){var l=this.blocks[o],u=this._ifNode(s(l.node,"blocks["+o+"].node",this));a[o]={node:u,visible:l.visible}}return new n(a)}clone(){var s=this.blocks.map(function(a){return{node:a.node,visible:a.visible}});return new n(s)}_toString(s){return this.blocks.map(function(a){return a.node.toString(s)+(a.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:_A,blocks:this.blocks}}static fromJSON(s){return new n(s.blocks)}_toHTML(s){return this.blocks.map(function(a){return a.node.toHTML(s)+(a.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(s){return this.blocks.map(function(a){return a.node.toTex(s)+(a.visible?"":";")}).join(`\\;\\;
`)}}return Rn(n,"name",_A),n},{isClass:!0,isNode:!0}),AA="ConditionalNode",iSe=["Node"],sSe=Y(AA,iSe,r=>{var{Node:e}=r;function t(i){if(typeof i=="number"||typeof i=="boolean"||typeof i=="string")return!!i;if(i){if(xt(i))return!i.isZero();if(ac(i))return!!(i.re||i.im);if(ba(i))return!!i.value}if(i==null)return!1;throw new TypeError('Unsupported type of condition "'+dr(i)+'"')}class n extends e{constructor(s,a,o){if(super(),!sr(s))throw new TypeError("Parameter condition must be a Node");if(!sr(a))throw new TypeError("Parameter trueExpr must be a Node");if(!sr(o))throw new TypeError("Parameter falseExpr must be a Node");this.condition=s,this.trueExpr=a,this.falseExpr=o}get type(){return AA}get isConditionalNode(){return!0}_compile(s,a){var o=this.condition._compile(s,a),l=this.trueExpr._compile(s,a),u=this.falseExpr._compile(s,a);return function(h,d,f){return t(o(h,d,f))?l(h,d,f):u(h,d,f)}}forEach(s){s(this.condition,"condition",this),s(this.trueExpr,"trueExpr",this),s(this.falseExpr,"falseExpr",this)}map(s){return new n(this._ifNode(s(this.condition,"condition",this)),this._ifNode(s(this.trueExpr,"trueExpr",this)),this._ifNode(s(this.falseExpr,"falseExpr",this)))}clone(){return new n(this.condition,this.trueExpr,this.falseExpr)}_toString(s){var a=s&&s.parenthesis?s.parenthesis:"keep",o=hr(this,a,s&&s.implicit),l=this.condition.toString(s),u=hr(this.condition,a,s&&s.implicit);(a==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=o)&&(l="("+l+")");var c=this.trueExpr.toString(s),h=hr(this.trueExpr,a,s&&s.implicit);(a==="all"||this.trueExpr.type==="OperatorNode"||h!==null&&h<=o)&&(c="("+c+")");var d=this.falseExpr.toString(s),f=hr(this.falseExpr,a,s&&s.implicit);return(a==="all"||this.falseExpr.type==="OperatorNode"||f!==null&&f<=o)&&(d="("+d+")"),l+" ? "+c+" : "+d}toJSON(){return{mathjs:AA,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(s){return new n(s.condition,s.trueExpr,s.falseExpr)}_toHTML(s){var a=s&&s.parenthesis?s.parenthesis:"keep",o=hr(this,a,s&&s.implicit),l=this.condition.toHTML(s),u=hr(this.condition,a,s&&s.implicit);(a==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=o)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(s),h=hr(this.trueExpr,a,s&&s.implicit);(a==="all"||this.trueExpr.type==="OperatorNode"||h!==null&&h<=o)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var d=this.falseExpr.toHTML(s),f=hr(this.falseExpr,a,s&&s.implicit);return(a==="all"||this.falseExpr.type==="OperatorNode"||f!==null&&f<=o)&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+d}_toTex(s){return"\\begin{cases} {"+this.trueExpr.toTex(s)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(s)+"}\\\\{"+this.falseExpr.toTex(s)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return Rn(n,"name",AA),n},{isClass:!0,isNode:!0}),FP=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},aSe={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},oSe={"":"\\--","":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},lSe=function(e,t){return FP({},e,t)},uSe=function(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.preserveFormatting,n=t===void 0?!1:t,i=e.escapeMapFn,s=i===void 0?lSe:i,a=String(r),o="",l=s(FP({},aSe),n?FP({},oSe):{}),u=Object.keys(l),c=function(){var d=!1;u.forEach(function(f,p){d||a.length>=f.length&&a.slice(0,f.length)===f&&(o+=l[u[p]],a=a.slice(f.length,a.length),d=!0)}),d||(o+=a.slice(0,1),a=a.slice(1,a.length))};a;)c();return o};const cSe=WT(uSe);var OP={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},Wt={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},t8={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(Wt.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(Wt.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(Wt.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(Wt.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(Wt.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},fraction:{2:"\\frac{${args[0]}}{${args[1]}}"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(Wt.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(Wt.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : y^${args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(Wt.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(Wt.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(Wt.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(Wt.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(Wt.bitAnd,"${args[1]}\\right)")},bitNot:{1:Wt.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(Wt.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(Wt.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(Wt.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(Wt.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(Wt.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(Wt.and,"${args[1]}\\right)")},not:{1:Wt.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(Wt.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(Wt.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(Wt.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(Wt.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(Wt.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(Wt.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(Wt.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(Wt.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(Wt.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(Wt.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(Wt.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(Wt.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(Wt.to,"${args[1]}\\right)")},numeric:function(e,t){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},bigint:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(OP.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},hSe="\\mathrm{${name}}\\left(${args}\\right)",r8={deg:"^\\circ"};function BP(r){return cSe(r,{preserveFormatting:!0})}function lY(r,e){return e=typeof e>"u"?!1:e,e?Je(r8,r)?r8[r]:"\\mathrm{"+BP(r)+"}":Je(OP,r)?OP[r]:BP(r)}var EA="ConstantNode",dSe=["Node","isBounded"],fSe=Y(EA,dSe,r=>{var{Node:e,isBounded:t}=r;class n extends e{constructor(s){super(),this.value=s}get type(){return EA}get isConstantNode(){return!0}_compile(s,a){var o=this.value;return function(){return o}}forEach(s){}map(s){return this.clone()}clone(){return new n(this.value)}_toString(s){return Pt(this.value,s)}_toHTML(s){var a=this._toString(s);switch(dr(this.value)){case"number":case"bigint":case"BigNumber":case"Fraction":return'<span class="math-number">'+a+"</span>";case"string":return'<span class="math-string">'+a+"</span>";case"boolean":return'<span class="math-boolean">'+a+"</span>";case"null":return'<span class="math-null-symbol">'+a+"</span>";case"undefined":return'<span class="math-undefined">'+a+"</span>";default:return'<span class="math-symbol">'+a+"</span>"}}toJSON(){return{mathjs:EA,value:this.value}}static fromJSON(s){return new n(s.value)}_toTex(s){var a=this._toString(s),o=dr(this.value);switch(o){case"string":return"\\mathtt{"+BP(a)+"}";case"number":case"BigNumber":{if(!t(this.value))return this.value.valueOf()<0?"-\\infty":"\\infty";var l=a.toLowerCase().indexOf("e");return l!==-1?a.substring(0,l)+"\\cdot10^{"+a.substring(l+1)+"}":a}case"bigint":return a.toString();case"Fraction":return this.value.toLatex();default:return a}}}return Rn(n,"name",EA),n},{isClass:!0,isNode:!0}),SA="FunctionAssignmentNode",mSe=["typed","Node"],pSe=Y(SA,mSe,r=>{var{typed:e,Node:t}=r;function n(s,a,o){var l=hr(s,a,o),u=hr(s.expr,a,o);return a==="all"||u!==null&&u<=l}class i extends t{constructor(a,o,l){if(super(),typeof a!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(o))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!sr(l))throw new TypeError('Node expected for parameter "expr"');if(aY.has(a))throw new Error('Illegal function name, "'+a+'" is a reserved keyword');var u=new Set;for(var c of o){var h=typeof c=="string"?c:c.name;if(u.has(h))throw new Error('Duplicate parameter name "'.concat(h,'"'));u.add(h)}this.name=a,this.params=o.map(function(d){return d&&d.name||d}),this.types=o.map(function(d){return d&&d.type||"any"}),this.expr=l}get type(){return SA}get isFunctionAssignmentNode(){return!0}_compile(a,o){var l=Object.create(o);zK(this.params,function(g){l[g]=!0});var u=this.expr,c=u._compile(a,l),h=this.name,d=this.params,f=Z5(this.types,","),p=h+"("+Z5(this.params,", ")+")";return function(b,v,x){var y={};y[f]=function(){for(var w=Object.create(v),A=0;A<d.length;A++)w[d[A]]=arguments[A];return c(b,w,x)};var E=e(h,y);return E.syntax=p,E.expr=u.toString(),b.set(h,E),E}}forEach(a){a(this.expr,"expr",this)}map(a){var o=this._ifNode(a(this.expr,"expr",this));return new i(this.name,this.params.slice(0),o)}clone(){return new i(this.name,this.params.slice(0),this.expr)}_toString(a){var o=a&&a.parenthesis?a.parenthesis:"keep",l=this.expr.toString(a);return n(this,o,a&&a.implicit)&&(l="("+l+")"),this.name+"("+this.params.join(", ")+") = "+l}toJSON(){var a=this.types;return{mathjs:SA,name:this.name,params:this.params.map(function(o,l){return{name:o,type:a[l]}}),expr:this.expr}}static fromJSON(a){return new i(a.name,a.params,a.expr)}_toHTML(a){for(var o=a&&a.parenthesis?a.parenthesis:"keep",l=[],u=0;u<this.params.length;u++)l.push('<span class="math-symbol math-parameter">'+ro(this.params[u])+"</span>");var c=this.expr.toHTML(a);return n(this,o,a&&a.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+ro(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+l.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(a){var o=a&&a.parenthesis?a.parenthesis:"keep",l=this.expr.toTex(a);return n(this,o,a&&a.implicit)&&(l="\\left(".concat(l,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(lY).join(",")+"\\right)="+l}}return Rn(i,"name",SA),i},{isClass:!0,isNode:!0}),TA="IndexNode",gSe=["Node","size"],vSe=Y(TA,gSe,r=>{var{Node:e,size:t}=r;class n extends e{constructor(s,a){if(super(),this.dimensions=s,this.dotNotation=a||!1,!Array.isArray(s)||!s.every(sr))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return TA}get isIndexNode(){return!0}_compile(s,a){var o=cd(this.dimensions,function(u,c){var h=u.filter(p=>p.isSymbolNode&&p.name==="end").length>0;if(h){var d=Object.create(a);d.end=!0;var f=u._compile(s,d);return function(g,b,v){if(!ot(v)&&!cr(v)&&!fn(v))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+dr(v));var x=t(v),y=Object.create(b);return y.end=x[c],f(g,y,v)}}else return u._compile(s,a)}),l=ys(s,"index");return function(c,h,d){var f=cd(o,function(p){return p(c,h,d)});return l(...f)}}forEach(s){for(var a=0;a<this.dimensions.length;a++)s(this.dimensions[a],"dimensions["+a+"]",this)}map(s){for(var a=[],o=0;o<this.dimensions.length;o++)a[o]=this._ifNode(s(this.dimensions[o],"dimensions["+o+"]",this));return new n(a,this.dotNotation)}clone(){return new n(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&Vt(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(s){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:TA,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(s){return new n(s.dimensions,s.dotNotation)}_toHTML(s){for(var a=[],o=0;o<this.dimensions.length;o++)a[o]=this.dimensions[o].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+ro(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(s){var a=this.dimensions.map(function(o){return o.toTex(s)});return this.dotNotation?"."+this.getObjectProperty():"_{"+a.join(",")+"}"}}return Rn(n,"name",TA),n},{isClass:!0,isNode:!0}),CA="ObjectNode",ySe=["Node"],bSe=Y(CA,ySe,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),this.properties=i||{},i&&(typeof i!="object"||!Object.keys(i).every(function(s){return sr(i[s])})))throw new TypeError("Object containing Nodes expected")}get type(){return CA}get isObjectNode(){return!0}_compile(i,s){var a={};for(var o in this.properties)if(Je(this.properties,o)){var l=_g(o),u=JSON.parse(l),c=ys(this.properties,o);a[u]=c._compile(i,s)}return function(d,f,p){var g={};for(var b in a)Je(a,b)&&(g[b]=a[b](d,f,p));return g}}forEach(i){for(var s in this.properties)Je(this.properties,s)&&i(this.properties[s],"properties["+_g(s)+"]",this)}map(i){var s={};for(var a in this.properties)Je(this.properties,a)&&(s[a]=this._ifNode(i(this.properties[a],"properties["+_g(a)+"]",this)));return new t(s)}clone(){var i={};for(var s in this.properties)Je(this.properties,s)&&(i[s]=this.properties[s]);return new t(i)}_toString(i){var s=[];for(var a in this.properties)Je(this.properties,a)&&s.push(_g(a)+": "+this.properties[a].toString(i));return"{"+s.join(", ")+"}"}toJSON(){return{mathjs:CA,properties:this.properties}}static fromJSON(i){return new t(i.properties)}_toHTML(i){var s=[];for(var a in this.properties)Je(this.properties,a)&&s.push('<span class="math-symbol math-property">'+ro(a)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[a].toHTML(i));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(i){var s=[];for(var a in this.properties)Je(this.properties,a)&&s.push("\\mathbf{"+a+":} & "+this.properties[a].toTex(i)+"\\\\");var o="\\left\\{\\begin{array}{ll}"+s.join(`
`)+"\\end{array}\\right\\}";return o}}return Rn(t,"name",CA),t},{isClass:!0,isNode:!0});function xb(r,e){return new fK(r,new KC(e),new Set(Object.keys(e)))}var NA="OperatorNode",wSe=["Node"],xSe=Y(NA,wSe,r=>{var{Node:e}=r;function t(s,a){var o=s;if(a==="auto")for(;Ec(o);)o=o.content;return Vt(o)?!0:wn(o)?t(o.args[0],a):!1}function n(s,a,o,l,u){var c=hr(s,a,o),h=Vy(s,a);if(a==="all"||l.length>2&&s.getIdentifier()!=="OperatorNode:add"&&s.getIdentifier()!=="OperatorNode:multiply")return l.map(function(D){switch(D.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var d;switch(l.length){case 0:d=[];break;case 1:{var f=hr(l[0],a,o,s);if(u&&f!==null){var p,g;if(a==="keep"?(p=l[0].getIdentifier(),g=s.getIdentifier()):(p=l[0].getContent().getIdentifier(),g=s.getContent().getIdentifier()),Vo[c][g].latexLeftParens===!1){d=[!1];break}if(Vo[f][p].latexParens===!1){d=[!1];break}}if(f===null){d=[!1];break}if(f<=c){d=[!0];break}d=[!1]}break;case 2:{var b,v=hr(l[0],a,o,s),x=XN(s,l[0],a);v===null?b=!1:v===c&&h==="right"&&!x||v<c?b=!0:b=!1;var y,E=hr(l[1],a,o,s),w=XN(s,l[1],a);if(E===null?y=!1:E===c&&h==="left"&&!w||E<c?y=!0:y=!1,u){var A,T,S;a==="keep"?(A=s.getIdentifier(),T=s.args[0].getIdentifier(),S=s.args[1].getIdentifier()):(A=s.getContent().getIdentifier(),T=s.args[0].getContent().getIdentifier(),S=s.args[1].getContent().getIdentifier()),v!==null&&(Vo[c][A].latexLeftParens===!1&&(b=!1),Vo[v][T].latexParens===!1&&(b=!1)),E!==null&&(Vo[c][A].latexRightParens===!1&&(y=!1),Vo[E][S].latexParens===!1&&(y=!1))}d=[b,y]}break;default:(s.getIdentifier()==="OperatorNode:add"||s.getIdentifier()==="OperatorNode:multiply")&&(d=l.map(function(D){var _=hr(D,a,o,s),M=XN(s,D,a),I=Vy(D,a);return _===null?!1:c===_&&h===I&&!M?!0:_<c}));break}if(l.length>=2&&s.getIdentifier()==="OperatorNode:multiply"&&s.implicit&&a!=="all"&&o==="hide")for(var N=1;N<d.length;++N)t(l[N],a)&&!d[N-1]&&(a!=="keep"||!Ec(l[N-1]))&&(d[N]=!0);return d}class i extends e{constructor(a,o,l,u,c){if(super(),typeof a!="string")throw new TypeError('string expected for parameter "op"');if(typeof o!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(l)||!l.every(sr))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=u===!0,this.isPercentage=c===!0,this.op=a,this.fn=o,this.args=l||[]}get type(){return NA}get isOperatorNode(){return!0}_compile(a,o){if(typeof this.fn!="string"||!DF(a,this.fn))throw a[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var l=ys(a,this.fn),u=cd(this.args,function(p){return p._compile(a,o)});if(typeof l=="function"&&l.rawArgs===!0){var c=this.args;return function(g,b,v){return l(c,a,xb(g,b))}}else if(u.length===1){var h=u[0];return function(g,b,v){return l(h(g,b,v))}}else if(u.length===2){var d=u[0],f=u[1];return function(g,b,v){return l(d(g,b,v),f(g,b,v))}}else return function(g,b,v){return l.apply(null,cd(u,function(x){return x(g,b,v)}))}}forEach(a){for(var o=0;o<this.args.length;o++)a(this.args[o],"args["+o+"]",this)}map(a){for(var o=[],l=0;l<this.args.length;l++)o[l]=this._ifNode(a(this.args[l],"args["+l+"]",this));return new i(this.op,this.fn,o,this.implicit,this.isPercentage)}clone(){return new i(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(a){var o=a&&a.parenthesis?a.parenthesis:"keep",l=a&&a.implicit?a.implicit:"hide",u=this.args,c=n(this,o,l,u,!1);if(u.length===1){var h=Vy(this,o),d=u[0].toString(a);c[0]&&(d="("+d+")");var f=/[a-zA-Z]+/.test(this.op);return h==="right"?this.op+(f?" ":"")+d:h==="left"?d+(f?" ":"")+this.op:d+this.op}else if(u.length===2){var p=u[0].toString(a),g=u[1].toString(a);return c[0]&&(p="("+p+")"),c[1]&&(g="("+g+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?p+" "+g:p+" "+this.op+" "+g}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var b=u.map(function(v,x){return v=v.toString(a),c[x]&&(v="("+v+")"),v});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?b.join(" "):b.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:NA,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(a){return new i(a.op,a.fn,a.args,a.implicit,a.isPercentage)}_toHTML(a){var o=a&&a.parenthesis?a.parenthesis:"keep",l=a&&a.implicit?a.implicit:"hide",u=this.args,c=n(this,o,l,u,!1);if(u.length===1){var h=Vy(this,o),d=u[0].toHTML(a);return c[0]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),h==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+ro(this.op)+"</span>"+d:d+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+ro(this.op)+"</span>"}else if(u.length===2){var f=u[0].toHTML(a),p=u[1].toHTML(a);return c[0]&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(p='<span class="math-parenthesis math-round-parenthesis">(</span>'+p+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?f+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+p:f+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ro(this.op)+"</span>"+p}else{var g=u.map(function(b,v){return b=b.toHTML(a),c[v]&&(b='<span class="math-parenthesis math-round-parenthesis">(</span>'+b+'<span class="math-parenthesis math-round-parenthesis">)</span>'),b});return u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?g.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):g.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ro(this.op)+"</span>"):'<span class="math-function">'+ro(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+g.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(a){var o=a&&a.parenthesis?a.parenthesis:"keep",l=a&&a.implicit?a.implicit:"hide",u=this.args,c=n(this,o,l,u,!0),h=Wt[this.fn];if(h=typeof h>"u"?this.op:h,u.length===1){var d=Vy(this,o),f=u[0].toTex(a);return c[0]&&(f="\\left(".concat(f,"\\right)")),d==="right"?h+f:f+h}else if(u.length===2){var p=u[0],g=p.toTex(a);c[0]&&(g="\\left(".concat(g,"\\right)"));var b=u[1],v=b.toTex(a);c[1]&&(v="\\left(".concat(v,"\\right)"));var x;switch(o==="keep"?x=p.getIdentifier():x=p.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return h+"{"+g+"}{"+v+"}";case"OperatorNode:pow":switch(g="{"+g+"}",v="{"+v+"}",x){case"ConditionalNode":case"OperatorNode:divide":g="\\left(".concat(g,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&l==="hide")return g+"~"+v}return g+h+v}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var y=u.map(function(E,w){return E=E.toTex(a),c[w]&&(E="\\left(".concat(E,"\\right)")),E});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&l==="hide"?y.join("~"):y.join(h)}else return"\\mathrm{"+this.fn+"}\\left("+u.map(function(E){return E.toTex(a)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return Rn(i,"name",NA),i},{isClass:!0,isNode:!0}),DA="ParenthesisNode",_Se=["Node"],ASe=Y(DA,_Se,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),!sr(i))throw new TypeError('Node expected for parameter "content"');this.content=i}get type(){return DA}get isParenthesisNode(){return!0}_compile(i,s){return this.content._compile(i,s)}getContent(){return this.content.getContent()}forEach(i){i(this.content,"content",this)}map(i){var s=i(this.content,"content",this);return new t(s)}clone(){return new t(this.content)}_toString(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"("+this.content.toString(i)+")":this.content.toString(i)}toJSON(){return{mathjs:DA,content:this.content}}static fromJSON(i){return new t(i.content)}_toHTML(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(i)}_toTex(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"\\left(".concat(this.content.toTex(i),"\\right)"):this.content.toTex(i)}}return Rn(t,"name",DA),t},{isClass:!0,isNode:!0}),MA="RangeNode",ESe=["Node"],SSe=Y(MA,ESe,r=>{var{Node:e}=r;function t(i,s,a){var o=hr(i,s,a),l={},u=hr(i.start,s,a);if(l.start=u!==null&&u<=o||s==="all",i.step){var c=hr(i.step,s,a);l.step=c!==null&&c<=o||s==="all"}var h=hr(i.end,s,a);return l.end=h!==null&&h<=o||s==="all",l}class n extends e{constructor(s,a,o){if(super(),!sr(s))throw new TypeError("Node expected");if(!sr(a))throw new TypeError("Node expected");if(o&&!sr(o))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=s,this.end=a,this.step=o||null}get type(){return MA}get isRangeNode(){return!0}needsEnd(){var s=this.filter(function(a){return hi(a)&&a.name==="end"});return s.length>0}_compile(s,a){var o=s.range,l=this.start._compile(s,a),u=this.end._compile(s,a);if(this.step){var c=this.step._compile(s,a);return function(d,f,p){return o(l(d,f,p),u(d,f,p),c(d,f,p))}}else return function(d,f,p){return o(l(d,f,p),u(d,f,p))}}forEach(s){s(this.start,"start",this),s(this.end,"end",this),this.step&&s(this.step,"step",this)}map(s){return new n(this._ifNode(s(this.start,"start",this)),this._ifNode(s(this.end,"end",this)),this.step&&this._ifNode(s(this.step,"step",this)))}clone(){return new n(this.start,this.end,this.step&&this.step)}_toString(s){var a=s&&s.parenthesis?s.parenthesis:"keep",o=t(this,a,s&&s.implicit),l,u=this.start.toString(s);if(o.start&&(u="("+u+")"),l=u,this.step){var c=this.step.toString(s);o.step&&(c="("+c+")"),l+=":"+c}var h=this.end.toString(s);return o.end&&(h="("+h+")"),l+=":"+h,l}toJSON(){return{mathjs:MA,start:this.start,end:this.end,step:this.step}}static fromJSON(s){return new n(s.start,s.end,s.step)}_toHTML(s){var a=s&&s.parenthesis?s.parenthesis:"keep",o=t(this,a,s&&s.implicit),l,u=this.start.toHTML(s);if(o.start&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l=u,this.step){var c=this.step.toHTML(s);o.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+c}var h=this.end.toHTML(s);return o.end&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+h,l}_toTex(s){var a=s&&s.parenthesis?s.parenthesis:"keep",o=t(this,a,s&&s.implicit),l=this.start.toTex(s);if(o.start&&(l="\\left(".concat(l,"\\right)")),this.step){var u=this.step.toTex(s);o.step&&(u="\\left(".concat(u,"\\right)")),l+=":"+u}var c=this.end.toTex(s);return o.end&&(c="\\left(".concat(c,"\\right)")),l+=":"+c,l}}return Rn(n,"name",MA),n},{isClass:!0,isNode:!0}),IA="RelationalNode",TSe=["Node"],CSe=Y(IA,TSe,r=>{var{Node:e}=r,t={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class n extends e{constructor(s,a){if(super(),!Array.isArray(s))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(a))throw new TypeError("Parameter params must be an array");if(s.length!==a.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=s,this.params=a}get type(){return IA}get isRelationalNode(){return!0}_compile(s,a){var o=this,l=this.params.map(u=>u._compile(s,a));return function(c,h,d){for(var f,p=l[0](c,h,d),g=0;g<o.conditionals.length;g++){f=p,p=l[g+1](c,h,d);var b=ys(s,o.conditionals[g]);if(!b(f,p))return!1}return!0}}forEach(s){this.params.forEach((a,o)=>s(a,"params["+o+"]",this),this)}map(s){return new n(this.conditionals.slice(),this.params.map((a,o)=>this._ifNode(s(a,"params["+o+"]",this)),this))}clone(){return new n(this.conditionals,this.params)}_toString(s){for(var a=s&&s.parenthesis?s.parenthesis:"keep",o=hr(this,a,s&&s.implicit),l=this.params.map(function(h,d){var f=hr(h,a,s&&s.implicit);return a==="all"||f!==null&&f<=o?"("+h.toString(s)+")":h.toString(s)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=" "+t[this.conditionals[c]],u+=" "+l[c+1];return u}toJSON(){return{mathjs:IA,conditionals:this.conditionals,params:this.params}}static fromJSON(s){return new n(s.conditionals,s.params)}_toHTML(s){for(var a=s&&s.parenthesis?s.parenthesis:"keep",o=hr(this,a,s&&s.implicit),l=this.params.map(function(h,d){var f=hr(h,a,s&&s.implicit);return a==="all"||f!==null&&f<=o?'<span class="math-parenthesis math-round-parenthesis">(</span>'+h.toHTML(s)+'<span class="math-parenthesis math-round-parenthesis">)</span>':h.toHTML(s)}),u=l[0],c=0;c<this.conditionals.length;c++)u+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ro(t[this.conditionals[c]])+"</span>"+l[c+1];return u}_toTex(s){for(var a=s&&s.parenthesis?s.parenthesis:"keep",o=hr(this,a,s&&s.implicit),l=this.params.map(function(h,d){var f=hr(h,a,s&&s.implicit);return a==="all"||f!==null&&f<=o?"\\left("+h.toTex(s)+"\right)":h.toTex(s)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=Wt[this.conditionals[c]]+l[c+1];return u}}return Rn(n,"name",IA),n},{isClass:!0,isNode:!0}),NSe="SymbolNode",DSe=["math","?Unit","Node"],MSe=Y(NSe,DSe,r=>{var{math:e,Unit:t,Node:n}=r;function i(a){return t?t.isValuelessUnit(a):!1}class s extends n{constructor(o){if(super(),typeof o!="string")throw new TypeError('String expected for parameter "name"');this.name=o}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(o,l){var u=this.name;if(l[u]===!0)return function(h,d,f){return ys(d,u)};if(u in o)return function(h,d,f){return h.has(u)?h.get(u):ys(o,u)};var c=i(u);return function(h,d,f){return h.has(u)?h.get(u):c?new t(null,u):s.onUndefinedSymbol(u)}}forEach(o){}map(o){return this.clone()}static onUndefinedSymbol(o){throw new Error("Undefined symbol "+o)}clone(){return new s(this.name)}_toString(o){return this.name}_toHTML(o){var l=ro(this.name);return l==="true"||l==="false"?'<span class="math-symbol math-boolean">'+l+"</span>":l==="i"?'<span class="math-symbol math-imaginary-symbol">'+l+"</span>":l==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+l+"</span>":l==="NaN"?'<span class="math-symbol math-nan-symbol">'+l+"</span>":l==="null"?'<span class="math-symbol math-null-symbol">'+l+"</span>":l==="undefined"?'<span class="math-symbol math-undefined-symbol">'+l+"</span>":'<span class="math-symbol">'+l+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(o){return new s(o.name)}_toTex(o){var l=!1;typeof e[this.name]>"u"&&i(this.name)&&(l=!0);var u=lY(this.name,l);return u[0]==="\\"?u:" "+u}}return s},{isClass:!0,isNode:!0}),PA="FunctionNode",ISe=["math","Node","SymbolNode"],PSe=Y(PA,ISe,r=>{var e,{math:t,Node:n,SymbolNode:i}=r,s=l=>Pt(l,{truncate:78});function a(l,u,c){for(var h="",d=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,f=0,p;(p=d.exec(l))!==null;)if(h+=l.substring(f,p.index),f=p.index,p[0]==="$$")h+="$",f++;else{f+=p[0].length;var g=u[p[1]];if(!g)throw new ReferenceError("Template: Property "+p[1]+" does not exist.");if(p[2]===void 0)switch(typeof g){case"string":h+=g;break;case"object":if(sr(g))h+=g.toTex(c);else if(Array.isArray(g))h+=g.map(function(b,v){if(sr(b))return b.toTex(c);throw new TypeError("Template: "+p[1]+"["+v+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes")}else if(sr(g[p[2]]&&g[p[2]]))h+=g[p[2]].toTex(c);else throw new TypeError("Template: "+p[1]+"["+p[2]+"] is not a Node.")}return h+=l.slice(f),h}class o extends n{constructor(u,c,h){if(super(),typeof u=="string"&&(u=new i(u)),!sr(u))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every(sr))throw new TypeError('Array containing Nodes expected for parameter "args"');var d=typeof h;if(!(d==="undefined"||d==="boolean"))throw new TypeError("optional flag, if specified, must be boolean");this.fn=u,this.args=c||[],this.optional=!!h}get name(){return this.fn.name||""}get type(){return PA}get isFunctionNode(){return!0}_compile(u,c){var h=this.args.map(N=>N._compile(u,c)),d=this.optional||Ac(this.fn)&&this.fn.optionalChaining;if(hi(this.fn)){var f=this.fn.name;if(c[f]){var x=this.args;return function(D,_,M){var I=ys(_,f);if(!(d&&I===void 0)){if(typeof I!="function")throw new TypeError("Argument '".concat(f,"' was not a function; received: ").concat(s(I)));if(I.rawArgs)return I(x,u,xb(D,_));var V=h.map(q=>q(D,_,M));return I.apply(I,V)}}}else{var p=f in u?ys(u,f):void 0,g=typeof p=="function"&&p.rawArgs===!0,b=N=>{var D;if(N.has(f))D=N.get(f);else if(f in u)D=ys(u,f);else if(d)D=void 0;else return o.onUndefinedFunction(f);if(typeof D=="function"||d&&D===void 0)return D;throw new TypeError("'".concat(f,`' is not a function; its value is:
  `).concat(s(D)))};if(g){var v=this.args;return function(D,_,M){var I=b(D);if(I.rawArgs===!0)return I(v,u,xb(D,_));var V=h.map(q=>q(D,_,M));return I(...V)}}else switch(h.length){case 0:return function(D,_,M){var I=b(D);if(!(d&&I===void 0))return I()};case 1:return function(D,_,M){var I=b(D);if(!(d&&I===void 0)){var V=h[0];return I(V(D,_,M))}};case 2:return function(D,_,M){var I=b(D);if(!(d&&I===void 0)){var V=h[0],q=h[1];return I(V(D,_,M),q(D,_,M))}};default:return function(D,_,M){var I=b(D);if(!(d&&I===void 0)){var V=h.map(q=>q(D,_,M));return I(...V)}}}}}else if(Ac(this.fn)&&J0(this.fn.index)&&this.fn.index.isObjectProperty()){var y=this.fn.object._compile(u,c),E=this.fn.index.getObjectProperty(),w=this.args;return function(D,_,M){var I=y(D,_,M);if(!(d&&(I==null||I[E]===void 0))){var V=Jpe(I,E);if(V!=null&&V.rawArgs)return V(w,u,xb(D,_));var q=h.map(P=>P(D,_,M));return V.apply(I,q)}}}else{var A=this.fn.toString(),T=this.fn._compile(u,c),S=this.args;return function(D,_,M){var I=T(D,_,M);if(!(d&&I===void 0)){if(typeof I!="function")throw new TypeError("Expression '".concat(A,"' did not evaluate to a function; value is:")+`
  `.concat(s(I)));if(I.rawArgs)return I(S,u,xb(D,_));var V=h.map(q=>q(D,_,M));return I.apply(I,V)}}}}forEach(u){u(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)u(this.args[c],"args["+c+"]",this)}map(u){for(var c=this._ifNode(u(this.fn,"fn",this)),h=[],d=0;d<this.args.length;d++)h[d]=this._ifNode(u(this.args[d],"args["+d+"]",this));return new o(c,h)}clone(){return new o(this.fn,this.args.slice(0))}toString(u){var c,h=this.fn.toString(u);return u&&typeof u.handler=="object"&&Je(u.handler,h)&&(c=u.handler[h](this,u)),typeof c<"u"?c:super.toString(u)}_toString(u){var c=this.args.map(function(d){return d.toString(u)}),h=n_(this.fn)?"("+this.fn.toString(u)+")":this.fn.toString(u);return h+"("+c.join(", ")+")"}toJSON(){return{mathjs:PA,fn:this.fn,args:this.args}}_toHTML(u){var c=this.args.map(function(h){return h.toHTML(u)});return'<span class="math-function">'+ro(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(u){var c;return u&&typeof u.handler=="object"&&Je(u.handler,this.name)&&(c=u.handler[this.name](this,u)),typeof c<"u"?c:super.toTex(u)}_toTex(u){var c=this.args.map(function(f){return f.toTex(u)}),h;t8[this.name]&&(h=t8[this.name]),t[this.name]&&(typeof t[this.name].toTex=="function"||typeof t[this.name].toTex=="object"||typeof t[this.name].toTex=="string")&&(h=t[this.name].toTex);var d;switch(typeof h){case"function":d=h(this,u);break;case"string":d=a(h,this,u);break;case"object":switch(typeof h[c.length]){case"function":d=h[c.length](this,u);break;case"string":d=a(h[c.length],this,u);break}}return typeof d<"u"?d:a(hSe,this,u)}getIdentifier(){return this.type+":"+this.name}}return e=o,Rn(o,"name",PA),Rn(o,"onUndefinedFunction",function(l){throw new Error("Undefined function "+l)}),Rn(o,"fromJSON",function(l){return new e(l.fn,l.args)}),o},{isClass:!0,isNode:!0}),n8="parse",RSe=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],kSe=Y(n8,RSe,r=>{var{typed:e,numeric:t,config:n,AccessorNode:i,ArrayNode:s,AssignmentNode:a,BlockNode:o,ConditionalNode:l,ConstantNode:u,FunctionAssignmentNode:c,FunctionNode:h,IndexNode:d,ObjectNode:f,OperatorNode:p,ParenthesisNode:g,RangeNode:b,RelationalNode:v,SymbolNode:x}=r,y=e(n8,{string:function(oe){return re(oe,{})},"Array | Matrix":function(oe){return E(oe,{})},"string, Object":function(oe,we){var Me=we.nodes!==void 0?we.nodes:{};return re(oe,Me)},"Array | Matrix, Object":E});function E(B){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},we=oe.nodes!==void 0?oe.nodes:{};return _t(B,function(Me){if(typeof Me!="string")throw new TypeError("String expected");return re(Me,we)})}var w={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},A={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"?.":!0,"??":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},T={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},S={true:!0,false:!1,null:null,undefined:void 0},N=["NaN","Infinity"],D={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function _(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:w.NULL,nestingLevel:0,conditionalLevel:null}}function M(B,oe){return B.expression.substr(B.index,oe)}function I(B){return M(B,1)}function V(B){B.index++}function q(B){return B.expression.charAt(B.index-1)}function P(B){return B.expression.charAt(B.index+1)}function L(B){for(B.tokenType=w.NULL,B.token="",B.comment="";;){if(I(B)==="#")for(;I(B)!==`
`&&I(B)!=="";)B.comment+=I(B),V(B);if(y.isWhitespace(I(B),B.nestingLevel))V(B);else break}if(I(B)===""){B.tokenType=w.DELIMITER;return}if(I(B)===`
`&&!B.nestingLevel){B.tokenType=w.DELIMITER,B.token=I(B),V(B);return}var oe=I(B),we=M(B,2),Me=M(B,3);if(Me.length===3&&A[Me]){B.tokenType=w.DELIMITER,B.token=Me,V(B),V(B),V(B);return}if(we.length===2&&A[we]&&(we!=="?."||!y.isDigit(B.expression.charAt(B.index+2)))){B.tokenType=w.DELIMITER,B.token=we,V(B),V(B);return}if(A[oe]){B.tokenType=w.DELIMITER,B.token=oe,V(B);return}if(y.isDigitDot(oe)){B.tokenType=w.NUMBER;var ze=M(B,2);if(ze==="0b"||ze==="0o"||ze==="0x"){for(B.token+=I(B),V(B),B.token+=I(B),V(B);y.isAlpha(I(B),q(B),P(B))||y.isDigit(I(B));)B.token+=I(B),V(B);if(I(B)===".")for(B.token+=".",V(B);y.isAlpha(I(B),q(B),P(B))||y.isDigit(I(B));)B.token+=I(B),V(B);else if(I(B)==="i")for(B.token+="i",V(B);y.isDigit(I(B));)B.token+=I(B),V(B);return}if(I(B)==="."){if(B.token+=I(B),V(B),!y.isDigit(I(B))){B.tokenType=w.DELIMITER;return}}else{for(;y.isDigit(I(B));)B.token+=I(B),V(B);y.isDecimalMark(I(B),P(B))&&(B.token+=I(B),V(B))}for(;y.isDigit(I(B));)B.token+=I(B),V(B);if(I(B)==="E"||I(B)==="e"){if(y.isDigit(P(B))||P(B)==="-"||P(B)==="+"){if(B.token+=I(B),V(B),(I(B)==="+"||I(B)==="-")&&(B.token+=I(B),V(B)),!y.isDigit(I(B)))throw lt(B,'Digit expected, got "'+I(B)+'"');for(;y.isDigit(I(B));)B.token+=I(B),V(B);if(y.isDecimalMark(I(B),P(B)))throw lt(B,'Digit expected, got "'+I(B)+'"')}else if(y.isDecimalMark(P(B),B.expression.charAt(B.index+2)))throw V(B),lt(B,'Digit expected, got "'+I(B)+'"')}return}if(y.isAlpha(I(B),q(B),P(B))){for(;y.isAlpha(I(B),q(B),P(B))||y.isDigit(I(B));)B.token+=I(B),V(B);Je(T,B.token)?B.tokenType=w.DELIMITER:B.tokenType=w.SYMBOL;return}for(B.tokenType=w.UNKNOWN;I(B)!=="";)B.token+=I(B),V(B);throw lt(B,'Syntax error in part "'+B.token+'"')}function $(B){do L(B);while(B.token===`
`)}function z(B){B.nestingLevel++}function K(B){B.nestingLevel--}y.isAlpha=function(oe,we,Me){return y.isValidLatinOrGreek(oe)||y.isValidMathSymbol(oe,Me)||y.isValidMathSymbol(we,oe)},y.isValidLatinOrGreek=function(oe){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(oe)},y.isValidMathSymbol=function(oe,we){return/^[\uD835]$/.test(oe)&&/^[\uDC00-\uDFFF]$/.test(we)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(we)},y.isWhitespace=function(oe,we){return oe===" "||oe==="	"||oe===""||oe===`
`&&we>0},y.isDecimalMark=function(oe,we){return oe==="."&&we!=="/"&&we!=="*"&&we!=="^"},y.isDigitDot=function(oe){return oe>="0"&&oe<="9"||oe==="."},y.isDigit=function(oe){return oe>="0"&&oe<="9"};function re(B,oe){var we=_();_n(we,{expression:B,extraNodes:oe}),L(we);var Me=Q(we);if(we.token!=="")throw we.tokenType===w.DELIMITER?pr(we,"Unexpected operator "+we.token):lt(we,'Unexpected part "'+we.token+'"');return Me}function Q(B){var oe,we=[],Me;for(B.token!==""&&B.token!==`
`&&B.token!==";"&&(oe=O(B),B.comment&&(oe.comment=B.comment));B.token===`
`||B.token===";";)we.length===0&&oe&&(Me=B.token!==";",we.push({node:oe,visible:Me})),L(B),B.token!==`
`&&B.token!==";"&&B.token!==""&&(oe=O(B),B.comment&&(oe.comment=B.comment),Me=B.token!==";",we.push({node:oe,visible:Me}));return we.length>0?new o(we):(oe||(oe=new u(void 0),B.comment&&(oe.comment=B.comment)),oe)}function O(B){var oe,we,Me,ze,ut=te(B);if(B.token==="="){if(hi(ut))return oe=ut.name,$(B),Me=O(B),new a(new x(oe),Me);if(Ac(ut)){if(ut.optionalChaining)throw lt(B,"Cannot assign to optional chain");return $(B),Me=O(B),new a(ut.object,ut.index,Me)}else if(Td(ut)&&hi(ut.fn)&&(ze=!0,we=[],oe=ut.name,ut.args.forEach(function(gn,Pa){hi(gn)?we[Pa]=gn.name:ze=!1}),ze))return $(B),Me=O(B),new c(oe,we,Me);throw lt(B,"Invalid left hand side of assignment operator =")}return ut}function te(B){for(var oe=W(B);B.token==="?";){var we=B.conditionalLevel;B.conditionalLevel=B.nestingLevel,$(B);var Me=oe,ze=O(B);if(B.token!==":")throw lt(B,"False part of conditional expression expected");B.conditionalLevel=null,$(B);var ut=O(B);oe=new l(Me,ze,ut),B.conditionalLevel=we}return oe}function W(B){for(var oe=de(B);B.token==="or";)$(B),oe=new p("or","or",[oe,de(B)]);return oe}function de(B){for(var oe=fe(B);B.token==="xor";)$(B),oe=new p("xor","xor",[oe,fe(B)]);return oe}function fe(B){for(var oe=ne(B);B.token==="and";)$(B),oe=new p("and","and",[oe,ne(B)]);return oe}function ne(B){for(var oe=X(B);B.token==="|";)$(B),oe=new p("|","bitOr",[oe,X(B)]);return oe}function X(B){for(var oe=se(B);B.token==="^|";)$(B),oe=new p("^|","bitXor",[oe,se(B)]);return oe}function se(B){for(var oe=me(B);B.token==="&";)$(B),oe=new p("&","bitAnd",[oe,me(B)]);return oe}function me(B){for(var oe=[ue(B)],we=[],Me={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};Je(Me,B.token);){var ze={name:B.token,fn:Me[B.token]};we.push(ze),$(B),oe.push(ue(B))}return oe.length===1?oe[0]:oe.length===2?new p(we[0].name,we[0].fn,oe):new v(we.map(ut=>ut.fn),oe)}function ue(B){var oe,we,Me,ze;oe=be(B);for(var ut={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};Je(ut,B.token);)we=B.token,Me=ut[we],$(B),ze=[oe,be(B)],oe=new p(we,Me,ze);return oe}function be(B){var oe,we,Me,ze;oe=ye(B);for(var ut={to:"to",in:"to"};Je(ut,B.token);)we=B.token,Me=ut[we],$(B),we==="in"&&"])},;".includes(B.token)?oe=new p("*","multiply",[oe,new x("in")],!0):(ze=[oe,ye(B)],oe=new p(we,Me,ze));return oe}function ye(B){var oe,we=[];if(B.token===":"?oe=new u(1):oe=Ie(B),B.token===":"&&B.conditionalLevel!==B.nestingLevel){for(we.push(oe);B.token===":"&&we.length<3;)$(B),B.token===")"||B.token==="]"||B.token===","||B.token===""?we.push(new x("end")):we.push(Ie(B));we.length===3?oe=new b(we[0],we[2],we[1]):oe=new b(we[0],we[1])}return oe}function Ie(B){var oe,we,Me,ze;oe=Ue(B);for(var ut={"+":"add","-":"subtract"};Je(ut,B.token);){we=B.token,Me=ut[we],$(B);var gn=Ue(B);gn.isPercentage?ze=[oe,new p("*","multiply",[oe,gn])]:ze=[oe,gn],oe=new p(we,Me,ze)}return oe}function Ue(B){var oe,we,Me,ze;oe=We(B),we=oe;for(var ut={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};Je(ut,B.token);)Me=B.token,ze=ut[Me],$(B),we=We(B),oe=new p(Me,ze,[oe,we]);return oe}function We(B){var oe,we;for(oe=Be(B),we=oe;B.tokenType===w.SYMBOL||B.token==="in"&&Vt(oe)||B.token==="in"&&wn(oe)&&oe.fn==="unaryMinus"&&Vt(oe.args[0])||B.tokenType===w.NUMBER&&!Vt(we)&&(!wn(we)||we.op==="!")||B.token==="(";)we=Be(B),oe=new p("*","multiply",[oe,we],!0);return oe}function Be(B){for(var oe=$e(B),we=oe,Me=[];B.token==="/"&&vP(we);)if(Me.push(_n({},B)),$(B),B.tokenType===w.NUMBER)if(Me.push(_n({},B)),$(B),B.tokenType===w.SYMBOL||B.token==="("||B.token==="in")_n(B,Me.pop()),Me.pop(),we=$e(B),oe=new p("/","divide",[oe,we]);else{Me.pop(),_n(B,Me.pop());break}else{_n(B,Me.pop());break}return oe}function $e(B){var oe=He(B);if(B.token==="%"){var we=_n({},B);$(B);try{He(B),_n(B,we)}catch{oe=new p("/","divide",[oe,new u(100)],!1,!0)}}return oe}function He(B){var oe,we,Me,ze={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return Je(ze,B.token)?(Me=ze[B.token],oe=B.token,$(B),we=[He(B)],new p(oe,Me,we)):ee(B)}function ee(B){var oe,we,Me,ze;return oe=le(B),(B.token==="^"||B.token===".^")&&(we=B.token,Me=we==="^"?"pow":"dotPow",$(B),ze=[oe,He(B)],oe=new p(we,Me,ze)),oe}function le(B){for(var oe=G(B);B.token==="??";)$(B),oe=new p("??","nullish",[oe,G(B)]);return oe}function G(B){var oe,we,Me,ze;oe=J(B);for(var ut={"!":"factorial","'":"ctranspose"};Je(ut,B.token);)we=B.token,Me=ut[we],L(B),ze=[oe],oe=new p(we,Me,ze),oe=ce(B,oe);return oe}function J(B){var oe=[];if(B.tokenType===w.SYMBOL&&Je(B.extraNodes,B.token)){var we=B.extraNodes[B.token];if(L(B),B.token==="("){if(oe=[],z(B),L(B),B.token!==")")for(oe.push(O(B));B.token===",";)L(B),oe.push(O(B));if(B.token!==")")throw lt(B,"Parenthesis ) expected");K(B),L(B)}return new we(oe)}return ae(B)}function ae(B){var oe,we;return B.tokenType===w.SYMBOL||B.tokenType===w.DELIMITER&&B.token in T?(we=B.token,L(B),Je(S,we)?oe=new u(S[we]):N.includes(we)?oe=new u(t(we,"number")):oe=new x(we),oe=ce(B,oe),oe):ge(B)}function ce(B,oe,we){for(var Me;;){var ze=!1;B.token==="?."&&(ze=!0,L(B));var ut=(B.token==="("||B.token==="["||B.token===".")&&!0;if(!(ze||ut))break;if(Me=[],B.token==="(")if(ze||hi(oe)||Ac(oe)){if(z(B),L(B),B.token!==")")for(Me.push(O(B));B.token===",";)L(B),Me.push(O(B));if(B.token!==")")throw lt(B,"Parenthesis ) expected");K(B),L(B),oe=new h(oe,Me,ze)}else return oe;else if(B.token==="["){if(z(B),L(B),B.token!=="]")for(Me.push(O(B));B.token===",";)L(B),Me.push(O(B));if(B.token!=="]")throw lt(B,"Parenthesis ] expected");K(B),L(B),oe=new i(oe,new d(Me),ze)}else{ze||L(B);var gn=B.tokenType===w.SYMBOL||B.tokenType===w.DELIMITER&&B.token in T;if(!gn){var Pa="Property name expected after ";throw Pa+=ze?"optional chain":"dot",lt(B,Pa)}Me.push(new u(B.token)),L(B);var cy=!0;oe=new i(oe,new d(Me,cy),ze)}}return oe}function ge(B){var oe,we;return B.token==='"'||B.token==="'"?(we=pe(B,B.token),oe=new u(we),oe=ce(B,oe),oe):Ne(B)}function pe(B,oe){for(var we="";I(B)!==""&&I(B)!==oe;)if(I(B)==="\\"){V(B);var Me=I(B),ze=D[Me];if(ze!==void 0)we+=ze,B.index+=1;else if(Me==="u"){var ut=B.expression.slice(B.index+1,B.index+5);if(/^[0-9A-Fa-f]{4}$/.test(ut))we+=String.fromCharCode(parseInt(ut,16)),B.index+=5;else throw lt(B,"Invalid unicode character \\u".concat(ut))}else throw lt(B,"Bad escape character \\".concat(Me))}else we+=I(B),V(B);if(L(B),B.token!==oe)throw lt(B,"End of string ".concat(oe," expected"));return L(B),we}function Ne(B){var oe,we,Me,ze;if(B.token==="["){if(z(B),L(B),B.token!=="]"){var ut=Ee(B);if(B.token===";"){for(Me=1,we=[ut];B.token===";";)L(B),B.token!=="]"&&(we[Me]=Ee(B),Me++);if(B.token!=="]")throw lt(B,"End of matrix ] expected");K(B),L(B),ze=we[0].items.length;for(var gn=1;gn<Me;gn++)if(we[gn].items.length!==ze)throw pr(B,"Column dimensions mismatch ("+we[gn].items.length+" !== "+ze+")");oe=new s(we)}else{if(B.token!=="]")throw lt(B,"End of matrix ] expected");K(B),L(B),oe=ut}}else K(B),L(B),oe=new s([]);return ce(B,oe)}return Oe(B)}function Ee(B){for(var oe=[O(B)],we=1;B.token===",";)L(B),B.token!=="]"&&B.token!==";"&&(oe[we]=O(B),we++);return new s(oe)}function Oe(B){if(B.token==="{"){z(B);var oe,we={};do if(L(B),B.token!=="}"){if(B.token==='"'||B.token==="'")oe=pe(B,B.token);else if(B.tokenType===w.SYMBOL||B.tokenType===w.DELIMITER&&B.token in T)oe=B.token,L(B);else throw lt(B,"Symbol or string expected as object key");if(B.token!==":")throw lt(B,"Colon : expected after object key");L(B),we[oe]=O(B)}while(B.token===",");if(B.token!=="}")throw lt(B,"Comma , or bracket } expected after object value");K(B),L(B);var Me=new f(we);return Me=ce(B,Me),Me}return Se(B)}function Se(B){var oe;if(B.tokenType===w.NUMBER){oe=B.token,L(B);var we=Vd(oe,n),Me=t(oe,we);return new u(Me)}return et(B)}function et(B){var oe;if(B.token==="("){if(z(B),L(B),oe=O(B),B.token!==")")throw lt(B,"Parenthesis ) expected");return K(B),L(B),oe=new g(oe),oe=ce(B,oe),oe}return Ct(B)}function Ct(B){throw B.token===""?lt(B,"Unexpected end of expression"):lt(B,"Value expected")}function zt(B){return B.index-B.token.length+1}function lt(B,oe){var we=zt(B),Me=new SyntaxError(oe+" (char "+we+")");return Me.char=we,Me}function pr(B,oe){var we=zt(B),Me=new SyntaxError(oe+" (char "+we+")");return Me.char=we,Me}return e.addConversion({from:"string",to:"Node",convert:y}),y}),i8="compile",FSe=["typed","parse"],OSe=Y(i8,FSe,r=>{var{typed:e,parse:t}=r;return e(i8,{string:function(i){return t(i).compile()},"Array | Matrix":function(i){return _t(i,function(s){return t(s).compile()})}})}),s8="evaluate",BSe=["typed","parse"],LSe=Y(s8,BSe,r=>{var{typed:e,parse:t}=r;return e(s8,{string:function(i){var s=P1();return t(i).compile().evaluate(s)},"string, Map | Object":function(i,s){return t(i).compile().evaluate(s)},"Array | Matrix":function(i){var s=P1();return _t(i,function(a){return t(a).compile().evaluate(s)})},"Array | Matrix, Map | Object":function(i,s){return _t(i,function(a){return t(a).compile().evaluate(s)})}})}),$Se="Parser",VSe=["evaluate","parse"],USe=Y($Se,VSe,r=>{var{evaluate:e,parse:t}=r;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:P1(),writable:!1})}n.prototype.type="Parser",n.prototype.isParser=!0,n.prototype.evaluate=function(s){return e(s,this.scope)},n.prototype.get=function(s){if(this.scope.has(s))return this.scope.get(s)},n.prototype.getAll=function(){return rge(this.scope)},n.prototype.getAllAsMap=function(){return this.scope};function i(s){if(s.length===0)return!1;for(var a=0;a<s.length;a++){var o=s.charAt(a-1),l=s.charAt(a),u=s.charAt(a+1),c=t.isAlpha(l,o,u)||a>0&&t.isDigit(l);if(!c)return!1}return!0}return n.prototype.set=function(s,a){if(!i(s))throw new Error("Invalid variable name: '".concat(s,"'. Variable names must follow the specified rules."));return this.scope.set(s,a),a},n.prototype.remove=function(s){this.scope.delete(s)},n.prototype.clear=function(){this.scope.clear()},n.prototype.toJSON=function(){var s={mathjs:"Parser",variables:{},functions:{}};for(var[a,o]of this.scope)if(gK(o)){if(!zSe(o))throw new Error("Cannot serialize external function ".concat(a));s.functions[a]="".concat(o.syntax," = ").concat(o.expr)}else s.variables[a]=o;return s},n.fromJSON=function(s){var a=new n;return Object.entries(s.variables).forEach(o=>{var[l,u]=o;return a.set(l,u)}),Object.entries(s.functions).forEach(o=>{var[l,u]=o;return a.evaluate(u)}),a},n},{isClass:!0});function zSe(r){return typeof r=="function"&&typeof r.syntax=="string"&&typeof r.expr=="string"}var a8="parser",jSe=["typed","Parser"],qSe=Y(a8,jSe,r=>{var{typed:e,Parser:t}=r;return e(a8,{"":function(){return new t}})}),o8="lup",HSe=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],GSe=Y(o8,HSe,r=>{var{typed:e,matrix:t,abs:n,addScalar:i,divideScalar:s,multiplyScalar:a,subtractScalar:o,larger:l,equalScalar:u,unaryMinus:c,DenseMatrix:h,SparseMatrix:d,Spa:f}=r;return e(o8,{DenseMatrix:function(v){return p(v)},SparseMatrix:function(v){return g(v)},Array:function(v){var x=t(v),y=p(x);return{L:y.L.valueOf(),U:y.U.valueOf(),p:y.p}}});function p(b){var v=b._size[0],x=b._size[1],y=Math.min(v,x),E=gt(b._data),w=[],A=[v,y],T=[],S=[y,x],N,D,_,M=[];for(N=0;N<v;N++)M[N]=N;for(D=0;D<x;D++){if(D>0)for(N=0;N<v;N++){var I=Math.min(N,D),V=0;for(_=0;_<I;_++)V=i(V,a(E[N][_],E[_][D]));E[N][D]=o(E[N][D],V)}var q=D,P=0,L=0;for(N=D;N<v;N++){var $=E[N][D],z=n($);l(z,P)&&(q=N,P=z,L=$)}if(D!==q&&(M[D]=[M[q],M[q]=M[D]][0],h._swapRows(D,q,E)),D<v)for(N=D+1;N<v;N++){var K=E[N][D];u(K,0)||(E[N][D]=s(E[N][D],L))}}for(D=0;D<x;D++)for(N=0;N<v;N++){if(D===0&&(N<x&&(T[N]=[]),w[N]=[]),N<D){N<x&&(T[N][D]=E[N][D]),D<v&&(w[N][D]=0);continue}if(N===D){N<x&&(T[N][D]=E[N][D]),D<v&&(w[N][D]=1);continue}N<x&&(T[N][D]=0),D<v&&(w[N][D]=E[N][D])}var re=new h({data:w,size:A}),Q=new h({data:T,size:S}),O=[];for(N=0,y=M.length;N<y;N++)O[M[N]]=N;return{L:re,U:Q,p:O,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function g(b){var v=b._size[0],x=b._size[1],y=Math.min(v,x),E=b._values,w=b._index,A=b._ptr,T=[],S=[],N=[],D=[v,y],_=[],M=[],I=[],V=[y,x],q,P,L,$=[],z=[];for(q=0;q<v;q++)$[q]=q,z[q]=q;var K=function(O,te){var W=z[O],de=z[te];$[W]=te,$[de]=O,z[O]=de,z[te]=W},re=function(){var O=new f;P<v&&(N.push(T.length),T.push(1),S.push(P)),I.push(_.length);var te=A[P],W=A[P+1];for(L=te;L<W;L++)q=w[L],O.set($[q],E[L]);P>0&&O.forEach(0,P-1,function(X,se){d._forEachRow(X,T,S,N,function(me,ue){me>X&&O.accumulate(me,c(a(ue,se)))})});var de=P,fe=O.get(P),ne=n(fe);O.forEach(P+1,v-1,function(X,se){var me=n(se);l(me,ne)&&(de=X,ne=me,fe=se)}),P!==de&&(d._swapRows(P,de,D[1],T,S,N),d._swapRows(P,de,V[1],_,M,I),O.swap(P,de),K(P,de)),O.forEach(0,v-1,function(X,se){X<=P?(_.push(se),M.push(X)):(se=s(se,fe),u(se,0)||(T.push(se),S.push(X)))})};for(P=0;P<x;P++)re();return I.push(_.length),N.push(T.length),{L:new d({values:T,index:S,ptr:N,size:D}),U:new d({values:_,index:M,ptr:I,size:V}),p:$,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),l8="qr",WSe=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],KSe=Y(l8,WSe,r=>{var{typed:e,matrix:t,zeros:n,identity:i,isZero:s,equal:a,sign:o,sqrt:l,conj:u,unaryMinus:c,addScalar:h,divideScalar:d,multiplyScalar:f,subtractScalar:p,complex:g}=r;return _n(e(l8,{DenseMatrix:function(E){return v(E)},SparseMatrix:function(E){return x()},Array:function(E){var w=t(E),A=v(w);return{Q:A.Q.valueOf(),R:A.R.valueOf()}}}),{_denseQRimpl:b});function b(y){var E=y._size[0],w=y._size[1],A=i([E],"dense"),T=A._data,S=y.clone(),N=S._data,D,_,M,I=n([E],"");for(M=0;M<Math.min(w,E);++M){var V=N[M][M],q=c(a(V,0)?1:o(V)),P=u(q),L=0;for(D=M;D<E;D++)L=h(L,f(N[D][M],u(N[D][M])));var $=f(q,l(L));if(!s($)){var z=p(V,$);for(I[M]=1,D=M+1;D<E;D++)I[D]=d(N[D][M],z);var K=c(u(d(z,$))),re=void 0;for(_=M;_<w;_++){for(re=0,D=M;D<E;D++)re=h(re,f(u(I[D]),N[D][_]));for(re=f(re,K),D=M;D<E;D++)N[D][_]=f(p(N[D][_],f(I[D],re)),P)}for(D=0;D<E;D++){for(re=0,_=M;_<E;_++)re=h(re,f(T[D][_],I[_]));for(re=f(re,K),_=M;_<E;++_)T[D][_]=d(p(T[D][_],f(re,u(I[_]))),P)}}}return{Q:A,R:S,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function v(y){var E=b(y),w=E.R._data;if(y._data.length>0)for(var A=w[0][0].type==="Complex"?g(0):0,T=0;T<w.length;++T)for(var S=0;S<T&&S<(w[0]||[]).length;++S)w[T][S]=A;return E}function x(y){throw new Error("qr not implemented for sparse matrices yet")}});function XSe(r,e,t,n){r._values;for(var i=r._index,s=r._ptr,a=r._size,o=r._datatype,l=a[0],u=a[1],c=null,h=[],d=[],f=0,p=0;p<u;p++){d[p]=f;for(var g=t?t[p]:p,b=s[g],v=s[g+1],x=b;x<v;x++){var y=i[x];h[f]=y,f++}}return d[u]=f,r.createSparseMatrix({values:c,index:h,ptr:d,size:[l,u],datatype:o})}function uY(r,e,t,n,i,s,a){var o=0;for(t[a]=r;o>=0;){var l=t[a+o],u=t[n+l];u===-1?(o--,s[e++]=l):(t[n+l]=t[i+u],++o,t[a+o]=u)}return e}function YSe(r,e){if(!r)return null;var t=0,n,i=[],s=[],a=0,o=e,l=2*e;for(n=0;n<e;n++)s[a+n]=-1;for(n=e-1;n>=0;n--)r[n]!==-1&&(s[o+n]=s[a+r[n]],s[a+r[n]]=n);for(n=0;n<e;n++)r[n]===-1&&(t=uY(n,t,s,a,o,i,l));return i}function QSe(r,e){if(!r)return null;var t=r._index,n=r._ptr,i=r._size,s=i[0],a=i[1],o=[],l=[],u=0,c=a,h,d;for(h=0;h<s;h++)l[c+h]=-1;for(var f=0;f<a;f++){o[f]=-1,l[u+f]=-1;for(var p=n[f],g=n[f+1],b=p;b<g;b++){var v=t[b];for(h=l[c+v];h!==-1&&h<f;h=d)d=l[u+h],l[u+h]=f,d===-1&&(o[h]=f);l[c+v]=f}}return o}function JSe(r,e,t){for(var n=r._values,i=r._index,s=r._ptr,a=r._size,o=a[1],l=0,u=0;u<o;u++){var c=s[u];for(s[u]=l;c<s[u+1];c++)e(i[c],u,n?n[c]:1,t)&&(i[l]=i[c],n&&(n[l]=n[c]),l++)}return s[o]=l,i.splice(l,i.length-l),n&&n.splice(l,n.length-l),l}function Gc(r){return-r-2}var ZSe="csAmd",eTe=["add","multiply","transpose"],tTe=Y(ZSe,eTe,r=>{var{add:e,multiply:t,transpose:n}=r;return function(c,h){if(!h||c<=0||c>3)return null;var d=h._size,f=d[0],p=d[1],g=0,b=Math.max(16,10*Math.sqrt(p));b=Math.min(p-2,b);var v=i(c,h,f,p,b);JSe(v,l,null);for(var x=v._index,y=v._ptr,E=y[p],w=[],A=[],T=0,S=p+1,N=2*(p+1),D=3*(p+1),_=4*(p+1),M=5*(p+1),I=6*(p+1),V=7*(p+1),q=w,P=s(p,y,A,T,D,q,N,V,S,I,_,M),L=a(p,y,A,M,_,I,b,S,D,q,N),$=0,z,K,re,Q,O,te,W,de,fe,ne,X,se,me,ue,be,ye;L<p;){for(re=-1;$<p&&(re=A[D+$])===-1;$++);A[N+re]!==-1&&(q[A[N+re]]=-1),A[D+$]=A[N+re];var Ie=A[_+re],Ue=A[S+re];L+=Ue;var We=0;A[S+re]=-Ue;var Be=y[re],$e=Ie===0?Be:E,He=$e;for(Q=1;Q<=Ie+1;Q++){for(Q>Ie?(te=re,W=Be,de=A[T+re]-Ie):(te=x[Be++],W=y[te],de=A[T+te]),O=1;O<=de;O++)z=x[W++],!((fe=A[S+z])<=0)&&(We+=fe,A[S+z]=-fe,x[He++]=z,A[N+z]!==-1&&(q[A[N+z]]=q[z]),q[z]!==-1?A[N+q[z]]=A[N+z]:A[D+A[M+z]]=A[N+z]);te!==re&&(y[te]=Gc(re),A[I+te]=0)}for(Ie!==0&&(E=He),A[M+re]=We,y[re]=$e,A[T+re]=He-$e,A[_+re]=-2,P=o(P,g,A,I,p),ne=$e;ne<He;ne++)if(z=x[ne],!((X=A[_+z])<=0)){fe=-A[S+z];var ee=P-fe;for(Be=y[z],se=y[z]+X-1;Be<=se;Be++)te=x[Be],A[I+te]>=P?A[I+te]-=fe:A[I+te]!==0&&(A[I+te]=A[M+te]+ee)}for(ne=$e;ne<He;ne++){for(z=x[ne],se=y[z],me=se+A[_+z]-1,ue=se,be=0,ye=0,Be=se;Be<=me;Be++)if(te=x[Be],A[I+te]!==0){var le=A[I+te]-P;le>0?(ye+=le,x[ue++]=te,be+=te):(y[te]=Gc(re),A[I+te]=0)}A[_+z]=ue-se+1;var G=ue,J=se+A[T+z];for(Be=me+1;Be<J;Be++){K=x[Be];var ae=A[S+K];ae<=0||(ye+=ae,x[ue++]=K,be+=K)}ye===0?(y[z]=Gc(re),fe=-A[S+z],We-=fe,Ue+=fe,L+=fe,A[S+z]=0,A[_+z]=-1):(A[M+z]=Math.min(A[M+z],ye),x[ue]=x[G],x[G]=x[se],x[se]=re,A[T+z]=ue-se+1,be=(be<0?-be:be)%p,A[N+z]=A[V+be],A[V+be]=z,q[z]=be)}for(A[M+re]=We,g=Math.max(g,We),P=o(P+g,g,A,I,p),ne=$e;ne<He;ne++)if(z=x[ne],!(A[S+z]>=0))for(be=q[z],z=A[V+be],A[V+be]=-1;z!==-1&&A[N+z]!==-1;z=A[N+z],P++){for(de=A[T+z],X=A[_+z],Be=y[z]+1;Be<=y[z]+de-1;Be++)A[I+x[Be]]=P;var ce=z;for(K=A[N+z];K!==-1;){var ge=A[T+K]===de&&A[_+K]===X;for(Be=y[K]+1;ge&&Be<=y[K]+de-1;Be++)A[I+x[Be]]!==P&&(ge=0);ge?(y[K]=Gc(z),A[S+z]+=A[S+K],A[S+K]=0,A[_+K]=-1,K=A[N+K],A[N+ce]=K):(ce=K,K=A[N+K])}}for(Be=$e,ne=$e;ne<He;ne++)z=x[ne],!((fe=-A[S+z])<=0)&&(A[S+z]=fe,ye=A[M+z]+We-fe,ye=Math.min(ye,p-L-fe),A[D+ye]!==-1&&(q[A[D+ye]]=z),A[N+z]=A[D+ye],q[z]=-1,A[D+ye]=z,$=Math.min($,ye),A[M+z]=ye,x[Be++]=z);A[S+re]=Ue,(A[T+re]=Be-$e)===0&&(y[re]=-1,A[I+re]=0),Ie!==0&&(E=Be)}for(z=0;z<p;z++)y[z]=Gc(y[z]);for(K=0;K<=p;K++)A[D+K]=-1;for(K=p;K>=0;K--)A[S+K]>0||(A[N+K]=A[D+y[K]],A[D+y[K]]=K);for(te=p;te>=0;te--)A[S+te]<=0||y[te]!==-1&&(A[N+te]=A[D+y[te]],A[D+y[te]]=te);for(re=0,z=0;z<=p;z++)y[z]===-1&&(re=uY(z,re,A,D,N,w,I));return w.splice(w.length-1,1),w};function i(u,c,h,d,f){var p=n(c);if(u===1&&d===h)return e(c,p);if(u===2){for(var g=p._index,b=p._ptr,v=0,x=0;x<h;x++){var y=b[x];if(b[x]=v,!(b[x+1]-y>f))for(var E=b[x+1];y<E;y++)g[v++]=g[y]}return b[h]=v,c=n(p),t(p,c)}return t(p,c)}function s(u,c,h,d,f,p,g,b,v,x,y,E){for(var w=0;w<u;w++)h[d+w]=c[w+1]-c[w];h[d+u]=0;for(var A=0;A<=u;A++)h[f+A]=-1,p[A]=-1,h[g+A]=-1,h[b+A]=-1,h[v+A]=1,h[x+A]=1,h[y+A]=0,h[E+A]=h[d+A];var T=o(0,0,h,x,u);return h[y+u]=-2,c[u]=-1,h[x+u]=0,T}function a(u,c,h,d,f,p,g,b,v,x,y){for(var E=0,w=0;w<u;w++){var A=h[d+w];if(A===0)h[f+w]=-2,E++,c[w]=-1,h[p+w]=0;else if(A>g)h[b+w]=0,h[f+w]=-1,E++,c[w]=Gc(u),h[b+u]++;else{var T=h[v+A];T!==-1&&(x[T]=w),h[y+w]=h[v+A],h[v+A]=w}}return E}function o(u,c,h,d,f){if(u<2||u+c<0){for(var p=0;p<f;p++)h[d+p]!==0&&(h[d+p]=1);u=2}return u}function l(u,c){return u!==c}});function rTe(r,e,t,n,i,s,a){var o,l,u=0,c;if(r<=e||t[n+e]<=t[i+r])return-1;t[i+r]=t[n+e];var h=t[s+r];if(t[s+r]=e,h===-1)u=1,c=r;else{for(u=2,c=h;c!==t[a+c];c=t[a+c]);for(o=h;o!==c;o=l)l=t[a+o],t[a+o]=c}return{jleaf:u,q:c}}var nTe="csCounts",iTe=["transpose"],sTe=Y(nTe,iTe,r=>{var{transpose:e}=r;return function(t,n,i,s){if(!t||!n||!i)return null;var a=t._size,o=a[0],l=a[1],u,c,h,d,f,p,g,b=4*l+(s?l+o+1:0),v=[],x=0,y=l,E=2*l,w=3*l,A=4*l,T=5*l+1;for(h=0;h<b;h++)v[h]=-1;var S=[],N=e(t),D=N._index,_=N._ptr;for(h=0;h<l;h++)for(c=i[h],S[c]=v[w+c]===-1?1:0;c!==-1&&v[w+c]===-1;c=n[c])v[w+c]=h;if(s){for(h=0;h<l;h++)v[i[h]]=h;for(u=0;u<o;u++){for(h=l,p=_[u],g=_[u+1],f=p;f<g;f++)h=Math.min(h,v[D[f]]);v[T+u]=v[A+h],v[A+h]=u}}for(u=0;u<l;u++)v[x+u]=u;for(h=0;h<l;h++){for(c=i[h],n[c]!==-1&&S[n[c]]--,d=s?v[A+h]:c;d!==-1;d=s?v[T+d]:-1)for(f=_[d];f<_[d+1];f++){u=D[f];var M=rTe(u,c,v,w,y,E,x);M.jleaf>=1&&S[c]++,M.jleaf===2&&S[M.q]--}n[c]!==-1&&(v[x+c]=n[c])}for(c=0;c<l;c++)n[c]!==-1&&(S[n[c]]+=S[c]);return S}}),aTe="csSqr",oTe=["add","multiply","transpose"],lTe=Y(aTe,oTe,r=>{var{add:e,multiply:t,transpose:n}=r,i=tTe({add:e,multiply:t,transpose:n}),s=sTe({transpose:n});return function(l,u,c){var h=u._ptr,d=u._size,f=d[1],p,g={};if(g.q=i(l,u),l&&!g.q)return null;if(c){var b=l?XSe(u,null,g.q):u;g.parent=QSe(b);var v=YSe(g.parent,f);if(g.cp=s(b,g.parent,v,1),b&&g.parent&&g.cp&&a(b,g))for(g.unz=0,p=0;p<f;p++)g.unz+=g.cp[p]}else g.unz=4*h[f]+f,g.lnz=g.unz;return g};function a(o,l){var u=o._ptr,c=o._index,h=o._size,d=h[0],f=h[1];l.pinv=[],l.leftmost=[];var p=l.parent,g=l.pinv,b=l.leftmost,v=[],x=0,y=d,E=d+f,w=d+2*f,A,T,S,N,D;for(T=0;T<f;T++)v[y+T]=-1,v[E+T]=-1,v[w+T]=0;for(A=0;A<d;A++)b[A]=-1;for(T=f-1;T>=0;T--)for(N=u[T],D=u[T+1],S=N;S<D;S++)b[c[S]]=T;for(A=d-1;A>=0;A--)g[A]=-1,T=b[A],T!==-1&&(v[w+T]++===0&&(v[E+T]=A),v[x+A]=v[y+T],v[y+T]=A);for(l.lnz=0,l.m2=d,T=0;T<f;T++)if(A=v[y+T],l.lnz++,A<0&&(A=l.m2++),g[A]=T,!(--w[T]<=0)){l.lnz+=v[w+T];var _=p[T];_!==-1&&(v[w+_]===0&&(v[E+_]=v[E+T]),v[x+v[E+T]]=v[y+_],v[y+_]=v[x+A],v[w+_]+=v[w+T])}for(A=0;A<d;A++)g[A]<0&&(g[A]=T++);return!0}});function LP(r,e){return r[e]<0}function cY(r,e){r[e]=Gc(r[e])}function u8(r){return r<0?Gc(r):r}function uTe(r,e,t,n,i){var s=e._index,a=e._ptr,o=e._size,l=o[1],u,c,h,d=0;for(n[0]=r;d>=0;){r=n[d];var f=i?i[r]:r;LP(a,r)||(cY(a,r),n[l+d]=f<0?0:u8(a[f]));var p=1;for(c=n[l+d],h=f<0?0:u8(a[f+1]);c<h;c++)if(u=s[c],!LP(a,u)){n[l+d]=c,n[++d]=u,p=0;break}p&&(d--,n[--t]=r)}return t}function cTe(r,e,t,n,i){var s=r._ptr,a=r._size,o=e._index,l=e._ptr,u=a[1],c,h,d,f=u;for(h=l[t],d=l[t+1],c=h;c<d;c++){var p=o[c];LP(s,p)||(f=uTe(p,r,f,n,i))}for(c=f;c<u;c++)cY(s,n[c]);return f}var hTe="csSpsolve",dTe=["divideScalar","multiply","subtract"],fTe=Y(hTe,dTe,r=>{var{divideScalar:e,multiply:t,subtract:n}=r;return function(s,a,o,l,u,c,h){var d=s._values,f=s._index,p=s._ptr,g=s._size,b=g[1],v=a._values,x=a._index,y=a._ptr,E,w,A,T,S=cTe(s,a,o,l,c);for(E=S;E<b;E++)u[l[E]]=0;for(w=y[o],A=y[o+1],E=w;E<A;E++)u[x[E]]=v[E];for(var N=S;N<b;N++){var D=l[N],_=c?c[D]:D;if(!(_<0))for(w=p[_],A=p[_+1],u[D]=e(u[D],d[h?w:A-1]),E=h?w+1:w,T=h?A:A-1;E<T;E++){var M=f[E];u[M]=n(u[M],t(d[E],u[D]))}}return S}}),mTe="csLu",pTe=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],gTe=Y(mTe,pTe,r=>{var{abs:e,divideScalar:t,multiply:n,subtract:i,larger:s,largerEq:a,SparseMatrix:o}=r,l=fTe({divideScalar:t,multiply:n,subtract:i});return function(c,h,d){if(!c)return null;var f=c._size,p=f[1],g,b=100,v=100;h&&(g=h.q,b=h.lnz||b,v=h.unz||v);var x=[],y=[],E=[],w=new o({values:x,index:y,ptr:E,size:[p,p]}),A=[],T=[],S=[],N=new o({values:A,index:T,ptr:S,size:[p,p]}),D=[],_,M,I=[],V=[];for(_=0;_<p;_++)I[_]=0,D[_]=-1,E[_+1]=0;b=0,v=0;for(var q=0;q<p;q++){E[q]=b,S[q]=v;var P=g?g[q]:q,L=l(w,c,P,V,I,D,1),$=-1,z=-1;for(M=L;M<p;M++)if(_=V[M],D[_]<0){var K=e(I[_]);s(K,z)&&(z=K,$=_)}else T[v]=D[_],A[v++]=I[_];if($===-1||z<=0)return null;D[P]<0&&a(e(I[P]),n(z,d))&&($=P);var re=I[$];for(T[v]=q,A[v++]=re,D[$]=q,y[b]=$,x[b++]=1,M=L;M<p;M++)_=V[M],D[_]<0&&(y[b]=_,x[b++]=t(I[_],re)),I[_]=0}for(E[p]=b,S[p]=v,M=0;M<b;M++)y[M]=D[y[M]];return x.splice(b,x.length-b),y.splice(b,y.length-b),A.splice(v,A.length-v),T.splice(v,T.length-v),{L:w,U:N,pinv:D}}}),c8="slu",vTe=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],yTe=Y(c8,vTe,r=>{var{typed:e,abs:t,add:n,multiply:i,transpose:s,divideScalar:a,subtract:o,larger:l,largerEq:u,SparseMatrix:c}=r,h=lTe({add:n,multiply:i,transpose:s}),d=gTe({abs:t,divideScalar:a,multiply:i,subtract:o,larger:l,largerEq:u,SparseMatrix:c});return e(c8,{"SparseMatrix, number, number":function(p,g,b){if(!tt(g)||g<0||g>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(b<0||b>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var v=h(g,p,!1),x=d(p,v,b);return{L:x.L,U:x.U,p:x.pinv,q:v.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function h8(r,e){var t,n=e.length,i=[];if(r)for(t=0;t<n;t++)i[r[t]]=e[t];else for(t=0;t<n;t++)i[t]=e[t];return i}var d8="lusolve",bTe=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],wTe=Y(d8,bTe,r=>{var{typed:e,matrix:t,lup:n,slu:i,usolve:s,lsolve:a,DenseMatrix:o}=r,l=s_({DenseMatrix:o});return e(d8,{"Array, Array | Matrix":function(d,f){d=t(d);var p=n(d),g=c(p.L,p.U,p.p,null,f);return g.valueOf()},"DenseMatrix, Array | Matrix":function(d,f){var p=n(d);return c(p.L,p.U,p.p,null,f)},"SparseMatrix, Array | Matrix":function(d,f){var p=n(d);return c(p.L,p.U,p.p,null,f)},"SparseMatrix, Array | Matrix, number, number":function(d,f,p,g){var b=i(d,p,g);return c(b.L,b.U,b.p,b.q,f)},"Object, Array | Matrix":function(d,f){return c(d.L,d.U,d.p,d.q,f)}});function u(h){if(ot(h))return h;if(cr(h))return t(h);throw new TypeError("Invalid Matrix LU decomposition")}function c(h,d,f,p,g){h=u(h),d=u(d),f&&(g=l(h,g,!0),g._data=h8(f,g._data));var b=a(h,g),v=s(d,b);return p&&(v._data=h8(p,v._data)),v}}),f8="polynomialRoot",xTe=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],_Te=Y(f8,xTe,r=>{var{typed:e,isZero:t,equalScalar:n,add:i,subtract:s,multiply:a,divide:o,sqrt:l,unaryMinus:u,cbrt:c,typeOf:h,im:d,re:f}=r;return e(f8,{"number|Complex, ...number|Complex":(p,g)=>{for(var b=[p,...g];b.length>0&&t(b[b.length-1]);)b.pop();if(b.length<2)throw new RangeError("Polynomial [".concat(p,", ").concat(g,"] must have a non-zero non-constant coefficient"));switch(b.length){case 2:return[u(o(b[0],b[1]))];case 3:{var[v,x,y]=b,E=a(2,y),w=a(x,x),A=a(4,y,v);if(n(w,A))return[o(u(x),E)];var T=l(s(w,A));return[o(s(T,x),E),o(s(u(T),x),E)]}case 4:{var[S,N,D,_]=b,M=u(a(3,_)),I=a(D,D),V=a(3,_,N),q=i(a(2,D,D,D),a(27,_,_,S)),P=a(9,_,D,N);if(n(I,V)&&n(q,P))return[o(D,M)];var L=s(I,V),$=s(q,P),z=i(a(18,_,D,N,S),a(D,D,N,N)),K=i(a(4,D,D,D,S),a(4,_,N,N,N),a(27,_,_,S,S));if(n(z,K))return[o(s(a(4,_,D,N),i(a(9,_,_,S),a(D,D,D))),a(_,L)),o(s(a(9,_,S),a(D,N)),a(2,L))];var re;n(I,V)?re=$:re=o(i($,l(s(a($,$),a(4,L,L,L)))),2);var Q=!0,O=c(re,Q).toArray().map(te=>o(i(D,te,o(L,te)),M));return O.map(te=>h(te)==="Complex"&&n(f(te),f(te)+d(te))?f(te):te)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(b))}}})}),ATe="Help",ETe=["evaluate"],STe=Y(ATe,ETe,r=>{var{evaluate:e}=r;function t(n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!n)throw new Error('Argument "doc" missing');this.doc=n}return t.prototype.type="Help",t.prototype.isHelp=!0,t.prototype.toString=function(){var n=this.doc||{},i=`
`;if(n.name&&(i+="Name: "+n.name+`

`),n.category&&(i+="Category: "+n.category+`

`),n.description&&(i+=`Description:
    `+n.description+`

`),n.syntax&&(i+=`Syntax:
    `+n.syntax.join(`
    `)+`

`),n.examples){i+=`Examples:
`;for(var s=!1,a=e("config()"),o={config:h=>(s=!0,e("config(newConfig)",{newConfig:h}))},l=0;l<n.examples.length;l++){var u=n.examples[l];i+="    "+u+`
`;var c=void 0;try{c=e(u,o)}catch(h){c=h}c!==void 0&&!pK(c)&&(i+="        "+Pt(c,{precision:14})+`
`)}i+=`
`,s&&e("config(originalConfig)",{originalConfig:a})}return n.mayThrow&&n.mayThrow.length&&(i+="Throws: "+n.mayThrow.join(", ")+`

`),n.seealso&&n.seealso.length&&(i+="See also: "+n.seealso.join(", ")+`
`),i},t.prototype.toJSON=function(){var n=gt(this.doc);return n.mathjs="Help",n},t.fromJSON=function(n){var i={};return Object.keys(n).filter(s=>s!=="mathjs").forEach(s=>{i[s]=n[s]}),new t(i)},t.prototype.valueOf=t.prototype.toString,t},{isClass:!0}),TTe="Chain",CTe=["?on","math","typed"],NTe=Y(TTe,CTe,r=>{var{on:e,math:t,typed:n}=r;function i(u){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");yK(u)?this.value=u.value:this.value=u}i.prototype.type="Chain",i.prototype.isChain=!0,i.prototype.done=function(){return this.value},i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return Pt(this.value)},i.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},i.fromJSON=function(u){return new i(u.value)};function s(u,c){typeof c=="function"&&(i.prototype[u]=o(c))}function a(u,c){pge(i.prototype,u,function(){var d=c();if(typeof d=="function")return o(d)})}function o(u){return function(){if(arguments.length===0)return new i(u(this.value));for(var c=[this.value],h=0;h<arguments.length;h++)c[h+1]=arguments[h];if(n.isTypedFunction(u)){var d=n.resolve(u,c);if(d.params.length===1)throw new Error("chain function "+u.name+" cannot match rest parameter between chain value and additional arguments.");return new i(d.implementation.apply(u,c))}return new i(u.apply(u,c))}}i.createProxy=function(u,c){if(typeof u=="string")s(u,c);else{var h=function(p){Je(u,p)&&l[p]===void 0&&a(p,()=>u[p])};for(var d in u)h(d)}};var l={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return i.createProxy(t),e&&e("import",function(u,c,h){h||a(u,c)}),i},{isClass:!0}),m8={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},DTe={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},MTe={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},ITe={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},PTe={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},RTe={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},kTe={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},FTe={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},OTe={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},BTe={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},LTe={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},p8={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},$Te={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},VTe={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},UTe={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},zTe={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},jTe={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},qTe={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","bigint","complex","fraction","index","matrix","string","unit"]},HTe={name:"bigint",category:"Construction",syntax:["bigint(x)"],description:"Create a bigint, an integer with an arbitrary number of digits, from a number or string.",examples:["123123123123123123 # a large number will lose digits",'bigint("123123123123123123")','bignumber(["1", "3", "5"])'],seealso:["boolean","bignumber","number","complex","fraction","index","matrix","string","unit"]},GTe={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},WTe={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},KTe={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},XTe={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},YTe={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix","number","range","string","unit"]},QTe={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},JTe={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","bigint","boolean","complex","fraction","index","matrix","string","unit"]},ZTe={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},eCe={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},tCe={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},rCe={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},nCe={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},iCe={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},sCe={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},aCe={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},oCe={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},lCe={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},uCe={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},cCe={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},hCe={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},dCe={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},fCe={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},mCe={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},pCe={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},gCe={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},vCe={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},yCe={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},bCe={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},wCe={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},xCe={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},_Ce={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},ACe={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},ECe={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},SCe={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},TCe={name:"ceil",category:"Arithmetic",syntax:["ceil(x)","ceil(x, n)","ceil(unit, valuelessUnit)","ceil(unit, n, valuelessUnit)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)","ceil(3.241cm, cm)","ceil(3.241cm, 2, cm)"],seealso:["floor","fix","round"]},CCe={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},NCe={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},DCe={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},MCe={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},ICe={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},PCe={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},RCe={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},kCe={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},FCe={name:"fix",category:"Arithmetic",syntax:["fix(x)","fix(x, n)","fix(unit, valuelessUnit)","fix(unit, n, valuelessUnit)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)","fix(3.241cm, cm)","fix(3.241cm, 2, cm)"],seealso:["ceil","floor","round"]},OCe={name:"floor",category:"Arithmetic",syntax:["floor(x)","floor(x, n)","floor(unit, valuelessUnit)","floor(unit, n, valuelessUnit)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)","floor(3.241cm, cm)","floor(3.241cm, 2, cm)"],seealso:["ceil","fix","round"]},BCe={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},LCe={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenuse of a list with values.",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},$Ce={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax  1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},VCe={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},UCe={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},zCe={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},jCe={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},qCe={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},HCe={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},GCe={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},WCe={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},KCe={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},XCe={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},YCe={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},QCe={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},JCe={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>0, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},ZCe={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},e2e={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},t2e={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},r2e={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},n2e={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},i2e={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},s2e={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},a2e={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},o2e={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},l2e={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},u2e={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},c2e={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},h2e={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},d2e={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},f2e={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},m2e={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},p2e={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},g2e={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},v2e={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},y2e={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},b2e={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"The Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers","bernoulli"]},w2e={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},x2e={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},_2e={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},A2e={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},E2e={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:["parser","parse","compile"]},S2e={name:"parser",category:"Expression",syntax:["parser()"],description:"Create a parser object that keeps a context of variables and their values, allowing the evaluation of expressions in that context.",examples:["myParser = parser()",'myParser.evaluate("sqrt(3^2 + 4^2)")','myParser.set("x", 3)','myParser.evaluate("y = x + 3")','myParser.evaluate(["y = x + 3", "y = y + 1"])','myParser.get("y")'],seealso:["evaluate","parse","compile"]},T2e={name:"parse",category:"Expression",syntax:["parse(expr)","parse(expr, options)","parse([expr1, expr2, expr3, ...])","parse([expr1, expr2, expr3, ...], options)"],description:"Parse an expression. Returns a node tree, which can be evaluated by invoking node.evaluate() or transformed into a functional object via node.compile().",examples:['node1 = parse("sqrt(3^2 + 4^2)")',"node1.evaluate()","code1 = node1.compile()","code1.evaluate()","scope = {a: 3, b: 4}",'node2 = parse("a * b")',"node2.evaluate(scope)","code2 = node2.compile()","code2.evaluate(scope)"],seealso:["parser","evaluate","compile"]},C2e={name:"compile",category:"Expression",syntax:["compile(expr) ","compile([expr1, expr2, expr3, ...])"],description:"Parse and compile an expression. Returns a an object with a function evaluate([scope]) to evaluate the compiled expression.",examples:['code1 = compile("sqrt(3^2 + 4^2)")',"code1.evaluate() ",'code2 = compile("a * b")',"code2.evaluate({a: 3, b: 4})"],seealso:["parser","parse","evaluate"]},N2e={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},D2e={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},M2e={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},I2e={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},P2e={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},R2e={name:"nullish",category:"Logical",syntax:["x ?? y","nullish(x, y)"],description:"Nullish coalescing operator. Returns the right-hand operand when the left-hand operand is null or undefined, and otherwise returns the left-hand operand.",examples:["null ?? 42","undefined ?? 42","0 ?? 42","false ?? 42","null ?? undefined ?? 42"],seealso:["and","or","not"]},k2e={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},F2e={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},O2e={name:"mapSlices",category:"Matrix",syntax:["mapSlices(A, dim, callback)"],description:"Generate a matrix one dimension less than A by applying callback to each slice of A along dimension dim.",examples:["A = [[1, 2], [3, 4]]","mapSlices(A, 1, sum)","mapSlices(A, 2, prod)"],seealso:["map","forEach"]},B2e={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},L2e={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},$2e={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},V2e={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},U2e={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},z2e={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},j2e={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},q2e={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicate the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},H2e={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},G2e={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},W2e={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},K2e={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},X2e={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},Y2e={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},Q2e={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},J2e={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},Z2e={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the MoorePenrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},eNe={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the Kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},tNe={name:"map",category:"Matrix",syntax:["map(x, callback)","map(x, y, ..., callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array or the matrices/arrays.",examples:["map([1, 2, 3], square)","map([1, 2], [3, 4], f(a,b) = a + b)"],seealso:["filter","forEach"]},rNe={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},nNe={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},iNe={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},sNe={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},aNe={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},oNe={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},lNe={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},uNe={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},cNe={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},hNe={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},dNe={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},fNe={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},mNe={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},pNe={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},gNe={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},vNe={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},yNe={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},bNe={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},wNe={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional Fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},xNe={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse Fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},_Ne={name:"bernoulli",category:"Probability",syntax:["bernoulli(n)"],description:"The nth Bernoulli number",examples:["bernoulli(4)","bernoulli(fraction(12))"],seealso:["combinations","gamma","stirlingS2"]},ANe={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},ENe={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},SNe={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},TNe={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},CNe={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},NNe={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},DNe={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},MNe={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},INe={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},PNe={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},RNe={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},kNe={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},FNe={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},ONe={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},BNe={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},LNe={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},$Ne={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},VNe={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not. Comparing a value with NaN returns false.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},UNe={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},zNe={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not. Comparing a value with NaN returns false.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},jNe={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},qNe={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},HNe={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},GNe={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},WNe={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},KNe={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},XNe={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},YNe={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},QNe={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},JNe={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},ZNe={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},eDe={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},tDe={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},rDe={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},nDe={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},iDe={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemann's Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},sDe={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},aDe={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},oDe={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},lDe={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},uDe={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},cDe={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},hDe={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},dDe={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probability are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},fDe={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},mDe={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},pDe={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","variance"]},gDe={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},vDe={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},yDe={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},bDe={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},wDe={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},xDe={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the inverse hyperbolic tangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},_De={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},ADe={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the inverse hyperbolic cosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},EDe={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},SDe={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},TDe={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},CDe={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},NDe={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},DDe={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},MDe={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},IDe={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},PDe={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},RDe={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},kDe={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},FDe={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},ODe={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},BDe={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},LDe={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},$De={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},VDe={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},UDe={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},zDe={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},jDe={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},qDe={name:"toBest",category:"Units",syntax:["toBest(x)","toBest(x, unitList)","toBest(x, unitList, options)"],description:"Converts to the most appropriate display unit.",examples:['toBest(unit(5000, "m"))','toBest(unit(3500000, "W"))','toBest(unit(0.000000123, "A"))','toBest(unit(10, "m"), "cm")','toBest(unit(10, "m"), "mm,km", {offset: 1.5})'],seealso:[]},HDe={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},GDe={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables, and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},WDe={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},KDe={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},XDe={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},YDe={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},QDe={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero","isFinite","isBounded"]},JDe={name:"isBounded",category:"Utils",syntax:["isBounded(x)"],description:"Test whether a value or its entries are bounded.",examples:["isBounded(Infinity)","isBounded(bigint(3))","isBounded([3, -Infinity, -3])"],seealso:["isFinite","isNumeric","isNaN","isNegative","isPositive"]},ZDe={name:"isFinite",category:"Utils",syntax:["isFinite(x)"],description:"Test whether a value is finite, elementwise on collections.",examples:["isFinite(Infinity)","isFinite(bigint(3))","isFinite([3, -Infinity, -3])"],seealso:["isBounded","isNumeric","isNaN","isNegative","isPositive"]},eMe={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},tMe={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue","isFinite","isBounded"]},rMe={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},nMe={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},iMe={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},sMe={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, bigint, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "bigint")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","bigint","fraction","bignumber","string","format"]},aMe={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},oMe={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},lMe={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},uMe={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},cMe={bignumber:qTe,bigint:HTe,boolean:GTe,complex:WTe,createUnit:KTe,fraction:XTe,index:YTe,matrix:QTe,number:JTe,sparse:ZTe,splitUnit:eCe,string:tCe,unit:rCe,e:m8,E:m8,false:DTe,i:MTe,Infinity:ITe,LN2:RTe,LN10:PTe,LOG2E:FTe,LOG10E:kTe,NaN:OTe,null:BTe,pi:p8,PI:p8,phi:LTe,SQRT1_2:$Te,SQRT2:VTe,tau:UTe,true:zTe,version:jTe,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant. Deprecated in favor of coulombConstant",examples:["coulombConstant"]},coulombConstant:{description:"Coulomb's constant",examples:["coulombConstant"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Bohr magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Bohr radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:aCe,lsolve:lCe,lsolveAll:uCe,lup:cCe,lusolve:hCe,leafCount:oCe,polynomialRoot:dCe,resolve:pCe,simplify:gCe,simplifyConstant:vCe,simplifyCore:yCe,symbolicEqual:wCe,rationalize:mCe,slu:bCe,usolve:xCe,usolveAll:_Ce,qr:fCe,abs:ACe,add:ECe,cbrt:SCe,ceil:TCe,cube:CCe,divide:NCe,dotDivide:DCe,dotMultiply:MCe,dotPow:ICe,exp:PCe,expm:RCe,expm1:kCe,fix:FCe,floor:OCe,gcd:BCe,hypot:LCe,lcm:VCe,log:UCe,log2:qCe,log1p:jCe,log10:zCe,mod:HCe,multiply:GCe,norm:WCe,nthRoot:KCe,nthRoots:XCe,pow:YCe,round:QCe,sign:JCe,sqrt:ZCe,sqrtm:e2e,square:i2e,subtract:s2e,unaryMinus:a2e,unaryPlus:o2e,xgcd:l2e,invmod:$Ce,bitAnd:u2e,bitNot:c2e,bitOr:h2e,bitXor:d2e,leftShift:f2e,rightArithShift:m2e,rightLogShift:p2e,bellNumbers:g2e,catalan:v2e,composition:y2e,stirlingS2:b2e,config:nCe,import:iCe,typed:sCe,arg:w2e,conj:x2e,re:A2e,im:_2e,evaluate:E2e,help:N2e,parse:T2e,parser:S2e,compile:C2e,distance:D2e,intersect:M2e,and:I2e,not:P2e,nullish:R2e,or:k2e,xor:F2e,mapSlices:O2e,concat:L2e,count:$2e,cross:V2e,column:B2e,ctranspose:U2e,det:z2e,diag:j2e,diff:q2e,dot:H2e,getMatrixDataType:Y2e,identity:Q2e,filter:W2e,flatten:K2e,forEach:X2e,inv:J2e,pinv:Z2e,eigs:G2e,kron:eNe,matrixFromFunction:nNe,matrixFromRows:iNe,matrixFromColumns:rNe,map:tNe,ones:sNe,partitionSelect:aNe,range:oNe,resize:uNe,reshape:lNe,rotate:cNe,rotationMatrix:hNe,row:dNe,size:fNe,sort:mNe,squeeze:pNe,subset:gNe,trace:vNe,transpose:yNe,zeros:bNe,fft:wNe,ifft:xNe,sylvester:t2e,schur:r2e,lyap:n2e,solveODE:uMe,bernoulli:_Ne,combinations:ANe,combinationsWithRep:ENe,factorial:SNe,gamma:TNe,kldivergence:NNe,lgamma:CNe,multinomial:DNe,permutations:MNe,pickRandom:INe,random:PNe,randomInt:RNe,compare:kNe,compareNatural:FNe,compareText:ONe,deepEqual:BNe,equal:LNe,equalText:$Ne,larger:VNe,largerEq:UNe,smaller:zNe,smallerEq:jNe,unequal:qNe,setCartesian:HNe,setDifference:GNe,setDistinct:WNe,setIntersect:KNe,setIsSubset:XNe,setMultiplicity:YNe,setPowerset:QNe,setSize:JNe,setSymDifference:ZNe,setUnion:eDe,zpk2tf:tDe,freqz:rDe,erf:nDe,zeta:iDe,cumsum:mDe,mad:sDe,max:aDe,mean:oDe,median:lDe,min:uDe,mode:cDe,prod:hDe,quantileSeq:dDe,std:fDe,sum:pDe,variance:gDe,corr:vDe,acos:yDe,acosh:bDe,acot:wDe,acoth:xDe,acsc:_De,acsch:ADe,asec:EDe,asech:SDe,asin:TDe,asinh:CDe,atan:NDe,atanh:MDe,atan2:DDe,cos:IDe,cosh:PDe,cot:RDe,coth:kDe,csc:FDe,csch:ODe,sec:BDe,sech:LDe,sin:$De,sinh:VDe,tan:UDe,tanh:zDe,to:jDe,toBest:qDe,clone:GDe,format:WDe,bin:HDe,oct:aMe,hex:XDe,isNaN:QDe,isBounded:JDe,isFinite:ZDe,isInteger:YDe,isNegative:eMe,isNumeric:tMe,hasNumericValue:KDe,isPositive:rMe,isPrime:nMe,isZero:iMe,print:oMe,typeOf:lMe,numeric:sMe},g8="help",hMe=["typed","mathWithTransform","Help"],dMe=Y(g8,hMe,r=>{var{typed:e,mathWithTransform:t,Help:n}=r;return e(g8,{any:function(s){var a,o=s;if(typeof s!="string"){for(a in t)if(Je(t,a)&&s===t[a]){o=a;break}}var l=ys(cMe,o);if(!l){var u=typeof o=="function"?o.name:o;throw new Error('No documentation found on "'+u+'"')}return new n(l)}})}),v8="chain",fMe=["typed","Chain"],mMe=Y(v8,fMe,r=>{var{typed:e,Chain:t}=r;return e(v8,{"":function(){return new t},any:function(i){return new t(i)}})}),y8="det",pMe=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],gMe=Y(y8,pMe,r=>{var{typed:e,matrix:t,subtractScalar:n,multiply:i,divideScalar:s,isZero:a,unaryMinus:o}=r;return e(y8,{any:function(c){return gt(c)},"Array | Matrix":function(c){var h;switch(ot(c)?h=c.size():Array.isArray(c)?(c=t(c),h=c.size()):h=[],h.length){case 0:return gt(c);case 1:if(h[0]===1)return gt(c.valueOf()[0]);if(h[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+Pt(h)+")");case 2:{var d=h[0],f=h[1];if(d===f)return l(c.clone().valueOf(),d);if(f===0)return 1;throw new RangeError("Matrix must be square (size: "+Pt(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Pt(h)+")")}}});function l(u,c,h){if(c===1)return gt(u[0][0]);if(c===2)return n(i(u[0][0],u[1][1]),i(u[1][0],u[0][1]));for(var d=!1,f=new Array(c).fill(0).map((T,S)=>S),p=0;p<c;p++){var g=f[p];if(a(u[g][p])){var b=void 0;for(b=p+1;b<c;b++)if(!a(u[f[b]][p])){g=f[b],f[b]=f[p],f[p]=g,d=!d;break}if(b===c)return u[g][p]}for(var v=u[g][p],x=p===0?1:u[f[p-1]][p-1],y=p+1;y<c;y++)for(var E=f[y],w=p+1;w<c;w++)u[E][w]=s(n(i(u[E][w],v),i(u[E][p],u[g][w])),x)}var A=u[f[c-1]][c-1];return d?o(A):A}}),b8="inv",vMe=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],yMe=Y(b8,vMe,r=>{var{typed:e,matrix:t,divideScalar:n,addScalar:i,multiply:s,unaryMinus:a,det:o,identity:l,abs:u}=r;return e(b8,{"Array | Matrix":function(d){var f=ot(d)?d.size():vt(d);switch(f.length){case 1:if(f[0]===1)return ot(d)?t([n(1,d.valueOf()[0])]):[n(1,d[0])];throw new RangeError("Matrix must be square (size: "+Pt(f)+")");case 2:{var p=f[0],g=f[1];if(p===g)return ot(d)?t(c(d.valueOf(),p,g),d.storage()):c(d,p,g);throw new RangeError("Matrix must be square (size: "+Pt(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Pt(f)+")")}},any:function(d){return n(1,d)}});function c(h,d,f){var p,g,b,v,x;if(d===1){if(v=h[0][0],v===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,v)]]}else if(d===2){var y=o(h);if(y===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(h[1][1],y),n(a(h[0][1]),y)],[n(a(h[1][0]),y),n(h[0][0],y)]]}else{var E=h.concat();for(p=0;p<d;p++)E[p]=E[p].concat();for(var w=l(d).valueOf(),A=0;A<f;A++){var T=u(E[A][A]),S=A;for(p=A+1;p<d;)u(E[p][A])>T&&(T=u(E[p][A]),S=p),p++;if(T===0)throw Error("Cannot calculate inverse, determinant is zero");p=S,p!==A&&(x=E[A],E[A]=E[p],E[p]=x,x=w[A],w[A]=w[p],w[p]=x);var N=E[A],D=w[A];for(p=0;p<d;p++){var _=E[p],M=w[p];if(p!==A){if(_[A]!==0){for(b=n(a(_[A]),N[A]),g=A;g<f;g++)_[g]=i(_[g],s(b,N[g]));for(g=0;g<f;g++)M[g]=i(M[g],s(b,D[g]))}}else{for(b=N[A],g=A;g<f;g++)_[g]=n(_[g],b);for(g=0;g<f;g++)M[g]=n(M[g],b)}}}return w}}}),w8="pinv",bMe=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],wMe=Y(w8,bMe,r=>{var{typed:e,matrix:t,inv:n,deepEqual:i,equal:s,dotDivide:a,dot:o,ctranspose:l,divideScalar:u,multiply:c,add:h,Complex:d}=r;return e(w8,{"Array | Matrix":function(y){var E=ot(y)?y.size():vt(y);switch(E.length){case 1:return v(y)?l(y):E[0]===1?n(y):a(l(y),o(y,y));case 2:{if(v(y))return l(y);var w=E[0],A=E[1];if(w===A)try{return n(y)}catch(T){if(!(T instanceof Error&&T.message.match(/Cannot calculate inverse, determinant is zero/)))throw T}return ot(y)?t(f(y.valueOf(),w,A),y.storage()):f(y,w,A)}default:throw new RangeError("Matrix must be two dimensional (size: "+Pt(E)+")")}},any:function(y){return s(y,0)?gt(y):u(1,y)}});function f(x,y,E){var{C:w,F:A}=g(x,y,E),T=c(n(c(l(w),w)),l(w)),S=c(l(A),n(c(A,l(A))));return c(S,T)}function p(x,y,E){for(var w=gt(x),A=0,T=0;T<y;T++){if(E<=A)return w;for(var S=T;b(w[S][A]);)if(S++,y===S&&(S=T,A++,E===A))return w;[w[S],w[T]]=[w[T],w[S]];for(var N=w[T][A],D=0;D<E;D++)w[T][D]=a(w[T][D],N);for(var _=0;_<y;_++)if(_!==T){N=w[_][A];for(var M=0;M<E;M++)w[_][M]=h(w[_][M],c(-1,c(N,w[T][M])))}A++}return w}function g(x,y,E){var w=p(x,y,E),A=x.map((S,N)=>S.filter((D,_)=>_<y&&!b(o(w[_],w[_])))),T=w.filter((S,N)=>!b(o(w[N],w[N])));return{C:A,F:T}}function b(x){return s(h(x,d(1,1)),h(0,d(1,1)))}function v(x){return i(h(x,d(1,1)),h(c(x,0),d(1,1)))}});function xMe(r){var{addScalar:e,subtract:t,flatten:n,multiply:i,multiplyScalar:s,divideScalar:a,sqrt:o,abs:l,bignumber:u,diag:c,size:h,reshape:d,inv:f,qr:p,usolve:g,usolveAll:b,equal:v,complex:x,larger:y,smaller:E,matrixFromColumns:w,dot:A}=r;function T(Q,O,te,W){var de=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,fe=S(Q,O,te,W,de);N(Q,O,te,W,de,fe);var{values:ne,C:X}=D(Q,O,te,W,de);if(de){var se=_(Q,O,X,fe,ne,te,W);return{values:ne,eigenvectors:se}}return{values:ne}}function S(Q,O,te,W,de){var fe=W==="BigNumber",ne=W==="Complex",X=fe?u(0):0,se=fe?u(1):ne?x(1):1,me=fe?u(1):1,ue=fe?u(10):2,be=s(ue,ue),ye;de&&(ye=Array(O).fill(se));for(var Ie=!1;!Ie;){Ie=!0;for(var Ue=0;Ue<O;Ue++){for(var We=X,Be=X,$e=0;$e<O;$e++)Ue!==$e&&(We=e(We,l(Q[$e][Ue])),Be=e(Be,l(Q[Ue][$e])));if(!v(We,0)&&!v(Be,0)){for(var He=me,ee=We,le=a(Be,ue),G=s(Be,ue);E(ee,le);)ee=s(ee,be),He=s(He,ue);for(;y(ee,G);)ee=a(ee,be),He=a(He,ue);var J=E(a(e(ee,Be),He),s(e(We,Be),.95));if(J){Ie=!1;for(var ae=a(1,He),ce=0;ce<O;ce++)Ue!==ce&&(Q[Ue][ce]=s(Q[Ue][ce],ae),Q[ce][Ue]=s(Q[ce][Ue],He));de&&(ye[Ue]=s(ye[Ue],ae))}}}}return de?c(ye):null}function N(Q,O,te,W,de,fe){var ne=W==="BigNumber",X=W==="Complex",se=ne?u(0):X?x(0):0;ne&&(te=u(te));for(var me=0;me<O-2;me++){for(var ue=0,be=se,ye=me+1;ye<O;ye++){var Ie=Q[ye][me];E(l(be),l(Ie))&&(be=Ie,ue=ye)}if(!E(l(be),te)){if(ue!==me+1){var Ue=Q[ue];Q[ue]=Q[me+1],Q[me+1]=Ue;for(var We=0;We<O;We++){var Be=Q[We][ue];Q[We][ue]=Q[We][me+1],Q[We][me+1]=Be}if(de){var $e=fe[ue];fe[ue]=fe[me+1],fe[me+1]=$e}}for(var He=me+2;He<O;He++){var ee=a(Q[He][me],be);if(ee!==0){for(var le=0;le<O;le++)Q[He][le]=t(Q[He][le],s(ee,Q[me+1][le]));for(var G=0;G<O;G++)Q[G][me+1]=e(Q[G][me+1],s(ee,Q[G][He]));if(de)for(var J=0;J<O;J++)fe[He][J]=t(fe[He][J],s(ee,fe[me+1][J]))}}}}return fe}function D(Q,O,te,W,de){var fe=W==="BigNumber",ne=W==="Complex",X=fe?u(1):ne?x(1):1;fe&&(te=u(te));for(var se=gt(Q),me=[],ue=O,be=[],ye=de?c(Array(O).fill(X)):void 0,Ie=de?c(Array(ue).fill(X)):void 0,Ue=0;Ue<=100;){Ue+=1;for(var We=se[ue-1][ue-1],Be=0;Be<ue;Be++)se[Be][Be]=t(se[Be][Be],We);var{Q:$e,R:He}=p(se);se=i(He,$e);for(var ee=0;ee<ue;ee++)se[ee][ee]=e(se[ee][ee],We);if(de&&(Ie=i(Ie,$e)),ue===1||E(l(se[ue-1][ue-2]),te)){Ue=0,me.push(se[ue-1][ue-1]),de&&(be.unshift([[1]]),V(Ie,O),ye=i(ye,Ie),ue>1&&(Ie=c(Array(ue-1).fill(X)))),ue-=1,se.pop();for(var le=0;le<ue;le++)se[le].pop()}else if(ue===2||E(l(se[ue-2][ue-3]),te)){Ue=0;var G=M(se[ue-2][ue-2],se[ue-2][ue-1],se[ue-1][ue-2],se[ue-1][ue-1]);me.push(...G),de&&(be.unshift(I(se[ue-2][ue-2],se[ue-2][ue-1],se[ue-1][ue-2],se[ue-1][ue-1],G[0],G[1],te,W)),V(Ie,O),ye=i(ye,Ie),ue>2&&(Ie=c(Array(ue-2).fill(X)))),ue-=2,se.pop(),se.pop();for(var J=0;J<ue;J++)se[J].pop(),se[J].pop()}if(ue===0)break}if(me.sort((ge,pe)=>+t(l(ge),l(pe))),Ue>100){var ae=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+me.join(", "));throw ae.values=me,ae.vectors=[],ae}var ce=de?i(ye,q(be,O)):void 0;return{values:me,C:ce}}function _(Q,O,te,W,de,fe,ne){var X=f(te),se=i(X,Q,te),me=ne==="BigNumber",ue=ne==="Complex",be=me?u(0):ue?x(0):0,ye=me?u(1):ue?x(1):1,Ie=[],Ue=[];for(var We of de){var Be=P(Ie,We,v);Be===-1?(Ie.push(We),Ue.push(1)):Ue[Be]+=1}for(var $e=[],He=Ie.length,ee=Array(O).fill(be),le=c(Array(O).fill(ye)),G=function(){var ce=Ie[J],ge=t(se,i(ce,le)),pe=b(ge,ee);for(pe.shift();pe.length<Ue[J];){var Ne=L(ge,O,pe,fe,ne);if(Ne===null)break;pe.push(Ne)}var Ee=i(f(W),te);pe=pe.map(Oe=>i(Ee,Oe)),$e.push(...pe.map(Oe=>({value:ce,vector:n(Oe)})))},J=0;J<He;J++)G();return $e}function M(Q,O,te,W){var de=e(Q,W),fe=t(s(Q,W),s(O,te)),ne=s(de,.5),X=s(o(t(s(de,de),s(4,fe))),.5);return[e(ne,X),t(ne,X)]}function I(Q,O,te,W,de,fe,ne,X){var se=X==="BigNumber",me=X==="Complex",ue=se?u(0):me?x(0):0,be=se?u(1):me?x(1):1;if(E(l(te),ne))return[[be,ue],[ue,be]];if(y(l(t(de,fe)),ne))return[[t(de,W),t(fe,W)],[te,te]];var ye=t(Q,de),Ie=t(W,de);return E(l(O),ne)&&E(l(Ie),ne)?[[ye,be],[te,ue]]:[[O,ue],[Ie,be]]}function V(Q,O){for(var te=0;te<Q.length;te++)Q[te].push(...Array(O-Q[te].length).fill(0));for(var W=Q.length;W<O;W++)Q.push(Array(O).fill(0)),Q[W][W]=1;return Q}function q(Q,O){for(var te=[],W=0;W<O;W++)te[W]=Array(O).fill(0);var de=0;for(var fe of Q){for(var ne=fe.length,X=0;X<ne;X++)for(var se=0;se<ne;se++)te[de+X][de+se]=fe[X][se];de+=ne}return te}function P(Q,O,te){for(var W=0;W<Q.length;W++)if(te(Q[W],O))return W;return-1}function L(Q,O,te,W,de){for(var fe=de==="BigNumber"?u(1e3):1e3,ne,X=0;X<5;++X){ne=$(O,te,de);try{ne=g(Q,ne)}catch{continue}if(y(K(ne),fe))break}if(X>=5)return null;for(X=0;;){var se=g(Q,ne);if(E(K(z(ne,[se])),W))break;if(++X>=10)return null;ne=re(se)}return ne}function $(Q,O,te){var W=te==="BigNumber",de=te==="Complex",fe=Array(Q).fill(0).map(ne=>2*Math.random()-1);return W&&(fe=fe.map(ne=>u(ne))),de&&(fe=fe.map(ne=>x(ne))),fe=z(fe,O),re(fe,te)}function z(Q,O){var te=h(Q);for(var W of O)W=d(W,te),Q=t(Q,i(a(A(W,Q),A(W,W)),W));return Q}function K(Q){return l(o(A(Q,Q)))}function re(Q,O){var te=O==="BigNumber",W=O==="Complex",de=te?u(1):W?x(1):1;return i(a(de,K(Q)),Q)}return T}function _Me(r){var{config:e,addScalar:t,subtract:n,abs:i,atan:s,cos:a,sin:o,multiplyScalar:l,inv:u,bignumber:c,multiply:h,add:d}=r;function f(N,D){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.relTol,M=arguments.length>3?arguments[3]:void 0,I=arguments.length>4?arguments[4]:void 0;if(M==="number")return p(N,_,I);if(M==="BigNumber")return g(N,_,I);throw TypeError("Unsupported data type: "+M)}function p(N,D,_){var M=N.length,I=Math.abs(D/M),V,q;if(_){q=new Array(M);for(var P=0;P<M;P++)q[P]=Array(M).fill(0),q[P][P]=1}for(var L=A(N);Math.abs(L[1])>=Math.abs(I);){var $=L[0][0],z=L[0][1];V=b(N[$][$],N[z][z],N[$][z]),N=w(N,V,$,z),_&&(q=x(q,V,$,z)),L=A(N)}for(var K=Array(M).fill(0),re=0;re<M;re++)K[re]=N[re][re];return S(gt(K),q,_)}function g(N,D,_){var M=N.length,I=i(D/M),V,q;if(_){q=new Array(M);for(var P=0;P<M;P++)q[P]=Array(M).fill(0),q[P][P]=1}for(var L=T(N);i(L[1])>=i(I);){var $=L[0][0],z=L[0][1];V=v(N[$][$],N[z][z],N[$][z]),N=E(N,V,$,z),_&&(q=y(q,V,$,z)),L=T(N)}for(var K=Array(M).fill(0),re=0;re<M;re++)K[re]=N[re][re];return S(gt(K),q,_)}function b(N,D,_){var M=D-N;return Math.abs(M)<=e.relTol?Math.PI/4:.5*Math.atan(2*_/(D-N))}function v(N,D,_){var M=n(D,N);return i(M)<=e.relTol?c(-1).acos().div(4):l(.5,s(h(2,_,u(M))))}function x(N,D,_,M){for(var I=N.length,V=Math.cos(D),q=Math.sin(D),P=Array(I).fill(0),L=Array(I).fill(0),$=0;$<I;$++)P[$]=V*N[$][_]-q*N[$][M],L[$]=q*N[$][_]+V*N[$][M];for(var z=0;z<I;z++)N[z][_]=P[z],N[z][M]=L[z];return N}function y(N,D,_,M){for(var I=N.length,V=a(D),q=o(D),P=Array(I).fill(c(0)),L=Array(I).fill(c(0)),$=0;$<I;$++)P[$]=n(l(V,N[$][_]),l(q,N[$][M])),L[$]=t(l(q,N[$][_]),l(V,N[$][M]));for(var z=0;z<I;z++)N[z][_]=P[z],N[z][M]=L[z];return N}function E(N,D,_,M){for(var I=N.length,V=c(a(D)),q=c(o(D)),P=l(V,V),L=l(q,q),$=Array(I).fill(c(0)),z=Array(I).fill(c(0)),K=h(c(2),V,q,N[_][M]),re=t(n(l(P,N[_][_]),K),l(L,N[M][M])),Q=d(l(L,N[_][_]),K,l(P,N[M][M])),O=0;O<I;O++)$[O]=n(l(V,N[_][O]),l(q,N[M][O])),z[O]=t(l(q,N[_][O]),l(V,N[M][O]));N[_][_]=re,N[M][M]=Q,N[_][M]=c(0),N[M][_]=c(0);for(var te=0;te<I;te++)te!==_&&te!==M&&(N[_][te]=$[te],N[te][_]=$[te],N[M][te]=z[te],N[te][M]=z[te]);return N}function w(N,D,_,M){for(var I=N.length,V=Math.cos(D),q=Math.sin(D),P=V*V,L=q*q,$=Array(I).fill(0),z=Array(I).fill(0),K=P*N[_][_]-2*V*q*N[_][M]+L*N[M][M],re=L*N[_][_]+2*V*q*N[_][M]+P*N[M][M],Q=0;Q<I;Q++)$[Q]=V*N[_][Q]-q*N[M][Q],z[Q]=q*N[_][Q]+V*N[M][Q];N[_][_]=K,N[M][M]=re,N[_][M]=0,N[M][_]=0;for(var O=0;O<I;O++)O!==_&&O!==M&&(N[_][O]=$[O],N[O][_]=$[O],N[M][O]=z[O],N[O][M]=z[O]);return N}function A(N){for(var D=N.length,_=0,M=[0,1],I=0;I<D;I++)for(var V=I+1;V<D;V++)Math.abs(_)<Math.abs(N[I][V])&&(_=Math.abs(N[I][V]),M=[I,V]);return[M,_]}function T(N){for(var D=N.length,_=0,M=[0,1],I=0;I<D;I++)for(var V=I+1;V<D;V++)i(_)<i(N[I][V])&&(_=i(N[I][V]),M=[I,V]);return[M,_]}function S(N,D,_){var M=N.length,I=Array(M),V;if(_){V=Array(M);for(var q=0;q<M;q++)V[q]=Array(M)}for(var P=0;P<M;P++){for(var L=0,$=N[0],z=0;z<N.length;z++)i(N[z])<i($)&&(L=z,$=N[L]);if(I[P]=N.splice(L,1)[0],_)for(var K=0;K<M;K++)V[P][K]=D[K][L],D[K].splice(L,1)}if(!_)return{values:I};var re=V.map((Q,O)=>({value:I[O],vector:Q}));return{values:I,eigenvectors:re}}return f}var AMe="eigs",EMe=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],SMe=Y(AMe,EMe,r=>{var{config:e,typed:t,matrix:n,addScalar:i,subtract:s,equal:a,abs:o,atan:l,cos:u,sin:c,multiplyScalar:h,divideScalar:d,inv:f,bignumber:p,multiply:g,add:b,larger:v,column:x,flatten:y,number:E,complex:w,sqrt:A,diag:T,size:S,reshape:N,qr:D,usolve:_,usolveAll:M,im:I,re:V,smaller:q,matrixFromColumns:P,dot:L}=r,$=_Me({config:e,addScalar:i,subtract:s,abs:o,atan:l,cos:u,sin:c,multiplyScalar:h,inv:f,bignumber:p,multiply:g,add:b}),z=xMe({addScalar:i,subtract:s,multiply:g,multiplyScalar:h,flatten:y,divideScalar:d,sqrt:A,abs:o,bignumber:p,diag:T,size:S,reshape:N,qr:D,inv:f,usolve:_,usolveAll:M,equal:a,complex:w,larger:v,smaller:q,matrixFromColumns:P,dot:L});return t("eigs",{Array:function(fe){return K(n(fe))},"Array, number|BigNumber":function(fe,ne){return K(n(fe),{precision:ne})},"Array, Object"(de,fe){return K(n(de),fe)},Matrix:function(fe){return K(fe,{matricize:!0})},"Matrix, number|BigNumber":function(fe,ne){return K(fe,{precision:ne,matricize:!0})},"Matrix, Object":function(fe,ne){var X={matricize:!0};return _n(X,ne),K(fe,X)}});function K(de){var fe,ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},X="eigenvectors"in ne?ne.eigenvectors:!0,se=(fe=ne.precision)!==null&&fe!==void 0?fe:e.relTol,me=re(de,se,X);return ne.matricize&&(me.values=n(me.values),X&&(me.eigenvectors=me.eigenvectors.map(ue=>{var{value:be,vector:ye}=ue;return{value:be,vector:n(ye)}}))),X&&Object.defineProperty(me,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),me}function re(de,fe,ne){var X=de.toArray(),se=de.size();if(se.length!==2||se[0]!==se[1])throw new RangeError("Matrix must be square (size: ".concat(Pt(se),")"));var me=se[0];if(O(X,me,fe)&&(te(X,me),Q(X,me,fe))){var ue=W(de,X,me);return $(X,me,fe,ue,ne)}var be=W(de,X,me);return z(X,me,fe,be,ne)}function Q(de,fe,ne){for(var X=0;X<fe;X++)for(var se=X;se<fe;se++)if(v(p(o(s(de[X][se],de[se][X]))),ne))return!1;return!0}function O(de,fe,ne){for(var X=0;X<fe;X++)for(var se=0;se<fe;se++)if(v(p(o(I(de[X][se]))),ne))return!1;return!0}function te(de,fe){for(var ne=0;ne<fe;ne++)for(var X=0;X<fe;X++)de[ne][X]=V(de[ne][X])}function W(de,fe,ne){var X=de.datatype();if(X==="number"||X==="BigNumber"||X==="Complex")return X;for(var se=!1,me=!1,ue=!1,be=0;be<ne;be++)for(var ye=0;ye<ne;ye++){var Ie=fe[be][ye];if(it(Ie)||r_(Ie))se=!0;else if(xt(Ie))me=!0;else if(ac(Ie))ue=!0;else throw TypeError("Unsupported type in Matrix: "+dr(Ie))}if(me&&ue&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),ue){for(var Ue=0;Ue<ne;Ue++)for(var We=0;We<ne;We++)fe[Ue][We]=w(fe[Ue][We]);return"Complex"}if(me){for(var Be=0;Be<ne;Be++)for(var $e=0;$e<ne;$e++)fe[Be][$e]=p(fe[Be][$e]);return"BigNumber"}if(se){for(var He=0;He<ne;He++)for(var ee=0;ee<ne;ee++)fe[He][ee]=E(fe[He][ee]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),x8="expm",TMe=["typed","abs","add","identity","inv","multiply"],CMe=Y(x8,TMe,r=>{var{typed:e,abs:t,add:n,identity:i,inv:s,multiply:a}=r;return e(x8,{Matrix:function(h){var d=h.size();if(d.length!==2||d[0]!==d[1])throw new RangeError("Matrix must be square (size: "+Pt(d)+")");for(var f=d[0],p=1e-15,g=o(h),b=l(g,p),v=b.q,x=b.j,y=a(h,Math.pow(2,-x)),E=i(f),w=i(f),A=1,T=y,S=-1,N=1;N<=v;N++)N>1&&(T=a(T,y),S=-S),A=A*(v-N+1)/((2*v-N+1)*N),E=n(E,a(A,T)),w=n(w,a(A*S,T));for(var D=a(s(w),E),_=0;_<x;_++)D=a(D,D);return Af(h)?h.createSparseMatrix(D):D}});function o(c){for(var h=c.size()[0],d=0,f=0;f<h;f++){for(var p=0,g=0;g<h;g++)p+=t(c.get([f,g]));d=Math.max(p,d)}return d}function l(c,h){for(var d=30,f=0;f<d;f++)for(var p=0;p<=f;p++){var g=f-p;if(u(c,p,g)<h)return{q:p,j:g}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function u(c,h,d){for(var f=1,p=2;p<=h;p++)f*=p;for(var g=f,b=h+1;b<=2*h;b++)g*=b;var v=g*(2*h+1);return 8*Math.pow(c/Math.pow(2,d),2*h)*f*f/(g*v)}}),_8="sqrtm",NMe=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],DMe=Y(_8,NMe,r=>{var{typed:e,abs:t,add:n,multiply:i,map:s,sqrt:a,subtract:o,inv:l,size:u,max:c,identity:h}=r,d=1e3,f=1e-6;function p(g){var b,v=0,x=g,y=h(u(g));do{var E=x;if(x=i(.5,n(E,l(y))),y=i(.5,n(y,l(E))),b=c(t(o(x,E))),b>f&&++v>d)throw new Error("computing square root of matrix: iterative method could not converge")}while(b>f);return x}return e(_8,{"Array | Matrix":function(b){var v=ot(b)?b.size():vt(b);switch(v.length){case 1:if(v[0]===1)return s(b,a);throw new RangeError("Matrix must be square (size: "+Pt(v)+")");case 2:{var x=v[0],y=v[1];if(x===y)return p(b);throw new RangeError("Matrix must be square (size: "+Pt(v)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+Pt(v)+")")}}})}),A8="sylvester",MMe=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],IMe=Y(A8,MMe,r=>{var{typed:e,schur:t,matrixFromColumns:n,matrix:i,multiply:s,range:a,concat:o,transpose:l,index:u,subset:c,add:h,subtract:d,identity:f,lusolve:p,abs:g,config:b}=r;return e(A8,{"Matrix, Matrix, Matrix":v,"Array, Matrix, Matrix":function(y,E,w){return v(i(y),E,w)},"Array, Array, Matrix":function(y,E,w){return v(i(y),i(E),w)},"Array, Matrix, Array":function(y,E,w){return v(i(y),E,i(w))},"Matrix, Array, Matrix":function(y,E,w){return v(y,i(E),w)},"Matrix, Array, Array":function(y,E,w){return v(y,i(E),i(w))},"Matrix, Matrix, Array":function(y,E,w){return v(y,E,i(w))},"Array, Array, Array":function(y,E,w){return v(i(y),i(E),i(w)).toArray()}});function v(x,y,E){for(var w=y.size()[0],A=x.size()[0],T=t(x),S=T.T,N=T.U,D=t(s(-1,y)),_=D.T,M=D.U,I=s(s(l(N),E),M),V=a(0,A),q=[],P=(be,ye)=>o(be,ye,1),L=(be,ye)=>o(be,ye,0),$=0;$<w;$++)if($<w-1&&g(c(_,u($+1,$)))>1e-5){for(var z=L(c(I,u(V,[$])),c(I,u(V,[$+1]))),K=0;K<$;K++)z=h(z,L(s(q[K],c(_,u(K,$))),s(q[K],c(_,u(K,$+1)))));var re=s(f(A),s(-1,c(_,u($,$)))),Q=s(f(A),s(-1,c(_,u($+1,$)))),O=s(f(A),s(-1,c(_,u($,$+1)))),te=s(f(A),s(-1,c(_,u($+1,$+1)))),W=L(P(h(S,re),Q),P(O,h(S,te))),de=p(W,z);q[$]=de.subset(u(a(0,A),[0])),q[$+1]=de.subset(u(a(A,2*A),[0])),$++}else{for(var fe=c(I,u(V,[$])),ne=0;ne<$;ne++)fe=h(fe,s(q[ne],c(_,u(ne,$))));var X=c(_,u($,$)),se=d(S,s(X,f(A)));q[$]=p(se,fe)}var me=i(n(...q)),ue=s(N,s(me,l(M)));return ue}}),E8="schur",PMe=["typed","matrix","identity","multiply","qr","norm","subtract"],RMe=Y(E8,PMe,r=>{var{typed:e,matrix:t,identity:n,multiply:i,qr:s,norm:a,subtract:o}=r;return e(E8,{Array:function(c){var h=l(t(c));return{U:h.U.valueOf(),T:h.T.valueOf()}},Matrix:function(c){return l(c)}});function l(u){var c=u.size()[0],h=u,d=n(c),f=0,p;do{p=h;var g=s(h),b=g.Q,v=g.R;if(h=i(v,b),d=i(d,b),f++>100)break}while(a(o(h,p))>1e-4);return{U:d,T:h}}}),S8="lyap",kMe=["typed","matrix","sylvester","multiply","transpose"],FMe=Y(S8,kMe,r=>{var{typed:e,matrix:t,sylvester:n,multiply:i,transpose:s}=r;return e(S8,{"Matrix, Matrix":function(o,l){return n(o,s(o),i(-1,l))},"Array, Matrix":function(o,l){return n(t(o),s(t(o)),i(-1,l))},"Matrix, Array":function(o,l){return n(o,s(t(o)),t(i(-1,l)))},"Array, Array":function(o,l){return n(t(o),s(t(o)),t(i(-1,l))).toArray()}})}),OMe="divide",BMe=["typed","matrix","multiply","equalScalar","divideScalar","inv"],LMe=Y(OMe,BMe,r=>{var{typed:e,matrix:t,multiply:n,equalScalar:i,divideScalar:s,inv:a}=r,o=Fi({typed:e,equalScalar:i}),l=vo({typed:e});return e("divide",bK({"Array | Matrix, Array | Matrix":function(c,h){return n(c,a(h))},"DenseMatrix, any":function(c,h){return l(c,h,s,!1)},"SparseMatrix, any":function(c,h){return o(c,h,s,!1)},"Array, any":function(c,h){return l(t(c),h,s,!1).valueOf()},"any, Array | Matrix":function(c,h){return n(c,a(h))}},s.signatures))}),T8="distance",$Me=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],VMe=Y(T8,$Me,r=>{var{typed:e,addScalar:t,subtractScalar:n,multiplyScalar:i,divideScalar:s,deepEqual:a,sqrt:o,abs:l}=r;return e(T8,{"Array, Array, Array":function(w,A,T){if(w.length===2&&A.length===2&&T.length===2){if(!c(w))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(A))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(T))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(a(A,T))throw new TypeError("LinePoint1 should not be same with LinePoint2");var S=n(T[1],A[1]),N=n(A[0],T[0]),D=n(i(T[0],A[1]),i(A[0],T[1]));return b(w[0],w[1],S,N,D)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(w,A,T){if(Object.keys(w).length===2&&Object.keys(A).length===2&&Object.keys(T).length===2){if(!c(w))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(A))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(T))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(a(p(A),p(T)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in w&&"pointY"in w&&"lineOnePtX"in A&&"lineOnePtY"in A&&"lineTwoPtX"in T&&"lineTwoPtY"in T){var S=n(T.lineTwoPtY,A.lineOnePtY),N=n(A.lineOnePtX,T.lineTwoPtX),D=n(i(T.lineTwoPtX,A.lineOnePtY),i(A.lineOnePtX,T.lineTwoPtY));return b(w.pointX,w.pointY,S,N,D)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(w,A){if(w.length===2&&A.length===3){if(!c(w))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!h(A))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return b(w[0],w[1],A[0],A[1],A[2])}else if(w.length===3&&A.length===6){if(!h(w))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!f(A))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return v(w[0],w[1],w[2],A[0],A[1],A[2],A[3],A[4],A[5])}else if(w.length===A.length&&w.length>0){if(!d(w))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!d(A))throw new TypeError("All values of an array should be numbers or BigNumbers");return x(w,A)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(w,A){if(Object.keys(w).length===2&&Object.keys(A).length===3){if(!c(w))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!h(A))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in w&&"pointY"in w&&"xCoeffLine"in A&&"yCoeffLine"in A&&"constant"in A)return b(w.pointX,w.pointY,A.xCoeffLine,A.yCoeffLine,A.constant);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===3&&Object.keys(A).length===6){if(!h(w))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!f(A))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in w&&"pointY"in w&&"x0"in A&&"y0"in A&&"z0"in A&&"a"in A&&"b"in A&&"c"in A)return v(w.pointX,w.pointY,w.pointZ,A.x0,A.y0,A.z0,A.a,A.b,A.c);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===2&&Object.keys(A).length===2){if(!c(w))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(A))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in w&&"pointOneY"in w&&"pointTwoX"in A&&"pointTwoY"in A)return x([w.pointOneX,w.pointOneY],[A.pointTwoX,A.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===3&&Object.keys(A).length===3){if(!h(w))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!h(A))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in w&&"pointOneY"in w&&"pointOneZ"in w&&"pointTwoX"in A&&"pointTwoY"in A&&"pointTwoZ"in A)return x([w.pointOneX,w.pointOneY,w.pointOneZ],[A.pointTwoX,A.pointTwoY,A.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(w){if(!g(w))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return y(w)}});function u(E){return typeof E=="number"||xt(E)}function c(E){return E.constructor!==Array&&(E=p(E)),u(E[0])&&u(E[1])}function h(E){return E.constructor!==Array&&(E=p(E)),u(E[0])&&u(E[1])&&u(E[2])}function d(E){return Array.isArray(E)||(E=p(E)),E.every(u)}function f(E){return E.constructor!==Array&&(E=p(E)),u(E[0])&&u(E[1])&&u(E[2])&&u(E[3])&&u(E[4])&&u(E[5])}function p(E){for(var w=Object.keys(E),A=[],T=0;T<w.length;T++)A.push(E[w[T]]);return A}function g(E){if(E[0].length===2&&u(E[0][0])&&u(E[0][1])){if(E.some(w=>w.length!==2||!u(w[0])||!u(w[1])))return!1}else if(E[0].length===3&&u(E[0][0])&&u(E[0][1])&&u(E[0][2])){if(E.some(w=>w.length!==3||!u(w[0])||!u(w[1])||!u(w[2])))return!1}else return!1;return!0}function b(E,w,A,T,S){var N=l(t(t(i(A,E),i(T,w)),S)),D=o(t(i(A,A),i(T,T)));return s(N,D)}function v(E,w,A,T,S,N,D,_,M){var I=[n(i(n(S,w),M),i(n(N,A),_)),n(i(n(N,A),D),i(n(T,E),M)),n(i(n(T,E),_),i(n(S,w),D))];I=o(t(t(i(I[0],I[0]),i(I[1],I[1])),i(I[2],I[2])));var V=o(t(t(i(D,D),i(_,_)),i(M,M)));return s(I,V)}function x(E,w){for(var A=E.length,T=0,S=0,N=0;N<A;N++)S=n(E[N],w[N]),T=t(i(S,S),T);return o(T)}function y(E){for(var w=[],A=[],T=[],S=0;S<E.length-1;S++)for(var N=S+1;N<E.length;N++)E[0].length===2?(A=[E[S][0],E[S][1]],T=[E[N][0],E[N][1]]):E[0].length===3&&(A=[E[S][0],E[S][1],E[S][2]],T=[E[N][0],E[N][1],E[N][2]]),w.push(x(A,T));return w}}),UMe="intersect",zMe=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],jMe=Y(UMe,zMe,r=>{var{typed:e,config:t,abs:n,add:i,addScalar:s,matrix:a,multiply:o,multiplyScalar:l,divideScalar:u,subtract:c,smaller:h,equalScalar:d,flatten:f,isZero:p,isNumeric:g}=r;return e("intersect",{"Array, Array, Array":b,"Array, Array, Array, Array":v,"Matrix, Matrix, Matrix":function(_,M,I){var V=b(_.valueOf(),M.valueOf(),I.valueOf());return V===null?null:a(V)},"Matrix, Matrix, Matrix, Matrix":function(_,M,I,V){var q=v(_.valueOf(),M.valueOf(),I.valueOf(),V.valueOf());return q===null?null:a(q)}});function b(D,_,M){if(D=x(D),_=x(_),M=x(M),!E(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!E(_))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!w(M))throw new TypeError("Array with 4 numbers expected as third argument");return N(D[0],D[1],D[2],_[0],_[1],_[2],M[0],M[1],M[2],M[3])}function v(D,_,M,I){if(D=x(D),_=x(_),M=x(M),I=x(I),D.length===2){if(!y(D))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!y(_))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!y(M))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!y(I))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return A(D,_,M,I)}else if(D.length===3){if(!E(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!E(_))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!E(M))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!E(I))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return S(D[0],D[1],D[2],_[0],_[1],_[2],M[0],M[1],M[2],I[0],I[1],I[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function x(D){return D.length===1?D[0]:D.length>1&&Array.isArray(D[0])&&D.every(_=>Array.isArray(_)&&_.length===1)?f(D):D}function y(D){return D.length===2&&g(D[0])&&g(D[1])}function E(D){return D.length===3&&g(D[0])&&g(D[1])&&g(D[2])}function w(D){return D.length===4&&g(D[0])&&g(D[1])&&g(D[2])&&g(D[3])}function A(D,_,M,I){var V=D,q=M,P=c(V,_),L=c(q,I),$=c(l(P[0],L[1]),l(L[0],P[1]));if(p($)||h(n($),t.relTol))return null;var z=l(L[0],V[1]),K=l(L[1],V[0]),re=l(L[0],q[1]),Q=l(L[1],q[0]),O=u(s(c(c(z,K),re),Q),$);return i(o(P,O),V)}function T(D,_,M,I,V,q,P,L,$,z,K,re){var Q=l(c(D,_),c(M,I)),O=l(c(V,q),c(P,L)),te=l(c($,z),c(K,re));return s(s(Q,O),te)}function S(D,_,M,I,V,q,P,L,$,z,K,re){var Q=T(D,P,z,P,_,L,K,L,M,$,re,$),O=T(z,P,I,D,K,L,V,_,re,$,q,M),te=T(D,P,I,D,_,L,V,_,M,$,q,M),W=T(z,P,z,P,K,L,K,L,re,$,re,$),de=T(I,D,I,D,V,_,V,_,q,M,q,M),fe=c(l(Q,O),l(te,W)),ne=c(l(de,W),l(O,O));if(p(ne))return null;var X=u(fe,ne),se=u(s(Q,l(X,O)),W),me=s(D,l(X,c(I,D))),ue=s(_,l(X,c(V,_))),be=s(M,l(X,c(q,M))),ye=s(P,l(se,c(z,P))),Ie=s(L,l(se,c(K,L))),Ue=s($,l(se,c(re,$)));return d(me,ye)&&d(ue,Ie)&&d(be,Ue)?[me,ue,be]:null}function N(D,_,M,I,V,q,P,L,$,z){var K=l(D,P),re=l(I,P),Q=l(_,L),O=l(V,L),te=l(M,$),W=l(q,$),de=c(c(c(z,K),Q),te),fe=c(c(c(s(s(re,O),W),K),Q),te),ne=u(de,fe),X=s(D,l(ne,c(I,D))),se=s(_,l(ne,c(V,_))),me=s(M,l(ne,c(q,M)));return[X,se,me]}}),C8="sum",qMe=["typed","config","add","numeric"],hY=Y(C8,qMe,r=>{var{typed:e,config:t,add:n,numeric:i}=r;return e(C8,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":a,"...":function(l){if(Z0(l))throw new TypeError("Scalar values expected in function sum");return s(l)}});function s(o){var l;return Dd(o,function(u){try{l=l===void 0?u:n(l,u)}catch(c){throw As(c,"sum",u)}}),l===void 0&&(l=i(0,t.number)),typeof l=="string"&&(l=i(l,Vd(l,t))),l}function a(o,l){try{var u=n2(o,l,n);return u}catch(c){throw As(c,"sum")}}}),RA="cumsum",HMe=["typed","add","unaryPlus"],dY=Y(RA,HMe,r=>{var{typed:e,add:t,unaryPlus:n}=r;return e(RA,{Array:i,Matrix:function(u){return u.create(i(u.valueOf(),u.datatype()))},"Array, number | BigNumber":a,"Matrix, number | BigNumber":function(u,c){return u.create(a(u.valueOf(),c),u.datatype())},"...":function(u){if(Z0(u))throw new TypeError("All values expected to be scalar in function cumsum");return i(u)}});function i(l){try{return s(l)}catch(u){throw As(u,RA)}}function s(l){if(l.length===0)return[];for(var u=[n(l[0])],c=1;c<l.length;++c)u.push(t(u[c-1],l[c]));return u}function a(l,u){var c=vt(l);if(u<0||u>=c.length)throw new Qo(u,c.length);try{return o(l,u)}catch(h){throw As(h,RA)}}function o(l,u){var c,h,d;if(u<=0){var f=l[0][0];if(Array.isArray(f)){for(d=WK(l),h=[],c=0;c<d.length;c++)h[c]=o(d[c],u-1);return h}else return s(l)}else{for(h=[],c=0;c<l.length;c++)h[c]=o(l[c],u-1);return h}}}),N8="mean",GMe=["typed","add","divide"],fY=Y(N8,GMe,r=>{var{typed:e,add:t,divide:n}=r;return e(N8,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":i,"...":function(o){if(Z0(o))throw new TypeError("Scalar values expected in function mean");return s(o)}});function i(a,o){try{var l=n2(a,o,t),u=Array.isArray(a)?vt(a):a.size();return n(l,u[o])}catch(c){throw As(c,"mean")}}function s(a){var o,l=0;if(Dd(a,function(u){try{o=o===void 0?u:t(o,u),l++}catch(c){throw As(c,"mean",u)}}),l===0)throw new Error("Cannot calculate the mean of an empty array");return n(o,l)}}),D8="median",WMe=["typed","add","divide","compare","partitionSelect"],KMe=Y(D8,WMe,r=>{var{typed:e,add:t,divide:n,compare:i,partitionSelect:s}=r;function a(u){try{u=Yt(u.valueOf());var c=u.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var h=c/2-1,d=s(u,h+1),f=u[h],p=0;p<h;++p)i(u[p],f)>0&&(f=u[p]);return l(f,d)}else{var g=s(u,(c-1)/2);return o(g)}}catch(b){throw As(b,"median")}}var o=e({"number | BigNumber | Complex | Unit":function(c){return c}}),l=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(c,h){return n(t(c,h),2)}});return e(D8,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(c,h){throw new Error("median(A, dim) is not yet supported")},"...":function(c){if(Z0(c))throw new TypeError("Scalar values expected in function median");return a(c)}})}),M8="mad",XMe=["typed","abs","map","median","subtract"],YMe=Y(M8,XMe,r=>{var{typed:e,abs:t,map:n,median:i,subtract:s}=r;return e(M8,{"Array | Matrix":a,"...":function(l){return a(l)}});function a(o){if(o=Yt(o.valueOf()),o.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var l=i(o);return i(n(o,function(u){return t(s(u,l))}))}catch(u){throw u instanceof TypeError&&u.message.includes("median")?new TypeError(u.message.replace("median","mad")):As(u,"mad")}}}),YN="unbiased",I8="variance",QMe=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],mY=Y(I8,QMe,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:s,mapSlices:a,isNaN:o}=r;return e(I8,{"Array | Matrix":function(h){return l(h,YN)},"Array | Matrix, string":l,"Array | Matrix, number | BigNumber":function(h,d){return u(h,d,YN)},"Array | Matrix, number | BigNumber, string":u,"...":function(h){return l(h,YN)}});function l(c,h){var d,f=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(Dd(c,function(b){try{d=d===void 0?b:t(d,b),f++}catch(v){throw As(v,"variance",b)}}),f===0)throw new Error("Cannot calculate variance of an empty array");var p=s(d,f);if(d=void 0,Dd(c,function(b){var v=n(b,p);d=d===void 0?i(v,v):t(d,i(v,v))}),o(d))return d;switch(h){case"uncorrected":return s(d,f);case"biased":return s(d,f+1);case"unbiased":{var g=xt(d)?d.mul(0):0;return f===1?g:s(d,f-1)}default:throw new Error('Unknown normalization "'+h+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function u(c,h,d){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return a(c,h,f=>l(f,d))}catch(f){throw As(f,"variance")}}}),P8="quantileSeq",JMe=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],pY=Y(P8,JMe,r=>{var{typed:e,bignumber:t,add:n,subtract:i,divide:s,multiply:a,partitionSelect:o,compare:l,isInteger:u,smaller:c,smallerEq:h,larger:d,mapSlices:f}=r;return e(P8,{"Array | Matrix, number | BigNumber":(x,y)=>g(x,y,!1),"Array | Matrix, number | BigNumber, number":(x,y,E)=>p(x,y,!1,E,g),"Array | Matrix, number | BigNumber, boolean":g,"Array | Matrix, number | BigNumber, boolean, number":(x,y,E,w)=>p(x,y,E,w,g),"Array | Matrix, Array | Matrix":(x,y)=>b(x,y,!1),"Array | Matrix, Array | Matrix, number":(x,y,E)=>p(x,y,!1,E,b),"Array | Matrix, Array | Matrix, boolean":b,"Array | Matrix, Array | Matrix, boolean, number":(x,y,E,w)=>p(x,y,E,w,b)});function p(x,y,E,w,A){return f(x,w,T=>A(T,y,E))}function g(x,y,E){var w,A=x.valueOf();if(c(y,0))throw new Error("N/prob must be non-negative");if(h(y,1))return it(y)?v(A,y,E):t(v(A,y,E));if(d(y,1)){if(!u(y))throw new Error("N must be a positive integer");if(d(y,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var T=n(y,1);w=[];for(var S=0;c(S,y);S++){var N=s(S+1,T);w.push(v(A,N,E))}return it(y)?w:t(w)}}function b(x,y,E){for(var w=x.valueOf(),A=y.valueOf(),T=[],S=0;S<A.length;++S)T.push(v(w,A[S],E));return T}function v(x,y,E){var w=Yt(x),A=w.length;if(A===0)throw new Error("Cannot calculate quantile of an empty sequence");var T=it(y)?y*(A-1):y.times(A-1),S=it(y)?Math.floor(T):T.floor().toNumber(),N=it(y)?T%1:T.minus(S);if(u(T))return E?w[T]:o(w,it(y)?T:T.valueOf());var D,_;if(E)D=w[S],_=w[S+1];else{_=o(w,S+1),D=w[S];for(var M=0;M<S;++M)l(w[M],D)>0&&(D=w[M])}return n(a(D,i(1,N)),a(_,N))}}),R8="std",ZMe=["typed","map","sqrt","variance"],gY=Y(R8,ZMe,r=>{var{typed:e,map:t,sqrt:n,variance:i}=r;return e(R8,{"Array | Matrix":s,"Array | Matrix, string":s,"Array | Matrix, number | BigNumber":s,"Array | Matrix, number | BigNumber, string":s,"...":function(o){return s(o)}});function s(a,o){if(a.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var l=i.apply(null,arguments);return Ca(l)?t(l,n):n(l)}catch(u){throw u instanceof TypeError&&u.message.includes(" variance")?new TypeError(u.message.replace(" variance"," std")):u}}}),k8="corr",eIe=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],tIe=Y(k8,eIe,r=>{var{typed:e,matrix:t,sqrt:n,sum:i,add:s,subtract:a,multiply:o,pow:l,divide:u}=r;return e(k8,{"Array, Array":function(f,p){return c(f,p)},"Matrix, Matrix":function(f,p){var g=c(f.toArray(),p.toArray());return Array.isArray(g)?t(g):g}});function c(d,f){var p=[];if(Array.isArray(d[0])&&Array.isArray(f[0])){if(d.length!==f.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var g=0;g<d.length;g++){if(d[g].length!==f[g].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");p.push(h(d[g],f[g]))}return p}else{if(d.length!==f.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return h(d,f)}}function h(d,f){var p=d.length,g=i(d),b=i(f),v=d.reduce((A,T,S)=>s(A,o(T,f[S])),0),x=i(d.map(A=>l(A,2))),y=i(f.map(A=>l(A,2))),E=a(o(p,v),o(g,b)),w=n(o(a(o(p,x),l(g,2)),a(o(p,y),l(b,2))));return u(E,w)}}),F8="bernoulli",rIe=["typed","config","isInteger","number","?BigNumber","?Fraction"],nIe=Y(F8,rIe,r=>{var{typed:e,config:t,number:n,BigNumber:i,Fraction:s}=r,a=[void 0],o=[void 0],l=[void 0],u=50;return e(F8,{number:c=>QN(c,h=>h,a,(h,d)=>h+d,(h,d)=>h*d,(h,d)=>h/d),"bigint | Fraction":c=>QN(n(c),h=>new s(h),o,(h,d)=>h.add(d),(h,d)=>h.mul(d),(h,d)=>h.div(d)),BigNumber:c=>(t.precision!==u&&(l=[void 0],u=t.precision),QN(n(c),h=>new i(h),l,(h,d)=>h.add(d),(h,d)=>h.mul(d),(h,d)=>h.div(d)))})});function QN(r,e,t,n,i,s){if(r<0||!tt(r))throw new RangeError("Bernoulli index must be nonnegative integer");if(r===0)return e(1);if(r===1)return s(e(-1),e(2));if(r%2===1)return e(0);var a=e(1);t.length===1&&t.push([s(a,e(-3)),s(a,e(-2)),s(a,e(6))]);for(var o=r/2,l=e(0),u=e(2);t.length<=o;){for(var c=t.length,h=Math.floor((c+1)/2),d=l,f=1;f<h;++f)d=n(d,i(t[f][0],t[c-f][0]));d=i(d,u),c%2===0&&(d=n(d,i(t[h][0],t[h][0]))),d=s(d,e(-(2*c+1)));var p=s(i(t[c-1][1],e(-c*(2*c-1))),u);t.push([d,p,i(p,d)])}return t[o][2]}var O8="combinations",iIe=["typed"],sIe=Y(O8,iIe,r=>{var{typed:e}=r;return e(O8,{"number, number":mX,"BigNumber, BigNumber":function(n,i){var s=n.constructor,a,o,l=n.minus(i),u=new s(1);if(!B8(n)||!B8(i))throw new TypeError("Positive integer value expected in function combinations");if(i.gt(n))throw new TypeError("k must be less than n in function combinations");if(a=u,i.lt(l))for(o=u;o.lte(l);o=o.plus(u))a=a.times(i.plus(o)).dividedBy(o);else for(o=u;o.lte(i);o=o.plus(u))a=a.times(l.plus(o)).dividedBy(o);return a}})});function B8(r){return r.isInteger()&&r.gte(0)}var L8="combinationsWithRep",aIe=["typed"],oIe=Y(L8,aIe,r=>{var{typed:e}=r;return e(L8,{"number, number":function(n,i){if(!tt(n)||n<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!tt(i)||i<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n<1)throw new TypeError("k must be less than or equal to n + k - 1");if(i<n-1){var s=tc(n,n+i-1);return s/tc(1,i)}var a=tc(i+1,n+i-1);return a/tc(1,n-1)},"BigNumber, BigNumber":function(n,i){var s=n.constructor,a,o,l=new s(1),u=n.minus(l);if(!$8(n)||!$8(i))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n.lt(l))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(a=l,i.lt(u))for(o=l;o.lte(u);o=o.plus(l))a=a.times(i.plus(o)).dividedBy(o);else for(o=l;o.lte(i);o=o.plus(l))a=a.times(u.plus(o)).dividedBy(o);return a}})});function $8(r){return r.isInteger()&&r.gte(0)}var V8="gamma",lIe=["typed","config","multiplyScalar","pow","BigNumber","Complex"],uIe=Y(V8,lIe,r=>{var{typed:e,config:t,multiplyScalar:n,pow:i,BigNumber:s,Complex:a}=r;function o(u){if(u.im===0)return mT(u.re);if(u.re<.5){var c=new a(1-u.re,-u.im),h=new a(Math.PI*u.re,Math.PI*u.im);return new a(Math.PI).div(h.sin()).div(o(c))}u=new a(u.re-1,u.im);for(var d=new a(Ug[0],0),f=1;f<Ug.length;++f){var p=new a(Ug[f],0);d=d.add(p.div(u.add(f)))}var g=new a(u.re+gX+.5,u.im),b=Math.sqrt(2*Math.PI),v=g.pow(u.add(.5)),x=g.neg().exp();return d.mul(b).mul(v).mul(x)}return e(V8,{number:mT,Complex:o,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new s(1/0):l(c.minus(1));if(!c.isFinite())return new s(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function l(u){if(u<8)return new s([1,1,2,6,24,120,720,5040][u]);var c=t.precision+(Math.log(u.toNumber())|0),h=s.clone({precision:c});if(u%2===1)return u.times(l(new s(u-1)));for(var d=u,f=new h(u),p=u.toNumber();d>2;)d-=2,p+=d,f=f.times(p);return new s(f.toPrecision(s.precision))}}),U8="lgamma",cIe=["Complex","typed"],hIe=Y(U8,cIe,r=>{var{Complex:e,typed:t}=r,n=7,i=7,s=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return t(U8,{number:pT,Complex:a,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function a(u){var c=6.283185307179586,h=1.1447298858494002,d=.1;if(u.isNaN())return new e(NaN,NaN);if(u.im===0)return new e(pT(u.re),0);if(u.re>=n||Math.abs(u.im)>=i)return o(u);if(u.re<=d){var f=Oge(c,u.im)*Math.floor(.5*u.re+.25),p=u.mul(Math.PI).sin().log(),g=a(new e(1-u.re,-u.im));return new e(h,f).sub(p).sub(g)}else return u.im>=0?l(u):l(u.conjugate()).conjugate()}function o(u){for(var c=u.sub(.5).mul(u.log()).sub(u).add(vX),h=new e(1,0).div(u),d=h.div(u),f=s[0],p=s[1],g=2*d.re,b=d.re*d.re+d.im*d.im,v=2;v<8;v++){var x=p;p=-b*f+s[v],f=g*f+x}var y=h.mul(d.mul(f).add(p));return c.add(y)}function l(u){var c=0,h=0,d=u;for(u=u.add(1);u.re<=n;){d=d.mul(u);var f=d.im<0?1:0;f!==0&&h===0&&c++,h=f,u=u.add(1)}return o(u).sub(d.log()).sub(new e(0,c*2*Math.PI*1))}}),z8="factorial",dIe=["typed","gamma"],fIe=Y(z8,dIe,r=>{var{typed:e,gamma:t}=r;return e(z8,{number:function(i){if(i<0)throw new Error("Value must be non-negative");return t(i+1)},BigNumber:function(i){if(i.isNegative())throw new Error("Value must be non-negative");return t(i.plus(1))},"Array | Matrix":e.referToSelf(n=>i=>_t(i,n))})}),j8="kldivergence",mIe=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],pIe=Y(j8,mIe,r=>{var{typed:e,matrix:t,divide:n,sum:i,multiply:s,map:a,dotDivide:o,log:l,isNumeric:u}=r;return e(j8,{"Array, Array":function(d,f){return c(t(d),t(f))},"Matrix, Array":function(d,f){return c(d,t(f))},"Array, Matrix":function(d,f){return c(t(d),f)},"Matrix, Matrix":function(d,f){return c(d,f)}});function c(h,d){var f=d.size().length,p=h.size().length;if(f>1)throw new Error("first object must be one dimensional");if(p>1)throw new Error("second object must be one dimensional");if(f!==p)throw new Error("Length of two vectors must be equal");var g=i(h);if(g===0)throw new Error("Sum of elements in first object must be non zero");var b=i(d);if(b===0)throw new Error("Sum of elements in second object must be non zero");var v=n(h,i(h)),x=n(d,i(d)),y=i(s(v,a(o(v,x),E=>l(E))));return u(y)?y:Number.NaN}}),q8="multinomial",gIe=["typed","add","divide","multiply","factorial","isInteger","isPositive"],vIe=Y(q8,gIe,r=>{var{typed:e,add:t,divide:n,multiply:i,factorial:s,isInteger:a,isPositive:o}=r;return e(q8,{"Array | Matrix":function(u){var c=0,h=1;return Dd(u,function(d){if(!a(d)||!o(d))throw new TypeError("Positive integer value expected in function multinomial");c=t(c,d),h=i(h,s(d))}),n(s(c),h)}})}),H8="permutations",yIe=["typed","factorial"],bIe=Y(H8,yIe,r=>{var{typed:e,factorial:t}=r;return e(H8,{"number | BigNumber":t,"number, number":function(i,s){if(!tt(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(!tt(s)||s<0)throw new TypeError("Positive integer value expected in function permutations");if(s>i)throw new TypeError("second argument k must be less than or equal to first argument n");return tc(i-s+1,i)},"BigNumber, BigNumber":function(i,s){var a,o;if(!G8(i)||!G8(s))throw new TypeError("Positive integer value expected in function permutations");if(s.gt(i))throw new TypeError("second argument k must be less than or equal to first argument n");var l=i.mul(0).add(1);for(a=l,o=i.minus(s).plus(1);o.lte(i);o=o.plus(1))a=a.times(o);return a}})});function G8(r){return r.isInteger()&&r.gte(0)}var qF={exports:{}};qF.exports;(function(r){(function(e,t,n){function i(l){var u=this,c=o();u.next=function(){var h=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=h-(u.c=h|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function s(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function a(l,u){var c=new i(l),h=u&&u.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,h&&(typeof h=="object"&&s(h,c),d.state=function(){return s(c,{})}),d}function o(){var l=4022871197,u=function(c){c=String(c);for(var h=0;h<c.length;h++){l+=c.charCodeAt(h);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return u}t&&t.exports?t.exports=a:this.alea=a})(up,r)})(qF);var wIe=qF.exports,HF={exports:{}};HF.exports;(function(r){(function(e,t,n){function i(o){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var h=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^h^h>>>8},o===(o|0)?l.x=o:u+=o;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function s(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function a(o,l){var u=new i(o),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&s(c,u),h.state=function(){return s(u,{})}),h}t&&t.exports?t.exports=a:this.xor128=a})(up,r)})(HF);var xIe=HF.exports,GF={exports:{}};GF.exports;(function(r){(function(e,t,n){function i(o){var l=this,u="";l.next=function(){var h=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(h^h<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:u+=o;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function a(o,l){var u=new i(o),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&s(c,u),h.state=function(){return s(u,{})}),h}t&&t.exports?t.exports=a:this.xorwow=a})(up,r)})(GF);var _Ie=GF.exports,WF={exports:{}};WF.exports;(function(r){(function(e,t,n){function i(o){var l=this;l.next=function(){var c=l.x,h=l.i,d,f;return d=c[h],d^=d>>>7,f=d^d<<24,d=c[h+1&7],f^=d^d>>>10,d=c[h+3&7],f^=d^d>>>3,d=c[h+4&7],f^=d^d<<7,d=c[h+7&7],d=d^d<<13,f^=d^d<<9,c[h]=f,l.i=h+1&7,f};function u(c,h){var d,f=[];if(h===(h|0))f[0]=h;else for(h=""+h,d=0;d<h.length;++d)f[d&7]=f[d&7]<<15^h.charCodeAt(d)+f[d+1&7]<<13;for(;f.length<8;)f.push(0);for(d=0;d<8&&f[d]===0;++d);for(d==8?f[7]=-1:f[d],c.x=f,c.i=0,d=256;d>0;--d)c.next()}u(l,o)}function s(o,l){return l.x=o.x.slice(),l.i=o.i,l}function a(o,l){o==null&&(o=+new Date);var u=new i(o),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(c.x&&s(c,u),h.state=function(){return s(u,{})}),h}t&&t.exports?t.exports=a:this.xorshift7=a})(up,r)})(WF);var AIe=WF.exports,KF={exports:{}};KF.exports;(function(r){(function(e,t,n){function i(o){var l=this;l.next=function(){var c=l.w,h=l.X,d=l.i,f,p;return l.w=c=c+1640531527|0,p=h[d+34&127],f=h[d=d+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,p=h[d]=p^f,l.i=d,p+(c^c>>>16)|0};function u(c,h){var d,f,p,g,b,v=[],x=128;for(h===(h|0)?(f=h,h=null):(h=h+"\0",f=0,x=Math.max(x,h.length)),p=0,g=-32;g<x;++g)h&&(f^=h.charCodeAt((g+32)%h.length)),g===0&&(b=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,g>=0&&(b=b+1640531527|0,d=v[g&127]^=f+b,p=d==0?p+1:0);for(p>=128&&(v[(h&&h.length||0)&127]=-1),p=127,g=4*128;g>0;--g)f=v[p+34&127],d=v[p=p+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,v[p]=f^d;c.w=b,c.X=v,c.i=p}u(l,o)}function s(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function a(o,l){o==null&&(o=+new Date);var u=new i(o),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(c.X&&s(c,u),h.state=function(){return s(u,{})}),h}t&&t.exports?t.exports=a:this.xor4096=a})(up,r)})(KF);var EIe=KF.exports,XF={exports:{}};XF.exports;(function(r){(function(e,t,n){function i(o){var l=this,u="";l.next=function(){var h=l.b,d=l.c,f=l.d,p=l.a;return h=h<<25^h>>>7^d,d=d-f|0,f=f<<24^f>>>8^p,p=p-h|0,l.b=h=h<<20^h>>>12^d,l.c=d=d-f|0,l.d=f<<16^d>>>16^p,l.a=p-h|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):u+=o;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function s(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function a(o,l){var u=new i(o),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&s(c,u),h.state=function(){return s(u,{})}),h}t&&t.exports?t.exports=a:this.tychei=a})(up,r)})(XF);var SIe=XF.exports,vY={exports:{}};const TIe={},CIe=Object.freeze(Object.defineProperty({__proto__:null,default:TIe},Symbol.toStringTag,{value:"Module"})),NIe=IQ(CIe);(function(r){(function(e,t,n){var i=256,s=6,a=52,o="random",l=n.pow(i,s),u=n.pow(2,a),c=u*2,h=i-1,d;function f(E,w,A){var T=[];w=w==!0?{entropy:!0}:w||{};var S=v(b(w.entropy?[E,y(t)]:E??x(),3),T),N=new p(T),D=function(){for(var _=N.g(s),M=l,I=0;_<u;)_=(_+I)*i,M*=i,I=N.g(1);for(;_>=c;)_/=2,M/=2,I>>>=1;return(_+I)/M};return D.int32=function(){return N.g(4)|0},D.quick=function(){return N.g(4)/4294967296},D.double=D,v(y(N.S),t),(w.pass||A||function(_,M,I,V){return V&&(V.S&&g(V,N),_.state=function(){return g(N,{})}),I?(n[o]=_,M):_})(D,S,"global"in w?w.global:this==n,w.state)}function p(E){var w,A=E.length,T=this,S=0,N=T.i=T.j=0,D=T.S=[];for(A||(E=[A++]);S<i;)D[S]=S++;for(S=0;S<i;S++)D[S]=D[N=h&N+E[S%A]+(w=D[S])],D[N]=w;(T.g=function(_){for(var M,I=0,V=T.i,q=T.j,P=T.S;_--;)M=P[V=h&V+1],I=I*i+P[h&(P[V]=P[q=h&q+M])+(P[q]=M)];return T.i=V,T.j=q,I})(i)}function g(E,w){return w.i=E.i,w.j=E.j,w.S=E.S.slice(),w}function b(E,w){var A=[],T=typeof E,S;if(w&&T=="object")for(S in E)try{A.push(b(E[S],w-1))}catch{}return A.length?A:T=="string"?E:E+"\0"}function v(E,w){for(var A=E+"",T,S=0;S<A.length;)w[h&S]=h&(T^=w[h&S]*19)+A.charCodeAt(S++);return y(w)}function x(){try{var E;return d&&(E=d.randomBytes)?E=E(i):(E=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(E)),y(E)}catch{var w=e.navigator,A=w&&w.plugins;return[+new Date,e,A,e.screen,y(t)]}}function y(E){return String.fromCharCode.apply(0,E)}if(v(n.random(),t),r.exports){r.exports=f;try{d=NIe}catch{}}else n["seed"+o]=f})(typeof self<"u"?self:up,[],Math)})(vY);var DIe=vY.exports,MIe=wIe,IIe=xIe,PIe=_Ie,RIe=AIe,kIe=EIe,FIe=SIe,xp=DIe;xp.alea=MIe;xp.xor128=IIe;xp.xorwow=PIe;xp.xorshift7=RIe;xp.xor4096=kIe;xp.tychei=FIe;var OIe=xp;const yY=WT(OIe);var BIe=yY(Date.now());function R0(r){var e;function t(i){e=i===null?BIe:yY(String(i))}t(r);function n(){return e()}return n}var W8="pickRandom",LIe=["typed","config","?on"],$Ie=Y(W8,LIe,r=>{var{typed:e,config:t,on:n}=r,i=R0(t.randomSeed);return n&&n("config",function(a,o){a.randomSeed!==o.randomSeed&&(i=R0(a.randomSeed))}),e(W8,{"Array | Matrix":function(o){return s(o,{})},"Array | Matrix, Object":function(o,l){return s(o,l)},"Array | Matrix, number":function(o,l){return s(o,{number:l})},"Array | Matrix, Array | Matrix":function(o,l){return s(o,{weights:l})},"Array | Matrix, Array | Matrix, number":function(o,l,u){return s(o,{number:u,weights:l})},"Array | Matrix, number, Array | Matrix":function(o,l,u){return s(o,{number:l,weights:u})}});function s(a,o){var{number:l,weights:u,elementWise:c=!0}=o,h=typeof l>"u";h&&(l=1);var d=ot(a)?a.create:ot(u)?u.create:null;a=a.valueOf(),u&&(u=u.valueOf()),c===!0&&(a=Yt(a),u=Yt(u));var f=0;if(typeof u<"u"){if(u.length!==a.length)throw new Error("Weights must have the same length as possibles");for(var p=0,g=u.length;p<g;p++){if(!it(u[p])||u[p]<0)throw new Error("Weights must be an array of positive numbers");f+=u[p]}}for(var b=a.length,v=[],x;v.length<l;){if(typeof u>"u")x=a[Math.floor(i()*b)];else for(var y=i()*f,E=0,w=a.length;E<w;E++)if(y-=u[E],y<0){x=a[E];break}v.push(x)}return h?v[0]:d?d(v):v}});function YF(r,e){var t=[];if(r=r.slice(0),r.length>1)for(var n=0,i=r.shift();n<i;n++)t.push(YF(r,e));else for(var s=0,a=r.shift();s<a;s++)t.push(e());return t}var K8="random",VIe=["typed","config","?on"],UIe=Y(K8,VIe,r=>{var{typed:e,config:t,on:n}=r,i=R0(t.randomSeed);return n&&n("config",function(o,l){o.randomSeed!==l.randomSeed&&(i=R0(o.randomSeed))}),e(K8,{"":()=>a(0,1),number:o=>a(0,o),"number, number":(o,l)=>a(o,l),"Array | Matrix":o=>s(o,0,1),"Array | Matrix, number":(o,l)=>s(o,0,l),"Array | Matrix, number, number":(o,l,u)=>s(o,l,u)});function s(o,l,u){var c=YF(o.valueOf(),()=>a(l,u));return ot(o)?o.create(c,"number"):c}function a(o,l){return o+i()*(l-o)}}),X8="randomInt",zIe=["typed","config","log2","?on"],jIe=Y(X8,zIe,r=>{var{typed:e,config:t,log2:n,on:i}=r,s=R0(t.randomSeed);return i&&i("config",function(u,c){u.randomSeed!==c.randomSeed&&(s=R0(u.randomSeed))}),e(X8,{"":()=>o(0,2),number:u=>o(0,u),"number, number":(u,c)=>o(u,c),bigint:u=>l(0n,u),"bigint, bigint":l,"Array | Matrix":u=>a(u,0,1),"Array | Matrix, number":(u,c)=>a(u,0,c),"Array | Matrix, number, number":(u,c,h)=>a(u,c,h)});function a(u,c,h){var d=YF(u.valueOf(),()=>o(c,h));return ot(u)?u.create(d,"number"):d}function o(u,c){return Math.floor(u+s()*(c-u))}function l(u,c){var h=2n**30n,d=c-u;if(d<=h)return u+BigInt(o(0,Number(d)));for(var f=n(d),p=d;p>=d;){p=0n;for(var g=0;g<f;++g)p=2n*p+(s()<.5?0n:1n)}return u+p}}),Y8="stirlingS2",qIe=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],HIe=Y(Y8,qIe,r=>{var{typed:e,addScalar:t,subtractScalar:n,multiplyScalar:i,divideScalar:s,pow:a,factorial:o,combinations:l,isNegative:u,isInteger:c,number:h,bignumber:d,larger:f}=r,p=[],g=[];return e(Y8,{"number | BigNumber, number | BigNumber":function(v,x){if(!c(v)||u(v)||!c(x)||u(x))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(f(x,v))throw new TypeError("k must be less than or equal to n in function stirlingS2");var y=!(it(v)&&it(x)),E=y?g:p,w=y?d:h,A=h(v),T=h(x);if(E[A]&&E[A].length>T)return E[A][T];for(var S=0;S<=A;++S)if(E[S]||(E[S]=[w(S===0?1:0)]),S!==0)for(var N=E[S],D=E[S-1],_=N.length;_<=S&&_<=T;++_)_===S?N[_]=1:N[_]=t(i(w(_),D[_]),D[_-1]);return E[A][T]}})}),Q8="bellNumbers",GIe=["typed","addScalar","isNegative","isInteger","stirlingS2"],WIe=Y(Q8,GIe,r=>{var{typed:e,addScalar:t,isNegative:n,isInteger:i,stirlingS2:s}=r;return e(Q8,{"number | BigNumber":function(o){if(!i(o)||n(o))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var l=0,u=0;u<=o;u++)l=t(l,s(o,u));return l}})}),J8="catalan",KIe=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],XIe=Y(J8,KIe,r=>{var{typed:e,addScalar:t,divideScalar:n,multiplyScalar:i,combinations:s,isNegative:a,isInteger:o}=r;return e(J8,{"number | BigNumber":function(u){if(!o(u)||a(u))throw new TypeError("Non-negative integer value expected in function catalan");return n(s(i(u,2),u),t(u,1))}})}),Z8="composition",YIe=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],QIe=Y(Z8,YIe,r=>{var{typed:e,addScalar:t,combinations:n,isPositive:i,isNegative:s,isInteger:a,larger:o}=r;return e(Z8,{"number | BigNumber, number | BigNumber":function(u,c){if(!a(u)||!i(u)||!a(c)||!i(c))throw new TypeError("Positive integer value expected in function composition");if(o(c,u))throw new TypeError("k must be less than or equal to n in function composition");return n(t(u,-1),t(c,-1))}})}),eU="leafCount",JIe=["parse","typed"],ZIe=Y(eU,JIe,r=>{var{parse:e,typed:t}=r;function n(i){var s=0;return i.forEach(a=>{s+=n(a)}),s||1}return t(eU,{Node:function(s){return n(s)}})});function tU(r){return Vt(r)||wn(r)&&r.isUnary()&&Vt(r.args[0])}function ST(r){return!!(Vt(r)||(Td(r)||wn(r))&&r.args.every(ST)||Ec(r)&&ST(r.content))}function rU(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function JN(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rU(Object(t),!0).forEach(function(n){Rn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):rU(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var ePe="simplifyUtil",tPe=["FunctionNode","OperatorNode","SymbolNode"],QF=Y(ePe,tPe,r=>{var{FunctionNode:e,OperatorNode:t,SymbolNode:n}=r,i=!0,s=!1,a="defaultF",o={add:{trivial:i,total:i,commutative:i,associative:i},unaryPlus:{trivial:i,total:i,commutative:i,associative:i},subtract:{trivial:s,total:i,commutative:s,associative:s},multiply:{trivial:i,total:i,commutative:i,associative:i},divide:{trivial:s,total:i,commutative:s,associative:s},paren:{trivial:i,total:i,commutative:i,associative:s},defaultF:{trivial:s,total:i,commutative:s,associative:s}},l={divide:{total:s},log:{total:s}},u={subtract:{total:s},abs:{trivial:i},log:{total:i}};function c(y,E){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o,A=a;if(typeof y=="string"?A=y:wn(y)?A=y.fn.toString():Td(y)?A=y.name:Ec(y)&&(A="paren"),Je(w,A)){var T=w[A];if(Je(T,E))return T[E];if(Je(o,A))return o[A][E]}if(Je(w,a)){var S=w[a];return Je(S,E)?S[E]:o[a][E]}if(Je(o,A)){var N=o[A];if(Je(N,E))return N[E]}return o[a][E]}function h(y){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(y,"commutative",E)}function d(y){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(y,"associative",E)}function f(y,E){var w=JN({},y);for(var A in E)Je(y,A)?w[A]=JN(JN({},E[A]),y[A]):w[A]=E[A];return w}function p(y,E){if(!y.args||y.args.length===0)return y;y.args=g(y,E);for(var w=0;w<y.args.length;w++)p(y.args[w],E)}function g(y,E){var w,A=[],T=function(N){for(var D=0;D<N.args.length;D++){var _=N.args[D];wn(_)&&w===_.op?T(_):A.push(_)}};return d(y,E)?(w=y.op,T(y),A):y.args}function b(y,E){if(!(!y.args||y.args.length===0)){for(var w=x(y),A=y.args.length,T=0;T<A;T++)b(y.args[T],E);if(A>2&&d(y,E)){for(var S=y.args.pop();y.args.length>0;)S=w([y.args.pop(),S]);y.args=S.args}}}function v(y,E){if(!(!y.args||y.args.length===0)){for(var w=x(y),A=y.args.length,T=0;T<A;T++)v(y.args[T],E);if(A>2&&d(y,E)){for(var S=y.args.shift();y.args.length>0;)S=w([S,y.args.shift()]);y.args=S.args}}}function x(y){return wn(y)?function(E){try{return new t(y.op,y.fn,E,y.implicit)}catch(w){return console.error(w),[]}}:function(E){return new e(new n(y.name),E)}}return{createMakeNodeFunction:x,hasProperty:c,isCommutative:h,isAssociative:d,mergeContext:f,flatten:p,allChildren:g,unflattenr:b,unflattenl:v,defaultContext:o,realContext:l,positiveContext:u}}),rPe="simplify",nPe=["typed","parse","equal","resolve","simplifyConstant","simplifyCore","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode","replacer"],iPe=Y(rPe,nPe,r=>{var{typed:e,parse:t,equal:n,resolve:i,simplifyConstant:s,simplifyCore:a,AccessorNode:o,ArrayNode:l,ConstantNode:u,FunctionNode:c,IndexNode:h,ObjectNode:d,OperatorNode:f,ParenthesisNode:p,SymbolNode:g,replacer:b}=r,{hasProperty:v,isCommutative:x,isAssociative:y,mergeContext:E,flatten:w,unflattenr:A,unflattenl:T,createMakeNodeFunction:S,defaultContext:N,realContext:D,positiveContext:_}=QF({FunctionNode:c,OperatorNode:f,SymbolNode:g});e.addConversion({from:"Object",to:"Map",convert:$g});var M=e("simplify",{Node:z,"Node, Map":(ne,X)=>z(ne,!1,X),"Node, Map, Object":(ne,X,se)=>z(ne,!1,X,se),"Node, Array":z,"Node, Array, Map":z,"Node, Array, Map, Object":z});e.removeConversion({from:"Object",to:"Map",convert:$g}),M.defaultContext=N,M.realContext=D,M.positiveContext=_;function I(ne){return ne.transform(function(X){return Ec(X)?I(X.content):X})}var V={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};M.rules=[a,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},s,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},s,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function q(ne,X){var se={};if(ne.s){var me=ne.s.split("->");if(me.length===2)se.l=me[0],se.r=me[1];else throw SyntaxError("Could not parse rule: "+ne.s)}else se.l=ne.l,se.r=ne.r;se.l=I(t(se.l)),se.r=I(t(se.r));for(var ue of["imposeContext","repeat","assuming"])ue in ne&&(se[ue]=ne[ue]);if(ne.evaluate&&(se.evaluate=t(ne.evaluate)),y(se.l,X)){var be=!x(se.l,X),ye;be&&(ye=$());var Ie=S(se.l),Ue=$();se.expanded={},se.expanded.l=Ie([se.l,Ue]),w(se.expanded.l,X),A(se.expanded.l,X),se.expanded.r=Ie([se.r,Ue]),be&&(se.expandedNC1={},se.expandedNC1.l=Ie([ye,se.l]),se.expandedNC1.r=Ie([ye,se.r]),se.expandedNC2={},se.expandedNC2.l=Ie([ye,se.expanded.l]),se.expandedNC2.r=Ie([ye,se.expanded.r]))}return se}function P(ne,X){for(var se=[],me=0;me<ne.length;me++){var ue=ne[me],be=void 0,ye=typeof ue;switch(ye){case"string":ue={s:ue};case"object":be=q(ue,X);break;case"function":be=ue;break;default:throw TypeError("Unsupported type of rule: "+ye)}se.push(be)}return se}var L=0;function $(){return new g("_p"+L++)}function z(ne,X){var se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:P1(),me=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},ue=me.consoleDebug;X=P(X||M.rules,me.context);var be=i(ne,se);be=I(be);for(var ye={},Ie=be.toString({parenthesis:"all"});!ye[Ie];){ye[Ie]=!0,L=0;var Ue=Ie;ue&&console.log("Working on: ",Ie);for(var We=0;We<X.length;We++){var Be="";if(typeof X[We]=="function"?(be=X[We](be,me),ue&&(Be=X[We].name)):(w(be,me.context),be=re(be,X[We],me.context),ue&&(Be="".concat(X[We].l.toString()," -> ").concat(X[We].r.toString()))),ue){var $e=be.toString({parenthesis:"all"});$e!==Ue&&(console.log("Applying",Be,"produced",$e),Ue=$e)}T(be,me.context)}Ie=be.toString({parenthesis:"all"})}return be}function K(ne,X,se){var me=ne;if(ne)for(var ue=0;ue<ne.length;++ue){var be=re(ne[ue],X,se);be!==ne[ue]&&(me===ne&&(me=ne.slice()),me[ue]=be)}return me}function re(ne,X,se){if(X.assuming){for(var me in X.assuming)for(var ue in X.assuming[me])if(v(me,ue,se)!==X.assuming[me][ue])return ne}var be=E(X.imposeContext,se),ye=ne;if(ye instanceof f||ye instanceof c){var Ie=K(ye.args,X,se);Ie!==ye.args&&(ye=ye.clone(),ye.args=Ie)}else if(ye instanceof p){if(ye.content){var Ue=re(ye.content,X,se);Ue!==ye.content&&(ye=new p(Ue))}}else if(ye instanceof l){var We=K(ye.items,X,se);We!==ye.items&&(ye=new l(We))}else if(ye instanceof o){var Be=ye.object;ye.object&&(Be=re(ye.object,X,se));var $e=ye.index;ye.index&&($e=re(ye.index,X,se)),(Be!==ye.object||$e!==ye.index)&&(ye=new o(Be,$e))}else if(ye instanceof h){var He=K(ye.dimensions,X,se);He!==ye.dimensions&&(ye=new h(He))}else if(ye instanceof d){var ee=!1,le={};for(var G in ye.properties)le[G]=re(ye.properties[G],X,se),le[G]!==ye.properties[G]&&(ee=!0);ee&&(ye=new d(le))}var J=X.r,ae=de(X.l,ye,be)[0];if(!ae&&X.expanded&&(J=X.expanded.r,ae=de(X.expanded.l,ye,be)[0]),!ae&&X.expandedNC1&&(J=X.expandedNC1.r,ae=de(X.expandedNC1.l,ye,be)[0],ae||(J=X.expandedNC2.r,ae=de(X.expandedNC2.l,ye,be)[0])),ae){var ce=ye.implicit;ye=J.clone(),ce&&"implicit"in J&&(ye.implicit=!0),ye=ye.transform(function(ge){return ge.isSymbolNode&&Je(ae.placeholders,ge.name)?ae.placeholders[ge.name].clone():ge})}return X.repeat&&ye!==ne&&(ye=re(ye,X,se)),ye}function Q(ne,X){var se=[],me,ue,be=S(ne);if(x(ne,X))for(var ye=0;ye<ne.args.length;ye++)ue=ne.args.slice(0),ue.splice(ye,1),me=ue.length===1?ue[0]:be(ue),se.push(be([ne.args[ye],me]));else for(var Ie=1;Ie<ne.args.length;Ie++){var Ue=ne.args[0];Ie>1&&(Ue=be(ne.args.slice(0,Ie))),ue=ne.args.slice(Ie),me=ue.length===1?ue[0]:be(ue),se.push(be([Ue,me]))}return se}function O(ne,X){var se={placeholders:{}};if(!ne.placeholders&&!X.placeholders)return se;if(ne.placeholders){if(!X.placeholders)return ne}else return X;for(var me in ne.placeholders)if(Je(ne.placeholders,me)&&(se.placeholders[me]=ne.placeholders[me],Je(X.placeholders,me)&&!fe(ne.placeholders[me],X.placeholders[me])))return null;for(var ue in X.placeholders)Je(X.placeholders,ue)&&(se.placeholders[ue]=X.placeholders[ue]);return se}function te(ne,X){var se=[];if(ne.length===0||X.length===0)return se;for(var me,ue=0;ue<ne.length;ue++)for(var be=0;be<X.length;be++)me=O(ne[ue],X[be]),me&&se.push(me);return se}function W(ne){if(ne.length===0)return ne;for(var X=ne.reduce(te),se=[],me={},ue=0;ue<X.length;ue++){var be=JSON.stringify(X[ue],b);me[be]||(me[be]=!0,se.push(X[ue]))}return se}function de(ne,X,se,me){var ue=[{placeholders:{}}];if(ne instanceof f&&X instanceof f||ne instanceof c&&X instanceof c){if(ne instanceof f){if(ne.op!==X.op||ne.fn!==X.fn)return[]}else if(ne instanceof c&&ne.name!==X.name)return[];if(X.args.length===1&&ne.args.length===1||!y(X,se)&&X.args.length===ne.args.length||me){for(var be=[],ye=0;ye<ne.args.length;ye++){var Ie=de(ne.args[ye],X.args[ye],se);if(Ie.length===0)break;be.push(Ie)}if(be.length!==ne.args.length){if(!x(X,se)||ne.args.length===1)return[];if(ne.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var Ue=de(ne.args[0],X.args[1],se);if(Ue.length===0)return[];var We=de(ne.args[1],X.args[0],se);if(We.length===0)return[];be=[Ue,We]}ue=W(be)}else if(X.args.length>=2&&ne.args.length===2){for(var Be=Q(X,se),$e=[],He=0;He<Be.length;He++){var ee=de(ne,Be[He],se,!0);$e=$e.concat(ee)}return $e}else{if(ne.args.length>2)throw Error("Unexpected non-binary associative function: "+ne.toString());return[]}}else if(ne instanceof g){if(ne.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(V[ne.name]){if(ne.name!==X.name)return[]}else switch(ne.name[1]>="a"&&ne.name[1]<="z"?ne.name.substring(0,2):ne.name[0]){case"n":case"_p":ue[0].placeholders[ne.name]=X;break;case"c":case"cl":if(Vt(X))ue[0].placeholders[ne.name]=X;else return[];break;case"v":if(!Vt(X))ue[0].placeholders[ne.name]=X;else return[];break;case"vl":if(hi(X))ue[0].placeholders[ne.name]=X;else return[];break;case"cd":if(tU(X))ue[0].placeholders[ne.name]=X;else return[];break;case"vd":if(!tU(X))ue[0].placeholders[ne.name]=X;else return[];break;case"ce":if(ST(X))ue[0].placeholders[ne.name]=X;else return[];break;case"ve":if(!ST(X))ue[0].placeholders[ne.name]=X;else return[];break;default:throw new Error("Invalid symbol in rule: "+ne.name)}}else if(ne instanceof u){if(!n(ne.value,X.value))return[]}else return[];return ue}function fe(ne,X){if(ne instanceof u&&X instanceof u){if(!n(ne.value,X.value))return!1}else if(ne instanceof g&&X instanceof g){if(ne.name!==X.name)return!1}else if(ne instanceof f&&X instanceof f||ne instanceof c&&X instanceof c){if(ne instanceof f){if(ne.op!==X.op||ne.fn!==X.fn)return!1}else if(ne instanceof c&&ne.name!==X.name)return!1;if(ne.args.length!==X.args.length)return!1;for(var se=0;se<ne.args.length;se++)if(!fe(ne.args[se],X.args[se]))return!1}else return!1;return!0}return M}),sPe="simplifyConstant",aPe=["typed","config","mathWithTransform","matrix","isBounded","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],oPe=Y(sPe,aPe,r=>{var{typed:e,config:t,mathWithTransform:n,matrix:i,isBounded:s,fraction:a,bignumber:o,AccessorNode:l,ArrayNode:u,ConstantNode:c,FunctionNode:h,IndexNode:d,ObjectNode:f,OperatorNode:p,SymbolNode:g}=r,{isCommutative:b,isAssociative:v,allChildren:x,createMakeNodeFunction:y}=QF({FunctionNode:h,OperatorNode:p,SymbolNode:g}),E=e("simplifyConstant",{Node:P=>S(q(P,{})),"Node, Object":function(L,$){return S(q(L,$))}});function w(P){return r_(P)?P.valueOf():P instanceof Array?P.map(w):ot(P)?i(w(P.valueOf())):P}function A(P,L,$){try{return n[P].apply(null,L)}catch{return L=L.map(w),D(n[P].apply(null,L),$)}}var T=e({Fraction:M,number:function(L){return L<0?_(new c(-L)):new c(L)},BigNumber:function(L){return L<0?_(new c(-L)):new c(L)},bigint:function(L){return L<0n?_(new c(-L)):new c(L)},Complex:function(L){throw new Error("Cannot convert Complex number to Node")},string:function(L){return new c(L)},Matrix:function(L){return new u(L.valueOf().map($=>T($)))}});function S(P){return sr(P)?P:T(P)}function N(P,L){var $=L&&L.exactFractions!==!1;if($&&s(P)&&a){var z=a(P),K=L&&typeof L.fractionsLimit=="number"?L.fractionsLimit:1/0;if(z.valueOf()===P&&z.n<K&&z.d<K)return z}return P}var D=e({"string, Object":function(L,$){var z=Vd(L,t);if(z==="BigNumber")return o===void 0&&VF(),o(L);if(z==="bigint")return BigInt(L);if(z==="Fraction")return a===void 0&&QX(),a(L);var K=parseFloat(L);return N(K,$)},"Fraction, Object":function(L,$){return L},"BigNumber, Object":function(L,$){return L},"number, Object":function(L,$){return N(L,$)},"bigint, Object":function(L,$){return L},"Complex, Object":function(L,$){return L.im!==0?L:N(L.re,$)},"Matrix, Object":function(L,$){return i(N(L.valueOf()))},"Array, Object":function(L,$){return L.map(N)}});function _(P){return new p("-","unaryMinus",[P])}function M(P){var L=K=>t.number==="BigNumber"&&o?o(K):Number(K),$=P.s*P.n,z=$<0n?new p("-","unaryMinus",[new c(-L($))]):new c(L($));return P.d===1n?z:new p("/","divide",[z,new c(L(P.d))])}function I(P,L,$){if(!J0(L))return new l(S(P),S(L));if(Ja(P)||ot(P)){for(var z=Array.from(L.dimensions);z.length>0;)if(Vt(z[0])&&typeof z[0].value!="string"){var K=D(z.shift().value,$);Ja(P)?P=P.items[K-1]:(P=P.valueOf()[K-1],P instanceof Array&&(P=i(P)))}else if(z.length>1&&Vt(z[1])&&typeof z[1].value!="string"){var re=D(z[1].value,$),Q=[],O=Ja(P)?P.items:P.valueOf();for(var te of O)if(Ja(te))Q.push(te.items[re-1]);else if(ot(P))Q.push(te[re-1]);else break;if(Q.length===O.length)Ja(P)?P=new u(Q):P=i(Q),z.splice(1,1);else break}else break;return z.length===L.dimensions.length?new l(S(P),L):z.length>0?(L=new d(z),new l(S(P),L)):P}if(QC(P)&&L.dimensions.length===1&&Vt(L.dimensions[0])){var W=L.dimensions[0].value;return W in P.properties?P.properties[W]:new c}return new l(S(P),L)}function V(P,L,$,z){var K=L.shift(),re=L.reduce((Q,O)=>{if(!sr(O)){var te=Q.pop();if(sr(te))return[te,O];try{return Q.push(A(P,[te,O],z)),Q}catch{Q.push(te)}}Q.push(S(Q.pop()));var W=Q.length===1?Q[0]:$(Q);return[$([W,S(O)])]},[K]);return re.length===1?re[0]:$([re[0],T(re[1])])}function q(P,L){switch(P.type){case"SymbolNode":return P;case"ConstantNode":switch(typeof P.value){case"number":return D(P.value,L);case"bigint":return D(P.value,L);case"string":return P.value;default:if(!isNaN(P.value))return D(P.value,L)}return P;case"FunctionNode":if(n[P.name]&&n[P.name].rawArgs)return P;{var $=["add","multiply"];if(!$.includes(P.name)){var z=P.args.map(ue=>q(ue,L));if(!z.some(sr))try{return A(P.name,z,L)}catch{}if(P.name==="size"&&z.length===1&&Ja(z[0])){for(var K=[],re=z[0];Ja(re);)K.push(re.items.length),re=re.items[0];return i(K)}return new h(P.name,z.map(S))}}case"OperatorNode":{var Q=P.fn.toString(),O,te,W=y(P);if(wn(P)&&P.isUnary())O=[q(P.args[0],L)],sr(O[0])?te=W(O):te=A(Q,O,L);else if(v(P,L.context))if(O=x(P,L.context),O=O.map(ue=>q(ue,L)),b(Q,L.context)){for(var de=[],fe=[],ne=0;ne<O.length;ne++)sr(O[ne])?fe.push(O[ne]):de.push(O[ne]);de.length>1?(te=V(Q,de,W,L),fe.unshift(te),te=V(Q,fe,W,L)):te=V(Q,O,W,L)}else te=V(Q,O,W,L);else O=P.args.map(ue=>q(ue,L)),te=V(Q,O,W,L);return te}case"ParenthesisNode":return q(P.content,L);case"AccessorNode":return I(q(P.object,L),q(P.index,L),L);case"ArrayNode":{var X=P.items.map(ue=>q(ue,L));return X.some(sr)?new u(X.map(S)):i(X)}case"IndexNode":return new d(P.dimensions.map(ue=>E(ue,L)));case"ObjectNode":{var se={};for(var me in P.properties)se[me]=E(P.properties[me],L);return new f(se)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(P.type))}}return E}),nU="simplifyCore",lPe=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],uPe=Y(nU,lPe,r=>{var{typed:e,parse:t,equal:n,isZero:i,add:s,subtract:a,multiply:o,divide:l,pow:u,AccessorNode:c,ArrayNode:h,ConstantNode:d,FunctionNode:f,IndexNode:p,ObjectNode:g,OperatorNode:b,ParenthesisNode:v,SymbolNode:x}=r,y=new d(0),E=new d(1),w=new d(!0),A=new d(!1);function T(_){return wn(_)&&["and","not","or"].includes(_.op)}var{hasProperty:S,isCommutative:N}=QF({FunctionNode:f,OperatorNode:b,SymbolNode:x});function D(_){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},I=M?M.context:void 0;if(S(_,"trivial",I)){if(Td(_)&&_.args.length===1)return D(_.args[0],M);var V=!1,q=0;if(_.forEach(de=>{++q,q===1&&(V=D(de,M))}),q===1)return V}var P=_;if(Td(P)){var L=ZEe(P.name);if(L){if(P.args.length>2&&S(P,"associative",I))for(;P.args.length>2;){var $=P.args.pop(),z=P.args.pop();P.args.push(new b(L,P.name,[$,z]))}P=new b(L,P.name,P.args)}else return new f(D(P.fn),P.args.map(de=>D(de,M)))}if(wn(P)&&P.isUnary()){var K=D(P.args[0],M);if(P.op==="~"&&wn(K)&&K.isUnary()&&K.op==="~"||P.op==="not"&&wn(K)&&K.isUnary()&&K.op==="not"&&T(K.args[0]))return K.args[0];var re=!0;if(P.op==="-"&&wn(K)&&(K.isBinary()&&K.fn==="subtract"&&(P=new b("-","subtract",[K.args[1],K.args[0]]),re=!1),K.isUnary()&&K.op==="-"))return K.args[0];if(re)return new b(P.op,P.fn,[K])}if(wn(P)&&P.isBinary()){var Q=D(P.args[0],M),O=D(P.args[1],M);if(P.op==="+"){if(Vt(Q)&&i(Q.value))return O;if(Vt(O)&&i(O.value))return Q;wn(O)&&O.isUnary()&&O.op==="-"&&(O=O.args[0],P=new b("-","subtract",[Q,O]))}if(P.op==="-")return wn(O)&&O.isUnary()&&O.op==="-"?D(new b("+","add",[Q,O.args[0]]),M):Vt(Q)&&i(Q.value)?D(new b("-","unaryMinus",[O])):Vt(O)&&i(O.value)?Q:new b(P.op,P.fn,[Q,O]);if(P.op==="*"){if(Vt(Q)){if(i(Q.value))return y;if(n(Q.value,1))return O}if(Vt(O)){if(i(O.value))return y;if(n(O.value,1))return Q;if(N(P,I))return new b(P.op,P.fn,[O,Q],P.implicit)}return new b(P.op,P.fn,[Q,O],P.implicit)}if(P.op==="/")return Vt(Q)&&i(Q.value)?y:Vt(O)&&n(O.value,1)?Q:new b(P.op,P.fn,[Q,O]);if(P.op==="^"&&Vt(O)){if(i(O.value))return E;if(n(O.value,1))return Q}if(P.op==="and"){if(Vt(Q))if(Q.value){if(T(O))return O;if(Vt(O))return O.value?w:A}else return A;if(Vt(O))if(O.value){if(T(Q))return Q}else return A}if(P.op==="or"){if(Vt(Q)){if(Q.value)return w;if(T(O))return O}if(Vt(O)){if(O.value)return w;if(T(Q))return Q}}return new b(P.op,P.fn,[Q,O])}if(wn(P))return new b(P.op,P.fn,P.args.map(de=>D(de,M)));if(Ja(P))return new h(P.items.map(de=>D(de,M)));if(Ac(P))return new c(D(P.object,M),D(P.index,M));if(J0(P))return new p(P.dimensions.map(de=>D(de,M)));if(QC(P)){var te={};for(var W in P.properties)te[W]=D(P.properties[W],M);return new g(te)}return P}return e(nU,{Node:D,"Node,Object":D})}),cPe="resolve",hPe=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],dPe=Y(cPe,hPe,r=>{var{typed:e,parse:t,ConstantNode:n,FunctionNode:i,OperatorNode:s,ParenthesisNode:a}=r;function o(l,u){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!u)return l;if(hi(l)){if(c.has(l.name)){var h=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(h,"}"))}var d=u.get(l.name);if(sr(d)){var f=new Set(c);return f.add(l.name),o(d,u,f)}else return typeof d=="number"?t(String(d)):d!==void 0?new n(d):l}else if(wn(l)){var p=l.args.map(function(b){return o(b,u,c)});return new s(l.op,l.fn,p,l.implicit)}else{if(Ec(l))return new a(o(l.content,u,c));if(Td(l)){var g=l.args.map(function(b){return o(b,u,c)});return new i(l.name,g)}}return l.map(b=>o(b,u,c))}return e("resolve",{Node:o,"Node, Map | null | undefined":o,"Node, Object":(l,u)=>o(l,$g(u)),"Array | Matrix":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array | Matrix, null | undefined":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array, Object":e.referTo("Array,Map",l=>(u,c)=>l(u,$g(c))),"Matrix, Object":e.referTo("Matrix,Map",l=>(u,c)=>l(u,$g(c))),"Array | Matrix, Map":e.referToSelf(l=>(u,c)=>u.map(h=>l(h,c)))})}),iU="symbolicEqual",fPe=["parse","simplify","typed","OperatorNode"],mPe=Y(iU,fPe,r=>{var{parse:e,simplify:t,typed:n,OperatorNode:i}=r;function s(a,o){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=new i("-","subtract",[a,o]),c=t(u,{},l);return Vt(c)&&!c.value}return n(iU,{"Node, Node":s,"Node, Node, Object":s})}),sU="derivative",pPe=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],gPe=Y(sU,pPe,r=>{var{typed:e,config:t,parse:n,simplify:i,equal:s,isZero:a,numeric:o,ConstantNode:l,FunctionNode:u,OperatorNode:c,ParenthesisNode:h,SymbolNode:d}=r;function f(E,w){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},T=new Map,S=w.name;function N(_){var M=T.get(_);if(M!==void 0)return M;var I=v(N,_,S);return T.set(_,I),I}var D=x(E,N);return A.simplify?i(D):D}function p(E){var w=n(E);if(!w.isSymbolNode)throw new TypeError("Invalid variable. "+"Cannot parse ".concat(JSON.stringify(E)," into a variable in function derivative"));return w}var g=e(sU,{"Node, SymbolNode":f,"Node, SymbolNode, Object":f,"Node, string":(E,w)=>f(E,p(w)),"Node, string, Object":(E,w,A)=>f(E,p(w),A)});g._simplify=!0,g.toTex=function(E){return b.apply(null,E.args)};var b=e("_derivTex",{"Node, SymbolNode":function(w,A){return Vt(w)&&dr(w.value)==="string"?b(n(w.value).toString(),A.toString(),1):b(w.toTex(),A.toString(),1)},"Node, ConstantNode":function(w,A){if(dr(A.value)==="string")return b(w,n(A.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(w,A,T){return b(w.toString(),A.name,T.value)},"string, string, number":function(w,A,T){var S;return T===1?S="{d\\over d"+A+"}":S="{d^{"+T+"}\\over d"+A+"^{"+T+"}}",S+"\\left[".concat(w,"\\right]")}}),v=e("_isConst",{"function, ConstantNode, string":function(){return!0},"function, SymbolNode, string":function(w,A,T){return A.name!==T},"function, ParenthesisNode, string":function(w,A,T){return w(A.content,T)},"function, FunctionAssignmentNode, string":function(w,A,T){return A.params.includes(T)?w(A.expr,T):!0},"function, FunctionNode | OperatorNode, string":function(w,A,T){return A.args.every(S=>w(S,T))}}),x=e("_derivative",{"ConstantNode, function":function(){return y(0)},"SymbolNode, function":function(w,A){return A(w)?y(0):y(1)},"ParenthesisNode, function":function(w,A){return new h(x(w.content,A))},"FunctionAssignmentNode, function":function(w,A){return A(w)?y(0):x(w.expr,A)},"FunctionNode, function":function(w,A){if(A(w))return y(0);var T=w.args[0],S,N=!1,D=!1,_;switch(w.name){case"cbrt":N=!0,_=new c("*","multiply",[y(3),new c("^","pow",[T,new c("/","divide",[y(2),y(3)])])]);break;case"sqrt":case"nthRoot":if(w.args.length===1)N=!0,_=new c("*","multiply",[y(2),new u("sqrt",[T])]);else if(w.args.length===2)return S=new c("/","divide",[y(1),w.args[1]]),x(new c("^","pow",[T,S]),A);break;case"log10":S=y(10);case"log":if(!S&&w.args.length===1)_=T.clone(),N=!0;else if(w.args.length===1&&S||w.args.length===2&&A(w.args[1]))_=new c("*","multiply",[T.clone(),new u("log",[S||w.args[1]])]),N=!0;else if(w.args.length===2)return x(new c("/","divide",[new u("log",[T]),new u("log",[w.args[1]])]),A);break;case"pow":if(w.args.length===2)return x(new c("^","pow",[T,w.args[1]]),A);break;case"exp":_=new u("exp",[T.clone()]);break;case"sin":_=new u("cos",[T.clone()]);break;case"cos":_=new c("-","unaryMinus",[new u("sin",[T.clone()])]);break;case"tan":_=new c("^","pow",[new u("sec",[T.clone()]),y(2)]);break;case"sec":_=new c("*","multiply",[w,new u("tan",[T.clone()])]);break;case"csc":D=!0,_=new c("*","multiply",[w,new u("cot",[T.clone()])]);break;case"cot":D=!0,_=new c("^","pow",[new u("csc",[T.clone()]),y(2)]);break;case"asin":N=!0,_=new u("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[T.clone(),y(2)])])]);break;case"acos":N=!0,D=!0,_=new u("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[T.clone(),y(2)])])]);break;case"atan":N=!0,_=new c("+","add",[new c("^","pow",[T.clone(),y(2)]),y(1)]);break;case"asec":N=!0,_=new c("*","multiply",[new u("abs",[T.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[T.clone(),y(2)]),y(1)])])]);break;case"acsc":N=!0,D=!0,_=new c("*","multiply",[new u("abs",[T.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[T.clone(),y(2)]),y(1)])])]);break;case"acot":N=!0,D=!0,_=new c("+","add",[new c("^","pow",[T.clone(),y(2)]),y(1)]);break;case"sinh":_=new u("cosh",[T.clone()]);break;case"cosh":_=new u("sinh",[T.clone()]);break;case"tanh":_=new c("^","pow",[new u("sech",[T.clone()]),y(2)]);break;case"sech":D=!0,_=new c("*","multiply",[w,new u("tanh",[T.clone()])]);break;case"csch":D=!0,_=new c("*","multiply",[w,new u("coth",[T.clone()])]);break;case"coth":D=!0,_=new c("^","pow",[new u("csch",[T.clone()]),y(2)]);break;case"asinh":N=!0,_=new u("sqrt",[new c("+","add",[new c("^","pow",[T.clone(),y(2)]),y(1)])]);break;case"acosh":N=!0,_=new u("sqrt",[new c("-","subtract",[new c("^","pow",[T.clone(),y(2)]),y(1)])]);break;case"atanh":N=!0,_=new c("-","subtract",[y(1),new c("^","pow",[T.clone(),y(2)])]);break;case"asech":N=!0,D=!0,_=new c("*","multiply",[T.clone(),new u("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[T.clone(),y(2)])])])]);break;case"acsch":N=!0,D=!0,_=new c("*","multiply",[new u("abs",[T.clone()]),new u("sqrt",[new c("+","add",[new c("^","pow",[T.clone(),y(2)]),y(1)])])]);break;case"acoth":N=!0,D=!0,_=new c("-","subtract",[y(1),new c("^","pow",[T.clone(),y(2)])]);break;case"abs":_=new c("/","divide",[new u(new d("abs"),[T.clone()]),T.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+w.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var M,I;N?(M="/",I="divide"):(M="*",I="multiply");var V=x(T,A);return D&&(V=new c("-","unaryMinus",[V])),new c(M,I,[V,_])},"OperatorNode, function":function(w,A){if(A(w))return y(0);if(w.op==="+")return new c(w.op,w.fn,w.args.map(function(P){return x(P,A)}));if(w.op==="-"){if(w.isUnary())return new c(w.op,w.fn,[x(w.args[0],A)]);if(w.isBinary())return new c(w.op,w.fn,[x(w.args[0],A),x(w.args[1],A)])}if(w.op==="*"){var T=w.args.filter(function(P){return A(P)});if(T.length>0){var S=w.args.filter(function(P){return!A(P)}),N=S.length===1?S[0]:new c("*","multiply",S),D=T.concat(x(N,A));return new c("*","multiply",D)}return new c("+","add",w.args.map(function(P){return new c("*","multiply",w.args.map(function(L){return L===P?x(L,A):L.clone()}))}))}if(w.op==="/"&&w.isBinary()){var _=w.args[0],M=w.args[1];return A(M)?new c("/","divide",[x(_,A),M]):A(_)?new c("*","multiply",[new c("-","unaryMinus",[_]),new c("/","divide",[x(M,A),new c("^","pow",[M.clone(),y(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[x(_,A),M.clone()]),new c("*","multiply",[_.clone(),x(M,A)])]),new c("^","pow",[M.clone(),y(2)])])}if(w.op==="^"&&w.isBinary()){var I=w.args[0],V=w.args[1];if(A(I))return Vt(I)&&(a(I.value)||s(I.value,1))?y(0):new c("*","multiply",[w,new c("*","multiply",[new u("log",[I.clone()]),x(V.clone(),A)])]);if(A(V)){if(Vt(V)){if(a(V.value))return y(0);if(s(V.value,1))return x(I,A)}var q=new c("^","pow",[I.clone(),new c("-","subtract",[V,y(1)])]);return new c("*","multiply",[V.clone(),new c("*","multiply",[x(I,A),q])])}return new c("*","multiply",[new c("^","pow",[I.clone(),V.clone()]),new c("+","add",[new c("*","multiply",[x(I,A),new c("/","divide",[V.clone(),I.clone()])]),new c("*","multiply",[x(V,A),new u("log",[I.clone()])])])])}throw new Error('Cannot process operator "'+w.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function y(E,w){return new l(o(E,Vd(String(E),t)))}return g}),aU="rationalize",vPe=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],yPe=Y(aU,vPe,r=>{var{config:e,typed:t,equal:n,isZero:i,add:s,subtract:a,multiply:o,divide:l,pow:u,parse:c,simplifyConstant:h,simplifyCore:d,simplify:f,fraction:p,bignumber:g,mathWithTransform:b,matrix:v,AccessorNode:x,ArrayNode:y,ConstantNode:E,FunctionNode:w,IndexNode:A,ObjectNode:T,OperatorNode:S,SymbolNode:N,ParenthesisNode:D}=r;function _(P){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,z=I(),K=M(P,L,!0,z.firstRules),re=K.variables.length,Q={exactFractions:!1},O={exactFractions:!0};if(P=K.expression,re>=1){P=V(P);var te,W,de=!0,fe=!1;P=f(P,z.firstRules,{},Q);for(var ne;W=de?z.distrDivRules:z.sucDivRules,P=f(P,W,{},O),de=!de,ne=P.toString(),ne!==te;)fe=!0,te=ne;fe&&(P=f(P,z.firstRulesAgain,{},Q)),P=f(P,z.finalRules,{},Q)}var X=[],se={};return P.type==="OperatorNode"&&P.isBinary()&&P.op==="/"?(re===1&&(P.args[0]=q(P.args[0],X),P.args[1]=q(P.args[1])),$&&(se.numerator=P.args[0],se.denominator=P.args[1])):(re===1&&(P=q(P,X)),$&&(se.numerator=P,se.denominator=null)),$?(se.coefficients=X,se.variables=K.variables,se.expression=P,se):P}return t(aU,{Node:_,"Node, boolean":(P,L)=>_(P,{},L),"Node, Object":_,"Node, Object, boolean":_});function M(P,L,$,z){var K=[],re=f(P,z,L,{exactFractions:!1});$=!!$;var Q="+-*"+($?"/":"");te(re);var O={};return O.expression=re,O.variables=K,O;function te(W){var de=W.type;if(de==="FunctionNode")throw new Error("There is an unsolved function call");if(de==="OperatorNode")if(W.op==="^"){if(W.args[1].type!=="ConstantNode"||!tt(parseFloat(W.args[1].value)))throw new Error("There is a non-integer exponent");te(W.args[0])}else{if(!Q.includes(W.op))throw new Error("Operator "+W.op+" invalid in polynomial expression");for(var fe=0;fe<W.args.length;fe++)te(W.args[fe])}else if(de==="SymbolNode"){var ne=W.name,X=K.indexOf(ne);X===-1&&K.push(ne)}else if(de==="ParenthesisNode")te(W.content);else if(de!=="ConstantNode")throw new Error("type "+de+" is not allowed in polynomial expression")}}function I(){var P=[d,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},h,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],L=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],$=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],z=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],K={};return K.firstRules=P.concat(L,z),K.distrDivRules=$,K.sucDivRules=z,K.firstRulesAgain=P.concat(L),K.finalRules=[d,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},h,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],K}function V(P,L,$){var z=P.type,K=arguments.length>1;if(z==="OperatorNode"&&P.isBinary()){var re=!1,Q;if(P.op==="^"&&(P.args[0].type==="ParenthesisNode"||P.args[0].type==="OperatorNode")&&P.args[1].type==="ConstantNode"&&(Q=parseFloat(P.args[1].value),re=Q>=2&&tt(Q)),re){if(Q>2){var O=P.args[0],te=new S("^","pow",[P.args[0].cloneDeep(),new E(Q-1)]);P=new S("*","multiply",[O,te])}else P=new S("*","multiply",[P.args[0],P.args[0].cloneDeep()]);K&&($==="content"?L.content=P:L.args[$]=P)}}if(z==="ParenthesisNode")V(P.content,P,"content");else if(z!=="ConstantNode"&&z!=="SymbolNode")for(var W=0;W<P.args.length;W++)V(P.args[W],P,W);if(!K)return P}function q(P,L){L===void 0&&(L=[]),L[0]=0;var $={};$.cte=1,$.oper="+",$.fire="";var z=0,K="";ne(P,null,$),z=L.length-1;for(var re=!0,Q,O=z;O>=0;O--)if(L[O]!==0){var te=new E(re?L[O]:Math.abs(L[O])),W=L[O]<0?"-":"+";if(O>0){var de=new N(K);if(O>1){var fe=new E(O);de=new S("^","pow",[de,fe])}L[O]===-1&&re?te=new S("-","unaryMinus",[de]):Math.abs(L[O])===1?te=de:te=new S("*","multiply",[te,de])}re?Q=te:W==="+"?Q=new S("+","add",[Q,te]):Q=new S("-","subtract",[Q,te]),re=!1}if(re)return new E(0);return Q;function ne(X,se,me){var ue=X.type;if(ue==="FunctionNode")throw new Error("There is an unsolved function call");if(ue==="OperatorNode"){if(!"+-*^".includes(X.op))throw new Error("Operator "+X.op+" invalid");if(se!==null){if((X.fn==="unaryMinus"||X.fn==="pow")&&se.fn!=="add"&&se.fn!=="subtract"&&se.fn!=="multiply")throw new Error("Invalid "+X.op+" placing");if((X.fn==="subtract"||X.fn==="add"||X.fn==="multiply")&&se.fn!=="add"&&se.fn!=="subtract")throw new Error("Invalid "+X.op+" placing");if((X.fn==="subtract"||X.fn==="add"||X.fn==="unaryMinus")&&me.noFil!==0)throw new Error("Invalid "+X.op+" placing")}(X.op==="^"||X.op==="*")&&(me.fire=X.op);for(var be=0;be<X.args.length;be++)X.fn==="unaryMinus"&&(me.oper="-"),(X.op==="+"||X.fn==="subtract")&&(me.fire="",me.cte=1,me.oper=be===0?"+":X.op),me.noFil=be,ne(X.args[be],X,me)}else if(ue==="SymbolNode"){if(X.name!==K&&K!=="")throw new Error("There is more than one variable");if(K=X.name,se===null){L[1]=1;return}if(se.op==="^"&&me.noFil!==0)throw new Error("In power the variable should be the first parameter");if(se.op==="*"&&me.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(me.fire===""||me.fire==="*")&&(z<1&&(L[1]=0),L[1]+=me.cte*(me.oper==="+"?1:-1),z=Math.max(1,z))}else if(ue==="ConstantNode"){var ye=parseFloat(X.value);if(se===null){L[0]=ye;return}if(se.op==="^"){if(me.noFil!==1)throw new Error("Constant cannot be powered");if(!tt(ye)||ye<=0)throw new Error("Non-integer exponent is not allowed");for(var Ie=z+1;Ie<ye;Ie++)L[Ie]=0;ye>z&&(L[ye]=0),L[ye]+=me.cte*(me.oper==="+"?1:-1),z=Math.max(ye,z);return}me.cte=ye,me.fire===""&&(L[0]+=me.cte*(me.oper==="+"?1:-1))}else throw new Error("Type "+ue+" is not allowed")}}}),oU="zpk2tf",bPe=["typed","add","multiply","Complex","number"],wPe=Y(oU,bPe,r=>{var{typed:e,add:t,multiply:n,Complex:i,number:s}=r;return e(oU,{"Array,Array,number":function(u,c,h){return a(u,c,h)},"Array,Array":function(u,c){return a(u,c,1)},"Matrix,Matrix,number":function(u,c,h){return a(u.valueOf(),c.valueOf(),h)},"Matrix,Matrix":function(u,c){return a(u.valueOf(),c.valueOf(),1)}});function a(l,u,c){l.some(x=>x.type==="BigNumber")&&(l=l.map(x=>s(x))),u.some(x=>x.type==="BigNumber")&&(u=u.map(x=>s(x)));for(var h=[i(1,0)],d=[i(1,0)],f=0;f<l.length;f++){var p=l[f];typeof p=="number"&&(p=i(p,0)),h=o(h,[i(1,0),i(-p.re,-p.im)])}for(var g=0;g<u.length;g++){var b=u[g];typeof b=="number"&&(b=i(b,0)),d=o(d,[i(1,0),i(-b.re,-b.im)])}for(var v=0;v<h.length;v++)h[v]=n(h[v],c);return[h,d]}function o(l,u){for(var c=[],h=0;h<l.length+u.length-1;h++){c[h]=i(0,0);for(var d=0;d<l.length;d++)h-d>=0&&h-d<u.length&&(c[h]=t(c[h],n(l[d],u[h-d])))}return c}}),lU="freqz",xPe=["typed","add","multiply","Complex","divide","matrix"],_Pe=Y(lU,xPe,r=>{var{typed:e,add:t,multiply:n,Complex:i,divide:s,matrix:a}=r;return e(lU,{"Array, Array":function(c,h){var d=l(512);return o(c,h,d)},"Array, Array, Array":function(c,h,d){return o(c,h,d)},"Array, Array, number":function(c,h,d){if(d<0)throw new Error("w must be a positive number");var f=l(d);return o(c,h,f)},"Matrix, Matrix":function(c,h){var d=l(512),{w:f,h:p}=o(c.valueOf(),h.valueOf(),d);return{w:a(f),h:a(p)}},"Matrix, Matrix, Matrix":function(c,h,d){var{h:f}=o(c.valueOf(),h.valueOf(),d.valueOf());return{h:a(f),w:a(d)}},"Matrix, Matrix, number":function(c,h,d){if(d<0)throw new Error("w must be a positive number");var f=l(d),{h:p}=o(c.valueOf(),h.valueOf(),f);return{h:a(p),w:a(f)}}});function o(u,c,h){for(var d=[],f=[],p=0;p<h.length;p++){for(var g=i(0,0),b=i(0,0),v=0;v<u.length;v++)g=t(g,n(u[v],i(Math.cos(-v*h[p]),Math.sin(-v*h[p]))));for(var x=0;x<c.length;x++)b=t(b,n(c[x],i(Math.cos(-x*h[p]),Math.sin(-x*h[p]))));d.push(g),f.push(b)}for(var y=[],E=0;E<d.length;E++)y.push(s(d[E],f[E]));return{h:y,w:h}}function l(u){for(var c=[],h=0;h<u;h++)c.push(h/u*Math.PI);return c}}),APe="reviver",EPe=["classes"],SPe=Y(APe,EPe,r=>{var{classes:e}=r;return function(n,i){var s=e[i&&i.mathjs];return s&&typeof s.fromJSON=="function"?s.fromJSON(i):i}}),TPe="replacer",CPe=[],NPe=Y(TPe,CPe,()=>function(e,t){return typeof t=="number"&&(!Number.isFinite(t)||isNaN(t))?{mathjs:"number",value:String(t)}:typeof t=="bigint"?{mathjs:"bigint",value:String(t)}:t}),DPe="15.1.0",MPe=Y("true",[],()=>!0),IPe=Y("false",[],()=>!1),PPe=Y("null",[],()=>null),RPe=Ma("Infinity",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1/0):1/0}),kPe=Ma("NaN",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(NaN):NaN}),FPe=Ma("pi",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?jF(t):S0e}),OPe=Ma("tau",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?nAe(t):T0e}),BPe=Ma("e",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?tAe(t):C0e}),LPe=Ma("phi",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?rAe(t):N0e}),$Pe=Ma("LN2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(2).ln():Math.LN2}),VPe=Ma("LN10",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(10).ln():Math.LN10}),UPe=Ma("LOG2E",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1).div(new t(2).ln()):Math.LOG2E}),zPe=Ma("LOG10E",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1).div(new t(10).ln()):Math.LOG10E}),jPe=Ma("SQRT1_2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t("0.5").sqrt():Math.SQRT1_2}),qPe=Ma("SQRT2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(2).sqrt():Math.SQRT2}),HPe=Ma("i",["Complex"],r=>{var{Complex:e}=r;return e.I}),GPe=Y("version",[],()=>DPe);function Ma(r,e,t){return Y(r,e,t,{recreateOnConfigChange:!0})}var WPe=yt("speedOfLight","299792458","m s^-1"),KPe=yt("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),XPe=yt("planckConstant","6.62607015e-34","J s"),YPe=yt("reducedPlanckConstant","1.0545718176461565e-34","J s"),QPe=yt("magneticConstant","1.25663706212e-6","N A^-2"),JPe=yt("electricConstant","8.8541878128e-12","F m^-1"),ZPe=yt("vacuumImpedance","376.730313667","ohm"),eRe=yt("coulomb","8.987551792261171e9","N m^2 C^-2"),tRe=yt("coulombConstant","8.987551792261171e9","N m^2 C^-2"),rRe=yt("elementaryCharge","1.602176634e-19","C"),nRe=yt("bohrMagneton","9.2740100783e-24","J T^-1"),iRe=yt("conductanceQuantum","7.748091729863649e-5","S"),sRe=yt("inverseConductanceQuantum","12906.403729652257","ohm"),aRe=yt("magneticFluxQuantum","2.0678338484619295e-15","Wb"),oRe=yt("nuclearMagneton","5.0507837461e-27","J T^-1"),lRe=yt("klitzing","25812.807459304513","ohm"),uRe=yt("bohrRadius","5.29177210903e-11","m"),cRe=yt("classicalElectronRadius","2.8179403262e-15","m"),hRe=yt("electronMass","9.1093837015e-31","kg"),dRe=yt("fermiCoupling","1.1663787e-5","GeV^-2"),fRe=o2("fineStructure",.0072973525693),mRe=yt("hartreeEnergy","4.3597447222071e-18","J"),pRe=yt("protonMass","1.67262192369e-27","kg"),gRe=yt("deuteronMass","3.3435830926e-27","kg"),vRe=yt("neutronMass","1.6749271613e-27","kg"),yRe=yt("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),bRe=yt("rydberg","10973731.568160","m^-1"),wRe=yt("thomsonCrossSection","6.6524587321e-29","m^2"),xRe=o2("weakMixingAngle",.2229),_Re=o2("efimovFactor",22.7),ARe=yt("atomicMass","1.66053906660e-27","kg"),ERe=yt("avogadro","6.02214076e23","mol^-1"),SRe=yt("boltzmann","1.380649e-23","J K^-1"),TRe=yt("faraday","96485.33212331001","C mol^-1"),CRe=yt("firstRadiation","3.7417718521927573e-16","W m^2"),NRe=yt("loschmidt","2.686780111798444e25","m^-3"),DRe=yt("gasConstant","8.31446261815324","J K^-1 mol^-1"),MRe=yt("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),IRe=yt("molarVolume","0.022413969545014137","m^3 mol^-1"),PRe=o2("sackurTetrode",-1.16487052358),RRe=yt("secondRadiation","0.014387768775039337","m K"),kRe=yt("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),FRe=yt("wienDisplacement","2.897771955e-3","m K"),ORe=yt("molarMass","0.99999999965e-3","kg mol^-1"),BRe=yt("molarMassC12","11.9999999958e-3","kg mol^-1"),LRe=yt("gravity","9.80665","m s^-2"),$Re=yt("planckLength","1.616255e-35","m"),VRe=yt("planckMass","2.176435e-8","kg"),URe=yt("planckTime","5.391245e-44","s"),zRe=yt("planckCharge","1.87554603778e-18","C"),jRe=yt("planckTemperature","1.416785e+32","K");function yt(r,e,t){var n=["config","Unit","BigNumber"];return Y(r,n,i=>{var{config:s,Unit:a,BigNumber:o}=i,l=s.number==="BigNumber"?new o(e):parseFloat(e),u=new a(l,t);return u.fixPrefix=!0,u})}function o2(r,e){var t=["config","BigNumber"];return Y(r,t,n=>{var{config:i,BigNumber:s}=n;return i.number==="BigNumber"?new s(e):e})}function uU(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function qRe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uU(Object(t),!0).forEach(function(n){Rn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):uU(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var HRe="mapSlices",GRe=["typed","isInteger"],WRe=Y(HRe,GRe,r=>{var{typed:e,isInteger:t}=r,n=MP({typed:e,isInteger:t});return e("mapSlices",{"...any":function(s){var a=s[1];it(a)?s[1]=a-1:xt(a)&&(s[1]=a.minus(1));try{return n.apply(null,s)}catch(o){throw Ts(o)}}})},qRe({isTransformFunction:!0},MP.meta)),KRe="column",XRe=["typed","Index","matrix","range"],YRe=Y(KRe,XRe,r=>{var{typed:e,Index:t,matrix:n,range:i}=r,s=GX({typed:e,Index:t,matrix:n,range:i});return e("column",{"...any":function(o){var l=o.length-1,u=o[l];it(u)&&(o[l]=u-1);try{return s.apply(null,o)}catch(c){throw Ts(c)}}})},{isTransformFunction:!0});function JF(r,e,t){var n=r.filter(function(l){return hi(l)&&!(l.name in e)&&!t.has(l.name)})[0];if(!n)throw new Error('No undefined variable found in inline expression "'+r+'"');var i=n.name,s=new Map,a=new fK(t,s,new Set([i])),o=r.compile();return function(u){return s.set(i,u),o.evaluate(a)}}var QRe="transformCallback",JRe=["typed"],ZF=Y(QRe,JRe,r=>{var{typed:e}=r;return function(n,i){return e.isTypedFunction(n)?t(n,i):cU(n,n.length,i)};function t(n,i){var s=Object.fromEntries(Object.entries(n.signatures).map(a=>{var[o,l]=a,u=o.split(",").length;return e.isTypedFunction(l)?[o,t(l,i)]:[o,cU(l,u,i)]}));return typeof n.name=="string"?e(n.name,s):e(s)}});function cU(r,e,t){return e===t?r:e===t+1?function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var a=i.slice(0,t),o=hU(i[t]);return r(...a,o)}:e>t+1?function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var a=i.slice(0,t),o=hU(i[t]),l=i.slice(t+1);return r(...a,o,...l)}:r}function hU(r){return r.map(e=>e+1)}var ZRe="filter",eke=["typed"],tke=Y(ZRe,eke,r=>{var{typed:e}=r;function t(i,s,a){var o=WX({typed:e}),l=ZF({typed:e});if(i.length===0)return o();var u=i[0];if(i.length===1)return o(u);var c=i.length-1,h=i[c];return u&&(u=n(u,a)),h&&(hi(h)||n_(h)?h=n(h,a):h=JF(h,s,a)),o(u,l(h,c))}t.rawArgs=!0;function n(i,s){return i.compile().evaluate(s)}return t},{isTransformFunction:!0}),rke="forEach",nke=["typed"],ike=Y(rke,nke,r=>{var{typed:e}=r,t=KX({typed:e}),n=ZF({typed:e});function i(a,o,l){if(a.length===0)return t();var u=a[0];if(a.length===1)return t(u);var c=a.length-1,h=a[c];return u&&(u=s(u,l)),h&&(hi(h)||n_(h)?h=s(h,l):h=JF(h,o,l)),t(u,n(h,c))}i.rawArgs=!0;function s(a,o){return a.compile().evaluate(o)}return i},{isTransformFunction:!0}),ske="index",ake=["Index","getMatrixDataType"],oke=Y(ske,ake,r=>{var{Index:e,getMatrixDataType:t}=r;return function(){for(var i=[],s=0,a=arguments.length;s<a;s++){var o=arguments[s];if(MF(o))o.start--,o.end-=o.step>0?0:2;else if(o&&o.isSet===!0)o=o.map(function(u){return u-1});else if(cr(o)||ot(o))t(o)!=="boolean"&&(o=o.map(function(u){return u-1}));else if(it(o)||zb(o))o--;else if(xt(o))o=o.toNumber()-1;else if(typeof o!="string")throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");i[s]=o}var l=new e;return e.apply(l,i),l}},{isTransformFunction:!0}),lke="map",uke=["typed"],cke=Y(lke,uke,r=>{var{typed:e}=r,t=XX({typed:e}),n=ZF({typed:e});function i(s,a,o){if(s.length===0)return t();if(s.length===1)return t(s[0]);var l=s.length-1,u=s.slice(0,l),c=s[l];return u=u.map(d=>h(d,o)),c&&(hi(c)||n_(c)?c=h(c,o):c=JF(c,a,o)),t(...u,n(c,l));function h(d,f){return d.compile().evaluate(f)}}return i.rawArgs=!0,i},{isTransformFunction:!0});function hke(r){return it(r)?r-1:xt(r)?r.minus(1):r}function dke(r){return it(r)||xt(r)}function jd(r){if(r.length===2&&Ca(r[0])){r=r.slice();var e=r[1];dke(e)&&(r[1]=hke(e))}return r}var fke="max",mke=["typed","config","numeric","larger","isNaN"],pke=Y(fke,mke,r=>{var{typed:e,config:t,numeric:n,larger:i,isNaN:s}=r,a=iY({typed:e,config:t,numeric:n,larger:i,isNaN:s});return e("max",{"...any":function(l){l=jd(l);try{return a.apply(null,l)}catch(u){throw Ts(u)}}})},{isTransformFunction:!0}),gke="mean",vke=["typed","add","divide"],yke=Y(gke,vke,r=>{var{typed:e,add:t,divide:n}=r,i=fY({typed:e,add:t,divide:n});return e("mean",{"...any":function(a){a=jd(a);try{return i.apply(null,a)}catch(o){throw Ts(o)}}})},{isTransformFunction:!0}),bke="min",wke=["typed","config","numeric","smaller","isNaN"],xke=Y(bke,wke,r=>{var{typed:e,config:t,numeric:n,smaller:i,isNaN:s}=r,a=sY({typed:e,config:t,numeric:n,smaller:i,isNaN:s});return e("min",{"...any":function(l){l=jd(l);try{return a.apply(null,l)}catch(u){throw Ts(u)}}})},{isTransformFunction:!0}),_ke="range",Ake=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],Eke=Y(_ke,Ake,r=>{var{typed:e,config:t,matrix:n,bignumber:i,equal:s,smaller:a,smallerEq:o,larger:l,largerEq:u,add:c,isZero:h,isPositive:d}=r,f=JX({typed:e,config:t,matrix:n,bignumber:i,equal:s,smaller:a,smallerEq:o,larger:l,largerEq:u,add:c,isZero:h,isPositive:d});return e("range",{"...any":function(g){var b=g.length-1,v=g[b];return typeof v!="boolean"&&g.push(!0),f.apply(null,g)}})},{isTransformFunction:!0}),Ske="row",Tke=["typed","Index","matrix","range"],Cke=Y(Ske,Tke,r=>{var{typed:e,Index:t,matrix:n,range:i}=r,s=ZX({typed:e,Index:t,matrix:n,range:i});return e("row",{"...any":function(o){var l=o.length-1,u=o[l];it(u)&&(o[l]=u-1);try{return s.apply(null,o)}catch(c){throw Ts(c)}}})},{isTransformFunction:!0}),Nke="subset",Dke=["typed","matrix","zeros","add"],Mke=Y(Nke,Dke,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r,s=eY({typed:e,matrix:t,zeros:n,add:i});return e("subset",{"...any":function(o){try{return s.apply(null,o)}catch(l){throw Ts(l)}}})},{isTransformFunction:!0}),Ike="concat",Pke=["typed","matrix","isInteger"],Rke=Y(Ike,Pke,r=>{var{typed:e,matrix:t,isInteger:n}=r,i=HX({typed:e,matrix:t,isInteger:n});return e("concat",{"...any":function(a){var o=a.length-1,l=a[o];it(l)?a[o]=l-1:xt(l)&&(a[o]=l.minus(1));try{return i.apply(null,a)}catch(u){throw Ts(u)}}})},{isTransformFunction:!0}),dU="diff",kke=["typed","matrix","subtract","number","bignumber"],Fke=Y(dU,kke,r=>{var{typed:e,matrix:t,subtract:n,number:i,bignumber:s}=r,a=YX({typed:e,matrix:t,subtract:n,number:i,bignumber:s});return e(dU,{"...any":function(l){l=jd(l);try{return a.apply(null,l)}catch(u){throw Ts(u)}}})},{isTransformFunction:!0}),Oke="std",Bke=["typed","map","sqrt","variance"],Lke=Y(Oke,Bke,r=>{var{typed:e,map:t,sqrt:n,variance:i}=r,s=gY({typed:e,map:t,sqrt:n,variance:i});return e("std",{"...any":function(o){o=jd(o);try{return s.apply(null,o)}catch(l){throw Ts(l)}}})},{isTransformFunction:!0}),fU="sum",$ke=["typed","config","add","numeric"],Vke=Y(fU,$ke,r=>{var{typed:e,config:t,add:n,numeric:i}=r,s=hY({typed:e,config:t,add:n,numeric:i});return e(fU,{"...any":function(o){o=jd(o);try{return s.apply(null,o)}catch(l){throw Ts(l)}}})},{isTransformFunction:!0}),Uke="quantileSeq",zke=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],jke=Y(Uke,zke,r=>{var{typed:e,bignumber:t,add:n,subtract:i,divide:s,multiply:a,partitionSelect:o,compare:l,isInteger:u,smaller:c,smallerEq:h,larger:d,mapSlices:f}=r,p=pY({typed:e,bignumber:t,add:n,subtract:i,divide:s,multiply:a,partitionSelect:o,compare:l,isInteger:u,smaller:c,smallerEq:h,larger:d,mapSlices:f});return e("quantileSeq",{"Array | Matrix, number | BigNumber":p,"Array | Matrix, number | BigNumber, number":(b,v,x)=>p(b,v,g(x)),"Array | Matrix, number | BigNumber, boolean":p,"Array | Matrix, number | BigNumber, boolean, number":(b,v,x,y)=>p(b,v,x,g(y)),"Array | Matrix, Array | Matrix":p,"Array | Matrix, Array | Matrix, number":(b,v,x)=>p(b,v,g(x)),"Array | Matrix, Array | Matrix, boolean":p,"Array | Matrix, Array | Matrix, boolean, number":(b,v,x,y)=>p(b,v,x,g(y))});function g(b){return jd([[],b])[1]}},{isTransformFunction:!0}),mU="cumsum",qke=["typed","add","unaryPlus"],Hke=Y(mU,qke,r=>{var{typed:e,add:t,unaryPlus:n}=r,i=dY({typed:e,add:t,unaryPlus:n});return e(mU,{"...any":function(a){if(a.length===2&&Ca(a[0])){var o=a[1];it(o)?a[1]=o-1:xt(o)&&(a[1]=o.minus(1))}try{return i.apply(null,a)}catch(l){throw Ts(l)}}})},{isTransformFunction:!0}),pU="variance",Gke=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],Wke=Y(pU,Gke,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:s,mapSlices:a,isNaN:o}=r,l=mY({typed:e,add:t,subtract:n,multiply:i,divide:s,mapSlices:a,isNaN:o});return e(pU,{"...any":function(c){c=jd(c);try{return l.apply(null,c)}catch(h){throw Ts(h)}}})},{isTransformFunction:!0}),gU="print",Kke=["typed","matrix","zeros","add"],Xke=Y(gU,Kke,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r,s=rY({typed:e,matrix:t,zeros:n,add:i});return e(gU,{"string, Object | Array":function(l,u){return s(a(l),u)},"string, Object | Array, number | Object":function(l,u,c){return s(a(l),u,c)}});function a(o){return o.replace(tY,l=>{var u=l.slice(1).split("."),c=u.map(function(h){return!isNaN(h)&&h.length>0?parseInt(h)-1:h});return"$"+c.join(".")})}},{isTransformFunction:!0}),Yke="and",Qke=["typed","matrix","zeros","add","equalScalar","not","concat"],Jke=Y(Yke,Qke,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,not:s,concat:a}=r,o=nY({typed:e,matrix:t,equalScalar:n,zeros:i,not:s,concat:a});function l(u,c,h){var d=u[0].compile().evaluate(h);if(!Ca(d)&&!o(d,!0))return!1;var f=u[1].compile().evaluate(h);return o(d,f)}return l.rawArgs=!0,l},{isTransformFunction:!0}),Zke="or",eFe=["typed","matrix","equalScalar","DenseMatrix","concat"],tFe=Y(Zke,eFe,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:s}=r,a=qX({typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:s});function o(l,u,c){var h=l[0].compile().evaluate(c);if(!Ca(h)&&a(h,!1))return!0;var d=l[1].compile().evaluate(c);return a(h,d)}return o.rawArgs=!0,o},{isTransformFunction:!0}),rFe="nullish",nFe=["typed","matrix","size","flatten","deepEqual"],iFe=Y(rFe,nFe,r=>{var{typed:e,matrix:t,size:n,flatten:i,deepEqual:s}=r,a=jX({typed:e,matrix:t,size:n,flatten:i,deepEqual:s});function o(l,u,c){var h=l[0].compile().evaluate(c);if(!Ca(h)&&h!=null&&h!==void 0)return h;var d=l[1].compile().evaluate(c);return a(h,d)}return o.rawArgs=!0,o},{isTransformFunction:!0}),sFe="bitAnd",aFe=["typed","matrix","zeros","add","equalScalar","not","concat"],oFe=Y(sFe,aFe,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,not:s,concat:a}=r,o=UX({typed:e,matrix:t,equalScalar:n,zeros:i,not:s,concat:a});function l(u,c,h){var d=u[0].compile().evaluate(h);if(!Ca(d)){if(isNaN(d))return NaN;if(d===0||d===!1)return 0}var f=u[1].compile().evaluate(h);return o(d,f)}return l.rawArgs=!0,l},{isTransformFunction:!0}),lFe="bitOr",uFe=["typed","matrix","equalScalar","DenseMatrix","concat"],cFe=Y(lFe,uFe,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:s}=r,a=zX({typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:s});function o(l,u,c){var h=l[0].compile().evaluate(c);if(!Ca(h)){if(isNaN(h))return NaN;if(h===-1)return-1;if(h===!0)return 1}var d=l[1].compile().evaluate(c);return a(h,d)}return o.rawArgs=!0,o},{isTransformFunction:!0}),ke=Lve({config:Ae}),mr=jve({}),vU=BPe({BigNumber:ke,config:Ae}),hFe=IPe({}),dFe=fRe({BigNumber:ke,config:Ae}),qd=Qve({}),bY=HPe({Complex:mr}),fFe=RPe({BigNumber:ke,config:Ae}),mFe=VPe({BigNumber:ke,config:Ae}),pFe=zPe({BigNumber:ke,config:Ae}),l2=n0e({}),gFe=kPe({BigNumber:ke,config:Ae}),vFe=PPe({}),yFe=LPe({BigNumber:ke,config:Ae}),bFe=e0e({}),wY=zge({}),wFe=jPe({BigNumber:ke,config:Ae}),xFe=PRe({BigNumber:ke,config:Ae}),xY=OPe({BigNumber:ke,config:Ae}),_Fe=MPe({}),AFe=GPe({}),Tt=b0e({Matrix:l2,config:Ae}),EFe=_Re({BigNumber:ke,config:Ae}),SFe=$Pe({BigNumber:ke,config:Ae}),$P=FPe({BigNumber:ke,config:Ae}),_Y=NPe({}),TFe=qPe({BigNumber:ke,config:Ae}),ie=Lge({BigNumber:ke,Complex:mr,DenseMatrix:Tt,Fraction:qd}),CFe=xRe({BigNumber:ke,config:Ae}),ki=Lye({typed:ie}),NFe=mAe({Complex:mr,config:Ae,typed:ie}),DFe=yAe({BigNumber:ke,typed:ie}),MFe=_Ae({BigNumber:ke,Complex:mr,config:Ae,typed:ie}),Xn=zye({typed:ie}),IFe=D1e({typed:ie}),PFe=NAe({BigNumber:ke,Complex:mr,config:Ae,typed:ie}),RFe=RAe({typed:ie}),AY=OAe({typed:ie}),kFe=VAe({Complex:mr,config:Ae,typed:ie}),FFe=uye({typed:ie}),OFe=_1e({typed:ie}),BFe=fye({typed:ie}),LFe=x0e({typed:ie}),u2=sIe({typed:ie}),Wm=bye({Complex:mr,typed:ie}),_p=I1e({typed:ie}),eO=zAe({typed:ie}),$Fe=GAe({BigNumber:ke,typed:ie}),VFe=YAe({BigNumber:ke,typed:ie}),UFe=ibe({typed:ie}),Rt=J0e({config:Ae,typed:ie}),zFe=Qwe({typed:ie}),EY=abe({typed:ie}),jFe=lbe({Complex:mr,typed:ie}),qFe=WX({typed:ie}),Ap=Z1e({typed:ie}),HFe=KX({typed:ie}),o_=lxe({typed:ie}),tO=nwe({typed:ie}),GFe=mxe({format:o_,typed:ie}),rO=R1e({typed:ie}),l_=H0e({typed:ie}),oc=j0e({typed:ie}),Ep=F0e({typed:ie}),WFe=xxe({typed:ie}),KFe=UPe({BigNumber:ke,config:Ae}),XFe=hIe({Complex:mr,typed:ie}),YFe=zbe({Complex:mr,config:Ae,typed:ie}),nO=qbe({Complex:mr,config:Ae,typed:ie}),Hd=XX({typed:ie}),QFe=ixe({isNaN:oc,isNumeric:Ep,typed:ie}),pn=Wbe({typed:ie}),TT=B1e({typed:ie}),nu=aye({typed:ie}),JFe=dxe({format:o_,typed:ie}),ZFe=$Ie({config:Ae,typed:ie}),eOe=rY({typed:ie}),tOe=UIe({config:Ae,typed:ie}),iO=F1e({typed:ie}),rOe=eEe({BigNumber:ke,typed:ie}),SY=Zbe({BigNumber:ke,Fraction:qd,complex:Wm,typed:ie}),c2=iEe({typed:ie}),Yn=Twe({typed:ie}),Qn=tye({Matrix:l2,equalScalar:Rt,typed:ie}),nOe=Pye({typed:ie}),iOe=i1e({typed:ie}),sOe=hye({typed:ie}),yo=qye({typed:ie}),aOe=lEe({typed:ie}),oOe=bxe({typed:ie}),h2=X0e({typed:ie}),lOe=gAe({Complex:mr,config:Ae,typed:ie}),uOe=EAe({BigNumber:ke,typed:ie}),cOe=TAe({BigNumber:ke,Complex:mr,config:Ae,typed:ie}),Ws=gye({BigNumber:ke,typed:ie}),hOe=oIe({typed:ie}),dOe=qAe({typed:ie}),fOe=JAe({BigNumber:ke,typed:ie}),d2=$Ee({addScalar:Xn,conj:_p,multiplyScalar:pn,size:Yn,typed:ie}),mOe=B0e({isNumeric:Ep,typed:ie}),pOe=W0e({isBounded:l_,map:Hd,typed:ie}),Gd=R0e({config:Ae,typed:ie}),bo=U0e({equalScalar:Rt,typed:ie}),Re=Eye({DenseMatrix:Tt,Matrix:l2,SparseMatrix:Qn,typed:ie}),gOe=Tye({isZero:bo,matrix:Re,typed:ie}),nr=Xbe({addScalar:Xn,dot:d2,equalScalar:Rt,matrix:Re,multiplyScalar:pn,typed:ie}),vOe=dwe({BigNumber:ke,config:Ae,matrix:Re,typed:ie}),yOe=jIe({config:Ae,log2:nO,typed:ie}),bOe=bwe({config:Ae,matrix:Re}),wOe=rEe({BigNumber:ke,typed:ie}),xOe=aEe({typed:ie}),_Oe=cAe({SparseMatrix:Qn,typed:ie}),el=r1e({Complex:mr,config:Ae,typed:ie}),AOe=Nwe({typed:ie}),EOe=hEe({typed:ie}),u_=kwe({matrix:Re,typed:ie}),TY=l1e({BigNumber:ke,config:Ae,matrix:Re,typed:ie}),Di=Lwe({BigNumber:ke,config:Ae,matrix:Re,typed:ie}),SOe=wAe({BigNumber:ke,Complex:mr,config:Ae,typed:ie}),TOe=MAe({Complex:mr,config:Ae,typed:ie}),COe=cxe({format:o_,typed:ie}),NOe=KAe({BigNumber:ke,typed:ie}),sO=Owe({conj:_p,transpose:u_,typed:ie}),CY=X1e({DenseMatrix:Tt,SparseMatrix:Qn,matrix:Re,typed:ie}),ss=p_e({DenseMatrix:Tt,SparseMatrix:Qn,equalScalar:Rt,matrix:Re,typed:ie}),c_=_ye({Fraction:qd,typed:ie}),Wd=swe({BigNumber:ke,DenseMatrix:Tt,SparseMatrix:Qn,config:Ae,matrix:Re,typed:ie}),bs=A0e({equal:ss,typed:ie}),DOe=owe({matrix:Re,multiplyScalar:pn,typed:ie}),O1=MP({isInteger:bs,typed:ie}),aO=Mye({flatten:Ap,matrix:Re,size:Yn,typed:ie}),uo=Exe({bignumber:Ws,fraction:c_,number:nu}),NY=axe({config:Ae,multiplyScalar:pn,numeric:uo,typed:ie}),DY=gwe({isInteger:bs,matrix:Re,typed:ie}),iy=Mxe({BigNumber:ke,DenseMatrix:Tt,config:Ae,equalScalar:Rt,matrix:Re,typed:ie,zeros:Di}),iu=kye({typed:ie}),MOe=nIe({BigNumber:ke,Fraction:qd,config:Ae,isInteger:bs,number:nu,typed:ie}),MY=Gye({BigNumber:ke,Complex:mr,Fraction:qd,config:Ae,isNegative:Gd,matrix:Re,typed:ie,unaryMinus:iu}),Qt=HX({isInteger:bs,matrix:Re,typed:ie}),IOe=H1e({prod:NY,size:Yn,typed:ie}),h_=P_e({equal:ss,typed:ie}),Wr=Txe({numeric:uo,typed:ie}),POe=m1e({concat:Qt,equalScalar:Rt,matrix:Re,multiplyScalar:pn,typed:ie}),IY=BX({DenseMatrix:Tt,config:Ae,equalScalar:Rt,matrix:Re,round:iy,typed:ie,zeros:Di}),ROe=Fbe({BigNumber:ke,DenseMatrix:Tt,concat:Qt,config:Ae,equalScalar:Rt,matrix:Re,round:iy,typed:ie,zeros:Di}),Sp=$0e({config:Ae,typed:ie}),ws=T_e({DenseMatrix:Tt,SparseMatrix:Qn,bignumber:Ws,concat:Qt,config:Ae,matrix:Re,typed:ie}),kOe=$be({concat:Qt,equalScalar:Rt,matrix:Re,typed:ie}),FOe=Zxe({DenseMatrix:Tt,concat:Qt,equalScalar:Rt,matrix:Re,typed:ie,zeros:Di}),PY=jxe({DenseMatrix:Tt,divideScalar:Wr,equalScalar:Rt,matrix:Re,multiplyScalar:pn,subtractScalar:yo,typed:ie}),oO=iY({config:Ae,isNaN:oc,larger:ws,numeric:uo,typed:ie}),RY=$X({DenseMatrix:Tt,concat:Qt,config:Ae,equalScalar:Rt,matrix:Re,round:iy,typed:ie,zeros:Di}),OOe=Qbe({BigNumber:ke,concat:Qt,equalScalar:Rt,matrix:Re,typed:ie}),BOe=jX({deepEqual:h_,flatten:Ap,matrix:Re,size:Yn,typed:ie}),LOe=qX({DenseMatrix:Tt,concat:Qt,equalScalar:Rt,matrix:Re,typed:ie}),lO=KSe({addScalar:Xn,complex:Wm,conj:_p,divideScalar:Wr,equal:ss,identity:Wd,isZero:bo,matrix:Re,multiplyScalar:pn,sign:SY,sqrt:el,subtractScalar:yo,typed:ie,unaryMinus:iu,zeros:Di}),$Oe=t_e({DenseMatrix:Tt,concat:Qt,equalScalar:Rt,matrix:Re,typed:ie,zeros:Di}),xs=w_e({DenseMatrix:Tt,SparseMatrix:Qn,bignumber:Ws,concat:Qt,config:Ae,matrix:Re,typed:ie}),en=a1e({DenseMatrix:Tt,concat:Qt,equalScalar:Rt,matrix:Re,subtractScalar:yo,typed:ie,unaryMinus:iu}),VOe=vxe({concat:Qt,matrix:Re,typed:ie}),uO=Oye({config:Ae,numeric:uo,typed:ie}),cO=Hxe({DenseMatrix:Tt,divideScalar:Wr,equalScalar:Rt,matrix:Re,multiplyScalar:pn,subtractScalar:yo,typed:ie}),UOe=U1e({DenseMatrix:Tt,SparseMatrix:Qn,concat:Qt,matrix:Re,typed:ie}),Lt=REe({DenseMatrix:Tt,SparseMatrix:Qn,addScalar:Xn,concat:Qt,equalScalar:Rt,matrix:Re,typed:ie}),zOe=LAe({BigNumber:ke,DenseMatrix:Tt,concat:Qt,equalScalar:Rt,matrix:Re,typed:ie}),jOe=UX({concat:Qt,equalScalar:Rt,matrix:Re,typed:ie}),qOe=zX({DenseMatrix:Tt,concat:Qt,equalScalar:Rt,matrix:Re,typed:ie}),HOe=C1e({DenseMatrix:Tt,SparseMatrix:Qn,concat:Qt,matrix:Re,typed:ie}),GOe=XIe({addScalar:Xn,combinations:u2,divideScalar:Wr,isInteger:bs,isNegative:Gd,multiplyScalar:pn,typed:ie}),Tp=a_e({BigNumber:ke,DenseMatrix:Tt,Fraction:qd,concat:Qt,config:Ae,equalScalar:Rt,matrix:Re,typed:ie}),kY=f_e({concat:Qt,matrix:Re,typed:ie}),WOe=QIe({addScalar:Xn,combinations:u2,isInteger:bs,isNegative:Gd,isPositive:Sp,larger:ws,typed:ie}),KOe=W1e({matrix:Re,multiply:nr,subtract:en,typed:ie}),FY=gMe({divideScalar:Wr,isZero:bo,matrix:Re,multiply:nr,subtractScalar:yo,typed:ie,unaryMinus:iu}),XOe=YX({matrix:Re,number:nu,subtract:en,typed:ie}),YOe=VMe({abs:ki,addScalar:Xn,deepEqual:h_,divideScalar:Wr,multiplyScalar:pn,sqrt:el,subtractScalar:yo,typed:ie}),d_=Uxe({DenseMatrix:Tt,SparseMatrix:Qn,concat:Qt,divideScalar:Wr,equalScalar:Rt,matrix:Re,typed:ie}),QOe=y_e({compareText:kY,isZero:bo,typed:ie}),OY=Y_e({larger:ws,smaller:xs}),JOe=FEe({abs:ki,addScalar:Xn,divideScalar:Wr,isPositive:Sp,multiplyScalar:pn,smaller:xs,sqrt:el,typed:ie}),BY=q_e({DenseMatrix:Tt,smaller:xs}),Zi=W_e({ImmutableDenseMatrix:BY,getMatrixDataType:tO}),ZOe=jMe({abs:ki,add:Lt,addScalar:Xn,config:Ae,divideScalar:Wr,equalScalar:Rt,flatten:Ap,isNumeric:Ep,isZero:bo,matrix:Re,multiply:nr,multiplyScalar:pn,smaller:xs,subtract:en,typed:ie}),e3e=c1e({BigNumber:ke,add:Lt,config:Ae,equal:ss,isInteger:bs,mod:RY,smaller:xs,typed:ie,xgcd:TY}),f2=D_e({DenseMatrix:Tt,SparseMatrix:Qn,concat:Qt,config:Ae,matrix:Re,typed:ie}),hO=Rxe({Complex:mr,config:Ae,divideScalar:Wr,typeOf:h2,typed:ie}),t3e=Wxe({DenseMatrix:Tt,divideScalar:Wr,equalScalar:Rt,matrix:Re,multiplyScalar:pn,subtractScalar:yo,typed:ie}),r3e=Nye({flatten:Ap,matrix:Re,size:Yn,typed:ie}),n3e=sY({config:Ae,isNaN:oc,numeric:uo,smaller:xs,typed:ie}),i3e=Bxe({Complex:mr,config:Ae,divideScalar:Wr,typed:ie}),m2=B_e({compare:Tp,isNaN:oc,isNumeric:Ep,typed:ie}),s3e=n_e({DenseMatrix:Tt,concat:Qt,equalScalar:Rt,matrix:Re,typed:ie,zeros:Di}),LY=yTe({SparseMatrix:Qn,abs:ki,add:Lt,divideScalar:Wr,larger:ws,largerEq:f2,multiply:nr,subtract:en,transpose:u_,typed:ie}),$Y=Z_e({FibonacciHeap:OY,addScalar:Xn,equalScalar:Rt}),Ia=eY({add:Lt,matrix:Re,typed:ie,zeros:Di}),dO=hY({add:Lt,config:Ae,numeric:uo,typed:ie}),a3e=zEe({add:Lt,matrix:Re,typed:ie}),VY=Xxe({DenseMatrix:Tt,divideScalar:Wr,equalScalar:Rt,matrix:Re,multiplyScalar:pn,subtractScalar:yo,typed:ie}),o3e=wPe({Complex:mr,add:Lt,multiply:nr,number:nu,typed:ie}),fO=rbe({DenseMatrix:Tt,config:Ae,equalScalar:Rt,matrix:Re,round:iy,typed:ie,zeros:Di}),su=c_e({compare:Tp,typed:ie}),l3e=dY({add:Lt,typed:ie,unaryPlus:uO}),UY=hbe({Complex:mr,DenseMatrix:Tt,ceil:fO,equalScalar:Rt,floor:IY,matrix:Re,typed:ie,zeros:Di}),zY=qEe({Index:Zi,typed:ie}),Cp=yMe({abs:ki,addScalar:Xn,det:FY,divideScalar:Wr,identity:Wd,matrix:Re,multiply:nr,typed:ie,unaryMinus:iu}),u3e=Fxe({Complex:mr,config:Ae,divideScalar:Wr,log:hO,typed:ie}),jY=GSe({DenseMatrix:Tt,Spa:$Y,SparseMatrix:Qn,abs:ki,addScalar:Xn,divideScalar:Wr,equalScalar:Rt,larger:ws,matrix:Re,multiplyScalar:pn,subtractScalar:yo,typed:ie,unaryMinus:iu}),c3e=wMe({Complex:mr,add:Lt,ctranspose:sO,deepEqual:h_,divideScalar:Wr,dot:d2,dotDivide:d_,equal:ss,inv:Cp,matrix:Re,multiply:nr,typed:ie}),tl=Nxe({Complex:mr,config:Ae,fraction:c_,identity:Wd,inv:Cp,matrix:Re,multiply:nr,number:nu,typed:ie}),h3e=fEe({DenseMatrix:Tt,Index:Zi,compareNatural:su,size:Yn,subset:Ia,typed:ie}),d3e=vEe({DenseMatrix:Tt,Index:Zi,compareNatural:su,size:Yn,subset:Ia,typed:ie}),f3e=xEe({Index:Zi,compareNatural:su,size:Yn,subset:Ia,typed:ie}),m3e=SEe({Index:Zi,compareNatural:su,size:Yn,subset:Ia,typed:ie}),k0=A_e({DenseMatrix:Tt,SparseMatrix:Qn,concat:Qt,config:Ae,matrix:Re,typed:ie}),p3e=$_e({compare:Tp,compareNatural:su,matrix:Re,typed:ie}),g3e=DMe({abs:ki,add:Lt,identity:Wd,inv:Cp,map:Hd,max:oO,multiply:nr,size:Yn,sqrt:el,subtract:en,typed:ie}),v3e=k_e({DenseMatrix:Tt,SparseMatrix:Qn,concat:Qt,config:Ae,equalScalar:Rt,matrix:Re,typed:ie}),y3e=nY({concat:Qt,equalScalar:Rt,matrix:Re,not:TT,typed:ie,zeros:Di}),Gn=LMe({divideScalar:Wr,equalScalar:Rt,inv:Cp,matrix:Re,multiply:nr,typed:ie}),b3e=CMe({abs:ki,add:Lt,identity:Wd,inv:Cp,multiply:nr,typed:ie}),qY=Vwe({addScalar:Xn,ceil:fO,conj:_p,divideScalar:Wr,dotDivide:d_,exp:EY,i:bY,log2:nO,matrix:Re,multiplyScalar:pn,pow:tl,tau:xY,typed:ie}),w3e=_Pe({Complex:mr,add:Lt,divide:Gn,matrix:Re,multiply:nr,typed:ie}),mO=uIe({BigNumber:ke,Complex:mr,config:Ae,multiplyScalar:pn,pow:tl,typed:ie}),x3e=zwe({conj:_p,dotDivide:d_,fft:qY,typed:ie}),_3e=pIe({divide:Gn,dotDivide:d_,isNumeric:Ep,log:hO,map:Hd,matrix:Re,multiply:nr,sum:dO,typed:ie}),HY=wTe({DenseMatrix:Tt,lsolve:PY,lup:jY,matrix:Re,slu:LY,typed:ie,usolve:cO}),GY=fY({add:Lt,divide:Gn,typed:ie}),WY=KMe({add:Lt,compare:Tp,divide:Gn,partitionSelect:m2,typed:ie}),A3e=_Te({add:Lt,cbrt:MY,divide:Gn,equalScalar:Rt,im:rO,isZero:bo,multiply:nr,re:iO,sqrt:el,subtract:en,typeOf:h2,typed:ie,unaryMinus:iu}),E3e=pY({bignumber:Ws,add:Lt,compare:Tp,divide:Gn,isInteger:bs,larger:ws,mapSlices:O1,multiply:nr,partitionSelect:m2,smaller:xs,smallerEq:k0,subtract:en,typed:ie}),F0=JX({bignumber:Ws,matrix:Re,add:Lt,config:Ae,equal:ss,isPositive:Sp,isZero:bo,larger:ws,largerEq:f2,smaller:xs,smallerEq:k0,typed:ie}),S3e=ZX({Index:Zi,matrix:Re,range:F0,typed:ie}),KY=pEe({DenseMatrix:Tt,Index:Zi,compareNatural:su,size:Yn,subset:Ia,typed:ie}),T3e=AEe({Index:Zi,compareNatural:su,size:Yn,subset:Ia,typed:ie}),XY=DEe({Index:Zi,concat:Qt,setDifference:KY,size:Yn,subset:Ia,typed:ie}),C3e=Kwe({abs:ki,add:Lt,bignumber:Ws,divide:Gn,isNegative:Gd,isPositive:Sp,larger:ws,map:Hd,matrix:Re,max:oO,multiply:nr,smaller:xs,subtract:en,typed:ie,unaryMinus:iu}),dt=aAe({BigNumber:ke,Complex:mr,Fraction:qd,abs:ki,addScalar:Xn,config:Ae,divideScalar:Wr,equal:ss,fix:UY,format:o_,isNumeric:Ep,multiplyScalar:pn,number:nu,pow:tl,round:iy,subtractScalar:yo}),N3e=ZPe({BigNumber:ke,Unit:dt,config:Ae}),D3e=ARe({BigNumber:ke,Unit:dt,config:Ae}),M3e=nRe({BigNumber:ke,Unit:dt,config:Ae}),I3e=SRe({BigNumber:ke,Unit:dt,config:Ae}),YY=GX({Index:Zi,matrix:Re,range:F0,typed:ie}),P3e=iRe({BigNumber:ke,Unit:dt,config:Ae}),R3e=eRe({BigNumber:ke,Unit:dt,config:Ae}),k3e=dAe({Unit:dt,typed:ie}),F3e=gRe({BigNumber:ke,Unit:dt,config:Ae}),QY=SMe({abs:ki,add:Lt,addScalar:Xn,atan:AY,bignumber:Ws,column:YY,complex:Wm,config:Ae,cos:eO,diag:CY,divideScalar:Wr,dot:d2,equal:ss,flatten:Ap,im:rO,inv:Cp,larger:ws,matrix:Re,matrixFromColumns:aO,multiply:nr,multiplyScalar:pn,number:nu,qr:lO,re:iO,reshape:DY,sin:c2,size:Yn,smaller:xs,sqrt:el,subtract:en,typed:ie,usolve:cO,usolveAll:VY}),O3e=hRe({BigNumber:ke,Unit:dt,config:Ae}),f_=fIe({gamma:mO,typed:ie}),B3e=dRe({BigNumber:ke,Unit:dt,config:Ae}),L3e=DRe({BigNumber:ke,Unit:dt,config:Ae}),$3e=LRe({BigNumber:ke,Unit:dt,config:Ae}),V3e=lRe({BigNumber:ke,Unit:dt,config:Ae}),U3e=NRe({BigNumber:ke,Unit:dt,config:Ae}),z3e=YMe({abs:ki,map:Hd,median:WY,subtract:en,typed:ie}),j3e=aRe({BigNumber:ke,Unit:dt,config:Ae}),q3e=ORe({BigNumber:ke,Unit:dt,config:Ae}),H3e=MRe({BigNumber:ke,Unit:dt,config:Ae}),G3e=vIe({add:Lt,divide:Gn,factorial:f_,isInteger:bs,isPositive:Sp,multiply:nr,typed:ie}),pO=BEe({abs:ki,add:Lt,conj:_p,ctranspose:sO,eigs:QY,equalScalar:Rt,larger:ws,matrix:Re,multiply:nr,pow:tl,smaller:xs,sqrt:el,typed:ie}),W3e=bIe({factorial:f_,typed:ie}),K3e=XPe({BigNumber:ke,Unit:dt,config:Ae}),X3e=VRe({BigNumber:ke,Unit:dt,config:Ae}),Y3e=URe({BigNumber:ke,Unit:dt,config:Ae}),Q3e=YPe({BigNumber:ke,Unit:dt,config:Ae}),JY=Awe({BigNumber:ke,DenseMatrix:Tt,SparseMatrix:Qn,addScalar:Xn,config:Ae,cos:eO,matrix:Re,multiplyScalar:pn,norm:pO,sin:c2,typed:ie,unaryMinus:iu}),J3e=bRe({BigNumber:ke,Unit:dt,config:Ae}),Z3e=RRe({BigNumber:ke,Unit:dt,config:Ae}),eBe=CEe({compareNatural:su,typed:ie}),tBe=WPe({BigNumber:ke,Unit:dt,config:Ae}),rBe=kRe({BigNumber:ke,Unit:dt,config:Ae}),nBe=wRe({BigNumber:ke,Unit:dt,config:Ae}),gO=mY({add:Lt,divide:Gn,isNaN:oc,mapSlices:O1,multiply:nr,subtract:en,typed:ie}),iBe=rxe({BigNumber:ke,Complex:mr,add:Lt,config:Ae,divide:Gn,equal:ss,factorial:f_,gamma:mO,isBounded:l_,isNegative:Gd,multiply:nr,pi:$P,pow:tl,sin:c2,smallerEq:k0,subtract:en,typed:ie}),sBe=ERe({BigNumber:ke,Unit:dt,config:Ae}),aBe=uRe({BigNumber:ke,Unit:dt,config:Ae}),oBe=tIe({add:Lt,divide:Gn,matrix:Re,mean:GY,multiply:nr,pow:tl,sqrt:el,subtract:en,sum:dO,typed:ie}),lBe=$xe({DenseMatrix:Tt,SparseMatrix:Qn,concat:Qt,equalScalar:Rt,matrix:Re,pow:tl,typed:ie}),uBe=rRe({BigNumber:ke,Unit:dt,config:Ae}),cBe=TRe({BigNumber:ke,Unit:dt,config:Ae}),hBe=mRe({BigNumber:ke,Unit:dt,config:Ae}),dBe=sRe({BigNumber:ke,Unit:dt,config:Ae}),fBe=QPe({BigNumber:ke,Unit:dt,config:Ae}),mBe=BRe({BigNumber:ke,Unit:dt,config:Ae}),pBe=vRe({BigNumber:ke,Unit:dt,config:Ae}),gBe=zRe({BigNumber:ke,Unit:dt,config:Ae}),vBe=jRe({BigNumber:ke,Unit:dt,config:Ae}),yBe=yRe({BigNumber:ke,Unit:dt,config:Ae}),ZY=bEe({DenseMatrix:Tt,Index:Zi,compareNatural:su,size:Yn,subset:Ia,typed:ie}),bBe=gY({map:Hd,sqrt:el,typed:ie,variance:gO}),eQ=HIe({bignumber:Ws,addScalar:Xn,combinations:u2,divideScalar:Wr,factorial:f_,isInteger:bs,isNegative:Gd,larger:ws,multiplyScalar:pn,number:nu,pow:tl,subtractScalar:yo,typed:ie}),wBe=lAe({Unit:dt,typed:ie}),xBe=WIe({addScalar:Xn,isInteger:bs,isNegative:Gd,stirlingS2:eQ,typed:ie}),_Be=JPe({BigNumber:ke,Unit:dt,config:Ae}),ABe=CRe({BigNumber:ke,Unit:dt,config:Ae}),EBe=oRe({BigNumber:ke,Unit:dt,config:Ae}),SBe=$Re({BigNumber:ke,Unit:dt,config:Ae}),TBe=xwe({multiply:nr,rotationMatrix:JY,typed:ie}),CBe=IEe({Index:Zi,concat:Qt,setIntersect:ZY,setSymDifference:XY,size:Yn,subset:Ia,typed:ie}),NBe=FRe({BigNumber:ke,Unit:dt,config:Ae}),DBe=cRe({BigNumber:ke,Unit:dt,config:Ae}),MBe=IRe({BigNumber:ke,Unit:dt,config:Ae}),tQ=RMe({identity:Wd,matrix:Re,multiply:nr,norm:pO,qr:lO,subtract:en,typed:ie}),IBe=tRe({BigNumber:ke,Unit:dt,config:Ae}),PBe=KPe({BigNumber:ke,Unit:dt,config:Ae}),RBe=pRe({BigNumber:ke,Unit:dt,config:Ae}),rQ=IMe({abs:ki,add:Lt,concat:Qt,identity:Wd,index:zY,lusolve:HY,matrix:Re,matrixFromColumns:aO,multiply:nr,range:F0,schur:tQ,subset:Ia,subtract:en,transpose:u_,typed:ie}),kBe=FMe({matrix:Re,multiply:nr,sylvester:rQ,transpose:u_,typed:ie}),sy={},m_={},nQ={},as=WEe({mathWithTransform:m_}),ay=bSe({Node:as}),Mc=xSe({Node:as}),Np=ASe({Node:as}),iQ=CSe({Node:as}),oy=QEe({Node:as}),sQ=nSe({Node:as,ResultSet:wY}),aQ=sSe({Node:as}),oQ=SSe({Node:as}),FBe=SPe({classes:nQ}),vO=NTe({math:sy,typed:ie}),lQ=pSe({Node:as,typed:ie}),OBe=mMe({Chain:vO,typed:ie}),Kd=fSe({Node:as,isBounded:l_}),ly=vSe({Node:as,size:Yn}),uy=XEe({Node:as,subset:Ia}),uQ=tSe({matrix:Re,Node:as,subset:Ia}),Xd=MSe({Unit:dt,Node:as,math:sy}),Yd=PSe({Node:as,SymbolNode:Xd,math:sy}),rl=kSe({AccessorNode:uy,ArrayNode:oy,AssignmentNode:uQ,BlockNode:sQ,ConditionalNode:aQ,ConstantNode:Kd,FunctionAssignmentNode:lQ,FunctionNode:Yd,IndexNode:ly,ObjectNode:ay,OperatorNode:Mc,ParenthesisNode:Np,RangeNode:oQ,RelationalNode:iQ,SymbolNode:Xd,config:Ae,numeric:uo,typed:ie}),cQ=dPe({ConstantNode:Kd,FunctionNode:Yd,OperatorNode:Mc,ParenthesisNode:Np,parse:rl,typed:ie}),yO=oPe({bignumber:Ws,fraction:c_,AccessorNode:uy,ArrayNode:oy,ConstantNode:Kd,FunctionNode:Yd,IndexNode:ly,ObjectNode:ay,OperatorNode:Mc,SymbolNode:Xd,config:Ae,isBounded:l_,mathWithTransform:m_,matrix:Re,typed:ie}),BBe=OSe({parse:rl,typed:ie}),LBe=ZIe({parse:rl,typed:ie}),bO=uPe({AccessorNode:uy,ArrayNode:oy,ConstantNode:Kd,FunctionNode:Yd,IndexNode:ly,ObjectNode:ay,OperatorNode:Mc,ParenthesisNode:Np,SymbolNode:Xd,add:Lt,divide:Gn,equal:ss,isZero:bo,multiply:nr,parse:rl,pow:tl,subtract:en,typed:ie}),p_=LSe({parse:rl,typed:ie}),hQ=STe({evaluate:p_}),dQ=USe({evaluate:p_,parse:rl}),$Be=qSe({Parser:dQ,typed:ie}),p2=iPe({AccessorNode:uy,ArrayNode:oy,ConstantNode:Kd,FunctionNode:Yd,IndexNode:ly,ObjectNode:ay,OperatorNode:Mc,ParenthesisNode:Np,SymbolNode:Xd,equal:ss,parse:rl,replacer:_Y,resolve:cQ,simplifyConstant:yO,simplifyCore:bO,typed:ie}),VBe=mPe({OperatorNode:Mc,parse:rl,simplify:p2,typed:ie}),fQ=gPe({ConstantNode:Kd,FunctionNode:Yd,OperatorNode:Mc,ParenthesisNode:Np,SymbolNode:Xd,config:Ae,equal:ss,isZero:bo,numeric:uo,parse:rl,simplify:p2,typed:ie}),UBe=dMe({Help:hQ,mathWithTransform:m_,typed:ie}),zBe=yPe({bignumber:Ws,fraction:c_,AccessorNode:uy,ArrayNode:oy,ConstantNode:Kd,FunctionNode:Yd,IndexNode:ly,ObjectNode:ay,OperatorNode:Mc,ParenthesisNode:Np,SymbolNode:Xd,add:Lt,config:Ae,divide:Gn,equal:ss,isZero:bo,mathWithTransform:m_,matrix:Re,multiply:nr,parse:rl,pow:tl,simplify:p2,simplifyConstant:yO,simplifyCore:bO,subtract:en,typed:ie});_n(sy,{e:vU,false:hFe,fineStructure:dFe,i:bY,Infinity:fFe,LN10:mFe,LOG10E:pFe,NaN:gFe,null:vFe,phi:yFe,SQRT1_2:wFe,sackurTetrode:xFe,tau:xY,true:_Fe,E:vU,version:AFe,efimovFactor:EFe,LN2:SFe,pi:$P,replacer:_Y,reviver:FBe,SQRT2:TFe,typed:ie,PI:$P,weakMixingAngle:CFe,abs:ki,acos:NFe,acot:DFe,acsc:MFe,addScalar:Xn,arg:IFe,asech:PFe,asinh:RFe,atan:AY,atanh:kFe,bigint:FFe,bitNot:OFe,boolean:BFe,clone:LFe,combinations:u2,complex:Wm,conj:_p,cos:eO,cot:$Fe,csc:VFe,cube:UFe,equalScalar:Rt,erf:zFe,exp:EY,expm1:jFe,filter:qFe,flatten:Ap,forEach:HFe,format:o_,getMatrixDataType:tO,hex:GFe,im:rO,isBounded:l_,isNaN:oc,isNumeric:Ep,isPrime:WFe,LOG2E:KFe,lgamma:XFe,log10:YFe,log2:nO,map:Hd,mode:QFe,multiplyScalar:pn,not:TT,number:nu,oct:JFe,pickRandom:ZFe,print:eOe,random:tOe,re:iO,sec:rOe,sign:SY,sin:c2,size:Yn,splitUnit:nOe,square:iOe,string:sOe,subtractScalar:yo,tan:aOe,toBest:oOe,typeOf:h2,acosh:lOe,acsch:uOe,asec:cOe,bignumber:Ws,chain:OBe,combinationsWithRep:hOe,cosh:dOe,csch:fOe,dot:d2,hasNumericValue:mOe,isFinite:pOe,isNegative:Gd,isZero:bo,matrix:Re,matrixFromFunction:gOe,multiply:nr,ones:vOe,randomInt:yOe,resize:bOe,sech:wOe,sinh:xOe,sparse:_Oe,sqrt:el,squeeze:AOe,tanh:EOe,transpose:u_,xgcd:TY,zeros:Di,acoth:SOe,asin:TOe,bin:COe,coth:NOe,ctranspose:sO,diag:CY,equal:ss,fraction:c_,identity:Wd,isInteger:bs,kron:DOe,mapSlices:O1,matrixFromColumns:aO,numeric:uo,prod:NY,reshape:DY,round:iy,unaryMinus:iu,bernoulli:MOe,cbrt:MY,concat:Qt,count:IOe,deepEqual:h_,divideScalar:Wr,dotMultiply:POe,floor:IY,gcd:ROe,isPositive:Sp,larger:ws,lcm:kOe,leftShift:FOe,lsolve:PY,max:oO,mod:RY,nthRoot:OOe,nullish:BOe,or:LOe,qr:lO,rightArithShift:$Oe,smaller:xs,subtract:en,to:VOe,unaryPlus:uO,usolve:cO,xor:UOe,add:Lt,atan2:zOe,bitAnd:jOe,bitOr:qOe,bitXor:HOe,catalan:GOe,compare:Tp,compareText:kY,composition:WOe,cross:KOe,det:FY,diff:XOe,distance:YOe,dotDivide:d_,equalText:QOe,hypot:JOe,intersect:ZOe,invmod:e3e,largerEq:f2,log:hO,lsolveAll:t3e,matrixFromRows:r3e,min:n3e,nthRoots:i3e,partitionSelect:m2,rightLogShift:s3e,slu:LY,subset:Ia,sum:dO,trace:a3e,usolveAll:VY,zpk2tf:o3e,ceil:fO,compareNatural:su,cumsum:l3e,fix:UY,index:zY,inv:Cp,log1p:u3e,lup:jY,pinv:c3e,pow:tl,setCartesian:h3e,setDistinct:d3e,setIsSubset:f3e,setPowerset:m3e,smallerEq:k0,sort:p3e,sqrtm:g3e,unequal:v3e,and:y3e,divide:Gn,expm:b3e,fft:qY,freqz:w3e,gamma:mO,ifft:x3e,kldivergence:_3e,lusolve:HY,mean:GY,median:WY,polynomialRoot:A3e,quantileSeq:E3e,range:F0,row:S3e,setDifference:KY,setMultiplicity:T3e,setSymDifference:XY,solveODE:C3e,vacuumImpedance:N3e,atomicMass:D3e,bohrMagneton:M3e,boltzmann:I3e,column:YY,conductanceQuantum:P3e,coulomb:R3e,createUnit:k3e,deuteronMass:F3e,eigs:QY,electronMass:O3e,factorial:f_,fermiCoupling:B3e,gasConstant:L3e,gravity:$3e,klitzing:V3e,loschmidt:U3e,mad:z3e,magneticFluxQuantum:j3e,molarMass:q3e,molarPlanckConstant:H3e,multinomial:G3e,norm:pO,permutations:W3e,planckConstant:K3e,planckMass:X3e,planckTime:Y3e,reducedPlanckConstant:Q3e,rotationMatrix:JY,rydberg:J3e,secondRadiation:Z3e,setSize:eBe,speedOfLight:tBe,stefanBoltzmann:rBe,thomsonCrossSection:nBe,variance:gO,zeta:iBe,avogadro:sBe,bohrRadius:aBe,corr:oBe,dotPow:lBe,elementaryCharge:uBe,faraday:cBe,hartreeEnergy:hBe,inverseConductanceQuantum:dBe,magneticConstant:fBe,molarMassC12:mBe,neutronMass:pBe,parse:rl,planckCharge:gBe,planckTemperature:vBe,quantumOfCirculation:yBe,resolve:cQ,setIntersect:ZY,simplifyConstant:yO,std:bBe,stirlingS2:eQ,unit:wBe,bellNumbers:xBe,compile:BBe,electricConstant:_Be,firstRadiation:ABe,leafCount:LBe,nuclearMagneton:EBe,planckLength:SBe,rotate:TBe,setUnion:CBe,simplifyCore:bO,wienDisplacement:NBe,classicalElectronRadius:DBe,evaluate:p_,molarVolume:MBe,schur:tQ,coulombConstant:IBe,gravitationConstant:PBe,parser:$Be,simplify:p2,symbolicEqual:VBe,derivative:fQ,protonMass:RBe,sylvester:rQ,help:UBe,rationalize:zBe,lyap:kBe,config:Ae});_n(m_,sy,{map:cke({typed:ie}),filter:tke({typed:ie}),forEach:ike({typed:ie}),mapSlices:WRe({isInteger:bs,typed:ie}),and:Jke({add:Lt,concat:Qt,equalScalar:Rt,matrix:Re,not:TT,typed:ie,zeros:Di}),cumsum:Hke({add:Lt,typed:ie,unaryPlus:uO}),nullish:iFe({deepEqual:h_,flatten:Ap,matrix:Re,size:Yn,typed:ie}),print:Xke({add:Lt,matrix:Re,typed:ie,zeros:Di}),bitAnd:oFe({add:Lt,concat:Qt,equalScalar:Rt,matrix:Re,not:TT,typed:ie,zeros:Di}),concat:Rke({isInteger:bs,matrix:Re,typed:ie}),diff:Fke({bignumber:Ws,matrix:Re,number:nu,subtract:en,typed:ie}),max:pke({config:Ae,isNaN:oc,larger:ws,numeric:uo,typed:ie}),min:xke({config:Ae,isNaN:oc,numeric:uo,smaller:xs,typed:ie}),or:tFe({DenseMatrix:Tt,concat:Qt,equalScalar:Rt,matrix:Re,typed:ie}),subset:Mke({add:Lt,matrix:Re,typed:ie,zeros:Di}),bitOr:cFe({DenseMatrix:Tt,concat:Qt,equalScalar:Rt,matrix:Re,typed:ie}),sum:Vke({add:Lt,config:Ae,numeric:uo,typed:ie}),variance:Wke({add:Lt,divide:Gn,isNaN:oc,mapSlices:O1,multiply:nr,subtract:en,typed:ie}),index:oke({Index:Zi,getMatrixDataType:tO}),quantileSeq:jke({add:Lt,bignumber:Ws,compare:Tp,divide:Gn,isInteger:bs,larger:ws,mapSlices:O1,multiply:nr,partitionSelect:m2,smaller:xs,smallerEq:k0,subtract:en,typed:ie}),range:Eke({bignumber:Ws,matrix:Re,add:Lt,config:Ae,equal:ss,isPositive:Sp,isZero:bo,larger:ws,largerEq:f2,smaller:xs,smallerEq:k0,typed:ie}),column:YRe({Index:Zi,matrix:Re,range:F0,typed:ie}),row:Cke({Index:Zi,matrix:Re,range:F0,typed:ie}),mean:yke({add:Lt,divide:Gn,typed:ie}),std:Lke({map:Hd,sqrt:el,typed:ie,variance:gO})});_n(nQ,{BigNumber:ke,Complex:mr,Fraction:qd,Matrix:l2,Node:as,ObjectNode:ay,OperatorNode:Mc,ParenthesisNode:Np,Range:bFe,RelationalNode:iQ,ResultSet:wY,ArrayNode:oy,BlockNode:sQ,ConditionalNode:aQ,DenseMatrix:Tt,RangeNode:oQ,Chain:vO,FunctionAssignmentNode:lQ,SparseMatrix:Qn,ConstantNode:Kd,IndexNode:ly,FibonacciHeap:OY,ImmutableDenseMatrix:BY,Index:Zi,Spa:$Y,AccessorNode:uy,AssignmentNode:uQ,Unit:dt,SymbolNode:Xd,FunctionNode:Yd,Help:hQ,Parser:dQ});vO.createProxy(sy);const jBe=[["7","8","9","/"],["4","5","6","*"],["1","2","3","-"],["0",".","=","+"],["(",")","ANS","DEL"]],qBe=[["sin(","cos(","tan(","asin(","acos("],["log(","ln(","exp(","sqrt(","^"],["pi","e","i","abs(","pow("]],HBe=[{label:"det 2x2",snippet:"det([[3,-1],[2,5]])"},{label:"dot ",snippet:"dot([1,2,3],[4,5,6])"},{label:"cross ",snippet:"cross([1,0,0],[0,1,0])"},{label:"|z|",snippet:"abs(3 + 4i)"},{label:"exp(-jw t)",snippet:"exp(-i*2*pi*60*t)"},{label:"sqrt(3)",snippet:"sqrt(3)"}],GBe=[{id:"standard",label:" ",description:"  + ",badge:"Standard"},{id:"roots",label:" ",description:"  ",badge:" "},{id:"derivative",label:" ",description:"/ ",badge:""},{id:"integral",label:" ",description:"Simpson Rule",badge:""},{id:"guide",label:" ",description:"  & ",badge:""}],WBe=(r,e)=>r.reduce((t,n)=>Lt(nr(t,e),n)),yU=r=>{if(typeof r=="number")return r.toFixed(6).replace(/\.0+$/,"");const e=r.re||0,t=r.im||0,n=Math.abs(e)<1e-9?"0":e.toFixed(6).replace(/\.0+$/,""),i=Math.abs(t)<1e-9?"0":t.toFixed(6).replace(/\.0+$/,"");if(Math.abs(t)<1e-9)return n;const s=t>=0?"+":"-";return`${n} ${s} ${Math.abs(i)}i`},KBe=r=>{const e=r.map(o=>Wm(o,0)),t=e[0];if(ss(t,0))throw new Error("  0   .");const n=e.map(o=>Gn(o,t)),i=n.length-1,s=1+Math.max(...n.slice(1).map(o=>ki(o))),a=Array.from({length:i},(o,l)=>Wm({r:s,phi:2*Math.PI*l/i}));for(let o=0;o<80;o++){let l=0;for(let u=0;u<a.length;u++){let c=WBe(n,a[u]),h=Wm(1,0);for(let f=0;f<a.length;f++)u!==f&&(h=nr(h,en(a[u],a[f])));const d=Gn(c,h);a[u]=en(a[u],d),l=Math.max(l,ki(d))}if(l<1e-9)break}return a},XBe=(r,e,t,n,i=600)=>{i%2!==0&&(i+=1);const s={},a=(n-t)/i;let o=0;for(let l=0;l<=i;l++){const u=t+l*a;s[e]=u;const c=p_(r,s);l===0||l===i?o+=c:l%2===0?o+=2*c:o+=4*c}return a/3*o};function YBe(){const{isDark:r}=go(),[e,t]=he.useState(""),[n,i]=he.useState(""),[s,a]=he.useState([]),[o,l]=he.useState("1,-3,2"),[u,c]=he.useState([]),[h,d]=he.useState(""),[f,p]=he.useState("x^3 + 2*x"),[g,b]=he.useState("x"),[v,x]=he.useState(""),[y,E]=he.useState("sin(x)"),[w,A]=he.useState("x"),[T,S]=he.useState({from:"0",to:"3.14159"}),[N,D]=he.useState(""),[_,M]=he.useState(""),[I,V]=he.useState("standard"),q=r?"bg-gray-900 border-gray-800 text-white":"bg-white border-gray-200 text-gray-900",P=r?"bg-gray-800 hover:bg-gray-700 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900",L=r?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white",$=O=>{if(O==="DEL"){t(te=>te.slice(0,-1));return}if(O==="="){z();return}if(O==="ANS"){s.length>0&&t(te=>te+s[s.length-1].result);return}t(te=>te+O)},z=()=>{if(e.trim())try{const O=e.replace(//g,"pi").replace(//g,"sqrt");let te=p_(O);typeof te=="number"?te=te.toPrecision(10).replace(/\.0+$/,""):h2(te)==="Complex"&&(te=yU(te)),i(String(te)),a(W=>[...W.slice(-9),{expression:e,result:String(te)}])}catch(O){i(`: ${O.message}`)}},K=()=>{d("");try{const O=o.split(",").map(W=>W.trim()).filter(W=>W.length>0).map(W=>Number(W));if(O.length<2)throw new Error(" 2  . (: 1,-3,2)");if(O.some(W=>Number.isNaN(W)))throw new Error("   .");const te=KBe(O);c(te.map(W=>yU(W)))}catch(O){d(O.message),c([])}},re=()=>{try{const O=fQ(f,g).toString();x(`d/d${g} = ${O}`)}catch(O){x(` : ${O.message}`)}},Q=()=>{M("");try{const O=Number(T.from),te=Number(T.to);if(Number.isNaN(O)||Number.isNaN(te))throw new Error("  .");if(O===te)throw new Error("  0.");const W=XBe(y,w,O,te);D(` ${y} d${w} = ${Number(W).toPrecision(8)}`)}catch(O){M(O.message),D("")}};return R.jsxs("div",{className:"space-y-10",children:[R.jsxs(Ge.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.5},children:[R.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-indigo-500 to-blue-500 dark:from-indigo-300 dark:to-blue-300 bg-clip-text text-transparent",children:"  "}),R.jsx("p",{className:`text-sm sm:text-base ${r?"text-gray-300":"text-gray-600"}`,children:"  ,   , /      ."}),R.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4 mt-6",children:[{label:" ",value:"  + "},{label:" ",value:" 10 Durand-Kerner"},{label:"/ ",value:"math.js  + Simpson"},{label:"  ",value:"i, det, dot/cross "}].map(O=>R.jsxs("div",{className:`p-4 rounded-2xl border text-sm ${r?"bg-gray-900/70 border-gray-700 text-gray-200":"bg-white border-gray-200 text-gray-700"}`,children:[R.jsx("p",{className:"font-semibold text-xs uppercase tracking-wide text-blue-500",children:O.label}),R.jsx("p",{className:"mt-2 text-base font-medium",children:O.value})]},O.label))})]}),R.jsx("div",{className:"space-y-6",children:R.jsxs(Ge.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},className:`p-6 rounded-3xl border shadow-sm ${q}`,children:[R.jsx("div",{className:"flex flex-wrap gap-3",children:GBe.map(O=>R.jsxs("button",{onClick:()=>V(O.id),className:`flex-1 min-w-[140px] p-4 rounded-2xl border text-left transition ${I===O.id?r?"bg-blue-900/40 border-blue-500 text-white":"bg-blue-50 border-blue-400 text-blue-900":r?"bg-gray-800 border-gray-700 text-gray-200":"bg-white border-gray-200 text-gray-700"}`,children:[R.jsx("p",{className:"text-xs uppercase tracking-wide text-blue-400",children:O.badge}),R.jsx("p",{className:"text-lg font-semibold mt-1",children:O.label}),R.jsx("p",{className:"text-sm mt-1 opacity-80",children:O.description})]},O.id))}),R.jsxs("div",{className:"mt-8",children:[I==="standard"&&R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-6 ${r?"bg-gradient-to-br from-gray-900 via-slate-900 to-gray-800":"bg-gradient-to-br from-white via-blue-50 to-blue-100 border border-blue-100"}`,children:[R.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-blue-300",children:"Expression"}),R.jsx("input",{className:`w-full bg-transparent text-right text-3xl font-semibold mt-3 focus:outline-none ${r?"text-white placeholder:text-gray-500":"text-gray-900 placeholder:text-gray-500"}`,value:e,onChange:O=>t(O.target.value),placeholder:"  (: (3+4i)*(2-i) + sin(pi/3))"}),n&&R.jsxs("p",{className:`text-right text-lg font-mono mt-2 ${n.startsWith("")?"text-red-300":"text-emerald-300"}`,children:["= ",n]}),R.jsx("button",{onClick:z,className:`mt-4 px-4 py-2 rounded-full text-sm font-semibold ${L}`,children:" / ENTER"})]}),R.jsxs("div",{className:"space-y-2",children:[R.jsx("p",{className:`text-xs font-semibold tracking-wide ${r?"text-gray-400":"text-gray-500"}`,children:"   "}),R.jsx("div",{className:"flex flex-wrap gap-2",children:HBe.map(O=>R.jsx("button",{onClick:()=>$(O.snippet),className:`px-3 py-1.5 rounded-full text-xs font-medium border ${r?"border-gray-700 text-gray-200 hover:bg-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:O.label},O.label))})]}),R.jsxs("div",{className:"grid gap-5 md:grid-cols-2",children:[R.jsxs("div",{className:`p-4 rounded-2xl border ${r?"border-gray-700 bg-gray-900/40":"border-gray-200 bg-white"}`,children:[R.jsxs("div",{className:"flex items-center justify-between mb-3",children:[R.jsx("h3",{className:"text-lg font-semibold",children:" "}),R.jsx("span",{className:"text-xs text-blue-500",children:"   "})]}),R.jsx("div",{className:"grid grid-cols-4 gap-3",children:jBe.map((O,te)=>R.jsx("div",{className:"contents",children:O.map(W=>R.jsx("button",{onClick:()=>$(W==="pi"?"":W),className:`py-3 rounded-xl font-semibold text-lg transition ${["/","*","-","+","=","ANS"].includes(W)?L:P}`,children:W},W))},`basic-${te}`))})]}),R.jsxs("div",{className:`p-4 rounded-2xl border ${r?"border-gray-700 bg-gray-900/40":"border-gray-200 bg-white"}`,children:[R.jsxs("div",{className:"flex items-center justify-between mb-3",children:[R.jsx("h3",{className:"text-lg font-semibold",children:" "}),R.jsx("span",{className:"text-xs text-blue-500",children:"    "})]}),R.jsx("div",{className:"grid grid-cols-5 gap-3",children:qBe.map((O,te)=>R.jsx("div",{className:"contents",children:O.map(W=>R.jsx("button",{onClick:()=>$(W==="pi"?"":W),className:`py-3 rounded-xl font-semibold text-sm transition ${L}`,children:W},W))},`sci-${te}`))}),R.jsx("button",{onClick:z,className:`w-full mt-3 py-3 rounded-xl font-semibold text-lg ${L}`,children:" (=)"})]})]}),R.jsxs("div",{className:`p-5 rounded-2xl border ${r?"border-gray-700 bg-gray-900/40":"border-gray-200 bg-white"}`,children:[R.jsxs("div",{className:"flex items-center justify-between mb-2",children:[R.jsx("p",{className:"font-semibold",children:" 10 "}),R.jsx("button",{onClick:()=>a([]),className:`text-sm ${r?"text-red-300":"text-red-500"}`,children:" "})]}),R.jsxs("div",{className:"max-h-64 overflow-y-auto space-y-2",children:[s.length===0&&R.jsx("p",{className:"text-sm text-gray-500",children:" "}),s.map((O,te)=>R.jsxs("button",{onClick:()=>{t(O.expression),i(O.result)},className:`w-full text-left p-3 rounded-xl ${r?"bg-gray-800 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"}`,children:[R.jsx("p",{className:"text-sm break-words",children:O.expression}),R.jsxs("p",{className:"text-sm font-semibold text-green-500",children:["= ",O.result]})]},`${O.expression}-${te}`))]})]})]}),I==="roots"&&R.jsxs("div",{children:[R.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),R.jsxs("p",{className:`text-sm mb-3 ${r?"text-gray-300":"text-gray-600"}`,children:["   (: x - 3x + 2  ",R.jsx("span",{className:"font-mono",children:"1,-3,2"}),")"]}),R.jsx("input",{value:o,onChange:O=>l(O.target.value),className:`w-full mb-3 px-4 py-2 rounded-xl border ${r?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`}),R.jsx("button",{onClick:K,className:`w-full py-3 rounded-xl font-semibold ${L}`,children:" "}),h&&R.jsx("p",{className:"text-sm text-red-400 mt-3",children:h}),u.length>0&&R.jsx("ul",{className:"mt-4 space-y-1 text-sm font-mono",children:u.map((O,te)=>R.jsxs("li",{children:["x",te+1," = ",O]},te))})]}),I==="derivative"&&R.jsxs("div",{children:[R.jsx("h2",{className:"text-xl font-bold mb-4",children:" "}),R.jsx("input",{value:f,onChange:O=>p(O.target.value),className:`w-full mb-3 px-4 py-2 rounded-xl border ${r?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"f(x) = "}),R.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[R.jsx("label",{className:"text-sm",children:""}),R.jsx("input",{value:g,onChange:O=>b(O.target.value),className:`w-20 text-center px-2 py-2 rounded-xl border ${r?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`}),R.jsxs("button",{onClick:re,className:`flex-1 min-w-[140px] py-2 rounded-xl font-semibold ${L}`,children:["d/d",g]})]}),v&&R.jsx("p",{className:"text-sm font-mono text-green-400",children:v})]}),I==="integral"&&R.jsxs("div",{children:[R.jsx("h2",{className:"text-xl font-bold mb-4",children:" "}),R.jsx("input",{value:y,onChange:O=>E(O.target.value),className:`w-full mb-3 px-4 py-2 rounded-xl border ${r?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"f(x)"}),R.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[R.jsx("label",{className:"text-sm",children:""}),R.jsx("input",{value:w,onChange:O=>A(O.target.value),className:`w-24 text-center px-3 py-2 rounded-xl border ${r?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`}),R.jsx("input",{value:T.from,onChange:O=>S(te=>({...te,from:O.target.value})),className:`flex-1 min-w-[140px] px-3 py-2 rounded-xl border ${r?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:""}),R.jsx("input",{value:T.to,onChange:O=>S(te=>({...te,to:O.target.value})),className:`flex-1 min-w-[140px] px-3 py-2 rounded-xl border ${r?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:""})]}),R.jsx("button",{onClick:Q,className:`w-full py-3 rounded-xl font-semibold ${L}`,children:" "}),_&&R.jsx("p",{className:"text-sm text-red-400 mt-3",children:_}),N&&R.jsx("p",{className:"text-sm font-mono text-green-400 mt-3",children:N})]}),I==="guide"&&R.jsxs("div",{children:[R.jsx("h2",{className:"text-xl font-bold mb-3",children:"  "}),R.jsxs("ul",{className:`text-sm space-y-2 ${r?"text-gray-300":"text-gray-600"}`,children:[R.jsx("li",{children:"   (: (3+4i)*(2-i))"}),R.jsx("li",{children:"   ( 10, Durand-Kerner )"}),R.jsx("li",{children:"   (math.js )"}),R.jsx("li",{children:"   (Simpson rule)"}),R.jsx("li",{children:"    : , e, i, trig/log, pow"})]})]})]})]})})]})}const CT=r=>{const e=r.code||r.message;return{"auth/email-already-in-use":"  .","auth/invalid-email":"   .","auth/weak-password":"  . ( 6)","auth/user-not-found":"  .","auth/wrong-password":" .","auth/too-many-requests":"   .    .","auth/network-request-failed":"  ."}[e]||r.message||"  ."},QBe=async(r,e,t)=>{try{const n=JSON.parse(localStorage.getItem("firebaseUsers")||"{}"),i=btoa(r);if(n[i])throw new Error("  .");await JW(eT,SF);let s=null,a=!1;try{s=(await Promise.race([Yfe(eT,r,e),new Promise((u,c)=>setTimeout(()=>c(new Error("Firebase timeout")),5e3))])).user}catch(l){if(console.warn("Firebase  :",CT(l)),l.code==="auth/email-already-in-use")throw l;a=!0}const o={uid:(s==null?void 0:s.uid)||"local-"+Date.now(),email:r,password:btoa(e),username:t.username,affiliation:t.affiliation||"",bio:"",created_at:new Date().toISOString(),isLocal:a||!s};return n[i]=o,localStorage.setItem("firebaseUsers",JSON.stringify(n)),{uid:o.uid,email:o.email,username:o.username,isLocal:o.isLocal}}catch(n){throw console.error(" :",n),new Error(CT(n))}},JBe=async(r,e)=>{try{await JW(eT,SF);let t=null,n=!1;try{t=(await Promise.race([Qfe(eT,r,e),new Promise((s,a)=>setTimeout(()=>a(new Error("Firebase timeout")),5e3))])).user}catch(i){console.warn("Firebase  ,   :",CT(i));const s=JSON.parse(localStorage.getItem("firebaseUsers")||"{}"),a=btoa(r);if(s[a]){const o=s[a];if(btoa(e)===o.password)n=!0,t={uid:o.uid,email:o.email,displayName:o.username};else throw new Error(" .")}else throw new Error("  .")}if(!t)throw new Error(" ");return{uid:t.uid,email:t.email,username:t.displayName||r.split("@")[0],isLocal:n}}catch(t){throw console.error(" :",t),new Error(CT(t))}},ZBe=r=>{localStorage.setItem("currentUser",JSON.stringify(r)),localStorage.setItem("authToken",r.uid)};function e4e(){const r=z0(),{isDark:e}=go(),[t,n]=he.useState({email:"",password:""}),[i,s]=he.useState(""),[a,o]=he.useState(!1),l="auto",u=h=>{const{name:d,value:f}=h.target;n(p=>({...p,[d]:f})),s("")},c=async h=>{h.preventDefault(),o(!0),s("");try{if(!t.email||!t.password){s("  ."),o(!1);return}if(!t.email.includes("@")){s("   ."),o(!1);return}let d=null;if(l==="auto"||l==="firebase")try{d=await JBe(t.email,t.password);const f={uid:d.uid,email:d.email,username:d.username,role:"user",authProvider:d.isLocal?"firebase-local":"firebase"};ZBe(f),localStorage.setItem("user",JSON.stringify(f)),localStorage.setItem("authToken",d.uid),localStorage.setItem("isAuthenticated","true"),console.log(`   (${d.isLocal?" ":"Firebase"}):`),window.dispatchEvent(new Event("auth-change")),setTimeout(()=>r("/"),500);return}catch(f){console.warn("Firebase  :",f.message)}s(" :     .")}catch(d){console.error(" :",d),s("   .")}finally{o(!1)}};return R.jsx("div",{className:`min-h-screen flex items-center justify-center px-4 sm:px-6 lg:px-8 transition-colors duration-200 ${e?"bg-gray-900":"bg-gray-50"}`,children:R.jsxs(Ge.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:`w-full max-w-md space-y-8 rounded-lg shadow-lg p-8 transition-colors duration-200 ${e?"bg-gray-800":"bg-white"}`,children:[R.jsxs("div",{className:"text-center",children:[R.jsx(Ge.h1,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.1},className:`text-3xl font-bold mb-2 transition-colors duration-200 ${e?"text-white":"text-gray-900"}`,children:""}),R.jsx(Ge.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:"   "})]}),i&&R.jsx(Ge.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`p-3 rounded-lg text-sm border-l-4 transition-colors duration-200 ${e?"bg-red-900/30 border-red-600 text-red-200":"bg-red-50 border-red-500 text-red-800"}`,children:i}),R.jsxs(Ge.form,{onSubmit:c,className:"space-y-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.3},children:[R.jsxs("div",{children:[R.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),R.jsx(Ge.input,{whileFocus:{scale:1.02},type:"email",id:"email",name:"email",value:t.email,onChange:u,placeholder:"your@example.com",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"}`})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"password",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),R.jsx(Ge.input,{whileFocus:{scale:1.02},type:"password",id:"password",name:"password",value:t.password,onChange:u,placeholder:"",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"}`})]}),R.jsx(Ge.button,{type:"submit",disabled:a,whileHover:{scale:1.02},whileTap:{scale:.98},className:`w-full py-2 px-4 rounded-lg font-medium text-white transition-all duration-200 ${a?"bg-blue-400 cursor-not-allowed opacity-50":"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800"}`,children:a?" ...":""})]}),R.jsxs(Ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},className:`text-center text-sm transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:[" ?"," ",R.jsx(Cr,{to:"/signup",className:"text-blue-600 hover:text-blue-700 font-medium",children:""})]})]})})}function t4e(){const r=z0(),{isDark:e}=go(),[t,n]=he.useState({username:"",email:"",password:"",confirmPassword:"",affiliation:"",agreeTerms:!1}),[i,s]=he.useState({}),[a,o]=he.useState(!1),[l,u]=he.useState(""),c="auto",h=p=>{const{name:g,value:b,type:v,checked:x}=p.target;n(y=>({...y,[g]:v==="checkbox"?x:b})),i[g]&&s(y=>({...y,[g]:""}))},d=()=>{const p={};return t.username.trim()?t.username.length<3&&(p.username=" 3  ."):p.username=" .",t.email?t.email.includes("@")||(p.email="   ."):p.email=" .",t.password?t.password.length<8?p.password=" 8  .":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(t.password)||(p.password=" , ,   ."):p.password=" .",t.password!==t.confirmPassword&&(p.confirmPassword="  ."),t.agreeTerms||(p.agreeTerms=" ."),p},f=async p=>{p.preventDefault();const g=d();if(Object.keys(g).length>0){s(g);return}o(!0),u("");try{let b=!1,v=null;if(c==="auto"||c==="firebase")try{const x=await QBe(t.email,t.password,{username:t.username,affiliation:t.affiliation});console.log("  :",x.username),b=!0}catch(x){console.warn("Firebase  :",x.message),v=x.message}if(!b&&(c==="auto"||c==="local")){const x=JSON.parse(localStorage.getItem("firebaseUsers")||"{}"),y=btoa(t.email);if(x[y]){s({submit:"  ."}),o(!1);return}const E={uid:"local-"+Date.now(),email:t.email,password:btoa(t.password),username:t.username,affiliation:t.affiliation||"",bio:"",created_at:new Date().toISOString(),isLocal:!0};x[y]=E,localStorage.setItem("firebaseUsers",JSON.stringify(x)),console.log("    "),b=!0}b&&(u(" .   ..."),setTimeout(()=>{r("/login")},2e3))}catch(b){console.error(" :",b),s({submit:"   .  ."})}finally{o(!1)}};return R.jsx("div",{className:`min-h-screen flex items-center justify-center px-4 sm:px-6 lg:px-8 transition-colors duration-200 ${e?"bg-gray-900":"bg-gray-50"}`,children:R.jsxs(Ge.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:`w-full max-w-md space-y-8 rounded-lg shadow-lg p-8 transition-colors duration-200 ${e?"bg-gray-800":"bg-white"}`,children:[R.jsxs("div",{className:"text-center",children:[R.jsx(Ge.h1,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.1},className:`text-3xl font-bold mb-2 transition-colors duration-200 ${e?"text-white":"text-gray-900"}`,children:""}),R.jsx(Ge.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:"   "})]}),l&&R.jsx(Ge.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg dark:bg-green-900 dark:border-green-700 dark:text-green-200",children:l}),i.submit&&R.jsx(Ge.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg dark:bg-red-900 dark:border-red-700 dark:text-red-200",children:i.submit}),R.jsxs(Ge.form,{onSubmit:f,className:"space-y-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.3},children:[R.jsxs("div",{children:[R.jsx("label",{htmlFor:"username",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),R.jsx(Ge.input,{whileFocus:{scale:1.02},type:"text",id:"username",name:"username",value:t.username,onChange:h,placeholder:"  ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.username?"border-red-500":""}`}),i.username&&R.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.username})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),R.jsx(Ge.input,{whileFocus:{scale:1.02},type:"email",id:"email",name:"email",value:t.email,onChange:h,placeholder:"your@institution.edu",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.email?"border-red-500":""}`}),i.email&&R.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.email})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"affiliation",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:"  ()"}),R.jsx(Ge.input,{whileFocus:{scale:1.02},type:"text",id:"affiliation",name:"affiliation",value:t.affiliation,onChange:h,placeholder:",  ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"}`})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"password",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),R.jsx(Ge.input,{whileFocus:{scale:1.02},type:"password",id:"password",name:"password",value:t.password,onChange:h,placeholder:"",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.password?"border-red-500":""}`}),R.jsx("p",{className:`text-xs mt-1 transition-colors duration-200 ${e?"text-gray-400":"text-gray-500"}`,children:" 8, // "}),i.password&&R.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.password})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"confirmPassword",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:" "}),R.jsx(Ge.input,{whileFocus:{scale:1.02},type:"password",id:"confirmPassword",name:"confirmPassword",value:t.confirmPassword,onChange:h,placeholder:"",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.confirmPassword?"border-red-500":""}`}),i.confirmPassword&&R.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.confirmPassword})]}),R.jsxs("div",{className:"flex items-center",children:[R.jsx("input",{type:"checkbox",id:"agreeTerms",name:"agreeTerms",checked:t.agreeTerms,onChange:h,className:"h-4 w-4 rounded"}),R.jsx("label",{htmlFor:"agreeTerms",className:`ml-3 text-sm transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:"   "})]}),i.agreeTerms&&R.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.agreeTerms}),R.jsx(Ge.button,{type:"submit",disabled:a,whileHover:{scale:1.02},whileTap:{scale:.98},className:`w-full py-2 px-4 rounded-lg font-medium text-white transition-all duration-200 ${a?"bg-blue-400 cursor-not-allowed opacity-50":"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800"}`,children:a?" ...":""})]}),R.jsxs(Ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},className:`text-center text-sm transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:["  ?"," ",R.jsx(Cr,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-medium",children:""})]})]})})}const Uy=({children:r})=>XD()?r:R.jsx(Qee,{to:"/login",replace:!0});function r4e(){return R.jsx(hte,{children:R.jsx(ote,{basename:"/1201-project/",children:R.jsxs(ete,{children:[R.jsx(mi,{path:"/login",element:R.jsx(e4e,{})}),R.jsx(mi,{path:"/signup",element:R.jsx(t4e,{})}),R.jsxs(mi,{element:R.jsx(yte,{}),children:[R.jsx(mi,{path:"/",element:R.jsx(Jse,{})}),R.jsx(mi,{path:"/concepts",element:R.jsx(Zse,{})}),R.jsx(mi,{path:"/concepts/:slug",element:R.jsx(tae,{})}),R.jsx(mi,{path:"/papers",element:R.jsx(jpe,{})}),R.jsx(mi,{path:"/visualizations",element:R.jsx(Qpe,{})}),R.jsx(mi,{path:"/calculator",element:R.jsx(YBe,{})}),R.jsx(mi,{path:"/forum",element:R.jsx(Uy,{children:R.jsx(qpe,{})})}),R.jsx(mi,{path:"/forum/:postId",element:R.jsx(Uy,{children:R.jsx(Hpe,{})})}),R.jsx(mi,{path:"/profile",element:R.jsx(Uy,{children:R.jsx(Kpe,{})})}),R.jsx(mi,{path:"/bookmarks",element:R.jsx(Uy,{children:R.jsx(Xpe,{})})}),R.jsx(mi,{path:"/notes",element:R.jsx(Uy,{children:R.jsx(Ype,{})})}),R.jsx(mi,{path:"/glossary",element:R.jsx(Gpe,{})}),R.jsx(mi,{path:"/references",element:R.jsx(Wpe,{})})]})]})})})}ZN.createRoot(document.getElementById("root")).render(R.jsx(MU.StrictMode,{children:R.jsx(r4e,{})}));
