var ote=Object.defineProperty;var CV=t=>{throw TypeError(t)};var lte=(t,e,n)=>e in t?ote(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Y=(t,e,n)=>lte(t,typeof e!="symbol"?e+"":e,n),WC=(t,e,n)=>e.has(t)||CV("Cannot "+n);var h=(t,e,n)=>(WC(t,e,"read from private field"),n?n.call(t):e.get(t)),k=(t,e,n)=>e.has(t)?CV("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),E=(t,e,n,r)=>(WC(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),D=(t,e,n)=>(WC(t,e,"access private method"),n);var In=(t,e,n,r)=>({set _(i){E(t,e,i,n)},get _(){return h(t,e,r)}});function cte(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Sc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hz={exports:{}},ST={},dz={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_=Symbol.for("react.element"),ute=Symbol.for("react.portal"),hte=Symbol.for("react.fragment"),dte=Symbol.for("react.strict_mode"),fte=Symbol.for("react.profiler"),pte=Symbol.for("react.provider"),mte=Symbol.for("react.context"),gte=Symbol.for("react.forward_ref"),yte=Symbol.for("react.suspense"),vte=Symbol.for("react.memo"),bte=Symbol.for("react.lazy"),IV=Symbol.iterator;function wte(t){return t===null||typeof t!="object"?null:(t=IV&&t[IV]||t["@@iterator"],typeof t=="function"?t:null)}var fz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pz=Object.assign,mz={};function Iy(t,e,n){this.props=t,this.context=e,this.refs=mz,this.updater=n||fz}Iy.prototype.isReactComponent={};Iy.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Iy.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gz(){}gz.prototype=Iy.prototype;function YM(t,e,n){this.props=t,this.context=e,this.refs=mz,this.updater=n||fz}var QM=YM.prototype=new gz;QM.constructor=YM;pz(QM,Iy.prototype);QM.isPureReactComponent=!0;var kV=Array.isArray,yz=Object.prototype.hasOwnProperty,JM={current:null},vz={key:!0,ref:!0,__self:!0,__source:!0};function bz(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)yz.call(e,r)&&!vz.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:D_,type:t,key:s,ref:a,props:i,_owner:JM.current}}function _te(t,e){return{$$typeof:D_,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ZM(t){return typeof t=="object"&&t!==null&&t.$$typeof===D_}function xte(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var RV=/\/+/g;function GC(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xte(""+t.key):e.toString(36)}function UA(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case D_:case ute:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+GC(a,0):r,kV(i)?(n="",t!=null&&(n=t.replace(RV,"$&/")+"/"),UA(i,e,n,"",function(c){return c})):i!=null&&(ZM(i)&&(i=_te(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(RV,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",kV(t))for(var o=0;o<t.length;o++){s=t[o];var l=r+GC(s,o);a+=UA(s,e,n,l,i)}else if(l=wte(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=r+GC(s,o++),a+=UA(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Hx(t,e,n){if(t==null)return t;var r=[],i=0;return UA(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Ate(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gi={current:null},zA={transition:null},Ete={ReactCurrentDispatcher:gi,ReactCurrentBatchConfig:zA,ReactCurrentOwner:JM};function wz(){throw Error("act(...) is not supported in production builds of React.")}Fe.Children={map:Hx,forEach:function(t,e,n){Hx(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Hx(t,function(){e++}),e},toArray:function(t){return Hx(t,function(e){return e})||[]},only:function(t){if(!ZM(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Fe.Component=Iy;Fe.Fragment=hte;Fe.Profiler=fte;Fe.PureComponent=YM;Fe.StrictMode=dte;Fe.Suspense=yte;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ete;Fe.act=wz;Fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=pz({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=JM.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)yz.call(e,l)&&!vz.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:D_,type:t.type,key:i,ref:s,props:r,_owner:a}};Fe.createContext=function(t){return t={$$typeof:mte,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:pte,_context:t},t.Consumer=t};Fe.createElement=bz;Fe.createFactory=function(t){var e=bz.bind(null,t);return e.type=t,e};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(t){return{$$typeof:gte,render:t}};Fe.isValidElement=ZM;Fe.lazy=function(t){return{$$typeof:bte,_payload:{_status:-1,_result:t},_init:Ate}};Fe.memo=function(t,e){return{$$typeof:vte,type:t,compare:e===void 0?null:e}};Fe.startTransition=function(t){var e=zA.transition;zA.transition={};try{t()}finally{zA.transition=e}};Fe.unstable_act=wz;Fe.useCallback=function(t,e){return gi.current.useCallback(t,e)};Fe.useContext=function(t){return gi.current.useContext(t)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(t){return gi.current.useDeferredValue(t)};Fe.useEffect=function(t,e){return gi.current.useEffect(t,e)};Fe.useId=function(){return gi.current.useId()};Fe.useImperativeHandle=function(t,e,n){return gi.current.useImperativeHandle(t,e,n)};Fe.useInsertionEffect=function(t,e){return gi.current.useInsertionEffect(t,e)};Fe.useLayoutEffect=function(t,e){return gi.current.useLayoutEffect(t,e)};Fe.useMemo=function(t,e){return gi.current.useMemo(t,e)};Fe.useReducer=function(t,e,n){return gi.current.useReducer(t,e,n)};Fe.useRef=function(t){return gi.current.useRef(t)};Fe.useState=function(t){return gi.current.useState(t)};Fe.useSyncExternalStore=function(t,e,n){return gi.current.useSyncExternalStore(t,e,n)};Fe.useTransition=function(){return gi.current.useTransition()};Fe.version="18.3.1";dz.exports=Fe;var x=dz.exports;const _z=Sc(x),xz=cte({__proto__:null,default:_z},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ste=x,Tte=Symbol.for("react.element"),Pte=Symbol.for("react.fragment"),Cte=Object.prototype.hasOwnProperty,Ite=Ste.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kte={key:!0,ref:!0,__self:!0,__source:!0};function Az(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Cte.call(e,r)&&!kte.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Tte,type:t,key:s,ref:a,props:i,_owner:Ite.current}}ST.Fragment=Pte;ST.jsx=Az;ST.jsxs=Az;hz.exports=ST;var A=hz.exports,Rk={},Ez={exports:{}},As={},Sz={exports:{}},Tz={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,H){var re=U.length;U.push(H);e:for(;0<re;){var ve=re-1>>>1,de=U[ve];if(0<i(de,H))U[ve]=H,U[re]=de,re=ve;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var H=U[0],re=U.pop();if(re!==H){U[0]=re;e:for(var ve=0,de=U.length,xe=de>>>1;ve<xe;){var je=2*(ve+1)-1,dt=U[je],ft=je+1,Ee=U[ft];if(0>i(dt,re))ft<de&&0>i(Ee,dt)?(U[ve]=Ee,U[ft]=re,ve=ft):(U[ve]=dt,U[je]=re,ve=je);else if(ft<de&&0>i(Ee,re))U[ve]=Ee,U[ft]=re,ve=ft;else break e}}return H}function i(U,H){var re=U.sortIndex-H.sortIndex;return re!==0?re:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,f=3,p=!1,g=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(U){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=U)r(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(c)}}function T(U){if(y=!1,w(U),!g)if(n(l)!==null)g=!0,Z(P);else{var H=n(c);H!==null&&G(T,H.startTime-U)}}function P(U,H){g=!1,y&&(y=!1,b(I),I=-1),p=!0;var re=f;try{for(w(H),d=n(l);d!==null&&(!(d.expirationTime>H)||U&&!N());){var ve=d.callback;if(typeof ve=="function"){d.callback=null,f=d.priorityLevel;var de=ve(d.expirationTime<=H);H=t.unstable_now(),typeof de=="function"?d.callback=de:d===n(l)&&r(l),w(H)}else r(l);d=n(l)}if(d!==null)var xe=!0;else{var je=n(c);je!==null&&G(T,je.startTime-H),xe=!1}return xe}finally{d=null,f=re,p=!1}}var O=!1,C=null,I=-1,M=5,L=-1;function N(){return!(t.unstable_now()-L<M)}function F(){if(C!==null){var U=t.unstable_now();L=U;var H=!0;try{H=C(!0,U)}finally{H?j():(O=!1,C=null)}}else O=!1}var j;if(typeof _=="function")j=function(){_(F)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,te=K.port2;K.port1.onmessage=F,j=function(){te.postMessage(null)}}else j=function(){v(F,0)};function Z(U){C=U,O||(O=!0,j())}function G(U,H){I=v(function(){U(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,Z(P))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var re=f;f=H;try{return U()}finally{f=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var re=f;f=U;try{return H()}finally{f=re}},t.unstable_scheduleCallback=function(U,H,re){var ve=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ve+re:ve):re=ve,U){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=re+de,U={id:u++,callback:H,priorityLevel:U,startTime:re,expirationTime:de,sortIndex:-1},re>ve?(U.sortIndex=re,e(c,U),n(l)===null&&U===n(c)&&(y?(b(I),I=-1):y=!0,G(T,re-ve))):(U.sortIndex=de,e(l,U),g||p||(g=!0,Z(P))),U},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(U){var H=f;return function(){var re=f;f=H;try{return U.apply(this,arguments)}finally{f=re}}}})(Tz);Sz.exports=Tz;var Rte=Sz.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ote=x,ws=Rte;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pz=new Set,B0={};function cp(t,e){ny(t,e),ny(t+"Capture",e)}function ny(t,e){for(B0[t]=e,t=0;t<e.length;t++)Pz.add(e[t])}var oc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ok=Object.prototype.hasOwnProperty,Dte=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,OV={},DV={};function Mte(t){return Ok.call(DV,t)?!0:Ok.call(OV,t)?!1:Dte.test(t)?DV[t]=!0:(OV[t]=!0,!1)}function Nte(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Lte(t,e,n,r){if(e===null||typeof e>"u"||Nte(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yi(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Cr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Cr[t]=new yi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Cr[e]=new yi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Cr[t]=new yi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Cr[t]=new yi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Cr[t]=new yi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Cr[t]=new yi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Cr[t]=new yi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Cr[t]=new yi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Cr[t]=new yi(t,5,!1,t.toLowerCase(),null,!1,!1)});var eN=/[\-:]([a-z])/g;function tN(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(eN,tN);Cr[e]=new yi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(eN,tN);Cr[e]=new yi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(eN,tN);Cr[e]=new yi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Cr[t]=new yi(t,1,!1,t.toLowerCase(),null,!1,!1)});Cr.xlinkHref=new yi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Cr[t]=new yi(t,1,!1,t.toLowerCase(),null,!0,!0)});function nN(t,e,n,r){var i=Cr.hasOwnProperty(e)?Cr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Lte(e,n,i,r)&&(n=null),r||i===null?Mte(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Tc=Ote.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wx=Symbol.for("react.element"),Hp=Symbol.for("react.portal"),Wp=Symbol.for("react.fragment"),rN=Symbol.for("react.strict_mode"),Dk=Symbol.for("react.profiler"),Cz=Symbol.for("react.provider"),Iz=Symbol.for("react.context"),iN=Symbol.for("react.forward_ref"),Mk=Symbol.for("react.suspense"),Nk=Symbol.for("react.suspense_list"),sN=Symbol.for("react.memo"),Gc=Symbol.for("react.lazy"),kz=Symbol.for("react.offscreen"),MV=Symbol.iterator;function pv(t){return t===null||typeof t!="object"?null:(t=MV&&t[MV]||t["@@iterator"],typeof t=="function"?t:null)}var qt=Object.assign,KC;function Lv(t){if(KC===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);KC=e&&e[1]||""}return`
`+KC+t}var qC=!1;function XC(t,e){if(!t||qC)return"";qC=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{qC=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Lv(t):""}function jte(t){switch(t.tag){case 5:return Lv(t.type);case 16:return Lv("Lazy");case 13:return Lv("Suspense");case 19:return Lv("SuspenseList");case 0:case 2:case 15:return t=XC(t.type,!1),t;case 11:return t=XC(t.type.render,!1),t;case 1:return t=XC(t.type,!0),t;default:return""}}function Lk(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wp:return"Fragment";case Hp:return"Portal";case Dk:return"Profiler";case rN:return"StrictMode";case Mk:return"Suspense";case Nk:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Iz:return(t.displayName||"Context")+".Consumer";case Cz:return(t._context.displayName||"Context")+".Provider";case iN:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sN:return e=t.displayName||null,e!==null?e:Lk(t.type)||"Memo";case Gc:e=t._payload,t=t._init;try{return Lk(t(e))}catch{}}return null}function Fte(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Lk(e);case 8:return e===rN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fh(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Rz(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Vte(t){var e=Rz(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gx(t){t._valueTracker||(t._valueTracker=Vte(t))}function Oz(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Rz(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function rS(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jk(t,e){var n=e.checked;return qt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function NV(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fh(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Dz(t,e){e=e.checked,e!=null&&nN(t,"checked",e,!1)}function Fk(t,e){Dz(t,e);var n=fh(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vk(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vk(t,e.type,fh(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function LV(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vk(t,e,n){(e!=="number"||rS(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var jv=Array.isArray;function gm(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fh(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Bk(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return qt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jV(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(jv(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fh(n)}}function Mz(t,e){var n=fh(e.value),r=fh(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function FV(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Nz(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $k(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Nz(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Kx,Lz=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Kx=Kx||document.createElement("div"),Kx.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Kx.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $0(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var y0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bte=["Webkit","ms","Moz","O"];Object.keys(y0).forEach(function(t){Bte.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),y0[e]=y0[t]})});function jz(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||y0.hasOwnProperty(t)&&y0[t]?(""+e).trim():e+"px"}function Fz(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=jz(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var $te=qt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Uk(t,e){if(e){if($te[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function zk(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hk=null;function aN(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wk=null,ym=null,vm=null;function VV(t){if(t=L_(t)){if(typeof Wk!="function")throw Error(J(280));var e=t.stateNode;e&&(e=kT(e),Wk(t.stateNode,t.type,e))}}function Vz(t){ym?vm?vm.push(t):vm=[t]:ym=t}function Bz(){if(ym){var t=ym,e=vm;if(vm=ym=null,VV(t),e)for(t=0;t<e.length;t++)VV(e[t])}}function $z(t,e){return t(e)}function Uz(){}var YC=!1;function zz(t,e,n){if(YC)return t(e,n);YC=!0;try{return $z(t,e,n)}finally{YC=!1,(ym!==null||vm!==null)&&(Uz(),Bz())}}function U0(t,e){var n=t.stateNode;if(n===null)return null;var r=kT(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var Gk=!1;if(oc)try{var mv={};Object.defineProperty(mv,"passive",{get:function(){Gk=!0}}),window.addEventListener("test",mv,mv),window.removeEventListener("test",mv,mv)}catch{Gk=!1}function Ute(t,e,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var v0=!1,iS=null,sS=!1,Kk=null,zte={onError:function(t){v0=!0,iS=t}};function Hte(t,e,n,r,i,s,a,o,l){v0=!1,iS=null,Ute.apply(zte,arguments)}function Wte(t,e,n,r,i,s,a,o,l){if(Hte.apply(this,arguments),v0){if(v0){var c=iS;v0=!1,iS=null}else throw Error(J(198));sS||(sS=!0,Kk=c)}}function up(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Hz(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function BV(t){if(up(t)!==t)throw Error(J(188))}function Gte(t){var e=t.alternate;if(!e){if(e=up(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return BV(i),t;if(s===r)return BV(i),e;s=s.sibling}throw Error(J(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function Wz(t){return t=Gte(t),t!==null?Gz(t):null}function Gz(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Gz(t);if(e!==null)return e;t=t.sibling}return null}var Kz=ws.unstable_scheduleCallback,$V=ws.unstable_cancelCallback,Kte=ws.unstable_shouldYield,qte=ws.unstable_requestPaint,fn=ws.unstable_now,Xte=ws.unstable_getCurrentPriorityLevel,oN=ws.unstable_ImmediatePriority,qz=ws.unstable_UserBlockingPriority,aS=ws.unstable_NormalPriority,Yte=ws.unstable_LowPriority,Xz=ws.unstable_IdlePriority,TT=null,Do=null;function Qte(t){if(Do&&typeof Do.onCommitFiberRoot=="function")try{Do.onCommitFiberRoot(TT,t,void 0,(t.current.flags&128)===128)}catch{}}var Fa=Math.clz32?Math.clz32:ene,Jte=Math.log,Zte=Math.LN2;function ene(t){return t>>>=0,t===0?32:31-(Jte(t)/Zte|0)|0}var qx=64,Xx=4194304;function Fv(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function oS(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=Fv(o):(s&=a,s!==0&&(r=Fv(s)))}else a=n&~i,a!==0?r=Fv(a):s!==0&&(r=Fv(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Fa(e),i=1<<n,r|=t[n],e&=~i;return r}function tne(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nne(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Fa(s),o=1<<a,l=i[a];l===-1?(!(o&n)||o&r)&&(i[a]=tne(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function qk(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Yz(){var t=qx;return qx<<=1,!(qx&4194240)&&(qx=64),t}function QC(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function M_(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fa(e),t[e]=n}function rne(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Fa(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function lN(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Fa(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var rt=0;function Qz(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Jz,cN,Zz,eH,tH,Xk=!1,Yx=[],Zu=null,eh=null,th=null,z0=new Map,H0=new Map,Yc=[],ine="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function UV(t,e){switch(t){case"focusin":case"focusout":Zu=null;break;case"dragenter":case"dragleave":eh=null;break;case"mouseover":case"mouseout":th=null;break;case"pointerover":case"pointerout":z0.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":H0.delete(e.pointerId)}}function gv(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=L_(e),e!==null&&cN(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function sne(t,e,n,r,i){switch(e){case"focusin":return Zu=gv(Zu,t,e,n,r,i),!0;case"dragenter":return eh=gv(eh,t,e,n,r,i),!0;case"mouseover":return th=gv(th,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return z0.set(s,gv(z0.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,H0.set(s,gv(H0.get(s)||null,t,e,n,r,i)),!0}return!1}function nH(t){var e=cd(t.target);if(e!==null){var n=up(e);if(n!==null){if(e=n.tag,e===13){if(e=Hz(n),e!==null){t.blockedOn=e,tH(t.priority,function(){Zz(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function HA(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Yk(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Hk=r,n.target.dispatchEvent(r),Hk=null}else return e=L_(n),e!==null&&cN(e),t.blockedOn=n,!1;e.shift()}return!0}function zV(t,e,n){HA(t)&&n.delete(e)}function ane(){Xk=!1,Zu!==null&&HA(Zu)&&(Zu=null),eh!==null&&HA(eh)&&(eh=null),th!==null&&HA(th)&&(th=null),z0.forEach(zV),H0.forEach(zV)}function yv(t,e){t.blockedOn===e&&(t.blockedOn=null,Xk||(Xk=!0,ws.unstable_scheduleCallback(ws.unstable_NormalPriority,ane)))}function W0(t){function e(i){return yv(i,t)}if(0<Yx.length){yv(Yx[0],t);for(var n=1;n<Yx.length;n++){var r=Yx[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Zu!==null&&yv(Zu,t),eh!==null&&yv(eh,t),th!==null&&yv(th,t),z0.forEach(e),H0.forEach(e),n=0;n<Yc.length;n++)r=Yc[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Yc.length&&(n=Yc[0],n.blockedOn===null);)nH(n),n.blockedOn===null&&Yc.shift()}var bm=Tc.ReactCurrentBatchConfig,lS=!0;function one(t,e,n,r){var i=rt,s=bm.transition;bm.transition=null;try{rt=1,uN(t,e,n,r)}finally{rt=i,bm.transition=s}}function lne(t,e,n,r){var i=rt,s=bm.transition;bm.transition=null;try{rt=4,uN(t,e,n,r)}finally{rt=i,bm.transition=s}}function uN(t,e,n,r){if(lS){var i=Yk(t,e,n,r);if(i===null)oI(t,e,r,cS,n),UV(t,r);else if(sne(i,t,e,n,r))r.stopPropagation();else if(UV(t,r),e&4&&-1<ine.indexOf(t)){for(;i!==null;){var s=L_(i);if(s!==null&&Jz(s),s=Yk(t,e,n,r),s===null&&oI(t,e,r,cS,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else oI(t,e,r,null,n)}}var cS=null;function Yk(t,e,n,r){if(cS=null,t=aN(r),t=cd(t),t!==null)if(e=up(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Hz(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cS=t,null}function rH(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xte()){case oN:return 1;case qz:return 4;case aS:case Yte:return 16;case Xz:return 536870912;default:return 16}default:return 16}}var Xu=null,hN=null,WA=null;function iH(){if(WA)return WA;var t,e=hN,n=e.length,r,i="value"in Xu?Xu.value:Xu.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return WA=i.slice(t,1<r?1-r:void 0)}function GA(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qx(){return!0}function HV(){return!1}function Es(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Qx:HV,this.isPropagationStopped=HV,this}return qt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qx)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qx)},persist:function(){},isPersistent:Qx}),e}var ky={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dN=Es(ky),N_=qt({},ky,{view:0,detail:0}),cne=Es(N_),JC,ZC,vv,PT=qt({},N_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fN,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vv&&(vv&&t.type==="mousemove"?(JC=t.screenX-vv.screenX,ZC=t.screenY-vv.screenY):ZC=JC=0,vv=t),JC)},movementY:function(t){return"movementY"in t?t.movementY:ZC}}),WV=Es(PT),une=qt({},PT,{dataTransfer:0}),hne=Es(une),dne=qt({},N_,{relatedTarget:0}),eI=Es(dne),fne=qt({},ky,{animationName:0,elapsedTime:0,pseudoElement:0}),pne=Es(fne),mne=qt({},ky,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gne=Es(mne),yne=qt({},ky,{data:0}),GV=Es(yne),vne={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bne={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wne={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _ne(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wne[t])?!!e[t]:!1}function fN(){return _ne}var xne=qt({},N_,{key:function(t){if(t.key){var e=vne[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=GA(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bne[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fN,charCode:function(t){return t.type==="keypress"?GA(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?GA(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ane=Es(xne),Ene=qt({},PT,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),KV=Es(Ene),Sne=qt({},N_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fN}),Tne=Es(Sne),Pne=qt({},ky,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cne=Es(Pne),Ine=qt({},PT,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),kne=Es(Ine),Rne=[9,13,27,32],pN=oc&&"CompositionEvent"in window,b0=null;oc&&"documentMode"in document&&(b0=document.documentMode);var One=oc&&"TextEvent"in window&&!b0,sH=oc&&(!pN||b0&&8<b0&&11>=b0),qV=" ",XV=!1;function aH(t,e){switch(t){case"keyup":return Rne.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oH(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Gp=!1;function Dne(t,e){switch(t){case"compositionend":return oH(e);case"keypress":return e.which!==32?null:(XV=!0,qV);case"textInput":return t=e.data,t===qV&&XV?null:t;default:return null}}function Mne(t,e){if(Gp)return t==="compositionend"||!pN&&aH(t,e)?(t=iH(),WA=hN=Xu=null,Gp=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sH&&e.locale!=="ko"?null:e.data;default:return null}}var Nne={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function YV(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Nne[t.type]:e==="textarea"}function lH(t,e,n,r){Vz(r),e=uS(e,"onChange"),0<e.length&&(n=new dN("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var w0=null,G0=null;function Lne(t){bH(t,0)}function CT(t){var e=Xp(t);if(Oz(e))return t}function jne(t,e){if(t==="change")return e}var cH=!1;if(oc){var tI;if(oc){var nI="oninput"in document;if(!nI){var QV=document.createElement("div");QV.setAttribute("oninput","return;"),nI=typeof QV.oninput=="function"}tI=nI}else tI=!1;cH=tI&&(!document.documentMode||9<document.documentMode)}function JV(){w0&&(w0.detachEvent("onpropertychange",uH),G0=w0=null)}function uH(t){if(t.propertyName==="value"&&CT(G0)){var e=[];lH(e,G0,t,aN(t)),zz(Lne,e)}}function Fne(t,e,n){t==="focusin"?(JV(),w0=e,G0=n,w0.attachEvent("onpropertychange",uH)):t==="focusout"&&JV()}function Vne(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return CT(G0)}function Bne(t,e){if(t==="click")return CT(e)}function $ne(t,e){if(t==="input"||t==="change")return CT(e)}function Une(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $a=typeof Object.is=="function"?Object.is:Une;function K0(t,e){if($a(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ok.call(e,i)||!$a(t[i],e[i]))return!1}return!0}function ZV(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function eB(t,e){var n=ZV(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ZV(n)}}function hH(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hH(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function dH(){for(var t=window,e=rS();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=rS(t.document)}return e}function mN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function zne(t){var e=dH(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hH(n.ownerDocument.documentElement,n)){if(r!==null&&mN(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=eB(n,s);var a=eB(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Hne=oc&&"documentMode"in document&&11>=document.documentMode,Kp=null,Qk=null,_0=null,Jk=!1;function tB(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jk||Kp==null||Kp!==rS(r)||(r=Kp,"selectionStart"in r&&mN(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_0&&K0(_0,r)||(_0=r,r=uS(Qk,"onSelect"),0<r.length&&(e=new dN("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Kp)))}function Jx(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qp={animationend:Jx("Animation","AnimationEnd"),animationiteration:Jx("Animation","AnimationIteration"),animationstart:Jx("Animation","AnimationStart"),transitionend:Jx("Transition","TransitionEnd")},rI={},fH={};oc&&(fH=document.createElement("div").style,"AnimationEvent"in window||(delete qp.animationend.animation,delete qp.animationiteration.animation,delete qp.animationstart.animation),"TransitionEvent"in window||delete qp.transitionend.transition);function IT(t){if(rI[t])return rI[t];if(!qp[t])return t;var e=qp[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in fH)return rI[t]=e[n];return t}var pH=IT("animationend"),mH=IT("animationiteration"),gH=IT("animationstart"),yH=IT("transitionend"),vH=new Map,nB="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ih(t,e){vH.set(t,e),cp(e,[t])}for(var iI=0;iI<nB.length;iI++){var sI=nB[iI],Wne=sI.toLowerCase(),Gne=sI[0].toUpperCase()+sI.slice(1);Ih(Wne,"on"+Gne)}Ih(pH,"onAnimationEnd");Ih(mH,"onAnimationIteration");Ih(gH,"onAnimationStart");Ih("dblclick","onDoubleClick");Ih("focusin","onFocus");Ih("focusout","onBlur");Ih(yH,"onTransitionEnd");ny("onMouseEnter",["mouseout","mouseover"]);ny("onMouseLeave",["mouseout","mouseover"]);ny("onPointerEnter",["pointerout","pointerover"]);ny("onPointerLeave",["pointerout","pointerover"]);cp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cp("onBeforeInput",["compositionend","keypress","textInput","paste"]);cp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kne=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vv));function rB(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Wte(r,e,void 0,t),t.currentTarget=null}function bH(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;rB(i,o,c),s=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;rB(i,o,c),s=l}}}if(sS)throw t=Kk,sS=!1,Kk=null,t}function Ct(t,e){var n=e[rR];n===void 0&&(n=e[rR]=new Set);var r=t+"__bubble";n.has(r)||(wH(e,t,2,!1),n.add(r))}function aI(t,e,n){var r=0;e&&(r|=4),wH(n,t,r,e)}var Zx="_reactListening"+Math.random().toString(36).slice(2);function q0(t){if(!t[Zx]){t[Zx]=!0,Pz.forEach(function(n){n!=="selectionchange"&&(Kne.has(n)||aI(n,!1,t),aI(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zx]||(e[Zx]=!0,aI("selectionchange",!1,e))}}function wH(t,e,n,r){switch(rH(e)){case 1:var i=one;break;case 4:i=lne;break;default:i=uN}n=i.bind(null,e,n,t),i=void 0,!Gk||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function oI(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=cd(o),a===null)return;if(l=a.tag,l===5||l===6){r=s=a;continue e}o=o.parentNode}}r=r.return}zz(function(){var c=s,u=aN(n),d=[];e:{var f=vH.get(t);if(f!==void 0){var p=dN,g=t;switch(t){case"keypress":if(GA(n)===0)break e;case"keydown":case"keyup":p=Ane;break;case"focusin":g="focus",p=eI;break;case"focusout":g="blur",p=eI;break;case"beforeblur":case"afterblur":p=eI;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=WV;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=hne;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Tne;break;case pH:case mH:case gH:p=pne;break;case yH:p=Cne;break;case"scroll":p=cne;break;case"wheel":p=kne;break;case"copy":case"cut":case"paste":p=gne;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=KV}var y=(e&4)!==0,v=!y&&t==="scroll",b=y?f!==null?f+"Capture":null:f;y=[];for(var _=c,w;_!==null;){w=_;var T=w.stateNode;if(w.tag===5&&T!==null&&(w=T,b!==null&&(T=U0(_,b),T!=null&&y.push(X0(_,T,w)))),v)break;_=_.return}0<y.length&&(f=new p(f,g,null,n,u),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Hk&&(g=n.relatedTarget||n.fromElement)&&(cd(g)||g[lc]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?cd(g):null,g!==null&&(v=up(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(y=WV,T="onMouseLeave",b="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(y=KV,T="onPointerLeave",b="onPointerEnter",_="pointer"),v=p==null?f:Xp(p),w=g==null?f:Xp(g),f=new y(T,_+"leave",p,n,u),f.target=v,f.relatedTarget=w,T=null,cd(u)===c&&(y=new y(b,_+"enter",g,n,u),y.target=w,y.relatedTarget=v,T=y),v=T,p&&g)t:{for(y=p,b=g,_=0,w=y;w;w=Tp(w))_++;for(w=0,T=b;T;T=Tp(T))w++;for(;0<_-w;)y=Tp(y),_--;for(;0<w-_;)b=Tp(b),w--;for(;_--;){if(y===b||b!==null&&y===b.alternate)break t;y=Tp(y),b=Tp(b)}y=null}else y=null;p!==null&&iB(d,f,p,y,!1),g!==null&&v!==null&&iB(d,v,g,y,!0)}}e:{if(f=c?Xp(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var P=jne;else if(YV(f))if(cH)P=$ne;else{P=Vne;var O=Fne}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(P=Bne);if(P&&(P=P(t,c))){lH(d,P,n,u);break e}O&&O(t,f,c),t==="focusout"&&(O=f._wrapperState)&&O.controlled&&f.type==="number"&&Vk(f,"number",f.value)}switch(O=c?Xp(c):window,t){case"focusin":(YV(O)||O.contentEditable==="true")&&(Kp=O,Qk=c,_0=null);break;case"focusout":_0=Qk=Kp=null;break;case"mousedown":Jk=!0;break;case"contextmenu":case"mouseup":case"dragend":Jk=!1,tB(d,n,u);break;case"selectionchange":if(Hne)break;case"keydown":case"keyup":tB(d,n,u)}var C;if(pN)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Gp?aH(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(sH&&n.locale!=="ko"&&(Gp||I!=="onCompositionStart"?I==="onCompositionEnd"&&Gp&&(C=iH()):(Xu=u,hN="value"in Xu?Xu.value:Xu.textContent,Gp=!0)),O=uS(c,I),0<O.length&&(I=new GV(I,t,null,n,u),d.push({event:I,listeners:O}),C?I.data=C:(C=oH(n),C!==null&&(I.data=C)))),(C=One?Dne(t,n):Mne(t,n))&&(c=uS(c,"onBeforeInput"),0<c.length&&(u=new GV("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}bH(d,e)})}function X0(t,e,n){return{instance:t,listener:e,currentTarget:n}}function uS(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=U0(t,n),s!=null&&r.unshift(X0(t,s,i)),s=U0(t,e),s!=null&&r.push(X0(t,s,i))),t=t.return}return r}function Tp(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function iB(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&c!==null&&(o=c,i?(l=U0(n,s),l!=null&&a.unshift(X0(n,l,o))):i||(l=U0(n,s),l!=null&&a.push(X0(n,l,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var qne=/\r\n?/g,Xne=/\u0000|\uFFFD/g;function sB(t){return(typeof t=="string"?t:""+t).replace(qne,`
`).replace(Xne,"")}function eA(t,e,n){if(e=sB(e),sB(t)!==e&&n)throw Error(J(425))}function hS(){}var Zk=null,eR=null;function tR(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nR=typeof setTimeout=="function"?setTimeout:void 0,Yne=typeof clearTimeout=="function"?clearTimeout:void 0,aB=typeof Promise=="function"?Promise:void 0,Qne=typeof queueMicrotask=="function"?queueMicrotask:typeof aB<"u"?function(t){return aB.resolve(null).then(t).catch(Jne)}:nR;function Jne(t){setTimeout(function(){throw t})}function lI(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),W0(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);W0(e)}function nh(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function oB(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ry=Math.random().toString(36).slice(2),Io="__reactFiber$"+Ry,Y0="__reactProps$"+Ry,lc="__reactContainer$"+Ry,rR="__reactEvents$"+Ry,Zne="__reactListeners$"+Ry,ere="__reactHandles$"+Ry;function cd(t){var e=t[Io];if(e)return e;for(var n=t.parentNode;n;){if(e=n[lc]||n[Io]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=oB(t);t!==null;){if(n=t[Io])return n;t=oB(t)}return e}t=n,n=t.parentNode}return null}function L_(t){return t=t[Io]||t[lc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xp(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function kT(t){return t[Y0]||null}var iR=[],Yp=-1;function kh(t){return{current:t}}function Ot(t){0>Yp||(t.current=iR[Yp],iR[Yp]=null,Yp--)}function St(t,e){Yp++,iR[Yp]=t.current,t.current=e}var ph={},Xr=kh(ph),ji=kh(!1),zf=ph;function ry(t,e){var n=t.type.contextTypes;if(!n)return ph;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Fi(t){return t=t.childContextTypes,t!=null}function dS(){Ot(ji),Ot(Xr)}function lB(t,e,n){if(Xr.current!==ph)throw Error(J(168));St(Xr,e),St(ji,n)}function _H(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(J(108,Fte(t)||"Unknown",i));return qt({},n,r)}function fS(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ph,zf=Xr.current,St(Xr,t),St(ji,ji.current),!0}function cB(t,e,n){var r=t.stateNode;if(!r)throw Error(J(169));n?(t=_H(t,e,zf),r.__reactInternalMemoizedMergedChildContext=t,Ot(ji),Ot(Xr),St(Xr,t)):Ot(ji),St(ji,n)}var ll=null,RT=!1,cI=!1;function xH(t){ll===null?ll=[t]:ll.push(t)}function tre(t){RT=!0,xH(t)}function Rh(){if(!cI&&ll!==null){cI=!0;var t=0,e=rt;try{var n=ll;for(rt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ll=null,RT=!1}catch(i){throw ll!==null&&(ll=ll.slice(t+1)),Kz(oN,Rh),i}finally{rt=e,cI=!1}}return null}var Qp=[],Jp=0,pS=null,mS=0,Gs=[],Ks=0,Hf=null,Kl=1,ql="";function Yh(t,e){Qp[Jp++]=mS,Qp[Jp++]=pS,pS=t,mS=e}function AH(t,e,n){Gs[Ks++]=Kl,Gs[Ks++]=ql,Gs[Ks++]=Hf,Hf=t;var r=Kl;t=ql;var i=32-Fa(r)-1;r&=~(1<<i),n+=1;var s=32-Fa(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Kl=1<<32-Fa(e)+i|n<<i|r,ql=s+t}else Kl=1<<s|n<<i|r,ql=t}function gN(t){t.return!==null&&(Yh(t,1),AH(t,1,0))}function yN(t){for(;t===pS;)pS=Qp[--Jp],Qp[Jp]=null,mS=Qp[--Jp],Qp[Jp]=null;for(;t===Hf;)Hf=Gs[--Ks],Gs[Ks]=null,ql=Gs[--Ks],Gs[Ks]=null,Kl=Gs[--Ks],Gs[Ks]=null}var ys=null,ps=null,Ft=!1,Ra=null;function EH(t,e){var n=Ys(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function uB(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ys=t,ps=nh(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ys=t,ps=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Hf!==null?{id:Kl,overflow:ql}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ys(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ys=t,ps=null,!0):!1;default:return!1}}function sR(t){return(t.mode&1)!==0&&(t.flags&128)===0}function aR(t){if(Ft){var e=ps;if(e){var n=e;if(!uB(t,e)){if(sR(t))throw Error(J(418));e=nh(n.nextSibling);var r=ys;e&&uB(t,e)?EH(r,n):(t.flags=t.flags&-4097|2,Ft=!1,ys=t)}}else{if(sR(t))throw Error(J(418));t.flags=t.flags&-4097|2,Ft=!1,ys=t}}}function hB(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ys=t}function tA(t){if(t!==ys)return!1;if(!Ft)return hB(t),Ft=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tR(t.type,t.memoizedProps)),e&&(e=ps)){if(sR(t))throw SH(),Error(J(418));for(;e;)EH(t,e),e=nh(e.nextSibling)}if(hB(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ps=nh(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ps=null}}else ps=ys?nh(t.stateNode.nextSibling):null;return!0}function SH(){for(var t=ps;t;)t=nh(t.nextSibling)}function iy(){ps=ys=null,Ft=!1}function vN(t){Ra===null?Ra=[t]:Ra.push(t)}var nre=Tc.ReactCurrentBatchConfig;function bv(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function nA(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function dB(t){var e=t._init;return e(t._payload)}function TH(t){function e(b,_){if(t){var w=b.deletions;w===null?(b.deletions=[_],b.flags|=16):w.push(_)}}function n(b,_){if(!t)return null;for(;_!==null;)e(b,_),_=_.sibling;return null}function r(b,_){for(b=new Map;_!==null;)_.key!==null?b.set(_.key,_):b.set(_.index,_),_=_.sibling;return b}function i(b,_){return b=ah(b,_),b.index=0,b.sibling=null,b}function s(b,_,w){return b.index=w,t?(w=b.alternate,w!==null?(w=w.index,w<_?(b.flags|=2,_):w):(b.flags|=2,_)):(b.flags|=1048576,_)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function o(b,_,w,T){return _===null||_.tag!==6?(_=gI(w,b.mode,T),_.return=b,_):(_=i(_,w),_.return=b,_)}function l(b,_,w,T){var P=w.type;return P===Wp?u(b,_,w.props.children,T,w.key):_!==null&&(_.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Gc&&dB(P)===_.type)?(T=i(_,w.props),T.ref=bv(b,_,w),T.return=b,T):(T=ZA(w.type,w.key,w.props,null,b.mode,T),T.ref=bv(b,_,w),T.return=b,T)}function c(b,_,w,T){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=yI(w,b.mode,T),_.return=b,_):(_=i(_,w.children||[]),_.return=b,_)}function u(b,_,w,T,P){return _===null||_.tag!==7?(_=Nf(w,b.mode,T,P),_.return=b,_):(_=i(_,w),_.return=b,_)}function d(b,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=gI(""+_,b.mode,w),_.return=b,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Wx:return w=ZA(_.type,_.key,_.props,null,b.mode,w),w.ref=bv(b,null,_),w.return=b,w;case Hp:return _=yI(_,b.mode,w),_.return=b,_;case Gc:var T=_._init;return d(b,T(_._payload),w)}if(jv(_)||pv(_))return _=Nf(_,b.mode,w,null),_.return=b,_;nA(b,_)}return null}function f(b,_,w,T){var P=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return P!==null?null:o(b,_,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Wx:return w.key===P?l(b,_,w,T):null;case Hp:return w.key===P?c(b,_,w,T):null;case Gc:return P=w._init,f(b,_,P(w._payload),T)}if(jv(w)||pv(w))return P!==null?null:u(b,_,w,T,null);nA(b,w)}return null}function p(b,_,w,T,P){if(typeof T=="string"&&T!==""||typeof T=="number")return b=b.get(w)||null,o(_,b,""+T,P);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Wx:return b=b.get(T.key===null?w:T.key)||null,l(_,b,T,P);case Hp:return b=b.get(T.key===null?w:T.key)||null,c(_,b,T,P);case Gc:var O=T._init;return p(b,_,w,O(T._payload),P)}if(jv(T)||pv(T))return b=b.get(w)||null,u(_,b,T,P,null);nA(_,T)}return null}function g(b,_,w,T){for(var P=null,O=null,C=_,I=_=0,M=null;C!==null&&I<w.length;I++){C.index>I?(M=C,C=null):M=C.sibling;var L=f(b,C,w[I],T);if(L===null){C===null&&(C=M);break}t&&C&&L.alternate===null&&e(b,C),_=s(L,_,I),O===null?P=L:O.sibling=L,O=L,C=M}if(I===w.length)return n(b,C),Ft&&Yh(b,I),P;if(C===null){for(;I<w.length;I++)C=d(b,w[I],T),C!==null&&(_=s(C,_,I),O===null?P=C:O.sibling=C,O=C);return Ft&&Yh(b,I),P}for(C=r(b,C);I<w.length;I++)M=p(C,b,I,w[I],T),M!==null&&(t&&M.alternate!==null&&C.delete(M.key===null?I:M.key),_=s(M,_,I),O===null?P=M:O.sibling=M,O=M);return t&&C.forEach(function(N){return e(b,N)}),Ft&&Yh(b,I),P}function y(b,_,w,T){var P=pv(w);if(typeof P!="function")throw Error(J(150));if(w=P.call(w),w==null)throw Error(J(151));for(var O=P=null,C=_,I=_=0,M=null,L=w.next();C!==null&&!L.done;I++,L=w.next()){C.index>I?(M=C,C=null):M=C.sibling;var N=f(b,C,L.value,T);if(N===null){C===null&&(C=M);break}t&&C&&N.alternate===null&&e(b,C),_=s(N,_,I),O===null?P=N:O.sibling=N,O=N,C=M}if(L.done)return n(b,C),Ft&&Yh(b,I),P;if(C===null){for(;!L.done;I++,L=w.next())L=d(b,L.value,T),L!==null&&(_=s(L,_,I),O===null?P=L:O.sibling=L,O=L);return Ft&&Yh(b,I),P}for(C=r(b,C);!L.done;I++,L=w.next())L=p(C,b,I,L.value,T),L!==null&&(t&&L.alternate!==null&&C.delete(L.key===null?I:L.key),_=s(L,_,I),O===null?P=L:O.sibling=L,O=L);return t&&C.forEach(function(F){return e(b,F)}),Ft&&Yh(b,I),P}function v(b,_,w,T){if(typeof w=="object"&&w!==null&&w.type===Wp&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Wx:e:{for(var P=w.key,O=_;O!==null;){if(O.key===P){if(P=w.type,P===Wp){if(O.tag===7){n(b,O.sibling),_=i(O,w.props.children),_.return=b,b=_;break e}}else if(O.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Gc&&dB(P)===O.type){n(b,O.sibling),_=i(O,w.props),_.ref=bv(b,O,w),_.return=b,b=_;break e}n(b,O);break}else e(b,O);O=O.sibling}w.type===Wp?(_=Nf(w.props.children,b.mode,T,w.key),_.return=b,b=_):(T=ZA(w.type,w.key,w.props,null,b.mode,T),T.ref=bv(b,_,w),T.return=b,b=T)}return a(b);case Hp:e:{for(O=w.key;_!==null;){if(_.key===O)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){n(b,_.sibling),_=i(_,w.children||[]),_.return=b,b=_;break e}else{n(b,_);break}else e(b,_);_=_.sibling}_=yI(w,b.mode,T),_.return=b,b=_}return a(b);case Gc:return O=w._init,v(b,_,O(w._payload),T)}if(jv(w))return g(b,_,w,T);if(pv(w))return y(b,_,w,T);nA(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(n(b,_.sibling),_=i(_,w),_.return=b,b=_):(n(b,_),_=gI(w,b.mode,T),_.return=b,b=_),a(b)):n(b,_)}return v}var sy=TH(!0),PH=TH(!1),gS=kh(null),yS=null,Zp=null,bN=null;function wN(){bN=Zp=yS=null}function _N(t){var e=gS.current;Ot(gS),t._currentValue=e}function oR(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function wm(t,e){yS=t,bN=Zp=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Di=!0),t.firstContext=null)}function ia(t){var e=t._currentValue;if(bN!==t)if(t={context:t,memoizedValue:e,next:null},Zp===null){if(yS===null)throw Error(J(308));Zp=t,yS.dependencies={lanes:0,firstContext:t}}else Zp=Zp.next=t;return e}var ud=null;function xN(t){ud===null?ud=[t]:ud.push(t)}function CH(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,xN(e)):(n.next=i.next,i.next=n),e.interleaved=n,cc(t,r)}function cc(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Kc=!1;function AN(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IH(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function rh(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ge&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,cc(t,n)}return i=r.interleaved,i===null?(e.next=e,xN(r)):(e.next=i.next,i.next=e),r.interleaved=e,cc(t,n)}function KA(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lN(t,n)}}function fB(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function vS(t,e,n,r){var i=t.updateQueue;Kc=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?s=c:a.next=c,a=l;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;a=0,u=c=l=null,o=s;do{var f=o.lane,p=o.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,y=o;switch(f=e,p=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=qt({},d,f);break e;case 2:Kc=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,a|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Gf|=a,t.lanes=a,t.memoizedState=d}}function pB(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(J(191,i));i.call(r)}}}var j_={},Mo=kh(j_),Q0=kh(j_),J0=kh(j_);function hd(t){if(t===j_)throw Error(J(174));return t}function EN(t,e){switch(St(J0,e),St(Q0,t),St(Mo,j_),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$k(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$k(e,t)}Ot(Mo),St(Mo,e)}function ay(){Ot(Mo),Ot(Q0),Ot(J0)}function kH(t){hd(J0.current);var e=hd(Mo.current),n=$k(e,t.type);e!==n&&(St(Q0,t),St(Mo,n))}function SN(t){Q0.current===t&&(Ot(Mo),Ot(Q0))}var Ht=kh(0);function bS(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var uI=[];function TN(){for(var t=0;t<uI.length;t++)uI[t]._workInProgressVersionPrimary=null;uI.length=0}var qA=Tc.ReactCurrentDispatcher,hI=Tc.ReactCurrentBatchConfig,Wf=0,Gt=null,Mn=null,tr=null,wS=!1,x0=!1,Z0=0,rre=0;function Or(){throw Error(J(321))}function PN(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$a(t[n],e[n]))return!1;return!0}function CN(t,e,n,r,i,s){if(Wf=s,Gt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qA.current=t===null||t.memoizedState===null?ore:lre,t=n(r,i),x0){s=0;do{if(x0=!1,Z0=0,25<=s)throw Error(J(301));s+=1,tr=Mn=null,e.updateQueue=null,qA.current=cre,t=n(r,i)}while(x0)}if(qA.current=_S,e=Mn!==null&&Mn.next!==null,Wf=0,tr=Mn=Gt=null,wS=!1,e)throw Error(J(300));return t}function IN(){var t=Z0!==0;return Z0=0,t}function ro(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tr===null?Gt.memoizedState=tr=t:tr=tr.next=t,tr}function sa(){if(Mn===null){var t=Gt.alternate;t=t!==null?t.memoizedState:null}else t=Mn.next;var e=tr===null?Gt.memoizedState:tr.next;if(e!==null)tr=e,Mn=t;else{if(t===null)throw Error(J(310));Mn=t,t={memoizedState:Mn.memoizedState,baseState:Mn.baseState,baseQueue:Mn.baseQueue,queue:Mn.queue,next:null},tr===null?Gt.memoizedState=tr=t:tr=tr.next=t}return tr}function eb(t,e){return typeof e=="function"?e(t):e}function dI(t){var e=sa(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=Mn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,l=null,c=s;do{var u=c.lane;if((Wf&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=d,a=r):l=l.next=d,Gt.lanes|=u,Gf|=u}c=c.next}while(c!==null&&c!==s);l===null?a=r:l.next=o,$a(r,e.memoizedState)||(Di=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Gt.lanes|=s,Gf|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fI(t){var e=sa(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);$a(s,e.memoizedState)||(Di=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function RH(){}function OH(t,e){var n=Gt,r=sa(),i=e(),s=!$a(r.memoizedState,i);if(s&&(r.memoizedState=i,Di=!0),r=r.queue,kN(NH.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||tr!==null&&tr.memoizedState.tag&1){if(n.flags|=2048,tb(9,MH.bind(null,n,r,i,e),void 0,null),rr===null)throw Error(J(349));Wf&30||DH(n,e,i)}return i}function DH(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Gt.updateQueue,e===null?(e={lastEffect:null,stores:null},Gt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function MH(t,e,n,r){e.value=n,e.getSnapshot=r,LH(e)&&jH(t)}function NH(t,e,n){return n(function(){LH(e)&&jH(t)})}function LH(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$a(t,n)}catch{return!0}}function jH(t){var e=cc(t,1);e!==null&&Va(e,t,1,-1)}function mB(t){var e=ro();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eb,lastRenderedState:t},e.queue=t,t=t.dispatch=are.bind(null,Gt,t),[e.memoizedState,t]}function tb(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Gt.updateQueue,e===null?(e={lastEffect:null,stores:null},Gt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function FH(){return sa().memoizedState}function XA(t,e,n,r){var i=ro();Gt.flags|=t,i.memoizedState=tb(1|e,n,void 0,r===void 0?null:r)}function OT(t,e,n,r){var i=sa();r=r===void 0?null:r;var s=void 0;if(Mn!==null){var a=Mn.memoizedState;if(s=a.destroy,r!==null&&PN(r,a.deps)){i.memoizedState=tb(e,n,s,r);return}}Gt.flags|=t,i.memoizedState=tb(1|e,n,s,r)}function gB(t,e){return XA(8390656,8,t,e)}function kN(t,e){return OT(2048,8,t,e)}function VH(t,e){return OT(4,2,t,e)}function BH(t,e){return OT(4,4,t,e)}function $H(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function UH(t,e,n){return n=n!=null?n.concat([t]):null,OT(4,4,$H.bind(null,e,t),n)}function RN(){}function zH(t,e){var n=sa();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&PN(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function HH(t,e){var n=sa();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&PN(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function WH(t,e,n){return Wf&21?($a(n,e)||(n=Yz(),Gt.lanes|=n,Gf|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Di=!0),t.memoizedState=n)}function ire(t,e){var n=rt;rt=n!==0&&4>n?n:4,t(!0);var r=hI.transition;hI.transition={};try{t(!1),e()}finally{rt=n,hI.transition=r}}function GH(){return sa().memoizedState}function sre(t,e,n){var r=sh(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},KH(t))qH(e,n);else if(n=CH(t,e,n,r),n!==null){var i=di();Va(n,t,r,i),XH(n,e,r)}}function are(t,e,n){var r=sh(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(KH(t))qH(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,$a(o,a)){var l=e.interleaved;l===null?(i.next=i,xN(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=CH(t,e,i,r),n!==null&&(i=di(),Va(n,t,r,i),XH(n,e,r))}}function KH(t){var e=t.alternate;return t===Gt||e!==null&&e===Gt}function qH(t,e){x0=wS=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function XH(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lN(t,n)}}var _S={readContext:ia,useCallback:Or,useContext:Or,useEffect:Or,useImperativeHandle:Or,useInsertionEffect:Or,useLayoutEffect:Or,useMemo:Or,useReducer:Or,useRef:Or,useState:Or,useDebugValue:Or,useDeferredValue:Or,useTransition:Or,useMutableSource:Or,useSyncExternalStore:Or,useId:Or,unstable_isNewReconciler:!1},ore={readContext:ia,useCallback:function(t,e){return ro().memoizedState=[t,e===void 0?null:e],t},useContext:ia,useEffect:gB,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,XA(4194308,4,$H.bind(null,e,t),n)},useLayoutEffect:function(t,e){return XA(4194308,4,t,e)},useInsertionEffect:function(t,e){return XA(4,2,t,e)},useMemo:function(t,e){var n=ro();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ro();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=sre.bind(null,Gt,t),[r.memoizedState,t]},useRef:function(t){var e=ro();return t={current:t},e.memoizedState=t},useState:mB,useDebugValue:RN,useDeferredValue:function(t){return ro().memoizedState=t},useTransition:function(){var t=mB(!1),e=t[0];return t=ire.bind(null,t[1]),ro().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Gt,i=ro();if(Ft){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),rr===null)throw Error(J(349));Wf&30||DH(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,gB(NH.bind(null,r,s,t),[t]),r.flags|=2048,tb(9,MH.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ro(),e=rr.identifierPrefix;if(Ft){var n=ql,r=Kl;n=(r&~(1<<32-Fa(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Z0++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=rre++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lre={readContext:ia,useCallback:zH,useContext:ia,useEffect:kN,useImperativeHandle:UH,useInsertionEffect:VH,useLayoutEffect:BH,useMemo:HH,useReducer:dI,useRef:FH,useState:function(){return dI(eb)},useDebugValue:RN,useDeferredValue:function(t){var e=sa();return WH(e,Mn.memoizedState,t)},useTransition:function(){var t=dI(eb)[0],e=sa().memoizedState;return[t,e]},useMutableSource:RH,useSyncExternalStore:OH,useId:GH,unstable_isNewReconciler:!1},cre={readContext:ia,useCallback:zH,useContext:ia,useEffect:kN,useImperativeHandle:UH,useInsertionEffect:VH,useLayoutEffect:BH,useMemo:HH,useReducer:fI,useRef:FH,useState:function(){return fI(eb)},useDebugValue:RN,useDeferredValue:function(t){var e=sa();return Mn===null?e.memoizedState=t:WH(e,Mn.memoizedState,t)},useTransition:function(){var t=fI(eb)[0],e=sa().memoizedState;return[t,e]},useMutableSource:RH,useSyncExternalStore:OH,useId:GH,unstable_isNewReconciler:!1};function ya(t,e){if(t&&t.defaultProps){e=qt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function lR(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:qt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var DT={isMounted:function(t){return(t=t._reactInternals)?up(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=di(),i=sh(t),s=Zl(r,i);s.payload=e,n!=null&&(s.callback=n),e=rh(t,s,i),e!==null&&(Va(e,t,i,r),KA(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=di(),i=sh(t),s=Zl(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=rh(t,s,i),e!==null&&(Va(e,t,i,r),KA(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=di(),r=sh(t),i=Zl(n,r);i.tag=2,e!=null&&(i.callback=e),e=rh(t,i,r),e!==null&&(Va(e,t,r,n),KA(e,t,r))}};function yB(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!K0(n,r)||!K0(i,s):!0}function YH(t,e,n){var r=!1,i=ph,s=e.contextType;return typeof s=="object"&&s!==null?s=ia(s):(i=Fi(e)?zf:Xr.current,r=e.contextTypes,s=(r=r!=null)?ry(t,i):ph),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=DT,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function vB(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&DT.enqueueReplaceState(e,e.state,null)}function cR(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},AN(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ia(s):(s=Fi(e)?zf:Xr.current,i.context=ry(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(lR(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&DT.enqueueReplaceState(i,i.state,null),vS(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function oy(t,e){try{var n="",r=e;do n+=jte(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function pI(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function uR(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ure=typeof WeakMap=="function"?WeakMap:Map;function QH(t,e,n){n=Zl(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){AS||(AS=!0,wR=r),uR(t,e)},n}function JH(t,e,n){n=Zl(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){uR(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){uR(t,e),typeof r!="function"&&(ih===null?ih=new Set([this]):ih.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function bB(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ure;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Ere.bind(null,t,e,n),e.then(t,t))}function wB(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _B(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zl(-1,1),e.tag=2,rh(n,e,1))),n.lanes|=1),t)}var hre=Tc.ReactCurrentOwner,Di=!1;function li(t,e,n,r){e.child=t===null?PH(e,null,n,r):sy(e,t.child,n,r)}function xB(t,e,n,r,i){n=n.render;var s=e.ref;return wm(e,i),r=CN(t,e,n,r,s,i),n=IN(),t!==null&&!Di?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,uc(t,e,i)):(Ft&&n&&gN(e),e.flags|=1,li(t,e,r,i),e.child)}function AB(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!VN(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,ZH(t,e,s,r,i)):(t=ZA(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:K0,n(a,r)&&t.ref===e.ref)return uc(t,e,i)}return e.flags|=1,t=ah(s,r),t.ref=e.ref,t.return=e,e.child=t}function ZH(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(K0(s,r)&&t.ref===e.ref)if(Di=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Di=!0);else return e.lanes=t.lanes,uc(t,e,i)}return hR(t,e,n,r,i)}function eW(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(tm,ls),ls|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,St(tm,ls),ls|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,St(tm,ls),ls|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,St(tm,ls),ls|=r;return li(t,e,i,n),e.child}function tW(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hR(t,e,n,r,i){var s=Fi(n)?zf:Xr.current;return s=ry(e,s),wm(e,i),n=CN(t,e,n,r,s,i),r=IN(),t!==null&&!Di?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,uc(t,e,i)):(Ft&&r&&gN(e),e.flags|=1,li(t,e,n,i),e.child)}function EB(t,e,n,r,i){if(Fi(n)){var s=!0;fS(e)}else s=!1;if(wm(e,i),e.stateNode===null)YA(t,e),YH(e,n,r),cR(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=ia(c):(c=Fi(n)?zf:Xr.current,c=ry(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==c)&&vB(e,a,r,c),Kc=!1;var f=e.memoizedState;a.state=f,vS(e,r,a,i),l=e.memoizedState,o!==r||f!==l||ji.current||Kc?(typeof u=="function"&&(lR(e,n,u,r),l=e.memoizedState),(o=Kc||yB(e,n,o,r,f,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,IH(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:ya(e.type,o),a.props=c,d=e.pendingProps,f=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=ia(l):(l=Fi(n)?zf:Xr.current,l=ry(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||f!==l)&&vB(e,a,r,l),Kc=!1,f=e.memoizedState,a.state=f,vS(e,r,a,i);var g=e.memoizedState;o!==d||f!==g||ji.current||Kc?(typeof p=="function"&&(lR(e,n,p,r),g=e.memoizedState),(c=Kc||yB(e,n,c,r,f,g,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),a.props=r,a.state=g,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return dR(t,e,n,r,s,i)}function dR(t,e,n,r,i,s){tW(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&cB(e,n,!1),uc(t,e,s);r=e.stateNode,hre.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=sy(e,t.child,null,s),e.child=sy(e,null,o,s)):li(t,e,o,s),e.memoizedState=r.state,i&&cB(e,n,!0),e.child}function nW(t){var e=t.stateNode;e.pendingContext?lB(t,e.pendingContext,e.pendingContext!==e.context):e.context&&lB(t,e.context,!1),EN(t,e.containerInfo)}function SB(t,e,n,r,i){return iy(),vN(i),e.flags|=256,li(t,e,n,r),e.child}var fR={dehydrated:null,treeContext:null,retryLane:0};function pR(t){return{baseLanes:t,cachePool:null,transitions:null}}function rW(t,e,n){var r=e.pendingProps,i=Ht.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),St(Ht,i&1),t===null)return aR(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=LT(a,r,0,null),t=Nf(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=pR(n),e.memoizedState=fR,t):ON(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return dre(t,e,a,r,o,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ah(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=ah(o,s):(s=Nf(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?pR(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=fR,r}return s=t.child,t=s.sibling,r=ah(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ON(t,e){return e=LT({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function rA(t,e,n,r){return r!==null&&vN(r),sy(e,t.child,null,n),t=ON(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dre(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=pI(Error(J(422))),rA(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=LT({mode:"visible",children:r.children},i,0,null),s=Nf(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&sy(e,t.child,null,a),e.child.memoizedState=pR(a),e.memoizedState=fR,s);if(!(e.mode&1))return rA(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(J(419)),r=pI(s,r,void 0),rA(t,e,a,r)}if(o=(a&t.childLanes)!==0,Di||o){if(r=rr,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,cc(t,i),Va(r,t,i,-1))}return FN(),r=pI(Error(J(421))),rA(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Sre.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ps=nh(i.nextSibling),ys=e,Ft=!0,Ra=null,t!==null&&(Gs[Ks++]=Kl,Gs[Ks++]=ql,Gs[Ks++]=Hf,Kl=t.id,ql=t.overflow,Hf=e),e=ON(e,r.children),e.flags|=4096,e)}function TB(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),oR(t.return,e,n)}function mI(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function iW(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(li(t,e,r.children,n),r=Ht.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&TB(t,n,e);else if(t.tag===19)TB(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(St(Ht,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&bS(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),mI(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&bS(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}mI(e,!0,n,null,s);break;case"together":mI(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function YA(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function uc(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Gf|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=ah(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ah(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function fre(t,e,n){switch(e.tag){case 3:nW(e),iy();break;case 5:kH(e);break;case 1:Fi(e.type)&&fS(e);break;case 4:EN(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;St(gS,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(St(Ht,Ht.current&1),e.flags|=128,null):n&e.child.childLanes?rW(t,e,n):(St(Ht,Ht.current&1),t=uc(t,e,n),t!==null?t.sibling:null);St(Ht,Ht.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return iW(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),St(Ht,Ht.current),r)break;return null;case 22:case 23:return e.lanes=0,eW(t,e,n)}return uc(t,e,n)}var sW,mR,aW,oW;sW=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mR=function(){};aW=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,hd(Mo.current);var s=null;switch(n){case"input":i=jk(t,i),r=jk(t,r),s=[];break;case"select":i=qt({},i,{value:void 0}),r=qt({},r,{value:void 0}),s=[];break;case"textarea":i=Bk(t,i),r=Bk(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=hS)}Uk(n,r);var a;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var o=i[c];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(B0.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(o=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(B0.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ct("scroll",t),s||o===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};oW=function(t,e,n,r){n!==r&&(e.flags|=4)};function wv(t,e){if(!Ft)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Dr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function pre(t,e,n){var r=e.pendingProps;switch(yN(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dr(e),null;case 1:return Fi(e.type)&&dS(),Dr(e),null;case 3:return r=e.stateNode,ay(),Ot(ji),Ot(Xr),TN(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(tA(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ra!==null&&(AR(Ra),Ra=null))),mR(t,e),Dr(e),null;case 5:SN(e);var i=hd(J0.current);if(n=e.type,t!==null&&e.stateNode!=null)aW(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return Dr(e),null}if(t=hd(Mo.current),tA(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Io]=e,r[Y0]=s,t=(e.mode&1)!==0,n){case"dialog":Ct("cancel",r),Ct("close",r);break;case"iframe":case"object":case"embed":Ct("load",r);break;case"video":case"audio":for(i=0;i<Vv.length;i++)Ct(Vv[i],r);break;case"source":Ct("error",r);break;case"img":case"image":case"link":Ct("error",r),Ct("load",r);break;case"details":Ct("toggle",r);break;case"input":NV(r,s),Ct("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ct("invalid",r);break;case"textarea":jV(r,s),Ct("invalid",r)}Uk(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&eA(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&eA(r.textContent,o,t),i=["children",""+o]):B0.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Ct("scroll",r)}switch(n){case"input":Gx(r),LV(r,s,!0);break;case"textarea":Gx(r),FV(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=hS)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Nz(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Io]=e,t[Y0]=r,sW(t,e,!1,!1),e.stateNode=t;e:{switch(a=zk(n,r),n){case"dialog":Ct("cancel",t),Ct("close",t),i=r;break;case"iframe":case"object":case"embed":Ct("load",t),i=r;break;case"video":case"audio":for(i=0;i<Vv.length;i++)Ct(Vv[i],t);i=r;break;case"source":Ct("error",t),i=r;break;case"img":case"image":case"link":Ct("error",t),Ct("load",t),i=r;break;case"details":Ct("toggle",t),i=r;break;case"input":NV(t,r),i=jk(t,r),Ct("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=qt({},r,{value:void 0}),Ct("invalid",t);break;case"textarea":jV(t,r),i=Bk(t,r),Ct("invalid",t);break;default:i=r}Uk(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?Fz(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Lz(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&$0(t,l):typeof l=="number"&&$0(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(B0.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ct("scroll",t):l!=null&&nN(t,s,l,a))}switch(n){case"input":Gx(t),LV(t,r,!1);break;case"textarea":Gx(t),FV(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fh(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?gm(t,!!r.multiple,s,!1):r.defaultValue!=null&&gm(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=hS)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dr(e),null;case 6:if(t&&e.stateNode!=null)oW(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(n=hd(J0.current),hd(Mo.current),tA(e)){if(r=e.stateNode,n=e.memoizedProps,r[Io]=e,(s=r.nodeValue!==n)&&(t=ys,t!==null))switch(t.tag){case 3:eA(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&eA(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Io]=e,e.stateNode=r}return Dr(e),null;case 13:if(Ot(Ht),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ft&&ps!==null&&e.mode&1&&!(e.flags&128))SH(),iy(),e.flags|=98560,s=!1;else if(s=tA(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(J(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(J(317));s[Io]=e}else iy(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dr(e),s=!1}else Ra!==null&&(AR(Ra),Ra=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ht.current&1?Ln===0&&(Ln=3):FN())),e.updateQueue!==null&&(e.flags|=4),Dr(e),null);case 4:return ay(),mR(t,e),t===null&&q0(e.stateNode.containerInfo),Dr(e),null;case 10:return _N(e.type._context),Dr(e),null;case 17:return Fi(e.type)&&dS(),Dr(e),null;case 19:if(Ot(Ht),s=e.memoizedState,s===null)return Dr(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)wv(s,!1);else{if(Ln!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=bS(t),a!==null){for(e.flags|=128,wv(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return St(Ht,Ht.current&1|2),e.child}t=t.sibling}s.tail!==null&&fn()>ly&&(e.flags|=128,r=!0,wv(s,!1),e.lanes=4194304)}else{if(!r)if(t=bS(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wv(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Ft)return Dr(e),null}else 2*fn()-s.renderingStartTime>ly&&n!==1073741824&&(e.flags|=128,r=!0,wv(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=fn(),e.sibling=null,n=Ht.current,St(Ht,r?n&1|2:n&1),e):(Dr(e),null);case 22:case 23:return jN(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ls&1073741824&&(Dr(e),e.subtreeFlags&6&&(e.flags|=8192)):Dr(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function mre(t,e){switch(yN(e),e.tag){case 1:return Fi(e.type)&&dS(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ay(),Ot(ji),Ot(Xr),TN(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return SN(e),null;case 13:if(Ot(Ht),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));iy()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ot(Ht),null;case 4:return ay(),null;case 10:return _N(e.type._context),null;case 22:case 23:return jN(),null;case 24:return null;default:return null}}var iA=!1,Wr=!1,gre=typeof WeakSet=="function"?WeakSet:Set,ce=null;function em(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){sn(t,e,r)}else n.current=null}function gR(t,e,n){try{n()}catch(r){sn(t,e,r)}}var PB=!1;function yre(t,e){if(Zk=lS,t=dH(),mN(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(o=a+i),d!==s||r!==0&&d.nodeType!==3||(l=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===i&&(o=a),f===s&&++u===r&&(l=a),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(eR={focusedElem:t,selectionRange:n},lS=!1,ce=e;ce!==null;)if(e=ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ce=t;else for(;ce!==null;){e=ce;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,v=g.memoizedState,b=e.stateNode,_=b.getSnapshotBeforeUpdate(e.elementType===e.type?y:ya(e.type,y),v);b.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(T){sn(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,ce=t;break}ce=e.return}return g=PB,PB=!1,g}function A0(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&gR(e,n,s)}i=i.next}while(i!==r)}}function MT(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function yR(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lW(t){var e=t.alternate;e!==null&&(t.alternate=null,lW(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Io],delete e[Y0],delete e[rR],delete e[Zne],delete e[ere])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function cW(t){return t.tag===5||t.tag===3||t.tag===4}function CB(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cW(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vR(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=hS));else if(r!==4&&(t=t.child,t!==null))for(vR(t,e,n),t=t.sibling;t!==null;)vR(t,e,n),t=t.sibling}function bR(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(bR(t,e,n),t=t.sibling;t!==null;)bR(t,e,n),t=t.sibling}var yr=null,ka=!1;function Vc(t,e,n){for(n=n.child;n!==null;)uW(t,e,n),n=n.sibling}function uW(t,e,n){if(Do&&typeof Do.onCommitFiberUnmount=="function")try{Do.onCommitFiberUnmount(TT,n)}catch{}switch(n.tag){case 5:Wr||em(n,e);case 6:var r=yr,i=ka;yr=null,Vc(t,e,n),yr=r,ka=i,yr!==null&&(ka?(t=yr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):yr.removeChild(n.stateNode));break;case 18:yr!==null&&(ka?(t=yr,n=n.stateNode,t.nodeType===8?lI(t.parentNode,n):t.nodeType===1&&lI(t,n),W0(t)):lI(yr,n.stateNode));break;case 4:r=yr,i=ka,yr=n.stateNode.containerInfo,ka=!0,Vc(t,e,n),yr=r,ka=i;break;case 0:case 11:case 14:case 15:if(!Wr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&gR(n,e,a),i=i.next}while(i!==r)}Vc(t,e,n);break;case 1:if(!Wr&&(em(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){sn(n,e,o)}Vc(t,e,n);break;case 21:Vc(t,e,n);break;case 22:n.mode&1?(Wr=(r=Wr)||n.memoizedState!==null,Vc(t,e,n),Wr=r):Vc(t,e,n);break;default:Vc(t,e,n)}}function IB(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new gre),e.forEach(function(r){var i=Tre.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function fa(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:yr=o.stateNode,ka=!1;break e;case 3:yr=o.stateNode.containerInfo,ka=!0;break e;case 4:yr=o.stateNode.containerInfo,ka=!0;break e}o=o.return}if(yr===null)throw Error(J(160));uW(s,a,i),yr=null,ka=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){sn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hW(e,t),e=e.sibling}function hW(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fa(e,t),Ja(t),r&4){try{A0(3,t,t.return),MT(3,t)}catch(y){sn(t,t.return,y)}try{A0(5,t,t.return)}catch(y){sn(t,t.return,y)}}break;case 1:fa(e,t),Ja(t),r&512&&n!==null&&em(n,n.return);break;case 5:if(fa(e,t),Ja(t),r&512&&n!==null&&em(n,n.return),t.flags&32){var i=t.stateNode;try{$0(i,"")}catch(y){sn(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Dz(i,s),zk(o,a);var c=zk(o,s);for(a=0;a<l.length;a+=2){var u=l[a],d=l[a+1];u==="style"?Fz(i,d):u==="dangerouslySetInnerHTML"?Lz(i,d):u==="children"?$0(i,d):nN(i,u,d,c)}switch(o){case"input":Fk(i,s);break;case"textarea":Mz(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?gm(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?gm(i,!!s.multiple,s.defaultValue,!0):gm(i,!!s.multiple,s.multiple?[]:"",!1))}i[Y0]=s}catch(y){sn(t,t.return,y)}}break;case 6:if(fa(e,t),Ja(t),r&4){if(t.stateNode===null)throw Error(J(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){sn(t,t.return,y)}}break;case 3:if(fa(e,t),Ja(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{W0(e.containerInfo)}catch(y){sn(t,t.return,y)}break;case 4:fa(e,t),Ja(t);break;case 13:fa(e,t),Ja(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(NN=fn())),r&4&&IB(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Wr=(c=Wr)||u,fa(e,t),Wr=c):fa(e,t),Ja(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ce=t,u=t.child;u!==null;){for(d=ce=u;ce!==null;){switch(f=ce,p=f.child,f.tag){case 0:case 11:case 14:case 15:A0(4,f,f.return);break;case 1:em(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){sn(r,n,y)}}break;case 5:em(f,f.return);break;case 22:if(f.memoizedState!==null){RB(d);continue}}p!==null?(p.return=f,ce=p):RB(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=jz("display",a))}catch(y){sn(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){sn(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:fa(e,t),Ja(t),r&4&&IB(t);break;case 21:break;default:fa(e,t),Ja(t)}}function Ja(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(cW(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&($0(i,""),r.flags&=-33);var s=CB(t);bR(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=CB(t);vR(t,o,a);break;default:throw Error(J(161))}}catch(l){sn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vre(t,e,n){ce=t,dW(t)}function dW(t,e,n){for(var r=(t.mode&1)!==0;ce!==null;){var i=ce,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||iA;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Wr;o=iA;var c=Wr;if(iA=a,(Wr=l)&&!c)for(ce=i;ce!==null;)a=ce,l=a.child,a.tag===22&&a.memoizedState!==null?OB(i):l!==null?(l.return=a,ce=l):OB(i);for(;s!==null;)ce=s,dW(s),s=s.sibling;ce=i,iA=o,Wr=c}kB(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ce=s):kB(t)}}function kB(t){for(;ce!==null;){var e=ce;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wr||MT(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Wr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ya(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&pB(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}pB(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&W0(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}Wr||e.flags&512&&yR(e)}catch(f){sn(e,e.return,f)}}if(e===t){ce=null;break}if(n=e.sibling,n!==null){n.return=e.return,ce=n;break}ce=e.return}}function RB(t){for(;ce!==null;){var e=ce;if(e===t){ce=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ce=n;break}ce=e.return}}function OB(t){for(;ce!==null;){var e=ce;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{MT(4,e)}catch(l){sn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){sn(e,i,l)}}var s=e.return;try{yR(e)}catch(l){sn(e,s,l)}break;case 5:var a=e.return;try{yR(e)}catch(l){sn(e,a,l)}}}catch(l){sn(e,e.return,l)}if(e===t){ce=null;break}var o=e.sibling;if(o!==null){o.return=e.return,ce=o;break}ce=e.return}}var bre=Math.ceil,xS=Tc.ReactCurrentDispatcher,DN=Tc.ReactCurrentOwner,ea=Tc.ReactCurrentBatchConfig,Ge=0,rr=null,xn=null,Tr=0,ls=0,tm=kh(0),Ln=0,nb=null,Gf=0,NT=0,MN=0,E0=null,Ri=null,NN=0,ly=1/0,sl=null,AS=!1,wR=null,ih=null,sA=!1,Yu=null,ES=0,S0=0,_R=null,QA=-1,JA=0;function di(){return Ge&6?fn():QA!==-1?QA:QA=fn()}function sh(t){return t.mode&1?Ge&2&&Tr!==0?Tr&-Tr:nre.transition!==null?(JA===0&&(JA=Yz()),JA):(t=rt,t!==0||(t=window.event,t=t===void 0?16:rH(t.type)),t):1}function Va(t,e,n,r){if(50<S0)throw S0=0,_R=null,Error(J(185));M_(t,n,r),(!(Ge&2)||t!==rr)&&(t===rr&&(!(Ge&2)&&(NT|=n),Ln===4&&Qc(t,Tr)),Vi(t,r),n===1&&Ge===0&&!(e.mode&1)&&(ly=fn()+500,RT&&Rh()))}function Vi(t,e){var n=t.callbackNode;nne(t,e);var r=oS(t,t===rr?Tr:0);if(r===0)n!==null&&$V(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$V(n),e===1)t.tag===0?tre(DB.bind(null,t)):xH(DB.bind(null,t)),Qne(function(){!(Ge&6)&&Rh()}),n=null;else{switch(Qz(r)){case 1:n=oN;break;case 4:n=qz;break;case 16:n=aS;break;case 536870912:n=Xz;break;default:n=aS}n=wW(n,fW.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function fW(t,e){if(QA=-1,JA=0,Ge&6)throw Error(J(327));var n=t.callbackNode;if(_m()&&t.callbackNode!==n)return null;var r=oS(t,t===rr?Tr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=SS(t,r);else{e=r;var i=Ge;Ge|=2;var s=mW();(rr!==t||Tr!==e)&&(sl=null,ly=fn()+500,Mf(t,e));do try{xre();break}catch(o){pW(t,o)}while(!0);wN(),xS.current=s,Ge=i,xn!==null?e=0:(rr=null,Tr=0,e=Ln)}if(e!==0){if(e===2&&(i=qk(t),i!==0&&(r=i,e=xR(t,i))),e===1)throw n=nb,Mf(t,0),Qc(t,r),Vi(t,fn()),n;if(e===6)Qc(t,r);else{if(i=t.current.alternate,!(r&30)&&!wre(i)&&(e=SS(t,r),e===2&&(s=qk(t),s!==0&&(r=s,e=xR(t,s))),e===1))throw n=nb,Mf(t,0),Qc(t,r),Vi(t,fn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:Qh(t,Ri,sl);break;case 3:if(Qc(t,r),(r&130023424)===r&&(e=NN+500-fn(),10<e)){if(oS(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){di(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=nR(Qh.bind(null,t,Ri,sl),e);break}Qh(t,Ri,sl);break;case 4:if(Qc(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Fa(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=fn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bre(r/1960))-r,10<r){t.timeoutHandle=nR(Qh.bind(null,t,Ri,sl),r);break}Qh(t,Ri,sl);break;case 5:Qh(t,Ri,sl);break;default:throw Error(J(329))}}}return Vi(t,fn()),t.callbackNode===n?fW.bind(null,t):null}function xR(t,e){var n=E0;return t.current.memoizedState.isDehydrated&&(Mf(t,e).flags|=256),t=SS(t,e),t!==2&&(e=Ri,Ri=n,e!==null&&AR(e)),t}function AR(t){Ri===null?Ri=t:Ri.push.apply(Ri,t)}function wre(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!$a(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qc(t,e){for(e&=~MN,e&=~NT,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fa(e),r=1<<n;t[n]=-1,e&=~r}}function DB(t){if(Ge&6)throw Error(J(327));_m();var e=oS(t,0);if(!(e&1))return Vi(t,fn()),null;var n=SS(t,e);if(t.tag!==0&&n===2){var r=qk(t);r!==0&&(e=r,n=xR(t,r))}if(n===1)throw n=nb,Mf(t,0),Qc(t,e),Vi(t,fn()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Qh(t,Ri,sl),Vi(t,fn()),null}function LN(t,e){var n=Ge;Ge|=1;try{return t(e)}finally{Ge=n,Ge===0&&(ly=fn()+500,RT&&Rh())}}function Kf(t){Yu!==null&&Yu.tag===0&&!(Ge&6)&&_m();var e=Ge;Ge|=1;var n=ea.transition,r=rt;try{if(ea.transition=null,rt=1,t)return t()}finally{rt=r,ea.transition=n,Ge=e,!(Ge&6)&&Rh()}}function jN(){ls=tm.current,Ot(tm)}function Mf(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Yne(n)),xn!==null)for(n=xn.return;n!==null;){var r=n;switch(yN(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&dS();break;case 3:ay(),Ot(ji),Ot(Xr),TN();break;case 5:SN(r);break;case 4:ay();break;case 13:Ot(Ht);break;case 19:Ot(Ht);break;case 10:_N(r.type._context);break;case 22:case 23:jN()}n=n.return}if(rr=t,xn=t=ah(t.current,null),Tr=ls=e,Ln=0,nb=null,MN=NT=Gf=0,Ri=E0=null,ud!==null){for(e=0;e<ud.length;e++)if(n=ud[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}ud=null}return t}function pW(t,e){do{var n=xn;try{if(wN(),qA.current=_S,wS){for(var r=Gt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}wS=!1}if(Wf=0,tr=Mn=Gt=null,x0=!1,Z0=0,DN.current=null,n===null||n.return===null){Ln=1,nb=e,xn=null;break}e:{var s=t,a=n.return,o=n,l=e;if(e=Tr,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=o,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=wB(a);if(p!==null){p.flags&=-257,_B(p,a,o,s,e),p.mode&1&&bB(s,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if(!(e&1)){bB(s,c,e),FN();break e}l=Error(J(426))}}else if(Ft&&o.mode&1){var v=wB(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),_B(v,a,o,s,e),vN(oy(l,o));break e}}s=l=oy(l,o),Ln!==4&&(Ln=2),E0===null?E0=[s]:E0.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var b=QH(s,l,e);fB(s,b);break e;case 1:o=l;var _=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ih===null||!ih.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=JH(s,o,e);fB(s,T);break e}}s=s.return}while(s!==null)}yW(n)}catch(P){e=P,xn===n&&n!==null&&(xn=n=n.return);continue}break}while(!0)}function mW(){var t=xS.current;return xS.current=_S,t===null?_S:t}function FN(){(Ln===0||Ln===3||Ln===2)&&(Ln=4),rr===null||!(Gf&268435455)&&!(NT&268435455)||Qc(rr,Tr)}function SS(t,e){var n=Ge;Ge|=2;var r=mW();(rr!==t||Tr!==e)&&(sl=null,Mf(t,e));do try{_re();break}catch(i){pW(t,i)}while(!0);if(wN(),Ge=n,xS.current=r,xn!==null)throw Error(J(261));return rr=null,Tr=0,Ln}function _re(){for(;xn!==null;)gW(xn)}function xre(){for(;xn!==null&&!Kte();)gW(xn)}function gW(t){var e=bW(t.alternate,t,ls);t.memoizedProps=t.pendingProps,e===null?yW(t):xn=e,DN.current=null}function yW(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=mre(n,e),n!==null){n.flags&=32767,xn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ln=6,xn=null;return}}else if(n=pre(n,e,ls),n!==null){xn=n;return}if(e=e.sibling,e!==null){xn=e;return}xn=e=t}while(e!==null);Ln===0&&(Ln=5)}function Qh(t,e,n){var r=rt,i=ea.transition;try{ea.transition=null,rt=1,Are(t,e,n,r)}finally{ea.transition=i,rt=r}return null}function Are(t,e,n,r){do _m();while(Yu!==null);if(Ge&6)throw Error(J(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(rne(t,s),t===rr&&(xn=rr=null,Tr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sA||(sA=!0,wW(aS,function(){return _m(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ea.transition,ea.transition=null;var a=rt;rt=1;var o=Ge;Ge|=4,DN.current=null,yre(t,n),hW(n,t),zne(eR),lS=!!Zk,eR=Zk=null,t.current=n,vre(n),qte(),Ge=o,rt=a,ea.transition=s}else t.current=n;if(sA&&(sA=!1,Yu=t,ES=i),s=t.pendingLanes,s===0&&(ih=null),Qte(n.stateNode),Vi(t,fn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(AS)throw AS=!1,t=wR,wR=null,t;return ES&1&&t.tag!==0&&_m(),s=t.pendingLanes,s&1?t===_R?S0++:(S0=0,_R=t):S0=0,Rh(),null}function _m(){if(Yu!==null){var t=Qz(ES),e=ea.transition,n=rt;try{if(ea.transition=null,rt=16>t?16:t,Yu===null)var r=!1;else{if(t=Yu,Yu=null,ES=0,Ge&6)throw Error(J(331));var i=Ge;for(Ge|=4,ce=t.current;ce!==null;){var s=ce,a=s.child;if(ce.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(ce=c;ce!==null;){var u=ce;switch(u.tag){case 0:case 11:case 15:A0(8,u,s)}var d=u.child;if(d!==null)d.return=u,ce=d;else for(;ce!==null;){u=ce;var f=u.sibling,p=u.return;if(lW(u),u===c){ce=null;break}if(f!==null){f.return=p,ce=f;break}ce=p}}}var g=s.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}ce=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,ce=a;else e:for(;ce!==null;){if(s=ce,s.flags&2048)switch(s.tag){case 0:case 11:case 15:A0(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,ce=b;break e}ce=s.return}}var _=t.current;for(ce=_;ce!==null;){a=ce;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,ce=w;else e:for(a=_;ce!==null;){if(o=ce,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:MT(9,o)}}catch(P){sn(o,o.return,P)}if(o===a){ce=null;break e}var T=o.sibling;if(T!==null){T.return=o.return,ce=T;break e}ce=o.return}}if(Ge=i,Rh(),Do&&typeof Do.onPostCommitFiberRoot=="function")try{Do.onPostCommitFiberRoot(TT,t)}catch{}r=!0}return r}finally{rt=n,ea.transition=e}}return!1}function MB(t,e,n){e=oy(n,e),e=QH(t,e,1),t=rh(t,e,1),e=di(),t!==null&&(M_(t,1,e),Vi(t,e))}function sn(t,e,n){if(t.tag===3)MB(t,t,n);else for(;e!==null;){if(e.tag===3){MB(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ih===null||!ih.has(r))){t=oy(n,t),t=JH(e,t,1),e=rh(e,t,1),t=di(),e!==null&&(M_(e,1,t),Vi(e,t));break}}e=e.return}}function Ere(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=di(),t.pingedLanes|=t.suspendedLanes&n,rr===t&&(Tr&n)===n&&(Ln===4||Ln===3&&(Tr&130023424)===Tr&&500>fn()-NN?Mf(t,0):MN|=n),Vi(t,e)}function vW(t,e){e===0&&(t.mode&1?(e=Xx,Xx<<=1,!(Xx&130023424)&&(Xx=4194304)):e=1);var n=di();t=cc(t,e),t!==null&&(M_(t,e,n),Vi(t,n))}function Sre(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),vW(t,n)}function Tre(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),vW(t,n)}var bW;bW=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ji.current)Di=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Di=!1,fre(t,e,n);Di=!!(t.flags&131072)}else Di=!1,Ft&&e.flags&1048576&&AH(e,mS,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;YA(t,e),t=e.pendingProps;var i=ry(e,Xr.current);wm(e,n),i=CN(null,e,r,t,i,n);var s=IN();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fi(r)?(s=!0,fS(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,AN(e),i.updater=DT,e.stateNode=i,i._reactInternals=e,cR(e,r,t,n),e=dR(null,e,r,!0,s,n)):(e.tag=0,Ft&&s&&gN(e),li(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(YA(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Cre(r),t=ya(r,t),i){case 0:e=hR(null,e,r,t,n);break e;case 1:e=EB(null,e,r,t,n);break e;case 11:e=xB(null,e,r,t,n);break e;case 14:e=AB(null,e,r,ya(r.type,t),n);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ya(r,i),hR(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ya(r,i),EB(t,e,r,i,n);case 3:e:{if(nW(e),t===null)throw Error(J(387));r=e.pendingProps,s=e.memoizedState,i=s.element,IH(t,e),vS(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=oy(Error(J(423)),e),e=SB(t,e,r,n,i);break e}else if(r!==i){i=oy(Error(J(424)),e),e=SB(t,e,r,n,i);break e}else for(ps=nh(e.stateNode.containerInfo.firstChild),ys=e,Ft=!0,Ra=null,n=PH(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(iy(),r===i){e=uc(t,e,n);break e}li(t,e,r,n)}e=e.child}return e;case 5:return kH(e),t===null&&aR(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,tR(r,i)?a=null:s!==null&&tR(r,s)&&(e.flags|=32),tW(t,e),li(t,e,a,n),e.child;case 6:return t===null&&aR(e),null;case 13:return rW(t,e,n);case 4:return EN(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=sy(e,null,r,n):li(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ya(r,i),xB(t,e,r,i,n);case 7:return li(t,e,e.pendingProps,n),e.child;case 8:return li(t,e,e.pendingProps.children,n),e.child;case 12:return li(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,St(gS,r._currentValue),r._currentValue=a,s!==null)if($a(s.value,a)){if(s.children===i.children&&!ji.current){e=uc(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Zl(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),oR(s.return,n,e),o.lanes|=n;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(J(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),oR(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}li(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,wm(e,n),i=ia(i),r=r(i),e.flags|=1,li(t,e,r,n),e.child;case 14:return r=e.type,i=ya(r,e.pendingProps),i=ya(r.type,i),AB(t,e,r,i,n);case 15:return ZH(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ya(r,i),YA(t,e),e.tag=1,Fi(r)?(t=!0,fS(e)):t=!1,wm(e,n),YH(e,r,i),cR(e,r,i,n),dR(null,e,r,!0,t,n);case 19:return iW(t,e,n);case 22:return eW(t,e,n)}throw Error(J(156,e.tag))};function wW(t,e){return Kz(t,e)}function Pre(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ys(t,e,n,r){return new Pre(t,e,n,r)}function VN(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Cre(t){if(typeof t=="function")return VN(t)?1:0;if(t!=null){if(t=t.$$typeof,t===iN)return 11;if(t===sN)return 14}return 2}function ah(t,e){var n=t.alternate;return n===null?(n=Ys(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ZA(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")VN(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Wp:return Nf(n.children,i,s,e);case rN:a=8,i|=8;break;case Dk:return t=Ys(12,n,e,i|2),t.elementType=Dk,t.lanes=s,t;case Mk:return t=Ys(13,n,e,i),t.elementType=Mk,t.lanes=s,t;case Nk:return t=Ys(19,n,e,i),t.elementType=Nk,t.lanes=s,t;case kz:return LT(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Cz:a=10;break e;case Iz:a=9;break e;case iN:a=11;break e;case sN:a=14;break e;case Gc:a=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=Ys(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Nf(t,e,n,r){return t=Ys(7,t,r,e),t.lanes=n,t}function LT(t,e,n,r){return t=Ys(22,t,r,e),t.elementType=kz,t.lanes=n,t.stateNode={isHidden:!1},t}function gI(t,e,n){return t=Ys(6,t,null,e),t.lanes=n,t}function yI(t,e,n){return e=Ys(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ire(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=QC(0),this.expirationTimes=QC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=QC(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function BN(t,e,n,r,i,s,a,o,l){return t=new Ire(t,e,n,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ys(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},AN(s),t}function kre(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hp,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _W(t){if(!t)return ph;t=t._reactInternals;e:{if(up(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(Fi(n))return _H(t,n,e)}return e}function xW(t,e,n,r,i,s,a,o,l){return t=BN(n,r,!0,t,i,s,a,o,l),t.context=_W(null),n=t.current,r=di(),i=sh(n),s=Zl(r,i),s.callback=e??null,rh(n,s,i),t.current.lanes=i,M_(t,i,r),Vi(t,r),t}function jT(t,e,n,r){var i=e.current,s=di(),a=sh(i);return n=_W(n),e.context===null?e.context=n:e.pendingContext=n,e=Zl(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=rh(i,e,a),t!==null&&(Va(t,i,a,s),KA(t,i,a)),a}function TS(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function NB(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $N(t,e){NB(t,e),(t=t.alternate)&&NB(t,e)}function Rre(){return null}var AW=typeof reportError=="function"?reportError:function(t){console.error(t)};function UN(t){this._internalRoot=t}FT.prototype.render=UN.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));jT(t,e,null,null)};FT.prototype.unmount=UN.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Kf(function(){jT(null,t,null,null)}),e[lc]=null}};function FT(t){this._internalRoot=t}FT.prototype.unstable_scheduleHydration=function(t){if(t){var e=eH();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yc.length&&e!==0&&e<Yc[n].priority;n++);Yc.splice(n,0,t),n===0&&nH(t)}};function zN(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function VT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function LB(){}function Ore(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=TS(a);s.call(c)}}var a=xW(e,r,t,0,null,!1,!1,"",LB);return t._reactRootContainer=a,t[lc]=a.current,q0(t.nodeType===8?t.parentNode:t),Kf(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var c=TS(l);o.call(c)}}var l=BN(t,0,!1,null,null,!1,!1,"",LB);return t._reactRootContainer=l,t[lc]=l.current,q0(t.nodeType===8?t.parentNode:t),Kf(function(){jT(e,l,n,r)}),l}function BT(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=TS(a);o.call(l)}}jT(e,a,t,i)}else a=Ore(n,e,t,i,r);return TS(a)}Jz=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fv(e.pendingLanes);n!==0&&(lN(e,n|1),Vi(e,fn()),!(Ge&6)&&(ly=fn()+500,Rh()))}break;case 13:Kf(function(){var r=cc(t,1);if(r!==null){var i=di();Va(r,t,1,i)}}),$N(t,1)}};cN=function(t){if(t.tag===13){var e=cc(t,134217728);if(e!==null){var n=di();Va(e,t,134217728,n)}$N(t,134217728)}};Zz=function(t){if(t.tag===13){var e=sh(t),n=cc(t,e);if(n!==null){var r=di();Va(n,t,e,r)}$N(t,e)}};eH=function(){return rt};tH=function(t,e){var n=rt;try{return rt=t,e()}finally{rt=n}};Wk=function(t,e,n){switch(e){case"input":if(Fk(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=kT(r);if(!i)throw Error(J(90));Oz(r),Fk(r,i)}}}break;case"textarea":Mz(t,n);break;case"select":e=n.value,e!=null&&gm(t,!!n.multiple,e,!1)}};$z=LN;Uz=Kf;var Dre={usingClientEntryPoint:!1,Events:[L_,Xp,kT,Vz,Bz,LN]},_v={findFiberByHostInstance:cd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mre={bundleType:_v.bundleType,version:_v.version,rendererPackageName:_v.rendererPackageName,rendererConfig:_v.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tc.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Wz(t),t===null?null:t.stateNode},findFiberByHostInstance:_v.findFiberByHostInstance||Rre,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var aA=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!aA.isDisabled&&aA.supportsFiber)try{TT=aA.inject(Mre),Do=aA}catch{}}As.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dre;As.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zN(e))throw Error(J(200));return kre(t,e,null,n)};As.createRoot=function(t,e){if(!zN(t))throw Error(J(299));var n=!1,r="",i=AW;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=BN(t,1,!1,null,null,n,!1,r,i),t[lc]=e.current,q0(t.nodeType===8?t.parentNode:t),new UN(e)};As.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=Wz(e),t=t===null?null:t.stateNode,t};As.flushSync=function(t){return Kf(t)};As.hydrate=function(t,e,n){if(!VT(e))throw Error(J(200));return BT(null,t,e,!0,n)};As.hydrateRoot=function(t,e,n){if(!zN(t))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=AW;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=xW(e,null,t,1,n??null,i,!1,s,a),t[lc]=e.current,q0(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new FT(e)};As.render=function(t,e,n){if(!VT(e))throw Error(J(200));return BT(null,t,e,!1,n)};As.unmountComponentAtNode=function(t){if(!VT(t))throw Error(J(40));return t._reactRootContainer?(Kf(function(){BT(null,null,t,!1,function(){t._reactRootContainer=null,t[lc]=null})}),!0):!1};As.unstable_batchedUpdates=LN;As.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!VT(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return BT(t,e,n,!1,r)};As.version="18.3.1-next-f1338f8080-20240426";function EW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(EW)}catch(t){console.error(t)}}EW(),Ez.exports=As;var $T=Ez.exports,jB=$T;Rk.createRoot=jB.createRoot,Rk.hydrateRoot=jB.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rb(){return rb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rb.apply(this,arguments)}var Qu;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qu||(Qu={}));const FB="popstate";function Nre(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:a,hash:o}=r.location;return ER("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:PS(i)}return jre(e,n,null,t)}function mn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function HN(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Lre(){return Math.random().toString(36).substr(2,8)}function VB(t,e){return{usr:t.state,key:t.key,idx:e}}function ER(t,e,n,r){return n===void 0&&(n=null),rb({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Oy(e):e,{state:n,key:e&&e.key||r||Lre()})}function PS(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Oy(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function jre(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=Qu.Pop,l=null,c=u();c==null&&(c=0,a.replaceState(rb({},a.state,{idx:c}),""));function u(){return(a.state||{idx:null}).idx}function d(){o=Qu.Pop;let v=u(),b=v==null?null:v-c;c=v,l&&l({action:o,location:y.location,delta:b})}function f(v,b){o=Qu.Push;let _=ER(y.location,v,b);c=u()+1;let w=VB(_,c),T=y.createHref(_);try{a.pushState(w,"",T)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(T)}s&&l&&l({action:o,location:y.location,delta:1})}function p(v,b){o=Qu.Replace;let _=ER(y.location,v,b);c=u();let w=VB(_,c),T=y.createHref(_);a.replaceState(w,"",T),s&&l&&l({action:o,location:y.location,delta:0})}function g(v){let b=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof v=="string"?v:PS(v);return _=_.replace(/ $/,"%20"),mn(b,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,b)}let y={get action(){return o},get location(){return t(i,a)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(FB,d),l=v,()=>{i.removeEventListener(FB,d),l=null}},createHref(v){return e(i,v)},createURL:g,encodeLocation(v){let b=g(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:p,go(v){return a.go(v)}};return y}var BB;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(BB||(BB={}));function Fre(t,e,n){return n===void 0&&(n="/"),Vre(t,e,n)}function Vre(t,e,n,r){let i=typeof e=="string"?Oy(e):e,s=WN(i.pathname||"/",n);if(s==null)return null;let a=SW(t);Bre(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let c=Jre(s);o=Xre(a[l],c)}return o}function SW(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(mn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=oh([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(mn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),SW(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:Kre(c,s.index),routesMeta:u})};return t.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of TW(s.path))i(s,a,l)}),e}function TW(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=TW(r.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function Bre(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:qre(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const $re=/^:[\w-]+$/,Ure=3,zre=2,Hre=1,Wre=10,Gre=-2,$B=t=>t==="*";function Kre(t,e){let n=t.split("/"),r=n.length;return n.some($B)&&(r+=Gre),e&&(r+=zre),n.filter(i=>!$B(i)).reduce((i,s)=>i+($re.test(s)?Ure:s===""?Hre:Wre),r)}function qre(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Xre(t,e,n){let{routesMeta:r}=t,i={},s="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],c=o===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=Yre({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:oh([s,d.pathname]),pathnameBase:rie(oh([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=oh([s,d.pathnameBase]))}return a}function Yre(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Qre(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let y=o[d]||"";a=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const g=o[d];return p&&!g?c[f]=void 0:c[f]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:t}}function Qre(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),HN(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Jre(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return HN(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function WN(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Zre=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eie=t=>Zre.test(t);function tie(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Oy(t):t,s;if(n)if(eie(n))s=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),HN(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?s=UB(n.substring(1),"/"):s=UB(n,e)}else s=e;return{pathname:s,search:iie(r),hash:sie(i)}}function UB(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function vI(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function nie(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function GN(t,e){let n=nie(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function KN(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Oy(t):(i=rb({},t),mn(!i.pathname||!i.pathname.includes("?"),vI("?","pathname","search",i)),mn(!i.pathname||!i.pathname.includes("#"),vI("#","pathname","hash",i)),mn(!i.search||!i.search.includes("#"),vI("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=n;else{let d=e.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}o=d>=0?e[d]:"/"}let l=tie(i,o),c=a&&a!=="/"&&a.endsWith("/"),u=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const oh=t=>t.join("/").replace(/\/\/+/g,"/"),rie=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),iie=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,sie=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function aie(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const PW=["post","put","patch","delete"];new Set(PW);const oie=["get",...PW];new Set(oie);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ib(){return ib=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ib.apply(this,arguments)}const qN=x.createContext(null),lie=x.createContext(null),Oh=x.createContext(null),UT=x.createContext(null),Zo=x.createContext({outlet:null,matches:[],isDataRoute:!1}),CW=x.createContext(null);function cie(t,e){let{relative:n}=e===void 0?{}:e;Dy()||mn(!1);let{basename:r,navigator:i}=x.useContext(Oh),{hash:s,pathname:a,search:o}=RW(t,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:oh([r,a])),i.createHref({pathname:l,search:o,hash:s})}function Dy(){return x.useContext(UT)!=null}function F_(){return Dy()||mn(!1),x.useContext(UT).location}function IW(t){x.useContext(Oh).static||x.useLayoutEffect(t)}function hp(){let{isDataRoute:t}=x.useContext(Zo);return t?Eie():uie()}function uie(){Dy()||mn(!1);let t=x.useContext(qN),{basename:e,future:n,navigator:r}=x.useContext(Oh),{matches:i}=x.useContext(Zo),{pathname:s}=F_(),a=JSON.stringify(GN(i,n.v7_relativeSplatPath)),o=x.useRef(!1);return IW(()=>{o.current=!0}),x.useCallback(function(c,u){if(u===void 0&&(u={}),!o.current)return;if(typeof c=="number"){r.go(c);return}let d=KN(c,JSON.parse(a),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:oh([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,a,s,t])}const hie=x.createContext(null);function die(t){let e=x.useContext(Zo).outlet;return e&&x.createElement(hie.Provider,{value:t},e)}function kW(){let{matches:t}=x.useContext(Zo),e=t[t.length-1];return e?e.params:{}}function RW(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=x.useContext(Oh),{matches:i}=x.useContext(Zo),{pathname:s}=F_(),a=JSON.stringify(GN(i,r.v7_relativeSplatPath));return x.useMemo(()=>KN(t,JSON.parse(a),s,n==="path"),[t,a,s,n])}function fie(t,e){return pie(t,e)}function pie(t,e,n,r){Dy()||mn(!1);let{navigator:i}=x.useContext(Oh),{matches:s}=x.useContext(Zo),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=F_(),u;if(e){var d;let v=typeof e=="string"?Oy(e):e;l==="/"||(d=v.pathname)!=null&&d.startsWith(l)||mn(!1),u=v}else u=c;let f=u.pathname||"/",p=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=Fre(t,{pathname:p}),y=bie(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:oh([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:oh([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n,r);return e&&y?x.createElement(UT.Provider,{value:{location:ib({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Qu.Pop}},y):y}function mie(){let t=Aie(),e=aie(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:i},n):null,null)}const gie=x.createElement(mie,null);class yie extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?x.createElement(Zo.Provider,{value:this.props.routeContext},x.createElement(CW.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function vie(t){let{routeContext:e,match:n,children:r}=t,i=x.useContext(qN);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(Zo.Provider,{value:e},r)}function bie(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,o=(i=n)==null?void 0:i.errors;if(o!=null){let u=a.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);u>=0||mn(!1),a=a.slice(0,Math.min(a.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<a.length;u++){let d=a[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:p}=n,g=d.route.loader&&f[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||g){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((u,d,f)=>{let p,g=!1,y=null,v=null;n&&(p=o&&d.route.id?o[d.route.id]:void 0,y=d.route.errorElement||gie,l&&(c<0&&f===0?(Sie("route-fallback"),g=!0,v=null):c===f&&(g=!0,v=d.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,f+1)),_=()=>{let w;return p?w=y:g?w=v:d.route.Component?w=x.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=u,x.createElement(vie,{match:d,routeContext:{outlet:u,matches:b,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?x.createElement(yie,{location:n.location,revalidation:n.revalidation,component:y,error:p,children:_(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):_()},null)}var OW=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(OW||{}),DW=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(DW||{});function wie(t){let e=x.useContext(qN);return e||mn(!1),e}function _ie(t){let e=x.useContext(lie);return e||mn(!1),e}function xie(t){let e=x.useContext(Zo);return e||mn(!1),e}function MW(t){let e=xie(),n=e.matches[e.matches.length-1];return n.route.id||mn(!1),n.route.id}function Aie(){var t;let e=x.useContext(CW),n=_ie(),r=MW();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Eie(){let{router:t}=wie(OW.UseNavigateStable),e=MW(DW.UseNavigateStable),n=x.useRef(!1);return IW(()=>{n.current=!0}),x.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ib({fromRouteId:e},s)))},[t,e])}const zB={};function Sie(t,e,n){zB[t]||(zB[t]=!0)}function Tie(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Pie(t){let{to:e,replace:n,state:r,relative:i}=t;Dy()||mn(!1);let{future:s,static:a}=x.useContext(Oh),{matches:o}=x.useContext(Zo),{pathname:l}=F_(),c=hp(),u=KN(e,GN(o,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(u);return x.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function Cie(t){return die(t.context)}function Nr(t){mn(!1)}function Iie(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Qu.Pop,navigator:s,static:a=!1,future:o}=t;Dy()&&mn(!1);let l=e.replace(/^\/*/,"/"),c=x.useMemo(()=>({basename:l,navigator:s,static:a,future:ib({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof r=="string"&&(r=Oy(r));let{pathname:u="/",search:d="",hash:f="",state:p=null,key:g="default"}=r,y=x.useMemo(()=>{let v=WN(u,l);return v==null?null:{location:{pathname:v,search:d,hash:f,state:p,key:g},navigationType:i}},[l,u,d,f,p,g,i]);return y==null?null:x.createElement(Oh.Provider,{value:c},x.createElement(UT.Provider,{children:n,value:y}))}function kie(t){let{children:e,location:n}=t;return fie(SR(e),n)}new Promise(()=>{});function SR(t,e){e===void 0&&(e=[]);let n=[];return x.Children.forEach(t,(r,i)=>{if(!x.isValidElement(r))return;let s=[...e,i];if(r.type===x.Fragment){n.push.apply(n,SR(r.props.children,s));return}r.type!==Nr&&mn(!1),!r.props.index||!r.props.children||mn(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=SR(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function TR(){return TR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TR.apply(this,arguments)}function Rie(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Oie(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Die(t,e){return t.button===0&&(!e||e==="_self")&&!Oie(t)}const Mie=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Nie="6";try{window.__reactRouterVersion=Nie}catch{}const Lie="startTransition",HB=xz[Lie];function jie(t){let{basename:e,children:n,future:r,window:i}=t,s=x.useRef();s.current==null&&(s.current=Nre({window:i,v5Compat:!0}));let a=s.current,[o,l]=x.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},u=x.useCallback(d=>{c&&HB?HB(()=>l(d)):l(d)},[l,c]);return x.useLayoutEffect(()=>a.listen(u),[a,u]),x.useEffect(()=>Tie(r),[r]),x.createElement(Iie,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:a,future:r})}const Fie=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Vie=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yt=x.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,f=Rie(e,Mie),{basename:p}=x.useContext(Oh),g,y=!1;if(typeof c=="string"&&Vie.test(c)&&(g=c,Fie))try{let w=new URL(window.location.href),T=c.startsWith("//")?new URL(w.protocol+c):new URL(c),P=WN(T.pathname,p);T.origin===w.origin&&P!=null?c=P+T.search+T.hash:y=!0}catch{}let v=cie(c,{relative:i}),b=Bie(c,{replace:a,state:o,target:l,preventScrollReset:u,relative:i,viewTransition:d});function _(w){r&&r(w),w.defaultPrevented||b(w)}return x.createElement("a",TR({},f,{href:g||v,onClick:y||s?r:_,ref:n,target:l}))});var WB;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(WB||(WB={}));var GB;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(GB||(GB={}));function Bie(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}=e===void 0?{}:e,l=hp(),c=F_(),u=RW(t,{relative:a});return x.useCallback(d=>{if(Die(d,n)){d.preventDefault();let f=r!==void 0?r:PS(c)===PS(u);l(t,{replace:f,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,u,r,i,n,t,s,a,o])}const NW=x.createContext(),Ka=()=>{const t=x.useContext(NW);if(!t)throw new Error("useTheme must be used within ThemeProvider");return t},$ie=({children:t})=>{const[e,n]=x.useState(()=>{const i=localStorage.getItem("theme");return i?i==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});x.useEffect(()=>{const i=document.documentElement;e?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",e?"dark":"light")},[e]);const r=()=>{n(i=>!i)};return A.jsx(NW.Provider,{value:{isDark:e,toggleTheme:r},children:t})},LW="authToken",jW="user",Uie=()=>localStorage.getItem(LW),zie=()=>{localStorage.removeItem(LW)},sb=()=>{const t=localStorage.getItem(jW);return t?JSON.parse(t):null},Hie=()=>{localStorage.removeItem(jW)},PR=()=>!!Uie(),Wie=()=>{zie(),Hie()};function Gie(){const{isDark:t,toggleTheme:e}=Ka(),n=hp(),[r,i]=x.useState(!1),[s,a]=x.useState(!1),[o,l]=x.useState(null),[c,u]=x.useState(!1);x.useEffect(()=>{PR()&&(l(sb()),u(!0));const p=()=>{PR()?(l(sb()),u(!0)):(l(null),u(!1))};return window.addEventListener("auth-change",p),()=>window.removeEventListener("auth-change",p)},[]);const d=()=>{Wie(),localStorage.removeItem("user"),localStorage.removeItem("authToken"),l(null),u(!1),a(!1),i(!1),window.dispatchEvent(new Event("auth-change")),n("/")},f=[{to:"/",label:""},{to:"/concepts",label:""},{to:"/papers",label:" "},{to:"/visualizations",label:""},{to:"/forum",label:""},{to:"/glossary",label:" "},{to:"/references",label:" "},...c&&o?[{to:"/notes",label:""}]:[]];return A.jsx("header",{className:`sticky top-0 z-40 transition-colors duration-300 ${t?"bg-gray-900 border-gray-800":"bg-white border-gray-200"} border-b backdrop-blur`,children:A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx(yt,{to:"/",className:"text-xl sm:text-2xl font-bold text-blue-500 dark:text-blue-400 whitespace-nowrap",children:"Astro Hub"}),A.jsxs("nav",{className:"hidden md:flex items-center gap-3 lg:gap-6",children:[f.map(p=>A.jsx(yt,{to:p.to,className:`transition text-sm lg:text-base ${t?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,children:p.label},p.to)),A.jsx("button",{onClick:e,className:`p-2 rounded-lg border transition text-lg ${t?"border-gray-700 hover:bg-gray-800":"border-gray-300 hover:bg-gray-100"}`,"aria-label":" ",children:t?"":""}),c&&o?A.jsxs("div",{className:"relative",children:[A.jsxs("button",{onClick:()=>a(!s),className:`p-2 rounded-lg border transition ${t?"border-gray-700 hover:bg-gray-800":"border-gray-300 hover:bg-gray-100"}`,children:[" ",o.username]}),s&&A.jsxs("div",{className:`absolute right-0 mt-2 w-48 rounded-lg shadow-lg ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border`,children:[A.jsx(yt,{to:"/profile",className:`block px-4 py-2 first:rounded-t-lg ${t?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>a(!1),children:""}),A.jsx(yt,{to:"/bookmarks",className:`block px-4 py-2 ${t?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>a(!1),children:""}),A.jsx(yt,{to:"/notes",className:`block px-4 py-2 ${t?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>a(!1),children:""}),A.jsx("button",{onClick:d,className:`w-full text-left px-4 py-2 last:rounded-b-lg ${t?"text-red-400 hover:bg-gray-700":"text-red-600 hover:bg-gray-100"}`,children:""})]})]}):A.jsxs("div",{className:"flex gap-2",children:[A.jsx(yt,{to:"/login",className:`px-4 py-2 rounded-lg border transition ${t?"border-blue-400 text-blue-400 hover:bg-blue-400 hover:text-gray-900":"border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white"}`,children:""}),A.jsx(yt,{to:"/signup",className:`px-4 py-2 rounded-lg transition text-white ${t?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"}`,children:""})]})]}),A.jsxs("div",{className:"md:hidden flex items-center gap-3",children:[A.jsx("button",{onClick:e,className:`p-2 rounded-lg border transition text-lg ${t?"border-gray-700 hover:bg-gray-800":"border-gray-300 hover:bg-gray-100"}`,"aria-label":" ",children:t?"":""}),A.jsx("button",{onClick:()=>i(!r),className:`p-2 transition ${t?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,"aria-label":"",children:r?"":""})]})]}),r&&A.jsxs("nav",{className:`md:hidden mt-4 space-y-2 pb-4 border-t transition-colors duration-300 pt-4 ${t?"border-gray-800":"border-gray-200"}`,children:[f.map(p=>A.jsx(yt,{to:p.to,className:`block py-2 transition ${t?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:p.label},p.to)),c&&o?A.jsx(A.Fragment,{children:A.jsxs("div",{className:`py-2 border-t transition-colors duration-300 ${t?"border-gray-800":"border-gray-200"} mt-2 pt-2`,children:[A.jsx("div",{className:`px-2 py-1 text-sm ${t?"text-gray-400":"text-gray-500"}`,children:o.username}),A.jsx(yt,{to:"/profile",className:`block py-2 transition ${t?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:""}),A.jsx(yt,{to:"/bookmarks",className:`block py-2 transition ${t?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:""}),A.jsx(yt,{to:"/notes",className:`block py-2 transition ${t?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:""}),A.jsx("button",{onClick:d,className:`w-full text-left py-2 transition ${t?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-700"}`,children:""})]})}):A.jsxs("div",{className:`py-2 border-t transition-colors duration-300 mt-2 pt-2 ${t?"border-gray-800":"border-gray-200"}`,children:[A.jsx(yt,{to:"/login",className:`block py-2 transition ${t?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"}`,onClick:()=>i(!1),children:""}),A.jsx(yt,{to:"/signup",className:`block py-2 transition ${t?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"}`,onClick:()=>i(!1),children:""})]})]})]})})}function Kie(){const[t,e]=x.useState(0);return x.useEffect(()=>{const n=()=>{const r=window.scrollY,i=document.documentElement.scrollHeight-window.innerHeight,s=i>0?r/i*100:0;e(Math.min(100,Math.max(0,s)))};return window.addEventListener("scroll",n,{passive:!0}),()=>window.removeEventListener("scroll",n)},[]),A.jsx("div",{className:"scroll-progress",children:A.jsx("div",{className:"scroll-progress__bar",style:{transform:`scaleX(${t/100})`}})})}function qie(){const{isDark:t}=Ka();return A.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${t?"bg-gray-950 text-gray-100":"bg-white text-gray-900"}`,children:[A.jsx(Kie,{}),A.jsx(Gie,{}),A.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:A.jsx(Cie,{})}),A.jsx("footer",{className:`border-t py-6 text-center text-sm transition-colors duration-300 ${t?"bg-gray-900 border-gray-800 text-gray-400":"bg-gray-50 border-gray-200 text-gray-600"}`,children:A.jsx("p",{children:" 2025 Astrophysics Hub    "})})]})}const FW=x.createContext({});function Xie(t){const e=x.useRef(null);return e.current===null&&(e.current=t()),e.current}const XN=typeof window<"u",Yie=XN?x.useLayoutEffect:x.useEffect,YN=x.createContext(null);function QN(t,e){t.indexOf(e)===-1&&t.push(e)}function JN(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const hc=(t,e,n)=>n>e?e:n<t?t:n;let ZN=()=>{};const dc={},VW=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function BW(t){return typeof t=="object"&&t!==null}const $W=t=>/^0[^.\s]+$/u.test(t);function e2(t){let e;return()=>(e===void 0&&(e=t()),e)}const ta=t=>t,Qie=(t,e)=>n=>e(t(n)),V_=(...t)=>t.reduce(Qie),ab=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class t2{constructor(){this.subscriptions=[]}add(e){return QN(this.subscriptions,e),()=>JN(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const No=t=>t*1e3,Qs=t=>t/1e3;function UW(t,e){return e?t*(1e3/e):0}const zW=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Jie=1e-7,Zie=12;function ese(t,e,n,r,i){let s,a,o=0;do a=e+(n-e)/2,s=zW(a,r,i)-t,s>0?n=a:e=a;while(Math.abs(s)>Jie&&++o<Zie);return a}function B_(t,e,n,r){if(t===e&&n===r)return ta;const i=s=>ese(s,0,1,t,n);return s=>s===0||s===1?s:zW(i(s),e,r)}const HW=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,WW=t=>e=>1-t(1-e),GW=B_(.33,1.53,.69,.99),n2=WW(GW),KW=HW(n2),qW=t=>(t*=2)<1?.5*n2(t):.5*(2-Math.pow(2,-10*(t-1))),r2=t=>1-Math.sin(Math.acos(t)),XW=WW(r2),YW=HW(r2),tse=B_(.42,0,1,1),nse=B_(0,0,.58,1),QW=B_(.42,0,.58,1),rse=t=>Array.isArray(t)&&typeof t[0]!="number",JW=t=>Array.isArray(t)&&typeof t[0]=="number",ise={linear:ta,easeIn:tse,easeInOut:QW,easeOut:nse,circIn:r2,circInOut:YW,circOut:XW,backIn:n2,backInOut:KW,backOut:GW,anticipate:qW},sse=t=>typeof t=="string",KB=t=>{if(JW(t)){ZN(t.length===4);const[e,n,r,i]=t;return B_(e,n,r,i)}else if(sse(t))return ise[t];return t},oA=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function ase(t,e){let n=new Set,r=new Set,i=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(u){a.has(u)&&(c.schedule(u),t()),u(o)}const c={schedule:(u,d=!1,f=!1)=>{const g=f&&i?n:r;return d&&a.add(u),g.has(u)||g.add(u),u},cancel:u=>{r.delete(u),a.delete(u)},process:u=>{if(o=u,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),n.clear(),i=!1,s&&(s=!1,c.process(u))}};return c}const ose=40;function ZW(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=oA.reduce((w,T)=>(w[T]=ase(s),w),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:f,render:p,postRender:g}=a,y=()=>{const w=dc.useManualTiming?i.timestamp:performance.now();n=!1,dc.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(w-i.timestamp,ose),1)),i.timestamp=w,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),u.process(i),d.process(i),f.process(i),p.process(i),g.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(y))},v=()=>{n=!0,r=!0,i.isProcessing||t(y)};return{schedule:oA.reduce((w,T)=>{const P=a[T];return w[T]=(O,C=!1,I=!1)=>(n||v(),P.schedule(O,C,I)),w},{}),cancel:w=>{for(let T=0;T<oA.length;T++)a[oA[T]].cancel(w)},state:i,steps:a}}const{schedule:Bt,cancel:mh,state:vr,steps:bI}=ZW(typeof requestAnimationFrame<"u"?requestAnimationFrame:ta,!0);let eE;function lse(){eE=void 0}const Mi={now:()=>(eE===void 0&&Mi.set(vr.isProcessing||dc.useManualTiming?vr.timestamp:performance.now()),eE),set:t=>{eE=t,queueMicrotask(lse)}},e9=t=>e=>typeof e=="string"&&e.startsWith(t),i2=e9("--"),cse=e9("var(--"),s2=t=>cse(t)?use.test(t.split("/*")[0].trim()):!1,use=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,My={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ob={...My,transform:t=>hc(0,1,t)},lA={...My,default:1},T0=t=>Math.round(t*1e5)/1e5,a2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function hse(t){return t==null}const dse=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,o2=(t,e)=>n=>!!(typeof n=="string"&&dse.test(n)&&n.startsWith(t)||e&&!hse(n)&&Object.prototype.hasOwnProperty.call(n,e)),t9=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(a2);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},fse=t=>hc(0,255,t),wI={...My,transform:t=>Math.round(fse(t))},dd={test:o2("rgb","red"),parse:t9("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+wI.transform(t)+", "+wI.transform(e)+", "+wI.transform(n)+", "+T0(ob.transform(r))+")"};function pse(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const CR={test:o2("#"),parse:pse,transform:dd.transform},$_=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),$c=$_("deg"),Lo=$_("%"),_e=$_("px"),mse=$_("vh"),gse=$_("vw"),qB={...Lo,parse:t=>Lo.parse(t)/100,transform:t=>Lo.transform(t*100)},nm={test:o2("hsl","hue"),parse:t9("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Lo.transform(T0(e))+", "+Lo.transform(T0(n))+", "+T0(ob.transform(r))+")"},wn={test:t=>dd.test(t)||CR.test(t)||nm.test(t),parse:t=>dd.test(t)?dd.parse(t):nm.test(t)?nm.parse(t):CR.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?dd.transform(t):nm.transform(t),getAnimatableNone:t=>{const e=wn.parse(t);return e.alpha=0,wn.transform(e)}},yse=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function vse(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(a2))==null?void 0:e.length)||0)+(((n=t.match(yse))==null?void 0:n.length)||0)>0}const n9="number",r9="color",bse="var",wse="var(",XB="${}",_se=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function lb(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=e.replace(_se,l=>(wn.test(l)?(r.color.push(s),i.push(r9),n.push(wn.parse(l))):l.startsWith(wse)?(r.var.push(s),i.push(bse),n.push(l)):(r.number.push(s),i.push(n9),n.push(parseFloat(l))),++s,XB)).split(XB);return{values:n,split:o,indexes:r,types:i}}function i9(t){return lb(t).values}function s9(t){const{split:e,types:n}=lb(t),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const o=n[a];o===n9?s+=T0(i[a]):o===r9?s+=wn.transform(i[a]):s+=i[a]}return s}}const xse=t=>typeof t=="number"?0:wn.test(t)?wn.getAnimatableNone(t):t;function Ase(t){const e=i9(t);return s9(t)(e.map(xse))}const gh={test:vse,parse:i9,createTransformer:s9,getAnimatableNone:Ase};function _I(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Ese({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,a=0;if(!e)i=s=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;i=_I(l,o,t+1/3),s=_I(l,o,t),a=_I(l,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function CS(t,e){return n=>n>0?e:t}const Wt=(t,e,n)=>t+(e-t)*n,xI=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Sse=[CR,dd,nm],Tse=t=>Sse.find(e=>e.test(t));function YB(t){const e=Tse(t);if(!e)return!1;let n=e.parse(t);return e===nm&&(n=Ese(n)),n}const QB=(t,e)=>{const n=YB(t),r=YB(e);if(!n||!r)return CS(t,e);const i={...n};return s=>(i.red=xI(n.red,r.red,s),i.green=xI(n.green,r.green,s),i.blue=xI(n.blue,r.blue,s),i.alpha=Wt(n.alpha,r.alpha,s),dd.transform(i))},IR=new Set(["none","hidden"]);function Pse(t,e){return IR.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Cse(t,e){return n=>Wt(t,e,n)}function l2(t){return typeof t=="number"?Cse:typeof t=="string"?s2(t)?CS:wn.test(t)?QB:Rse:Array.isArray(t)?a9:typeof t=="object"?wn.test(t)?QB:Ise:CS}function a9(t,e){const n=[...t],r=n.length,i=t.map((s,a)=>l2(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}}function Ise(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=l2(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function kse(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],a=t.indexes[s][r[s]],o=t.values[a]??0;n[i]=o,r[s]++}return n}const Rse=(t,e)=>{const n=gh.createTransformer(e),r=lb(t),i=lb(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?IR.has(t)&&!i.values.length||IR.has(e)&&!r.values.length?Pse(t,e):V_(a9(kse(r,i),i.values),n):CS(t,e)};function o9(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Wt(t,e,n):l2(t)(t,e)}const Ose=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Bt.update(e,n),stop:()=>mh(e),now:()=>vr.isProcessing?vr.timestamp:Mi.now()}},l9=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},IS=2e4;function c2(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<IS;)e+=n,r=t.next(e);return e>=IS?1/0:e}function Dse(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(c2(r),IS);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:Qs(i)}}const Mse=5;function c9(t,e,n){const r=Math.max(e-Mse,0);return UW(n-t(r),e-r)}const nn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},AI=.001;function Nse({duration:t=nn.duration,bounce:e=nn.bounce,velocity:n=nn.velocity,mass:r=nn.mass}){let i,s,a=1-e;a=hc(nn.minDamping,nn.maxDamping,a),t=hc(nn.minDuration,nn.maxDuration,Qs(t)),a<1?(i=c=>{const u=c*a,d=u*t,f=u-n,p=kR(c,a),g=Math.exp(-d);return AI-f/p*g},s=c=>{const d=c*a*t,f=d*n+n,p=Math.pow(a,2)*Math.pow(c,2)*t,g=Math.exp(-d),y=kR(Math.pow(c,2),a);return(-i(c)+AI>0?-1:1)*((f-p)*g)/y}):(i=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-AI+u*d},s=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const o=5/t,l=jse(i,s,o);if(t=No(t),isNaN(l))return{stiffness:nn.stiffness,damping:nn.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:a*2*Math.sqrt(r*c),duration:t}}}const Lse=12;function jse(t,e,n){let r=n;for(let i=1;i<Lse;i++)r=r-t(r)/e(r);return r}function kR(t,e){return t*Math.sqrt(1-e*e)}const Fse=["duration","bounce"],Vse=["stiffness","damping","mass"];function JB(t,e){return e.some(n=>t[n]!==void 0)}function Bse(t){let e={velocity:nn.velocity,stiffness:nn.stiffness,damping:nn.damping,mass:nn.mass,isResolvedFromDuration:!1,...t};if(!JB(t,Vse)&&JB(t,Fse))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*hc(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:nn.mass,stiffness:i,damping:s}}else{const n=Nse(t);e={...e,...n,mass:nn.mass},e.isResolvedFromDuration=!0}return e}function kS(t=nn.visualDuration,e=nn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:f,isResolvedFromDuration:p}=Bse({...n,velocity:-Qs(n.velocity||0)}),g=f||0,y=c/(2*Math.sqrt(l*u)),v=a-s,b=Qs(Math.sqrt(l/u)),_=Math.abs(v)<5;r||(r=_?nn.restSpeed.granular:nn.restSpeed.default),i||(i=_?nn.restDelta.granular:nn.restDelta.default);let w;if(y<1){const P=kR(b,y);w=O=>{const C=Math.exp(-y*b*O);return a-C*((g+y*b*v)/P*Math.sin(P*O)+v*Math.cos(P*O))}}else if(y===1)w=P=>a-Math.exp(-b*P)*(v+(g+b*v)*P);else{const P=b*Math.sqrt(y*y-1);w=O=>{const C=Math.exp(-y*b*O),I=Math.min(P*O,300);return a-C*((g+y*b*v)*Math.sinh(I)+P*v*Math.cosh(I))/P}}const T={calculatedDuration:p&&d||null,next:P=>{const O=w(P);if(p)o.done=P>=d;else{let C=P===0?g:0;y<1&&(C=P===0?No(g):c9(w,P,O));const I=Math.abs(C)<=r,M=Math.abs(a-O)<=i;o.done=I&&M}return o.value=o.done?a:O,o},toString:()=>{const P=Math.min(c2(T),IS),O=l9(C=>T.next(P*C).value,P,30);return P+"ms "+O},toTransition:()=>{}};return T}kS.applyToOptions=t=>{const e=Dse(t,100,kS);return t.ease=e.ease,t.duration=No(e.duration),t.type="keyframes",t};function RR({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],f={done:!1,value:d},p=I=>o!==void 0&&I<o||l!==void 0&&I>l,g=I=>o===void 0?l:l===void 0||Math.abs(o-I)<Math.abs(l-I)?o:l;let y=n*e;const v=d+y,b=a===void 0?v:a(v);b!==v&&(y=b-d);const _=I=>-y*Math.exp(-I/r),w=I=>b+_(I),T=I=>{const M=_(I),L=w(I);f.done=Math.abs(M)<=c,f.value=f.done?b:L};let P,O;const C=I=>{p(f.value)&&(P=I,O=kS({keyframes:[f.value,g(f.value)],velocity:c9(w,I,f.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return C(0),{calculatedDuration:null,next:I=>{let M=!1;return!O&&P===void 0&&(M=!0,T(I),C(I)),P!==void 0&&I>=P?O.next(I-P):(!M&&T(I),f)}}}function $se(t,e,n){const r=[],i=n||dc.mix||o9,s=t.length-1;for(let a=0;a<s;a++){let o=i(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||ta:e;o=V_(l,o)}r.push(o)}return r}function Use(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(ZN(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=$se(e,r,i),l=o.length,c=u=>{if(a&&u<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const f=ab(t[d],t[d+1],u);return o[d](f)};return n?u=>c(hc(t[0],t[s-1],u)):c}function zse(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=ab(0,e,r);t.push(Wt(n,1,i))}}function Hse(t){const e=[0];return zse(e,t.length-1),e}function Wse(t,e){return t.map(n=>n*e)}function Gse(t,e){return t.map(()=>e||QW).splice(0,t.length-1)}function P0({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=rse(r)?r.map(KB):KB(r),s={done:!1,value:e[0]},a=Wse(n&&n.length===e.length?n:Hse(e),t),o=Use(a,e,{ease:Array.isArray(i)?i:Gse(e,i)});return{calculatedDuration:t,next:l=>(s.value=o(l),s.done=l>=t,s)}}const Kse=t=>t!==null;function u2(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(Kse),o=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const qse={decay:RR,inertia:RR,tween:P0,keyframes:P0,spring:kS};function u9(t){typeof t.type=="string"&&(t.type=qse[t.type])}class h2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Xse=t=>t/100;class d2 extends h2{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Mi.now()&&this.tick(Mi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;u9(e);const{type:n=P0,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=e;let{keyframes:o}=e;const l=n||P0;l!==P0&&typeof o[0]!="number"&&(this.mixKeyframes=V_(Xse,o9(o[0],o[1])),o=[0,100]);const c=l({...e,keyframes:o});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=c2(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:u,repeat:d,repeatType:f,repeatDelay:p,type:g,onUpdate:y,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const b=this.currentTime-c*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?b<0:b>i;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let w=this.currentTime,T=r;if(d){const I=Math.min(this.currentTime,i)/o;let M=Math.floor(I),L=I%1;!L&&I>=1&&(L=1),L===1&&M--,M=Math.min(M,d+1),!!(M%2)&&(f==="reverse"?(L=1-L,p&&(L-=p/o)):f==="mirror"&&(T=a)),w=hc(0,1,L)*o}const P=_?{done:!1,value:u[0]}:T.next(w);s&&(P.value=s(P.value));let{done:O}=P;!_&&l!==null&&(O=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return C&&g!==RR&&(P.value=u2(u,this.options,v,this.speed)),y&&y(P.value),C&&this.finish(),P}then(e,n){return this.finished.then(e,n)}get duration(){return Qs(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Qs(e)}get time(){return Qs(this.currentTime)}set time(e){var n;e=No(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Mi.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Qs(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=Ose,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Mi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function Yse(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const fd=t=>t*180/Math.PI,OR=t=>{const e=fd(Math.atan2(t[1],t[0]));return DR(e)},Qse={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:OR,rotateZ:OR,skewX:t=>fd(Math.atan(t[1])),skewY:t=>fd(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},DR=t=>(t=t%360,t<0&&(t+=360),t),ZB=OR,e3=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),t3=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Jse={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:e3,scaleY:t3,scale:t=>(e3(t)+t3(t))/2,rotateX:t=>DR(fd(Math.atan2(t[6],t[5]))),rotateY:t=>DR(fd(Math.atan2(-t[2],t[0]))),rotateZ:ZB,rotate:ZB,skewX:t=>fd(Math.atan(t[4])),skewY:t=>fd(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function MR(t){return t.includes("scale")?1:0}function NR(t,e){if(!t||t==="none")return MR(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Jse,i=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Qse,i=o}if(!i)return MR(e);const s=r[e],a=i[1].split(",").map(eae);return typeof s=="function"?s(a):a[s]}const Zse=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return NR(n,e)};function eae(t){return parseFloat(t.trim())}const Ny=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ly=new Set(Ny),n3=t=>t===My||t===_e,tae=new Set(["x","y","z"]),nae=Ny.filter(t=>!tae.has(t));function rae(t){const e=[];return nae.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Lf={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>NR(e,"x"),y:(t,{transform:e})=>NR(e,"y")};Lf.translateX=Lf.x;Lf.translateY=Lf.y;const jf=new Set;let LR=!1,jR=!1,FR=!1;function h9(){if(jR){const t=Array.from(jf).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=rae(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))==null||o.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}jR=!1,LR=!1,jf.forEach(t=>t.complete(FR)),jf.clear()}function d9(){jf.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(jR=!0)})}function iae(){FR=!0,d9(),h9(),FR=!1}class f2{constructor(e,n,r,i,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(jf.add(this),LR||(LR=!0,Bt.read(d9),Bt.resolveKeyframes(h9))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const o=r.readValue(n,a);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=a),i&&s===void 0&&i.set(e[0])}Yse(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),jf.delete(this)}cancel(){this.state==="scheduled"&&(jf.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const sae=t=>t.startsWith("--");function aae(t,e,n){sae(e)?t.style.setProperty(e,n):t.style[e]=n}const oae=e2(()=>window.ScrollTimeline!==void 0),lae={};function cae(t,e){const n=e2(t);return()=>lae[e]??n()}const f9=cae(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Bv=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,r3={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Bv([0,.65,.55,1]),circOut:Bv([.55,0,1,.45]),backIn:Bv([.31,.01,.66,-.59]),backOut:Bv([.33,1.53,.69,.99])};function p9(t,e){if(t)return typeof t=="function"?f9()?l9(t,e):"ease-out":JW(t)?Bv(t):Array.isArray(t)?t.map(n=>p9(n,e)||r3.easeOut):r3[t]}function uae(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:l}={},c=void 0){const u={[e]:n};l&&(u.offset=l);const d=p9(o,i);Array.isArray(d)&&(u.easing=d);const f={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return c&&(f.pseudoElement=c),t.animate(u,f)}function m9(t){return typeof t=="function"&&"applyToOptions"in t}function hae({type:t,...e}){return m9(t)&&f9()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class dae extends h2{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=e,ZN(typeof e.type!="string");const c=hae(e);this.animation=uae(n,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const u=u2(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(u):aae(n,r,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Qs(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Qs(e)}get time(){return Qs(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=No(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&oae()?(this.animation.timeline=e,ta):n(this)}}const g9={anticipate:qW,backInOut:KW,circInOut:YW};function fae(t){return t in g9}function pae(t){typeof t.ease=="string"&&fae(t.ease)&&(t.ease=g9[t.ease])}const i3=10;class mae extends dae{constructor(e){pae(e),u9(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new d2({...a,autoplay:!1}),l=No(this.finishedTime??this.time);n.setWithVelocity(o.sample(l-i3).value,o.sample(l).value,i3),o.stop()}}const s3=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(gh.test(t)||t==="0")&&!t.startsWith("url("));function gae(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function yae(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=s3(i,e),o=s3(s,e);return!a||!o?!1:gae(t)||(n==="spring"||m9(n))&&r}function VR(t){t.duration=0,t.type="keyframes"}const vae=new Set(["opacity","clipPath","filter","transform"]),bae=e2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function wae(t){var u;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:a}=t;if(!(((u=e==null?void 0:e.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return bae()&&n&&vae.has(n)&&(n!=="transform"||!c)&&!l&&!r&&i!=="mirror"&&s!==0&&a!=="inertia"}const _ae=40;class xae extends h2{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:o,name:l,motionValue:c,element:u,...d}){var g;super(),this.stop=()=>{var y,v;this._animation&&(this._animation.stop(),(y=this.stopTimeline)==null||y.call(this)),(v=this.keyframeResolver)==null||v.cancel()},this.createdAt=Mi.now();const f={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:a,name:l,motionValue:c,element:u,...d},p=(u==null?void 0:u.KeyframeResolver)||f2;this.keyframeResolver=new p(o,(y,v,b)=>this.onKeyframesResolved(y,v,f,!b),l,c,u),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:o,delay:l,isHandoff:c,onUpdate:u}=r;this.resolvedAt=Mi.now(),yae(e,s,a,o)||((dc.instantAnimations||!l)&&(u==null||u(u2(e,r,n))),e[0]=e[e.length-1],VR(r),r.repeat=0);const f={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>_ae?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},p=!c&&wae(f)?new mae({...f,element:f.motionValue.owner.current}):new d2(f);p.finished.then(()=>this.notifyFinished()).catch(ta),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),iae()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const Aae=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Eae(t){const e=Aae.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function y9(t,e,n=1){const[r,i]=Eae(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return VW(a)?parseFloat(a):a}return s2(i)?y9(i,e,n+1):i}function p2(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const v9=new Set(["width","height","top","left","right","bottom",...Ny]),Sae={test:t=>t==="auto",parse:t=>t},b9=t=>e=>e.test(t),w9=[My,_e,Lo,$c,gse,mse,Sae],a3=t=>w9.find(b9(t));function Tae(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||$W(t):!0}const Pae=new Set(["brightness","contrast","saturate","opacity"]);function Cae(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(a2)||[];if(!r)return t;const i=n.replace(r,"");let s=Pae.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const Iae=/\b([a-z-]*)\(.*?\)/gu,BR={...gh,getAnimatableNone:t=>{const e=t.match(Iae);return e?e.map(Cae).join(" "):t}},o3={...My,transform:Math.round},kae={rotate:$c,rotateX:$c,rotateY:$c,rotateZ:$c,scale:lA,scaleX:lA,scaleY:lA,scaleZ:lA,skew:$c,skewX:$c,skewY:$c,distance:_e,translateX:_e,translateY:_e,translateZ:_e,x:_e,y:_e,z:_e,perspective:_e,transformPerspective:_e,opacity:ob,originX:qB,originY:qB,originZ:_e},m2={borderWidth:_e,borderTopWidth:_e,borderRightWidth:_e,borderBottomWidth:_e,borderLeftWidth:_e,borderRadius:_e,radius:_e,borderTopLeftRadius:_e,borderTopRightRadius:_e,borderBottomRightRadius:_e,borderBottomLeftRadius:_e,width:_e,maxWidth:_e,height:_e,maxHeight:_e,top:_e,right:_e,bottom:_e,left:_e,padding:_e,paddingTop:_e,paddingRight:_e,paddingBottom:_e,paddingLeft:_e,margin:_e,marginTop:_e,marginRight:_e,marginBottom:_e,marginLeft:_e,backgroundPositionX:_e,backgroundPositionY:_e,...kae,zIndex:o3,fillOpacity:ob,strokeOpacity:ob,numOctaves:o3},Rae={...m2,color:wn,backgroundColor:wn,outlineColor:wn,fill:wn,stroke:wn,borderColor:wn,borderTopColor:wn,borderRightColor:wn,borderBottomColor:wn,borderLeftColor:wn,filter:BR,WebkitFilter:BR},_9=t=>Rae[t];function x9(t,e){let n=_9(t);return n!==BR&&(n=gh),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Oae=new Set(["auto","none","0"]);function Dae(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!Oae.has(s)&&lb(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=x9(n,i)}class Mae extends f2{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),s2(c))){const u=y9(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!v9.has(r)||e.length!==2)return;const[i,s]=e,a=a3(i),o=a3(s);if(a!==o)if(n3(a)&&n3(o))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else Lf[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||Tae(e[i]))&&r.push(i);r.length&&Dae(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Lf[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var o;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,a=r[s];r[s]=Lf[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function Nae(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const A9=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Lae(t){return BW(t)&&"offsetHeight"in t}const l3=30,jae=t=>!isNaN(parseFloat(t));class Fae{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Mi.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Mi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=jae(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new t2);const r=this.events[e].add(n);return e==="change"?()=>{r(),Bt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Mi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>l3)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,l3);return UW(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function cy(t,e){return new Fae(t,e)}const{schedule:g2}=ZW(queueMicrotask,!1),ma={x:!1,y:!1};function E9(){return ma.x||ma.y}function Vae(t){return t==="x"||t==="y"?ma[t]?null:(ma[t]=!0,()=>{ma[t]=!1}):ma.x||ma.y?null:(ma.x=ma.y=!0,()=>{ma.x=ma.y=!1})}function S9(t,e){const n=Nae(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function c3(t){return!(t.pointerType==="touch"||E9())}function Bae(t,e,n={}){const[r,i,s]=S9(t,n),a=o=>{if(!c3(o))return;const{target:l}=o,c=e(l,o);if(typeof c!="function"||!l)return;const u=d=>{c3(d)&&(c(d),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,i)};return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const T9=(t,e)=>e?t===e?!0:T9(t,e.parentElement):!1,y2=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,$ae=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Uae(t){return $ae.has(t.tagName)||t.tabIndex!==-1}const tE=new WeakSet;function u3(t){return e=>{e.key==="Enter"&&t(e)}}function EI(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const zae=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=u3(()=>{if(tE.has(n))return;EI(n,"down");const i=u3(()=>{EI(n,"up")}),s=()=>EI(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function h3(t){return y2(t)&&!E9()}function Hae(t,e,n={}){const[r,i,s]=S9(t,n),a=o=>{const l=o.currentTarget;if(!h3(o))return;tE.add(l);const c=e(l,o),u=(p,g)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),tE.has(l)&&tE.delete(l),h3(p)&&typeof c=="function"&&c(p,{success:g})},d=p=>{u(p,l===window||l===document||n.useGlobalTarget||T9(l,p.target))},f=p=>{u(p,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",f,i)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),Lae(o)&&(o.addEventListener("focus",c=>zae(c,i)),!Uae(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),s}function P9(t){return BW(t)&&"ownerSVGElement"in t}function Wae(t){return P9(t)&&t.tagName==="svg"}const qr=t=>!!(t&&t.getVelocity),Gae=[...w9,wn,gh],Kae=t=>Gae.find(b9(t)),C9=x.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function qae(t=!0){const e=x.useContext(YN);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=x.useId();x.useEffect(()=>{if(t)return i(s)},[t]);const a=x.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,a]:[!0]}const I9=x.createContext({strict:!1}),d3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},uy={};for(const t in d3)uy[t]={isEnabled:e=>d3[t].some(n=>!!e[n])};function Xae(t){for(const e in t)uy[e]={...uy[e],...t[e]}}const Yae=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function RS(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Yae.has(t)}let k9=t=>!RS(t);function Qae(t){typeof t=="function"&&(k9=e=>e.startsWith("on")?!RS(e):t(e))}try{Qae(require("@emotion/is-prop-valid").default)}catch{}function Jae(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(k9(i)||n===!0&&RS(i)||!e&&!RS(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const zT=x.createContext({});function HT(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function cb(t){return typeof t=="string"||Array.isArray(t)}const v2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],b2=["initial",...v2];function WT(t){return HT(t.animate)||b2.some(e=>cb(t[e]))}function R9(t){return!!(WT(t)||t.variants)}function Zae(t,e){if(WT(t)){const{initial:n,animate:r}=t;return{initial:n===!1||cb(n)?n:void 0,animate:cb(r)?r:void 0}}return t.inherit!==!1?e:{}}function eoe(t){const{initial:e,animate:n}=Zae(t,x.useContext(zT));return x.useMemo(()=>({initial:e,animate:n}),[f3(e),f3(n)])}function f3(t){return Array.isArray(t)?t.join(" "):t}const ub={};function toe(t){for(const e in t)ub[e]=t[e],i2(e)&&(ub[e].isCSSVariable=!0)}function O9(t,{layout:e,layoutId:n}){return Ly.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!ub[t]||t==="opacity")}const noe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},roe=Ny.length;function ioe(t,e,n){let r="",i=!0;for(let s=0;s<roe;s++){const a=Ny[s],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const c=A9(o,m2[a]);if(!l){i=!1;const u=noe[a]||a;r+=`${u}(${c}) `}n&&(e[a]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function w2(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let a=!1,o=!1;for(const l in e){const c=e[l];if(Ly.has(l)){a=!0;continue}else if(i2(l)){i[l]=c;continue}else{const u=A9(c,m2[l]);l.startsWith("origin")?(o=!0,s[l]=u):r[l]=u}}if(e.transform||(a||n?r.transform=ioe(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const _2=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function D9(t,e,n){for(const r in e)!qr(e[r])&&!O9(r,n)&&(t[r]=e[r])}function soe({transformTemplate:t},e){return x.useMemo(()=>{const n=_2();return w2(n,e,t),Object.assign({},n.vars,n.style)},[e])}function aoe(t,e){const n=t.style||{},r={};return D9(r,n,t),Object.assign(r,soe(t,e)),r}function ooe(t,e){const n={},r=aoe(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const loe={offset:"stroke-dashoffset",array:"stroke-dasharray"},coe={offset:"strokeDashoffset",array:"strokeDasharray"};function uoe(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?loe:coe;t[s.offset]=_e.transform(-r);const a=_e.transform(e),o=_e.transform(n);t[s.array]=`${a} ${o}`}function M9(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...o},l,c,u){if(w2(t,o,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:f}=t;d.transform&&(f.transform=d.transform,delete d.transform),(f.transform||d.transformOrigin)&&(f.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),f.transform&&(f.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete d.transformBox),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&uoe(d,i,s,a,!1)}const N9=()=>({..._2(),attrs:{}}),L9=t=>typeof t=="string"&&t.toLowerCase()==="svg";function hoe(t,e,n,r){const i=x.useMemo(()=>{const s=N9();return M9(s,e,L9(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};D9(s,t.style,t),i.style={...s,...i.style}}return i}const doe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function x2(t){return typeof t!="string"||t.includes("-")?!1:!!(doe.indexOf(t)>-1||/[A-Z]/u.test(t))}function foe(t,e,n,{latestValues:r},i,s=!1){const o=(x2(t)?hoe:ooe)(e,r,i,t),l=Jae(e,typeof t=="string",s),c=t!==x.Fragment?{...l,...o,ref:n}:{},{children:u}=e,d=x.useMemo(()=>qr(u)?u.get():u,[u]);return x.createElement(t,{...c,children:d})}function p3(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function A2(t,e,n,r){if(typeof e=="function"){const[i,s]=p3(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=p3(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function nE(t){return qr(t)?t.get():t}function poe({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:moe(n,r,i,t),renderState:e()}}function moe(t,e,n,r){const i={},s=r(t,{});for(const f in s)i[f]=nE(s[f]);let{initial:a,animate:o}=t;const l=WT(t),c=R9(t);e&&c&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let u=n?n.initial===!1:!1;u=u||a===!1;const d=u?o:a;if(d&&typeof d!="boolean"&&!HT(d)){const f=Array.isArray(d)?d:[d];for(let p=0;p<f.length;p++){const g=A2(t,f[p]);if(g){const{transitionEnd:y,transition:v,...b}=g;for(const _ in b){let w=b[_];if(Array.isArray(w)){const T=u?w.length-1:0;w=w[T]}w!==null&&(i[_]=w)}for(const _ in y)i[_]=y[_]}}}return i}const j9=t=>(e,n)=>{const r=x.useContext(zT),i=x.useContext(YN),s=()=>poe(t,e,r,i);return n?s():Xie(s)};function E2(t,e,n){var s;const{style:r}=t,i={};for(const a in r)(qr(r[a])||e.style&&qr(e.style[a])||O9(a,t)||((s=n==null?void 0:n.getValue(a))==null?void 0:s.liveStyle)!==void 0)&&(i[a]=r[a]);return i}const goe=j9({scrapeMotionValuesFromProps:E2,createRenderState:_2});function F9(t,e,n){const r=E2(t,e,n);for(const i in t)if(qr(t[i])||qr(e[i])){const s=Ny.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const yoe=j9({scrapeMotionValuesFromProps:F9,createRenderState:N9}),voe=Symbol.for("motionComponentSymbol");function rm(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function boe(t,e,n){return x.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):rm(n)&&(n.current=r))},[e])}const S2=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),woe="framerAppearId",V9="data-"+S2(woe),B9=x.createContext({});function _oe(t,e,n,r,i){var y,v;const{visualElement:s}=x.useContext(zT),a=x.useContext(I9),o=x.useContext(YN),l=x.useContext(C9).reducedMotion,c=x.useRef(null);r=r||a.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,d=x.useContext(B9);u&&!u.projection&&i&&(u.type==="html"||u.type==="svg")&&xoe(c.current,n,i,d);const f=x.useRef(!1);x.useInsertionEffect(()=>{u&&f.current&&u.update(n,o)});const p=n[V9],g=x.useRef(!!p&&!((y=window.MotionHandoffIsComplete)!=null&&y.call(window,p))&&((v=window.MotionHasOptimisedAnimation)==null?void 0:v.call(window,p)));return Yie(()=>{u&&(f.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),g.current&&u.animationState&&u.animationState.animateChanges())}),x.useEffect(()=>{u&&(!g.current&&u.animationState&&u.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)==null||b.call(window,p)}),g.current=!1),u.enteringChildren=void 0)}),u}function xoe(t,e,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:$9(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&rm(o),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}function $9(t){if(t)return t.options.allowProjection!==!1?t.projection:$9(t.parent)}function SI(t,{forwardMotionProps:e=!1}={},n,r){n&&Xae(n);const i=x2(t)?yoe:goe;function s(o,l){let c;const u={...x.useContext(C9),...o,layoutId:Aoe(o)},{isStatic:d}=u,f=eoe(o),p=i(o,d);if(!d&&XN){Eoe();const g=Soe(u);c=g.MeasureLayout,f.visualElement=_oe(t,p,u,r,g.ProjectionNode)}return A.jsxs(zT.Provider,{value:f,children:[c&&f.visualElement?A.jsx(c,{visualElement:f.visualElement,...u}):null,foe(t,o,boe(p,f.visualElement,l),p,d,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const a=x.forwardRef(s);return a[voe]=t,a}function Aoe({layoutId:t}){const e=x.useContext(FW).id;return e&&t!==void 0?e+"-"+t:t}function Eoe(t,e){x.useContext(I9).strict}function Soe(t){const{drag:e,layout:n}=uy;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Toe(t,e){if(typeof Proxy>"u")return SI;const n=new Map,r=(s,a)=>SI(s,a,t,e),i=(s,a)=>r(s,a);return new Proxy(i,{get:(s,a)=>a==="create"?r:(n.has(a)||n.set(a,SI(a,void 0,t,e)),n.get(a))})}function U9({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Poe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Coe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function TI(t){return t===void 0||t===1}function $R({scale:t,scaleX:e,scaleY:n}){return!TI(t)||!TI(e)||!TI(n)}function Jh(t){return $R(t)||z9(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function z9(t){return m3(t.x)||m3(t.y)}function m3(t){return t&&t!=="0%"}function OS(t,e,n){const r=t-n,i=e*r;return n+i}function g3(t,e,n,r,i){return i!==void 0&&(t=OS(t,i,r)),OS(t,n,r)+e}function UR(t,e=0,n=1,r,i){t.min=g3(t.min,e,n,r,i),t.max=g3(t.max,e,n,r,i)}function H9(t,{x:e,y:n}){UR(t.x,e.translate,e.scale,e.originPoint),UR(t.y,n.translate,n.scale,n.originPoint)}const y3=.999999999999,v3=1.0000000000001;function Ioe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,a;for(let o=0;o<i;o++){s=n[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&sm(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,H9(t,a)),r&&Jh(s.latestValues)&&sm(t,s.latestValues))}e.x<v3&&e.x>y3&&(e.x=1),e.y<v3&&e.y>y3&&(e.y=1)}function im(t,e){t.min=t.min+e,t.max=t.max+e}function b3(t,e,n,r,i=.5){const s=Wt(t.min,t.max,i);UR(t,e,n,s,r)}function sm(t,e){b3(t.x,e.x,e.scaleX,e.scale,e.originX),b3(t.y,e.y,e.scaleY,e.scale,e.originY)}function W9(t,e){return U9(Coe(t.getBoundingClientRect(),e))}function koe(t,e,n){const r=W9(t,n),{scroll:i}=e;return i&&(im(r.x,i.offset.x),im(r.y,i.offset.y)),r}const w3=()=>({translate:0,scale:1,origin:0,originPoint:0}),am=()=>({x:w3(),y:w3()}),_3=()=>({min:0,max:0}),hn=()=>({x:_3(),y:_3()}),zR={current:null},G9={current:!1};function Roe(){if(G9.current=!0,!!XN)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>zR.current=t.matches;t.addEventListener("change",e),e()}else zR.current=!1}const Ooe=new WeakMap;function Doe(t,e,n){for(const r in e){const i=e[r],s=n[r];if(qr(i))t.addValue(r,i);else if(qr(s))t.addValue(r,cy(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,cy(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const x3=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Moe{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=f2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Mi.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Bt.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=WT(n),this.isVariantNode=R9(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in d){const p=d[f];l[f]!==void 0&&qr(p)&&p.set(l[f])}}mount(e){var n;this.current=e,Ooe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),G9.current||Roe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:zR.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),mh(this.notifyUpdate),mh(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ly.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Bt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in uy){const n=uy[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):hn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<x3.length;r++){const i=x3[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=Doe(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=cy(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(VW(r)||$W(r))?r=parseFloat(r):!Kae(r)&&gh.test(n)&&(r=x9(e,n)),this.setBaseTarget(e,qr(r)?r.get():r)),qr(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=A2(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!qr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new t2),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){g2.render(this.render)}}class K9 extends Moe{constructor(){super(...arguments),this.KeyframeResolver=Mae}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;qr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function q9(t,{style:e,vars:n},r,i){const s=t.style;let a;for(a in e)s[a]=e[a];i==null||i.applyProjectionStyles(s,r);for(a in n)s.setProperty(a,n[a])}function Noe(t){return window.getComputedStyle(t)}class Loe extends K9{constructor(){super(...arguments),this.type="html",this.renderInstance=q9}readValueFromInstance(e,n){var r;if(Ly.has(n))return(r=this.projection)!=null&&r.isProjecting?MR(n):Zse(e,n);{const i=Noe(e),s=(i2(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return W9(e,n)}build(e,n,r){w2(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return E2(e,n,r)}}const X9=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function joe(t,e,n,r){q9(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(X9.has(i)?i:S2(i),e.attrs[i])}class Foe extends K9{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=hn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ly.has(n)){const r=_9(n);return r&&r.default||0}return n=X9.has(n)?n:S2(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return F9(e,n,r)}build(e,n,r){M9(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){joe(e,n,r,i)}mount(e){this.isSVGTag=L9(e.tagName),super.mount(e)}}const Voe=(t,e)=>x2(t)?new Foe(e):new Loe(e,{allowProjection:t!==x.Fragment});function xm(t,e,n){const r=t.getProps();return A2(r,e,n!==void 0?n:r.custom,t)}const HR=t=>Array.isArray(t);function Boe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,cy(n))}function $oe(t){return HR(t)?t[t.length-1]||0:t}function Uoe(t,e){const n=xm(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s){const o=$oe(s[a]);Boe(t,a,o)}}function zoe(t){return!!(qr(t)&&t.add)}function WR(t,e){const n=t.getValue("willChange");if(zoe(n))return n.add(e);if(!n&&dc.WillChange){const r=new dc.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function Y9(t){return t.props[V9]}const Hoe=t=>t!==null;function Woe(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Hoe),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const Goe={type:"spring",stiffness:500,damping:25,restSpeed:10},Koe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),qoe={type:"keyframes",duration:.8},Xoe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Yoe=(t,{keyframes:e})=>e.length>2?qoe:Ly.has(t)?t.startsWith("scale")?Koe(e[1]):Goe:Xoe;function Qoe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const T2=(t,e,n,r={},i,s)=>a=>{const o=p2(r,t)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c=c-No(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-c,onUpdate:f=>{e.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:s?void 0:i};Qoe(o)||Object.assign(u,Yoe(t,u)),u.duration&&(u.duration=No(u.duration)),u.repeatDelay&&(u.repeatDelay=No(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(VR(u),u.delay===0&&(d=!0)),(dc.instantAnimations||dc.skipAnimations)&&(d=!0,VR(u),u.delay=0),u.allowFlatten=!o.type&&!o.ease,d&&!s&&e.get()!==void 0){const f=Woe(u.keyframes,o);if(f!==void 0){Bt.update(()=>{u.onUpdate(f),u.onComplete()});return}}return o.isSync?new d2(u):new xae(u)};function Joe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Q9(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:a,...o}=e;r&&(s=r);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const u in o){const d=t.getValue(u,t.latestValues[u]??null),f=o[u];if(f===void 0||c&&Joe(c,u))continue;const p={delay:n,...p2(s||{},u)},g=d.get();if(g!==void 0&&!d.isAnimating&&!Array.isArray(f)&&f===g&&!p.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const b=Y9(t);if(b){const _=window.MotionHandoffAnimation(b,u,Bt);_!==null&&(p.startTime=_,y=!0)}}WR(t,u),d.start(T2(u,d,f,t.shouldReduceMotion&&v9.has(u)?{type:!1}:p,t,y));const v=d.animation;v&&l.push(v)}return a&&Promise.all(l).then(()=>{Bt.update(()=>{a&&Uoe(t,a)})}),l}function J9(t,e,n,r=0,i=1){const s=Array.from(t).sort((c,u)=>c.sortNodePosition(u)).indexOf(e),a=t.size,o=(a-1)*r;return typeof n=="function"?n(s,a):i===1?s*r:o-s*r}function GR(t,e,n={}){var l;const r=xm(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(Q9(t,r,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=i;return Zoe(t,e,c,u,d,f,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[c,u]=o==="beforeChildren"?[s,a]:[a,s];return c().then(()=>u())}else return Promise.all([s(),a(n.delay)])}function Zoe(t,e,n=0,r=0,i=0,s=1,a){const o=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),o.push(GR(l,e,{...a,delay:n+(typeof r=="function"?0:r)+J9(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(o)}function ele(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>GR(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=GR(t,e,n);else{const i=typeof e=="function"?xm(t,e,n.custom):e;r=Promise.all(Q9(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function Z9(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const tle=b2.length;function e8(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?e8(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<tle;n++){const r=b2[n],i=t.props[r];(cb(i)||i===!1)&&(e[r]=i)}return e}const nle=[...v2].reverse(),rle=v2.length;function ile(t){return e=>Promise.all(e.map(({animation:n,options:r})=>ele(t,n,r)))}function sle(t){let e=ile(t),n=A3(),r=!0;const i=l=>(c,u)=>{var f;const d=xm(t,u,l==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(d){const{transition:p,transitionEnd:g,...y}=d;c={...c,...y,...g}}return c};function s(l){e=l(t)}function a(l){const{props:c}=t,u=e8(t.parent)||{},d=[],f=new Set;let p={},g=1/0;for(let v=0;v<rle;v++){const b=nle[v],_=n[b],w=c[b]!==void 0?c[b]:u[b],T=cb(w),P=b===l?_.isActive:null;P===!1&&(g=v);let O=w===u[b]&&w!==c[b]&&T;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),_.protectedKeys={...p},!_.isActive&&P===null||!w&&!_.prevProp||HT(w)||typeof w=="boolean")continue;const C=ale(_.prevProp,w);let I=C||b===l&&_.isActive&&!O&&T||v>g&&T,M=!1;const L=Array.isArray(w)?w:[w];let N=L.reduce(i(b),{});P===!1&&(N={});const{prevResolvedValues:F={}}=_,j={...F,...N},K=G=>{I=!0,f.has(G)&&(M=!0,f.delete(G)),_.needsAnimating[G]=!0;const U=t.getValue(G);U&&(U.liveStyle=!1)};for(const G in j){const U=N[G],H=F[G];if(p.hasOwnProperty(G))continue;let re=!1;HR(U)&&HR(H)?re=!Z9(U,H):re=U!==H,re?U!=null?K(G):f.add(G):U!==void 0&&f.has(G)?K(G):_.protectedKeys[G]=!0}_.prevProp=w,_.prevResolvedValues=N,_.isActive&&(p={...p,...N}),r&&t.blockInitialAnimation&&(I=!1);const te=O&&C;I&&(!te||M)&&d.push(...L.map(G=>{const U={type:b};if(typeof G=="string"&&r&&!te&&t.manuallyAnimateOnMount&&t.parent){const{parent:H}=t,re=xm(H,G);if(H.enteringChildren&&re){const{delayChildren:ve}=re.transition||{};U.delay=J9(H.enteringChildren,t,ve)}}return{animation:G,options:U}}))}if(f.size){const v={};if(typeof c.initial!="boolean"){const b=xm(t,Array.isArray(c.initial)?c.initial[0]:c.initial);b&&b.transition&&(v.transition=b.transition)}f.forEach(b=>{const _=t.getBaseTarget(b),w=t.getValue(b);w&&(w.liveStyle=!0),v[b]=_??null}),d.push({animation:v})}let y=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(y=!1),r=!1,y?e(d):Promise.resolve()}function o(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(l,c)}),n[l].isActive=c;const u=a(l);for(const f in n)n[f].protectedKeys={};return u}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n,reset:()=>{n=A3()}}}function ale(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Z9(e,t):!1}function Kh(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function A3(){return{animate:Kh(!0),whileInView:Kh(),whileHover:Kh(),whileTap:Kh(),whileDrag:Kh(),whileFocus:Kh(),exit:Kh()}}class Dh{constructor(e){this.isMounted=!1,this.node=e}update(){}}class ole extends Dh{constructor(e){super(e),e.animationState||(e.animationState=sle(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();HT(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let lle=0;class cle extends Dh{constructor(){super(...arguments),this.id=lle++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const ule={animation:{Feature:ole},exit:{Feature:cle}};function hb(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function U_(t){return{point:{x:t.pageX,y:t.pageY}}}const hle=t=>e=>y2(e)&&t(e,U_(e));function C0(t,e,n,r){return hb(t,e,hle(n),r)}const t8=1e-4,dle=1-t8,fle=1+t8,n8=.01,ple=0-n8,mle=0+n8;function ci(t){return t.max-t.min}function gle(t,e,n){return Math.abs(t-e)<=n}function E3(t,e,n,r=.5){t.origin=r,t.originPoint=Wt(e.min,e.max,t.origin),t.scale=ci(n)/ci(e),t.translate=Wt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=dle&&t.scale<=fle||isNaN(t.scale))&&(t.scale=1),(t.translate>=ple&&t.translate<=mle||isNaN(t.translate))&&(t.translate=0)}function I0(t,e,n,r){E3(t.x,e.x,n.x,r?r.originX:void 0),E3(t.y,e.y,n.y,r?r.originY:void 0)}function S3(t,e,n){t.min=n.min+e.min,t.max=t.min+ci(e)}function yle(t,e,n){S3(t.x,e.x,n.x),S3(t.y,e.y,n.y)}function T3(t,e,n){t.min=e.min-n.min,t.max=t.min+ci(e)}function k0(t,e,n){T3(t.x,e.x,n.x),T3(t.y,e.y,n.y)}function Os(t){return[t("x"),t("y")]}const r8=({current:t})=>t?t.ownerDocument.defaultView:null,P3=(t,e)=>Math.abs(t-e);function vle(t,e){const n=P3(t.x,e.x),r=P3(t.y,e.y);return Math.sqrt(n**2+r**2)}class i8{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=CI(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=vle(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!g)return;const{point:y}=f,{timestamp:v}=vr;this.history.push({...y,timestamp:v});const{onStart:b,onMove:_}=this.handlers;p||(b&&b(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=PI(p,this.transformPagePoint),Bt.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=CI(f.type==="pointercancel"?this.lastMoveEventInfo:PI(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(f,b),y&&y(f,b)},!y2(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=i||window;const o=U_(e),l=PI(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=vr;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(e,CI(l,this.history)),this.removeListeners=V_(C0(this.contextWindow,"pointermove",this.handlePointerMove),C0(this.contextWindow,"pointerup",this.handlePointerUp),C0(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),mh(this.updatePoint)}}function PI(t,e){return e?{point:e(t.point)}:t}function C3(t,e){return{x:t.x-e.x,y:t.y-e.y}}function CI({point:t},e){return{point:t,delta:C3(t,s8(e)),offset:C3(t,ble(e)),velocity:wle(e,.1)}}function ble(t){return t[0]}function s8(t){return t[t.length-1]}function wle(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=s8(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>No(e)));)n--;if(!r)return{x:0,y:0};const s=Qs(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function _le(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Wt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Wt(n,t,r.max):Math.min(t,n)),t}function I3(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function xle(t,{top:e,left:n,bottom:r,right:i}){return{x:I3(t.x,n,i),y:I3(t.y,e,r)}}function k3(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Ale(t,e){return{x:k3(t.x,e.x),y:k3(t.y,e.y)}}function Ele(t,e){let n=.5;const r=ci(t),i=ci(e);return i>r?n=ab(e.min,e.max-r,t.min):r>i&&(n=ab(t.min,t.max-i,e.min)),hc(0,1,n)}function Sle(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const KR=.35;function Tle(t=KR){return t===!1?t=0:t===!0&&(t=KR),{x:R3(t,"left","right"),y:R3(t,"top","bottom")}}function R3(t,e,n){return{min:O3(t,e),max:O3(t,n)}}function O3(t,e){return typeof t=="number"?t:t[e]||0}const Ple=new WeakMap;class Cle{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=hn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(U_(d).point)},a=(d,f)=>{const{drag:p,dragPropagation:g,onDragStart:y}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Vae(p),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Os(b=>{let _=this.getAxisMotionValue(b).get()||0;if(Lo.test(_)){const{projection:w}=this.visualElement;if(w&&w.layout){const T=w.layout.layoutBox[b];T&&(_=ci(T)*(parseFloat(_)/100))}}this.originPoint[b]=_}),y&&Bt.postRender(()=>y(d,f)),WR(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:y,onDrag:v}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:b}=f;if(g&&this.currentDirection===null){this.currentDirection=Ile(b),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",f.point,b),this.updateAxis("y",f.point,b),this.visualElement.render(),v&&v(d,f)},l=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f,this.stop(d,f),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>Os(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)==null?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new i8(e,{onSessionStart:s,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:r8(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&Bt.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!cA(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=_le(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&rm(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=xle(r.layoutBox,e):this.constraints=!1,this.elastic=Tle(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Os(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Sle(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!rm(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=koe(r,i.root,this.visualElement.getTransformPagePoint());let a=Ale(i.layout.layoutBox,s);if(n){const o=n(Poe(a));this.hasMutatedConstraints=!!o,o&&(a=U9(o))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=Os(u=>{if(!cA(u,n,this.currentDirection))return;let d=l&&l[u]||{};a&&(d={min:0,max:0});const f=i?200:1e6,p=i?40:1e7,g={type:"inertia",velocity:r?e[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return WR(this.visualElement,e),r.start(T2(e,r,0,n,this.visualElement,!1))}stopAnimation(){Os(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Os(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Os(n=>{const{drag:r}=this.getProps();if(!cA(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[n];s.set(e[n]-Wt(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!rm(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Os(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=Ele({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Os(a=>{if(!cA(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(Wt(l,c,i[a]))})}addListeners(){if(!this.visualElement.current)return;Ple.set(this.visualElement,this);const e=this.visualElement.current,n=C0(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();rm(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Bt.read(r);const a=hb(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Os(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=KR,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function cA(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Ile(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class kle extends Dh{constructor(e){super(e),this.removeGroupControls=ta,this.removeListeners=ta,this.controls=new Cle(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ta}unmount(){this.removeGroupControls(),this.removeListeners()}}const D3=t=>(e,n)=>{t&&Bt.postRender(()=>t(e,n))};class Rle extends Dh{constructor(){super(...arguments),this.removePointerDownListener=ta}onPointerDown(e){this.session=new i8(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:r8(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:D3(e),onStart:D3(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&Bt.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=C0(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const rE={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function M3(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const xv={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(_e.test(t))t=parseFloat(t);else return t;const n=M3(t,e.target.x),r=M3(t,e.target.y);return`${n}% ${r}%`}},Ole={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=gh.parse(t);if(i.length>5)return r;const s=gh.createTransformer(t),a=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;i[0+a]/=o,i[1+a]/=l;const c=Wt(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=c),typeof i[3+a]=="number"&&(i[3+a]/=c),s(i)}};let II=!1;class Dle extends x.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;toe(Mle),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),II&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),rE.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:a}=r;return a&&(a.isPresent=s,II=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Bt.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),g2.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;II=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function a8(t){const[e,n]=qae(),r=x.useContext(FW);return A.jsx(Dle,{...t,layoutGroup:r,switchLayoutGroup:x.useContext(B9),isPresent:e,safeToRemove:n})}const Mle={borderRadius:{...xv,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xv,borderTopRightRadius:xv,borderBottomLeftRadius:xv,borderBottomRightRadius:xv,boxShadow:Ole};function Nle(t,e,n){const r=qr(t)?t:cy(t);return r.start(T2("",r,e,n)),r.animation}const Lle=(t,e)=>t.depth-e.depth;class jle{constructor(){this.children=[],this.isDirty=!1}add(e){QN(this.children,e),this.isDirty=!0}remove(e){JN(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Lle),this.isDirty=!1,this.children.forEach(e)}}function Fle(t,e){const n=Mi.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(mh(r),t(s-e))};return Bt.setup(r,!0),()=>mh(r)}const o8=["TopLeft","TopRight","BottomLeft","BottomRight"],Vle=o8.length,N3=t=>typeof t=="string"?parseFloat(t):t,L3=t=>typeof t=="number"||_e.test(t);function Ble(t,e,n,r,i,s){i?(t.opacity=Wt(0,n.opacity??1,$le(r)),t.opacityExit=Wt(e.opacity??1,0,Ule(r))):s&&(t.opacity=Wt(e.opacity??1,n.opacity??1,r));for(let a=0;a<Vle;a++){const o=`border${o8[a]}Radius`;let l=j3(e,o),c=j3(n,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||L3(l)===L3(c)?(t[o]=Math.max(Wt(N3(l),N3(c),r),0),(Lo.test(c)||Lo.test(l))&&(t[o]+="%")):t[o]=c}(e.rotate||n.rotate)&&(t.rotate=Wt(e.rotate||0,n.rotate||0,r))}function j3(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const $le=l8(0,.5,XW),Ule=l8(.5,.95,ta);function l8(t,e,n){return r=>r<t?0:r>e?1:n(ab(t,e,r))}function F3(t,e){t.min=e.min,t.max=e.max}function Ts(t,e){F3(t.x,e.x),F3(t.y,e.y)}function V3(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function B3(t,e,n,r,i){return t-=e,t=OS(t,1/n,r),i!==void 0&&(t=OS(t,1/i,r)),t}function zle(t,e=0,n=1,r=.5,i,s=t,a=t){if(Lo.test(e)&&(e=parseFloat(e),e=Wt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=Wt(s.min,s.max,r);t===s&&(o-=e),t.min=B3(t.min,e,n,o,i),t.max=B3(t.max,e,n,o,i)}function $3(t,e,[n,r,i],s,a){zle(t,e[n],e[r],e[i],e.scale,s,a)}const Hle=["x","scaleX","originX"],Wle=["y","scaleY","originY"];function U3(t,e,n,r){$3(t.x,e,Hle,n?n.x:void 0,r?r.x:void 0),$3(t.y,e,Wle,n?n.y:void 0,r?r.y:void 0)}function z3(t){return t.translate===0&&t.scale===1}function c8(t){return z3(t.x)&&z3(t.y)}function H3(t,e){return t.min===e.min&&t.max===e.max}function Gle(t,e){return H3(t.x,e.x)&&H3(t.y,e.y)}function W3(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function u8(t,e){return W3(t.x,e.x)&&W3(t.y,e.y)}function G3(t){return ci(t.x)/ci(t.y)}function K3(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Kle{constructor(){this.members=[]}add(e){QN(this.members,e),e.scheduleRender()}remove(e){if(JN(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function qle(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:f,skewX:p,skewY:g}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),g&&(r+=`skewY(${g}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const kI=["","X","Y","Z"],Xle=1e3;let Yle=0;function RI(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function h8(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Y9(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Bt,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&h8(r)}function d8({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=e==null?void 0:e()){this.id=Yle++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Zle),this.nodes.forEach(rce),this.nodes.forEach(ice),this.nodes.forEach(ece)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new jle)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new t2),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=P9(a)&&!Wae(a),this.instance=a;const{layoutId:o,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),t){let u,d=0;const f=()=>this.root.updateBlockedByResize=!1;Bt.read(()=>{d=window.innerWidth}),t(a,()=>{const p=window.innerWidth;p!==d&&(d=p,this.root.updateBlockedByResize=!0,u&&u(),u=Fle(f,250),rE.hasAnimatedSinceResize&&(rE.hasAnimatedSinceResize=!1,this.nodes.forEach(Y3)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&c&&(o||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||c.getDefaultTransition()||cce,{onLayoutAnimationStart:y,onLayoutAnimationComplete:v}=c.getProps(),b=!this.targetLayout||!u8(this.targetLayout,p),_=!d&&f;if(this.options.layoutRoot||this.resumeFrom||_||d&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...p2(g,"layout"),onPlay:y,onComplete:v};(c.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(u,_)}else d||Y3(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),mh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(sce),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&h8(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(q3);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(X3);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(nce),this.nodes.forEach(Qle),this.nodes.forEach(Jle)):this.nodes.forEach(X3),this.clearAllSnapshots();const o=Mi.now();vr.delta=hc(0,1e3/60,o-vr.timestamp),vr.timestamp=o,vr.isProcessing=!0,bI.update.process(vr),bI.preRender.process(vr),bI.render.process(vr),vr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,g2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(tce),this.sharedNodes.forEach(ace)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Bt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Bt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ci(this.snapshot.measuredBox.x)&&!ci(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=hn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!c8(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;a&&this.instance&&(o||Jh(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),uce(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:a}=this.options;if(!a)return hn();const o=a.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(hce))){const{scroll:u}=this.root;u&&(im(o.x,u.offset.x),im(o.y,u.offset.y))}return o}removeElementScroll(a){var l;const o=hn();if(Ts(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Ts(o,a),im(o.x,d.offset.x),im(o.y,d.offset.y))}return o}applyTransform(a,o=!1){const l=hn();Ts(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&sm(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Jh(u.latestValues)&&sm(l,u.latestValues)}return Jh(this.latestValues)&&sm(l,this.latestValues),l}removeTransform(a){const o=hn();Ts(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Jh(c.latestValues))continue;$R(c.latestValues)&&c.updateSnapshot();const u=hn(),d=c.measurePageBox();Ts(u,d),U3(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Jh(this.latestValues)&&U3(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==vr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var f;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:d}=this.options;if(!(!this.layout||!(u||d))){if(this.resolvedRelativeTargetAt=vr.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hn(),this.relativeTargetOrigin=hn(),k0(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Ts(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=hn(),this.targetWithTransforms=hn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),yle(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ts(this.target,this.layout.layoutBox),H9(this.target,this.targetDelta)):Ts(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hn(),this.relativeTargetOrigin=hn(),k0(this.relativeTargetOrigin,this.target,p.target),Ts(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||$R(this.parent.latestValues)||z9(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var g;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===vr.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;Ts(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;Ioe(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=hn());const{target:p}=a;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(V3(this.prevProjectionDelta.x,this.projectionDelta.x),V3(this.prevProjectionDelta.y,this.projectionDelta.y)),I0(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==f||!K3(this.projectionDelta.x,this.prevProjectionDelta.x)||!K3(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=am(),this.projectionDelta=am(),this.projectionDeltaWithTransform=am()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=am();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=hn(),p=l?l.source:void 0,g=this.layout?this.layout.source:void 0,y=p!==g,v=this.getStack(),b=!v||v.members.length<=1,_=!!(y&&!b&&this.options.crossfade===!0&&!this.path.some(lce));this.animationProgress=0;let w;this.mixTargetDelta=T=>{const P=T/1e3;Q3(d.x,a.x,P),Q3(d.y,a.y,P),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(k0(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),oce(this.relativeTarget,this.relativeTargetOrigin,f,P),w&&Gle(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=hn()),Ts(w,this.relativeTarget)),y&&(this.animationValues=u,Ble(u,c,this.latestValues,P,_,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var o,l,c;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(mh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Bt.update(()=>{rE.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=cy(0)),this.currentAnimation=Nle(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Xle),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:u}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&f8(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||hn();const d=ci(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const f=ci(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+f}Ts(o,l),sm(o,u),I0(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Kle),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&RI("z",a,c,this.animationValues);for(let u=0;u<kI.length;u++)RI(`rotate${kI[u]}`,a,c,this.animationValues),RI(`skew${kI[u]}`,a,c,this.animationValues);a.render();for(const u in c)a.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=nE(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=nE(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Jh(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const u=c.animationValues||c.latestValues;this.applyTransformsToTarget();let d=qle(this.projectionDeltaWithTransform,this.treeScale,u);l&&(d=l(u,d)),a.transform=d;const{x:f,y:p}=this.projectionDelta;a.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,c.animationValues?a.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:a.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const g in ub){if(u[g]===void 0)continue;const{correct:y,applyTo:v,isCSSVariable:b}=ub[g],_=d==="none"?u[g]:y(u[g],c);if(v){const w=v.length;for(let T=0;T<w;T++)a[v[T]]=_}else b?this.options.visualElement.renderState.vars[g]=_:a[g]=_}this.options.layoutId&&(a.pointerEvents=c===this?nE(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(q3),this.root.sharedNodes.clear()}}}function Qle(t){t.updateLayout()}function Jle(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,a=e.source!==t.layout.source;s==="size"?Os(d=>{const f=a?e.measuredBox[d]:e.layoutBox[d],p=ci(f);f.min=r[d].min,f.max=f.min+p}):f8(s,e.layoutBox,r)&&Os(d=>{const f=a?e.measuredBox[d]:e.layoutBox[d],p=ci(r[d]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const o=am();I0(o,r,e.layoutBox);const l=am();a?I0(l,t.applyTransform(i,!0),e.measuredBox):I0(l,r,e.layoutBox);const c=!c8(o);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const g=hn();k0(g,e.layoutBox,f.layoutBox);const y=hn();k0(y,r,p.layoutBox),u8(g,y)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=g,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Zle(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function ece(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function tce(t){t.clearSnapshot()}function q3(t){t.clearMeasurements()}function X3(t){t.isLayoutDirty=!1}function nce(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Y3(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function rce(t){t.resolveTargetDelta()}function ice(t){t.calcProjection()}function sce(t){t.resetSkewAndRotation()}function ace(t){t.removeLeadSnapshot()}function Q3(t,e,n){t.translate=Wt(e.translate,0,n),t.scale=Wt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function J3(t,e,n,r){t.min=Wt(e.min,n.min,r),t.max=Wt(e.max,n.max,r)}function oce(t,e,n,r){J3(t.x,e.x,n.x,r),J3(t.y,e.y,n.y,r)}function lce(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const cce={duration:.45,ease:[.4,0,.1,1]},Z3=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),e4=Z3("applewebkit/")&&!Z3("chrome/")?Math.round:ta;function t4(t){t.min=e4(t.min),t.max=e4(t.max)}function uce(t){t4(t.x),t4(t.y)}function f8(t,e,n){return t==="position"||t==="preserve-aspect"&&!gle(G3(e),G3(n),.2)}function hce(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const dce=d8({attachResizeListener:(t,e)=>hb(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),OI={current:void 0},p8=d8({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!OI.current){const t=new dce({});t.mount(window),t.setOptions({layoutScroll:!0}),OI.current=t}return OI.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),fce={pan:{Feature:Rle},drag:{Feature:kle,ProjectionNode:p8,MeasureLayout:a8}};function n4(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Bt.postRender(()=>s(e,U_(e)))}class pce extends Dh{mount(){const{current:e}=this.node;e&&(this.unmount=Bae(e,(n,r)=>(n4(this.node,r,"Start"),i=>n4(this.node,i,"End"))))}unmount(){}}class mce extends Dh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=V_(hb(this.node.current,"focus",()=>this.onFocus()),hb(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function r4(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Bt.postRender(()=>s(e,U_(e)))}class gce extends Dh{mount(){const{current:e}=this.node;e&&(this.unmount=Hae(e,(n,r)=>(r4(this.node,r,"Start"),(i,{success:s})=>r4(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const qR=new WeakMap,DI=new WeakMap,yce=t=>{const e=qR.get(t.target);e&&e(t)},vce=t=>{t.forEach(yce)};function bce({root:t,...e}){const n=t||document;DI.has(n)||DI.set(n,{});const r=DI.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(vce,{root:t,...e})),r[i]}function wce(t,e,n){const r=bce(e);return qR.set(t,n),r.observe(t),()=>{qR.delete(t),r.unobserve(t)}}const _ce={some:0,all:1};class xce extends Dh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:_ce[i]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),f=c?u:d;f&&f(l)};return wce(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Ace(e,n))&&this.startObserver()}unmount(){}}function Ace({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Ece={inView:{Feature:xce},tap:{Feature:gce},focus:{Feature:mce},hover:{Feature:pce}},Sce={layout:{ProjectionNode:p8,MeasureLayout:a8}},Tce={...ule,...Ece,...fce,...Sce},se=Toe(Tce,Voe),P2=[{slug:"general-relativity",title:"   ",category:"relativity",description:"Einstein Field Equation, Schwarzschild/Kerr ,  ",content:{overview:"    . Schwarzschild Kerr        (vacuum solution).",keyPoints:["Einstein Field Equation: G = 8GT","Schwarzschild :  ,   ","Kerr :  , ergosphere "," :  / ","Shapiro delay:    ",": f = f0(1-2GM/rc)"],keyFormulas:[{tex:"G_{\\mu\\nu} = R_{\\mu\\nu} - \\frac{1}{2}g_{\\mu\\nu}R = \\frac{8\\pi G}{c^4}T_{\\mu\\nu}",desc:"Einstein Field Equation"},{tex:"ds^2 = -\\left(1 - \\frac{2GM}{c^2r}\\right)c^2dt^2 + \\left(1 - \\frac{2GM}{c^2r}\\right)^{-1}dr^2 + r^2(d\\theta^2 + \\sin^2\\theta\\,d\\phi^2)",desc:"Schwarzschild "},{tex:"r_s = \\frac{2GM}{c^2}",desc:"Schwarzschild "},{tex:"\\frac{d^2x^\\lambda}{d\\tau^2} + \\Gamma^\\lambda_{\\mu\\nu}\\frac{dx^\\mu}{d\\tau}\\frac{dx^\\nu}{d\\tau} = 0",desc:" "}],observations:'   (42.98"/century),  ,  ',relatedPapers:["The Mathematical Theory of Black Holes (Chandrasekhar, 1983)","General Relativity (Carroll, 2004)","Gravitational Waves from Coalescing Compact Binaries (Abbott et al. LIGO, 2016)"]}},{slug:"stellar-structure",title:"   ",category:"stars",description:"  , Lane-Emden ,   ",content:{overview:"         .         .",keyPoints:[" : dP/dr = -GM/r","  : radiative flux  opacity ","Lane-Emden  :   "," : PP chain (), CNO cycle ()"," : convection instability criterion (adiabatic gradient vs. radiative gradient)",": photosphere  "],keyFormulas:[{tex:"\\frac{dP}{dr} = -\\rho \\frac{GM(<r)}{r^2}",desc:"  "},{tex:"F_\\mathrm{rad} = -\\frac{c}{3\\kappa\\rho}\\frac{dT^4}{dr}",desc:" "},{tex:"\\frac{d^2u}{d\\xi^2} + \\frac{2}{\\xi}\\frac{du}{d\\xi} + u^n = 0",desc:"Lane-Emden "},{tex:"PP\\,\\mathrm{chain}: {}^1H + {}^1H \\to {}^2H + e^+ + \\nu",desc:"-  "}],observations:"  L=3.82810W,  R=6.9610m,   T_c~1.5710K,  _c~150 g/cm",relatedPapers:["Stellar Interiors: Physical Principles, Structure and Evolution (Hansen, Kawaler & Trimble, 2004)","The Theory of Stellar Structure and Evolution (Kippenhahn, Weigert & Weiss, 2012)"]}},{slug:"black-hole-astrophysics",title:" : Kerr  ",category:"relativity",description:"Kerr ergosphere, ISCO , Hawking ,  ",content:{overview:" (Kerr )   .  (Hawking )   ,       .",keyPoints:["Kerr :   a = J/M ","Ergosphere:   g_tt=0 ","ISCO (Innermost Stable Circular Orbit): a=0  r_ISCO = 6GM/c","Hawking :  T_H = c/(8kGM)","Penrose process:    ","Accretion disk: viscosity   "],keyFormulas:[{tex:"ds^2 = -\\frac{\\Delta}{\\rho^2}(c\\,dt - a\\sin^2\\theta\\,d\\phi)^2 + \\frac{\\rho^2}{\\Delta}dr^2 + \\rho^2 d\\theta^2 + \\frac{\\sin^2\\theta}{\\rho^2}(a c\\,dt - (r^2+a^2)d\\phi)^2",desc:"Kerr  (Boyer-Lindquist )"},{tex:"r_{\\mathrm{ISCO}} = \\frac{GM}{c^2}\\left(3 + Z_2 - \\sqrt{(3-Z_1)(3+Z_1+2Z_2)}\\right)",desc:"ISCO  (Kerr )"},{tex:"T_H = \\frac{\\hbar c^3}{8\\pi k_B G M}",desc:"Hawking "},{tex:"\\eta = 1 - \\sqrt{1 - \\frac{2GM}{c^2 r_{\\mathrm{ISCO}}}}",desc:" "}],observations:"M87   M=(6.50.7)10M (EHT 2019), Sagittarius A*  M=(4.2970.013)10M",relatedPapers:["Black Hole Accretion in Supermassive and Stellar Mass Regimes (Done et al. 2007)","The Event Horizon Telescope Collaboration (2019, ApJ Letters)","Information and the Nature of Reality (Wheeler & Ford, 1998)"]}},{slug:"galaxy-dynamics",title:"  ",category:"galaxies",description:"Jeans ,   , CDM,  ",content:{overview:"  , ,    . Jeans        .",keyPoints:["Jeans :    "," :   NFW  ","Virial theorem: 2K + U = 0 ( )"," :   ~85%","CDM : M0.3, 0.7"," : N-body + hydrodynamics"],keyFormulas:[{tex:"\\frac{d\\sigma_r^2}{dr} + 2\\frac{\\beta}{r}\\sigma_r^2 = -\\frac{GM(<r)}{r^2}",desc:"Jeans "},{tex:"v_{\\mathrm{c}}(r) = \\sqrt{\\frac{GM(<r)}{r}}",desc:"  "},{tex:"\\rho_{\\mathrm{NFW}}(r) = \\frac{\\rho_s}{(r/r_s)(1+r/r_s)^2}",desc:"Navarro-Frenk-White  "},{tex:"2\\langle K \\rangle + \\langle U \\rangle = 0",desc:" Virial "}],observations:"    (220 km/s at 8 kpc),    ( )",relatedPapers:["Galactic Dynamics (Binney & Tremaine, 2008)","The Concentration of Dark Matter Halos (Navarro, Frenk & White, 1997)","Simulations of the formation, evolution and clustering of galaxies and quasars (Springel et al. 2005)"]}},{slug:"cosmology",title:"  ",category:"cosmology",description:"Friedmann , CMB  ,  ",content:{overview:"      . Friedmann     , CMB    CDM  .",keyPoints:["Friedmann : a(t)  "," : t = 13.7870.020 Gyr (Planck 2018)"," : _   120 ","CMB :   T/T ~ 10","  : C_     "," : w(z) = p/(c)"],keyFormulas:[{tex:"\\left(\\frac{\\dot{a}}{a}\\right)^2 + \\frac{k}{a^2} = \\frac{8\\pi G}{3}\\rho",desc:"1 Friedmann "},{tex:"\\frac{\\ddot{a}}{a} = -\\frac{4\\pi G}{3}(\\rho + 3p) + \\frac{\\Lambda}{3}",desc:"2 Friedmann "},{tex:"T(z) = T_0 (1+z)",desc:"  "},{tex:"w = \\frac{p}{\\rho c^2}",desc:"  "}],observations:"CMB: b=0.049, cdm=0.264, =0.684, H0=67.4 km/s/Mpc (Planck 2018)",relatedPapers:["Planck 2018 results (Planck Collaboration, 2018)","A High-Resolution Cosmic Microwave Background Map (WMAP, 2003-2013)","Observational Evidence from Supernovae for an Accelerating Universe (Perlmutter et al. 1999)"]}},{slug:"observational-astronomy",title:" : , , ",category:"observations",description:"Equivalent Width, Voigt profile, CCD photometry,  ",content:{overview:"    .   (Equivalent Width, Doppler shift), CCD ,      .",keyPoints:["Equivalent Width (EW):    ","Voigt profile:  +   ","CCD : -(S/N), (dynamic range)",'X-ray : Chandra  0.5",   100 eV',"IR  (JWST): NIRCam  0.6-5m,  /~1600"," (VLBI): baseline ~10000 km,  ~as"],keyFormulas:[{tex:"EW = \\int_{\\lambda_1}^{\\lambda_2} \\left(1 - \\frac{F_\\lambda}{F_c}\\right)d\\lambda",desc:""},{tex:"f(\\nu) = \\frac{I(\\nu_0)}{\\sqrt{\\pi}}\\int_{-\\infty}^{\\infty}\\frac{e^{-t^2}}{1+(a(\\nu-\\nu_0+t\\Delta\\nu_D)/\\Delta\\nu_D)^2}dt",desc:"Voigt "},{tex:"(S/N)_{\\mathrm{CCD}} = \\frac{Ne}{\\sqrt{Ne + n_r^2 + n_d^2}}",desc:"CCD -"},{tex:"\\theta_{\\mathrm{res}} \\approx 1.22\\frac{\\lambda}{D}",desc:"  (Rayleigh criterion)"}],observations:"JWST NIRCam z~11   (_obs~2m), Chandra    , EHT   (48as)",relatedPapers:["Observational Astrophysics (Birney, Gonzalez & Oesper, 2006)","Modern Observational Astronomy: the Principles, Science and Techniques (Filippenko, 2006)"]}},{slug:"mass-luminosity",title:"- ",category:"stars",description:"    ",content:{overview:"       .       .",keyPoints:[": L  M^3.5 ()","     (2.5~4.5)","     "],keyFormulas:[{tex:"L \\approx M^{3.5}",desc:"-  ()"},{tex:"t_{\\mathrm{lifetime}} \\approx \\frac{M}{L} \\propto M^{-2.5}",desc:"  "}],observations:"  1   1, 10   ~3000",relatedPapers:["Mass-Luminosity Relations (1970)","Stellar Evolution Theory (1995)"]}},{slug:"dark-matter-rotation",title:"  ",category:"galaxies",description:"      ",content:{overview:"            ,    .",keyPoints:["   :    "," :  v  1/r ( )",": v   (100~300 km/s)"," :   ~85%"],keyFormulas:[{tex:"v(r) = \\sqrt{\\frac{GM(<r)}{r}}",desc:"   "},{tex:"M(<r) \\propto r",desc:" r  "}],observations:"M31 ,     ",relatedPapers:["The Rotation of Spiral Nebulae (1975)","Dark Matter and Galaxy Formation (2010)"]}},{slug:"cosmic-microwave-background",title:"  (CMB)",category:"cosmology",description:"    , ,  ",content:{overview:"CMB   38       .      .",keyPoints:[": 1965 Penzias & Wilson",": 2.725 K ( )",":   T/T ~ 10",":   "],keyFormulas:[{tex:"T(z) = T_0 (1 + z)",desc:"  CMB "},{tex:"T_0 = 2.725 \\, \\mathrm{K}",desc:"CMB  "}],observations:"WMAP, Planck   m=0.315, =0.685, H0=67 km/s/Mpc ",relatedPapers:["A Measurement of the Fluctuations in the Cosmic Microwave Background (1992)","Planck 2018 results (2018)"]}},{slug:"gravitational-waves",title:"   ",category:"observations",description:"LIGO/Virgo ,  ,  ,   ",content:{overview:"     . 2015  (GW150914) ,   (BBH),  (BNS),  (NSBH)    . /          .",keyPoints:["LIGO/Virgo :    h ~ 10  "," :  (inspection)  (merger)  (ringdown) 3"," :  , , ,   Bayesian "," : r-process     ",": GW + GRB() + kilonova()  "," :   H0  ,   "],keyFormulas:[{tex:"h_+(t) = \\frac{2G}{c^4}\\frac{M_c^{5/3}}{D_L}\\left(\\pi f(t)\\right)^{2/3}\\cos(\\Phi(t))",desc:"  +  ( )"},{tex:"\\frac{df}{dt} = \\frac{96}{5}\\pi^{8/3}\\frac{G^{5/3}}{c^5}M_c^{5/3}f^{11/3}",desc:"   (chirp)"},{tex:"M_c = \\frac{(m_1 m_2)^{3/5}}{(m_1 + m_2)^{1/5}}",desc:" (chirp mass)"},{tex:"T_{\\mathrm{merge}} = \\frac{5}{256}\\frac{c^5}{G^3}\\frac{1}{M_c^{5/3}\\pi^{8/3}f_0^{8/3}}",desc:"   (f)"},{tex:"Q = \\frac{M \\omega}{c} \\quad (\\text{ISCO})\\, Q_{\\text{Kerr}} \\sim \\frac{c^3}{G M} \\left(1 + \\sqrt{1-a^*/a}\\right)",desc:"  "}],observations:"GW150914:  36+29 M, GW170817:  1.36-1.60 M, GW190814: -  (  9:1)",relatedPapers:["Observation of Gravitational Waves from a Binary Black Hole Merger (Abbott et al., PRL 2016)","GW170817: Observation of Gravitational Waves from a Binary Neutron Star Inspiral (Abbott et al., PRL 2017)","Tests of General Relativity with GW150914 (Abbott et al., PRL 2016)"]}},{slug:"high-energy-astrophysics",title:"  X ",category:"observations",description:"X-ray binary, AGN  , Compton , Synchrotron ",content:{overview:"  X(0.1~100 keV), (>100 keV)   . X , (AGN),      .      Compton  Synchrotron     .",keyPoints:["X-ray binary: / +   ( )","Low-mass X-ray binary (LMXB):   < 1 M,  X ","High-mass X-ray binary (HMXB):   > 10 M,  ","Compton :   +    ,  ","Inverse Compton:   +     X/","Synchrotron :     ","AGN  :   Seyfert 1/2  (  )"],keyFormulas:[{tex:"E_\\gamma \\approx 4\\gamma k_B T_e",desc:"Compton   (Thomson regime)"},{tex:"\\nu_{\\mathrm{sync}} = \\frac{e B}{2\\pi m_e c} \\gamma^2",desc:"Synchrotron  "},{tex:"L_\\mathrm{Edd} = \\frac{4\\pi G M m_p c}{\\sigma_T} \\approx 1.3 \\times 10^{38} \\left(\\frac{M}{M_\\odot}\\right) \\, \\mathrm{erg~s^{-1}}",desc:"Eddington  "},{tex:"\\tau_T = n_e \\sigma_T L",desc:"Thomson "}],observations:"Cygnus X-1 ( HMXB), Sco X-1 ( LMXB), M87  AGN ( ), NGC 4151 ()",relatedPapers:["Physics of Compact Objects (Wheeler et al., 1996)","X-ray Binaries (Lewin & van der Klis, 2006)","AGN Unification Model (Antonucci, 1993)"]}},{slug:"cosmic-ray-physics",title:"   ",category:"observations",description:"Fermi ,  ,   , - ",content:{overview:"    ( ).  ,  ,    . Fermi          .   ,  ,     .",keyPoints:["Fermi 1 :  / ,   (E/E  %)","Fermi 2 :  (magnetic mirror)    ","  : SNe Ia  SNe II  "," : E^(-2.7) power law (  10~10 eV)"," : CR      (  )"," : ~90% , ~10% , ~1%  "," (UHECR): E > 10 eV,  (GZK cutoff)"],keyFormulas:[{tex:"\\frac{dE}{dt} \\propto E",desc:"Fermi 1  (  )"},{tex:"N(E) \\propto E^{-\\alpha}",desc:"  power law (  2.7)"},{tex:"E_c = \\frac{3eB\\,r_L^2}{2\\Delta t}",desc:"Fermi    (  r_L,   t)"},{tex:"E_{\\mathrm{GZK}} \\approx 5 \\times 10^{19} \\, \\mathrm{eV}",desc:"GZK cutoff  (CMB )"}],observations:"  :    , IceCube   ( CR  )",relatedPapers:["The Origin of Cosmic Rays (Jokipii, 1987)","Cosmic Ray Propagation and Solar Modulation (Potgieter, 2013)","Supernova Remnants as Cosmic Ray Accelerators (Berezhko & Vlk, 2007)"]}},{slug:"adaptive-optics-interferometry",title:"  ",category:"observations",description:"  , VLBI,  ,  ",content:{overview:"    . (AO)          . VLBI( )         .",keyPoints:[" seeing:      (typical ~0.5~2 arcsec)"," :  = /(2D), D  ",": (wavefront sensor) +  (deformable mirror)  ","Strehl ratio: AO  . Strehl  1 (), 0 (  )","VLBI (Very Long Baseline Interferometry):   ,   "," : Keck I&II, VLTI (  ~ 1 )"," (phase closure):     "],keyFormulas:[{tex:"\\theta_{\\mathrm{diff}} = 1.22 \\frac{\\lambda}{D}",desc:"Rayleigh  "},{tex:"B_{\\mathrm{eff}} = \\lambda D / d",desc:"   ( , D baseline, d  )"},{tex:"S = \\exp\\left(-\\frac{\\pi^2}{2\\ln 2} \\sigma_\\phi^2\\right)",desc:"Strehl ratio (_: RMS  )"}],observations:"Event Horizon Telescope (EHT): 10  VLBI M87, Sgr A*   (2019, 2022)",relatedPapers:["Adaptive Optics for Astronomy (Roddier, 1999)","VLBI Astrometry (Porcas et al., 2003)","First M87 Event Horizon Telescope Results (EHT Collaboration, 2019)"]}},{slug:"modified-gravity",title:" : MOND TeVeS",category:"relativity",description:"  ,   , CDM ",content:{overview:"           . MOND (  )      , TeVeS  .",keyPoints:["MOND : a < a  F = m(a/a)  (a ~ 1.210 m/s)","  :   MOND   ( )","Deep MOND (Deep Modified Newtonian Dynamics): a << a F  (GMm/r)","TeVeS (Tensor-Vector-Scalar):  MOND,    ","Bullet Cluster :     , MOND  ","  (UV completion): MOND   "],keyFormulas:[{tex:"F = m \\frac{a^2}{a_0}\\,\\, (a << a_0)",desc:"Deep MOND "},{tex:"a_0 = \\frac{cH_0}{6}\\approx 1.2 \\times 10^{-10}\\,\\mathrm{m/s^2}",desc:"MOND "},{tex:"v_\\mathrm{rot} \\approx \\sqrt[4]{GMa_0}\\,\\, (a << a_0)",desc:"MOND   ( )"}],observations:"  ,   , CMB , BBN  ",relatedPapers:["MOND and the Dark Matter Problem (Milgrom, 2015)","Relativistic MOND via TeVeS (Bekenstein, 2004)","The Bullet Cluster Evidence against Dark Matter (Clowe et al., 2006)"]}},{slug:"dark-matter-detection",title:" : WIMPs, Axions,  ",category:"galaxies",description:" ,  ,  ,  ",content:{overview:"    85%   . WIMPs (   ) axions  ,     .",keyPoints:["WIMPs (Weakly Interacting Massive Particles):  10~1000 GeV/c,   ","Axions:    (eV ), QCD  "," : XENON, LUX, SuperCDMS       "," :      ,  "," : LHC      "," :    "],keyFormulas:[{tex:"\\sigma_{\\mathrm{WIMP-nucleon}} \\sim 10^{-45}\\,\\mathrm{cm}^2\\,\\, (\\mathrm{spin\\text{-}independent})",desc:"WIMP-  "},{tex:"m_a \\sim 10^{-6}\\,\\mathrm{eV} \\sim 10^{-2}\\,\\mathrm{eV}",desc:"  "},{tex:"F_a = \\frac{m_e v^2}{g_{a\\gamma\\gamma} m_a}",desc:"  "}],observations:"Planck 2018: _cdm h = 0.1200.001, LHC Run 2: WIMP   , AMS:   ",relatedPapers:["Dark Matter Candidates: From Theory to Direct Detection (Hooper & Kolb, 2010)","Axion Dark Matter Searches (Irastorza & Redondo, 2018)","XENON1T Results on Light Dark Matter Particles (XENON Collaboration, 2019)"]}},{slug:"exoplanet-systems",title:": , ,  ",category:"stars",description:"  ,  ,   , TRAPPIST-1 ",content:{overview:"5500   (2024).   (protoplanetary disk)    , /     .",keyPoints:[" :          (  )"," :        (m sin i)"," (transit photometry):        ( 0.01%)"," :      (HO, CO, CH)","  :         ","TESS/JWST:   ,    "],keyFormulas:[{tex:"\\frac{\\Delta F}{F} = \\frac{R_p^2}{R_*^2}",desc:"   (R_p: , R_*:  )"},{tex:"a_\\mathrm{HZ} = \\sqrt{\\frac{L_*}{L_\\odot}}",desc:"   "},{tex:"K = \\frac{(m \\sin i)}{\\sqrt{1-e^2}} \\sqrt{\\frac{GM_*}{a^3}}",desc:"RV  ( )"}],observations:"Kepler  2662, TESS  600+ (), TRAPPIST-1: 7   (3   )",relatedPapers:["Exoplanet Atmospheres (Seager, 2010)","Planet Formation in Protoplanetary Disks (Nakano et al., 2015)","JWST Transiting Exoplanet Community Early Release Science Program (Louie et al., 2023)"]}},{slug:"supernova-cosmology",title:" :  Ia  ",category:"cosmology",description:"  Ia ,   ,  , w ",content:{overview:'1998,   Type Ia  "  "   (Nobel 2011). SNe Ia      .',keyPoints:["Type Ia SN:       ",":    M_V  -19.3 (0.3)","Phillips :       (  )","Dust extinction:     (E(B-V) )","Hubble diagram:   vs  _ _m  "," :  ()  , w = -1 "],keyFormulas:[{tex:"m = M + 5\\log_{10}(d_L) + 25",desc:"  (m:  , M:  )"},{tex:"d_L = \\frac{1+z}{H_0} \\int_0^z \\frac{dz^\\prime}{E(z^\\prime)}",desc:"  (CDM)"},{tex:"M_V^\\mathrm{corr} = M_V - 2.5\\alpha(s-1)",desc:"Phillips  (s:  )"}],observations:"Riess et al. 1998 42 SNe Ia, Perlmutter et al. 1999 52 SNe Ia,  1000+  , H = 73.041.04 km/s/Mpc (SH0ES 2022)",relatedPapers:["Observational Evidence from Supernovae for an Accelerating Universe (Riess et al., 1998)","Measurements of  and  from 42 High-Redshift Supernovae (Perlmutter et al., 1999)","Local Void is Consistent with CDM (Kenworthy et al., 2021)"]}},{slug:"agn-unified-model",title:"   : , ,  ",category:"galaxies",description:" ,  , Fanaroff-Riley , Eddington ",content:{overview:"AGN (Active Galactic Nuclei)  (SMBH)  .  ( ,  )    ,   .",keyPoints:["SMBH:    10~10 M",":   (inner disk) +   (outer disk)","(Torus):    ,    >> 1","(Jet):   ,    ~ 0.99","Fanaroff-Riley : FR I (,  ) vs FR II (,  )","Eddington : L_Edd = 4GMm_p c/_T  1.410(M/M) W"," (BLR/NLR):    "],keyFormulas:[{tex:"L_\\mathrm{Edd} = \\frac{4\\pi GMm_p c}{\\sigma_T} = 1.4 \\times 10^{31}\\left(\\frac{M}{M_\\odot}\\right)\\,\\mathrm{W}",desc:"Eddington "},{tex:"\\lambda_\\mathrm{Edd} = \\frac{L_\\mathrm{bol}}{L_\\mathrm{Edd}}",desc:"Eddington "},{tex:"\\dot{M} = \\frac{L}{\\eta c^2}",desc:" (: radiative efficiency)"}],observations:"M87 SMBH M=(6.50.7)10M, Centaurus A   >4 Mpc, NGC 1068   (ALMA)",relatedPapers:["AGN Unification: The Quest Continues (Krolik, 2007)","Accretion in Supermassive Black Holes (Narayan & Quataert, 2005)","First M87 Event Horizon Telescope Results (EHT Collaboration, 2019)"]}}],i4=[{term:"Absolute Magnitude ()",definition:"  10 pc    .    ."},{term:"Accretion Disk ( )",definition:",        .  40%   ."},{term:"Adiabatic Gradient ( )",definition:"        . dT/dP = T/(P)."},{term:"Blackbody Radiation ()",definition:"   ,      . Planck  ."},{term:"Blue Shift ()",definition:"      .  < 0."},{term:"CCD Photometry (CCD )",definition:"Charge-Coupled Device    . -  100  ."},{term:"CMB Power Spectrum (CMB )",definition:"CMB      C_ .  ,    ."},{term:"CNO Cycle (CNO )",definition:"   : C  N  C  N  O  N  C + He."},{term:"Doppler Shift ( )",definition:"    . v << c  / = v/c."},{term:"Dynamical Mass ( )",definition:"Jeans     .      ."},{term:"EOS Parameter ( )",definition:" w = p/(c). CDM w = -1.  ."},{term:"Equivalent Width (, EW)",definition:"     .  column density  ."},{term:"Ergosphere ()",definition:"Kerr   g_tt > 0 .       ."},{term:"Friedmann Equation ( )",definition:"    . (/a) + k/a = 8G/3."},{term:"Geodesic ()",definition:'    . Riemannian  "" .'},{term:"Gravitational Redshift ()",definition:"     . / = -GM/cr."},{term:"Gravitational Waves ()",definition:"   .  h ~ 10 (LIGO).  ,   ."},{term:"Gravitational Wave Strain ( )",definition:"LIGO     : h = L/L ~ 10.   ."},{term:"Gravitational Wave Detector ( )",definition:"LIGO, Virgo, KAGRA    .      ."},{term:"MOND (Modified Newtonian Dynamics)",definition:"      . a < a ~ 10 m/s   ."},{term:"TeVeS (Tensor-Vector-Scalar Gravity)",definition:"MOND  .   = ."},{term:"Bullet Cluster ( )",definition:"    . X-        ."},{term:"WIMPs (Weakly Interacting Massive Particles)",definition:" .  10~1000 GeV/c,     ."},{term:"Axion ()",definition:"     (eV~meV ). QCD  Peccei-Quinn  ."},{term:"Exoplanet ()",definition:"    . 5500+  (2024).  ,   ."},{term:"Habitable Zone (  )",definition:"          .    ."},{term:"Type Ia Supernova (Ia )",definition:"      .      ."},{term:"Phillips Relation (Phillips )",definition:"Type Ia SN     .      ."},{term:"AGN (Active Galactic Nuclei)",definition:" .       ."},{term:"SMBH (Supermassive Black Hole)",definition:"   .  10~10 M.     ."},{term:"AGN Torus (AGN )",definition:"AGN     .    >> 1.     ."},{term:"Eddington Luminosity (Eddington )",definition:"    . L_Edd = 4GMm_p c/_T  1.410(M/M) W."},{term:"Fanaroff-Riley Classification",definition:"Radio galaxy  . FR I:    . FR II:    ."},{term:"Hawking Radiation ( )",definition:"   .  T_H = c/(8kGM)."},{term:"Hubble Constant ( )",definition:"   . H  67-73 km/s/Mpc (   )."},{term:"Hubble Distance ( )",definition:"     . d_H = c/H  4400 Mpc."},{term:"ISCO (  )",definition:"Innermost Stable Circular Orbit.     . r_ISCO = 6GM/c (Schwarzschild)."},{term:"Jeans Equation ( )",definition:"   . d_r/dr + 2_r/r = -GM/r."},{term:"Jeans Mass ( )",definition:"    . M_J = (kT/G)^(3/2)(5T/G)^(1/2)."},{term:"Kerr Metric ( )",definition:"   .   a = J/Mc .    ."},{term:"Lane-Emden Equation (- )",definition:"     . du/d + 2/du/d + u^n = 0."},{term:"Luminosity Distance ( )",definition:"      . d_L = (1+z)d_c (CDM)."},{term:"LIGO (Laser Interferometer Gravitational-Wave Observatory)",definition:"  . Hanford & Livingston   .   4 km,   125 W."},{term:"Mass-Luminosity Relation (- )",definition:"L  M^,    3.5.    ."},{term:"MHD Simulations ( )",definition:"     .  , ,   ."},{term:"Matched Filtering ( )",definition:"   .   (cross-correlation) S/N ."},{term:"Merger ()",definition:"   . /     ."},{term:"NFW Profile (NFW  )",definition:"Navarro-Frenk-White   :   1/(r/r_s(1+r/r_s))."},{term:"Neutron Star ()",definition:"     .  ~10 km,  ~10^17 kg/cm,  ."},{term:"Opacity ()",definition:"    .  = /().     ."},{term:"Photometric Redshift ( )",definition:"     .     ."},{term:"Planck Function ( )",definition:"   . B_ = 2h/c1/(e^(h/kT)-1)."},{term:"QFT in Curved Spacetime (  )",definition:" . Hawking   ."},{term:"Radiative Transfer ( )",definition:"    . F_rad = -c/(3)dT/dr."},{term:"Redshift ()",definition:"    . z = (_obs - _emit)/_emit."},{term:"Rotation Curve ()",definition:"   vs  .     ."},{term:"Schwarzschild Metric ( )",definition:"   .   . r_s = 2GM/c ."},{term:"Shapiro Delay ( )",definition:"   . t = (2GM/c)ln(4rr/b)."},{term:"Spectral Classification ( )",definition:"   : O B A F G K M.   100 K ."},{term:"Starburst Galaxy ( )",definition:"     . SFR > 1 M/yr.    ."},{term:"Stefan-Boltzmann Law (- )",definition:"  : L = 4RT,  = 5.6710 W m K."},{term:"Tully-Fisher Relation (- )",definition:"     .    ."},{term:"Tidal Deformability ( )",definition:"    .  .    ."},{term:"Time Delay ( )",definition:"     .  (sky localization) ."},{term:"Virial Theorem ( )",definition:"  : 2K + U = 0 ( )."},{term:"Virgo (  )",definition:" Cascina  .   3 km,   200 W. LIGO 3  ."},{term:"Voigt Profile ( )",definition:" ( + )   .    ."},{term:"White Dwarf ()",definition:"   .    .   (Hubble time > age)."},{term:"X-ray Spectroscopy (X )",definition:"Chandra, XMM-Newton     .  K (6.4 keV)    ."},{term:"Zero-Age Main Sequence (ZAMS)",definition:"      . Hertzsprung-Russell  ."}],Pce=[{id:1,title:"Observation of Gravitational Waves from a Binary Black Hole Merger",authors:"Abbott, B. P. et al. (LIGO/Virgo Collaboration)",year:2016,arxivId:"1602.03837",journal:"Physical Review Letters 116, 061102",doi:"10.1103/PhysRevLett.116.061102",abstract:"On 14 September 2015 at 09:50:45 UTC the two detectors of the Laser Interferometer Gravitational-Wave Observatory observed a transient gravitational-wave signal. The signal sweeps upward in frequency from 35 to 250 Hz, with peak gravitational-wave strain of 1.0  10.",summary:{background:"  100     .        .",methodology:"Matched filtering :     . S/N > 24 . Bayesian parameter estimation , , ,  .",theory:"   : dE/dt = -32/5G/(c)(mm)(m+m)/(a).    Kerr  .",data_analysis:"Advanced LIGO (2 ): N = 510/Hz @ 100Hz. 4 km arm interferometer, Fabry-Prot cavity resonator .  :   , /  subtraction.",results:"  () q = 1.20.1,   M = 65 M,    M_f = 62 M,  E = 3.0 Mc (   ).",limiting_factors:" shot noise  thermal noise ,   0.2  parameter inference  ."}},{id:2,title:"First M87 Event Horizon Telescope Results. I. The Shadow of the Supermassive Black Hole",authors:"Event Horizon Telescope Collaboration",year:2019,arxivId:"1906.11238",journal:"The Astrophysical Journal Letters 875, L1",doi:"10.3847/2041-8213/ab0ec7",abstract:"We present the first Event Horizon Telescope (EHT) observations at 1.3 mm wavelength of the supermassive black hole candidate in the galactic center of the radio galaxy M87. We have resolved the central compact radio source on angular scales of ~5 microarcseconds.",summary:{background:"         . VLBI    10,000 km .",methodology:"Very Long Baseline Interferometry (VLBI): 8    .    . Phase calibration, self-calibration  . Imaging: CLEAN ,   .",theory:"General relativistic magnetohydrodynamics (GRMHD)    . Kerr     (null geodesics).   : r_shadow  5.2 GM/c (M87  r_shadow  42 as).",data_analysis:"Visibility :   . u-v plane   .     . Uncertainty quantification:    .",results:"  M = (6.50.7)10 M.     d = 42.03.0 as.   10%  .    .",limiting_factors:"  ,    ,  (intraday variability) ,    ."}},{id:3,title:"A Universe of Black Holes and Bulges Revealed by JWST",authors:"Labb, I. et al.",year:2023,arxivId:"2306.02465",journal:"Nature ( )",doi:"10.1038/nature25755",abstract:"The James Webb Space Telescope (JWST) has revealed a population of surprisingly massive galaxies at z > 10, indicating accelerated galaxy assembly in the early universe.",summary:{background:"JWST     (z > 6)    .        .",methodology:"NIRCam : 0.6-5 m ,   SED fitting.  : NIRSpec   (R ~ 1000). (PSF) ,  .",theory:"SED modeling: Stellar population synthesis (FSPS, BAGPIPES). Dust attenuation curve . Photometric redshift vs spectroscopic redshift . Virial mass : M_vir = r/G ( ).",data_analysis:": P(z, params | data)  L(data | z, params)  Prior(z, params). Bayesian inference , , SFR .     (confidence interval) .",results:" z = 13.2  JADES-GS-z13-0:  M* = (3.21.9)10 M.  ~500 Myr.    330 Myr   (   a = 0.07).",limiting_factors:"  ,      degeneracy,  -    ,   ."}},{id:4,title:"The Weak Gravitational Lensing Signal and the Clustering of GAMA Galaxies",authors:"Leauthaud, A. et al.",year:2017,arxivId:"1511.06428",journal:"Monthly Notices of the Royal Astronomical Society",doi:"10.1093/mnras/stw2897",abstract:"We present joint measurements of the weak gravitational lensing signal around GAMA galaxies and their clustering. These measurements allow direct constraints on galaxy assembly bias and the dark matter halo profiles.",summary:{background:"          .     .",methodology:"Weak lensing shear : background     (typical  ~ 0.01).  :  = _cr  _tan. 2-point correlation   clustering .",theory:"NFW : (r) = _s / [(r/r_s)(1+r/r_s)].  c  r    M = (4/3)_crit200r. Halo mass function  .",data_analysis:"Forward modeling:   shear     .  galaxy-halo  (P(halo mass | galaxy properties)). Likelihood: L = _i P(data_i | model, params).",results:"  M* = 10 M     M_DM ~ 10 M.   c = 5.01.5.      .",limiting_factors:"    S/N,    (shape noise), systematic lensing , photometric redshift ."}},{id:5,title:"GW170817: Observation of Gravitational Waves from a Binary Neutron Star Inspiral",authors:"Abbott, B. P. et al. (LIGO/Virgo Collaboration)",year:2017,arxivId:"1710.05832",journal:"Physical Review Letters 119, 161101",doi:"10.1103/PhysRevLett.119.161101",abstract:"On August 17, 2017 at 12:41:04 UTC the Advanced LIGO and Advanced Virgo gravitational-wave detectors made their first observation of a binary neutron star inspiral. A loud gravitational-wave signal was detected with a duration of approximately 100 seconds.",summary:{background:"   r-process (  )  .  +  (kilonova)     .",methodology:"Bayesian parameter estimation: 9  ~ , , ,  . Matched filtering  . 3 (LIGO Hanford, LIGO Livingston, Virgo)  source localization (sky position ).",theory:"  :   M_max . Tidal deformability   (compressibility) .    5 (  ).",data_analysis:"  ~100 sec     . Nested sampling    (marginalized probability) . Model comparison: BNS vs NSBH vs BBH.",results:"  : m = 1.36-1.60 M, m = 1.17-1.36 M. Tidal deformability  = 560. r-process    0.03-0.05 M.  kilonova AT2017gfo   .",limiting_factors:"Virgo    source localization  (~600 sq deg),   (gap),  merger   ."}}],iE=[{id:1,name:"  ",description:", ,    "},{id:2,name:" ",description:" , , CCD, , VLBI  "},{id:3,name:" ",description:"LIGO, EHT, JWST     "},{id:4,name:" ",description:"N-body, MHD, hydrodynamics   "},{id:5,name:" ",description:", Bayesian ,   "},{id:6,name:" ",description:", ,  ,   "}],m8=[{id:1,category:1,title:"Schwarzschild  :   vs  ",author:"physicistKim",date:"2025-01-20",replies:8,content:"Schwarzschild  r=r_s     r=0  ? (Kerr)   ergosphere ?"},{id:2,category:2,title:"JWST NIRSpec    ",author:"observerAstro",date:"2025-01-18",replies:12,content:"JWST NIRSpec  (R~1000 vs 2700) S/N   ? z>10    ?"},{id:3,category:3,title:"GW170817 r-process:     ?",author:"cosmologyNerd",date:"2025-01-19",replies:15,content:"  r-process    Au, Pt  90%     ?"},{id:4,category:4,title:"Athena MHD     ",author:"codeGuru",date:"2025-01-17",replies:6,content:"GRMHD  Kerr  Boyer-Lindquist      ? CFL   ?"},{id:5,category:5,title:" : Matched filter vs   ",author:"ML_astronomer",date:"2025-01-20",replies:11,content:"LIGO      matched filtering deep learning (CNN, RNN)  ?"},{id:6,category:6,title:"      ",author:"devAstro",date:"2025-01-16",replies:9,content:"Python  SED fitting (FSPS, BAGPIPES),  (emcee, dynesty), (GIZMO)      ?"},{id:7,category:1,title:"Hawking   :  ",author:"qftPhysicist",date:"2025-01-15",replies:14,content:" Bekenstein-Hawking  S = kA/4l_p   T_H  ?    ?"},{id:8,category:3,title:"EHT M87 : asymmetry  ",author:"ehtFan",date:"2025-01-14",replies:7,content:"M87  (N/S asymmetry ~10%)  beaming,     ?"},{id:9,category:2,title:"CCD   : (PSF) ",author:"observerationalist",date:"2025-01-13",replies:5,content:"CCD  PSF      ? Moffat vs Gaussian vs  PSF  ?"},{id:10,category:4,title:"N-body :   (SPH) vs AMR ",author:"simluator",date:"2025-01-12",replies:10,content:"   SPH(GADGET) AMR(ENZO, GIZMO)  ?       ?"}],MI={textbooks:[{title:"Gravitational Waves Volume 1: Theory and Experiments",authors:"Maggiore, M.",year:2007},{title:"The Theory of Stellar Structure and Evolution",authors:"Kippenhahn, R., Weigert, A. & Weiss, A.",year:2012},{title:"Galactic Dynamics",authors:"Binney, J. & Tremaine, S.",year:2008},{title:"General Relativity",authors:"Carroll, S. M.",year:2004},{title:"Black Hole Thermodynamics",authors:"Wald, R. M.",year:2001},{title:"Observational Astrophysics",authors:"Birney, D. S., Gonzalez, G. & Oesper, D. A.",year:2006},{title:"The Early Universe",authors:"Kolb, E. W. & Turner, M. S.",year:1990},{title:"Modern Astrophysics",authors:"Carroll, B. W., Ostlie, D. A. & et al.",year:2007}],databases:[{name:"NASA ADS (Astrophysics Data System)",url:"https://ui.adsabs.harvard.edu/",desc:"    . 240+  ."},{name:"arXiv Astro-ph",url:"https://arxiv.org/archive/astro-ph",desc:" .  ~50  .   ."},{name:"Simbad",url:"https://simbad.u-strasbg.fr/",desc:", ,      , ."},{name:"NED (NASA Extragalactic Database)",url:"https://ned.ipac.caltech.edu/",desc:"   . , ,    ."},{name:"VizieR",url:"https://vizier.cds.unistra.fr/",desc:"700+      ."},{name:"Gravitational Wave Open Science Center (GWOSC)",url:"https://gwosc.readthedocs.io/",desc:"LIGO/Virgo  ,  , ."}],tools:[{name:"GIZMO",url:"https://www.tapir.caltech.edu/~phopkins/Site/GIZMO.html",desc:"N-body +  +  +    ."},{name:"ATHENA++",url:"https://www.athena-code.org/",desc:"  (GRMHD) .    ."},{name:"Planck 2018 Legacy Release",url:"https://irsa.ipac.caltech.edu/data/Planck/",desc:"CMB  ,  ,   ."},{name:"FSPS (Flexible Stellar Population Synthesis)",url:"https://github.com/bd-j/fsps",desc:"   . SED ."},{name:"dynesty (Dynamic Nested Sampling)",url:"https://github.com/joshspeagle/dynesty",desc:"   Bayesian .   ."},{name:"SIMBAD Sky Map",url:"http://simbad.u-strasbg.fr/simbad/sim-fcoo",desc:"      ."},{name:"JWST Exposure Time Calculator",url:"https://jwst.etc.stsci.edu/",desc:"JWST     S/N ."}]},sE={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},aE={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4}}};function Cce(){const{isDark:t}=Ka(),e=P2.slice(0,3);return x.useEffect(()=>{if(!localStorage.getItem("registeredUsers")){const r={[btoa("test@example.com")]:{email:"test@example.com",password:btoa("Test1234"),username:"",affiliation:" ",createdAt:new Date().toISOString()}};localStorage.setItem("registeredUsers",JSON.stringify(r)),console.log("   : test@example.com / Test1234")}},[]),A.jsxs("div",{className:"space-y-8 sm:space-y-12",children:[A.jsxs("section",{className:"py-8 sm:py-12 md:py-20 text-center",children:[A.jsx(se.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},children:A.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-bold mb-4 bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-400 dark:to-purple-500 bg-clip-text text-transparent",children:" "})}),A.jsx(se.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-base sm:text-lg md:text-xl text-gray-600 dark:text-gray-300 mb-8 px-4",children:" ,  ,   "}),A.jsxs(se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"flex flex-col sm:flex-row gap-4 justify-center px-4",children:[A.jsx(se.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:A.jsx(yt,{to:"/concepts",className:"block px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition font-medium shadow-lg hover:shadow-xl",children:" "})}),A.jsx(se.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:A.jsx(yt,{to:"/papers",className:"block px-8 py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg hover:from-orange-700 hover:to-orange-800 transition font-medium shadow-lg hover:shadow-xl",children:" "})})]})]}),A.jsx(se.section,{variants:sE,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6",children:[{title:" ",description:", ,        ",icon:""},{title:" ",description:"    .    ",icon:""},{title:"",description:", ,    .    ",icon:""}].map((n,r)=>A.jsxs(se.div,{variants:aE,whileHover:{y:-8,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},className:`p-6 rounded-lg border transition ${t?"bg-gray-800 border-gray-700 hover:border-blue-500":"bg-white border-gray-200 hover:border-blue-500"}`,children:[A.jsx("div",{className:"text-4xl mb-3",children:n.icon}),A.jsx("h3",{className:`text-lg sm:text-xl font-bold mb-2 ${t?"text-white":"text-gray-900"}`,children:n.title}),A.jsx("p",{className:`text-sm sm:text-base ${t?"text-gray-300":"text-gray-600"}`,children:n.description})]},r))}),A.jsxs(se.section,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6},viewport:{once:!0,amount:.2},children:[A.jsx(se.h2,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-6 text-gray-900 dark:text-white",children:" "}),A.jsx(se.div,{variants:sE,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:e.map(n=>A.jsx(se.div,{variants:aE,whileHover:{y:-8},className:`p-6 rounded-lg border transition cursor-pointer ${t?"bg-gray-800 border-gray-700 hover:border-blue-500":"bg-white border-gray-200 hover:border-blue-500"}`,children:A.jsxs(yt,{to:`/concepts/${n.slug}`,children:[A.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 mb-2",children:n.title}),A.jsx("p",{className:`text-sm sm:text-base ${t?"text-gray-300":"text-gray-600"}`,children:n.description})]})},n.slug))})]}),A.jsxs(se.section,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6},viewport:{once:!0,amount:.2},children:[A.jsx(se.h2,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-6 text-gray-900 dark:text-white",children:"  "}),A.jsx(se.div,{variants:sE,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},className:"space-y-4",children:Pce.map(n=>A.jsxs(se.div,{variants:aE,whileHover:{x:8},className:`p-4 sm:p-6 rounded-lg border transition ${t?"bg-gray-800 border-gray-700 hover:border-orange-500":"bg-white border-gray-200 hover:border-orange-500"}`,children:[A.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2",children:[A.jsxs("div",{className:"flex-1",children:[A.jsx("h3",{className:"font-bold text-blue-600 dark:text-blue-400 text-sm sm:text-base",children:n.title}),A.jsxs("p",{className:`text-xs sm:text-sm ${t?"text-gray-400":"text-gray-500"}`,children:[n.authors," (",n.year,")"]})]}),A.jsx("span",{className:`text-xs px-3 py-1 rounded whitespace-nowrap ${t?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:n.year})]}),A.jsx("p",{className:`text-xs sm:text-sm mt-3 ${t?"text-gray-300":"text-gray-600"}`,children:n.abstract})]},n.id))}),A.jsx(se.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"mt-8 text-center",children:A.jsx(se.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:A.jsx(yt,{to:"/papers",className:"inline-block px-8 py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg hover:from-orange-700 hover:to-orange-800 transition font-medium shadow-lg hover:shadow-xl",children:"   "})})})]})]})}function Ice(){const{isDark:t}=Ka(),e={relativity:"",stars:"",galaxies:"",cosmology:"",observations:""},n={relativity:"from-red-500 to-pink-500",stars:"from-yellow-500 to-orange-500",galaxies:"from-purple-500 to-indigo-500",cosmology:"from-blue-500 to-cyan-500",observations:"from-green-500 to-emerald-500"};return A.jsxs("div",{className:"space-y-12 sm:space-y-16",children:[A.jsxs(se.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6},children:[A.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent",children:" "}),A.jsx(se.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`text-sm sm:text-base ${t?"text-gray-300":"text-gray-600"}`,children:"  5  , 14     ."})]}),Object.entries(e).map(([r,i],s)=>{const a=P2.filter(o=>o.category===r);return a.length===0?null:A.jsxs(se.section,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6},viewport:{once:!0,amount:.1},children:[A.jsx(se.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},className:"mb-6",children:A.jsx("div",{className:`inline-block bg-gradient-to-r ${n[r]} p-0.5 rounded-lg`,children:A.jsx("div",{className:`px-4 py-2 rounded-md ${t?"bg-gray-900":"bg-white"}`,children:A.jsx("h2",{className:`text-lg sm:text-xl font-bold bg-gradient-to-r ${n[r]} bg-clip-text text-transparent`,children:i})})})}),A.jsx(se.div,{variants:sE,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:a.map((o,l)=>A.jsxs(se.div,{variants:aE,whileHover:{y:-12,boxShadow:"0 20px 40px -10px rgba(0, 0, 0, 0.15)"},className:`group relative overflow-hidden rounded-xl border-2 transition cursor-pointer ${t?"bg-gradient-to-br from-gray-800 to-gray-900 border-gray-700 hover:border-blue-500":"bg-gradient-to-br from-white to-gray-50 border-gray-200 hover:border-blue-500"}`,children:[A.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${n[r]} opacity-0 group-hover:opacity-5 transition-opacity duration-300`}),A.jsxs(yt,{to:`/concepts/${o.slug}`,className:"relative block p-6",children:[A.jsx("div",{className:"mb-4",children:A.jsx("span",{className:`inline-block px-3 py-1 text-xs font-semibold rounded-full ${t?"bg-gray-700 text-blue-300":"bg-blue-100 text-blue-700"}`,children:i})}),A.jsx("h3",{className:"text-base sm:text-lg font-bold mb-2 text-blue-600 dark:text-blue-400 group-hover:translate-x-1 transition-transform",children:o.title}),A.jsx("p",{className:`text-sm sm:text-base line-clamp-2 mb-4 ${t?"text-gray-300":"text-gray-600"}`,children:o.description}),A.jsxs("div",{className:`text-xs space-y-1 ${t?"text-gray-400":"text-gray-500"}`,children:[o.content.keyPoints.slice(0,2).map((c,u)=>A.jsxs("div",{className:"flex items-start gap-2",children:[A.jsx("span",{className:"text-blue-400",children:""}),A.jsx("span",{className:"line-clamp-1",children:c})]},u)),o.content.keyPoints.length>2&&A.jsxs("div",{className:"text-blue-500 font-medium",children:["+ ",o.content.keyPoints.length-2," ..."]})]})]})]},o.slug))})]},r)})]})}function kce({tex:t,display:e=!1}){return x.useEffect(()=>{if(window.katex)try{window.katex.render(t,document.getElementById(`math-${t}`),{displayMode:e,throwOnError:!1})}catch(n){console.error("KaTeX error:",n)}},[t,e]),A.jsx("div",{id:`math-${t}`,className:"inline-block"})}function Rce(){const{slug:t}=kW(),e=P2.find(r=>r.slug===t);if(!e)return A.jsx("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:"   ."});const{content:n}=e;return A.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 sm:space-y-8",children:[A.jsxs("div",{children:[A.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-2 text-gray-900 dark:text-white",children:e.title}),A.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm sm:text-base",children:e.description})]}),A.jsxs("section",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg",children:[A.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:""}),A.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed text-sm sm:text-base",children:n.overview})]}),A.jsxs("section",{className:"px-4 sm:px-0",children:[A.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),A.jsx("ul",{className:"space-y-2",children:n.keyPoints.map((r,i)=>A.jsxs("li",{className:"flex gap-3 text-sm sm:text-base",children:[A.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-bold flex-shrink-0",children:""}),A.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:r})]},i))})]}),n.keyFormulas&&n.keyFormulas.length>0&&A.jsxs("section",{className:"px-4 sm:px-0",children:[A.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),A.jsx("div",{className:"space-y-4",children:n.keyFormulas.map((r,i)=>A.jsxs("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg overflow-x-auto",children:[A.jsx(kce,{tex:r.tex}),A.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-2",children:r.desc})]},i))})]}),A.jsxs("section",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg",children:[A.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),A.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm sm:text-base",children:n.observations})]}),n.relatedPapers&&n.relatedPapers.length>0&&A.jsxs("section",{className:"px-4 sm:px-0",children:[A.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),A.jsx("ul",{className:"space-y-2",children:n.relatedPapers.map((r,i)=>A.jsx("li",{className:"text-gray-700 dark:text-gray-300 border-l-2 border-blue-600 dark:border-blue-400 pl-4 text-sm sm:text-base",children:r},i))})]})]})}const ai=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),XR=[.001,0,0,.001,0,0],NI=1.35,os={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Jc={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},db="pdfjs_internal_editor_",ke={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},ze={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Oce={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},YR={TRIANGLES:1,LATTICE:2},ur={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},oE={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},yn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Rp={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},GT={ERRORS:0,WARNINGS:1,INFOS:5},fb={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Av={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},Dce={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let KT=GT.WARNINGS;function Mce(t){Number.isInteger(t)&&(KT=t)}function Nce(){return KT}function qT(t){KT>=GT.INFOS&&console.info(`Info: ${t}`)}function Te(t){KT>=GT.WARNINGS&&console.warn(`Warning: ${t}`)}function bt(t){throw new Error(t)}function He(t,e){t||bt(e)}function Lce(t){switch(t==null?void 0:t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function g8(t,e=null,n=null){if(!t)return null;if(n&&typeof t=="string"){if(n.addDefaultProtocol&&t.startsWith("www.")){const i=t.match(/\./g);(i==null?void 0:i.length)>=2&&(t=`http://${t}`)}if(n.tryConvertEncoding)try{t=$ce(t)}catch{}}const r=e?URL.parse(t,e):URL.parse(t);return Lce(r)?r:null}function y8(t,e,n=!1){const r=URL.parse(t);return r?(r.hash=e,r.href):n&&g8(t,"http://example.com")?t.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Pe(t,e,n,r=!1){return Object.defineProperty(t,e,{value:n,enumerable:!r,configurable:!0,writable:!1}),n}const dp=function(){function e(n,r){this.message=n,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class s4 extends dp{constructor(e,n){super(e,"PasswordException"),this.code=n}}class LI extends dp{constructor(e,n){super(e,"UnknownErrorException"),this.details=n}}class QR extends dp{constructor(e){super(e,"InvalidPDFException")}}class DS extends dp{constructor(e,n,r){super(e,"ResponseException"),this.status=n,this.missing=r}}class jce extends dp{constructor(e){super(e,"FormatError")}}class yh extends dp{constructor(e){super(e,"AbortException")}}function v8(t){(typeof t!="object"||(t==null?void 0:t.length)===void 0)&&bt("Invalid argument for bytesToString");const e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);const r=[];for(let i=0;i<e;i+=n){const s=Math.min(i+n,e),a=t.subarray(i,s);r.push(String.fromCharCode.apply(null,a))}return r.join("")}function z_(t){typeof t!="string"&&bt("Invalid argument for stringToBytes");const e=t.length,n=new Uint8Array(e);for(let r=0;r<e;++r)n[r]=t.charCodeAt(r)&255;return n}function Fce(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,t&255)}function Vce(){const t=new Uint8Array(4);return t[0]=1,new Uint32Array(t.buffer,0,1)[0]===1}function Bce(){try{return new Function(""),!0}catch{return!1}}class Pr{static get isLittleEndian(){return Pe(this,"isLittleEndian",Vce())}static get isEvalSupported(){return Pe(this,"isEvalSupported",Bce())}static get isOffscreenCanvasSupported(){return Pe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Pe(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Pe(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Pe(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:n}=navigator;return Pe(this,"platform",{isAndroid:n.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:n.includes("Firefox")})}static get isCSSRoundSupported(){var e,n;return Pe(this,"isCSSRoundSupported",(n=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:n.call(e,"width: round(1.5px, 1px)"))}}const jI=Array.from(Array(256).keys(),t=>t.toString(16).padStart(2,"0"));var ic,lE,JR;class ue{static makeHexColor(e,n,r){return`#${jI[e]}${jI[n]}${jI[r]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,n){let r;e[0]?(e[0]<0&&(r=n[0],n[0]=n[2],n[2]=r),n[0]*=e[0],n[2]*=e[0],e[3]<0&&(r=n[1],n[1]=n[3],n[3]=r),n[1]*=e[3],n[3]*=e[3]):(r=n[0],n[0]=n[1],n[1]=r,r=n[2],n[2]=n[3],n[3]=r,e[1]<0&&(r=n[1],n[1]=n[3],n[3]=r),n[1]*=e[1],n[3]*=e[1],e[2]<0&&(r=n[0],n[0]=n[2],n[2]=r),n[0]*=e[2],n[2]*=e[2]),n[0]+=e[4],n[1]+=e[5],n[2]+=e[4],n[3]+=e[5]}static transform(e,n){return[e[0]*n[0]+e[2]*n[1],e[1]*n[0]+e[3]*n[1],e[0]*n[2]+e[2]*n[3],e[1]*n[2]+e[3]*n[3],e[0]*n[4]+e[2]*n[5]+e[4],e[1]*n[4]+e[3]*n[5]+e[5]]}static multiplyByDOMMatrix(e,n){return[e[0]*n.a+e[2]*n.b,e[1]*n.a+e[3]*n.b,e[0]*n.c+e[2]*n.d,e[1]*n.c+e[3]*n.d,e[0]*n.e+e[2]*n.f+e[4],e[1]*n.e+e[3]*n.f+e[5]]}static applyTransform(e,n,r=0){const i=e[r],s=e[r+1];e[r]=i*n[0]+s*n[2]+n[4],e[r+1]=i*n[1]+s*n[3]+n[5]}static applyTransformToBezier(e,n,r=0){const i=n[0],s=n[1],a=n[2],o=n[3],l=n[4],c=n[5];for(let u=0;u<6;u+=2){const d=e[r+u],f=e[r+u+1];e[r+u]=d*i+f*a+l,e[r+u+1]=d*s+f*o+c}}static applyInverseTransform(e,n){const r=e[0],i=e[1],s=n[0]*n[3]-n[1]*n[2];e[0]=(r*n[3]-i*n[2]+n[2]*n[5]-n[4]*n[3])/s,e[1]=(-r*n[1]+i*n[0]+n[4]*n[1]-n[5]*n[0])/s}static axialAlignedBoundingBox(e,n,r){const i=n[0],s=n[1],a=n[2],o=n[3],l=n[4],c=n[5],u=e[0],d=e[1],f=e[2],p=e[3];let g=i*u+l,y=g,v=i*f+l,b=v,_=o*d+c,w=_,T=o*p+c,P=T;if(s!==0||a!==0){const O=s*u,C=s*f,I=a*d,M=a*p;g+=I,b+=I,v+=M,y+=M,_+=O,P+=O,T+=C,w+=C}r[0]=Math.min(r[0],g,v,y,b),r[1]=Math.min(r[1],_,T,w,P),r[2]=Math.max(r[2],g,v,y,b),r[3]=Math.max(r[3],_,T,w,P)}static inverseTransform(e){const n=e[0]*e[3]-e[1]*e[2];return[e[3]/n,-e[1]/n,-e[2]/n,e[0]/n,(e[2]*e[5]-e[4]*e[3])/n,(e[4]*e[1]-e[5]*e[0])/n]}static singularValueDecompose2dScale(e,n){const r=e[0],i=e[1],s=e[2],a=e[3],o=r**2+i**2,l=r*s+i*a,c=s**2+a**2,u=(o+c)/2,d=Math.sqrt(u**2-(o*c-l**2));n[0]=Math.sqrt(u+d||1),n[1]=Math.sqrt(u-d||1)}static normalizeRect(e){const n=e.slice(0);return e[0]>e[2]&&(n[0]=e[2],n[2]=e[0]),e[1]>e[3]&&(n[1]=e[3],n[3]=e[1]),n}static intersect(e,n){const r=Math.max(Math.min(e[0],e[2]),Math.min(n[0],n[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(n[0],n[2]));if(r>i)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(n[1],n[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(n[1],n[3]));return s>a?null:[r,s,i,a]}static pointBoundingBox(e,n,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],n),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],n)}static rectBoundingBox(e,n,r,i,s){s[0]=Math.min(s[0],e,r),s[1]=Math.min(s[1],n,i),s[2]=Math.max(s[2],e,r),s[3]=Math.max(s[3],n,i)}static bezierBoundingBox(e,n,r,i,s,a,o,l,c){c[0]=Math.min(c[0],e,o),c[1]=Math.min(c[1],n,l),c[2]=Math.max(c[2],e,o),c[3]=Math.max(c[3],n,l),D(this,ic,JR).call(this,e,r,s,o,n,i,a,l,3*(-e+3*(r-s)+o),6*(e-2*r+s),3*(r-e),c),D(this,ic,JR).call(this,e,r,s,o,n,i,a,l,3*(-n+3*(i-a)+l),6*(n-2*i+a),3*(i-n),c)}}ic=new WeakSet,lE=function(e,n,r,i,s,a,o,l,c,u){if(c<=0||c>=1)return;const d=1-c,f=c*c,p=f*c,g=d*(d*(d*e+3*c*n)+3*f*r)+p*i,y=d*(d*(d*s+3*c*a)+3*f*o)+p*l;u[0]=Math.min(u[0],g),u[1]=Math.min(u[1],y),u[2]=Math.max(u[2],g),u[3]=Math.max(u[3],y)},JR=function(e,n,r,i,s,a,o,l,c,u,d,f){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&D(this,ic,lE).call(this,e,n,r,i,s,a,o,l,-d/u,f);return}const p=u**2-4*d*c;if(p<0)return;const g=Math.sqrt(p),y=2*c;D(this,ic,lE).call(this,e,n,r,i,s,a,o,l,(-u+g)/y,f),D(this,ic,lE).call(this,e,n,r,i,s,a,o,l,(-u-g)/y,f)},k(ue,ic);function $ce(t){return decodeURIComponent(escape(t))}let FI=null,a4=null;function Uce(t){return FI||(FI=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,a4=new Map([["","t"]])),t.replaceAll(FI,(e,n,r)=>n?n.normalize("NFKC"):a4.get(r))}function b8(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),v8(t)}const om="pdfjs_internal_id_";function zce(t,e,n){if(!Array.isArray(n)||n.length<2)return!1;const[r,i,...s]=n;if(!t(r)&&!Number.isInteger(r)||!e(i))return!1;const a=s.length;let o=!0;switch(i.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;o=!1;break;default:return!1}for(const l of s)if(!(typeof l=="number"||o&&l===null))return!1;return!0}function oi(t,e,n){return Math.min(Math.max(t,e),n)}function w8(t){return Uint8Array.prototype.toBase64?t.toBase64():btoa(v8(t))}function Hce(t){return Uint8Array.fromBase64?Uint8Array.fromBase64(t):z_(atob(t))}typeof Promise.try!="function"&&(Promise.try=function(t,...e){return new Promise(n=>{n(t(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(t){return t.reduce((e,n)=>e+n,0)});class pb{static textContent(e){const n=[],r={items:n,styles:Object.create(null)};function i(s){var l;if(!s)return;let a=null;const o=s.name;if(o==="#text")a=s.value;else if(pb.shouldBuildText(o))(l=s==null?void 0:s.attributes)!=null&&l.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&n.push({str:a}),!!s.children)for(const c of s.children)i(c)}return i(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class _8{static setupStorage(e,n,r,i,s){const a=i.getValue(n,{value:null});switch(r.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),s==="print")break;e.addEventListener("input",o=>{i.setValue(n,{value:o.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(a.value===r.attributes.xfaOn?e.setAttribute("checked",!0):a.value===r.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",o=>{i.setValue(n,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),s==="print")break;e.addEventListener("input",o=>{i.setValue(n,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of r.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(n,{value:c})});break}}static setAttributes({html:e,element:n,storage:r=null,intent:i,linkService:s}){const{attributes:a}=n,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${i}`);for(const[l,c]of Object.entries(a))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}o&&s.addLinkAttributes(e,a.href,a.newWindow),r&&a.dataId&&this.setupStorage(e,a.dataId,n,r)}static render(e){var d,f;const n=e.annotationStorage,r=e.linkService,i=e.xfaHtml,s=e.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:s,linkService:r});const o=s!=="richText",l=e.div;if(l.append(a),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=p}o&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(i.children.length===0){if(i.value){const p=document.createTextNode(i.value);a.append(p),o&&pb.shouldBuildText(i.name)&&c.push(p)}return{textDivs:c}}const u=[[i,-1,a]];for(;u.length>0;){const[p,g,y]=u.at(-1);if(g+1===p.children.length){u.pop();continue}const v=p.children[++u.at(-1)[1]];if(v===null)continue;const{name:b}=v;if(b==="#text"){const w=document.createTextNode(v.value);c.push(w),y.append(w);continue}const _=(d=v==null?void 0:v.attributes)!=null&&d.xmlns?document.createElementNS(v.attributes.xmlns,b):document.createElement(b);if(y.append(_),v.attributes&&this.setAttributes({html:_,element:v,storage:n,intent:s,linkService:r}),((f=v.children)==null?void 0:f.length)>0)u.push([v,-1,_]);else if(v.value){const w=document.createTextNode(v.value);o&&pb.shouldBuildText(b)&&c.push(w),_.append(w)}}for(const p of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const n=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=n,e.div.hidden=!1}}const nl="http://www.w3.org/2000/svg",ad=class ad{};Y(ad,"CSS",96),Y(ad,"PDF",72),Y(ad,"PDF_TO_CSS_UNITS",ad.CSS/ad.PDF);let vh=ad;async function H_(t,e="text"){if($v(t,document.baseURI)){const n=await fetch(t);if(!n.ok)throw new Error(n.statusText);switch(e){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,r)=>{const i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":n(i.response);return}n(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})}class W_{constructor({viewBox:e,userUnit:n,scale:r,rotation:i,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=n,this.scale=r,this.rotation=i,this.offsetX=s,this.offsetY=a,r*=n;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,d,f,p;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,d=0,f=0,p=1;break;case 90:u=0,d=1,f=1,p=0;break;case 270:u=0,d=-1,f=-1,p=0;break;case 0:u=1,d=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(f=-f,p=-p);let g,y,v,b;u===0?(g=Math.abs(c-e[1])*r+s,y=Math.abs(l-e[0])*r+a,v=(e[3]-e[1])*r,b=(e[2]-e[0])*r):(g=Math.abs(l-e[0])*r+s,y=Math.abs(c-e[1])*r+a,v=(e[2]-e[0])*r,b=(e[3]-e[1])*r),this.transform=[u*r,d*r,f*r,p*r,g-u*r*l-f*r*c,y-d*r*l-p*r*c],this.width=v,this.height=b}get rawDims(){const e=this.viewBox;return Pe(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:n=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new W_({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:n,offsetX:r,offsetY:i,dontFlip:s})}convertToViewportPoint(e,n){const r=[e,n];return ue.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const n=[e[0],e[1]];ue.applyTransform(n,this.transform);const r=[e[2],e[3]];return ue.applyTransform(r,this.transform),[n[0],n[1],r[0],r[1]]}convertToPdfPoint(e,n){const r=[e,n];return ue.applyInverseTransform(r,this.transform),r}}class C2 extends dp{constructor(e,n=0){super(e,"RenderingCancelledException"),this.extraDelay=n}}function XT(t){const e=t.length;let n=0;for(;n<e&&t[n].trim()==="";)n++;return t.substring(n,n+5).toLowerCase()==="data:"}function I2(t){return typeof t=="string"&&/\.pdf$/i.test(t)}function Wce(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function Gce(t,e="document.pdf"){if(typeof t!="string")return e;if(XT(t))return Te('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(t);if(!r)return e;const i=o=>{try{let l=decodeURIComponent(o);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:o):l}catch{return o}},s=/\.pdf$/i,a=r.pathname.split("/").at(-1);if(s.test(a))return i(a);if(r.searchParams.size>0){const o=Array.from(r.searchParams.values()).reverse();for(const c of o)if(s.test(c))return i(c);const l=Array.from(r.searchParams.keys()).reverse();for(const c of l)if(s.test(c))return i(c)}if(r.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(l)return i(l[0])}return e}class o4{constructor(){Y(this,"started",Object.create(null));Y(this,"times",[])}time(e){e in this.started&&Te(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Te(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let n=0;for(const{name:r}of this.times)n=Math.max(r.length,n);for(const{name:r,start:i,end:s}of this.times)e.push(`${r.padEnd(n)} ${s-i}ms
`);return e.join("")}}function $v(t,e){const n=e?URL.parse(t,e):URL.parse(t);return(n==null?void 0:n.protocol)==="http:"||(n==null?void 0:n.protocol)==="https:"}function aa(t){t.preventDefault()}function an(t){t.preventDefault(),t.stopPropagation()}function Kce(t){console.log("Deprecated API usage: "+t)}var Hb;class MS{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;h(this,Hb)||E(this,Hb,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const n=h(this,Hb).exec(e);if(!n)return null;const r=parseInt(n[1],10);let i=parseInt(n[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(n[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(n[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(n[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(n[6],10);l=l>=0&&l<=59?l:0;const c=n[7]||"Z";let u=parseInt(n[8],10);u=u>=0&&u<=23?u:0;let d=parseInt(n[9],10)||0;return d=d>=0&&d<=59?d:0,c==="-"?(a+=u,o+=d):c==="+"&&(a-=u,o-=d),new Date(Date.UTC(r,i,s,a,o,l))}}Hb=new WeakMap,k(MS,Hb);function qce(t,{scale:e=1,rotation:n=0}){const{width:r,height:i}=t.attributes.style,s=[0,0,parseInt(r),parseInt(i)];return new W_({viewBox:s,userUnit:1,scale:e,rotation:n})}function G_(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(e=>parseInt(e)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Te(`Not a valid color format: "${t}"`),[0,0,0])}function Xce(t){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const n of t.keys()){e.style.color=n;const r=window.getComputedStyle(e).color;t.set(n,G_(r))}e.remove()}function zt(t){const{a:e,b:n,c:r,d:i,e:s,f:a}=t.getTransform();return[e,n,r,i,s,a]}function Za(t){const{a:e,b:n,c:r,d:i,e:s,f:a}=t.getTransform().invertSelf();return[e,n,r,i,s,a]}function qf(t,e,n=!1,r=!0){if(e instanceof W_){const{pageWidth:i,pageHeight:s}=e.rawDims,{style:a}=t,o=Pr.isCSSRoundSupported,l=`var(--total-scale-factor) * ${i}px`,c=`var(--total-scale-factor) * ${s}px`,u=o?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,d=o?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!n||e.rotation%180===0?(a.width=u,a.height=d):(a.width=d,a.height=u)}r&&t.setAttribute("data-main-rotation",e.rotation)}class Wo{constructor(){const{pixelRatio:e}=Wo;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,n,r,i,s=-1){let a=1/0,o=1/0,l=1/0;r=Wo.capPixels(r,s),r>0&&(a=Math.sqrt(r/(e*n))),i!==-1&&(o=i/e,l=i/n);const c=Math.min(a,o,l);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,n){if(n>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+n/100));return e>0?Math.min(e,r):r}return e}}const ZR=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Yce{static get isDarkMode(){var e;return Pe(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class Qce{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:n}=e;n.width=n.height="0",n.display="none",n.color="var(--comment-fg-color)",document.body.append(e);const{color:r}=window.getComputedStyle(e);return e.remove(),Pe(this,"commentForegroundColor",G_(r))}}function Jce(t,e,n,r){r=Math.min(Math.max(r??1,0),1);const i=255*(1-r);return t=Math.round(t*r+i),e=Math.round(e*r+i),n=Math.round(n*r+i),[t,e,n]}function l4(t,e){const n=t[0]/255,r=t[1]/255,i=t[2]/255,s=Math.max(n,r,i),a=Math.min(n,r,i),o=(s+a)/2;if(s===a)e[0]=e[1]=0;else{const l=s-a;switch(e[1]=o<.5?l/(s+a):l/(2-s-a),s){case n:e[0]=((r-i)/l+(r<i?6:0))*60;break;case r:e[0]=((i-n)/l+2)*60;break;case i:e[0]=((n-r)/l+4)*60;break}}e[2]=o}function eO(t,e){const n=t[0],r=t[1],i=t[2],s=(1-Math.abs(2*i-1))*r,a=s*(1-Math.abs(n/60%2-1)),o=i-s/2;switch(Math.floor(n/60)){case 0:e[0]=s+o,e[1]=a+o,e[2]=o;break;case 1:e[0]=a+o,e[1]=s+o,e[2]=o;break;case 2:e[0]=o,e[1]=s+o,e[2]=a+o;break;case 3:e[0]=o,e[1]=a+o,e[2]=s+o;break;case 4:e[0]=a+o,e[1]=o,e[2]=s+o;break;case 5:case 6:e[0]=s+o,e[1]=o,e[2]=a+o;break}}function c4(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function u4(t,e,n){eO(t,n),n.map(c4);const r=.2126*n[0]+.7152*n[1]+.0722*n[2];eO(e,n),n.map(c4);const i=.2126*n[0]+.7152*n[1]+.0722*n[2];return r>i?(r+.05)/(i+.05):(i+.05)/(r+.05)}const h4=new Map;function Zce(t,e){const n=t[0]+t[1]*256+t[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let r=h4.get(n);if(r)return r;const i=new Float32Array(9),s=i.subarray(0,3),a=i.subarray(3,6);l4(t,a);const o=i.subarray(6,9);l4(e,o);const l=o[2]<.5,c=l?12:4.5;if(a[2]=l?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),u4(a,o,s)<c){let u,d;l?(u=a[2],d=1):(u=0,d=a[2]);const f=.005;for(;d-u>f;){const p=a[2]=(u+d)/2;l===u4(a,o,s)<c?u=p:d=p}a[2]=l?d:u}return eO(a,s),r=ue.makeHexColor(Math.round(s[0]*255),Math.round(s[1]*255),Math.round(s[2]*255)),h4.set(n,r),r}function x8({html:t,dir:e,className:n},r){const i=document.createDocumentFragment();if(typeof t=="string"){const s=document.createElement("p");s.dir=e||"auto";const a=t.split(/(?:\r\n?|\n)/);for(let o=0,l=a.length;o<l;++o){const c=a[o];s.append(document.createTextNode(c)),o<l-1&&s.append(document.createElement("br"))}i.append(s)}else _8.render({xfaHtml:t,div:i,intent:"richText"});i.firstElementChild.classList.add("richText",n),r.append(i)}function A8(t){const e=new Path2D;if(!t)return e;for(let n=0,r=t.length;n<r;)switch(t[n++]){case Av.moveTo:e.moveTo(t[n++],t[n++]);break;case Av.lineTo:e.lineTo(t[n++],t[n++]);break;case Av.curveTo:e.bezierCurveTo(t[n++],t[n++],t[n++],t[n++],t[n++],t[n++]);break;case Av.quadraticCurveTo:e.quadraticCurveTo(t[n++],t[n++],t[n++],t[n++]);break;case Av.closePath:e.closePath();break;default:Te(`Unrecognized drawing path operator: ${t[n-1]}`);break}return e}var iu,su,Ms,Ns,Wb,au,Rm,Om,Gb,aT,E8,Ar,S8,T8,Op,Uv;const al=class al{constructor(e){k(this,Ar);k(this,iu,null);k(this,su,null);k(this,Ms);k(this,Ns,null);k(this,Wb,null);k(this,au,null);k(this,Rm,null);k(this,Om,null);E(this,Ms,e),h(al,Gb)||E(al,Gb,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=E(this,iu,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const n=h(this,Ms)._uiManager._signal;n instanceof AbortSignal&&!n.aborted&&(e.addEventListener("contextmenu",aa,{signal:n}),e.addEventListener("pointerdown",D(al,aT,E8),{signal:n}));const r=E(this,Ns,document.createElement("div"));r.className="buttons",e.append(r);const i=h(this,Ms).toolbarPosition;if(i){const{style:s}=e,a=h(this,Ms)._uiManager.direction==="ltr"?1-i[0]:i[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return h(this,iu)}hide(){var e;h(this,iu).classList.add("hidden"),(e=h(this,su))==null||e.hideDropdown()}show(){var e,n;h(this,iu).classList.remove("hidden"),(e=h(this,Wb))==null||e.shown(),(n=h(this,au))==null||n.shown()}addDeleteButton(){const{editorType:e,_uiManager:n}=h(this,Ms),r=document.createElement("button");r.classList.add("basic","deleteButton"),r.tabIndex=0,r.setAttribute("data-l10n-id",h(al,Gb)[e]),D(this,Ar,Op).call(this,r)&&r.addEventListener("click",i=>{n.delete()},{signal:n._signal}),h(this,Ns).append(r)}async addAltText(e){const n=await e.render();D(this,Ar,Op).call(this,n),h(this,Ns).append(n,h(this,Ar,Uv)),E(this,Wb,e)}addComment(e,n=null){if(h(this,au))return;const r=e.renderForToolbar();if(!r)return;D(this,Ar,Op).call(this,r);const i=E(this,Rm,h(this,Ar,Uv));n?(h(this,Ns).insertBefore(r,n),h(this,Ns).insertBefore(i,n)):h(this,Ns).append(r,i),E(this,au,e),e.toolbar=this}addColorPicker(e){if(h(this,su))return;E(this,su,e);const n=e.renderButton();D(this,Ar,Op).call(this,n),h(this,Ns).append(n,h(this,Ar,Uv))}async addEditSignatureButton(e){const n=E(this,Om,await e.renderEditButton(h(this,Ms)));D(this,Ar,Op).call(this,n),h(this,Ns).append(n,h(this,Ar,Uv))}removeButton(e){var n,r;switch(e){case"comment":(n=h(this,au))==null||n.removeToolbarCommentButton(),E(this,au,null),(r=h(this,Rm))==null||r.remove(),E(this,Rm,null);break}}async addButton(e,n){switch(e){case"colorPicker":n&&this.addColorPicker(n);break;case"altText":n&&await this.addAltText(n);break;case"editSignature":n&&await this.addEditSignatureButton(n);break;case"delete":this.addDeleteButton();break;case"comment":n&&this.addComment(n);break}}async addButtonBefore(e,n,r){if(!n&&e==="comment")return;const i=h(this,Ns).querySelector(r);i&&e==="comment"&&this.addComment(n,i)}updateEditSignatureButton(e){h(this,Om)&&(h(this,Om).title=e)}remove(){var e;h(this,iu).remove(),(e=h(this,su))==null||e.destroy(),E(this,su,null)}};iu=new WeakMap,su=new WeakMap,Ms=new WeakMap,Ns=new WeakMap,Wb=new WeakMap,au=new WeakMap,Rm=new WeakMap,Om=new WeakMap,Gb=new WeakMap,aT=new WeakSet,E8=function(e){e.stopPropagation()},Ar=new WeakSet,S8=function(e){h(this,Ms)._focusEventsAllowed=!1,an(e)},T8=function(e){h(this,Ms)._focusEventsAllowed=!0,an(e)},Op=function(e){const n=h(this,Ms)._uiManager._signal;return!(n instanceof AbortSignal)||n.aborted?!1:(e.addEventListener("focusin",D(this,Ar,S8).bind(this),{capture:!0,signal:n}),e.addEventListener("focusout",D(this,Ar,T8).bind(this),{capture:!0,signal:n}),e.addEventListener("contextmenu",aa,{signal:n}),!0)},Uv=function(){const e=document.createElement("div");return e.className="divider",e},k(al,aT),k(al,Gb,null);let tO=al;var Kb,vd,ul,Ac,P8,C8,nO;class eue{constructor(e){k(this,Ac);k(this,Kb,null);k(this,vd,null);k(this,ul);E(this,ul,e)}show(e,n,r){const[i,s]=D(this,Ac,C8).call(this,n,r),{style:a}=h(this,vd)||E(this,vd,D(this,Ac,P8).call(this));e.append(h(this,vd)),a.insetInlineEnd=`${100*i}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){h(this,vd).remove()}}Kb=new WeakMap,vd=new WeakMap,ul=new WeakMap,Ac=new WeakSet,P8=function(){const e=E(this,vd,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const n=h(this,ul)._signal;n instanceof AbortSignal&&!n.aborted&&e.addEventListener("contextmenu",aa,{signal:n});const r=E(this,Kb,document.createElement("div"));return r.className="buttons",e.append(r),h(this,ul).hasCommentManager()&&D(this,Ac,nO).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{h(this,ul).commentSelection("floating_button")}),D(this,Ac,nO).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{h(this,ul).highlightSelection("floating_button")}),e},C8=function(e,n){let r=0,i=0;for(const s of e){const a=s.y+s.height;if(a<r)continue;const o=s.x+(n?s.width:0);if(a>r){i=o,r=a;continue}n?o>i&&(i=o):o<i&&(i=o)}return[n?1-i:i,r]},nO=function(e,n,r,i){const s=document.createElement("button");s.classList.add("basic",e),s.tabIndex=0,s.setAttribute("data-l10n-id",n);const a=document.createElement("span");s.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",r);const o=h(this,ul)._signal;o instanceof AbortSignal&&!o.aborted&&(s.addEventListener("contextmenu",aa,{signal:o}),s.addEventListener("click",i,{signal:o})),h(this,Kb).append(s)};function I8(t,e,n){for(const r of n)e.addEventListener(r,t[r].bind(t))}var bd,wd,Dm,_d;const at=class at{static initializeAndAddPointerId(e){(h(at,wd)||E(at,wd,new Set)).add(e)}static setPointer(e,n){h(at,bd)||E(at,bd,n),h(at,_d)??E(at,_d,e)}static setTimeStamp(e){E(at,Dm,e)}static isSamePointerId(e){return h(at,bd)===e}static isSamePointerIdOrRemove(e){var n;return h(at,bd)===e?!0:((n=h(at,wd))==null||n.delete(e),!1)}static isSamePointerType(e){return h(at,_d)===e}static isInitializedAndDifferentPointerType(e){return h(at,_d)!==null&&!at.isSamePointerType(e)}static isSameTimeStamp(e){return h(at,Dm)===e}static isUsingMultiplePointers(){var e;return((e=h(at,wd))==null?void 0:e.size)>=1}static clearPointerType(){E(at,_d,null)}static clearPointerIds(){E(at,bd,NaN),E(at,wd,null)}static clearTimeStamp(){E(at,Dm,NaN)}};bd=new WeakMap,wd=new WeakMap,Dm=new WeakMap,_d=new WeakMap,k(at,bd,NaN),k(at,wd,null),k(at,Dm,NaN),k(at,_d,null);let jr=at;var oT;class tue{constructor(){k(this,oT,0)}get id(){return`${db}${In(this,oT)._++}`}}oT=new WeakMap;var Mm,qb,Fr,Nm,cE;const CF=class CF{constructor(){k(this,Nm);k(this,Mm,b8());k(this,qb,0);k(this,Fr,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const s=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return Pe(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:n,name:r,size:i,type:s}=e;return D(this,Nm,cE).call(this,`${n}_${r}_${i}_${s}`,e)}async getFromUrl(e){return D(this,Nm,cE).call(this,e,e)}async getFromBlob(e,n){const r=await n;return D(this,Nm,cE).call(this,e,r)}async getFromId(e){h(this,Fr)||E(this,Fr,new Map);const n=h(this,Fr).get(e);if(!n)return null;if(n.bitmap)return n.refCounter+=1,n;if(n.file)return this.getFromFile(n.file);if(n.blobPromise){const{blobPromise:r}=n;return delete n.blobPromise,this.getFromBlob(n.id,r)}return this.getFromUrl(n.url)}getFromCanvas(e,n){h(this,Fr)||E(this,Fr,new Map);let r=h(this,Fr).get(e);if(r!=null&&r.bitmap)return r.refCounter+=1,r;const i=new OffscreenCanvas(n.width,n.height);return i.getContext("2d").drawImage(n,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${h(this,Mm)}_${In(this,qb)._++}`,refCounter:1,isSvg:!1},h(this,Fr).set(e,r),h(this,Fr).set(r.id,r),r}getSvgUrl(e){const n=h(this,Fr).get(e);return n!=null&&n.isSvg?n.svgUrl:null}deleteId(e){var i;h(this,Fr)||E(this,Fr,new Map);const n=h(this,Fr).get(e);if(!n||(n.refCounter-=1,n.refCounter!==0))return;const{bitmap:r}=n;if(!n.url&&!n.file){const s=new OffscreenCanvas(r.width,r.height);s.getContext("bitmaprenderer").transferFromImageBitmap(r),n.blobPromise=s.convertToBlob()}(i=r.close)==null||i.call(r),n.bitmap=null}isValidId(e){return e.startsWith(`image_${h(this,Mm)}_`)}};Mm=new WeakMap,qb=new WeakMap,Fr=new WeakMap,Nm=new WeakSet,cE=async function(e,n){h(this,Fr)||E(this,Fr,new Map);let r=h(this,Fr).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${h(this,Mm)}_${In(this,qb)._++}`,refCounter:0,isSvg:!1});let i;if(typeof n=="string"?(r.url=n,i=await H_(n,"blob")):n instanceof File?i=r.file=n:n instanceof Blob&&(i=n),i.type==="image/svg+xml"){const s=CF._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((c,u)=>{o.onload=()=>{r.bitmap=o,r.isSvg=!0,c()},a.onload=async()=>{const d=r.svgUrl=a.result;o.src=await s?`${d}#svgView(preserveAspectRatio(none))`:d},o.onerror=a.onerror=u});a.readAsDataURL(i),await l}else r.bitmap=await createImageBitmap(i);r.refCounter=1}catch(i){Te(i),r=null}return h(this,Fr).set(e,r),r&&h(this,Fr).set(r.id,r),r};let rO=CF;var cn,ou,Xb,Ut;class nue{constructor(e=128){k(this,cn,[]);k(this,ou,!1);k(this,Xb);k(this,Ut,-1);E(this,Xb,e)}add({cmd:e,undo:n,post:r,mustExec:i,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(i&&e(),h(this,ou))return;const l={cmd:e,undo:n,post:r,type:s};if(h(this,Ut)===-1){h(this,cn).length>0&&(h(this,cn).length=0),E(this,Ut,0),h(this,cn).push(l);return}if(a&&h(this,cn)[h(this,Ut)].type===s){o&&(l.undo=h(this,cn)[h(this,Ut)].undo),h(this,cn)[h(this,Ut)]=l;return}const c=h(this,Ut)+1;c===h(this,Xb)?h(this,cn).splice(0,1):(E(this,Ut,c),c<h(this,cn).length&&h(this,cn).splice(c)),h(this,cn).push(l)}undo(){if(h(this,Ut)===-1)return;E(this,ou,!0);const{undo:e,post:n}=h(this,cn)[h(this,Ut)];e(),n==null||n(),E(this,ou,!1),E(this,Ut,h(this,Ut)-1)}redo(){if(h(this,Ut)<h(this,cn).length-1){E(this,Ut,h(this,Ut)+1),E(this,ou,!0);const{cmd:e,post:n}=h(this,cn)[h(this,Ut)];e(),n==null||n(),E(this,ou,!1)}}hasSomethingToUndo(){return h(this,Ut)!==-1}hasSomethingToRedo(){return h(this,Ut)<h(this,cn).length-1}cleanType(e){if(h(this,Ut)!==-1){for(let n=h(this,Ut);n>=0;n--)if(h(this,cn)[n].type!==e){h(this,cn).splice(n+1,h(this,Ut)-n),E(this,Ut,n);return}h(this,cn).length=0,E(this,Ut,-1)}}destroy(){E(this,cn,null)}}cn=new WeakMap,ou=new WeakMap,Xb=new WeakMap,Ut=new WeakMap;var lT,k8;class K_{constructor(e){k(this,lT);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:n}=Pr.platform;for(const[r,i,s={}]of e)for(const a of r){const o=a.startsWith("mac+");n&&o?(this.callbacks.set(a.slice(4),{callback:i,options:s}),this.allKeys.add(a.split("+").at(-1))):!n&&!o&&(this.callbacks.set(a,{callback:i,options:s}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,n){if(!this.allKeys.has(n.key))return;const r=this.callbacks.get(D(this,lT,k8).call(this,n));if(!r)return;const{callback:i,options:{bubbles:s=!1,args:a=[],checker:o=null}}=r;o&&!o(e,n)||(i.bind(e,...a,n)(),s||an(n))}}lT=new WeakSet,k8=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const n=this.buffer.join("+");return this.buffer.length=0,n};const cT=class cT{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Xce(e),Pe(this,"_colors",e)}convert(e){const n=G_(e);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[r,i]of this._colors)if(i.every((s,a)=>s===n[a]))return cT._colorsMapping.get(r);return n}getHexCode(e){const n=this._colors.get(e);return n?ue.makeHexColor(...n):e}};Y(cT,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let iO=cT;var Lm,zi,jm,Jt,On,Fm,Ls,Vm,js,Vr,lu,cu,Bm,uu,so,Fs,xd,Yb,Qb,$m,Jb,ao,hu,Um,du,oo,uT,fu,zm,Zb,pu,Ad,Hm,mu,ew,bn,et,hl,gu,yu,tw,Wm,nw,vu,lo,dl,rw,iw,Vs,ne,uE,sO,R8,O8,zv,D8,M8,N8,aO,L8,j8,F8,V8,ti,rl,B8,$8,oO,U8,Hv,lO;const dm=class dm{constructor(e,n,r,i,s,a,o,l,c,u,d,f,p,g,y,v){k(this,ne);k(this,Lm,new AbortController);k(this,zi,null);k(this,jm,null);k(this,Jt,new Map);k(this,On,new Map);k(this,Fm,null);k(this,Ls,null);k(this,Vm,null);k(this,js,new nue);k(this,Vr,null);k(this,lu,null);k(this,cu,null);k(this,Bm,0);k(this,uu,new Set);k(this,so,null);k(this,Fs,null);k(this,xd,new Set);Y(this,"_editorUndoBar",null);k(this,Yb,!1);k(this,Qb,!1);k(this,$m,!1);k(this,Jb,null);k(this,ao,null);k(this,hu,null);k(this,Um,null);k(this,du,!1);k(this,oo,null);k(this,uT,new tue);k(this,fu,!1);k(this,zm,!1);k(this,Zb,!1);k(this,pu,null);k(this,Ad,null);k(this,Hm,null);k(this,mu,null);k(this,ew,null);k(this,bn,ke.NONE);k(this,et,new Set);k(this,hl,null);k(this,gu,null);k(this,yu,null);k(this,tw,null);k(this,Wm,null);k(this,nw,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});k(this,vu,[0,0]);k(this,lo,null);k(this,dl,null);k(this,rw,null);k(this,iw,null);k(this,Vs,null);const b=this._signal=h(this,Lm).signal;E(this,dl,e),E(this,rw,n),E(this,iw,r),E(this,Fm,i),E(this,Vr,s),E(this,gu,a),E(this,Wm,l),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:b}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:b}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:b}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:b}),o._on("setpreference",this.onSetPreference.bind(this),{signal:b}),o._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:b}),window.addEventListener("pointerdown",()=>{E(this,zm,!0)},{capture:!0,signal:b}),window.addEventListener("pointerup",()=>{E(this,zm,!1)},{capture:!0,signal:b}),D(this,ne,D8).call(this),D(this,ne,V8).call(this),D(this,ne,aO).call(this),E(this,Ls,l.annotationStorage),E(this,Jb,l.filterFactory),E(this,yu,c),E(this,Um,u||null),E(this,Yb,d),E(this,Qb,f),E(this,$m,p),E(this,ew,g||null),this.viewParameters={realScale:vh.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=y||null,this._supportsPinchToZoom=v!==!1,s==null||s.setSidebarUiManager(this)}static get _keyboardManager(){const e=dm.prototype,n=a=>h(a,dl).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),r=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return Pe(this,"_keyboardManager",new K_([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&h(a,dl).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&h(a,dl).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:n}]]))}destroy(){var e,n,r,i,s,a,o,l,c;(e=h(this,Vs))==null||e.resolve(),E(this,Vs,null),(n=h(this,Lm))==null||n.abort(),E(this,Lm,null),this._signal=null;for(const u of h(this,On).values())u.destroy();h(this,On).clear(),h(this,Jt).clear(),h(this,xd).clear(),(r=h(this,mu))==null||r.clear(),E(this,zi,null),h(this,et).clear(),h(this,js).destroy(),(i=h(this,Fm))==null||i.destroy(),(s=h(this,Vr))==null||s.destroy(),(a=h(this,gu))==null||a.destroy(),(o=h(this,oo))==null||o.hide(),E(this,oo,null),(l=h(this,Hm))==null||l.destroy(),E(this,Hm,null),E(this,jm,null),h(this,ao)&&(clearTimeout(h(this,ao)),E(this,ao,null)),h(this,lo)&&(clearTimeout(h(this,lo)),E(this,lo,null)),(c=this._editorUndoBar)==null||c.destroy(),E(this,Wm,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return h(this,ew)}get useNewAltTextFlow(){return h(this,Qb)}get useNewAltTextWhenAddingImage(){return h(this,$m)}get hcmFilter(){return Pe(this,"hcmFilter",h(this,yu)?h(this,Jb).addHCMFilter(h(this,yu).foreground,h(this,yu).background):"none")}get direction(){return Pe(this,"direction",getComputedStyle(h(this,dl)).direction)}get _highlightColors(){return Pe(this,"_highlightColors",h(this,Um)?new Map(h(this,Um).split(",").map(e=>(e=e.split("=").map(n=>n.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Pe(this,"highlightColors",null);const n=new Map,r=!!h(this,yu);for(const[i,s]of e){const a=i.endsWith("_HCM");if(r&&a){n.set(i.replace("_HCM",""),s);continue}!r&&!a&&n.set(i,s)}return Pe(this,"highlightColors",n)}get highlightColorNames(){return Pe(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const n=this.highlightColorNames.get(e);return this._highlightColors.get(n)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),E(this,cu,e)}setMainHighlightColorPicker(e){E(this,Hm,e)}editAltText(e,n=!1){var r;(r=h(this,Fm))==null||r.editAltText(this,e,n)}hasCommentManager(){return!!h(this,Vr)}editComment(e,n,r,i){var s;(s=h(this,Vr))==null||s.showDialog(this,e,n,r,i)}selectComment(e,n){const r=h(this,On).get(e),i=r==null?void 0:r.getEditorByUID(n);i==null||i.toggleComment(!0,!0)}updateComment(e){var n;(n=h(this,Vr))==null||n.updateComment(e.getData())}updatePopupColor(e){var n;(n=h(this,Vr))==null||n.updatePopupColor(e)}removeComment(e){var n;(n=h(this,Vr))==null||n.removeComments([e.uid])}toggleComment(e,n,r=void 0){var i;(i=h(this,Vr))==null||i.toggleCommentPopup(e,n,r)}makeCommentColor(e,n){var r;return e&&((r=h(this,Vr))==null?void 0:r.makeCommentColor(e,n))||null}getCommentDialogElement(){var e;return((e=h(this,Vr))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(h(this,On).has(e-1))return;const{resolve:n,promise:r}=Promise.withResolvers(),i=s=>{s.pageNumber===e&&(this._eventBus._off("editorsrendered",i),n())};this._eventBus.on("editorsrendered",i),await r}getSignature(e){var n;(n=h(this,gu))==null||n.getSignature({uiManager:this,editor:e})}get signatureManager(){return h(this,gu)}switchToMode(e,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,n){this._eventBus.dispatch("setpreference",{source:this,name:e,value:n})}onSetPreference({name:e,value:n}){switch(e){case"enableNewAltTextWhenAddingImage":E(this,$m,n);break}}onPageChanging({pageNumber:e}){E(this,Bm,e-1)}focusMainContainer(){h(this,dl).focus()}findParent(e,n){for(const r of h(this,On).values()){const{x:i,y:s,width:a,height:o}=r.div.getBoundingClientRect();if(e>=i&&e<=i+a&&n>=s&&n<=s+o)return r}return null}disableUserSelect(e=!1){h(this,rw).classList.toggle("noUserSelect",e)}addShouldRescale(e){h(this,xd).add(e)}removeShouldRescale(e){h(this,xd).delete(e)}onScaleChanging({scale:e}){var n;this.commitOrRemove(),this.viewParameters.realScale=e*vh.PDF_TO_CSS_UNITS;for(const r of h(this,xd))r.onScaleChanging();(n=h(this,cu))==null||n.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",n=!1){const r=document.getSelection();if(!r||r.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:a,focusOffset:o}=r,l=r.toString(),u=D(this,ne,uE).call(this,r).closest(".textLayer"),d=this.getSelectionBoxes(u);if(!d)return;r.empty();const f=D(this,ne,sO).call(this,u),p=h(this,bn)===ke.NONE,g=()=>{const y=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:i,anchorOffset:s,focusNode:a,focusOffset:o,text:l});p&&this.showAllEditors("highlight",!0,!0),n&&(y==null||y.editComment())};if(p){this.switchToMode(ke.HIGHLIGHT,g);return}g()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!h(this,Ls))return null;const n=`${db}${e}`,r=h(this,Ls).getRawValue(n);return r&&h(this,Ls).remove(n),r}addToAnnotationStorage(e){!e.isEmpty()&&h(this,Ls)&&!h(this,Ls).has(e.id)&&h(this,Ls).setValue(e.id,e)}a11yAlert(e,n=null){const r=h(this,iw);r&&(r.setAttribute("data-l10n-id",e),n?r.setAttribute("data-l10n-args",JSON.stringify(n)):r.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,h(this,du)&&(E(this,du,!1),D(this,ne,zv).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const n of h(this,et))if(n.div.contains(e)){E(this,Ad,[n,e]),n._focusEventsAllowed=!1;break}}focus(){if(!h(this,Ad))return;const[e,n]=h(this,Ad);E(this,Ad,null),n.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}addEditListeners(){D(this,ne,aO).call(this),this.setEditingState(!0)}removeEditListeners(){D(this,ne,L8).call(this),this.setEditingState(!1)}dragOver(e){for(const{type:n}of e.dataTransfer.items)for(const r of h(this,Fs))if(r.isHandlingMimeForPasting(n)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const n of e.dataTransfer.items)for(const r of h(this,Fs))if(r.isHandlingMimeForPasting(n.type)){r.paste(n,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=h(this,zi))==null||r.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of h(this,et)){const s=i.serialize(!0);s&&n.push(s)}n.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:n}=e;for(const s of n.items)for(const a of h(this,Fs))if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let r=n.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(s){Te(`paste: "${s.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const i=this.currentLayer;try{const s=[];for(const l of r){const c=await i.deserialize(l);if(!c)return;s.push(c)}const a=()=>{for(const l of s)D(this,ne,oO).call(this,l);D(this,ne,lO).call(this,s)},o=()=>{for(const l of s)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(s){Te(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),h(this,bn)!==ke.NONE&&!this.isEditorHandlingKeyboard&&dm._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,h(this,du)&&(E(this,du,!1),D(this,ne,zv).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(D(this,ne,M8).call(this),D(this,ne,j8).call(this),D(this,ne,ti).call(this,{isEditing:h(this,bn)!==ke.NONE,isEmpty:D(this,ne,Hv).call(this),hasSomethingToUndo:h(this,js).hasSomethingToUndo(),hasSomethingToRedo:h(this,js).hasSomethingToRedo(),hasSelectedEditor:!1})):(D(this,ne,N8).call(this),D(this,ne,F8).call(this),D(this,ne,ti).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!h(this,Fs)){E(this,Fs,e);for(const n of h(this,Fs))D(this,ne,rl).call(this,n.defaultPropertiesToUpdate)}}getId(){return h(this,uT).id}get currentLayer(){return h(this,On).get(h(this,Bm))}getLayer(e){return h(this,On).get(e)}get currentPageIndex(){return h(this,Bm)}addLayer(e){h(this,On).set(e.pageIndex,e),h(this,fu)?e.enable():e.disable()}removeLayer(e){h(this,On).delete(e.pageIndex)}async updateMode(e,n=null,r=!1,i=!1,s=!1){var a,o,l,c,u,d;if(h(this,bn)!==e&&!(h(this,Vs)&&(await h(this,Vs).promise,!h(this,Vs)))){if(E(this,Vs,Promise.withResolvers()),(a=h(this,cu))==null||a.commitOrRemove(),h(this,bn)===ke.POPUP&&((o=h(this,Vr))==null||o.hideSidebar()),(l=h(this,Vr))==null||l.destroyPopup(),E(this,bn,e),e===ke.NONE){this.setEditingState(!1),D(this,ne,$8).call(this);for(const f of h(this,Jt).values())f.hideStandaloneCommentButton();(c=this._editorUndoBar)==null||c.hide(),this.toggleComment(null),h(this,Vs).resolve();return}for(const f of h(this,Jt).values())f.addStandaloneCommentButton();e===ke.SIGNATURE&&await((u=h(this,gu))==null?void 0:u.loadSignatures()),this.setEditingState(!0),await D(this,ne,B8).call(this),this.unselectAll();for(const f of h(this,On).values())f.updateMode(e);if(e===ke.POPUP){h(this,jm)||E(this,jm,await h(this,Wm).getAnnotationsByType(new Set(h(this,Fs).map(g=>g._editorType))));const f=new Set,p=[];for(const g of h(this,Jt).values()){const{annotationElementId:y,hasComment:v,deleted:b}=g;y&&f.add(y),v&&!b&&p.push(g.getData())}for(const g of h(this,jm)){const{id:y,popupRef:v,contentsObj:b}=g;v&&(b!=null&&b.str)&&!f.has(y)&&!h(this,uu).has(y)&&p.push(g)}(d=h(this,Vr))==null||d.showSidebar(p)}if(!n){r&&this.addNewEditorFromKeyboard(),h(this,Vs).resolve();return}for(const f of h(this,Jt).values())f.uid===n?(this.setSelected(f),s?f.editComment():i?f.enterInEditMode():f.focus()):f.unselect();h(this,Vs).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==h(this,bn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,n){if(h(this,Fs)){switch(e){case ze.CREATE:this.currentLayer.addNewEditor(n);return;case ze.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(h(this,tw)||E(this,tw,new Map)).set(e,n),this.showAllEditors("highlight",n);break}if(this.hasSelection)for(const r of h(this,et))r.updateParams(e,n);else for(const r of h(this,Fs))r.updateDefaultParams(e,n)}}showAllEditors(e,n,r=!1){var s;for(const a of h(this,Jt).values())a.editorType===e&&a.show(n);(((s=h(this,tw))==null?void 0:s.get(ze.HIGHLIGHT_SHOW_ALL))??!0)!==n&&D(this,ne,rl).call(this,[[ze.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(e=!1){if(h(this,Zb)!==e){E(this,Zb,e);for(const n of h(this,On).values())e?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",e)}}*getEditors(e){for(const n of h(this,Jt).values())n.pageIndex===e&&(yield n)}getEditor(e){return h(this,Jt).get(e)}addEditor(e){h(this,Jt).set(e.id,e)}removeEditor(e){var n,r;e.div.contains(document.activeElement)&&(h(this,ao)&&clearTimeout(h(this,ao)),E(this,ao,setTimeout(()=>{this.focusMainContainer(),E(this,ao,null)},0))),h(this,Jt).delete(e.id),e.annotationElementId&&((n=h(this,mu))==null||n.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!h(this,uu).has(e.annotationElementId))&&((r=h(this,Ls))==null||r.remove(e.id))}addDeletedAnnotationElement(e){h(this,uu).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return h(this,uu).has(e)}removeDeletedAnnotationElement(e){h(this,uu).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){h(this,zi)!==e&&(E(this,zi,e),e&&D(this,ne,rl).call(this,e.propertiesToUpdate))}updateUI(e){h(this,ne,U8)===e&&D(this,ne,rl).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){D(this,ne,rl).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(h(this,et).has(e)){h(this,et).delete(e),e.unselect(),D(this,ne,ti).call(this,{hasSelectedEditor:this.hasSelection});return}h(this,et).add(e),e.select(),D(this,ne,rl).call(this,e.propertiesToUpdate),D(this,ne,ti).call(this,{hasSelectedEditor:!0})}setSelected(e){var n;this.updateToolbar({mode:e.mode,editId:e.uid}),(n=h(this,cu))==null||n.commitOrRemove();for(const r of h(this,et))r!==e&&r.unselect();h(this,et).clear(),h(this,et).add(e),e.select(),D(this,ne,rl).call(this,e.propertiesToUpdate),D(this,ne,ti).call(this,{hasSelectedEditor:!0})}isSelected(e){return h(this,et).has(e)}get firstSelectedEditor(){return h(this,et).values().next().value}unselect(e){e.unselect(),h(this,et).delete(e),D(this,ne,ti).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return h(this,et).size!==0}get isEnterHandled(){return h(this,et).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;h(this,js).undo(),D(this,ne,ti).call(this,{hasSomethingToUndo:h(this,js).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:D(this,ne,Hv).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){h(this,js).redo(),D(this,ne,ti).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:h(this,js).hasSomethingToRedo(),isEmpty:D(this,ne,Hv).call(this)})}addCommands(e){h(this,js).add(e),D(this,ne,ti).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:D(this,ne,Hv).call(this)})}cleanUndoStack(e){h(this,js).cleanType(e)}delete(){var s;this.commitOrRemove();const e=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const n=e?[e]:[...h(this,et)],r=()=>{var a;(a=this._editorUndoBar)==null||a.show(i,n.length===1?n[0].editorType:n.length);for(const o of n)o.remove()},i=()=>{for(const a of n)D(this,ne,oO).call(this,a)};this.addCommands({cmd:r,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=h(this,zi))==null||e.commitOrRemove()}hasSomethingToControl(){return h(this,zi)||this.hasSelection}selectAll(){for(const e of h(this,et))e.commit();D(this,ne,lO).call(this,h(this,Jt).values())}unselectAll(){var e;if(!(h(this,zi)&&(h(this,zi).commitOrRemove(),h(this,bn)!==ke.NONE))&&!((e=h(this,cu))!=null&&e.commitOrRemove())&&this.hasSelection){for(const n of h(this,et))n.unselect();h(this,et).clear(),D(this,ne,ti).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,n,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;h(this,vu)[0]+=e,h(this,vu)[1]+=n;const[i,s]=h(this,vu),a=[...h(this,et)],o=1e3;h(this,lo)&&clearTimeout(h(this,lo)),E(this,lo,setTimeout(()=>{E(this,lo,null),h(this,vu)[0]=h(this,vu)[1]=0,this.addCommands({cmd:()=>{for(const l of a)h(this,Jt).has(l.id)&&(l.translateInPage(i,s),l.translationDone())},undo:()=>{for(const l of a)h(this,Jt).has(l.id)&&(l.translateInPage(-i,-s),l.translationDone())},mustExec:!1})},o));for(const l of a)l.translateInPage(e,n),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),E(this,so,new Map);for(const e of h(this,et))h(this,so).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!h(this,so))return!1;this.disableUserSelect(!1);const e=h(this,so);E(this,so,null);let n=!1;for(const[{x:i,y:s,pageIndex:a},o]of e)o.newX=i,o.newY=s,o.newPageIndex=a,n||(n=i!==o.savedX||s!==o.savedY||a!==o.savedPageIndex);if(!n)return!1;const r=(i,s,a,o)=>{if(h(this,Jt).has(i.id)){const l=h(this,On).get(o);l?i._setParentAndPosition(l,s,a):(i.pageIndex=o,i.x=s,i.y=a)}};return this.addCommands({cmd:()=>{for(const[i,{newX:s,newY:a,newPageIndex:o}]of e)r(i,s,a,o)},undo:()=>{for(const[i,{savedX:s,savedY:a,savedPageIndex:o}]of e)r(i,s,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,n){if(h(this,so))for(const r of h(this,so).keys())r.drag(e,n)}rebuild(e){if(e.parent===null){const n=this.getLayer(e.pageIndex);n?(n.changeParent(e),n.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||h(this,et).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return h(this,zi)===e}getActive(){return h(this,zi)}getMode(){return h(this,bn)}isEditingMode(){return h(this,bn)!==ke.NONE}get imageManager(){return Pe(this,"imageManager",new rO)}getSelectionBoxes(e){if(!e)return null;const n=document.getSelection();for(let c=0,u=n.rangeCount;c<u;c++)if(!e.contains(n.getRangeAt(c).commonAncestorContainer))return null;const{x:r,y:i,width:s,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(c,u,d,f)=>({x:(u-i)/a,y:1-(c+d-r)/s,width:f/a,height:d/s});break;case"180":o=(c,u,d,f)=>({x:1-(c+d-r)/s,y:1-(u+f-i)/a,width:d/s,height:f/a});break;case"270":o=(c,u,d,f)=>({x:1-(u+f-i)/a,y:(c-r)/s,width:f/a,height:d/s});break;default:o=(c,u,d,f)=>({x:(c-r)/s,y:(u-i)/a,width:d/s,height:f/a});break}const l=[];for(let c=0,u=n.rangeCount;c<u;c++){const d=n.getRangeAt(c);if(!d.collapsed)for(const{x:f,y:p,width:g,height:y}of d.getClientRects())g===0||y===0||l.push(o(f,p,g,y))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:n}){(h(this,Vm)||E(this,Vm,new Map)).set(e,n)}removeChangedExistingAnnotation({annotationElementId:e}){var n;(n=h(this,Vm))==null||n.delete(e)}renderAnnotationElement(e){var i;const n=(i=h(this,Vm))==null?void 0:i.get(e.data.id);if(!n)return;const r=h(this,Ls).getRawValue(n);r&&(h(this,bn)===ke.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,n,r){var s;const i=(s=h(this,mu))==null?void 0:s.get(e);i&&(i.setCanvas(n,r),h(this,mu).delete(e))}addMissingCanvas(e,n){(h(this,mu)||E(this,mu,new Map)).set(e,n)}};Lm=new WeakMap,zi=new WeakMap,jm=new WeakMap,Jt=new WeakMap,On=new WeakMap,Fm=new WeakMap,Ls=new WeakMap,Vm=new WeakMap,js=new WeakMap,Vr=new WeakMap,lu=new WeakMap,cu=new WeakMap,Bm=new WeakMap,uu=new WeakMap,so=new WeakMap,Fs=new WeakMap,xd=new WeakMap,Yb=new WeakMap,Qb=new WeakMap,$m=new WeakMap,Jb=new WeakMap,ao=new WeakMap,hu=new WeakMap,Um=new WeakMap,du=new WeakMap,oo=new WeakMap,uT=new WeakMap,fu=new WeakMap,zm=new WeakMap,Zb=new WeakMap,pu=new WeakMap,Ad=new WeakMap,Hm=new WeakMap,mu=new WeakMap,ew=new WeakMap,bn=new WeakMap,et=new WeakMap,hl=new WeakMap,gu=new WeakMap,yu=new WeakMap,tw=new WeakMap,Wm=new WeakMap,nw=new WeakMap,vu=new WeakMap,lo=new WeakMap,dl=new WeakMap,rw=new WeakMap,iw=new WeakMap,Vs=new WeakMap,ne=new WeakSet,uE=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},sO=function(e){const{currentLayer:n}=this;if(n.hasTextLayer(e))return n;for(const r of h(this,On).values())if(r.hasTextLayer(e))return r;return null},R8=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=D(this,ne,uE).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(r);i&&(h(this,oo)||E(this,oo,new eue(this)),h(this,oo).show(r,i,this.direction==="ltr"))},O8=function(){var s,a,o;const e=document.getSelection();if(!e||e.isCollapsed){h(this,hl)&&((s=h(this,oo))==null||s.hide(),E(this,hl,null),D(this,ne,ti).call(this,{hasSelectedText:!1}));return}const{anchorNode:n}=e;if(n===h(this,hl))return;const i=D(this,ne,uE).call(this,e).closest(".textLayer");if(!i){h(this,hl)&&((a=h(this,oo))==null||a.hide(),E(this,hl,null),D(this,ne,ti).call(this,{hasSelectedText:!1}));return}if((o=h(this,oo))==null||o.hide(),E(this,hl,n),D(this,ne,ti).call(this,{hasSelectedText:!0}),!(h(this,bn)!==ke.HIGHLIGHT&&h(this,bn)!==ke.NONE)&&(h(this,bn)===ke.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),E(this,du,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=h(this,bn)===ke.HIGHLIGHT?D(this,ne,sO).call(this,i):null;if(l==null||l.toggleDrawing(),h(this,zm)){const c=new AbortController,u=this.combinedSignal(c),d=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),l==null||l.toggleDrawing(!0),f.type==="pointerup"&&D(this,ne,zv).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}else l==null||l.toggleDrawing(!0),D(this,ne,zv).call(this,"main_toolbar")}},zv=function(e=""){h(this,bn)===ke.HIGHLIGHT?this.highlightSelection(e):h(this,Yb)&&D(this,ne,R8).call(this)},D8=function(){document.addEventListener("selectionchange",D(this,ne,O8).bind(this),{signal:this._signal})},M8=function(){if(h(this,hu))return;E(this,hu,new AbortController);const e=this.combinedSignal(h(this,hu));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},N8=function(){var e;(e=h(this,hu))==null||e.abort(),E(this,hu,null)},aO=function(){if(h(this,pu))return;E(this,pu,new AbortController);const e=this.combinedSignal(h(this,pu));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},L8=function(){var e;(e=h(this,pu))==null||e.abort(),E(this,pu,null)},j8=function(){if(h(this,lu))return;E(this,lu,new AbortController);const e=this.combinedSignal(h(this,lu));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},F8=function(){var e;(e=h(this,lu))==null||e.abort(),E(this,lu,null)},V8=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},ti=function(e){Object.entries(e).some(([r,i])=>h(this,nw)[r]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(h(this,nw),e)}),h(this,bn)===ke.HIGHLIGHT&&e.hasSelectedEditor===!1&&D(this,ne,rl).call(this,[[ze.HIGHLIGHT_FREE,!0]]))},rl=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},B8=async function(){if(!h(this,fu)){E(this,fu,!0);const e=[];for(const n of h(this,On).values())e.push(n.enable());await Promise.all(e);for(const n of h(this,Jt).values())n.enable()}},$8=function(){if(this.unselectAll(),h(this,fu)){E(this,fu,!1);for(const e of h(this,On).values())e.disable();for(const e of h(this,Jt).values())e.disable()}},oO=function(e){const n=h(this,On).get(e.pageIndex);n?n.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},U8=function(){let e=null;for(e of h(this,et));return e},Hv=function(){if(h(this,Jt).size===0)return!0;if(h(this,Jt).size===1)for(const e of h(this,Jt).values())return e.isEmpty();return!1},lO=function(e){for(const n of h(this,et))n.unselect();h(this,et).clear();for(const n of e)n.isEmpty()||(h(this,et).add(n),n.select());D(this,ne,ti).call(this,{hasSelectedEditor:this.hasSelection})},Y(dm,"TRANSLATE_SMALL",1),Y(dm,"TRANSLATE_BIG",10);let Xf=dm;var Gn,co,va,Gm,uo,Hi,Km,ho,_i,fl,Ed,fo,bu,ja,Wv,hE;const ni=class ni{constructor(e){k(this,ja);k(this,Gn,null);k(this,co,!1);k(this,va,null);k(this,Gm,null);k(this,uo,null);k(this,Hi,null);k(this,Km,!1);k(this,ho,null);k(this,_i,null);k(this,fl,null);k(this,Ed,null);k(this,fo,!1);E(this,_i,e),E(this,fo,e._uiManager.useNewAltTextFlow),h(ni,bu)||E(ni,bu,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){ni._l10n??(ni._l10n=e)}async render(){const e=E(this,va,document.createElement("button"));e.className="altText",e.tabIndex="0";const n=E(this,Gm,document.createElement("span"));e.append(n),h(this,fo)?(e.classList.add("new"),e.setAttribute("data-l10n-id",h(ni,bu).missing),n.setAttribute("data-l10n-id",h(ni,bu)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=h(this,_i)._uiManager._signal;e.addEventListener("contextmenu",aa,{signal:r}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:r});const i=s=>{s.preventDefault(),h(this,_i)._uiManager.editAltText(h(this,_i)),h(this,fo)&&h(this,_i)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:h(this,ja,Wv)}})};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(E(this,Km,!0),i(s))},{signal:r}),await D(this,ja,hE).call(this),e}finish(){h(this,va)&&(h(this,va).focus({focusVisible:h(this,Km)}),E(this,Km,!1))}isEmpty(){return h(this,fo)?h(this,Gn)===null:!h(this,Gn)&&!h(this,co)}hasData(){return h(this,fo)?h(this,Gn)!==null||!!h(this,fl):this.isEmpty()}get guessedText(){return h(this,fl)}async setGuessedText(e){h(this,Gn)===null&&(E(this,fl,e),E(this,Ed,await ni._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),D(this,ja,hE).call(this))}toggleAltTextBadge(e=!1){var n;if(!h(this,fo)||h(this,Gn)){(n=h(this,ho))==null||n.remove(),E(this,ho,null);return}if(!h(this,ho)){const r=E(this,ho,document.createElement("div"));r.className="noAltTextBadge",h(this,_i).div.append(r)}h(this,ho).classList.toggle("hidden",!e)}serialize(e){let n=h(this,Gn);return!e&&h(this,fl)===n&&(n=h(this,Ed)),{altText:n,decorative:h(this,co),guessedText:h(this,fl),textWithDisclaimer:h(this,Ed)}}get data(){return{altText:h(this,Gn),decorative:h(this,co)}}set data({altText:e,decorative:n,guessedText:r,textWithDisclaimer:i,cancel:s=!1}){r&&(E(this,fl,r),E(this,Ed,i)),!(h(this,Gn)===e&&h(this,co)===n)&&(s||(E(this,Gn,e),E(this,co,n)),D(this,ja,hE).call(this))}toggle(e=!1){h(this,va)&&(!e&&h(this,Hi)&&(clearTimeout(h(this,Hi)),E(this,Hi,null)),h(this,va).disabled=!e)}shown(){h(this,_i)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:h(this,ja,Wv)}})}destroy(){var e,n;(e=h(this,va))==null||e.remove(),E(this,va,null),E(this,Gm,null),E(this,uo,null),(n=h(this,ho))==null||n.remove(),E(this,ho,null)}};Gn=new WeakMap,co=new WeakMap,va=new WeakMap,Gm=new WeakMap,uo=new WeakMap,Hi=new WeakMap,Km=new WeakMap,ho=new WeakMap,_i=new WeakMap,fl=new WeakMap,Ed=new WeakMap,fo=new WeakMap,bu=new WeakMap,ja=new WeakSet,Wv=function(){return h(this,Gn)&&"added"||h(this,Gn)===null&&this.guessedText&&"review"||"missing"},hE=async function(){var i,s,a;const e=h(this,va);if(!e)return;if(h(this,fo)){if(e.classList.toggle("done",!!h(this,Gn)),e.setAttribute("data-l10n-id",h(ni,bu)[h(this,ja,Wv)]),(i=h(this,Gm))==null||i.setAttribute("data-l10n-id",h(ni,bu)[`${h(this,ja,Wv)}-label`]),!h(this,Gn)){(s=h(this,uo))==null||s.remove();return}}else{if(!h(this,Gn)&&!h(this,co)){e.classList.remove("done"),(a=h(this,uo))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=h(this,uo);if(!n){E(this,uo,n=document.createElement("span")),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${h(this,_i).id}`;const o=100,l=h(this,_i)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(h(this,Hi)),E(this,Hi,null)},{once:!0}),e.addEventListener("mouseenter",()=>{E(this,Hi,setTimeout(()=>{E(this,Hi,null),h(this,uo).classList.add("show"),h(this,_i)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:l}),e.addEventListener("mouseleave",()=>{var c;h(this,Hi)&&(clearTimeout(h(this,Hi)),E(this,Hi,null)),(c=h(this,uo))==null||c.classList.remove("show")},{signal:l})}h(this,co)?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=h(this,Gn)),n.parentNode||e.append(n);const r=h(this,_i).getElementForAltText();r==null||r.setAttribute("aria-describedby",n.id)},k(ni,bu,null),Y(ni,"_l10n",null);let NS=ni;var hr,Bs,Sd,xt,sw,Td,ba,Pd,Cd,Id,aw,cO;class uA{constructor(e){k(this,aw);k(this,hr,null);k(this,Bs,null);k(this,Sd,!1);k(this,xt,null);k(this,sw,null);k(this,Td,null);k(this,ba,null);k(this,Pd,null);k(this,Cd,!1);k(this,Id,null);E(this,xt,e)}renderForToolbar(){const e=E(this,Bs,document.createElement("button"));return e.className="comment",D(this,aw,cO).call(this,e,!1)}renderForStandalone(){const e=E(this,hr,document.createElement("button"));e.className="annotationCommentButton";const n=h(this,xt).commentButtonPosition;if(n){const{style:r}=e;r.insetInlineEnd=`calc(${100*(h(this,xt)._uiManager.direction==="ltr"?1-n[0]:n[0])}% - var(--comment-button-dim))`,r.top=`calc(${100*n[1]}% - var(--comment-button-dim))`;const i=h(this,xt).commentButtonColor;i&&(r.backgroundColor=i)}return D(this,aw,cO).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=h(this,hr)??h(this,Bs))==null||e.focus()},0)}onUpdatedColor(){if(!h(this,hr))return;const e=h(this,xt).commentButtonColor;e&&(h(this,hr).style.backgroundColor=e),h(this,xt)._uiManager.updatePopupColor(h(this,xt))}get commentButtonWidth(){var e;return(((e=h(this,hr))==null?void 0:e.getBoundingClientRect().width)??0)/h(this,xt).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(h(this,Id))return h(this,Id);if(!h(this,hr))return null;const{x:e,y:n,height:r}=h(this,hr).getBoundingClientRect(),{x:i,y:s,width:a,height:o}=h(this,xt).parent.boundingClientRect;return[(e-i)/a,(n+r-s)/o]}set commentPopupPositionInLayer(e){E(this,Id,e)}hasDefaultPopupPosition(){return h(this,Id)===null}removeStandaloneCommentButton(){var e;(e=h(this,hr))==null||e.remove(),E(this,hr,null)}removeToolbarCommentButton(){var e;(e=h(this,Bs))==null||e.remove(),E(this,Bs,null)}setCommentButtonStates({selected:e,hasPopup:n}){h(this,hr)&&(h(this,hr).classList.toggle("selected",e),h(this,hr).ariaExpanded=n)}edit(e){const n=this.commentPopupPositionInLayer;let r,i;if(n)[r,i]=n;else{[r,i]=h(this,xt).commentButtonPosition;const{width:u,height:d,x:f,y:p}=h(this,xt);r=f+r*u,i=p+i*d}const s=h(this,xt).parent.boundingClientRect,{x:a,y:o,width:l,height:c}=s;h(this,xt)._uiManager.editComment(h(this,xt),a+r*l,o+i*c,{...e,parentDimensions:s})}finish(){h(this,Bs)&&(h(this,Bs).focus({focusVisible:h(this,Sd)}),E(this,Sd,!1))}isDeleted(){return h(this,Cd)||h(this,ba)===""}isEmpty(){return h(this,ba)===null}hasBeenEdited(){return this.isDeleted()||h(this,ba)!==h(this,sw)}serialize(){return this.data}get data(){return{text:h(this,ba),richText:h(this,Td),date:h(this,Pd),deleted:this.isDeleted()}}set data(e){if(e!==h(this,ba)&&E(this,Td,null),e===null){E(this,ba,""),E(this,Cd,!0);return}E(this,ba,e),E(this,Pd,new Date),E(this,Cd,!1)}setInitialText(e,n=null){E(this,sw,e),this.data=e,E(this,Pd,null),E(this,Td,n)}shown(){}destroy(){var e,n;(e=h(this,Bs))==null||e.remove(),E(this,Bs,null),(n=h(this,hr))==null||n.remove(),E(this,hr,null),E(this,ba,""),E(this,Td,null),E(this,Pd,null),E(this,xt,null),E(this,Sd,!1),E(this,Cd,!1)}}hr=new WeakMap,Bs=new WeakMap,Sd=new WeakMap,xt=new WeakMap,sw=new WeakMap,Td=new WeakMap,ba=new WeakMap,Pd=new WeakMap,Cd=new WeakMap,Id=new WeakMap,aw=new WeakSet,cO=function(e,n){if(!h(this,xt)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",n?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[h(this,xt)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const r=h(this,xt)._uiManager._signal;if(!(r instanceof AbortSignal)||r.aborted)return e;e.addEventListener("contextmenu",aa,{signal:r}),n&&(e.addEventListener("focusin",s=>{h(this,xt)._focusEventsAllowed=!1,an(s)},{capture:!0,signal:r}),e.addEventListener("focusout",s=>{h(this,xt)._focusEventsAllowed=!0,an(s)},{capture:!0,signal:r})),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:r});const i=s=>{s.preventDefault(),e===h(this,Bs)?this.edit():h(this,xt).toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(E(this,Sd,!0),i(s))},{signal:r}),e.addEventListener("pointerenter",()=>{h(this,xt).toggleComment(!1,!0)},{signal:r}),e.addEventListener("pointerleave",()=>{h(this,xt).toggleComment(!1,!1)},{signal:r}),e};var qm,kd,ow,lw,cw,uw,hw,pl,Rd,ml,Od,gl,Ch,z8,H8,W8;const IF=class IF{constructor({container:e,isPinchingDisabled:n=null,isPinchingStopped:r=null,onPinchStart:i=null,onPinching:s=null,onPinchEnd:a=null,signal:o}){k(this,Ch);k(this,qm);k(this,kd,!1);k(this,ow,null);k(this,lw);k(this,cw);k(this,uw);k(this,hw);k(this,pl,null);k(this,Rd);k(this,ml,null);k(this,Od);k(this,gl,null);E(this,qm,e),E(this,ow,r),E(this,lw,n),E(this,cw,i),E(this,uw,s),E(this,hw,a),E(this,Od,new AbortController),E(this,Rd,AbortSignal.any([o,h(this,Od).signal])),e.addEventListener("touchstart",D(this,Ch,z8).bind(this),{passive:!1,signal:h(this,Rd)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Wo.pixelRatio}destroy(){var e,n;(e=h(this,Od))==null||e.abort(),E(this,Od,null),(n=h(this,pl))==null||n.abort(),E(this,pl,null)}};qm=new WeakMap,kd=new WeakMap,ow=new WeakMap,lw=new WeakMap,cw=new WeakMap,uw=new WeakMap,hw=new WeakMap,pl=new WeakMap,Rd=new WeakMap,ml=new WeakMap,Od=new WeakMap,gl=new WeakMap,Ch=new WeakSet,z8=function(e){var i,s,a;if((i=h(this,lw))!=null&&i.call(this))return;if(e.touches.length===1){if(h(this,pl))return;const o=E(this,pl,new AbortController),l=AbortSignal.any([h(this,Rd),o.signal]),c=h(this,qm),u={capture:!0,signal:l,passive:!1},d=f=>{var p;f.pointerType==="touch"&&((p=h(this,pl))==null||p.abort(),E(this,pl,null))};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(an(f),d(f))},u),c.addEventListener("pointerup",d,u),c.addEventListener("pointercancel",d,u);return}if(!h(this,gl)){E(this,gl,new AbortController);const o=AbortSignal.any([h(this,Rd),h(this,gl).signal]),l=h(this,qm),c={signal:o,capture:!1,passive:!1};l.addEventListener("touchmove",D(this,Ch,H8).bind(this),c);const u=D(this,Ch,W8).bind(this);l.addEventListener("touchend",u,c),l.addEventListener("touchcancel",u,c),c.capture=!0,l.addEventListener("pointerdown",an,c),l.addEventListener("pointermove",an,c),l.addEventListener("pointercancel",an,c),l.addEventListener("pointerup",an,c),(s=h(this,cw))==null||s.call(this)}if(an(e),e.touches.length!==2||(a=h(this,ow))!=null&&a.call(this)){E(this,ml,null);return}let[n,r]=e.touches;n.identifier>r.identifier&&([n,r]=[r,n]),E(this,ml,{touch0X:n.screenX,touch0Y:n.screenY,touch1X:r.screenX,touch1Y:r.screenY})},H8=function(e){var T;if(!h(this,ml)||e.touches.length!==2)return;an(e);let[n,r]=e.touches;n.identifier>r.identifier&&([n,r]=[r,n]);const{screenX:i,screenY:s}=n,{screenX:a,screenY:o}=r,l=h(this,ml),{touch0X:c,touch0Y:u,touch1X:d,touch1Y:f}=l,p=d-c,g=f-u,y=a-i,v=o-s,b=Math.hypot(y,v)||1,_=Math.hypot(p,g)||1;if(!h(this,kd)&&Math.abs(_-b)<=IF.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=s,l.touch1X=a,l.touch1Y=o,!h(this,kd)){E(this,kd,!0);return}const w=[(i+a)/2,(s+o)/2];(T=h(this,uw))==null||T.call(this,w,_,b)},W8=function(e){var n;e.touches.length>=2||(h(this,gl)&&(h(this,gl).abort(),E(this,gl,null),(n=h(this,hw))==null||n.call(this)),h(this,ml)&&(an(e),E(this,ml,null),E(this,kd,!1)))};let LS=IF;var Dd,wa,Nt,mt,yl,Xm,wu,dw,dr,Md,vl,$s,_u,fw,Nd,Wi,pw,Ld,bl,po,Ym,Qm,Us,jd,mw,hT,ye,uO,gw,hO,dE,G8,K8,dO,fE,fO,q8,X8,Y8,pO,Q8,mO,J8,Z8,eG,gO,Gv;const Ie=class Ie{constructor(e){k(this,ye);k(this,Dd,null);k(this,wa,null);k(this,Nt,null);k(this,mt,null);k(this,yl,null);k(this,Xm,!1);k(this,wu,null);k(this,dw,"");k(this,dr,null);k(this,Md,null);k(this,vl,null);k(this,$s,null);k(this,_u,null);k(this,fw,"");k(this,Nd,!1);k(this,Wi,null);k(this,pw,!1);k(this,Ld,!1);k(this,bl,!1);k(this,po,null);k(this,Ym,0);k(this,Qm,0);k(this,Us,null);k(this,jd,null);Y(this,"isSelected",!1);Y(this,"_isCopy",!1);Y(this,"_editToolbar",null);Y(this,"_initialOptions",Object.create(null));Y(this,"_initialData",null);Y(this,"_isVisible",!0);Y(this,"_uiManager",null);Y(this,"_focusEventsAllowed",!0);k(this,mw,!1);k(this,hT,Ie._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:n,rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[s,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Ie.prototype._resizeWithKeyboard,n=Xf.TRANSLATE_SMALL,r=Xf.TRANSLATE_BIG;return Pe(this,"_resizerKeyboardManager",new K_([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],Ie.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Pe(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const n=new rue({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});n.annotationElementId=e.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(e,n){if(Ie._l10n??(Ie._l10n=e),Ie._l10nResizer||(Ie._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ie._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);Ie._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,n){bt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return h(this,mw)}set _isDraggable(e){var n;E(this,mw,e),(n=this.div)==null||n.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(e*2),this.y+=this.width*e/(n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(e*2),this.y-=this.width*e/(n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=h(this,hT)}setParent(e){var n;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(D(this,ye,Gv).call(this),(n=h(this,$s))==null||n.remove(),E(this,$s,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(h(this,Nd)?E(this,Nd,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const n=e.relatedTarget;n!=null&&n.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,n,r,i){const[s,a]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/s,this.y=(n+i)/a,this.fixAndSetPosition()}_moveAfterPaste(e,n){const[r,i]=this.parentDimensions;this.setAt(e*r,n*i,this.width*r,this.height*i),this._onTranslated()}translate(e,n){D(this,ye,uO).call(this,this.parentDimensions,e,n)}translateInPage(e,n){h(this,Wi)||E(this,Wi,[this.x,this.y,this.width,this.height]),D(this,ye,uO).call(this,this.pageDimensions,e,n),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,n){h(this,Wi)||E(this,Wi,[this.x,this.y,this.width,this.height]);const{div:r,parentDimensions:[i,s]}=this;if(this.x+=e/i,this.y+=n/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[l,c]=this.getBaseTranslation();a+=l,o+=c;const{style:u}=r;u.left=`${(100*a).toFixed(2)}%`,u.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),r.scrollIntoView({block:"nearest"})}_onTranslating(e,n){}_onTranslated(e,n){}get _hasBeenMoved(){return!!h(this,Wi)&&(h(this,Wi)[0]!==this.x||h(this,Wi)[1]!==this.y)}get _hasBeenResized(){return!!h(this,Wi)&&(h(this,Wi)[2]!==this.width||h(this,Wi)[3]!==this.height)}getBaseTranslation(){const[e,n]=this.parentDimensions,{_borderLineWidth:r}=Ie,i=r/e,s=r/n;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:n},pageDimensions:[r,i]}=this;let{x:s,y:a,width:o,height:l}=this;if(o*=r,l*=i,s*=r,a*=i,this._mustFixPosition)switch(e){case 0:s=oi(s,0,r-o),a=oi(a,0,i-l);break;case 90:s=oi(s,0,r-l),a=oi(a,o,i);break;case 180:s=oi(s,o,r),a=oi(a,l,i);break;case 270:s=oi(s,l,r),a=oi(a,0,i-o);break}this.x=s/=r,this.y=a/=i;const[c,u]=this.getBaseTranslation();s+=c,a+=u,n.left=`${(100*s).toFixed(2)}%`,n.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,n){var r;return D(r=Ie,gw,hO).call(r,e,n,this.parentRotation)}pageTranslationToScreen(e,n){var r;return D(r=Ie,gw,hO).call(r,e,n,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[n,r]}=this;return[n*e,r*e]}setDims(){const{div:{style:e},width:n,height:r}=this;e.width=`${(100*n).toFixed(2)}%`,e.height=`${(100*r).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=h(this,Nt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||h(this,Ld))return this._editToolbar;this._editToolbar=new tO(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[n,r]of e)await this._editToolbar.addButton(n,r);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,n;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(n=h(this,Nt))==null||n.destroy()}addContainer(e){var r;const n=(r=this._editToolbar)==null?void 0:r.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return h(this,Nt)||(NS.initialize(Ie._l10n),E(this,Nt,new NS(this)),h(this,Dd)&&(h(this,Nt).data=h(this,Dd),E(this,Dd,null))),h(this,Nt)}get altTextData(){var e;return(e=h(this,Nt))==null?void 0:e.data}set altTextData(e){h(this,Nt)&&(h(this,Nt).data=e)}get guessedAltText(){var e;return(e=h(this,Nt))==null?void 0:e.guessedText}async setGuessedAltText(e){var n;await((n=h(this,Nt))==null?void 0:n.setGuessedText(e))}serializeAltText(e){var n;return(n=h(this,Nt))==null?void 0:n.serialize(e)}hasAltText(){return!!h(this,Nt)&&!h(this,Nt).isEmpty()}hasAltTextData(){var e;return((e=h(this,Nt))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=h(this,mt))==null||e.focusButton()}addCommentButton(){return this.canAddComment?h(this,mt)||E(this,mt,new uA(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(h(this,yl)){this._uiManager.isEditingMode()&&h(this,yl).classList.remove("hidden");return}this.hasComment&&(E(this,yl,h(this,mt).renderForStandalone()),this.div.append(h(this,yl)))}}removeStandaloneCommentButton(){h(this,mt).removeStandaloneCommentButton(),E(this,yl,null)}hideStandaloneCommentButton(){var e;(e=h(this,yl))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:n,date:r,deleted:i}}=h(this,mt);return{text:n,richText:e,date:r,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){h(this,mt)||E(this,mt,new uA(this)),h(this,mt).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:n,richText:r}){if(!n||(h(this,mt)||E(this,mt,new uA(this)),h(this,mt).setInitialText(e,r),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){var e;return(e=h(this,mt))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=h(this,mt))==null?void 0:e.isDeleted()}get hasComment(){return!!h(this,mt)&&!h(this,mt).isEmpty()&&!h(this,mt).isDeleted()}async editComment(e){h(this,mt)||E(this,mt,new uA(this)),h(this,mt).edit(e)}toggleComment(e,n=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,n)}setSelectedCommentButton(e){h(this,mt).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[s]=this.pageDimensions,[a]=this.pageTranslation,o=a+s+1,l=i-100,c=o+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[o,l,c,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:n}}){h(this,mt).data=n?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var a;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=h(this,Xm)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),D(this,ye,mO).call(this);const[n,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/n).toFixed(2)}%`,e.style.maxHeight=`${(100*n/r).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),I8(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(h(this,jd)||E(this,jd,new LS({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:D(this,ye,q8).bind(this),onPinching:D(this,ye,X8).bind(this),onPinchEnd:D(this,ye,Y8).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(a=this._uiManager._editorUndoBar)==null||a.hide(),e}pointerdown(e){const{isMac:n}=Pr.platform;if(e.button!==0||e.ctrlKey&&n){e.preventDefault();return}if(E(this,Nd,!0),this._isDraggable){D(this,ye,Q8).call(this,e);return}D(this,ye,pO).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){h(this,po)&&clearTimeout(h(this,po)),E(this,po,setTimeout(()=>{var e;E(this,po,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,n,r){e.changeParent(this),this.x=n,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,n,r=this.rotation){const i=this.parentScale,[s,a]=this.pageDimensions,[o,l]=this.pageTranslation,c=e/i,u=n/i,d=this.x*s,f=this.y*a,p=this.width*s,g=this.height*a;switch(r){case 0:return[d+c+o,a-f-u-g+l,d+c+p+o,a-f-u+l];case 90:return[d+u+o,a-f+c+l,d+u+g+o,a-f+c+p+l];case 180:return[d-c-p+o,a-f+u+l,d-c+o,a-f+u+g+l];case 270:return[d-u-g+o,a-f-c-p+l,d-u+o,a-f-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,n){const[r,i,s,a]=e,o=s-r,l=a-i;switch(this.rotation){case 0:return[r,n-a,o,l];case 90:return[r,n-i,l,o];case 180:return[s,n-i,o,l];case 270:return[s,n-a,l,o];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Ie._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=h(this,mt))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:n,date:r,opacity:i,deleted:s,richText:a},uid:o,pageIndex:l,creationDate:c,modificationDate:u}=this;return{id:o,pageIndex:l,rect:this.getPDFRect(),richText:a,contentsObj:{str:e},creationDate:c,modificationDate:r||u,popupRef:!s,color:n,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),E(this,Ld,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),E(this,Ld,!1),!0):!1}isInEditMode(){return h(this,Ld)}shouldGetKeyboardEvents(){return h(this,bl)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:n,bottom:r,right:i}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return n<a&&i>0&&e<s&&r>0}rebuild(){D(this,ye,mO).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,n=null){var r;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((r=this._initialData)==null?void 0:r.popupRef)||""}}static async deserialize(e,n,r){const i=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:r,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,E(i,Dd,e.accessibilityData),i._isCopy=e.isCopy||!1;const[s,a]=i.pageDimensions,[o,l,c,u]=i.getRectInCurrentCoords(e.rect,a);return i.x=o/s,i.y=l/a,i.width=c/s,i.height=u/a,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,n,r;if((e=h(this,_u))==null||e.abort(),E(this,_u,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),h(this,po)&&(clearTimeout(h(this,po)),E(this,po,null)),D(this,ye,Gv).call(this),this.removeEditToolbar(),h(this,Us)){for(const i of h(this,Us).values())clearTimeout(i);E(this,Us,null)}this.parent=null,(n=h(this,jd))==null||n.destroy(),E(this,jd,null),(r=h(this,$s))==null||r.remove(),E(this,$s,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(D(this,ye,G8).call(this),h(this,dr).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,n]}=this,[r,i,s,a]=this.getPDFRect();return[Ie._round(r+(s-r)*e),Ie._round(i+(a-i)*(1-n))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return h(this,mt).commentPopupPositionInLayer}set commentPopupPosition(e){h(this,mt).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return h(this,mt).hasDefaultPopupPosition()}get commentButtonWidth(){return h(this,mt).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){var n;(n=h(this,mt))==null||n.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),E(this,vl,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const n=h(this,dr).children;if(!h(this,wa)){E(this,wa,Array.from(n));const a=D(this,ye,J8).bind(this),o=D(this,ye,Z8).bind(this),l=this._uiManager._signal;for(const c of h(this,wa)){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",a,{signal:l}),c.addEventListener("blur",o,{signal:l}),c.addEventListener("focus",D(this,ye,eG).bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",Ie._l10nResizer[u])}}const r=h(this,wa)[0];let i=0;for(const a of n){if(a===r)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(h(this,wa).length/4);if(s!==i){if(s<i)for(let o=0;o<i-s;o++)h(this,dr).append(h(this,dr).firstElementChild);else if(s>i)for(let o=0;o<s-i;o++)h(this,dr).firstElementChild.before(h(this,dr).lastElementChild);let a=0;for(const o of n){const c=h(this,wa)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",Ie._l10nResizer[c])}}D(this,ye,gO).call(this,0),E(this,bl,!0),h(this,dr).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,n){h(this,bl)&&D(this,ye,fO).call(this,h(this,fw),{deltaX:e,deltaY:n,fromKeyboard:!0})}_stopResizingWithKeyboard(){D(this,ye,Gv).call(this),this.div.focus()}select(){var e,n,r;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,s;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(n=this._editToolbar)==null||n.show(),(r=h(this,Nt))==null||r.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,n,r,i,s;this.isSelected&&(this.isSelected=!1,(e=h(this,dr))==null||e.classList.add("hidden"),(n=this.div)==null||n.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(s=h(this,Nt))==null||s.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,n){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return h(this,pw)}set isEditing(e){E(this,pw,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,n=!1){if(n){h(this,Us)||E(this,Us,new Map);const{action:r}=e;let i=h(this,Us).get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),h(this,Us).delete(r),h(this,Us).size===0&&E(this,Us,null)},Ie._telemetryTimeout),h(this,Us).set(r,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),E(this,Xm,!1)}disable(){this.div&&(this.div.tabIndex=-1),E(this,Xm,!0)}updateFakeAnnotationElement(e){if(!h(this,$s)&&!this.deleted){E(this,$s,e.addFakeAnnotation(this));return}if(this.deleted){h(this,$s).remove(),E(this,$s,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&h(this,$s).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let n=e.container.querySelector(".annotationContent");if(!n)n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),e.container.prepend(n);else if(n.nodeName==="CANVAS"){const r=n;n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),r.before(n)}return n}resetAnnotationElement(e){const{firstElementChild:n}=e.container;(n==null?void 0:n.nodeName)==="DIV"&&n.classList.contains("annotationContent")&&n.remove()}};Dd=new WeakMap,wa=new WeakMap,Nt=new WeakMap,mt=new WeakMap,yl=new WeakMap,Xm=new WeakMap,wu=new WeakMap,dw=new WeakMap,dr=new WeakMap,Md=new WeakMap,vl=new WeakMap,$s=new WeakMap,_u=new WeakMap,fw=new WeakMap,Nd=new WeakMap,Wi=new WeakMap,pw=new WeakMap,Ld=new WeakMap,bl=new WeakMap,po=new WeakMap,Ym=new WeakMap,Qm=new WeakMap,Us=new WeakMap,jd=new WeakMap,mw=new WeakMap,hT=new WeakMap,ye=new WeakSet,uO=function([e,n],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/n,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},gw=new WeakSet,hO=function(e,n,r){switch(r){case 90:return[n,-e];case 180:return[-e,-n];case 270:return[-n,e];default:return[e,n]}},dE=function(e){switch(e){case 90:{const[n,r]=this.pageDimensions;return[0,-n/r,r/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,r]=this.pageDimensions;return[0,n/r,-r/n,0]}default:return[1,0,0,1]}},G8=function(){if(h(this,dr))return;E(this,dr,document.createElement("div")),h(this,dr).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],n=this._uiManager._signal;for(const r of e){const i=document.createElement("div");h(this,dr).append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",D(this,ye,K8).bind(this,r),{signal:n}),i.addEventListener("contextmenu",aa,{signal:n}),i.tabIndex=-1}this.div.prepend(h(this,dr))},K8=function(e,n){var u;n.preventDefault();const{isMac:r}=Pr.platform;if(n.button!==0||n.ctrlKey&&r)return;(u=h(this,Nt))==null||u.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,E(this,Md,[n.screenX,n.screenY]);const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",D(this,ye,fO).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",an,{passive:!1,signal:a}),window.addEventListener("contextmenu",aa,{signal:a}),E(this,vl,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const c=()=>{var d;s.abort(),this.parent.togglePointerEvents(!0),(d=h(this,Nt))==null||d.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=o,this.div.style.cursor=l,D(this,ye,fE).call(this)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})},dO=function(e,n,r,i){this.width=r,this.height=i,this.x=e,this.y=n,this.setDims(),this.fixAndSetPosition(),this._onResized()},fE=function(){if(!h(this,vl))return;const{savedX:e,savedY:n,savedWidth:r,savedHeight:i}=h(this,vl);E(this,vl,null);const s=this.x,a=this.y,o=this.width,l=this.height;s===e&&a===n&&o===r&&l===i||this.addCommands({cmd:D(this,ye,dO).bind(this,s,a,o,l),undo:D(this,ye,dO).bind(this,e,n,r,i),mustExec:!0})},fO=function(e,n){const[r,i]=this.parentDimensions,s=this.x,a=this.y,o=this.width,l=this.height,c=Ie.MIN_SIZE/r,u=Ie.MIN_SIZE/i,d=D(this,ye,dE).call(this,this.rotation),f=(Z,G)=>[d[0]*Z+d[2]*G,d[1]*Z+d[3]*G],p=D(this,ye,dE).call(this,360-this.rotation),g=(Z,G)=>[p[0]*Z+p[2]*G,p[1]*Z+p[3]*G];let y,v,b=!1,_=!1;switch(e){case"topLeft":b=!0,y=(Z,G)=>[0,0],v=(Z,G)=>[Z,G];break;case"topMiddle":y=(Z,G)=>[Z/2,0],v=(Z,G)=>[Z/2,G];break;case"topRight":b=!0,y=(Z,G)=>[Z,0],v=(Z,G)=>[0,G];break;case"middleRight":_=!0,y=(Z,G)=>[Z,G/2],v=(Z,G)=>[0,G/2];break;case"bottomRight":b=!0,y=(Z,G)=>[Z,G],v=(Z,G)=>[0,0];break;case"bottomMiddle":y=(Z,G)=>[Z/2,G],v=(Z,G)=>[Z/2,0];break;case"bottomLeft":b=!0,y=(Z,G)=>[0,G],v=(Z,G)=>[Z,0];break;case"middleLeft":_=!0,y=(Z,G)=>[0,G/2],v=(Z,G)=>[Z,G/2];break}const w=y(o,l),T=v(o,l);let P=f(...T);const O=Ie._round(s+P[0]),C=Ie._round(a+P[1]);let I=1,M=1,L,N;if(n.fromKeyboard)({deltaX:L,deltaY:N}=n);else{const{screenX:Z,screenY:G}=n,[U,H]=h(this,Md);[L,N]=this.screenToPageTranslation(Z-U,G-H),h(this,Md)[0]=Z,h(this,Md)[1]=G}if([L,N]=g(L/r,N/i),b){const Z=Math.hypot(o,l);I=M=Math.max(Math.min(Math.hypot(T[0]-w[0]-L,T[1]-w[1]-N)/Z,1/o,1/l),c/o,u/l)}else _?I=oi(Math.abs(T[0]-w[0]-L),c,1)/o:M=oi(Math.abs(T[1]-w[1]-N),u,1)/l;const F=Ie._round(o*I),j=Ie._round(l*M);P=f(...v(F,j));const K=O-P[0],te=C-P[1];h(this,Wi)||E(this,Wi,[this.x,this.y,this.width,this.height]),this.width=F,this.height=j,this.x=K,this.y=te,this.setDims(),this.fixAndSetPosition(),this._onResizing()},q8=function(){var e;E(this,vl,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=h(this,Nt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},X8=function(e,n,r){let s=.7*(r/n)+1-.7;if(s===1)return;const a=D(this,ye,dE).call(this,this.rotation),o=(O,C)=>[a[0]*O+a[2]*C,a[1]*O+a[3]*C],[l,c]=this.parentDimensions,u=this.x,d=this.y,f=this.width,p=this.height,g=Ie.MIN_SIZE/l,y=Ie.MIN_SIZE/c;s=Math.max(Math.min(s,1/f,1/p),g/f,y/p);const v=Ie._round(f*s),b=Ie._round(p*s);if(v===f&&b===p)return;h(this,Wi)||E(this,Wi,[u,d,f,p]);const _=o(f/2,p/2),w=Ie._round(u+_[0]),T=Ie._round(d+_[1]),P=o(v/2,b/2);this.x=w-P[0],this.y=T-P[1],this.width=v,this.height=b,this.setDims(),this.fixAndSetPosition(),this._onResizing()},Y8=function(){var e;(e=h(this,Nt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),D(this,ye,fE).call(this)},pO=function(e){const{isMac:n}=Pr.platform;e.ctrlKey&&!n||e.shiftKey||e.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)},Q8=function(e){const{isSelected:n}=this;this._uiManager.setUpDragSession();let r=!1;const i=new AbortController,s=this._uiManager.combinedSignal(i),a={capture:!0,passive:!1,signal:s},o=c=>{i.abort(),E(this,wu,null),E(this,Nd,!1),this._uiManager.endDragSession()||D(this,ye,pO).call(this,c),r&&this._onStopDragging()};n&&(E(this,Ym,e.clientX),E(this,Qm,e.clientY),E(this,wu,e.pointerId),E(this,dw,e.pointerType),window.addEventListener("pointermove",c=>{r||(r=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:u,clientY:d,pointerId:f}=c;if(f!==h(this,wu)){an(c);return}const[p,g]=this.screenToPageTranslation(u-h(this,Ym),d-h(this,Qm));E(this,Ym,u),E(this,Qm,d),this._uiManager.dragSelectedEditors(p,g)},a),window.addEventListener("touchmove",an,a),window.addEventListener("pointerdown",c=>{c.pointerType===h(this,dw)&&(h(this,jd)||c.isPrimary)&&o(c),an(c)},a));const l=c=>{if(!h(this,wu)||h(this,wu)===c.pointerId){o(c);return}an(c)};window.addEventListener("pointerup",l,{signal:s}),window.addEventListener("blur",l,{signal:s})},mO=function(){if(h(this,_u)||!this.div)return;E(this,_u,new AbortController);const e=this._uiManager.combinedSignal(h(this,_u));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},J8=function(e){Ie._resizerKeyboardManager.exec(this,e)},Z8=function(e){var n;h(this,bl)&&((n=e.relatedTarget)==null?void 0:n.parentNode)!==h(this,dr)&&D(this,ye,Gv).call(this)},eG=function(e){E(this,fw,h(this,bl)?e:"")},gO=function(e){if(h(this,wa))for(const n of h(this,wa))n.tabIndex=e},Gv=function(){E(this,bl,!1),D(this,ye,gO).call(this,-1),D(this,ye,fE).call(this)},k(Ie,gw),Y(Ie,"_l10n",null),Y(Ie,"_l10nResizer",null),Y(Ie,"_borderLineWidth",-1),Y(Ie,"_colorManager",new iO),Y(Ie,"_zIndex",1),Y(Ie,"_telemetryTimeout",1e3);let Tt=Ie;class rue extends Tt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const d4=3285377520,Ps=4294901760,eo=65535;class tG{constructor(e){this.h1=e?e&4294967295:d4,this.h2=e?e&4294967295:d4}update(e){let n,r;if(typeof e=="string"){n=new Uint8Array(e.length*2),r=0;for(let y=0,v=e.length;y<v;y++){const b=e.charCodeAt(y);b<=255?n[r++]=b:(n[r++]=b>>>8,n[r++]=b&255)}}else if(ArrayBuffer.isView(e))n=e.slice(),r=n.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=r>>2,s=r-i*4,a=new Uint32Array(n.buffer,0,i);let o=0,l=0,c=this.h1,u=this.h2;const d=3432918353,f=461845907,p=d&eo,g=f&eo;for(let y=0;y<i;y++)y&1?(o=a[y],o=o*d&Ps|o*p&eo,o=o<<15|o>>>17,o=o*f&Ps|o*g&eo,c^=o,c=c<<13|c>>>19,c=c*5+3864292196):(l=a[y],l=l*d&Ps|l*p&eo,l=l<<15|l>>>17,l=l*f&Ps|l*g&eo,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(o=0,s){case 3:o^=n[i*4+2]<<16;case 2:o^=n[i*4+1]<<8;case 1:o^=n[i*4],o=o*d&Ps|o*p&eo,o=o<<15|o>>>17,o=o*f&Ps|o*g&eo,i&1?c^=o:u^=o}this.h1=c,this.h2=u}hexdigest(){let e=this.h1,n=this.h2;return e^=n>>>1,e=e*3981806797&Ps|e*36045&eo,n=n*4283543511&Ps|((n<<16|e>>>16)*2950163797&Ps)>>>16,e^=n>>>1,e=e*444984403&Ps|e*60499&eo,n=n*3301882366&Ps|((n<<16|e>>>16)*3120437893&Ps)>>>16,e^=n>>>1,(e>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}const yO=Object.freeze({map:null,hash:"",transfer:void 0});var Fd,Vd,wl,fr,dT,nG;class k2{constructor(){k(this,dT);k(this,Fd,!1);k(this,Vd,null);k(this,wl,null);k(this,fr,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,n){const r=h(this,fr).get(e);return r===void 0?n:Object.assign(n,r)}getRawValue(e){return h(this,fr).get(e)}remove(e){const n=h(this,fr).get(e);if(n!==void 0&&(n instanceof Tt&&h(this,wl).delete(n.annotationElementId),h(this,fr).delete(e),h(this,fr).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const r of h(this,fr).values())if(r instanceof Tt)return;this.onAnnotationEditor(null)}}setValue(e,n){const r=h(this,fr).get(e);let i=!1;if(r!==void 0)for(const[s,a]of Object.entries(n))r[s]!==a&&(i=!0,r[s]=a);else i=!0,h(this,fr).set(e,n);i&&D(this,dT,nG).call(this),n instanceof Tt&&((h(this,wl)||E(this,wl,new Map)).set(n.annotationElementId,n),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(n.constructor._type))}has(e){return h(this,fr).has(e)}get size(){return h(this,fr).size}resetModified(){h(this,Fd)&&(E(this,Fd,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new rG(this)}get serializable(){if(h(this,fr).size===0)return yO;const e=new Map,n=new tG,r=[],i=Object.create(null);let s=!1;for(const[a,o]of h(this,fr)){const l=o instanceof Tt?o.serialize(!1,i):o;l&&(e.set(a,l),n.update(`${a}:${JSON.stringify(l)}`),s||(s=!!l.bitmap))}if(s)for(const a of e.values())a.bitmap&&r.push(a.bitmap);return e.size>0?{map:e,hash:n.hexdigest(),transfer:r}:yO}get editorStats(){let e=null;const n=new Map;let r=0,i=0;for(const s of h(this,fr).values()){if(!(s instanceof Tt)){s.popup&&(s.popup.deleted?i+=1:r+=1);continue}s.isCommentDeleted?i+=1:s.hasEditedComment&&(r+=1);const a=s.telemetryFinalData;if(!a)continue;const{type:o}=a;n.has(o)||n.set(o,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const l=e[o]||(e[o]=new Map);for(const[c,u]of Object.entries(a)){if(c==="type")continue;let d=l.get(c);d||(d=new Map,l.set(c,d));const f=d.get(u)??0;d.set(u,f+1)}}if((i>0||r>0)&&(e||(e=Object.create(null)),e.comments={deleted:i,edited:r}),!e)return null;for(const[s,a]of n)e[s]=a.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){E(this,Vd,null)}updateEditor(e,n){var i;const r=(i=h(this,wl))==null?void 0:i.get(e);return r?(r.updateFromAnnotationLayer(n),!0):!1}getEditor(e){var n;return((n=h(this,wl))==null?void 0:n.get(e))||null}get modifiedIds(){if(h(this,Vd))return h(this,Vd);const e=[];if(h(this,wl))for(const n of h(this,wl).values())n.serialize()&&e.push(n.annotationElementId);return E(this,Vd,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return h(this,fr).entries()}}Fd=new WeakMap,Vd=new WeakMap,wl=new WeakMap,fr=new WeakMap,dT=new WeakSet,nG=function(){h(this,Fd)||(E(this,Fd,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var yw;class rG extends k2{constructor(n){super();k(this,yw);const{map:r,hash:i,transfer:s}=n.serializable,a=structuredClone(r,s?{transfer:s}:null);E(this,yw,{map:a,hash:i,transfer:s})}get print(){bt("Should not call PrintAnnotationStorage.print")}get serializable(){return h(this,yw)}get modifiedIds(){return Pe(this,"modifiedIds",{ids:new Set,hash:""})}}yw=new WeakMap;var Jm;class iue{constructor({ownerDocument:e=globalThis.document,styleElement:n=null}){k(this,Jm,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(e,n.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),h(this,Jm).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:n,_inspectFont:r}){if(!(!e||h(this,Jm).has(e.loadedName))){if(He(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:a}=e,o=new FontFace(i,s,a);this.addNativeFontFace(o);try{await o.load(),h(this,Jm).add(i),r==null||r(e)}catch{Te(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}bt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw Te(`Failed to load font '${r.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const n=e.createFontFaceRule();if(n){if(this.insertRule(n),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var n;const e=!!((n=this._document)!=null&&n.fonts);return Pe(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Pe(this,"isSyncFontLoadingSupported",ai||Pr.platform.isFirefox)}_queueLoadingCallback(e){function n(){for(He(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){const s=r.shift();setTimeout(s.callback,0)}}const{loadingRequests:r}=this,i={done:!1,complete:n,callback:e};return r.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Pe(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,n){function r(T,P){return T.charCodeAt(P)<<24|T.charCodeAt(P+1)<<16|T.charCodeAt(P+2)<<8|T.charCodeAt(P+3)&255}function i(T,P,O,C){const I=T.substring(0,P),M=T.substring(P+O);return I+C+M}let s,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let c=0;function u(T,P){if(++c>30){Te("Load test font never loaded."),P();return}if(l.font="30px "+T,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){P();return}setTimeout(u.bind(null,T,P))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,d.length,d);const g=16,y=1482184792;let v=r(f,g);for(s=0,a=d.length-3;s<a;s+=4)v=v-y+r(d,s)|0;s<d.length&&(v=v-y+r(d+"XXX",s)|0),f=i(f,g,4,Fce(v));const b=`url(data:font/opentype;base64,${btoa(f)});`,_=`@font-face {font-family:"${d}";src:${b}}`;this.insertRule(_);const w=this._document.createElement("div");w.style.visibility="hidden",w.style.width=w.style.height="10px",w.style.position="absolute",w.style.top=w.style.left="0px";for(const T of[e.loadedName,d]){const P=this._document.createElement("span");P.textContent="Hi",P.style.fontFamily=T,w.append(P)}this._document.body.append(w),u(d,()=>{w.remove(),n.complete()})}}Jm=new WeakMap;var ot;class sue{constructor(e,n=null,r,i){k(this,ot);this.compiledGlyphs=Object.create(null),E(this,ot,e),this._inspectFont=n,r&&Object.assign(this,r),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var n;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(n=this._inspectFont)==null||n.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${w8(this.data)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(r=this._inspectFont)==null||r.call(this,this,e),n}getPathGenerator(e,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];const r=this.loadedName+"_path_"+n;let i;try{i=e.get(r)}catch(a){Te(`getPathGenerator - ignoring character: "${a}".`)}const s=A8(i);return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[n]=s}get black(){return h(this,ot).black}get bold(){return h(this,ot).bold}get disableFontFace(){return h(this,ot).disableFontFace??!1}set disableFontFace(e){Pe(this,"disableFontFace",!!e)}get fontExtraProperties(){return h(this,ot).fontExtraProperties??!1}get isInvalidPDFjsFont(){return h(this,ot).isInvalidPDFjsFont}get isType3Font(){return h(this,ot).isType3Font}get italic(){return h(this,ot).italic}get missingFile(){return h(this,ot).missingFile}get remeasure(){return h(this,ot).remeasure}get vertical(){return h(this,ot).vertical}get ascent(){return h(this,ot).ascent}get defaultWidth(){return h(this,ot).defaultWidth}get descent(){return h(this,ot).descent}get bbox(){return h(this,ot).bbox}set bbox(e){Pe(this,"bbox",e)}get fontMatrix(){return h(this,ot).fontMatrix}get fallbackName(){return h(this,ot).fallbackName}get loadedName(){return h(this,ot).loadedName}get mimetype(){return h(this,ot).mimetype}get name(){return h(this,ot).name}get data(){return h(this,ot).data}clearData(){h(this,ot).clearData()}get cssFontInfo(){return h(this,ot).cssFontInfo}get systemFontInfo(){return h(this,ot).systemFontInfo}get defaultVMetrics(){return h(this,ot).defaultVMetrics}}ot=new WeakMap;var Zm,eg,vw,tg,pE;const fm=class fm{constructor(e){k(this,tg);k(this,Zm);k(this,eg);k(this,vw);E(this,Zm,e),E(this,eg,new DataView(h(this,Zm))),E(this,vw,new TextDecoder)}static write(e){const n=new TextEncoder,r={};let i=0;for(const c of fm.strings){const u=n.encode(e[c]);r[c]=u,i+=4+u.length}const s=new ArrayBuffer(i),a=new Uint8Array(s),o=new DataView(s);let l=0;for(const c of fm.strings){const u=r[c],d=u.length;o.setUint32(l,d),a.set(u,l+4),l+=4+d}return He(l===s.byteLength,"CssFontInfo.write: Buffer overflow"),s}get fontFamily(){return D(this,tg,pE).call(this,0)}get fontWeight(){return D(this,tg,pE).call(this,1)}get italicAngle(){return D(this,tg,pE).call(this,2)}};Zm=new WeakMap,eg=new WeakMap,vw=new WeakMap,tg=new WeakSet,pE=function(e){He(e<fm.strings.length,"Invalid string index");let n=0;for(let i=0;i<e;i++)n+=h(this,eg).getUint32(n)+4;const r=h(this,eg).getUint32(n);return h(this,vw).decode(new Uint8Array(h(this,Zm),n+4,r))},Y(fm,"strings",["fontFamily","fontWeight","italicAngle"]);let jS=fm;var xu,mo,Bd,$d,Kv;const pm=class pm{constructor(e){k(this,$d);k(this,xu);k(this,mo);k(this,Bd);E(this,xu,e),E(this,mo,new DataView(h(this,xu))),E(this,Bd,new TextDecoder)}static write(e){const n=new TextEncoder,r={};let i=0;for(const f of pm.strings){const p=n.encode(e[f]);r[f]=p,i+=4+p.length}i+=4;let s,a,o=1+i;e.style&&(s=n.encode(e.style.style),a=n.encode(e.style.weight),o+=4+s.length+4+a.length);const l=new ArrayBuffer(o),c=new Uint8Array(l),u=new DataView(l);let d=0;u.setUint8(d++,e.guessFallback?1:0),u.setUint32(d,0),d+=4,i=0;for(const f of pm.strings){const p=r[f],g=p.length;i+=4+g,u.setUint32(d,g),c.set(p,d+4),d+=4+g}return u.setUint32(d-i-4,i),e.style&&(u.setUint32(d,s.length),c.set(s,d+4),d+=4+s.length,u.setUint32(d,a.length),c.set(a,d+4),d+=4+a.length),He(d<=l.byteLength,"SubstitionInfo.write: Buffer overflow"),l.transferToFixedLength(d)}get guessFallback(){return h(this,mo).getUint8(0)!==0}get css(){return D(this,$d,Kv).call(this,0)}get loadedName(){return D(this,$d,Kv).call(this,1)}get baseFontName(){return D(this,$d,Kv).call(this,2)}get src(){return D(this,$d,Kv).call(this,3)}get style(){let e=1;e+=4+h(this,mo).getUint32(e);const n=h(this,mo).getUint32(e),r=h(this,Bd).decode(new Uint8Array(h(this,xu),e+4,n));e+=4+n;const i=h(this,mo).getUint32(e),s=h(this,Bd).decode(new Uint8Array(h(this,xu),e+4,i));return{style:r,weight:s}}};xu=new WeakMap,mo=new WeakMap,Bd=new WeakMap,$d=new WeakSet,Kv=function(e){He(e<pm.strings.length,"Invalid string index");let n=5;for(let i=0;i<e;i++)n+=h(this,mo).getUint32(n)+4;const r=h(this,mo).getUint32(n);return h(this,Bd).decode(new Uint8Array(h(this,xu),n+4,r))},Y(pm,"strings",["css","loadedName","baseFontName","src"]);let FS=pm;var ng,rg,ig,sg,Gi,go,bw,lt,rn,pa,mE,qv;const Oe=class Oe{constructor({data:e,extra:n}){k(this,rn);k(this,go);k(this,bw);k(this,lt);E(this,go,e),E(this,bw,new TextDecoder),E(this,lt,new DataView(h(this,go))),n&&Object.assign(this,n)}get black(){return D(this,rn,pa).call(this,0)}get bold(){return D(this,rn,pa).call(this,1)}get disableFontFace(){return D(this,rn,pa).call(this,2)}get fontExtraProperties(){return D(this,rn,pa).call(this,3)}get isInvalidPDFjsFont(){return D(this,rn,pa).call(this,4)}get isType3Font(){return D(this,rn,pa).call(this,5)}get italic(){return D(this,rn,pa).call(this,6)}get missingFile(){return D(this,rn,pa).call(this,7)}get remeasure(){return D(this,rn,pa).call(this,8)}get vertical(){return D(this,rn,pa).call(this,9)}get ascent(){return D(this,rn,mE).call(this,0)}get defaultWidth(){return D(this,rn,mE).call(this,1)}get descent(){return D(this,rn,mE).call(this,2)}get bbox(){let e=h(Oe,rg);if(h(this,lt).getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<4;i++)r.push(h(this,lt).getInt16(e,!0)),e+=2;return r}get fontMatrix(){let e=h(Oe,ig);if(h(this,lt).getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<6;i++)r.push(h(this,lt).getFloat64(e,!0)),e+=8;return r}get defaultVMetrics(){let e=h(Oe,sg);if(h(this,lt).getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<3;i++)r.push(h(this,lt).getInt16(e,!0)),e+=2;return r}get fallbackName(){return D(this,rn,qv).call(this,0)}get loadedName(){return D(this,rn,qv).call(this,1)}get mimetype(){return D(this,rn,qv).call(this,2)}get name(){return D(this,rn,qv).call(this,3)}get data(){let e=h(Oe,Gi);const n=h(this,lt).getUint32(e);e+=4+n;const r=h(this,lt).getUint32(e);e+=4+r;const i=h(this,lt).getUint32(e);e+=4+i;const s=h(this,lt).getUint32(e);if(s!==0)return new Uint8Array(h(this,go),e+4,s)}clearData(){let e=h(Oe,Gi);const n=h(this,lt).getUint32(e);e+=4+n;const r=h(this,lt).getUint32(e);e+=4+r;const i=h(this,lt).getUint32(e);e+=4+i;const s=h(this,lt).getUint32(e);new Uint8Array(h(this,go),e+4,s).fill(0),h(this,lt).setUint32(e,0)}get cssFontInfo(){let e=h(Oe,Gi);const n=h(this,lt).getUint32(e);e+=4+n;const r=h(this,lt).getUint32(e);e+=4+r;const i=h(this,lt).getUint32(e);if(i===0)return null;const s=new Uint8Array(i);return s.set(new Uint8Array(h(this,go),e+4,i)),new jS(s.buffer)}get systemFontInfo(){let e=h(Oe,Gi);const n=h(this,lt).getUint32(e);e+=4+n;const r=h(this,lt).getUint32(e);if(r===0)return null;const i=new Uint8Array(r);return i.set(new Uint8Array(h(this,go),e+4,r)),new FS(i.buffer)}static write(e){const n=e.systemFontInfo?FS.write(e.systemFontInfo):null,r=e.cssFontInfo?jS.write(e.cssFontInfo):null,i=new TextEncoder,s={};let a=0;for(const y of Oe.strings)s[y]=i.encode(e[y]),a+=4+s[y].length;const o=h(Oe,Gi)+4+a+4+(n?n.byteLength:0)+4+(r?r.byteLength:0)+4+(e.data?e.data.length:0),l=new ArrayBuffer(o),c=new Uint8Array(l),u=new DataView(l);let d=0;const f=Oe.bools.length;let p=0,g=0;for(let y=0;y<f;y++){const v=e[Oe.bools[y]];p|=(v===void 0?0:v?2:1)<<g,g+=2,(g===8||y===f-1)&&(u.setUint8(d++,p),p=0,g=0)}He(d===h(Oe,ng),"FontInfo.write: Boolean properties offset mismatch");for(const y of Oe.numbers)u.setFloat64(d,e[y]),d+=8;if(He(d===h(Oe,rg),"FontInfo.write: Number properties offset mismatch"),e.bbox){u.setUint8(d++,4);for(const y of e.bbox)u.setInt16(d,y,!0),d+=2}else u.setUint8(d++,0),d+=2*4;if(He(d===h(Oe,ig),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){u.setUint8(d++,6);for(const y of e.fontMatrix)u.setFloat64(d,y,!0),d+=8}else u.setUint8(d++,0),d+=8*6;if(He(d===h(Oe,sg),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){u.setUint8(d++,1);for(const y of e.defaultVMetrics)u.setInt16(d,y,!0),d+=2}else u.setUint8(d++,0),d+=3*2;He(d===h(Oe,Gi),"FontInfo.write: DefaultVMetrics properties offset mismatch"),u.setUint32(h(Oe,Gi),0),d+=4;for(const y of Oe.strings){const v=s[y],b=v.length;u.setUint32(d,b),c.set(v,d+4),d+=4+b}if(u.setUint32(h(Oe,Gi),d-h(Oe,Gi)-4),!n)u.setUint32(d,0),d+=4;else{const y=n.byteLength;u.setUint32(d,y),He(d+4+y<=l.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),c.set(new Uint8Array(n),d+4),d+=4+y}if(!r)u.setUint32(d,0),d+=4;else{const y=r.byteLength;u.setUint32(d,y),He(d+4+y<=l.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),c.set(new Uint8Array(r),d+4),d+=4+y}return e.data===void 0?(u.setUint32(d,0),d+=4):(u.setUint32(d,e.data.length),c.set(e.data,d+4),d+=4+e.data.length),He(d<=l.byteLength,"FontInfo.write: Buffer overflow"),l.transferToFixedLength(d)}};ng=new WeakMap,rg=new WeakMap,ig=new WeakMap,sg=new WeakMap,Gi=new WeakMap,go=new WeakMap,bw=new WeakMap,lt=new WeakMap,rn=new WeakSet,pa=function(e){He(e<Oe.bools.length,"Invalid boolean index");const n=Math.floor(e/4),r=e*2%8,i=h(this,lt).getUint8(n)>>r&3;return i===0?void 0:i===2},mE=function(e){return He(e<Oe.numbers.length,"Invalid number index"),h(this,lt).getFloat64(h(Oe,ng)+e*8)},qv=function(e){He(e<Oe.strings.length,"Invalid string index");let n=h(Oe,Gi)+4;for(let s=0;s<e;s++)n+=h(this,lt).getUint32(n)+4;const r=h(this,lt).getUint32(n),i=new Uint8Array(r);return i.set(new Uint8Array(h(this,go),n+4,r)),h(this,bw).decode(i)},Y(Oe,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),Y(Oe,"numbers",["ascent","defaultWidth","descent"]),Y(Oe,"strings",["fallbackName","loadedName","mimetype","name"]),k(Oe,ng,Math.ceil(Oe.bools.length*2/8)),k(Oe,rg,h(Oe,ng)+Oe.numbers.length*8),k(Oe,ig,h(Oe,rg)+1+2*4),k(Oe,sg,h(Oe,ig)+1+8*6),k(Oe,Gi,h(Oe,sg)+1+2*3);let vO=Oe;var ww,_w,xw,Aw,Ew,Sw,Tw,Pw;const _t=class _t{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let n,r=null,i=[],s=[],a=[],o=[],l=null,c=null;switch(e[0]){case"RadialAxial":n=e[1]==="axial"?1:2,r=e[2],a=e[3],n===1?i.push(...e[4],...e[5]):i.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":n=3,l=e[1],i=e[2],s=e[3],o=e[4]||[],r=e[6],c=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const u=Math.floor(i.length/2),d=Math.floor(s.length/3),f=a.length,p=o.length;let g=0;for(const P of o)g+=1,g=Math.ceil(g/4)*4,g+=4+P.coords.length*4,g+=4+P.colors.length*4,P.verticesPerRow!==void 0&&(g+=4);const y=20+u*8+d*3+f*8+(r?16:0)+(c?3:0)+g,v=new ArrayBuffer(y),b=new DataView(v),_=new Uint8Array(v);b.setUint8(h(_t,ww),n),b.setUint8(h(_t,_w),r?1:0),b.setUint8(h(_t,xw),c?1:0),b.setUint8(h(_t,Aw),l),b.setUint32(h(_t,Ew),u,!0),b.setUint32(h(_t,Sw),d,!0),b.setUint32(h(_t,Tw),f,!0),b.setUint32(h(_t,Pw),p,!0);let w=20;new Float32Array(v,w,u*2).set(i),w+=u*8,_.set(s,w),w+=d*3;for(const[P,O]of a)b.setFloat32(w,P,!0),w+=4,b.setUint32(w,parseInt(O.slice(1),16),!0),w+=4;if(r)for(const P of r)b.setFloat32(w,P,!0),w+=4;c&&(_.set(c,w),w+=3);for(let P=0;P<o.length;P++){const O=o[P];b.setUint8(w,O.type),w+=1,w=Math.ceil(w/4)*4,b.setUint32(w,O.coords.length,!0),w+=4,new Int32Array(v,w,O.coords.length).set(O.coords),w+=O.coords.length*4,b.setUint32(w,O.colors.length,!0),w+=4,new Int32Array(v,w,O.colors.length).set(O.colors),w+=O.colors.length*4,O.verticesPerRow!==void 0&&(b.setUint32(w,O.verticesPerRow,!0),w+=4)}return v}getIR(){const e=this.view,n=this.data[h(_t,ww)],r=!!this.data[h(_t,_w)],i=!!this.data[h(_t,xw)],s=e.getUint32(h(_t,Ew),!0),a=e.getUint32(h(_t,Sw),!0),o=e.getUint32(h(_t,Tw),!0),l=e.getUint32(h(_t,Pw),!0);let c=20;const u=new Float32Array(this.buffer,c,s*2);c+=s*8;const d=new Uint8Array(this.buffer,c,a*3);c+=a*3;const f=[];for(let v=0;v<o;++v){const b=e.getFloat32(c,!0);c+=4;const _=e.getUint32(c,!0);c+=4,f.push([b,`#${_.toString(16).padStart(6,"0")}`])}let p=null;if(r){p=[];for(let v=0;v<4;++v)p.push(e.getFloat32(c,!0)),c+=4}let g=null;i&&(g=new Uint8Array(this.buffer,c,3),c+=3);const y=[];for(let v=0;v<l;++v){const b=e.getUint8(c);c+=1,c=Math.ceil(c/4)*4;const _=e.getUint32(c,!0);c+=4;const w=new Int32Array(this.buffer,c,_);c+=_*4;const T=e.getUint32(c,!0);c+=4;const P=new Int32Array(this.buffer,c,T);c+=T*4;const O={type:b,coords:w,colors:P};b===YR.LATTICE&&(O.verticesPerRow=e.getUint32(c,!0),c+=4),y.push(O)}if(n===1)return["RadialAxial","axial",p,f,Array.from(u.slice(0,2)),Array.from(u.slice(2,4)),null,null];if(n===2)return["RadialAxial","radial",p,f,[u[0],u[1]],[u[3],u[4]],u[2],u[5]];if(n===3){const v=this.data[h(_t,Aw)];let b=null;if(u.length>0){let _=u[0],w=u[0],T=u[1],P=u[1];for(let O=0;O<u.length;O+=2){const C=u[O],I=u[O+1];_=_>C?C:_,T=T>I?I:T,w=w<C?C:w,P=P<I?I:P}b=[_,T,w,P]}return["Mesh",v,u,d,y,b,p,g]}throw new Error(`Unsupported pattern kind: ${n}`)}};ww=new WeakMap,_w=new WeakMap,xw=new WeakMap,Aw=new WeakMap,Ew=new WeakMap,Sw=new WeakMap,Tw=new WeakMap,Pw=new WeakMap,k(_t,ww,0),k(_t,_w,1),k(_t,xw,2),k(_t,Aw,3),k(_t,Ew,4),k(_t,Sw,8),k(_t,Tw,12),k(_t,Pw,16);let bO=_t;function aue(t){if(t instanceof URL)return t.href;if(typeof t=="string"){if(ai)return t;const e=URL.parse(t,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function oue(t){if(ai&&typeof Buffer<"u"&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if(typeof t=="string")return z_(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||typeof t=="object"&&!isNaN(t==null?void 0:t.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function hA(t){if(typeof t!="string")return null;if(t.endsWith("/"))return t;throw new Error(`Invalid factory url: "${t}" must include trailing slash.`)}const wO=t=>typeof t=="object"&&Number.isInteger(t==null?void 0:t.num)&&t.num>=0&&Number.isInteger(t==null?void 0:t.gen)&&t.gen>=0,lue=t=>typeof t=="object"&&typeof(t==null?void 0:t.name)=="string",cue=zce.bind(null,wO,lue);var _l,fT;class uue{constructor(){k(this,_l,new Map);k(this,fT,Promise.resolve())}postMessage(e,n){const r={data:structuredClone(e,n?{transfer:n}:null)};h(this,fT).then(()=>{for(const[i]of h(this,_l))i.call(this,r)})}addEventListener(e,n,r=null){let i=null;if((r==null?void 0:r.signal)instanceof AbortSignal){const{signal:s}=r;if(s.aborted){Te("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,n);i=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}h(this,_l).set(n,i)}removeEventListener(e,n){const r=h(this,_l).get(n);r==null||r(),h(this,_l).delete(n)}terminate(){for(const[,e]of h(this,_l))e==null||e();h(this,_l).clear()}}_l=new WeakMap,fT=new WeakMap;const dA={DATA:1,ERROR:2},gn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function f4(){}function bi(t){if(t instanceof yh||t instanceof QR||t instanceof s4||t instanceof DS||t instanceof LI)return t;switch(t instanceof Error||typeof t=="object"&&t!==null||bt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new yh(t.message);case"InvalidPDFException":return new QR(t.message);case"PasswordException":return new s4(t.message,t.code);case"ResponseException":return new DS(t.message,t.status,t.missing);case"UnknownErrorException":return new LI(t.message,t.details)}return new LI(t.message,t.toString())}var ag,ra,iG,sG,aG,gE;class Xv{constructor(e,n,r){k(this,ra);k(this,ag,new AbortController);this.sourceName=e,this.targetName=n,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",D(this,ra,iG).bind(this),{signal:h(this,ag).signal})}on(e,n){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=n}send(e,n,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:n},r)}sendWithPromise(e,n,r){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:n},r)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,n,r,i){const s=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[s]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:e,streamId:s,data:n,desiredSize:c.desiredSize},i),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[s].pullCall=u,l.postMessage({sourceName:a,targetName:o,stream:gn.PULL,streamId:s,desiredSize:c.desiredSize}),u.promise},cancel:c=>{He(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[s].cancelCall=u,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:gn.CANCEL,streamId:s,reason:bi(c)}),u.promise}},r)}destroy(){var e;(e=h(this,ag))==null||e.abort(),E(this,ag,null)}}ag=new WeakMap,ra=new WeakSet,iG=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){D(this,ra,aG).call(this,e);return}if(e.callback){const r=e.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===dA.DATA)i.resolve(e.data);else if(e.callback===dA.ERROR)i.reject(bi(e.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[e.action];if(!n)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,i=e.sourceName,s=this.comObj;Promise.try(n,e.data).then(function(a){s.postMessage({sourceName:r,targetName:i,callback:dA.DATA,callbackId:e.callbackId,data:a})},function(a){s.postMessage({sourceName:r,targetName:i,callback:dA.ERROR,callbackId:e.callbackId,reason:bi(a)})});return}if(e.streamId){D(this,ra,sG).call(this,e);return}n(e.data)},sG=function(e){const n=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,a=this,o=this.actionHandler[e.action],l={enqueue(c,u=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=u,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:r,targetName:i,stream:gn.ENQUEUE,streamId:n,chunk:c},d)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:gn.CLOSE,streamId:n}),delete a.streamSinks[n])},error(c){He(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:gn.ERROR,streamId:n,reason:bi(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[n]=l,Promise.try(o,e.data,l).then(function(){s.postMessage({sourceName:r,targetName:i,stream:gn.START_COMPLETE,streamId:n,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:gn.START_COMPLETE,streamId:n,reason:bi(c)})})},aG=function(e){const n=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,a=this.streamControllers[n],o=this.streamSinks[n];switch(e.stream){case gn.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(bi(e.reason));break;case gn.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(bi(e.reason));break;case gn.PULL:if(!o){s.postMessage({sourceName:r,targetName:i,stream:gn.PULL_COMPLETE,streamId:n,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||f4).then(function(){s.postMessage({sourceName:r,targetName:i,stream:gn.PULL_COMPLETE,streamId:n,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:gn.PULL_COMPLETE,streamId:n,reason:bi(c)})});break;case gn.ENQUEUE:if(He(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case gn.CLOSE:if(He(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),D(this,ra,gE).call(this,a,n);break;case gn.ERROR:He(a,"error should have stream controller"),a.controller.error(bi(e.reason)),D(this,ra,gE).call(this,a,n);break;case gn.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(bi(e.reason)),D(this,ra,gE).call(this,a,n);break;case gn.CANCEL:if(!o)break;const l=bi(e.reason);Promise.try(o.onCancel||f4,l).then(function(){s.postMessage({sourceName:r,targetName:i,stream:gn.CANCEL_COMPLETE,streamId:n,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:gn.CANCEL_COMPLETE,streamId:n,reason:bi(c)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}},gE=async function(e,n){var r,i,s;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(i=e.pullCall)==null?void 0:i.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[n]};var Cw;class oG{constructor({enableHWA:e=!1}){k(this,Cw,!1);E(this,Cw,e)}create(e,n){if(e<=0||n<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,n);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!h(this,Cw)})}}reset(e,n,r){if(!e.canvas)throw new Error("Canvas is not specified");if(n<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=n,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,n){bt("Abstract method `_createCanvas` called.")}}Cw=new WeakMap;class hue extends oG{constructor({ownerDocument:e=globalThis.document,enableHWA:n=!1}){super({enableHWA:n}),this._document=e}_createCanvas(e,n){const r=this._document.createElement("canvas");return r.width=e,r.height=n,r}}class lG{constructor({baseUrl:e=null,isCompressed:n=!0}){this.baseUrl=e,this.isCompressed=n}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const n=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(n).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})}async _fetch(e){bt("Abstract method `_fetch` called.")}}class p4 extends lG{async _fetch(e){const n=await H_(e,this.isCompressed?"arraybuffer":"text");return n instanceof ArrayBuffer?new Uint8Array(n):z_(n)}}class cG{addFilter(e){return"none"}addHCMFilter(e,n){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,n,r,i,s){return"none"}destroy(e=!1){}}var Ud,og,xl,Al,Br,zd,Hd,oe,Lr,Yv,Dp,yE,Mp,uG,_O,Np,Qv,Jv,xO,Zv;class due extends cG{constructor({docId:n,ownerDocument:r=globalThis.document}){super();k(this,oe);k(this,Ud);k(this,og);k(this,xl);k(this,Al);k(this,Br);k(this,zd);k(this,Hd,0);E(this,Al,n),E(this,Br,r)}addFilter(n){if(!n)return"none";let r=h(this,oe,Lr).get(n);if(r)return r;const[i,s,a]=D(this,oe,yE).call(this,n),o=n.length===1?i:`${i}${s}${a}`;if(r=h(this,oe,Lr).get(o),r)return h(this,oe,Lr).set(n,r),r;const l=`g_${h(this,Al)}_transfer_map_${In(this,Hd)._++}`,c=D(this,oe,Mp).call(this,l);h(this,oe,Lr).set(n,c),h(this,oe,Lr).set(o,c);const u=D(this,oe,Np).call(this,l);return D(this,oe,Jv).call(this,i,s,a,u),c}addHCMFilter(n,r){var g;const i=`${n}-${r}`,s="base";let a=h(this,oe,Yv).get(s);if((a==null?void 0:a.key)===i||(a?((g=a.filter)==null||g.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},h(this,oe,Yv).set(s,a)),!n||!r))return a.url;const o=D(this,oe,Zv).call(this,n);n=ue.makeHexColor(...o);const l=D(this,oe,Zv).call(this,r);if(r=ue.makeHexColor(...l),h(this,oe,Dp).style.color="",n==="#000000"&&r==="#ffffff"||n===r)return a.url;const c=new Array(256);for(let y=0;y<=255;y++){const v=y/255;c[y]=v<=.03928?v/12.92:((v+.055)/1.055)**2.4}const u=c.join(","),d=`g_${h(this,Al)}_hcm_filter`,f=a.filter=D(this,oe,Np).call(this,d);D(this,oe,Jv).call(this,u,u,u,f),D(this,oe,_O).call(this,f);const p=(y,v)=>{const b=o[y]/255,_=l[y]/255,w=new Array(v+1);for(let T=0;T<=v;T++)w[T]=b+T/v*(_-b);return w.join(",")};return D(this,oe,Jv).call(this,p(0,5),p(1,5),p(2,5),f),a.url=D(this,oe,Mp).call(this,d),a.url}addAlphaFilter(n){let r=h(this,oe,Lr).get(n);if(r)return r;const[i]=D(this,oe,yE).call(this,[n]),s=`alpha_${i}`;if(r=h(this,oe,Lr).get(s),r)return h(this,oe,Lr).set(n,r),r;const a=`g_${h(this,Al)}_alpha_map_${In(this,Hd)._++}`,o=D(this,oe,Mp).call(this,a);h(this,oe,Lr).set(n,o),h(this,oe,Lr).set(s,o);const l=D(this,oe,Np).call(this,a);return D(this,oe,xO).call(this,i,l),o}addLuminosityFilter(n){let r=h(this,oe,Lr).get(n||"luminosity");if(r)return r;let i,s;if(n?([i]=D(this,oe,yE).call(this,[n]),s=`luminosity_${i}`):s="luminosity",r=h(this,oe,Lr).get(s),r)return h(this,oe,Lr).set(n,r),r;const a=`g_${h(this,Al)}_luminosity_map_${In(this,Hd)._++}`,o=D(this,oe,Mp).call(this,a);h(this,oe,Lr).set(n,o),h(this,oe,Lr).set(s,o);const l=D(this,oe,Np).call(this,a);return D(this,oe,uG).call(this,l),n&&D(this,oe,xO).call(this,i,l),o}addHighlightHCMFilter(n,r,i,s,a){var _;const o=`${r}-${i}-${s}-${a}`;let l=h(this,oe,Yv).get(n);if((l==null?void 0:l.key)===o||(l?((_=l.filter)==null||_.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},h(this,oe,Yv).set(n,l)),!r||!i))return l.url;const[c,u]=[r,i].map(D(this,oe,Zv).bind(this));let d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[p,g]=[s,a].map(D(this,oe,Zv).bind(this));f<d&&([d,f,p,g]=[f,d,g,p]),h(this,oe,Dp).style.color="";const y=(w,T,P)=>{const O=new Array(256),C=(f-d)/P,I=w/255,M=(T-w)/(255*P);let L=0;for(let N=0;N<=P;N++){const F=Math.round(d+N*C),j=I+N*M;for(let K=L;K<=F;K++)O[K]=j;L=F+1}for(let N=L;N<256;N++)O[N]=O[L-1];return O.join(",")},v=`g_${h(this,Al)}_hcm_${n}_filter`,b=l.filter=D(this,oe,Np).call(this,v);return D(this,oe,_O).call(this,b),D(this,oe,Jv).call(this,y(p[0],g[0],5),y(p[1],g[1],5),y(p[2],g[2],5),b),l.url=D(this,oe,Mp).call(this,v),l.url}destroy(n=!1){var r,i,s,a;n&&((r=h(this,zd))!=null&&r.size)||((i=h(this,xl))==null||i.parentNode.parentNode.remove(),E(this,xl,null),(s=h(this,og))==null||s.clear(),E(this,og,null),(a=h(this,zd))==null||a.clear(),E(this,zd,null),E(this,Hd,0))}}Ud=new WeakMap,og=new WeakMap,xl=new WeakMap,Al=new WeakMap,Br=new WeakMap,zd=new WeakMap,Hd=new WeakMap,oe=new WeakSet,Lr=function(){return h(this,og)||E(this,og,new Map)},Yv=function(){return h(this,zd)||E(this,zd,new Map)},Dp=function(){if(!h(this,xl)){const n=h(this,Br).createElement("div"),{style:r}=n;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const i=h(this,Br).createElementNS(nl,"svg");i.setAttribute("width",0),i.setAttribute("height",0),E(this,xl,h(this,Br).createElementNS(nl,"defs")),n.append(i),i.append(h(this,xl)),h(this,Br).body.append(n)}return h(this,xl)},yE=function(n){if(n.length===1){const c=n[0],u=new Array(256);for(let f=0;f<256;f++)u[f]=c[f]/255;const d=u.join(",");return[d,d,d]}const[r,i,s]=n,a=new Array(256),o=new Array(256),l=new Array(256);for(let c=0;c<256;c++)a[c]=r[c]/255,o[c]=i[c]/255,l[c]=s[c]/255;return[a.join(","),o.join(","),l.join(",")]},Mp=function(n){if(h(this,Ud)===void 0){E(this,Ud,"");const r=h(this,Br).URL;r!==h(this,Br).baseURI&&(XT(r)?Te('#createUrl: ignore "data:"-URL for performance reasons.'):E(this,Ud,y8(r,"")))}return`url(${h(this,Ud)}#${n})`},uG=function(n){const r=h(this,Br).createElementNS(nl,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),n.append(r)},_O=function(n){const r=h(this,Br).createElementNS(nl,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),n.append(r)},Np=function(n){const r=h(this,Br).createElementNS(nl,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",n),h(this,oe,Dp).append(r),r},Qv=function(n,r,i){const s=h(this,Br).createElementNS(nl,r);s.setAttribute("type","discrete"),s.setAttribute("tableValues",i),n.append(s)},Jv=function(n,r,i,s){const a=h(this,Br).createElementNS(nl,"feComponentTransfer");s.append(a),D(this,oe,Qv).call(this,a,"feFuncR",n),D(this,oe,Qv).call(this,a,"feFuncG",r),D(this,oe,Qv).call(this,a,"feFuncB",i)},xO=function(n,r){const i=h(this,Br).createElementNS(nl,"feComponentTransfer");r.append(i),D(this,oe,Qv).call(this,i,"feFuncA",n)},Zv=function(n){return h(this,oe,Dp).style.color=n,G_(getComputedStyle(h(this,oe,Dp)).getPropertyValue("color"))};class hG{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(r=>{throw new Error(`Unable to load font data at: ${n}`)})}async _fetch(e){bt("Abstract method `_fetch` called.")}}class m4 extends hG{async _fetch(e){const n=await H_(e,"arraybuffer");return new Uint8Array(n)}}class dG{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(r=>{throw new Error(`Unable to load wasm data at: ${n}`)})}async _fetch(e){bt("Abstract method `_fetch` called.")}}class g4 extends dG{async _fetch(e){const n=await H_(e,"arraybuffer");return new Uint8Array(n)}}ai&&Te("Please use the `legacy` build in Node.js environments.");async function R2(t){const n=await process.getBuiltinModule("fs").promises.readFile(t);return new Uint8Array(n)}class fue extends cG{}class pue extends oG{_createCanvas(e,n){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,n)}}class mue extends lG{async _fetch(e){return R2(e)}}class gue extends hG{async _fetch(e){return R2(e)}}class yue extends dG{async _fetch(e){return R2(e)}}const Pp="__forcedDependency",{floor:y4,ceil:v4}=Math;function fA(t,e,n,r,i,s){t[e*4+0]=Math.min(t[e*4+0],n),t[e*4+1]=Math.min(t[e*4+1],r),t[e*4+2]=Math.max(t[e*4+2],i),t[e*4+3]=Math.max(t[e*4+3],s)}const AO=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var lg,Au;class vue{constructor(e,n){k(this,lg);k(this,Au);E(this,lg,e),E(this,Au,n)}get length(){return h(this,lg).length}isEmpty(e){return h(this,lg)[e]===AO}minX(e){return h(this,Au)[e*4+0]/256}minY(e){return h(this,Au)[e*4+1]/256}maxX(e){return(h(this,Au)[e*4+2]+1)/256}maxY(e){return(h(this,Au)[e*4+3]+1)/256}}lg=new WeakMap,Au=new WeakMap;const pA=(t,e)=>{if(!t)return;let n=t.get(e);return n||(n={dependencies:new Set,isRenderingOperation:!1},t.set(e,n)),n};var xi,Ai,Wd,_a,Gd,El,tt,ct,Sl,Ei,Iw,cg,Kd,qd,Tl,$r,yo,kw,EO;class bue{constructor(e,n,r=!1){k(this,kw);k(this,xi,{__proto__:null});k(this,Ai,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Pp]:[]});k(this,Wd,new Map);k(this,_a,[]);k(this,Gd,[]);k(this,El,[[1,0,0,1,0,0]]);k(this,tt,[-1/0,-1/0,1/0,1/0]);k(this,ct,new Float64Array([1/0,1/0,-1/0,-1/0]));k(this,Sl,-1);k(this,Ei,new Set);k(this,Iw,new Map);k(this,cg,new Map);k(this,Kd);k(this,qd);k(this,Tl);k(this,$r);k(this,yo);E(this,Kd,e.width),E(this,qd,e.height),D(this,kw,EO).call(this,n),r&&E(this,yo,new Map)}growOperationsCount(e){e>=h(this,$r).length&&D(this,kw,EO).call(this,e,h(this,$r))}save(e){return E(this,xi,{__proto__:h(this,xi)}),E(this,Ai,{__proto__:h(this,Ai),transform:{__proto__:h(this,Ai).transform},moveText:{__proto__:h(this,Ai).moveText},sameLineText:{__proto__:h(this,Ai).sameLineText},[Pp]:{__proto__:h(this,Ai)[Pp]}}),E(this,tt,{__proto__:h(this,tt)}),h(this,_a).push(e),this}restore(e){var i;const n=Object.getPrototypeOf(h(this,xi));if(n===null)return this;E(this,xi,n),E(this,Ai,Object.getPrototypeOf(h(this,Ai))),E(this,tt,Object.getPrototypeOf(h(this,tt)));const r=h(this,_a).pop();return r!==void 0&&((i=pA(h(this,yo),e))==null||i.dependencies.add(r),h(this,$r)[e]=h(this,$r)[r]),this}recordOpenMarker(e){return h(this,_a).push(e),this}getOpenMarker(){return h(this,_a).length===0?null:h(this,_a).at(-1)}recordCloseMarker(e){var r;const n=h(this,_a).pop();return n!==void 0&&((r=pA(h(this,yo),e))==null||r.dependencies.add(n),h(this,$r)[e]=h(this,$r)[n]),this}beginMarkedContent(e){return h(this,Gd).push(e),this}endMarkedContent(e){var r;const n=h(this,Gd).pop();return n!==void 0&&((r=pA(h(this,yo),e))==null||r.dependencies.add(n),h(this,$r)[e]=h(this,$r)[n]),this}pushBaseTransform(e){return h(this,El).push(ue.multiplyByDOMMatrix(h(this,El).at(-1),e.getTransform())),this}popBaseTransform(){return h(this,El).length>1&&h(this,El).pop(),this}recordSimpleData(e,n){return h(this,xi)[e]=n,this}recordIncrementalData(e,n){return h(this,Ai)[e].push(n),this}resetIncrementalData(e,n){return h(this,Ai)[e].length=0,this}recordNamedData(e,n){return h(this,Wd).set(e,n),this}recordSimpleDataFromNamed(e,n,r){h(this,xi)[e]=h(this,Wd).get(n)??r}recordFutureForcedDependency(e,n){return this.recordIncrementalData(Pp,n),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const n of e)n in h(this,xi)&&this.recordFutureForcedDependency(n,h(this,xi)[n]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of h(this,Ei))this.recordFutureForcedDependency(Pp,e);return this}resetBBox(e){return h(this,Sl)!==e&&(E(this,Sl,e),h(this,ct)[0]=1/0,h(this,ct)[1]=1/0,h(this,ct)[2]=-1/0,h(this,ct)[3]=-1/0),this}recordClipBox(e,n,r,i,s,a){const o=ue.multiplyByDOMMatrix(h(this,El).at(-1),n.getTransform()),l=[1/0,1/0,-1/0,-1/0];ue.axialAlignedBoundingBox([r,s,i,a],o,l);const c=ue.intersect(h(this,tt),l);return c?(h(this,tt)[0]=c[0],h(this,tt)[1]=c[1],h(this,tt)[2]=c[2],h(this,tt)[3]=c[3]):(h(this,tt)[0]=h(this,tt)[1]=1/0,h(this,tt)[2]=h(this,tt)[3]=-1/0),this}recordBBox(e,n,r,i,s,a){const o=h(this,tt);if(o[0]===1/0)return this;const l=ue.multiplyByDOMMatrix(h(this,El).at(-1),n.getTransform());if(o[0]===-1/0)return ue.axialAlignedBoundingBox([r,s,i,a],l,h(this,ct)),this;const c=[1/0,1/0,-1/0,-1/0];return ue.axialAlignedBoundingBox([r,s,i,a],l,c),h(this,ct)[0]=Math.min(h(this,ct)[0],Math.max(c[0],o[0])),h(this,ct)[1]=Math.min(h(this,ct)[1],Math.max(c[1],o[1])),h(this,ct)[2]=Math.max(h(this,ct)[2],Math.min(c[2],o[2])),h(this,ct)[3]=Math.max(h(this,ct)[3],Math.min(c[3],o[3])),this}recordCharacterBBox(e,n,r,i=1,s=0,a=0,o){const l=r.bbox;let c,u;if(l&&(c=l[2]!==l[0]&&l[3]!==l[1]&&h(this,cg).get(r),c!==!1&&(u=[0,0,0,0],ue.axialAlignedBoundingBox(l,r.fontMatrix,u),(i!==1||s!==0||a!==0)&&ue.scaleMinMax([i,0,0,-i,s,a],u),c)))return this.recordBBox(e,n,u[0],u[2],u[1],u[3]);if(!o)return this.recordFullPageBBox(e);const d=o();return l&&u&&c===void 0&&(c=u[0]<=s-d.actualBoundingBoxLeft&&u[2]>=s+d.actualBoundingBoxRight&&u[1]<=a-d.actualBoundingBoxAscent&&u[3]>=a+d.actualBoundingBoxDescent,h(this,cg).set(r,c),c)?this.recordBBox(e,n,u[0],u[2],u[1],u[3]):this.recordBBox(e,n,s-d.actualBoundingBoxLeft,s+d.actualBoundingBoxRight,a-d.actualBoundingBoxAscent,a+d.actualBoundingBoxDescent)}recordFullPageBBox(e){return h(this,ct)[0]=Math.max(0,h(this,tt)[0]),h(this,ct)[1]=Math.max(0,h(this,tt)[1]),h(this,ct)[2]=Math.min(h(this,Kd),h(this,tt)[2]),h(this,ct)[3]=Math.min(h(this,qd),h(this,tt)[3]),this}getSimpleIndex(e){return h(this,xi)[e]}recordDependencies(e,n){const r=h(this,Ei),i=h(this,xi),s=h(this,Ai);for(const a of n)a in h(this,xi)?r.add(i[a]):a in s&&s[a].forEach(r.add,r);return this}recordNamedDependency(e,n){return h(this,Wd).has(n)&&h(this,Ei).add(h(this,Wd).get(n)),this}recordOperation(e,n=!1){if(this.recordDependencies(e,[Pp]),h(this,yo)){const r=pA(h(this,yo),e),{dependencies:i}=r;h(this,Ei).forEach(i.add,i),h(this,_a).forEach(i.add,i),h(this,Gd).forEach(i.add,i),i.delete(e),r.isRenderingOperation=!0}if(h(this,Sl)===e){const r=y4(h(this,ct)[0]*256/h(this,Kd)),i=y4(h(this,ct)[1]*256/h(this,qd)),s=v4(h(this,ct)[2]*256/h(this,Kd)),a=v4(h(this,ct)[3]*256/h(this,qd));fA(h(this,Tl),e,r,i,s,a);for(const o of h(this,Ei))o!==e&&fA(h(this,Tl),o,r,i,s,a);for(const o of h(this,_a))o!==e&&fA(h(this,Tl),o,r,i,s,a);for(const o of h(this,Gd))o!==e&&fA(h(this,Tl),o,r,i,s,a);n||(h(this,Ei).clear(),E(this,Sl,-1))}return this}recordShowTextOperation(e,n=!1){const r=Array.from(h(this,Ei));this.recordOperation(e,n),this.recordIncrementalData("sameLineText",e);for(const i of r)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,n=!1){return h(this,Sl)===e&&(E(this,Sl,-1),h(this,tt)[0]=Math.max(h(this,tt)[0],h(this,ct)[0]),h(this,tt)[1]=Math.max(h(this,tt)[1],h(this,ct)[1]),h(this,tt)[2]=Math.min(h(this,tt)[2],h(this,ct)[2]),h(this,tt)[3]=Math.min(h(this,tt)[3],h(this,ct)[3]),n||h(this,Ei).clear()),this}_takePendingDependencies(){const e=h(this,Ei);return E(this,Ei,new Set),e}_extractOperation(e){const n=h(this,Iw).get(e);return h(this,Iw).delete(e),n}_pushPendingDependencies(e){for(const n of e)h(this,Ei).add(n)}take(){return h(this,cg).clear(),new vue(h(this,$r),h(this,Tl))}takeDebugMetadata(){return h(this,yo)}}xi=new WeakMap,Ai=new WeakMap,Wd=new WeakMap,_a=new WeakMap,Gd=new WeakMap,El=new WeakMap,tt=new WeakMap,ct=new WeakMap,Sl=new WeakMap,Ei=new WeakMap,Iw=new WeakMap,cg=new WeakMap,Kd=new WeakMap,qd=new WeakMap,Tl=new WeakMap,$r=new WeakMap,yo=new WeakMap,kw=new WeakSet,EO=function(e,n){const r=new ArrayBuffer(e*4);E(this,Tl,new Uint8ClampedArray(r)),E(this,$r,new Uint32Array(r)),n&&n.length>0?(h(this,$r).set(n),h(this,$r).fill(AO,n.length)):h(this,$r).fill(AO)};var gt,Zt,xa,ug,hg;const kF=class kF{constructor(e,n,r){k(this,gt);k(this,Zt);k(this,xa);k(this,ug,0);k(this,hg,0);if(e instanceof kF&&h(e,xa)===!!r)return e;E(this,gt,e),E(this,Zt,n),E(this,xa,!!r)}growOperationsCount(){throw new Error("Unreachable")}save(e){return In(this,hg)._++,h(this,gt).save(h(this,Zt)),this}restore(e){return h(this,hg)>0&&(h(this,gt).restore(h(this,Zt)),In(this,hg)._--),this}recordOpenMarker(e){return In(this,ug)._++,this}getOpenMarker(){return h(this,ug)>0?h(this,Zt):h(this,gt).getOpenMarker()}recordCloseMarker(e){return In(this,ug)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return h(this,gt).pushBaseTransform(e),this}popBaseTransform(){return h(this,gt).popBaseTransform(),this}recordSimpleData(e,n){return h(this,gt).recordSimpleData(e,h(this,Zt)),this}recordIncrementalData(e,n){return h(this,gt).recordIncrementalData(e,h(this,Zt)),this}resetIncrementalData(e,n){return h(this,gt).resetIncrementalData(e,h(this,Zt)),this}recordNamedData(e,n){return this}recordSimpleDataFromNamed(e,n,r){return h(this,gt).recordSimpleDataFromNamed(e,n,h(this,Zt)),this}recordFutureForcedDependency(e,n){return h(this,gt).recordFutureForcedDependency(e,h(this,Zt)),this}inheritSimpleDataAsFutureForcedDependencies(e){return h(this,gt).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return h(this,gt).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return h(this,xa)||h(this,gt).resetBBox(h(this,Zt)),this}recordClipBox(e,n,r,i,s,a){return h(this,xa)||h(this,gt).recordClipBox(h(this,Zt),n,r,i,s,a),this}recordBBox(e,n,r,i,s,a){return h(this,xa)||h(this,gt).recordBBox(h(this,Zt),n,r,i,s,a),this}recordCharacterBBox(e,n,r,i,s,a,o){return h(this,xa)||h(this,gt).recordCharacterBBox(h(this,Zt),n,r,i,s,a,o),this}recordFullPageBBox(e){return h(this,xa)||h(this,gt).recordFullPageBBox(h(this,Zt)),this}getSimpleIndex(e){return h(this,gt).getSimpleIndex(e)}recordDependencies(e,n){return h(this,gt).recordDependencies(h(this,Zt),n),this}recordNamedDependency(e,n){return h(this,gt).recordNamedDependency(h(this,Zt),n),this}recordOperation(e){return h(this,gt).recordOperation(h(this,Zt),!0),this}recordShowTextOperation(e){return h(this,gt).recordShowTextOperation(h(this,Zt),!0),this}bboxToClipBoxDropOperation(e){return h(this,xa)||h(this,gt).bboxToClipBoxDropOperation(h(this,Zt),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};gt=new WeakMap,Zt=new WeakMap,xa=new WeakMap,ug=new WeakMap,hg=new WeakMap;let VS=kF;const Cs={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},br={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function SO(t,e){if(!e)return;const n=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],n,r),t.clip(i)}class O2{isModifyingCurrentTransform(){return!1}getPattern(){bt("Abstract method `getPattern` called.")}}class wue extends O2{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let n;this._type==="axial"?n=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(n=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)n.addColorStop(r[0],r[1]);return n}getPattern(e,n,r,i){let s;if(i===br.STROKE||i===br.FILL){const a=n.current.getClippedPathBoundingBox(i,zt(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,c=n.cachedCanvases.getCanvas("pattern",o,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-a[0],-a[1]),r=ue.transform(r,[1,0,0,1,a[0],a[1]]),u.transform(...n.baseTransform),this.matrix&&u.transform(...this.matrix),SO(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),s=e.createPattern(c.canvas,"no-repeat");const d=new DOMMatrix(r);s.setTransform(d)}else SO(e,this._bbox),s=this._createGradient(e);return s}}function VI(t,e,n,r,i,s,a,o){const l=e.coords,c=e.colors,u=t.data,d=t.width*4;let f;l[n+1]>l[r+1]&&(f=n,n=r,r=f,f=s,s=a,a=f),l[r+1]>l[i+1]&&(f=r,r=i,i=f,f=a,a=o,o=f),l[n+1]>l[r+1]&&(f=n,n=r,r=f,f=s,s=a,a=f);const p=(l[n]+e.offsetX)*e.scaleX,g=(l[n+1]+e.offsetY)*e.scaleY,y=(l[r]+e.offsetX)*e.scaleX,v=(l[r+1]+e.offsetY)*e.scaleY,b=(l[i]+e.offsetX)*e.scaleX,_=(l[i+1]+e.offsetY)*e.scaleY;if(g>=_)return;const w=c[s],T=c[s+1],P=c[s+2],O=c[a],C=c[a+1],I=c[a+2],M=c[o],L=c[o+1],N=c[o+2],F=Math.round(g),j=Math.round(_);let K,te,Z,G,U,H,re,ve;for(let de=F;de<=j;de++){if(de<v){const Ee=de<g?0:(g-de)/(g-v);K=p-(p-y)*Ee,te=w-(w-O)*Ee,Z=T-(T-C)*Ee,G=P-(P-I)*Ee}else{let Ee;de>_?Ee=1:v===_?Ee=0:Ee=(v-de)/(v-_),K=y-(y-b)*Ee,te=O-(O-M)*Ee,Z=C-(C-L)*Ee,G=I-(I-N)*Ee}let xe;de<g?xe=0:de>_?xe=1:xe=(g-de)/(g-_),U=p-(p-b)*xe,H=w-(w-M)*xe,re=T-(T-L)*xe,ve=P-(P-N)*xe;const je=Math.round(Math.min(K,U)),dt=Math.round(Math.max(K,U));let ft=d*de+je*4;for(let Ee=je;Ee<=dt;Ee++)xe=(K-Ee)/(K-U),xe<0?xe=0:xe>1&&(xe=1),u[ft++]=te-(te-H)*xe|0,u[ft++]=Z-(Z-re)*xe|0,u[ft++]=G-(G-ve)*xe|0,u[ft++]=255}}function _ue(t,e,n){const r=e.coords,i=e.colors;let s,a;switch(e.type){case YR.LATTICE:const o=e.verticesPerRow,l=Math.floor(r.length/o)-1,c=o-1;for(s=0;s<l;s++){let u=s*o;for(let d=0;d<c;d++,u++)VI(t,n,r[u],r[u+1],r[u+o],i[u],i[u+1],i[u+o]),VI(t,n,r[u+o+1],r[u+1],r[u+o],i[u+o+1],i[u+1],i[u+o])}break;case YR.TRIANGLES:for(s=0,a=r.length;s<a;s+=3)VI(t,n,r[s],r[s+1],r[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class xue extends O2{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,n,r){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-o,u=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),p=c/d,g=u/f,y={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/p,scaleY:1/g},v=d+2*2,b=f+2*2,_=r.getCanvas("mesh",v,b),w=_.context,T=w.createImageData(d,f);if(n){const O=T.data;for(let C=0,I=O.length;C<I;C+=4)O[C]=n[0],O[C+1]=n[1],O[C+2]=n[2],O[C+3]=255}for(const O of this._figures)_ue(T,O,y);return w.putImageData(T,2,2),{canvas:_.canvas,offsetX:o-2*p,offsetY:l-2*g,scaleX:p,scaleY:g}}isModifyingCurrentTransform(){return!0}getPattern(e,n,r,i){SO(e,this._bbox);const s=new Float32Array(2);if(i===br.SHADING)ue.singularValueDecompose2dScale(zt(e),s);else if(this.matrix){ue.singularValueDecompose2dScale(this.matrix,s);const[o,l]=s;ue.singularValueDecompose2dScale(n.baseTransform,s),s[0]*=o,s[1]*=l}else ue.singularValueDecompose2dScale(n.baseTransform,s);const a=this._createMeshCanvas(s,i===br.SHADING?null:this._background,n.cachedCanvases);return i!==br.SHADING&&(e.setTransform(...n.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class Aue extends O2{getPattern(){return"hotpink"}}function Eue(t){switch(t[0]){case"RadialAxial":return new wue(t);case"Mesh":return new xue(t);case"Dummy":return new Aue}throw new Error(`Unknown IR type: ${t[0]}`)}const b4={COLORED:1,UNCOLORED:2},pT=class pT{constructor(e,n,r,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=i}createPatternCanvas(e,n){var H,re;const{bbox:r,operatorList:i,paintType:s,tilingType:a,color:o,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),qT("TilingType: "+a);const d=r[0],f=r[1],p=r[2],g=r[3],y=p-d,v=g-f,b=new Float32Array(2);ue.singularValueDecompose2dScale(this.matrix,b);const[_,w]=b;ue.singularValueDecompose2dScale(this.baseTransform,b);const T=_*b[0],P=w*b[1];let O=y,C=v,I=!1,M=!1;const L=Math.ceil(c*T),N=Math.ceil(u*P),F=Math.ceil(y*T),j=Math.ceil(v*P);L>=F?O=c:I=!0,N>=j?C=u:M=!0;const K=this.getSizeAndScale(O,this.ctx.canvas.width,T),te=this.getSizeAndScale(C,this.ctx.canvas.height,P),Z=e.cachedCanvases.getCanvas("pattern",K.size,te.size),G=Z.context,U=l.createCanvasGraphics(G,n);if(U.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(U,s,o),G.translate(-K.scale*d,-te.scale*f),U.transform(0,K.scale,0,0,te.scale,0,0),G.save(),(H=U.dependencyTracker)==null||H.save(),this.clipBbox(U,d,f,p,g),U.baseTransform=zt(U.ctx),U.executeOperatorList(i),U.endDrawing(),(re=U.dependencyTracker)==null||re.restore(),G.restore(),I||M){const ve=Z.canvas;I&&(O=c),M&&(C=u);const de=this.getSizeAndScale(O,this.ctx.canvas.width,T),xe=this.getSizeAndScale(C,this.ctx.canvas.height,P),je=de.size,dt=xe.size,ft=e.cachedCanvases.getCanvas("pattern-workaround",je,dt),Ee=ft.context,ha=I?Math.floor(y/c):0,X=M?Math.floor(v/u):0;for(let Se=0;Se<=ha;Se++)for(let Re=0;Re<=X;Re++)Ee.drawImage(ve,je*Se,dt*Re,je,dt,0,0,je,dt);return{canvas:ft.canvas,scaleX:de.scale,scaleY:xe.scale,offsetX:d,offsetY:f}}return{canvas:Z.canvas,scaleX:K.scale,scaleY:te.scale,offsetX:d,offsetY:f}}getSizeAndScale(e,n,r){const i=Math.max(pT.MAX_PATTERN_SIZE,n);let s=Math.ceil(e*r);return s>=i?s=i:r=s/e,{scale:r,size:s}}clipBbox(e,n,r,i,s){const a=i-n,o=s-r;e.ctx.rect(n,r,a,o),ue.axialAlignedBoundingBox([n,r,i,s],zt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,n,r){const i=e.ctx,s=e.current;switch(n){case b4.COLORED:const{fillStyle:a,strokeStyle:o}=this.ctx;i.fillStyle=s.fillColor=a,i.strokeStyle=s.strokeColor=o;break;case b4.UNCOLORED:i.fillStyle=i.strokeStyle=r,s.fillColor=s.strokeColor=r;break;default:throw new jce(`Unsupported paint type: ${n}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,n,r,i,s){let a=r;i!==br.SHADING&&(a=ue.transform(a,n.baseTransform),this.matrix&&(a=ue.transform(a,this.matrix)));const o=this.createPatternCanvas(n,s);let l=new DOMMatrix(a);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=e.createPattern(o.canvas,"repeat");return c.setTransform(l),c}};Y(pT,"MAX_PATTERN_SIZE",3e3);let TO=pT;function Sue({src:t,srcPos:e=0,dest:n,width:r,height:i,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const o=Pr.isLittleEndian?4278190080:255,[l,c]=a?[s,o]:[o,s],u=r>>3,d=r&7,f=t.length;n=new Uint32Array(n.buffer);let p=0;for(let g=0;g<i;g++){for(const v=e+u;e<v;e++){const b=e<f?t[e]:255;n[p++]=b&128?c:l,n[p++]=b&64?c:l,n[p++]=b&32?c:l,n[p++]=b&16?c:l,n[p++]=b&8?c:l,n[p++]=b&4?c:l,n[p++]=b&2?c:l,n[p++]=b&1?c:l}if(d===0)continue;const y=e<f?t[e++]:255;for(let v=0;v<d;v++)n[p++]=y&1<<7-v?c:l}return{srcPos:e,destPos:p}}const w4=16,_4=100,Tue=15,x4=10,Ci=16,BI=new DOMMatrix,cs=new Float32Array(2),lm=new Float32Array([1/0,1/0,-1/0,-1/0]);function Pue(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(n,r){e.translate(n,r),this.__originalTranslate(n,r)},t.scale=function(n,r){e.scale(n,r),this.__originalScale(n,r)},t.transform=function(n,r,i,s,a,o){e.transform(n,r,i,s,a,o),this.__originalTransform(n,r,i,s,a,o)},t.setTransform=function(n,r,i,s,a,o){e.setTransform(n,r,i,s,a,o),this.__originalSetTransform(n,r,i,s,a,o)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(n){e.rotate(n),this.__originalRotate(n)},t.clip=function(n){e.clip(n),this.__originalClip(n)},t.moveTo=function(n,r){e.moveTo(n,r),this.__originalMoveTo(n,r)},t.lineTo=function(n,r){e.lineTo(n,r),this.__originalLineTo(n,r)},t.bezierCurveTo=function(n,r,i,s,a,o){e.bezierCurveTo(n,r,i,s,a,o),this.__originalBezierCurveTo(n,r,i,s,a,o)},t.rect=function(n,r,i,s){e.rect(n,r,i,s),this.__originalRect(n,r,i,s)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class Cue{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,n,r){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,n,r)):(i=this.canvasFactory.create(n,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const n=this.cache[e];this.canvasFactory.destroy(n),delete this.cache[e]}}}function mA(t,e,n,r,i,s,a,o,l,c){const[u,d,f,p,g,y]=zt(t);if(d===0&&f===0){const _=a*u+g,w=Math.round(_),T=o*p+y,P=Math.round(T),O=(a+l)*u+g,C=Math.abs(Math.round(O)-w)||1,I=(o+c)*p+y,M=Math.abs(Math.round(I)-P)||1;return t.setTransform(Math.sign(u),0,0,Math.sign(p),w,P),t.drawImage(e,n,r,i,s,0,0,C,M),t.setTransform(u,d,f,p,g,y),[C,M]}if(u===0&&p===0){const _=o*f+g,w=Math.round(_),T=a*d+y,P=Math.round(T),O=(o+c)*f+g,C=Math.abs(Math.round(O)-w)||1,I=(a+l)*d+y,M=Math.abs(Math.round(I)-P)||1;return t.setTransform(0,Math.sign(d),Math.sign(f),0,w,P),t.drawImage(e,n,r,i,s,0,0,M,C),t.setTransform(u,d,f,p,g,y),[M,C]}t.drawImage(e,n,r,i,s,a,o,l,c);const v=Math.hypot(u,d),b=Math.hypot(f,p);return[v*l,b*c]}class A4{constructor(e,n,r){Y(this,"alphaIsShape",!1);Y(this,"fontSize",0);Y(this,"fontSizeScale",1);Y(this,"textMatrix",null);Y(this,"textMatrixScale",1);Y(this,"fontMatrix",XR);Y(this,"leading",0);Y(this,"x",0);Y(this,"y",0);Y(this,"lineX",0);Y(this,"lineY",0);Y(this,"charSpacing",0);Y(this,"wordSpacing",0);Y(this,"textHScale",1);Y(this,"textRenderingMode",ur.FILL);Y(this,"textRise",0);Y(this,"fillColor","#000000");Y(this,"strokeColor","#000000");Y(this,"patternFill",!1);Y(this,"patternStroke",!1);Y(this,"fillAlpha",1);Y(this,"strokeAlpha",1);Y(this,"lineWidth",1);Y(this,"activeSMask",null);Y(this,"transferMaps","none");r==null||r(this),this.clipBox=new Float32Array([0,0,e,n]),this.minMax=lm.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=br.FILL,n=null){const r=this.minMax.slice();if(e===br.STROKE){n||bt("Stroke bounding box must include transform."),ue.singularValueDecompose2dScale(n,cs);const i=cs[0]*this.lineWidth/2,s=cs[1]*this.lineWidth/2;r[0]-=i,r[1]-=s,r[2]+=i,r[3]+=s}return r}updateClipFromPath(){const e=ue.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(lm,0)}getClippedPathBoundingBox(e=br.FILL,n=null){return ue.intersect(this.clipBox,this.getPathBoundingBox(e,n))}}function E4(t,e){if(e instanceof ImageData){t.putImageData(e,0,0);return}const n=e.height,r=e.width,i=n%Ci,s=(n-i)/Ci,a=i===0?s:s+1,o=t.createImageData(r,Ci);let l=0,c;const u=e.data,d=o.data;let f,p,g,y;if(e.kind===oE.GRAYSCALE_1BPP){const v=u.byteLength,b=new Uint32Array(d.buffer,0,d.byteLength>>2),_=b.length,w=r+7>>3,T=4294967295,P=Pr.isLittleEndian?4278190080:255;for(f=0;f<a;f++){for(g=f<s?Ci:i,c=0,p=0;p<g;p++){const O=v-l;let C=0;const I=O>w?r:O*8-7,M=I&-8;let L=0,N=0;for(;C<M;C+=8)N=u[l++],b[c++]=N&128?T:P,b[c++]=N&64?T:P,b[c++]=N&32?T:P,b[c++]=N&16?T:P,b[c++]=N&8?T:P,b[c++]=N&4?T:P,b[c++]=N&2?T:P,b[c++]=N&1?T:P;for(;C<I;C++)L===0&&(N=u[l++],L=128),b[c++]=N&L?T:P,L>>=1}for(;c<_;)b[c++]=0;t.putImageData(o,0,f*Ci)}}else if(e.kind===oE.RGBA_32BPP){for(p=0,y=r*Ci*4,f=0;f<s;f++)d.set(u.subarray(l,l+y)),l+=y,t.putImageData(o,0,p),p+=Ci;f<a&&(y=r*i*4,d.set(u.subarray(l,l+y)),t.putImageData(o,0,p))}else if(e.kind===oE.RGB_24BPP)for(g=Ci,y=r*g,f=0;f<a;f++){for(f>=s&&(g=i,y=r*g),c=0,p=y;p--;)d[c++]=u[l++],d[c++]=u[l++],d[c++]=u[l++],d[c++]=255;t.putImageData(o,0,f*Ci)}else throw new Error(`bad image kind: ${e.kind}`)}function S4(t,e){if(e.bitmap){t.drawImage(e.bitmap,0,0);return}const n=e.height,r=e.width,i=n%Ci,s=(n-i)/Ci,a=i===0?s:s+1,o=t.createImageData(r,Ci);let l=0;const c=e.data,u=o.data;for(let d=0;d<a;d++){const f=d<s?Ci:i;({srcPos:l}=Sue({src:c,srcPos:l,dest:u,width:r,height:f,nonBlackColor:0})),t.putImageData(o,0,d*Ci)}}function Ev(t,e){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of n)t[r]!==void 0&&(e[r]=t[r]);t.setLineDash!==void 0&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function gA(t){t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",t.setLineDash!==void 0&&(t.setLineDash([]),t.lineDashOffset=0);const{filter:e}=t;e!=="none"&&e!==""&&(t.filter="none")}function T4(t,e){if(e)return!0;ue.singularValueDecompose2dScale(t,cs);const n=Math.fround(Wo.pixelRatio*vh.PDF_TO_CSS_UNITS);return cs[0]<=n&&cs[1]<=n}const Iue=["butt","round","square"],kue=["miter","round","bevel"],Rue={},P4={};var Ga,PO,CO,IO;const RF=class RF{constructor(e,n,r,i,s,{optionalContentConfig:a,markedContentStack:o=null},l,c,u){k(this,Ga);this.ctx=e,this.current=new A4(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=r,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new Cue(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=u??null}getObject(e,n,r=null){var i;return typeof n=="string"?((i=this.dependencyTracker)==null||i.recordNamedDependency(e,n),n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n)):r}beginDrawing({transform:e,viewport:n,transparency:r=!1,background:i=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,r){const l=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...zt(this.compositeCtx))}this.ctx.save(),gA(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=zt(this.ctx)}executeOperatorList(e,n,r,i,s){var b;const a=e.argsArray,o=e.fnArray;let l=n||0;const c=a.length;if(c===l)return l;const u=c-l>x4&&typeof r=="function",d=u?Date.now()+Tue:0;let f=0;const p=this.commonObjs,g=this.objs;let y,v;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,r),l;if(!s||s(l))if(y=o[l],v=a[l]??null,y!==fb.dependency)v===null?this[y](l):this[y](l,...v);else for(const _ of v){(b=this.dependencyTracker)==null||b.recordNamedData(_,l);const w=_.startsWith("g_")?p:g;if(!w.has(_))return w.get(_,r),l}if(l++,l===c)return l;if(u&&++f>x4){if(Date.now()>d)return r(),l;f=0}}}endDrawing(){D(this,Ga,PO).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const n of e.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);e.clear()}this._cachedBitmapsMap.clear(),D(this,Ga,CO).call(this)}_scaleImage(e,n){const r=e.width??e.displayWidth,i=e.height??e.displayHeight;let s=Math.max(Math.hypot(n[0],n[1]),1),a=Math.max(Math.hypot(n[2],n[3]),1),o=r,l=i,c="prescale1",u,d;for(;s>2&&o>1||a>2&&l>1;){let f=o,p=l;s>2&&o>1&&(f=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),s/=o/f),a>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/p),u=this.cachedCanvases.getCanvas(c,f,p),d=u.context,d.clearRect(0,0,f,p),d.drawImage(e,0,0,o,l,0,0,f,p),e=u.canvas,o=f,l=p,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e,n){var L,N;const r=this.ctx,{width:i,height:s}=n,a=this.current.fillColor,o=this.current.patternFill,l=zt(r);let c,u,d,f;if((n.bitmap||n.data)&&n.count>1){const F=n.bitmap||n.data.buffer;u=JSON.stringify(o?l:[l.slice(0,4),a]),c=this._cachedBitmapsMap.get(F),c||(c=new Map,this._cachedBitmapsMap.set(F,c));const j=c.get(u);if(j&&!o){const K=Math.round(Math.min(l[0],l[2])+l[4]),te=Math.round(Math.min(l[1],l[3])+l[5]);return(L=this.dependencyTracker)==null||L.recordDependencies(e,Cs.transformAndFill),{canvas:j,offsetX:K,offsetY:te}}d=j}d||(f=this.cachedCanvases.getCanvas("maskCanvas",i,s),S4(f.context,n));let p=ue.transform(l,[1/i,0,0,-1/s,0,0]);p=ue.transform(p,[1,0,0,1,0,-s]);const g=lm.slice();ue.axialAlignedBoundingBox([0,0,i,s],p,g);const[y,v,b,_]=g,w=Math.round(b-y)||1,T=Math.round(_-v)||1,P=this.cachedCanvases.getCanvas("fillCanvas",w,T),O=P.context,C=y,I=v;O.translate(-C,-I),O.transform(...p),d||(d=this._scaleImage(f.canvas,Za(O)),d=d.img,c&&o&&c.set(u,d)),O.imageSmoothingEnabled=T4(zt(O),n.interpolate),mA(O,d,0,0,d.width,d.height,0,0,i,s),O.globalCompositeOperation="source-in";const M=ue.transform(Za(O),[1,0,0,1,-C,-I]);return O.fillStyle=o?a.getPattern(r,this,M,br.FILL,e):a,O.fillRect(0,0,i,s),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,P.canvas)),(N=this.dependencyTracker)==null||N.recordDependencies(e,Cs.transformAndFill),{canvas:P.canvas,offsetX:Math.round(C),offsetY:Math.round(I)}}setLineWidth(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineWidth",e),n!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=n,this.ctx.lineWidth=n}setLineCap(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineCap",e),this.ctx.lineCap=Iue[n]}setLineJoin(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineJoin",e),this.ctx.lineJoin=kue[n]}setMiterLimit(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("miterLimit",e),this.ctx.miterLimit=n}setDash(e,n,r){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(n),i.lineDashOffset=r)}setRenderingIntent(e,n){}setFlatness(e,n){}setGState(e,n){var r,i,s,a,o;for(const[l,c]of n)switch(l){case"LW":this.setLineWidth(e,c);break;case"LC":this.setLineCap(e,c);break;case"LJ":this.setLineJoin(e,c);break;case"ML":this.setMiterLimit(e,c);break;case"D":this.setDash(e,c[0],c[1]);break;case"RI":this.setRenderingIntent(e,c);break;case"FL":this.setFlatness(e,c);break;case"Font":this.setFont(e,c[0],c[1]);break;case"CA":(r=this.dependencyTracker)==null||r.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=c;break;case"ca":(i=this.dependencyTracker)==null||i.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=c;break;case"BM":(s=this.dependencyTracker)==null||s.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=c;break;case"SMask":(a=this.dependencyTracker)==null||a.recordSimpleData("SMask",e),this.current.activeSMask=c?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(o=this.dependencyTracker)==null||o.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(c);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const n=this.ctx.canvas.width,r=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,n,r);this.suspendedCtx=this.ctx;const a=this.ctx=s.context;a.setTransform(this.suspendedCtx.getTransform()),Ev(this.suspendedCtx,a),Pue(a,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ev(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,n,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,n,r,i){const s=i[0],a=i[1],o=i[2]-s,l=i[3]-a;o===0||l===0||(this.genericComposeSMask(n.context,r,o,l,n.subtype,n.backdrop,n.transferMap,s,a,n.offsetX,n.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,n,r,i,s,a,o,l,c,u,d){let f=e.canvas,p=l-u,g=c-d;if(a)if(p<0||g<0||p+r>f.width||g+i>f.height){const v=this.cachedCanvases.getCanvas("maskExtension",r,i),b=v.context;b.drawImage(f,-p,-g),b.globalCompositeOperation="destination-atop",b.fillStyle=a,b.fillRect(0,0,r,i),b.globalCompositeOperation="source-over",f=v.canvas,p=g=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const v=new Path2D;v.rect(p,g,r,i),e.clip(v),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(p,g,r,i),e.restore()}n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),s==="Alpha"&&o?n.filter=this.filterFactory.addAlphaFilter(o):s==="Luminosity"&&(n.filter=this.filterFactory.addLuminosityFilter(o));const y=new Path2D;y.rect(l,c,r,i),n.clip(y),n.globalCompositeOperation="destination-in",n.drawImage(f,p,g,r,i,l,c,r,i),n.restore()}save(e){var r;this.inSMaskMode&&Ev(this.ctx,this.suspendedCtx),this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone(),(r=this.dependencyTracker)==null||r.save(e)}restore(e){var n;if((n=this.dependencyTracker)==null||n.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Ev(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,n,r,i,s,a,o){var l;(l=this.dependencyTracker)==null||l.recordIncrementalData("transform",e),this.ctx.transform(n,r,i,s,a,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,n,r,i){let[s]=r;if(!i){s||(s=r[0]=new Path2D),this[n](e,s);return}if(this.dependencyTracker!==null){const a=n===fb.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-a,i[2]+a,i[1]-a,i[3]+a).recordDependencies(e,["transform"])}s instanceof Path2D||(s=r[0]=A8(s)),ue.axialAlignedBoundingBox(i,zt(this.ctx),this.current.minMax),this[n](e,s),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,n,r=!0){var a;const i=this.ctx,s=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const o=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=s.getPattern(i,this,Za(i),br.STROKE,e),o){const l=new Path2D;l.addPath(n,i.getTransform().invertSelf().multiplySelf(o)),n=l}this.rescaleAndStroke(n,!1),i.restore()}else this.rescaleAndStroke(n,!0);(a=this.dependencyTracker)==null||a.recordDependencies(e,Cs.stroke),r&&this.consumePath(e,n,this.current.getClippedPathBoundingBox(br.STROKE,zt(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,n){this.stroke(e,n)}fill(e,n,r=!0){var c,u,d;const i=this.ctx,s=this.current.fillColor,a=this.current.patternFill;let o=!1;if(a){const f=s.isModifyingCurrentTransform()?i.getTransform():null;if((c=this.dependencyTracker)==null||c.save(e),i.save(),i.fillStyle=s.getPattern(i,this,Za(i),br.FILL,e),f){const p=new Path2D;p.addPath(n,i.getTransform().invertSelf().multiplySelf(f)),n=p}o=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(i.fill(n,"evenodd"),this.pendingEOFill=!1):i.fill(n)),(u=this.dependencyTracker)==null||u.recordDependencies(e,Cs.fill),o&&(i.restore(),(d=this.dependencyTracker)==null||d.restore(e)),r&&this.consumePath(e,n,l)}eoFill(e,n){this.pendingEOFill=!0,this.fill(e,n)}fillStroke(e,n){this.fill(e,n,!1),this.stroke(e,n,!1),this.consumePath(e,n)}eoFillStroke(e,n){this.pendingEOFill=!0,this.fillStroke(e,n)}closeFillStroke(e,n){this.fillStroke(e,n)}closeEOFillStroke(e,n){this.pendingEOFill=!0,this.fillStroke(e,n)}endPath(e,n){this.consumePath(e,n)}rawFillPath(e,n){var r;this.ctx.fill(n),(r=this.dependencyTracker)==null||r.recordDependencies(e,Cs.rawFillPath).recordOperation(e)}clip(e){var n;(n=this.dependencyTracker)==null||n.recordFutureForcedDependency("clipMode",e),this.pendingClip=Rue}eoClip(e){var n;(n=this.dependencyTracker)==null||n.recordFutureForcedDependency("clipMode",e),this.pendingClip=P4}beginText(e){var n;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(n=this.dependencyTracker)==null||n.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const n=this.pendingTextPaths,r=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;n!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(n!==void 0){const i=new Path2D,s=r.getTransform().invertSelf();for(const{transform:a,x:o,y:l,fontSize:c,path:u}of n)u&&i.addPath(u,new DOMMatrix(a).preMultiplySelf(s).translate(o,l).scale(c,-c));r.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("charSpacing",e),this.current.charSpacing=n}setWordSpacing(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("wordSpacing",e),this.current.wordSpacing=n}setHScale(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("hScale",e),this.current.textHScale=n/100}setLeading(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("leading",e),this.current.leading=-n}setFont(e,n,r){var d,f;(d=this.dependencyTracker)==null||d.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",n,e);const i=this.commonObjs.get(n),s=this.current;if(!i)throw new Error(`Can't find font for ${n}`);if(s.fontMatrix=i.fontMatrix||XR,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&Te("Invalid font matrix for font "+n),r<0?(r=-r,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=r,i.isType3Font)return;const a=i.loadedName||"sans-serif",o=((f=i.systemFontInfo)==null?void 0:f.css)||`"${a}", ${i.fallbackName}`;let l="normal";i.black?l="900":i.bold&&(l="bold");const c=i.italic?"italic":"normal";let u=r;r<w4?u=w4:r>_4&&(u=_4),this.current.fontSizeScale=r/u,this.ctx.font=`${c} ${l} ${u}px ${o}`}setTextRenderingMode(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=n}setTextRise(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRise",e),this.current.textRise=n}moveText(e,n,r){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=n,this.current.y=this.current.lineY+=r}setLeadingMoveText(e,n,r){this.setLeading(e,-r),this.moveText(e,n,r)}setTextMatrix(e,n){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:r}=this;r.textMatrix=n,r.textMatrixScale=Math.hypot(n[0],n[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(e){var n;this.moveText(e,0,this.current.leading),(n=this.dependencyTracker)==null||n.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,n,r,i,s,a){var b,_,w,T;const o=this.ctx,l=this.current,c=l.font,u=l.textRenderingMode,d=l.fontSize/l.fontSizeScale,f=u&ur.FILL_STROKE_MASK,p=!!(u&ur.ADD_TO_PATH_FLAG),g=l.patternFill&&!c.missingFile,y=l.patternStroke&&!c.missingFile;let v;if((c.disableFontFace||p||g||y)&&!c.missingFile&&(v=c.getPathGenerator(this.commonObjs,n)),v&&(c.disableFontFace||g||y)){o.save(),o.translate(r,i),o.scale(d,-d),(b=this.dependencyTracker)==null||b.recordCharacterBBox(e,o,c);let P;if(f===ur.FILL||f===ur.FILL_STROKE)if(s){P=o.getTransform(),o.setTransform(...s);const O=D(this,Ga,IO).call(this,v,P,s);o.fill(O)}else o.fill(v);if(f===ur.STROKE||f===ur.FILL_STROKE)if(a){P||(P=o.getTransform()),o.setTransform(...a);const{a:O,b:C,c:I,d:M}=P,L=ue.inverseTransform(a),N=ue.transform([O,C,I,M,0,0],L);ue.singularValueDecompose2dScale(N,cs),o.lineWidth*=Math.max(cs[0],cs[1])/d,o.stroke(D(this,Ga,IO).call(this,v,P,a))}else o.lineWidth/=d,o.stroke(v);o.restore()}else(f===ur.FILL||f===ur.FILL_STROKE)&&(o.fillText(n,r,i),(_=this.dependencyTracker)==null||_.recordCharacterBBox(e,o,c,d,r,i,()=>o.measureText(n))),(f===ur.STROKE||f===ur.FILL_STROKE)&&(this.dependencyTracker&&((w=this.dependencyTracker)==null||w.recordCharacterBBox(e,o,c,d,r,i,()=>o.measureText(n)).recordDependencies(e,Cs.stroke)),o.strokeText(n,r,i));p&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:zt(o),x:r,y:i,fontSize:d,path:v}),(T=this.dependencyTracker)==null||T.recordCharacterBBox(e,o,c,d,r,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const n=e.getImageData(0,0,10,10).data;let r=!1;for(let i=3;i<n.length;i+=4)if(n[i]>0&&n[i]<255){r=!0;break}return Pe(this,"isFontSubpixelAAEnabled",r)}showText(e,n){var I,M,L,N;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Cs.showText).resetBBox(e),this.current.textRenderingMode&ur.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const r=this.current,i=r.font;if(i.isType3Font){this.showType3Text(e,n),(I=this.dependencyTracker)==null||I.recordShowTextOperation(e);return}const s=r.fontSize;if(s===0){(M=this.dependencyTracker)==null||M.recordOperation(e);return}const a=this.ctx,o=r.fontSizeScale,l=r.charSpacing,c=r.wordSpacing,u=r.fontDirection,d=r.textHScale*u,f=n.length,p=i.vertical,g=p?1:-1,y=i.defaultVMetrics,v=s*r.fontMatrix[0],b=r.textRenderingMode===ur.FILL&&!i.disableFontFace&&!r.patternFill;a.save(),r.textMatrix&&a.transform(...r.textMatrix),a.translate(r.x,r.y+r.textRise),u>0?a.scale(d,-1):a.scale(d,1);let _,w;if(r.patternFill){a.save();const F=r.fillColor.getPattern(a,this,Za(a),br.FILL,e);_=zt(a),a.restore(),a.fillStyle=F}if(r.patternStroke){a.save();const F=r.strokeColor.getPattern(a,this,Za(a),br.STROKE,e);w=zt(a),a.restore(),a.strokeStyle=F}let T=r.lineWidth;const P=r.textMatrixScale;if(P===0||T===0){const F=r.textRenderingMode&ur.FILL_STROKE_MASK;(F===ur.STROKE||F===ur.FILL_STROKE)&&(T=this.getSinglePixelWidth())}else T/=P;if(o!==1&&(a.scale(o,o),T/=o),a.lineWidth=T,i.isInvalidPDFjsFont){const F=[];let j=0;for(const te of n)F.push(te.unicode),j+=te.width;const K=F.join("");if(a.fillText(K,0,0),this.dependencyTracker!==null){const te=a.measureText(K);this.dependencyTracker.recordBBox(e,this.ctx,-te.actualBoundingBoxLeft,te.actualBoundingBoxRight,-te.actualBoundingBoxAscent,te.actualBoundingBoxDescent).recordShowTextOperation(e)}r.x+=j*v*d,a.restore(),this.compose();return}let O=0,C;for(C=0;C<f;++C){const F=n[C];if(typeof F=="number"){O+=g*F*s/1e3;continue}let j=!1;const K=(F.isSpace?c:0)+l,te=F.fontChar,Z=F.accent;let G,U,H=F.width;if(p){const de=F.vmetric||y,xe=-(F.vmetric?de[1]:H*.5)*v,je=de[2]*v;H=de?-de[0]:H,G=xe/o,U=(O+je)/o}else G=O/o,U=0;let re;if(i.remeasure&&H>0){re=a.measureText(te);const de=re.width*1e3/s*o;if(H<de&&this.isFontSubpixelAAEnabled){const xe=H/de;j=!0,a.save(),a.scale(xe,1),G/=xe}else H!==de&&(G+=(H-de)/2e3*s/o)}if(this.contentVisible&&(F.isInFont||i.missingFile)){if(b&&!Z)a.fillText(te,G,U),(L=this.dependencyTracker)==null||L.recordCharacterBBox(e,a,re?{bbox:null}:i,s/o,G,U,()=>re??a.measureText(te));else if(this.paintChar(e,te,G,U,_,w),Z){const de=G+s*Z.offset.x/o,xe=U-s*Z.offset.y/o;this.paintChar(e,Z.fontChar,de,xe,_,w)}}const ve=p?H*v-K*u:H*v+K*u;O+=ve,j&&a.restore()}p?r.y-=O:r.x+=O*d,a.restore(),this.compose(),(N=this.dependencyTracker)==null||N.recordShowTextOperation(e)}showType3Text(e,n){const r=this.ctx,i=this.current,s=i.font,a=i.fontSize,o=i.fontDirection,l=s.vertical?1:-1,c=i.charSpacing,u=i.wordSpacing,d=i.textHScale*o,f=i.fontMatrix||XR,p=n.length,g=i.textRenderingMode===ur.INVISIBLE;let y,v,b,_;if(g||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),i.textMatrix&&r.transform(...i.textMatrix),r.translate(i.x,i.y+i.textRise),r.scale(d,o);const w=this.dependencyTracker;for(this.dependencyTracker=w?new VS(w,e):null,y=0;y<p;++y){if(v=n[y],typeof v=="number"){_=l*v*a/1e3,this.ctx.translate(_,0),i.x+=_*d;continue}const T=(v.isSpace?u:0)+c,P=s.charProcOperatorList[v.operatorListId];P?this.contentVisible&&(this.save(),r.scale(a,a),r.transform(...f),this.executeOperatorList(P),this.restore()):Te(`Type3 character "${v.operatorListId}" is not available.`);const O=[v.width,0];ue.applyTransform(O,f),b=O[0]*a+T,r.translate(b,0),i.x+=b*d}r.restore(),w&&(this.dependencyTracker=w)}setCharWidth(e,n,r){}setCharWidthAndBounds(e,n,r,i,s,a,o){var c;const l=new Path2D;l.rect(i,s,a-i,o-s),this.ctx.clip(l),(c=this.dependencyTracker)==null||c.recordBBox(e,this.ctx,i,a,s,o).recordClipBox(e,this.ctx,i,a,s,o),this.endPath(e)}getColorN_Pattern(e,n){let r;if(n[0]==="TilingPattern"){const i=this.baseTransform||zt(this.ctx),s={createCanvasGraphics:(a,o)=>new RF(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new VS(this.dependencyTracker,o,!0):null)};r=new TO(n,this.ctx,s,i)}else r=this._getPattern(e,n[1],n[2]);return r}setStrokeColorN(e,...n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,n),this.current.patternStroke=!0}setFillColorN(e,...n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,n),this.current.patternFill=!0}setStrokeRGBColor(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=n,this.current.patternStroke=!1}setStrokeTransparent(e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=n,this.current.patternFill=!1}setFillTransparent(e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,n,r=null){let i;return this.cachedPatterns.has(n)?i=this.cachedPatterns.get(n):(i=Eue(this.getObject(e,n)),this.cachedPatterns.set(n,i)),r&&(i.matrix=r),i}shadingFill(e,n){var a;if(!this.contentVisible)return;const r=this.ctx;this.save(e);const i=this._getPattern(e,n);r.fillStyle=i.getPattern(r,this,Za(r),br.SHADING,e);const s=Za(r);if(s){const{width:o,height:l}=r.canvas,c=lm.slice();ue.axialAlignedBoundingBox([0,0,o,l],s,c);const[u,d,f,p]=c;this.ctx.fillRect(u,d,f-u,p-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(a=this.dependencyTracker)==null||a.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Cs.transform).recordDependencies(e,Cs.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){bt("Should not call beginInlineImage")}beginImageData(){bt("Should not call beginImageData")}paintFormXObjectBegin(e,n,r){var i;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),n&&this.transform(e,...n),this.baseTransform=zt(this.ctx),r)){ue.axialAlignedBoundingBox(r,this.baseTransform,this.current.minMax);const[s,a,o,l]=r,c=new Path2D;c.rect(s,a,o-s,l-a),this.ctx.clip(c),(i=this.dependencyTracker)==null||i.recordClipBox(e,this.ctx,s,o,a,l),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,n){var w;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;n.isolated||qT("TODO: Support non-isolated groups."),n.knockout&&Te("Knockout groups not supported.");const i=zt(r);if(n.matrix&&r.transform(...n.matrix),!n.bbox)throw new Error("Bounding box is required.");let s=lm.slice();ue.axialAlignedBoundingBox(n.bbox,zt(r),s);const a=[0,0,r.canvas.width,r.canvas.height];s=ue.intersect(s,a)||[0,0,0,0];const o=Math.floor(s[0]),l=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-o,1),u=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,u]);let d="groupAt"+this.groupLevel;n.smask&&(d+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(d,c,u),p=f.context;p.translate(-o,-l),p.transform(...i);let g=new Path2D;const[y,v,b,_]=n.bbox;if(g.rect(y,v,b-y,_-v),n.matrix){const T=new Path2D;T.addPath(g,new DOMMatrix(n.matrix)),g=T}p.clip(g),n.smask&&this.smaskStack.push({canvas:f.canvas,context:p,offsetX:o,offsetY:l,subtype:n.smask.subtype,backdrop:n.smask.backdrop,transferMap:n.smask.transferMap||null,startTransformInverse:null}),(!n.smask||this.dependencyTracker)&&(r.setTransform(1,0,0,1,0,0),r.translate(o,l),r.save()),Ev(r,p),this.ctx=p,(w=this.dependencyTracker)==null||w.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(r),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(e,n){var s;if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,(s=this.dependencyTracker)==null||s.popBaseTransform(),n.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=zt(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...a);const o=lm.slice();ue.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],a,o),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,n,r,i,s,a){if(D(this,Ga,PO).call(this),gA(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),r){const o=r[2]-r[0],l=r[3]-r[1];if(a&&this.annotationCanvasMap){i=i.slice(),i[4]-=r[0],i[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=o,r[3]=l,ue.singularValueDecompose2dScale(zt(this.ctx),cs);const{viewportScale:c}=this,u=Math.ceil(o*this.outputScaleX*c),d=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(u,d);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(n,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(cs[0],0,0,-cs[1],0,l*cs[1]),gA(this.ctx)}else{gA(this.ctx),this.endPath(e);const c=new Path2D;c.rect(r[0],r[1],o,l),this.ctx.clip(c)}}this.current=new A4(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...s)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),D(this,Ga,CO).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,n){var o;if(!this.contentVisible)return;const r=n.count;n=this.getObject(e,n.data,n),n.count=r;const i=this.ctx,s=this._createMaskCanvas(e,n),a=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,s.offsetX,s.offsetY),(o=this.dependencyTracker)==null||o.resetBBox(e).recordBBox(e,this.ctx,s.offsetX,s.offsetX+a.width,s.offsetY,s.offsetY+a.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,n,r,i=0,s=0,a,o){var d,f,p;if(!this.contentVisible)return;n=this.getObject(e,n.data,n);const l=this.ctx;l.save();const c=zt(l);l.transform(r,i,s,a,0,0);const u=this._createMaskCanvas(e,n);l.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]),(d=this.dependencyTracker)==null||d.resetBBox(e);for(let g=0,y=o.length;g<y;g+=2){const v=ue.transform(c,[r,i,s,a,o[g],o[g+1]]);l.drawImage(u.canvas,v[4],v[5]),(f=this.dependencyTracker)==null||f.recordBBox(e,this.ctx,v[4],v[4]+u.canvas.width,v[5],v[5]+u.canvas.height)}l.restore(),this.compose(),(p=this.dependencyTracker)==null||p.recordOperation(e)}paintImageMaskXObjectGroup(e,n){var a,o,l;if(!this.contentVisible)return;const r=this.ctx,i=this.current.fillColor,s=this.current.patternFill;(a=this.dependencyTracker)==null||a.resetBBox(e).recordDependencies(e,Cs.transformAndFill);for(const c of n){const{data:u,width:d,height:f,transform:p}=c,g=this.cachedCanvases.getCanvas("maskCanvas",d,f),y=g.context;y.save();const v=this.getObject(e,u,c);S4(y,v),y.globalCompositeOperation="source-in",y.fillStyle=s?i.getPattern(y,this,Za(r),br.FILL,e):i,y.fillRect(0,0,d,f),y.restore(),r.save(),r.transform(...p),r.scale(1,-1),mA(r,g.canvas,0,0,d,f,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,r,0,d,0,f),r.restore()}this.compose(),(l=this.dependencyTracker)==null||l.recordOperation(e)}paintImageXObject(e,n){if(!this.contentVisible)return;const r=this.getObject(e,n);if(!r){Te("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,r)}paintImageXObjectRepeat(e,n,r,i,s){if(!this.contentVisible)return;const a=this.getObject(e,n);if(!a){Te("Dependent image isn't ready yet");return}const o=a.width,l=a.height,c=[];for(let u=0,d=s.length;u<d;u+=2)c.push({transform:[r,0,0,i,s[u],s[u+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(e,a,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:n,width:r,height:i}=e,s=this.cachedCanvases.getCanvas("inlineImage",r,i),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(n,0,0),a.filter="none",s.canvas}paintInlineImageXObject(e,n){var c;if(!this.contentVisible)return;const r=n.width,i=n.height,s=this.ctx;this.save(e);const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none"),s.scale(1/r,-1/i);let o;if(n.bitmap)o=this.applyTransferMapsToBitmap(n);else if(typeof HTMLElement=="function"&&n instanceof HTMLElement||!n.data)o=n;else{const d=this.cachedCanvases.getCanvas("inlineImage",r,i).context;E4(d,n),o=this.applyTransferMapsToCanvas(d)}const l=this._scaleImage(o,Za(s));s.imageSmoothingEnabled=T4(zt(s),n.interpolate),(c=this.dependencyTracker)==null||c.resetBBox(e).recordBBox(e,s,0,r,-i,0).recordDependencies(e,Cs.imageXObject).recordOperation(e),mA(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-i,r,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,n,r){var a,o,l;if(!this.contentVisible)return;const i=this.ctx;let s;if(n.bitmap)s=n.bitmap;else{const c=n.width,u=n.height,f=this.cachedCanvases.getCanvas("inlineImage",c,u).context;E4(f,n),s=this.applyTransferMapsToCanvas(f)}(a=this.dependencyTracker)==null||a.resetBBox(e);for(const c of r)i.save(),i.transform(...c.transform),i.scale(1,-1),mA(i,s,c.x,c.y,c.w,c.h,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,i,0,1,-1,0),i.restore();(l=this.dependencyTracker)==null||l.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var n;this.contentVisible&&((n=this.dependencyTracker)==null||n.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Cs.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,n){}markPointProps(e,n,r){}beginMarkedContent(e,n){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,n,r){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(e),n==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var n;(n=this.dependencyTracker)==null||n.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,n,r){var a,o;const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const s=this.ctx;this.pendingClip?(i||(this.pendingClip===P4?s.clip(n,"evenodd"):s.clip(n)),this.pendingClip=null,(a=this.dependencyTracker)==null||a.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(o=this.dependencyTracker)==null||o.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=zt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const n=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:n,b:r,c:i,d:s}=this.ctx.getTransform();let a,o;if(r===0&&i===0){const l=Math.abs(n),c=Math.abs(s);if(l===c)if(e===0)a=o=1/l;else{const u=l*e;a=o=u<1?1/u:1}else if(e===0)a=1/l,o=1/c;else{const u=l*e,d=c*e;a=u<1?1/u:1,o=d<1?1/d:1}}else{const l=Math.abs(n*s-r*i),c=Math.hypot(n,r),u=Math.hypot(i,s);if(e===0)a=u/l,o=c/l;else{const d=e*l;a=u>d?u/d:1,o=c>d?c/d:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,n){const{ctx:r,current:{lineWidth:i}}=this,[s,a]=this.getScaleForStroking();if(s===a){r.lineWidth=(i||1)*s,r.stroke(e);return}const o=r.getLineDash();n&&r.save(),r.scale(s,a),BI.a=1/s,BI.d=1/a;const l=new Path2D;if(l.addPath(e,BI),o.length>0){const c=Math.max(s,a);r.setLineDash(o.map(u=>u/c)),r.lineDashOffset/=c}r.lineWidth=i||1,r.stroke(l),n&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Ga=new WeakSet,PO=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},CO=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const n=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}},IO=function(e,n,r){const i=new Path2D;return i.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(n)),i};let Am=RF;for(const t in fb)Am.prototype[t]!==void 0&&(Am.prototype[fb[t]]=Am.prototype[t]);var Rw,Ow;class ko{static get workerPort(){return h(this,Rw)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");E(this,Rw,e)}static get workerSrc(){return h(this,Ow)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");E(this,Ow,e)}}Rw=new WeakMap,Ow=new WeakMap,k(ko,Rw,null),k(ko,Ow,"");var dg,Dw;class Oue{constructor({parsedData:e,rawData:n}){k(this,dg);k(this,Dw);E(this,dg,e),E(this,Dw,n)}getRaw(){return h(this,Dw)}get(e){return h(this,dg).get(e)??null}[Symbol.iterator](){return h(this,dg).entries()}}dg=new WeakMap,Dw=new WeakMap;const Lp=Symbol("INTERNAL");var Mw,Nw,Lw,fg;class Due{constructor(e,{name:n,intent:r,usage:i,rbGroups:s}){k(this,Mw,!1);k(this,Nw,!1);k(this,Lw,!1);k(this,fg,!0);E(this,Mw,!!(e&os.DISPLAY)),E(this,Nw,!!(e&os.PRINT)),this.name=n,this.intent=r,this.usage=i,this.rbGroups=s}get visible(){if(h(this,Lw))return h(this,fg);if(!h(this,fg))return!1;const{print:e,view:n}=this.usage;return h(this,Mw)?(n==null?void 0:n.viewState)!=="OFF":h(this,Nw)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,n,r=!1){e!==Lp&&bt("Internal method `_setVisible` called."),E(this,Lw,r),E(this,fg,n)}}Mw=new WeakMap,Nw=new WeakMap,Lw=new WeakMap,fg=new WeakMap;var Eu,ut,pg,mg,jw,kO;class Mue{constructor(e,n=os.DISPLAY){k(this,jw);k(this,Eu,null);k(this,ut,new Map);k(this,pg,null);k(this,mg,null);if(this.renderingIntent=n,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,E(this,mg,e.order);for(const r of e.groups)h(this,ut).set(r.id,new Due(n,r));if(e.baseState==="OFF")for(const r of h(this,ut).values())r._setVisible(Lp,!1);for(const r of e.on)h(this,ut).get(r)._setVisible(Lp,!0);for(const r of e.off)h(this,ut).get(r)._setVisible(Lp,!1);E(this,pg,this.getHash())}}isVisible(e){if(h(this,ut).size===0)return!0;if(!e)return qT("Optional content group not defined."),!0;if(e.type==="OCG")return h(this,ut).has(e.id)?h(this,ut).get(e.id).visible:(Te(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return D(this,jw,kO).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const n of e.ids){if(!h(this,ut).has(n))return Te(`Optional content group not found: ${n}`),!0;if(h(this,ut).get(n).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const n of e.ids){if(!h(this,ut).has(n))return Te(`Optional content group not found: ${n}`),!0;if(!h(this,ut).get(n).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const n of e.ids){if(!h(this,ut).has(n))return Te(`Optional content group not found: ${n}`),!0;if(!h(this,ut).get(n).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const n of e.ids){if(!h(this,ut).has(n))return Te(`Optional content group not found: ${n}`),!0;if(h(this,ut).get(n).visible)return!1}return!0}return Te(`Unknown optional content policy ${e.policy}.`),!0}return Te(`Unknown group type ${e.type}.`),!0}setVisibility(e,n=!0,r=!0){var s;const i=h(this,ut).get(e);if(!i){Te(`Optional content group not found: ${e}`);return}if(r&&n&&i.rbGroups.length)for(const a of i.rbGroups)for(const o of a)o!==e&&((s=h(this,ut).get(o))==null||s._setVisible(Lp,!1,!0));i._setVisible(Lp,!!n,!0),E(this,Eu,null)}setOCGState({state:e,preserveRB:n}){let r;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}const s=h(this,ut).get(i);if(s)switch(r){case"ON":this.setVisibility(i,!0,n);break;case"OFF":this.setVisibility(i,!1,n);break;case"Toggle":this.setVisibility(i,!s.visible,n);break}}E(this,Eu,null)}get hasInitialVisibility(){return h(this,pg)===null||this.getHash()===h(this,pg)}getOrder(){return h(this,ut).size?h(this,mg)?h(this,mg).slice():[...h(this,ut).keys()]:null}getGroup(e){return h(this,ut).get(e)||null}getHash(){if(h(this,Eu)!==null)return h(this,Eu);const e=new tG;for(const[n,r]of h(this,ut))e.update(`${n}:${r.visible}`);return E(this,Eu,e.hexdigest())}[Symbol.iterator](){return h(this,ut).entries()}}Eu=new WeakMap,ut=new WeakMap,pg=new WeakMap,mg=new WeakMap,jw=new WeakSet,kO=function(e){const n=e.length;if(n<2)return!0;const r=e[0];for(let i=1;i<n;i++){const s=e[i];let a;if(Array.isArray(s))a=D(this,jw,kO).call(this,s);else if(h(this,ut).has(s))a=h(this,ut).get(s).visible;else return Te(`Optional content group not found: ${s}`),!0;switch(r){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return r==="And"};class Nue{constructor(e,{disableRange:n=!1,disableStream:r=!1}){He(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:s,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(s==null?void 0:s.length)>0){const l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!n,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:n}){const r=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(r),!0)});He(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var n,r,i,s;e.total===void 0?(r=(n=this._rangeReaders[0])==null?void 0:n.onProgress)==null||r.call(n,{loaded:e.loaded}):(s=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||s.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const n=this._rangeReaders.indexOf(e);n>=0&&this._rangeReaders.splice(n,1)}getFullReader(){He(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new Lue(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const r=new jue(this,e,n);return this._pdfDataRangeTransport.requestDataRange(e,n),this._rangeReaders.push(r),r}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class Lue{constructor(e,n,r=!1,i=null){this._stream=e,this._done=r||!1,this._filename=I2(i)?i:null,this._queuedChunks=n||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class jue{constructor(e,n,r){this._stream=e,this._begin=n,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Fue(t){let e=!0,n=r("filename\\*","i").exec(t);if(n){n=n[1];let u=o(n);return u=unescape(u),u=l(u),u=c(u),s(u)}if(n=a(t),n){const u=c(n);return s(u)}if(n=r("filename","i").exec(t),n){n=n[1];let u=o(n);return u=c(u),s(u)}function r(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(u,{fatal:!0}),p=z_(d);d=f.decode(p),e=!1}catch{}}return d}function s(u){return e&&/[\x80-\xff]/.test(u)&&(u=i("utf-8",u),e&&(u=i("iso-8859-1",u))),u}function a(u){const d=[];let f;const p=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(u))!==null;){let[,y,v,b]=f;if(y=parseInt(y,10),y in d){if(y===0)break;continue}d[y]=[v,b]}const g=[];for(let y=0;y<d.length&&y in d;++y){let[v,b]=d[y];b=o(b),v&&(b=unescape(b),y===0&&(b=l(b))),g.push(b)}return g.join("")}function o(u){if(u.startsWith('"')){const d=u.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}u=d.join('"')}return u}function l(u){const d=u.indexOf("'");if(d===-1)return u;const f=u.slice(0,d),g=u.slice(d+1).replace(/^[^']*'/,"");return i(f,g)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,g){if(p==="q"||p==="Q")return g=g.replaceAll("_"," "),g=g.replaceAll(/=([0-9a-fA-F]{2})/g,function(y,v){return String.fromCharCode(parseInt(v,16))}),i(f,g);try{g=atob(g)}catch{}return i(f,g)})}return""}function fG(t,e){const n=new Headers;if(!t||!e||typeof e!="object")return n;for(const r in e){const i=e[r];i!==void 0&&n.append(r,i)}return n}function YT(t){var e;return((e=URL.parse(t))==null?void 0:e.origin)??null}function pG({responseHeaders:t,isHttp:e,rangeChunkSize:n,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(t.get("Content-Length"),10);return!Number.isInteger(s)||(i.suggestedLength=s,s<=2*n)||r||!e||t.get("Accept-Ranges")!=="bytes"||(t.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function mG(t){const e=t.get("Content-Disposition");if(e){let n=Fue(e);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if(I2(n))return n}return null}function q_(t,e){return new DS(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t,t===404||t===0&&e.startsWith("file:"))}function gG(t){return t===200||t===206}function yG(t,e,n){return{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function vG(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(Te(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class Vue{constructor(e){Y(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=fG(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return He(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Bue(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const r=new $ue(this,e,n);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class Bue{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const n=e.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange;const r=new Headers(e.headers),i=n.url;fetch(i,yG(r,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=YT(s.url),!gG(s.status))throw q_(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();const a=s.headers,{allowRangeRequests:o,suggestedLength:l}=pG({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=mG(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new yh("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:vG(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}class $ue{constructor(e,n,r){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${n}-${r-1}`);const a=i.url;fetch(a,yG(s,this._withCredentials,this._abortController)).then(o=>{const l=YT(o.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!gG(o.status))throw q_(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:vG(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}const $I=200,UI=206;function Uue(t){const e=t.response;return typeof e!="string"?e:z_(e).buffer}class zue{constructor({url:e,httpHeaders:n,withCredentials:r}){Y(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=fG(this.isHttp,n),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const n=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(const[s,a]of this.headers)n.setRequestHeader(s,a);return this.isHttp&&"begin"in e&&"end"in e?(n.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=UI):i.expectedStatus=$I,n.responseType="arraybuffer",He(e.onError,"Expected `onError` callback to be provided."),n.onerror=()=>{e.onError(n.status)},n.onreadystatechange=this.onStateChange.bind(this,r),n.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,n.send(null),r}onProgress(e,n){var i;const r=this.pendingRequests[e];r&&((i=r.onProgress)==null||i.call(r,n))}onStateChange(e,n){const r=this.pendingRequests[e];if(!r)return;const i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){r.onError(i.status);return}const s=i.status||$I;if(!(s===$I&&r.expectedStatus===UI)&&s!==r.expectedStatus){r.onError(i.status);return}const o=Uue(i);if(s===UI){const l=i.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?r.onDone({begin:parseInt(c[1],10),chunk:o}):(Te('Missing or invalid "Content-Range" header.'),r.onError(0))}else o?r.onDone({begin:0,chunk:o}):r.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const n=this.pendingRequests[e].xhr;delete this.pendingRequests[e],n.abort()}}class Hue{constructor(e){this._source=e,this._manager=new zue(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const n=this._rangeRequestReaders.indexOf(e);n>=0&&this._rangeRequestReaders.splice(n,1)}getFullReader(){return He(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Wue(this._manager,this._source),this._fullRequestReader}getRangeReader(e,n){const r=new Gue(this._manager,e,n);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class Wue{constructor(e,n){this._manager=e,this._url=n.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,n=this._manager.getRequestXhr(e);this._manager._responseOrigin=YT(n.responseURL);const r=n.getAllResponseHeaders(),i=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[l,...c]=o.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:a}=pG({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=mG(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=q_(e,this._url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var n;(n=this.onProgress)==null||n.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Gue{constructor(e,n,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:n,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var n;const e=YT((n=this._manager.getRequestXhr(this._requestId))==null?void 0:n.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const n=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=q_(e,this._url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var n;this.isStreamingSupported||(n=this.onProgress)==null||n.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Kue=/^[a-z][a-z0-9\-+.]+:/i;function que(t){if(Kue.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}class Xue{constructor(e){this.source=e,this.url=que(e.url),He(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return He(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Yue(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const r=new Que(this,e,n);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class Yue{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=e.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=q_(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new yh("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Que{constructor(e,n,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:n,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Sv=Symbol("INITIAL_DATA");var Ki,Fw,RO;class bG{constructor(){k(this,Fw);k(this,Ki,Object.create(null))}get(e,n=null){if(n){const i=D(this,Fw,RO).call(this,e);return i.promise.then(()=>n(i.data)),null}const r=h(this,Ki)[e];if(!r||r.data===Sv)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const n=h(this,Ki)[e];return!!n&&n.data!==Sv}delete(e){const n=h(this,Ki)[e];return!n||n.data===Sv?!1:(delete h(this,Ki)[e],!0)}resolve(e,n=null){const r=D(this,Fw,RO).call(this,e);r.data=n,r.resolve()}clear(){var e;for(const n in h(this,Ki)){const{data:r}=h(this,Ki)[n];(e=r==null?void 0:r.bitmap)==null||e.close()}E(this,Ki,Object.create(null))}*[Symbol.iterator](){for(const e in h(this,Ki)){const{data:n}=h(this,Ki)[e];n!==Sv&&(yield[e,n])}}}Ki=new WeakMap,Fw=new WeakSet,RO=function(e){var n;return(n=h(this,Ki))[e]||(n[e]={...Promise.withResolvers(),data:Sv})};const Jue=1e5,C4=30;var uz,Su,Si,Vw,Bw,Xd,Pl,$w,Uw,Yd,gg,yg,Tu,vg,zw,bg,Qd,Hw,Ww,wg,Jd,Gw,Pu,_g,Ec,wG,_G,OO,bs,vE,DO,xG,AG;const kn=class kn{constructor({textContentSource:e,container:n,viewport:r}){k(this,Ec);k(this,Su,Promise.withResolvers());k(this,Si,null);k(this,Vw,!1);k(this,Bw,!!((uz=globalThis.FontInspector)!=null&&uz.enabled));k(this,Xd,null);k(this,Pl,null);k(this,$w,0);k(this,Uw,0);k(this,Yd,null);k(this,gg,null);k(this,yg,0);k(this,Tu,0);k(this,vg,Object.create(null));k(this,zw,[]);k(this,bg,null);k(this,Qd,[]);k(this,Hw,new WeakMap);k(this,Ww,null);var l;if(e instanceof ReadableStream)E(this,bg,e);else if(typeof e=="object")E(this,bg,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');E(this,Si,E(this,gg,n)),E(this,Tu,r.scale*Wo.pixelRatio),E(this,yg,r.rotation),E(this,Pl,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:s,pageX:a,pageY:o}=r.rawDims;E(this,Ww,[1,0,0,-1,-a,o+s]),E(this,Uw,i),E(this,$w,s),D(l=kn,bs,xG).call(l),qf(n,r),h(this,Su).promise.finally(()=>{h(kn,_g).delete(this),E(this,Pl,null),E(this,vg,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:n}=Pr.platform;return Pe(this,"fontFamilyMap",new Map([["sans-serif",`${e&&n?"Calibri, ":""}sans-serif`],["monospace",`${e&&n?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{h(this,Yd).read().then(({value:n,done:r})=>{if(r){h(this,Su).resolve();return}h(this,Xd)??E(this,Xd,n.lang),Object.assign(h(this,vg),n.styles),D(this,Ec,wG).call(this,n.items),e()},h(this,Su).reject)};return E(this,Yd,h(this,bg).getReader()),h(kn,_g).add(this),e(),h(this,Su).promise}update({viewport:e,onBefore:n=null}){var s;const r=e.scale*Wo.pixelRatio,i=e.rotation;if(i!==h(this,yg)&&(n==null||n(),E(this,yg,i),qf(h(this,gg),{rotation:i})),r!==h(this,Tu)){n==null||n(),E(this,Tu,r);const a={div:null,properties:null,ctx:D(s=kn,bs,vE).call(s,h(this,Xd))};for(const o of h(this,Qd))a.properties=h(this,Hw).get(o),a.div=o,D(this,Ec,OO).call(this,a)}}cancel(){var n;const e=new yh("TextLayer task cancelled.");(n=h(this,Yd))==null||n.cancel(e).catch(()=>{}),E(this,Yd,null),h(this,Su).reject(e)}get textDivs(){return h(this,Qd)}get textContentItemsStr(){return h(this,zw)}static cleanup(){if(!(h(this,_g).size>0)){h(this,wg).clear();for(const{canvas:e}of h(this,Jd).values())e.remove();h(this,Jd).clear()}}};Su=new WeakMap,Si=new WeakMap,Vw=new WeakMap,Bw=new WeakMap,Xd=new WeakMap,Pl=new WeakMap,$w=new WeakMap,Uw=new WeakMap,Yd=new WeakMap,gg=new WeakMap,yg=new WeakMap,Tu=new WeakMap,vg=new WeakMap,zw=new WeakMap,bg=new WeakMap,Qd=new WeakMap,Hw=new WeakMap,Ww=new WeakMap,wg=new WeakMap,Jd=new WeakMap,Gw=new WeakMap,Pu=new WeakMap,_g=new WeakMap,Ec=new WeakSet,wG=function(e){var i,s;if(h(this,Vw))return;(s=h(this,Pl)).ctx??(s.ctx=D(i=kn,bs,vE).call(i,h(this,Xd)));const n=h(this,Qd),r=h(this,zw);for(const a of e){if(n.length>Jue){Te("Ignoring additional textDivs for performance reasons."),E(this,Vw,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=h(this,Si);E(this,Si,document.createElement("span")),h(this,Si).classList.add("markedContent"),a.id&&h(this,Si).setAttribute("id",`${a.id}`),o.append(h(this,Si))}else a.type==="endMarkedContent"&&E(this,Si,h(this,Si).parentNode);continue}r.push(a.str),D(this,Ec,_G).call(this,a)}},_G=function(e){var y;const n=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};h(this,Qd).push(n);const i=ue.transform(h(this,Ww),e.transform);let s=Math.atan2(i[1],i[0]);const a=h(this,vg)[e.fontName];a.vertical&&(s+=Math.PI/2);let o=h(this,Bw)&&a.fontSubstitution||a.fontFamily;o=kn.fontFamilyMap.get(o)||o;const l=Math.hypot(i[2],i[3]),c=l*D(y=kn,bs,AG).call(y,o,a,h(this,Xd));let u,d;s===0?(u=i[4],d=i[5]-c):(u=i[4]+c*Math.sin(s),d=i[5]-c*Math.cos(s));const f="calc(var(--total-scale-factor) *",p=n.style;h(this,Si)===h(this,gg)?(p.left=`${(100*u/h(this,Uw)).toFixed(2)}%`,p.top=`${(100*d/h(this,$w)).toFixed(2)}%`):(p.left=`${f}${u.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(h(kn,Pu)*l).toFixed(2)}px)`,p.fontFamily=o,r.fontSize=l,n.setAttribute("role","presentation"),n.textContent=e.str,n.dir=e.dir,h(this,Bw)&&(n.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),s!==0&&(r.angle=s*(180/Math.PI));let g=!1;if(e.str.length>1)g=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const v=Math.abs(e.transform[0]),b=Math.abs(e.transform[3]);v!==b&&Math.max(v,b)/Math.min(v,b)>1.5&&(g=!0)}if(g&&(r.canvasWidth=a.vertical?e.height:e.width),h(this,Hw).set(n,r),h(this,Pl).div=n,h(this,Pl).properties=r,D(this,Ec,OO).call(this,h(this,Pl)),r.hasText&&h(this,Si).append(n),r.hasEOL){const v=document.createElement("br");v.setAttribute("role","presentation"),h(this,Si).append(v)}},OO=function(e){var o;const{div:n,properties:r,ctx:i}=e,{style:s}=n;let a="";if(h(kn,Pu)>1&&(a=`scale(${1/h(kn,Pu)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:l}=s,{canvasWidth:c,fontSize:u}=r;D(o=kn,bs,DO).call(o,i,u*h(this,Tu),l);const{width:d}=i.measureText(n.textContent);d>0&&(a=`scaleX(${c*h(this,Tu)/d}) ${a}`)}r.angle!==0&&(a=`rotate(${r.angle}deg) ${a}`),a.length>0&&(s.transform=a)},bs=new WeakSet,vE=function(e=null){let n=h(this,Jd).get(e||(e=""));if(!n){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),n=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),h(this,Jd).set(e,n),h(this,Gw).set(n,{size:0,family:""})}return n},DO=function(e,n,r){const i=h(this,Gw).get(e);n===i.size&&r===i.family||(e.font=`${n}px ${r}`,i.size=n,i.family=r)},xG=function(){if(h(this,Pu)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),E(this,Pu,e.getBoundingClientRect().height),e.remove()},AG=function(e,n,r){const i=h(this,wg).get(e);if(i)return i;const s=D(this,bs,vE).call(this,r);s.canvas.width=s.canvas.height=C4,D(this,bs,DO).call(this,s,C4,e);const a=s.measureText(""),o=a.fontBoundingBoxAscent,l=Math.abs(a.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let c=.8;return o?c=o/(o+l):(Pr.platform.isFirefox&&Te("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),n.ascent?c=n.ascent:n.descent&&(c=1+n.descent)),h(this,wg).set(e,c),c},k(kn,bs),k(kn,wg,new Map),k(kn,Jd,new Map),k(kn,Gw,new WeakMap),k(kn,Pu,null),k(kn,_g,new Set);let mb=kn;const Zue=100;function EG(t={}){typeof t=="string"||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e=new MO,{docId:n}=e,r=t.url?aue(t.url):null,i=t.data?oue(t.data):null,s=t.httpHeaders||null,a=t.withCredentials===!0,o=t.password??null,l=t.range instanceof SG?t.range:null,c=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:2**16;let u=t.worker instanceof gb?t.worker:null;const d=t.verbosity,f=typeof t.docBaseUrl=="string"&&!XT(t.docBaseUrl)?t.docBaseUrl:null,p=hA(t.cMapUrl),g=t.cMapPacked!==!1,y=t.CMapReaderFactory||(ai?mue:p4),v=hA(t.iccUrl),b=hA(t.standardFontDataUrl),_=t.StandardFontDataFactory||(ai?gue:m4),w=hA(t.wasmUrl),T=t.WasmFactory||(ai?yue:g4),P=t.stopAtErrors!==!0,O=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,C=t.isEvalSupported!==!1,I=typeof t.isOffscreenCanvasSupported=="boolean"?t.isOffscreenCanvasSupported:!ai,M=typeof t.isImageDecoderSupported=="boolean"?t.isImageDecoderSupported:!ai&&(Pr.platform.isFirefox||!globalThis.chrome),L=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,N=typeof t.disableFontFace=="boolean"?t.disableFontFace:ai,F=t.fontExtraProperties===!0,j=t.enableXfa===!0,K=t.ownerDocument||globalThis.document,te=t.disableRange===!0,Z=t.disableStream===!0,G=t.disableAutoFetch===!0,U=t.pdfBug===!0,H=t.CanvasFactory||(ai?pue:hue),re=t.FilterFactory||(ai?fue:due),ve=t.enableHWA===!0,de=t.useWasm!==!1,xe=l?l.length:t.length??NaN,je=typeof t.useSystemFonts=="boolean"?t.useSystemFonts:!ai&&!N,dt=typeof t.useWorkerFetch=="boolean"?t.useWorkerFetch:!!(y===p4&&_===m4&&T===g4&&p&&b&&w&&$v(p,document.baseURI)&&$v(b,document.baseURI)&&$v(w,document.baseURI)),ft=null;Mce(d);const Ee={canvasFactory:new H({ownerDocument:K,enableHWA:ve}),filterFactory:new re({docId:n,ownerDocument:K}),cMapReaderFactory:dt?null:new y({baseUrl:p,isCompressed:g}),standardFontDataFactory:dt?null:new _({baseUrl:b}),wasmFactory:dt?null:new T({baseUrl:w})};u||(u=gb.create({verbosity:d,port:ko.workerPort}),e._worker=u);const ha={docId:n,apiVersion:"5.4.449",data:i,password:o,disableAutoFetch:G,rangeChunkSize:c,length:xe,docBaseUrl:f,enableXfa:j,evaluatorOptions:{maxImageSize:O,disableFontFace:N,ignoreErrors:P,isEvalSupported:C,isOffscreenCanvasSupported:I,isImageDecoderSupported:M,canvasMaxAreaInBytes:L,fontExtraProperties:F,useSystemFonts:je,useWasm:de,useWorkerFetch:dt,cMapUrl:p,iccUrl:v,standardFontDataUrl:b,wasmUrl:w}},X={ownerDocument:K,pdfBug:U,styleElement:ft,loadingParams:{disableAutoFetch:G,enableXfa:j}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Se=u.messageHandler.sendWithPromise("GetDocRequest",ha,i?[i.buffer]:null);let Re;if(l)Re=new Nue(l,{disableRange:te,disableStream:Z});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");const Q=$v(r)?Vue:ai?Xue:Hue;Re=new Q({url:r,length:xe,httpHeaders:s,withCredentials:a,rangeChunkSize:c,disableRange:te,disableStream:Z})}return Se.then(Q=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const on=new Xv(n,Q,u.port),Ye=new nhe(on,e,Re,X,Ee,ve);e._transport=Ye,on.send("Ready",null)})}).catch(e._capability.reject),e}var mT;const gT=class gT{constructor(){Y(this,"_capability",Promise.withResolvers());Y(this,"_transport",null);Y(this,"_worker",null);Y(this,"docId",`d${In(gT,mT)._++}`);Y(this,"destroyed",!1);Y(this,"onPassword",null);Y(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,n,r,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((n=this._transport)==null?void 0:n.destroy())}catch(s){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,s}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};mT=new WeakMap,k(gT,mT,0);let MO=gT;var Zd,Kw,qw,Xw,Yw;class SG{constructor(e,n,r=!1,i=null){k(this,Zd,Promise.withResolvers());k(this,Kw,[]);k(this,qw,[]);k(this,Xw,[]);k(this,Yw,[]);this.length=e,this.initialData=n,this.progressiveDone=r,this.contentDispositionFilename=i}addRangeListener(e){h(this,Yw).push(e)}addProgressListener(e){h(this,Xw).push(e)}addProgressiveReadListener(e){h(this,qw).push(e)}addProgressiveDoneListener(e){h(this,Kw).push(e)}onDataRange(e,n){for(const r of h(this,Yw))r(e,n)}onDataProgress(e,n){h(this,Zd).promise.then(()=>{for(const r of h(this,Xw))r(e,n)})}onDataProgressiveRead(e){h(this,Zd).promise.then(()=>{for(const n of h(this,qw))n(e)})}onDataProgressiveDone(){h(this,Zd).promise.then(()=>{for(const e of h(this,Kw))e()})}transportReady(){h(this,Zd).resolve()}requestDataRange(e,n){bt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Zd=new WeakMap,Kw=new WeakMap,qw=new WeakMap,Xw=new WeakMap,Yw=new WeakMap;class ehe{constructor(e,n){this._pdfInfo=e,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Pe(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,n){return this._transport.getAnnotationsByType(e,n)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(n)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Cl,ef,e0;class the{constructor(e,n,r,i=!1){k(this,ef);k(this,Cl,!1);this._pageIndex=e,this._pageInfo=n,this._transport=r,this._stats=i?new o4:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new bG,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:n=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:s=!1}={}){return new W_({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:n,offsetX:r,offsetY:i,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,n)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Pe(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:n=e.canvas,viewport:r,intent:i="display",annotationMode:s=Jc.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:d=null,isEditing:f=!1,recordOperations:p=!1,operationsFilter:g=null}){var M,L,N;(M=this._stats)==null||M.time("Overall");const y=this._transport.getRenderingIntent(i,s,d,f),{renderingIntent:v,cacheKey:b}=y;E(this,Cl,!1),l||(l=this._transport.getOptionalContentConfig(v));let _=this._intentStates.get(b);_||(_=Object.create(null),this._intentStates.set(b,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);const w=!!(v&os.PRINT);_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(L=this._stats)==null||L.time("Page Request"),this._pumpOperatorList(y));const T=!!(this._pdfBug&&((N=globalThis.StepperManager)!=null&&N.enabled)),P=!this.recordedBBoxes&&(p||T),O=F=>{var j,K;if(_.renderTasks.delete(C),P){const te=(j=C.gfx)==null?void 0:j.dependencyTracker.take();te&&(C.stepper&&C.stepper.setOperatorBBoxes(te,C.gfx.dependencyTracker.takeDebugMetadata()),p&&(this.recordedBBoxes=te))}w&&E(this,Cl,!0),D(this,ef,e0).call(this),F?(C.capability.reject(F),this._abortOperatorList({intentState:_,reason:F instanceof Error?F:new Error(F)})):C.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(K=globalThis.Stats)!=null&&K.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},C=new NO({callback:O,params:{canvas:n,canvasContext:e,dependencyTracker:P?new bue(n,_.operatorList.length,T):null,viewport:r,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:u,enableHWA:this._transport.enableHWA,operationsFilter:g});(_.renderTasks||(_.renderTasks=new Set)).add(C);const I=C.task;return Promise.all([_.displayReadyCapability.promise,l]).then(([F,j])=>{var K;if(this.destroyed){O();return}if((K=this._stats)==null||K.time("Rendering"),!(j.renderingIntent&v))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");C.initializeGraphics({transparency:F,optionalContentConfig:j}),C.operatorListChanged()}).catch(O),I}getOperatorList({intent:e="display",annotationMode:n=Jc.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){var c;function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(e,n,r,i,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:n===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>pb.textContent(r));const n=this.streamTextContent(e);return new Promise(function(r,i){function s(){a.read().then(function({value:l,done:c}){if(c){r(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),s()},i)}const a=n.getReader(),o={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const r of n.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),E(this,Cl,!1),Promise.all(e)}cleanup(e=!1){E(this,Cl,!0);const n=D(this,ef,e0).call(this);return e&&n&&this._stats&&(this._stats=new o4),n}_startRenderPage(e,n){var i,s;const r=this._intentStates.get(n);r&&((i=this._stats)==null||i.timeEnd("Page Request"),(s=r.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,n){for(let r=0,i=e.length;r<i;r++)n.operatorList.fnArray.push(e.fnArray[r]),n.operatorList.argsArray.push(e.argsArray[r]);n.operatorList.lastChunk=e.lastChunk,n.operatorList.separateAnnots=e.separateAnnots;for(const r of n.renderTasks)r.operatorListChanged();e.lastChunk&&D(this,ef,e0).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:n,annotationStorageSerializable:r,modifiedIds:i}){const{map:s,transfer:a}=r,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:n,annotationStorage:s,modifiedIds:i},a).getReader(),c=this._intentStates.get(n);c.streamReader=l;const u=()=>{l.read().then(({value:d,done:f})=>{if(f){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,c),u())},d=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const f of c.renderTasks)f.operatorListChanged();D(this,ef,e0).call(this)}if(c.displayReadyCapability)c.displayReadyCapability.reject(d);else if(c.opListReadCapability)c.opListReadCapability.reject(d);else throw d}})};u()}_abortOperatorList({intentState:e,reason:n,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(n instanceof C2){let i=Zue;n.extraDelay>0&&n.extraDelay<1e3&&(i+=n.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:n,force:!0})},i);return}}if(e.streamReader.cancel(new yh(n.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,s]of this._intentStates)if(s===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Cl=new WeakMap,ef=new WeakSet,e0=function(){if(!h(this,Cl)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),E(this,Cl,!1),!0};var Cu,Aa,Il,tf,yT,nf,rf,hi,bE,TG,PG,t0,xg,wE;const Mt=class Mt{constructor({name:e=null,port:n=null,verbosity:r=Nce()}={}){k(this,hi);k(this,Cu,Promise.withResolvers());k(this,Aa,null);k(this,Il,null);k(this,tf,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,n){if(h(Mt,rf).has(n))throw new Error("Cannot use more than one PDFWorker per port.");h(Mt,rf).set(n,this),D(this,hi,TG).call(this,n)}else D(this,hi,PG).call(this)}get promise(){return h(this,Cu).promise}get port(){return h(this,Il)}get messageHandler(){return h(this,Aa)}destroy(){var e,n;this.destroyed=!0,(e=h(this,tf))==null||e.terminate(),E(this,tf,null),h(Mt,rf).delete(h(this,Il)),E(this,Il,null),(n=h(this,Aa))==null||n.destroy(),E(this,Aa,null)}static create(e){const n=h(this,rf).get(e==null?void 0:e.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new Mt(e)}static get workerSrc(){if(ko.workerSrc)return ko.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Pe(this,"_setupFakeWorkerGlobal",(async()=>h(this,xg,wE)?h(this,xg,wE):(await import(this.workerSrc)).WorkerMessageHandler)())}};Cu=new WeakMap,Aa=new WeakMap,Il=new WeakMap,tf=new WeakMap,yT=new WeakMap,nf=new WeakMap,rf=new WeakMap,hi=new WeakSet,bE=function(){h(this,Cu).resolve(),h(this,Aa).send("configure",{verbosity:this.verbosity})},TG=function(e){E(this,Il,e),E(this,Aa,new Xv("main","worker",e)),h(this,Aa).on("ready",()=>{}),D(this,hi,bE).call(this)},PG=function(){if(h(Mt,nf)||h(Mt,xg,wE)){D(this,hi,t0).call(this);return}let{workerSrc:e}=Mt;try{Mt._isSameOrigin(window.location,e)||(e=Mt._createCDNWrapper(new URL(e,window.location).href));const n=new Worker(e,{type:"module"}),r=new Xv("main","worker",n),i=()=>{s.abort(),r.destroy(),n.terminate(),this.destroyed?h(this,Cu).reject(new Error("Worker was destroyed")):D(this,hi,t0).call(this)},s=new AbortController;n.addEventListener("error",()=>{h(this,tf)||i()},{signal:s.signal}),r.on("test",o=>{if(s.abort(),this.destroyed||!o){i();return}E(this,Aa,r),E(this,Il,n),E(this,tf,n),D(this,hi,bE).call(this)}),r.on("ready",o=>{if(s.abort(),this.destroyed){i();return}try{a()}catch{D(this,hi,t0).call(this)}});const a=()=>{const o=new Uint8Array;r.send("test",o,[o.buffer])};a();return}catch{qT("The worker has been disabled.")}D(this,hi,t0).call(this)},t0=function(){h(Mt,nf)||(Te("Setting up fake worker."),E(Mt,nf,!0)),Mt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){h(this,Cu).reject(new Error("Worker was destroyed"));return}const n=new uue;E(this,Il,n);const r=`fake${In(Mt,yT)._++}`,i=new Xv(r+"_worker",r,n);e.setup(i,n),E(this,Aa,new Xv(r,r+"_worker",n)),D(this,hi,bE).call(this)}).catch(e=>{h(this,Cu).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},xg=new WeakSet,wE=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},k(Mt,xg),k(Mt,yT,0),k(Mt,nf,!1),k(Mt,rf,new WeakMap),ai&&(E(Mt,nf,!0),ko.workerSrc||(ko.workerSrc="./pdf.worker.mjs")),Mt._isSameOrigin=(e,n)=>{const r=URL.parse(e);if(!(r!=null&&r.origin)||r.origin==="null")return!1;const i=new URL(n,r);return r.origin===i.origin},Mt._createCDNWrapper=e=>{const n=`await import("${e}");`;return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},Mt.fromPort=e=>{if(Kce("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Mt.create(e)};let gb=Mt;var kl,vo,Ag,Eg,Rl,sf,n0;class nhe{constructor(e,n,r,i,s,a){k(this,sf);k(this,kl,new Map);k(this,vo,new Map);k(this,Ag,new Map);k(this,Eg,new Map);k(this,Rl,null);this.messageHandler=e,this.loadingTask=n,this.commonObjs=new bG,this.fontLoader=new iue({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}get annotationStorage(){return Pe(this,"annotationStorage",new k2)}getRenderingIntent(e,n=Jc.ENABLE,r=null,i=!1,s=!1){let a=os.DISPLAY,o=yO;switch(e){case"any":a=os.ANY;break;case"display":break;case"print":a=os.PRINT;break;default:Te(`getRenderingIntent - invalid intent: ${e}`)}const l=a&os.PRINT&&r instanceof rG?r:this.annotationStorage;switch(n){case Jc.DISABLE:a+=os.ANNOTATIONS_DISABLE;break;case Jc.ENABLE:break;case Jc.ENABLE_FORMS:a+=os.ANNOTATIONS_FORMS;break;case Jc.ENABLE_STORAGE:a+=os.ANNOTATIONS_STORAGE,o=l.serializable;break;default:Te(`getRenderingIntent - invalid annotationMode: ${n}`)}i&&(a+=os.IS_EDITING),s&&(a+=os.OPLIST);const{ids:c,hash:u}=l.modifiedIds,d=[a,o.hash,u];return{renderingIntent:a,cacheKey:d.join("_"),annotationStorageSerializable:o,modifiedIds:c}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=h(this,Rl))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of h(this,vo).values())e.push(i._destroy());h(this,vo).clear(),h(this,Ag).clear(),h(this,Eg).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(()=>{var i,s;this.commonObjs.clear(),this.fontLoader.clear(),h(this,kl).clear(),this.filterFactory.destroy(),mb.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new yh("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:n}=this;e.on("GetReader",(r,i)=>{He(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},i.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){i.close();return}He(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this._fullReader.cancel(s),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async r=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:s,contentLength:a}=this._fullReader;return(!i||!s)&&(this._lastProgress&&((o=n.onProgress)==null||o.call(n,this._lastProgress)),this._fullReader.onProgress=l=>{var c;(c=n.onProgress)==null||c.call(n,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:s,contentLength:a}}),e.on("GetRangeReader",(r,i)=>{He(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(r.begin,r.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:a,done:o}){if(o){i.close();return}He(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{s.cancel(a),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,n._capability.resolve(new ehe(r,this))}),e.on("DocException",r=>{n._capability.reject(bi(r))}),e.on("PasswordRequest",r=>{E(this,Rl,Promise.withResolvers());try{if(!n.onPassword)throw bi(r);const i=s=>{s instanceof Error?h(this,Rl).reject(s):h(this,Rl).resolve({password:s})};n.onPassword(i,r.code)}catch(i){h(this,Rl).reject(i)}return h(this,Rl).promise}),e.on("DataLoaded",r=>{var i;(i=n.onProgress)==null||i.call(n,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;h(this,vo).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,i,s])=>{var a;if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":if("error"in s){const f=s.error;Te(`Error during font loading: ${f}`),this.commonObjs.resolve(r,f);break}const o=new vO(s),l=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(f,p)=>globalThis.FontInspector.fontAdded(f,p):null,c=new sue(o,l,s.extra,s.charProcOperatorList);this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!c.fontExtraProperties&&c.data&&c.clearData(),this.commonObjs.resolve(r,c)});break;case"CopyLocalImage":const{imageRef:u}=s;He(u,"The imageRef must be defined.");for(const f of h(this,vo).values())for(const[,p]of f.objs)if((p==null?void 0:p.ref)===u)return p.dataLen?(this.commonObjs.resolve(r,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":this.commonObjs.resolve(r,s);break;case"Pattern":const d=new bO(s);this.commonObjs.resolve(r,d.getIR());break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([r,i,s,a])=>{var l;if(this.destroyed)return;const o=h(this,vo).get(i);if(!o.objs.has(r)){if(o._intentStates.size===0){(l=a==null?void 0:a.bitmap)==null||l.close();return}switch(s){case"Image":case"Pattern":o.objs.resolve(r,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",r=>{var i;this.destroyed||(i=n.onProgress)==null||i.call(n,{loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[r.type];if(!i)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&Te("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},n).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=e-1,r=h(this,Ag).get(n);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&h(this,Eg).set(s.refStr,e);const a=new the(n,s,this,this._params.pdfBug);return h(this,vo).set(n,a),a});return h(this,Ag).set(n,i),i}getPageIndex(e){return wO(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:n})}getFieldObjects(){return D(this,sf,n0).call(this,"GetFieldObjects")}hasJSActions(){return D(this,sf,n0).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,n){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:n})}getDocJSActions(){return D(this,sf,n0).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return D(this,sf,n0).call(this,"GetOptionalContentConfig").then(n=>new Mue(n,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",n=h(this,kl).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,null).then(i=>{var s,a;return{info:i[0],metadata:i[1]?new Oue(i[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null,hasStructTree:i[2]}});return h(this,kl).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of h(this,vo).values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),h(this,kl).clear(),this.filterFactory.destroy(!0),mb.cleanup()}}cachedPageNumber(e){if(!wO(e))return null;const n=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return h(this,Eg).get(n)??null}}kl=new WeakMap,vo=new WeakMap,Ag=new WeakMap,Eg=new WeakMap,Rl=new WeakMap,sf=new WeakSet,n0=function(e,n=null){const r=h(this,kl).get(e);if(r)return r;const i=this.messageHandler.sendWithPromise(e,n);return h(this,kl).set(e,i),i};var Iu;class rhe{constructor(e){k(this,Iu,null);Y(this,"onContinue",null);Y(this,"onError",null);E(this,Iu,e)}get promise(){return h(this,Iu).capability.promise}cancel(e=0){h(this,Iu).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=h(this,Iu).operatorList;if(!e)return!1;const{annotationCanvasMap:n}=h(this,Iu);return e.form||e.canvas&&(n==null?void 0:n.size)>0}}Iu=new WeakMap;var ku,af;const od=class od{constructor({callback:e,params:n,objs:r,commonObjs:i,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:f=null,enableHWA:p=!1,operationsFilter:g=null}){k(this,ku,null);this.callback=e,this.params=n,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new rhe(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvas,this._canvasContext=n.canvas?null:n.canvasContext,this._enableHWA=p,this._dependencyTracker=n.dependencyTracker,this._operationsFilter=g}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:n}){var l,c;if(this.cancelled)return;if(this._canvas){if(h(od,af).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");h(od,af).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:i,background:s,dependencyTracker:a}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Am(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:i,viewport:r,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,n=0){var r,i,s;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),h(this,ku)&&(window.cancelAnimationFrame(h(this,ku)),E(this,ku,null)),h(od,af).delete(this._canvas),e||(e=new C2(`Rendering cancelled, page ${this._pageIndex+1}`,n)),this.callback(e),(s=(i=this.task).onError)==null||s.call(i,e)}operatorListChanged(){var e,n;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(n=this.stepper)==null||n.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?E(this,ku,window.requestAnimationFrame(()=>{E(this,ku,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),h(od,af).delete(this._canvas),this.callback())))}};ku=new WeakMap,af=new WeakMap,k(od,af,new WeakSet);let NO=od;const ihe="5.4.449",she="f44e5f0e6";var qi,of,Sg,Dn,Qw,Tg,Ol,Jw,Ru,Ea,Zw,ht,LO,jO,FO,Zh,CG,Uc;const wi=class wi{constructor({editor:e=null,uiManager:n=null}){k(this,ht);k(this,qi,null);k(this,of,null);k(this,Sg);k(this,Dn,null);k(this,Qw,!1);k(this,Tg,!1);k(this,Ol,null);k(this,Jw);k(this,Ru,null);k(this,Ea,null);var r,i;e?(E(this,Tg,!1),E(this,Ol,e)):E(this,Tg,!0),E(this,Ea,(e==null?void 0:e._uiManager)||n),E(this,Jw,h(this,Ea)._eventBus),E(this,Sg,((r=e==null?void 0:e.color)==null?void 0:r.toUpperCase())||((i=h(this,Ea))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),h(wi,Zw)||E(wi,Zw,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Pe(this,"_keyboardManager",new K_([[["Escape","mac+Escape"],wi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],wi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],wi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],wi.prototype._moveToPrevious],[["Home","mac+Home"],wi.prototype._moveToBeginning],[["End","mac+End"],wi.prototype._moveToEnd]]))}renderButton(){const e=E(this,qi,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",h(this,Ol)&&(e.ariaControls=`${h(this,Ol).id}_colorpicker_dropdown`);const n=h(this,Ea)._signal;e.addEventListener("click",D(this,ht,Zh).bind(this),{signal:n}),e.addEventListener("keydown",D(this,ht,FO).bind(this),{signal:n});const r=E(this,of,document.createElement("span"));return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=h(this,Sg),e.append(r),e}renderMainDropdown(){const e=E(this,Dn,D(this,ht,LO).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===h(this,qi)){D(this,ht,Zh).call(this,e);return}const n=e.target.getAttribute("data-color");n&&D(this,ht,jO).call(this,n,e)}_moveToNext(e){var n,r;if(!h(this,ht,Uc)){D(this,ht,Zh).call(this,e);return}if(e.target===h(this,qi)){(n=h(this,Dn).firstElementChild)==null||n.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var n,r;if(e.target===((n=h(this,Dn))==null?void 0:n.firstElementChild)||e.target===h(this,qi)){h(this,ht,Uc)&&this._hideDropdownFromKeyboard();return}h(this,ht,Uc)||D(this,ht,Zh).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var n;if(!h(this,ht,Uc)){D(this,ht,Zh).call(this,e);return}(n=h(this,Dn).firstElementChild)==null||n.focus()}_moveToEnd(e){var n;if(!h(this,ht,Uc)){D(this,ht,Zh).call(this,e);return}(n=h(this,Dn).lastElementChild)==null||n.focus()}hideDropdown(){var e,n;(e=h(this,Dn))==null||e.classList.add("hidden"),h(this,qi).ariaExpanded="false",(n=h(this,Ru))==null||n.abort(),E(this,Ru,null)}_hideDropdownFromKeyboard(){var e;if(!h(this,Tg)){if(!h(this,ht,Uc)){(e=h(this,Ol))==null||e.unselect();return}this.hideDropdown(),h(this,qi).focus({preventScroll:!0,focusVisible:h(this,Qw)})}}updateColor(e){if(h(this,of)&&(h(this,of).style.backgroundColor=e),!h(this,Dn))return;const n=h(this,Ea).highlightColors.values();for(const r of h(this,Dn).children)r.ariaSelected=n.next().value===e.toUpperCase()}destroy(){var e,n;(e=h(this,qi))==null||e.remove(),E(this,qi,null),E(this,of,null),(n=h(this,Dn))==null||n.remove(),E(this,Dn,null)}};qi=new WeakMap,of=new WeakMap,Sg=new WeakMap,Dn=new WeakMap,Qw=new WeakMap,Tg=new WeakMap,Ol=new WeakMap,Jw=new WeakMap,Ru=new WeakMap,Ea=new WeakMap,Zw=new WeakMap,ht=new WeakSet,LO=function(){const e=document.createElement("div"),n=h(this,Ea)._signal;e.addEventListener("contextmenu",aa,{signal:n}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),h(this,Ol)&&(e.id=`${h(this,Ol).id}_colorpicker_dropdown`);for(const[r,i]of h(this,Ea).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=r,s.setAttribute("data-l10n-id",h(wi,Zw)[r]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=i,s.ariaSelected=i===h(this,Sg),s.addEventListener("click",D(this,ht,jO).bind(this,i),{signal:n}),e.append(s)}return e.addEventListener("keydown",D(this,ht,FO).bind(this),{signal:n}),e},jO=function(e,n){n.stopPropagation(),h(this,Jw).dispatch("switchannotationeditorparams",{source:this,type:ze.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},FO=function(e){wi._keyboardManager.exec(this,e)},Zh=function(e){if(h(this,ht,Uc)){this.hideDropdown();return}if(E(this,Qw,e.detail===0),h(this,Ru)||(E(this,Ru,new AbortController),window.addEventListener("pointerdown",D(this,ht,CG).bind(this),{signal:h(this,Ea).combinedSignal(h(this,Ru))})),h(this,qi).ariaExpanded="true",h(this,Dn)){h(this,Dn).classList.remove("hidden");return}const n=E(this,Dn,D(this,ht,LO).call(this));h(this,qi).append(n)},CG=function(e){var n;(n=h(this,Dn))!=null&&n.contains(e.target)||this.hideDropdown()},Uc=function(){return h(this,Dn)&&!h(this,Dn).classList.contains("hidden")},k(wi,Zw,null);let BS=wi;var bo,e_,Pg,t_;const ld=class ld{constructor(e){k(this,bo,null);k(this,e_,null);k(this,Pg,null);E(this,e_,e),E(this,Pg,e._uiManager),h(ld,t_)||E(ld,t_,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(h(this,bo))return h(this,bo);const{editorType:e,colorType:n,color:r}=h(this,e_),i=E(this,bo,document.createElement("input"));return i.type="color",i.value=r||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",h(ld,t_)[e]),i.addEventListener("input",()=>{h(this,Pg).updateParams(n,i.value)},{signal:h(this,Pg)._signal}),i}update(e){h(this,bo)&&(h(this,bo).value=e)}destroy(){var e;(e=h(this,bo))==null||e.remove(),E(this,bo,null)}hideDropdown(){}};bo=new WeakMap,e_=new WeakMap,Pg=new WeakMap,t_=new WeakMap,k(ld,t_,null);let $S=ld;function I4(t){return Math.floor(Math.max(0,Math.min(1,t))*255).toString(16).padStart(2,"0")}function Tv(t){return Math.max(0,Math.min(255,255*t))}class k4{static CMYK_G([e,n,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*n+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Tv(e),[e,e,e]}static G_HTML([e]){const n=I4(e);return`#${n}${n}${n}`}static RGB_G([e,n,r]){return["G",.3*e+.59*n+.11*r]}static RGB_rgb(e){return e.map(Tv)}static RGB_HTML(e){return`#${e.map(I4).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,n,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,n+i)]}static CMYK_rgb([e,n,r,i]){return[Tv(1-Math.min(1,e+i)),Tv(1-Math.min(1,r+i)),Tv(1-Math.min(1,n+i))]}static CMYK_HTML(e){const n=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(n)}static RGB_CMYK([e,n,r]){const i=1-e,s=1-n,a=1-r,o=Math.min(i,s,a);return["CMYK",i,s,a,o]}}class ahe{create(e,n,r=!1){if(e<=0||n<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${n}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${n}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){bt("Abstract method `_createSVG` called.")}}class US extends ahe{_createSVG(e){return document.createElementNS(nl,e)}}const ohe=9,Yf=new WeakSet,lhe=new Date().getTimezoneOffset()*60*1e3;class zI{static create(e){switch(e.data.annotationType){case yn.LINK:return new D2(e);case yn.TEXT:return new uhe(e);case yn.WIDGET:switch(e.data.fieldType){case"Tx":return new hhe(e);case"Btn":return e.data.radioButton?new RG(e):e.data.checkBox?new fhe(e):new phe(e);case"Ch":return new mhe(e);case"Sig":return new dhe(e)}return new fp(e);case yn.POPUP:return new BO(e);case yn.FREETEXT:return new LG(e);case yn.LINE:return new yhe(e);case yn.SQUARE:return new vhe(e);case yn.CIRCLE:return new bhe(e);case yn.POLYLINE:return new jG(e);case yn.CARET:return new _he(e);case yn.INK:return new M2(e);case yn.POLYGON:return new whe(e);case yn.HIGHLIGHT:return new FG(e);case yn.UNDERLINE:return new xhe(e);case yn.SQUIGGLY:return new Ahe(e);case yn.STRIKEOUT:return new Ehe(e);case yn.STAMP:return new VG(e);case yn.FILEATTACHMENT:return new She(e);default:return new Kt(e)}}}var lf,Cg,zs,n_,VO;const OF=class OF{constructor(e,{isRenderable:n=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){k(this,n_);k(this,lf,null);k(this,Cg,!1);k(this,zs,null);this.isRenderable=n,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,n&&(this.contentElement=this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:n}){return!!(e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return OF._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var r;const{data:e}=this,n=(r=this.annotationStorage)==null?void 0:r.getEditor(e.id);return n?n.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var o;const e=(o=this.annotationStorage)==null?void 0:o.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:n,inkLists:r,rect:i}=this.data;let s=-1/0,a=-1/0;if((n==null?void 0:n.length)>=8){for(let l=0;l<n.length;l+=8)n[l+1]>a?(a=n[l+1],s=n[l+2]):n[l+1]===a&&(s=Math.max(s,n[l+2]));return[s,a]}if((r==null?void 0:r.length)>=1){for(const l of r)for(let c=0,u=l.length;c<u;c+=2)l[c+1]>a?(a=l[c+1],s=l[c]):l[c+1]===a&&(s=Math.max(s,l[c]));if(s!==1/0)return[s,a]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:n},viewport:{rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:a}}}=this.parent;return e[1]=n[3]-e[1]+n[1],e[0]=100*(e[0]-s)/r,e[1]=100*(e[1]-a)/i,e}get commentText(){var n,r,i;const{data:e}=this;return((r=(n=this.annotationStorage.getRawValue(`${db}${e.id}`))==null?void 0:n.popup)==null?void 0:r.contents)||((i=e.contentsObj)==null?void 0:i.str)||""}set commentText(e){const{data:n}=this,r={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(n.id,{popup:r})||this.annotationStorage.setValue(`${db}${n.id}`,{id:n.id,annotationType:n.annotationType,pageIndex:this.parent.page._pageIndex,popup:r,popupRef:n.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,n;(n=((e=h(this,zs))==null?void 0:e.popup)||this.popup)==null||n.remove(),E(this,zs,this.popup=null)}updateEdited(e){var s;if(!this.container)return;e.rect&&(h(this,lf)||E(this,lf,{rect:this.data.rect.slice(0)}));const{rect:n,popup:r}=e;n&&D(this,n_,VO).call(this,n);let i=((s=h(this,zs))==null?void 0:s.popup)||this.popup;!i&&(r!=null&&r.text)&&(this._createPopup(r),i=h(this,zs).popup),i&&(i.updateEdited(e),r!=null&&r.deleted&&(i.remove(),E(this,zs,null),this.popup=null))}resetEdited(){var e;h(this,lf)&&(D(this,n_,VO).call(this,h(this,lf).rect),(e=h(this,zs))==null||e.popup.resetEdited(),E(this,lf,null))}_createContainer(e){const{data:n,parent:{page:r,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",n.id),!(this instanceof fp)&&!(this instanceof D2)&&(s.tabIndex=0);const{style:a}=s;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,n.alternativeText&&(s.title=n.alternativeText),n.noRotate&&s.classList.add("norotate"),!n.rect||this instanceof BO){const{rotation:y}=n;return!n.hasOwnCanvas&&y!==0&&this.setRotation(y,s),s}const{width:o,height:l}=this;if(!e&&n.borderStyle.width>0){a.borderWidth=`${n.borderStyle.width}px`;const y=n.borderStyle.horizontalCornerRadius,v=n.borderStyle.verticalCornerRadius;if(y>0||v>0){const _=`calc(${y}px * var(--total-scale-factor)) / calc(${v}px * var(--total-scale-factor))`;a.borderRadius=_}else if(this instanceof RG){const _=`calc(${o}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;a.borderRadius=_}switch(n.borderStyle.style){case Rp.SOLID:a.borderStyle="solid";break;case Rp.DASHED:a.borderStyle="dashed";break;case Rp.BEVELED:Te("Unimplemented border style: beveled");break;case Rp.INSET:Te("Unimplemented border style: inset");break;case Rp.UNDERLINE:a.borderBottomStyle="solid";break}const b=n.borderColor||null;b?(E(this,Cg,!0),a.borderColor=ue.makeHexColor(b[0]|0,b[1]|0,b[2]|0)):a.borderWidth=0}const c=ue.normalizeRect([n.rect[0],r.view[3]-n.rect[1]+r.view[1],n.rect[2],r.view[3]-n.rect[3]+r.view[1]]),{pageWidth:u,pageHeight:d,pageX:f,pageY:p}=i.rawDims;a.left=`${100*(c[0]-f)/u}%`,a.top=`${100*(c[1]-p)/d}%`;const{rotation:g}=n;return n.hasOwnCanvas||g===0?(a.width=`${100*o/u}%`,a.height=`${100*l/d}%`):this.setRotation(g,s),s}setRotation(e,n=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims;let{width:s,height:a}=this;e%180!==0&&([s,a]=[a,s]),n.style.width=`${100*s/r}%`,n.style.height=`${100*a/i}%`,n.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(n,r,i)=>{const s=i.detail[n],a=s[0],o=s.slice(1);i.target.style[r]=k4[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[r]:k4[`${a}_rgb`](o)})};return Pe(this,"_commonActions",{display:n=>{const{display:r}=n.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:r}=n.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{e("bgColor","backgroundColor",n)},fillColor:n=>{e("fillColor","backgroundColor",n)},fgColor:n=>{e("fgColor","color",n)},textColor:n=>{e("textColor","color",n)},borderColor:n=>{e("borderColor","borderColor",n)},strokeColor:n=>{e("strokeColor","borderColor",n)},rotation:n=>{const r=n.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,n){const r=this._commonActions;for(const i of Object.keys(n.detail)){const s=e[i]||r[i];s==null||s(n)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const r=this._commonActions;for(const[i,s]of Object.entries(n)){const a=r[i];if(a){const o={detail:{[i]:s},target:e};a(o),delete n[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[n,r,i,s]=this.data.rect.map(y=>Math.fround(y));if(e.length===8){const[y,v,b,_]=e.subarray(2,6);if(i===y&&s===v&&n===b&&r===_)return}const{style:a}=this.container;let o;if(h(this,Cg)){const{borderColor:y,borderWidth:v}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${y}" stroke-width="${v}">`],this.container.classList.add("hasBorder")}const l=i-n,c=s-r,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const f=u.createElement("defs");d.append(f);const p=u.createElement("clipPath"),g=`clippath_${this.data.id}`;p.setAttribute("id",g),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let y=2,v=e.length;y<v;y+=8){const b=e[y],_=e[y+1],w=e[y+2],T=e[y+3],P=u.createElement("rect"),O=(w-n)/l,C=(s-_)/c,I=(b-w)/l,M=(_-T)/c;P.setAttribute("x",O),P.setAttribute("y",C),P.setAttribute("width",I),P.setAttribute("height",M),p.append(P),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${O}" y="${C}" width="${I}" height="${M}"/>`)}h(this,Cg)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(d),this.container.style.clipPath=`url(#${g})`}_createPopup(e=null){const{data:n}=this;let r,i;e?(r={str:e.text},i=e.date):(r=n.contentsObj,i=n.modificationDate),E(this,zs,new BO({data:{color:n.color,titleObj:n.titleObj,modificationDate:i,contentsObj:r,richText:n.richText,parentRect:n.rect,borderStyle:0,id:`popup_${n.id}`,rotation:n.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(h(this,zs)||this.popup||this.data.popupRef)}get extraPopupElement(){return h(this,zs)}render(){bt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,n=null){const r=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:s,id:a,exportValues:o}of i){if(s===-1||a===n)continue;const l=typeof o=="string"?o:null,c=document.querySelector(`[data-element-id="${a}"]`);if(c&&!Yf.has(c)){Te(`_getElementsByName - element not allowed: ${a}`);continue}r.push({id:a,exportValue:l,domElement:c})}return r}for(const i of document.getElementsByName(e)){const{exportValue:s}=i,a=i.getAttribute("data-element-id");a!==n&&Yf.has(i)&&r.push({id:a,exportValue:s,domElement:i})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const n of e)n.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:n,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};lf=new WeakMap,Cg=new WeakMap,zs=new WeakMap,n_=new WeakSet,VO=function(e){const{container:{style:n},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}}}=this;r==null||r.splice(0,4,...e),n.left=`${100*(e[0]-o)/s}%`,n.top=`${100*(a-e[3]+l)/a}%`,i===0?(n.width=`${100*(e[2]-e[0])/s}%`,n.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(i)};let Kt=OF;class che extends Kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var hs,ed,IG,kG;class D2 extends Kt{constructor(n,r=null){super(n,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});k(this,hs);this.isTooltipOnly=n.data.isTooltipOnly}render(){const{data:n,linkService:r}=this,i=document.createElement("a");i.setAttribute("data-element-id",n.id);let s=!1;return n.url?(r.addLinkAttributes(i,n.url,n.newWindow),s=!0):n.action?(this._bindNamedAction(i,n.action,n.overlaidText),s=!0):n.attachment?(D(this,hs,IG).call(this,i,n.attachment,n.overlaidText,n.attachmentDest),s=!0):n.setOCGState?(D(this,hs,kG).call(this,i,n.setOCGState,n.overlaidText),s=!0):n.dest?(this._bindLink(i,n.dest,n.overlaidText),s=!0):(n.actions&&(n.actions.Action||n.actions["Mouse Up"]||n.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,n),s=!0),n.resetForm?(this._bindResetFormAction(i,n.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&(this.contentElement=i,this.container.append(i)),this.container}_bindLink(n,r,i=""){n.href=this.linkService.getDestinationHash(r),n.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&D(this,hs,ed).call(this),i&&(n.title=i)}_bindNamedAction(n,r,i=""){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeNamedAction(r),!1),i&&(n.title=i),D(this,hs,ed).call(this)}_bindJSAction(n,r){n.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(r.actions)){const a=i.get(s);a&&(n[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:s}}),!1})}r.overlaidText&&(n.title=r.overlaidText),n.onclick||(n.onclick=()=>!1),D(this,hs,ed).call(this)}_bindResetFormAction(n,r){const i=n.onclick;if(i||(n.href=this.linkService.getAnchorUrl("")),D(this,hs,ed).call(this),!this._fieldObjects){Te('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(n.onclick=()=>!1);return}n.onclick=()=>{var d;i==null||i();const{fields:s,refs:a,include:o}=r,l=[];if(s.length!==0||a.length!==0){const f=new Set(a);for(const p of s){const g=this._fieldObjects[p]||[];for(const{id:y}of g)f.add(y)}for(const p of Object.values(this._fieldObjects))for(const g of p)f.has(g.id)===o&&l.push(g)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const c=this.annotationStorage,u=[];for(const f of l){const{id:p}=f;switch(u.push(p),f.type){case"text":{const y=f.defaultValue||"";c.setValue(p,{value:y});break}case"checkbox":case"radiobutton":{const y=f.defaultValue===f.exportValues;c.setValue(p,{value:y});break}case"combobox":case"listbox":{const y=f.defaultValue||"";c.setValue(p,{value:y});break}default:continue}const g=document.querySelector(`[data-element-id="${p}"]`);if(g){if(!Yf.has(g)){Te(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}hs=new WeakSet,ed=function(){this.container.setAttribute("data-internal-link","")},IG=function(n,r,i="",s=null){n.href=this.linkService.getAnchorUrl(""),r.description?n.title=r.description:i&&(n.title=i),n.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(r.content,r.filename,s),!1},D(this,hs,ed).call(this)},kG=function(n,r,i=""){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeSetOCGState(r),!1),i&&(n.title=i),D(this,hs,ed).call(this)};class uhe extends Kt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class fp extends Kt{render(){return this.container}showElementAndHideCanvas(e){var n;this.data.hasOwnCanvas&&(((n=e.previousSibling)==null?void 0:n.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Pr.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,n,r,i,s){r.includes("mouse")?e.addEventListener(r,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(r,a=>{var o;if(r==="blur"){if(!n.focused||!a.relatedTarget)return;n.focused=!1}else if(r==="focus"){if(n.focused)return;n.focused=!0}s&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(a)}}))})}_setEventListeners(e,n,r,i){var s,a,o;for(const[l,c]of r)(c==="Action"||(s=this.data.actions)!=null&&s[c])&&((c==="Focus"||c==="Blur")&&(n||(n={focused:!1})),this._setEventListener(e,n,l,c,i),c==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,n,"blur","Blur",null):c==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,n,"focus","Focus",null))}_setBackgroundColor(e){const n=this.data.backgroundColor||null;e.style.backgroundColor=n===null?"transparent":ue.makeHexColor(n[0],n[1],n[2])}_setTextStyle(e){const n=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||ohe,s=e.style;let a;const o=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o),u=Math.round(c/(NI*i))||1,d=c/u;a=Math.min(i,l(d/NI))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(i,l(c/NI))}s.fontSize=`calc(${a}px * var(--total-scale-factor))`,s.color=ue.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(s.textAlign=n[this.data.textAlignment])}_setRequired(e,n){n?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",n)}}class hhe extends fp{constructor(e){const n=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:n})}setPropertyOnSiblings(e,n,r,i){const s=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[n]=r),s.setValue(a.id,{[i]:r})}render(){var i,s;const e=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const a=e.getValue(n,{value:this.data.fieldValue});let o=a.value||"";const l=e.getValue(n,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let c=a.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const u={userValue:o,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=c??o,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",c??o),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),Yf.add(r),this.contentElement=r,r.setAttribute("data-element-id",n),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const{datetimeFormat:d,datetimeType:f,timeStep:p}=this.data,g=!!f&&this.enableScripting;d&&(r.title=d),this._setRequired(r,this.data.required),l&&(r.maxLength=l),r.addEventListener("input",v=>{e.setValue(n,{value:v.target.value}),this.setPropertyOnSiblings(r,"value",v.target.value,"value"),u.formattedValue=null}),r.addEventListener("resetform",v=>{const b=this.data.defaultFieldValue??"";r.value=u.userValue=b,u.formattedValue=null});let y=v=>{const{formattedValue:b}=u;b!=null&&(v.target.value=b),v.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",b=>{var w;if(u.focused)return;const{target:_}=b;if(g&&(_.type=f,p&&(_.step=p)),u.userValue){const T=u.userValue;if(g)if(f==="time"){const P=new Date(T),O=[P.getHours(),P.getMinutes(),P.getSeconds()];_.value=O.map(C=>C.toString().padStart(2,"0")).join(":")}else _.value=new Date(T-lhe).toISOString().split(f==="date"?"T":".",1)[0];else _.value=T}u.lastCommittedValue=_.value,u.commitKey=1,(w=this.data.actions)!=null&&w.Focus||(u.focused=!0)}),r.addEventListener("updatefromsandbox",b=>{this.showElementAndHideCanvas(b.target);const _={value(w){u.userValue=w.detail.value??"",g||e.setValue(n,{value:u.userValue.toString()}),w.target.value=u.userValue},formattedValue(w){const{formattedValue:T}=w.detail;u.formattedValue=T,T!=null&&w.target!==document.activeElement&&(w.target.value=T);const P={formattedValue:T};g&&(P.value=T),e.setValue(n,P)},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{var C;const{charLimit:T}=w.detail,{target:P}=w;if(T===0){P.removeAttribute("maxLength");return}P.setAttribute("maxLength",T);let O=u.userValue;!O||O.length<=T||(O=O.slice(0,T),P.value=u.userValue=O,e.setValue(n,{value:O}),(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:O,willCommit:!0,commitKey:1,selStart:P.selectionStart,selEnd:P.selectionEnd}}))}};this._dispatchEventFromSandbox(_,b)}),r.addEventListener("keydown",b=>{var T;u.commitKey=1;let _=-1;if(b.key==="Escape"?_=0:b.key==="Enter"&&!this.data.multiLine?_=2:b.key==="Tab"&&(u.commitKey=3),_===-1)return;const{value:w}=b.target;u.lastCommittedValue!==w&&(u.lastCommittedValue=w,u.userValue=w,(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:w,willCommit:!0,commitKey:_,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}}))});const v=y;y=null,r.addEventListener("blur",b=>{var T,P;if(!u.focused||!b.relatedTarget)return;(T=this.data.actions)!=null&&T.Blur||(u.focused=!1);const{target:_}=b;let{value:w}=_;if(g){if(w&&f==="time"){const O=w.split(":").map(C=>parseInt(C,10));w=new Date(2e3,0,1,O[0],O[1],O[2]||0).valueOf(),_.step=""}else w.includes("T")||(w=`${w}T00:00`),w=new Date(w).valueOf();_.type="text"}u.userValue=w,u.lastCommittedValue!==w&&((P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:w,willCommit:!0,commitKey:u.commitKey,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}})),v(b)}),(s=this.data.actions)!=null&&s.Keystroke&&r.addEventListener("beforeinput",b=>{var M;u.lastCommittedValue=null;const{data:_,target:w}=b,{value:T,selectionStart:P,selectionEnd:O}=w;let C=P,I=O;switch(b.inputType){case"deleteWordBackward":{const L=T.substring(0,P).match(/\w*[^\w]*$/);L&&(C-=L[0].length);break}case"deleteWordForward":{const L=T.substring(P).match(/^[^\w]*\w*/);L&&(I+=L[0].length);break}case"deleteContentBackward":P===O&&(C-=1);break;case"deleteContentForward":P===O&&(I+=1);break}b.preventDefault(),(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:T,change:_||"",willCommit:!1,selStart:C,selEnd:I}})}),this._setEventListeners(r,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],b=>b.target.value)}if(y&&r.addEventListener("blur",y),this.data.comb){const b=(this.data.rect[2]-this.data.rect[0])/l;r.classList.add("comb"),r.style.letterSpacing=`calc(${b}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class dhe extends fp{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class fhe extends fp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,n=this.data,r=n.id;let i=e.getValue(r,{value:n.exportValue===n.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Yf.add(s),s.setAttribute("data-element-id",r),s.disabled=n.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=n.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",n.exportValue),s.tabIndex=0,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,r)){const u=l&&c.exportValue===n.exportValue;c.domElement&&(c.domElement.checked=u),e.setValue(c.id,{value:u})}e.setValue(r,{value:l})}),s.addEventListener("resetform",a=>{const o=n.defaultFieldValue||"Off";a.target.checked=o===n.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(r,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class RG extends fp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,n=this.data,r=n.id;let i=e.getValue(r,{value:n.fieldValue===n.buttonValue}).value;if(typeof i=="string"&&(i=i!==n.buttonValue,e.setValue(r,{value:i})),i)for(const a of this._getElementsByName(n.fieldName,r))e.setValue(a.id,{value:!1});const s=document.createElement("input");if(Yf.add(s),s.setAttribute("data-element-id",r),s.disabled=n.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=n.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,r))e.setValue(c.id,{value:!1});e.setValue(r,{value:l})}),s.addEventListener("resetform",a=>{const o=n.defaultFieldValue;a.target.checked=o!=null&&o===n.buttonValue}),this.enableScripting&&this.hasJSActions){const a=n.buttonValue;s.addEventListener("updatefromsandbox",o=>{const l={value:c=>{const u=a===c.detail.value;for(const d of this._getElementsByName(c.target.name)){const f=u&&d.id===r;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class phe extends D2{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const n=e.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class mhe extends fp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,n=this.data.id,r=e.getValue(n,{value:this.data.fieldValue}),i=document.createElement("select");Yf.add(i),i.setAttribute("data-element-id",n),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",u=>{const d=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===d});for(const u of this.data.options){const d=document.createElement("option");d.textContent=u.displayValue,d.value=u.exportValue,r.value.includes(u.exportValue)&&(d.setAttribute("selected",!0),s=!1),i.append(d)}let a=null;if(s){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),i.prepend(u),a=()=>{u.remove(),i.removeEventListener("input",a),a=null},i.addEventListener("input",a)}const o=u=>{const d=u?"value":"textContent",{options:f,multiple:p}=i;return p?Array.prototype.filter.call(f,g=>g.selected).map(g=>g[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let l=o(!1);const c=u=>{const d=u.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",u=>{const d={value(f){a==null||a();const p=f.detail.value,g=new Set(Array.isArray(p)?p:[p]);for(const y of i.options)y.selected=g.has(y.value);e.setValue(n,{value:o(!0)}),l=o(!1)},multipleSelection(f){i.multiple=!0},remove(f){const p=i.options,g=f.detail.remove;p[g].selected=!1,i.remove(g),p.length>0&&Array.prototype.findIndex.call(p,v=>v.selected)===-1&&(p[0].selected=!0),e.setValue(n,{value:o(!0),items:c(f)}),l=o(!1)},clear(f){for(;i.length!==0;)i.remove(0);e.setValue(n,{value:null,items:[]}),l=o(!1)},insert(f){const{index:p,displayValue:g,exportValue:y}=f.detail.insert,v=i.children[p],b=document.createElement("option");b.textContent=g,b.value=y,v?v.before(b):i.append(b),e.setValue(n,{value:o(!0),items:c(f)}),l=o(!1)},items(f){const{items:p}=f.detail;for(;i.length!==0;)i.remove(0);for(const g of p){const{displayValue:y,exportValue:v}=g,b=document.createElement("option");b.textContent=y,b.value=v,i.append(b)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(n,{value:o(!0),items:c(f)}),l=o(!1)},indices(f){const p=new Set(f.detail.indices);for(const g of f.target.options)g.selected=p.has(g.index);e.setValue(n,{value:o(!0)}),l=o(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,u)}),i.addEventListener("input",u=>{var p;const d=o(!0),f=o(!1);e.setValue(n,{value:d}),u.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:l,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):i.addEventListener("input",function(u){e.setValue(n,{value:o(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var r_,$O;class BO extends Kt{constructor(n){const{data:r,elements:i,parent:s}=n,a=!!s._commentManager;super(n,{isRenderable:!a&&Kt._hasPopupData(r)});k(this,r_);if(this.elements=i,a&&Kt._hasPopupData(r)){const o=this.popup=D(this,r_,$O).call(this);for(const l of i)l.popup=o}else this.popup=null}render(){const{container:n}=this;n.classList.add("popupAnnotation"),n.role="comment";const r=this.popup=D(this,r_,$O).call(this),i=[];for(const s of this.elements)s.popup=r,s.container.ariaHasPopup="dialog",i.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(s=>`${om}${s}`).join(",")),this.container}}r_=new WeakSet,$O=function(){return new ghe({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Xi,Ou,vT,bT,Ig,kg,en,wo,Du,cf,Rg,Og,_o,Yi,Dl,Ml,tn,Nl,Mu,i_,Ll,Dg,uf,Nu,Kn,Lu,Me,_E,UO,zO,HO,xE,WO,OG,DG,MG,NG,AE,EE,GO;class ghe{constructor({container:e,color:n,elements:r,titleObj:i,modificationDate:s,contentsObj:a,richText:o,parent:l,rect:c,parentRect:u,open:d,commentManager:f=null}){k(this,Me);k(this,Xi,null);k(this,Ou,D(this,Me,MG).bind(this));k(this,vT,D(this,Me,GO).bind(this));k(this,bT,D(this,Me,EE).bind(this));k(this,Ig,D(this,Me,AE).bind(this));k(this,kg,null);k(this,en,null);k(this,wo,null);k(this,Du,null);k(this,cf,null);k(this,Rg,null);k(this,Og,null);k(this,_o,!1);k(this,Yi,null);k(this,Dl,null);k(this,Ml,null);k(this,tn,null);k(this,Nl,null);k(this,Mu,null);k(this,i_,null);k(this,Ll,null);k(this,Dg,null);k(this,uf,null);k(this,Nu,!1);k(this,Kn,null);k(this,Lu,null);E(this,en,e),E(this,Dg,i),E(this,wo,a),E(this,Ll,o),E(this,Rg,l),E(this,kg,n),E(this,i_,c),E(this,Og,u),E(this,cf,r),E(this,Xi,f),E(this,Kn,r[0]),E(this,Du,MS.toDateObject(s)),this.trigger=r.flatMap(p=>p.getElementsToTriggerPopup()),f||(D(this,Me,_E).call(this),h(this,en).hidden=!0,d&&D(this,Me,AE).call(this))}renderCommentButton(){if(h(this,tn)){h(this,tn).parentNode||h(this,Kn).container.after(h(this,tn));return}if(h(this,Nl)||D(this,Me,UO).call(this),!h(this,Nl))return;const{signal:e}=E(this,Dl,new AbortController),n=h(this,Kn).hasOwnCommentButton,r=()=>{h(this,Xi).toggleCommentPopup(this,!0,void 0,!n)},i=()=>{h(this,Xi).toggleCommentPopup(this,!1,!0,!n)},s=()=>{h(this,Xi).toggleCommentPopup(this,!1,!1)};if(n){E(this,tn,h(this,Kn).container);for(const a of this.trigger)a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.addEventListener("keydown",h(this,Ou),{signal:e}),a.addEventListener("click",r,{signal:e}),a.addEventListener("pointerenter",i,{signal:e}),a.addEventListener("pointerleave",s,{signal:e}),a.classList.add("popupTriggerArea")}else{const a=E(this,tn,document.createElement("button"));a.className="annotationCommentButton";const o=h(this,Kn).container;a.style.zIndex=o.style.zIndex+1,a.tabIndex=0,a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.setAttribute("data-l10n-id","pdfjs-show-comment-button"),D(this,Me,HO).call(this),D(this,Me,zO).call(this),a.addEventListener("keydown",h(this,Ou),{signal:e}),a.addEventListener("click",r,{signal:e}),a.addEventListener("pointerenter",i,{signal:e}),a.addEventListener("pointerleave",s,{signal:e}),o.after(a)}}get commentButtonColor(){const{color:e,opacity:n}=h(this,Kn).commentData;return e?h(this,Rg)._commentManager.makeCommentColor(e,n):null}focusCommentButton(){setTimeout(()=>{var e;(e=h(this,tn))==null||e.focus()},0)}getData(){const{richText:e,color:n,opacity:r,creationDate:i,modificationDate:s}=h(this,Kn).commentData;return{contentsObj:{str:this.comment},richText:e,color:n,opacity:r,creationDate:i,modificationDate:s}}get elementBeforePopup(){return h(this,tn)}get comment(){return h(this,Lu)||E(this,Lu,h(this,Kn).commentText),h(this,Lu)}set comment(e){e!==this.comment&&(h(this,Kn).commentText=E(this,Lu,e))}focus(){var e;(e=h(this,Kn).container)==null||e.focus()}get parentBoundingClientRect(){return h(this,Kn).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:n}){h(this,tn)&&(h(this,tn).classList.toggle("selected",e),h(this,tn).ariaExpanded=n)}setSelectedCommentButton(e){h(this,tn).classList.toggle("selected",e)}get commentPopupPosition(){if(h(this,Mu))return h(this,Mu);const{x:e,y:n,height:r}=h(this,tn).getBoundingClientRect(),{x:i,y:s,width:a,height:o}=h(this,Kn).layer.getBoundingClientRect();return[(e-i)/a,(n+r-s)/o]}set commentPopupPosition(e){E(this,Mu,e)}hasDefaultPopupPosition(){return h(this,Mu)===null}get commentButtonPosition(){return h(this,Nl)}get commentButtonWidth(){return h(this,tn).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[n,r]=h(this,Mu)||this.commentButtonPosition.map(c=>c/100),i=this.parentBoundingClientRect,{x:s,y:a,width:o,height:l}=i;h(this,Xi).showDialog(null,this,s+n*o,a+r*l,{...e,parentDimensions:i})}render(){var r,i;if(h(this,Yi))return;const e=E(this,Yi,document.createElement("div"));if(e.className="popup",h(this,kg)){const s=e.style.outlineColor=ue.makeHexColor(...h(this,kg));e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const n=document.createElement("span");if(n.className="header",(r=h(this,Dg))!=null&&r.str){const s=document.createElement("span");s.className="title",n.append(s),{dir:s.dir,str:s.textContent}=h(this,Dg)}if(e.append(n),h(this,Du)){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:h(this,Du).valueOf()})),s.dateTime=h(this,Du).toISOString(),n.append(s)}x8({html:h(this,Me,xE)||h(this,wo).str,dir:(i=h(this,wo))==null?void 0:i.dir,className:"popupContent"},e),h(this,en).append(e)}updateEdited({rect:e,popup:n,deleted:r}){var i;if(h(this,Xi)){r?(this.remove(),E(this,Lu,null)):n&&(n.deleted?this.remove():(D(this,Me,HO).call(this),E(this,Lu,n.text))),e&&(E(this,Nl,null),D(this,Me,UO).call(this),D(this,Me,zO).call(this));return}if(r||n!=null&&n.deleted){this.remove();return}D(this,Me,_E).call(this),h(this,uf)||E(this,uf,{contentsObj:h(this,wo),richText:h(this,Ll)}),e&&E(this,Ml,null),n&&n.text&&(E(this,Ll,D(this,Me,DG).call(this,n.text)),E(this,Du,MS.toDateObject(n.date)),E(this,wo,null)),(i=h(this,Yi))==null||i.remove(),E(this,Yi,null)}resetEdited(){var e;h(this,uf)&&({contentsObj:In(this,wo)._,richText:In(this,Ll)._}=h(this,uf),E(this,uf,null),(e=h(this,Yi))==null||e.remove(),E(this,Yi,null),E(this,Ml,null))}remove(){var e,n,r;if((e=h(this,Dl))==null||e.abort(),E(this,Dl,null),(n=h(this,Yi))==null||n.remove(),E(this,Yi,null),E(this,Nu,!1),E(this,_o,!1),(r=h(this,tn))==null||r.remove(),E(this,tn,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){E(this,Nu,this.isVisible),h(this,Nu)&&(h(this,en).hidden=!0)}maybeShow(){h(this,Xi)||(D(this,Me,_E).call(this),h(this,Nu)&&(h(this,Yi)||D(this,Me,EE).call(this),E(this,Nu,!1),h(this,en).hidden=!1))}get isVisible(){return h(this,Xi)?!1:h(this,en).hidden===!1}}Xi=new WeakMap,Ou=new WeakMap,vT=new WeakMap,bT=new WeakMap,Ig=new WeakMap,kg=new WeakMap,en=new WeakMap,wo=new WeakMap,Du=new WeakMap,cf=new WeakMap,Rg=new WeakMap,Og=new WeakMap,_o=new WeakMap,Yi=new WeakMap,Dl=new WeakMap,Ml=new WeakMap,tn=new WeakMap,Nl=new WeakMap,Mu=new WeakMap,i_=new WeakMap,Ll=new WeakMap,Dg=new WeakMap,uf=new WeakMap,Nu=new WeakMap,Kn=new WeakMap,Lu=new WeakMap,Me=new WeakSet,_E=function(){var n;if(h(this,Dl))return;E(this,Dl,new AbortController);const{signal:e}=h(this,Dl);for(const r of this.trigger)r.addEventListener("click",h(this,Ig),{signal:e}),r.addEventListener("pointerenter",h(this,bT),{signal:e}),r.addEventListener("pointerleave",h(this,vT),{signal:e}),r.classList.add("popupTriggerArea");for(const r of h(this,cf))(n=r.container)==null||n.addEventListener("keydown",h(this,Ou),{signal:e})},UO=function(){const e=h(this,cf).find(n=>n.hasCommentButton);e&&E(this,Nl,e._normalizePoint(e.commentButtonPosition))},zO=function(){if(h(this,Kn).extraPopupElement&&!h(this,Kn).editor)return;h(this,tn)||this.renderCommentButton();const[e,n]=h(this,Nl),{style:r}=h(this,tn);r.left=`calc(${e}%)`,r.top=`calc(${n}% - var(--comment-button-dim))`},HO=function(){h(this,Kn).extraPopupElement||(h(this,tn)||this.renderCommentButton(),h(this,tn).style.backgroundColor=this.commentButtonColor||"")},xE=function(){const e=h(this,Ll),n=h(this,wo);return e!=null&&e.str&&(!(n!=null&&n.str)||n.str===e.str)&&h(this,Ll).html||null},WO=function(){var e,n,r;return((r=(n=(e=h(this,Me,xE))==null?void 0:e.attributes)==null?void 0:n.style)==null?void 0:r.fontSize)||0},OG=function(){var e,n,r;return((r=(n=(e=h(this,Me,xE))==null?void 0:e.attributes)==null?void 0:n.style)==null?void 0:r.color)||null},DG=function(e){const n=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},i={style:{color:h(this,Me,OG),fontSize:h(this,Me,WO)?`calc(${h(this,Me,WO)}px * var(--total-scale-factor))`:""}};for(const s of e.split(`
`))n.push({name:"span",value:s,attributes:i});return r},MG=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&h(this,_o))&&D(this,Me,AE).call(this)},NG=function(){if(h(this,Ml)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:s}}}=h(this,Rg);let a=!!h(this,Og),o=a?h(this,Og):h(this,i_);for(const g of h(this,cf))if(!o||ue.intersect(g.data.rect,o)!==null){o=g.data.rect,a=!0;break}const l=ue.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),u=a?o[2]-o[0]+5:0,d=l[0]+u,f=l[1];E(this,Ml,[100*(d-i)/n,100*(f-s)/r]);const{style:p}=h(this,en);p.left=`${h(this,Ml)[0]}%`,p.top=`${h(this,Ml)[1]}%`},AE=function(){if(h(this,Xi)){h(this,Xi).toggleCommentPopup(this,!1);return}E(this,_o,!h(this,_o)),h(this,_o)?(D(this,Me,EE).call(this),h(this,en).addEventListener("click",h(this,Ig)),h(this,en).addEventListener("keydown",h(this,Ou))):(D(this,Me,GO).call(this),h(this,en).removeEventListener("click",h(this,Ig)),h(this,en).removeEventListener("keydown",h(this,Ou)))},EE=function(){h(this,Yi)||this.render(),this.isVisible?h(this,_o)&&h(this,en).classList.add("focused"):(D(this,Me,NG).call(this),h(this,en).hidden=!1,h(this,en).style.zIndex=parseInt(h(this,en).style.zIndex)+1e3)},GO=function(){h(this,en).classList.remove("focused"),!(h(this,_o)||!this.isVisible)&&(h(this,en).hidden=!0,h(this,en).style.zIndex=parseInt(h(this,en).style.zIndex)-1e3)};class LG extends Kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ke.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const n of this.textContent){const r=document.createElement("span");r.textContent=n,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var s_;class yhe extends Kt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});k(this,s_,null)}render(){this.container.classList.add("lineAnnotation");const{data:n,width:r,height:i}=this,s=this.svgFactory.create(r,i,!0),a=E(this,s_,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",n.rect[2]-n.lineCoordinates[0]),a.setAttribute("y1",n.rect[3]-n.lineCoordinates[1]),a.setAttribute("x2",n.rect[2]-n.lineCoordinates[2]),a.setAttribute("y2",n.rect[3]-n.lineCoordinates[3]),a.setAttribute("stroke-width",n.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!n.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return h(this,s_)}addHighlightArea(){this.container.classList.add("highlightArea")}}s_=new WeakMap;var a_;class vhe extends Kt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});k(this,a_,null)}render(){this.container.classList.add("squareAnnotation");const{data:n,width:r,height:i}=this,s=this.svgFactory.create(r,i,!0),a=n.borderStyle.width,o=E(this,a_,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",r-a),o.setAttribute("height",i-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!n.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return h(this,a_)}addHighlightArea(){this.container.classList.add("highlightArea")}}a_=new WeakMap;var o_;class bhe extends Kt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});k(this,o_,null)}render(){this.container.classList.add("circleAnnotation");const{data:n,width:r,height:i}=this,s=this.svgFactory.create(r,i,!0),a=n.borderStyle.width,o=E(this,o_,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",r/2),o.setAttribute("cy",i/2),o.setAttribute("rx",r/2-a/2),o.setAttribute("ry",i/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!n.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return h(this,o_)}addHighlightArea(){this.container.classList.add("highlightArea")}}o_=new WeakMap;var l_;class jG extends Kt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});k(this,l_,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:n,vertices:r,borderStyle:i,popupRef:s},width:a,height:o}=this;if(!r)return this.container;const l=this.svgFactory.create(a,o,!0);let c=[];for(let d=0,f=r.length;d<f;d+=2){const p=r[d]-n[0],g=n[3]-r[d+1];c.push(`${p},${g}`)}c=c.join(" ");const u=E(this,l_,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",c),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return h(this,l_)}addHighlightArea(){this.container.classList.add("highlightArea")}}l_=new WeakMap;class whe extends jG{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class _he extends Kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var c_,hf,u_,KO;class M2 extends Kt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});k(this,u_);k(this,c_,null);k(this,hf,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ke.HIGHLIGHT:ke.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:n,rotation:r,inkLists:i,borderStyle:s,popupRef:a}}=this,{transform:o,width:l,height:c}=D(this,u_,KO).call(this,r,n),u=this.svgFactory.create(l,c,!0),d=E(this,c_,this.svgFactory.createElement("svg:g"));u.append(d),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",o);for(let f=0,p=i.length;f<p;f++){const g=this.svgFactory.createElement(this.svgElementName);h(this,hf).push(g),g.setAttribute("points",i[f].join(",")),d.append(g)}return!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(n){super.updateEdited(n);const{thickness:r,points:i,rect:s}=n,a=h(this,c_);if(r>=0&&a.setAttribute("stroke-width",r||1),i)for(let o=0,l=h(this,hf).length;o<l;o++)h(this,hf)[o].setAttribute("points",i[o].join(","));if(s){const{transform:o,width:l,height:c}=D(this,u_,KO).call(this,this.data.rotation,s);a.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return h(this,hf)}addHighlightArea(){this.container.classList.add("highlightArea")}}c_=new WeakMap,hf=new WeakMap,u_=new WeakSet,KO=function(n,r){switch(n){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};class FG extends Kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ke.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class xhe extends Kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Ahe extends Kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Ehe extends Kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class VG extends Kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ke.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var h_,d_,qO;class She extends Kt{constructor(n){var i;super(n,{isRenderable:!0});k(this,d_);k(this,h_,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:n,data:r}=this;let i;r.hasAppearance||r.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),i.addEventListener("dblclick",D(this,d_,qO).bind(this)),E(this,h_,i);const{isMac:s}=Pr.platform;return n.addEventListener("keydown",a=>{a.key==="Enter"&&(s?a.metaKey:a.ctrlKey)&&D(this,d_,qO).call(this)}),!r.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),n.append(i),n}getElementsToTriggerPopup(){return h(this,h_)}addHighlightArea(){this.container.classList.add("highlightArea")}}h_=new WeakMap,d_=new WeakSet,qO=function(){var n;(n=this.downloadManager)==null||n.openOrDownloadData(this.content,this.filename)};var df,ff,Mg,ju,f_,pf,Qi,p_,sc,SE,YO;const DF=class DF{constructor({div:e,accessibilityManager:n,annotationCanvasMap:r,annotationEditorUIManager:i,page:s,viewport:a,structTreeLayer:o,commentManager:l,linkService:c,annotationStorage:u}){k(this,sc);k(this,df,null);k(this,ff,null);k(this,Mg,null);k(this,ju,new Map);k(this,f_,null);k(this,pf,null);k(this,Qi,[]);k(this,p_,!1);this.div=e,E(this,df,n),E(this,ff,r),E(this,f_,o||null),E(this,pf,c||null),E(this,Mg,u||new k2),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=l||null}hasEditableAnnotations(){return h(this,ju).size>0}async render(e){var o;const{annotations:n}=e,r=this.div;qf(r,this.viewport);const i=new Map,s=[],a={data:null,layer:r,linkService:h(this,pf),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new US,annotationStorage:h(this,Mg),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of n){if(l.noHTML)continue;const c=l.annotationType===yn.POPUP;if(c){const f=i.get(l.id);if(!f)continue;if(!this._commentManager){s.push(l);continue}a.elements=f}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;a.data=l;const u=zI.create(a);if(!u.isRenderable)continue;if(!c&&(h(this,Qi).push(u),l.popupRef)){const f=i.get(l.popupRef);f?f.push(u):i.set(l.popupRef,[u])}const d=u.render();l.hidden&&(d.style.visibility="hidden"),u._isEditable&&(h(this,ju).set(u.data.id,u),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(u))}await D(this,sc,SE).call(this);for(const l of s){const c=a.elements=i.get(l.id);a.data=l;const u=zI.create(a);if(!u.isRenderable)continue;const d=u.render();u.contentElement.id=`${om}${l.id}`,l.hidden&&(d.style.visibility="hidden"),c.at(-1).container.after(d)}D(this,sc,YO).call(this)}async addLinkAnnotations(e){const n={data:null,layer:this.div,linkService:h(this,pf),svgFactory:new US,parent:this};for(const r of e){r.borderStyle||(r.borderStyle=DF._defaultBorderStyle),n.data=r;const i=zI.create(n);i.isRenderable&&(i.render(),i.contentElement.id=`${om}${r.id}`,h(this,Qi).push(i))}await D(this,sc,SE).call(this)}update({viewport:e}){const n=this.div;this.viewport=e,qf(n,{rotation:e.rotation}),D(this,sc,YO).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(h(this,ju).values())}getEditableAnnotation(e){return h(this,ju).get(e)}addFakeAnnotation(e){const{div:n}=this,{id:r,rotation:i}=e,s=new che({data:{id:r,rect:e.getPDFRect(),rotation:i},editor:e,layer:n,parent:this,enableComment:!!this._commentManager,linkService:h(this,pf),annotationStorage:h(this,Mg)});return s.render(),s.contentElement.id=`${om}${r}`,s.createOrUpdatePopup(),h(this,Qi).push(s),s}removeAnnotation(e){var i;const n=h(this,Qi).findIndex(s=>s.data.id===e);if(n<0)return;const[r]=h(this,Qi).splice(n,1);(i=h(this,df))==null||i.removePointerInTextLayer(r.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const n of e)n.updateFakeAnnotationElement(this);D(this,sc,SE).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return Pe(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Rp.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};df=new WeakMap,ff=new WeakMap,Mg=new WeakMap,ju=new WeakMap,f_=new WeakMap,pf=new WeakMap,Qi=new WeakMap,p_=new WeakMap,sc=new WeakSet,SE=async function(){var r,i,s;if(h(this,Qi).length===0)return;this.div.replaceChildren();const e=[];if(!h(this,p_)){E(this,p_,!0);for(const{contentElement:a,data:{id:o}}of h(this,Qi)){const l=a.id=`${om}${o}`;e.push((r=h(this,f_))==null?void 0:r.getAriaAttributes(l).then(c=>{if(c)for(const[u,d]of c)a.setAttribute(u,d)}))}}h(this,Qi).sort(({data:{rect:[a,o,l,c]}},{data:{rect:[u,d,f,p]}})=>{if(a===l&&o===c)return 1;if(u===f&&d===p)return-1;const g=c,y=o,v=(o+c)/2,b=p,_=d,w=(d+p)/2;if(v>=b&&w<=y)return-1;if(w>=g&&v<=_)return 1;const T=(a+l)/2,P=(u+f)/2;return T-P});const n=document.createDocumentFragment();for(const a of h(this,Qi))n.append(a.container),this._commentManager?(s=((i=a.extraPopupElement)==null?void 0:i.popup)||a.popup)==null||s.renderCommentButton():a.extraPopupElement&&n.append(a.extraPopupElement.render());if(this.div.append(n),await Promise.all(e),h(this,df))for(const a of h(this,Qi))h(this,df).addPointerInTextLayer(a.contentElement,!1)},YO=function(){var n;if(!h(this,ff))return;const e=this.div;for(const[r,i]of h(this,ff)){const s=e.querySelector(`[data-annotation-id="${r}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:a}=s;a?a.nodeName==="CANVAS"?a.replaceWith(i):a.classList.contains("annotationContent")?a.after(i):a.before(i):s.append(i);const o=h(this,ju).get(r);o&&(o._hasNoCanvas?((n=this._annotationEditorUIManager)==null||n.setMissingCanvas(r,s.id,i),o._hasNoCanvas=!1):o.canvas=i)}h(this,ff).clear()};let XO=DF;const yA=/\r\n?|\n/g;var Ji,m_,mf,Zi,Pn,BG,$G,UG,TE,ac,PE,CE,zG,JO,HG;const It=class It extends Tt{constructor(n){super({...n,name:"freeTextEditor"});k(this,Pn);k(this,Ji,"");k(this,m_,`${this.id}-editor`);k(this,mf,null);k(this,Zi);Y(this,"_colorPicker",null);this.color=n.color||It._defaultColor||Tt._defaultLineColor,E(this,Zi,n.fontSize||It._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const n=It.prototype,r=a=>a.isEmpty(),i=Xf.TRANSLATE_SMALL,s=Xf.TRANSLATE_BIG;return Pe(this,"_keyboardManager",new K_([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],n.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],n.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],n._translateEmpty,{args:[-i,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],n._translateEmpty,{args:[-s,0],checker:r}],[["ArrowRight","mac+ArrowRight"],n._translateEmpty,{args:[i,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],n._translateEmpty,{args:[s,0],checker:r}],[["ArrowUp","mac+ArrowUp"],n._translateEmpty,{args:[0,-i],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],n._translateEmpty,{args:[0,-s],checker:r}],[["ArrowDown","mac+ArrowDown"],n._translateEmpty,{args:[0,i],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],n._translateEmpty,{args:[0,s],checker:r}]]))}static initialize(n,r){Tt.initialize(n,r);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(n,r){switch(n){case ze.FREETEXT_SIZE:It._defaultFontSize=r;break;case ze.FREETEXT_COLOR:It._defaultColor=r;break}}updateParams(n,r){switch(n){case ze.FREETEXT_SIZE:D(this,Pn,BG).call(this,r);break;case ze.FREETEXT_COLOR:D(this,Pn,$G).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[ze.FREETEXT_SIZE,It._defaultFontSize],[ze.FREETEXT_COLOR,It._defaultColor||Tt._defaultLineColor]]}get propertiesToUpdate(){return[[ze.FREETEXT_SIZE,h(this,Zi)],[ze.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new $S(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ze.FREETEXT_COLOR}onUpdatedColor(){var n;this.editorDiv.style.color=this.color,(n=this._colorPicker)==null||n.update(this.color),super.onUpdatedColor()}_translateEmpty(n,r){this._uiManager.translateSelectedEditors(n,r,!0)}getInitialTranslation(){const n=this.parentScale;return[-It._internalPadding*n,-(It._internalPadding+h(this,Zi))*n]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),E(this,mf,new AbortController);const n=this._uiManager.combinedSignal(h(this,mf));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:n}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:n}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:n}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:n}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:n}),!0}disableEditMode(){var n;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",h(this,m_)),this._isDraggable=!0,(n=h(this,mf))==null||n.abort(),E(this,mf,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(n){this._focusEventsAllowed&&(super.focusin(n),n.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(n){var r;this.width||(this.enableEditMode(),n&&this.editorDiv.focus(),(r=this._initialOptions)!=null&&r.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const n=h(this,Ji),r=E(this,Ji,D(this,Pn,UG).call(this).trimEnd());if(n===r)return;const i=s=>{if(E(this,Ji,s),!s){this.remove();return}D(this,Pn,CE).call(this),this._uiManager.rebuild(this),D(this,Pn,TE).call(this)};this.addCommands({cmd:()=>{i(r)},undo:()=>{i(n)},mustExec:!1}),D(this,Pn,TE).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(n){n.target===this.div&&n.key==="Enter"&&(this.enterInEditMode(),n.preventDefault())}editorDivKeydown(n){It._keyboardManager.exec(this,n)}editorDivFocus(n){this.isEditing=!0}editorDivBlur(n){this.isEditing=!1}editorDivInput(n){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let n,r;(this._isCopy||this.annotationElementId)&&(n=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",h(this,m_)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${h(this,Zi)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[u,d]=this.pageDimensions,[f,p]=this.pageTranslation;let g,y;switch(this.rotation){case 0:g=n+(o[0]-f)/u,y=r+this.height-(o[1]-p)/d;break;case 90:g=n+(o[0]-f)/u,y=r-(o[1]-p)/d,[l,c]=[c,-l];break;case 180:g=n-this.width+(o[0]-f)/u,y=r-(o[1]-p)/d,[l,c]=[-l,-c];break;case 270:g=n+(o[0]-f-this.height*d)/u,y=r+(o[1]-p-this.width*u)/d,[l,c]=[-c,l];break}this.setAt(g*s,y*a,l,c)}else this._moveAfterPaste(n,r);D(this,Pn,CE).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(n){var g,y,v;const r=n.clipboardData||window.clipboardData,{types:i}=r;if(i.length===1&&i[0]==="text/plain")return;n.preventDefault();const s=D(g=It,ac,JO).call(g,r.getData("text")||"").replaceAll(yA,`
`);if(!s)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!s.includes(`
`)){o.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:c}=o,u=[],d=[];if(l.nodeType===Node.TEXT_NODE){const b=l.parentElement;if(d.push(l.nodeValue.slice(c).replaceAll(yA,"")),b!==this.editorDiv){let _=u;for(const w of this.editorDiv.childNodes){if(w===b){_=d;continue}_.push(D(y=It,ac,PE).call(y,w))}}u.push(l.nodeValue.slice(0,c).replaceAll(yA,""))}else if(l===this.editorDiv){let b=u,_=0;for(const w of this.editorDiv.childNodes)_++===c&&(b=d),b.push(D(v=It,ac,PE).call(v,w))}E(this,Ji,`${u.join(`
`)}${s}${d.join(`
`)}`),D(this,Pn,CE).call(this);const f=new Range;let p=Math.sumPrecise(u.map(b=>b.length));for(const{firstChild:b}of this.editorDiv.childNodes)if(b.nodeType===Node.TEXT_NODE){const _=b.nodeValue.length;if(p<=_){f.setStart(b,p),f.setEnd(b,p);break}p-=_}a.removeAllRanges(),a.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const n=It._internalPadding*this.parentScale;return this.getRect(n,n)}static async deserialize(n,r,i){var o;let s=null;if(n instanceof LG){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:u,rotation:d,id:f,popupRef:p,richText:g,contentsObj:y,creationDate:v,modificationDate:b},textContent:_,textPosition:w,parent:{page:{pageNumber:T}}}=n;if(!_||_.length===0)return null;s=n={annotationType:ke.FREETEXT,color:Array.from(c),fontSize:l,value:_.join(`
`),position:w,pageIndex:T-1,rect:u.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:p,comment:(y==null?void 0:y.str)||null,richText:g,creationDate:v,modificationDate:b}}const a=await super.deserialize(n,r,i);return E(a,Zi,n.fontSize),a.color=ue.makeHexColor(...n.color),E(a,Ji,D(o=It,ac,JO).call(o,n.value)),a._initialData=s,n.comment&&a.setCommentData(n),a}serialize(n=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Tt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(n),{color:r,fontSize:h(this,Zi),value:D(this,Pn,zG).call(this)});return this.addComment(i),n?(i.isCopy=!0,i):this.annotationElementId&&!D(this,Pn,HG).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(n){const r=super.renderAnnotationElement(n);if(!r)return null;const{style:i}=r;i.fontSize=`calc(${h(this,Zi)}px * var(--total-scale-factor))`,i.color=this.color,r.replaceChildren();for(const s of h(this,Ji).split(`
`)){const a=document.createElement("div");a.append(s?document.createTextNode(s):document.createElement("br")),r.append(a)}return n.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:h(this,Ji)}}),r}resetAnnotationElement(n){super.resetAnnotationElement(n),n.resetEdited()}};Ji=new WeakMap,m_=new WeakMap,mf=new WeakMap,Zi=new WeakMap,Pn=new WeakSet,BG=function(n){const r=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-h(this,Zi))*this.parentScale),E(this,Zi,s),D(this,Pn,TE).call(this)},i=h(this,Zi);this.addCommands({cmd:r.bind(this,n),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},$G=function(n){const r=s=>{this.color=s,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:r.bind(this,n),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},UG=function(){var i;const n=[];this.editorDiv.normalize();let r=null;for(const s of this.editorDiv.childNodes)(r==null?void 0:r.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(n.push(D(i=It,ac,PE).call(i,s)),r=s);return n.join(`
`)},TE=function(){const[n,r]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:s,div:a}=this,o=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",s.div.append(this.div),i=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/n,this.height=i.height/r):(this.width=i.height/n,this.height=i.width/r),this.fixAndSetPosition()},ac=new WeakSet,PE=function(n){return(n.nodeType===Node.TEXT_NODE?n.nodeValue:n.innerText).replaceAll(yA,"")},CE=function(){if(this.editorDiv.replaceChildren(),!!h(this,Ji))for(const n of h(this,Ji).split(`
`)){const r=document.createElement("div");r.append(n?document.createTextNode(n):document.createElement("br")),this.editorDiv.append(r)}},zG=function(){return h(this,Ji).replaceAll(""," ")},JO=function(n){return n.replaceAll(" ","")},HG=function(n){const{value:r,fontSize:i,color:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||n.value!==r||n.fontSize!==i||n.color.some((o,l)=>o!==s[l])||n.pageIndex!==a},k(It,ac),Y(It,"_freeTextDefaultContent",""),Y(It,"_internalPadding",0),Y(It,"_defaultColor",null),Y(It,"_defaultFontSize",10),Y(It,"_type","freetext"),Y(It,"_editorType",ke.FREETEXT);let QO=It;class le{toSVGPath(){bt("Abstract method `toSVGPath` must be implemented.")}get box(){bt("Abstract getter `box` must be implemented.")}serialize(e,n){bt("Abstract method `serialize` must be implemented.")}static _rescale(e,n,r,i,s,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=n+e[o]*i,a[o+1]=r+e[o+1]*s;return a}static _rescaleAndSwap(e,n,r,i,s,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=n+e[o+1]*i,a[o+1]=r+e[o]*s;return a}static _translate(e,n,r,i){i||(i=new Float32Array(e.length));for(let s=0,a=e.length;s<a;s+=2)i[s]=n+e[s],i[s+1]=r+e[s+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,n,r,i,s){switch(s){case 90:return[1-n/r,e/i];case 180:return[1-e/r,1-n/i];case 270:return[n/r,1-e/i];default:return[e/r,n/i]}}static _normalizePagePoint(e,n,r){switch(r){case 90:return[1-n,e];case 180:return[1-e,1-n];case 270:return[n,1-e];default:return[e,n]}}static createBezierPoints(e,n,r,i,s,a){return[(e+5*r)/6,(n+5*i)/6,(5*r+s)/6,(5*i+a)/6,(r+s)/2,(i+a)/2]}}Y(le,"PRECISION",1e-4);var es,Sa,Ng,Lg,xo,Le,gf,yf,g_,y_,jg,Fg,Fu,v_,wT,_T,jn,r0,WG,GG,KG,qG,XG,YG;const ol=class ol{constructor({x:e,y:n},r,i,s,a,o=0){k(this,jn);k(this,es);k(this,Sa,[]);k(this,Ng);k(this,Lg);k(this,xo,[]);k(this,Le,new Float32Array(18));k(this,gf);k(this,yf);k(this,g_);k(this,y_);k(this,jg);k(this,Fg);k(this,Fu,[]);E(this,es,r),E(this,Fg,s*i),E(this,Lg,a),h(this,Le).set([NaN,NaN,NaN,NaN,e,n],6),E(this,Ng,o),E(this,y_,h(ol,v_)*i),E(this,g_,h(ol,_T)*i),E(this,jg,i),h(this,Fu).push(e,n)}isEmpty(){return isNaN(h(this,Le)[8])}add({x:e,y:n}){var M;E(this,gf,e),E(this,yf,n);const[r,i,s,a]=h(this,es);let[o,l,c,u]=h(this,Le).subarray(8,12);const d=e-c,f=n-u,p=Math.hypot(d,f);if(p<h(this,g_))return!1;const g=p-h(this,y_),y=g/p,v=y*d,b=y*f;let _=o,w=l;o=c,l=u,c+=v,u+=b,(M=h(this,Fu))==null||M.push(e,n);const T=-b/g,P=v/g,O=T*h(this,Fg),C=P*h(this,Fg);return h(this,Le).set(h(this,Le).subarray(2,8),0),h(this,Le).set([c+O,u+C],4),h(this,Le).set(h(this,Le).subarray(14,18),12),h(this,Le).set([c-O,u-C],16),isNaN(h(this,Le)[6])?(h(this,xo).length===0&&(h(this,Le).set([o+O,l+C],2),h(this,xo).push(NaN,NaN,NaN,NaN,(o+O-r)/s,(l+C-i)/a),h(this,Le).set([o-O,l-C],14),h(this,Sa).push(NaN,NaN,NaN,NaN,(o-O-r)/s,(l-C-i)/a)),h(this,Le).set([_,w,o,l,c,u],6),!this.isEmpty()):(h(this,Le).set([_,w,o,l,c,u],6),Math.abs(Math.atan2(w-l,_-o)-Math.atan2(b,v))<Math.PI/2?([o,l,c,u]=h(this,Le).subarray(2,6),h(this,xo).push(NaN,NaN,NaN,NaN,((o+c)/2-r)/s,((l+u)/2-i)/a),[o,l,_,w]=h(this,Le).subarray(14,18),h(this,Sa).push(NaN,NaN,NaN,NaN,((_+o)/2-r)/s,((w+l)/2-i)/a),!0):([_,w,o,l,c,u]=h(this,Le).subarray(0,6),h(this,xo).push(((_+5*o)/6-r)/s,((w+5*l)/6-i)/a,((5*o+c)/6-r)/s,((5*l+u)/6-i)/a,((o+c)/2-r)/s,((l+u)/2-i)/a),[c,u,o,l,_,w]=h(this,Le).subarray(12,18),h(this,Sa).push(((_+5*o)/6-r)/s,((w+5*l)/6-i)/a,((5*o+c)/6-r)/s,((5*l+u)/6-i)/a,((o+c)/2-r)/s,((l+u)/2-i)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=h(this,xo),n=h(this,Sa);if(isNaN(h(this,Le)[6])&&!this.isEmpty())return D(this,jn,WG).call(this);const r=[];r.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);D(this,jn,KG).call(this,r);for(let i=n.length-6;i>=6;i-=6)isNaN(n[i])?r.push(`L${n[i+4]} ${n[i+5]}`):r.push(`C${n[i]} ${n[i+1]} ${n[i+2]} ${n[i+3]} ${n[i+4]} ${n[i+5]}`);return D(this,jn,GG).call(this,r),r.join(" ")}newFreeDrawOutline(e,n,r,i,s,a){return new QG(e,n,r,i,s,a)}getOutlines(){var d;const e=h(this,xo),n=h(this,Sa),r=h(this,Le),[i,s,a,o]=h(this,es),l=new Float32Array((((d=h(this,Fu))==null?void 0:d.length)??0)+2);for(let f=0,p=l.length-2;f<p;f+=2)l[f]=(h(this,Fu)[f]-i)/a,l[f+1]=(h(this,Fu)[f+1]-s)/o;if(l[l.length-2]=(h(this,gf)-i)/a,l[l.length-1]=(h(this,yf)-s)/o,isNaN(r[6])&&!this.isEmpty())return D(this,jn,qG).call(this,l);const c=new Float32Array(h(this,xo).length+24+h(this,Sa).length);let u=e.length;for(let f=0;f<u;f+=2){if(isNaN(e[f])){c[f]=c[f+1]=NaN;continue}c[f]=e[f],c[f+1]=e[f+1]}u=D(this,jn,YG).call(this,c,u);for(let f=n.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(n[f+p])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=n[f+p],c[u+1]=n[f+p+1],u+=2}return D(this,jn,XG).call(this,c,u),this.newFreeDrawOutline(c,l,h(this,es),h(this,jg),h(this,Ng),h(this,Lg))}};es=new WeakMap,Sa=new WeakMap,Ng=new WeakMap,Lg=new WeakMap,xo=new WeakMap,Le=new WeakMap,gf=new WeakMap,yf=new WeakMap,g_=new WeakMap,y_=new WeakMap,jg=new WeakMap,Fg=new WeakMap,Fu=new WeakMap,v_=new WeakMap,wT=new WeakMap,_T=new WeakMap,jn=new WeakSet,r0=function(){const e=h(this,Le).subarray(4,6),n=h(this,Le).subarray(16,18),[r,i,s,a]=h(this,es);return[(h(this,gf)+(e[0]-n[0])/2-r)/s,(h(this,yf)+(e[1]-n[1])/2-i)/a,(h(this,gf)+(n[0]-e[0])/2-r)/s,(h(this,yf)+(n[1]-e[1])/2-i)/a]},WG=function(){const[e,n,r,i]=h(this,es),[s,a,o,l]=D(this,jn,r0).call(this);return`M${(h(this,Le)[2]-e)/r} ${(h(this,Le)[3]-n)/i} L${(h(this,Le)[4]-e)/r} ${(h(this,Le)[5]-n)/i} L${s} ${a} L${o} ${l} L${(h(this,Le)[16]-e)/r} ${(h(this,Le)[17]-n)/i} L${(h(this,Le)[14]-e)/r} ${(h(this,Le)[15]-n)/i} Z`},GG=function(e){const n=h(this,Sa);e.push(`L${n[4]} ${n[5]} Z`)},KG=function(e){const[n,r,i,s]=h(this,es),a=h(this,Le).subarray(4,6),o=h(this,Le).subarray(16,18),[l,c,u,d]=D(this,jn,r0).call(this);e.push(`L${(a[0]-n)/i} ${(a[1]-r)/s} L${l} ${c} L${u} ${d} L${(o[0]-n)/i} ${(o[1]-r)/s}`)},qG=function(e){const n=h(this,Le),[r,i,s,a]=h(this,es),[o,l,c,u]=D(this,jn,r0).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(n[2]-r)/s,(n[3]-i)/a,NaN,NaN,NaN,NaN,(n[4]-r)/s,(n[5]-i)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(n[16]-r)/s,(n[17]-i)/a,NaN,NaN,NaN,NaN,(n[14]-r)/s,(n[15]-i)/a],0),this.newFreeDrawOutline(d,e,h(this,es),h(this,jg),h(this,Ng),h(this,Lg))},XG=function(e,n){const r=h(this,Sa);return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],n),n+=6},YG=function(e,n){const r=h(this,Le).subarray(4,6),i=h(this,Le).subarray(16,18),[s,a,o,l]=h(this,es),[c,u,d,f]=D(this,jn,r0).call(this);return e.set([NaN,NaN,NaN,NaN,(r[0]-s)/o,(r[1]-a)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(i[0]-s)/o,(i[1]-a)/l],n),n+=24},k(ol,v_,8),k(ol,wT,2),k(ol,_T,h(ol,v_)+h(ol,wT));let zS=ol;var Vg,vf,jl,b_,ts,w_,un,xT,JG;class QG extends le{constructor(n,r,i,s,a,o){super();k(this,xT);k(this,Vg);k(this,vf,new Float32Array(4));k(this,jl);k(this,b_);k(this,ts);k(this,w_);k(this,un);E(this,un,n),E(this,ts,r),E(this,Vg,i),E(this,w_,s),E(this,jl,a),E(this,b_,o),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],D(this,xT,JG).call(this,o);const[l,c,u,d]=h(this,vf);for(let f=0,p=n.length;f<p;f+=2)n[f]=(n[f]-l)/u,n[f+1]=(n[f+1]-c)/d;for(let f=0,p=r.length;f<p;f+=2)r[f]=(r[f]-l)/u,r[f+1]=(r[f+1]-c)/d}toSVGPath(){const n=[`M${h(this,un)[4]} ${h(this,un)[5]}`];for(let r=6,i=h(this,un).length;r<i;r+=6){if(isNaN(h(this,un)[r])){n.push(`L${h(this,un)[r+4]} ${h(this,un)[r+5]}`);continue}n.push(`C${h(this,un)[r]} ${h(this,un)[r+1]} ${h(this,un)[r+2]} ${h(this,un)[r+3]} ${h(this,un)[r+4]} ${h(this,un)[r+5]}`)}return n.push("Z"),n.join(" ")}serialize([n,r,i,s],a){const o=i-n,l=s-r;let c,u;switch(a){case 0:c=le._rescale(h(this,un),n,s,o,-l),u=le._rescale(h(this,ts),n,s,o,-l);break;case 90:c=le._rescaleAndSwap(h(this,un),n,r,o,l),u=le._rescaleAndSwap(h(this,ts),n,r,o,l);break;case 180:c=le._rescale(h(this,un),i,r,-o,l),u=le._rescale(h(this,ts),i,r,-o,l);break;case 270:c=le._rescaleAndSwap(h(this,un),i,s,-o,-l),u=le._rescaleAndSwap(h(this,ts),i,s,-o,-l);break}return{outline:Array.from(c),points:[Array.from(u)]}}get box(){return h(this,vf)}newOutliner(n,r,i,s,a,o=0){return new zS(n,r,i,s,a,o)}getNewOutline(n,r){const[i,s,a,o]=h(this,vf),[l,c,u,d]=h(this,Vg),f=a*u,p=o*d,g=i*u+l,y=s*d+c,v=this.newOutliner({x:h(this,ts)[0]*f+g,y:h(this,ts)[1]*p+y},h(this,Vg),h(this,w_),n,h(this,b_),r??h(this,jl));for(let b=2;b<h(this,ts).length;b+=2)v.add({x:h(this,ts)[b]*f+g,y:h(this,ts)[b+1]*p+y});return v.getOutlines()}}Vg=new WeakMap,vf=new WeakMap,jl=new WeakMap,b_=new WeakMap,ts=new WeakMap,w_=new WeakMap,un=new WeakMap,xT=new WeakSet,JG=function(n){const r=h(this,un);let i=r[4],s=r[5];const a=[i,s,i,s];let o=i,l=s,c=i,u=s;const d=n?Math.max:Math.min,f=new Float32Array(4);for(let g=6,y=r.length;g<y;g+=6){const v=r[g+4],b=r[g+5];isNaN(r[g])?(ue.pointBoundingBox(v,b,a),l>b?(o=v,l=b):l===b&&(o=d(o,v)),u<b?(c=v,u=b):u===b&&(c=d(c,v))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,ue.bezierBoundingBox(i,s,...r.slice(g,g+6),f),ue.rectBoundingBox(f[0],f[1],f[2],f[3],a),l>f[1]?(o=f[0],l=f[1]):l===f[1]&&(o=d(o,f[0])),u<f[3]?(c=f[2],u=f[3]):u===f[3]&&(c=d(c,f[2]))),i=v,s=b}const p=h(this,vf);p[0]=a[0]-h(this,jl),p[1]=a[1]-h(this,jl),p[2]=a[2]-a[0]+2*h(this,jl),p[3]=a[3]-a[1]+2*h(this,jl),this.firstPoint=[o,l],this.lastPoint=[c,u]};var __,x_,A_,Vu,Ta,fi,ZG,IE,e7,t7,eD;class ZO{constructor(e,n=0,r=0,i=!0){k(this,fi);k(this,__);k(this,x_);k(this,A_);k(this,Vu,[]);k(this,Ta,[]);const s=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:y,y:v,width:b,height:_}of e){const w=Math.floor((y-n)/a)*a,T=Math.ceil((y+b+n)/a)*a,P=Math.floor((v-n)/a)*a,O=Math.ceil((v+_+n)/a)*a,C=[w,P,O,!0],I=[T,P,O,!1];h(this,Vu).push(C,I),ue.rectBoundingBox(w,P,T,O,s)}const o=s[2]-s[0]+2*r,l=s[3]-s[1]+2*r,c=s[0]-r,u=s[1]-r;let d=i?-1/0:1/0,f=1/0;const p=h(this,Vu).at(i?-1:-2),g=[p[0],p[2]];for(const y of h(this,Vu)){const[v,b,_,w]=y;!w&&i?b<f?(f=b,d=v):b===f&&(d=Math.max(d,v)):w&&!i&&(b<f?(f=b,d=v):b===f&&(d=Math.min(d,v))),y[0]=(v-c)/o,y[1]=(b-u)/l,y[2]=(_-u)/l}E(this,__,new Float32Array([c,u,o,l])),E(this,x_,[d,f]),E(this,A_,g)}getOutlines(){h(this,Vu).sort((n,r)=>n[0]-r[0]||n[1]-r[1]||n[2]-r[2]);const e=[];for(const n of h(this,Vu))n[3]?(e.push(...D(this,fi,eD).call(this,n)),D(this,fi,e7).call(this,n)):(D(this,fi,t7).call(this,n),e.push(...D(this,fi,eD).call(this,n)));return D(this,fi,ZG).call(this,e)}}__=new WeakMap,x_=new WeakMap,A_=new WeakMap,Vu=new WeakMap,Ta=new WeakMap,fi=new WeakSet,ZG=function(e){const n=[],r=new Set;for(const a of e){const[o,l,c]=a;n.push([o,l,a],[o,c,a])}n.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=n.length;a<o;a+=2){const l=n[a][2],c=n[a+1][2];l.push(c),c.push(l),r.add(l),r.add(c)}const i=[];let s;for(;r.size>0;){const a=r.values().next().value;let[o,l,c,u,d]=a;r.delete(a);let f=o,p=l;for(s=[o,c],i.push(s);;){let g;if(r.has(u))g=u;else if(r.has(d))g=d;else break;r.delete(g),[o,l,c,u,d]=g,f!==o&&(s.push(f,p,o,p===l?l:c),f=o),p=p===l?c:l}s.push(f,p)}return new The(i,h(this,__),h(this,x_),h(this,A_))},IE=function(e){const n=h(this,Ta);let r=0,i=n.length-1;for(;r<=i;){const s=r+i>>1,a=n[s][0];if(a===e)return s;a<e?r=s+1:i=s-1}return i+1},e7=function([,e,n]){const r=D(this,fi,IE).call(this,e);h(this,Ta).splice(r,0,[e,n])},t7=function([,e,n]){const r=D(this,fi,IE).call(this,e);for(let i=r;i<h(this,Ta).length;i++){const[s,a]=h(this,Ta)[i];if(s!==e)break;if(s===e&&a===n){h(this,Ta).splice(i,1);return}}for(let i=r-1;i>=0;i--){const[s,a]=h(this,Ta)[i];if(s!==e)break;if(s===e&&a===n){h(this,Ta).splice(i,1);return}}},eD=function(e){const[n,r,i]=e,s=[[n,r,i]],a=D(this,fi,IE).call(this,i);for(let o=0;o<a;o++){const[l,c]=h(this,Ta)[o];for(let u=0,d=s.length;u<d;u++){const[,f,p]=s[u];if(!(c<=f||p<=l)){if(f>=l){if(p>c)s[u][1]=c;else{if(d===1)return[];s.splice(u,1),u--,d--}continue}s[u][2]=l,p>c&&s.push([n,c,p])}}}return s};var E_,Bg;class The extends le{constructor(n,r,i,s){super();k(this,E_);k(this,Bg);E(this,Bg,n),E(this,E_,r),this.firstPoint=i,this.lastPoint=s}toSVGPath(){const n=[];for(const r of h(this,Bg)){let[i,s]=r;n.push(`M${i} ${s}`);for(let a=2;a<r.length;a+=2){const o=r[a],l=r[a+1];o===i?(n.push(`V${l}`),s=l):l===s&&(n.push(`H${o}`),i=o)}n.push("Z")}return n.join(" ")}serialize([n,r,i,s],a){const o=[],l=i-n,c=s-r;for(const u of h(this,Bg)){const d=new Array(u.length);for(let f=0;f<u.length;f+=2)d[f]=n+u[f]*l,d[f+1]=s-u[f+1]*c;o.push(d)}return o}get box(){return h(this,E_)}get classNamesForOutlining(){return["highlightOutline"]}}E_=new WeakMap,Bg=new WeakMap;class tD extends zS{newFreeDrawOutline(e,n,r,i,s,a){return new Phe(e,n,r,i,s,a)}}class Phe extends QG{newOutliner(e,n,r,i,s,a=0){return new tD(e,n,r,i,s,a)}}var $g,S_,Fl,bf,T_,Ti,P_,C_,wf,ns,rs,pr,Ug,zg,Ur,Hg,Hs,I_,De,nD,kE,n7,r7,i7,rD,td,Xs,jp,s7,RE,OE,a7,o7,l7,c7,u7;const Qe=class Qe extends Tt{constructor(n){super({...n,name:"highlightEditor"});k(this,De);k(this,$g,null);k(this,S_,0);k(this,Fl);k(this,bf,null);k(this,T_,null);k(this,Ti,null);k(this,P_,null);k(this,C_,0);k(this,wf,null);k(this,ns,null);k(this,rs,null);k(this,pr,!1);k(this,Ug,null);k(this,zg,null);k(this,Ur,null);k(this,Hg,"");k(this,Hs);k(this,I_,"");this.color=n.color||Qe._defaultColor,E(this,Hs,n.thickness||Qe._defaultThickness),this.opacity=n.opacity||Qe._defaultOpacity,E(this,Fl,n.boxes||null),E(this,I_,n.methodOfCreation||""),E(this,Hg,n.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",n.highlightId>-1?(E(this,pr,!0),D(this,De,kE).call(this,n),D(this,De,td).call(this)):h(this,Fl)&&(E(this,$g,n.anchorNode),E(this,S_,n.anchorOffset),E(this,P_,n.focusNode),E(this,C_,n.focusOffset),D(this,De,nD).call(this),D(this,De,td).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const n=Qe.prototype;return Pe(this,"_keyboardManager",new K_([[["ArrowLeft","mac+ArrowLeft"],n._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],n._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],n._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],n._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:h(this,pr)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:h(this,Hs),methodOfCreation:h(this,I_)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(n){return{numberOfColors:n.get("color").size}}static initialize(n,r){var i;Tt.initialize(n,r),Qe._defaultColor||(Qe._defaultColor=((i=r.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(n,r){switch(n){case ze.HIGHLIGHT_COLOR:Qe._defaultColor=r;break;case ze.HIGHLIGHT_THICKNESS:Qe._defaultThickness=r;break}}translateInPage(n,r){}get toolbarPosition(){return h(this,zg)}get commentButtonPosition(){return h(this,Ug)}updateParams(n,r){switch(n){case ze.HIGHLIGHT_COLOR:D(this,De,n7).call(this,r);break;case ze.HIGHLIGHT_THICKNESS:D(this,De,r7).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[ze.HIGHLIGHT_COLOR,Qe._defaultColor],[ze.HIGHLIGHT_THICKNESS,Qe._defaultThickness]]}get propertiesToUpdate(){return[[ze.HIGHLIGHT_COLOR,this.color||Qe._defaultColor],[ze.HIGHLIGHT_THICKNESS,h(this,Hs)||Qe._defaultThickness],[ze.HIGHLIGHT_FREE,h(this,pr)]]}onUpdatedColor(){var n,r;(n=this.parent)==null||n.drawLayer.updateProperties(h(this,rs),{root:{fill:this.color,"fill-opacity":this.opacity}}),(r=h(this,T_))==null||r.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",E(this,T_,new BS({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(D(this,De,OE).call(this))}getBaseTranslation(){return[0,0]}getRect(n,r){return super.getRect(n,r,D(this,De,OE).call(this))}onceAdded(n){this.annotationElementId||this.parent.addUndoableEditor(this),n&&this.div.focus()}remove(){D(this,De,rD).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(D(this,De,td).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(n){var i;let r=!1;this.parent&&!n?D(this,De,rD).call(this):n&&(D(this,De,td).call(this,n),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(n),this.show(this._isVisible),r&&this.select()}rotate(n){var s,a,o;const{drawLayer:r}=this.parent;let i;h(this,pr)?(n=(n-this.rotation+360)%360,i=D(s=Qe,Xs,jp).call(s,h(this,ns).box,n)):i=D(a=Qe,Xs,jp).call(a,[this.x,this.y,this.width,this.height],n),r.updateProperties(h(this,rs),{bbox:i,root:{"data-main-rotation":n}}),r.updateProperties(h(this,Ur),{bbox:D(o=Qe,Xs,jp).call(o,h(this,Ti).box,n),root:{"data-main-rotation":n}})}render(){if(this.div)return this.div;const n=super.render();h(this,Hg)&&(n.setAttribute("aria-label",h(this,Hg)),n.setAttribute("role","mark")),h(this,pr)?n.classList.add("free"):this.div.addEventListener("keydown",D(this,De,s7).bind(this),{signal:this._uiManager._signal});const r=E(this,wf,document.createElement("div"));return n.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=h(this,bf),this.setDims(),I8(this,h(this,wf),["pointerover","pointerleave"]),this.enableEditing(),n}pointerover(){var n;this.isSelected||(n=this.parent)==null||n.drawLayer.updateProperties(h(this,Ur),{rootClass:{hovered:!0}})}pointerleave(){var n;this.isSelected||(n=this.parent)==null||n.drawLayer.updateProperties(h(this,Ur),{rootClass:{hovered:!1}})}_moveCaret(n){switch(this.parent.unselect(this),n){case 0:case 2:D(this,De,RE).call(this,!0);break;case 1:case 3:D(this,De,RE).call(this,!1);break}}select(){var n;super.select(),h(this,Ur)&&((n=this.parent)==null||n.drawLayer.updateProperties(h(this,Ur),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var n;super.unselect(),h(this,Ur)&&((n=this.parent)==null||n.drawLayer.updateProperties(h(this,Ur),{rootClass:{selected:!1}}),h(this,pr)||D(this,De,RE).call(this,!1))}get _mustFixPosition(){return!h(this,pr)}show(n=this._isVisible){super.show(n),this.parent&&(this.parent.drawLayer.updateProperties(h(this,rs),{rootClass:{hidden:!n}}),this.parent.drawLayer.updateProperties(h(this,Ur),{rootClass:{hidden:!n}}))}static startHighlighting(n,r,{target:i,x:s,y:a}){const{x:o,y:l,width:c,height:u}=i.getBoundingClientRect(),d=new AbortController,f=n.combinedSignal(d),p=g=>{d.abort(),D(this,Xs,c7).call(this,n,g)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",an,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",aa,{signal:f}),i.addEventListener("pointermove",D(this,Xs,l7).bind(this,n),{signal:f}),this._freeHighlight=new tD({x:s,y:a},[o,l,c,u],n.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(n,r,i){var y,v,b,_;let s=null;if(n instanceof FG){const{data:{quadPoints:w,rect:T,rotation:P,id:O,color:C,opacity:I,popupRef:M,richText:L,contentsObj:N,creationDate:F,modificationDate:j},parent:{page:{pageNumber:K}}}=n;s=n={annotationType:ke.HIGHLIGHT,color:Array.from(C),opacity:I,quadPoints:w,boxes:null,pageIndex:K-1,rect:T.slice(0),rotation:P,annotationElementId:O,id:O,deleted:!1,popupRef:M,richText:L,comment:(N==null?void 0:N.str)||null,creationDate:F,modificationDate:j}}else if(n instanceof M2){const{data:{inkLists:w,rect:T,rotation:P,id:O,color:C,borderStyle:{rawWidth:I},popupRef:M,richText:L,contentsObj:N,creationDate:F,modificationDate:j},parent:{page:{pageNumber:K}}}=n;s=n={annotationType:ke.HIGHLIGHT,color:Array.from(C),thickness:I,inkLists:w,boxes:null,pageIndex:K-1,rect:T.slice(0),rotation:P,annotationElementId:O,id:O,deleted:!1,popupRef:M,richText:L,comment:(N==null?void 0:N.str)||null,creationDate:F,modificationDate:j}}const{color:a,quadPoints:o,inkLists:l,opacity:c}=n,u=await super.deserialize(n,r,i);u.color=ue.makeHexColor(...a),u.opacity=c||1,l&&E(u,Hs,n.thickness),u._initialData=s,n.comment&&u.setCommentData(n);const[d,f]=u.pageDimensions,[p,g]=u.pageTranslation;if(o){const w=E(u,Fl,[]);for(let T=0;T<o.length;T+=8)w.push({x:(o[T]-p)/d,y:1-(o[T+1]-g)/f,width:(o[T+2]-o[T])/d,height:(o[T+1]-o[T+5])/f});D(y=u,De,nD).call(y),D(v=u,De,td).call(v),u.rotate(u.rotation)}else if(l){E(u,pr,!0);const w=l[0],T={x:w[0]-p,y:f-(w[1]-g)},P=new tD(T,[0,0,d,f],1,h(u,Hs)/2,!0,.001);for(let I=0,M=w.length;I<M;I+=2)T.x=w[I]-p,T.y=f-(w[I+1]-g),P.add(T);const{id:O,clipPathId:C}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:P.toSVGPath()}},!0,!0);D(b=u,De,kE).call(b,{highlightOutlines:P.getOutlines(),highlightId:O,clipPathId:C}),D(_=u,De,td).call(_),u.rotate(u.parentRotation)}return u}serialize(n=!1){if(this.isEmpty()||n)return null;if(this.deleted)return this.serializeDeleted();const r=Tt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(n);return Object.assign(i,{color:r,opacity:this.opacity,thickness:h(this,Hs),quadPoints:D(this,De,a7).call(this),outlines:D(this,De,o7).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!D(this,De,u7).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(n){return this.deleted?(n.hide(),null):(n.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};$g=new WeakMap,S_=new WeakMap,Fl=new WeakMap,bf=new WeakMap,T_=new WeakMap,Ti=new WeakMap,P_=new WeakMap,C_=new WeakMap,wf=new WeakMap,ns=new WeakMap,rs=new WeakMap,pr=new WeakMap,Ug=new WeakMap,zg=new WeakMap,Ur=new WeakMap,Hg=new WeakMap,Hs=new WeakMap,I_=new WeakMap,De=new WeakSet,nD=function(){const n=new ZO(h(this,Fl),.001);E(this,ns,n.getOutlines()),[this.x,this.y,this.width,this.height]=h(this,ns).box;const r=new ZO(h(this,Fl),.0025,.001,this._uiManager.direction==="ltr");E(this,Ti,r.getOutlines());const{firstPoint:i}=h(this,ns);E(this,Ug,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);const{lastPoint:s}=h(this,Ti);E(this,zg,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},kE=function({highlightOutlines:n,highlightId:r,clipPathId:i}){var f,p;if(E(this,ns,n),E(this,Ti,n.getNewOutline(h(this,Hs)/2+1.5,.0025)),r>=0)E(this,rs,r),E(this,bf,i),this.parent.drawLayer.finalizeDraw(r,{bbox:n.box,path:{d:n.toSVGPath()}}),E(this,Ur,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:h(this,Ti).box,path:{d:h(this,Ti).toSVGPath()}},!0));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(h(this,rs),{bbox:D(f=Qe,Xs,jp).call(f,h(this,ns).box,(g-this.rotation+360)%360),path:{d:n.toSVGPath()}}),this.parent.drawLayer.updateProperties(h(this,Ur),{bbox:D(p=Qe,Xs,jp).call(p,h(this,Ti).box,g),path:{d:h(this,Ti).toSVGPath()}})}const[a,o,l,c]=n.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=l,this.height=c;break;case 90:{const[g,y]=this.parentDimensions;this.x=o,this.y=1-a,this.width=l*y/g,this.height=c*g/y;break}case 180:this.x=1-a,this.y=1-o,this.width=l,this.height=c;break;case 270:{const[g,y]=this.parentDimensions;this.x=1-o,this.y=a,this.width=l*y/g,this.height=c*g/y;break}}const{firstPoint:u}=n;E(this,Ug,[(u[0]-a)/l,(u[1]-o)/c]);const{lastPoint:d}=h(this,Ti);E(this,zg,[(d[0]-a)/l,(d[1]-o)/c])},n7=function(n){const r=(a,o)=>{this.color=a,this.opacity=o,this.onUpdatedColor()},i=this.color,s=this.opacity;this.addCommands({cmd:r.bind(this,n,Qe._defaultOpacity),undo:r.bind(this,i,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(n)},!0)},r7=function(n){const r=h(this,Hs),i=s=>{E(this,Hs,s),D(this,De,i7).call(this,s)};this.addCommands({cmd:i.bind(this,n),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:n},!0)},i7=function(n){h(this,pr)&&(D(this,De,kE).call(this,{highlightOutlines:h(this,ns).getNewOutline(n/2)}),this.fixAndSetPosition(),this.setDims())},rD=function(){h(this,rs)===null||!this.parent||(this.parent.drawLayer.remove(h(this,rs)),E(this,rs,null),this.parent.drawLayer.remove(h(this,Ur)),E(this,Ur,null))},td=function(n=this.parent){h(this,rs)===null&&({id:In(this,rs)._,clipPathId:In(this,bf)._}=n.drawLayer.draw({bbox:h(this,ns).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:h(this,pr)},path:{d:h(this,ns).toSVGPath()}},!1,!0),E(this,Ur,n.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:h(this,pr)},bbox:h(this,Ti).box,path:{d:h(this,Ti).toSVGPath()}},h(this,pr))),h(this,wf)&&(h(this,wf).style.clipPath=h(this,bf)))},Xs=new WeakSet,jp=function([n,r,i,s],a){switch(a){case 90:return[1-r-s,n,s,i];case 180:return[1-n-i,1-r-s,i,s];case 270:return[r,1-n-i,s,i]}return[n,r,i,s]},s7=function(n){Qe._keyboardManager.exec(this,n)},RE=function(n){if(!h(this,$g))return;const r=window.getSelection();n?r.setPosition(h(this,$g),h(this,S_)):r.setPosition(h(this,P_),h(this,C_))},OE=function(){return h(this,pr)?this.rotation:0},a7=function(){if(h(this,pr))return null;const[n,r]=this.pageDimensions,[i,s]=this.pageTranslation,a=h(this,Fl),o=new Float32Array(a.length*8);let l=0;for(const{x:c,y:u,width:d,height:f}of a){const p=c*n+i,g=(1-u)*r+s;o[l]=o[l+4]=p,o[l+1]=o[l+3]=g,o[l+2]=o[l+6]=p+d*n,o[l+5]=o[l+7]=g-f*r,l+=8}return o},o7=function(n){return h(this,ns).serialize(n,D(this,De,OE).call(this))},l7=function(n,r){this._freeHighlight.add(r)&&n.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},c7=function(n,r){this._freeHighlight.isEmpty()?n.drawLayer.remove(this._freeHighlightId):n.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},u7=function(n){const{color:r}=this._initialData;return this.hasEditedComment||n.color.some((i,s)=>i!==r[s])},k(Qe,Xs),Y(Qe,"_defaultColor",null),Y(Qe,"_defaultOpacity",1),Y(Qe,"_defaultThickness",12),Y(Qe,"_type","highlight"),Y(Qe,"_editorType",ke.HIGHLIGHT),Y(Qe,"_freeHighlightId",-1),Y(Qe,"_freeHighlight",null),Y(Qe,"_freeHighlightClipId","");let HS=Qe;var _f;class h7{constructor(){k(this,_f,Object.create(null))}updateProperty(e,n){this[e]=n,this.updateSVGProperty(e,n)}updateProperties(e){if(e)for(const[n,r]of Object.entries(e))n.startsWith("_")||this.updateProperty(n,r)}updateSVGProperty(e,n){h(this,_f)[e]=n}toSVGProperties(){const e=h(this,_f);return E(this,_f,Object.create(null)),{root:e}}reset(){E(this,_f,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){bt("Not implemented")}}_f=new WeakMap;var is,Wg,qn,xf,Af,Ke,iD,sD,aD,i0,d7,DE,s0,Fp;const Ve=class Ve extends Tt{constructor(n){super(n);k(this,Ke);k(this,is,null);k(this,Wg);Y(this,"_colorPicker",null);Y(this,"_drawId",null);E(this,Wg,n.mustBeCommitted||!1),this._addOutlines(n)}onUpdatedColor(){var n;(n=this._colorPicker)==null||n.update(this.color),super.onUpdatedColor()}_addOutlines(n){n.drawOutlines&&(D(this,Ke,iD).call(this,n),D(this,Ke,i0).call(this))}static _mergeSVGProperties(n,r){const i=new Set(Object.keys(n));for(const[s,a]of Object.entries(r))i.has(s)?Object.assign(n[s],a):n[s]=a;return n}static getDefaultDrawingOptions(n){bt("Not implemented")}static get typesMap(){bt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(n,r){const i=this.typesMap.get(n);i&&this._defaultDrawingOptions.updateProperty(i,r),this._currentParent&&(h(Ve,qn).updateProperty(i,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(n,r){const i=this.constructor.typesMap.get(n);i&&this._updateProperty(n,i,r)}static get defaultPropertiesToUpdate(){const n=[],r=this._defaultDrawingOptions;for(const[i,s]of this.typesMap)n.push([i,r[s]]);return n}get propertiesToUpdate(){const n=[],{_drawingOptions:r}=this;for(const[i,s]of this.constructor.typesMap)n.push([i,r[s]]);return n}_updateProperty(n,r,i){const s=this._drawingOptions,a=s[r],o=l=>{var u;s.updateProperty(r,l);const c=h(this,is).updateProperty(r,l);c&&D(this,Ke,s0).call(this,c),(u=this.parent)==null||u.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),n===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,i),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:n,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,Ve._mergeSVGProperties(h(this,is).getPathResizingSVGProperties(D(this,Ke,DE).call(this)),{bbox:D(this,Ke,Fp).call(this)}))}_onResized(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,Ve._mergeSVGProperties(h(this,is).getPathResizedSVGProperties(D(this,Ke,DE).call(this)),{bbox:D(this,Ke,Fp).call(this)}))}_onTranslating(n,r){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:D(this,Ke,Fp).call(this)})}_onTranslated(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,Ve._mergeSVGProperties(h(this,is).getPathTranslatedSVGProperties(D(this,Ke,DE).call(this),this.parentDimensions),{bbox:D(this,Ke,Fp).call(this)}))}_onStartDragging(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(n){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,h(this,Wg)&&(E(this,Wg,!1),this.commit(),this.parent.setSelected(this),n&&this.isOnScreen&&this.div.focus())}remove(){D(this,Ke,aD).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(D(this,Ke,i0).call(this),D(this,Ke,s0).call(this,h(this,is).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(n){var i;let r=!1;this.parent&&!n?(this._uiManager.removeShouldRescale(this),D(this,Ke,aD).call(this)):n&&(this._uiManager.addShouldRescale(this),D(this,Ke,i0).call(this,n),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(n),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ve._mergeSVGProperties({bbox:D(this,Ke,Fp).call(this)},h(this,is).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&D(this,Ke,s0).call(this,h(this,is).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let n,r;this._isCopy&&(n=this.x,r=this.y);const i=super.render();i.classList.add("draw");const s=document.createElement("div");return i.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(n,r),i}static createDrawerInstance(n,r,i,s,a){bt("Not implemented")}static startDrawing(n,r,i,s){var v;const{target:a,offsetX:o,offsetY:l,pointerId:c,pointerType:u}=s;if(jr.isInitializedAndDifferentPointerType(u))return;const{viewport:{rotation:d}}=n,{width:f,height:p}=a.getBoundingClientRect(),g=E(Ve,xf,new AbortController),y=n.combinedSignal(g);if(jr.setPointer(u,c),window.addEventListener("pointerup",b=>{jr.isSamePointerIdOrRemove(b.pointerId)&&this._endDraw(b)},{signal:y}),window.addEventListener("pointercancel",b=>{jr.isSamePointerIdOrRemove(b.pointerId)&&this._currentParent.endDrawingSession()},{signal:y}),window.addEventListener("pointerdown",b=>{jr.isSamePointerType(b.pointerType)&&(jr.initializeAndAddPointerId(b.pointerId),h(Ve,qn).isCancellable()&&(h(Ve,qn).removeLastElement(),h(Ve,qn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",aa,{signal:y}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:y}),a.addEventListener("touchmove",b=>{jr.isSameTimeStamp(b.timeStamp)&&an(b)},{signal:y}),n.toggleDrawing(),(v=r._editorUndoBar)==null||v.hide(),h(Ve,qn)){n.drawLayer.updateProperties(this._currentDrawId,h(Ve,qn).startNew(o,l,f,p,d));return}r.updateUIForDefaultProperties(this),E(Ve,qn,this.createDrawerInstance(o,l,f,p,d)),E(Ve,Af,this.getDefaultDrawingOptions()),this._currentParent=n,{id:this._currentDrawId}=n.drawLayer.draw(this._mergeSVGProperties(h(Ve,Af).toSVGProperties(),h(Ve,qn).defaultSVGProperties),!0,!1)}static _drawMove(n){if(jr.isSameTimeStamp(n.timeStamp),!h(Ve,qn))return;const{offsetX:r,offsetY:i,pointerId:s}=n;if(jr.isSamePointerId(s)){if(jr.isUsingMultiplePointers()){this._endDraw(n);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,h(Ve,qn).add(r,i)),jr.setTimeStamp(n.timeStamp),an(n)}}static _cleanup(n){n&&(this._currentDrawId=-1,this._currentParent=null,E(Ve,qn,null),E(Ve,Af,null),jr.clearPointerType(),jr.clearTimeStamp()),h(Ve,xf)&&(h(Ve,xf).abort(),E(Ve,xf,null),jr.clearPointerIds())}static _endDraw(n){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),(n==null?void 0:n.target)===r.div&&r.drawLayer.updateProperties(this._currentDrawId,h(Ve,qn).end(n.offsetX,n.offsetY)),this.supportMultipleDrawings){const i=h(Ve,qn),s=this._currentDrawId,a=i.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(s,i.setLastElement(a))},undo:()=>{r.drawLayer.updateProperties(s,i.removeLastElement())},mustExec:!1,type:ze.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(n){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(ze.DRAW_STEP),!h(Ve,qn).isEmpty()){const{pageDimensions:[i,s],scale:a}=r,o=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:h(Ve,qn).getOutlines(i*a,s*a,a,this._INNER_MARGIN),drawingOptions:h(Ve,Af),mustBeCommitted:!n});return this._cleanup(!0),o}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(n){}static deserializeDraw(n,r,i,s,a,o){bt("Not implemented")}static async deserialize(n,r,i){var d,f;const{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}=r.viewport,c=this.deserializeDraw(o,l,s,a,this._INNER_MARGIN,n),u=await super.deserialize(n,r,i);return u.createDrawingOptions(n),D(d=u,Ke,iD).call(d,{drawOutlines:c}),D(f=u,Ke,i0).call(f),u.onScaleChanging(),u.rotate(),u}serializeDraw(n){const[r,i]=this.pageTranslation,[s,a]=this.pageDimensions;return h(this,is).serialize([r,i,s,a],n)}renderAnnotationElement(n){return n.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};is=new WeakMap,Wg=new WeakMap,qn=new WeakMap,xf=new WeakMap,Af=new WeakMap,Ke=new WeakSet,iD=function({drawOutlines:n,drawId:r,drawingOptions:i}){E(this,is,n),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,n.defaultProperties)):this._drawId=D(this,Ke,sD).call(this,n,this.parent),D(this,Ke,s0).call(this,n.box)},sD=function(n,r){const{id:i}=r.drawLayer.draw(Ve._mergeSVGProperties(this._drawingOptions.toSVGProperties(),n.defaultSVGProperties),!1,!1);return i},aD=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},i0=function(n=this.parent){if(!(this._drawId!==null&&this.parent===n)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,n.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=D(this,Ke,sD).call(this,h(this,is),n)}},d7=function([n,r,i,s]){const{parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[r,1-n,i*(o/a),s*(a/o)];case 180:return[1-n,1-r,i,s];case 270:return[1-r,n,i*(o/a),s*(a/o)];default:return[n,r,i,s]}},DE=function(){const{x:n,y:r,width:i,height:s,parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[1-r,n,i*(a/o),s*(o/a)];case 180:return[1-n,1-r,i,s];case 270:return[r,1-n,i*(a/o),s*(o/a)];default:return[n,r,i,s]}},s0=function(n){[this.x,this.y,this.width,this.height]=D(this,Ke,d7).call(this,n),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Fp=function(){const{x:n,y:r,width:i,height:s,rotation:a,parentRotation:o,parentDimensions:[l,c]}=this;switch((a*4+o)/90){case 1:return[1-r-s,n,s,i];case 2:return[1-n-i,1-r-s,i,s];case 3:return[r,1-n-i,s,i];case 4:return[n,r-i*(l/c),s*(c/l),i*(l/c)];case 5:return[1-r,n,i*(l/c),s*(c/l)];case 6:return[1-n-s*(c/l),1-r,s*(c/l),i*(l/c)];case 7:return[r-i*(l/c),1-n-s*(c/l),i*(l/c),s*(c/l)];case 8:return[n-i,r-s,i,s];case 9:return[1-r,n-i,s,i];case 10:return[1-n,1-r,i,s];case 11:return[r-s,1-n,s,i];case 12:return[n-s*(c/l),r,s*(c/l),i*(l/c)];case 13:return[1-r-i*(l/c),n-s*(c/l),i*(l/c),s*(c/l)];case 14:return[1-n,1-r-i*(l/c),s*(c/l),i*(l/c)];case 15:return[r,1-n,i*(l/c),s*(c/l)];default:return[n,r,i,s]}},Y(Ve,"_currentDrawId",-1),Y(Ve,"_currentParent",null),k(Ve,qn,null),k(Ve,xf,null),k(Ve,Af,null),Y(Ve,"_INNER_MARGIN",3);let WS=Ve;var Ao,Xn,Yn,Ef,Gg,ri,mr,Ws,Sf,Tf,Pf,Kg,ME;class Che{constructor(e,n,r,i,s,a){k(this,Kg);k(this,Ao,new Float64Array(6));k(this,Xn);k(this,Yn);k(this,Ef);k(this,Gg);k(this,ri);k(this,mr,"");k(this,Ws,0);k(this,Sf,new X_);k(this,Tf);k(this,Pf);E(this,Tf,r),E(this,Pf,i),E(this,Ef,s),E(this,Gg,a),[e,n]=D(this,Kg,ME).call(this,e,n);const o=E(this,Xn,[NaN,NaN,NaN,NaN,e,n]);E(this,ri,[e,n]),E(this,Yn,[{line:o,points:h(this,ri)}]),h(this,Ao).set(o,0)}updateProperty(e,n){e==="stroke-width"&&E(this,Gg,n)}isEmpty(){return!h(this,Yn)||h(this,Yn).length===0}isCancellable(){return h(this,ri).length<=10}add(e,n){[e,n]=D(this,Kg,ME).call(this,e,n);const[r,i,s,a]=h(this,Ao).subarray(2,6),o=e-s,l=n-a;return Math.hypot(h(this,Tf)*o,h(this,Pf)*l)<=2?null:(h(this,ri).push(e,n),isNaN(r)?(h(this,Ao).set([s,a,e,n],2),h(this,Xn).push(NaN,NaN,NaN,NaN,e,n),{path:{d:this.toSVGPath()}}):(isNaN(h(this,Ao)[0])&&h(this,Xn).splice(6,6),h(this,Ao).set([r,i,s,a,e,n],0),h(this,Xn).push(...le.createBezierPoints(r,i,s,a,e,n)),{path:{d:this.toSVGPath()}}))}end(e,n){const r=this.add(e,n);return r||(h(this,ri).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,n,r,i,s){E(this,Tf,r),E(this,Pf,i),E(this,Ef,s),[e,n]=D(this,Kg,ME).call(this,e,n);const a=E(this,Xn,[NaN,NaN,NaN,NaN,e,n]);E(this,ri,[e,n]);const o=h(this,Yn).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),h(this,Yn).push({line:a,points:h(this,ri)}),h(this,Ao).set(a,0),E(this,Ws,0),this.toSVGPath(),null}getLastElement(){return h(this,Yn).at(-1)}setLastElement(e){return h(this,Yn)?(h(this,Yn).push(e),E(this,Xn,e.line),E(this,ri,e.points),E(this,Ws,0),{path:{d:this.toSVGPath()}}):h(this,Sf).setLastElement(e)}removeLastElement(){if(!h(this,Yn))return h(this,Sf).removeLastElement();h(this,Yn).pop(),E(this,mr,"");for(let e=0,n=h(this,Yn).length;e<n;e++){const{line:r,points:i}=h(this,Yn)[e];E(this,Xn,r),E(this,ri,i),E(this,Ws,0),this.toSVGPath()}return{path:{d:h(this,mr)}}}toSVGPath(){const e=le.svgRound(h(this,Xn)[4]),n=le.svgRound(h(this,Xn)[5]);if(h(this,ri).length===2)return E(this,mr,`${h(this,mr)} M ${e} ${n} Z`),h(this,mr);if(h(this,ri).length<=6){const i=h(this,mr).lastIndexOf("M");E(this,mr,`${h(this,mr).slice(0,i)} M ${e} ${n}`),E(this,Ws,6)}if(h(this,ri).length===4){const i=le.svgRound(h(this,Xn)[10]),s=le.svgRound(h(this,Xn)[11]);return E(this,mr,`${h(this,mr)} L ${i} ${s}`),E(this,Ws,12),h(this,mr)}const r=[];h(this,Ws)===0&&(r.push(`M ${e} ${n}`),E(this,Ws,6));for(let i=h(this,Ws),s=h(this,Xn).length;i<s;i+=6){const[a,o,l,c,u,d]=h(this,Xn).slice(i,i+6).map(le.svgRound);r.push(`C${a} ${o} ${l} ${c} ${u} ${d}`)}return E(this,mr,h(this,mr)+r.join(" ")),E(this,Ws,h(this,Xn).length),h(this,mr)}getOutlines(e,n,r,i){const s=h(this,Yn).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),h(this,Sf).build(h(this,Yn),e,n,r,h(this,Ef),h(this,Gg),i),E(this,Ao,null),E(this,Xn,null),E(this,Yn,null),E(this,mr,null),h(this,Sf)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ao=new WeakMap,Xn=new WeakMap,Yn=new WeakMap,Ef=new WeakMap,Gg=new WeakMap,ri=new WeakMap,mr=new WeakMap,Ws=new WeakMap,Sf=new WeakMap,Tf=new WeakMap,Pf=new WeakMap,Kg=new WeakSet,ME=function(e,n){return le._normalizePoint(e,n,h(this,Tf),h(this,Pf),h(this,Ef))};var ii,k_,R_,ss,Eo,So,qg,Xg,Cf,_r,il,f7,p7,m7;class X_ extends le{constructor(){super(...arguments);k(this,_r);k(this,ii);k(this,k_,0);k(this,R_);k(this,ss);k(this,Eo);k(this,So);k(this,qg);k(this,Xg);k(this,Cf)}build(n,r,i,s,a,o,l){E(this,Eo,r),E(this,So,i),E(this,qg,s),E(this,Xg,a),E(this,Cf,o),E(this,R_,l??0),E(this,ss,n),D(this,_r,p7).call(this)}get thickness(){return h(this,Cf)}setLastElement(n){return h(this,ss).push(n),{path:{d:this.toSVGPath()}}}removeLastElement(){return h(this,ss).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const n=[];for(const{line:r}of h(this,ss)){if(n.push(`M${le.svgRound(r[4])} ${le.svgRound(r[5])}`),r.length===6){n.push("Z");continue}if(r.length===12&&isNaN(r[6])){n.push(`L${le.svgRound(r[10])} ${le.svgRound(r[11])}`);continue}for(let i=6,s=r.length;i<s;i+=6){const[a,o,l,c,u,d]=r.subarray(i,i+6).map(le.svgRound);n.push(`C${a} ${o} ${l} ${c} ${u} ${d}`)}}return n.join("")}serialize([n,r,i,s],a){const o=[],l=[],[c,u,d,f]=D(this,_r,f7).call(this);let p,g,y,v,b,_,w,T,P;switch(h(this,Xg)){case 0:P=le._rescale,p=n,g=r+s,y=i,v=-s,b=n+c*i,_=r+(1-u-f)*s,w=n+(c+d)*i,T=r+(1-u)*s;break;case 90:P=le._rescaleAndSwap,p=n,g=r,y=i,v=s,b=n+u*i,_=r+c*s,w=n+(u+f)*i,T=r+(c+d)*s;break;case 180:P=le._rescale,p=n+i,g=r,y=-i,v=s,b=n+(1-c-d)*i,_=r+u*s,w=n+(1-c)*i,T=r+(u+f)*s;break;case 270:P=le._rescaleAndSwap,p=n+i,g=r+s,y=-i,v=-s,b=n+(1-u-f)*i,_=r+(1-c-d)*s,w=n+(1-u)*i,T=r+(1-c)*s;break}for(const{line:O,points:C}of h(this,ss))o.push(P(O,p,g,y,v,a?new Array(O.length):null)),l.push(P(C,p,g,y,v,a?new Array(C.length):null));return{lines:o,points:l,rect:[b,_,w,T]}}static deserialize(n,r,i,s,a,{paths:{lines:o,points:l},rotation:c,thickness:u}){const d=[];let f,p,g,y,v;switch(c){case 0:v=le._rescale,f=-n/i,p=r/s+1,g=1/i,y=-1/s;break;case 90:v=le._rescaleAndSwap,f=-r/s,p=-n/i,g=1/s,y=1/i;break;case 180:v=le._rescale,f=n/i+1,p=-r/s,g=-1/i,y=1/s;break;case 270:v=le._rescaleAndSwap,f=r/s+1,p=n/i+1,g=-1/s,y=-1/i;break}if(!o){o=[];for(const _ of l){const w=_.length;if(w===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1]]));continue}if(w===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1],NaN,NaN,NaN,NaN,_[2],_[3]]));continue}const T=new Float32Array(3*(w-2));o.push(T);let[P,O,C,I]=_.subarray(0,4);T.set([NaN,NaN,NaN,NaN,P,O],0);for(let M=4;M<w;M+=2){const L=_[M],N=_[M+1];T.set(le.createBezierPoints(P,O,C,I,L,N),(M-2)*3),[P,O,C,I]=[C,I,L,N]}}}for(let _=0,w=o.length;_<w;_++)d.push({line:v(o[_].map(T=>T??NaN),f,p,g,y),points:v(l[_].map(T=>T??NaN),f,p,g,y)});const b=new this.prototype.constructor;return b.build(d,i,s,1,c,u,a),b}get box(){return h(this,ii)}updateProperty(n,r){return n==="stroke-width"?D(this,_r,m7).call(this,r):null}updateParentDimensions([n,r],i){const[s,a]=D(this,_r,il).call(this);E(this,Eo,n),E(this,So,r),E(this,qg,i);const[o,l]=D(this,_r,il).call(this),c=o-s,u=l-a,d=h(this,ii);return d[0]-=c,d[1]-=u,d[2]+=2*c,d[3]+=2*u,d}updateRotation(n){return E(this,k_,n),{path:{transform:this.rotationTransform}}}get viewBox(){return h(this,ii).map(le.svgRound).join(" ")}get defaultProperties(){const[n,r]=h(this,ii);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${le.svgRound(n)} ${le.svgRound(r)}`}}}get rotationTransform(){const[,,n,r]=h(this,ii);let i=0,s=0,a=0,o=0,l=0,c=0;switch(h(this,k_)){case 90:s=r/n,a=-n/r,l=n;break;case 180:i=-1,o=-1,l=n,c=r;break;case 270:s=-r/n,a=n/r,c=r;break;default:return""}return`matrix(${i} ${s} ${a} ${o} ${le.svgRound(l)} ${le.svgRound(c)})`}getPathResizingSVGProperties([n,r,i,s]){const[a,o]=D(this,_r,il).call(this),[l,c,u,d]=h(this,ii);if(Math.abs(u-a)<=le.PRECISION||Math.abs(d-o)<=le.PRECISION){const v=n+i/2-(l+u/2),b=r+s/2-(c+d/2);return{path:{"transform-origin":`${le.svgRound(n)} ${le.svgRound(r)}`,transform:`${this.rotationTransform} translate(${v} ${b})`}}}const f=(i-2*a)/(u-2*a),p=(s-2*o)/(d-2*o),g=u/i,y=d/s;return{path:{"transform-origin":`${le.svgRound(l)} ${le.svgRound(c)}`,transform:`${this.rotationTransform} scale(${g} ${y}) translate(${le.svgRound(a)} ${le.svgRound(o)}) scale(${f} ${p}) translate(${le.svgRound(-a)} ${le.svgRound(-o)})`}}}getPathResizedSVGProperties([n,r,i,s]){const[a,o]=D(this,_r,il).call(this),l=h(this,ii),[c,u,d,f]=l;if(l[0]=n,l[1]=r,l[2]=i,l[3]=s,Math.abs(d-a)<=le.PRECISION||Math.abs(f-o)<=le.PRECISION){const b=n+i/2-(c+d/2),_=r+s/2-(u+f/2);for(const{line:w,points:T}of h(this,ss))le._translate(w,b,_,w),le._translate(T,b,_,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${le.svgRound(n)} ${le.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(i-2*a)/(d-2*a),g=(s-2*o)/(f-2*o),y=-p*(c+a)+n+a,v=-g*(u+o)+r+o;if(p!==1||g!==1||y!==0||v!==0)for(const{line:b,points:_}of h(this,ss))le._rescale(b,y,v,p,g,b),le._rescale(_,y,v,p,g,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${le.svgRound(n)} ${le.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([n,r],i){const[s,a]=i,o=h(this,ii),l=n-o[0],c=r-o[1];if(h(this,Eo)===s&&h(this,So)===a)for(const{line:u,points:d}of h(this,ss))le._translate(u,l,c,u),le._translate(d,l,c,d);else{const u=h(this,Eo)/s,d=h(this,So)/a;E(this,Eo,s),E(this,So,a);for(const{line:f,points:p}of h(this,ss))le._rescale(f,l,c,u,d,f),le._rescale(p,l,c,u,d,p);o[2]*=u,o[3]*=d}return o[0]=n,o[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${le.svgRound(n)} ${le.svgRound(r)}`}}}get defaultSVGProperties(){const n=h(this,ii);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${le.svgRound(n[0])} ${le.svgRound(n[1])}`,transform:this.rotationTransform||null},bbox:n}}}ii=new WeakMap,k_=new WeakMap,R_=new WeakMap,ss=new WeakMap,Eo=new WeakMap,So=new WeakMap,qg=new WeakMap,Xg=new WeakMap,Cf=new WeakMap,_r=new WeakSet,il=function(n=h(this,Cf)){const r=h(this,R_)+n/2*h(this,qg);return h(this,Xg)%180===0?[r/h(this,Eo),r/h(this,So)]:[r/h(this,So),r/h(this,Eo)]},f7=function(){const[n,r,i,s]=h(this,ii),[a,o]=D(this,_r,il).call(this,0);return[n+a,r+o,i-2*a,s-2*o]},p7=function(){const n=E(this,ii,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of h(this,ss)){if(s.length<=12){for(let l=4,c=s.length;l<c;l+=6)ue.pointBoundingBox(s[l],s[l+1],n);continue}let a=s[4],o=s[5];for(let l=6,c=s.length;l<c;l+=6){const[u,d,f,p,g,y]=s.subarray(l,l+6);ue.bezierBoundingBox(a,o,u,d,f,p,g,y,n),a=g,o=y}}const[r,i]=D(this,_r,il).call(this);n[0]=oi(n[0]-r,0,1),n[1]=oi(n[1]-i,0,1),n[2]=oi(n[2]+r,0,1),n[3]=oi(n[3]+i,0,1),n[2]-=n[0],n[3]-=n[1]},m7=function(n){const[r,i]=D(this,_r,il).call(this);E(this,Cf,n);const[s,a]=D(this,_r,il).call(this),[o,l]=[s-r,a-i],c=h(this,ii);return c[0]-=o,c[1]-=l,c[2]+=2*o,c[3]+=2*l,c};class QT extends h7{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Tt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,n){e==="stroke-width"&&(n??(n=this["stroke-width"]),n*=this._viewParameters.realScale),super.updateSVGProperty(e,n)}clone(){const e=new QT(this._viewParameters);return e.updateAll(this),e}}var AT,g7;const mm=class mm extends WS{constructor(n){super({...n,name:"inkEditor"});k(this,AT);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(n,r){Tt.initialize(n,r),this._defaultDrawingOptions=new QT(r.viewParameters)}static getDefaultDrawingOptions(n){const r=this._defaultDrawingOptions.clone();return r.updateProperties(n),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return Pe(this,"typesMap",new Map([[ze.INK_THICKNESS,"stroke-width"],[ze.INK_COLOR,"stroke"],[ze.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(n,r,i,s,a){return new Che(n,r,i,s,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(n,r,i,s,a,o){return X_.deserialize(n,r,i,s,a,o)}static async deserialize(n,r,i){let s=null;if(n instanceof M2){const{data:{inkLists:o,rect:l,rotation:c,id:u,color:d,opacity:f,borderStyle:{rawWidth:p},popupRef:g,richText:y,contentsObj:v,creationDate:b,modificationDate:_},parent:{page:{pageNumber:w}}}=n;s=n={annotationType:ke.INK,color:Array.from(d),thickness:p,opacity:f,paths:{points:o},boxes:null,pageIndex:w-1,rect:l.slice(0),rotation:c,annotationElementId:u,id:u,deleted:!1,popupRef:g,richText:y,comment:(v==null?void 0:v.str)||null,creationDate:b,modificationDate:_}}const a=await super.deserialize(n,r,i);return a._initialData=s,n.comment&&a.setCommentData(n),a}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new $S(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ze.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:n,_drawingOptions:r,parent:i}=this;r.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(n,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const n=this._currentParent;n&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:n,thickness:r,opacity:i}){this._drawingOptions=mm.getDefaultDrawingOptions({stroke:ue.makeHexColor(...n),"stroke-width":r,"stroke-opacity":i})}serialize(n=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:i}=this.serializeDraw(n),{_drawingOptions:{stroke:s,"stroke-opacity":a,"stroke-width":o}}=this,l=Object.assign(super.serialize(n),{color:Tt._colorManager.convert(s),opacity:a,thickness:o,paths:{lines:r,points:i}});return this.addComment(l),n?(l.isCopy=!0,l):this.annotationElementId&&!D(this,AT,g7).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(n){if(this.deleted)return n.hide(),null;const{points:r,rect:i}=this.serializeDraw(!1);return n.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:r,popup:this.comment}),null}};AT=new WeakSet,g7=function(n){const{color:r,thickness:i,opacity:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||n.color.some((o,l)=>o!==r[l])||n.thickness!==i||n.opacity!==s||n.pageIndex!==a},Y(mm,"_type","ink"),Y(mm,"_editorType",ke.INK),Y(mm,"_defaultDrawingOptions",null);let oD=mm;class lD extends X_{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const vA=8,Pv=3;var If,Ze,cD,Pa,y7,v7,uD,NE,b7,w7,_7,hD,dD,x7;class Hl{static extractContoursFromText(e,{fontFamily:n,fontStyle:r,fontWeight:i},s,a,o,l){let c=new OffscreenCanvas(1,1),u=c.getContext("2d",{alpha:!1});const d=200,f=u.font=`${r} ${i} ${d}px ${n}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:g,actualBoundingBoxAscent:y,actualBoundingBoxDescent:v,fontBoundingBoxAscent:b,fontBoundingBoxDescent:_,width:w}=u.measureText(e),T=1.5,P=Math.ceil(Math.max(Math.abs(p)+Math.abs(g)||0,w)*T),O=Math.ceil(Math.max(Math.abs(y)+Math.abs(v)||d,Math.abs(b)+Math.abs(_)||d)*T);c=new OffscreenCanvas(P,O),u=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=f,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,P,O),u.fillStyle="black",u.fillText(e,P*(T-1)/2,O*(3-T)/2);const C=D(this,Ze,hD).call(this,u.getImageData(0,0,P,O).data),I=D(this,Ze,_7).call(this,C),M=D(this,Ze,dD).call(this,I),L=D(this,Ze,uD).call(this,C,P,O,M);return this.processDrawnLines({lines:{curves:L,width:P,height:O},pageWidth:s,pageHeight:a,rotation:o,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,n,r,i,s){const[a,o,l]=D(this,Ze,x7).call(this,e),[c,u]=D(this,Ze,w7).call(this,a,o,l,Math.hypot(o,l)*h(this,If).sigmaSFactor,h(this,If).sigmaR,h(this,If).kernelSize),d=D(this,Ze,dD).call(this,u),f=D(this,Ze,uD).call(this,c,o,l,d);return this.processDrawnLines({lines:{curves:f,width:o,height:l},pageWidth:n,pageHeight:r,rotation:i,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:n,pageHeight:r,rotation:i,innerMargin:s,mustSmooth:a,areContours:o}){i%180!==0&&([n,r]=[r,n]);const{curves:l,width:c,height:u}=e,d=e.thickness??0,f=[],p=Math.min(n/c,r/u),g=p/n,y=p/r,v=[];for(const{points:_}of l){const w=a?D(this,Ze,b7).call(this,_):_;if(!w)continue;v.push(w);const T=w.length,P=new Float32Array(T),O=new Float32Array(3*(T===2?2:T-2));if(f.push({line:O,points:P}),T===2){P[0]=w[0]*g,P[1]=w[1]*y,O.set([NaN,NaN,NaN,NaN,P[0],P[1]],0);continue}let[C,I,M,L]=w;C*=g,I*=y,M*=g,L*=y,P.set([C,I,M,L],0),O.set([NaN,NaN,NaN,NaN,C,I],0);for(let N=4;N<T;N+=2){const F=P[N]=w[N]*g,j=P[N+1]=w[N+1]*y;O.set(le.createBezierPoints(C,I,M,L,F,j),(N-2)*3),[C,I,M,L]=[M,L,F,j]}}if(f.length===0)return null;const b=o?new lD:new X_;return b.build(f,n,r,1,i,o?0:d,s),{outline:b,newCurves:v,areContours:o,thickness:d,width:c,height:u}}static async compressSignature({outlines:e,areContours:n,thickness:r,width:i,height:s}){let a=1/0,o=-1/0,l=0;for(const w of e){l+=w.length;for(let T=2,P=w.length;T<P;T++){const O=w[T]-w[T-2];a=Math.min(a,O),o=Math.max(o,O)}}let c;a>=-128&&o<=127?c=Int8Array:a>=-32768&&o<=32767?c=Int16Array:c=Int32Array;const u=e.length,d=vA+Pv*u,f=new Uint32Array(d);let p=0;f[p++]=d*Uint32Array.BYTES_PER_ELEMENT+(l-2*u)*c.BYTES_PER_ELEMENT,f[p++]=0,f[p++]=i,f[p++]=s,f[p++]=n?0:1,f[p++]=Math.max(0,Math.floor(r??0)),f[p++]=u,f[p++]=c.BYTES_PER_ELEMENT;for(const w of e)f[p++]=w.length-2,f[p++]=w[0],f[p++]=w[1];const g=new CompressionStream("deflate-raw"),y=g.writable.getWriter();await y.ready,y.write(f);const v=c.prototype.constructor;for(const w of e){const T=new v(w.length-2);for(let P=2,O=w.length;P<O;P++)T[P-2]=w[P]-w[P-2];y.write(T)}y.close();const b=await new Response(g.readable).arrayBuffer(),_=new Uint8Array(b);return w8(_)}static async decompressSignature(e){try{const n=Hce(e),{readable:r,writable:i}=new DecompressionStream("deflate-raw"),s=i.getWriter();await s.ready,s.write(n).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let a=null,o=0;for await(const w of r)a||(a=new Uint8Array(new Uint32Array(w.buffer,0,4)[0])),a.set(w,o),o+=w.length;const l=new Uint32Array(a.buffer,0,a.length>>2),c=l[1];if(c!==0)throw new Error(`Invalid version: ${c}`);const u=l[2],d=l[3],f=l[4]===0,p=l[5],g=l[6],y=l[7],v=[],b=(vA+Pv*g)*Uint32Array.BYTES_PER_ELEMENT;let _;switch(y){case Int8Array.BYTES_PER_ELEMENT:_=new Int8Array(a.buffer,b);break;case Int16Array.BYTES_PER_ELEMENT:_=new Int16Array(a.buffer,b);break;case Int32Array.BYTES_PER_ELEMENT:_=new Int32Array(a.buffer,b);break}o=0;for(let w=0;w<g;w++){const T=l[Pv*w+vA],P=new Float32Array(T+2);v.push(P);for(let O=0;O<Pv-1;O++)P[O]=l[Pv*w+vA+O+1];for(let O=0;O<T;O++)P[O+2]=P[O]+_[o++]}return{areContours:f,thickness:p,outlines:v,width:u,height:d}}catch(n){return Te(`decompressSignature: ${n}`),null}}}If=new WeakMap,Ze=new WeakSet,cD=function(e,n,r,i){return r-=e,i-=n,r===0?i>0?0:4:r===1?i+6:2-i},Pa=new WeakMap,y7=function(e,n,r,i,s,a,o){const l=D(this,Ze,cD).call(this,r,i,s,a);for(let c=0;c<8;c++){const u=(-c+l-o+16)%8,d=h(this,Pa)[2*u],f=h(this,Pa)[2*u+1];if(e[(r+d)*n+(i+f)]!==0)return u}return-1},v7=function(e,n,r,i,s,a,o){const l=D(this,Ze,cD).call(this,r,i,s,a);for(let c=0;c<8;c++){const u=(c+l+o+16)%8,d=h(this,Pa)[2*u],f=h(this,Pa)[2*u+1];if(e[(r+d)*n+(i+f)]!==0)return u}return-1},uD=function(e,n,r,i){const s=e.length,a=new Int32Array(s);for(let u=0;u<s;u++)a[u]=e[u]<=i?1:0;for(let u=1;u<r-1;u++)a[u*n]=a[u*n+n-1]=0;for(let u=0;u<n;u++)a[u]=a[n*r-1-u]=0;let o=1,l;const c=[];for(let u=1;u<r-1;u++){l=1;for(let d=1;d<n-1;d++){const f=u*n+d,p=a[f];if(p===0)continue;let g=u,y=d;if(p===1&&a[f-1]===0)o+=1,y-=1;else if(p>=1&&a[f+1]===0)o+=1,y+=1,p>1&&(l=p);else{p!==1&&(l=Math.abs(p));continue}const v=[d,u],b=y===d+1,_={isHole:b,points:v,id:o,parent:0};c.push(_);let w;for(const N of c)if(N.id===l){w=N;break}w?w.isHole?_.parent=b?w.parent:l:_.parent=b?l:w.parent:_.parent=b?l:0;const T=D(this,Ze,y7).call(this,a,n,u,d,g,y,0);if(T===-1){a[f]=-o,a[f]!==1&&(l=Math.abs(a[f]));continue}let P=h(this,Pa)[2*T],O=h(this,Pa)[2*T+1];const C=u+P,I=d+O;g=C,y=I;let M=u,L=d;for(;;){const N=D(this,Ze,v7).call(this,a,n,M,L,g,y,1);P=h(this,Pa)[2*N],O=h(this,Pa)[2*N+1];const F=M+P,j=L+O;v.push(j,F);const K=M*n+L;if(a[K+1]===0?a[K]=-o:a[K]===1&&(a[K]=o),F===u&&j===d&&M===C&&L===I){a[f]!==1&&(l=Math.abs(a[f]));break}else g=M,y=L,M=F,L=j}}}return c},NE=function(e,n,r,i){if(r-n<=4){for(let C=n;C<r-2;C+=2)i.push(e[C],e[C+1]);return}const s=e[n],a=e[n+1],o=e[r-4]-s,l=e[r-3]-a,c=Math.hypot(o,l),u=o/c,d=l/c,f=u*a-d*s,p=l/o,g=1/c,y=Math.atan(p),v=Math.cos(y),b=Math.sin(y),_=g*(Math.abs(v)+Math.abs(b)),w=g*(1-_+_**2),T=Math.max(Math.atan(Math.abs(b+v)*w),Math.atan(Math.abs(b-v)*w));let P=0,O=n;for(let C=n+2;C<r-2;C+=2){const I=Math.abs(f-u*e[C+1]+d*e[C]);I>P&&(O=C,P=I)}P>(c*T)**2?(D(this,Ze,NE).call(this,e,n,O+2,i),D(this,Ze,NE).call(this,e,O,r,i)):i.push(s,a)},b7=function(e){const n=[],r=e.length;return D(this,Ze,NE).call(this,e,0,r,n),n.push(e[r-2],e[r-1]),n.length<=4?null:n},w7=function(e,n,r,i,s,a){const o=new Float32Array(a**2),l=-2*i**2,c=a>>1;for(let y=0;y<a;y++){const v=(y-c)**2;for(let b=0;b<a;b++)o[y*a+b]=Math.exp((v+(b-c)**2)/l)}const u=new Float32Array(256),d=-2*s**2;for(let y=0;y<256;y++)u[y]=Math.exp(y**2/d);const f=e.length,p=new Uint8Array(f),g=new Uint32Array(256);for(let y=0;y<r;y++)for(let v=0;v<n;v++){const b=y*n+v,_=e[b];let w=0,T=0;for(let O=0;O<a;O++){const C=y+O-c;if(!(C<0||C>=r))for(let I=0;I<a;I++){const M=v+I-c;if(M<0||M>=n)continue;const L=e[C*n+M],N=o[O*a+I]*u[Math.abs(L-_)];w+=L*N,T+=N}}const P=p[b]=Math.round(w/T);g[P]++}return[p,g]},_7=function(e){const n=new Uint32Array(256);for(const r of e)n[r]++;return n},hD=function(e){const n=e.length,r=new Uint8ClampedArray(n>>2);let i=-1/0,s=1/0;for(let o=0,l=r.length;o<l;o++){const c=r[o]=e[o<<2];i=Math.max(i,c),s=Math.min(s,c)}const a=255/(i-s);for(let o=0,l=r.length;o<l;o++)r[o]=(r[o]-s)*a;return r},dD=function(e){let n,r=-1/0,i=-1/0;const s=e.findIndex(l=>l!==0);let a=s,o=s;for(n=s;n<256;n++){const l=e[n];l>r&&(n-a>i&&(i=n-a,o=n-1),r=l,a=n)}for(n=o-1;n>=0&&!(e[n]>e[n+1]);n--);return n},x7=function(e){const n=e,{width:r,height:i}=e,{maxDim:s}=h(this,If);let a=r,o=i;if(r>s||i>s){let f=r,p=i,g=Math.log2(Math.max(r,i)/s);const y=Math.floor(g);g=g===y?y-1:y;for(let b=0;b<g;b++){a=Math.ceil(f/2),o=Math.ceil(p/2);const _=new OffscreenCanvas(a,o);_.getContext("2d").drawImage(e,0,0,f,p,0,0,a,o),f=a,p=o,e!==n&&e.close(),e=_.transferToImageBitmap()}const v=Math.min(s/a,s/o);a=Math.round(a*v),o=Math.round(o*v)}const c=new OffscreenCanvas(a,o).getContext("2d",{willReadFrequently:!0});c.fillStyle="white",c.fillRect(0,0,a,o),c.filter="grayscale(1)",c.drawImage(e,0,0,e.width,e.height,0,0,a,o);const u=c.getImageData(0,0,a,o).data;return[D(this,Ze,hD).call(this,u),a,o]},k(Hl,Ze),k(Hl,If,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),k(Hl,Pa,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class N2 extends h7{constructor(){super(),super.updateProperties({fill:Tt._defaultLineColor,"stroke-width":0})}clone(){const e=new N2;return e.updateAll(this),e}}class L2 extends QT{constructor(e){super(e),super.updateProperties({stroke:Tt._defaultLineColor,"stroke-width":1})}clone(){const e=new L2(this._viewParameters);return e.updateAll(this),e}}var Bu,To,$u,kf;const Ui=class Ui extends WS{constructor(n){super({...n,mustBeCommitted:!0,name:"signatureEditor"});k(this,Bu,!1);k(this,To,null);k(this,$u,null);k(this,kf,null);this._willKeepAspectRatio=!0,E(this,$u,n.signatureData||null),E(this,To,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(n,r){Tt.initialize(n,r),this._defaultDrawingOptions=new N2,this._defaultDrawnSignatureOptions=new L2(r.viewParameters)}static getDefaultDrawingOptions(n){const r=this._defaultDrawingOptions.clone();return r.updateProperties(n),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return Pe(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!h(this,To)}}static computeTelemetryFinalData(n){const r=n.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let n,r;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,n=this.x,r=this.y),super.render(),this._drawId===null)if(h(this,$u)){const{lines:s,mustSmooth:a,areContours:o,description:l,uuid:c,heightInPage:u}=h(this,$u),{rawDims:{pageWidth:d,pageHeight:f},rotation:p}=this.parent.viewport,g=Hl.processDrawnLines({lines:s,pageWidth:d,pageHeight:f,rotation:p,innerMargin:Ui._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(g,u,l,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:h(this,To)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(n,r)),this.div}setUuid(n){E(this,kf,n),this.addEditToolbar()}getUuid(){return h(this,kf)}get description(){return h(this,To)}set description(n){E(this,To,n),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:n})),super.addEditToolbar().then(r=>{r==null||r.updateEditSignatureButton(n)}))}getSignaturePreview(){const{newCurves:n,areContours:r,thickness:i,width:s,height:a}=h(this,$u),o=Math.max(s,a),l=Hl.processDrawnLines({lines:{curves:n.map(c=>({points:c})),thickness:i,width:s,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(n,r,i,s){const{x:a,y:o}=this,{outline:l}=E(this,$u,n);E(this,Bu,l instanceof lD),this.description=i;let c;h(this,Bu)?c=Ui.getDefaultDrawingOptions():(c=Ui._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:c});const[,u]=this.pageDimensions;let d=r/u;d=d>=1?.5:d,this.width*=d/this.height,this.width>=1&&(d*=.9/this.width,this.width=.9),this.height=d,this.setDims(),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(n){const{rawDims:{pageWidth:r,pageHeight:i},rotation:s}=this.parent.viewport;return Hl.process(n,r,i,s,Ui._INNER_MARGIN)}getFromText(n,r){const{rawDims:{pageWidth:i,pageHeight:s},rotation:a}=this.parent.viewport;return Hl.extractContoursFromText(n,r,i,s,a,Ui._INNER_MARGIN)}getDrawnSignature(n){const{rawDims:{pageWidth:r,pageHeight:i},rotation:s}=this.parent.viewport;return Hl.processDrawnLines({lines:n,pageWidth:r,pageHeight:i,rotation:s,innerMargin:Ui._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:n,thickness:r}){n?this._drawingOptions=Ui.getDefaultDrawingOptions():(this._drawingOptions=Ui._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(n=!1){if(this.isEmpty())return null;const{lines:r,points:i}=this.serializeDraw(n),{_drawingOptions:{"stroke-width":s}}=this,a=Object.assign(super.serialize(n),{isSignature:!0,areContours:h(this,Bu),color:[0,0,0],thickness:h(this,Bu)?0:s});return this.addComment(a),n?(a.paths={lines:r,points:i},a.uuid=h(this,kf),a.isCopy=!0):a.lines=r,h(this,To)&&(a.accessibilityData={type:"Figure",alt:h(this,To)}),a}static deserializeDraw(n,r,i,s,a,o){return o.areContours?lD.deserialize(n,r,i,s,a,o):X_.deserialize(n,r,i,s,a,o)}static async deserialize(n,r,i){var a;const s=await super.deserialize(n,r,i);return E(s,Bu,n.areContours),s.description=((a=n.accessibilityData)==null?void 0:a.alt)||"",E(s,kf,n.uuid),s}};Bu=new WeakMap,To=new WeakMap,$u=new WeakMap,kf=new WeakMap,Y(Ui,"_type","signature"),Y(Ui,"_editorType",ke.SIGNATURE),Y(Ui,"_defaultDrawingOptions",null);let fD=Ui;var Lt,Qn,Uu,Vl,zu,Yg,Bl,Rf,Po,as,Qg,qe,a0,o0,LE,jE,FE,mD,VE,A7;class pD extends Tt{constructor(n){super({...n,name:"stampEditor"});k(this,qe);k(this,Lt,null);k(this,Qn,null);k(this,Uu,null);k(this,Vl,null);k(this,zu,null);k(this,Yg,"");k(this,Bl,null);k(this,Rf,!1);k(this,Po,null);k(this,as,!1);k(this,Qg,!1);E(this,Vl,n.bitmapUrl),E(this,zu,n.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(n,r){Tt.initialize(n,r)}static isHandlingMimeForPasting(n){return ZR.includes(n)}static paste(n,r){r.pasteEditor({mode:ke.STAMP},{bitmapFile:n.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var n;return{type:"stamp",hasAltText:!!((n=this.altTextData)!=null&&n.altText)}}static computeTelemetryFinalData(n){const r=n.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(n=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:a,height:o}=n||this.copyCanvas(null,null,!0).imageData,l=await i.guess({name:"altText",request:{data:s,width:a,height:o,channels:s.length/(a*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),r&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var n;h(this,Qn)&&(E(this,Lt,null),this._uiManager.imageManager.deleteId(h(this,Qn)),(n=h(this,Bl))==null||n.remove(),E(this,Bl,null),h(this,Po)&&(clearTimeout(h(this,Po)),E(this,Po,null))),super.remove()}rebuild(){if(!this.parent){h(this,Qn)&&D(this,qe,LE).call(this);return}super.rebuild(),this.div!==null&&(h(this,Qn)&&h(this,Bl)===null&&D(this,qe,LE).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(n){this._isDraggable=!0,n&&this.div.focus()}isEmpty(){return!(h(this,Uu)||h(this,Lt)||h(this,Vl)||h(this,zu)||h(this,Qn)||h(this,Rf))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let n,r;return this._isCopy&&(n=this.x,r=this.y),super.render(),this.div.hidden=!0,this.createAltText(),h(this,Rf)||(h(this,Lt)?D(this,qe,jE).call(this):D(this,qe,LE).call(this)),this._isCopy&&this._moveAfterPaste(n,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(n,r){const{id:i,bitmap:s}=this._uiManager.imageManager.getFromCanvas(n,r);r.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(E(this,Qn,i),s&&E(this,Lt,s),E(this,Rf,!1),D(this,qe,jE).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;h(this,Po)!==null&&clearTimeout(h(this,Po)),E(this,Po,setTimeout(()=>{E(this,Po,null),D(this,qe,mD).call(this)},200))}copyCanvas(n,r,i=!1){n||(n=224);const{width:s,height:a}=h(this,Lt),o=new Wo;let l=h(this,Lt),c=s,u=a,d=null;if(r){if(s>r||a>r){const C=Math.min(r/s,r/a);c=Math.floor(s*C),u=Math.floor(a*C)}d=document.createElement("canvas");const p=d.width=Math.ceil(c*o.sx),g=d.height=Math.ceil(u*o.sy);h(this,as)||(l=D(this,qe,FE).call(this,p,g));const y=d.getContext("2d");y.filter=this._uiManager.hcmFilter;let v="white",b="#cfcfd8";this._uiManager.hcmFilter!=="none"?b="black":Yce.isDarkMode&&(v="#8f8f9d",b="#42414d");const _=15,w=_*o.sx,T=_*o.sy,P=new OffscreenCanvas(w*2,T*2),O=P.getContext("2d");O.fillStyle=v,O.fillRect(0,0,w*2,T*2),O.fillStyle=b,O.fillRect(0,0,w,T),O.fillRect(w,T,w,T),y.fillStyle=y.createPattern(P,"repeat"),y.fillRect(0,0,p,g),y.drawImage(l,0,0,l.width,l.height,0,0,p,g)}let f=null;if(i){let p,g;if(o.symmetric&&l.width<n&&l.height<n)p=l.width,g=l.height;else if(l=h(this,Lt),s>n||a>n){const b=Math.min(n/s,n/a);p=Math.floor(s*b),g=Math.floor(a*b),h(this,as)||(l=D(this,qe,FE).call(this,p,g))}const v=new OffscreenCanvas(p,g).getContext("2d",{willReadFrequently:!0});v.drawImage(l,0,0,l.width,l.height,0,0,p,g),f={width:p,height:g,data:v.getImageData(0,0,p,g).data}}return{canvas:d,width:c,height:u,imageData:f}}static async deserialize(n,r,i){var v;let s=null,a=!1;if(n instanceof VG){const{data:{rect:b,rotation:_,id:w,structParent:T,popupRef:P,richText:O,contentsObj:C,creationDate:I,modificationDate:M},container:L,parent:{page:{pageNumber:N}},canvas:F}=n;let j,K;F?(delete n.canvas,{id:j,bitmap:K}=i.imageManager.getFromCanvas(L.id,F),F.remove()):(a=!0,n._hasNoCanvas=!0);const te=((v=await r._structTree.getAriaAttributes(`${om}${w}`))==null?void 0:v.get("aria-label"))||"";s=n={annotationType:ke.STAMP,bitmapId:j,bitmap:K,pageIndex:N-1,rect:b.slice(0),rotation:_,annotationElementId:w,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:te},isSvg:!1,structParent:T,popupRef:P,richText:O,comment:(C==null?void 0:C.str)||null,creationDate:I,modificationDate:M}}const o=await super.deserialize(n,r,i),{rect:l,bitmap:c,bitmapUrl:u,bitmapId:d,isSvg:f,accessibilityData:p}=n;a?(i.addMissingCanvas(n.id,o),E(o,Rf,!0)):d&&i.imageManager.isValidId(d)?(E(o,Qn,d),c&&E(o,Lt,c)):E(o,Vl,u),E(o,as,f);const[g,y]=o.pageDimensions;return o.width=(l[2]-l[0])/g,o.height=(l[3]-l[1])/y,p&&(o.altTextData=p),o._initialData=s,n.comment&&o.setCommentData(n),E(o,Qg,!!s),o}serialize(n=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(n),{bitmapId:h(this,Qn),isSvg:h(this,as)});if(this.addComment(i),n)return i.bitmapUrl=D(this,qe,VE).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:s,altText:a}=this.serializeAltText(!1);if(!s&&a&&(i.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const l=D(this,qe,A7).call(this,i);return l.isSame?null:(l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(r===null)return i;r.stamps||(r.stamps=new Map);const o=h(this,as)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!r.stamps.has(h(this,Qn)))r.stamps.set(h(this,Qn),{area:o,serialized:i}),i.bitmap=D(this,qe,VE).call(this,!1);else if(h(this,as)){const l=r.stamps.get(h(this,Qn));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=D(this,qe,VE).call(this,!1))}return i}renderAnnotationElement(n){return this.deleted?(n.hide(),null):(n.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Lt=new WeakMap,Qn=new WeakMap,Uu=new WeakMap,Vl=new WeakMap,zu=new WeakMap,Yg=new WeakMap,Bl=new WeakMap,Rf=new WeakMap,Po=new WeakMap,as=new WeakMap,Qg=new WeakMap,qe=new WeakSet,a0=function(n,r=!1){if(!n){this.remove();return}E(this,Lt,n.bitmap),r||(E(this,Qn,n.id),E(this,as,n.isSvg)),n.file&&E(this,Yg,n.file.name),D(this,qe,jE).call(this)},o0=function(){if(E(this,Uu,null),this._uiManager.enableWaiting(!1),!!h(this,Bl)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&h(this,Lt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&h(this,Lt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},LE=function(){if(h(this,Qn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(h(this,Qn)).then(i=>D(this,qe,a0).call(this,i,!0)).finally(()=>D(this,qe,o0).call(this));return}if(h(this,Vl)){const i=h(this,Vl);E(this,Vl,null),this._uiManager.enableWaiting(!0),E(this,Uu,this._uiManager.imageManager.getFromUrl(i).then(s=>D(this,qe,a0).call(this,s)).finally(()=>D(this,qe,o0).call(this)));return}if(h(this,zu)){const i=h(this,zu);E(this,zu,null),this._uiManager.enableWaiting(!0),E(this,Uu,this._uiManager.imageManager.getFromFile(i).then(s=>D(this,qe,a0).call(this,s)).finally(()=>D(this,qe,o0).call(this)));return}const n=document.createElement("input");n.type="file",n.accept=ZR.join(",");const r=this._uiManager._signal;E(this,Uu,new Promise(i=>{n.addEventListener("change",async()=>{if(!n.files||n.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(n.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),D(this,qe,a0).call(this,s)}i()},{signal:r}),n.addEventListener("cancel",()=>{this.remove(),i()},{signal:r})}).finally(()=>D(this,qe,o0).call(this))),n.click()},jE=function(){var c;const{div:n}=this;let{width:r,height:i}=h(this,Lt);const[s,a]=this.pageDimensions,o=.75;if(this.width)r=this.width*s,i=this.height*a;else if(r>o*s||i>o*a){const u=Math.min(o*s/r,o*a/i);r*=u,i*=u}this._uiManager.enableWaiting(!1);const l=E(this,Bl,document.createElement("canvas"));l.setAttribute("role","img"),this.addContainer(l),this.width=r/s,this.height=i/a,this.setDims(),(c=this._initialOptions)!=null&&c.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(n.hidden=!1),D(this,qe,mD).call(this),h(this,Qg)||(this.parent.addUndoableEditor(this),E(this,Qg,!0)),this._reportTelemetry({action:"inserted_image"}),h(this,Yg)&&this.div.setAttribute("aria-description",h(this,Yg)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},FE=function(n,r){const{width:i,height:s}=h(this,Lt);let a=i,o=s,l=h(this,Lt);for(;a>2*n||o>2*r;){const c=a,u=o;a>2*n&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*r&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const d=new OffscreenCanvas(a,o);d.getContext("2d").drawImage(l,0,0,c,u,0,0,a,o),l=d.transferToImageBitmap()}return l},mD=function(){const[n,r]=this.parentDimensions,{width:i,height:s}=this,a=new Wo,o=Math.ceil(i*n*a.sx),l=Math.ceil(s*r*a.sy),c=h(this,Bl);if(!c||c.width===o&&c.height===l)return;c.width=o,c.height=l;const u=h(this,as)?h(this,Lt):D(this,qe,FE).call(this,o,l),d=c.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(u,0,0,u.width,u.height,0,0,o,l)},VE=function(n){if(n){if(h(this,as)){const s=this._uiManager.imageManager.getSvgUrl(h(this,Qn));if(s)return s}const r=document.createElement("canvas");return{width:r.width,height:r.height}=h(this,Lt),r.getContext("2d").drawImage(h(this,Lt),0,0),r.toDataURL()}if(h(this,as)){const[r,i]=this.pageDimensions,s=Math.round(this.width*r*vh.PDF_TO_CSS_UNITS),a=Math.round(this.height*i*vh.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(s,a);return o.getContext("2d").drawImage(h(this,Lt),0,0,h(this,Lt).width,h(this,Lt).height,0,0,s,a),o.transferToImageBitmap()}return structuredClone(h(this,Lt))},A7=function(n){var o;const{pageIndex:r,accessibilityData:{altText:i}}=this._initialData,s=n.pageIndex===r,a=(((o=n.accessibilityData)==null?void 0:o.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}},Y(pD,"_type","stamp"),Y(pD,"_editorType",ke.STAMP);var Of,Jg,Hu,Wu,$l,Pi,Gu,Zg,ey,Ca,Ul,Jn,zl,Ku,ty,fe,qu,vt,yD,E7,to,vD,bD,BE;const ga=class ga{constructor({uiManager:e,pageIndex:n,div:r,structTreeLayer:i,accessibilityManager:s,annotationLayer:a,drawLayer:o,textLayer:l,viewport:c,l10n:u}){k(this,vt);k(this,Of);k(this,Jg,!1);k(this,Hu,null);k(this,Wu,null);k(this,$l,null);k(this,Pi,new Map);k(this,Gu,!1);k(this,Zg,!1);k(this,ey,!1);k(this,Ca,null);k(this,Ul,null);k(this,Jn,null);k(this,zl,null);k(this,Ku,null);k(this,ty,-1);k(this,fe);const d=[...h(ga,qu).values()];if(!ga._initialized){ga._initialized=!0;for(const f of d)f.initialize(u,e)}e.registerEditorTypes(d),E(this,fe,e),this.pageIndex=n,this.div=r,E(this,Of,s),E(this,Hu,a),this.viewport=c,E(this,Jn,l),this.drawLayer=o,this._structTree=i,h(this,fe).addLayer(this)}get isEmpty(){return h(this,Pi).size===0}get isInvisible(){return this.isEmpty&&h(this,fe).getMode()===ke.NONE}updateToolbar(e){h(this,fe).updateToolbar(e)}updateMode(e=h(this,fe).getMode()){switch(D(this,vt,BE).call(this),e){case ke.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ke.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ke.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;if(n.toggle("nonEditing",!1),e===ke.POPUP)n.toggle("commentEditing",!0);else{n.toggle("commentEditing",!1);for(const r of h(ga,qu).values())n.toggle(`${r._type}Editing`,e===r._editorType)}this.div.hidden=!1}hasTextLayer(e){var n;return e===((n=h(this,Jn))==null?void 0:n.div)}setEditingState(e){h(this,fe).setEditingState(e)}addCommands(e){h(this,fe).addCommands(e)}cleanUndoStack(e){h(this,fe).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var n;(n=h(this,Hu))==null||n.togglePointerEvents(e)}async enable(){var r;E(this,ey,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(r=h(this,Ku))==null||r.abort(),E(this,Ku,null);const e=new Set;for(const i of h(this,vt,yD))i.enableEditing(),i.show(!0),i.annotationElementId&&(h(this,fe).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const n=h(this,Hu);if(n)for(const i of n.getEditableAnnotations()){if(i.hide(),h(this,fe).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}E(this,ey,!1),h(this,fe)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var i;if(E(this,Zg,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),h(this,Jn)&&!h(this,Ku)){E(this,Ku,new AbortController);const s=h(this,fe).combinedSignal(h(this,Ku));h(this,Jn).div.addEventListener("pointerdown",a=>{const{clientX:l,clientY:c,timeStamp:u}=a,d=h(this,ty);if(u-d>500){E(this,ty,u);return}E(this,ty,-1);const{classList:f}=this.div;f.toggle("getElements",!0);const p=document.elementsFromPoint(l,c);if(f.toggle("getElements",!1),!this.div.contains(p[0]))return;let g;const y=new RegExp(`^${db}[0-9]+$`);for(const b of p)if(y.test(b.id)){g=b.id;break}if(!g)return;const v=h(this,Pi).get(g);(v==null?void 0:v.annotationElementId)===null&&(a.stopPropagation(),a.preventDefault(),v.dblclick(a))},{signal:s,capture:!0})}const e=h(this,Hu),n=[];if(e){const s=new Map,a=new Map;for(const l of h(this,vt,yD)){if(l.disableEditing(),!l.annotationElementId){n.push(l);continue}if(l.serialize()!==null){s.set(l.annotationElementId,l);continue}else a.set(l.annotationElementId,l);(i=this.getEditableAnnotation(l.annotationElementId))==null||i.show(),l.remove()}const o=e.getEditableAnnotations();for(const l of o){const{id:c}=l.data;if(h(this,fe).isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let u=a.get(c);if(u){u.resetAnnotationElement(l),u.show(!1),l.show();continue}u=s.get(c),u&&(h(this,fe).addChangedExistingAnnotation(u),u.renderAnnotationElement(l)&&u.show(!1)),l.show()}}D(this,vt,BE).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const s of h(ga,qu).values())r.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e==null||e.updateFakeAnnotations(n),E(this,Zg,!1)}getEditableAnnotation(e){var n;return((n=h(this,Hu))==null?void 0:n.getEditableAnnotation(e))||null}setActiveEditor(e){h(this,fe).getActive()!==e&&h(this,fe).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=h(this,Jn))!=null&&e.div&&!h(this,zl)){E(this,zl,new AbortController);const n=h(this,fe).combinedSignal(h(this,zl));h(this,Jn).div.addEventListener("pointerdown",D(this,vt,E7).bind(this),{signal:n}),h(this,Jn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=h(this,Jn))!=null&&e.div&&h(this,zl)&&(h(this,zl).abort(),E(this,zl,null),h(this,Jn).div.classList.remove("highlighting"))}enableClick(){if(h(this,Wu))return;E(this,Wu,new AbortController);const e=h(this,fe).combinedSignal(h(this,Wu));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const n=this.pointerup.bind(this);this.div.addEventListener("pointerup",n,{signal:e}),this.div.addEventListener("pointercancel",n,{signal:e})}disableClick(){var e;(e=h(this,Wu))==null||e.abort(),E(this,Wu,null)}attach(e){h(this,Pi).set(e.id,e);const{annotationElementId:n}=e;n&&h(this,fe).isDeletedAnnotationElement(n)&&h(this,fe).removeDeletedAnnotationElement(e)}detach(e){var n;h(this,Pi).delete(e.id),(n=h(this,Of))==null||n.removePointerInTextLayer(e.contentDiv),!h(this,Zg)&&e.annotationElementId&&h(this,fe).addDeletedAnnotationElement(e)}remove(e){this.detach(e),h(this,fe).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var n;e.parent!==this&&(e.parent&&e.annotationElementId&&(h(this,fe).addDeletedAnnotationElement(e),Tt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(n=e.parent)==null||n.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),h(this,fe).addEditor(e),this.attach(e),!e.isAttachedToDOM){const n=e.render();this.div.append(n),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!h(this,ey)),h(this,fe).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!h(this,$l)&&(e._focusEventsAllowed=!1,E(this,$l,setTimeout(()=>{E(this,$l,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:h(this,fe)._signal}),n.focus())},0))),e._structTreeParentId=(r=h(this,Of))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const n=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:n,undo:r,mustExec:!1})}getEditorByUID(e){for(const n of h(this,Pi).values())if(n.uid===e)return n;return null}getNextId(){return h(this,fe).getId()}combinedSignal(e){return h(this,fe).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=h(this,vt,to))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,n){this.updateToolbar(e),await h(this,fe).updateMode(e.mode);const{offsetX:r,offsetY:i}=D(this,vt,bD).call(this),s=this.getNextId(),a=D(this,vt,vD).call(this,{parent:this,id:s,x:r,y:i,uiManager:h(this,fe),isCentered:!0,...n});a&&this.add(a)}async deserialize(e){var n;return await((n=h(ga,qu).get(e.annotationType??e.annotationEditorType))==null?void 0:n.deserialize(e,this,h(this,fe)))||null}createAndAddNewEditor(e,n,r={}){const i=this.getNextId(),s=D(this,vt,vD).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:h(this,fe),isCentered:n,...r});return s&&this.add(s),s}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(D(this,vt,bD).call(this),!0,e)}setSelected(e){h(this,fe).setSelected(e)}toggleSelected(e){h(this,fe).toggleSelected(e)}unselect(e){h(this,fe).unselect(e)}pointerup(e){var i;const{isMac:n}=Pr.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div||!h(this,Gu)||(E(this,Gu,!1),(i=h(this,vt,to))!=null&&i.isDrawer&&h(this,vt,to).supportMultipleDrawings))return;if(!h(this,Jg)){E(this,Jg,!0);return}const r=h(this,fe).getMode();if(r===ke.STAMP||r===ke.SIGNATURE){h(this,fe).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(h(this,fe).getMode()===ke.HIGHLIGHT&&this.enableTextSelection(),h(this,Gu)){E(this,Gu,!1);return}const{isMac:n}=Pr.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div)return;if(E(this,Gu,!0),(i=h(this,vt,to))!=null&&i.isDrawer){this.startDrawingSession(e);return}const r=h(this,fe).getActive();E(this,Jg,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),h(this,Ca)){h(this,vt,to).startDrawing(this,h(this,fe),!1,e);return}h(this,fe).setCurrentDrawingSession(this),E(this,Ca,new AbortController);const n=h(this,fe).combinedSignal(h(this,Ca));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(E(this,Ul,null),this.commitOrRemove())},{signal:n}),h(this,vt,to).startDrawing(this,h(this,fe),!1,e)}pause(e){if(e){const{activeElement:n}=document;this.div.contains(n)&&E(this,Ul,n);return}h(this,Ul)&&setTimeout(()=>{var n;(n=h(this,Ul))==null||n.focus(),E(this,Ul,null)},0)}endDrawingSession(e=!1){return h(this,Ca)?(h(this,fe).setCurrentDrawingSession(null),h(this,Ca).abort(),E(this,Ca,null),E(this,Ul,null),h(this,vt,to).endDrawing(e)):null}findNewParent(e,n,r){const i=h(this,fe).findParent(n,r);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return h(this,Ca)?(this.endDrawingSession(),!0):!1}onScaleChanging(){h(this,Ca)&&h(this,vt,to).onScaleChangingWhenDrawing(this)}destroy(){var e,n;this.commitOrRemove(),((e=h(this,fe).getActive())==null?void 0:e.parent)===this&&(h(this,fe).commitOrRemove(),h(this,fe).setActiveEditor(null)),h(this,$l)&&(clearTimeout(h(this,$l)),E(this,$l,null));for(const r of h(this,Pi).values())(n=h(this,Of))==null||n.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,h(this,Pi).clear(),h(this,fe).removeLayer(this)}render({viewport:e}){this.viewport=e,qf(this.div,e);for(const n of h(this,fe).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:e}){h(this,fe).commitOrRemove(),D(this,vt,BE).call(this);const n=this.viewport.rotation,r=e.rotation;if(this.viewport=e,qf(this.div,{rotation:r}),n!==r)for(const i of h(this,Pi).values())i.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:n}=this.viewport.rawDims;return[e,n]}get scale(){return h(this,fe).viewParameters.realScale}};Of=new WeakMap,Jg=new WeakMap,Hu=new WeakMap,Wu=new WeakMap,$l=new WeakMap,Pi=new WeakMap,Gu=new WeakMap,Zg=new WeakMap,ey=new WeakMap,Ca=new WeakMap,Ul=new WeakMap,Jn=new WeakMap,zl=new WeakMap,Ku=new WeakMap,ty=new WeakMap,fe=new WeakMap,qu=new WeakMap,vt=new WeakSet,yD=function(){return h(this,Pi).size!==0?h(this,Pi).values():h(this,fe).getEditors(this.pageIndex)},E7=function(e){h(this,fe).unselectAll();const{target:n}=e;if(n===h(this,Jn).div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&h(this,Jn).div.contains(n)){const{isMac:r}=Pr.platform;if(e.button!==0||e.ctrlKey&&r)return;h(this,fe).showAllEditors("highlight",!0,!0),h(this,Jn).div.classList.add("free"),this.toggleDrawing(),HS.startHighlighting(this,h(this,fe).direction==="ltr",{target:h(this,Jn).div,x:e.x,y:e.y}),h(this,Jn).div.addEventListener("pointerup",()=>{h(this,Jn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:h(this,fe)._signal}),e.preventDefault()}},to=function(){return h(ga,qu).get(h(this,fe).getMode())},vD=function(e){const n=h(this,vt,to);return n?new n.prototype.constructor(e):null},bD=function(){const{x:e,y:n,width:r,height:i}=this.boundingClientRect,s=Math.max(0,e),a=Math.max(0,n),o=Math.min(window.innerWidth,e+r),l=Math.min(window.innerHeight,n+i),c=(s+o)/2-e,u=(a+l)/2-n,[d,f]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:d,offsetY:f}},BE=function(){for(const e of h(this,Pi).values())e.isEmpty()&&e.remove()},Y(ga,"_initialized",!1),k(ga,qu,new Map([QO,oD,pD,HS,fD].map(e=>[e._editorType,e])));let gD=ga;var Ia,si,Df,O_,ET,S7,Jo,_D,T7,xD;const Rn=class Rn{constructor({pageIndex:e}){k(this,Jo);k(this,Ia,null);k(this,si,new Map);k(this,Df,new Map);this.pageIndex=e}setParent(e){if(!h(this,Ia)){E(this,Ia,e);return}if(h(this,Ia)!==e){if(h(this,si).size>0)for(const n of h(this,si).values())n.remove(),e.append(n);E(this,Ia,e)}}static get _svgFactory(){return Pe(this,"_svgFactory",new US)}draw(e,n=!1,r=!1){const i=In(Rn,O_)._++,s=D(this,Jo,_D).call(this),a=Rn._svgFactory.createElement("defs");s.append(a);const o=Rn._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),n&&h(this,Df).set(i,o);const c=r?D(this,Jo,T7).call(this,a,l):null,u=Rn._svgFactory.createElement("use");return s.append(u),u.setAttribute("href",`#${l}`),this.updateProperties(s,e),h(this,si).set(i,s),{id:i,clipPathId:`url(#${c})`}}drawOutline(e,n){const r=In(Rn,O_)._++,i=D(this,Jo,_D).call(this),s=Rn._svgFactory.createElement("defs");i.append(s);const a=Rn._svgFactory.createElement("path");s.append(a);const o=`path_p${this.pageIndex}_${r}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let l;if(n){const d=Rn._svgFactory.createElement("mask");s.append(d),l=`mask_p${this.pageIndex}_${r}`,d.setAttribute("id",l),d.setAttribute("maskUnits","objectBoundingBox");const f=Rn._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=Rn._svgFactory.createElement("use");d.append(p),p.setAttribute("href",`#${o}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const c=Rn._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${o}`),l&&c.setAttribute("mask",`url(#${l})`);const u=c.cloneNode();return i.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(i,e),h(this,si).set(r,i),r}finalizeDraw(e,n){h(this,Df).delete(e),this.updateProperties(e,n)}updateProperties(e,n){var l;if(!n)return;const{root:r,bbox:i,rootClass:s,path:a}=n,o=typeof e=="number"?h(this,si).get(e):e;if(o){if(r&&D(this,Jo,xD).call(this,o,r),i&&D(l=Rn,ET,S7).call(l,o,i),s){const{classList:c}=o;for(const[u,d]of Object.entries(s))c.toggle(u,d)}if(a){const u=o.firstElementChild.firstElementChild;D(this,Jo,xD).call(this,u,a)}}}updateParent(e,n){if(n===this)return;const r=h(this,si).get(e);r&&(h(n,Ia).append(r),h(this,si).delete(e),h(n,si).set(e,r))}remove(e){h(this,Df).delete(e),h(this,Ia)!==null&&(h(this,si).get(e).remove(),h(this,si).delete(e))}destroy(){E(this,Ia,null);for(const e of h(this,si).values())e.remove();h(this,si).clear(),h(this,Df).clear()}};Ia=new WeakMap,si=new WeakMap,Df=new WeakMap,O_=new WeakMap,ET=new WeakSet,S7=function(e,[n,r,i,s]){const{style:a}=e;a.top=`${100*r}%`,a.left=`${100*n}%`,a.width=`${100*i}%`,a.height=`${100*s}%`},Jo=new WeakSet,_D=function(){const e=Rn._svgFactory.create(1,1,!0);return h(this,Ia).append(e),e.setAttribute("aria-hidden",!0),e},T7=function(e,n){const r=Rn._svgFactory.createElement("clipPath");e.append(r);const i=`clip_${n}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");const s=Rn._svgFactory.createElement("use");return r.append(s),s.setAttribute("href",`#${n}`),s.classList.add("clip"),i},xD=function(e,n){for(const[r,i]of Object.entries(n))i===null?e.removeAttribute(r):e.setAttribute(r,i)},k(Rn,ET),k(Rn,O_,0);let wD=Rn;globalThis._pdfjsTestingUtils={HighlightOutliner:ZO};globalThis.pdfjsLib={AbortException:yh,AnnotationEditorLayer:gD,AnnotationEditorParamsType:ze,AnnotationEditorType:ke,AnnotationEditorUIManager:Xf,AnnotationLayer:XO,AnnotationMode:Jc,AnnotationType:yn,applyOpacity:Jce,build:she,ColorPicker:BS,createValidAbsoluteUrl:g8,CSSConstants:Qce,DOMSVGFactory:US,DrawLayer:wD,FeatureTest:Pr,fetchData:H_,findContrastColor:Zce,getDocument:EG,getFilenameFromUrl:Wce,getPdfFilenameFromUrl:Gce,getRGB:G_,getUuid:b8,getXfaPageViewport:qce,GlobalWorkerOptions:ko,ImageKind:oE,InvalidPDFException:QR,isDataScheme:XT,isPdfFile:I2,isValidExplicitDest:cue,MathClamp:oi,noContextMenu:aa,normalizeUnicode:Uce,OPS:fb,OutputScale:Wo,PasswordResponses:Dce,PDFDataRangeTransport:SG,PDFDateString:MS,PDFWorker:gb,PermissionFlag:Oce,PixelsPerInch:vh,RenderingCancelledException:C2,renderRichText:x8,ResponseException:DS,setLayerDimensions:qf,shadow:Pe,SignatureExtractor:Hl,stopEvent:an,SupportedImageMimeTypes:ZR,TextLayer:mb,TouchManager:LS,updateUrlHash:y8,Util:ue,VerbosityLevel:GT,version:ihe,XfaLayer:_8};ko.workerSrc="/1201-project/pdf.worker.min.js";const Ihe="",khe="https://api-inference.huggingface.co/models/facebook/bart-large-cnn";async function Rhe(t){try{const e=await t.arrayBuffer(),n=await EG({data:e}).promise;let r="";const i=Math.min(n.numPages,10);console.log(`PDF  : ${n.numPages},  : ${i}`);for(let s=1;s<=i;s++)try{const o=await(await n.getPage(s)).getTextContent();let l="";for(const c of o.items)c.str&&c.str.trim()&&(l+=c.str+" ");l.trim()&&(r+=l+`
`,console.log(` ${s}   (${l.length})`))}catch(a){console.warn(` ${s}  :`,a);continue}if(!r.trim())throw new Error("PDF    .   PDF  .");return console.log(`  : ${r.length}`),r}catch(e){throw console.error("PDF   :",e),new Error("PDF   : "+e.message)}}async function Ohe(t){var e;try{const r=t.substring(0,1024),i=await fetch(khe,{headers:{Authorization:`Bearer ${Ihe}`},method:"POST",body:JSON.stringify({inputs:r})});if(!i.ok)throw new Error(`API : ${i.status}`);const s=await i.json();if(Array.isArray(s)&&((e=s[0])!=null&&e.summary_text))return s[0].summary_text;throw new Error("  ")}catch(n){throw console.error("AI  :",n),n}}function Dhe(t){const e=t.match(/[^.!?]+[.!?]+/g)||[],n=["","","","","","",""];return e.map((s,a)=>{let o=n.reduce((l,c)=>l+(s.toLowerCase().includes(c)?1:0),0);return o+=1/(a+1),{sentence:s.trim(),score:o}}).sort((s,a)=>a.score-s.score).slice(0,3).map(s=>s.sentence).join(" ")||"  "}async function Mhe(t){try{return{summary:await Ohe(t),method:"AI"}}catch(e){return console.warn("AI  ,    :",e),{summary:Dhe(t),method:"Rule-based"}}}const Nhe={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};function Lhe(){const[t,e]=x.useState(null),[n,r]=x.useState(!1),[i,s]=x.useState(null),[a,o]=x.useState(null),[l,c]=x.useState(""),[u,d]=x.useState(""),f=g=>{var v;const y=(v=g.target.files)==null?void 0:v[0];y&&(y.type==="application/pdf"?(e(y),c(y.name.replace(".pdf","")),o(null)):(o("PDF   ."),e(null)))},p=async()=>{if(!t){o("PDF  .");return}r(!0),o(null),s(null);try{const g=await Rhe(t);if(!g||g.trim().length<100)throw new Error("   .  PDF .");const y=await Mhe(g);s(y.summary),d(y.method)}catch(g){o(g.message||"    ."),console.error(" :",g)}finally{r(!1)}};return A.jsx("div",{className:"min-h-screen bg-white dark:bg-dark-50 pt-24 pb-12",children:A.jsxs(se.div,{className:"max-w-4xl mx-auto px-4",variants:Nhe,initial:"hidden",animate:"visible",children:[A.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"   AI"}),A.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"PDF   AI   ."}),A.jsxs(se.div,{className:"bg-gray-50 dark:bg-dark-100 rounded-lg p-8 mb-8 border-2 border-dashed border-blue-400",whileHover:{scale:1.02},children:[A.jsxs("div",{className:"text-center",children:[A.jsx("input",{type:"file",accept:".pdf",onChange:f,className:"hidden",id:"pdf-upload"}),A.jsxs("label",{htmlFor:"pdf-upload",className:"cursor-pointer block",children:[A.jsx("div",{className:"text-6xl mb-4",children:""}),A.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"PDF    "}),A.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"( 5 )"})]})]}),t&&A.jsx("div",{className:"mt-6 p-4 bg-blue-100 dark:bg-blue-900/30 rounded-lg border border-blue-400",children:A.jsxs("p",{className:"text-blue-900 dark:text-blue-100",children:[" : ",A.jsx("strong",{children:t.name})]})})]}),A.jsxs("div",{className:"flex gap-4 mb-8",children:[A.jsx(se.button,{onClick:p,disabled:!t||n,whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-bold py-3 px-6 rounded-lg transition",children:n?"   ...":" AI "}),A.jsx(se.button,{onClick:()=>{e(null),c(""),s(null),o(null)},whileHover:{scale:1.05},className:"bg-gray-400 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition",children:" "})]}),a&&A.jsxs(se.div,{className:"bg-red-100 dark:bg-red-900/30 border border-red-400 text-red-700 dark:text-red-200 px-6 py-4 rounded-lg mb-8",initial:{opacity:0},animate:{opacity:1},children:[A.jsx("strong",{children:":"})," ",a]}),i&&A.jsxs(se.div,{className:"bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 p-6 rounded-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[A.jsxs("div",{className:"flex items-center mb-4",children:[A.jsx("span",{className:"text-2xl mr-3",children:""}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:l}),A.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[": ",u==="AI"?" AI  (Hugging Face)":"   "]})]})]}),A.jsx("div",{className:"bg-white dark:bg-dark-100 p-4 rounded-lg",children:A.jsx("p",{className:"text-gray-800 dark:text-gray-200 leading-relaxed",children:i})}),A.jsxs("div",{className:"mt-4 flex gap-2",children:[A.jsx(se.button,{onClick:()=>{const g=document.createElement("a");g.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(i)),g.setAttribute("download",`${l}_summary.txt`),g.style.display="none",document.body.appendChild(g),g.click(),document.body.removeChild(g)},whileHover:{scale:1.05},className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded transition text-sm",children:"  "}),A.jsx(se.button,{onClick:()=>{navigator.clipboard.writeText(i),alert(" !")},whileHover:{scale:1.05},className:"bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded transition text-sm",children:" "})]})]}),A.jsxs(se.div,{className:"mt-12 bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg border border-blue-200 dark:border-blue-800",initial:{opacity:0},whileInView:{opacity:1},children:[A.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"  "}),A.jsxs("ol",{className:"space-y-2 text-gray-700 dark:text-gray-300",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"1."}),"   PDF  "]}),A.jsxs("li",{children:[A.jsx("strong",{children:"2."}),' "AI "  ']}),A.jsxs("li",{children:[A.jsx("strong",{children:"3."})," AI    "]}),A.jsxs("li",{children:[A.jsx("strong",{children:"4."}),"      "]})]}),A.jsx("div",{className:"mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/30 rounded border border-yellow-200 dark:border-yellow-800",children:A.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[" ",A.jsx("strong",{children:":"})," PDF   5 .       ."]})})]})]})})}const jhe=()=>{};var R4={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P7=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Fhe=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],o=t[n++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},C7={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,o=a?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,d=(s&3)<<4|o>>4;let f=(o&15)<<2|c>>6,p=c&63;l||(p=64,a||(f=64)),r.push(n[u],n[d],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(P7(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Fhe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||o==null||c==null||d==null)throw new Vhe;const f=s<<2|o>>4;if(r.push(f),c!==64){const p=o<<4&240|c>>2;if(r.push(p),d!==64){const g=c<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Vhe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Bhe=function(t){const e=P7(t);return C7.encodeByteArray(e,!0)},GS=function(t){return Bhe(t).replace(/\./g,"")},I7=function(t){try{return C7.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $he(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uhe=()=>$he().__FIREBASE_DEFAULTS__,zhe=()=>{if(typeof process>"u"||typeof R4>"u")return;const t=R4.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Hhe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&I7(t[1]);return e&&JSON.parse(e)},JT=()=>{try{return jhe()||Uhe()||zhe()||Hhe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},k7=t=>{var e,n;return(n=(e=JT())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},R7=t=>{const e=k7(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},O7=()=>{var t;return(t=JT())==null?void 0:t.config},D7=t=>{var e;return(e=JT())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Whe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function j2(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M7(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[GS(JSON.stringify(n)),GS(JSON.stringify(a)),""].join(".")}const R0={};function Ghe(){const t={prod:[],emulator:[]};for(const e of Object.keys(R0))R0[e]?t.emulator.push(e):t.prod.push(e);return t}function Khe(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let O4=!1;function F2(t,e){if(typeof window>"u"||typeof document>"u"||!pp(window.location.host)||R0[t]===e||R0[t]||O4)return;R0[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=Ghe().prod.length>0;function a(){const f=document.getElementById(r);f&&f.remove()}function o(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{O4=!0,a()},f}function u(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=Khe(r),p=n("text"),g=document.getElementById(p)||document.createElement("span"),y=n("learnmore"),v=document.getElementById(y)||document.createElement("a"),b=n("preprendIcon"),_=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const w=f.element;o(w),u(v,y);const T=c();l(_,b),w.append(_,g,v,T),document.body.appendChild(w)}s?(g.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qhe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yr())}function Xhe(){var e;const t=(e=JT())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Yhe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Qhe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Jhe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Zhe(){const t=Yr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ede(){return!Xhe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tde(){try{return typeof indexedDB=="object"}catch{return!1}}function nde(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rde="FirebaseError";class el extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=rde,Object.setPrototypeOf(this,el.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Y_.prototype.create)}}class Y_{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?ide(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new el(i,o,r)}}function ide(t,e){return t.replace(sde,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const sde=/\{\$([^}]+)}/g;function ade(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Qf(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(D4(s)&&D4(a)){if(!Qf(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function D4(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function l0(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function c0(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function ode(t,e){const n=new lde(t,e);return n.subscribe.bind(n)}class lde{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");cde(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=HI),i.error===void 0&&(i.error=HI),i.complete===void 0&&(i.complete=HI);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cde(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function HI(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(t){return t&&t._delegate?t._delegate:t}class bh{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ude=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Whe;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dde(e))try{this.getOrInitializeService({instanceIdentifier:nd})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=nd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=nd){return this.instances.has(e)}getOptions(e=nd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hde(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=nd){return this.component?this.component.multipleInstances?e:nd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function hde(t){return t===nd?void 0:t}function dde(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fde{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ude(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Be||(Be={}));const pde={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},mde=Be.INFO,gde={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},yde=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=gde[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class V2{constructor(e){this.name=e,this._logLevel=mde,this._logHandler=yde,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pde[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const vde=(t,e)=>e.some(n=>t instanceof n);let M4,N4;function bde(){return M4||(M4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wde(){return N4||(N4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const N7=new WeakMap,AD=new WeakMap,L7=new WeakMap,WI=new WeakMap,B2=new WeakMap;function _de(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(lh(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&N7.set(n,t)}).catch(()=>{}),B2.set(e,t),e}function xde(t){if(AD.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});AD.set(t,e)}let ED={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return AD.get(t);if(e==="objectStoreNames")return t.objectStoreNames||L7.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lh(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ade(t){ED=t(ED)}function Ede(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(GI(this),e,...n);return L7.set(r,e.sort?e.sort():[e]),lh(r)}:wde().includes(t)?function(...e){return t.apply(GI(this),e),lh(N7.get(this))}:function(...e){return lh(t.apply(GI(this),e))}}function Sde(t){return typeof t=="function"?Ede(t):(t instanceof IDBTransaction&&xde(t),vde(t,bde())?new Proxy(t,ED):t)}function lh(t){if(t instanceof IDBRequest)return _de(t);if(WI.has(t))return WI.get(t);const e=Sde(t);return e!==t&&(WI.set(t,e),B2.set(e,t)),e}const GI=t=>B2.get(t);function Tde(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=lh(a);return r&&a.addEventListener("upgradeneeded",l=>{r(lh(a.result),l.oldVersion,l.newVersion,lh(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),o}const Pde=["get","getKey","getAll","getAllKeys","count"],Cde=["put","add","delete","clear"],KI=new Map;function L4(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(KI.get(e))return KI.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Cde.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Pde.includes(n)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(o.shift())),(await Promise.all([c[n](...o),i&&l.done]))[0]};return KI.set(e,s),s}Ade(t=>({...t,get:(e,n,r)=>L4(e,n)||t.get(e,n,r),has:(e,n)=>!!L4(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ide{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kde(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function kde(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const SD="@firebase/app",j4="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=new V2("@firebase/app"),Rde="@firebase/app-compat",Ode="@firebase/analytics-compat",Dde="@firebase/analytics",Mde="@firebase/app-check-compat",Nde="@firebase/app-check",Lde="@firebase/auth",jde="@firebase/auth-compat",Fde="@firebase/database",Vde="@firebase/data-connect",Bde="@firebase/database-compat",$de="@firebase/functions",Ude="@firebase/functions-compat",zde="@firebase/installations",Hde="@firebase/installations-compat",Wde="@firebase/messaging",Gde="@firebase/messaging-compat",Kde="@firebase/performance",qde="@firebase/performance-compat",Xde="@firebase/remote-config",Yde="@firebase/remote-config-compat",Qde="@firebase/storage",Jde="@firebase/storage-compat",Zde="@firebase/firestore",efe="@firebase/ai",tfe="@firebase/firestore-compat",nfe="firebase",rfe="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD="[DEFAULT]",ife={[SD]:"fire-core",[Rde]:"fire-core-compat",[Dde]:"fire-analytics",[Ode]:"fire-analytics-compat",[Nde]:"fire-app-check",[Mde]:"fire-app-check-compat",[Lde]:"fire-auth",[jde]:"fire-auth-compat",[Fde]:"fire-rtdb",[Vde]:"fire-data-connect",[Bde]:"fire-rtdb-compat",[$de]:"fire-fn",[Ude]:"fire-fn-compat",[zde]:"fire-iid",[Hde]:"fire-iid-compat",[Wde]:"fire-fcm",[Gde]:"fire-fcm-compat",[Kde]:"fire-perf",[qde]:"fire-perf-compat",[Xde]:"fire-rc",[Yde]:"fire-rc-compat",[Qde]:"fire-gcs",[Jde]:"fire-gcs-compat",[Zde]:"fire-fst",[tfe]:"fire-fst-compat",[efe]:"fire-vertex","fire-js":"fire-js",[nfe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=new Map,sfe=new Map,PD=new Map;function F4(t,e){try{t.container.addComponent(e)}catch(n){fc.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Jf(t){const e=t.name;if(PD.has(e))return fc.debug(`There were multiple attempts to register component ${e}.`),!1;PD.set(e,t);for(const n of KS.values())F4(n,t);for(const n of sfe.values())F4(n,t);return!0}function ZT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ds(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const afe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ch=new Y_("app","Firebase",afe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ofe{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ch.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp=rfe;function j7(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:TD,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw ch.create("bad-app-name",{appName:String(i)});if(n||(n=O7()),!n)throw ch.create("no-options");const s=KS.get(i);if(s){if(Qf(n,s.options)&&Qf(r,s.config))return s;throw ch.create("duplicate-app",{appName:i})}const a=new fde(i);for(const l of PD.values())a.addComponent(l);const o=new ofe(n,r,a);return KS.set(i,o),o}function $2(t=TD){const e=KS.get(t);if(!e&&t===TD&&O7())return j7();if(!e)throw ch.create("no-app",{appName:t});return e}function jo(t,e,n){let r=ife[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fc.warn(a.join(" "));return}Jf(new bh(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lfe="firebase-heartbeat-database",cfe=1,yb="firebase-heartbeat-store";let qI=null;function F7(){return qI||(qI=Tde(lfe,cfe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yb)}catch(n){console.warn(n)}}}}).catch(t=>{throw ch.create("idb-open",{originalErrorMessage:t.message})})),qI}async function ufe(t){try{const n=(await F7()).transaction(yb),r=await n.objectStore(yb).get(V7(t));return await n.done,r}catch(e){if(e instanceof el)fc.warn(e.message);else{const n=ch.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fc.warn(n.message)}}}async function V4(t,e){try{const r=(await F7()).transaction(yb,"readwrite");await r.objectStore(yb).put(e,V7(t)),await r.done}catch(n){if(n instanceof el)fc.warn(n.message);else{const r=ch.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fc.warn(r.message)}}}function V7(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hfe=1024,dfe=30;class ffe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mfe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=B4();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>dfe){const a=gfe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){fc.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=B4(),{heartbeatsToSend:r,unsentEntries:i}=pfe(this._heartbeatsCache.heartbeats),s=GS(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return fc.warn(n),""}}}function B4(){return new Date().toISOString().substring(0,10)}function pfe(t,e=hfe){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),$4(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),$4(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class mfe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tde()?nde().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ufe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return V4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return V4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function $4(t){return GS(JSON.stringify({version:2,heartbeats:t})).length}function gfe(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yfe(t){Jf(new bh("platform-logger",e=>new Ide(e),"PRIVATE")),Jf(new bh("heartbeat",e=>new ffe(e),"PRIVATE")),jo(SD,j4,t),jo(SD,j4,"esm2020"),jo("fire-js","")}yfe("");var vfe="firebase",bfe="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jo(vfe,bfe,"app");function B7(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wfe=B7,$7=new Y_("auth","Firebase",B7());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=new V2("@firebase/auth");function _fe(t,...e){qS.logLevel<=Be.WARN&&qS.warn(`Auth (${mp}): ${t}`,...e)}function $E(t,...e){qS.logLevel<=Be.ERROR&&qS.error(`Auth (${mp}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(t,...e){throw U2(t,...e)}function Fo(t,...e){return U2(t,...e)}function U7(t,e,n){const r={...wfe(),[e]:n};return new Y_("auth","Firebase",r).create(e,{appName:t.name})}function ec(t){return U7(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function U2(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return $7.create(t,...e)}function be(t,e,...n){if(!t)throw U2(e,...n)}function Xl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw $E(e),new Error(e)}function pc(t,e){t||Xl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function xfe(){return U4()==="http:"||U4()==="https:"}function U4(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Afe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xfe()||Qhe()||"connection"in navigator)?navigator.onLine:!0}function Efe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,n){this.shortDelay=e,this.longDelay=n,pc(n>e,"Short delay should be less than long delay!"),this.isMobile=qhe()||Jhe()}get(){return Afe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(t,e){pc(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sfe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tfe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Pfe=new J_(3e4,6e4);function Mh(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Nh(t,e,n,r,i={}){return H7(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=Q_({key:t.config.apiKey,...a}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...s};return Yhe()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&pp(t.emulatorConfig.host)&&(c.credentials="include"),z7.fetch()(await W7(t,t.config.apiHost,n,o),c)})}async function H7(t,e,n){t._canInitEmulator=!1;const r={...Sfe,...e};try{const i=new Ife(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw bA(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,c]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw bA(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw bA(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw bA(t,"user-disabled",a);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw U7(t,u,c);Ua(t,u)}}catch(i){if(i instanceof el)throw i;Ua(t,"network-request-failed",{message:String(i)})}}async function Z_(t,e,n,r,i={}){const s=await Nh(t,e,n,r,i);return"mfaPendingCredential"in s&&Ua(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function W7(t,e,n,r){const i=`${e}${n}?${r}`,s=t,a=s.config.emulator?z2(t.config,i):`${t.config.apiScheme}://${i}`;return Tfe.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function Cfe(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ife{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Fo(this.auth,"network-request-failed")),Pfe.get())})}}function bA(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Fo(t,e,r);return i.customData._tokenResponse=n,i}function z4(t){return t!==void 0&&t.enterprise!==void 0}class kfe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Cfe(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Rfe(t,e){return Nh(t,"GET","/v2/recaptchaConfig",Mh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ofe(t,e){return Nh(t,"POST","/v1/accounts:delete",e)}async function XS(t,e){return Nh(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Dfe(t,e=!1){const n=ir(t),r=await n.getIdToken(e),i=H2(r);be(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:O0(XI(i.auth_time)),issuedAtTime:O0(XI(i.iat)),expirationTime:O0(XI(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function XI(t){return Number(t)*1e3}function H2(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return $E("JWT malformed, contained fewer than 3 sections"),null;try{const i=I7(n);return i?JSON.parse(i):($E("Failed to decode base64 JWT payload"),null)}catch(i){return $E("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function H4(t){const e=H2(t);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vb(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof el&&Mfe(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Mfe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nfe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=O0(this.lastLoginAt),this.creationTime=O0(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YS(t){var d;const e=t.auth,n=await t.getIdToken(),r=await vb(t,XS(e,{idToken:n}));be(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(d=i.providerUserInfo)!=null&&d.length?G7(i.providerUserInfo):[],a=jfe(t.providerData,s),o=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),c=o?l:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new ID(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,u)}async function Lfe(t){const e=ir(t);await YS(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jfe(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function G7(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ffe(t,e){const n=await H7(t,{},async()=>{const r=Q_({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=await W7(t,i,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return t.emulatorConfig&&pp(t.emulatorConfig.host)&&(l.credentials="include"),z7.fetch()(a,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Vfe(t,e){return Nh(t,"POST","/v2/accounts:revokeToken",Mh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):H4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){be(e.length!==0,"internal-error");const n=H4(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Ffe(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new Em;return r&&(be(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(be(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(be(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Em,this.toJSON())}_performRefresh(){return Xl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(t,e){be(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Na{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new Nfe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ID(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await vb(this,this.stsTokenManager.getToken(this.auth,e));return be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Dfe(this,e)}reload(){return Lfe(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Na({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await YS(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ds(this.auth.app))return Promise.reject(ec(this.auth));const e=await this.getIdToken();return await vb(this,Ofe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,o=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:g,stsTokenManager:y}=n;be(d&&y,e,"internal-error");const v=Em.fromJSON(this.name,y);be(typeof d=="string",e,"internal-error"),Bc(r,e.name),Bc(i,e.name),be(typeof f=="boolean",e,"internal-error"),be(typeof p=="boolean",e,"internal-error"),Bc(s,e.name),Bc(a,e.name),Bc(o,e.name),Bc(l,e.name),Bc(c,e.name),Bc(u,e.name);const b=new Na({uid:d,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:v,createdAt:c,lastLoginAt:u});return g&&Array.isArray(g)&&(b.providerData=g.map(_=>({..._}))),l&&(b._redirectEventId=l),b}static async _fromIdTokenResponse(e,n,r=!1){const i=new Em;i.updateFromServerResponse(n);const s=new Na({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await YS(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];be(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?G7(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new Em;o.updateFromIdToken(r);const l=new Na({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ID(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4=new Map;function Yl(t){pc(t instanceof Function,"Expected a class definition");let e=W4.get(t);return e?(pc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,W4.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}K7.type="NONE";const G4=K7;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(t,e,n){return`firebase:${t}:${e}:${n}`}class Sm{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=UE(this.userKey,i.apiKey,s),this.fullPersistenceKey=UE("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await XS(this.auth,{idToken:e}).catch(()=>{});return n?Na._fromGetAccountInfoResponse(this.auth,n,e):null}return Na._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Sm(Yl(G4),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Yl(G4);const a=UE(r,e.config.apiKey,e.name);let o=null;for(const c of n)try{const u=await c._get(a);if(u){let d;if(typeof u=="string"){const f=await XS(e,{idToken:u}).catch(()=>{});if(!f)break;d=await Na._fromGetAccountInfoResponse(e,f,u)}else d=Na._fromJSON(e,u);c!==s&&(o=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Sm(s,e,r):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(a)}catch{}})),new Sm(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Q7(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(q7(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Z7(e))return"Blackberry";if(eK(e))return"Webos";if(X7(e))return"Safari";if((e.includes("chrome/")||Y7(e))&&!e.includes("edge/"))return"Chrome";if(J7(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function q7(t=Yr()){return/firefox\//i.test(t)}function X7(t=Yr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Y7(t=Yr()){return/crios\//i.test(t)}function Q7(t=Yr()){return/iemobile/i.test(t)}function J7(t=Yr()){return/android/i.test(t)}function Z7(t=Yr()){return/blackberry/i.test(t)}function eK(t=Yr()){return/webos/i.test(t)}function W2(t=Yr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Bfe(t=Yr()){var e;return W2(t)&&!!((e=window.navigator)!=null&&e.standalone)}function $fe(){return Zhe()&&document.documentMode===10}function tK(t=Yr()){return W2(t)||J7(t)||eK(t)||Z7(t)||/windows phone/i.test(t)||Q7(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nK(t,e=[]){let n;switch(t){case"Browser":n=K4(Yr());break;case"Worker":n=`${K4(Yr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mp}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ufe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zfe(t,e={}){return Nh(t,"GET","/v2/passwordPolicy",Mh(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hfe=6;class Wfe{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Hfe,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gfe{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new q4(this),this.idTokenSubscription=new q4(this),this.beforeStateQueue=new Ufe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$7,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yl(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Sm.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await XS(this,{idToken:e}),r=await Na._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(ds(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await YS(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Efe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ds(this.app))return Promise.reject(ec(this));const n=e?ir(e):null;return n&&be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ds(this.app)?Promise.reject(ec(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ds(this.app)?Promise.reject(ec(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zfe(this),n=new Wfe(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Y_("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Vfe(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Yl(e)||this._popupRedirectResolver;be(n,this,"argument-error"),this.redirectPersistenceManager=await Sm.create(this,[Yl(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nK(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(ds(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&_fe(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function gp(t){return ir(t)}class q4{constructor(e){this.auth=e,this.observer=null,this.addObserver=ode(n=>this.observer=n)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eP={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Kfe(t){eP=t}function rK(t){return eP.loadJS(t)}function qfe(){return eP.recaptchaEnterpriseScript}function Xfe(){return eP.gapiScript}function Yfe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Qfe{constructor(){this.enterprise=new Jfe}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Jfe{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Zfe="recaptcha-enterprise",iK="NO_RECAPTCHA";class epe{constructor(e){this.type=Zfe,this.auth=gp(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{Rfe(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const c=new kfe(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,a(c.siteKey)}}).catch(l=>{o(l)})})}function i(s,a,o){const l=window.grecaptcha;z4(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{a(c)}).catch(()=>{a(iK)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Qfe().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(o=>{if(!n&&z4(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=qfe();l.length!==0&&(l+=o),rK(l).then(()=>{i(o,s,a)}).catch(c=>{a(c)})}}).catch(o=>{a(o)})})}}async function X4(t,e,n,r=!1,i=!1){const s=new epe(t);let a;if(i)a=iK;else try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,c=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function kD(t,e,n,r,i){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await X4(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await X4(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tpe(t,e){const n=ZT(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Qf(s,e??{}))return i;Ua(i,"already-initialized")}return n.initialize({options:e})}function npe(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Yl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function rpe(t,e,n){const r=gp(t);be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=sK(e),{host:a,port:o}=ipe(e),l=o===null?"":`:${o}`,c={url:`${s}//${a}${l}/`},u=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),be(Qf(c,r.config.emulator)&&Qf(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,pp(a)?(j2(`${s}//${a}${l}`),F2("Auth",!0)):spe()}function sK(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ipe(t){const e=sK(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Y4(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:Y4(a)}}}function Y4(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function spe(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xl("not implemented")}_getIdTokenResponse(e){return Xl("not implemented")}_linkToIdToken(e,n){return Xl("not implemented")}_getReauthenticationResolver(e){return Xl("not implemented")}}async function ape(t,e){return Nh(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ope(t,e){return Z_(t,"POST","/v1/accounts:signInWithPassword",Mh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lpe(t,e){return Z_(t,"POST","/v1/accounts:signInWithEmailLink",Mh(t,e))}async function cpe(t,e){return Z_(t,"POST","/v1/accounts:signInWithEmailLink",Mh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb extends G2{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new bb(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new bb(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kD(e,n,"signInWithPassword",ope);case"emailLink":return lpe(e,{email:this._email,oobCode:this._password});default:Ua(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kD(e,r,"signUpPassword",ape);case"emailLink":return cpe(e,{idToken:n,email:this._email,oobCode:this._password});default:Ua(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tm(t,e){return Z_(t,"POST","/v1/accounts:signInWithIdp",Mh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const upe="http://localhost";class Zf extends G2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Zf(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ua("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const a=new Zf(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Tm(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Tm(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Tm(e,n)}buildRequest(){const e={requestUri:upe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Q_(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hpe(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dpe(t){const e=l0(c0(t)).link,n=e?l0(c0(e)).deep_link_id:null,r=l0(c0(t)).deep_link_id;return(r?l0(c0(r)).link:null)||r||n||e||t}class K2{constructor(e){const n=l0(c0(e)),r=n.apiKey??null,i=n.oobCode??null,s=hpe(n.mode??null);be(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=dpe(e);try{return new K2(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(){this.providerId=jy.PROVIDER_ID}static credential(e,n){return bb._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=K2.parseLink(n);return be(r,"argument-error"),bb._fromEmailAndCode(e,r.code,r.tenantId)}}jy.PROVIDER_ID="password";jy.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jy.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aK{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex extends aK{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc extends ex{constructor(){super("facebook.com")}static credential(e){return Zf._fromParams({providerId:Zc.PROVIDER_ID,signInMethod:Zc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zc.credentialFromTaggedObject(e)}static credentialFromError(e){return Zc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zc.credential(e.oauthAccessToken)}catch{return null}}}Zc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu extends ex{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Zf._fromParams({providerId:eu.PROVIDER_ID,signInMethod:eu.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return eu.credentialFromTaggedObject(e)}static credentialFromError(e){return eu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return eu.credential(n,r)}catch{return null}}}eu.GOOGLE_SIGN_IN_METHOD="google.com";eu.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends ex{constructor(){super("github.com")}static credential(e){return Zf._fromParams({providerId:tu.PROVIDER_ID,signInMethod:tu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tu.credentialFromTaggedObject(e)}static credentialFromError(e){return tu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tu.credential(e.oauthAccessToken)}catch{return null}}}tu.GITHUB_SIGN_IN_METHOD="github.com";tu.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends ex{constructor(){super("twitter.com")}static credential(e,n){return Zf._fromParams({providerId:nu.PROVIDER_ID,signInMethod:nu.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return nu.credentialFromTaggedObject(e)}static credentialFromError(e){return nu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return nu.credential(n,r)}catch{return null}}}nu.TWITTER_SIGN_IN_METHOD="twitter.com";nu.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fpe(t,e){return Z_(t,"POST","/v1/accounts:signUp",Mh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Na._fromIdTokenResponse(e,r,i),a=Q4(r);return new ep({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Q4(r);return new ep({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Q4(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS extends el{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,QS.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new QS(e,n,r,i)}}function oK(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?QS._fromErrorAndOperation(t,s,e,r):s})}async function ppe(t,e,n=!1){const r=await vb(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ep._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mpe(t,e,n=!1){const{auth:r}=t;if(ds(r.app))return Promise.reject(ec(r));const i="reauthenticate";try{const s=await vb(t,oK(r,i,e,t),n);be(s.idToken,r,"internal-error");const a=H2(s.idToken);be(a,r,"internal-error");const{sub:o}=a;return be(t.uid===o,r,"user-mismatch"),ep._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ua(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lK(t,e,n=!1){if(ds(t.app))return Promise.reject(ec(t));const r="signIn",i=await oK(t,r,e),s=await ep._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function gpe(t,e){return lK(gp(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cK(t){const e=gp(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ype(t,e,n){if(ds(t.app))return Promise.reject(ec(t));const r=gp(t),a=await kD(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fpe).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&cK(t),l}),o=await ep._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(o.user),o}function vpe(t,e,n){return ds(t.app)?Promise.reject(ec(t)):gpe(ir(t),jy.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&cK(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uK(t,e){return ir(t).setPersistence(e)}function bpe(t,e,n,r){return ir(t).onIdTokenChanged(e,n,r)}function wpe(t,e,n){return ir(t).beforeAuthStateChanged(e,n)}const JS="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hK{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(JS,"1"),this.storage.removeItem(JS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _pe=1e3,xpe=10;class dK extends hK{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tK(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);$fe()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,xpe):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},_pe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}dK.type="LOCAL";const q2=dK;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fK extends hK{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}fK.type="SESSION";const pK=fK;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ape(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new tP(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async c=>c(n.origin,s)),l=await Ape(o);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tP.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Epe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const c=X2("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(f.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(){return window}function Spe(t){Vo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mK(){return typeof Vo().WorkerGlobalScope<"u"&&typeof Vo().importScripts=="function"}async function Tpe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ppe(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Cpe(){return mK()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gK="firebaseLocalStorageDb",Ipe=1,ZS="firebaseLocalStorage",yK="fbase_key";class tx{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function nP(t,e){return t.transaction([ZS],e?"readwrite":"readonly").objectStore(ZS)}function kpe(){const t=indexedDB.deleteDatabase(gK);return new tx(t).toPromise()}function RD(){const t=indexedDB.open(gK,Ipe);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ZS,{keyPath:yK})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ZS)?e(r):(r.close(),await kpe(),e(await RD()))})})}async function J4(t,e,n){const r=nP(t,!0).put({[yK]:e,value:n});return new tx(r).toPromise()}async function Rpe(t,e){const n=nP(t,!1).get(e),r=await new tx(n).toPromise();return r===void 0?null:r.value}function Z4(t,e){const n=nP(t,!0).delete(e);return new tx(n).toPromise()}const Ope=800,Dpe=3;class vK{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await RD(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Dpe)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mK()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tP._getInstance(Cpe()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Tpe(),!this.activeServiceWorker)return;this.sender=new Epe(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ppe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await RD();return await J4(e,JS,"1"),await Z4(e,JS),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>J4(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Rpe(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Z4(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=nP(i,!1).getAll();return new tx(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ope)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vK.type="LOCAL";const Mpe=vK;new J_(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Npe(t,e){return e?Yl(e):(be(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2 extends G2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Tm(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Tm(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Tm(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Lpe(t){return lK(t.auth,new Y2(t),t.bypassAuthState)}function jpe(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),mpe(n,new Y2(t),t.bypassAuthState)}async function Fpe(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),ppe(n,new Y2(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bK{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Lpe;case"linkViaPopup":case"linkViaRedirect":return Fpe;case"reauthViaPopup":case"reauthViaRedirect":return jpe;default:Ua(this.auth,"internal-error")}}resolve(e){pc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vpe=new J_(2e3,1e4);class cm extends bK{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,cm.currentPopupAction&&cm.currentPopupAction.cancel(),cm.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){pc(this.filter.length===1,"Popup operations only handle one event");const e=X2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Fo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cm.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Vpe.get())};e()}}cm.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bpe="pendingRedirect",zE=new Map;class $pe extends bK{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=zE.get(this.auth._key());if(!e){try{const r=await Upe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}zE.set(this.auth._key(),e)}return this.bypassAuthState||zE.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Upe(t,e){const n=Wpe(e),r=Hpe(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function zpe(t,e){zE.set(t._key(),e)}function Hpe(t){return Yl(t._redirectPersistence)}function Wpe(t){return UE(Bpe,t.config.apiKey,t.name)}async function Gpe(t,e,n=!1){if(ds(t.app))return Promise.reject(ec(t));const r=gp(t),i=Npe(r,e),a=await new $pe(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kpe=10*60*1e3;class qpe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Xpe(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!wK(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Fo(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Kpe&&this.cachedEventUids.clear(),this.cachedEventUids.has(e$(e))}saveEventToCache(e){this.cachedEventUids.add(e$(e)),this.lastProcessedEventTime=Date.now()}}function e$(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function wK({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Xpe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wK(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ype(t,e={}){return Nh(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qpe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jpe=/^https?/;async function Zpe(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Ype(t);for(const n of e)try{if(eme(n))return}catch{}Ua(t,"unauthorized-domain")}function eme(t){const e=CD(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!Jpe.test(n))return!1;if(Qpe.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tme=new J_(3e4,6e4);function t$(){const t=Vo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nme(t){return new Promise((e,n)=>{var i,s,a;function r(){t$(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{t$(),n(Fo(t,"network-request-failed"))},timeout:tme.get()})}if((s=(i=Vo().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((a=Vo().gapi)!=null&&a.load)r();else{const o=Yfe("iframefcb");return Vo()[o]=()=>{gapi.load?r():n(Fo(t,"network-request-failed"))},rK(`${Xfe()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw HE=null,e})}let HE=null;function rme(t){return HE=HE||nme(t),HE}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ime=new J_(5e3,15e3),sme="__/auth/iframe",ame="emulator/auth/iframe",ome={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lme=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cme(t){const e=t.config;be(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?z2(e,ame):`https://${t.config.authDomain}/${sme}`,r={apiKey:e.apiKey,appName:t.name,v:mp},i=lme.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Q_(r).slice(1)}`}async function ume(t){const e=await rme(t),n=Vo().gapi;return be(n,t,"internal-error"),e.open({where:document.body,url:cme(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ome,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Fo(t,"network-request-failed"),o=Vo().setTimeout(()=>{s(a)},ime.get());function l(){Vo().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hme={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dme=500,fme=600,pme="_blank",mme="http://localhost";class n${constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gme(t,e,n,r=dme,i=fme){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l={...hme,width:r.toString(),height:i.toString(),top:s,left:a},c=Yr().toLowerCase();n&&(o=Y7(c)?pme:n),q7(c)&&(e=e||mme,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[p,g])=>`${f}${p}=${g},`,"");if(Bfe(c)&&o!=="_self")return yme(e||"",o),new n$(null);const d=window.open(e||"",o,u);be(d,t,"popup-blocked");try{d.focus()}catch{}return new n$(d)}function yme(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vme="__/auth/handler",bme="emulator/auth/handler",wme=encodeURIComponent("fac");async function r$(t,e,n,r,i,s){be(t.config.authDomain,t,"auth-domain-config-required"),be(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:mp,eventId:i};if(e instanceof aK){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",ade(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))a[u]=d}if(e instanceof ex){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(a.scopes=u.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const l=await t._getAppCheckToken(),c=l?`#${wme}=${encodeURIComponent(l)}`:"";return`${_me(t)}?${Q_(o).slice(1)}${c}`}function _me({config:t}){return t.emulator?z2(t,bme):`https://${t.authDomain}/${vme}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI="webStorageSupport";class xme{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pK,this._completeRedirectFn=Gpe,this._overrideRedirectResult=zpe}async _openPopup(e,n,r,i){var a;pc((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await r$(e,n,r,CD(),i);return gme(e,s,X2())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await r$(e,n,r,CD(),i);return Spe(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(pc(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await ume(e),r=new qpe(e);return n.register("authEvent",i=>(be(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(YI,{type:YI},i=>{var a;const s=(a=i==null?void 0:i[0])==null?void 0:a[YI];s!==void 0&&n(!!s),Ua(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Zpe(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return tK()||X7()||W2()}}const Ame=xme;var i$="@firebase/auth",s$="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eme{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sme(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Tme(t){Jf(new bh("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;be(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nK(t)},c=new Gfe(r,i,s,l);return npe(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Jf(new bh("auth-internal",e=>{const n=gp(e.getProvider("auth").getImmediate());return(r=>new Eme(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),jo(i$,s$,Sme(t)),jo(i$,s$,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pme=5*60,Cme=D7("authIdTokenMaxAge")||Pme;let a$=null;const Ime=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Cme)return;const i=n==null?void 0:n.token;a$!==i&&(a$=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function kme(t=$2()){const e=ZT(t,"auth");if(e.isInitialized())return e.getImmediate();const n=tpe(t,{popupRedirectResolver:Ame,persistence:[Mpe,q2,pK]}),r=D7("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=Ime(s.toString());wpe(n,a,()=>a(n.currentUser)),bpe(n,o=>a(o))}}const i=k7("auth");return i&&rpe(n,`http://${i}`),n}function Rme(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Kfe({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Fo("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Rme().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Tme("Browser");var o$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uh,_K;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,I){function M(){}M.prototype=I.prototype,C.F=I.prototype,C.prototype=new M,C.prototype.constructor=C,C.D=function(L,N,F){for(var j=Array(arguments.length-2),K=2;K<arguments.length;K++)j[K-2]=arguments[K];return I.prototype[N].apply(L,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,I,M){M||(M=0);const L=Array(16);if(typeof I=="string")for(var N=0;N<16;++N)L[N]=I.charCodeAt(M++)|I.charCodeAt(M++)<<8|I.charCodeAt(M++)<<16|I.charCodeAt(M++)<<24;else for(N=0;N<16;++N)L[N]=I[M++]|I[M++]<<8|I[M++]<<16|I[M++]<<24;I=C.g[0],M=C.g[1],N=C.g[2];let F=C.g[3],j;j=I+(F^M&(N^F))+L[0]+3614090360&4294967295,I=M+(j<<7&4294967295|j>>>25),j=F+(N^I&(M^N))+L[1]+3905402710&4294967295,F=I+(j<<12&4294967295|j>>>20),j=N+(M^F&(I^M))+L[2]+606105819&4294967295,N=F+(j<<17&4294967295|j>>>15),j=M+(I^N&(F^I))+L[3]+3250441966&4294967295,M=N+(j<<22&4294967295|j>>>10),j=I+(F^M&(N^F))+L[4]+4118548399&4294967295,I=M+(j<<7&4294967295|j>>>25),j=F+(N^I&(M^N))+L[5]+1200080426&4294967295,F=I+(j<<12&4294967295|j>>>20),j=N+(M^F&(I^M))+L[6]+2821735955&4294967295,N=F+(j<<17&4294967295|j>>>15),j=M+(I^N&(F^I))+L[7]+4249261313&4294967295,M=N+(j<<22&4294967295|j>>>10),j=I+(F^M&(N^F))+L[8]+1770035416&4294967295,I=M+(j<<7&4294967295|j>>>25),j=F+(N^I&(M^N))+L[9]+2336552879&4294967295,F=I+(j<<12&4294967295|j>>>20),j=N+(M^F&(I^M))+L[10]+4294925233&4294967295,N=F+(j<<17&4294967295|j>>>15),j=M+(I^N&(F^I))+L[11]+2304563134&4294967295,M=N+(j<<22&4294967295|j>>>10),j=I+(F^M&(N^F))+L[12]+1804603682&4294967295,I=M+(j<<7&4294967295|j>>>25),j=F+(N^I&(M^N))+L[13]+4254626195&4294967295,F=I+(j<<12&4294967295|j>>>20),j=N+(M^F&(I^M))+L[14]+2792965006&4294967295,N=F+(j<<17&4294967295|j>>>15),j=M+(I^N&(F^I))+L[15]+1236535329&4294967295,M=N+(j<<22&4294967295|j>>>10),j=I+(N^F&(M^N))+L[1]+4129170786&4294967295,I=M+(j<<5&4294967295|j>>>27),j=F+(M^N&(I^M))+L[6]+3225465664&4294967295,F=I+(j<<9&4294967295|j>>>23),j=N+(I^M&(F^I))+L[11]+643717713&4294967295,N=F+(j<<14&4294967295|j>>>18),j=M+(F^I&(N^F))+L[0]+3921069994&4294967295,M=N+(j<<20&4294967295|j>>>12),j=I+(N^F&(M^N))+L[5]+3593408605&4294967295,I=M+(j<<5&4294967295|j>>>27),j=F+(M^N&(I^M))+L[10]+38016083&4294967295,F=I+(j<<9&4294967295|j>>>23),j=N+(I^M&(F^I))+L[15]+3634488961&4294967295,N=F+(j<<14&4294967295|j>>>18),j=M+(F^I&(N^F))+L[4]+3889429448&4294967295,M=N+(j<<20&4294967295|j>>>12),j=I+(N^F&(M^N))+L[9]+568446438&4294967295,I=M+(j<<5&4294967295|j>>>27),j=F+(M^N&(I^M))+L[14]+3275163606&4294967295,F=I+(j<<9&4294967295|j>>>23),j=N+(I^M&(F^I))+L[3]+4107603335&4294967295,N=F+(j<<14&4294967295|j>>>18),j=M+(F^I&(N^F))+L[8]+1163531501&4294967295,M=N+(j<<20&4294967295|j>>>12),j=I+(N^F&(M^N))+L[13]+2850285829&4294967295,I=M+(j<<5&4294967295|j>>>27),j=F+(M^N&(I^M))+L[2]+4243563512&4294967295,F=I+(j<<9&4294967295|j>>>23),j=N+(I^M&(F^I))+L[7]+1735328473&4294967295,N=F+(j<<14&4294967295|j>>>18),j=M+(F^I&(N^F))+L[12]+2368359562&4294967295,M=N+(j<<20&4294967295|j>>>12),j=I+(M^N^F)+L[5]+4294588738&4294967295,I=M+(j<<4&4294967295|j>>>28),j=F+(I^M^N)+L[8]+2272392833&4294967295,F=I+(j<<11&4294967295|j>>>21),j=N+(F^I^M)+L[11]+1839030562&4294967295,N=F+(j<<16&4294967295|j>>>16),j=M+(N^F^I)+L[14]+4259657740&4294967295,M=N+(j<<23&4294967295|j>>>9),j=I+(M^N^F)+L[1]+2763975236&4294967295,I=M+(j<<4&4294967295|j>>>28),j=F+(I^M^N)+L[4]+1272893353&4294967295,F=I+(j<<11&4294967295|j>>>21),j=N+(F^I^M)+L[7]+4139469664&4294967295,N=F+(j<<16&4294967295|j>>>16),j=M+(N^F^I)+L[10]+3200236656&4294967295,M=N+(j<<23&4294967295|j>>>9),j=I+(M^N^F)+L[13]+681279174&4294967295,I=M+(j<<4&4294967295|j>>>28),j=F+(I^M^N)+L[0]+3936430074&4294967295,F=I+(j<<11&4294967295|j>>>21),j=N+(F^I^M)+L[3]+3572445317&4294967295,N=F+(j<<16&4294967295|j>>>16),j=M+(N^F^I)+L[6]+76029189&4294967295,M=N+(j<<23&4294967295|j>>>9),j=I+(M^N^F)+L[9]+3654602809&4294967295,I=M+(j<<4&4294967295|j>>>28),j=F+(I^M^N)+L[12]+3873151461&4294967295,F=I+(j<<11&4294967295|j>>>21),j=N+(F^I^M)+L[15]+530742520&4294967295,N=F+(j<<16&4294967295|j>>>16),j=M+(N^F^I)+L[2]+3299628645&4294967295,M=N+(j<<23&4294967295|j>>>9),j=I+(N^(M|~F))+L[0]+4096336452&4294967295,I=M+(j<<6&4294967295|j>>>26),j=F+(M^(I|~N))+L[7]+1126891415&4294967295,F=I+(j<<10&4294967295|j>>>22),j=N+(I^(F|~M))+L[14]+2878612391&4294967295,N=F+(j<<15&4294967295|j>>>17),j=M+(F^(N|~I))+L[5]+4237533241&4294967295,M=N+(j<<21&4294967295|j>>>11),j=I+(N^(M|~F))+L[12]+1700485571&4294967295,I=M+(j<<6&4294967295|j>>>26),j=F+(M^(I|~N))+L[3]+2399980690&4294967295,F=I+(j<<10&4294967295|j>>>22),j=N+(I^(F|~M))+L[10]+4293915773&4294967295,N=F+(j<<15&4294967295|j>>>17),j=M+(F^(N|~I))+L[1]+2240044497&4294967295,M=N+(j<<21&4294967295|j>>>11),j=I+(N^(M|~F))+L[8]+1873313359&4294967295,I=M+(j<<6&4294967295|j>>>26),j=F+(M^(I|~N))+L[15]+4264355552&4294967295,F=I+(j<<10&4294967295|j>>>22),j=N+(I^(F|~M))+L[6]+2734768916&4294967295,N=F+(j<<15&4294967295|j>>>17),j=M+(F^(N|~I))+L[13]+1309151649&4294967295,M=N+(j<<21&4294967295|j>>>11),j=I+(N^(M|~F))+L[4]+4149444226&4294967295,I=M+(j<<6&4294967295|j>>>26),j=F+(M^(I|~N))+L[11]+3174756917&4294967295,F=I+(j<<10&4294967295|j>>>22),j=N+(I^(F|~M))+L[2]+718787259&4294967295,N=F+(j<<15&4294967295|j>>>17),j=M+(F^(N|~I))+L[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(N+(j<<21&4294967295|j>>>11))&4294967295,C.g[2]=C.g[2]+N&4294967295,C.g[3]=C.g[3]+F&4294967295}r.prototype.v=function(C,I){I===void 0&&(I=C.length);const M=I-this.blockSize,L=this.C;let N=this.h,F=0;for(;F<I;){if(N==0)for(;F<=M;)i(this,C,F),F+=this.blockSize;if(typeof C=="string"){for(;F<I;)if(L[N++]=C.charCodeAt(F++),N==this.blockSize){i(this,L),N=0;break}}else for(;F<I;)if(L[N++]=C[F++],N==this.blockSize){i(this,L),N=0;break}}this.h=N,this.o+=I},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;I=this.o*8;for(var M=C.length-8;M<C.length;++M)C[M]=I&255,I/=256;for(this.v(C),C=Array(16),I=0,M=0;M<4;++M)for(let L=0;L<32;L+=8)C[I++]=this.g[M]>>>L&255;return C};function s(C,I){var M=o;return Object.prototype.hasOwnProperty.call(M,C)?M[C]:M[C]=I(C)}function a(C,I){this.h=I;const M=[];let L=!0;for(let N=C.length-1;N>=0;N--){const F=C[N]|0;L&&F==I||(M[N]=F,L=!1)}this.g=M}var o={};function l(C){return-128<=C&&C<128?s(C,function(I){return new a([I|0],I<0?-1:0)}):new a([C|0],C<0?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return d;if(C<0)return v(c(-C));const I=[];let M=1;for(let L=0;C>=M;L++)I[L]=C/M|0,M*=4294967296;return new a(I,0)}function u(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return v(u(C.substring(1),I));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=c(Math.pow(I,8));let L=d;for(let F=0;F<C.length;F+=8){var N=Math.min(8,C.length-F);const j=parseInt(C.substring(F,F+N),I);N<8?(N=c(Math.pow(I,N)),L=L.j(N).add(c(j))):(L=L.j(M),L=L.add(c(j)))}return L}var d=l(0),f=l(1),p=l(16777216);t=a.prototype,t.m=function(){if(y(this))return-v(this).m();let C=0,I=1;for(let M=0;M<this.g.length;M++){const L=this.i(M);C+=(L>=0?L:4294967296+L)*I,I*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(g(this))return"0";if(y(this))return"-"+v(this).toString(C);const I=c(Math.pow(C,6));var M=this;let L="";for(;;){const N=T(M,I).g;M=b(M,N.j(I));let F=((M.g.length>0?M.g[0]:M.h)>>>0).toString(C);if(M=N,g(M))return F+L;for(;F.length<6;)F="0"+F;L=F+L}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function g(C){if(C.h!=0)return!1;for(let I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function y(C){return C.h==-1}t.l=function(C){return C=b(this,C),y(C)?-1:g(C)?0:1};function v(C){const I=C.g.length,M=[];for(let L=0;L<I;L++)M[L]=~C.g[L];return new a(M,~C.h).add(f)}t.abs=function(){return y(this)?v(this):this},t.add=function(C){const I=Math.max(this.g.length,C.g.length),M=[];let L=0;for(let N=0;N<=I;N++){let F=L+(this.i(N)&65535)+(C.i(N)&65535),j=(F>>>16)+(this.i(N)>>>16)+(C.i(N)>>>16);L=j>>>16,F&=65535,j&=65535,M[N]=j<<16|F}return new a(M,M[M.length-1]&-2147483648?-1:0)};function b(C,I){return C.add(v(I))}t.j=function(C){if(g(this)||g(C))return d;if(y(this))return y(C)?v(this).j(v(C)):v(v(this).j(C));if(y(C))return v(this.j(v(C)));if(this.l(p)<0&&C.l(p)<0)return c(this.m()*C.m());const I=this.g.length+C.g.length,M=[];for(var L=0;L<2*I;L++)M[L]=0;for(L=0;L<this.g.length;L++)for(let N=0;N<C.g.length;N++){const F=this.i(L)>>>16,j=this.i(L)&65535,K=C.i(N)>>>16,te=C.i(N)&65535;M[2*L+2*N]+=j*te,_(M,2*L+2*N),M[2*L+2*N+1]+=F*te,_(M,2*L+2*N+1),M[2*L+2*N+1]+=j*K,_(M,2*L+2*N+1),M[2*L+2*N+2]+=F*K,_(M,2*L+2*N+2)}for(C=0;C<I;C++)M[C]=M[2*C+1]<<16|M[2*C];for(C=I;C<2*I;C++)M[C]=0;return new a(M,0)};function _(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function w(C,I){this.g=C,this.h=I}function T(C,I){if(g(I))throw Error("division by zero");if(g(C))return new w(d,d);if(y(C))return I=T(v(C),I),new w(v(I.g),v(I.h));if(y(I))return I=T(C,v(I)),new w(v(I.g),I.h);if(C.g.length>30){if(y(C)||y(I))throw Error("slowDivide_ only works with positive integers.");for(var M=f,L=I;L.l(C)<=0;)M=P(M),L=P(L);var N=O(M,1),F=O(L,1);for(L=O(L,2),M=O(M,2);!g(L);){var j=F.add(L);j.l(C)<=0&&(N=N.add(M),F=j),L=O(L,1),M=O(M,1)}return I=b(C,N.j(I)),new w(N,I)}for(N=d;C.l(I)>=0;){for(M=Math.max(1,Math.floor(C.m()/I.m())),L=Math.ceil(Math.log(M)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),F=c(M),j=F.j(I);y(j)||j.l(C)>0;)M-=L,F=c(M),j=F.j(I);g(F)&&(F=f),N=N.add(F),C=b(C,j)}return new w(N,C)}t.B=function(C){return T(this,C).h},t.and=function(C){const I=Math.max(this.g.length,C.g.length),M=[];for(let L=0;L<I;L++)M[L]=this.i(L)&C.i(L);return new a(M,this.h&C.h)},t.or=function(C){const I=Math.max(this.g.length,C.g.length),M=[];for(let L=0;L<I;L++)M[L]=this.i(L)|C.i(L);return new a(M,this.h|C.h)},t.xor=function(C){const I=Math.max(this.g.length,C.g.length),M=[];for(let L=0;L<I;L++)M[L]=this.i(L)^C.i(L);return new a(M,this.h^C.h)};function P(C){const I=C.g.length+1,M=[];for(let L=0;L<I;L++)M[L]=C.i(L)<<1|C.i(L-1)>>>31;return new a(M,C.h)}function O(C,I){const M=I>>5;I%=32;const L=C.g.length-M,N=[];for(let F=0;F<L;F++)N[F]=I>0?C.i(F+M)>>>I|C.i(F+M+1)<<32-I:C.i(F+M);return new a(N,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,_K=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=u,uh=a}).apply(typeof o$<"u"?o$:typeof self<"u"?self:typeof window<"u"?window:{});var wA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xK,u0,AK,WE,OD,EK,SK,TK;(function(){var t,e=Object.defineProperty;function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof wA=="object"&&wA];for(var S=0;S<m.length;++S){var R=m[S];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var r=n(this);function i(m,S){if(S)e:{var R=r;m=m.split(".");for(var V=0;V<m.length-1;V++){var B=m[V];if(!(B in R))break e;R=R[B]}m=m[m.length-1],V=R[m],S=S(V),S!=V&&S!=null&&e(R,m,{configurable:!0,writable:!0,value:S})}}i("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(m){return m||function(S){var R=[],V;for(V in S)Object.prototype.hasOwnProperty.call(S,V)&&R.push([V,S[V]]);return R}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function o(m){var S=typeof m;return S=="object"&&m!=null||S=="function"}function l(m,S,R){return m.call.apply(m.bind,arguments)}function c(m,S,R){return c=l,c.apply(null,arguments)}function u(m,S){var R=Array.prototype.slice.call(arguments,1);return function(){var V=R.slice();return V.push.apply(V,arguments),m.apply(this,V)}}function d(m,S){function R(){}R.prototype=S.prototype,m.Z=S.prototype,m.prototype=new R,m.prototype.constructor=m,m.Ob=function(V,B,$){for(var ee=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)ee[Ne-2]=arguments[Ne];return S.prototype[B].apply(V,ee)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function p(m){const S=m.length;if(S>0){const R=Array(S);for(let V=0;V<S;V++)R[V]=m[V];return R}return[]}function g(m,S){for(let V=1;V<arguments.length;V++){const B=arguments[V];var R=typeof B;if(R=R!="object"?R:B?Array.isArray(B)?"array":R:"null",R=="array"||R=="object"&&typeof B.length=="number"){R=m.length||0;const $=B.length||0;m.length=R+$;for(let ee=0;ee<$;ee++)m[R+ee]=B[ee]}else m.push(B)}}class y{constructor(S,R){this.i=S,this.j=R,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function v(m){a.setTimeout(()=>{throw m},0)}function b(){var m=C;let S=null;return m.g&&(S=m.g,m.g=m.g.next,m.g||(m.h=null),S.next=null),S}class _{constructor(){this.h=this.g=null}add(S,R){const V=w.get();V.set(S,R),this.h?this.h.next=V:this.g=V,this.h=V}}var w=new y(()=>new T,m=>m.reset());class T{constructor(){this.next=this.g=this.h=null}set(S,R){this.h=S,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let P,O=!1,C=new _,I=()=>{const m=Promise.resolve(void 0);P=()=>{m.then(M)}};function M(){for(var m;m=b();){try{m.h.call(m.g)}catch(R){v(R)}var S=w;S.j(m),S.h<100&&(S.h++,m.next=S.g,S.g=m)}O=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(m,S){this.type=m,this.g=this.target=S,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var F=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var m=!1,S=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const R=()=>{};a.addEventListener("test",R,S),a.removeEventListener("test",R,S)}catch{}return m}();function j(m){return/^[\s\xa0]*$/.test(m)}function K(m,S){N.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,S)}d(K,N),K.prototype.init=function(m,S){const R=this.type=m.type,V=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=S,S=m.relatedTarget,S||(R=="mouseover"?S=m.fromElement:R=="mouseout"&&(S=m.toElement)),this.relatedTarget=S,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&K.Z.h.call(this)},K.prototype.h=function(){K.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var te="closure_listenable_"+(Math.random()*1e6|0),Z=0;function G(m,S,R,V,B){this.listener=m,this.proxy=null,this.src=S,this.type=R,this.capture=!!V,this.ha=B,this.key=++Z,this.da=this.fa=!1}function U(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function H(m,S,R){for(const V in m)S.call(R,m[V],V,m)}function re(m,S){for(const R in m)S.call(void 0,m[R],R,m)}function ve(m){const S={};for(const R in m)S[R]=m[R];return S}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xe(m,S){let R,V;for(let B=1;B<arguments.length;B++){V=arguments[B];for(R in V)m[R]=V[R];for(let $=0;$<de.length;$++)R=de[$],Object.prototype.hasOwnProperty.call(V,R)&&(m[R]=V[R])}}function je(m){this.src=m,this.g={},this.h=0}je.prototype.add=function(m,S,R,V,B){const $=m.toString();m=this.g[$],m||(m=this.g[$]=[],this.h++);const ee=ft(m,S,V,B);return ee>-1?(S=m[ee],R||(S.fa=!1)):(S=new G(S,this.src,$,!!V,B),S.fa=R,m.push(S)),S};function dt(m,S){const R=S.type;if(R in m.g){var V=m.g[R],B=Array.prototype.indexOf.call(V,S,void 0),$;($=B>=0)&&Array.prototype.splice.call(V,B,1),$&&(U(S),m.g[R].length==0&&(delete m.g[R],m.h--))}}function ft(m,S,R,V){for(let B=0;B<m.length;++B){const $=m[B];if(!$.da&&$.listener==S&&$.capture==!!R&&$.ha==V)return B}return-1}var Ee="closure_lm_"+(Math.random()*1e6|0),ha={};function X(m,S,R,V,B){if(Array.isArray(S)){for(let $=0;$<S.length;$++)X(m,S[$],R,V,B);return null}return R=Qy(R),m&&m[te]?m.J(S,R,o(V)?!!V.capture:!1,B):Se(m,S,R,!1,V,B)}function Se(m,S,R,V,B,$){if(!S)throw Error("Invalid event type");const ee=o(B)?!!B.capture:!!B;let Ne=cr(m);if(Ne||(m[Ee]=Ne=new je(m)),R=Ne.add(S,R,V,ee,$),R.proxy)return R;if(V=Re(),R.proxy=V,V.src=m,V.listener=R,m.addEventListener)F||(B=ee),B===void 0&&(B=!1),m.addEventListener(S.toString(),V,B);else if(m.attachEvent)m.attachEvent(Ye(S.toString()),V);else if(m.addListener&&m.removeListener)m.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return R}function Re(){function m(R){return S.call(m.src,m.listener,R)}const S=Jr;return m}function Q(m,S,R,V,B){if(Array.isArray(S))for(var $=0;$<S.length;$++)Q(m,S[$],R,V,B);else V=o(V)?!!V.capture:!!V,R=Qy(R),m&&m[te]?(m=m.i,$=String(S).toString(),$ in m.g&&(S=m.g[$],R=ft(S,R,V,B),R>-1&&(U(S[R]),Array.prototype.splice.call(S,R,1),S.length==0&&(delete m.g[$],m.h--)))):m&&(m=cr(m))&&(S=m.g[S.toString()],m=-1,S&&(m=ft(S,R,V,B)),(R=m>-1?S[m]:null)&&on(R))}function on(m){if(typeof m!="number"&&m&&!m.da){var S=m.src;if(S&&S[te])dt(S.i,m);else{var R=m.type,V=m.proxy;S.removeEventListener?S.removeEventListener(R,V,m.capture):S.detachEvent?S.detachEvent(Ye(R),V):S.addListener&&S.removeListener&&S.removeListener(V),(R=cr(S))?(dt(R,m),R.h==0&&(R.src=null,S[Ee]=null)):U(m)}}}function Ye(m){return m in ha?ha[m]:ha[m]="on"+m}function Jr(m,S){if(m.da)m=!0;else{S=new K(S,this);const R=m.listener,V=m.ha||m.src;m.fa&&on(m),m=R.call(V,S)}return m}function cr(m){return m=m[Ee],m instanceof je?m:null}var da="__closure_events_fn_"+(Math.random()*1e9>>>0);function Qy(m){return typeof m=="function"?m:(m[da]||(m[da]=function(S){return m.handleEvent(S)}),m[da])}function Rr(){L.call(this),this.i=new je(this),this.M=this,this.G=null}d(Rr,L),Rr.prototype[te]=!0,Rr.prototype.removeEventListener=function(m,S,R,V){Q(this,m,S,R,V)};function Zr(m,S){var R,V=m.G;if(V)for(R=[];V;V=V.G)R.push(V);if(m=m.M,V=S.type||S,typeof S=="string")S=new N(S,m);else if(S instanceof N)S.target=S.target||m;else{var B=S;S=new N(V,m),xe(S,B)}B=!0;let $,ee;if(R)for(ee=R.length-1;ee>=0;ee--)$=S.g=R[ee],B=Ox($,V,!0,S)&&B;if($=S.g=m,B=Ox($,V,!0,S)&&B,B=Ox($,V,!1,S)&&B,R)for(ee=0;ee<R.length;ee++)$=S.g=R[ee],B=Ox($,V,!1,S)&&B}Rr.prototype.N=function(){if(Rr.Z.N.call(this),this.i){var m=this.i;for(const S in m.g){const R=m.g[S];for(let V=0;V<R.length;V++)U(R[V]);delete m.g[S],m.h--}}this.G=null},Rr.prototype.J=function(m,S,R,V){return this.i.add(String(m),S,!1,R,V)},Rr.prototype.K=function(m,S,R,V){return this.i.add(String(m),S,!0,R,V)};function Ox(m,S,R,V){if(S=m.i.g[String(S)],!S)return!0;S=S.concat();let B=!0;for(let $=0;$<S.length;++$){const ee=S[$];if(ee&&!ee.da&&ee.capture==R){const Ne=ee.listener,Cn=ee.ha||ee.src;ee.fa&&dt(m.i,ee),B=Ne.call(Cn,V)!==!1&&B}}return B&&!V.defaultPrevented}function Nee(m,S){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=c(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:a.setTimeout(m,S||0)}function MF(m){m.g=Nee(()=>{m.g=null,m.i&&(m.i=!1,MF(m))},m.l);const S=m.h;m.h=null,m.m.apply(null,S)}class Lee extends L{constructor(S,R){super(),this.m=S,this.l=R,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:MF(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jy(m){L.call(this),this.h=m,this.g={}}d(Jy,L);var NF=[];function LF(m){H(m.g,function(S,R){this.g.hasOwnProperty(R)&&on(S)},m),m.g={}}Jy.prototype.N=function(){Jy.Z.N.call(this),LF(this)},Jy.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var CC=a.JSON.stringify,jee=a.JSON.parse,Fee=class{stringify(m){return a.JSON.stringify(m,void 0)}parse(m){return a.JSON.parse(m,void 0)}};function jF(){}function FF(){}var Zy={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function IC(){N.call(this,"d")}d(IC,N);function kC(){N.call(this,"c")}d(kC,N);var Uh={},VF=null;function Dx(){return VF=VF||new Rr}Uh.Ia="serverreachability";function BF(m){N.call(this,Uh.Ia,m)}d(BF,N);function ev(m){const S=Dx();Zr(S,new BF(S))}Uh.STAT_EVENT="statevent";function $F(m,S){N.call(this,Uh.STAT_EVENT,m),this.stat=S}d($F,N);function ei(m){const S=Dx();Zr(S,new $F(S,m))}Uh.Ja="timingevent";function UF(m,S){N.call(this,Uh.Ja,m),this.size=S}d(UF,N);function tv(m,S){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){m()},S)}function nv(){this.g=!0}nv.prototype.ua=function(){this.g=!1};function Vee(m,S,R,V,B,$){m.info(function(){if(m.g)if($){var ee="",Ne=$.split("&");for(let pt=0;pt<Ne.length;pt++){var Cn=Ne[pt].split("=");if(Cn.length>1){const zn=Cn[0];Cn=Cn[1];const Qa=zn.split("_");ee=Qa.length>=2&&Qa[1]=="type"?ee+(zn+"="+Cn+"&"):ee+(zn+"=redacted&")}}}else ee=null;else ee=$;return"XMLHTTP REQ ("+V+") [attempt "+B+"]: "+S+`
`+R+`
`+ee})}function Bee(m,S,R,V,B,$,ee){m.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+B+"]: "+S+`
`+R+`
`+$+" "+ee})}function Ap(m,S,R,V){m.info(function(){return"XMLHTTP TEXT ("+S+"): "+Uee(m,R)+(V?" "+V:"")})}function $ee(m,S){m.info(function(){return"TIMEOUT: "+S})}nv.prototype.info=function(){};function Uee(m,S){if(!m.g)return S;if(!S)return null;try{const $=JSON.parse(S);if($){for(m=0;m<$.length;m++)if(Array.isArray($[m])){var R=$[m];if(!(R.length<2)){var V=R[1];if(Array.isArray(V)&&!(V.length<1)){var B=V[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ee=1;ee<V.length;ee++)V[ee]=""}}}}return CC($)}catch{return S}}var Mx={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},zF={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},HF;function RC(){}d(RC,jF),RC.prototype.g=function(){return new XMLHttpRequest},HF=new RC;function rv(m){return encodeURIComponent(String(m))}function zee(m){var S=1;m=m.split(":");const R=[];for(;S>0&&m.length;)R.push(m.shift()),S--;return m.length&&R.push(m.join(":")),R}function Dc(m,S,R,V){this.j=m,this.i=S,this.l=R,this.S=V||1,this.V=new Jy(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new WF}function WF(){this.i=null,this.g="",this.h=!1}var GF={},OC={};function DC(m,S,R){m.M=1,m.A=Lx(Ya(S)),m.u=R,m.R=!0,KF(m,null)}function KF(m,S){m.F=Date.now(),Nx(m),m.B=Ya(m.A);var R=m.B,V=m.S;Array.isArray(V)||(V=[String(V)]),aV(R.i,"t",V),m.C=0,R=m.j.L,m.h=new WF,m.g=EV(m.j,R?S:null,!m.u),m.P>0&&(m.O=new Lee(c(m.Y,m,m.g),m.P)),S=m.V,R=m.g,V=m.ba;var B="readystatechange";Array.isArray(B)||(B&&(NF[0]=B.toString()),B=NF);for(let $=0;$<B.length;$++){const ee=X(R,B[$],V||S.handleEvent,!1,S.h||S);if(!ee)break;S.g[ee.key]=ee}S=m.J?ve(m.J):{},m.u?(m.v||(m.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,S)):(m.v="GET",m.g.ea(m.B,m.v,null,S)),ev(),Vee(m.i,m.v,m.B,m.l,m.S,m.u)}Dc.prototype.ba=function(m){m=m.target;const S=this.O;S&&Lc(m)==3?S.j():this.Y(m)},Dc.prototype.Y=function(m){try{if(m==this.g)e:{const Ne=Lc(this.g),Cn=this.g.ya(),pt=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||fV(this.g)))){this.K||Ne!=4||Cn==7||(Cn==8||pt<=0?ev(3):ev(2)),MC(this);var S=this.g.ca();this.X=S;var R=Hee(this);if(this.o=S==200,Bee(this.i,this.v,this.B,this.l,this.S,Ne,S),this.o){if(this.U&&!this.L){t:{if(this.g){var V,B=this.g;if((V=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(V)){var $=V;break t}}$=null}if(m=$)Ap(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,NC(this,m);else{this.o=!1,this.m=3,ei(12),zh(this),iv(this);break e}}if(this.R){m=!0;let zn;for(;!this.K&&this.C<R.length;)if(zn=Wee(this,R),zn==OC){Ne==4&&(this.m=4,ei(14),m=!1),Ap(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==GF){this.m=4,ei(15),Ap(this.i,this.l,R,"[Invalid Chunk]"),m=!1;break}else Ap(this.i,this.l,zn,null),NC(this,zn);if(qF(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||R.length!=0||this.h.h||(this.m=1,ei(16),m=!1),this.o=this.o&&m,!m)Ap(this.i,this.l,R,"[Invalid Chunked Response]"),zh(this),iv(this);else if(R.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+R.length),zC(ee),ee.P=!0,ei(11))}}else Ap(this.i,this.l,R,null),NC(this,R);Ne==4&&zh(this),this.o&&!this.K&&(Ne==4?wV(this.j,this):(this.o=!1,Nx(this)))}else ste(this.g),S==400&&R.indexOf("Unknown SID")>0?(this.m=3,ei(12)):(this.m=0,ei(13)),zh(this),iv(this)}}}catch{}finally{}};function Hee(m){if(!qF(m))return m.g.la();const S=fV(m.g);if(S==="")return"";let R="";const V=S.length,B=Lc(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return zh(m),iv(m),"";m.h.i=new a.TextDecoder}for(let $=0;$<V;$++)m.h.h=!0,R+=m.h.i.decode(S[$],{stream:!(B&&$==V-1)});return S.length=0,m.h.g+=R,m.C=0,m.h.g}function qF(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Wee(m,S){var R=m.C,V=S.indexOf(`
`,R);return V==-1?OC:(R=Number(S.substring(R,V)),isNaN(R)?GF:(V+=1,V+R>S.length?OC:(S=S.slice(V,V+R),m.C=V+R,S)))}Dc.prototype.cancel=function(){this.K=!0,zh(this)};function Nx(m){m.T=Date.now()+m.H,XF(m,m.H)}function XF(m,S){if(m.D!=null)throw Error("WatchDog timer not null");m.D=tv(c(m.aa,m),S)}function MC(m){m.D&&(a.clearTimeout(m.D),m.D=null)}Dc.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?($ee(this.i,this.B),this.M!=2&&(ev(),ei(17)),zh(this),this.m=2,iv(this)):XF(this,this.T-m)};function iv(m){m.j.I==0||m.K||wV(m.j,m)}function zh(m){MC(m);var S=m.O;S&&typeof S.dispose=="function"&&S.dispose(),m.O=null,LF(m.V),m.g&&(S=m.g,m.g=null,S.abort(),S.dispose())}function NC(m,S){try{var R=m.j;if(R.I!=0&&(R.g==m||LC(R.h,m))){if(!m.L&&LC(R.h,m)&&R.I==3){try{var V=R.Ba.g.parse(S)}catch{V=null}if(Array.isArray(V)&&V.length==3){var B=V;if(B[0]==0){e:if(!R.v){if(R.g)if(R.g.F+3e3<m.F)$x(R),Vx(R);else break e;UC(R),ei(18)}}else R.xa=B[1],0<R.xa-R.K&&B[2]<37500&&R.F&&R.A==0&&!R.C&&(R.C=tv(c(R.Va,R),6e3));JF(R.h)<=1&&R.ta&&(R.ta=void 0)}else Wh(R,11)}else if((m.L||R.g==m)&&$x(R),!j(S))for(B=R.Ba.g.parse(S),S=0;S<B.length;S++){let pt=B[S];const zn=pt[0];if(!(zn<=R.K))if(R.K=zn,pt=pt[1],R.I==2)if(pt[0]=="c"){R.M=pt[1],R.ba=pt[2];const Qa=pt[3];Qa!=null&&(R.ka=Qa,R.j.info("VER="+R.ka));const Gh=pt[4];Gh!=null&&(R.za=Gh,R.j.info("SVER="+R.za));const jc=pt[5];jc!=null&&typeof jc=="number"&&jc>0&&(V=1.5*jc,R.O=V,R.j.info("backChannelRequestTimeoutMs_="+V)),V=R;const Fc=m.g;if(Fc){const zx=Fc.g?Fc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zx){var $=V.h;$.g||zx.indexOf("spdy")==-1&&zx.indexOf("quic")==-1&&zx.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(jC($,$.h),$.h=null))}if(V.G){const HC=Fc.g?Fc.g.getResponseHeader("X-HTTP-Session-Id"):null;HC&&(V.wa=HC,Pt(V.J,V.G,HC))}}R.I=3,R.l&&R.l.ra(),R.aa&&(R.T=Date.now()-m.F,R.j.info("Handshake RTT: "+R.T+"ms")),V=R;var ee=m;if(V.na=AV(V,V.L?V.ba:null,V.W),ee.L){ZF(V.h,ee);var Ne=ee,Cn=V.O;Cn&&(Ne.H=Cn),Ne.D&&(MC(Ne),Nx(Ne)),V.g=ee}else vV(V);R.i.length>0&&Bx(R)}else pt[0]!="stop"&&pt[0]!="close"||Wh(R,7);else R.I==3&&(pt[0]=="stop"||pt[0]=="close"?pt[0]=="stop"?Wh(R,7):$C(R):pt[0]!="noop"&&R.l&&R.l.qa(pt),R.A=0)}}ev(4)}catch{}}var Gee=class{constructor(m,S){this.g=m,this.map=S}};function YF(m){this.l=m||10,a.PerformanceNavigationTiming?(m=a.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function QF(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function JF(m){return m.h?1:m.g?m.g.size:0}function LC(m,S){return m.h?m.h==S:m.g?m.g.has(S):!1}function jC(m,S){m.g?m.g.add(S):m.h=S}function ZF(m,S){m.h&&m.h==S?m.h=null:m.g&&m.g.has(S)&&m.g.delete(S)}YF.prototype.cancel=function(){if(this.i=eV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function eV(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let S=m.i;for(const R of m.g.values())S=S.concat(R.G);return S}return p(m.i)}var tV=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kee(m,S){if(m){m=m.split("&");for(let R=0;R<m.length;R++){const V=m[R].indexOf("=");let B,$=null;V>=0?(B=m[R].substring(0,V),$=m[R].substring(V+1)):B=m[R],S(B,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Mc(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;m instanceof Mc?(this.l=m.l,sv(this,m.j),this.o=m.o,this.g=m.g,av(this,m.u),this.h=m.h,FC(this,oV(m.i)),this.m=m.m):m&&(S=String(m).match(tV))?(this.l=!1,sv(this,S[1]||"",!0),this.o=ov(S[2]||""),this.g=ov(S[3]||"",!0),av(this,S[4]),this.h=ov(S[5]||"",!0),FC(this,S[6]||"",!0),this.m=ov(S[7]||"")):(this.l=!1,this.i=new cv(null,this.l))}Mc.prototype.toString=function(){const m=[];var S=this.j;S&&m.push(lv(S,nV,!0),":");var R=this.g;return(R||S=="file")&&(m.push("//"),(S=this.o)&&m.push(lv(S,nV,!0),"@"),m.push(rv(R).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.u,R!=null&&m.push(":",String(R))),(R=this.h)&&(this.g&&R.charAt(0)!="/"&&m.push("/"),m.push(lv(R,R.charAt(0)=="/"?Yee:Xee,!0))),(R=this.i.toString())&&m.push("?",R),(R=this.m)&&m.push("#",lv(R,Jee)),m.join("")},Mc.prototype.resolve=function(m){const S=Ya(this);let R=!!m.j;R?sv(S,m.j):R=!!m.o,R?S.o=m.o:R=!!m.g,R?S.g=m.g:R=m.u!=null;var V=m.h;if(R)av(S,m.u);else if(R=!!m.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var B=S.h.lastIndexOf("/");B!=-1&&(V=S.h.slice(0,B+1)+V)}if(B=V,B==".."||B==".")V="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){V=B.lastIndexOf("/",0)==0,B=B.split("/");const $=[];for(let ee=0;ee<B.length;){const Ne=B[ee++];Ne=="."?V&&ee==B.length&&$.push(""):Ne==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),V&&ee==B.length&&$.push("")):($.push(Ne),V=!0)}V=$.join("/")}else V=B}return R?S.h=V:R=m.i.toString()!=="",R?FC(S,oV(m.i)):R=!!m.m,R&&(S.m=m.m),S};function Ya(m){return new Mc(m)}function sv(m,S,R){m.j=R?ov(S,!0):S,m.j&&(m.j=m.j.replace(/:$/,""))}function av(m,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);m.u=S}else m.u=null}function FC(m,S,R){S instanceof cv?(m.i=S,Zee(m.i,m.l)):(R||(S=lv(S,Qee)),m.i=new cv(S,m.l))}function Pt(m,S,R){m.i.set(S,R)}function Lx(m){return Pt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function ov(m,S){return m?S?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function lv(m,S,R){return typeof m=="string"?(m=encodeURI(m).replace(S,qee),R&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function qee(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var nV=/[#\/\?@]/g,Xee=/[#\?:]/g,Yee=/[#\?]/g,Qee=/[#\?@]/g,Jee=/#/g;function cv(m,S){this.h=this.g=null,this.i=m||null,this.j=!!S}function Hh(m){m.g||(m.g=new Map,m.h=0,m.i&&Kee(m.i,function(S,R){m.add(decodeURIComponent(S.replace(/\+/g," ")),R)}))}t=cv.prototype,t.add=function(m,S){Hh(this),this.i=null,m=Ep(this,m);let R=this.g.get(m);return R||this.g.set(m,R=[]),R.push(S),this.h+=1,this};function rV(m,S){Hh(m),S=Ep(m,S),m.g.has(S)&&(m.i=null,m.h-=m.g.get(S).length,m.g.delete(S))}function iV(m,S){return Hh(m),S=Ep(m,S),m.g.has(S)}t.forEach=function(m,S){Hh(this),this.g.forEach(function(R,V){R.forEach(function(B){m.call(S,B,V,this)},this)},this)};function sV(m,S){Hh(m);let R=[];if(typeof S=="string")iV(m,S)&&(R=R.concat(m.g.get(Ep(m,S))));else for(m=Array.from(m.g.values()),S=0;S<m.length;S++)R=R.concat(m[S]);return R}t.set=function(m,S){return Hh(this),this.i=null,m=Ep(this,m),iV(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[S]),this.h+=1,this},t.get=function(m,S){return m?(m=sV(this,m),m.length>0?String(m[0]):S):S};function aV(m,S,R){rV(m,S),R.length>0&&(m.i=null,m.g.set(Ep(m,S),p(R)),m.h+=R.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],S=Array.from(this.g.keys());for(let V=0;V<S.length;V++){var R=S[V];const B=rv(R);R=sV(this,R);for(let $=0;$<R.length;$++){let ee=B;R[$]!==""&&(ee+="="+rv(R[$])),m.push(ee)}}return this.i=m.join("&")};function oV(m){const S=new cv;return S.i=m.i,m.g&&(S.g=new Map(m.g),S.h=m.h),S}function Ep(m,S){return S=String(S),m.j&&(S=S.toLowerCase()),S}function Zee(m,S){S&&!m.j&&(Hh(m),m.i=null,m.g.forEach(function(R,V){const B=V.toLowerCase();V!=B&&(rV(this,V),aV(this,B,R))},m)),m.j=S}function ete(m,S){const R=new nv;if(a.Image){const V=new Image;V.onload=u(Nc,R,"TestLoadImage: loaded",!0,S,V),V.onerror=u(Nc,R,"TestLoadImage: error",!1,S,V),V.onabort=u(Nc,R,"TestLoadImage: abort",!1,S,V),V.ontimeout=u(Nc,R,"TestLoadImage: timeout",!1,S,V),a.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=m}else S(!1)}function tte(m,S){const R=new nv,V=new AbortController,B=setTimeout(()=>{V.abort(),Nc(R,"TestPingServer: timeout",!1,S)},1e4);fetch(m,{signal:V.signal}).then($=>{clearTimeout(B),$.ok?Nc(R,"TestPingServer: ok",!0,S):Nc(R,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(B),Nc(R,"TestPingServer: error",!1,S)})}function Nc(m,S,R,V,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),V(R)}catch{}}function nte(){this.g=new Fee}function VC(m){this.i=m.Sb||null,this.h=m.ab||!1}d(VC,jF),VC.prototype.g=function(){return new jx(this.i,this.h)};function jx(m,S){Rr.call(this),this.H=m,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(jx,Rr),t=jx.prototype,t.open=function(m,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=S,this.readyState=1,hv(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(S.body=m),(this.H||a).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,uv(this)),this.readyState=0},t.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,hv(this)),this.g&&(this.readyState=3,hv(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;lV(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function lV(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}t.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var S=m.value?m.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!m.done}))&&(this.response=this.responseText+=S)}m.done?uv(this):hv(this),this.readyState==3&&lV(this)}},t.Oa=function(m){this.g&&(this.response=this.responseText=m,uv(this))},t.Na=function(m){this.g&&(this.response=m,uv(this))},t.ga=function(){this.g&&uv(this)};function uv(m){m.readyState=4,m.l=null,m.j=null,m.B=null,hv(m)}t.setRequestHeader=function(m,S){this.A.append(m,S)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],S=this.h.entries();for(var R=S.next();!R.done;)R=R.value,m.push(R[0]+": "+R[1]),R=S.next();return m.join(`\r
`)};function hv(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(jx.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function cV(m){let S="";return H(m,function(R,V){S+=V,S+=":",S+=R,S+=`\r
`}),S}function BC(m,S,R){e:{for(V in R){var V=!1;break e}V=!0}V||(R=cV(R),typeof m=="string"?R!=null&&rv(R):Pt(m,S,R))}function Qt(m){Rr.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Qt,Rr);var rte=/^https?$/i,ite=["POST","PUT"];t=Qt.prototype,t.Fa=function(m){this.H=m},t.ea=function(m,S,R,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);S=S?S.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():HF.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(S,String(m),!0),this.B=!1}catch($){uV(this,$);return}if(m=R||"",R=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var B in V)R.set(B,V[B]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const $ of V.keys())R.set($,V.get($));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(R.keys()).find($=>$.toLowerCase()=="content-type"),B=a.FormData&&m instanceof a.FormData,!(Array.prototype.indexOf.call(ite,S,void 0)>=0)||V||B||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ee]of R)this.g.setRequestHeader($,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch($){uV(this,$)}};function uV(m,S){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=S,m.o=5,hV(m),Fx(m)}function hV(m){m.A||(m.A=!0,Zr(m,"complete"),Zr(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Zr(this,"complete"),Zr(this,"abort"),Fx(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fx(this,!0)),Qt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?dV(this):this.Xa())},t.Xa=function(){dV(this)};function dV(m){if(m.h&&typeof s<"u"){if(m.v&&Lc(m)==4)setTimeout(m.Ca.bind(m),0);else if(Zr(m,"readystatechange"),Lc(m)==4){m.h=!1;try{const $=m.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var R;if(!(R=S)){var V;if(V=$===0){let ee=String(m.D).match(tV)[1]||null;!ee&&a.self&&a.self.location&&(ee=a.self.location.protocol.slice(0,-1)),V=!rte.test(ee?ee.toLowerCase():"")}R=V}if(R)Zr(m,"complete"),Zr(m,"success");else{m.o=6;try{var B=Lc(m)>2?m.g.statusText:""}catch{B=""}m.l=B+" ["+m.ca()+"]",hV(m)}}finally{Fx(m)}}}}function Fx(m,S){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const R=m.g;m.g=null,S||Zr(m,"ready");try{R.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Lc(m){return m.g?m.g.readyState:0}t.ca=function(){try{return Lc(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(m){if(this.g){var S=this.g.responseText;return m&&S.indexOf(m)==0&&(S=S.substring(m.length)),jee(S)}};function fV(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function ste(m){const S={};m=(m.g&&Lc(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<m.length;V++){if(j(m[V]))continue;var R=zee(m[V]);const B=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const $=S[B]||[];S[B]=$,$.push(R)}re(S,function(V){return V.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function dv(m,S,R){return R&&R.internalChannelParams&&R.internalChannelParams[m]||S}function pV(m){this.za=0,this.i=[],this.j=new nv,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=dv("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=dv("baseRetryDelayMs",5e3,m),this.Za=dv("retryDelaySeedMs",1e4,m),this.Ta=dv("forwardChannelMaxRetries",2,m),this.va=dv("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new YF(m&&m.concurrentRequestLimit),this.Ba=new nte,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=pV.prototype,t.ka=8,t.I=1,t.connect=function(m,S,R,V){ei(0),this.W=m,this.H=S||{},R&&V!==void 0&&(this.H.OSID=R,this.H.OAID=V),this.F=this.X,this.J=AV(this,null,this.W),Bx(this)};function $C(m){if(mV(m),m.I==3){var S=m.V++,R=Ya(m.J);if(Pt(R,"SID",m.M),Pt(R,"RID",S),Pt(R,"TYPE","terminate"),fv(m,R),S=new Dc(m,m.j,S),S.M=2,S.A=Lx(Ya(R)),R=!1,a.navigator&&a.navigator.sendBeacon)try{R=a.navigator.sendBeacon(S.A.toString(),"")}catch{}!R&&a.Image&&(new Image().src=S.A,R=!0),R||(S.g=EV(S.j,null),S.g.ea(S.A)),S.F=Date.now(),Nx(S)}xV(m)}function Vx(m){m.g&&(zC(m),m.g.cancel(),m.g=null)}function mV(m){Vx(m),m.v&&(a.clearTimeout(m.v),m.v=null),$x(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&a.clearTimeout(m.m),m.m=null)}function Bx(m){if(!QF(m.h)&&!m.m){m.m=!0;var S=m.Ea;P||I(),O||(P(),O=!0),C.add(S,m),m.D=0}}function ate(m,S){return JF(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=S.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=tv(c(m.Ea,m,S),_V(m,m.D)),m.D++,!0)}t.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const B=new Dc(this,this.j,m);let $=this.o;if(this.U&&($?($=ve($),xe($,this.U)):$=this.U),this.u!==null||this.R||(B.J=$,$=null),this.S)e:{for(var S=0,R=0;R<this.i.length;R++){t:{var V=this.i[R];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(S+=V,S>4096){S=R;break e}if(S===4096||R===this.i.length-1){S=R+1;break e}}S=1e3}else S=1e3;S=yV(this,B,S),R=Ya(this.J),Pt(R,"RID",m),Pt(R,"CVER",22),this.G&&Pt(R,"X-HTTP-Session-Id",this.G),fv(this,R),$&&(this.R?S="headers="+rv(cV($))+"&"+S:this.u&&BC(R,this.u,$)),jC(this.h,B),this.Ra&&Pt(R,"TYPE","init"),this.S?(Pt(R,"$req",S),Pt(R,"SID","null"),B.U=!0,DC(B,R,null)):DC(B,R,S),this.I=2}}else this.I==3&&(m?gV(this,m):this.i.length==0||QF(this.h)||gV(this))};function gV(m,S){var R;S?R=S.l:R=m.V++;const V=Ya(m.J);Pt(V,"SID",m.M),Pt(V,"RID",R),Pt(V,"AID",m.K),fv(m,V),m.u&&m.o&&BC(V,m.u,m.o),R=new Dc(m,m.j,R,m.D+1),m.u===null&&(R.J=m.o),S&&(m.i=S.G.concat(m.i)),S=yV(m,R,1e3),R.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),jC(m.h,R),DC(R,V,S)}function fv(m,S){m.H&&H(m.H,function(R,V){Pt(S,V,R)}),m.l&&H({},function(R,V){Pt(S,V,R)})}function yV(m,S,R){R=Math.min(m.i.length,R);const V=m.l?c(m.l.Ka,m.l,m):null;e:{var B=m.i;let Ne=-1;for(;;){const Cn=["count="+R];Ne==-1?R>0?(Ne=B[0].g,Cn.push("ofs="+Ne)):Ne=0:Cn.push("ofs="+Ne);let pt=!0;for(let zn=0;zn<R;zn++){var $=B[zn].g;const Qa=B[zn].map;if($-=Ne,$<0)Ne=Math.max(0,B[zn].g-100),pt=!1;else try{$="req"+$+"_"||"";try{var ee=Qa instanceof Map?Qa:Object.entries(Qa);for(const[Gh,jc]of ee){let Fc=jc;o(jc)&&(Fc=CC(jc)),Cn.push($+Gh+"="+encodeURIComponent(Fc))}}catch(Gh){throw Cn.push($+"type="+encodeURIComponent("_badmap")),Gh}}catch{V&&V(Qa)}}if(pt){ee=Cn.join("&");break e}}ee=void 0}return m=m.i.splice(0,R),S.G=m,ee}function vV(m){if(!m.g&&!m.v){m.Y=1;var S=m.Da;P||I(),O||(P(),O=!0),C.add(S,m),m.A=0}}function UC(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=tv(c(m.Da,m),_V(m,m.A)),m.A++,!0)}t.Da=function(){if(this.v=null,bV(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=tv(c(this.Wa,this),m)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ei(10),Vx(this),bV(this))};function zC(m){m.B!=null&&(a.clearTimeout(m.B),m.B=null)}function bV(m){m.g=new Dc(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var S=Ya(m.na);Pt(S,"RID","rpc"),Pt(S,"SID",m.M),Pt(S,"AID",m.K),Pt(S,"CI",m.F?"0":"1"),!m.F&&m.ia&&Pt(S,"TO",m.ia),Pt(S,"TYPE","xmlhttp"),fv(m,S),m.u&&m.o&&BC(S,m.u,m.o),m.O&&(m.g.H=m.O);var R=m.g;m=m.ba,R.M=1,R.A=Lx(Ya(S)),R.u=null,R.R=!0,KF(R,m)}t.Va=function(){this.C!=null&&(this.C=null,Vx(this),UC(this),ei(19))};function $x(m){m.C!=null&&(a.clearTimeout(m.C),m.C=null)}function wV(m,S){var R=null;if(m.g==S){$x(m),zC(m),m.g=null;var V=2}else if(LC(m.h,S))R=S.G,ZF(m.h,S),V=1;else return;if(m.I!=0){if(S.o)if(V==1){R=S.u?S.u.length:0,S=Date.now()-S.F;var B=m.D;V=Dx(),Zr(V,new UF(V,R)),Bx(m)}else vV(m);else if(B=S.m,B==3||B==0&&S.X>0||!(V==1&&ate(m,S)||V==2&&UC(m)))switch(R&&R.length>0&&(S=m.h,S.i=S.i.concat(R)),B){case 1:Wh(m,5);break;case 4:Wh(m,10);break;case 3:Wh(m,6);break;default:Wh(m,2)}}}function _V(m,S){let R=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(R*=2),R*S}function Wh(m,S){if(m.j.info("Error code "+S),S==2){var R=c(m.bb,m),V=m.Ua;const B=!V;V=new Mc(V||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||sv(V,"https"),Lx(V),B?ete(V.toString(),R):tte(V.toString(),R)}else ei(2);m.I=0,m.l&&m.l.pa(S),xV(m),mV(m)}t.bb=function(m){m?(this.j.info("Successfully pinged google.com"),ei(2)):(this.j.info("Failed to ping google.com"),ei(1))};function xV(m){if(m.I=0,m.ja=[],m.l){const S=eV(m.h);(S.length!=0||m.i.length!=0)&&(g(m.ja,S),g(m.ja,m.i),m.h.i.length=0,p(m.i),m.i.length=0),m.l.oa()}}function AV(m,S,R){var V=R instanceof Mc?Ya(R):new Mc(R);if(V.g!="")S&&(V.g=S+"."+V.g),av(V,V.u);else{var B=a.location;V=B.protocol,S=S?S+"."+B.hostname:B.hostname,B=+B.port;const $=new Mc(null);V&&sv($,V),S&&($.g=S),B&&av($,B),R&&($.h=R),V=$}return R=m.G,S=m.wa,R&&S&&Pt(V,R,S),Pt(V,"VER",m.ka),fv(m,V),V}function EV(m,S,R){if(S&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=m.Aa&&!m.ma?new Qt(new VC({ab:R})):new Qt(m.ma),S.Fa(m.L),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function SV(){}t=SV.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ux(){}Ux.prototype.g=function(m,S){return new $i(m,S)};function $i(m,S){Rr.call(this),this.g=new pV(S),this.l=m,this.h=S&&S.messageUrlParams||null,m=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(m?m["X-WebChannel-Content-Type"]=S.messageContentType:m={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(m?m["X-WebChannel-Client-Profile"]=S.sa:m={"X-WebChannel-Client-Profile":S.sa}),this.g.U=m,(m=S&&S.Qb)&&!j(m)&&(this.g.u=m),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!j(S)&&(this.g.G=S,m=this.h,m!==null&&S in m&&(m=this.h,S in m&&delete m[S])),this.j=new Sp(this)}d($i,Rr),$i.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},$i.prototype.close=function(){$C(this.g)},$i.prototype.o=function(m){var S=this.g;if(typeof m=="string"){var R={};R.__data__=m,m=R}else this.v&&(R={},R.__data__=CC(m),m=R);S.i.push(new Gee(S.Ya++,m)),S.I==3&&Bx(S)},$i.prototype.N=function(){this.g.l=null,delete this.j,$C(this.g),delete this.g,$i.Z.N.call(this)};function TV(m){IC.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var S=m.__sm__;if(S){e:{for(const R in S){m=R;break e}m=void 0}(this.i=m)&&(m=this.i,S=S!==null&&m in S?S[m]:void 0),this.data=S}else this.data=m}d(TV,IC);function PV(){kC.call(this),this.status=1}d(PV,kC);function Sp(m){this.g=m}d(Sp,SV),Sp.prototype.ra=function(){Zr(this.g,"a")},Sp.prototype.qa=function(m){Zr(this.g,new TV(m))},Sp.prototype.pa=function(m){Zr(this.g,new PV)},Sp.prototype.oa=function(){Zr(this.g,"b")},Ux.prototype.createWebChannel=Ux.prototype.g,$i.prototype.send=$i.prototype.o,$i.prototype.open=$i.prototype.m,$i.prototype.close=$i.prototype.close,TK=function(){return new Ux},SK=function(){return Dx()},EK=Uh,OD={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Mx.NO_ERROR=0,Mx.TIMEOUT=8,Mx.HTTP_ERROR=6,WE=Mx,zF.COMPLETE="complete",AK=zF,FF.EventType=Zy,Zy.OPEN="a",Zy.CLOSE="b",Zy.ERROR="c",Zy.MESSAGE="d",Rr.prototype.listen=Rr.prototype.J,u0=FF,Qt.prototype.listenOnce=Qt.prototype.K,Qt.prototype.getLastError=Qt.prototype.Ha,Qt.prototype.getLastErrorCode=Qt.prototype.ya,Qt.prototype.getStatus=Qt.prototype.ca,Qt.prototype.getResponseJson=Qt.prototype.La,Qt.prototype.getResponseText=Qt.prototype.la,Qt.prototype.send=Qt.prototype.ea,Qt.prototype.setWithCredentials=Qt.prototype.Fa,xK=Qt}).apply(typeof wA<"u"?wA:typeof self<"u"?self:typeof window<"u"?window:{});const l$="@firebase/firestore",c$="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Hr.UNAUTHENTICATED=new Hr(null),Hr.GOOGLE_CREDENTIALS=new Hr("google-credentials-uid"),Hr.FIRST_PARTY=new Hr("first-party-uid"),Hr.MOCK_USER=new Hr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fy="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp=new V2("@firebase/firestore");function Vp(){return tp.logLevel}function ae(t,...e){if(tp.logLevel<=Be.DEBUG){const n=e.map(Q2);tp.debug(`Firestore (${Fy}): ${t}`,...n)}}function mc(t,...e){if(tp.logLevel<=Be.ERROR){const n=e.map(Q2);tp.error(`Firestore (${Fy}): ${t}`,...n)}}function hy(t,...e){if(tp.logLevel<=Be.WARN){const n=e.map(Q2);tp.warn(`Firestore (${Fy}): ${t}`,...n)}}function Q2(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,PK(t,r,n)}function PK(t,e,n){let r=`FIRESTORE (${Fy}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw mc(r),new Error(r)}function Je(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||PK(e,i,r)}function Ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends el{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CK{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ome{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Hr.UNAUTHENTICATED))}shutdown(){}}class Dme{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Mme{constructor(e){this.t=e,this.currentUser=Hr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Je(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new tc;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new tc,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new tc)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Je(typeof r.accessToken=="string",31837,{l:r}),new CK(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string",2055,{h:e}),new Hr(e)}}class Nme{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Hr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Lme{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Nme(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Hr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class u${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jme{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ds(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Je(this.o===void 0,3512);const r=s=>{s.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,ae("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new u$(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Je(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new u$(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fme(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Fme(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function $e(t,e){return t<e?-1:t>e?1:0}function DD(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return QI(i)===QI(s)?$e(i,s):QI(i)?1:-1}return $e(t.length,e.length)}const Vme=55296,Bme=57343;function QI(t){const e=t.charCodeAt(0);return e>=Vme&&e<=Bme}function dy(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h$="__name__";class io{constructor(e,n,r){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&we(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return io.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof io?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=io.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return $e(e.length,n.length)}static compareSegments(e,n){const r=io.isNumericId(e),i=io.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?io.extractNumericId(e).compare(io.extractNumericId(n)):DD(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return uh.fromString(e.substring(4,e.length-2))}}class Et extends io{construct(e,n,r){return new Et(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ie(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Et(n)}static emptyPath(){return new Et([])}}const $me=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xr extends io{construct(e,n,r){return new xr(e,n,r)}static isValidIdentifier(e){return $me.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===h$}static keyField(){return new xr([h$])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ie(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new ie(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ie(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new ie(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xr(n)}static emptyPath(){return new xr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(Et.fromString(e))}static fromName(e){return new ge(Et.fromString(e).popFirst(5))}static empty(){return new ge(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new Et(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IK(t,e,n){if(!n)throw new ie(W.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ume(t,e,n,r){if(e===!0&&r===!0)throw new ie(W.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function d$(t){if(!ge.isDocumentKey(t))throw new ie(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function f$(t){if(ge.isDocumentKey(t))throw new ie(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function kK(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function rP(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we(12329,{type:typeof t})}function za(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rP(t);throw new ie(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(t,e){const n={typeString:t};return e&&(n.value=e),n}function nx(t,e){if(!kK(t))throw new ie(W.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new ie(W.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p$=-62135596800,m$=1e6;class Rt{static now(){return Rt.fromMillis(Date.now())}static fromDate(e){return Rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*m$);return new Rt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<p$)throw new ie(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/m$}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nx(e,Rt._jsonSchema))return new Rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-p$;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Rt._jsonSchemaVersion="firestore/timestamp/1.0",Rt._jsonSchema={type:En("string",Rt._jsonSchemaVersion),seconds:En("number"),nanoseconds:En("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Rt(0,0))}static max(){return new Ae(new Rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb=-1;function zme(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ae.fromTimestamp(r===1e9?new Rt(n+1,0):new Rt(n,r));return new wh(i,ge.empty(),e)}function Hme(t){return new wh(t.readTime,t.key,wb)}class wh{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new wh(Ae.min(),ge.empty(),wb)}static max(){return new wh(Ae.max(),ge.empty(),wb)}}function Wme(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ge.comparator(t.documentKey,e.documentKey),n!==0?n:$e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gme="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Kme{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vy(t){if(t.code!==W.FAILED_PRECONDITION||t.message!==Gme)throw t;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&n()},l=>r(l))}),a=!0,s===i&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(i=>i?q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new q((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{a[c]=u,++o,o===s&&r(a)},u=>i(u))}})}static doWhile(e,n){return new q((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function qme(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function By(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}iP.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=-1;function sP(t){return t==null}function e1(t){return t===0&&1/t==-1/0}function Xme(t){return typeof t=="number"&&Number.isInteger(t)&&!e1(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RK="";function Yme(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=g$(e)),e=Qme(t.get(n),e);return g$(e)}function Qme(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case RK:n+="";break;default:n+=s}}return n}function g$(t){return t+RK+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y$(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Lh(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function OK(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n){this.comparator=e,this.root=n||wr.EMPTY}insert(e,n){return new Xt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wr.BLACK,null,null))}remove(e){return new Xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _A(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _A(this.root,e,this.comparator,!1)}getReverseIterator(){return new _A(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _A(this.root,e,this.comparator,!0)}}class _A{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??wr.RED,this.left=i??wr.EMPTY,this.right=s??wr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new wr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return wr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return wr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}wr.EMPTY=null,wr.RED=!0,wr.BLACK=!1;wr.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new wr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.comparator=e,this.data=new Xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new v$(this.data.getIterator())}getIteratorFrom(e){return new v$(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Fn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Fn(this.comparator);return n.data=e,n}}class v${constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.fields=e,e.sort(xr.comparator)}static empty(){return new ms([])}unionWith(e){let n=new Fn(xr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ms(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return dy(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DK extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new DK("Invalid base64 string: "+s):s}}(e);return new Ir(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new Ir(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ir.EMPTY_BYTE_STRING=new Ir("");const Jme=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _h(t){if(Je(!!t,39018),typeof t=="string"){let e=0;const n=Jme.exec(t);if(Je(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dn(t.seconds),nanos:dn(t.nanos)}}function dn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xh(t){return typeof t=="string"?Ir.fromBase64String(t):Ir.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MK="server_timestamp",NK="__type__",LK="__previous_value__",jK="__local_write_time__";function eL(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[NK])==null?void 0:r.stringValue)===MK}function aP(t){const e=t.mapValue.fields[LK];return eL(e)?aP(e):e}function _b(t){const e=_h(t.mapValue.fields[jK].timestampValue);return new Rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zme{constructor(e,n,r,i,s,a,o,l,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const t1="(default)";class xb{constructor(e,n){this.projectId=e,this.database=n||t1}static empty(){return new xb("","")}get isDefaultDatabase(){return this.database===t1}isEqual(e){return e instanceof xb&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FK="__type__",ege="__max__",xA={mapValue:{}},VK="__vector__",n1="value";function Ah(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?eL(t)?4:nge(t)?9007199254740991:tge(t)?10:11:we(28295,{value:t})}function Go(t,e){if(t===e)return!0;const n=Ah(t);if(n!==Ah(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _b(t).isEqual(_b(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=_h(i.timestampValue),o=_h(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return xh(i.bytesValue).isEqual(xh(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return dn(i.geoPointValue.latitude)===dn(s.geoPointValue.latitude)&&dn(i.geoPointValue.longitude)===dn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return dn(i.integerValue)===dn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=dn(i.doubleValue),o=dn(s.doubleValue);return a===o?e1(a)===e1(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return dy(t.arrayValue.values||[],e.arrayValue.values||[],Go);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(y$(a)!==y$(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Go(a[l],o[l])))return!1;return!0}(t,e);default:return we(52216,{left:t})}}function Ab(t,e){return(t.values||[]).find(n=>Go(n,e))!==void 0}function fy(t,e){if(t===e)return 0;const n=Ah(t),r=Ah(e);if(n!==r)return $e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return $e(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=dn(s.integerValue||s.doubleValue),l=dn(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return b$(t.timestampValue,e.timestampValue);case 4:return b$(_b(t),_b(e));case 5:return DD(t.stringValue,e.stringValue);case 6:return function(s,a){const o=xh(s),l=xh(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let c=0;c<o.length&&c<l.length;c++){const u=$e(o[c],l[c]);if(u!==0)return u}return $e(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=$e(dn(s.latitude),dn(a.latitude));return o!==0?o:$e(dn(s.longitude),dn(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return w$(t.arrayValue,e.arrayValue);case 10:return function(s,a){var f,p,g,y;const o=s.fields||{},l=a.fields||{},c=(f=o[n1])==null?void 0:f.arrayValue,u=(p=l[n1])==null?void 0:p.arrayValue,d=$e(((g=c==null?void 0:c.values)==null?void 0:g.length)||0,((y=u==null?void 0:u.values)==null?void 0:y.length)||0);return d!==0?d:w$(c,u)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===xA.mapValue&&a===xA.mapValue)return 0;if(s===xA.mapValue)return 1;if(a===xA.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),c=a.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const f=DD(l[d],u[d]);if(f!==0)return f;const p=fy(o[l[d]],c[u[d]]);if(p!==0)return p}return $e(l.length,u.length)}(t.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function b$(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return $e(t,e);const n=_h(t),r=_h(e),i=$e(n.seconds,r.seconds);return i!==0?i:$e(n.nanos,r.nanos)}function w$(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=fy(n[i],r[i]);if(s)return s}return $e(n.length,r.length)}function py(t){return MD(t)}function MD(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=_h(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return xh(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ge.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=MD(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${MD(n.fields[a])}`;return i+"}"}(t.mapValue):we(61005,{value:t})}function GE(t){switch(Ah(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=aP(t);return e?16+GE(e):16;case 5:return 2*t.stringValue.length;case 6:return xh(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+GE(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Lh(r.fields,(s,a)=>{i+=s.length+GE(a)}),i}(t.mapValue);default:throw we(13486,{value:t})}}function _$(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ND(t){return!!t&&"integerValue"in t}function tL(t){return!!t&&"arrayValue"in t}function x$(t){return!!t&&"nullValue"in t}function A$(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function KE(t){return!!t&&"mapValue"in t}function tge(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[FK])==null?void 0:r.stringValue)===VK}function D0(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Lh(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=D0(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=D0(t.arrayValue.values[n]);return e}return{...t}}function nge(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ege}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this.value=e}static empty(){return new Oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!KE(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=D0(n)}setAll(e){let n=xr.emptyPath(),r={},i=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=o.popLast()}a?r[o.lastSegment()]=D0(a):i.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());KE(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Go(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];KE(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Lh(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Oi(D0(this.value))}}function BK(t){const e=[];return Lh(t.fields,(n,r)=>{const i=new xr([n]);if(KE(r)){const s=BK(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new ms(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n,r,i,s,a,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Gr(e,0,Ae.min(),Ae.min(),Ae.min(),Oi.empty(),0)}static newFoundDocument(e,n,r,i){return new Gr(e,1,n,Ae.min(),r,i,0)}static newNoDocument(e,n){return new Gr(e,2,n,Ae.min(),Ae.min(),Oi.empty(),0)}static newUnknownDocument(e,n){return new Gr(e,3,n,Ae.min(),Ae.min(),Oi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,n){this.position=e,this.inclusive=n}}function E$(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=ge.comparator(ge.fromName(a.referenceValue),n.key):r=fy(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function S$(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Go(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n="asc"){this.field=e,this.dir=n}}function rge(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $K{}class An extends $K{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new sge(e,n,r):n==="array-contains"?new lge(e,r):n==="in"?new cge(e,r):n==="not-in"?new uge(e,r):n==="array-contains-any"?new hge(e,r):new An(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new age(e,r):new oge(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(fy(n,this.value)):n!==null&&Ah(this.value)===Ah(n)&&this.matchesComparison(fy(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ha extends $K{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ha(e,n)}matches(e){return UK(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function UK(t){return t.op==="and"}function zK(t){return ige(t)&&UK(t)}function ige(t){for(const e of t.filters)if(e instanceof Ha)return!1;return!0}function LD(t){if(t instanceof An)return t.field.canonicalString()+t.op.toString()+py(t.value);if(zK(t))return t.filters.map(e=>LD(e)).join(",");{const e=t.filters.map(n=>LD(n)).join(",");return`${t.op}(${e})`}}function HK(t,e){return t instanceof An?function(r,i){return i instanceof An&&r.op===i.op&&r.field.isEqual(i.field)&&Go(r.value,i.value)}(t,e):t instanceof Ha?function(r,i){return i instanceof Ha&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,o)=>s&&HK(a,i.filters[o]),!0):!1}(t,e):void we(19439)}function WK(t){return t instanceof An?function(n){return`${n.field.canonicalString()} ${n.op} ${py(n.value)}`}(t):t instanceof Ha?function(n){return n.op.toString()+" {"+n.getFilters().map(WK).join(" ,")+"}"}(t):"Filter"}class sge extends An{constructor(e,n,r){super(e,n,r),this.key=ge.fromName(r.referenceValue)}matches(e){const n=ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class age extends An{constructor(e,n){super(e,"in",n),this.keys=GK("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class oge extends An{constructor(e,n){super(e,"not-in",n),this.keys=GK("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function GK(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ge.fromName(r.referenceValue))}class lge extends An{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tL(n)&&Ab(n.arrayValue,this.value)}}class cge extends An{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ab(this.value.arrayValue,n)}}class uge extends An{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ab(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ab(this.value.arrayValue,n)}}class hge extends An{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tL(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ab(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dge{constructor(e,n=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function T$(t,e=null,n=[],r=[],i=null,s=null,a=null){return new dge(t,e,n,r,i,s,a)}function nL(t){const e=Ce(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>LD(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),sP(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>py(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>py(r)).join(",")),e.Te=n}return e.Te}function rL(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!rge(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!HK(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!S$(t.startAt,e.startAt)&&S$(t.endAt,e.endAt)}function jD(t){return ge.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,n=null,r=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function fge(t,e,n,r,i,s,a,o){return new $y(t,e,n,r,i,s,a,o)}function iL(t){return new $y(t)}function P$(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function KK(t){return t.collectionGroup!==null}function M0(t){const e=Ce(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Fn(xr.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(o=o.add(c.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Eb(s,r))}),n.has(xr.keyField().canonicalString())||e.Ie.push(new Eb(xr.keyField(),r))}return e.Ie}function Bo(t){const e=Ce(t);return e.Ee||(e.Ee=pge(e,M0(t))),e.Ee}function pge(t,e){if(t.limitType==="F")return T$(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Eb(i.field,s)});const n=t.endAt?new r1(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new r1(t.startAt.position,t.startAt.inclusive):null;return T$(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function FD(t,e){const n=t.filters.concat([e]);return new $y(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function VD(t,e,n){return new $y(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function oP(t,e){return rL(Bo(t),Bo(e))&&t.limitType===e.limitType}function qK(t){return`${nL(Bo(t))}|lt:${t.limitType}`}function Bp(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>WK(i)).join(", ")}]`),sP(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>py(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>py(i)).join(",")),`Target(${r})`}(Bo(t))}; limitType=${t.limitType})`}function lP(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ge.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of M0(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,o,l){const c=E$(a,o,l);return a.inclusive?c<=0:c<0}(r.startAt,M0(r),i)||r.endAt&&!function(a,o,l){const c=E$(a,o,l);return a.inclusive?c>=0:c>0}(r.endAt,M0(r),i))}(t,e)}function mge(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function XK(t){return(e,n)=>{let r=!1;for(const i of M0(t)){const s=gge(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function gge(t,e,n){const r=t.field.isKeyField()?ge.comparator(e.key,n.key):function(s,a,o){const l=a.data.field(s),c=o.data.field(s);return l!==null&&c!==null?fy(l,c):we(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Lh(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return OK(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yge=new Xt(ge.comparator);function gc(){return yge}const YK=new Xt(ge.comparator);function h0(...t){let e=YK;for(const n of t)e=e.insert(n.key,n);return e}function QK(t){let e=YK;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function pd(){return N0()}function JK(){return N0()}function N0(){return new yp(t=>t.toString(),(t,e)=>t.isEqual(e))}const vge=new Xt(ge.comparator),bge=new Fn(ge.comparator);function Ue(...t){let e=bge;for(const n of t)e=e.add(n);return e}const wge=new Fn($e);function _ge(){return wge}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sL(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e1(e)?"-0":e}}function ZK(t){return{integerValue:""+t}}function xge(t,e){return Xme(e)?ZK(e):sL(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(){this._=void 0}}function Age(t,e,n){return t instanceof Sb?function(i,s){const a={fields:{[NK]:{stringValue:MK},[jK]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&eL(s)&&(s=aP(s)),s&&(a.fields[LK]=s),{mapValue:a}}(n,e):t instanceof Tb?tq(t,e):t instanceof Pb?nq(t,e):function(i,s){const a=eq(i,s),o=C$(a)+C$(i.Ae);return ND(a)&&ND(i.Ae)?ZK(o):sL(i.serializer,o)}(t,e)}function Ege(t,e,n){return t instanceof Tb?tq(t,e):t instanceof Pb?nq(t,e):n}function eq(t,e){return t instanceof i1?function(r){return ND(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Sb extends cP{}class Tb extends cP{constructor(e){super(),this.elements=e}}function tq(t,e){const n=rq(e);for(const r of t.elements)n.some(i=>Go(i,r))||n.push(r);return{arrayValue:{values:n}}}class Pb extends cP{constructor(e){super(),this.elements=e}}function nq(t,e){let n=rq(e);for(const r of t.elements)n=n.filter(i=>!Go(i,r));return{arrayValue:{values:n}}}class i1 extends cP{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function C$(t){return dn(t.integerValue||t.doubleValue)}function rq(t){return tL(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sge{constructor(e,n){this.field=e,this.transform=n}}function Tge(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Tb&&i instanceof Tb||r instanceof Pb&&i instanceof Pb?dy(r.elements,i.elements,Go):r instanceof i1&&i instanceof i1?Go(r.Ae,i.Ae):r instanceof Sb&&i instanceof Sb}(t.transform,e.transform)}class Pge{constructor(e,n){this.version=e,this.transformResults=n}}class na{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new na}static exists(e){return new na(void 0,e)}static updateTime(e){return new na(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qE(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class uP{}function iq(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new aL(t.key,na.none()):new rx(t.key,t.data,na.none());{const n=t.data,r=Oi.empty();let i=new Fn(xr.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new jh(t.key,r,new ms(i.toArray()),na.none())}}function Cge(t,e,n){t instanceof rx?function(i,s,a){const o=i.value.clone(),l=k$(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof jh?function(i,s,a){if(!qE(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=k$(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(sq(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function L0(t,e,n,r){return t instanceof rx?function(s,a,o,l){if(!qE(s.precondition,a))return o;const c=s.value.clone(),u=R$(s.fieldTransforms,l,a);return c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof jh?function(s,a,o,l){if(!qE(s.precondition,a))return o;const c=R$(s.fieldTransforms,l,a),u=a.data;return u.setAll(sq(s)),u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,a,o){return qE(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function Ige(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=eq(r.transform,i||null);s!=null&&(n===null&&(n=Oi.empty()),n.set(r.field,s))}return n||null}function I$(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&dy(r,i,(s,a)=>Tge(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class rx extends uP{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class jh extends uP{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function sq(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function k$(t,e,n){const r=new Map;Je(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,Ege(a,o,n[i]))}return r}function R$(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,Age(s,a,e))}return r}class aL extends uP{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kge extends uP{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rge{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Cge(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=L0(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=L0(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=JK();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=n.has(i.key)?null:o;const l=iq(a,o);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(Ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ue())}isEqual(e){return this.batchId===e.batchId&&dy(this.mutations,e.mutations,(n,r)=>I$(n,r))&&dy(this.baseMutations,e.baseMutations,(n,r)=>I$(n,r))}}class oL{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Je(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return vge}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new oL(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oge{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dge{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vn,We;function Mge(t){switch(t){case W.OK:return we(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return we(15467,{code:t})}}function aq(t){if(t===void 0)return mc("GRPC error has no .code"),W.UNKNOWN;switch(t){case vn.OK:return W.OK;case vn.CANCELLED:return W.CANCELLED;case vn.UNKNOWN:return W.UNKNOWN;case vn.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case vn.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case vn.INTERNAL:return W.INTERNAL;case vn.UNAVAILABLE:return W.UNAVAILABLE;case vn.UNAUTHENTICATED:return W.UNAUTHENTICATED;case vn.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case vn.NOT_FOUND:return W.NOT_FOUND;case vn.ALREADY_EXISTS:return W.ALREADY_EXISTS;case vn.PERMISSION_DENIED:return W.PERMISSION_DENIED;case vn.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case vn.ABORTED:return W.ABORTED;case vn.OUT_OF_RANGE:return W.OUT_OF_RANGE;case vn.UNIMPLEMENTED:return W.UNIMPLEMENTED;case vn.DATA_LOSS:return W.DATA_LOSS;default:return we(39323,{code:t})}}(We=vn||(vn={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nge(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lge=new uh([4294967295,4294967295],0);function O$(t){const e=Nge().encode(t),n=new _K;return n.update(e),new Uint8Array(n.digest())}function D$(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new uh([n,r],0),new uh([i,s],0)]}class lL{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new d0(`Invalid padding: ${n}`);if(r<0)throw new d0(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new d0(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new d0(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=uh.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(uh.fromNumber(r)));return i.compare(Lge)===1&&(i=new uh([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=O$(e),[r,i]=D$(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new lL(s,i,n);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.ge===0)return;const n=O$(e),[r,i]=D$(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class d0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ix.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new hP(Ae.min(),i,new Xt($e),gc(),Ue())}}class ix{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ix(r,n,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class oq{constructor(e,n){this.targetId=e,this.Ce=n}}class lq{constructor(e,n,r=Ir.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class M${constructor(){this.ve=0,this.Fe=N$(),this.Me=Ir.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),n=Ue(),r=Ue();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:we(38017,{changeType:s})}}),new ix(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=N$()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class jge{constructor(e){this.Ge=e,this.ze=new Map,this.je=gc(),this.Je=AA(),this.He=AA(),this.Ye=new Xt($e)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(jD(s))if(r===0){const a=new ge(s.path);this.et(n,a,Gr.newNoDocument(a,Ae.min()))}else Je(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,o;try{a=xh(r).toUint8Array()}catch(l){if(l instanceof DK)return hy("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new lL(a,i,s)}catch(l){return hy(l instanceof d0?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,a)=>{const o=this.ot(a);if(o){if(s.current&&jD(o.target)){const l=new ge(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,Gr.newNoDocument(l,e))}s.Be&&(n.set(a,s.ke()),s.qe())}});let r=Ue();this.He.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const i=new hP(e,n,this.Ye,this.je,r);return this.je=gc(),this.Je=AA(),this.He=AA(),this.Ye=new Xt($e),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new M$,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Fn($e),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Fn($e),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ae("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new M$),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function AA(){return new Xt(ge.comparator)}function N$(){return new Xt(ge.comparator)}const Fge={asc:"ASCENDING",desc:"DESCENDING"},Vge={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bge={and:"AND",or:"OR"};class $ge{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function BD(t,e){return t.useProto3Json||sP(e)?e:{value:e}}function s1(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cq(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Uge(t,e){return s1(t,e.toTimestamp())}function $o(t){return Je(!!t,49232),Ae.fromTimestamp(function(n){const r=_h(n);return new Rt(r.seconds,r.nanos)}(t))}function cL(t,e){return $D(t,e).canonicalString()}function $D(t,e){const n=function(i){return new Et(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function uq(t){const e=Et.fromString(t);return Je(mq(e),10190,{key:e.toString()}),e}function UD(t,e){return cL(t.databaseId,e.path)}function JI(t,e){const n=uq(e);if(n.get(1)!==t.databaseId.projectId)throw new ie(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ge(dq(n))}function hq(t,e){return cL(t.databaseId,e)}function zge(t){const e=uq(t);return e.length===4?Et.emptyPath():dq(e)}function zD(t){return new Et(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function dq(t){return Je(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function L$(t,e,n){return{name:UD(t,e),fields:n.value.mapValue.fields}}function Hge(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:we(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Je(u===void 0||typeof u=="string",58123),Ir.fromBase64String(u||"")):(Je(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Ir.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(c){const u=c.code===void 0?W.UNKNOWN:aq(c.code);return new ie(u,c.message||"")}(a);n=new lq(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=JI(t,r.document.name),s=$o(r.document.updateTime),a=r.document.createTime?$o(r.document.createTime):Ae.min(),o=new Oi({mapValue:{fields:r.document.fields}}),l=Gr.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new XE(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=JI(t,r.document),s=r.readTime?$o(r.readTime):Ae.min(),a=Gr.newNoDocument(i,s),o=r.removedTargetIds||[];n=new XE([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=JI(t,r.document),s=r.removedTargetIds||[];n=new XE([],s,i,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new Dge(i,s),o=r.targetId;n=new oq(o,a)}}return n}function Wge(t,e){let n;if(e instanceof rx)n={update:L$(t,e.key,e.value)};else if(e instanceof aL)n={delete:UD(t,e.key)};else if(e instanceof jh)n={update:L$(t,e.key,e.data),updateMask:eye(e.fieldMask)};else{if(!(e instanceof kge))return we(16599,{Vt:e.type});n={verify:UD(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const o=a.transform;if(o instanceof Sb)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Tb)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Pb)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof i1)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw we(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Uge(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:we(27497)}(t,e.precondition)),n}function Gge(t,e){return t&&t.length>0?(Je(e!==void 0,14353),t.map(n=>function(i,s){let a=i.updateTime?$o(i.updateTime):$o(s);return a.isEqual(Ae.min())&&(a=$o(s)),new Pge(a,i.transformResults||[])}(n,e))):[]}function Kge(t,e){return{documents:[hq(t,e.path)]}}function qge(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=hq(t,i);const s=function(c){if(c.length!==0)return pq(Ha.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:$p(f.field),direction:Qge(f.dir)}}(u))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=BD(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:i}}function Xge(t){let e=zge(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Je(r===1,65062);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){const f=fq(d);return f instanceof Ha&&zK(f)?f.getFilters():[f]}(n.where));let a=[];n.orderBy&&(a=function(d){return d.map(f=>function(g){return new Eb(Up(g.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(f))}(n.orderBy));let o=null;n.limit&&(o=function(d){let f;return f=typeof d=="object"?d.value:d,sP(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,p=d.values||[];return new r1(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,p=d.values||[];return new r1(p,f)}(n.endAt)),fge(e,i,a,s,o,"F",l,c)}function Yge(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function fq(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Up(n.unaryFilter.field);return An.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Up(n.unaryFilter.field);return An.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Up(n.unaryFilter.field);return An.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Up(n.unaryFilter.field);return An.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}}(t):t.fieldFilter!==void 0?function(n){return An.create(Up(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ha.create(n.compositeFilter.filters.map(r=>fq(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return we(1026)}}(n.compositeFilter.op))}(t):we(30097,{filter:t})}function Qge(t){return Fge[t]}function Jge(t){return Vge[t]}function Zge(t){return Bge[t]}function $p(t){return{fieldPath:t.canonicalString()}}function Up(t){return xr.fromServerFormat(t.fieldPath)}function pq(t){return t instanceof An?function(n){if(n.op==="=="){if(A$(n.value))return{unaryFilter:{field:$p(n.field),op:"IS_NAN"}};if(x$(n.value))return{unaryFilter:{field:$p(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(A$(n.value))return{unaryFilter:{field:$p(n.field),op:"IS_NOT_NAN"}};if(x$(n.value))return{unaryFilter:{field:$p(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$p(n.field),op:Jge(n.op),value:n.value}}}(t):t instanceof Ha?function(n){const r=n.getFilters().map(i=>pq(i));return r.length===1?r[0]:{compositeFilter:{op:Zge(n.op),filters:r}}}(t):we(54877,{filter:t})}function eye(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function mq(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,n,r,i,s=Ae.min(),a=Ae.min(),o=Ir.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Ju(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ju(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ju(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ju(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tye{constructor(e){this.yt=e}}function nye(t){const e=Xge({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?VD(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rye{constructor(){this.Cn=new iye}addToCollectionParentIndex(e,n){return this.Cn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(wh.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(wh.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class iye{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Fn(Et.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Fn(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j$={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gq=41943040;class ki{static withCacheSize(e){return new ki(e,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ki.DEFAULT_COLLECTION_PERCENTILE=10,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ki.DEFAULT=new ki(gq,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ki.DISABLED=new ki(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new my(0)}static cr(){return new my(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F$="LruGarbageCollector",sye=1048576;function V$([t,e],[n,r]){const i=$e(t,n);return i===0?$e(e,r):i}class aye{constructor(e){this.Ir=e,this.buffer=new Fn(V$),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();V$(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class oye{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ae(F$,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){By(n)?ae(F$,"Ignoring IndexedDB error during garbage collection: ",n):await Vy(n)}await this.Vr(3e5)})}}class lye{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(iP.ce);const r=new aye(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(j$)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),j$):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,a,o,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,a=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,o=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),Vp()<=Be.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-u}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function cye(t,e){return new lye(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uye{constructor(){this.changes=new yp(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Gr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hye{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dye{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&L0(r.mutation,i,ms.empty(),Rt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ue()){const i=pd();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=h0();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=pd();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ue()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,r,i){let s=gc();const a=N0(),o=function(){return N0()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof jh)?s=s.insert(c.key,c):u!==void 0?(a.set(c.key,u.mutation.getFieldMask()),L0(u.mutation,c,u.mutation.getFieldMask(),Rt.now())):a.set(c.key,ms.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>a.set(c,u)),n.forEach((c,u)=>o.set(c,new hye(u,a.get(c)??null))),o))}recalculateAndSaveOverlays(e,n){const r=N0();let i=new Xt((a,o)=>a-o),s=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||ms.empty();u=o.applyToLocalView(c,u),r.set(l,u);const d=(i.get(o.batchId)||Ue()).add(l);i=i.insert(o.batchId,d)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),c=l.key,u=l.value,d=JK();u.forEach(f=>{if(!s.has(f)){const p=iq(n.get(f),r.get(f));p!==null&&d.set(f,p),s=s.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,d))}return q.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return ge.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):KK(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):q.resolve(pd());let o=wb,l=s;return a.next(c=>q.forEach(c,(u,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),s.get(u)?q.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Ue())).next(u=>({batchId:o,changes:QK(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ge(n)).next(r=>{let i=h0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=h0();return this.indexManager.getCollectionParents(e,s).next(o=>q.forEach(o,l=>{const c=function(d,f){return new $y(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((d,f)=>{a=a.insert(d,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((l,c)=>{const u=c.getKey();a.get(u)===null&&(a=a.insert(u,Gr.newInvalidDocument(u)))});let o=h0();return a.forEach((l,c)=>{const u=s.get(l);u!==void 0&&L0(u.mutation,c,ms.empty(),Rt.now()),lP(n,c)&&(o=o.insert(l,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fye{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:$o(i.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:nye(i.bundledQuery),readTime:$o(i.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pye{constructor(){this.overlays=new Xt(ge.comparator),this.qr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=pd();return q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const i=pd(),s=n.length+1,a=new ge(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Xt((c,u)=>c-u);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=pd(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const o=pd(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>o.set(c,u)),!(o.size()>=i)););return q.resolve(o)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Oge(n,r));let s=this.qr.get(n);s===void 0&&(s=Ue(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mye{constructor(){this.sessionToken=Ir.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(){this.Qr=new Fn(Zn.$r),this.Ur=new Fn(Zn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Zn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Zn(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ge(new Et([])),r=new Zn(n,e),i=new Zn(n,e+1),s=[];return this.Ur.forEachInRange([r,i],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ge(new Et([])),r=new Zn(n,e),i=new Zn(n,e+1);let s=Ue();return this.Ur.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Zn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Zn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ge.comparator(e.key,n.key)||$e(e.Yr,n.Yr)}static Kr(e,n){return $e(e.Yr,n.Yr)||ge.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gye{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Fn(Zn.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Rge(s,n,r,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new Zn(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return q.resolve(a)}lookupMutationBatch(e,n){return q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?Z2:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Zn(n,0),i=new Zn(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],a=>{const o=this.Xr(a.Yr);s.push(o)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fn($e);return n.forEach(i=>{const s=new Zn(i,0),a=new Zn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],o=>{r=r.add(o.Yr)})}),q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ge.isDocumentKey(s)||(s=s.child(""));const a=new Zn(new ge(s),0);let o=new Fn($e);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(o=o.add(l.Yr)),!0)},a),q.resolve(this.ti(o))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Je(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return q.forEach(n.mutations,i=>{const s=new Zn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Zn(n,0),i=this.Zr.firstAfterOrEqual(r);return q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yye{constructor(e){this.ri=e,this.docs=function(){return new Xt(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():Gr.newInvalidDocument(n))}getEntries(e,n){let r=gc();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Gr.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=gc();const a=n.path,o=new ge(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Wme(Hme(u),r)<=0||(i.has(u.key)||lP(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,n,r,i){we(9500)}ii(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new vye(this)}getSize(e){return q.resolve(this.size)}}class vye extends uye{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bye{constructor(e){this.persistence=e,this.si=new yp(n=>nL(n),rL),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new uL,this.targetCount=0,this.ai=my.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new my(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Pr(n),q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yq{constructor(e,n){this.ui={},this.overlays={},this.ci=new iP(0),this.li=!1,this.li=!0,this.hi=new mye,this.referenceDelegate=e(this),this.Pi=new bye(this),this.indexManager=new rye,this.remoteDocumentCache=function(i){return new yye(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new tye(n),this.Ii=new fye(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pye,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new gye(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ae("MemoryPersistence","Starting transaction:",e);const i=new wye(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return q.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class wye extends Kme{constructor(e){super(),this.currentSequenceNumber=e}}class hL{constructor(e){this.persistence=e,this.Ri=new uL,this.Vi=null}static mi(e){return new hL(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,r=>{const i=ge.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,Ae.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return q.or([()=>q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class a1{constructor(e,n){this.persistence=e,this.pi=new yp(r=>Yme(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=cye(this,n)}static mi(e,n){return new a1(e,n)}Ei(){}di(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return q.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?q.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,a=>this.br(e,a,n).next(o=>{o||(r++,s.removeEntry(a,Ae.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=GE(e.data.value)),n}br(e,n,r){return q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=Ue(),i=Ue();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new dL(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ye{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xye{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return ede()?8:qme(Yr())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new _ye;return this.Ss(e,n,a).next(o=>{if(s.result=o,this.Vs)return this.bs(e,n,a,o.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Vp()<=Be.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",Bp(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(Vp()<=Be.DEBUG&&ae("QueryEngine","Query:",Bp(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Vp()<=Be.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",Bp(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bo(n))):q.resolve())}ys(e,n){if(P$(n))return q.resolve(null);let r=Bo(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=VD(n,null,"F"),r=Bo(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=Ue(...s);return this.ps.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,o);return this.Cs(n,c,a,l.readTime)?this.ys(e,VD(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,i){return P$(n)||i.isEqual(Ae.min())?q.resolve(null):this.ps.getDocuments(e,r).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,r,i)?q.resolve(null):(Vp()<=Be.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Bp(n)),this.vs(e,a,n,zme(i,wb)).next(o=>o))})}Ds(e,n){let r=new Fn(XK(e));return n.forEach((i,s)=>{lP(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Vp()<=Be.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",Bp(n)),this.ps.getDocumentsMatchingQuery(e,n,wh.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL="LocalStore",Aye=3e8;class Eye{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Xt($e),this.xs=new yp(s=>nL(s),rL),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dye(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Sye(t,e,n,r){return new Eye(t,e,n,r)}async function vq(t,e){const n=Ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],o=[];let l=Ue();for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:a,addedBatchIds:o}))})})}function Tye(t,e){const n=Ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,c,u){const d=c.batch,f=d.keys();let p=q.resolve();return f.forEach(g=>{p=p.next(()=>u.getEntry(l,g)).next(y=>{const v=c.docVersions.get(g);Je(v!==null,48541),y.version.compareTo(v)<0&&(d.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=Ue();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(l=l.add(o.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function bq(t){const e=Ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Pye(t,e){const n=Ce(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];e.targetChanges.forEach((u,d)=>{const f=i.get(d);if(!f)return;o.push(n.Pi.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(s,u.addedDocuments,d)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(Ir.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),i=i.insert(d,p),function(y,v,b){return y.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=Aye?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(f,p,u)&&o.push(n.Pi.updateTargetData(s,p))});let l=gc(),c=Ue();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),o.push(Cye(s,a,e.documentUpdates).next(u=>{l=u.ks,c=u.qs})),!r.isEqual(Ae.min())){const u=n.Pi.getLastRemoteSnapshotVersion(s).next(d=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(u)}return q.waitFor(o).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ms=i,s))}function Cye(t,e,n){let r=Ue(),i=Ue();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=gc();return n.forEach((o,l)=>{const c=s.get(o);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(Ae.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):ae(fL,"Ignoring outdated watch update for ",o,". Current version:",c.version," Watch version:",l.version)}),{ks:a,qs:i}})}function Iye(t,e){const n=Ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Z2),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function kye(t,e){const n=Ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):n.Pi.allocateTargetId(r).next(a=>(i=new Ju(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function HD(t,e,n){const r=Ce(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!By(a))throw a;ae(fL,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function B$(t,e,n){const r=Ce(t);let i=Ae.min(),s=Ue();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,c,u){const d=Ce(l),f=d.xs.get(u);return f!==void 0?q.resolve(d.Ms.get(f)):d.Pi.getTargetData(c,u)}(r,a,Bo(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?i:Ae.min(),n?s:Ue())).next(o=>(Rye(r,mge(e),o),{documents:o,Qs:s})))}function Rye(t,e,n){let r=t.Os.get(e)||Ae.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class $${constructor(){this.activeTargetIds=_ge()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Oye{constructor(){this.Mo=new $$,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new $$,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dye{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U$="ConnectivityMonitor";class z${constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ae(U$,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ae(U$,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EA=null;function WD(){return EA===null?EA=function(){return 268435456+Math.round(2147483648*Math.random())}():EA++,"0x"+EA.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="RestConnection",Mye={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Nye{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===t1?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const a=WD(),o=this.zo(e,n.toUriEncodedString());ae(ZI,`Sending RPC '${e}' ${a}:`,o,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:c}=new URL(o),u=pp(c);return this.Jo(e,o,l,r,u).then(d=>(ae(ZI,`Received RPC '${e}' ${a}: `,d),d),d=>{throw hy(ZI,`RPC '${e}' ${a} failed with error: `,d,"url: ",o,"request:",r),d})}Ho(e,n,r,i,s,a){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fy}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=Mye[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lye{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr="WebChannelConnection";class jye extends Nye{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const a=WD();return new Promise((o,l)=>{const c=new xK;c.setWithCredentials(!0),c.listenOnce(AK.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case WE.NO_ERROR:const d=c.getResponseJson();ae(Mr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case WE.TIMEOUT:ae(Mr,`RPC '${e}' ${a} timed out`),l(new ie(W.DEADLINE_EXCEEDED,"Request time out"));break;case WE.HTTP_ERROR:const f=c.getStatus();if(ae(Mr,`RPC '${e}' ${a} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const y=function(b){const _=b.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(_)>=0?_:W.UNKNOWN}(g.status);l(new ie(y,g.message))}else l(new ie(W.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new ie(W.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:a,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{ae(Mr,`RPC '${e}' ${a} completed.`)}});const u=JSON.stringify(i);ae(Mr,`RPC '${e}' ${a} sending request:`,i),c.send(n,"POST",u,r,15)})}T_(e,n,r){const i=WD(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=TK(),o=SK(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");ae(Mr,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=a.createWebChannel(u,l);this.I_(d);let f=!1,p=!1;const g=new Lye({Yo:v=>{p?ae(Mr,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(f||(ae(Mr,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),ae(Mr,`RPC '${e}' stream ${i} sending:`,v),d.send(v))},Zo:()=>d.close()}),y=(v,b,_)=>{v.listen(b,w=>{try{_(w)}catch(T){setTimeout(()=>{throw T},0)}})};return y(d,u0.EventType.OPEN,()=>{p||(ae(Mr,`RPC '${e}' stream ${i} transport opened.`),g.o_())}),y(d,u0.EventType.CLOSE,()=>{p||(p=!0,ae(Mr,`RPC '${e}' stream ${i} transport closed`),g.a_(),this.E_(d))}),y(d,u0.EventType.ERROR,v=>{p||(p=!0,hy(Mr,`RPC '${e}' stream ${i} transport errored. Name:`,v.name,"Message:",v.message),g.a_(new ie(W.UNAVAILABLE,"The operation could not be completed")))}),y(d,u0.EventType.MESSAGE,v=>{var b;if(!p){const _=v.data[0];Je(!!_,16349);const w=_,T=(w==null?void 0:w.error)||((b=w[0])==null?void 0:b.error);if(T){ae(Mr,`RPC '${e}' stream ${i} received error:`,T);const P=T.status;let O=function(M){const L=vn[M];if(L!==void 0)return aq(L)}(P),C=T.message;O===void 0&&(O=W.INTERNAL,C="Unknown error status: "+P+" with message "+T.message),p=!0,g.a_(new ie(O,C)),d.close()}else ae(Mr,`RPC '${e}' stream ${i} received:`,_),g.u_(_)}}),y(o,EK.STAT_EVENT,v=>{v.stat===OD.PROXY?ae(Mr,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===OD.NOPROXY&&ae(Mr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function ek(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(t){return new $ge(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wq{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$="PersistentStream";class _q{constructor(e,n,r,i,s,a,o,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new wq(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(mc(n.toString()),mc("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new ie(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ae(H$,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ae(H$,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Fye extends _q{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Hge(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ae.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Ae.min():a.readTime?$o(a.readTime):Ae.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=zD(this.serializer),n.addTarget=function(s,a){let o;const l=a.target;if(o=jD(l)?{documents:Kge(s,l)}:{query:qge(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=cq(s,a.resumeToken);const c=BD(s,a.expectedCount);c!==null&&(o.expectedCount=c)}else if(a.snapshotVersion.compareTo(Ae.min())>0){o.readTime=s1(s,a.snapshotVersion.toTimestamp());const c=BD(s,a.expectedCount);c!==null&&(o.expectedCount=c)}return o}(this.serializer,e);const r=Yge(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=zD(this.serializer),n.removeTarget=e,this.q_(n)}}class Vye extends _q{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Gge(e.writeResults,e.commitTime),r=$o(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=zD(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Wge(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bye{}class $ye extends Bye{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ie(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(e,$D(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ie(W.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(e,$D(n,r),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ie(W.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Uye{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mc(n),this.aa=!1):ae("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="RemoteStore";class zye{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{vp(this)&&(ae(np,"Restarting streams for network reachability change."),await async function(l){const c=Ce(l);c.Ea.add(4),await sx(c),c.Ra.set("Unknown"),c.Ea.delete(4),await fP(c)}(this))})}),this.Ra=new Uye(r,i)}}async function fP(t){if(vp(t))for(const e of t.da)await e(!0)}async function sx(t){for(const e of t.da)await e(!1)}function xq(t,e){const n=Ce(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),yL(n)?gL(n):Uy(n).O_()&&mL(n,e))}function pL(t,e){const n=Ce(t),r=Uy(n);n.Ia.delete(e),r.O_()&&Aq(n,e),n.Ia.size===0&&(r.O_()?r.L_():vp(n)&&n.Ra.set("Unknown"))}function mL(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Uy(t).Y_(e)}function Aq(t,e){t.Va.Ue(e),Uy(t).Z_(e)}function gL(t){t.Va=new jge({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Uy(t).start(),t.Ra.ua()}function yL(t){return vp(t)&&!Uy(t).x_()&&t.Ia.size>0}function vp(t){return Ce(t).Ea.size===0}function Eq(t){t.Va=void 0}async function Hye(t){t.Ra.set("Online")}async function Wye(t){t.Ia.forEach((e,n)=>{mL(t,e)})}async function Gye(t,e){Eq(t),yL(t)?(t.Ra.ha(e),gL(t)):t.Ra.set("Unknown")}async function Kye(t,e,n){if(t.Ra.set("Online"),e instanceof lq&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))}(t,e)}catch(r){ae(np,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await o1(t,r)}else if(e instanceof XE?t.Va.Ze(e):e instanceof oq?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ae.min()))try{const r=await bq(t.localStore);n.compareTo(r)>=0&&await function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.Ia.get(c);u&&s.Ia.set(c,u.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,c)=>{const u=s.Ia.get(l);if(!u)return;s.Ia.set(l,u.withResumeToken(Ir.EMPTY_BYTE_STRING,u.snapshotVersion)),Aq(s,l);const d=new Ju(u.target,l,c,u.sequenceNumber);mL(s,d)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){ae(np,"Failed to raise snapshot:",r),await o1(t,r)}}async function o1(t,e,n){if(!By(e))throw e;t.Ea.add(1),await sx(t),t.Ra.set("Offline"),n||(n=()=>bq(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ae(np,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await fP(t)})}function Sq(t,e){return e().catch(n=>o1(t,n,e))}async function pP(t){const e=Ce(t),n=Eh(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Z2;for(;qye(e);)try{const i=await Iye(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,Xye(e,i)}catch(i){await o1(e,i)}Tq(e)&&Pq(e)}function qye(t){return vp(t)&&t.Ta.length<10}function Xye(t,e){t.Ta.push(e);const n=Eh(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Tq(t){return vp(t)&&!Eh(t).x_()&&t.Ta.length>0}function Pq(t){Eh(t).start()}async function Yye(t){Eh(t).ra()}async function Qye(t){const e=Eh(t);for(const n of t.Ta)e.ea(n.mutations)}async function Jye(t,e,n){const r=t.Ta.shift(),i=oL.from(r,e,n);await Sq(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await pP(t)}async function Zye(t,e){e&&Eh(t).X_&&await async function(r,i){if(function(a){return Mge(a)&&a!==W.ABORTED}(i.code)){const s=r.Ta.shift();Eh(r).B_(),await Sq(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await pP(r)}}(t,e),Tq(t)&&Pq(t)}async function W$(t,e){const n=Ce(t);n.asyncQueue.verifyOperationInProgress(),ae(np,"RemoteStore received new credentials");const r=vp(n);n.Ea.add(3),await sx(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await fP(n)}async function eve(t,e){const n=Ce(t);e?(n.Ea.delete(2),await fP(n)):e||(n.Ea.add(2),await sx(n),n.Ra.set("Unknown"))}function Uy(t){return t.ma||(t.ma=function(n,r,i){const s=Ce(n);return s.sa(),new Fye(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:Hye.bind(null,t),t_:Wye.bind(null,t),r_:Gye.bind(null,t),H_:Kye.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),yL(t)?gL(t):t.Ra.set("Unknown")):(await t.ma.stop(),Eq(t))})),t.ma}function Eh(t){return t.fa||(t.fa=function(n,r,i){const s=Ce(n);return s.sa(),new Vye(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Yye.bind(null,t),r_:Zye.bind(null,t),ta:Qye.bind(null,t),na:Jye.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await pP(t)):(await t.fa.stop(),t.Ta.length>0&&(ae(np,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new tc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,o=new vL(e,n,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bL(t,e){if(mc("AsyncQueue",`${e}: ${t}`),By(t))return new ie(W.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{static emptySet(e){return new Pm(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ge.comparator(n.key,r.key):(n,r)=>ge.comparator(n.key,r.key),this.keyedMap=h0(),this.sortedSet=new Xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Pm)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Pm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G${constructor(){this.ga=new Xt(ge.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class gy{constructor(e,n,r,i,s,a,o,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new gy(e,n,Pm.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oP(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tve{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class nve{constructor(){this.queries=K$(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Ce(n),s=i.queries;i.queries=K$(),s.forEach((a,o)=>{for(const l of o.Sa)l.onError(r)})})(this,new ie(W.ABORTED,"Firestore shutting down"))}}function K$(){return new yp(t=>qK(t),oP)}async function Cq(t,e){const n=Ce(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new tve,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const o=bL(a,`Initialization of query '${Bp(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&wL(n)}async function Iq(t,e){const n=Ce(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function rve(t,e){const n=Ce(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(r=!0);a.wa=i}}r&&wL(n)}function ive(t,e,n){const r=Ce(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function wL(t){t.Ca.forEach(e=>{e.next()})}var GD,q$;(q$=GD||(GD={})).Ma="default",q$.Cache="cache";class kq{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new gy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=gy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==GD.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rq{constructor(e){this.key=e}}class Oq{constructor(e){this.key=e}}class sve{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=XK(e),this.tu=new Pm(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new G$,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const f=i.get(u),p=lP(this.query,d)?d:null,g=!!f&&this.mutatedKeys.has(f.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let v=!1;f&&p?f.data.isEqual(p.data)?g!==y&&(r.track({type:3,doc:p}),v=!0):this.su(f,p)||(r.track({type:2,doc:p}),v=!0,(l&&this.eu(p,l)>0||c&&this.eu(p,c)<0)&&(o=!0)):!f&&p?(r.track({type:0,doc:p}),v=!0):f&&!p&&(r.track({type:1,doc:f}),v=!0,(l||c)&&(o=!0)),v&&(p?(a=a.add(p),s=y?s.add(u):s.delete(u)):(a=a.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const u=this.query.limitType==="F"?a.last():a.first();a=a.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{tu:a,iu:r,Cs:o,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((u,d)=>function(p,g){const y=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:v})}};return y(p)-y(g)}(u.type,d.type)||this.eu(u.doc,d.doc)),this.ou(r),i=i??!1;const o=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,c=l!==this.Za;return this.Za=l,a.length!==0||c?{snapshot:new gy(this.query,e.tu,s,a,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new G$,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Oq(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Rq(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ue();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return gy.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const _L="SyncEngine";class ave{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ove{constructor(e){this.key=e,this.hu=!1}}class lve{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new yp(o=>qK(o),oP),this.Iu=new Map,this.Eu=new Set,this.du=new Xt(ge.comparator),this.Au=new Map,this.Ru=new uL,this.Vu={},this.mu=new Map,this.fu=my.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function cve(t,e,n=!0){const r=Fq(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Dq(r,e,n,!0),i}async function uve(t,e){const n=Fq(t);await Dq(n,e,!0,!1)}async function Dq(t,e,n,r){const i=await kye(t.localStore,Bo(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await hve(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&xq(t.remoteStore,i),o}async function hve(t,e,n,r,i){t.pu=(d,f,p)=>async function(y,v,b,_){let w=v.view.ru(b);w.Cs&&(w=await B$(y.localStore,v.query,!1).then(({documents:C})=>v.view.ru(C,w)));const T=_&&_.targetChanges.get(v.targetId),P=_&&_.targetMismatches.get(v.targetId)!=null,O=v.view.applyChanges(w,y.isPrimaryClient,T,P);return Y$(y,v.targetId,O.au),O.snapshot}(t,d,f,p);const s=await B$(t.localStore,e,!0),a=new sve(e,s.Qs),o=a.ru(s.documents),l=ix.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=a.applyChanges(o,t.isPrimaryClient,l);Y$(t,n,c.au);const u=new ave(e,n,a);return t.Tu.set(e,u),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function dve(t,e,n){const r=Ce(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(a=>!oP(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await HD(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&pL(r.remoteStore,i.targetId),KD(r,i.targetId)}).catch(Vy)):(KD(r,i.targetId),await HD(r.localStore,i.targetId,!0))}async function fve(t,e){const n=Ce(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),pL(n.remoteStore,r.targetId))}async function pve(t,e,n){const r=_ve(t);try{const i=await function(a,o){const l=Ce(a),c=Rt.now(),u=o.reduce((p,g)=>p.add(g.key),Ue());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=gc(),y=Ue();return l.Ns.getEntries(p,u).next(v=>{g=v,g.forEach((b,_)=>{_.isValidDocument()||(y=y.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,g)).next(v=>{d=v;const b=[];for(const _ of o){const w=Ige(_,d.get(_.key).overlayedDocument);w!=null&&b.push(new jh(_.key,w,BK(w.value.mapValue),na.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,b,o)}).next(v=>{f=v;const b=v.applyToLocalDocumentSet(d,y);return l.documentOverlayCache.saveOverlays(p,v.batchId,b)})}).then(()=>({batchId:f.batchId,changes:QK(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,o,l){let c=a.Vu[a.currentUser.toKey()];c||(c=new Xt($e)),c=c.insert(o,l),a.Vu[a.currentUser.toKey()]=c}(r,i.batchId,n),await ax(r,i.changes),await pP(r.remoteStore)}catch(i){const s=bL(i,"Failed to persist write");n.reject(s)}}async function Mq(t,e){const n=Ce(t);try{const r=await Pye(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Au.get(s);a&&(Je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?Je(a.hu,14607):i.removedDocuments.size>0&&(Je(a.hu,42227),a.hu=!1))}),await ax(n,r,e)}catch(r){await Vy(r)}}function X$(t,e,n){const r=Ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,a)=>{const o=a.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const l=Ce(a);l.onlineState=o;let c=!1;l.queries.forEach((u,d)=>{for(const f of d.Sa)f.va(o)&&(c=!0)}),c&&wL(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function mve(t,e,n){const r=Ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new Xt(ge.comparator);a=a.insert(s,Gr.newNoDocument(s,Ae.min()));const o=Ue().add(s),l=new hP(Ae.min(),new Map,new Xt($e),a,o);await Mq(r,l),r.du=r.du.remove(s),r.Au.delete(e),xL(r)}else await HD(r.localStore,e,!1).then(()=>KD(r,e,n)).catch(Vy)}async function gve(t,e){const n=Ce(t),r=e.batch.batchId;try{const i=await Tye(n.localStore,e);Lq(n,r,null),Nq(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ax(n,i)}catch(i){await Vy(i)}}async function yve(t,e,n){const r=Ce(t);try{const i=await function(a,o){const l=Ce(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,o).next(d=>(Je(d!==null,37113),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);Lq(r,e,n),Nq(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ax(r,i)}catch(i){await Vy(i)}}function Nq(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Lq(t,e,n){const r=Ce(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function KD(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||jq(t,r)})}function jq(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(pL(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),xL(t))}function Y$(t,e,n){for(const r of n)r instanceof Rq?(t.Ru.addReference(r.key,e),vve(t,r)):r instanceof Oq?(ae(_L,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||jq(t,r.key)):we(19791,{wu:r})}function vve(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ae(_L,"New document in limbo: "+n),t.Eu.add(r),xL(t))}function xL(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ge(Et.fromString(e)),r=t.fu.next();t.Au.set(r,new ove(n)),t.du=t.du.insert(n,r),xq(t.remoteStore,new Ju(Bo(iL(n.path)),r,"TargetPurposeLimboResolution",iP.ce))}}async function ax(t,e,n){const r=Ce(t),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((o,l)=>{a.push(r.pu(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=dL.As(l.targetId,c);s.push(d)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(l,c){const u=Ce(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>q.forEach(c,f=>q.forEach(f.Es,p=>u.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>q.forEach(f.ds,p=>u.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!By(d))throw d;ae(fL,"Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const p=u.Ms.get(f),g=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(g);u.Ms=u.Ms.insert(f,y)}}}(r.localStore,s))}async function bve(t,e){const n=Ce(t);if(!n.currentUser.isEqual(e)){ae(_L,"User change. New user:",e.toKey());const r=await vq(n.localStore,e);n.currentUser=e,function(s,a){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new ie(W.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ax(n,r.Ls)}}function wve(t,e){const n=Ce(t),r=n.Au.get(e);if(r&&r.hu)return Ue().add(r.key);{let i=Ue();const s=n.Iu.get(e);if(!s)return i;for(const a of s){const o=n.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}function Fq(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Mq.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wve.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mve.bind(null,e),e.Pu.H_=rve.bind(null,e.eventManager),e.Pu.yu=ive.bind(null,e.eventManager),e}function _ve(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gve.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yve.bind(null,e),e}class l1{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dP(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Sye(this.persistence,new xye,e.initialUser,this.serializer)}Cu(e){return new yq(hL.mi,this.serializer)}Du(e){return new Oye}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}l1.provider={build:()=>new l1};class xve extends l1{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Je(this.persistence.referenceDelegate instanceof a1,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new oye(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ki.withCacheSize(this.cacheSizeBytes):ki.DEFAULT;return new yq(r=>a1.mi(r,n),this.serializer)}}class qD{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>X$(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=bve.bind(null,this.syncEngine),await eve(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nve}()}createDatastore(e){const n=dP(e.databaseInfo.databaseId),r=function(s){return new jye(s)}(e.databaseInfo);return function(s,a,o,l){return new $ye(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,o){return new zye(r,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>X$(this.syncEngine,n,0),function(){return z$.v()?new z$:new Dye}())}createSyncEngine(e,n){return function(i,s,a,o,l,c,u){const d=new lve(i,s,a,o,l,c);return u&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Ce(i);ae(np,"RemoteStore shutting down."),s.Ea.add(5),await sx(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}qD.provider={build:()=>new qD};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vq{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mc("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh="FirestoreClient";class Ave{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Hr.UNAUTHENTICATED,this.clientId=J2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{ae(Sh,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(ae(Sh,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new tc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=bL(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function tk(t,e){t.asyncQueue.verifyOperationInProgress(),ae(Sh,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await vq(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Q$(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Eve(t);ae(Sh,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>W$(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>W$(e.remoteStore,i)),t._onlineComponents=e}async function Eve(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ae(Sh,"Using user provided OfflineComponentProvider");try{await tk(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===W.FAILED_PRECONDITION||i.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;hy("Error using user provided cache. Falling back to memory cache: "+n),await tk(t,new l1)}}else ae(Sh,"Using default OfflineComponentProvider"),await tk(t,new xve(void 0));return t._offlineComponents}async function Bq(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ae(Sh,"Using user provided OnlineComponentProvider"),await Q$(t,t._uninitializedComponentsProvider._online)):(ae(Sh,"Using default OnlineComponentProvider"),await Q$(t,new qD))),t._onlineComponents}function Sve(t){return Bq(t).then(e=>e.syncEngine)}async function $q(t){const e=await Bq(t),n=e.eventManager;return n.onListen=cve.bind(null,e.syncEngine),n.onUnlisten=dve.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=uve.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=fve.bind(null,e.syncEngine),n}function Tve(t,e,n={}){const r=new tc;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const u=new Vq({next:f=>{u.Nu(),a.enqueueAndForget(()=>Iq(s,d));const p=f.docs.has(o);!p&&f.fromCache?c.reject(new ie(W.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new ie(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new kq(iL(o.path),u,{includeMetadataChanges:!0,qa:!0});return Cq(s,d)}(await $q(t),t.asyncQueue,e,n,r)),r.promise}function Pve(t,e,n={}){const r=new tc;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,c){const u=new Vq({next:f=>{u.Nu(),a.enqueueAndForget(()=>Iq(s,d)),f.fromCache&&l.source==="server"?c.reject(new ie(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new kq(o,u,{includeMetadataChanges:!0,qa:!0});return Cq(s,d)}(await $q(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uq(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J$=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zq="firestore.googleapis.com",Z$=!0;class eU{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ie(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zq,this.ssl=Z$}else this.host=e.host,this.ssl=e.ssl??Z$;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gq;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sye)throw new ie(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ume("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Uq(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mP{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eU({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eU(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ome;switch(r.type){case"firstParty":return new Lme(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ie(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=J$.get(n);r&&(ae("ComponentProvider","Removing Datastore"),J$.delete(n),r.terminate())}(this),Promise.resolve()}}function Cve(t,e,n,r={}){var c;t=za(t,mP);const i=pp(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${n}`;i&&(j2(`https://${o}`),F2("Firestore",!0)),s.host!==zq&&s.host!==o&&hy("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:i,emulatorOptions:r};if(!Qf(l,a)&&(t._setSettings(l),r.mockUserToken)){let u,d;if(typeof r.mockUserToken=="string")u=r.mockUserToken,d=Hr.MOCK_USER;else{u=M7(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ie(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Hr(f)}t._authCredentials=new Dme(new CK(u,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bp(this.firestore,e,this._query)}}class pn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}toJSON(){return{type:pn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(nx(n,pn._jsonSchema))return new pn(e,r||null,new ge(Et.fromString(n.referencePath)))}}pn._jsonSchemaVersion="firestore/documentReference/1.0",pn._jsonSchema={type:En("string",pn._jsonSchemaVersion),referencePath:En("string")};class hh extends bp{constructor(e,n,r){super(e,n,iL(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new ge(e))}withConverter(e){return new hh(this.firestore,e,this._path)}}function Cb(t,e,...n){if(t=ir(t),IK("collection","path",e),t instanceof mP){const r=Et.fromString(e,...n);return f$(r),new hh(t,null,r)}{if(!(t instanceof pn||t instanceof hh))throw new ie(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Et.fromString(e,...n));return f$(r),new hh(t.firestore,null,r)}}function yy(t,e,...n){if(t=ir(t),arguments.length===1&&(e=J2.newId()),IK("doc","path",e),t instanceof mP){const r=Et.fromString(e,...n);return d$(r),new pn(t,null,new ge(r))}{if(!(t instanceof pn||t instanceof hh))throw new ie(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Et.fromString(e,...n));return d$(r),new pn(t.firestore,t instanceof hh?t.converter:null,new ge(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tU="AsyncQueue";class nU{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new wq(this,"async_queue_retry"),this._c=()=>{const r=ek();r&&ae(tU,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=ek();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ek();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new tc;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!By(e))throw e;ae(tU,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,mc("INTERNAL UNHANDLED ERROR: ",rU(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=vL.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&we(47125,{Pc:rU(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function rU(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class wp extends mP{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new nU,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nU(e),this._firestoreClient=void 0,await e}}}function Ive(t,e){const n=typeof t=="object"?t:$2(),r=typeof t=="string"?t:t1,i=ZT(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=R7("firestore");s&&Cve(i,...s)}return i}function AL(t){if(t._terminated)throw new ie(W.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||kve(t),t._firestoreClient}function kve(t){var r,i,s;const e=t._freezeSettings(),n=function(o,l,c,u){return new Zme(o,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Uq(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Ave(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qs(Ir.fromBase64String(e))}catch(n){throw new ie(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qs(Ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nx(e,qs._jsonSchema))return qs.fromBase64String(e.bytes)}}qs._jsonSchemaVersion="firestore/bytes/1.0",qs._jsonSchema={type:En("string",qs._jsonSchemaVersion),bytes:En("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Uo._jsonSchemaVersion}}static fromJSON(e){if(nx(e,Uo._jsonSchema))return new Uo(e.latitude,e.longitude)}}Uo._jsonSchemaVersion="firestore/geoPoint/1.0",Uo._jsonSchema={type:En("string",Uo._jsonSchemaVersion),latitude:En("number"),longitude:En("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:zo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nx(e,zo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new zo(e.vectorValues);throw new ie(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zo._jsonSchemaVersion="firestore/vectorValue/1.0",zo._jsonSchema={type:En("string",zo._jsonSchemaVersion),vectorValues:En("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rve=/^__.*__$/;class Ove{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new jh(e,this.data,this.fieldMask,n,this.fieldTransforms):new rx(e,this.data,n,this.fieldTransforms)}}class Hq{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new jh(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Wq(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:t})}}class EL{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new EL({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return c1(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Wq(this.Ac)&&Rve.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Dve{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||dP(e)}Cc(e,n,r,i=!1){return new EL({Ac:e,methodName:n,Dc:r,path:xr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vP(t){const e=t._freezeSettings(),n=dP(t._databaseId);return new Dve(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Gq(t,e,n,r,i,s={}){const a=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);TL("Data must be an object, but it was:",a,r);const o=Kq(r,a);let l,c;if(s.merge)l=new ms(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const f=XD(e,d,n);if(!a.contains(f))throw new ie(W.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Xq(u,f)||u.push(f)}l=new ms(u),c=a.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=a.fieldTransforms;return new Ove(new Oi(o),l,c)}class bP extends yP{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bP}}class SL extends yP{_toFieldTransform(e){return new Sge(e.path,new Sb)}isEqual(e){return e instanceof SL}}function Mve(t,e,n,r){const i=t.Cc(1,e,n);TL("Data must be an object, but it was:",i,r);const s=[],a=Oi.empty();Lh(r,(l,c)=>{const u=PL(e,l,n);c=ir(c);const d=i.yc(u);if(c instanceof bP)s.push(u);else{const f=ox(c,d);f!=null&&(s.push(u),a.set(u,f))}});const o=new ms(s);return new Hq(a,o,i.fieldTransforms)}function Nve(t,e,n,r,i,s){const a=t.Cc(1,e,n),o=[XD(e,r,n)],l=[i];if(s.length%2!=0)throw new ie(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)o.push(XD(e,s[f])),l.push(s[f+1]);const c=[],u=Oi.empty();for(let f=o.length-1;f>=0;--f)if(!Xq(c,o[f])){const p=o[f];let g=l[f];g=ir(g);const y=a.yc(p);if(g instanceof bP)c.push(p);else{const v=ox(g,y);v!=null&&(c.push(p),u.set(p,v))}}const d=new ms(c);return new Hq(u,d,a.fieldTransforms)}function Lve(t,e,n,r=!1){return ox(n,t.Cc(r?4:3,e))}function ox(t,e){if(qq(t=ir(t)))return TL("Unsupported field value:",e,t),Kq(t,e);if(t instanceof yP)return function(r,i){if(!Wq(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const o of r){let l=ox(o,i.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ir(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return xge(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Rt.fromDate(r);return{timestampValue:s1(i.serializer,s)}}if(r instanceof Rt){const s=new Rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:s1(i.serializer,s)}}if(r instanceof Uo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qs)return{bytesValue:cq(i.serializer,r._byteString)};if(r instanceof pn){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:cL(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof zo)return function(a,o){return{mapValue:{fields:{[FK]:{stringValue:VK},[n1]:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw o.Sc("VectorValues must only contain numeric values.");return sL(o.serializer,c)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${rP(r)}`)}(t,e)}function Kq(t,e){const n={};return OK(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lh(t,(r,i)=>{const s=ox(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function qq(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Rt||t instanceof Uo||t instanceof qs||t instanceof pn||t instanceof yP||t instanceof zo)}function TL(t,e,n){if(!qq(n)||!kK(n)){const r=rP(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function XD(t,e,n){if((e=ir(e))instanceof gP)return e._internalPath;if(typeof e=="string")return PL(t,e);throw c1("Field path arguments must be of type string or ",t,!1,void 0,n)}const jve=new RegExp("[~\\*/\\[\\]]");function PL(t,e,n){if(e.search(jve)>=0)throw c1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gP(...e.split("."))._internalPath}catch{throw c1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function c1(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new ie(W.INVALID_ARGUMENT,o+t+l)}function Xq(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yq{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Fve(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(wP("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Fve extends Yq{data(){return super.data()}}function wP(t,e){return typeof e=="string"?PL(t,e):e instanceof gP?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vve(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class CL{}class Qq extends CL{}function IL(t,e,...n){let r=[];e instanceof CL&&r.push(e),r=r.concat(n),function(s){const a=s.filter(l=>l instanceof kL).length,o=s.filter(l=>l instanceof _P).length;if(a>1||a>0&&o>0)throw new ie(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class _P extends Qq{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new _P(e,n,r)}_apply(e){const n=this._parse(e);return Zq(e._query,n),new bp(e.firestore,e.converter,FD(e._query,n))}_parse(e){const n=vP(e.firestore);return function(s,a,o,l,c,u,d){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ie(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){sU(d,u);const g=[];for(const y of d)g.push(iU(l,s,y));f={arrayValue:{values:g}}}else f=iU(l,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||sU(d,u),f=Lve(o,a,d,u==="in"||u==="not-in");return An.create(c,u,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Jq(t,e,n){const r=e,i=wP("where",t);return _P._create(i,r,n)}class kL extends CL{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new kL(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ha.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)Zq(a,l),a=FD(a,l)}(e._query,n),new bp(e.firestore,e.converter,FD(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class RL extends Qq{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new RL(e,n)}_apply(e){const n=function(i,s,a){if(i.startAt!==null)throw new ie(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ie(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Eb(s,a)}(e._query,this._field,this._direction);return new bp(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new $y(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Bve(t,e="asc"){const n=e,r=wP("orderBy",t);return RL._create(r,n)}function iU(t,e,n){if(typeof(n=ir(n))=="string"){if(n==="")throw new ie(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KK(e)&&n.indexOf("/")!==-1)throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Et.fromString(n));if(!ge.isDocumentKey(r))throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _$(t,new ge(r))}if(n instanceof pn)return _$(t,n._key);throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rP(n)}.`)}function sU(t,e){if(!Array.isArray(t)||t.length===0)throw new ie(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Zq(t,e){const n=function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ie(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class $ve{convertValue(e,n="none"){switch(Ah(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Lh(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[n1].arrayValue)==null?void 0:i.values)==null?void 0:s.map(a=>dn(a.doubleValue));return new zo(n)}convertGeoPoint(e){return new Uo(dn(e.latitude),dn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=aP(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_b(e));default:return null}}convertTimestamp(e){const n=_h(e);return new Rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Et.fromString(e);Je(mq(r),9688,{name:e});const i=new xb(r.get(1),r.get(3)),s=new ge(r.popFirst(5));return i.isEqual(n)||mc(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eX(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class f0{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ff extends Yq{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new YE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(wP("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ff._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ff._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ff._jsonSchema={type:En("string",Ff._jsonSchemaVersion),bundleSource:En("string","DocumentSnapshot"),bundleName:En("string"),bundle:En("string")};class YE extends Ff{data(e={}){return super.data(e)}}class Cm{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new f0(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new YE(this._firestore,this._userDataWriter,r.key,r,new f0(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const l=new YE(i._firestore,i._userDataWriter,o.doc.key,o.doc,new f0(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new YE(i._firestore,i._userDataWriter,o.doc.key,o.doc,new f0(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return o.type!==0&&(c=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),u=a.indexOf(o.doc.key)),{type:Uve(o.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Cm._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=J2.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Uve(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zve(t){t=za(t,pn);const e=za(t.firestore,wp);return Tve(AL(e),t._key).then(n=>Gve(e,t,n))}Cm._jsonSchemaVersion="firestore/querySnapshot/1.0",Cm._jsonSchema={type:En("string",Cm._jsonSchemaVersion),bundleSource:En("string","QuerySnapshot"),bundleName:En("string"),bundle:En("string")};class tX extends $ve{constructor(e){super(),this.firestore=e}convertBytes(e){return new qs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,n)}}function OL(t){t=za(t,bp);const e=za(t.firestore,wp),n=AL(e),r=new tX(e);return Vve(t._query),Pve(n,t._query).then(i=>new Cm(e,r,t,i))}function Hve(t,e,n){t=za(t,pn);const r=za(t.firestore,wp),i=eX(t.converter,e);return xP(r,[Gq(vP(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,na.none())])}function Wve(t,e,n,...r){t=za(t,pn);const i=za(t.firestore,wp),s=vP(i);let a;return a=typeof(e=ir(e))=="string"||e instanceof gP?Nve(s,"updateDoc",t._key,e,n,r):Mve(s,"updateDoc",t._key,e),xP(i,[a.toMutation(t._key,na.exists(!0))])}function nX(t){return xP(za(t.firestore,wp),[new aL(t._key,na.none())])}function rX(t,e){const n=za(t.firestore,wp),r=yy(t),i=eX(t.converter,e);return xP(n,[Gq(vP(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,na.exists(!1))]).then(()=>r)}function xP(t,e){return function(r,i){const s=new tc;return r.asyncQueue.enqueueAndForget(async()=>pve(await Sve(r),i,s)),s.promise}(AL(t),e)}function Gve(t,e,n){const r=n.docs.get(e._key),i=new tX(t);return new Ff(t,i,e._key,r,new f0(n.hasPendingWrites,n.fromCache),e.converter)}function j0(){return new SL("serverTimestamp")}(function(e,n=!0){(function(i){Fy=i})(mp),Jf(new bh("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new wp(new Mme(r.getProvider("auth-internal")),new jme(a,r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ie(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xb(c.options.projectId,u)}(a,i),a);return s={useFetchStreams:n,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),jo(l$,c$,e),jo(l$,c$,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iX="firebasestorage.googleapis.com",Kve="storageBucket",qve=2*60*1e3,Xve=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl extends el{constructor(e,n,r=0){super(nk(e),`Firebase Storage: ${n} (${nk(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tl.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return nk(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ko;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ko||(Ko={}));function nk(t){return"storage/"+t}function Yve(){const t="An unknown error occurred, please check the error payload for server response.";return new tl(Ko.UNKNOWN,t)}function Qve(){return new tl(Ko.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Jve(){return new tl(Ko.CANCELED,"User canceled the upload/download.")}function Zve(t){return new tl(Ko.INVALID_URL,"Invalid URL '"+t+"'.")}function e0e(t){return new tl(Ko.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function aU(t){return new tl(Ko.INVALID_ARGUMENT,t)}function sX(){return new tl(Ko.APP_DELETED,"The Firebase app was deleted.")}function t0e(t){return new tl(Ko.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=La.makeFromUrl(e,n)}catch{return new La(e,"")}if(r.path==="")return r;throw e0e(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function c(T){T.path_=decodeURIComponent(T.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${u}/b/${i}/o${f}`,"i"),g={bucket:1,path:3},y=n===iX?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",b=new RegExp(`^https?://${y}/${i}/${v}`,"i"),w=[{regex:o,indices:l,postModify:s},{regex:p,indices:g,postModify:c},{regex:b,indices:{bucket:1,path:2},postModify:c}];for(let T=0;T<w.length;T++){const P=w[T],O=P.regex.exec(e);if(O){const C=O[P.indices.bucket];let I=O[P.indices.path];I||(I=""),r=new La(C,I),P.postModify(r);break}}if(r==null)throw Zve(e);return r}}class n0e{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0e(t,e,n){let r=1,i=null,s=null,a=!1,o=0;function l(){return o===2}let c=!1;function u(...v){c||(c=!0,e.apply(null,v))}function d(v){i=setTimeout(()=>{i=null,t(p,l())},v)}function f(){s&&clearTimeout(s)}function p(v,...b){if(c){f();return}if(v){f(),u.call(null,v,...b);return}if(l()||a){f(),u.call(null,v,...b);return}r<64&&(r*=2);let w;o===1?(o=2,w=0):w=(r+Math.random())*1e3,d(w)}let g=!1;function y(v){g||(g=!0,f(),!c&&(i!==null?(v||(o=2),clearTimeout(i),d(0)):v||(o=1)))}return d(0),s=setTimeout(()=>{a=!0,y(!0)},n),y}function i0e(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0e(t){return t!==void 0}function oU(t,e,n,r){if(r<e)throw aU(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw aU(`Invalid value for '${t}'. Expected ${n} or less.`)}function a0e(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var u1;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(u1||(u1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0e(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0e{constructor(e,n,r,i,s,a,o,l,c,u,d,f=!0,p=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,y)=>{this.resolve_=g,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new SA(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,c=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===u1.NO_ERROR,l=s.getStatus();if(!o||o0e(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===u1.ABORT;r(!1,new SA(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new SA(c,s))})},n=(r,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());s0e(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=Yve();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(i.canceled){const l=this.appDelete_?sX():Jve();a(l)}else{const l=Qve();a(l)}};this.canceled_?n(!1,new SA(!1,null,!0)):this.backoffId_=r0e(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&i0e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class SA{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function c0e(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function u0e(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function h0e(t,e){e&&(t["X-Firebase-GMPID"]=e)}function d0e(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function f0e(t,e,n,r,i,s,a=!0,o=!1){const l=a0e(t.urlParams),c=t.url+l,u=Object.assign({},t.headers);return h0e(u,e),c0e(u,n),u0e(u,s),d0e(u,r),new l0e(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0e(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function m0e(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,n){this._service=e,n instanceof La?this._location=n:this._location=La.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new h1(e,n)}get root(){const e=new La(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return m0e(this._location.path)}get storage(){return this._service}get parent(){const e=p0e(this._location.path);if(e===null)return null;const n=new La(this._location.bucket,e);return new h1(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw t0e(e)}}function lU(t,e){const n=e==null?void 0:e[Kve];return n==null?null:La.makeFromBucketSpec(n,t)}function g0e(t,e,n,r={}){t.host=`${e}:${n}`;const i=pp(e);i&&(j2(`https://${t.host}/b`),F2("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:M7(s,t.app.options.projectId))}class y0e{constructor(e,n,r,i,s,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=iX,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=qve,this._maxUploadRetryTime=Xve,this._requests=new Set,i!=null?this._bucket=La.makeFromBucketSpec(i,this._host):this._bucket=lU(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=La.makeFromBucketSpec(this._url,e):this._bucket=lU(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){oU("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){oU("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ds(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new h1(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new n0e(sX());{const a=f0e(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const cU="@firebase/storage",uU="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aX="storage";function v0e(t=$2(),e){t=ir(t);const r=ZT(t,aX).getImmediate({identifier:e}),i=R7("storage");return i&&b0e(r,...i),r}function b0e(t,e,n,r={}){g0e(t,e,n,r)}function w0e(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new y0e(n,r,i,e,mp)}function _0e(){Jf(new bh(aX,w0e,"PUBLIC").setMultipleInstances(!0)),jo(cU,uU,""),jo(cU,uU,"esm2020")}_0e();const x0e={apiKey:"AIzaSyCuCYH38ZqKbtPYPR2ED1nMdD6yBuo1ReA",authDomain:"shop-d542c.firebaseapp.com",projectId:"shop-d542c",storageBucket:"shop-d542c.firebasestorage.app",messagingSenderId:"592347281413",appId:"1:592347281413:web:ed7c8752b195dcbb02846c",measurementId:"G-DFV2PBV8X2"},DL=j7(x0e),d1=kme(DL),Ro=Ive(DL);v0e(DL);function A0e(){const[t,e]=x.useState(()=>{const v=localStorage.getItem("forumPosts");return v?JSON.parse(v):m8}),[n,r]=x.useState([]),[i,s]=x.useState(!0);x.useEffect(()=>{(async()=>{try{const b=IL(Cb(Ro,"forumPosts"),Bve("date","desc")),w=(await OL(b)).docs.map(T=>({id:T.id,...T.data()}));r(w)}catch(b){console.log("Firestore  , localStorage :",b)}finally{s(!1)}})()},[]),x.useEffect(()=>{n.length>0&&localStorage.setItem("forumPosts",JSON.stringify(n))},[n]);const[a,o]=x.useState(null),[l,c]=x.useState({title:"",category:1,content:""}),[u,d]=x.useState(!1),[f,p]=x.useState(!1),g=async v=>{if(v.preventDefault(),!l.title.trim()||!l.content.trim()){alert("  .");return}p(!0);try{const b=await rX(Cb(Ro,"forumPosts"),{...l,author:"user",date:j0(),replies:0});console.log("   :",b.id);const _={id:b.id,...l,author:"user",date:new Date().toISOString().split("T")[0],replies:0};r([_,...n]),c({title:"",category:1,content:""}),d(!1),alert(" .")}catch(b){console.error("   :",b),console.error(" :",b.code),console.error(" :",b.message),alert("  : "+b.message)}finally{p(!1)}},y=a?n.filter(v=>v.category===a):n;return A.jsxs("div",{className:"space-y-8 sm:space-y-12",children:[A.jsxs("div",{children:[A.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),A.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base",children:" ,  ,  ,        ."})]}),A.jsx("button",{onClick:()=>d(!u),className:"w-full sm:w-auto px-6 py-3 bg-blue-600 dark:bg-blue-600 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-700 transition font-medium text-sm sm:text-base",children:u?"":"  "}),u&&A.jsxs("form",{onSubmit:g,className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:""}),A.jsx("input",{type:"text",value:l.title,onChange:v=>c({...l,title:v.target.value}),className:"w-full bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:" "})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:""}),A.jsx("select",{value:l.category,onChange:v=>c({...l,category:parseInt(v.target.value)}),className:"w-full bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white",children:iE.map(v=>A.jsx("option",{value:v.id,children:v.name},v.id))})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:""}),A.jsx("textarea",{rows:"6",value:l.content,onChange:v=>c({...l,content:v.target.value}),className:"w-full bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 resize-none",placeholder:" "})]}),A.jsx("button",{type:"submit",disabled:f,className:"w-full bg-green-600 dark:bg-green-600 hover:bg-green-700 dark:hover:bg-green-700 disabled:bg-gray-500 text-white px-6 py-2 rounded font-bold transition text-sm sm:text-base",children:f?" ...":""})]}),A.jsxs("div",{className:"flex flex-wrap gap-2",children:[A.jsx("button",{onClick:()=>o(null),className:`px-3 sm:px-4 py-2 rounded transition text-sm sm:text-base ${a===null?"bg-blue-600 text-white":"bg-gray-200 dark:bg-dark-300 text-gray-900 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-dark-200"}`,children:""}),iE.map(v=>A.jsx("button",{onClick:()=>o(v.id),className:`px-3 sm:px-4 py-2 rounded transition text-sm sm:text-base ${a===v.id?"bg-blue-600 text-white":"bg-gray-200 dark:bg-dark-300 text-gray-900 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-dark-200"}`,children:v.name},v.id))]}),A.jsx("div",{className:"space-y-3 sm:space-y-4",children:y.map(v=>{var b;return A.jsx(yt,{to:`/forum/${v.id}`,children:A.jsx("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md transition cursor-pointer",children:A.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2",children:[A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:A.jsx("span",{className:"text-xs bg-gray-200 dark:bg-dark-300 text-gray-700 dark:text-gray-300 px-2 py-1 rounded",children:(b=iE.find(_=>_.id===v.category))==null?void 0:b.name})}),A.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 break-words",children:v.title}),A.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-2 line-clamp-2",children:v.content}),A.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-2",children:[v.author,"  ",v.date]})]}),A.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 whitespace-nowrap",children:[" ",v.replies]})]})})},v.id)})})]})}function E0e(){const{postId:t}=kW();hp();const{isDark:e}=Ka(),[n,r]=x.useState([{id:1,author:"1",content:" .       .",date:"2025-12-04",likes:3},{id:2,author:"2",content:"    .  .",date:"2025-12-05",likes:1}]),[i,s]=x.useState(""),a=m8.find(c=>c.id===parseInt(t)),o=iE.find(c=>c.id===(a==null?void 0:a.category));if(!a)return A.jsxs("div",{className:"text-center py-12",children:[A.jsx("h1",{className:`text-2xl font-bold mb-4 ${e?"text-white":"text-gray-900"}`,children:"   ."}),A.jsx(yt,{to:"/forum",className:"text-blue-600 hover:text-blue-700 font-medium",children:" "})]});const l=c=>{if(c.preventDefault(),!i.trim()){alert(" .");return}const u={id:n.length+1,author:" ",content:i,date:new Date().toISOString().split("T")[0],likes:0};r([...n,u]),s("")};return A.jsxs("div",{className:"space-y-8",children:[A.jsxs(se.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[A.jsx(yt,{to:"/forum",className:`inline-flex items-center gap-2 mb-4 transition ${e?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"}`,children:"  "}),A.jsxs("div",{className:`p-6 rounded-lg border ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[A.jsx("div",{className:"mb-3",children:A.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${e?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-700"}`,children:o==null?void 0:o.name})}),A.jsx("h1",{className:`text-3xl sm:text-4xl font-bold mb-4 ${e?"text-white":"text-gray-900"}`,children:a.title}),A.jsxs("div",{className:`flex flex-wrap gap-4 mb-6 pb-6 border-b ${e?"border-gray-700 text-gray-300":"border-gray-200 text-gray-600"} text-sm`,children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-medium",children:":"})," ",a.author]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-medium",children:":"})," ",a.date]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-medium",children:":"})," ",a.replies,""]}),A.jsxs("div",{children:[A.jsx("span",{className:"font-medium",children:":"})," ",a.views||0,""]})]}),A.jsx("div",{className:`prose prose-sm ${e?"prose-invert":""} max-w-none mb-8`,children:A.jsx("div",{className:`${e?"text-gray-200":"text-gray-700"} leading-7 whitespace-pre-wrap`,children:a.content})})]})]}),A.jsxs(se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:`p-6 rounded-lg border ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[A.jsx("h2",{className:`text-xl font-bold mb-4 ${e?"text-white":"text-gray-900"}`,children:" "}),A.jsxs("form",{onSubmit:l,className:"space-y-4",children:[A.jsx("textarea",{value:i,onChange:c=>s(c.target.value),placeholder:" ...",rows:"4",className:`w-full px-4 py-3 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`}),A.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:" "})]})]}),A.jsxs(se.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"space-y-4",children:[A.jsxs("h2",{className:`text-2xl font-bold ${e?"text-white":"text-gray-900"}`,children:[" ",n.length,""]}),n.map(c=>A.jsxs(se.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`p-4 rounded-lg border ${e?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[A.jsxs("div",{className:`flex justify-between items-start mb-2 ${e?"text-gray-300":"text-gray-600"} text-sm`,children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-medium",children:c.author}),A.jsx("span",{className:"ml-4",children:c.date})]}),A.jsxs("button",{className:`transition ${e?"text-gray-400 hover:text-gray-200":"text-gray-400 hover:text-gray-600"}`,children:[" ",c.likes]})]}),A.jsx("p",{className:`${e?"text-gray-200":"text-gray-700"} leading-6`,children:c.content})]},c.id))]})]})}function S0e(){const[t,e]=x.useState(""),n=i4.filter(r=>r.term.toLowerCase().includes(t.toLowerCase())||r.definition.toLowerCase().includes(t.toLowerCase()));return A.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[A.jsxs("div",{children:[A.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),A.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base mb-6",children:"      ."}),A.jsx("input",{type:"search",placeholder:"   ...",value:t,onChange:r=>e(r.target.value),className:"w-full max-w-md bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 text-sm sm:text-base"})]}),A.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[n.map((r,i)=>A.jsxs("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:shadow-md transition",children:[A.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 mb-2",children:r.term}),A.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm sm:text-base",children:r.definition})]},i)),n.length===0&&A.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8 text-sm sm:text-base",children:"  ."})]}),A.jsxs("div",{className:"bg-gray-100 dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 rounded-lg text-center text-gray-600 dark:text-gray-400 text-sm sm:text-base",children:[" ",i4.length,"   ",n.length,"  "]})]})}function T0e(){return A.jsxs("div",{className:"space-y-8 sm:space-y-12",children:[A.jsxs("div",{children:[A.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),A.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base",children:"    , ,  ."})]}),A.jsxs("section",{children:[A.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:" "}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:MI.textbooks.map((t,e)=>A.jsxs("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:shadow-md transition",children:[A.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 mb-1",children:t.title}),A.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:[t.authors," (",t.year,")"]})]},e))})]}),A.jsxs("section",{children:[A.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"  "}),A.jsx("div",{className:"space-y-3 sm:space-y-4",children:MI.databases.map((t,e)=>A.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"block bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md transition",children:[A.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400",children:t.name}),A.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:t.desc}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2 break-all",children:t.url})]},e))})]}),A.jsxs("section",{children:[A.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"   "}),A.jsx("div",{className:"space-y-3 sm:space-y-4",children:MI.tools.map((t,e)=>A.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"block bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md transition",children:[A.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400",children:t.name}),A.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:t.desc}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2 break-all",children:t.url})]},e))})]})]})}function P0e(){const{isDark:t}=Ka(),e=sb(),[n,r]=x.useState({username:"",email:"",affiliation:"",bio:""}),[i,s]=x.useState(!1),[a,o]=x.useState(!0),[l,c]=x.useState("");x.useEffect(()=>{if(!(e!=null&&e.email)){o(!1);return}(async()=>{try{const p=yy(Ro,"profiles",e.email),g=await zve(p);g.exists()?(r(g.data()),console.log(" Firestore  :",e.email)):(r({username:e.username,email:e.email,affiliation:"",bio:""}),console.log("   (Firestore )"))}catch(p){console.error(" Firestore  :",p),r({username:e.username,email:e.email||"",affiliation:"",bio:""})}finally{o(!1)}})()},[e==null?void 0:e.email]);const u=f=>{const{name:p,value:g}=f.target;r(y=>({...y,[p]:g}))},d=async f=>{f.preventDefault(),o(!0);try{await Hve(yy(Ro,"profiles",e.email),{username:n.username,email:n.email,affiliation:n.affiliation,bio:n.bio,updatedAt:j0()}),console.log(" Firestore :",e.email),c("  ."),s(!1),setTimeout(()=>c(""),3e3)}catch(p){console.error("  :",p.code,p.message),c("  : "+p.message)}finally{o(!1)}};return e?A.jsxs("div",{className:"max-w-2xl mx-auto",children:[A.jsx("h1",{className:`text-3xl font-bold mb-8 ${t?"text-white":"text-gray-900"}`,children:""}),l&&A.jsx("div",{className:`mb-4 p-4 rounded-lg ${l.includes("")?"bg-red-50 text-red-700 dark:bg-red-900 dark:text-red-200":"bg-green-50 text-green-700 dark:bg-green-900 dark:text-green-200"}`,children:l}),A.jsxs("div",{className:`rounded-lg p-8 ${t?"bg-gray-800":"bg-white"} border ${t?"border-gray-700":"border-gray-200"}`,children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h2",{className:`text-xl font-bold ${t?"text-white":"text-gray-900"}`,children:" "}),A.jsx("button",{onClick:()=>s(!i),className:`px-4 py-2 rounded-lg transition ${t?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white`,children:i?"":""})]}),i?A.jsxs("form",{onSubmit:d,className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:""}),A.jsx("input",{type:"text",name:"username",value:n.username,onChange:u,className:`w-full px-4 py-2 border rounded-lg ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),A.jsxs("div",{children:[A.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:""}),A.jsx("input",{type:"email",name:"email",value:n.email,onChange:u,disabled:!0,className:`w-full px-4 py-2 border rounded-lg opacity-50 cursor-not-allowed ${t?"bg-gray-700 border-gray-600 text-gray-400":"bg-gray-100 border-gray-300 text-gray-600"}`})]}),A.jsxs("div",{children:[A.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:" "}),A.jsx("input",{type:"text",name:"affiliation",value:n.affiliation,onChange:u,placeholder:",  ",className:`w-full px-4 py-2 border rounded-lg ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),A.jsxs("div",{children:[A.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:""}),A.jsx("textarea",{name:"bio",value:n.bio,onChange:u,placeholder:" ...",rows:"4",className:`w-full px-4 py-2 border rounded-lg ${t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),A.jsx("button",{type:"submit",disabled:a,className:`w-full py-2 px-4 rounded-lg font-medium text-white transition ${a?"bg-blue-400 cursor-not-allowed opacity-50":"bg-blue-600 hover:bg-blue-700"}`,children:a?" ...":""})]}):A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:""}),A.jsx("p",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"}`,children:n.username})]}),A.jsxs("div",{children:[A.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:""}),A.jsx("p",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"}`,children:n.email})]}),A.jsxs("div",{children:[A.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:" "}),A.jsx("p",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"}`,children:n.affiliation||""})]}),A.jsxs("div",{children:[A.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:""}),A.jsx("p",{className:`text-lg font-medium ${t?"text-white":"text-gray-900"}`,children:n.bio||""})]}),A.jsx("hr",{className:t?"border-gray-700":"border-gray-200"}),A.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[A.jsxs(yt,{to:"/bookmarks",className:`p-4 rounded-lg border text-center transition hover:shadow-md ${t?"bg-gray-700 border-gray-600 text-gray-200 hover:bg-gray-600":"bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100"}`,children:[A.jsx("p",{className:"text-2xl mb-1",children:""}),A.jsx("p",{className:"font-semibold",children:""})]}),A.jsxs(yt,{to:"/notes",className:`p-4 rounded-lg border text-center transition hover:shadow-md ${t?"bg-gray-700 border-gray-600 text-gray-200 hover:bg-gray-600":"bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100"}`,children:[A.jsx("p",{className:"text-2xl mb-1",children:""}),A.jsx("p",{className:"font-semibold",children:""})]})]})]})]})]}):A.jsx("div",{className:`text-center py-12 ${t?"text-gray-400":"text-gray-600"}`,children:"   ."})}function C0e(){const{isDark:t}=Ka(),e=sb(),[n,r]=x.useState([]),[i,s]=x.useState(!0),[a,o]=x.useState("");x.useEffect(()=>{if(!(e!=null&&e.email)){s(!1);return}l()},[e==null?void 0:e.email]);const l=async()=>{try{const u=IL(Cb(Ro,"bookmarks"),Jq("userEmail","==",e.email)),f=(await OL(u)).docs.map(p=>({id:p.id,...p.data()}));r(f),console.log("  :",e.email,":",f.length)}catch(u){console.error("   :",u),o("   .")}finally{s(!1)}},c=async u=>{try{const d=yy(Ro,"bookmarks",u);await nX(d),r(f=>f.filter(p=>p.id!==u)),console.log("  :",u)}catch(d){o(d.message)}};return A.jsxs("div",{className:"max-w-4xl mx-auto",children:[A.jsx("h1",{className:`text-3xl font-bold mb-8 ${t?"text-white":"text-gray-900"}`,children:""}),a&&A.jsx("div",{className:`mb-4 p-4 rounded-lg ${t?"bg-red-900 text-red-200 border border-red-700":"bg-red-50 text-red-700 border border-red-200"}`,children:a}),i?A.jsx("div",{className:`text-center py-12 ${t?"text-gray-400":"text-gray-600"}`,children:" ..."}):n.length===0?A.jsxs("div",{className:`text-center py-12 ${t?"text-gray-400":"text-gray-600"}`,children:[A.jsx("p",{className:"mb-4",children:"  ."}),A.jsx(yt,{to:"/concepts",className:`px-4 py-2 rounded-lg inline-block transition ${t?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white`,children:" "})]}):A.jsx("div",{className:"space-y-4",children:n.map(u=>A.jsxs("div",{className:`p-6 rounded-lg border transition ${t?"bg-gray-800 border-gray-700 hover:border-gray-600":"bg-white border-gray-200 hover:border-gray-300"}`,children:[A.jsxs("div",{className:"flex justify-between items-start gap-4",children:[A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("h2",{className:`text-xl font-bold mb-2 ${t?"text-white":"text-gray-900"}`,children:u.title}),A.jsxs("p",{className:`text-sm mb-3 ${t?"text-gray-400":"text-gray-600"}`,children:[": ",A.jsx("span",{className:"font-medium",children:u.type==="paper"?"":""})]}),A.jsx("p",{className:`line-clamp-2 ${t?"text-gray-300":"text-gray-700"}`,children:u.description})]}),A.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[A.jsx(yt,{to:u.type==="paper"?`/papers/${u.slug}`:`/concepts/${u.slug}`,className:`px-4 py-2 rounded-lg transition ${t?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white text-sm`,children:""}),A.jsx("button",{onClick:()=>c(u.id),className:`px-4 py-2 rounded-lg transition ${t?"bg-red-600 hover:bg-red-700":"bg-red-500 hover:bg-red-600"} text-white text-sm`,children:""})]})]}),A.jsxs("p",{className:`text-xs mt-4 ${t?"text-gray-500":"text-gray-400"}`,children:[" : ",new Date(u.created_at).toLocaleDateString("ko-KR")]})]},u.id))})]})}function I0e(){const{isDark:t}=Ka();hp();const e=sb(),[n,r]=x.useState([]),[i,s]=x.useState(null),[a,o]=x.useState(!1),[l,c]=x.useState(""),[u,d]=x.useState(""),[f,p]=x.useState(""),[g,y]=x.useState(!0),[v,b]=x.useState("");x.useEffect(()=>{if(!(e!=null&&e.email)){y(!1);return}(async()=>{try{const N=IL(Cb(Ro,"notes"),Jq("userEmail","==",e.email)),j=(await OL(N)).docs.map(K=>({id:K.id,...K.data()}));r(j),console.log("   :",e.email,":",j.length)}catch(N){console.log(" Firestore  :",N)}finally{y(!1)}})()},[e==null?void 0:e.email]);const _=()=>{o(!0),s(null),c(""),d(""),p("")},w=L=>{s(L.id),o(!1),c(L.title),d(L.content),p(L.tags.join(", "))},T=async()=>{if(!l.trim()){alert(" .");return}try{if(a){const N={id:(await rX(Cb(Ro,"notes"),{title:l,content:u,tags:f.split(",").map(j=>j.trim()).filter(j=>j),userEmail:e.email,createdAt:j0(),updatedAt:j0()})).id,title:l,content:u,tags:f.split(",").map(j=>j.trim()).filter(j=>j),userEmail:e.email,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},F=[N,...n];r(F),o(!1),s(N.id),b("  !"),setTimeout(()=>b(""),2e3),console.log("  :",e.email,l)}else if(i){const L=yy(Ro,"notes",i);await Wve(L,{title:l,content:u,tags:f.split(",").map(F=>F.trim()).filter(F=>F),userEmail:e.email,updatedAt:j0()});const N=n.map(F=>F.id===i?{...F,title:l,content:u,tags:f.split(",").map(j=>j.trim()).filter(j=>j),updatedAt:new Date().toISOString()}:F);r(N),b("  !"),setTimeout(()=>b(""),2e3)}}catch(L){console.error("  :",L),b("  ."),setTimeout(()=>b(""),2e3)}},P=async L=>{if(confirm("  ?"))try{await nX(yy(Ro,"notes",L));const N=n.filter(F=>F.id!==L);r(N),localStorage.setItem("notes",JSON.stringify(N)),i===L&&(s(null),o(!1))}catch(N){console.error("  :",N),alert("  .")}},O=L=>new Date(L).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric"}),C=t?"bg-gray-800 border-gray-700":"bg-white border-gray-200",I=t?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300",M=t?"text-gray-300":"text-gray-700";return A.jsxs("div",{className:"min-h-screen space-y-8",children:[v&&A.jsx(se.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`fixed top-20 right-4 px-6 py-3 rounded-lg shadow-lg font-semibold text-white z-50 ${v.includes("")?"bg-red-600":"bg-green-600"}`,children:v}),A.jsxs(se.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6},children:[A.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-indigo-600 to-blue-600 dark:from-indigo-400 dark:to-blue-400 bg-clip-text text-transparent",children:" "}),A.jsx("p",{className:`text-sm sm:text-base ${t?"text-gray-300":"text-gray-600"}`,children:", ,    "})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[A.jsxs(se.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.6},className:`p-6 rounded-lg border ${C}`,children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsx("h2",{className:"text-xl font-bold",children:" "}),A.jsx("button",{onClick:_,className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium",children:"+  "})]}),A.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:n.length===0?A.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:" ."}):n.map(L=>A.jsxs("div",{onClick:()=>w(L),className:`p-3 rounded-lg cursor-pointer transition-all ${i===L.id?t?"bg-blue-900 border-blue-500":"bg-blue-100 border-blue-400":t?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} border`,children:[A.jsx("p",{className:"font-semibold text-sm truncate",children:L.title}),A.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:O(L.updatedAt)})]},L.id))})]}),A.jsx(se.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:`p-6 rounded-lg border lg:col-span-2 ${C}`,children:a||i?A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:`block text-sm font-semibold mb-2 ${M}`,children:""}),A.jsx("input",{type:"text",value:l,onChange:L=>c(L.target.value),placeholder:"  ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${I}`})]}),A.jsxs("div",{children:[A.jsx("label",{className:`block text-sm font-semibold mb-2 ${M}`,children:" ( )"}),A.jsx("input",{type:"text",value:f,onChange:L=>p(L.target.value),placeholder:": , Kerr metric, ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${I}`})]}),A.jsxs("div",{children:[A.jsx("label",{className:`block text-sm font-semibold mb-2 ${M}`,children:""}),A.jsx("textarea",{value:u,onChange:L=>d(L.target.value),placeholder:"  ",rows:"12",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none ${I}`})]}),A.jsxs("div",{className:"flex gap-2 justify-end",children:[A.jsx("button",{onClick:()=>{o(!1),s(null)},className:`px-4 py-2 rounded-lg font-medium ${t?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"}`,children:""}),i&&A.jsx("button",{onClick:()=>P(i),className:"px-4 py-2 rounded-lg font-medium bg-red-600 hover:bg-red-700 text-white",children:""}),A.jsx("button",{onClick:T,className:"px-4 py-2 rounded-lg font-medium bg-blue-600 hover:bg-blue-700 text-white",children:""})]})]}):A.jsxs("div",{className:`text-center py-12 ${t?"text-gray-400":"text-gray-500"}`,children:[A.jsx("p",{className:"text-lg",children:"     "}),A.jsx("p",{className:"text-sm mt-2",children:" : ,  ,      !"})]})})]}),n.length>0&&A.jsxs(se.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`p-6 rounded-lg border ${C}`,children:[A.jsx("h3",{className:"text-lg font-bold mb-3",children:""}),A.jsx("div",{className:"flex flex-wrap gap-2",children:[...new Set(n.flatMap(L=>L.tags).sort())].map(L=>A.jsxs("button",{onClick:()=>{const N=n.filter(F=>F.tags.includes(L));N.length>0&&w(N[0])},className:`px-3 py-1 rounded-full text-sm font-medium transition-all ${t?"bg-gray-700 text-gray-200 hover:bg-blue-600":"bg-gray-200 text-gray-800 hover:bg-blue-500 hover:text-white"}`,children:["#",L]},L))})]})]})}function oX(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=oX(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function it(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=oX(t))&&(r&&(r+=" "),r+=e);return r}var k0e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function ML(t){if(typeof t!="string")return!1;var e=k0e;return e.includes(t)}var R0e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],O0e=new Set(R0e);function lX(t){return typeof t!="string"?!1:O0e.has(t)}function cX(t){return typeof t=="string"&&t.startsWith("data-")}function oa(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(lX(n)||cX(n))&&(e[n]=t[n]);return e}function lx(t){if(t==null)return null;if(x.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return oa(e)}return typeof t=="object"&&!Array.isArray(t)?oa(t):null}function pi(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(lX(n)||cX(n)||ML(n))&&(e[n]=t[n]);return e}function D0e(t){return t==null?null:x.isValidElement(t)?pi(t.props):typeof t=="object"&&!Array.isArray(t)?pi(t):null}var M0e=["children","width","height","viewBox","className","style","title","desc"];function YD(){return YD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YD.apply(null,arguments)}function N0e(t,e){if(t==null)return{};var n,r,i=L0e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function L0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var NL=x.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:s,className:a,style:o,title:l,desc:c}=t,u=N0e(t,M0e),d=s||{width:r,height:i,x:0,y:0},f=it("recharts-surface",a);return x.createElement("svg",YD({},pi(u),{className:f,width:r,height:i,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height),ref:e}),x.createElement("title",null,l),x.createElement("desc",null,c),n)}),j0e=["children","className"];function QD(){return QD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QD.apply(null,arguments)}function F0e(t,e){if(t==null)return{};var n,r,i=V0e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function V0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var _s=x.forwardRef((t,e)=>{var{children:n,className:r}=t,i=F0e(t,j0e),s=it("recharts-layer",r);return x.createElement("g",QD({className:s},pi(i),{ref:e}),n)}),uX=x.createContext(null),B0e=()=>x.useContext(uX);function At(t){return function(){return t}}const hX=Math.cos,f1=Math.sin,qa=Math.sqrt,p1=Math.PI,AP=2*p1,JD=Math.PI,ZD=2*JD,rd=1e-6,$0e=ZD-rd;function dX(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function U0e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return dX;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class z0e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?dX:U0e(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-e,c=i-n,u=a-e,d=o-n,f=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>rd)if(!(Math.abs(d*l-c*u)>rd)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let p=r-a,g=i-o,y=l*l+c*c,v=p*p+g*g,b=Math.sqrt(y),_=Math.sqrt(f),w=s*Math.tan((JD-Math.acos((y+f-v)/(2*b*_)))/2),T=w/_,P=w/b;Math.abs(T-1)>rd&&this._append`L${e+T*u},${n+T*d}`,this._append`A${s},${s},0,0,${+(d*p>u*g)},${this._x1=e+P*l},${this._y1=n+P*c}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),c=e+o,u=n+l,d=1^a,f=a?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>rd||Math.abs(this._y1-u)>rd)&&this._append`L${c},${u}`,r&&(f<0&&(f=f%ZD+ZD),f>$0e?this._append`A${r},${r},0,1,${d},${e-o},${n-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=u}`:f>rd&&this._append`A${r},${r},0,${+(f>=JD)},${d},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function LL(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new z0e(e)}function jL(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function fX(t){this._context=t}fX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function EP(t){return new fX(t)}function pX(t){return t[0]}function mX(t){return t[1]}function gX(t,e){var n=At(!0),r=null,i=EP,s=null,a=LL(o);t=typeof t=="function"?t:t===void 0?pX:At(t),e=typeof e=="function"?e:e===void 0?mX:At(e);function o(l){var c,u=(l=jL(l)).length,d,f=!1,p;for(r==null&&(s=i(p=a())),c=0;c<=u;++c)!(c<u&&n(d=l[c],c,l))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(d,c,l),+e(d,c,l));if(p)return s=null,p+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:At(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:At(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:At(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),o):r},o}function TA(t,e,n){var r=null,i=At(!0),s=null,a=EP,o=null,l=LL(c);t=typeof t=="function"?t:t===void 0?pX:At(+t),e=typeof e=="function"?e:At(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?mX:At(+n);function c(d){var f,p,g,y=(d=jL(d)).length,v,b=!1,_,w=new Array(y),T=new Array(y);for(s==null&&(o=a(_=l())),f=0;f<=y;++f){if(!(f<y&&i(v=d[f],f,d))===b)if(b=!b)p=f,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=f-1;g>=p;--g)o.point(w[g],T[g]);o.lineEnd(),o.areaEnd()}b&&(w[f]=+t(v,f,d),T[f]=+e(v,f,d),o.point(r?+r(v,f,d):w[f],n?+n(v,f,d):T[f]))}if(_)return o=null,_+""||null}function u(){return gX().defined(i).curve(a).context(s)}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:At(+d),r=null,c):t},c.x0=function(d){return arguments.length?(t=typeof d=="function"?d:At(+d),c):t},c.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:At(+d),c):r},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:At(+d),n=null,c):e},c.y0=function(d){return arguments.length?(e=typeof d=="function"?d:At(+d),c):e},c.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:At(+d),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(d){return arguments.length?(i=typeof d=="function"?d:At(!!d),c):i},c.curve=function(d){return arguments.length?(a=d,s!=null&&(o=a(s)),c):a},c.context=function(d){return arguments.length?(d==null?s=o=null:o=a(s=d),c):s},c}class yX{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function H0e(t){return new yX(t,!0)}function W0e(t){return new yX(t,!1)}const FL={draw(t,e){const n=qa(e/p1);t.moveTo(n,0),t.arc(0,0,n,0,AP)}},G0e={draw(t,e){const n=qa(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},vX=qa(1/3),K0e=vX*2,q0e={draw(t,e){const n=qa(e/K0e),r=n*vX;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},X0e={draw(t,e){const n=qa(e),r=-n/2;t.rect(r,r,n,n)}},Y0e=.8908130915292852,bX=f1(p1/10)/f1(7*p1/10),Q0e=f1(AP/10)*bX,J0e=-hX(AP/10)*bX,Z0e={draw(t,e){const n=qa(e*Y0e),r=Q0e*n,i=J0e*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const a=AP*s/5,o=hX(a),l=f1(a);t.lineTo(l*n,-o*n),t.lineTo(o*r-l*i,l*r+o*i)}t.closePath()}},rk=qa(3),ebe={draw(t,e){const n=-qa(e/(rk*3));t.moveTo(0,n*2),t.lineTo(-rk*n,-n),t.lineTo(rk*n,-n),t.closePath()}},Is=-.5,ks=qa(3)/2,eM=1/qa(12),tbe=(eM/2+1)*3,nbe={draw(t,e){const n=qa(e/tbe),r=n/2,i=n*eM,s=r,a=n*eM+n,o=-s,l=a;t.moveTo(r,i),t.lineTo(s,a),t.lineTo(o,l),t.lineTo(Is*r-ks*i,ks*r+Is*i),t.lineTo(Is*s-ks*a,ks*s+Is*a),t.lineTo(Is*o-ks*l,ks*o+Is*l),t.lineTo(Is*r+ks*i,Is*i-ks*r),t.lineTo(Is*s+ks*a,Is*a-ks*s),t.lineTo(Is*o+ks*l,Is*l-ks*o),t.closePath()}};function rbe(t,e){let n=null,r=LL(i);t=typeof t=="function"?t:At(t||FL),e=typeof e=="function"?e:At(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:At(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:At(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function m1(){}function g1(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function wX(t){this._context=t}wX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:g1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:g1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ibe(t){return new wX(t)}function _X(t){this._context=t}_X.prototype={areaStart:m1,areaEnd:m1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:g1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function sbe(t){return new _X(t)}function xX(t){this._context=t}xX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:g1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function abe(t){return new xX(t)}function AX(t){this._context=t}AX.prototype={areaStart:m1,areaEnd:m1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function obe(t){return new AX(t)}function hU(t){return t<0?-1:1}function dU(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(hU(s)+hU(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function fU(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function ik(t,e,n){var r=t._x0,i=t._y0,s=t._x1,a=t._y1,o=(s-r)/3;t._context.bezierCurveTo(r+o,i+o*e,s-o,a-o*n,s,a)}function y1(t){this._context=t}y1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ik(this,this._t0,fU(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ik(this,fU(this,n=dU(this,t,e)),n);break;default:ik(this,this._t0,n=dU(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function EX(t){this._context=new SX(t)}(EX.prototype=Object.create(y1.prototype)).point=function(t,e){y1.prototype.point.call(this,e,t)};function SX(t){this._context=t}SX.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function lbe(t){return new y1(t)}function cbe(t){return new EX(t)}function TX(t){this._context=t}TX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=pU(t),i=pU(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function pU(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function ube(t){return new TX(t)}function SP(t,e){this._context=t,this._t=e}SP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function hbe(t){return new SP(t,.5)}function dbe(t){return new SP(t,0)}function fbe(t){return new SP(t,1)}function vy(t,e){if((a=t.length)>1)for(var n=1,r,i,s=t[e[0]],a,o=s.length;n<a;++n)for(i=s,s=t[e[n]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function tM(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function pbe(t,e){return t[e]}function mbe(t){const e=[];return e.key=t,e}function gbe(){var t=At([]),e=tM,n=vy,r=pbe;function i(s){var a=Array.from(t.apply(this,arguments),mbe),o,l=a.length,c=-1,u;for(const d of s)for(o=0,++c;o<l;++o)(a[o][c]=[0,+r(d,a[o].key,c,s)]).data=d;for(o=0,u=jL(e(a));o<l;++o)a[u[o]].index=o;return n(a,u),a}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:At(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:At(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?tM:typeof s=="function"?s:At(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??vy,i):n},i}function ybe(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,a;i<s;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}vy(t,e)}}function vbe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var a=0,o=0;a<i;++a)o+=t[a][n][1]||0;r[n][1]+=r[n][0]=-o/2}vy(t,e)}}function bbe(t,e){if(!(!((a=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,a;r<s;++r){for(var o=0,l=0,c=0;o<a;++o){for(var u=t[e[o]],d=u[r][1]||0,f=u[r-1][1]||0,p=(d-f)/2,g=0;g<o;++g){var y=t[e[g]],v=y[r][1]||0,b=y[r-1][1]||0;p+=v-b}l+=d,c+=p*d}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,vy(t,e)}}var TP={},PX={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(PX);var VL={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(VL);var PP={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(PP);var CP={},CX={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(CX);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=CX,n=PP;function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const s=[],a=i.length;if(a===0)return s;let o=0,l="",c="",u=!1;for(i.charCodeAt(0)===46&&(s.push(""),o++);o<a;){const d=i[o];c?d==="\\"&&o+1<a?(o++,l+=i[o]):d===c?c="":l+=d:u?d==='"'||d==="'"?c=d:d==="]"?(u=!1,s.push(l),l=""):l+=d:d==="["?(u=!0,l&&(s.push(l),l="")):d==="."?l&&(s.push(l),l=""):l+=d,o++}return l&&s.push(l),s}t.toPath=r})(CP);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=PX,n=VL,r=PP,i=CP;function s(o,l,c){if(o==null)return c;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return c;const u=o[l];return u===void 0?n.isDeepKey(l)?s(o,i.toPath(l),c):c:u}case"number":case"symbol":{typeof l=="number"&&(l=r.toKey(l));const u=o[l];return u===void 0?c:u}default:{if(Array.isArray(l))return a(o,l,c);if(Object.is(l==null?void 0:l.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return c;const u=o[l];return u===void 0?c:u}}}function a(o,l,c){if(l.length===0)return c;let u=o;for(let d=0;d<l.length;d++){if(u==null||e.isUnsafeProperty(l[d]))return c;u=u[l[d]]}return u===void 0?c:u}t.get=s})(TP);var wbe=TP.get;const by=Sc(wbe);var Js=t=>t===0?0:t>0?1:-1,qo=t=>typeof t=="number"&&t!=+t,yc=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,me=t=>(typeof t=="number"||t instanceof Number)&&!qo(t),Xo=t=>me(t)||typeof t=="string",_be=0,Ib=t=>{var e=++_be;return"".concat(t||"").concat(e)},Th=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!me(e)&&typeof e!="string")return r;var s;if(yc(e)){if(n==null)return r;var a=e.indexOf("%");s=n*parseFloat(e.slice(0,a))/100}else s=+e;return qo(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},IX=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1};function nr(t,e,n){return me(t)&&me(e)?t+n*(e-t):e}function kX(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):by(r,e))===n)}var xbe=t=>{for(var e=t.length,n=0,r=0,i=0,s=0,a=1/0,o=-1/0,l=0,c=0,u=0;u<e;u++)l=t[u].cx||0,c=t[u].cy||0,n+=l,r+=c,i+=l*c,s+=l*l,a=Math.min(a,l),o=Math.max(o,l);var d=e*s!==n*n?(e*i-n*r)/(e*s-n*n):0;return{xmin:a,xmax:o,a:d,b:(r-d*n)/e}},Vt=t=>t===null||typeof t>"u",cx=t=>Vt(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function Abe(t){return t!=null}function ux(){}var Ebe=["type","size","sizeType"];function nM(){return nM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nM.apply(null,arguments)}function mU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mU(Object(n),!0).forEach(function(r){Sbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sbe(t,e,n){return(e=Tbe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tbe(t){var e=Pbe(t,"string");return typeof e=="symbol"?e:e+""}function Pbe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cbe(t,e){if(t==null)return{};var n,r,i=Ibe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ibe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var RX={symbolCircle:FL,symbolCross:G0e,symbolDiamond:q0e,symbolSquare:X0e,symbolStar:Z0e,symbolTriangle:ebe,symbolWye:nbe},kbe=Math.PI/180,Rbe=t=>{var e="symbol".concat(cx(t));return RX[e]||FL},Obe=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*kbe;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Dbe=(t,e)=>{RX["symbol".concat(cx(t))]=e},IP=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=Cbe(t,Ebe),s=gU(gU({},i),{},{type:e,size:n,sizeType:r}),a="circle";typeof e=="string"&&(a=e);var o=()=>{var f=Rbe(a),p=rbe().type(f).size(Obe(n,r,a)),g=p();if(g!==null)return g},{className:l,cx:c,cy:u}=s,d=pi(s);return me(c)&&me(u)&&me(n)?x.createElement("path",nM({},d,{className:it("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:o()})):null};IP.registerSymbol=Dbe;var OX=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,BL=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(x.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{ML(i)&&(r[i]=s=>n[i](n,s))}),r},Mbe=(t,e,n)=>r=>(t(e,n,r),null),$L=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var s=t[i];ML(i)&&typeof s=="function"&&(r||(r={}),r[i]=Mbe(s,e,n))}),r},Nbe=t=>Array.isArray(t)&&t.length>0;function yU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lbe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yU(Object(n),!0).forEach(function(r){jbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jbe(t,e,n){return(e=Fbe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fbe(t){var e=Vbe(t,"string");return typeof e=="symbol"?e:e+""}function Vbe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ar(t,e){var n=Lbe({},t),r=e,i=Object.keys(e),s=i.reduce((a,o)=>(a[o]===void 0&&r[o]!==void 0&&(a[o]=r[o]),a),n);return s}function v1(){return v1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v1.apply(null,arguments)}function vU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bbe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vU(Object(n),!0).forEach(function(r){$be(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $be(t,e,n){return(e=Ube(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ube(t){var e=zbe(t,"string");return typeof e=="symbol"?e:e+""}function zbe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ds=32,Hbe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function Wbe(t){var{data:e,iconType:n,inactiveColor:r}=t,i=Ds/2,s=Ds/6,a=Ds/3,o=e.inactive?r:e.color,l=n??e.type;if(l==="none")return null;if(l==="plainline"){var c;return x.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:(c=e.payload)===null||c===void 0?void 0:c.strokeDasharray,x1:0,y1:i,x2:Ds,y2:i,className:"recharts-legend-icon"})}if(l==="line")return x.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(i,"h").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*a,",").concat(i,`
            H`).concat(Ds,"M").concat(2*a,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(a,",").concat(i),className:"recharts-legend-icon"});if(l==="rect")return x.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(Ds/8,"h").concat(Ds,"v").concat(Ds*3/4,"h").concat(-Ds,"z"),className:"recharts-legend-icon"});if(x.isValidElement(e.legendIcon)){var u=Bbe({},e);return delete u.legendIcon,x.cloneElement(e.legendIcon,u)}return x.createElement(IP,{fill:o,cx:i,cy:i,size:Ds,sizeType:"diameter",type:l})}function Gbe(t){var{payload:e,iconSize:n,layout:r,formatter:i,inactiveColor:s,iconType:a}=t,o={x:0,y:0,width:Ds,height:Ds},l={display:r==="horizontal"?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((u,d)=>{var f=u.formatter||i,p=it({"recharts-legend-item":!0,["legend-item-".concat(d)]:!0,inactive:u.inactive});if(u.type==="none")return null;var g=u.inactive?s:u.color,y=f?f(u.value,u,d):u.value;return x.createElement("li",v1({className:p,style:l,key:"legend-item-".concat(d)},$L(t,u,d)),x.createElement(NL,{width:n,height:n,viewBox:o,style:c,"aria-label":"".concat(y," legend icon")},x.createElement(Wbe,{data:u,iconType:a,inactiveColor:s})),x.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},y))})}var Kbe=t=>{var e=ar(t,Hbe),{payload:n,layout:r,align:i}=e;if(!n||!n.length)return null;var s={padding:0,margin:0,textAlign:r==="horizontal"?i:"left"};return x.createElement("ul",{className:"recharts-default-legend",style:s},x.createElement(Gbe,v1({},e,{payload:n})))},DX={},MX={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let s=0;s<n.length;s++){const a=n[s],o=r(a);i.has(o)||i.set(o,a)}return Array.from(i.values())}t.uniqBy=e})(MX);var UL={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(UL);var NX={},kP={},LX={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(LX);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LX;function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(kP);var jX={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(jX);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kP,n=jX;function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(NX);var FX={},VX={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=TP;function n(r){return function(i){return e.get(i,r)}}t.property=n})(VX);var BX={},zL={},$X={},HL={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(HL);var WL={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(WL);var GL={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(GL);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HL,n=WL,r=GL;function i(u,d,f){return typeof f!="function"?i(u,d,()=>{}):s(u,d,function p(g,y,v,b,_,w){const T=f(g,y,v,b,_,w);return T!==void 0?!!T:s(g,y,p,w)},new Map)}function s(u,d,f,p){if(d===u)return!0;switch(typeof d){case"object":return a(u,d,f,p);case"function":return Object.keys(d).length>0?s(u,{...d},f,p):r.eq(u,d);default:return e.isObject(u)?typeof d=="string"?d==="":!0:r.eq(u,d)}}function a(u,d,f,p){if(d==null)return!0;if(Array.isArray(d))return l(u,d,f,p);if(d instanceof Map)return o(u,d,f,p);if(d instanceof Set)return c(u,d,f,p);const g=Object.keys(d);if(u==null)return g.length===0;if(g.length===0)return!0;if(p!=null&&p.has(d))return p.get(d)===u;p==null||p.set(d,u);try{for(let y=0;y<g.length;y++){const v=g[y];if(!n.isPrimitive(u)&&!(v in u)||d[v]===void 0&&u[v]!==void 0||d[v]===null&&u[v]!==null||!f(u[v],d[v],v,u,d,p))return!1}return!0}finally{p==null||p.delete(d)}}function o(u,d,f,p){if(d.size===0)return!0;if(!(u instanceof Map))return!1;for(const[g,y]of d.entries()){const v=u.get(g);if(f(v,y,g,u,d,p)===!1)return!1}return!0}function l(u,d,f,p){if(d.length===0)return!0;if(!Array.isArray(u))return!1;const g=new Set;for(let y=0;y<d.length;y++){const v=d[y];let b=!1;for(let _=0;_<u.length;_++){if(g.has(_))continue;const w=u[_];let T=!1;if(f(w,v,y,u,d,p)&&(T=!0),T){g.add(_),b=!0;break}}if(!b)return!1}return!0}function c(u,d,f,p){return d.size===0?!0:u instanceof Set?l([...u],[...d],f,p):!1}t.isMatchWith=i,t.isSetMatch=c})($X);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$X;function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(zL);var UX={},KL={},zX={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(zX);var qL={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(qL);var XL={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",a="[object Symbol]",o="[object Date]",l="[object Map]",c="[object Set]",u="[object Array]",d="[object Function]",f="[object ArrayBuffer]",p="[object Object]",g="[object Error]",y="[object DataView]",v="[object Uint8Array]",b="[object Uint8ClampedArray]",_="[object Uint16Array]",w="[object Uint32Array]",T="[object BigUint64Array]",P="[object Int8Array]",O="[object Int16Array]",C="[object Int32Array]",I="[object BigInt64Array]",M="[object Float32Array]",L="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=f,t.arrayTag=u,t.bigInt64ArrayTag=I,t.bigUint64ArrayTag=T,t.booleanTag=i,t.dataViewTag=y,t.dateTag=o,t.errorTag=g,t.float32ArrayTag=M,t.float64ArrayTag=L,t.functionTag=d,t.int16ArrayTag=O,t.int32ArrayTag=C,t.int8ArrayTag=P,t.mapTag=l,t.numberTag=r,t.objectTag=p,t.regexpTag=e,t.setTag=c,t.stringTag=n,t.symbolTag=a,t.uint16ArrayTag=_,t.uint32ArrayTag=w,t.uint8ArrayTag=v,t.uint8ClampedArrayTag=b})(XL);var HX={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(HX);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zX,n=qL,r=XL,i=WL,s=HX;function a(u,d){return o(u,void 0,u,new Map,d)}function o(u,d,f,p=new Map,g=void 0){const y=g==null?void 0:g(u,d,f,p);if(y!==void 0)return y;if(i.isPrimitive(u))return u;if(p.has(u))return p.get(u);if(Array.isArray(u)){const v=new Array(u.length);p.set(u,v);for(let b=0;b<u.length;b++)v[b]=o(u[b],b,f,p,g);return Object.hasOwn(u,"index")&&(v.index=u.index),Object.hasOwn(u,"input")&&(v.input=u.input),v}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const v=new RegExp(u.source,u.flags);return v.lastIndex=u.lastIndex,v}if(u instanceof Map){const v=new Map;p.set(u,v);for(const[b,_]of u)v.set(b,o(_,b,f,p,g));return v}if(u instanceof Set){const v=new Set;p.set(u,v);for(const b of u)v.add(o(b,void 0,f,p,g));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(s.isTypedArray(u)){const v=new(Object.getPrototypeOf(u)).constructor(u.length);p.set(u,v);for(let b=0;b<u.length;b++)v[b]=o(u[b],b,f,p,g);return v}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const v=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return p.set(u,v),l(v,u,f,p,g),v}if(typeof File<"u"&&u instanceof File){const v=new File([u],u.name,{type:u.type});return p.set(u,v),l(v,u,f,p,g),v}if(typeof Blob<"u"&&u instanceof Blob){const v=new Blob([u],{type:u.type});return p.set(u,v),l(v,u,f,p,g),v}if(u instanceof Error){const v=new u.constructor;return p.set(u,v),v.message=u.message,v.name=u.name,v.stack=u.stack,v.cause=u.cause,l(v,u,f,p,g),v}if(u instanceof Boolean){const v=new Boolean(u.valueOf());return p.set(u,v),l(v,u,f,p,g),v}if(u instanceof Number){const v=new Number(u.valueOf());return p.set(u,v),l(v,u,f,p,g),v}if(u instanceof String){const v=new String(u.valueOf());return p.set(u,v),l(v,u,f,p,g),v}if(typeof u=="object"&&c(u)){const v=Object.create(Object.getPrototypeOf(u));return p.set(u,v),l(v,u,f,p,g),v}return u}function l(u,d,f=u,p,g){const y=[...Object.keys(d),...e.getSymbols(d)];for(let v=0;v<y.length;v++){const b=y[v],_=Object.getOwnPropertyDescriptor(u,b);(_==null||_.writable)&&(u[b]=o(d[b],b,f,p,g))}}function c(u){switch(n.getTag(u)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=a,t.cloneDeepWithImpl=o,t.copyProperties=l})(KL);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KL;function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(UX);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zL,n=UX;function r(i){return i=n.cloneDeep(i),s=>e.isMatch(s,i)}t.matches=r})(BX);var WX={},GX={},KX={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KL,n=XL;function r(i,s){return e.cloneDeepWith(i,(a,o,l,c)=>{const u=s==null?void 0:s(a,o,l,c);if(u!==void 0)return u;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const d=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(d,i),d}case n.argumentsTag:{const d={};return e.copyProperties(d,i),d.length=i.length,d[Symbol.iterator]=i[Symbol.iterator],d}default:return}})}t.cloneDeepWith=r})(KX);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KX;function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(GX);var qX={},YL={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(YL);var XX={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qL;function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(XX);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=VL,n=YL,r=XX,i=CP;function s(a,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&e.isDeepKey(o)&&(a==null?void 0:a[o])==null?l=i.toPath(o):l=[o],l.length===0)return!1;let c=a;for(let u=0;u<l.length;u++){const d=l[u];if((c==null||!Object.hasOwn(c,d))&&!((Array.isArray(c)||r.isArguments(c))&&n.isIndex(d)&&d<c.length))return!1;c=c[d]}return!0}t.has=s})(qX);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zL,n=PP,r=GX,i=TP,s=qX;function a(o,l){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return l=r.cloneDeep(l),function(c){const u=i.get(c,o);return u===void 0?s.has(c,o):l===void 0?u===void 0:e.isMatch(u,l)}}t.matchesProperty=a})(WX);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UL,n=VX,r=BX,i=WX;function s(a){if(a==null)return e.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?i.matchesProperty(a[0],a[1]):r.matches(a);case"string":case"symbol":case"number":return n.property(a)}}t.iteratee=s})(FX);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MX,n=UL,r=NX,i=FX;function s(a,o=n.identity){return r.isArrayLikeObject(a)?e.uniqBy(Array.from(a),i.iteratee(o)):[]}t.uniqBy=s})(DX);var qbe=DX.uniqBy;const bU=Sc(qbe);function YX(t,e,n){return e===!0?bU(t,n):typeof e=="function"?bU(t,e):t}var QX={exports:{}},JX={},ZX={exports:{}},eY={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wy=x;function Xbe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ybe=typeof Object.is=="function"?Object.is:Xbe,Qbe=wy.useState,Jbe=wy.useEffect,Zbe=wy.useLayoutEffect,ewe=wy.useDebugValue;function twe(t,e){var n=e(),r=Qbe({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return Zbe(function(){i.value=n,i.getSnapshot=e,sk(i)&&s({inst:i})},[t,n,e]),Jbe(function(){return sk(i)&&s({inst:i}),t(function(){sk(i)&&s({inst:i})})},[t]),ewe(n),n}function sk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ybe(t,n)}catch{return!0}}function nwe(t,e){return e()}var rwe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?nwe:twe;eY.useSyncExternalStore=wy.useSyncExternalStore!==void 0?wy.useSyncExternalStore:rwe;ZX.exports=eY;var iwe=ZX.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RP=x,swe=iwe;function awe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var owe=typeof Object.is=="function"?Object.is:awe,lwe=swe.useSyncExternalStore,cwe=RP.useRef,uwe=RP.useEffect,hwe=RP.useMemo,dwe=RP.useDebugValue;JX.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=cwe(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=hwe(function(){function l(p){if(!c){if(c=!0,u=p,p=r(p),i!==void 0&&a.hasValue){var g=a.value;if(i(g,p))return d=g}return d=p}if(g=d,owe(u,p))return g;var y=r(p);return i!==void 0&&i(g,y)?(u=p,g):(u=p,d=y)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,i]);var o=lwe(t,s[0],s[1]);return uwe(function(){a.hasValue=!0,a.value=o},[o]),dwe(o),o};QX.exports=JX;var fwe=QX.exports,QL=x.createContext(null),pwe=t=>t,Yt=()=>{var t=x.useContext(QL);return t?t.store.dispatch:pwe},QE=()=>{},mwe=()=>QE,gwe=(t,e)=>t===e;function pe(t){var e=x.useContext(QL);return fwe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:mwe,e?e.store.getState:QE,e?e.store.getState:QE,e?t:QE,gwe)}function ywe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function vwe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function bwe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var wU=t=>Array.isArray(t)?t:[t];function wwe(t){const e=Array.isArray(t[0])?t[0]:t;return bwe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function _we(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var xwe=class{constructor(t){this.value=t}deref(){return this.value}},Awe=typeof WeakRef<"u"?WeakRef:xwe,Ewe=0,_U=1;function PA(){return{s:Ewe,v:void 0,o:null,p:null}}function tY(t,e={}){let n=PA();const{resultEqualityCheck:r}=e;let i,s=0;function a(){var d;let o=n;const{length:l}=arguments;for(let f=0,p=l;f<p;f++){const g=arguments[f];if(typeof g=="function"||typeof g=="object"&&g!==null){let y=o.o;y===null&&(o.o=y=new WeakMap);const v=y.get(g);v===void 0?(o=PA(),y.set(g,o)):o=v}else{let y=o.p;y===null&&(o.p=y=new Map);const v=y.get(g);v===void 0?(o=PA(),y.set(g,o)):o=v}}const c=o;let u;if(o.s===_U)u=o.v;else if(u=t.apply(null,arguments),s++,r){const f=((d=i==null?void 0:i.deref)==null?void 0:d.call(i))??i;f!=null&&r(f,u)&&(u=f,s!==0&&s--),i=typeof u=="object"&&u!==null||typeof u=="function"?new Awe(u):u}return c.s=_U,c.v=u,u}return a.clearCache=()=>{n=PA(),a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function Swe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,a=0,o,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),ywe(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...n,...l},{memoize:d,memoizeOptions:f=[],argsMemoize:p=tY,argsMemoizeOptions:g=[]}=u,y=wU(f),v=wU(g),b=wwe(i),_=d(function(){return s++,c.apply(null,arguments)},...y),w=p(function(){a++;const P=_we(b,arguments);return o=_.apply(null,P),o},...v);return Object.assign(w,{resultFunc:c,memoizedResultFunc:_,dependencies:b,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>o,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:d,argsMemoize:p})};return Object.assign(r,{withTypes:()=>r}),r}var z=Swe(tY),Twe=Object.assign((t,e=z)=>{vwe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((a,o,l)=>(a[n[l]]=o,a),{}))},{withTypes:()=>Twe}),nY={},rY={},iY={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const a=e(r),o=e(i);if(a===o&&a===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?o-a:a-o}return 0};t.compareValues=n})(iY);var sY={},JL={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(JL);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=JL,n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,a){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||a!=null&&Object.hasOwn(a,s)}t.isKey=i})(sY);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=iY,n=sY,r=CP;function i(s,a,o,l){if(s==null)return[];o=l?void 0:o,Array.isArray(s)||(s=Object.values(s)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(p=>String(p));const c=(p,g)=>{let y=p;for(let v=0;v<g.length&&y!=null;++v)y=y[g[v]];return y},u=(p,g)=>g==null||p==null?g:typeof p=="object"&&"key"in p?Object.hasOwn(g,p.key)?g[p.key]:c(g,p.path):typeof p=="function"?p(g):Array.isArray(p)?c(g,p):typeof g=="object"?g[p]:g,d=a.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||n.isKey(p)?p:{key:p,path:r.toPath(p)}));return s.map(p=>({original:p,criteria:d.map(g=>u(g,p))})).slice().sort((p,g)=>{for(let y=0;y<d.length;y++){const v=e.compareValues(p.criteria[y],g.criteria[y],o[y]);if(v!==0)return v}return 0}).map(p=>p.original)}t.orderBy=i})(rY);var aY={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],s=Math.floor(r),a=(o,l)=>{for(let c=0;c<o.length;c++){const u=o[c];Array.isArray(u)&&l<s?a(u,l+1):i.push(u)}};return a(n,0),i}t.flatten=e})(aY);var ZL={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YL,n=kP,r=HL,i=GL;function s(a,o,l){return r.isObject(l)&&(typeof o=="number"&&n.isArrayLike(l)&&e.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?i.eq(l[o],a):!1}t.isIterateeCall=s})(ZL);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rY,n=aY,r=ZL;function i(s,...a){const o=a.length;return o>1&&r.isIterateeCall(s,a[0],a[1])?a=[]:o>2&&r.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),e.orderBy(s,n.flatten(a),["asc"])}t.sortBy=i})(nY);var Pwe=nY.sortBy;const OP=Sc(Pwe);var oY=t=>t.legend.settings,Cwe=t=>t.legend.size,Iwe=t=>t.legend.payload,kwe=z([Iwe,oY],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?OP(r,n):r});function Rwe(){return pe(kwe)}var CA=1;function lY(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=x.useState({height:0,left:0,top:0,width:0}),r=x.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),a={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(a.height-e.height)>CA||Math.abs(a.left-e.left)>CA||Math.abs(a.top-e.top)>CA||Math.abs(a.width-e.width)>CA)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function gr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Owe=typeof Symbol=="function"&&Symbol.observable||"@@observable",xU=Owe,ak=()=>Math.random().toString(36).substring(7).split("").join("."),Dwe={INIT:`@@redux/INIT${ak()}`,REPLACE:`@@redux/REPLACE${ak()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ak()}`},b1=Dwe;function ej(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function cY(t,e,n){if(typeof t!="function")throw new Error(gr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(gr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(gr(1));return n(cY)(t,e)}let r=t,i=e,s=new Map,a=s,o=0,l=!1;function c(){a===s&&(a=new Map,s.forEach((v,b)=>{a.set(b,v)}))}function u(){if(l)throw new Error(gr(3));return i}function d(v){if(typeof v!="function")throw new Error(gr(4));if(l)throw new Error(gr(5));let b=!0;c();const _=o++;return a.set(_,v),function(){if(b){if(l)throw new Error(gr(6));b=!1,c(),a.delete(_),s=null}}}function f(v){if(!ej(v))throw new Error(gr(7));if(typeof v.type>"u")throw new Error(gr(8));if(typeof v.type!="string")throw new Error(gr(17));if(l)throw new Error(gr(9));try{l=!0,i=r(i,v)}finally{l=!1}return(s=a).forEach(_=>{_()}),v}function p(v){if(typeof v!="function")throw new Error(gr(10));r=v,f({type:b1.REPLACE})}function g(){const v=d;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(gr(11));function _(){const T=b;T.next&&T.next(u())}return _(),{unsubscribe:v(_)}},[xU](){return this}}}return f({type:b1.INIT}),{dispatch:f,subscribe:d,getState:u,replaceReducer:p,[xU]:g}}function Mwe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:b1.INIT})>"u")throw new Error(gr(12));if(typeof n(void 0,{type:b1.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(gr(13))})}function uY(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const a=e[s];typeof t[a]=="function"&&(n[a]=t[a])}const r=Object.keys(n);let i;try{Mwe(n)}catch(s){i=s}return function(a={},o){if(i)throw i;let l=!1;const c={};for(let u=0;u<r.length;u++){const d=r[u],f=n[d],p=a[d],g=f(p,o);if(typeof g>"u")throw o&&o.type,new Error(gr(14));c[d]=g,l=l||g!==p}return l=l||r.length!==Object.keys(a).length,l?c:a}}function w1(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Nwe(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(gr(15))};const a={getState:i.getState,dispatch:(l,...c)=>s(l,...c)},o=t.map(l=>l(a));return s=w1(...o)(i.dispatch),{...i,dispatch:s}}}function hY(t){return ej(t)&&"type"in t&&typeof t.type=="string"}var dY=Symbol.for("immer-nothing"),AU=Symbol.for("immer-draftable"),mi=Symbol.for("immer-state");function Oa(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var gs=Object,_y=gs.getPrototypeOf,_1="constructor",DP="prototype",rM="configurable",x1="enumerable",JE="writable",kb="value",vc=t=>!!t&&!!t[mi];function Wa(t){var e;return t?fY(t)||MP(t)||!!t[AU]||!!((e=t[_1])!=null&&e[AU])||NP(t)||LP(t):!1}var Lwe=gs[DP][_1].toString(),EU=new WeakMap;function fY(t){if(!t||!tj(t))return!1;const e=_y(t);if(e===null||e===gs[DP])return!0;const n=gs.hasOwnProperty.call(e,_1)&&e[_1];if(n===Object)return!0;if(!zp(n))return!1;let r=EU.get(n);return r===void 0&&(r=Function.toString.call(n),EU.set(n,r)),r===Lwe}function hx(t,e,n=!0){dx(t)===0?(n?Reflect.ownKeys(t):gs.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function dx(t){const e=t[mi];return e?e.type_:MP(t)?1:NP(t)?2:LP(t)?3:0}var SU=(t,e,n=dx(t))=>n===2?t.has(e):gs[DP].hasOwnProperty.call(t,e),iM=(t,e,n=dx(t))=>n===2?t.get(e):t[e],A1=(t,e,n,r=dx(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function jwe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var MP=Array.isArray,NP=t=>t instanceof Map,LP=t=>t instanceof Set,tj=t=>typeof t=="object",zp=t=>typeof t=="function",ok=t=>typeof t=="boolean",cl=t=>t.copy_||t.base_,nj=t=>t.modified_?t.copy_:t.base_;function sM(t,e){if(NP(t))return new Map(t);if(LP(t))return new Set(t);if(MP(t))return Array[DP].slice.call(t);const n=fY(t);if(e===!0||e==="class_only"&&!n){const r=gs.getOwnPropertyDescriptors(t);delete r[mi];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],o=r[a];o[JE]===!1&&(o[JE]=!0,o[rM]=!0),(o.get||o.set)&&(r[a]={[rM]:!0,[JE]:!0,[x1]:o[x1],[kb]:t[a]})}return gs.create(_y(t),r)}else{const r=_y(t);if(r!==null&&n)return{...t};const i=gs.create(r);return gs.assign(i,t)}}function rj(t,e=!1){return jP(t)||vc(t)||!Wa(t)||(dx(t)>1&&gs.defineProperties(t,{set:IA,add:IA,clear:IA,delete:IA}),gs.freeze(t),e&&hx(t,(n,r)=>{rj(r,!0)},!1)),t}function Fwe(){Oa(2)}var IA={[kb]:Fwe};function jP(t){return t===null||!tj(t)?!0:gs.isFrozen(t)}var E1="MapSet",aM="Patches",pY={};function xy(t){const e=pY[t];return e||Oa(0,t),e}var Vwe=t=>!!pY[t],Rb,mY=()=>Rb,Bwe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Vwe(E1)?xy(E1):void 0});function TU(t,e){e&&(t.patchPlugin_=xy(aM),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function oM(t){lM(t),t.drafts_.forEach($we),t.drafts_=null}function lM(t){t===Rb&&(Rb=t.parent_)}var PU=t=>Rb=Bwe(Rb,t);function $we(t){const e=t[mi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function CU(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[mi].modified_&&(oM(e),Oa(4)),Wa(t)&&(t=IU(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[mi].base_,t,e)}else t=IU(e,n);return Uwe(e,t,!0),oM(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==dY?t:void 0}function IU(t,e){if(jP(e))return e;const n=e[mi];if(!n)return ij(e,t.handledSet_,t);if(!FP(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);vY(n,t)}return n.copy_}function Uwe(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&rj(e,n)}function gY(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var FP=(t,e)=>t.scope_===e,zwe=[];function yY(t,e,n,r){const i=cl(t),s=t.type_;if(r!==void 0&&iM(i,r,s)===e){A1(i,r,n,s);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;hx(i,(l,c)=>{if(vc(c)){const u=o.get(c)||[];u.push(l),o.set(c,u)}})}const a=t.draftLocations_.get(e)??zwe;for(const o of a)A1(i,o,n,s)}function Hwe(t,e,n){t.callbacks_.push(function(i){var o;const s=e;if(!s||!FP(s,i))return;(o=i.mapSetPlugin_)==null||o.fixSetContents(s);const a=nj(s);yY(t,s.draft_??s,a,n),vY(s,i)})}function vY(t,e){var r;if(t.modified_&&!t.finalized_&&(t.type_===3||(((r=t.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:i}=e;if(i){const s=i.getPath(t);s&&i.generatePatches_(t,s,e)}gY(t)}}function Wwe(t,e,n){const{scope_:r}=t;if(vc(n)){const i=n[mi];FP(i,r)&&i.callbacks_.push(function(){ZE(t);const a=nj(i);yY(t,n,a,e)})}else Wa(n)&&t.callbacks_.push(function(){const s=cl(t);iM(s,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&ij(iM(t.copy_,e,t.type_),r.handledSet_,r)})}function ij(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||vc(t)||e.has(t)||!Wa(t)||jP(t)||(e.add(t),hx(t,(r,i)=>{if(vc(i)){const s=i[mi];if(FP(s,n)){const a=nj(s);A1(t,r,a,t.type_),gY(s)}}else Wa(i)&&ij(i,e,n)})),t}function Gwe(t,e){const n=MP(t),r={type_:n?1:0,scope_:e?e.scope_:mY(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,s=sj;n&&(i=[r],s=Ob);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,[o,r]}var sj={get(t,e){if(e===mi)return t;const n=cl(t);if(!SU(n,e,t.type_))return Kwe(t,n,e);const r=n[e];if(t.finalized_||!Wa(r))return r;if(r===lk(t.base_,e)){ZE(t);const i=t.type_===1?+e:e,s=uM(t.scope_,r,t,i);return t.copy_[i]=s}return r},has(t,e){return e in cl(t)},ownKeys(t){return Reflect.ownKeys(cl(t))},set(t,e,n){const r=bY(cl(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=lk(cl(t),e),s=i==null?void 0:i[mi];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(jwe(n,i)&&(n!==void 0||SU(t.base_,e,t.type_)))return!0;ZE(t),cM(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),Wwe(t,e,n)),!0},deleteProperty(t,e){return ZE(t),lk(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),cM(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=cl(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[JE]:!0,[rM]:t.type_!==1||e!=="length",[x1]:r[x1],[kb]:n[e]}},defineProperty(){Oa(11)},getPrototypeOf(t){return _y(t.base_)},setPrototypeOf(){Oa(12)}},Ob={};hx(sj,(t,e)=>{Ob[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}});Ob.deleteProperty=function(t,e){return Ob.set.call(this,t,e,void 0)};Ob.set=function(t,e,n){return sj.set.call(this,t[0],e,n,t[0])};function lk(t,e){const n=t[mi];return(n?cl(n):t)[e]}function Kwe(t,e,n){var i;const r=bY(e,n);return r?kb in r?r[kb]:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function bY(t,e){if(!(e in t))return;let n=_y(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=_y(n)}}function cM(t){t.modified_||(t.modified_=!0,t.parent_&&cM(t.parent_))}function ZE(t){t.copy_||(t.assigned_=new Map,t.copy_=sM(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var qwe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(zp(n)&&!zp(r)){const a=r;r=n;const o=this;return function(c=a,...u){return o.produce(c,d=>r.call(this,d,...u))}}zp(r)||Oa(6),i!==void 0&&!zp(i)&&Oa(7);let s;if(Wa(n)){const a=PU(this),o=uM(a,n,void 0);let l=!0;try{s=r(o),l=!1}finally{l?oM(a):lM(a)}return TU(a,i),CU(s,a)}else if(!n||!tj(n)){if(s=r(n),s===void 0&&(s=n),s===dY&&(s=void 0),this.autoFreeze_&&rj(s,!0),i){const a=[],o=[];xy(aM).generateReplacementPatches_(n,s,{patches_:a,inversePatches_:o}),i(a,o)}return s}else Oa(1,n)},this.produceWithPatches=(n,r)=>{if(zp(n))return(o,...l)=>this.produceWithPatches(o,c=>n(c,...l));let i,s;return[this.produce(n,r,(o,l)=>{i=o,s=l}),i,s]},ok(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),ok(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),ok(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Wa(e)||Oa(8),vc(e)&&(e=Ba(e));const n=PU(this),r=uM(n,e,void 0);return r[mi].isManual_=!0,lM(n),r}finishDraft(e,n){const r=e&&e[mi];(!r||!r.isManual_)&&Oa(9);const{scope_:i}=r;return TU(i,n),CU(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const s=n[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(n=n.slice(r+1));const i=xy(aM).applyPatches_;return vc(e)?i(e,n):this.produce(e,s=>i(s,n))}};function uM(t,e,n,r){const[i,s]=NP(e)?xy(E1).proxyMap_(e,n):LP(e)?xy(E1).proxySet_(e,n):Gwe(e,n);return((n==null?void 0:n.scope_)??mY()).drafts_.push(i),s.callbacks_=(n==null?void 0:n.callbacks_)??[],s.key_=r,n&&r!==void 0?Hwe(n,s,r):s.callbacks_.push(function(l){var u;(u=l.mapSetPlugin_)==null||u.fixSetContents(s);const{patchPlugin_:c}=l;s.modified_&&c&&c.generatePatches_(s,[],l)}),i}function Ba(t){return vc(t)||Oa(10,t),wY(t)}function wY(t){if(!Wa(t)||jP(t))return t;const e=t[mi];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=sM(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=sM(t,!0);return hx(n,(i,s)=>{A1(n,i,wY(s))},r),e&&(e.finalized_=!1),n}var Xwe=new qwe,_Y=Xwe.produce;function xY(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var Ywe=xY(),Qwe=xY,Jwe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?w1:w1.apply(null,arguments)};function la(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(vs(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>hY(r)&&r.type===t,n}var AY=class p0 extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,p0.prototype)}static get[Symbol.species](){return p0}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new p0(...e[0].concat(this)):new p0(...e.concat(this))}};function kU(t){return Wa(t)?_Y(t,()=>{}):t}function kA(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function Zwe(t){return typeof t=="boolean"}var e_e=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let a=new AY;return n&&(Zwe(n)?a.push(Ywe):a.push(Qwe(n.extraArgument))),a},EY="RTK_autoBatch",jt=()=>t=>({payload:t,meta:{[EY]:!0}}),RU=t=>e=>{setTimeout(e,t)},SY=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,a=!1;const o=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:RU(10):t.type==="callback"?t.queueNotification:RU(t.timeout),c=()=>{a=!1,s&&(s=!1,o.forEach(u=>u()))};return Object.assign({},r,{subscribe(u){const d=()=>i&&u(),f=r.subscribe(d);return o.add(u),()=>{f(),o.delete(u)}},dispatch(u){var d;try{return i=!((d=u==null?void 0:u.meta)!=null&&d[EY]),s=!i,s&&(a||(a=!0,l(c))),r.dispatch(u)}finally{i=!0}}})},t_e=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new AY(t);return r&&i.push(SY(typeof r=="object"?r:void 0)),i};function n_e(t){const e=e_e(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:a=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(ej(n))o=uY(n);else throw new Error(vs(1));let l;typeof r=="function"?l=r(e):l=e();let c=w1;i&&(c=Jwe({trace:!1,...typeof i=="object"&&i}));const u=Nwe(...l),d=t_e(u);let f=typeof a=="function"?a(d):d();const p=c(...f);return cY(o,s,p)}function TY(t){const e={},n=[];let r;const i={addCase(s,a){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(vs(28));if(o in e)throw new Error(vs(29));return e[o]=a,i},addAsyncThunk(s,a){return a.pending&&(e[s.pending.type]=a.pending),a.rejected&&(e[s.rejected.type]=a.rejected),a.fulfilled&&(e[s.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:s.settled,reducer:a.settled}),i},addMatcher(s,a){return n.push({matcher:s,reducer:a}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function r_e(t){return typeof t=="function"}function i_e(t,e){let[n,r,i]=TY(e),s;if(r_e(t))s=()=>kU(t());else{const o=kU(t);s=()=>o}function a(o=s(),l){let c=[n[l.type],...r.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[i]),c.reduce((u,d)=>{if(d)if(vc(u)){const p=d(u,l);return p===void 0?u:p}else{if(Wa(u))return _Y(u,f=>d(f,l));{const f=d(u,l);if(f===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return u},o)}return a.getInitialState=s,a}var s_e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",a_e=(t=21)=>{let e="",n=t;for(;n--;)e+=s_e[Math.random()*64|0];return e},o_e=Symbol.for("rtk-slice-createasyncthunk");function l_e(t,e){return`${t}/${e}`}function c_e({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[o_e];return function(i){const{name:s,reducerPath:a=s}=i;if(!s)throw new Error(vs(11));const o=(typeof i.reducers=="function"?i.reducers(h_e()):i.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(T,P){const O=typeof T=="string"?T:T.type;if(!O)throw new Error(vs(12));if(O in c.sliceCaseReducersByType)throw new Error(vs(13));return c.sliceCaseReducersByType[O]=P,u},addMatcher(T,P){return c.sliceMatchers.push({matcher:T,reducer:P}),u},exposeAction(T,P){return c.actionCreators[T]=P,u},exposeCaseReducer(T,P){return c.sliceCaseReducersByName[T]=P,u}};l.forEach(T=>{const P=o[T],O={reducerName:T,type:l_e(s,T),createNotation:typeof i.reducers=="function"};f_e(P)?m_e(O,P,u,e):d_e(O,P,u)});function d(){const[T={},P=[],O=void 0]=typeof i.extraReducers=="function"?TY(i.extraReducers):[i.extraReducers],C={...T,...c.sliceCaseReducersByType};return i_e(i.initialState,I=>{for(let M in C)I.addCase(M,C[M]);for(let M of c.sliceMatchers)I.addMatcher(M.matcher,M.reducer);for(let M of P)I.addMatcher(M.matcher,M.reducer);O&&I.addDefaultCase(O)})}const f=T=>T,p=new Map,g=new WeakMap;let y;function v(T,P){return y||(y=d()),y(T,P)}function b(){return y||(y=d()),y.getInitialState()}function _(T,P=!1){function O(I){let M=I[T];return typeof M>"u"&&P&&(M=kA(g,O,b)),M}function C(I=f){const M=kA(p,P,()=>new WeakMap);return kA(M,I,()=>{const L={};for(const[N,F]of Object.entries(i.selectors??{}))L[N]=u_e(F,I,()=>kA(g,I,b),P);return L})}return{reducerPath:T,getSelectors:C,get selectors(){return C(O)},selectSlice:O}}const w={name:s,reducer:v,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:b,..._(a),injectInto(T,{reducerPath:P,...O}={}){const C=P??a;return T.inject({reducerPath:C,reducer:v},O),{...w,..._(C,!0)}}};return w}}function u_e(t,e,n,r){function i(s,...a){let o=e(s);return typeof o>"u"&&r&&(o=n()),t(o,...a)}return i.unwrapped=t,i}var Bi=c_e();function h_e(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function d_e({type:t,reducerName:e,createNotation:n},r,i){let s,a;if("reducer"in r){if(n&&!p_e(r))throw new Error(vs(17));s=r.reducer,a=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,a?la(t,a):la(t))}function f_e(t){return t._reducerDefinitionType==="asyncThunk"}function p_e(t){return t._reducerDefinitionType==="reducerWithPrepare"}function m_e({type:t,reducerName:e},n,r,i){if(!i)throw new Error(vs(18));const{payloadCreator:s,fulfilled:a,pending:o,rejected:l,settled:c,options:u}=n,d=i(t,s,u);r.exposeAction(e,d),a&&r.addCase(d.fulfilled,a),o&&r.addCase(d.pending,o),l&&r.addCase(d.rejected,l),c&&r.addMatcher(d.settled,c),r.exposeCaseReducer(e,{fulfilled:a||RA,pending:o||RA,rejected:l||RA,settled:c||RA})}function RA(){}var g_e="task",PY="listener",CY="completed",aj="cancelled",y_e=`task-${aj}`,v_e=`task-${CY}`,hM=`${PY}-${aj}`,b_e=`${PY}-${CY}`,VP=class{constructor(t){Y(this,"name","TaskAbortError");Y(this,"message");this.code=t,this.message=`${g_e} ${aj} (reason: ${t})`}},oj=(t,e)=>{if(typeof t!="function")throw new TypeError(vs(32))},S1=()=>{},IY=(t,e=S1)=>(t.catch(e),t),kY=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Vf=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},Bf=t=>{if(t.aborted){const{reason:e}=t;throw new VP(e)}};function RY(t,e){let n=S1;return new Promise((r,i)=>{const s=()=>i(new VP(t.reason));if(t.aborted){s();return}n=kY(t,s),e.finally(()=>n()).then(r,i)}).finally(()=>{n=S1})}var w_e=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof VP?"cancelled":"rejected",error:n}}finally{e==null||e()}},T1=t=>e=>IY(RY(t,e).then(n=>(Bf(t),n))),OY=t=>{const e=T1(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Im}=Object,OU={},BP="listenerMiddleware",__e=(t,e)=>{const n=r=>kY(t,()=>Vf(r,t.reason));return(r,i)=>{oj(r);const s=new AbortController;n(s);const a=w_e(async()=>{Bf(t),Bf(s.signal);const o=await r({pause:T1(s.signal),delay:OY(s.signal),signal:s.signal});return Bf(s.signal),o},()=>Vf(s,v_e));return i!=null&&i.autoJoin&&e.push(a.catch(S1)),{result:T1(t)(a),cancel(){Vf(s,y_e)}}}},x_e=(t,e)=>{const n=async(r,i)=>{Bf(e);let s=()=>{};const o=[new Promise((l,c)=>{let u=t({predicate:r,effect:(d,f)=>{f.unsubscribe(),l([d,f.getState(),f.getOriginalState()])}});s=()=>{u(),c()}})];i!=null&&o.push(new Promise(l=>setTimeout(l,i,null)));try{const l=await RY(e,Promise.race(o));return Bf(e),l}finally{s()}};return(r,i)=>IY(n(r,i))},DY=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:s}=t;if(e)i=la(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(vs(21));return oj(s),{predicate:i,type:e,effect:s}},MY=Im(t=>{const{type:e,predicate:n,effect:r}=DY(t);return{id:a_e(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(vs(22))}}},{withTypes:()=>MY}),DU=(t,e)=>{const{type:n,effect:r,predicate:i}=DY(e);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},dM=t=>{t.pending.forEach(e=>{Vf(e,hM)})},A_e=(t,e)=>()=>{for(const n of e.keys())dM(n);t.clear()},MU=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},NY=Im(la(`${BP}/add`),{withTypes:()=>NY}),E_e=la(`${BP}/removeAll`),LY=Im(la(`${BP}/remove`),{withTypes:()=>LY}),S_e=(...t)=>{console.error(`${BP}/error`,...t)},fx=(t={})=>{const e=new Map,n=new Map,r=p=>{const g=n.get(p)??0;n.set(p,g+1)},i=p=>{const g=n.get(p)??1;g===1?n.delete(p):n.set(p,g-1)},{extra:s,onError:a=S_e}=t;oj(a);const o=p=>(p.unsubscribe=()=>e.delete(p.id),e.set(p.id,p),g=>{p.unsubscribe(),g!=null&&g.cancelActive&&dM(p)}),l=p=>{const g=DU(e,p)??MY(p);return o(g)};Im(l,{withTypes:()=>l});const c=p=>{const g=DU(e,p);return g&&(g.unsubscribe(),p.cancelActive&&dM(g)),!!g};Im(c,{withTypes:()=>c});const u=async(p,g,y,v)=>{const b=new AbortController,_=x_e(l,b.signal),w=[];try{p.pending.add(b),r(p),await Promise.resolve(p.effect(g,Im({},y,{getOriginalState:v,condition:(T,P)=>_(T,P).then(Boolean),take:_,delay:OY(b.signal),pause:T1(b.signal),extra:s,signal:b.signal,fork:__e(b.signal,w),unsubscribe:p.unsubscribe,subscribe:()=>{e.set(p.id,p)},cancelActiveListeners:()=>{p.pending.forEach((T,P,O)=>{T!==b&&(Vf(T,hM),O.delete(T))})},cancel:()=>{Vf(b,hM),p.pending.delete(b)},throwIfCancelled:()=>{Bf(b.signal)}})))}catch(T){T instanceof VP||MU(a,T,{raisedBy:"effect"})}finally{await Promise.all(w),Vf(b,b_e),i(p),p.pending.delete(b)}},d=A_e(e,n);return{middleware:p=>g=>y=>{if(!hY(y))return g(y);if(NY.match(y))return l(y.payload);if(E_e.match(y)){d();return}if(LY.match(y))return c(y.payload);let v=p.getState();const b=()=>{if(v===OU)throw new Error(vs(23));return v};let _;try{if(_=g(y),e.size>0){const w=p.getState(),T=Array.from(e.values());for(const P of T){let O=!1;try{O=P.predicate(y,w,v)}catch(C){O=!1,MU(a,C,{raisedBy:"predicate"})}O&&u(P,y,p,b)}}}finally{v=OU}return _},startListening:l,stopListening:c,clearListeners:d}};function vs(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var T_e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},jY=Bi({name:"chartLayout",initialState:T_e,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,s;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:P_e,setLayout:C_e,setChartSize:I_e,setScale:k_e}=jY.actions,R_e=jY.reducer;function FY(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function NU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function um(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NU(Object(n),!0).forEach(function(r){O_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function O_e(t,e,n){return(e=D_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D_e(t){var e=M_e(t,"string");return typeof e=="symbol"?e:e+""}function M_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sn(t,e,n){return Vt(t)||Vt(e)?n:Xo(e)?by(t,e,n):typeof e=="function"?e(t):n}var N_e=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:s,verticalAlign:a,layout:o}=e;if((o==="vertical"||o==="horizontal"&&a==="middle")&&s!=="center"&&me(t[s]))return um(um({},t),{},{[s]:t[s]+(r||0)});if((o==="horizontal"||o==="vertical"&&s==="center")&&a!=="middle"&&me(t[a]))return um(um({},t),{},{[a]:t[a]+(i||0)})}return t},Fh=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",VY=(t,e,n,r)=>{if(r)return t.map(o=>o.coordinate);var i,s,a=t.map(o=>(o.coordinate===e&&(i=!0),o.coordinate===n&&(s=!0),o.coordinate));return i||a.push(e),s||a.push(n),a},BY=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:s,scale:a,realScaleType:o,isCategorical:l,categoricalDomain:c,tickCount:u,ticks:d,niceTicks:f,axisType:p}=t;if(!a)return null;var g=o==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,y=i==="category"&&a.bandwidth?a.bandwidth()/g:0;if(y=p==="angleAxis"&&s&&s.length>=2?Js(s[0]-s[1])*2*y:y,d||f){var v=(d||f||[]).map((b,_)=>{var w=r?r.indexOf(b):b;return{coordinate:a(w)+y,value:b,offset:y,index:_}});return v.filter(b=>!qo(b.coordinate))}return l&&c?c.map((b,_)=>({coordinate:a(b)+y,value:b,index:_,offset:y})):a.ticks&&u!=null?a.ticks(u).map((b,_)=>({coordinate:a(b)+y,value:b,offset:y,index:_})):a.domain().map((b,_)=>({coordinate:a(b)+y,value:r?r[b]:b,index:_,offset:y}))},LU=1e-4,L_e=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-LU,s=Math.max(r[0],r[1])+LU,a=t(e[0]),o=t(e[n-1]);(a<i||a>s||o<i||o>s)&&t.domain([e[0],e[n-1]])}},j_e=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,s=0,a=0;a<e;++a){var o=qo(t[a][n][1])?t[a][n][0]:t[a][n][1];o>=0?(t[a][n][0]=i,t[a][n][1]=i+o,i=t[a][n][1]):(t[a][n][0]=s,t[a][n][1]=s+o,s=t[a][n][1])}},F_e=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,s=0;s<e;++s){var a=qo(t[s][n][1])?t[s][n][0]:t[s][n][1];a>=0?(t[s][n][0]=i,t[s][n][1]=i+a,i=t[s][n][1]):(t[s][n][0]=0,t[s][n][1]=0)}},V_e={sign:j_e,expand:ybe,none:vy,silhouette:vbe,wiggle:bbe,positive:F_e},B_e=(t,e,n)=>{var r=V_e[n],i=gbe().keys(e).value((s,a)=>Number(Sn(s,a,0))).order(tM).offset(r);return i(t)};function P1(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:s,dataKey:a}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Vt(i[e.dataKey])){var o=kX(n,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var l=Sn(i,Vt(a)?e.dataKey:a);return Vt(l)?null:e.scale(l)}var $_e=t=>{var e=t.flat(2).filter(me);return[Math.min(...e),Math.max(...e)]},U_e=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],z_e=(t,e,n)=>{if(t!=null)return U_e(Object.keys(t).reduce((r,i)=>{var s=t[i],{stackedData:a}=s,o=a.reduce((l,c)=>{var u=FY(c,e,n),d=$_e(u);return[Math.min(l[0],d[0]),Math.max(l[1],d[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},jU=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,FU=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,C1=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=OP(e,u=>u.coordinate),s=1/0,a=1,o=i.length;a<o;a++){var l=i[a],c=i[a-1];s=Math.min((l.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0};function VU(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:s}=t;return um(um({},e),{},{dataKey:n,payload:r,value:i,name:s})}function $P(t,e){if(t)return String(t);if(typeof e=="string")return e}var H_e=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},W_e=(t,e)=>e==="centric"?t.angle:t.radius,Pc=t=>t.layout.width,Cc=t=>t.layout.height,G_e=t=>t.layout.scale,$Y=t=>t.layout.margin,UP=z(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),zP=z(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),UY="data-recharts-item-index",zY="data-recharts-item-data-key",px=60;function BU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BU(Object(n),!0).forEach(function(r){K_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function K_e(t,e,n){return(e=q_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q_e(t){var e=X_e(t,"string");return typeof e=="symbol"?e:e+""}function X_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Y_e=t=>t.brush.height;function Q_e(t){var e=zP(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:px;return n+i}return n},0)}function J_e(t){var e=zP(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:px;return n+i}return n},0)}function Z_e(t){var e=UP(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function exe(t){var e=UP(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var kr=z([Pc,Cc,$Y,Y_e,Q_e,J_e,Z_e,exe,oY,Cwe],(t,e,n,r,i,s,a,o,l,c)=>{var u={left:(n.left||0)+i,right:(n.right||0)+s},d={top:(n.top||0)+a,bottom:(n.bottom||0)+o},f=OA(OA({},d),u),p=f.bottom;f.bottom+=r,f=N_e(f,l,c);var g=t-f.left-f.right,y=e-f.top-f.bottom;return OA(OA({brushBottom:p},f),{},{width:Math.max(g,0),height:Math.max(y,0)})}),txe=z(kr,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),HY=z(Pc,Cc,(t,e)=>({x:0,y:0,width:t,height:e})),nxe=x.createContext(null),Qr=()=>x.useContext(nxe)!=null,HP=t=>t.brush,WP=z([HP,kr,$Y],(t,e,n)=>({height:t.height,x:me(t.x)?t.x:e.left,y:me(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:me(t.width)?t.width:e.width})),WY={},GY={},KY={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:s}={}){let a,o=null;const l=s!=null&&s.includes("leading"),c=s==null||s.includes("trailing"),u=()=>{o!==null&&(n.apply(a,o),a=void 0,o=null)},d=()=>{c&&u(),y()};let f=null;const p=()=>{f!=null&&clearTimeout(f),f=setTimeout(()=>{f=null,d()},r)},g=()=>{f!==null&&(clearTimeout(f),f=null)},y=()=>{g(),a=void 0,o=null},v=()=>{u()},b=function(..._){if(i!=null&&i.aborted)return;a=this,o=_;const w=f==null;p(),l&&w&&u()};return b.schedule=p,b.cancel=y,b.flush=v,i==null||i.addEventListener("abort",y,{once:!0}),b}t.debounce=e})(KY);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KY;function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:a=!1,trailing:o=!0,maxWait:l}=s,c=Array(2);a&&(c[0]="leading"),o&&(c[1]="trailing");let u,d=null;const f=e.debounce(function(...y){u=r.apply(this,y),d=null},i,{edges:c}),p=function(...y){return l!=null&&(d===null&&(d=Date.now()),Date.now()-d>=l)?(u=r.apply(this,y),d=Date.now(),f.cancel(),f.schedule(),u):(f.apply(this,y),u)},g=()=>(f.flush(),u);return p.cancel=f.cancel,p.flush=g,p}t.debounce=n})(GY);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GY;function n(r,i=0,s={}){const{leading:a=!0,trailing:o=!0}=s;return e.debounce(r,i,{leading:a,maxWait:i,trailing:o})}t.throttle=n})(WY);var rxe=WY.throttle;const ixe=Sc(rxe);var I1=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;console.warn(n.replace(/%s/g,()=>i[a++]))}},qY=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:s,maxHeight:a}=n,o=yc(r)?t:Number(r),l=yc(i)?e:Number(i);return s&&s>0&&(o?l=o/s:l&&(o=l*s),a&&l!=null&&l>a&&(l=a)),{calculatedWidth:o,calculatedHeight:l}},sxe={width:0,height:0,overflow:"visible"},axe={width:0,overflowX:"visible"},oxe={height:0,overflowY:"visible"},lxe={},cxe=t=>{var{width:e,height:n}=t,r=yc(e),i=yc(n);return r&&i?sxe:r?axe:i?oxe:lxe};function uxe(t){var{width:e,height:n,aspect:r}=t,i=e,s=n;return i===void 0&&s===void 0?(i="100%",s="100%"):i===void 0?i=r&&r>0?void 0:"100%":s===void 0&&(s=r&&r>0?void 0:"100%"),{width:i,height:s}}function sr(t){return Number.isFinite(t)}function Yo(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function fM(){return fM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fM.apply(null,arguments)}function $U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$U(Object(n),!0).forEach(function(r){hxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$U(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hxe(t,e,n){return(e=dxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dxe(t){var e=fxe(t,"string");return typeof e=="symbol"?e:e+""}function fxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var XY=x.createContext({width:-1,height:-1});function pxe(t){return Yo(t.width)&&Yo(t.height)}function YY(t){var{children:e,width:n,height:r}=t,i=x.useMemo(()=>({width:n,height:r}),[n,r]);return pxe(i)?x.createElement(XY.Provider,{value:i},e):null}var lj=()=>x.useContext(XY),mxe=x.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:s,minWidth:a=0,minHeight:o,maxHeight:l,children:c,debounce:u=0,id:d,className:f,onResize:p,style:g={}}=t,y=x.useRef(null),v=x.useRef();v.current=p,x.useImperativeHandle(e,()=>y.current);var[b,_]=x.useState({containerWidth:r.width,containerHeight:r.height}),w=x.useCallback((I,M)=>{_(L=>{var N=Math.round(I),F=Math.round(M);return L.containerWidth===N&&L.containerHeight===F?L:{containerWidth:N,containerHeight:F}})},[]);x.useEffect(()=>{if(y.current==null||typeof ResizeObserver>"u")return ux;var I=F=>{var j,{width:K,height:te}=F[0].contentRect;w(K,te),(j=v.current)===null||j===void 0||j.call(v,K,te)};u>0&&(I=ixe(I,u,{trailing:!0,leading:!1}));var M=new ResizeObserver(I),{width:L,height:N}=y.current.getBoundingClientRect();return w(L,N),M.observe(y.current),()=>{M.disconnect()}},[w,u]);var{containerWidth:T,containerHeight:P}=b;I1(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:O,calculatedHeight:C}=qY(T,P,{width:i,height:s,aspect:n,maxHeight:l});return I1(O!=null&&O>0||C!=null&&C>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,O,C,i,s,a,o,n),x.createElement("div",{id:d?"".concat(d):void 0,className:it("recharts-responsive-container",f),style:UU(UU({},g),{},{width:i,height:s,minWidth:a,minHeight:o,maxHeight:l}),ref:y},x.createElement("div",{style:cxe({width:i,height:s})},x.createElement(YY,{width:O,height:C},c)))}),qh=x.forwardRef((t,e)=>{var n=lj();if(Yo(n.width)&&Yo(n.height))return t.children;var{width:r,height:i}=uxe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:a}=qY(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return me(s)&&me(a)?x.createElement(YY,{width:s,height:a},t.children):x.createElement(mxe,fM({},t,{width:r,height:i,ref:e}))});function QY(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var mx=()=>{var t,e=Qr(),n=pe(txe),r=pe(WP),i=(t=pe(HP))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},gxe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},JY=()=>{var t;return(t=pe(kr))!==null&&t!==void 0?t:gxe},cj=()=>pe(Pc),uj=()=>pe(Cc),yxe=()=>pe(t=>t.layout.margin),Dt=t=>t.layout.layoutType,GP=()=>pe(Dt),vxe=()=>{var t=GP();return t!==void 0},KP=t=>{var e=Yt(),n=Qr(),{width:r,height:i}=t,s=lj(),a=r,o=i;return s&&(a=s.width>0?s.width:r,o=s.height>0?s.height:i),x.useEffect(()=>{!n&&Yo(a)&&Yo(o)&&e(I_e({width:a,height:o}))},[e,n,a,o]),null},ZY=Symbol.for("immer-nothing"),zU=Symbol.for("immer-draftable"),xs=Symbol.for("immer-state");function Da(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Db=Object.getPrototypeOf;function Ay(t){return!!t&&!!t[xs]}function rp(t){var e;return t?eQ(t)||Array.isArray(t)||!!t[zU]||!!((e=t.constructor)!=null&&e[zU])||gx(t)||XP(t):!1}var bxe=Object.prototype.constructor.toString(),HU=new WeakMap;function eQ(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=HU.get(n);return r===void 0&&(r=Function.toString.call(n),HU.set(n,r)),r===bxe}function k1(t,e,n=!0){qP(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function qP(t){const e=t[xs];return e?e.type_:Array.isArray(t)?1:gx(t)?2:XP(t)?3:0}function pM(t,e){return qP(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function tQ(t,e,n){const r=qP(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function wxe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function gx(t){return t instanceof Map}function XP(t){return t instanceof Set}function id(t){return t.copy_||t.base_}function mM(t,e){if(gx(t))return new Map(t);if(XP(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=eQ(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[xs];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[a]})}return Object.create(Db(t),r)}else{const r=Db(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function hj(t,e=!1){return YP(t)||Ay(t)||!rp(t)||(qP(t)>1&&Object.defineProperties(t,{set:DA,add:DA,clear:DA,delete:DA}),Object.freeze(t),e&&Object.values(t).forEach(n=>hj(n,!0))),t}function _xe(){Da(2)}var DA={value:_xe};function YP(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var xxe={};function ip(t){const e=xxe[t];return e||Da(0,t),e}var Mb;function nQ(){return Mb}function Axe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function WU(t,e){e&&(ip("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function gM(t){yM(t),t.drafts_.forEach(Exe),t.drafts_=null}function yM(t){t===Mb&&(Mb=t.parent_)}function GU(t){return Mb=Axe(Mb,t)}function Exe(t){const e=t[xs];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function KU(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[xs].modified_&&(gM(e),Da(4)),rp(t)&&(t=R1(e,t),e.parent_||O1(e,t)),e.patches_&&ip("Patches").generateReplacementPatches_(n[xs].base_,t,e.patches_,e.inversePatches_)):t=R1(e,n,[]),gM(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==ZY?t:void 0}function R1(t,e,n){if(YP(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[xs];if(!i)return k1(e,(s,a)=>qU(t,i,e,s,a,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return O1(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let a=s,o=!1;i.type_===3&&(a=new Set(s),s.clear(),o=!0),k1(a,(l,c)=>qU(t,i,s,l,c,n,o),r),O1(t,s,!1),n&&t.patches_&&ip("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function qU(t,e,n,r,i,s,a){if(i==null||typeof i!="object"&&!a)return;const o=YP(i);if(!(o&&!a)){if(Ay(i)){const l=s&&e&&e.type_!==3&&!pM(e.assigned_,r)?s.concat(r):void 0,c=R1(t,i,l);if(tQ(n,r,c),Ay(c))t.canAutoFreeze_=!1;else return}else a&&n.add(i);if(rp(i)&&!o){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&o)return;R1(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(gx(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&O1(t,i)}}}function O1(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&hj(e,n)}function Sxe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:nQ(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=dj;n&&(i=[r],s=Nb);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,o}var dj={get(t,e){if(e===xs)return t;const n=id(t);if(!pM(n,e))return Txe(t,n,e);const r=n[e];return t.finalized_||!rp(r)?r:r===ck(t.base_,e)?(uk(t),t.copy_[e]=bM(r,t)):r},has(t,e){return e in id(t)},ownKeys(t){return Reflect.ownKeys(id(t))},set(t,e,n){const r=rQ(id(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=ck(id(t),e),s=i==null?void 0:i[xs];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(wxe(n,i)&&(n!==void 0||pM(t.base_,e)))return!0;uk(t),vM(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return ck(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,uk(t),vM(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=id(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Da(11)},getPrototypeOf(t){return Db(t.base_)},setPrototypeOf(){Da(12)}},Nb={};k1(dj,(t,e)=>{Nb[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Nb.deleteProperty=function(t,e){return Nb.set.call(this,t,e,void 0)};Nb.set=function(t,e,n){return dj.set.call(this,t[0],e,n,t[0])};function ck(t,e){const n=t[xs];return(n?id(n):t)[e]}function Txe(t,e,n){var i;const r=rQ(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function rQ(t,e){if(!(e in t))return;let n=Db(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Db(n)}}function vM(t){t.modified_||(t.modified_=!0,t.parent_&&vM(t.parent_))}function uk(t){t.copy_||(t.copy_=mM(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Pxe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const a=this;return function(l=s,...c){return a.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&Da(6),r!==void 0&&typeof r!="function"&&Da(7);let i;if(rp(e)){const s=GU(this),a=bM(e,void 0);let o=!0;try{i=n(a),o=!1}finally{o?gM(s):yM(s)}return WU(s,r),KU(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===ZY&&(i=void 0),this.autoFreeze_&&hj(i,!0),r){const s=[],a=[];ip("Patches").generateReplacementPatches_(e,i,s,a),r(s,a)}return i}else Da(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(a,...o)=>this.produceWithPatches(a,l=>e(l,...o));let r,i;return[this.produce(e,n,(a,o)=>{r=a,i=o}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){rp(t)||Da(8),Ay(t)&&(t=Cxe(t));const e=GU(this),n=bM(t,void 0);return n[xs].isManual_=!0,yM(e),n}finishDraft(t,e){const n=t&&t[xs];(!n||!n.isManual_)&&Da(9);const{scope_:r}=n;return WU(r,e),KU(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=ip("Patches").applyPatches_;return Ay(t)?r(t,e):this.produce(t,i=>r(i,e))}};function bM(t,e){const n=gx(t)?ip("MapSet").proxyMap_(t,e):XP(t)?ip("MapSet").proxySet_(t,e):Sxe(t,e);return(e?e.scope_:nQ()).drafts_.push(n),n}function Cxe(t){return Ay(t)||Da(10,t),iQ(t)}function iQ(t){if(!rp(t)||YP(t))return t;const e=t[xs];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=mM(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=mM(t,!0);return k1(n,(i,s)=>{tQ(n,i,iQ(s))},r),e&&(e.finalized_=!1),n}var Ixe=new Pxe;Ixe.produce;var kxe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},sQ=Bi({name:"legend",initialState:kxe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:jt()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Ba(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:jt()},removeLegendPayload:{reducer(t,e){var n=Ba(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:jt()}}}),{setLegendSize:XU,setLegendSettings:Rxe,addLegendPayload:Oxe,replaceLegendPayload:Dxe,removeLegendPayload:Mxe}=sQ.actions,Nxe=sQ.reducer,Lxe=["contextPayload"];function wM(){return wM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wM.apply(null,arguments)}function YU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ey(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YU(Object(n),!0).forEach(function(r){jxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jxe(t,e,n){return(e=Fxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fxe(t){var e=Vxe(t,"string");return typeof e=="symbol"?e:e+""}function Vxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bxe(t,e){if(t==null)return{};var n,r,i=$xe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function $xe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Uxe(t){return t.value}function zxe(t){var{contextPayload:e}=t,n=Bxe(t,Lxe),r=YX(e,t.payloadUniqBy,Uxe),i=Ey(Ey({},n),{},{payload:r});return x.isValidElement(t.content)?x.cloneElement(t.content,i):typeof t.content=="function"?x.createElement(t.content,i):x.createElement(Kbe,i)}function Hxe(t,e,n,r,i,s){var{layout:a,align:o,verticalAlign:l}=e,c,u;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(o==="center"&&a==="vertical"?c={left:((r||0)-s.width)/2}:c=o==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(l==="middle"?u={top:((i||0)-s.height)/2}:u=l==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Ey(Ey({},c),u)}function Wxe(t){var e=Yt();return x.useEffect(()=>{e(Rxe(t))},[e,t]),null}function Gxe(t){var e=Yt();return x.useEffect(()=>(e(XU(t)),()=>{e(XU({width:0,height:0}))}),[e,t]),null}function Kxe(t,e,n,r){return t==="vertical"&&me(e)?{height:e}:t==="horizontal"?{width:n||r}:null}var qxe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function eS(t){var e=ar(t,qxe),n=Rwe(),r=B0e(),i=yxe(),{width:s,height:a,wrapperStyle:o,portal:l}=e,[c,u]=lY([n]),d=cj(),f=uj();if(d==null||f==null)return null;var p=d-((i==null?void 0:i.left)||0)-((i==null?void 0:i.right)||0),g=Kxe(e.layout,a,s,p),y=l?o:Ey(Ey({position:"absolute",width:(g==null?void 0:g.width)||s||"auto",height:(g==null?void 0:g.height)||a||"auto"},Hxe(o,e,i,d,f,c)),o),v=l??r;if(v==null||n==null)return null;var b=x.createElement("div",{className:"recharts-legend-wrapper",style:y,ref:u},x.createElement(Wxe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!l&&x.createElement(Gxe,{width:c.width,height:c.height}),x.createElement(zxe,wM({},e,g,{margin:i,chartWidth:d,chartHeight:f,contextPayload:n})));return $T.createPortal(b,v)}eS.displayName="Legend";function _M(){return _M=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_M.apply(null,arguments)}function QU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QU(Object(n),!0).forEach(function(r){Xxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xxe(t,e,n){return(e=Yxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yxe(t){var e=Qxe(t,"string");return typeof e=="symbol"?e:e+""}function Qxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jxe(t){return Array.isArray(t)&&Xo(t[0])&&Xo(t[1])?t.join(" ~ "):t}var Zxe=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:a,itemSorter:o,wrapperClassName:l,labelClassName:c,label:u,labelFormatter:d,accessibilityLayer:f=!1}=t,p=()=>{if(s&&s.length){var P={padding:0,margin:0},O=(o?OP(s,o):s).map((C,I)=>{if(C.type==="none")return null;var M=C.formatter||a||Jxe,{value:L,name:N}=C,F=L,j=N;if(M){var K=M(L,N,C,I,s);if(Array.isArray(K))[F,j]=K;else if(K!=null)F=K;else return null}var te=hk({display:"block",paddingTop:4,paddingBottom:4,color:C.color||"#000"},r);return x.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:te},Xo(j)?x.createElement("span",{className:"recharts-tooltip-item-name"},j):null,Xo(j)?x.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,x.createElement("span",{className:"recharts-tooltip-item-value"},F),x.createElement("span",{className:"recharts-tooltip-item-unit"},C.unit||""))});return x.createElement("ul",{className:"recharts-tooltip-item-list",style:P},O)}return null},g=hk({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),y=hk({margin:0},i),v=!Vt(u),b=v?u:"",_=it("recharts-default-tooltip",l),w=it("recharts-tooltip-label",c);v&&d&&s!==void 0&&s!==null&&(b=d(u,s));var T=f?{role:"status","aria-live":"assertive"}:{};return x.createElement("div",_M({className:_,style:g},T),x.createElement("p",{className:w,style:y},x.isValidElement(b)?b:"".concat(b)),p())},Cv="recharts-tooltip-wrapper",eAe={visibility:"hidden"};function tAe(t){var{coordinate:e,translateX:n,translateY:r}=t;return it(Cv,{["".concat(Cv,"-right")]:me(n)&&e&&me(e.x)&&n>=e.x,["".concat(Cv,"-left")]:me(n)&&e&&me(e.x)&&n<e.x,["".concat(Cv,"-bottom")]:me(r)&&e&&me(e.y)&&r>=e.y,["".concat(Cv,"-top")]:me(r)&&e&&me(e.y)&&r<e.y})}function JU(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:a,tooltipDimension:o,viewBox:l,viewBoxDimension:c}=t;if(s&&me(s[r]))return s[r];var u=n[r]-o-(i>0?i:0),d=n[r]+i;if(e[r])return a[r]?u:d;var f=l[r];if(f==null)return 0;if(a[r]){var p=u,g=f;return p<g?Math.max(d,f):Math.max(u,f)}if(c==null)return 0;var y=d+o,v=f+c;return y>v?Math.max(u,f):Math.max(d,f)}function nAe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function rAe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:a,useTranslate3d:o,viewBox:l}=t,c,u,d;return a.height>0&&a.width>0&&n?(u=JU({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),d=JU({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),c=nAe({translateX:u,translateY:d,useTranslate3d:o})):c=eAe,{cssProperties:c,cssClasses:tAe({translateX:u,translateY:d,coordinate:n})}}function ZU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function MA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZU(Object(n),!0).forEach(function(r){xM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xM(t,e,n){return(e=iAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iAe(t){var e=sAe(t,"string");return typeof e=="symbol"?e:e+""}function sAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class aAe extends x.PureComponent{constructor(){super(...arguments),xM(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),xM(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:a,hasPayload:o,isAnimationActive:l,offset:c,position:u,reverseDirection:d,useTranslate3d:f,viewBox:p,wrapperStyle:g,lastBoundingBox:y,innerRef:v,hasPortalFromProps:b}=this.props,{cssClasses:_,cssProperties:w}=rAe({allowEscapeViewBox:n,coordinate:a,offsetTopLeft:c,position:u,reverseDirection:d,tooltipBox:{height:y.height,width:y.width},useTranslate3d:f,viewBox:p}),T=b?{}:MA(MA({transition:l&&e?"transform ".concat(r,"ms ").concat(i):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),P=MA(MA({},T),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},g);return x.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:_,style:P,ref:v},s)}}var aQ=()=>{var t;return(t=pe(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function AM(){return AM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AM.apply(null,arguments)}function e6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function t6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e6(Object(n),!0).forEach(function(r){oAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oAe(t,e,n){return(e=lAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lAe(t){var e=cAe(t,"string");return typeof e=="symbol"?e:e+""}function cAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var n6={curveBasisClosed:sbe,curveBasisOpen:abe,curveBasis:ibe,curveBumpX:H0e,curveBumpY:W0e,curveLinearClosed:obe,curveLinear:EP,curveMonotoneX:lbe,curveMonotoneY:cbe,curveNatural:ube,curveStep:hbe,curveStepAfter:fbe,curveStepBefore:dbe},D1=t=>sr(t.x)&&sr(t.y),r6=t=>t.base!=null&&D1(t.base)&&D1(t),Iv=t=>t.x,kv=t=>t.y,uAe=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(cx(t));return(n==="curveMonotone"||n==="curveBump")&&e?n6["".concat(n).concat(e==="vertical"?"Y":"X")]:n6[n]||EP},hAe=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=t,a=uAe(e,i),o=s?n.filter(D1):n,l;if(Array.isArray(r)){var c=n.map((p,g)=>t6(t6({},p),{},{base:r[g]}));i==="vertical"?l=TA().y(kv).x1(Iv).x0(p=>p.base.x):l=TA().x(Iv).y1(kv).y0(p=>p.base.y);var u=l.defined(r6).curve(a),d=s?c.filter(r6):c;return u(d)}i==="vertical"&&me(r)?l=TA().y(kv).x1(Iv).x0(r):me(r)?l=TA().x(Iv).y1(kv).y0(r):l=gX().x(Iv).y(kv);var f=l.defined(D1).curve(a);return f(o)},fj=t=>{var{className:e,points:n,path:r,pathRef:i}=t;if((!n||!n.length)&&!r)return null;var s=n&&n.length?hAe(t):r;return x.createElement("path",AM({},oa(t),BL(t),{className:it("recharts-curve",e),d:s===null?void 0:s,ref:i}))},dAe=["x","y","top","left","width","height","className"];function EM(){return EM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},EM.apply(null,arguments)}function i6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fAe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?i6(Object(n),!0).forEach(function(r){pAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pAe(t,e,n){return(e=mAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mAe(t){var e=gAe(t,"string");return typeof e=="symbol"?e:e+""}function gAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yAe(t,e){if(t==null)return{};var n,r,i=vAe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function vAe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var bAe=(t,e,n,r,i,s)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(s,",").concat(e,"h").concat(n),wAe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:s=0,height:a=0,className:o}=t,l=yAe(t,dAe),c=fAe({x:e,y:n,top:r,left:i,width:s,height:a},l);return!me(e)||!me(n)||!me(s)||!me(a)||!me(r)||!me(i)?null:x.createElement("path",EM({},pi(c),{className:it("recharts-cross",o),d:bAe(e,n,s,a,r,i)}))};function _Ae(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function s6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function a6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s6(Object(n),!0).forEach(function(r){xAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xAe(t,e,n){return(e=AAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AAe(t){var e=EAe(t,"string");return typeof e=="symbol"?e:e+""}function EAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SAe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),oQ=(t,e,n)=>t.map(r=>"".concat(SAe(r)," ").concat(e,"ms ").concat(n)).join(","),TAe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),Lb=(t,e)=>Object.keys(e).reduce((n,r)=>a6(a6({},n),{},{[r]:t(r,e[r])}),{});function o6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o6(Object(n),!0).forEach(function(r){PAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PAe(t,e,n){return(e=CAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CAe(t){var e=IAe(t,"string");return typeof e=="symbol"?e:e+""}function IAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var M1=(t,e,n)=>t+(e-t)*n,SM=t=>{var{from:e,to:n}=t;return e!==n},lQ=(t,e,n)=>{var r=Lb((i,s)=>{if(SM(s)){var[a,o]=t(s.from,s.to,s.velocity);return Nn(Nn({},s),{},{from:a,velocity:o})}return s},e);return n<1?Lb((i,s)=>SM(s)?Nn(Nn({},s),{},{velocity:M1(s.velocity,r[i].velocity,n),from:M1(s.from,r[i].from,n)}):s,e):lQ(t,r,n-1)};function kAe(t,e,n,r,i,s){var a,o=r.reduce((f,p)=>Nn(Nn({},f),{},{[p]:{from:t[p],velocity:0,to:e[p]}}),{}),l=()=>Lb((f,p)=>p.from,o),c=()=>!Object.values(o).filter(SM).length,u=null,d=f=>{a||(a=f);var p=f-a,g=p/n.dt;o=lQ(n,o,g),i(Nn(Nn(Nn({},t),e),l())),a=f,c()||(u=s.setTimeout(d))};return()=>(u=s.setTimeout(d),()=>{var f;(f=u)===null||f===void 0||f()})}function RAe(t,e,n,r,i,s,a){var o=null,l=i.reduce((d,f)=>Nn(Nn({},d),{},{[f]:[t[f],e[f]]}),{}),c,u=d=>{c||(c=d);var f=(d-c)/r,p=Lb((y,v)=>M1(...v,n(f)),l);if(s(Nn(Nn(Nn({},t),e),p)),f<1)o=a.setTimeout(u);else{var g=Lb((y,v)=>M1(...v,n(1)),l);s(Nn(Nn(Nn({},t),e),g))}};return()=>(o=a.setTimeout(u),()=>{var d;(d=o)===null||d===void 0||d()})}const OAe=(t,e,n,r,i,s)=>{var a=TAe(t,e);return n==null?()=>(i(Nn(Nn({},t),e)),()=>{}):n.isStepper===!0?kAe(t,e,n,a,i,s):RAe(t,e,n,r,a,i,s)};var N1=1e-4,cQ=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],uQ=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),l6=(t,e)=>n=>{var r=cQ(t,e);return uQ(r,n)},DAe=(t,e)=>n=>{var r=cQ(t,e),i=[...r.map((s,a)=>s*a).slice(1),0];return uQ(i,n)},MAe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,s=n[0].split("(");if(s[0]==="cubic-bezier"&&((i=s[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var a=s[1].split(")")[0].split(",").map(o=>parseFloat(o));return[a[0],a[1],a[2],a[3]]}}}return n.length===4?n:[0,0,1,1]},NAe=(t,e,n,r)=>{var i=l6(t,n),s=l6(e,r),a=DAe(t,n),o=c=>c>1?1:c<0?0:c,l=c=>{for(var u=c>1?1:c,d=u,f=0;f<8;++f){var p=i(d)-u,g=a(d);if(Math.abs(p-u)<N1||g<N1)return s(d);d=o(d-p/g)}return s(d)};return l.isStepper=!1,l},c6=function(){return NAe(...MAe(...arguments))},LAe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,s=(a,o,l)=>{var c=-(a-o)*n,u=l*r,d=l+(c-u)*i/1e3,f=l*i/1e3+a;return Math.abs(f-o)<N1&&Math.abs(d)<N1?[o,0]:[f,d]};return s.isStepper=!0,s.dt=i,s},jAe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return c6(t);case"spring":return LAe();default:if(t.split("(")[0]==="cubic-bezier")return c6(t)}return typeof t=="function"?t:null};function FAe(t){var e,n=()=>null,r=!1,i=null,s=a=>{if(!r){if(Array.isArray(a)){if(!a.length)return;var o=a,[l,...c]=o;if(typeof l=="number"){i=t.setTimeout(s.bind(null,c),l);return}s(l),i=t.setTimeout(s.bind(null,c));return}typeof a=="string"&&(e=a,n(e)),typeof a=="object"&&(e=a,n(e)),typeof a=="function"&&a()}};return{stop:()=>{r=!0},start:a=>{r=!1,i&&(i(),i=null),s(a)},subscribe:a=>(n=a,()=>{n=()=>null}),getTimeoutController:()=>t}}class VAe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=a=>{a-r>=n?e(a):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function BAe(){return FAe(new VAe)}var $Ae=x.createContext(BAe);function UAe(t,e){var n=x.useContext($Ae);return x.useMemo(()=>e??n(t),[t,e,n])}var zAe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),yx={devToolsEnabled:!1,isSsr:zAe()},HAe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},u6={t:0},dk={t:1};function QP(t){var e=ar(t,HAe),{isActive:n,canBegin:r,duration:i,easing:s,begin:a,onAnimationEnd:o,onAnimationStart:l,children:c}=e,u=n==="auto"?!yx.isSsr:n,d=UAe(e.animationId,e.animationManager),[f,p]=x.useState(u?u6:dk),g=x.useRef(null);return x.useEffect(()=>{u||p(dk)},[u]),x.useEffect(()=>{if(!u||!r)return ux;var y=OAe(u6,dk,jAe(s),i,p,d.getTimeoutController()),v=()=>{g.current=y()};return d.start([l,a,v,i,o]),()=>{d.stop(),g.current&&g.current(),o()}},[u,r,i,s,a,l,o,d]),c(f.t)}function JP(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=x.useRef(Ib(e)),r=x.useRef(t);return r.current!==t&&(n.current=Ib(e),r.current=t),n.current}var WAe=["radius"],GAe=["radius"];function h6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function d6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h6(Object(n),!0).forEach(function(r){KAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KAe(t,e,n){return(e=qAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qAe(t){var e=XAe(t,"string");return typeof e=="symbol"?e:e+""}function XAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function L1(){return L1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L1.apply(null,arguments)}function f6(t,e){if(t==null)return{};var n,r,i=YAe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function YAe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var p6=(t,e,n,r,i)=>{var s=Math.min(Math.abs(n)/2,Math.abs(r)/2),a=r>=0?1:-1,o=n>=0?1:-1,l=r>=0&&n>=0||r<0&&n<0?1:0,c;if(s>0&&i instanceof Array){for(var u=[0,0,0,0],d=0,f=4;d<f;d++)u[d]=i[d]>s?s:i[d];c="M".concat(t,",").concat(e+a*u[0]),u[0]>0&&(c+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(l,",").concat(t+o*u[0],",").concat(e)),c+="L ".concat(t+n-o*u[1],",").concat(e),u[1]>0&&(c+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(l,`,
        `).concat(t+n,",").concat(e+a*u[1])),c+="L ".concat(t+n,",").concat(e+r-a*u[2]),u[2]>0&&(c+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(l,`,
        `).concat(t+n-o*u[2],",").concat(e+r)),c+="L ".concat(t+o*u[3],",").concat(e+r),u[3]>0&&(c+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(l,`,
        `).concat(t,",").concat(e+r-a*u[3])),c+="Z"}else if(s>0&&i===+i&&i>0){var p=Math.min(s,i);c="M ".concat(t,",").concat(e+a*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(t+o*p,",").concat(e,`
            L `).concat(t+n-o*p,",").concat(e,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(t+n,",").concat(e+a*p,`
            L `).concat(t+n,",").concat(e+r-a*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(t+n-o*p,",").concat(e+r,`
            L `).concat(t+o*p,",").concat(e+r,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(t,",").concat(e+r-a*p," Z")}else c="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return c},m6={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},hQ=t=>{var e=ar(t,m6),n=x.useRef(null),[r,i]=x.useState(-1);x.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var G=n.current.getTotalLength();G&&i(G)}catch{}},[]);var{x:s,y:a,width:o,height:l,radius:c,className:u}=e,{animationEasing:d,animationDuration:f,animationBegin:p,isAnimationActive:g,isUpdateAnimationActive:y}=e,v=x.useRef(o),b=x.useRef(l),_=x.useRef(s),w=x.useRef(a),T=x.useMemo(()=>({x:s,y:a,width:o,height:l,radius:c}),[s,a,o,l,c]),P=JP(T,"rectangle-");if(s!==+s||a!==+a||o!==+o||l!==+l||o===0||l===0)return null;var O=it("recharts-rectangle",u);if(!y){var C=pi(e),{radius:I}=C,M=f6(C,WAe);return x.createElement("path",L1({},M,{radius:typeof c=="number"?c:void 0,className:O,d:p6(s,a,o,l,c)}))}var L=v.current,N=b.current,F=_.current,j=w.current,K="0px ".concat(r===-1?1:r,"px"),te="".concat(r,"px 0px"),Z=oQ(["strokeDasharray"],f,typeof d=="string"?d:m6.animationEasing);return x.createElement(QP,{animationId:P,key:P,canBegin:r>0,duration:f,easing:d,isActive:y,begin:p},G=>{var U=nr(L,o,G),H=nr(N,l,G),re=nr(F,s,G),ve=nr(j,a,G);n.current&&(v.current=U,b.current=H,_.current=re,w.current=ve);var de;g?G>0?de={transition:Z,strokeDasharray:te}:de={strokeDasharray:K}:de={strokeDasharray:te};var xe=pi(e),{radius:je}=xe,dt=f6(xe,GAe);return x.createElement("path",L1({},dt,{radius:typeof c=="number"?c:void 0,className:O,d:p6(re,ve,U,H,c),ref:n,style:d6(d6({},de),e.style)}))})};function g6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function y6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g6(Object(n),!0).forEach(function(r){QAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QAe(t,e,n){return(e=JAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JAe(t){var e=ZAe(t,"string");return typeof e=="symbol"?e:e+""}function ZAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var j1=Math.PI/180,eEe=t=>t*180/Math.PI,Er=(t,e,n,r)=>({x:t+Math.cos(-j1*r)*n,y:e+Math.sin(-j1*r)*n}),tEe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},nEe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:s}=e;return Math.sqrt((n-i)**2+(r-s)**2)},rEe=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:s}=e,a=nEe({x:n,y:r},{x:i,y:s});if(a<=0)return{radius:a,angle:0};var o=(n-i)/a,l=Math.acos(o);return r>s&&(l=2*Math.PI-l),{radius:a,angle:eEe(l),angleInRadian:l}},iEe=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:e-s*360,endAngle:n-s*360}},sEe=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),s=Math.floor(r/360),a=Math.min(i,s);return t+a*360},aEe=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:s}=rEe({x:n,y:r},e),{innerRadius:a,outerRadius:o}=e;if(i<a||i>o||i===0)return null;var{startAngle:l,endAngle:c}=iEe(e),u=s,d;if(l<=c){for(;u>c;)u-=360;for(;u<l;)u+=360;d=u>=l&&u<=c}else{for(;u>l;)u-=360;for(;u<c;)u+=360;d=u>=c&&u<=l}return d?y6(y6({},e),{},{radius:i,angle:sEe(u,e)}):null};function dQ(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:s}=t,a=Er(e,n,r,i),o=Er(e,n,r,s);return{points:[a,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}function TM(){return TM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TM.apply(null,arguments)}var oEe=(t,e)=>{var n=Js(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},NA=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:s,isExternal:a,cornerRadius:o,cornerIsExternal:l}=t,c=o*(a?1:-1)+r,u=Math.asin(o/c)/j1,d=l?i:i+s*u,f=Er(e,n,c,d),p=Er(e,n,r,d),g=l?i-s*u:i,y=Er(e,n,c*Math.cos(u*j1),g);return{center:f,circleTangency:p,lineTangency:y,theta:u}},fQ=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:a}=t,o=oEe(s,a),l=s+o,c=Er(e,n,i,s),u=Er(e,n,i,l),d="M ".concat(c.x,",").concat(c.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(s>l),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(r>0){var f=Er(e,n,r,s),p=Er(e,n,r,l);d+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(s<=l),`,
            `).concat(f.x,",").concat(f.y," Z")}else d+="L ".concat(e,",").concat(n," Z");return d},lEe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:o,startAngle:l,endAngle:c}=t,u=Js(c-l),{circleTangency:d,lineTangency:f,theta:p}=NA({cx:e,cy:n,radius:i,angle:l,sign:u,cornerRadius:s,cornerIsExternal:o}),{circleTangency:g,lineTangency:y,theta:v}=NA({cx:e,cy:n,radius:i,angle:c,sign:-u,cornerRadius:s,cornerIsExternal:o}),b=o?Math.abs(l-c):Math.abs(l-c)-p-v;if(b<0)return a?"M ".concat(f.x,",").concat(f.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):fQ({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c});var _="M ".concat(f.x,",").concat(f.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(d.x,",").concat(d.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(b>180),",").concat(+(u<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(y.x,",").concat(y.y,`
  `);if(r>0){var{circleTangency:w,lineTangency:T,theta:P}=NA({cx:e,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:O,lineTangency:C,theta:I}=NA({cx:e,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),M=o?Math.abs(l-c):Math.abs(l-c)-P-I;if(M<0&&s===0)return"".concat(_,"L").concat(e,",").concat(n,"Z");_+="L".concat(C.x,",").concat(C.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(M>180),",").concat(+(u>0),",").concat(w.x,",").concat(w.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(u<0),",").concat(T.x,",").concat(T.y,"Z")}else _+="L".concat(e,",").concat(n,"Z");return _},cEe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},pQ=t=>{var e=ar(t,cEe),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u,className:d}=e;if(s<i||c===u)return null;var f=it("recharts-sector",d),p=s-i,g=Th(a,p,0,!0),y;return g>0&&Math.abs(c-u)<360?y=lEe({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(g,p/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}):y=fQ({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:c,endAngle:u}),x.createElement("path",TM({},pi(e),{className:f,d:y}))};function uEe(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(OX(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:s,outerRadius:a,angle:o}=e,l=Er(r,i,s,o),c=Er(r,i,a,o);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return dQ(e)}}var mQ={},gQ={},yQ={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=JL;function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(yQ);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yQ;function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(gQ);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ZL,n=gQ;function r(i,s,a){a&&typeof a!="number"&&e.isIterateeCall(i,s,a)&&(s=a=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),a=a===void 0?i<s?1:-1:n.toFinite(a);const o=Math.max(Math.ceil((s-i)/(a||1)),0),l=new Array(o);for(let c=0;c<o;c++)l[c]=i,i+=a;return l}t.range=r})(mQ);var hEe=mQ.range;const vQ=Sc(hEe);function dh(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function dEe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function pj(t){let e,n,r;t.length!==2?(e=dh,n=(o,l)=>dh(t(o),l),r=(o,l)=>t(o)-l):(e=t===dh||t===dEe?t:fEe,n=t,r=t);function i(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(o[d],l)<0?c=d+1:u=d}while(c<u)}return c}function s(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(o[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function a(o,l,c=0,u=o.length){const d=i(o,l,c,u-1);return d>c&&r(o[d-1],l)>-r(o[d],l)?d-1:d}return{left:i,center:a,right:s}}function fEe(){return 0}function bQ(t){return t===null?NaN:+t}function*pEe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const mEe=pj(dh),vx=mEe.right;pj(bQ).center;class v6 extends Map{constructor(e,n=vEe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(b6(this,e))}has(e){return super.has(b6(this,e))}set(e,n){return super.set(gEe(this,e),n)}delete(e){return super.delete(yEe(this,e))}}function b6({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function gEe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function yEe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function vEe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function bEe(t=dh){if(t===dh)return wQ;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function wQ(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const wEe=Math.sqrt(50),_Ee=Math.sqrt(10),xEe=Math.sqrt(2);function F1(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=wEe?10:s>=_Ee?5:s>=xEe?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/a,o=Math.round(t*c),l=Math.round(e*c),o/c<t&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*a,o=Math.round(t/c),l=Math.round(e/c),o*c<t&&++o,l*c>e&&--l),l<o&&.5<=n&&n<2?F1(t,e,n*2):[o,l,c]}function PM(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?F1(e,t,n):F1(t,e,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let c=0;c<o;++c)l[c]=(s-c)/-a;else for(let c=0;c<o;++c)l[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(i+c)/-a;else for(let c=0;c<o;++c)l[c]=(i+c)*a;return l}function CM(t,e,n){return e=+e,t=+t,n=+n,F1(t,e,n)[2]}function IM(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?CM(e,t,n):CM(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function w6(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function _6(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function _Q(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?wQ:bEe(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),d=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*d*(l-d)/l)*(c-l/2<0?-1:1),p=Math.max(n,Math.floor(e-c*d/l+f)),g=Math.min(r,Math.floor(e+(l-c)*d/l+f));_Q(t,e,p,g,i)}const s=t[e];let a=n,o=r;for(Rv(t,n,e),i(t[r],s)>0&&Rv(t,n,r);a<o;){for(Rv(t,a,o),++a,--o;i(t[a],s)<0;)++a;for(;i(t[o],s)>0;)--o}i(t[n],s)===0?Rv(t,n,o):(++o,Rv(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Rv(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function AEe(t,e,n){if(t=Float64Array.from(pEe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return _6(t);if(e>=1)return w6(t);var r,i=(r-1)*e,s=Math.floor(i),a=w6(_Q(t,s).subarray(0,s+1)),o=_6(t.subarray(s+1));return a+(o-a)*(i-s)}}function EEe(t,e,n=bQ){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),a=+n(t[s],s,t),o=+n(t[s+1],s+1,t);return a+(o-a)*(i-s)}}function SEe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function ua(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ic(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const kM=Symbol("implicit");function mj(){var t=new v6,e=[],n=[],r=kM;function i(s){let a=t.get(s);if(a===void 0){if(r!==kM)return r;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new v6;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return mj(e,n).unknown(r)},ua.apply(i,arguments),i}function gj(){var t=mj().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,a,o=!1,l=0,c=0,u=.5;delete t.unknown;function d(){var f=e().length,p=i<r,g=p?i:r,y=p?r:i;s=(y-g)/Math.max(1,f-l+c*2),o&&(s=Math.floor(s)),g+=(y-g-s*(f-l))*u,a=s*(1-l),o&&(g=Math.round(g),a=Math.round(a));var v=SEe(f).map(function(b){return g+s*b});return n(p?v.reverse():v)}return t.domain=function(f){return arguments.length?(e(f),d()):e()},t.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,o=!0,d()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(f){return arguments.length?(o=!!f,d()):o},t.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),d()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},t.paddingOuter=function(f){return arguments.length?(c=+f,d()):c},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),d()):u},t.copy=function(){return gj(e(),[r,i]).round(o).paddingInner(l).paddingOuter(c).align(u)},ua.apply(d(),arguments)}function xQ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return xQ(e())},t}function TEe(){return xQ(gj.apply(null,arguments).paddingInner(1))}function yj(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function AQ(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function bx(){}var jb=.7,V1=1/jb,km="\\s*([+-]?\\d+)\\s*",Fb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ho="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",PEe=/^#([0-9a-f]{3,8})$/,CEe=new RegExp(`^rgb\\(${km},${km},${km}\\)$`),IEe=new RegExp(`^rgb\\(${Ho},${Ho},${Ho}\\)$`),kEe=new RegExp(`^rgba\\(${km},${km},${km},${Fb}\\)$`),REe=new RegExp(`^rgba\\(${Ho},${Ho},${Ho},${Fb}\\)$`),OEe=new RegExp(`^hsl\\(${Fb},${Ho},${Ho}\\)$`),DEe=new RegExp(`^hsla\\(${Fb},${Ho},${Ho},${Fb}\\)$`),x6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yj(bx,Vb,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:A6,formatHex:A6,formatHex8:MEe,formatHsl:NEe,formatRgb:E6,toString:E6});function A6(){return this.rgb().formatHex()}function MEe(){return this.rgb().formatHex8()}function NEe(){return EQ(this).formatHsl()}function E6(){return this.rgb().formatRgb()}function Vb(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=PEe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?S6(e):n===3?new Ni(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?LA(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?LA(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=CEe.exec(t))?new Ni(e[1],e[2],e[3],1):(e=IEe.exec(t))?new Ni(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=kEe.exec(t))?LA(e[1],e[2],e[3],e[4]):(e=REe.exec(t))?LA(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=OEe.exec(t))?C6(e[1],e[2]/100,e[3]/100,1):(e=DEe.exec(t))?C6(e[1],e[2]/100,e[3]/100,e[4]):x6.hasOwnProperty(t)?S6(x6[t]):t==="transparent"?new Ni(NaN,NaN,NaN,0):null}function S6(t){return new Ni(t>>16&255,t>>8&255,t&255,1)}function LA(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ni(t,e,n,r)}function LEe(t){return t instanceof bx||(t=Vb(t)),t?(t=t.rgb(),new Ni(t.r,t.g,t.b,t.opacity)):new Ni}function RM(t,e,n,r){return arguments.length===1?LEe(t):new Ni(t,e,n,r??1)}function Ni(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}yj(Ni,RM,AQ(bx,{brighter(t){return t=t==null?V1:Math.pow(V1,t),new Ni(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?jb:Math.pow(jb,t),new Ni(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ni($f(this.r),$f(this.g),$f(this.b),B1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:T6,formatHex:T6,formatHex8:jEe,formatRgb:P6,toString:P6}));function T6(){return`#${md(this.r)}${md(this.g)}${md(this.b)}`}function jEe(){return`#${md(this.r)}${md(this.g)}${md(this.b)}${md((isNaN(this.opacity)?1:this.opacity)*255)}`}function P6(){const t=B1(this.opacity);return`${t===1?"rgb(":"rgba("}${$f(this.r)}, ${$f(this.g)}, ${$f(this.b)}${t===1?")":`, ${t})`}`}function B1(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function $f(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function md(t){return t=$f(t),(t<16?"0":"")+t.toString(16)}function C6(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ma(t,e,n,r)}function EQ(t){if(t instanceof Ma)return new Ma(t.h,t.s,t.l,t.opacity);if(t instanceof bx||(t=Vb(t)),!t)return new Ma;if(t instanceof Ma)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new Ma(a,o,l,t.opacity)}function FEe(t,e,n,r){return arguments.length===1?EQ(t):new Ma(t,e,n,r??1)}function Ma(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}yj(Ma,FEe,AQ(bx,{brighter(t){return t=t==null?V1:Math.pow(V1,t),new Ma(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?jb:Math.pow(jb,t),new Ma(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ni(fk(t>=240?t-240:t+120,i,r),fk(t,i,r),fk(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ma(I6(this.h),jA(this.s),jA(this.l),B1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=B1(this.opacity);return`${t===1?"hsl(":"hsla("}${I6(this.h)}, ${jA(this.s)*100}%, ${jA(this.l)*100}%${t===1?")":`, ${t})`}`}}));function I6(t){return t=(t||0)%360,t<0?t+360:t}function jA(t){return Math.max(0,Math.min(1,t||0))}function fk(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const vj=t=>()=>t;function VEe(t,e){return function(n){return t+n*e}}function BEe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function $Ee(t){return(t=+t)==1?SQ:function(e,n){return n-e?BEe(e,n,t):vj(isNaN(e)?n:e)}}function SQ(t,e){var n=e-t;return n?VEe(t,n):vj(isNaN(t)?e:t)}const k6=function t(e){var n=$Ee(e);function r(i,s){var a=n((i=RM(i)).r,(s=RM(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),c=SQ(i.opacity,s.opacity);return function(u){return i.r=a(u),i.g=o(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function UEe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function zEe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function HEe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=zy(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function WEe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function $1(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function GEe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=zy(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var OM=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pk=new RegExp(OM.source,"g");function KEe(t){return function(){return t}}function qEe(t){return function(e){return t(e)+""}}function XEe(t,e){var n=OM.lastIndex=pk.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(t=t+"",e=e+"";(r=OM.exec(t))&&(i=pk.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:$1(r,i)})),n=pk.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?qEe(l[0].x):KEe(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)o[(d=l[u]).i]=d.x(c);return o.join("")})}function zy(t,e){var n=typeof e,r;return e==null||n==="boolean"?vj(e):(n==="number"?$1:n==="string"?(r=Vb(e))?(e=r,k6):XEe:e instanceof Vb?k6:e instanceof Date?WEe:zEe(e)?UEe:Array.isArray(e)?HEe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?GEe:$1)(t,e)}function bj(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function YEe(t,e){e===void 0&&(e=t,t=zy);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(a){var o=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[o](a-o)}}function QEe(t){return function(){return t}}function U1(t){return+t}var R6=[0,1];function ui(t){return t}function DM(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:QEe(isNaN(e)?NaN:.5)}function JEe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function ZEe(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=DM(i,r),s=n(a,s)):(r=DM(r,i),s=n(s,a)),function(o){return s(r(o))}}function eSe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=DM(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(o){var l=vx(t,o,1,r)-1;return s[l](i[l](o))}}function wx(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ZP(){var t=R6,e=R6,n=zy,r,i,s,a=ui,o,l,c;function u(){var f=Math.min(t.length,e.length);return a!==ui&&(a=JEe(t[0],t[f-1])),o=f>2?eSe:ZEe,l=c=null,d}function d(f){return f==null||isNaN(f=+f)?s:(l||(l=o(t.map(r),e,n)))(r(a(f)))}return d.invert=function(f){return a(i((c||(c=o(e,t.map(r),$1)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,U1),u()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=bj,u()},d.clamp=function(f){return arguments.length?(a=f?!0:ui,u()):a!==ui},d.interpolate=function(f){return arguments.length?(n=f,u()):n},d.unknown=function(f){return arguments.length?(s=f,d):s},function(f,p){return r=f,i=p,u()}}function wj(){return ZP()(ui,ui)}function tSe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function z1(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Sy(t){return t=z1(Math.abs(t)),t?t[1]:NaN}function nSe(t,e){return function(n,r){for(var i=n.length,s=[],a=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function rSe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var iSe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Bb(t){if(!(e=iSe.exec(t)))throw new Error("invalid format: "+t);var e;return new _j({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Bb.prototype=_j.prototype;function _j(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}_j.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function sSe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var TQ;function aSe(t,e){var n=z1(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(TQ=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+z1(t,Math.max(0,e+s-1))[0]}function O6(t,e){var n=z1(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const D6={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:tSe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>O6(t*100,e),r:O6,s:aSe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function M6(t){return t}var N6=Array.prototype.map,L6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function oSe(t){var e=t.grouping===void 0||t.thousands===void 0?M6:nSe(N6.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?M6:rSe(N6.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=Bb(d);var f=d.fill,p=d.align,g=d.sign,y=d.symbol,v=d.zero,b=d.width,_=d.comma,w=d.precision,T=d.trim,P=d.type;P==="n"?(_=!0,P="g"):D6[P]||(w===void 0&&(w=12),T=!0,P="g"),(v||f==="0"&&p==="=")&&(v=!0,f="0",p="=");var O=y==="$"?n:y==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",C=y==="$"?r:/[%p]/.test(P)?a:"",I=D6[P],M=/[defgprs%]/.test(P);w=w===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function L(N){var F=O,j=C,K,te,Z;if(P==="c")j=I(N)+j,N="";else{N=+N;var G=N<0||1/N<0;if(N=isNaN(N)?l:I(Math.abs(N),w),T&&(N=sSe(N)),G&&+N==0&&g!=="+"&&(G=!1),F=(G?g==="("?g:o:g==="-"||g==="("?"":g)+F,j=(P==="s"?L6[8+TQ/3]:"")+j+(G&&g==="("?")":""),M){for(K=-1,te=N.length;++K<te;)if(Z=N.charCodeAt(K),48>Z||Z>57){j=(Z===46?i+N.slice(K+1):N.slice(K))+j,N=N.slice(0,K);break}}}_&&!v&&(N=e(N,1/0));var U=F.length+N.length+j.length,H=U<b?new Array(b-U+1).join(f):"";switch(_&&v&&(N=e(H+N,H.length?b-j.length:1/0),H=""),p){case"<":N=F+N+j+H;break;case"=":N=F+H+N+j;break;case"^":N=H.slice(0,U=H.length>>1)+F+N+j+H.slice(U);break;default:N=H+F+N+j;break}return s(N)}return L.toString=function(){return d+""},L}function u(d,f){var p=c((d=Bb(d),d.type="f",d)),g=Math.max(-8,Math.min(8,Math.floor(Sy(f)/3)))*3,y=Math.pow(10,-g),v=L6[8+g/3];return function(b){return p(y*b)+v}}return{format:c,formatPrefix:u}}var FA,xj,PQ;lSe({thousands:",",grouping:[3],currency:["$",""]});function lSe(t){return FA=oSe(t),xj=FA.format,PQ=FA.formatPrefix,FA}function cSe(t){return Math.max(0,-Sy(Math.abs(t)))}function uSe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Sy(e)/3)))*3-Sy(Math.abs(t)))}function hSe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Sy(e)-Sy(t))+1}function CQ(t,e,n,r){var i=IM(t,e,n),s;switch(r=Bb(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=uSe(i,a))&&(r.precision=s),PQ(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=hSe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=cSe(i))&&(r.precision=s-(r.type==="%")*2);break}}return xj(r)}function Vh(t){var e=t.domain;return t.ticks=function(n){var r=e();return PM(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return CQ(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],o=r[s],l,c,u=10;for(o<a&&(c=a,a=o,o=c,c=i,i=s,s=c);u-- >0;){if(c=CM(a,o,n),c===l)return r[i]=a,r[s]=o,e(r);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;l=c}return t},t}function IQ(){var t=wj();return t.copy=function(){return wx(t,IQ())},ua.apply(t,arguments),Vh(t)}function kQ(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,U1),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return kQ(t).unknown(e)},t=arguments.length?Array.from(t,U1):[0,1],Vh(n)}function RQ(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),t[n]=e.floor(i),t[r]=e.ceil(s),t}function j6(t){return Math.log(t)}function F6(t){return Math.exp(t)}function dSe(t){return-Math.log(-t)}function fSe(t){return-Math.exp(-t)}function pSe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function mSe(t){return t===10?pSe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function gSe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function V6(t){return(e,n)=>-t(-e,n)}function Aj(t){const e=t(j6,F6),n=e.domain;let r=10,i,s;function a(){return i=gSe(r),s=mSe(r),n()[0]<0?(i=V6(i),s=V6(s),t(dSe,fSe)):t(j6,F6),e}return e.base=function(o){return arguments.length?(r=+o,a()):r},e.domain=function(o){return arguments.length?(n(o),a()):n()},e.ticks=o=>{const l=n();let c=l[0],u=l[l.length-1];const d=u<c;d&&([c,u]=[u,c]);let f=i(c),p=i(u),g,y;const v=o==null?10:+o;let b=[];if(!(r%1)&&p-f<v){if(f=Math.floor(f),p=Math.ceil(p),c>0){for(;f<=p;++f)for(g=1;g<r;++g)if(y=f<0?g/s(-f):g*s(f),!(y<c)){if(y>u)break;b.push(y)}}else for(;f<=p;++f)for(g=r-1;g>=1;--g)if(y=f>0?g/s(-f):g*s(f),!(y<c)){if(y>u)break;b.push(y)}b.length*2<v&&(b=PM(c,u,v))}else b=PM(f,p,Math.min(p-f,v)).map(s);return d?b.reverse():b},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Bb(l)).precision==null&&(l.trim=!0),l=xj(l)),o===1/0)return l;const c=Math.max(1,r*o/e.ticks().length);return u=>{let d=u/s(Math.round(i(u)));return d*r<r-.5&&(d*=r),d<=c?l(u):""}},e.nice=()=>n(RQ(n(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),e}function OQ(){const t=Aj(ZP()).domain([1,10]);return t.copy=()=>wx(t,OQ()).base(t.base()),ua.apply(t,arguments),t}function B6(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function $6(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Ej(t){var e=1,n=t(B6(e),$6(e));return n.constant=function(r){return arguments.length?t(B6(e=+r),$6(e)):e},Vh(n)}function DQ(){var t=Ej(ZP());return t.copy=function(){return wx(t,DQ()).constant(t.constant())},ua.apply(t,arguments)}function U6(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function ySe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function vSe(t){return t<0?-t*t:t*t}function Sj(t){var e=t(ui,ui),n=1;function r(){return n===1?t(ui,ui):n===.5?t(ySe,vSe):t(U6(n),U6(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Vh(e)}function Tj(){var t=Sj(ZP());return t.copy=function(){return wx(t,Tj()).exponent(t.exponent())},ua.apply(t,arguments),t}function bSe(){return Tj.apply(null,arguments).exponent(.5)}function z6(t){return Math.sign(t)*t*t}function wSe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function MQ(){var t=wj(),e=[0,1],n=!1,r;function i(s){var a=wSe(t(s));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(s){return t.invert(z6(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,U1)).map(z6)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return MQ(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},ua.apply(i,arguments),Vh(i)}function NQ(){var t=[],e=[],n=[],r;function i(){var a=0,o=Math.max(1,e.length);for(n=new Array(o-1);++a<o;)n[a-1]=EEe(t,a/o);return s}function s(a){return a==null||isNaN(a=+a)?r:e[vx(n,a)]}return s.invertExtent=function(a){var o=e.indexOf(a);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let o of a)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(dh),i()},s.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return NQ().domain(t).range(e).unknown(r)},ua.apply(s,arguments)}function LQ(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function a(l){return l!=null&&l<=l?i[vx(r,l,0,n)]:s}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return a}return a.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},a.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return LQ().domain([t,e]).range(i).unknown(s)},ua.apply(Vh(a),arguments)}function jQ(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[vx(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return jQ().domain(t).range(e).unknown(n)},ua.apply(i,arguments)}const mk=new Date,gk=new Date;function Vn(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const l=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;let c;do l.push(c=new Date(+s)),e(s,o),t(s);while(c<s&&s<a);return l},i.filter=s=>Vn(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),n&&(i.count=(s,a)=>(mk.setTime(+s),gk.setTime(+a),t(mk),t(gk),Math.floor(n(mk,gk))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const H1=Vn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);H1.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Vn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):H1);H1.range;const Ql=1e3,Zs=Ql*60,Jl=Zs*60,bc=Jl*24,Pj=bc*7,H6=bc*30,yk=bc*365,gd=Vn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ql)},(t,e)=>(e-t)/Ql,t=>t.getUTCSeconds());gd.range;const Cj=Vn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ql)},(t,e)=>{t.setTime(+t+e*Zs)},(t,e)=>(e-t)/Zs,t=>t.getMinutes());Cj.range;const Ij=Vn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Zs)},(t,e)=>(e-t)/Zs,t=>t.getUTCMinutes());Ij.range;const kj=Vn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ql-t.getMinutes()*Zs)},(t,e)=>{t.setTime(+t+e*Jl)},(t,e)=>(e-t)/Jl,t=>t.getHours());kj.range;const Rj=Vn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Jl)},(t,e)=>(e-t)/Jl,t=>t.getUTCHours());Rj.range;const _x=Vn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Zs)/bc,t=>t.getDate()-1);_x.range;const eC=Vn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/bc,t=>t.getUTCDate()-1);eC.range;const FQ=Vn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/bc,t=>Math.floor(t/bc));FQ.range;function _p(t){return Vn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Zs)/Pj)}const tC=_p(0),W1=_p(1),_Se=_p(2),xSe=_p(3),Ty=_p(4),ASe=_p(5),ESe=_p(6);tC.range;W1.range;_Se.range;xSe.range;Ty.range;ASe.range;ESe.range;function xp(t){return Vn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Pj)}const nC=xp(0),G1=xp(1),SSe=xp(2),TSe=xp(3),Py=xp(4),PSe=xp(5),CSe=xp(6);nC.range;G1.range;SSe.range;TSe.range;Py.range;PSe.range;CSe.range;const Oj=Vn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Oj.range;const Dj=Vn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Dj.range;const wc=Vn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());wc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Vn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});wc.range;const _c=Vn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());_c.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Vn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});_c.range;function VQ(t,e,n,r,i,s){const a=[[gd,1,Ql],[gd,5,5*Ql],[gd,15,15*Ql],[gd,30,30*Ql],[s,1,Zs],[s,5,5*Zs],[s,15,15*Zs],[s,30,30*Zs],[i,1,Jl],[i,3,3*Jl],[i,6,6*Jl],[i,12,12*Jl],[r,1,bc],[r,2,2*bc],[n,1,Pj],[e,1,H6],[e,3,3*H6],[t,1,yk]];function o(c,u,d){const f=u<c;f&&([c,u]=[u,c]);const p=d&&typeof d.range=="function"?d:l(c,u,d),g=p?p.range(c,+u+1):[];return f?g.reverse():g}function l(c,u,d){const f=Math.abs(u-c)/d,p=pj(([,,v])=>v).right(a,f);if(p===a.length)return t.every(IM(c/yk,u/yk,d));if(p===0)return H1.every(Math.max(IM(c,u,d),1));const[g,y]=a[f/a[p-1][2]<a[p][2]/f?p-1:p];return g.every(y)}return[o,l]}const[ISe,kSe]=VQ(_c,Dj,nC,FQ,Rj,Ij),[RSe,OSe]=VQ(wc,Oj,tC,_x,kj,Cj);function vk(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function bk(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ov(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function DSe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,a=t.shortDays,o=t.months,l=t.shortMonths,c=Dv(i),u=Mv(i),d=Dv(s),f=Mv(s),p=Dv(a),g=Mv(a),y=Dv(o),v=Mv(o),b=Dv(l),_=Mv(l),w={a:G,A:U,b:H,B:re,c:null,d:Y6,e:Y6,f:n1e,g:d1e,G:p1e,H:ZSe,I:e1e,j:t1e,L:BQ,m:r1e,M:i1e,p:ve,q:de,Q:Z6,s:e5,S:s1e,u:a1e,U:o1e,V:l1e,w:c1e,W:u1e,x:null,X:null,y:h1e,Y:f1e,Z:m1e,"%":J6},T={a:xe,A:je,b:dt,B:ft,c:null,d:Q6,e:Q6,f:b1e,g:I1e,G:R1e,H:g1e,I:y1e,j:v1e,L:UQ,m:w1e,M:_1e,p:Ee,q:ha,Q:Z6,s:e5,S:x1e,u:A1e,U:E1e,V:S1e,w:T1e,W:P1e,x:null,X:null,y:C1e,Y:k1e,Z:O1e,"%":J6},P={a:L,A:N,b:F,B:j,c:K,d:q6,e:q6,f:XSe,g:K6,G:G6,H:X6,I:X6,j:WSe,L:qSe,m:HSe,M:GSe,p:M,q:zSe,Q:QSe,s:JSe,S:KSe,u:FSe,U:VSe,V:BSe,w:jSe,W:$Se,x:te,X:Z,y:K6,Y:G6,Z:USe,"%":YSe};w.x=O(n,w),w.X=O(r,w),w.c=O(e,w),T.x=O(n,T),T.X=O(r,T),T.c=O(e,T);function O(X,Se){return function(Re){var Q=[],on=-1,Ye=0,Jr=X.length,cr,da,Qy;for(Re instanceof Date||(Re=new Date(+Re));++on<Jr;)X.charCodeAt(on)===37&&(Q.push(X.slice(Ye,on)),(da=W6[cr=X.charAt(++on)])!=null?cr=X.charAt(++on):da=cr==="e"?" ":"0",(Qy=Se[cr])&&(cr=Qy(Re,da)),Q.push(cr),Ye=on+1);return Q.push(X.slice(Ye,on)),Q.join("")}}function C(X,Se){return function(Re){var Q=Ov(1900,void 0,1),on=I(Q,X,Re+="",0),Ye,Jr;if(on!=Re.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if(Se&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(Ye=bk(Ov(Q.y,0,1)),Jr=Ye.getUTCDay(),Ye=Jr>4||Jr===0?G1.ceil(Ye):G1(Ye),Ye=eC.offset(Ye,(Q.V-1)*7),Q.y=Ye.getUTCFullYear(),Q.m=Ye.getUTCMonth(),Q.d=Ye.getUTCDate()+(Q.w+6)%7):(Ye=vk(Ov(Q.y,0,1)),Jr=Ye.getDay(),Ye=Jr>4||Jr===0?W1.ceil(Ye):W1(Ye),Ye=_x.offset(Ye,(Q.V-1)*7),Q.y=Ye.getFullYear(),Q.m=Ye.getMonth(),Q.d=Ye.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),Jr="Z"in Q?bk(Ov(Q.y,0,1)).getUTCDay():vk(Ov(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(Jr+5)%7:Q.w+Q.U*7-(Jr+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,bk(Q)):vk(Q)}}function I(X,Se,Re,Q){for(var on=0,Ye=Se.length,Jr=Re.length,cr,da;on<Ye;){if(Q>=Jr)return-1;if(cr=Se.charCodeAt(on++),cr===37){if(cr=Se.charAt(on++),da=P[cr in W6?Se.charAt(on++):cr],!da||(Q=da(X,Re,Q))<0)return-1}else if(cr!=Re.charCodeAt(Q++))return-1}return Q}function M(X,Se,Re){var Q=c.exec(Se.slice(Re));return Q?(X.p=u.get(Q[0].toLowerCase()),Re+Q[0].length):-1}function L(X,Se,Re){var Q=p.exec(Se.slice(Re));return Q?(X.w=g.get(Q[0].toLowerCase()),Re+Q[0].length):-1}function N(X,Se,Re){var Q=d.exec(Se.slice(Re));return Q?(X.w=f.get(Q[0].toLowerCase()),Re+Q[0].length):-1}function F(X,Se,Re){var Q=b.exec(Se.slice(Re));return Q?(X.m=_.get(Q[0].toLowerCase()),Re+Q[0].length):-1}function j(X,Se,Re){var Q=y.exec(Se.slice(Re));return Q?(X.m=v.get(Q[0].toLowerCase()),Re+Q[0].length):-1}function K(X,Se,Re){return I(X,e,Se,Re)}function te(X,Se,Re){return I(X,n,Se,Re)}function Z(X,Se,Re){return I(X,r,Se,Re)}function G(X){return a[X.getDay()]}function U(X){return s[X.getDay()]}function H(X){return l[X.getMonth()]}function re(X){return o[X.getMonth()]}function ve(X){return i[+(X.getHours()>=12)]}function de(X){return 1+~~(X.getMonth()/3)}function xe(X){return a[X.getUTCDay()]}function je(X){return s[X.getUTCDay()]}function dt(X){return l[X.getUTCMonth()]}function ft(X){return o[X.getUTCMonth()]}function Ee(X){return i[+(X.getUTCHours()>=12)]}function ha(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var Se=O(X+="",w);return Se.toString=function(){return X},Se},parse:function(X){var Se=C(X+="",!1);return Se.toString=function(){return X},Se},utcFormat:function(X){var Se=O(X+="",T);return Se.toString=function(){return X},Se},utcParse:function(X){var Se=C(X+="",!0);return Se.toString=function(){return X},Se}}}var W6={"-":"",_:" ",0:"0"},or=/^\s*\d+/,MSe=/^%/,NSe=/[\\^$*+?|[\]().{}]/g;function Xe(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function LSe(t){return t.replace(NSe,"\\$&")}function Dv(t){return new RegExp("^(?:"+t.map(LSe).join("|")+")","i")}function Mv(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function jSe(t,e,n){var r=or.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function FSe(t,e,n){var r=or.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function VSe(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function BSe(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function $Se(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function G6(t,e,n){var r=or.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function K6(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function USe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function zSe(t,e,n){var r=or.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function HSe(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function q6(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function WSe(t,e,n){var r=or.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function X6(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function GSe(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function KSe(t,e,n){var r=or.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function qSe(t,e,n){var r=or.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function XSe(t,e,n){var r=or.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function YSe(t,e,n){var r=MSe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function QSe(t,e,n){var r=or.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function JSe(t,e,n){var r=or.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Y6(t,e){return Xe(t.getDate(),e,2)}function ZSe(t,e){return Xe(t.getHours(),e,2)}function e1e(t,e){return Xe(t.getHours()%12||12,e,2)}function t1e(t,e){return Xe(1+_x.count(wc(t),t),e,3)}function BQ(t,e){return Xe(t.getMilliseconds(),e,3)}function n1e(t,e){return BQ(t,e)+"000"}function r1e(t,e){return Xe(t.getMonth()+1,e,2)}function i1e(t,e){return Xe(t.getMinutes(),e,2)}function s1e(t,e){return Xe(t.getSeconds(),e,2)}function a1e(t){var e=t.getDay();return e===0?7:e}function o1e(t,e){return Xe(tC.count(wc(t)-1,t),e,2)}function $Q(t){var e=t.getDay();return e>=4||e===0?Ty(t):Ty.ceil(t)}function l1e(t,e){return t=$Q(t),Xe(Ty.count(wc(t),t)+(wc(t).getDay()===4),e,2)}function c1e(t){return t.getDay()}function u1e(t,e){return Xe(W1.count(wc(t)-1,t),e,2)}function h1e(t,e){return Xe(t.getFullYear()%100,e,2)}function d1e(t,e){return t=$Q(t),Xe(t.getFullYear()%100,e,2)}function f1e(t,e){return Xe(t.getFullYear()%1e4,e,4)}function p1e(t,e){var n=t.getDay();return t=n>=4||n===0?Ty(t):Ty.ceil(t),Xe(t.getFullYear()%1e4,e,4)}function m1e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Xe(e/60|0,"0",2)+Xe(e%60,"0",2)}function Q6(t,e){return Xe(t.getUTCDate(),e,2)}function g1e(t,e){return Xe(t.getUTCHours(),e,2)}function y1e(t,e){return Xe(t.getUTCHours()%12||12,e,2)}function v1e(t,e){return Xe(1+eC.count(_c(t),t),e,3)}function UQ(t,e){return Xe(t.getUTCMilliseconds(),e,3)}function b1e(t,e){return UQ(t,e)+"000"}function w1e(t,e){return Xe(t.getUTCMonth()+1,e,2)}function _1e(t,e){return Xe(t.getUTCMinutes(),e,2)}function x1e(t,e){return Xe(t.getUTCSeconds(),e,2)}function A1e(t){var e=t.getUTCDay();return e===0?7:e}function E1e(t,e){return Xe(nC.count(_c(t)-1,t),e,2)}function zQ(t){var e=t.getUTCDay();return e>=4||e===0?Py(t):Py.ceil(t)}function S1e(t,e){return t=zQ(t),Xe(Py.count(_c(t),t)+(_c(t).getUTCDay()===4),e,2)}function T1e(t){return t.getUTCDay()}function P1e(t,e){return Xe(G1.count(_c(t)-1,t),e,2)}function C1e(t,e){return Xe(t.getUTCFullYear()%100,e,2)}function I1e(t,e){return t=zQ(t),Xe(t.getUTCFullYear()%100,e,2)}function k1e(t,e){return Xe(t.getUTCFullYear()%1e4,e,4)}function R1e(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Py(t):Py.ceil(t),Xe(t.getUTCFullYear()%1e4,e,4)}function O1e(){return"+0000"}function J6(){return"%"}function Z6(t){return+t}function e5(t){return Math.floor(+t/1e3)}var Cp,HQ,WQ;D1e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function D1e(t){return Cp=DSe(t),HQ=Cp.format,Cp.parse,WQ=Cp.utcFormat,Cp.utcParse,Cp}function M1e(t){return new Date(t)}function N1e(t){return t instanceof Date?+t:+new Date(+t)}function Mj(t,e,n,r,i,s,a,o,l,c){var u=wj(),d=u.invert,f=u.domain,p=c(".%L"),g=c(":%S"),y=c("%I:%M"),v=c("%I %p"),b=c("%a %d"),_=c("%b %d"),w=c("%B"),T=c("%Y");function P(O){return(l(O)<O?p:o(O)<O?g:a(O)<O?y:s(O)<O?v:r(O)<O?i(O)<O?b:_:n(O)<O?w:T)(O)}return u.invert=function(O){return new Date(d(O))},u.domain=function(O){return arguments.length?f(Array.from(O,N1e)):f().map(M1e)},u.ticks=function(O){var C=f();return t(C[0],C[C.length-1],O??10)},u.tickFormat=function(O,C){return C==null?P:c(C)},u.nice=function(O){var C=f();return(!O||typeof O.range!="function")&&(O=e(C[0],C[C.length-1],O??10)),O?f(RQ(C,O)):u},u.copy=function(){return wx(u,Mj(t,e,n,r,i,s,a,o,l,c))},u}function L1e(){return ua.apply(Mj(RSe,OSe,wc,Oj,tC,_x,kj,Cj,gd,HQ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function j1e(){return ua.apply(Mj(ISe,kSe,_c,Dj,nC,eC,Rj,Ij,gd,WQ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function rC(){var t=0,e=1,n,r,i,s,a=ui,o=!1,l;function c(d){return d==null||isNaN(d=+d)?l:a(i===0?.5:(d=(s(d)-n)*i,o?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,e]=d,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(d){return arguments.length?(o=!!d,c):o},c.interpolator=function(d){return arguments.length?(a=d,c):a};function u(d){return function(f){var p,g;return arguments.length?([p,g]=f,a=d(p,g),c):[a(0),a(1)]}}return c.range=u(zy),c.rangeRound=u(bj),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return s=d,n=d(t),r=d(e),i=n===r?0:1/(r-n),c}}function Bh(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function GQ(){var t=Vh(rC()(ui));return t.copy=function(){return Bh(t,GQ())},Ic.apply(t,arguments)}function KQ(){var t=Aj(rC()).domain([1,10]);return t.copy=function(){return Bh(t,KQ()).base(t.base())},Ic.apply(t,arguments)}function qQ(){var t=Ej(rC());return t.copy=function(){return Bh(t,qQ()).constant(t.constant())},Ic.apply(t,arguments)}function Nj(){var t=Sj(rC());return t.copy=function(){return Bh(t,Nj()).exponent(t.exponent())},Ic.apply(t,arguments)}function F1e(){return Nj.apply(null,arguments).exponent(.5)}function XQ(){var t=[],e=ui;function n(r){if(r!=null&&!isNaN(r=+r))return e((vx(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(dh),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>AEe(t,s/r))},n.copy=function(){return XQ(e).domain(t)},Ic.apply(n,arguments)}function iC(){var t=0,e=.5,n=1,r=1,i,s,a,o,l,c=ui,u,d=!1,f;function p(y){return isNaN(y=+y)?f:(y=.5+((y=+u(y))-s)*(r*y<r*s?o:l),c(d?Math.max(0,Math.min(1,y)):y))}p.domain=function(y){return arguments.length?([t,e,n]=y,i=u(t=+t),s=u(e=+e),a=u(n=+n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,p):[t,e,n]},p.clamp=function(y){return arguments.length?(d=!!y,p):d},p.interpolator=function(y){return arguments.length?(c=y,p):c};function g(y){return function(v){var b,_,w;return arguments.length?([b,_,w]=v,c=YEe(y,[b,_,w]),p):[c(0),c(.5),c(1)]}}return p.range=g(zy),p.rangeRound=g(bj),p.unknown=function(y){return arguments.length?(f=y,p):f},function(y){return u=y,i=y(t),s=y(e),a=y(n),o=i===s?0:.5/(s-i),l=s===a?0:.5/(a-s),r=s<i?-1:1,p}}function YQ(){var t=Vh(iC()(ui));return t.copy=function(){return Bh(t,YQ())},Ic.apply(t,arguments)}function QQ(){var t=Aj(iC()).domain([.1,1,10]);return t.copy=function(){return Bh(t,QQ()).base(t.base())},Ic.apply(t,arguments)}function JQ(){var t=Ej(iC());return t.copy=function(){return Bh(t,JQ()).constant(t.constant())},Ic.apply(t,arguments)}function Lj(){var t=Sj(iC());return t.copy=function(){return Bh(t,Lj()).exponent(t.exponent())},Ic.apply(t,arguments)}function V1e(){return Lj.apply(null,arguments).exponent(.5)}const m0=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:gj,scaleDiverging:YQ,scaleDivergingLog:QQ,scaleDivergingPow:Lj,scaleDivergingSqrt:V1e,scaleDivergingSymlog:JQ,scaleIdentity:kQ,scaleImplicit:kM,scaleLinear:IQ,scaleLog:OQ,scaleOrdinal:mj,scalePoint:TEe,scalePow:Tj,scaleQuantile:NQ,scaleQuantize:LQ,scaleRadial:MQ,scaleSequential:GQ,scaleSequentialLog:KQ,scaleSequentialPow:Nj,scaleSequentialQuantile:XQ,scaleSequentialSqrt:F1e,scaleSequentialSymlog:qQ,scaleSqrt:bSe,scaleSymlog:DQ,scaleThreshold:jQ,scaleTime:L1e,scaleUtc:j1e,tickFormat:CQ},Symbol.toStringTag,{value:"Module"}));var $h=t=>t.chartData,B1e=z([$h],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),sC=(t,e,n,r)=>r?B1e(t):$h(t);function Ph(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(sr(e)&&sr(n))return!0}return!1}function t5(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function ZQ(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,s;if(sr(n))i=n;else if(typeof n=="function")return;if(sr(r))s=r;else if(typeof r=="function")return;var a=[i,s];if(Ph(a))return a}}function $1e(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Ph(r))return t5(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,s]=t,a,o;if(i==="auto")e!=null&&(a=Math.min(...e));else if(me(i))a=i;else if(typeof i=="function")try{e!=null&&(a=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&jU.test(i)){var l=jU.exec(i);if(l==null||e==null)a=void 0;else{var c=+l[1];a=e[0]-c}}else a=e==null?void 0:e[0];if(s==="auto")e!=null&&(o=Math.max(...e));else if(me(s))o=s;else if(typeof s=="function")try{e!=null&&(o=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&FU.test(s)){var u=FU.exec(s);if(u==null||e==null)o=void 0;else{var d=+u[1];o=e[1]+d}}else o=e==null?void 0:e[1];var f=[a,o];if(Ph(f))return e==null?f:t5(f,e,n)}}}var Hy=1e9,U1e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Fj,$t=!0,ca="[DecimalError] ",Uf=ca+"Invalid argument: ",jj=ca+"Exponent out of range: ",Wy=Math.floor,sd=Math.pow,z1e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,fs,er=1e7,kt=7,eJ=9007199254740991,K1=Wy(eJ/kt),he={};he.absoluteValue=he.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};he.comparedTo=he.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};he.decimalPlaces=he.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*kt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};he.dividedBy=he.div=function(t){return nc(this,new this.constructor(t))};he.dividedToIntegerBy=he.idiv=function(t){var e=this,n=e.constructor;return wt(nc(e,new n(t),0,1),n.precision)};he.equals=he.eq=function(t){return!this.cmp(t)};he.exponent=function(){return Tn(this)};he.greaterThan=he.gt=function(t){return this.cmp(t)>0};he.greaterThanOrEqualTo=he.gte=function(t){return this.cmp(t)>=0};he.isInteger=he.isint=function(){return this.e>this.d.length-2};he.isNegative=he.isneg=function(){return this.s<0};he.isPositive=he.ispos=function(){return this.s>0};he.isZero=function(){return this.s===0};he.lessThan=he.lt=function(t){return this.cmp(t)<0};he.lessThanOrEqualTo=he.lte=function(t){return this.cmp(t)<1};he.logarithm=he.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(fs))throw Error(ca+"NaN");if(n.s<1)throw Error(ca+(n.s?"NaN":"-Infinity"));return n.eq(fs)?new r(0):($t=!1,e=nc($b(n,s),$b(t,s),s),$t=!0,wt(e,i))};he.minus=he.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?rJ(e,t):tJ(e,(t.s=-t.s,t))};he.modulo=he.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(ca+"NaN");return n.s?($t=!1,e=nc(n,t,0,1).times(t),$t=!0,n.minus(e)):wt(new r(n),i)};he.naturalExponential=he.exp=function(){return nJ(this)};he.naturalLogarithm=he.ln=function(){return $b(this)};he.negated=he.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};he.plus=he.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?tJ(e,t):rJ(e,(t.s=-t.s,t))};he.precision=he.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Uf+t);if(e=Tn(i)+1,r=i.d.length-1,n=r*kt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};he.squareRoot=he.sqrt=function(){var t,e,n,r,i,s,a,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(ca+"NaN")}for(t=Tn(o),$t=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=Oo(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Wy((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=a=n+3;;)if(s=r,r=s.plus(nc(o,s,a+2)).times(.5),Oo(s.d).slice(0,a)===(e=Oo(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(wt(s,n+1,0),s.times(s).eq(o)){r=s;break}}else if(e!="9999")break;a+=4}return $t=!0,wt(r,n)};he.times=he.mul=function(t){var e,n,r,i,s,a,o,l,c,u=this,d=u.constructor,f=u.d,p=(t=new d(t)).d;if(!u.s||!t.s)return new d(0);for(t.s*=u.s,n=u.e+t.e,l=f.length,c=p.length,l<c&&(s=f,f=p,p=s,a=l,l=c,c=a),s=[],a=l+c,r=a;r--;)s.push(0);for(r=c;--r>=0;){for(e=0,i=l+r;i>r;)o=s[i]+p[r]*f[i-r-1]+e,s[i--]=o%er|0,e=o/er|0;s[i]=(s[i]+e)%er|0}for(;!s[--a];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,$t?wt(t,d.precision):t};he.toDecimalPlaces=he.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Qo(t,0,Hy),e===void 0?e=r.rounding:Qo(e,0,8),wt(n,t+Tn(n)+1,e))};he.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=sp(r,!0):(Qo(t,0,Hy),e===void 0?e=i.rounding:Qo(e,0,8),r=wt(new i(r),t+1,e),n=sp(r,!0,t+1)),n};he.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?sp(i):(Qo(t,0,Hy),e===void 0?e=s.rounding:Qo(e,0,8),r=wt(new s(i),t+Tn(i)+1,e),n=sp(r.abs(),!1,t+Tn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};he.toInteger=he.toint=function(){var t=this,e=t.constructor;return wt(new e(t),Tn(t)+1,e.rounding)};he.toNumber=function(){return+this};he.toPower=he.pow=function(t){var e,n,r,i,s,a,o=this,l=o.constructor,c=12,u=+(t=new l(t));if(!t.s)return new l(fs);if(o=new l(o),!o.s){if(t.s<1)throw Error(ca+"Infinity");return o}if(o.eq(fs))return o;if(r=l.precision,t.eq(fs))return wt(o,r);if(e=t.e,n=t.d.length-1,a=e>=n,s=o.s,a){if((n=u<0?-u:u)<=eJ){for(i=new l(fs),e=Math.ceil(r/kt+4),$t=!1;n%2&&(i=i.times(o),r5(i.d,e)),n=Wy(n/2),n!==0;)o=o.times(o),r5(o.d,e);return $t=!0,t.s<0?new l(fs).div(i):wt(i,r)}}else if(s<0)throw Error(ca+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,$t=!1,i=t.times($b(o,r+c)),$t=!0,i=nJ(i),i.s=s,i};he.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=Tn(i),r=sp(i,n<=s.toExpNeg||n>=s.toExpPos)):(Qo(t,1,Hy),e===void 0?e=s.rounding:Qo(e,0,8),i=wt(new s(i),t,e),n=Tn(i),r=sp(i,t<=n||n<=s.toExpNeg,t)),r};he.toSignificantDigits=he.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Qo(t,1,Hy),e===void 0?e=r.rounding:Qo(e,0,8)),wt(new r(n),t,e)};he.toString=he.valueOf=he.val=he.toJSON=he[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Tn(t),n=t.constructor;return sp(t,e<=n.toExpNeg||e>=n.toExpPos)};function tJ(t,e){var n,r,i,s,a,o,l,c,u=t.constructor,d=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),$t?wt(e,d):e;if(l=t.d,c=e.d,a=t.e,i=e.e,l=l.slice(),s=a-i,s){for(s<0?(r=l,s=-s,o=c.length):(r=c,i=a,o=l.length),a=Math.ceil(d/kt),o=a>o?a+1:o+1,s>o&&(s=o,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(o=l.length,s=c.length,o-s<0&&(s=o,r=c,c=l,l=r),n=0;s;)n=(l[--s]=l[s]+c[s]+n)/er|0,l[s]%=er;for(n&&(l.unshift(n),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,$t?wt(e,d):e}function Qo(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Uf+t)}function Oo(t){var e,n,r,i=t.length-1,s="",a=t[0];if(i>0){for(s+=a,e=1;e<i;e++)r=t[e]+"",n=kt-r.length,n&&(s+=qc(n)),s+=r;a=t[e],r=a+"",n=kt-r.length,n&&(s+=qc(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var nc=function(){function t(r,i){var s,a=0,o=r.length;for(r=r.slice();o--;)s=r[o]*i+a,r[o]=s%er|0,a=s/er|0;return a&&r.unshift(a),r}function e(r,i,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(r[o]!=i[o]){l=r[o]>i[o]?1:-1;break}return l}function n(r,i,s){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*er+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,a){var o,l,c,u,d,f,p,g,y,v,b,_,w,T,P,O,C,I,M=r.constructor,L=r.s==i.s?1:-1,N=r.d,F=i.d;if(!r.s)return new M(r);if(!i.s)throw Error(ca+"Division by zero");for(l=r.e-i.e,C=F.length,P=N.length,p=new M(L),g=p.d=[],c=0;F[c]==(N[c]||0);)++c;if(F[c]>(N[c]||0)&&--l,s==null?_=s=M.precision:a?_=s+(Tn(r)-Tn(i))+1:_=s,_<0)return new M(0);if(_=_/kt+2|0,c=0,C==1)for(u=0,F=F[0],_++;(c<P||u)&&_--;c++)w=u*er+(N[c]||0),g[c]=w/F|0,u=w%F|0;else{for(u=er/(F[0]+1)|0,u>1&&(F=t(F,u),N=t(N,u),C=F.length,P=N.length),T=C,y=N.slice(0,C),v=y.length;v<C;)y[v++]=0;I=F.slice(),I.unshift(0),O=F[0],F[1]>=er/2&&++O;do u=0,o=e(F,y,C,v),o<0?(b=y[0],C!=v&&(b=b*er+(y[1]||0)),u=b/O|0,u>1?(u>=er&&(u=er-1),d=t(F,u),f=d.length,v=y.length,o=e(d,y,f,v),o==1&&(u--,n(d,C<f?I:F,f))):(u==0&&(o=u=1),d=F.slice()),f=d.length,f<v&&d.unshift(0),n(y,d,v),o==-1&&(v=y.length,o=e(F,y,C,v),o<1&&(u++,n(y,C<v?I:F,v))),v=y.length):o===0&&(u++,y=[0]),g[c++]=u,o&&y[0]?y[v++]=N[T]||0:(y=[N[T]],v=1);while((T++<P||y[0]!==void 0)&&_--)}return g[0]||g.shift(),p.e=l,wt(p,a?s+Tn(p)+1:s)}}();function nJ(t,e){var n,r,i,s,a,o,l=0,c=0,u=t.constructor,d=u.precision;if(Tn(t)>16)throw Error(jj+Tn(t));if(!t.s)return new u(fs);for($t=!1,o=d,a=new u(.03125);t.abs().gte(.1);)t=t.times(a),c+=5;for(r=Math.log(sd(2,c))/Math.LN10*2+5|0,o+=r,n=i=s=new u(fs),u.precision=o;;){if(i=wt(i.times(t),o),n=n.times(++l),a=s.plus(nc(i,n,o)),Oo(a.d).slice(0,o)===Oo(s.d).slice(0,o)){for(;c--;)s=wt(s.times(s),o);return u.precision=d,e==null?($t=!0,wt(s,d)):s}s=a}}function Tn(t){for(var e=t.e*kt,n=t.d[0];n>=10;n/=10)e++;return e}function wk(t,e,n){if(e>t.LN10.sd())throw $t=!0,n&&(t.precision=n),Error(ca+"LN10 precision limit exceeded");return wt(new t(t.LN10),e)}function qc(t){for(var e="";t--;)e+="0";return e}function $b(t,e){var n,r,i,s,a,o,l,c,u,d=1,f=10,p=t,g=p.d,y=p.constructor,v=y.precision;if(p.s<1)throw Error(ca+(p.s?"NaN":"-Infinity"));if(p.eq(fs))return new y(0);if(e==null?($t=!1,c=v):c=e,p.eq(10))return e==null&&($t=!0),wk(y,c);if(c+=f,y.precision=c,n=Oo(g),r=n.charAt(0),s=Tn(p),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(t),n=Oo(p.d),r=n.charAt(0),d++;s=Tn(p),r>1?(p=new y("0."+n),s++):p=new y(r+"."+n.slice(1))}else return l=wk(y,c+2,v).times(s+""),p=$b(new y(r+"."+n.slice(1)),c-f).plus(l),y.precision=v,e==null?($t=!0,wt(p,v)):p;for(o=a=p=nc(p.minus(fs),p.plus(fs),c),u=wt(p.times(p),c),i=3;;){if(a=wt(a.times(u),c),l=o.plus(nc(a,new y(i),c)),Oo(l.d).slice(0,c)===Oo(o.d).slice(0,c))return o=o.times(2),s!==0&&(o=o.plus(wk(y,c+2,v).times(s+""))),o=nc(o,new y(d),c),y.precision=v,e==null?($t=!0,wt(o,v)):o;o=l,i+=2}}function n5(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Wy(n/kt),t.d=[],r=(n+1)%kt,n<0&&(r+=kt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=kt;r<i;)t.d.push(+e.slice(r,r+=kt));e=e.slice(r),r=kt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),$t&&(t.e>K1||t.e<-K1))throw Error(jj+n)}else t.s=0,t.e=0,t.d=[0];return t}function wt(t,e,n){var r,i,s,a,o,l,c,u,d=t.d;for(a=1,s=d[0];s>=10;s/=10)a++;if(r=e-a,r<0)r+=kt,i=e,c=d[u=0];else{if(u=Math.ceil((r+1)/kt),s=d.length,u>=s)return t;for(c=s=d[u],a=1;s>=10;s/=10)a++;r%=kt,i=r-kt+a}if(n!==void 0&&(s=sd(10,a-i-1),o=c/s%10|0,l=e<0||d[u+1]!==void 0||c%s,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?i>0?c/sd(10,a-i):0:d[u-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(s=Tn(t),d.length=1,e=e-s-1,d[0]=sd(10,(kt-e%kt)%kt),t.e=Wy(-e/kt)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=u,s=1,u--):(d.length=u+1,s=sd(10,kt-r),d[u]=i>0?(c/sd(10,a-i)%sd(10,i)|0)*s:0),l)for(;;)if(u==0){(d[0]+=s)==er&&(d[0]=1,++t.e);break}else{if(d[u]+=s,d[u]!=er)break;d[u--]=0,s=1}for(r=d.length;d[--r]===0;)d.pop();if($t&&(t.e>K1||t.e<-K1))throw Error(jj+Tn(t));return t}function rJ(t,e){var n,r,i,s,a,o,l,c,u,d,f=t.constructor,p=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),$t?wt(e,p):e;if(l=t.d,d=e.d,r=e.e,c=t.e,l=l.slice(),a=c-r,a){for(u=a<0,u?(n=l,a=-a,o=d.length):(n=d,r=c,o=l.length),i=Math.max(Math.ceil(p/kt),o)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=l.length,o=d.length,u=i<o,u&&(o=i),i=0;i<o;i++)if(l[i]!=d[i]){u=l[i]<d[i];break}a=0}for(u&&(n=l,l=d,d=n,e.s=-e.s),o=l.length,i=d.length-o;i>0;--i)l[o++]=0;for(i=d.length;i>a;){if(l[--i]<d[i]){for(s=i;s&&l[--s]===0;)l[s]=er-1;--l[s],l[i]+=er}l[i]-=d[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,$t?wt(e,p):e):new f(0)}function sp(t,e,n){var r,i=Tn(t),s=Oo(t.d),a=s.length;return e?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+qc(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+qc(-i-1)+s,n&&(r=n-a)>0&&(s+=qc(r))):i>=a?(s+=qc(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+qc(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=qc(r))),t.s<0?"-"+s:s}function r5(t,e){if(t.length>e)return t.length=e,!0}function iJ(t){var e,n,r;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Uf+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return n5(a,s.toString())}else if(typeof s!="string")throw Error(Uf+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,z1e.test(s))n5(a,s);else throw Error(Uf+s)}if(i.prototype=he,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=iJ,i.config=i.set=H1e,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function H1e(t){if(!t||typeof t!="object")throw Error(ca+"Object expected");var e,n,r,i=["precision",1,Hy,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Wy(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Uf+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Uf+n+": "+r);return this}var Fj=iJ(U1e);fs=new Fj(1);const nt=Fj;var W1e=t=>t,sJ={},aJ=t=>t===sJ,i5=t=>function e(){return arguments.length===0||arguments.length===1&&aJ(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},oJ=(t,e)=>t===1?e:i5(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(a=>a!==sJ).length;return s>=t?e(...r):oJ(t-s,i5(function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var c=r.map(u=>aJ(u)?o.shift():u);return e(...c,...o)}))}),G1e=t=>oJ(t.length,t),MM=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},K1e=G1e((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),q1e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return W1e;var i=n.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce((o,l)=>l(o),s(...arguments))}},NM=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join("");function lJ(t){var e;return t===0?e=1:e=Math.floor(new nt(t).abs().log(10).toNumber())+1,e}function cJ(t,e,n){for(var r=new nt(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var uJ=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},hJ=(t,e,n)=>{if(t.lte(0))return new nt(0);var r=lJ(t.toNumber()),i=new nt(10).pow(r),s=t.div(i),a=r!==1?.05:.1,o=new nt(Math.ceil(s.div(a).toNumber())).add(n).mul(a),l=o.mul(i);return e?new nt(l.toNumber()):new nt(Math.ceil(l.toNumber()))},X1e=(t,e,n)=>{var r=new nt(1),i=new nt(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new nt(10).pow(lJ(t)-1),i=new nt(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new nt(Math.floor(t)))}else t===0?i=new nt(Math.floor((e-1)/2)):n||(i=new nt(Math.floor(t)));var a=Math.floor((e-1)/2),o=q1e(K1e(l=>i.add(new nt(l-a).mul(r)).toNumber()),MM);return o(0,e)},dJ=function(e,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new nt(0),tickMin:new nt(0),tickMax:new nt(0)};var a=hJ(new nt(n).sub(e).div(r-1),i,s),o;e<=0&&n>=0?o=new nt(0):(o=new nt(e).add(n).div(2),o=o.sub(new nt(o).mod(a)));var l=Math.ceil(o.sub(e).div(a).toNumber()),c=Math.ceil(new nt(n).sub(o).div(a).toNumber()),u=l+c+1;return u>r?dJ(e,n,r,i,s+1):(u<r&&(c=n>0?c+(r-u):c,l=n>0?l:l+(r-u)),{step:a,tickMin:o.sub(new nt(l).mul(a)),tickMax:o.add(new nt(c).mul(a))})},Y1e=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),[o,l]=uJ([n,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...MM(0,i-1).map(()=>1/0)]:[...MM(0,i-1).map(()=>-1/0),l];return n>r?NM(c):c}if(o===l)return X1e(o,i,s);var{step:u,tickMin:d,tickMax:f}=dJ(o,l,a,s,0),p=cJ(d,f.add(new nt(.1).mul(u)),u);return n>r?NM(p):p},Q1e=function(e,n){var[r,i]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,o]=uJ([r,i]);if(a===-1/0||o===1/0)return[r,i];if(a===o)return[a];var l=Math.max(n,2),c=hJ(new nt(o).sub(a).div(l-1),s,0),u=[...cJ(new nt(a),new nt(o),c),o];return s===!1&&(u=u.map(d=>Math.round(d))),r>i?NM(u):u},J1e=t=>t.rootProps.barCategoryGap,aC=t=>t.rootProps.stackOffset,fJ=t=>t.rootProps.reverseStackOrder,Vj=t=>t.options.chartName,Bj=t=>t.rootProps.syncId,pJ=t=>t.rootProps.syncMethod,$j=t=>t.options.eventEmitter,Sr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Wl={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},us={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},oC=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},Z1e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Wl.angleAxisId,includeHidden:!1,name:void 0,reversed:Wl.reversed,scale:Wl.scale,tick:Wl.tick,tickCount:void 0,ticks:void 0,type:Wl.type,unit:void 0},eTe={allowDataOverflow:us.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:us.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:us.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:us.scale,tick:us.tick,tickCount:us.tickCount,ticks:void 0,type:us.type,unit:void 0},tTe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Wl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Wl.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Wl.scale,tick:Wl.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},nTe={allowDataOverflow:us.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:us.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:us.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:us.scale,tick:us.tick,tickCount:us.tickCount,ticks:void 0,type:"category",unit:void 0},Uj=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?tTe:Z1e,zj=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?nTe:eTe,lC=t=>t.polarOptions,Hj=z([Pc,Cc,kr],tEe),mJ=z([lC,Hj],(t,e)=>{if(t!=null)return Th(t.innerRadius,e,0)}),gJ=z([lC,Hj],(t,e)=>{if(t!=null)return Th(t.outerRadius,e,e*.8)}),rTe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},yJ=z([lC],rTe);z([Uj,yJ],oC);var vJ=z([Hj,mJ,gJ],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});z([zj,vJ],oC);var bJ=z([Dt,lC,mJ,gJ,Pc,Cc],(t,e,n,r,i,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:a,cy:o,startAngle:l,endAngle:c}=e;return{cx:Th(a,i,i/2),cy:Th(o,s,s/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:c,clockWise:!1}}}),Bn=(t,e)=>e,cC=(t,e,n)=>n;function wJ(t){return t==null?void 0:t.id}function _J(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:s}=n,a=new Map;return t.forEach(o=>{var l,c=(l=o.data)!==null&&l!==void 0?l:r;if(!(c==null||c.length===0)){var u=wJ(o);c.forEach((d,f)=>{var p=s==null||i?f:String(Sn(d,s,null)),g=Sn(d,o.dataKey,0),y;a.has(p)?y=a.get(p):y={},Object.assign(y,{[u]:g}),a.set(p,y)})}}),Array.from(a.values())}function Wj(t){return t.stackId!=null&&t.dataKey!=null}var uC=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function hC(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function iTe(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var $n=t=>{var e=Dt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Gy=t=>t.tooltip.settings.axisId;function s5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function q1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s5(Object(n),!0).forEach(function(r){sTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sTe(t,e,n){return(e=aTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aTe(t){var e=oTe(t,"string");return typeof e=="symbol"?e:e+""}function oTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var LM=[0,"auto"],Hn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},xJ=(t,e)=>t.cartesianAxis.xAxis[e],kc=(t,e)=>{var n=xJ(t,e);return n??Hn},Wn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:LM,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:px},AJ=(t,e)=>t.cartesianAxis.yAxis[e],Rc=(t,e)=>{var n=AJ(t,e);return n??Wn},EJ={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Gj=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??EJ},vi=(t,e,n)=>{switch(e){case"xAxis":return kc(t,n);case"yAxis":return Rc(t,n);case"zAxis":return Gj(t,n);case"angleAxis":return Uj(t,n);case"radiusAxis":return zj(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},lTe=(t,e,n)=>{switch(e){case"xAxis":return kc(t,n);case"yAxis":return Rc(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},xx=(t,e,n)=>{switch(e){case"xAxis":return kc(t,n);case"yAxis":return Rc(t,n);case"angleAxis":return Uj(t,n);case"radiusAxis":return zj(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},SJ=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function TJ(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var Kj=t=>t.graphicalItems.cartesianItems,cTe=z([Bn,cC],TJ),PJ=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),Ax=z([Kj,vi,cTe],PJ,{memoizeOptions:{resultEqualityCheck:hC}}),CJ=z([Ax],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(Wj)),IJ=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),uTe=z([Ax],IJ),kJ=t=>t.map(e=>e.data).filter(Boolean).flat(1),hTe=z([Ax],kJ,{memoizeOptions:{resultEqualityCheck:hC}}),RJ=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},qj=z([hTe,sC],RJ),OJ=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Sn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:Sn(i,r)}))):t.map(r=>({value:r})),dC=z([qj,vi,Ax],OJ);function DJ(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function tS(t){if(Xo(t)||t instanceof Date){var e=Number(t);if(sr(e))return e}}function a5(t){if(Array.isArray(t)){var e=[tS(t[0]),tS(t[1])];return Ph(e)?e:void 0}var n=tS(t);if(n!=null)return[n,n]}function xc(t){return t.map(tS).filter(Abe)}function dTe(t,e,n){return!n||typeof e!="number"||qo(e)?[]:n.length?xc(n.flatMap(r=>{var i=Sn(t,r.dataKey),s,a;if(Array.isArray(i)?[s,a]=i:s=a=i,!(!sr(s)||!sr(a)))return[e-s,e+a]})):[]}var Un=t=>{var e=$n(t),n=Gy(t);return xx(t,e,n)},Ex=z([Un],t=>t==null?void 0:t.dataKey),fTe=z([CJ,sC,Un],_J),MJ=(t,e,n,r)=>{var i={},s=e.reduce((a,o)=>(o.stackId==null||(a[o.stackId]==null&&(a[o.stackId]=[]),a[o.stackId].push(o)),a),i);return Object.fromEntries(Object.entries(s).map(a=>{var[o,l]=a,c=r?[...l].reverse():l,u=c.map(wJ);return[o,{stackedData:B_e(t,u,n),graphicalItems:c}]}))},pTe=z([fTe,CJ,aC,fJ],MJ),NJ=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:s}=e;if(r==null&&n!=="zAxis"){var a=z_e(t,i,s);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},mTe=z([vi],t=>t.allowDataOverflow),Xj=t=>{var e;if(t==null||!("domain"in t))return LM;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=xc(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:LM},LJ=z([vi],Xj),jJ=z([LJ,mTe],ZQ),gTe=z([pTe,$h,Bn,jJ],NJ,{memoizeOptions:{resultEqualityCheck:uC}}),Yj=t=>t.errorBars,yTe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>DJ(n,r)),X1=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),a=Math.min(...s),o=Math.max(...s);return[a,o]}},FJ=(t,e,n,r,i)=>{var s,a;if(n.length>0&&t.forEach(o=>{n.forEach(l=>{var c,u,d=(c=r[l.id])===null||c===void 0?void 0:c.filter(b=>DJ(i,b)),f=Sn(o,(u=e.dataKey)!==null&&u!==void 0?u:l.dataKey),p=dTe(o,f,d);if(p.length>=2){var g=Math.min(...p),y=Math.max(...p);(s==null||g<s)&&(s=g),(a==null||y>a)&&(a=y)}var v=a5(f);v!=null&&(s=s==null?v[0]:Math.min(s,v[0]),a=a==null?v[1]:Math.max(a,v[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(o=>{var l=a5(Sn(o,e.dataKey));l!=null&&(s=s==null?l[0]:Math.min(s,l[0]),a=a==null?l[1]:Math.max(a,l[1]))}),sr(s)&&sr(a))return[s,a]},vTe=z([qj,vi,uTe,Yj,Bn],FJ,{memoizeOptions:{resultEqualityCheck:uC}});function bTe(t){var{value:e}=t;if(Xo(e)||e instanceof Date)return e}var wTe=(t,e,n)=>{var r=t.map(bTe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&IX(r))?vQ(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},VJ=t=>t.referenceElements.dots,Ky=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),_Te=z([VJ,Bn,cC],Ky),BJ=t=>t.referenceElements.areas,xTe=z([BJ,Bn,cC],Ky),$J=t=>t.referenceElements.lines,ATe=z([$J,Bn,cC],Ky),UJ=(t,e)=>{var n=xc(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},ETe=z(_Te,Bn,UJ),zJ=(t,e)=>{var n=xc(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},STe=z([xTe,Bn],zJ);function TTe(t){var e;if(t.x!=null)return xc([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:xc(n)}function PTe(t){var e;if(t.y!=null)return xc([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:xc(n)}var HJ=(t,e)=>{var n=t.flatMap(r=>e==="xAxis"?TTe(r):PTe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},CTe=z([ATe,Bn],HJ),ITe=z(ETe,CTe,STe,(t,e,n)=>X1(t,n,e)),WJ=(t,e,n,r,i,s,a,o)=>{if(n!=null)return n;var l=a==="vertical"&&o==="xAxis"||a==="horizontal"&&o==="yAxis",c=l?X1(r,s,i):X1(s,i);return $1e(e,c,t.allowDataOverflow)},kTe=z([vi,LJ,jJ,gTe,vTe,ITe,Dt,Bn],WJ,{memoizeOptions:{resultEqualityCheck:uC}}),RTe=[0,1],GJ=(t,e,n,r,i,s,a)=>{if(!((t==null||n==null||n.length===0)&&a===void 0)){var{dataKey:o,type:l}=t,c=Fh(e,s);if(c&&o==null){var u;return vQ(0,(u=n==null?void 0:n.length)!==null&&u!==void 0?u:0)}return l==="category"?wTe(r,t,c):i==="expand"?RTe:a}},Qj=z([vi,Dt,qj,dC,aC,Bn,kTe],GJ),KJ=(t,e,n,r,i)=>{if(t!=null){var{scale:s,type:a}=t;if(s==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":a==="category"?"band":"linear";if(typeof s=="string"){var o="scale".concat(cx(s));return o in m0?o:"point"}}},Sx=z([vi,Dt,SJ,Vj,Bn],KJ);function OTe(t){if(t!=null){if(t in m0)return m0[t]();var e="scale".concat(cx(t));if(e in m0)return m0[e]()}}function Jj(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=OTe(e);if(i!=null){var s=i.domain(n).range(r);return L_e(s),s}}}var qJ=(t,e,n)=>{var r=Xj(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Ph(t))return Y1e(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Ph(t))return Q1e(t,e.tickCount,e.allowDecimals)}},Zj=z([Qj,xx,Sx],qJ),XJ=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&Ph(e)&&Array.isArray(n)&&n.length>0){var i=e[0],s=n[0],a=e[1],o=n[n.length-1];return[Math.min(i,s),Math.max(a,o)]}return e},DTe=z([vi,Qj,Zj,Bn],XJ),MTe=z(dC,vi,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(xc(t.map(o=>o.value))).sort((o,l)=>o-l);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var s=0;s<r.length-1;s++){var a=r[s+1]-r[s];n=Math.min(n,a)}return n/i}}),YJ=z(MTe,Dt,J1e,kr,(t,e,n,r)=>r,(t,e,n,r,i)=>{if(!sr(t))return 0;var s=e==="vertical"?r.height:r.width;if(i==="gap")return t*s/2;if(i==="no-gap"){var a=Th(n,t*s),o=t*s/2;return o-a-(o-a)/s*a}return 0}),NTe=(t,e)=>{var n=kc(t,e);return n==null||typeof n.padding!="string"?0:YJ(t,"xAxis",e,n.padding)},LTe=(t,e)=>{var n=Rc(t,e);return n==null||typeof n.padding!="string"?0:YJ(t,"yAxis",e,n.padding)},jTe=z(kc,NTe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),FTe=z(Rc,LTe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),VTe=z([kr,jTe,WP,HP,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),BTe=z([kr,Dt,FTe,WP,HP,(t,e,n)=>n],(t,e,n,r,i,s)=>{var{padding:a}=i;return s?[r.height-a.bottom,a.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),Tx=(t,e,n,r)=>{var i;switch(e){case"xAxis":return VTe(t,n,r);case"yAxis":return BTe(t,n,r);case"zAxis":return(i=Gj(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return yJ(t);case"radiusAxis":return vJ(t,n);default:return}},QJ=z([vi,Tx],oC),qy=z([vi,Sx,DTe,QJ],Jj);z([Ax,Yj,Bn],yTe);function JJ(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var fC=(t,e)=>e,pC=(t,e,n)=>n,$Te=z(UP,fC,pC,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(JJ)),UTe=z(zP,fC,pC,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(JJ)),ZJ=(t,e)=>({width:t.width,height:e.height}),zTe=(t,e)=>{var n=typeof e.width=="number"?e.width:px;return{width:n,height:t.height}},HTe=z(kr,kc,ZJ),WTe=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},GTe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},KTe=z(Cc,kr,$Te,fC,pC,(t,e,n,r,i)=>{var s={},a;return n.forEach(o=>{var l=ZJ(e,o);a==null&&(a=WTe(e,r,t));var c=r==="top"&&!i||r==="bottom"&&i;s[o.id]=a-Number(c)*l.height,a+=(c?-1:1)*l.height}),s}),qTe=z(Pc,kr,UTe,fC,pC,(t,e,n,r,i)=>{var s={},a;return n.forEach(o=>{var l=zTe(e,o);a==null&&(a=GTe(e,r,t));var c=r==="left"&&!i||r==="right"&&i;s[o.id]=a-Number(c)*l.width,a+=(c?-1:1)*l.width}),s}),XTe=(t,e)=>{var n=kc(t,e);if(n!=null)return KTe(t,n.orientation,n.mirror)},YTe=z([kr,kc,XTe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),QTe=(t,e)=>{var n=Rc(t,e);if(n!=null)return qTe(t,n.orientation,n.mirror)},JTe=z([kr,Rc,QTe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),ZTe=z(kr,Rc,(t,e)=>{var n=typeof e.width=="number"?e.width:px;return{width:n,height:t.height}}),eZ=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:a}=n,o=Fh(t,r),l=e.map(c=>c.value);if(a&&o&&s==="category"&&i&&IX(l))return l}},eF=z([Dt,dC,vi,Bn],eZ),tZ=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,a=Fh(t,r);if(a&&(i==="number"||s!=="auto"))return e.map(o=>o.value)}},tF=z([Dt,dC,xx,Bn],tZ),o5=z([Dt,lTe,Sx,qy,eF,tF,Tx,Zj,Bn],(t,e,n,r,i,s,a,o,l)=>{if(e!=null){var c=Fh(t,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:s,duplicateDomain:i,isCategorical:c,niceTicks:o,range:a,realScaleType:n,scale:r}}}),ePe=(t,e,n,r,i,s,a,o,l)=>{if(!(e==null||r==null)){var c=Fh(t,l),{type:u,ticks:d,tickCount:f}=e,p=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,g=u==="category"&&r.bandwidth?r.bandwidth()/p:0;g=l==="angleAxis"&&s!=null&&s.length>=2?Js(s[0]-s[1])*2*g:g;var y=d||i;if(y){var v=y.map((b,_)=>{var w=a?a.indexOf(b):b;return{index:_,coordinate:r(w)+g,value:b,offset:g}});return v.filter(b=>sr(b.coordinate))}return c&&o?o.map((b,_)=>({coordinate:r(b)+g,value:b,index:_,offset:g})).filter(b=>sr(b.coordinate)):r.ticks?r.ticks(f).map(b=>({coordinate:r(b)+g,value:b,offset:g})):r.domain().map((b,_)=>({coordinate:r(b)+g,value:a?a[b]:b,index:_,offset:g}))}},nZ=z([Dt,xx,Sx,qy,Zj,Tx,eF,tF,Bn],ePe),tPe=(t,e,n,r,i,s,a)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var o=Fh(t,a),{tickCount:l}=e,c=0;return c=a==="angleAxis"&&(r==null?void 0:r.length)>=2?Js(r[0]-r[1])*2*c:c,o&&s?s.map((u,d)=>({coordinate:n(u)+c,value:u,index:d,offset:c})):n.ticks?n.ticks(l).map(u=>({coordinate:n(u)+c,value:u,offset:c})):n.domain().map((u,d)=>({coordinate:n(u)+c,value:i?i[u]:u,index:d,offset:c}))}},mC=z([Dt,xx,qy,Tx,eF,tF,Bn],tPe),gC=z(vi,qy,(t,e)=>{if(!(t==null||e==null))return q1(q1({},t),{},{scale:e})}),nPe=z([vi,Sx,Qj,QJ],Jj),rPe=z((t,e,n)=>Gj(t,n),nPe,(t,e)=>{if(!(t==null||e==null))return q1(q1({},t),{},{scale:e})}),iPe=z([Dt,UP,zP],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),rZ=t=>t.options.defaultTooltipEventType,iZ=t=>t.options.validateTooltipEventTypes;function sZ(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function nF(t,e){var n=rZ(t),r=iZ(t);return sZ(e,n,r)}function sPe(t){return pe(e=>nF(e,t))}var aZ=(t,e)=>{var n,r=Number(e);if(!(qo(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},aPe=t=>t.tooltip.settings,ru={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},oPe={itemInteraction:{click:ru,hover:ru},axisInteraction:{click:ru,hover:ru},keyboardInteraction:ru,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},oZ=Bi({name:"tooltip",initialState:oPe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:jt()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Ba(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:jt()},removeTooltipEntrySettings:{reducer(t,e){var n=Ba(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:jt()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:lPe,replaceTooltipEntrySettings:cPe,removeTooltipEntrySettings:uPe,setTooltipSettingsState:hPe,setActiveMouseOverItemIndex:lZ,mouseLeaveItem:dPe,mouseLeaveChart:cZ,setActiveClickItemIndex:fPe,setMouseOverAxisIndex:uZ,setMouseClickAxisIndex:pPe,setSyncInteraction:jM,setKeyboardInteraction:FM}=oZ.actions,mPe=oZ.reducer;function l5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function VA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l5(Object(n),!0).forEach(function(r){gPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gPe(t,e,n){return(e=yPe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yPe(t){var e=vPe(t,"string");return typeof e=="symbol"?e:e+""}function vPe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bPe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function wPe(t){return t.index!=null}var hZ=(t,e,n,r)=>{if(e==null)return ru;var i=bPe(t,e,n);if(i==null)return ru;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(wPe(i)){if(s)return VA(VA({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return VA(VA({},ru),{},{coordinate:i.coordinate})};function _Pe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function xPe(t,e){var n=_Pe(t),r=e[0],i=e[1];if(n===void 0)return!1;var s=Math.min(r,i),a=Math.max(r,i);return n>=s&&n<=a}function APe(t,e,n){if(n==null||e==null)return!0;var r=Sn(t,e);return r==null||!Ph(n)?!0:xPe(r,n)}var rF=(t,e,n,r)=>{var i=t==null?void 0:t.index;if(i==null)return null;var s=Number(i);if(!sr(s))return i;var a=0,o=1/0;e.length>0&&(o=e.length-1);var l=Math.max(a,Math.min(s,o)),c=e[l];return c==null||APe(c,n,r)?String(l):null},dZ=(t,e,n,r,i,s,a,o)=>{if(!(s==null||o==null)){var l=a[0],c=l==null?void 0:o(l.positions,s);if(c!=null)return c;var u=i==null?void 0:i[Number(s)];if(u)switch(n){case"horizontal":return{x:u.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:u.coordinate}}}},fZ=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(s=>{var a;return((a=s.settings)===null||a===void 0?void 0:a.dataKey)===i})},Px=t=>t.options.tooltipPayloadSearcher,Xy=t=>t.tooltip;function c5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function u5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c5(Object(n),!0).forEach(function(r){EPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function EPe(t,e,n){return(e=SPe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SPe(t){var e=TPe(t,"string");return typeof e=="symbol"?e:e+""}function TPe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PPe(t,e){return t??e}var pZ=(t,e,n,r,i,s,a)=>{if(!(e==null||s==null)){var{chartData:o,computedData:l,dataStartIndex:c,dataEndIndex:u}=n,d=[];return t.reduce((f,p)=>{var g,{dataDefinedOnItem:y,settings:v}=p,b=PPe(y,o),_=Array.isArray(b)?FY(b,c,u):b,w=(g=v==null?void 0:v.dataKey)!==null&&g!==void 0?g:r,T=v==null?void 0:v.nameKey,P;if(r&&Array.isArray(_)&&!Array.isArray(_[0])&&a==="axis"?P=kX(_,r,i):P=s(_,e,l,T),Array.isArray(P))P.forEach(C=>{var I=u5(u5({},v),{},{name:C.name,unit:C.unit,color:void 0,fill:void 0});f.push(VU({tooltipEntrySettings:I,dataKey:C.dataKey,payload:C.payload,value:Sn(C.payload,C.dataKey),name:C.name}))});else{var O;f.push(VU({tooltipEntrySettings:v,dataKey:w,payload:P,value:Sn(P,w),name:(O=Sn(P,T))!==null&&O!==void 0?O:v==null?void 0:v.name}))}return f},d)}},iF=z([Un,Dt,SJ,Vj,$n],KJ),CPe=z([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),IPe=z([$n,Gy],TJ),Cx=z([CPe,Un,IPe],PJ,{memoizeOptions:{resultEqualityCheck:hC}}),kPe=z([Cx],t=>t.filter(Wj)),RPe=z([Cx],kJ,{memoizeOptions:{resultEqualityCheck:hC}}),Yy=z([RPe,$h],RJ),OPe=z([kPe,$h,Un],_J),sF=z([Yy,Un,Cx],OJ),mZ=z([Un],Xj),DPe=z([Un],t=>t.allowDataOverflow),gZ=z([mZ,DPe],ZQ),MPe=z([Cx],t=>t.filter(Wj)),NPe=z([OPe,MPe,aC,fJ],MJ),LPe=z([NPe,$h,$n,gZ],NJ),jPe=z([Cx],IJ),FPe=z([Yy,Un,jPe,Yj,$n],FJ,{memoizeOptions:{resultEqualityCheck:uC}}),VPe=z([VJ,$n,Gy],Ky),BPe=z([VPe,$n],UJ),$Pe=z([BJ,$n,Gy],Ky),UPe=z([$Pe,$n],zJ),zPe=z([$J,$n,Gy],Ky),HPe=z([zPe,$n],HJ),WPe=z([BPe,HPe,UPe],X1),GPe=z([Un,mZ,gZ,LPe,FPe,WPe,Dt,$n],WJ),Ix=z([Un,Dt,Yy,sF,aC,$n,GPe],GJ),KPe=z([Ix,Un,iF],qJ),qPe=z([Un,Ix,KPe,$n],XJ),yZ=t=>{var e=$n(t),n=Gy(t),r=!1;return Tx(t,e,n,r)},vZ=z([Un,yZ],oC),bZ=z([Un,iF,qPe,vZ],Jj),XPe=z([Dt,sF,Un,$n],eZ),YPe=z([Dt,sF,Un,$n],tZ),QPe=(t,e,n,r,i,s,a,o)=>{if(e){var{type:l}=e,c=Fh(t,o);if(r){var u=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,d=l==="category"&&r.bandwidth?r.bandwidth()/u:0;return d=o==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?Js(i[0]-i[1])*2*d:d,c&&a?a.map((f,p)=>({coordinate:r(f)+d,value:f,index:p,offset:d})):r.domain().map((f,p)=>({coordinate:r(f)+d,value:s?s[f]:f,index:p,offset:d}))}}},Oc=z([Dt,Un,iF,bZ,yZ,XPe,YPe,$n],QPe),aF=z([rZ,iZ,aPe],(t,e,n)=>sZ(n.shared,t,e)),wZ=t=>t.tooltip.settings.trigger,oF=t=>t.tooltip.settings.defaultIndex,kx=z([Xy,aF,wZ,oF],hZ),Cy=z([kx,Yy,Ex,Ix],rF),_Z=z([Oc,Cy],aZ),JPe=z([kx],t=>{if(t)return t.dataKey});z([kx],t=>{if(t)return t.graphicalItemId});var xZ=z([Xy,aF,wZ,oF],fZ),ZPe=z([Pc,Cc,Dt,kr,Oc,oF,xZ,Px],dZ),eCe=z([kx,ZPe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),tCe=z([kx],t=>t.active),nCe=z([xZ,Cy,$h,Ex,_Z,Px,aF],pZ),rCe=z([nCe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function h5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function d5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h5(Object(n),!0).forEach(function(r){iCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iCe(t,e,n){return(e=sCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sCe(t){var e=aCe(t,"string");return typeof e=="symbol"?e:e+""}function aCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oCe=()=>pe(Un),lCe=()=>{var t=oCe(),e=pe(Oc),n=pe(bZ);return C1(!t||!n?void 0:d5(d5({},t),{},{scale:n}),e)};function f5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ip(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f5(Object(n),!0).forEach(function(r){cCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cCe(t,e,n){return(e=uCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uCe(t){var e=hCe(t,"string");return typeof e=="symbol"?e:e+""}function hCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dCe=(t,e,n,r)=>{var i=e.find(s=>s&&s.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},fCe=(t,e,n,r)=>{var i=e.find(c=>c&&c.index===n);if(i){if(t==="centric"){var s=i.coordinate,{radius:a}=r;return Ip(Ip(Ip({},r),Er(r.cx,r.cy,a,s)),{},{angle:s,radius:a})}var o=i.coordinate,{angle:l}=r;return Ip(Ip(Ip({},r),Er(r.cx,r.cy,o,l)),{},{angle:l,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function pCe(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var AZ=(t,e,n,r,i)=>{var s,a=-1,o=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(o<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var l=0;l<o;l++){var c=l>0?n[l-1].coordinate:n[o-1].coordinate,u=n[l].coordinate,d=l>=o-1?n[0].coordinate:n[l+1].coordinate,f=void 0;if(Js(u-c)!==Js(d-u)){var p=[];if(Js(d-u)===Js(i[1]-i[0])){f=d;var g=u+i[1]-i[0];p[0]=Math.min(g,(g+c)/2),p[1]=Math.max(g,(g+c)/2)}else{f=c;var y=d+i[1]-i[0];p[0]=Math.min(u,(y+u)/2),p[1]=Math.max(u,(y+u)/2)}var v=[Math.min(u,(f+u)/2),Math.max(u,(f+u)/2)];if(t>v[0]&&t<=v[1]||t>=p[0]&&t<=p[1]){({index:a}=n[l]);break}}else{var b=Math.min(c,d),_=Math.max(c,d);if(t>(b+u)/2&&t<=(_+u)/2){({index:a}=n[l]);break}}}else if(e){for(var w=0;w<o;w++)if(w===0&&t<=(e[w].coordinate+e[w+1].coordinate)/2||w>0&&w<o-1&&t>(e[w].coordinate+e[w-1].coordinate)/2&&t<=(e[w].coordinate+e[w+1].coordinate)/2||w===o-1&&t>(e[w].coordinate+e[w-1].coordinate)/2){({index:a}=e[w]);break}}return a},mCe=()=>pe(Vj),lF=(t,e)=>e,EZ=(t,e,n)=>n,cF=(t,e,n,r)=>r,gCe=z(Oc,t=>OP(t,e=>e.coordinate)),uF=z([Xy,lF,EZ,cF],hZ),hF=z([uF,Yy,Ex,Ix],rF),yCe=(t,e,n)=>{if(e!=null){var r=Xy(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},SZ=z([Xy,lF,EZ,cF],fZ),Y1=z([Pc,Cc,Dt,kr,Oc,cF,SZ,Px],dZ),vCe=z([uF,Y1],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),TZ=z([Oc,hF],aZ),bCe=z([SZ,hF,$h,Ex,TZ,Px,lF],pZ),wCe=z([uF,hF],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),_Ce=(t,e,n,r,i,s,a)=>{if(!(!t||!n||!r||!i)&&pCe(t,a)){var o=H_e(t,e),l=AZ(o,s,i,n,r),c=dCe(e,i,l,t);return{activeIndex:String(l),activeCoordinate:c}}},xCe=(t,e,n,r,i,s,a)=>{if(!(!t||!r||!i||!s||!n)){var o=aEe(t,n);if(o){var l=W_e(o,e),c=AZ(l,a,s,r,i),u=fCe(e,s,c,o);return{activeIndex:String(c),activeCoordinate:u}}}},ACe=(t,e,n,r,i,s,a,o)=>{if(!(!t||!e||!r||!i||!s))return e==="horizontal"||e==="vertical"?_Ce(t,e,r,i,s,a,o):xCe(t,e,n,r,i,s,a)},ECe=z(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElementId:r.elementId}}),SCe=z(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Sr)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:iTe}});function p5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function m5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p5(Object(n),!0).forEach(function(r){TCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TCe(t,e,n){return(e=PCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PCe(t){var e=CCe(t,"string");return typeof e=="symbol"?e:e+""}function CCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ICe={},kCe={zIndexMap:Object.values(Sr).reduce((t,e)=>m5(m5({},t),{},{[e]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),ICe)},RCe=new Set(Object.values(Sr));function OCe(t){return RCe.has(t)}var PZ=Bi({name:"zIndex",initialState:kCe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:jt()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!OCe(n)&&delete t.zIndexMap[n])},prepare:jt()},registerZIndexPortalId:{reducer:(t,e)=>{var{zIndex:n,elementId:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElementId=r:t.zIndexMap[n].elementId=r:t.zIndexMap[n]={consumers:0,elementId:i?void 0:r,panoramaElementId:i?r:void 0}},prepare:jt()},unregisterZIndexPortalId:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElementId=void 0:t.zIndexMap[n].elementId=void 0)},prepare:jt()}}}),{registerZIndexPortal:DCe,unregisterZIndexPortal:MCe,registerZIndexPortalId:NCe,unregisterZIndexPortalId:LCe}=PZ.actions,jCe=PZ.reducer;function Xa(t){var{zIndex:e,children:n}=t,r=vxe(),i=r&&e!==void 0&&e!==0,s=Qr(),a=Yt();x.useLayoutEffect(()=>i?(a(DCe({zIndex:e})),()=>{a(MCe({zIndex:e}))}):ux,[a,e,i]);var o=pe(c=>ECe(c,e,s));if(!i)return n;if(!o)return null;var l=document.getElementById(o);return l?$T.createPortal(n,l):null}function VM(){return VM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VM.apply(null,arguments)}function g5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g5(Object(n),!0).forEach(function(r){FCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FCe(t,e,n){return(e=VCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VCe(t){var e=BCe(t,"string");return typeof e=="symbol"?e:e+""}function BCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Ce(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return x.isValidElement(e)?x.cloneElement(e,r):x.createElement(n,r)}function UCe(t){var e,{coordinate:n,payload:r,index:i,offset:s,tooltipAxisBandSize:a,layout:o,cursor:l,tooltipEventType:c,chartName:u}=t,d=n,f=r,p=i;if(!l||!d||u!=="ScatterChart"&&c!=="axis")return null;var g,y,v;if(u==="ScatterChart")g=d,y=wAe,v=Sr.cursorLine;else if(u==="BarChart")g=_Ae(o,d,s,a),y=hQ,v=Sr.cursorRectangle;else if(o==="radial"&&OX(d)){var{cx:b,cy:_,radius:w,startAngle:T,endAngle:P}=dQ(d);g={cx:b,cy:_,startAngle:T,endAngle:P,innerRadius:w,outerRadius:w},y=pQ,v=Sr.cursorLine}else g={points:uEe(o,d,s)},y=fj,v=Sr.cursorLine;var O=typeof l=="object"&&"className"in l?l.className:void 0,C=BA(BA(BA(BA({stroke:"#ccc",pointerEvents:"none"},s),g),lx(l)),{},{payload:f,payloadIndex:p,className:it("recharts-tooltip-cursor",O)});return x.createElement(Xa,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:v},x.createElement($Ce,{cursor:l,cursorComp:y,cursorProps:C}))}function zCe(t){var e=lCe(),n=JY(),r=GP(),i=mCe();return e==null||n==null||r==null||i==null?null:x.createElement(UCe,VM({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var CZ=x.createContext(null),HCe=()=>x.useContext(CZ),IZ={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new i(u,d||l,f),g=n?n+c:c;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],p]:l._events[g].push(p):(l._events[g]=p,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,p=d.length,g=new Array(p);f<p;f++)g[f]=d[f].fn;return g},o.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},o.prototype.emit=function(c,u,d,f,p,g){var y=n?n+c:c;if(!this._events[y])return!1;var v=this._events[y],b=arguments.length,_,w;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),b){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,d),!0;case 4:return v.fn.call(v.context,u,d,f),!0;case 5:return v.fn.call(v.context,u,d,f,p),!0;case 6:return v.fn.call(v.context,u,d,f,p,g),!0}for(w=1,_=new Array(b-1);w<b;w++)_[w-1]=arguments[w];v.fn.apply(v.context,_)}else{var T=v.length,P;for(w=0;w<T;w++)switch(v[w].once&&this.removeListener(c,v[w].fn,void 0,!0),b){case 1:v[w].fn.call(v[w].context);break;case 2:v[w].fn.call(v[w].context,u);break;case 3:v[w].fn.call(v[w].context,u,d);break;case 4:v[w].fn.call(v[w].context,u,d,f);break;default:if(!_)for(P=1,_=new Array(b-1);P<b;P++)_[P-1]=arguments[P];v[w].fn.apply(v[w].context,_)}}return!0},o.prototype.on=function(c,u,d){return s(this,c,u,d,!1)},o.prototype.once=function(c,u,d){return s(this,c,u,d,!0)},o.prototype.removeListener=function(c,u,d,f){var p=n?n+c:c;if(!this._events[p])return this;if(!u)return a(this,p),this;var g=this._events[p];if(g.fn)g.fn===u&&(!f||g.once)&&(!d||g.context===d)&&a(this,p);else{for(var y=0,v=[],b=g.length;y<b;y++)(g[y].fn!==u||f&&!g[y].once||d&&g[y].context!==d)&&v.push(g[y]);v.length?this._events[p]=v.length===1?v[0]:v:a(this,p)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&a(this,u)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(IZ);var WCe=IZ.exports;const GCe=Sc(WCe);var Ub=new GCe,BM="recharts.syncEvent.tooltip",y5="recharts.syncEvent.brush";function dF(t,e){if(e){var n=Number.parseInt(e,10);if(!qo(n))return t==null?void 0:t[n]}}var KCe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},kZ=Bi({name:"options",initialState:KCe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),qCe=kZ.reducer,{createEventEmitter:XCe}=kZ.actions;function YCe(t){return t.tooltip.syncInteraction}var QCe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},RZ=Bi({name:"chartData",initialState:QCe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:v5,setDataStartEndIndexes:JCe,setComputedData:vNe}=RZ.actions,ZCe=RZ.reducer,eIe=["x","y"];function b5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b5(Object(n),!0).forEach(function(r){tIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tIe(t,e,n){return(e=nIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nIe(t){var e=rIe(t,"string");return typeof e=="symbol"?e:e+""}function rIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iIe(t,e){if(t==null)return{};var n,r,i=sIe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sIe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function aIe(){var t=pe(Bj),e=pe($j),n=Yt(),r=pe(pJ),i=pe(Oc),s=GP(),a=mx(),o=pe(l=>l.rootProps.className);x.useEffect(()=>{if(t==null)return ux;var l=(c,u,d)=>{if(e!==d&&t===c){if(r==="index"){var f;if(a&&u!==null&&u!==void 0&&(f=u.payload)!==null&&f!==void 0&&f.coordinate&&u.payload.sourceViewBox){var p=u.payload.coordinate,{x:g,y}=p,v=iIe(p,eIe),{x:b,y:_,width:w,height:T}=u.payload.sourceViewBox,P=kp(kp({},v),{},{x:a.x+(w?(g-b)/w:0)*a.width,y:a.y+(T?(y-_)/T:0)*a.height});n(kp(kp({},u),{},{payload:kp(kp({},u.payload),{},{coordinate:P})}))}else n(u);return}if(i!=null){var O;if(typeof r=="function"){var C={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},I=r(i,C);O=i[I]}else r==="value"&&(O=i.find(Z=>String(Z.value)===u.payload.label));var{coordinate:M}=u.payload;if(O==null||u.payload.active===!1||M==null||a==null){n(jM({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:L,y:N}=M,F=Math.min(L,a.x+a.width),j=Math.min(N,a.y+a.height),K={x:s==="horizontal"?O.coordinate:F,y:s==="horizontal"?j:O.coordinate},te=jM({active:u.payload.active,coordinate:K,dataKey:u.payload.dataKey,index:String(O.index),label:u.payload.label,sourceViewBox:u.payload.sourceViewBox,graphicalItemId:u.payload.graphicalItemId});n(te)}}};return Ub.on(BM,l),()=>{Ub.off(BM,l)}},[o,n,e,t,r,i,s,a])}function oIe(){var t=pe(Bj),e=pe($j),n=Yt();x.useEffect(()=>{if(t==null)return ux;var r=(i,s,a)=>{e!==a&&t===i&&n(JCe(s))};return Ub.on(y5,r),()=>{Ub.off(y5,r)}},[n,e,t])}function lIe(){var t=Yt();x.useEffect(()=>{t(XCe())},[t]),aIe(),oIe()}function cIe(t,e,n,r,i,s){var a=pe(p=>yCe(p,t,e)),o=pe($j),l=pe(Bj),c=pe(pJ),u=pe(YCe),d=u==null?void 0:u.active,f=mx();x.useEffect(()=>{if(!d&&l!=null&&o!=null){var p=jM({active:s,coordinate:n,dataKey:a,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:f,graphicalItemId:void 0});Ub.emit(BM,l,p,o)}},[d,n,a,i,r,o,l,c,s,f])}function w5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w5(Object(n),!0).forEach(function(r){uIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uIe(t,e,n){return(e=hIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hIe(t){var e=dIe(t,"string");return typeof e=="symbol"?e:e+""}function dIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fIe(t){return t.dataKey}function pIe(t,e){return x.isValidElement(t)?x.cloneElement(t,e):typeof t=="function"?x.createElement(t,e):x.createElement(Zxe,e)}var x5=[],mIe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Xh(t){var e,n,r=ar(t,mIe),{active:i,allowEscapeViewBox:s,animationDuration:a,animationEasing:o,content:l,filterNull:c,isAnimationActive:u,offset:d,payloadUniqBy:f,position:p,reverseDirection:g,useTranslate3d:y,wrapperStyle:v,cursor:b,shared:_,trigger:w,defaultIndex:T,portal:P,axisId:O}=r,C=Yt(),I=typeof T=="number"?String(T):T;x.useEffect(()=>{C(hPe({shared:_,trigger:w,axisId:O,active:i,defaultIndex:I}))},[C,_,w,O,i,I]);var M=mx(),L=aQ(),N=sPe(_),{activeIndex:F,isActive:j}=(e=pe(Ee=>wCe(Ee,N,w,I)))!==null&&e!==void 0?e:{},K=pe(Ee=>bCe(Ee,N,w,I)),te=pe(Ee=>TZ(Ee,N,w,I)),Z=pe(Ee=>vCe(Ee,N,w,I)),G=K,U=HCe(),H=(n=i??j)!==null&&n!==void 0?n:!1,[re,ve]=lY([G,H]),de=N==="axis"?te:void 0;cIe(N,w,Z,de,F,H);var xe=P??U;if(xe==null||M==null||N==null)return null;var je=G??x5;H||(je=x5),c&&je.length&&(je=YX(je.filter(Ee=>Ee.value!=null&&(Ee.hide!==!0||r.includeHidden)),f,fIe));var dt=je.length>0,ft=x.createElement(aAe,{allowEscapeViewBox:s,animationDuration:a,animationEasing:o,isAnimationActive:u,active:H,coordinate:Z,hasPayload:dt,offset:d,position:p,reverseDirection:g,useTranslate3d:y,viewBox:M,wrapperStyle:v,lastBoundingBox:re,innerRef:ve,hasPortalFromProps:!!P},pIe(l,_5(_5({},r),{},{payload:je,label:de,active:H,activeIndex:F,coordinate:Z,accessibilityLayer:L})));return x.createElement(x.Fragment,null,$T.createPortal(ft,xe),H&&x.createElement(zCe,{cursor:b,tooltipEventType:N,coordinate:Z,payload:je,index:F}))}var OZ=t=>null;OZ.displayName="Cell";function gIe(t,e,n){return(e=yIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yIe(t){var e=vIe(t,"string");return typeof e=="symbol"?e:e+""}function vIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class bIe{constructor(e){gIe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function A5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wIe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A5(Object(n),!0).forEach(function(r){_Ie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Ie(t,e,n){return(e=xIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xIe(t){var e=AIe(t,"string");return typeof e=="symbol"?e:e+""}function AIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var EIe={cacheSize:2e3,enableCache:!0},DZ=wIe({},EIe),E5=new bIe(DZ.cacheSize),SIe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},S5="recharts_measurement_span";function TIe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",s=e.fontStyle||"",a=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(a,"|").concat(o)}var T5=(t,e)=>{try{var n=document.getElementById(S5);n||(n=document.createElement("span"),n.setAttribute("id",S5),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,SIe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},F0=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||yx.isSsr)return{width:0,height:0};if(!DZ.enableCache)return T5(e,n);var r=TIe(e,n),i=E5.get(r);if(i)return i;var s=T5(e,n);return E5.set(r,s),s},P5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,C5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,PIe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,CIe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,MZ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},IIe=Object.keys(MZ),hm="NaN";function kIe(t,e){return t*MZ[e]}class Ii{static parse(e){var n,[,r,i]=(n=CIe.exec(e))!==null&&n!==void 0?n:[];return new Ii(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,qo(e)&&(this.unit=""),n!==""&&!PIe.test(n)&&(this.num=NaN,this.unit=""),IIe.includes(n)&&(this.num=kIe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Ii(NaN,""):new Ii(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Ii(NaN,""):new Ii(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ii(NaN,""):new Ii(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ii(NaN,""):new Ii(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return qo(this.num)}}function NZ(t){if(t.includes(hm))return hm;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,s]=(n=P5.exec(e))!==null&&n!==void 0?n:[],a=Ii.parse(r??""),o=Ii.parse(s??""),l=i==="*"?a.multiply(o):a.divide(o);if(l.isNaN())return hm;e=e.replace(P5,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var c,[,u,d,f]=(c=C5.exec(e))!==null&&c!==void 0?c:[],p=Ii.parse(u??""),g=Ii.parse(f??""),y=d==="+"?p.add(g):p.subtract(g);if(y.isNaN())return hm;e=e.replace(C5,y.toString())}return e}var I5=/\(([^()]*)\)/;function RIe(t){for(var e=t,n;(n=I5.exec(e))!=null;){var[,r]=n;e=e.replace(I5,NZ(r))}return e}function OIe(t){var e=t.replace(/\s+/g,"");return e=RIe(e),e=NZ(e),e}function DIe(t){try{return OIe(t)}catch{return hm}}function _k(t){var e=DIe(t.slice(5,-1));return e===hm?"":e}var MIe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],NIe=["dx","dy","angle","className","breakAll"];function $M(){return $M=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$M.apply(null,arguments)}function k5(t,e){if(t==null)return{};var n,r,i=LIe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function LIe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var LZ=/[ \f\n\r\t\v\u2028\u2029]+/,jZ=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];Vt(e)||(n?i=e.toString().split(""):i=e.toString().split(LZ));var s=i.map(o=>({word:o,width:F0(o,r).width})),a=n?0:F0("",r).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}};function jIe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var FZ=(t,e,n,r)=>t.reduce((i,s)=>{var{word:a,width:o}=s,l=i[i.length-1];if(l&&o!=null&&(e==null||r||l.width+o+n<Number(e)))l.words.push(a),l.width+=o+n;else{var c={words:[a],width:o};i.push(c)}return i},[]),VZ=t=>t.reduce((e,n)=>e.width>n.width?e:n),FIe="",R5=(t,e,n,r,i,s,a,o)=>{var l=t.slice(0,e),c=jZ({breakAll:n,style:r,children:l+FIe});if(!c)return[!1,[]];var u=FZ(c.wordsWithComputedWidth,s,a,o),d=u.length>i||VZ(u).width>Number(s);return[d,u]},VIe=(t,e,n,r,i)=>{var{maxLines:s,children:a,style:o,breakAll:l}=t,c=me(s),u=String(a),d=FZ(e,r,n,i);if(!c||i)return d;var f=d.length>s||VZ(d).width>Number(r);if(!f)return d;for(var p=0,g=u.length-1,y=0,v;p<=g&&y<=u.length-1;){var b=Math.floor((p+g)/2),_=b-1,[w,T]=R5(u,_,l,o,s,r,n,i),[P]=R5(u,b,l,o,s,r,n,i);if(!w&&!P&&(p=b+1),w&&P&&(g=b-1),!w&&P){v=T;break}y++}return v||d},O5=t=>{var e=Vt(t)?[]:t.toString().split(LZ);return[{words:e,width:void 0}]},BIe=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:a}=t;if((e||n)&&!yx.isSsr){var o,l,c=jZ({breakAll:s,children:r,style:i});if(c){var{wordsWithComputedWidth:u,spaceWidth:d}=c;o=u,l=d}else return O5(r);return VIe({breakAll:s,children:r,maxLines:a,style:i},o,l,e,!!n)}return O5(r)},BZ="#808080",$Ie={angle:0,breakAll:!1,capHeight:"0.71em",fill:BZ,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},fF=x.forwardRef((t,e)=>{var n=ar(t,$Ie),{x:r,y:i,lineHeight:s,capHeight:a,fill:o,scaleToFit:l,textAnchor:c,verticalAnchor:u}=n,d=k5(n,MIe),f=x.useMemo(()=>BIe({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:l,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,l,d.style,d.width]),{dx:p,dy:g,angle:y,className:v,breakAll:b}=d,_=k5(d,NIe);if(!Xo(r)||!Xo(i)||f.length===0)return null;var w=Number(r)+(me(p)?p:0),T=Number(i)+(me(g)?g:0);if(!sr(w)||!sr(T))return null;var P;switch(u){case"start":P=_k("calc(".concat(a,")"));break;case"middle":P=_k("calc(".concat((f.length-1)/2," * -").concat(s," + (").concat(a," / 2))"));break;default:P=_k("calc(".concat(f.length-1," * -").concat(s,")"));break}var O=[];if(l){var C=f[0].width,{width:I}=d;O.push("scale(".concat(me(I)&&me(C)?I/C:1,")"))}return y&&O.push("rotate(".concat(y,", ").concat(w,", ").concat(T,")")),O.length&&(_.transform=O.join(" ")),x.createElement("text",$M({},pi(_),{ref:e,x:w,y:T,className:it("recharts-text",v),textAnchor:c,fill:o.includes("url")?BZ:o}),f.map((M,L)=>{var N=M.words.join(b?"":" ");return x.createElement("tspan",{x:w,dy:L===0?P:s,key:"".concat(N,"-").concat(L)},N)}))});fF.displayName="Text";var UIe=["labelRef"];function zIe(t,e){if(t==null)return{};var n,r,i=HIe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function HIe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function D5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ln(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D5(Object(n),!0).forEach(function(r){WIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WIe(t,e,n){return(e=GIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GIe(t){var e=KIe(t,"string");return typeof e=="symbol"?e:e+""}function KIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gl(){return Gl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gl.apply(null,arguments)}var $Z=x.createContext(null),qIe=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:a,children:o}=t,l=x.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:a}),[e,n,r,i,s,a]);return x.createElement($Z.Provider,{value:l},o)},UZ=()=>{var t=x.useContext($Z),e=mx();return t||QY(e)},XIe=x.createContext(null),YIe=()=>{var t=x.useContext(XIe),e=pe(bJ);return t||e},QIe=t=>{var{value:e,formatter:n}=t,r=Vt(t.children)?e:t.children;return typeof n=="function"?n(r):r},pF=t=>t!=null&&typeof t=="function",JIe=(t,e)=>{var n=Js(e-t),r=Math.min(Math.abs(e-t),360);return n*r},ZIe=(t,e,n,r,i)=>{var{offset:s,className:a}=t,{cx:o,cy:l,innerRadius:c,outerRadius:u,startAngle:d,endAngle:f,clockWise:p}=i,g=(c+u)/2,y=JIe(d,f),v=y>=0?1:-1,b,_;switch(e){case"insideStart":b=d+v*s,_=p;break;case"insideEnd":b=f-v*s,_=!p;break;case"end":b=f+v*s,_=p;break;default:throw new Error("Unsupported position ".concat(e))}_=y<=0?_:!_;var w=Er(o,l,g,b),T=Er(o,l,g,b+(_?1:-1)*359),P="M".concat(w.x,",").concat(w.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(_?0:1,`,
    `).concat(T.x,",").concat(T.y),O=Vt(t.id)?Ib("recharts-radial-line-"):t.id;return x.createElement("text",Gl({},r,{dominantBaseline:"central",className:it("recharts-radial-bar-label",a)}),x.createElement("defs",null,x.createElement("path",{id:O,d:P})),x.createElement("textPath",{xlinkHref:"#".concat(O)},n))},eke=(t,e,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:a,startAngle:o,endAngle:l}=t,c=(o+l)/2;if(n==="outside"){var{x:u,y:d}=Er(r,i,a+e,c);return{x:u,y:d,textAnchor:u>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var f=(s+a)/2,{x:p,y:g}=Er(r,i,f,c);return{x:p,y:g,textAnchor:"middle",verticalAnchor:"middle"}},UM=t=>"cx"in t&&me(t.cx),tke=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,s;n!=null&&!UM(n)&&(s=n);var{x:a,y:o,upperWidth:l,lowerWidth:c,height:u}=e,d=a,f=a+(l-c)/2,p=(d+f)/2,g=(l+c)/2,y=d+l/2,v=u>=0?1:-1,b=v*r,_=v>0?"end":"start",w=v>0?"start":"end",T=l>=0?1:-1,P=T*r,O=T>0?"end":"start",C=T>0?"start":"end";if(i==="top"){var I={x:d+l/2,y:o-b,textAnchor:"middle",verticalAnchor:_};return ln(ln({},I),s?{height:Math.max(o-s.y,0),width:l}:{})}if(i==="bottom"){var M={x:f+c/2,y:o+u+b,textAnchor:"middle",verticalAnchor:w};return ln(ln({},M),s?{height:Math.max(s.y+s.height-(o+u),0),width:c}:{})}if(i==="left"){var L={x:p-P,y:o+u/2,textAnchor:O,verticalAnchor:"middle"};return ln(ln({},L),s?{width:Math.max(L.x-s.x,0),height:u}:{})}if(i==="right"){var N={x:p+g+P,y:o+u/2,textAnchor:C,verticalAnchor:"middle"};return ln(ln({},N),s?{width:Math.max(s.x+s.width-N.x,0),height:u}:{})}var F=s?{width:g,height:u}:{};return i==="insideLeft"?ln({x:p+P,y:o+u/2,textAnchor:C,verticalAnchor:"middle"},F):i==="insideRight"?ln({x:p+g-P,y:o+u/2,textAnchor:O,verticalAnchor:"middle"},F):i==="insideTop"?ln({x:d+l/2,y:o+b,textAnchor:"middle",verticalAnchor:w},F):i==="insideBottom"?ln({x:f+c/2,y:o+u-b,textAnchor:"middle",verticalAnchor:_},F):i==="insideTopLeft"?ln({x:d+P,y:o+b,textAnchor:C,verticalAnchor:w},F):i==="insideTopRight"?ln({x:d+l-P,y:o+b,textAnchor:O,verticalAnchor:w},F):i==="insideBottomLeft"?ln({x:f+P,y:o+u-b,textAnchor:C,verticalAnchor:_},F):i==="insideBottomRight"?ln({x:f+c-P,y:o+u-b,textAnchor:O,verticalAnchor:_},F):i&&typeof i=="object"&&(me(i.x)||yc(i.x))&&(me(i.y)||yc(i.y))?ln({x:a+Th(i.x,g),y:o+Th(i.y,u),textAnchor:"end",verticalAnchor:"end"},F):ln({x:y,y:o+u/2,textAnchor:"middle",verticalAnchor:"middle"},F)},nke={angle:0,offset:5,zIndex:Sr.label,position:"middle",textBreakAll:!1};function Xc(t){var e=ar(t,nke),{viewBox:n,position:r,value:i,children:s,content:a,className:o="",textBreakAll:l,labelRef:c}=e,u=YIe(),d=UZ(),f=r==="center"?d:u??d,p,g,y;if(n==null?p=f:UM(n)?p=n:p=QY(n),!p||Vt(i)&&Vt(s)&&!x.isValidElement(a)&&typeof a!="function")return null;var v=ln(ln({},e),{},{viewBox:p});if(x.isValidElement(a)){var{labelRef:b}=v,_=zIe(v,UIe);return x.cloneElement(a,_)}if(typeof a=="function"){if(g=x.createElement(a,v),x.isValidElement(g))return g}else g=QIe(e);var w=pi(e);if(UM(p)){if(r==="insideStart"||r==="insideEnd"||r==="end")return ZIe(e,r,g,w,p);y=eke(p,e.offset,e.position)}else y=tke(e,p);return x.createElement(Xa,{zIndex:e.zIndex},x.createElement(fF,Gl({ref:c,className:it("recharts-label",o)},w,y,{textAnchor:jIe(w.textAnchor)?w.textAnchor:y.textAnchor,breakAll:l}),g))}Xc.displayName="Label";var rke=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?x.createElement(Xc,Gl({key:"label-implicit"},r)):Xo(t)?x.createElement(Xc,Gl({key:"label-implicit",value:t},r)):x.isValidElement(t)?t.type===Xc?x.cloneElement(t,ln({key:"label-implicit"},r)):x.createElement(Xc,Gl({key:"label-implicit",content:t},r)):pF(t)?x.createElement(Xc,Gl({key:"label-implicit",content:t},r)):t&&typeof t=="object"?x.createElement(Xc,Gl({},t,{key:"label-implicit"},r)):null};function ike(t){var{label:e,labelRef:n}=t,r=UZ();return rke(e,r,n)||null}var zZ={},HZ={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(HZ);var WZ={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(WZ);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HZ,n=WZ,r=kP;function i(s){if(r.isArrayLike(s))return e.last(n.toArray(s))}t.last=i})(zZ);var ske=zZ.last;const ake=Sc(ske);var oke=["valueAccessor"],lke=["dataKey","clockWise","id","textBreakAll","zIndex"];function Q1(){return Q1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Q1.apply(null,arguments)}function M5(t,e){if(t==null)return{};var n,r,i=cke(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function cke(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var uke=t=>Array.isArray(t.value)?ake(t.value):t.value,GZ=x.createContext(void 0),KZ=GZ.Provider,qZ=x.createContext(void 0);qZ.Provider;function hke(){return x.useContext(GZ)}function dke(){return x.useContext(qZ)}function nS(t){var{valueAccessor:e=uke}=t,n=M5(t,oke),{dataKey:r,clockWise:i,id:s,textBreakAll:a,zIndex:o}=n,l=M5(n,lke),c=hke(),u=dke(),d=c||u;return!d||!d.length?null:x.createElement(Xa,{zIndex:o??Sr.label},x.createElement(_s,{className:"recharts-label-list"},d.map((f,p)=>{var g,y=Vt(r)?e(f,p):Sn(f&&f.payload,r),v=Vt(s)?{}:{id:"".concat(s,"-").concat(p)};return x.createElement(Xc,Q1({key:"label-".concat(p)},pi(f),l,v,{fill:(g=n.fill)!==null&&g!==void 0?g:f.fill,parentViewBox:f.parentViewBox,value:y,textBreakAll:a,viewBox:f.viewBox,index:p,zIndex:0}))})))}nS.displayName="LabelList";function XZ(t){var{label:e}=t;return e?e===!0?x.createElement(nS,{key:"labelList-implicit"}):x.isValidElement(e)||pF(e)?x.createElement(nS,{key:"labelList-implicit",content:e}):typeof e=="object"?x.createElement(nS,Q1({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function zM(){return zM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zM.apply(null,arguments)}var YZ=t=>{var{cx:e,cy:n,r,className:i}=t,s=it("recharts-dot",i);return me(e)&&me(n)&&me(r)?x.createElement("circle",zM({},oa(t),BL(t),{className:s,cx:e,cy:n,r})):null},fke={radiusAxis:{},angleAxis:{}},QZ=Bi({name:"polarAxis",initialState:fke,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:bNe,removeRadiusAxis:wNe,addAngleAxis:_Ne,removeAngleAxis:xNe}=QZ.actions,pke=QZ.reducer,JZ={exports:{}},st={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lr=typeof Symbol=="function"&&Symbol.for,mF=lr?Symbol.for("react.element"):60103,gF=lr?Symbol.for("react.portal"):60106,yC=lr?Symbol.for("react.fragment"):60107,vC=lr?Symbol.for("react.strict_mode"):60108,bC=lr?Symbol.for("react.profiler"):60114,wC=lr?Symbol.for("react.provider"):60109,_C=lr?Symbol.for("react.context"):60110,yF=lr?Symbol.for("react.async_mode"):60111,xC=lr?Symbol.for("react.concurrent_mode"):60111,AC=lr?Symbol.for("react.forward_ref"):60112,EC=lr?Symbol.for("react.suspense"):60113,mke=lr?Symbol.for("react.suspense_list"):60120,SC=lr?Symbol.for("react.memo"):60115,TC=lr?Symbol.for("react.lazy"):60116,gke=lr?Symbol.for("react.block"):60121,yke=lr?Symbol.for("react.fundamental"):60117,vke=lr?Symbol.for("react.responder"):60118,bke=lr?Symbol.for("react.scope"):60119;function Ss(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case mF:switch(t=t.type,t){case yF:case xC:case yC:case bC:case vC:case EC:return t;default:switch(t=t&&t.$$typeof,t){case _C:case AC:case TC:case SC:case wC:return t;default:return e}}case gF:return e}}}function ZZ(t){return Ss(t)===xC}st.AsyncMode=yF;st.ConcurrentMode=xC;st.ContextConsumer=_C;st.ContextProvider=wC;st.Element=mF;st.ForwardRef=AC;st.Fragment=yC;st.Lazy=TC;st.Memo=SC;st.Portal=gF;st.Profiler=bC;st.StrictMode=vC;st.Suspense=EC;st.isAsyncMode=function(t){return ZZ(t)||Ss(t)===yF};st.isConcurrentMode=ZZ;st.isContextConsumer=function(t){return Ss(t)===_C};st.isContextProvider=function(t){return Ss(t)===wC};st.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===mF};st.isForwardRef=function(t){return Ss(t)===AC};st.isFragment=function(t){return Ss(t)===yC};st.isLazy=function(t){return Ss(t)===TC};st.isMemo=function(t){return Ss(t)===SC};st.isPortal=function(t){return Ss(t)===gF};st.isProfiler=function(t){return Ss(t)===bC};st.isStrictMode=function(t){return Ss(t)===vC};st.isSuspense=function(t){return Ss(t)===EC};st.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===yC||t===xC||t===bC||t===vC||t===EC||t===mke||typeof t=="object"&&t!==null&&(t.$$typeof===TC||t.$$typeof===SC||t.$$typeof===wC||t.$$typeof===_C||t.$$typeof===AC||t.$$typeof===yke||t.$$typeof===vke||t.$$typeof===bke||t.$$typeof===gke)};st.typeOf=Ss;JZ.exports=st;var wke=JZ.exports,N5=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",L5=null,xk=null,eee=t=>{if(t===L5&&Array.isArray(xk))return xk;var e=[];return x.Children.forEach(t,n=>{Vt(n)||(wke.isFragment(n)?e=e.concat(eee(n.props.children)):e.push(n))}),xk=e,L5=t,e};function _ke(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>N5(i)):r=[N5(e)],eee(t).forEach(i=>{var s=by(i,"type.displayName")||by(i,"type.name");s&&r.indexOf(s)!==-1&&n.push(i)}),n}var tee=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,nee={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const s=n[Symbol.toStringTag];return s==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${s}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(nee);var xke=nee.isPlainObject;const Ake=Sc(xke);function j5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function F5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j5(Object(n),!0).forEach(function(r){Eke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eke(t,e,n){return(e=Ske(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ske(t){var e=Tke(t,"string");return typeof e=="symbol"?e:e+""}function Tke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function J1(){return J1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},J1.apply(null,arguments)}var V5=(t,e,n,r,i)=>{var s=n-r,a;return a="M ".concat(t,",").concat(e),a+="L ".concat(t+n,",").concat(e),a+="L ".concat(t+n-s/2,",").concat(e+i),a+="L ".concat(t+n-s/2-r,",").concat(e+i),a+="L ".concat(t,",").concat(e," Z"),a},Pke={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Cke=t=>{var e=ar(t,Pke),{x:n,y:r,upperWidth:i,lowerWidth:s,height:a,className:o}=e,{animationEasing:l,animationDuration:c,animationBegin:u,isUpdateAnimationActive:d}=e,f=x.useRef(null),[p,g]=x.useState(-1),y=x.useRef(i),v=x.useRef(s),b=x.useRef(a),_=x.useRef(n),w=x.useRef(r),T=JP(t,"trapezoid-");if(x.useEffect(()=>{if(f.current&&f.current.getTotalLength)try{var K=f.current.getTotalLength();K&&g(K)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||a!==+a||i===0&&s===0||a===0)return null;var P=it("recharts-trapezoid",o);if(!d)return x.createElement("g",null,x.createElement("path",J1({},pi(e),{className:P,d:V5(n,r,i,s,a)})));var O=y.current,C=v.current,I=b.current,M=_.current,L=w.current,N="0px ".concat(p===-1?1:p,"px"),F="".concat(p,"px 0px"),j=oQ(["strokeDasharray"],c,l);return x.createElement(QP,{animationId:T,key:T,canBegin:p>0,duration:c,easing:l,isActive:d,begin:u},K=>{var te=nr(O,i,K),Z=nr(C,s,K),G=nr(I,a,K),U=nr(M,n,K),H=nr(L,r,K);f.current&&(y.current=te,v.current=Z,b.current=G,_.current=U,w.current=H);var re=K>0?{transition:j,strokeDasharray:F}:{strokeDasharray:N};return x.createElement("path",J1({},pi(e),{className:P,d:V5(U,H,te,Z,G),ref:f,style:F5(F5({},re),e.style)}))})},Ike=["option","shapeType","propTransformer","activeClassName"];function kke(t,e){if(t==null)return{};var n,r,i=Rke(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Rke(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function B5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Z1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B5(Object(n),!0).forEach(function(r){Oke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Oke(t,e,n){return(e=Dke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dke(t){var e=Mke(t,"string");return typeof e=="symbol"?e:e+""}function Mke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nke(t,e){return Z1(Z1({},e),t)}function Lke(t,e){return t==="symbols"}function $5(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return x.createElement(hQ,n);case"trapezoid":return x.createElement(Cke,n);case"sector":return x.createElement(pQ,n);case"symbols":if(Lke(e))return x.createElement(IP,n);break;case"curve":return x.createElement(fj,n);default:return null}}function jke(t){return x.isValidElement(t)?t.props:t}function HM(t){var{option:e,shapeType:n,propTransformer:r=Nke,activeClassName:i="recharts-active-shape"}=t,s=kke(t,Ike),a;if(x.isValidElement(e))a=x.cloneElement(e,Z1(Z1({},s),jke(e)));else if(typeof e=="function")a=e(s,s.index);else if(Ake(e)&&typeof e!="boolean"){var o=r(e,s);a=x.createElement($5,{shapeType:n,elementProps:o})}else{var l=s;a=x.createElement($5,{shapeType:n,elementProps:l})}return s.isActive?x.createElement(_s,{className:i},a):a}var Fke=(t,e,n)=>{var r=Yt();return(i,s)=>a=>{t==null||t(i,s,a),r(lZ({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},Vke=t=>{var e=Yt();return(n,r)=>i=>{t==null||t(n,r,i),e(dPe())}},Bke=(t,e,n)=>{var r=Yt();return(i,s)=>a=>{t==null||t(i,s,a),r(fPe({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function ree(t){var{tooltipEntrySettings:e}=t,n=Yt(),r=Qr(),i=x.useRef(null);return x.useLayoutEffect(()=>{r||(i.current===null?n(lPe(e)):i.current!==e&&n(cPe({prev:i.current,next:e})),i.current=e)},[e,n,r]),x.useLayoutEffect(()=>()=>{i.current&&(n(uPe(i.current)),i.current=null)},[n]),null}function iee(t){var{legendPayload:e}=t,n=Yt(),r=Qr(),i=x.useRef(null);return x.useLayoutEffect(()=>{r||(i.current===null?n(Oxe(e)):i.current!==e&&n(Dxe({prev:i.current,next:e})),i.current=e)},[n,r,e]),x.useLayoutEffect(()=>()=>{i.current&&(n(Mxe(i.current)),i.current=null)},[n]),null}var Ak,$ke=()=>{var[t]=x.useState(()=>Ib("uid-"));return t},Uke=(Ak=xz.useId)!==null&&Ak!==void 0?Ak:$ke;function see(t,e){var n=Uke();return e||(t?"".concat(t,"-").concat(n):n)}var zke=x.createContext(void 0),aee=t=>{var{id:e,type:n,children:r}=t,i=see("recharts-".concat(n),e);return x.createElement(zke.Provider,{value:i},r(i))},Hke={cartesianItems:[],polarItems:[]},oee=Bi({name:"graphicalItems",initialState:Hke,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:jt()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Ba(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:jt()},removeCartesianGraphicalItem:{reducer(t,e){var n=Ba(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:jt()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:jt()},removePolarGraphicalItem:{reducer(t,e){var n=Ba(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:jt()}}}),{addCartesianGraphicalItem:Wke,replaceCartesianGraphicalItem:Gke,removeCartesianGraphicalItem:Kke,addPolarGraphicalItem:ANe,removePolarGraphicalItem:ENe}=oee.actions,qke=oee.reducer,Xke=t=>{var e=Yt(),n=x.useRef(null);return x.useLayoutEffect(()=>{n.current===null?e(Wke(t)):n.current!==t&&e(Gke({prev:n.current,next:t})),n.current=t},[e,t]),x.useLayoutEffect(()=>()=>{n.current&&(e(Kke(n.current)),n.current=null)},[e]),null},lee=x.memo(Xke),Yke=["points"];function U5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ek(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U5(Object(n),!0).forEach(function(r){Qke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qke(t,e,n){return(e=Jke(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jke(t){var e=Zke(t,"string");return typeof e=="symbol"?e:e+""}function Zke(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eT(){return eT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eT.apply(null,arguments)}function eRe(t,e){if(t==null)return{};var n,r,i=tRe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function tRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function nRe(t){var{option:e,dotProps:n,className:r}=t;if(x.isValidElement(e))return x.cloneElement(e,n);if(typeof e=="function")return e(n);var i=it(r,typeof e!="boolean"?e.className:""),s=n??{},{points:a}=s,o=eRe(s,Yke);return x.createElement(YZ,eT({},o,{className:i}))}function rRe(t,e){return t==null?!1:e?!0:t.length===1}function iRe(t){var{points:e,dot:n,className:r,dotClassName:i,dataKey:s,baseProps:a,needClip:o,clipPathId:l,zIndex:c=Sr.scatter}=t;if(!rRe(e,n))return null;var u=tee(n),d=D0e(n),f=e.map((g,y)=>{var v,b,_=Ek(Ek(Ek({r:3},a),d),{},{index:y,cx:(v=g.x)!==null&&v!==void 0?v:void 0,cy:(b=g.y)!==null&&b!==void 0?b:void 0,dataKey:s,value:g.value,payload:g.payload,points:e});return x.createElement(nRe,{key:"dot-".concat(y),option:n,dotProps:_,className:i})}),p={};return o&&l!=null&&(p.clipPath="url(#clipPath-".concat(u?"":"dots-").concat(l,")")),x.createElement(Xa,{zIndex:c},x.createElement(_s,eT({className:r},p),f))}function z5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function H5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z5(Object(n),!0).forEach(function(r){sRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sRe(t,e,n){return(e=aRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aRe(t){var e=oRe(t,"string");return typeof e=="symbol"?e:e+""}function oRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lRe={xAxis:{},yAxis:{},zAxis:{}},cee=Bi({name:"cartesianAxis",initialState:lRe,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:jt()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:jt()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:jt()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:jt()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:jt()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:jt()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:jt()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:jt()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:jt()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&r===s[1]&&r!==i.width&&Math.abs(r-s[0])<=1)return;var a=[...s,r].slice(-3);t.yAxis[n]=H5(H5({},t.yAxis[n]),{},{width:r,widthHistory:a})}}}}),{addXAxis:cRe,replaceXAxis:uRe,removeXAxis:hRe,addYAxis:dRe,replaceYAxis:fRe,removeYAxis:pRe,addZAxis:SNe,replaceZAxis:TNe,removeZAxis:PNe,updateYAxisWidth:mRe}=cee.actions,gRe=cee.reducer,yRe=z([kr],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),vRe=z([yRe,Pc,Cc],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),vF=()=>pe(vRe),bRe=()=>pe(rCe);function W5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W5(Object(n),!0).forEach(function(r){wRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wRe(t,e,n){return(e=_Re(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Re(t){var e=xRe(t,"string");return typeof e=="symbol"?e:e+""}function xRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ARe=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:s,clipPath:a}=t;if(i===!1||e.x==null||e.y==null)return null;var o={index:n,dataKey:s,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},l=Sk(Sk(Sk({},o),lx(i)),BL(i)),c;return x.isValidElement(i)?c=x.cloneElement(i,l):typeof i=="function"?c=i(l):c=x.createElement(YZ,l),x.createElement(_s,{className:"recharts-active-dot",clipPath:a},c)};function ERe(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i,clipPath:s,zIndex:a=Sr.activeDot}=t,o=pe(Cy),l=bRe();if(e==null||l==null)return null;var c=e.find(u=>l.includes(u.payload));return Vt(c)?null:x.createElement(Xa,{zIndex:a},x.createElement(ARe,{point:c,childIndex:Number(o),mainColor:n,dataKey:i,activeDot:r,clipPath:s}))}var SRe={},uee=Bi({name:"errorBars",initialState:SRe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:CNe,replaceErrorBar:INe,removeErrorBar:kNe}=uee.actions,TRe=uee.reducer,PRe=["children"];function CRe(t,e){if(t==null)return{};var n,r,i=IRe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function IRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var kRe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},RRe=x.createContext(kRe);function hee(t){var{children:e}=t,n=CRe(t,PRe);return x.createElement(RRe.Provider,{value:n},e)}function bF(t,e){var n,r,i=pe(c=>kc(c,t)),s=pe(c=>Rc(c,e)),a=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Hn.allowDataOverflow,o=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Wn.allowDataOverflow,l=a||o;return{needClip:l,needClipX:a,needClipY:o}}function dee(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=vF(),{needClipX:s,needClipY:a,needClip:o}=bF(e,n);if(!o||!i)return null;var{x:l,y:c,width:u,height:d}=i;return x.createElement("clipPath",{id:"clipPath-".concat(r)},x.createElement("rect",{x:s?l:l-u/2,y:a?c:c-d/2,width:s?u:u*2,height:a?d:d*2}))}var ORe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rx=x;function DRe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var MRe=typeof Object.is=="function"?Object.is:DRe,NRe=Rx.useSyncExternalStore,LRe=Rx.useRef,jRe=Rx.useEffect,FRe=Rx.useMemo,VRe=Rx.useDebugValue;ORe.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=LRe(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=FRe(function(){function l(p){if(!c){if(c=!0,u=p,p=r(p),i!==void 0&&a.hasValue){var g=a.value;if(i(g,p))return d=g}return d=p}if(g=d,MRe(u,p))return g;var y=r(p);return i!==void 0&&i(g,y)?(u=p,g):(u=p,d=y)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,i]);var o=NRe(t,s[0],s[1]);return jRe(function(){a.hasValue=!0,a.value=o},[o]),VRe(o),o};function BRe(t){t()}function $Re(){let t=null,e=null;return{clear(){t=null,e=null},notify(){BRe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var G5={notify(){},get:()=>[]};function URe(t,e){let n,r=G5,i=0,s=!1;function a(y){u();const v=r.subscribe(y);let b=!1;return()=>{b||(b=!0,v(),d())}}function o(){r.notify()}function l(){g.onStateChange&&g.onStateChange()}function c(){return s}function u(){i++,n||(n=t.subscribe(l),r=$Re())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=G5)}function f(){s||(s=!0,u())}function p(){s&&(s=!1,d())}const g={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:c,trySubscribe:f,tryUnsubscribe:p,getListeners:()=>r};return g}var zRe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",HRe=zRe(),WRe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",GRe=WRe(),KRe=()=>HRe||GRe?x.useLayoutEffect:x.useEffect,qRe=KRe();function K5(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function XRe(t,e){if(K5(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!K5(t[n[i]],e[n[i]]))return!1;return!0}var Tk=Symbol.for("react-redux-context"),Pk=typeof globalThis<"u"?globalThis:{};function YRe(){if(!x.createContext)return{};const t=Pk[Tk]??(Pk[Tk]=new Map);let e=t.get(x.createContext);return e||(e=x.createContext(null),t.set(x.createContext,e)),e}var QRe=YRe();function JRe(t){const{children:e,context:n,serverState:r,store:i}=t,s=x.useMemo(()=>{const l=URe(i);return{store:i,subscription:l,getServerState:r?()=>r:void 0}},[i,r]),a=x.useMemo(()=>i.getState(),[i]);qRe(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,a]);const o=n||QRe;return x.createElement(o.Provider,{value:s},e)}var ZRe=JRe,eOe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function tOe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function PC(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(eOe.has(r)){if(t[r]==null&&e[r]==null)continue;if(!XRe(t[r],e[r]))return!1}else if(!tOe(t[r],e[r]))return!1;return!0}var nOe=t=>{var{chartData:e}=t,n=Yt(),r=Qr();return x.useEffect(()=>r?()=>{}:(n(v5(e)),()=>{n(v5(void 0))}),[e,n,r]),null},q5={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},fee=Bi({name:"brush",initialState:q5,reducers:{setBrushSettings(t,e){return e.payload==null?q5:e.payload}}}),{setBrushSettings:RNe}=fee.actions,rOe=fee.reducer;function iOe(t,e,n){return(e=sOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sOe(t){var e=aOe(t,"string");return typeof e=="symbol"?e:e+""}function aOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class wF{static create(e){return new wF(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}iOe(wF,"EPS",1e-4);function oOe(t){return(t%180+180)%180}var lOe=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=oOe(i),a=s*Math.PI/180,o=Math.atan(r/n),l=a>o&&a<Math.PI-o?r/Math.sin(a):n/Math.cos(a);return Math.abs(l)},cOe={dots:[],areas:[],lines:[]},pee=Bi({name:"referenceElements",initialState:cOe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Ba(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Ba(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Ba(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:ONe,removeDot:DNe,addArea:MNe,removeArea:NNe,addLine:LNe,removeLine:jNe}=pee.actions,uOe=pee.reducer,hOe=x.createContext(void 0),dOe=t=>{var{children:e}=t,[n]=x.useState("".concat(Ib("recharts"),"-clip")),r=vF();if(r==null)return null;var{x:i,y:s,width:a,height:o}=r;return x.createElement(hOe.Provider,{value:n},x.createElement("defs",null,x.createElement("clipPath",{id:n},x.createElement("rect",{x:i,y:s,height:o,width:a}))),e)};function mee(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e)n.push(t[r]);return n}function fOe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return lOe(r,n)}function pOe(t,e,n){var r=n==="width",{x:i,y:s,width:a,height:o}=t;return e===1?{start:r?i:s,end:r?i+a:s+o}:{start:r?i+a:s+o,end:r?i:s}}function tT(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function mOe(t,e){return mee(t,e+1)}function gOe(t,e,n,r,i){for(var s=(r||[]).slice(),{start:a,end:o}=e,l=0,c=1,u=a,d=function(){var g=r==null?void 0:r[l];if(g===void 0)return{v:mee(r,c)};var y=l,v,b=()=>(v===void 0&&(v=n(g,y)),v),_=g.coordinate,w=l===0||tT(t,_,b,u,o);w||(l=0,u=a,c+=1),w&&(u=_+t*(b()/2+i),l+=c)},f;c<=s.length;)if(f=d(),f)return f.v;return[]}function X5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X5(Object(n),!0).forEach(function(r){yOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yOe(t,e,n){return(e=vOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vOe(t){var e=bOe(t,"string");return typeof e=="symbol"?e:e+""}function bOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wOe(t,e,n,r,i){for(var s=(r||[]).slice(),a=s.length,{start:o}=e,{end:l}=e,c=function(f){var p=s[f],g,y=()=>(g===void 0&&(g=n(p,f)),g);if(f===a-1){var v=t*(p.coordinate+t*y()/2-l);s[f]=p=zr(zr({},p),{},{tickCoord:v>0?p.coordinate-v*t:p.coordinate})}else s[f]=p=zr(zr({},p),{},{tickCoord:p.coordinate});if(p.tickCoord!=null){var b=tT(t,p.tickCoord,y,o,l);b&&(l=p.tickCoord-t*(y()/2+i),s[f]=zr(zr({},p),{},{isShow:!0}))}},u=a-1;u>=0;u--)c(u);return s}function _Oe(t,e,n,r,i,s){var a=(r||[]).slice(),o=a.length,{start:l,end:c}=e;if(s){var u=r[o-1],d=n(u,o-1),f=t*(u.coordinate+t*d/2-c);if(a[o-1]=u=zr(zr({},u),{},{tickCoord:f>0?u.coordinate-f*t:u.coordinate}),u.tickCoord!=null){var p=tT(t,u.tickCoord,()=>d,l,c);p&&(c=u.tickCoord-t*(d/2+i),a[o-1]=zr(zr({},u),{},{isShow:!0}))}}for(var g=s?o-1:o,y=function(_){var w=a[_],T,P=()=>(T===void 0&&(T=n(w,_)),T);if(_===0){var O=t*(w.coordinate-t*P()/2-l);a[_]=w=zr(zr({},w),{},{tickCoord:O<0?w.coordinate-O*t:w.coordinate})}else a[_]=w=zr(zr({},w),{},{tickCoord:w.coordinate});if(w.tickCoord!=null){var C=tT(t,w.tickCoord,P,l,c);C&&(l=w.tickCoord+t*(P()/2+i),a[_]=zr(zr({},w),{},{isShow:!0}))}},v=0;v<g;v++)y(v);return a}function _F(t,e,n){var{tick:r,ticks:i,viewBox:s,minTickGap:a,orientation:o,interval:l,tickFormatter:c,unit:u,angle:d}=t;if(!i||!i.length||!r)return[];if(me(l)||yx.isSsr){var f;return(f=mOe(i,me(l)?l:0))!==null&&f!==void 0?f:[]}var p=[],g=o==="top"||o==="bottom"?"width":"height",y=u&&g==="width"?F0(u,{fontSize:e,letterSpacing:n}):{width:0,height:0},v=(w,T)=>{var P=typeof c=="function"?c(w.value,T):w.value;return g==="width"?fOe(F0(P,{fontSize:e,letterSpacing:n}),y,d):F0(P,{fontSize:e,letterSpacing:n})[g]},b=i.length>=2?Js(i[1].coordinate-i[0].coordinate):1,_=pOe(s,b,g);return l==="equidistantPreserveStart"?gOe(b,_,v,i,a):(l==="preserveStart"||l==="preserveStartEnd"?p=_Oe(b,_,v,i,a,l==="preserveStartEnd"):p=wOe(b,_,v,i,a),p.filter(w=>w.isShow))}var xOe=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=t,a=0;if(e){Array.from(e).forEach(u=>{if(u){var d=u.getBoundingClientRect();d.width>a&&(a=d.width)}});var o=n?n.getBoundingClientRect().width:0,l=i+s,c=a+l+o+(n?r:0);return Math.round(c)}return 0},AOe=["axisLine","width","height","className","hide","ticks","axisType"];function EOe(t,e){if(t==null)return{};var n,r,i=SOe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function SOe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ap(){return ap=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ap.apply(null,arguments)}function Y5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _n(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y5(Object(n),!0).forEach(function(r){TOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TOe(t,e,n){return(e=POe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function POe(t){var e=COe(t,"string");return typeof e=="symbol"?e:e+""}function COe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rc={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Sr.axis};function IOe(t){var{x:e,y:n,width:r,height:i,orientation:s,mirror:a,axisLine:o,otherSvgProps:l}=t;if(!o)return null;var c=_n(_n(_n({},l),oa(o)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!a||s==="bottom"&&a);c=_n(_n({},c),{},{x1:e,y1:n+u*i,x2:e+r,y2:n+u*i})}else{var d=+(s==="left"&&!a||s==="right"&&a);c=_n(_n({},c),{},{x1:e+d*r,y1:n,x2:e+d*r,y2:n+i})}return x.createElement("line",ap({},c,{className:it("recharts-cartesian-axis-line",by(o,"className"))}))}function kOe(t,e,n,r,i,s,a,o,l){var c,u,d,f,p,g,y=o?-1:1,v=t.tickSize||a,b=me(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":c=u=t.coordinate,f=n+ +!o*i,d=f-y*v,g=d-y*l,p=b;break;case"left":d=f=t.coordinate,u=e+ +!o*r,c=u-y*v,p=c-y*l,g=b;break;case"right":d=f=t.coordinate,u=e+ +o*r,c=u+y*v,p=c+y*l,g=b;break;default:c=u=t.coordinate,f=n+ +o*i,d=f+y*v,g=d+y*l,p=b;break}return{line:{x1:c,y1:d,x2:u,y2:f},tick:{x:p,y:g}}}function ROe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function OOe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function DOe(t){var{option:e,tickProps:n,value:r}=t,i,s=it(n.className,"recharts-cartesian-axis-tick-value");if(x.isValidElement(e))i=x.cloneElement(e,_n(_n({},n),{},{className:s}));else if(typeof e=="function")i=e(_n(_n({},n),{},{className:s}));else{var a="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(a=it(a,e==null?void 0:e.className)),i=x.createElement(fF,ap({},n,{className:a}),r)}return i}var MOe=x.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:s,tickFormatter:a,unit:o,padding:l,tickTextProps:c,orientation:u,mirror:d,x:f,y:p,width:g,height:y,tickSize:v,tickMargin:b,fontSize:_,letterSpacing:w,getTicksConfig:T,events:P,axisType:O}=t,C=_F(_n(_n({},T),{},{ticks:n}),_,w),I=ROe(u,d),M=OOe(u,d),L=oa(T),N=lx(r),F={};typeof i=="object"&&(F=i);var j=_n(_n({},L),{},{fill:"none"},F),K=C.map(G=>_n({entry:G},kOe(G,f,p,g,y,u,v,d,b))),te=K.map(G=>{var{entry:U,line:H}=G;return x.createElement(_s,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(U.value,"-").concat(U.coordinate,"-").concat(U.tickCoord)},i&&x.createElement("line",ap({},j,H,{className:it("recharts-cartesian-axis-tick-line",by(i,"className"))})))}),Z=K.map((G,U)=>{var{entry:H,tick:re}=G,ve=_n(_n(_n(_n({textAnchor:I,verticalAnchor:M},L),{},{stroke:"none",fill:s},N),re),{},{index:U,payload:H,visibleTicksCount:C.length,tickFormatter:a,padding:l},c);return x.createElement(_s,ap({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(H.value,"-").concat(H.coordinate,"-").concat(H.tickCoord)},$L(P,H,U)),r&&x.createElement(DOe,{option:r,tickProps:ve,value:"".concat(typeof a=="function"?a(H.value,U):H.value).concat(o||"")}))});return x.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(O,"-ticks")},Z.length>0&&x.createElement(Xa,{zIndex:Sr.label},x.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(O,"-tick-labels"),ref:e},Z)),te.length>0&&x.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(O,"-tick-lines")},te))}),NOe=x.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:s,hide:a,ticks:o,axisType:l}=t,c=EOe(t,AOe),[u,d]=x.useState(""),[f,p]=x.useState(""),g=x.useRef(null);x.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var v;return xOe({ticks:g.current,label:(v=t.labelRef)===null||v===void 0?void 0:v.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var y=x.useCallback(v=>{if(v){var b=v.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=b;var _=b[0];if(_){var w=window.getComputedStyle(_),T=w.fontSize,P=w.letterSpacing;(T!==u||P!==f)&&(d(T),p(P))}}},[u,f]);return a||r!=null&&r<=0||i!=null&&i<=0?null:x.createElement(Xa,{zIndex:t.zIndex},x.createElement(_s,{className:it("recharts-cartesian-axis",s)},x.createElement(IOe,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:oa(t)}),x.createElement(MOe,{ref:y,axisType:l,events:c,fontSize:u,getTicksConfig:t,height:t.height,letterSpacing:f,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:o,unit:t.unit,width:t.width,x:t.x,y:t.y}),x.createElement(qIe,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},x.createElement(ike,{label:t.label,labelRef:t.labelRef}),t.children)))}),xF=x.forwardRef((t,e)=>{var n=ar(t,rc);return x.createElement(NOe,ap({},n,{ref:e}))});xF.displayName="CartesianAxis";var LOe=["x1","y1","x2","y2","key"],jOe=["offset"],FOe=["xAxisId","yAxisId"],VOe=["xAxisId","yAxisId"];function Q5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q5(Object(n),!0).forEach(function(r){BOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BOe(t,e,n){return(e=$Oe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Oe(t){var e=UOe(t,"string");return typeof e=="symbol"?e:e+""}function UOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yd(){return yd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yd.apply(null,arguments)}function nT(t,e){if(t==null)return{};var n,r,i=zOe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function zOe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var HOe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:a,ry:o}=t;return x.createElement("rect",{x:r,y:i,ry:o,width:s,height:a,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function gee(t){var{option:e,lineItemProps:n}=t,r;if(x.isValidElement(e))r=x.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:s,y1:a,x2:o,y2:l,key:c}=n,u=nT(n,LOe),d=(i=oa(u))!==null&&i!==void 0?i:{},{offset:f}=d,p=nT(d,jOe);r=x.createElement("line",yd({},p,{x1:s,y1:a,x2:o,y2:l,fill:"none",key:c}))}return r}function WOe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:a}=t,o=nT(t,FOe),l=i.map((c,u)=>{var d=Kr(Kr({},o),{},{x1:e,y1:c,x2:e+n,y2:c,key:"line-".concat(u),index:u});return x.createElement(gee,{key:"line-".concat(u),option:r,lineItemProps:d})});return x.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function GOe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:a}=t,o=nT(t,VOe),l=i.map((c,u)=>{var d=Kr(Kr({},o),{},{x1:c,y1:e,x2:c,y2:e+n,key:"line-".concat(u),index:u});return x.createElement(gee,{option:r,lineItemProps:d,key:"line-".concat(u)})});return x.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function KOe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:s,height:a,horizontalPoints:o,horizontal:l=!0}=t;if(!l||!e||!e.length||o==null)return null;var c=o.map(d=>Math.round(d+i-i)).sort((d,f)=>d-f);i!==c[0]&&c.unshift(0);var u=c.map((d,f)=>{var p=!c[f+1],g=p?i+a-d:c[f+1]-d;if(g<=0)return null;var y=f%e.length;return x.createElement("rect",{key:"react-".concat(f),y:d,x:r,height:g,width:s,stroke:"none",fill:e[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function qOe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:a,height:o,verticalPoints:l}=t;if(!e||!n||!n.length)return null;var c=l.map(d=>Math.round(d+i-i)).sort((d,f)=>d-f);i!==c[0]&&c.unshift(0);var u=c.map((d,f)=>{var p=!c[f+1],g=p?i+a-d:c[f+1]-d;if(g<=0)return null;var y=f%n.length;return x.createElement("rect",{key:"react-".concat(f),x:d,y:s,width:g,height:o,stroke:"none",fill:n[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var XOe=(t,e)=>{var{xAxis:n,width:r,height:i,offset:s}=t;return VY(_F(Kr(Kr(Kr({},rc),n),{},{ticks:BY(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,e)},YOe=(t,e)=>{var{yAxis:n,width:r,height:i,offset:s}=t;return VY(_F(Kr(Kr(Kr({},rc),n),{},{ticks:BY(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,e)},QOe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Sr.grid};function zc(t){var e=cj(),n=uj(),r=JY(),i=Kr(Kr({},ar(t,QOe)),{},{x:me(t.x)?t.x:r.left,y:me(t.y)?t.y:r.top,width:me(t.width)?t.width:r.width,height:me(t.height)?t.height:r.height}),{xAxisId:s,yAxisId:a,x:o,y:l,width:c,height:u,syncWithTicks:d,horizontalValues:f,verticalValues:p}=i,g=Qr(),y=pe(M=>o5(M,"xAxis",s,g)),v=pe(M=>o5(M,"yAxis",a,g));if(!Yo(c)||!Yo(u)||!me(o)||!me(l))return null;var b=i.verticalCoordinatesGenerator||XOe,_=i.horizontalCoordinatesGenerator||YOe,{horizontalPoints:w,verticalPoints:T}=i;if((!w||!w.length)&&typeof _=="function"){var P=f&&f.length,O=_({yAxis:v?Kr(Kr({},v),{},{ticks:P?f:v.ticks}):void 0,width:e??c,height:n??u,offset:r},P?!0:d);I1(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof O,"]")),Array.isArray(O)&&(w=O)}if((!T||!T.length)&&typeof b=="function"){var C=p&&p.length,I=b({xAxis:y?Kr(Kr({},y),{},{ticks:C?p:y.ticks}):void 0,width:e??c,height:n??u,offset:r},C?!0:d);I1(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(T=I)}return x.createElement(Xa,{zIndex:i.zIndex},x.createElement("g",{className:"recharts-cartesian-grid"},x.createElement(HOe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),x.createElement(KOe,yd({},i,{horizontalPoints:w})),x.createElement(qOe,yd({},i,{verticalPoints:T})),x.createElement(WOe,yd({},i,{offset:r,horizontalPoints:w,xAxis:y,yAxis:v})),x.createElement(GOe,yd({},i,{offset:r,verticalPoints:T,xAxis:y,yAxis:v}))))}zc.displayName="CartesianGrid";var yee=(t,e,n,r)=>gC(t,"xAxis",e,r),vee=(t,e,n,r)=>mC(t,"xAxis",e,r),bee=(t,e,n,r)=>gC(t,"yAxis",n,r),wee=(t,e,n,r)=>mC(t,"yAxis",n,r),JOe=z([Dt,yee,bee,vee,wee],(t,e,n,r,i)=>Fh(t,"xAxis")?C1(e,r,!1):C1(n,i,!1)),ZOe=(t,e,n,r,i)=>i;function eDe(t){return t.type==="line"}var tDe=z([Kj,ZOe],(t,e)=>t.filter(eDe).find(n=>n.id===e)),nDe=z([Dt,yee,bee,vee,wee,tDe,JOe,sC],(t,e,n,r,i,s,a,o)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:u}=o;if(!(s==null||e==null||n==null||r==null||i==null||r.length===0||i.length===0||a==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:d,data:f}=s,p;if(f!=null&&f.length>0?p=f:p=l==null?void 0:l.slice(c,u+1),p!=null)return ADe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:d,bandSize:a,displayedData:p})}});function rDe(t){var e=lx(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:s}=e,a=Number(i),o=Number(s);return(Number.isNaN(a)||a<0)&&(a=n),(Number.isNaN(o)||o<0)&&(o=r),{r:a,strokeWidth:o}}return{r:n,strokeWidth:r}}var iDe=["id"],sDe=["type","layout","connectNulls","needClip","shape"],aDe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function zb(){return zb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zb.apply(null,arguments)}function J5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Co(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J5(Object(n),!0).forEach(function(r){oDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oDe(t,e,n){return(e=lDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lDe(t){var e=cDe(t,"string");return typeof e=="symbol"?e:e+""}function cDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AF(t,e){if(t==null)return{};var n,r,i=uDe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function uDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var hDe=t=>{var{dataKey:e,name:n,stroke:r,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:r,value:$P(n,e),payload:t}]},dDe=x.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:s,name:a,hide:o,unit:l,tooltipType:c}=t,u={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:$P(a,e),hide:o,type:c,color:r,unit:l}};return x.createElement(ree,{tooltipEntrySettings:u})}),_ee=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function fDe(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],i=0;i<e;++i)r=[...r,...n];return r}var pDe=(t,e,n)=>{var r=n.reduce((d,f)=>d+f);if(!r)return _ee(e,t);for(var i=Math.floor(t/r),s=t%r,a=e-t,o=[],l=0,c=0;l<n.length;c+=n[l],++l)if(c+n[l]>s){o=[...n.slice(0,l),s-c];break}var u=o.length%2===0?[0,a]:[a];return[...fDe(n,i),...o,...u].map(d=>"".concat(d,"px")).join(", ")};function mDe(t){var{clipPathId:e,points:n,props:r}=t,{dot:i,dataKey:s,needClip:a}=r,{id:o}=r,l=AF(r,iDe),c=oa(l);return x.createElement(iRe,{points:n,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:c,needClip:a,clipPathId:e})}function gDe(t){var{showLabels:e,children:n,points:r}=t,i=x.useMemo(()=>r==null?void 0:r.map(s=>{var a,o,l={x:(a=s.x)!==null&&a!==void 0?a:0,y:(o=s.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Co(Co({},l),{},{value:s.value,payload:s.payload,viewBox:l,parentViewBox:void 0,fill:void 0})}),[r]);return x.createElement(KZ,{value:e?i:void 0},n)}function Z5(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:i,props:s}=t,{type:a,layout:o,connectNulls:l,needClip:c,shape:u}=s,d=AF(s,sDe),f=Co(Co({},pi(d)),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(e,")"):void 0,points:r,type:a,layout:o,connectNulls:l,strokeDasharray:i??s.strokeDasharray});return x.createElement(x.Fragment,null,(r==null?void 0:r.length)>1&&x.createElement(HM,zb({shapeType:"curve",option:u},f,{pathRef:n})),x.createElement(mDe,{points:r,clipPathId:e,props:s}))}function yDe(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function vDe(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:s}=t,{points:a,strokeDasharray:o,isAnimationActive:l,animationBegin:c,animationDuration:u,animationEasing:d,animateNewValues:f,width:p,height:g,onAnimationEnd:y,onAnimationStart:v}=n,b=i.current,_=JP(a,"recharts-line-"),w=x.useRef(_),[T,P]=x.useState(!1),O=!T,C=x.useCallback(()=>{typeof y=="function"&&y(),P(!1)},[y]),I=x.useCallback(()=>{typeof v=="function"&&v(),P(!0)},[v]),M=yDe(r.current),L=x.useRef(0);w.current!==_&&(L.current=s.current,w.current=_);var N=L.current;return x.createElement(gDe,{points:a,showLabels:O},n.children,x.createElement(QP,{animationId:_,begin:c,duration:u,isActive:l,easing:d,onAnimationEnd:C,onAnimationStart:I,key:_},F=>{var j=nr(N,M+N,F),K=Math.min(j,M),te;if(l)if(o){var Z="".concat(o).split(/[,\s]+/gim).map(H=>parseFloat(H));te=pDe(K,M,Z)}else te=_ee(M,K);else te=o==null?void 0:String(o);if(F>0&&M>0&&(i.current=a,s.current=Math.max(s.current,K)),b){var G=b.length/a.length,U=F===1?a:a.map((H,re)=>{var ve=Math.floor(re*G);if(b[ve]){var de=b[ve];return Co(Co({},H),{},{x:nr(de.x,H.x,F),y:nr(de.y,H.y,F)})}return f?Co(Co({},H),{},{x:nr(p*2,H.x,F),y:nr(g/2,H.y,F)}):Co(Co({},H),{},{x:H.x,y:H.y})});return i.current=U,x.createElement(Z5,{props:n,points:U,clipPathId:e,pathRef:r,strokeDasharray:te})}return x.createElement(Z5,{props:n,points:a,clipPathId:e,pathRef:r,strokeDasharray:te})}),x.createElement(XZ,{label:n.label}))}function bDe(t){var{clipPathId:e,props:n}=t,r=x.useRef(null),i=x.useRef(0),s=x.useRef(null);return x.createElement(vDe,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:s})}var wDe=(t,e)=>{var n,r;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(r=t.y)!==null&&r!==void 0?r:void 0,value:t.value,errorVal:Sn(t.payload,e)}};class _De extends x.Component{render(){var{hide:e,dot:n,points:r,className:i,xAxisId:s,yAxisId:a,top:o,left:l,width:c,height:u,id:d,needClip:f,zIndex:p}=this.props;if(e)return null;var g=it("recharts-line",i),y=d,{r:v,strokeWidth:b}=rDe(n),_=tee(n),w=v*2+b,T=f?"url(#clipPath-".concat(_?"":"dots-").concat(y,")"):void 0;return x.createElement(Xa,{zIndex:p},x.createElement(_s,{className:g},f&&x.createElement("defs",null,x.createElement(dee,{clipPathId:y,xAxisId:s,yAxisId:a}),!_&&x.createElement("clipPath",{id:"clipPath-dots-".concat(y)},x.createElement("rect",{x:l-w/2,y:o-w/2,width:c+w,height:u+w}))),x.createElement(hee,{xAxisId:s,yAxisId:a,data:r,dataPointFormatter:wDe,errorBarOffset:0},x.createElement(bDe,{props:this.props,clipPathId:y}))),x.createElement(ERe,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:T}))}}var xee={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Sr.line,type:"linear"};function xDe(t){var e=ar(t,xee),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:a,connectNulls:o,dot:l,hide:c,isAnimationActive:u,label:d,legendType:f,xAxisId:p,yAxisId:g,id:y}=e,v=AF(e,aDe),{needClip:b}=bF(p,g),_=vF(),w=GP(),T=Qr(),P=pe(L=>nDe(L,p,g,T,y));if(w!=="horizontal"&&w!=="vertical"||P==null||_==null)return null;var{height:O,width:C,x:I,y:M}=_;return x.createElement(_De,zb({},v,{id:y,connectNulls:o,dot:l,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:s,animationEasing:a,isAnimationActive:u,hide:c,label:d,legendType:f,xAxisId:p,yAxisId:g,points:P,layout:w,height:O,width:C,left:I,top:M,needClip:b}))}function ADe(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:s,dataKey:a,bandSize:o,displayedData:l}=t;return l.map((c,u)=>{var d=Sn(c,a);if(e==="horizontal"){var f=P1({axis:n,ticks:i,bandSize:o,entry:c,index:u}),p=Vt(d)?null:r.scale(d);return{x:f,y:p,value:d,payload:c}}var g=Vt(d)?null:n.scale(d),y=P1({axis:r,ticks:s,bandSize:o,entry:c,index:u});return g==null||y==null?null:{x:g,y,value:d,payload:c}}).filter(Boolean)}function EDe(t){var e=ar(t,xee),n=Qr();return x.createElement(aee,{id:e.id,type:"line"},r=>x.createElement(x.Fragment,null,x.createElement(iee,{legendPayload:hDe(e)}),x.createElement(dDe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType}),x.createElement(lee,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),x.createElement(xDe,zb({},e,{id:r}))))}var no=x.memo(EDe,PC);no.displayName="Line";var SDe=["option","isActive"];function V0(){return V0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},V0.apply(null,arguments)}function TDe(t,e){if(t==null)return{};var n,r,i=PDe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function PDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function CDe(t){var{option:e,isActive:n}=t,r=TDe(t,SDe);return typeof e=="string"?x.createElement(HM,V0({option:x.createElement(IP,V0({type:e},r)),isActive:n,shapeType:"symbols"},r)):x.createElement(HM,V0({option:e,isActive:n,shapeType:"symbols"},r))}var IDe=(t,e,n,r,i,s,a)=>gC(t,"xAxis",e,a),kDe=(t,e,n,r,i,s,a)=>mC(t,"xAxis",e,a),RDe=(t,e,n,r,i,s,a)=>gC(t,"yAxis",n,a),ODe=(t,e,n,r,i,s,a)=>mC(t,"yAxis",n,a),DDe=(t,e,n,r)=>rPe(t,"zAxis",r,!1),MDe=(t,e,n,r,i)=>i,NDe=(t,e,n,r,i,s)=>s,LDe=(t,e,n,r,i,s,a)=>sC(t,e,n,a),jDe=z([Kj,MDe],(t,e)=>t.filter(n=>n.type==="scatter").find(n=>n.id===e)),FDe=z([LDe,IDe,kDe,RDe,ODe,DDe,jDe,NDe],(t,e,n,r,i,s,a,o)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:u}=t;if(a!=null){var d;if((a==null?void 0:a.data)!=null&&a.data.length>0?d=a.data:d=l==null?void 0:l.slice(c,u+1),!(d==null||e==null||r==null||n==null||i==null||(n==null?void 0:n.length)===0||(i==null?void 0:i.length)===0))return JDe({displayedData:d,xAxis:e,yAxis:r,zAxis:s,scatterSettings:a,xAxisTicks:n,yAxisTicks:i,cells:o})}}),VDe=["onMouseEnter","onClick","onMouseLeave"],BDe=["id"],$De=["animationBegin","animationDuration","animationEasing","hide","isAnimationActive","legendType","lineJointType","lineType","shape","xAxisId","yAxisId","zAxisId"];function WM(t,e){if(t==null)return{};var n,r,i=UDe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function UDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function op(){return op=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},op.apply(null,arguments)}function ez(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Li(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ez(Object(n),!0).forEach(function(r){zDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ez(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zDe(t,e,n){return(e=HDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HDe(t){var e=WDe(t,"string");return typeof e=="symbol"?e:e+""}function WDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var GDe=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:s}=t;return[{inactive:s,dataKey:e,type:i,color:r,value:$P(n,e),payload:t}]},KDe=x.memo(t=>{var{dataKey:e,points:n,stroke:r,strokeWidth:i,fill:s,name:a,hide:o,tooltipType:l}=t,c={dataDefinedOnItem:n==null?void 0:n.map(u=>u.tooltipPayload),positions:n==null?void 0:n.map(u=>u.tooltipPosition),settings:{stroke:r,strokeWidth:i,fill:s,nameKey:void 0,dataKey:e,name:$P(a,e),hide:o,type:l,color:s,unit:""}};return x.createElement(ree,{tooltipEntrySettings:c})});function qDe(t){var{points:e,props:n}=t,{line:r,lineType:i,lineJointType:s}=n;if(!r)return null;var a=oa(n),o=lx(r),l,c;if(i==="joint")l=e.map(v=>{var b,_;return{x:(b=v.cx)!==null&&b!==void 0?b:null,y:(_=v.cy)!==null&&_!==void 0?_:null}});else if(i==="fitting"){var{xmin:u,xmax:d,a:f,b:p}=xbe(e),g=v=>f*v+p;l=[{x:u,y:g(u)},{x:d,y:g(d)}]}var y=Li(Li(Li({},a),{},{fill:"none",stroke:a&&a.fill},o),{},{points:l});return x.isValidElement(r)?c=x.cloneElement(r,y):typeof r=="function"?c=r(y):c=x.createElement(fj,op({},y,{type:s})),x.createElement(_s,{className:"recharts-scatter-line",key:"recharts-scatter-line"},c)}function XDe(t){var{showLabels:e,points:n,children:r}=t,i=mx(),s=x.useMemo(()=>n==null?void 0:n.map(a=>{var o,l,c={x:(o=a.x)!==null&&o!==void 0?o:0,y:(l=a.y)!==null&&l!==void 0?l:0,width:a.width,height:a.height,lowerWidth:a.width,upperWidth:a.width};return Li(Li({},c),{},{value:void 0,payload:a.payload,viewBox:c,parentViewBox:i,fill:void 0})}),[i,n]);return x.createElement(KZ,{value:e?s:void 0},r)}function YDe(t){var{points:e,allOtherScatterProps:n}=t,{shape:r,activeShape:i,dataKey:s}=n,a=pe(Cy),{onMouseEnter:o,onClick:l,onMouseLeave:c}=n,u=WM(n,VDe),d=Fke(o,n.dataKey),f=Vke(c),p=Bke(l,n.dataKey);if(!Nbe(e))return null;var{id:g}=n,y=WM(n,BDe),v=oa(y);return x.createElement(x.Fragment,null,x.createElement(qDe,{points:e,props:y}),e.map((b,_)=>{var w=i!=null&&i!==!1,T=w&&a===String(_),P=w&&T?i:r,O=Li(Li(Li({},v),b),{},{[UY]:_,[zY]:String(s)});return x.createElement(Xa,{key:"symbol-".concat(b==null?void 0:b.cx,"-").concat(b==null?void 0:b.cy,"-").concat(b==null?void 0:b.size,"-").concat(_),zIndex:T?Sr.activeDot:void 0},x.createElement(_s,op({className:"recharts-scatter-symbol"},$L(u,b,_),{onMouseEnter:d(b,_),onMouseLeave:f(b,_),onClick:p(b,_)}),x.createElement(CDe,op({option:P,isActive:T},O))))}))}function QDe(t){var{previousPointsRef:e,props:n}=t,{points:r,isAnimationActive:i,animationBegin:s,animationDuration:a,animationEasing:o}=n,l=e.current,c=JP(n,"recharts-scatter-"),[u,d]=x.useState(!1),f=x.useCallback(()=>{d(!1)},[]),p=x.useCallback(()=>{d(!0)},[]),g=!u;return x.createElement(XDe,{showLabels:g,points:r},n.children,x.createElement(QP,{animationId:c,begin:s,duration:a,isActive:i,easing:o,onAnimationEnd:f,onAnimationStart:p,key:c},y=>{var v=y===1?r:r==null?void 0:r.map((b,_)=>{var w=l&&l[_];return w?Li(Li({},b),{},{cx:b.cx==null?void 0:nr(w.cx,b.cx,y),cy:b.cy==null?void 0:nr(w.cy,b.cy,y),size:nr(w.size,b.size,y)}):Li(Li({},b),{},{size:nr(0,b.size,y)})});return y>0&&(e.current=v),x.createElement(_s,null,x.createElement(YDe,{points:v,allOtherScatterProps:n,showLabels:g}))}),x.createElement(XZ,{label:n.label}))}function JDe(t){var{displayedData:e,xAxis:n,yAxis:r,zAxis:i,scatterSettings:s,xAxisTicks:a,yAxisTicks:o,cells:l}=t,c=Vt(n.dataKey)?s.dataKey:n.dataKey,u=Vt(r.dataKey)?s.dataKey:r.dataKey,d=i&&i.dataKey,f=i?i.range:EJ.range,p=f&&f[0],g=n.scale.bandwidth?n.scale.bandwidth():0,y=r.scale.bandwidth?r.scale.bandwidth():0;return e.map((v,b)=>{var _=Sn(v,c),w=Sn(v,u),T=!Vt(d)&&Sn(v,d)||"-",P=[{name:Vt(n.dataKey)?s.name:n.name||String(n.dataKey),unit:n.unit||"",value:_,payload:v,dataKey:c,type:s.tooltipType},{name:Vt(r.dataKey)?s.name:r.name||String(r.dataKey),unit:r.unit||"",value:w,payload:v,dataKey:u,type:s.tooltipType}];T!=="-"&&P.push({name:i.name||i.dataKey,unit:i.unit||"",value:T,payload:v,dataKey:d,type:s.tooltipType});var O=P1({axis:n,ticks:a,bandSize:g,entry:v,index:b,dataKey:c}),C=P1({axis:r,ticks:o,bandSize:y,entry:v,index:b,dataKey:u}),I=T!=="-"?i.scale(T):p,M=Math.sqrt(Math.max(I,0)/Math.PI);return Li(Li({},v),{},{cx:O,cy:C,x:O==null?void 0:O-M,y:C==null?void 0:C-M,width:2*M,height:2*M,size:I,node:{x:_,y:w,z:T},tooltipPayload:P,tooltipPosition:{x:O,y:C},payload:v},l&&l[b]&&l[b].props)})}var ZDe=(t,e,n)=>({x:t.cx,y:t.cy,value:Number(n==="x"?t.node.x:t.node.y),errorVal:Sn(t,e)});function eMe(t){var{hide:e,points:n,className:r,needClip:i,xAxisId:s,yAxisId:a,id:o}=t,l=x.useRef(null);if(e)return null;var c=it("recharts-scatter",r),u=o;return x.createElement(Xa,{zIndex:t.zIndex},x.createElement(_s,{className:c,clipPath:i?"url(#clipPath-".concat(u,")"):void 0,id:o},i&&x.createElement("defs",null,x.createElement(dee,{clipPathId:u,xAxisId:s,yAxisId:a})),x.createElement(hee,{xAxisId:s,yAxisId:a,data:n,dataPointFormatter:ZDe,errorBarOffset:0},x.createElement(_s,{key:"recharts-scatter-symbols"},x.createElement(QDe,{props:t,previousPointsRef:l})))))}var Aee={xAxisId:0,yAxisId:0,zAxisId:0,label:!1,line:!1,legendType:"circle",lineType:"joint",lineJointType:"linear",shape:"circle",hide:!1,isAnimationActive:"auto",animationBegin:0,animationDuration:400,animationEasing:"linear",zIndex:Sr.scatter};function tMe(t){var e=ar(t,Aee),{animationBegin:n,animationDuration:r,animationEasing:i,hide:s,isAnimationActive:a,legendType:o,lineJointType:l,lineType:c,shape:u,xAxisId:d,yAxisId:f,zAxisId:p}=e,g=WM(e,$De),{needClip:y}=bF(d,f),v=x.useMemo(()=>_ke(t.children,OZ),[t.children]),b=Qr(),_=pe(w=>FDe(w,d,f,p,t.id,v,b));return y==null||_==null?null:x.createElement(x.Fragment,null,x.createElement(KDe,{dataKey:t.dataKey,points:_,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType}),x.createElement(eMe,op({},g,{xAxisId:d,yAxisId:f,zAxisId:p,lineType:c,lineJointType:l,legendType:o,shape:u,hide:s,isAnimationActive:a,animationBegin:n,animationDuration:r,animationEasing:i,points:_,needClip:y})))}function nMe(t){var e=ar(t,Aee),n=Qr();return x.createElement(aee,{id:e.id,type:"scatter"},r=>x.createElement(x.Fragment,null,x.createElement(iee,{legendPayload:GDe(e)}),x.createElement(lee,{type:"scatter",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:e.zAxisId,dataKey:e.dataKey,hide:e.hide,name:e.name,tooltipType:e.tooltipType,isPanorama:n}),x.createElement(tMe,op({},e,{id:r}))))}var g0=x.memo(nMe,PC);g0.displayName="Scatter";var rMe=["domain","range"],iMe=["domain","range"];function tz(t,e){if(t==null)return{};var n,r,i=sMe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sMe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function nz(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function Eee(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=tz(t,rMe),{domain:s,range:a}=e,o=tz(e,iMe);return!nz(n,s)||!nz(r,a)?!1:PC(i,o)}var aMe=["dangerouslySetInnerHTML","ticks"],oMe=["id"];function GM(){return GM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GM.apply(null,arguments)}function rz(t,e){if(t==null)return{};var n,r,i=lMe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function lMe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function cMe(t){var e=Yt(),n=x.useRef(null);return x.useLayoutEffect(()=>{n.current===null?e(cRe(t)):n.current!==t&&e(uRe({prev:n.current,next:t})),n.current=t},[t,e]),x.useLayoutEffect(()=>()=>{n.current&&(e(hRe(n.current)),n.current=null)},[e]),null}var uMe=t=>{var{xAxisId:e,className:n}=t,r=pe(HY),i=Qr(),s="xAxis",a=pe(v=>qy(v,s,e,i)),o=pe(v=>nZ(v,s,e,i)),l=pe(v=>HTe(v,e)),c=pe(v=>YTe(v,e)),u=pe(v=>xJ(v,e));if(l==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=t,p=rz(t,aMe),{id:g}=u,y=rz(u,oMe);return x.createElement(xF,GM({},p,y,{scale:a,x:c.x,y:c.y,width:l.width,height:l.height,className:it("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:o,axisType:s}))},hMe={allowDataOverflow:Hn.allowDataOverflow,allowDecimals:Hn.allowDecimals,allowDuplicatedCategory:Hn.allowDuplicatedCategory,angle:Hn.angle,axisLine:rc.axisLine,height:Hn.height,hide:!1,includeHidden:Hn.includeHidden,interval:Hn.interval,minTickGap:Hn.minTickGap,mirror:Hn.mirror,orientation:Hn.orientation,padding:Hn.padding,reversed:Hn.reversed,scale:Hn.scale,tick:Hn.tick,tickCount:Hn.tickCount,tickLine:rc.tickLine,tickSize:rc.tickSize,type:Hn.type,xAxisId:0},dMe=t=>{var e=ar(t,hMe);return x.createElement(x.Fragment,null,x.createElement(cMe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),x.createElement(uMe,e))},Hc=x.memo(dMe,Eee);Hc.displayName="XAxis";var fMe=["dangerouslySetInnerHTML","ticks"],pMe=["id"];function KM(){return KM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KM.apply(null,arguments)}function iz(t,e){if(t==null)return{};var n,r,i=mMe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function mMe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function gMe(t){var e=Yt(),n=x.useRef(null);return x.useLayoutEffect(()=>{n.current===null?e(dRe(t)):n.current!==t&&e(fRe({prev:n.current,next:t})),n.current=t},[t,e]),x.useLayoutEffect(()=>()=>{n.current&&(e(pRe(n.current)),n.current=null)},[e]),null}var yMe=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,s=x.useRef(null),a=x.useRef(null),o=pe(HY),l=Qr(),c=Yt(),u="yAxis",d=pe(P=>qy(P,u,e,l)),f=pe(P=>ZTe(P,e)),p=pe(P=>JTe(P,e)),g=pe(P=>nZ(P,u,e,l)),y=pe(P=>AJ(P,e));if(x.useLayoutEffect(()=>{if(!(r!=="auto"||!f||pF(i)||x.isValidElement(i)||y==null)){var P=s.current;if(P){var O=P.getCalculatedWidth();Math.round(f.width)!==Math.round(O)&&c(mRe({id:e,width:O}))}}},[g,f,c,i,e,r,y]),f==null||p==null||y==null)return null;var{dangerouslySetInnerHTML:v,ticks:b}=t,_=iz(t,fMe),{id:w}=y,T=iz(y,pMe);return x.createElement(xF,KM({},_,T,{ref:s,labelRef:a,scale:d,x:p.x,y:p.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:f.width,height:f.height,className:it("recharts-".concat(u," ").concat(u),n),viewBox:o,ticks:g,axisType:u}))},vMe={allowDataOverflow:Wn.allowDataOverflow,allowDecimals:Wn.allowDecimals,allowDuplicatedCategory:Wn.allowDuplicatedCategory,angle:Wn.angle,axisLine:rc.axisLine,hide:!1,includeHidden:Wn.includeHidden,interval:Wn.interval,minTickGap:Wn.minTickGap,mirror:Wn.mirror,orientation:Wn.orientation,padding:Wn.padding,reversed:Wn.reversed,scale:Wn.scale,tick:Wn.tick,tickCount:Wn.tickCount,tickLine:rc.tickLine,tickSize:rc.tickSize,type:Wn.type,width:Wn.width,yAxisId:0},bMe=t=>{var e=ar(t,vMe);return x.createElement(x.Fragment,null,x.createElement(gMe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),x.createElement(yMe,e))},Wc=x.memo(bMe,Eee);Wc.displayName="YAxis";var wMe=(t,e)=>e,EF=z([wMe,Dt,bJ,$n,vZ,Oc,gCe,kr],ACe),SF=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},See=la("mouseClick"),Tee=fx();Tee.startListening({actionCreator:See,effect:(t,e)=>{var n=t.payload,r=EF(e.getState(),SF(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(pPe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var qM=la("mouseMove"),Pee=fx(),$A=null;Pee.startListening({actionCreator:qM,effect:(t,e)=>{var n=t.payload;$A!==null&&cancelAnimationFrame($A);var r=SF(n);$A=requestAnimationFrame(()=>{var i=e.getState(),s=nF(i,i.tooltip.settings.shared);if(s==="axis"){var a=EF(i,r);(a==null?void 0:a.activeIndex)!=null?e.dispatch(uZ({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):e.dispatch(cZ())}$A=null})}});var sz={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},Cee=Bi({name:"rootProps",initialState:sz,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:sz.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),_Me=Cee.reducer,{updateOptions:xMe}=Cee.actions,Iee=Bi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:FNe}=Iee.actions,AMe=Iee.reducer,kee=la("keyDown"),Ree=la("focus"),TF=fx();TF.startListening({actionCreator:kee,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var a=rF(i,Yy(n),Ex(n),Ix(n)),o=a==null?-1:Number(a);if(!(!Number.isFinite(o)||o<0)){var l=Oc(n);if(s==="Enter"){var c=Y1(n,"axis","hover",String(i.index));e.dispatch(FM({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:c}));return}var u=iPe(n),d=u==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,p=o+f*d;if(!(l==null||p>=l.length||p<0)){var g=Y1(n,"axis","hover",String(p));e.dispatch(FM({active:!0,activeIndex:p.toString(),activeDataKey:void 0,activeCoordinate:g}))}}}}}});TF.startListening({actionCreator:Ree,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",a=Y1(n,"axis","hover",String(s));e.dispatch(FM({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:a}))}}}});var Rs=la("externalEvent"),Oee=fx(),Ck=new Map;Oee.startListening({actionCreator:Rs,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,s=Ck.get(i);s!==void 0&&cancelAnimationFrame(s);var a=requestAnimationFrame(()=>{try{var o=e.getState(),l={activeCoordinate:eCe(o),activeDataKey:JPe(o),activeIndex:Cy(o),activeLabel:_Z(o),activeTooltipIndex:Cy(o),isTooltipActive:tCe(o)};n(l,r)}finally{Ck.delete(i)}});Ck.set(i,a)}}});var EMe=z([Xy],t=>t.tooltipItemPayloads),SMe=z([EMe,Px,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(o=>o.settings.dataKey===r);if(i!=null){var{positions:s}=i;if(s!=null){var a=e(s,n);return a}}}),Dee=la("touchMove"),Mee=fx();Mee.startListening({actionCreator:Dee,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=nF(r,r.tooltip.settings.shared);if(i==="axis"){var s=EF(r,SF({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&e.dispatch(uZ({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var a,o=n.touches[0];if(document.elementFromPoint==null)return;var l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(UY),u=(a=l.getAttribute(zY))!==null&&a!==void 0?a:void 0,d=SMe(e.getState(),c,u);e.dispatch(lZ({activeDataKey:u,activeIndex:c,activeCoordinate:d}))}}}});var TMe=uY({brush:rOe,cartesianAxis:gRe,chartData:ZCe,errorBars:TRe,graphicalItems:qke,layout:R_e,legend:Nxe,options:qCe,polarAxis:pke,polarOptions:AMe,referenceElements:uOe,rootProps:_Me,tooltip:mPe,zIndex:jCe}),PMe=function(e){return n_e({reducer:TMe,preloadedState:e,middleware:n=>{var r;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([Tee.middleware,Pee.middleware,TF.middleware,Oee.middleware,Mee.middleware])},enhancers:n=>{var r=n;return typeof n=="function"&&(r=n()),r.concat(SY({type:"raf"}))},devTools:yx.devToolsEnabled})};function CMe(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Qr(),s=x.useRef(null);if(i)return n;s.current==null&&(s.current=PMe(e));var a=QL;return x.createElement(ZRe,{context:a,store:s.current},n)}function IMe(t){var{layout:e,margin:n}=t,r=Yt(),i=Qr();return x.useEffect(()=>{i||(r(C_e(e)),r(P_e(n)))},[r,i,e,n]),null}var kMe=x.memo(IMe,PC);function RMe(t){var e=Yt();return x.useEffect(()=>{e(xMe(t))},[e,t]),null}function az(t){var{zIndex:e,isPanorama:n}=t,r=n?"recharts-zindex-panorama-":"recharts-zindex-",i=see("".concat(r).concat(e)),s=Yt();return x.useLayoutEffect(()=>(s(NCe({zIndex:e,elementId:i,isPanorama:n})),()=>{s(LCe({zIndex:e,isPanorama:n}))}),[s,e,i,n]),x.createElement("g",{tabIndex:-1,id:i})}function oz(t){var{children:e,isPanorama:n}=t,r=pe(SCe);if(!r||r.length===0)return e;var i=r.filter(a=>a<0),s=r.filter(a=>a>0);return x.createElement(x.Fragment,null,i.map(a=>x.createElement(az,{key:a,zIndex:a,isPanorama:n})),e,s.map(a=>x.createElement(az,{key:a,zIndex:a,isPanorama:n})))}var OMe=["children"];function DMe(t,e){if(t==null)return{};var n,r,i=MMe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function MMe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function rT(){return rT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rT.apply(null,arguments)}var NMe={width:"100%",height:"100%",display:"block"},LMe=x.forwardRef((t,e)=>{var n=cj(),r=uj(),i=aQ();if(!Yo(n)||!Yo(r))return null;var{children:s,otherAttributes:a,title:o,desc:l}=t,c,u;return a!=null&&(typeof a.tabIndex=="number"?c=a.tabIndex:c=i?0:void 0,typeof a.role=="string"?u=a.role:u=i?"application":void 0),x.createElement(NL,rT({},a,{title:o,desc:l,role:u,tabIndex:c,width:n,height:r,style:NMe,ref:e}),s)}),jMe=t=>{var{children:e}=t,n=pe(WP);if(!n)return null;var{width:r,height:i,y:s,x:a}=n;return x.createElement(NL,{width:r,height:i,x:a,y:s},e)},lz=x.forwardRef((t,e)=>{var{children:n}=t,r=DMe(t,OMe),i=Qr();return i?x.createElement(jMe,null,x.createElement(oz,{isPanorama:!0},n)):x.createElement(LMe,rT({ref:e},r),x.createElement(oz,{isPanorama:!1},n))});function FMe(){var t=Yt(),[e,n]=x.useState(null),r=pe(G_e);return x.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),s=i.width/e.offsetWidth;sr(s)&&s!==r&&t(k_e(s))}},[e,t,r]),n}function cz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function VMe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cz(Object(n),!0).forEach(function(r){BMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BMe(t,e,n){return(e=$Me(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Me(t){var e=UMe(t,"string");return typeof e=="symbol"?e:e+""}function UMe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lp(){return lp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lp.apply(null,arguments)}var zMe=()=>(lIe(),null);function iT(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var HMe=x.forwardRef((t,e)=>{var n,r,i=x.useRef(null),[s,a]=x.useState({containerWidth:iT((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:iT((r=t.style)===null||r===void 0?void 0:r.height)}),o=x.useCallback((c,u)=>{a(d=>{var f=Math.round(c),p=Math.round(u);return d.containerWidth===f&&d.containerHeight===p?d:{containerWidth:f,containerHeight:p}})},[]),l=x.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null&&typeof ResizeObserver<"u"){var{width:u,height:d}=c.getBoundingClientRect();o(u,d);var f=g=>{var{width:y,height:v}=g[0].contentRect;o(y,v)},p=new ResizeObserver(f);p.observe(c),i.current=p}},[e,o]);return x.useEffect(()=>()=>{var c=i.current;c!=null&&c.disconnect()},[o]),x.createElement(x.Fragment,null,x.createElement(KP,{width:s.containerWidth,height:s.containerHeight}),x.createElement("div",lp({ref:l},t)))}),WMe=x.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,s]=x.useState({containerWidth:iT(n),containerHeight:iT(r)}),a=x.useCallback((l,c)=>{s(u=>{var d=Math.round(l),f=Math.round(c);return u.containerWidth===d&&u.containerHeight===f?u:{containerWidth:d,containerHeight:f}})},[]),o=x.useCallback(l=>{if(typeof e=="function"&&e(l),l!=null){var{width:c,height:u}=l.getBoundingClientRect();a(c,u)}},[e,a]);return x.createElement(x.Fragment,null,x.createElement(KP,{width:i.containerWidth,height:i.containerHeight}),x.createElement("div",lp({ref:o},t)))}),GMe=x.forwardRef((t,e)=>{var{width:n,height:r}=t;return x.createElement(x.Fragment,null,x.createElement(KP,{width:n,height:r}),x.createElement("div",lp({ref:e},t)))}),KMe=x.forwardRef((t,e)=>{var{width:n,height:r}=t;return yc(n)||yc(r)?x.createElement(WMe,lp({},t,{ref:e})):x.createElement(GMe,lp({},t,{ref:e}))});function qMe(t){return t===!0?HMe:KMe}var XMe=x.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:a,onDoubleClick:o,onMouseDown:l,onMouseEnter:c,onMouseLeave:u,onMouseMove:d,onMouseUp:f,onTouchEnd:p,onTouchMove:g,onTouchStart:y,style:v,width:b,responsive:_,dispatchTouchEvents:w=!0}=t,T=x.useRef(null),P=Yt(),[O,C]=x.useState(null),[I,M]=x.useState(null),L=FMe(),N=lj(),F=(N==null?void 0:N.width)>0?N.width:b,j=(N==null?void 0:N.height)>0?N.height:i,K=x.useCallback(X=>{L(X),typeof e=="function"&&e(X),C(X),M(X),X!=null&&(T.current=X)},[L,e,C,M]),te=x.useCallback(X=>{P(See(X)),P(Rs({handler:s,reactEvent:X}))},[P,s]),Z=x.useCallback(X=>{P(qM(X)),P(Rs({handler:c,reactEvent:X}))},[P,c]),G=x.useCallback(X=>{P(cZ()),P(Rs({handler:u,reactEvent:X}))},[P,u]),U=x.useCallback(X=>{P(qM(X)),P(Rs({handler:d,reactEvent:X}))},[P,d]),H=x.useCallback(()=>{P(Ree())},[P]),re=x.useCallback(X=>{P(kee(X.key))},[P]),ve=x.useCallback(X=>{P(Rs({handler:a,reactEvent:X}))},[P,a]),de=x.useCallback(X=>{P(Rs({handler:o,reactEvent:X}))},[P,o]),xe=x.useCallback(X=>{P(Rs({handler:l,reactEvent:X}))},[P,l]),je=x.useCallback(X=>{P(Rs({handler:f,reactEvent:X}))},[P,f]),dt=x.useCallback(X=>{P(Rs({handler:y,reactEvent:X}))},[P,y]),ft=x.useCallback(X=>{w&&P(Dee(X)),P(Rs({handler:g,reactEvent:X}))},[P,w,g]),Ee=x.useCallback(X=>{P(Rs({handler:p,reactEvent:X}))},[P,p]),ha=qMe(_);return x.createElement(CZ.Provider,{value:O},x.createElement(uX.Provider,{value:I},x.createElement(ha,{width:F??(v==null?void 0:v.width),height:j??(v==null?void 0:v.height),className:it("recharts-wrapper",r),style:VMe({position:"relative",cursor:"default",width:F,height:j},v),onClick:te,onContextMenu:ve,onDoubleClick:de,onFocus:H,onKeyDown:re,onMouseDown:xe,onMouseEnter:Z,onMouseLeave:G,onMouseMove:U,onMouseUp:je,onTouchEnd:Ee,onTouchMove:ft,onTouchStart:dt,ref:K},x.createElement(zMe,null),n)))}),YMe=["width","height","responsive","children","className","style","compact","title","desc"];function QMe(t,e){if(t==null)return{};var n,r,i=JMe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function JMe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ZMe=x.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:s,className:a,style:o,compact:l,title:c,desc:u}=t,d=QMe(t,YMe),f=oa(d);return l?x.createElement(x.Fragment,null,x.createElement(KP,{width:n,height:r}),x.createElement(lz,{otherAttributes:f,title:c,desc:u},s)):x.createElement(XMe,{className:a,style:o,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},x.createElement(lz,{otherAttributes:f,title:c,desc:u,ref:e},x.createElement(dOe,null,s)))});function XM(){return XM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XM.apply(null,arguments)}var eNe={top:5,right:5,bottom:5,left:5},tNe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:eNe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},PF=x.forwardRef(function(e,n){var r,i=ar(e.categoricalChartProps,tNe),{chartName:s,defaultTooltipEventType:a,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,categoricalChartProps:c}=e,u={chartName:s,defaultTooltipEventType:a,validateTooltipEventTypes:o,tooltipPayloadSearcher:l,eventEmitter:void 0};return x.createElement(CMe,{preloadedState:{options:u},reduxStoreName:(r=c.id)!==null&&r!==void 0?r:s},x.createElement(nOe,{chartData:c.data}),x.createElement(kMe,{layout:i.layout,margin:i.margin}),x.createElement(RMe,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),x.createElement(ZMe,XM({},i,{ref:n})))}),nNe=["axis"],Ik=x.forwardRef((t,e)=>x.createElement(PF,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:nNe,tooltipPayloadSearcher:dF,categoricalChartProps:t,ref:e})),rNe=["item"],iNe=x.forwardRef((t,e)=>x.createElement(PF,{chartName:"ScatterChart",defaultTooltipEventType:"item",validateTooltipEventTypes:rNe,tooltipPayloadSearcher:dF,categoricalChartProps:t,ref:e})),sNe=["axis"],kk=x.forwardRef((t,e)=>x.createElement(PF,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:sNe,tooltipPayloadSearcher:dF,categoricalChartProps:t,ref:e}));function aNe(){const{isDark:t}=Ka(),[e,n]=x.useState("cmb"),r=[{l:2,Cl:1200},{l:10,Cl:2400},{l:20,Cl:3200},{l:30,Cl:3800},{l:50,Cl:5e3},{l:75,Cl:5300},{l:100,Cl:5500},{l:120,Cl:5400},{l:150,Cl:5200},{l:180,Cl:5100},{l:200,Cl:4800},{l:250,Cl:4200},{l:300,Cl:3500},{l:400,Cl:3100},{l:500,Cl:2800},{l:650,Cl:2400},{l:800,Cl:2200},{l:1e3,Cl:1800},{l:1250,Cl:1400},{l:1500,Cl:1200},{l:1800,Cl:900},{l:2e3,Cl:800},{l:2500,Cl:500}],i=[{r:.5,v_obs:60,v_disk:60,v_dm:0},{r:1,v_obs:100,v_disk:100,v_dm:0},{r:1.5,v_obs:120,v_disk:115,v_dm:20},{r:2,v_obs:140,v_disk:130,v_dm:40},{r:2.5,v_obs:150,v_disk:138,v_dm:60},{r:3,v_obs:160,v_disk:145,v_dm:80},{r:3.5,v_obs:165,v_disk:150,v_dm:100},{r:4,v_obs:170,v_disk:155,v_dm:110},{r:4.5,v_obs:172,v_disk:157,v_dm:120},{r:5,v_obs:175,v_disk:160,v_dm:130},{r:6,v_obs:178,v_disk:162,v_dm:145},{r:7,v_obs:179,v_disk:163,v_dm:155},{r:8,v_obs:180,v_disk:165,v_dm:160},{r:10,v_obs:180,v_disk:166,v_dm:170},{r:12,v_obs:180,v_disk:166.5,v_dm:175},{r:15,v_obs:180,v_disk:168,v_dm:175},{r:18,v_obs:179.5,v_disk:168.5,v_dm:176},{r:20,v_obs:180,v_disk:169,v_dm:178}],s=[{temp:2500,mag:16,type:"Main Sequence"},{temp:3e3,mag:15,type:"Main Sequence"},{temp:3500,mag:12,type:"Main Sequence"},{temp:4e3,mag:10,type:"Main Sequence"},{temp:5e3,mag:6,type:"Main Sequence"},{temp:5500,mag:4.8,type:"Main Sequence"},{temp:6e3,mag:3.5,type:"Main Sequence"},{temp:6500,mag:3,type:"Main Sequence"},{temp:7500,mag:1.8,type:"Main Sequence"},{temp:8e3,mag:1.5,type:"Main Sequence"},{temp:9e3,mag:.5,type:"Main Sequence"},{temp:1e4,mag:-1,type:"Main Sequence"},{temp:3e3,mag:-2,type:"Giants"},{temp:3500,mag:-2.5,type:"Giants"},{temp:4e3,mag:-2.8,type:"Giants"},{temp:4500,mag:-3,type:"Giants"},{temp:5e3,mag:-3.2,type:"Giants"},{temp:5500,mag:-4,type:"Giants"},{temp:3e3,mag:-6,type:"Supergiants"},{temp:3500,mag:-6.5,type:"Supergiants"},{temp:4e3,mag:-7,type:"Supergiants"},{temp:4500,mag:-7.3,type:"Supergiants"},{temp:7e3,mag:11,type:"White Dwarfs"},{temp:8e3,mag:12,type:"White Dwarfs"},{temp:1e4,mag:10,type:"White Dwarfs"},{temp:15e3,mag:10,type:"White Dwarfs"},{temp:2e4,mag:8,type:"White Dwarfs"}],a=[{t:0,h:.2},{t:.05,h:.8},{t:.1,h:1.5},{t:.15,h:2},{t:.2,h:2.5},{t:.25,h:3.2},{t:.3,h:4},{t:.35,h:5.2},{t:.4,h:6.5},{t:.45,h:8.2},{t:.5,h:10},{t:.55,h:12.5},{t:.6,h:15},{t:.65,h:18.5},{t:.7,h:22},{t:.75,h:26},{t:.8,h:32},{t:.85,h:38},{t:.9,h:45},{t:.95,h:48},{t:1,h:50}],o=Array.from({length:100},(d,f)=>{const p=(f-50)/50,v=1-.01*Math.max(0,1-Math.abs(p)*1.5);return{phase:p.toFixed(3),flux:parseFloat(v.toFixed(6))}}),l=[{day:-15,mag:22},{day:-10,mag:20},{day:-5,mag:18},{day:-2,mag:-18.5},{day:0,mag:-19.3},{day:2,mag:-19.1},{day:5,mag:-18.5},{day:8,mag:-18},{day:10,mag:-17.8},{day:15,mag:-16.5},{day:20,mag:-15.2},{day:25,mag:-13.5},{day:30,mag:-12},{day:40,mag:-8},{day:50,mag:-4},{day:60,mag:-1}],c=[{mass:5,currentLimit:50,futureLimit:.05},{mass:10,currentLimit:100,futureLimit:.1},{mass:20,currentLimit:120,futureLimit:.11},{mass:50,currentLimit:150,futureLimit:.12},{mass:75,currentLimit:140,futureLimit:.11},{mass:100,currentLimit:10,futureLimit:.01},{mass:200,currentLimit:15,futureLimit:.012},{mass:500,currentLimit:20,futureLimit:.015},{mass:1e3,currentLimit:1,futureLimit:.001},{mass:2e3,currentLimit:.5,futureLimit:5e-4}],u={grid:t?"#374151":"#e5e7eb",text:t?"#d1d5db":"#374151"};return A.jsxs("div",{className:"space-y-12",children:[A.jsxs(se.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6},children:[A.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-green-600 to-blue-600 dark:from-green-400 dark:to-blue-400 bg-clip-text text-transparent",children:"  "}),A.jsx("p",{className:`text-sm sm:text-base ${t?"text-gray-300":"text-gray-600"}`,children:", , ,     (7 )"})]}),A.jsx("div",{className:"overflow-x-auto flex gap-2 border-b border-gray-300 dark:border-gray-700 pb-2",children:[{id:"cmb",label:"CMB ",icon:""},{id:"rotation",label:"",icon:""},{id:"hr",label:"HR ",icon:""},{id:"gw",label:"",icon:""},{id:"exoplanet",label:"",icon:""},{id:"supernovae",label:"SN Ia",icon:""},{id:"dm-wimp",label:"",icon:""}].map(d=>A.jsxs("button",{onClick:()=>n(d.id),className:`px-3 py-2 text-xs sm:text-sm font-medium whitespace-nowrap transition-colors border-b-2 ${e===d.id?t?"text-blue-400 border-blue-400":"text-blue-600 border-blue-600":t?"text-gray-400 border-transparent hover:text-gray-300":"text-gray-600 border-transparent hover:text-gray-700"}`,children:[d.icon," ",d.label]},d.id))}),e==="cmb"&&A.jsxs(se.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[A.jsx("h2",{className:"text-2xl font-bold mb-2",children:"   "}),A.jsx("p",{className:`mb-6 text-sm ${t?"text-gray-300":"text-gray-600"}`,children:"      .      (_k=0),     ."}),A.jsx(qh,{width:"100%",height:350,children:A.jsxs(Ik,{data:r,children:[A.jsx(zc,{strokeDasharray:"3 3",stroke:u.grid}),A.jsx(Hc,{dataKey:"l",label:{value:" ( )",position:"bottom",offset:10},tick:{fill:u.text}}),A.jsx(Wc,{label:{value:"C_",angle:-90,position:"insideLeft"},tick:{fill:u.text}}),A.jsx(Xh,{contentStyle:{backgroundColor:t?"#1f2937":"#ffffff",border:`1px solid ${t?"#374151":"#d1d5db"}`}}),A.jsx(eS,{}),A.jsx(no,{type:"monotone",dataKey:"Cl",stroke:"#ef4444",strokeWidth:2,dot:{r:4},name:"CMB Power"})]})}),A.jsxs("div",{className:`mt-6 p-4 rounded text-sm ${t?"bg-gray-700":"bg-blue-50"}`,children:[A.jsx("p",{className:"font-semibold mb-2",children:" :"}),A.jsxs("ul",{className:"space-y-1 text-xs",children:[A.jsxs("li",{children:[" ",A.jsx("strong",{children:"  "})," (~220):  ,   "]}),A.jsxs("li",{children:[" ",A.jsx("strong",{children:""}),":    "]}),A.jsxs("li",{children:[" ",A.jsx("strong",{children:"_ h=0.1197, _m h=0.1220"})," (Planck 2018)"]})]})]})]}),e==="rotation"&&A.jsxs(se.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[A.jsx("h2",{className:"text-2xl font-bold mb-2",children:"   "}),A.jsx("p",{className:`mb-6 text-sm ${t?"text-gray-300":"text-gray-600"}`,children:"  (v_obs)   .  (v_dm)    ."}),A.jsx(qh,{width:"100%",height:350,children:A.jsxs(kk,{data:i,children:[A.jsx(zc,{strokeDasharray:"3 3",stroke:u.grid}),A.jsx(Hc,{dataKey:"r",label:{value:" r (kpc)",position:"bottom",offset:10},tick:{fill:u.text}}),A.jsx(Wc,{label:{value:" (km/s)",angle:-90,position:"insideLeft"},tick:{fill:u.text}}),A.jsx(Xh,{contentStyle:{backgroundColor:t?"#1f2937":"#ffffff"}}),A.jsx(eS,{}),A.jsx(no,{type:"monotone",dataKey:"v_obs",stroke:"#3b82f6",strokeWidth:3,name:" (Total)",dot:{r:3}}),A.jsx(no,{type:"monotone",dataKey:"v_disk",stroke:"#f59e0b",strokeWidth:2,name:" "}),A.jsx(no,{type:"monotone",dataKey:"v_dm",stroke:"#8b5cf6",strokeWidth:2,name:"",strokeDasharray:"5 5"})]})}),A.jsxs("div",{className:`mt-6 p-4 rounded text-sm ${t?"bg-gray-700":"bg-blue-50"}`,children:[A.jsx("p",{className:"font-semibold mb-2",children:" :"}),A.jsxs("ul",{className:"space-y-1 text-xs",children:[A.jsxs("li",{children:[" ",A.jsx("strong",{children:"Flat rotation curve"}),":    "]}),A.jsxs("li",{children:[" ",A.jsx("strong",{children:" "}),":  90% "]}),A.jsxs("li",{children:[" ",A.jsx("strong",{children:"CDM "}),":    "]})]})]})]}),e==="hr"&&A.jsxs(se.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[A.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Hertzsprung-Russell "}),A.jsx("p",{className:`mb-6 text-sm ${t?"text-gray-300":"text-gray-600"}`,children:" () ( ) .    ."}),A.jsx(qh,{width:"100%",height:350,children:A.jsxs(iNe,{data:s,children:[A.jsx(zc,{strokeDasharray:"3 3",stroke:u.grid}),A.jsx(Hc,{type:"number",dataKey:"temp",name:" (K)",label:{value:"  (K)",position:"bottom",offset:10},tick:{fill:u.text}}),A.jsx(Wc,{type:"number",dataKey:"mag",name:"",label:{value:"  ( -)",angle:-90,position:"insideLeft"},tick:{fill:u.text}}),A.jsx(Xh,{cursor:{strokeDasharray:"3 3"},contentStyle:{backgroundColor:t?"#1f2937":"#ffffff"}}),A.jsx(g0,{name:"",data:s.filter(d=>d.type==="Main Sequence"),fill:"#ef4444"}),A.jsx(g0,{name:"",data:s.filter(d=>d.type==="Giants"),fill:"#f59e0b"}),A.jsx(g0,{name:"",data:s.filter(d=>d.type==="Supergiants"),fill:"#ec4899"}),A.jsx(g0,{name:"",data:s.filter(d=>d.type==="White Dwarfs"),fill:"#8b5cf6"})]})}),A.jsxs("div",{className:`mt-6 p-4 rounded text-sm ${t?"bg-gray-700":"bg-blue-50"}`,children:[A.jsx("p",{className:"font-semibold mb-2",children:" :"}),A.jsxs("ul",{className:"space-y-1 text-xs",children:[A.jsxs("li",{children:[" ",A.jsx("strong",{children:""}),":     "]}),A.jsxs("li",{children:[" ",A.jsx("strong",{children:"/"}),":    ,    "]}),A.jsxs("li",{children:[" ",A.jsx("strong",{children:""}),":   ,    "]})]})]})]}),e==="gw"&&A.jsxs(se.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[A.jsx("h2",{className:"text-2xl font-bold mb-2",children:"  (Binary BH Merger)"}),A.jsx("p",{className:`mb-6 text-sm ${t?"text-gray-300":"text-gray-600"}`,children:"    LIGO     h(t). Chirp   ."}),A.jsx(qh,{width:"100%",height:350,children:A.jsxs(kk,{data:a,children:[A.jsx(zc,{strokeDasharray:"3 3",stroke:u.grid}),A.jsx(Hc,{dataKey:"t",label:{value:" ()",position:"bottom",offset:10},tick:{fill:u.text}}),A.jsx(Wc,{label:{value:" h(t)  10^-21",angle:-90,position:"insideLeft"},tick:{fill:u.text}}),A.jsx(Xh,{contentStyle:{backgroundColor:t?"#1f2937":"#ffffff"}}),A.jsx(no,{type:"monotone",dataKey:"h",stroke:"#06b6d4",strokeWidth:2,dot:{r:3}})]})}),A.jsxs("div",{className:`mt-6 p-4 rounded text-sm ${t?"bg-gray-700":"bg-blue-50"}`,children:[A.jsx("p",{className:"font-semibold mb-2",children:" :"}),A.jsxs("ul",{className:"space-y-1 text-xs",children:[A.jsxs("li",{children:[" ",A.jsx("strong",{children:"Chirp "}),":   +   ( )"]}),A.jsxs("li",{children:[" ",A.jsx("strong",{children:"GW150914"}),": 36+29 M BH , SNR=24"]}),A.jsxs("li",{children:[" ",A.jsx("strong",{children:" "}),": LIGO (35-250 Hz) ~100"]})]})]})]}),e==="exoplanet"&&A.jsxs(se.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[A.jsx("h2",{className:"text-2xl font-bold mb-2",children:"    (Transit)"}),A.jsx("p",{className:`mb-6 text-sm ${t?"text-gray-300":"text-gray-600"}`,children:"     ~0.01% . Kepler, TESS 5500+  ."}),A.jsx(qh,{width:"100%",height:350,children:A.jsxs(Ik,{data:o,children:[A.jsx(zc,{strokeDasharray:"3 3",stroke:u.grid}),A.jsx(Hc,{dataKey:"phase",label:{value:" ",position:"bottom",offset:10},tick:{fill:u.text}}),A.jsx(Wc,{label:{value:" ",angle:-90,position:"insideLeft"},tick:{fill:u.text},domain:[.989,1.001]}),A.jsx(Xh,{contentStyle:{backgroundColor:t?"#1f2937":"#ffffff"}}),A.jsx(no,{type:"monotone",dataKey:"flux",stroke:"#10b981",strokeWidth:2,dot:!1})]})}),A.jsxs("div",{className:`mt-6 p-4 rounded text-sm ${t?"bg-gray-700":"bg-blue-50"}`,children:[A.jsx("p",{className:"font-semibold mb-2",children:" :"}),A.jsxs("ul",{className:"space-y-1 text-xs",children:[A.jsxs("li",{children:[" ",A.jsx("strong",{children:" "}),": F/F = (R_p/R_*) ~ 0.01% ()"]}),A.jsxs("li",{children:[" ",A.jsx("strong",{children:" "}),":   "]}),A.jsxs("li",{children:[" ",A.jsx("strong",{children:"TESS "}),": 600+   ( )"]})]})]})]}),e==="supernovae"&&A.jsxs(se.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[A.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Type Ia   ()"}),A.jsx("p",{className:`mb-6 text-sm ${t?"text-gray-300":"text-gray-600"}`,children:"   .   M_V  -19.3. Phillips      ."}),A.jsx(qh,{width:"100%",height:350,children:A.jsxs(Ik,{data:l,children:[A.jsx(zc,{strokeDasharray:"3 3",stroke:u.grid}),A.jsx(Hc,{dataKey:"day",label:{value:" ( )",position:"bottom",offset:10},tick:{fill:u.text}}),A.jsx(Wc,{label:{value:"  ( +)",angle:-90,position:"insideLeft"},reversed:!0,tick:{fill:u.text}}),A.jsx(Xh,{contentStyle:{backgroundColor:t?"#1f2937":"#ffffff"}}),A.jsx(no,{type:"monotone",dataKey:"mag",stroke:"#f97316",strokeWidth:2,dot:{r:4}})]})}),A.jsxs("div",{className:`mt-6 p-4 rounded text-sm ${t?"bg-gray-700":"bg-blue-50"}`,children:[A.jsx("p",{className:"font-semibold mb-2",children:" :"}),A.jsxs("ul",{className:"space-y-1 text-xs",children:[A.jsxs("li",{children:[" ",A.jsx("strong",{children:""}),": Phillips     "]}),A.jsxs("li",{children:[" ",A.jsx("strong",{children:"  "}),": 1998 Riess, Perlmutter (Nobel 2011)"]}),A.jsxs("li",{children:[" ",A.jsx("strong",{children:"H "}),": SH0ES H = 73.041.04 km/s/Mpc (2022)"]})]})]})]}),e==="dm-wimp"&&A.jsxs(se.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[A.jsx("h2",{className:"text-2xl font-bold mb-2",children:"WIMP    (XENON, LUX)"}),A.jsx("p",{className:`mb-6 text-sm ${t?"text-gray-300":"text-gray-600"}`,children:"WIMP-    (  vs  ).  100 GeV   ."}),A.jsx(qh,{width:"100%",height:350,children:A.jsxs(kk,{data:c,children:[A.jsx(zc,{strokeDasharray:"3 3",stroke:u.grid}),A.jsx(Hc,{dataKey:"mass",label:{value:"WIMP  (GeV/c)",position:"bottom",offset:10},tick:{fill:u.text}}),A.jsx(Wc,{label:{value:"  ( )",angle:-90,position:"insideLeft"},tick:{fill:u.text}}),A.jsx(Xh,{contentStyle:{backgroundColor:t?"#1f2937":"#ffffff"}}),A.jsx(eS,{}),A.jsx(no,{type:"monotone",dataKey:"currentLimit",stroke:"#ef4444",strokeWidth:2,name:"  (XENON1T)"}),A.jsx(no,{type:"monotone",dataKey:"futureLimit",stroke:"#06b6d4",strokeWidth:2,strokeDasharray:"5 5",name:"  (DARWIN)"})]})}),A.jsxs("div",{className:`mt-6 p-4 rounded text-sm ${t?"bg-gray-700":"bg-blue-50"}`,children:[A.jsx("p",{className:"font-semibold mb-2",children:" :"}),A.jsxs("ul",{className:"space-y-1 text-xs",children:[A.jsxs("li",{children:[" ",A.jsx("strong",{children:" "}),": WIMP-     "]}),A.jsxs("li",{children:[" ",A.jsx("strong",{children:""}),":  ~ 10 cm (), 10 cm ( )"]}),A.jsxs("li",{children:[" ",A.jsx("strong",{children:" "}),":  WIMP       ,   "]})]})]})]})]})}const sT=t=>{const e=t.code||t.message;return{"auth/email-already-in-use":"  .","auth/invalid-email":"   .","auth/weak-password":"  . ( 6)","auth/user-not-found":"  .","auth/wrong-password":" .","auth/too-many-requests":"   .    .","auth/network-request-failed":"  ."}[e]||t.message||"  ."},oNe=async(t,e,n)=>{try{const r=JSON.parse(localStorage.getItem("firebaseUsers")||"{}"),i=btoa(t);if(r[i])throw new Error("  .");await uK(d1,q2);let s=null,a=!1;try{s=(await Promise.race([ype(d1,t,e),new Promise((c,u)=>setTimeout(()=>u(new Error("Firebase timeout")),5e3))])).user}catch(l){if(console.warn("Firebase  :",sT(l)),l.code==="auth/email-already-in-use")throw l;a=!0}const o={uid:(s==null?void 0:s.uid)||"local-"+Date.now(),email:t,password:btoa(e),username:n.username,affiliation:n.affiliation||"",bio:"",created_at:new Date().toISOString(),isLocal:a||!s};return r[i]=o,localStorage.setItem("firebaseUsers",JSON.stringify(r)),{uid:o.uid,email:o.email,username:o.username,isLocal:o.isLocal}}catch(r){throw console.error(" :",r),new Error(sT(r))}},lNe=async(t,e)=>{try{await uK(d1,q2);let n=null,r=!1;try{n=(await Promise.race([vpe(d1,t,e),new Promise((s,a)=>setTimeout(()=>a(new Error("Firebase timeout")),5e3))])).user}catch(i){console.warn("Firebase  ,   :",sT(i));const s=JSON.parse(localStorage.getItem("firebaseUsers")||"{}"),a=btoa(t);if(s[a]){const o=s[a];if(btoa(e)===o.password)r=!0,n={uid:o.uid,email:o.email,displayName:o.username};else throw new Error(" .")}else throw new Error("  .")}if(!n)throw new Error(" ");return{uid:n.uid,email:n.email,username:n.displayName||t.split("@")[0],isLocal:r}}catch(n){throw console.error(" :",n),new Error(sT(n))}},cNe=t=>{localStorage.setItem("currentUser",JSON.stringify(t)),localStorage.setItem("authToken",t.uid)};function uNe(){const t=hp(),{isDark:e}=Ka(),[n,r]=x.useState({email:"",password:""}),[i,s]=x.useState(""),[a,o]=x.useState(!1),l="auto",c=d=>{const{name:f,value:p}=d.target;r(g=>({...g,[f]:p})),s("")},u=async d=>{d.preventDefault(),o(!0),s("");try{if(!n.email||!n.password){s("  ."),o(!1);return}if(!n.email.includes("@")){s("   ."),o(!1);return}let f=null;if(l==="auto"||l==="firebase")try{f=await lNe(n.email,n.password);const p={uid:f.uid,email:f.email,username:f.username,role:"user",authProvider:f.isLocal?"firebase-local":"firebase"};cNe(p),localStorage.setItem("user",JSON.stringify(p)),localStorage.setItem("authToken",f.uid),localStorage.setItem("isAuthenticated","true"),console.log(`   (${f.isLocal?" ":"Firebase"}):`),window.dispatchEvent(new Event("auth-change")),setTimeout(()=>t("/"),500);return}catch(p){console.warn("Firebase  :",p.message)}s(" :     .")}catch(f){console.error(" :",f),s("   .")}finally{o(!1)}};return A.jsx("div",{className:`min-h-screen flex items-center justify-center px-4 sm:px-6 lg:px-8 transition-colors duration-200 ${e?"bg-gray-900":"bg-gray-50"}`,children:A.jsxs(se.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:`w-full max-w-md space-y-8 rounded-lg shadow-lg p-8 transition-colors duration-200 ${e?"bg-gray-800":"bg-white"}`,children:[A.jsxs("div",{className:"text-center",children:[A.jsx(se.h1,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.1},className:`text-3xl font-bold mb-2 transition-colors duration-200 ${e?"text-white":"text-gray-900"}`,children:""}),A.jsx(se.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:"   "})]}),i&&A.jsx(se.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`p-3 rounded-lg text-sm border-l-4 transition-colors duration-200 ${e?"bg-red-900/30 border-red-600 text-red-200":"bg-red-50 border-red-500 text-red-800"}`,children:i}),A.jsxs(se.form,{onSubmit:u,className:"space-y-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.3},children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),A.jsx(se.input,{whileFocus:{scale:1.02},type:"email",id:"email",name:"email",value:n.email,onChange:c,placeholder:"your@example.com",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"}`})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"password",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),A.jsx(se.input,{whileFocus:{scale:1.02},type:"password",id:"password",name:"password",value:n.password,onChange:c,placeholder:"",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"}`})]}),A.jsx(se.button,{type:"submit",disabled:a,whileHover:{scale:1.02},whileTap:{scale:.98},className:`w-full py-2 px-4 rounded-lg font-medium text-white transition-all duration-200 ${a?"bg-blue-400 cursor-not-allowed opacity-50":"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800"}`,children:a?" ...":""})]}),A.jsxs(se.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},className:`text-center text-sm transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:[" ?"," ",A.jsx(yt,{to:"/signup",className:"text-blue-600 hover:text-blue-700 font-medium",children:""})]})]})})}function hNe(){const t=hp(),{isDark:e}=Ka(),[n,r]=x.useState({username:"",email:"",password:"",confirmPassword:"",affiliation:"",agreeTerms:!1}),[i,s]=x.useState({}),[a,o]=x.useState(!1),[l,c]=x.useState(""),u="auto",d=g=>{const{name:y,value:v,type:b,checked:_}=g.target;r(w=>({...w,[y]:b==="checkbox"?_:v})),i[y]&&s(w=>({...w,[y]:""}))},f=()=>{const g={};return n.username.trim()?n.username.length<3&&(g.username=" 3  ."):g.username=" .",n.email?n.email.includes("@")||(g.email="   ."):g.email=" .",n.password?n.password.length<8?g.password=" 8  .":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(n.password)||(g.password=" , ,   ."):g.password=" .",n.password!==n.confirmPassword&&(g.confirmPassword="  ."),n.agreeTerms||(g.agreeTerms=" ."),g},p=async g=>{g.preventDefault();const y=f();if(Object.keys(y).length>0){s(y);return}o(!0),c("");try{let v=!1,b=null;if(u==="auto"||u==="firebase")try{const _=await oNe(n.email,n.password,{username:n.username,affiliation:n.affiliation});console.log("  :",_.username),v=!0}catch(_){console.warn("Firebase  :",_.message),b=_.message}if(!v&&(u==="auto"||u==="local")){const _=JSON.parse(localStorage.getItem("firebaseUsers")||"{}"),w=btoa(n.email);if(_[w]){s({submit:"  ."}),o(!1);return}const T={uid:"local-"+Date.now(),email:n.email,password:btoa(n.password),username:n.username,affiliation:n.affiliation||"",bio:"",created_at:new Date().toISOString(),isLocal:!0};_[w]=T,localStorage.setItem("firebaseUsers",JSON.stringify(_)),console.log("    "),v=!0}v&&(c(" .   ..."),setTimeout(()=>{t("/login")},2e3))}catch(v){console.error(" :",v),s({submit:"   .  ."})}finally{o(!1)}};return A.jsx("div",{className:`min-h-screen flex items-center justify-center px-4 sm:px-6 lg:px-8 transition-colors duration-200 ${e?"bg-gray-900":"bg-gray-50"}`,children:A.jsxs(se.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:`w-full max-w-md space-y-8 rounded-lg shadow-lg p-8 transition-colors duration-200 ${e?"bg-gray-800":"bg-white"}`,children:[A.jsxs("div",{className:"text-center",children:[A.jsx(se.h1,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.1},className:`text-3xl font-bold mb-2 transition-colors duration-200 ${e?"text-white":"text-gray-900"}`,children:""}),A.jsx(se.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:"   "})]}),l&&A.jsx(se.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg dark:bg-green-900 dark:border-green-700 dark:text-green-200",children:l}),i.submit&&A.jsx(se.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg dark:bg-red-900 dark:border-red-700 dark:text-red-200",children:i.submit}),A.jsxs(se.form,{onSubmit:p,className:"space-y-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.3},children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"username",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),A.jsx(se.input,{whileFocus:{scale:1.02},type:"text",id:"username",name:"username",value:n.username,onChange:d,placeholder:"  ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.username?"border-red-500":""}`}),i.username&&A.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.username})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),A.jsx(se.input,{whileFocus:{scale:1.02},type:"email",id:"email",name:"email",value:n.email,onChange:d,placeholder:"your@institution.edu",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.email?"border-red-500":""}`}),i.email&&A.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.email})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"affiliation",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:"  ()"}),A.jsx(se.input,{whileFocus:{scale:1.02},type:"text",id:"affiliation",name:"affiliation",value:n.affiliation,onChange:d,placeholder:",  ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"}`})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"password",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),A.jsx(se.input,{whileFocus:{scale:1.02},type:"password",id:"password",name:"password",value:n.password,onChange:d,placeholder:"",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.password?"border-red-500":""}`}),A.jsx("p",{className:`text-xs mt-1 transition-colors duration-200 ${e?"text-gray-400":"text-gray-500"}`,children:" 8, // "}),i.password&&A.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.password})]}),A.jsxs("div",{children:[A.jsx("label",{htmlFor:"confirmPassword",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:" "}),A.jsx(se.input,{whileFocus:{scale:1.02},type:"password",id:"confirmPassword",name:"confirmPassword",value:n.confirmPassword,onChange:d,placeholder:"",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.confirmPassword?"border-red-500":""}`}),i.confirmPassword&&A.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.confirmPassword})]}),A.jsxs("div",{className:"flex items-center",children:[A.jsx("input",{type:"checkbox",id:"agreeTerms",name:"agreeTerms",checked:n.agreeTerms,onChange:d,className:"h-4 w-4 rounded"}),A.jsx("label",{htmlFor:"agreeTerms",className:`ml-3 text-sm transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:"   "})]}),i.agreeTerms&&A.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.agreeTerms}),A.jsx(se.button,{type:"submit",disabled:a,whileHover:{scale:1.02},whileTap:{scale:.98},className:`w-full py-2 px-4 rounded-lg font-medium text-white transition-all duration-200 ${a?"bg-blue-400 cursor-not-allowed opacity-50":"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800"}`,children:a?" ...":""})]}),A.jsxs(se.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},className:`text-center text-sm transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:["  ?"," ",A.jsx(yt,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-medium",children:""})]})]})})}const Nv=({children:t})=>PR()?t:A.jsx(Pie,{to:"/login",replace:!0});function dNe(){return A.jsx($ie,{children:A.jsx(jie,{basename:"/1201-project/",children:A.jsxs(kie,{children:[A.jsx(Nr,{path:"/login",element:A.jsx(uNe,{})}),A.jsx(Nr,{path:"/signup",element:A.jsx(hNe,{})}),A.jsxs(Nr,{element:A.jsx(qie,{}),children:[A.jsx(Nr,{path:"/",element:A.jsx(Cce,{})}),A.jsx(Nr,{path:"/concepts",element:A.jsx(Ice,{})}),A.jsx(Nr,{path:"/concepts/:slug",element:A.jsx(Rce,{})}),A.jsx(Nr,{path:"/papers",element:A.jsx(Lhe,{})}),A.jsx(Nr,{path:"/visualizations",element:A.jsx(aNe,{})}),A.jsx(Nr,{path:"/forum",element:A.jsx(Nv,{children:A.jsx(A0e,{})})}),A.jsx(Nr,{path:"/forum/:postId",element:A.jsx(Nv,{children:A.jsx(E0e,{})})}),A.jsx(Nr,{path:"/profile",element:A.jsx(Nv,{children:A.jsx(P0e,{})})}),A.jsx(Nr,{path:"/bookmarks",element:A.jsx(Nv,{children:A.jsx(C0e,{})})}),A.jsx(Nr,{path:"/notes",element:A.jsx(Nv,{children:A.jsx(I0e,{})})}),A.jsx(Nr,{path:"/glossary",element:A.jsx(S0e,{})}),A.jsx(Nr,{path:"/references",element:A.jsx(T0e,{})})]})]})})})}Rk.createRoot(document.getElementById("root")).render(A.jsx(_z.StrictMode,{children:A.jsx(dNe,{})}));
