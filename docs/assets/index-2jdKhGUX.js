var FQ=Object.defineProperty;var h3=r=>{throw TypeError(r)};var OQ=(r,e,t)=>e in r?FQ(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Re=(r,e,t)=>OQ(r,typeof e!="symbol"?e+"":e,t),ON=(r,e,t)=>e.has(r)||h3("Cannot "+t);var m=(r,e,t)=>(ON(r,e,"read from private field"),t?t.call(r):e.get(r)),$=(r,e,t)=>e.has(r)?h3("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),R=(r,e,t,n)=>(ON(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),j=(r,e,t)=>(ON(r,e,"access private method"),t);var $n=(r,e,t,n)=>({set _(i){R(r,e,i,t)},get _(){return m(r,e,n)}});function BQ(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var dp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nC(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function LQ(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var MU={exports:{}},iC={},IU={exports:{}},zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mx=Symbol.for("react.element"),$Q=Symbol.for("react.portal"),VQ=Symbol.for("react.fragment"),UQ=Symbol.for("react.strict_mode"),zQ=Symbol.for("react.profiler"),jQ=Symbol.for("react.provider"),qQ=Symbol.for("react.context"),HQ=Symbol.for("react.forward_ref"),GQ=Symbol.for("react.suspense"),WQ=Symbol.for("react.memo"),KQ=Symbol.for("react.lazy"),d3=Symbol.iterator;function XQ(r){return r===null||typeof r!="object"?null:(r=d3&&r[d3]||r["@@iterator"],typeof r=="function"?r:null)}var PU={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},RU=Object.assign,kU={};function $0(r,e,t){this.props=r,this.context=e,this.refs=kU,this.updater=t||PU}$0.prototype.isReactComponent={};$0.prototype.setState=function(r,e){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,e,"setState")};$0.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function FU(){}FU.prototype=$0.prototype;function XP(r,e,t){this.props=r,this.context=e,this.refs=kU,this.updater=t||PU}var YP=XP.prototype=new FU;YP.constructor=XP;RU(YP,$0.prototype);YP.isPureReactComponent=!0;var f3=Array.isArray,OU=Object.prototype.hasOwnProperty,QP={current:null},BU={key:!0,ref:!0,__self:!0,__source:!0};function LU(r,e,t){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)OU.call(e,n)&&!BU.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=t;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(r&&r.defaultProps)for(n in o=r.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:Mx,type:r,key:s,ref:a,props:i,_owner:QP.current}}function YQ(r,e){return{$$typeof:Mx,type:r.type,key:e,ref:r.ref,props:r.props,_owner:r._owner}}function JP(r){return typeof r=="object"&&r!==null&&r.$$typeof===Mx}function QQ(r){var e={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(t){return e[t]})}var m3=/\/+/g;function BN(r,e){return typeof r=="object"&&r!==null&&r.key!=null?QQ(""+r.key):e.toString(36)}function jA(r,e,t,n,i){var s=typeof r;(s==="undefined"||s==="boolean")&&(r=null);var a=!1;if(r===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(r.$$typeof){case Mx:case $Q:a=!0}}if(a)return a=r,i=i(a),r=n===""?"."+BN(a,0):n,f3(i)?(t="",r!=null&&(t=r.replace(m3,"$&/")+"/"),jA(i,e,t,"",function(u){return u})):i!=null&&(JP(i)&&(i=YQ(i,t+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(m3,"$&/")+"/")+r)),e.push(i)),1;if(a=0,n=n===""?".":n+":",f3(r))for(var o=0;o<r.length;o++){s=r[o];var l=n+BN(s,o);a+=jA(s,e,t,l,i)}else if(l=XQ(r),typeof l=="function")for(r=l.call(r),o=0;!(s=r.next()).done;)s=s.value,l=n+BN(s,o++),a+=jA(s,e,t,l,i);else if(s==="object")throw e=String(r),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function U_(r,e,t){if(r==null)return r;var n=[],i=0;return jA(r,n,"","",function(s){return e.call(t,s,i++)}),n}function JQ(r){if(r._status===-1){var e=r._result;e=e(),e.then(function(t){(r._status===0||r._status===-1)&&(r._status=1,r._result=t)},function(t){(r._status===0||r._status===-1)&&(r._status=2,r._result=t)}),r._status===-1&&(r._status=0,r._result=e)}if(r._status===1)return r._result.default;throw r._result}var Cs={current:null},qA={transition:null},ZQ={ReactCurrentDispatcher:Cs,ReactCurrentBatchConfig:qA,ReactCurrentOwner:QP};function $U(){throw Error("act(...) is not supported in production builds of React.")}zt.Children={map:U_,forEach:function(r,e,t){U_(r,function(){e.apply(this,arguments)},t)},count:function(r){var e=0;return U_(r,function(){e++}),e},toArray:function(r){return U_(r,function(e){return e})||[]},only:function(r){if(!JP(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};zt.Component=$0;zt.Fragment=VQ;zt.Profiler=zQ;zt.PureComponent=XP;zt.StrictMode=UQ;zt.Suspense=GQ;zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZQ;zt.act=$U;zt.cloneElement=function(r,e,t){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var n=RU({},r.props),i=r.key,s=r.ref,a=r._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=QP.current),e.key!==void 0&&(i=""+e.key),r.type&&r.type.defaultProps)var o=r.type.defaultProps;for(l in e)OU.call(e,l)&&!BU.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=t;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Mx,type:r.type,key:i,ref:s,props:n,_owner:a}};zt.createContext=function(r){return r={$$typeof:qQ,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:jQ,_context:r},r.Consumer=r};zt.createElement=LU;zt.createFactory=function(r){var e=LU.bind(null,r);return e.type=r,e};zt.createRef=function(){return{current:null}};zt.forwardRef=function(r){return{$$typeof:HQ,render:r}};zt.isValidElement=JP;zt.lazy=function(r){return{$$typeof:KQ,_payload:{_status:-1,_result:r},_init:JQ}};zt.memo=function(r,e){return{$$typeof:WQ,type:r,compare:e===void 0?null:e}};zt.startTransition=function(r){var e=qA.transition;qA.transition={};try{r()}finally{qA.transition=e}};zt.unstable_act=$U;zt.useCallback=function(r,e){return Cs.current.useCallback(r,e)};zt.useContext=function(r){return Cs.current.useContext(r)};zt.useDebugValue=function(){};zt.useDeferredValue=function(r){return Cs.current.useDeferredValue(r)};zt.useEffect=function(r,e){return Cs.current.useEffect(r,e)};zt.useId=function(){return Cs.current.useId()};zt.useImperativeHandle=function(r,e,t){return Cs.current.useImperativeHandle(r,e,t)};zt.useInsertionEffect=function(r,e){return Cs.current.useInsertionEffect(r,e)};zt.useLayoutEffect=function(r,e){return Cs.current.useLayoutEffect(r,e)};zt.useMemo=function(r,e){return Cs.current.useMemo(r,e)};zt.useReducer=function(r,e,t){return Cs.current.useReducer(r,e,t)};zt.useRef=function(r){return Cs.current.useRef(r)};zt.useState=function(r){return Cs.current.useState(r)};zt.useSyncExternalStore=function(r,e,t){return Cs.current.useSyncExternalStore(r,e,t)};zt.useTransition=function(){return Cs.current.useTransition()};zt.version="18.3.1";IU.exports=zt;var ue=IU.exports;const VU=nC(ue),eJ=BQ({__proto__:null,default:VU},[ue]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tJ=ue,rJ=Symbol.for("react.element"),nJ=Symbol.for("react.fragment"),iJ=Object.prototype.hasOwnProperty,sJ=tJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aJ={key:!0,ref:!0,__self:!0,__source:!0};function UU(r,e,t){var n,i={},s=null,a=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)iJ.call(e,n)&&!aJ.hasOwnProperty(n)&&(i[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:rJ,type:r,key:s,ref:a,props:i,_owner:sJ.current}}iC.Fragment=nJ;iC.jsx=UU;iC.jsxs=UU;MU.exports=iC;var P=MU.exports,a2={},zU={exports:{}},Ia={},jU={exports:{}},qU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function e(q,H){var te=q.length;q.push(H);e:for(;0<te;){var ce=te-1>>>1,re=q[ce];if(0<i(re,H))q[ce]=H,q[te]=re,te=ce;else break e}}function t(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var H=q[0],te=q.pop();if(te!==H){q[0]=te;e:for(var ce=0,re=q.length,O=re>>>1;ce<O;){var ne=2*(ce+1)-1,W=q[ne],pe=ne+1,me=q[pe];if(0>i(W,te))pe<re&&0>i(me,W)?(q[ce]=me,q[pe]=te,ce=pe):(q[ce]=W,q[ne]=te,ce=ne);else if(pe<re&&0>i(me,te))q[ce]=me,q[pe]=te,ce=pe;else break e}}return H}function i(q,H){var te=q.sortIndex-H.sortIndex;return te!==0?te:q.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();r.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,h=null,d=3,f=!1,p=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(q){for(var H=t(u);H!==null;){if(H.callback===null)n(u);else if(H.startTime<=q)n(u),H.sortIndex=H.expirationTime,e(l,H);else break;H=t(u)}}function A(q){if(g=!1,y(q),!p)if(t(l)!==null)p=!0,k(w);else{var H=t(u);H!==null&&z(A,H.startTime-q)}}function w(q,H){p=!1,g&&(g=!1,v(E),E=-1),f=!0;var te=d;try{for(y(H),h=t(l);h!==null&&(!(h.expirationTime>H)||q&&!D());){var ce=h.callback;if(typeof ce=="function"){h.callback=null,d=h.priorityLevel;var re=ce(h.expirationTime<=H);H=r.unstable_now(),typeof re=="function"?h.callback=re:h===t(l)&&n(l),y(H)}else n(l);h=t(l)}if(h!==null)var O=!0;else{var ne=t(u);ne!==null&&z(A,ne.startTime-H),O=!1}return O}finally{h=null,d=te,f=!1}}var _=!1,S=null,E=-1,C=5,N=-1;function D(){return!(r.unstable_now()-N<C)}function M(){if(S!==null){var q=r.unstable_now();N=q;var H=!0;try{H=S(!0,q)}finally{H?I():(_=!1,S=null)}}else _=!1}var I;if(typeof x=="function")I=function(){x(M)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,X=U.port2;U.port1.onmessage=M,I=function(){X.postMessage(null)}}else I=function(){b(M,0)};function k(q){S=q,_||(_=!0,I())}function z(q,H){E=b(function(){q(r.unstable_now())},H)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(q){q.callback=null},r.unstable_continueExecution=function(){p||f||(p=!0,k(w))},r.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<q?Math.floor(1e3/q):5},r.unstable_getCurrentPriorityLevel=function(){return d},r.unstable_getFirstCallbackNode=function(){return t(l)},r.unstable_next=function(q){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var te=d;d=H;try{return q()}finally{d=te}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(q,H){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var te=d;d=q;try{return H()}finally{d=te}},r.unstable_scheduleCallback=function(q,H,te){var ce=r.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ce+te:ce):te=ce,q){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=te+re,q={id:c++,callback:H,priorityLevel:q,startTime:te,expirationTime:re,sortIndex:-1},te>ce?(q.sortIndex=te,e(u,q),t(l)===null&&q===t(u)&&(g?(v(E),E=-1):g=!0,z(A,te-ce))):(q.sortIndex=re,e(l,q),p||f||(p=!0,k(w))),q},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(q){var H=d;return function(){var te=d;d=H;try{return q.apply(this,arguments)}finally{d=te}}}})(qU);jU.exports=qU;var oJ=jU.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lJ=ue,Da=oJ;function Oe(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var HU=new Set,Kb={};function fp(r,e){g0(r,e),g0(r+"Capture",e)}function g0(r,e){for(Kb[r]=e,r=0;r<e.length;r++)HU.add(e[r])}var pc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),o2=Object.prototype.hasOwnProperty,uJ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p3={},g3={};function cJ(r){return o2.call(g3,r)?!0:o2.call(p3,r)?!1:uJ.test(r)?g3[r]=!0:(p3[r]=!0,!1)}function hJ(r,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function dJ(r,e,t,n){if(e===null||typeof e>"u"||hJ(r,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ns(r,e,t,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var ki={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){ki[r]=new Ns(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=r[0];ki[e]=new Ns(e,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){ki[r]=new Ns(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){ki[r]=new Ns(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){ki[r]=new Ns(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){ki[r]=new Ns(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){ki[r]=new Ns(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){ki[r]=new Ns(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){ki[r]=new Ns(r,5,!1,r.toLowerCase(),null,!1,!1)});var ZP=/[\-:]([a-z])/g;function eR(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var e=r.replace(ZP,eR);ki[e]=new Ns(e,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var e=r.replace(ZP,eR);ki[e]=new Ns(e,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(ZP,eR);ki[e]=new Ns(e,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){ki[r]=new Ns(r,1,!1,r.toLowerCase(),null,!1,!1)});ki.xlinkHref=new Ns("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){ki[r]=new Ns(r,1,!1,r.toLowerCase(),null,!0,!0)});function tR(r,e,t,n){var i=ki.hasOwnProperty(e)?ki[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dJ(e,t,i,n)&&(t=null),n||i===null?cJ(e)&&(t===null?r.removeAttribute(e):r.setAttribute(e,""+t)):i.mustUseProperty?r[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,n=i.attributeNamespace,t===null?r.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,n?r.setAttributeNS(n,e,t):r.setAttribute(e,t))))}var Ic=lJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z_=Symbol.for("react.element"),ng=Symbol.for("react.portal"),ig=Symbol.for("react.fragment"),rR=Symbol.for("react.strict_mode"),l2=Symbol.for("react.profiler"),GU=Symbol.for("react.provider"),WU=Symbol.for("react.context"),nR=Symbol.for("react.forward_ref"),u2=Symbol.for("react.suspense"),c2=Symbol.for("react.suspense_list"),iR=Symbol.for("react.memo"),Gc=Symbol.for("react.lazy"),KU=Symbol.for("react.offscreen"),v3=Symbol.iterator;function Dy(r){return r===null||typeof r!="object"?null:(r=v3&&r[v3]||r["@@iterator"],typeof r=="function"?r:null)}var rn=Object.assign,LN;function Gy(r){if(LN===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);LN=e&&e[1]||""}return`
`+LN+r}var $N=!1;function VN(r,e){if(!r||$N)return"";$N=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(r,[],e)}else{try{e.call()}catch(u){n=u}r.call(e.prototype)}else{try{throw Error()}catch(u){n=u}r()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return r.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",r.displayName)),l}while(1<=a&&0<=o);break}}}finally{$N=!1,Error.prepareStackTrace=t}return(r=r?r.displayName||r.name:"")?Gy(r):""}function fJ(r){switch(r.tag){case 5:return Gy(r.type);case 16:return Gy("Lazy");case 13:return Gy("Suspense");case 19:return Gy("SuspenseList");case 0:case 2:case 15:return r=VN(r.type,!1),r;case 11:return r=VN(r.type.render,!1),r;case 1:return r=VN(r.type,!0),r;default:return""}}function h2(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case ig:return"Fragment";case ng:return"Portal";case l2:return"Profiler";case rR:return"StrictMode";case u2:return"Suspense";case c2:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case WU:return(r.displayName||"Context")+".Consumer";case GU:return(r._context.displayName||"Context")+".Provider";case nR:var e=r.render;return r=r.displayName,r||(r=e.displayName||e.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case iR:return e=r.displayName||null,e!==null?e:h2(r.type)||"Memo";case Gc:e=r._payload,r=r._init;try{return h2(r(e))}catch{}}return null}function mJ(r){var e=r.type;switch(r.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=e.render,r=r.displayName||r.name||"",e.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return h2(e);case 8:return e===rR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function md(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function XU(r){var e=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pJ(r){var e=XU(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),n=""+r[e];if(!r.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function j_(r){r._valueTracker||(r._valueTracker=pJ(r))}function YU(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return r&&(n=XU(r)?r.checked?"true":"false":r.value),r=n,r!==t?(e.setValue(r),!0):!1}function ZE(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function d2(r,e){var t=e.checked;return rn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??r._wrapperState.initialChecked})}function y3(r,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=md(e.value!=null?e.value:t),r._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function QU(r,e){e=e.checked,e!=null&&tR(r,"checked",e,!1)}function f2(r,e){QU(r,e);var t=md(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&r.value===""||r.value!=t)&&(r.value=""+t):r.value!==""+t&&(r.value=""+t);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}e.hasOwnProperty("value")?m2(r,e.type,t):e.hasOwnProperty("defaultValue")&&m2(r,e.type,md(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(r.defaultChecked=!!e.defaultChecked)}function b3(r,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+r._wrapperState.initialValue,t||e===r.value||(r.value=e),r.defaultValue=e}t=r.name,t!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,t!==""&&(r.name=t)}function m2(r,e,t){(e!=="number"||ZE(r.ownerDocument)!==r)&&(t==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+t&&(r.defaultValue=""+t))}var Wy=Array.isArray;function Mg(r,e,t,n){if(r=r.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<r.length;t++)i=e.hasOwnProperty("$"+r[t].value),r[t].selected!==i&&(r[t].selected=i),i&&n&&(r[t].defaultSelected=!0)}else{for(t=""+md(t),e=null,i=0;i<r.length;i++){if(r[i].value===t){r[i].selected=!0,n&&(r[i].defaultSelected=!0);return}e!==null||r[i].disabled||(e=r[i])}e!==null&&(e.selected=!0)}}function p2(r,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Oe(91));return rn({},e,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function w3(r,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Oe(92));if(Wy(t)){if(1<t.length)throw Error(Oe(93));t=t[0]}e=t}e==null&&(e=""),t=e}r._wrapperState={initialValue:md(t)}}function JU(r,e){var t=md(e.value),n=md(e.defaultValue);t!=null&&(t=""+t,t!==r.value&&(r.value=t),e.defaultValue==null&&r.defaultValue!==t&&(r.defaultValue=t)),n!=null&&(r.defaultValue=""+n)}function x3(r){var e=r.textContent;e===r._wrapperState.initialValue&&e!==""&&e!==null&&(r.value=e)}function ZU(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function g2(r,e){return r==null||r==="http://www.w3.org/1999/xhtml"?ZU(e):r==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var q_,e9=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return r(e,t,n,i)})}:r}(function(r,e){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=e;else{for(q_=q_||document.createElement("div"),q_.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=q_.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;e.firstChild;)r.appendChild(e.firstChild)}});function Xb(r,e){if(e){var t=r.firstChild;if(t&&t===r.lastChild&&t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var Tb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gJ=["Webkit","ms","Moz","O"];Object.keys(Tb).forEach(function(r){gJ.forEach(function(e){e=e+r.charAt(0).toUpperCase()+r.substring(1),Tb[e]=Tb[r]})});function t9(r,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Tb.hasOwnProperty(r)&&Tb[r]?(""+e).trim():e+"px"}function r9(r,e){r=r.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,i=t9(t,e[t],n);t==="float"&&(t="cssFloat"),n?r.setProperty(t,i):r[t]=i}}var vJ=rn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function v2(r,e){if(e){if(vJ[r]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Oe(137,r));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Oe(62))}}function y2(r,e){if(r.indexOf("-")===-1)return typeof e.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var b2=null;function sR(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var w2=null,Ig=null,Pg=null;function _3(r){if(r=Rx(r)){if(typeof w2!="function")throw Error(Oe(280));var e=r.stateNode;e&&(e=uC(e),w2(r.stateNode,r.type,e))}}function n9(r){Ig?Pg?Pg.push(r):Pg=[r]:Ig=r}function i9(){if(Ig){var r=Ig,e=Pg;if(Pg=Ig=null,_3(r),e)for(r=0;r<e.length;r++)_3(e[r])}}function s9(r,e){return r(e)}function a9(){}var UN=!1;function o9(r,e,t){if(UN)return r(e,t);UN=!0;try{return s9(r,e,t)}finally{UN=!1,(Ig!==null||Pg!==null)&&(a9(),i9())}}function Yb(r,e){var t=r.stateNode;if(t===null)return null;var n=uC(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(t&&typeof t!="function")throw Error(Oe(231,e,typeof t));return t}var x2=!1;if(pc)try{var My={};Object.defineProperty(My,"passive",{get:function(){x2=!0}}),window.addEventListener("test",My,My),window.removeEventListener("test",My,My)}catch{x2=!1}function yJ(r,e,t,n,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var Cb=!1,eS=null,tS=!1,_2=null,bJ={onError:function(r){Cb=!0,eS=r}};function wJ(r,e,t,n,i,s,a,o,l){Cb=!1,eS=null,yJ.apply(bJ,arguments)}function xJ(r,e,t,n,i,s,a,o,l){if(wJ.apply(this,arguments),Cb){if(Cb){var u=eS;Cb=!1,eS=null}else throw Error(Oe(198));tS||(tS=!0,_2=u)}}function mp(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,e.flags&4098&&(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function l9(r){if(r.tag===13){var e=r.memoizedState;if(e===null&&(r=r.alternate,r!==null&&(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function A3(r){if(mp(r)!==r)throw Error(Oe(188))}function _J(r){var e=r.alternate;if(!e){if(e=mp(r),e===null)throw Error(Oe(188));return e!==r?null:r}for(var t=r,n=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){t=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return A3(i),r;if(s===n)return A3(i),e;s=s.sibling}throw Error(Oe(188))}if(t.return!==n.return)t=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===t){a=!0,t=i,n=s;break}if(o===n){a=!0,n=i,t=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===t){a=!0,t=s,n=i;break}if(o===n){a=!0,n=s,t=i;break}o=o.sibling}if(!a)throw Error(Oe(189))}}if(t.alternate!==n)throw Error(Oe(190))}if(t.tag!==3)throw Error(Oe(188));return t.stateNode.current===t?r:e}function u9(r){return r=_J(r),r!==null?c9(r):null}function c9(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var e=c9(r);if(e!==null)return e;r=r.sibling}return null}var h9=Da.unstable_scheduleCallback,E3=Da.unstable_cancelCallback,AJ=Da.unstable_shouldYield,EJ=Da.unstable_requestPaint,En=Da.unstable_now,SJ=Da.unstable_getCurrentPriorityLevel,aR=Da.unstable_ImmediatePriority,d9=Da.unstable_UserBlockingPriority,rS=Da.unstable_NormalPriority,TJ=Da.unstable_LowPriority,f9=Da.unstable_IdlePriority,sC=null,Ul=null;function CJ(r){if(Ul&&typeof Ul.onCommitFiberRoot=="function")try{Ul.onCommitFiberRoot(sC,r,void 0,(r.current.flags&128)===128)}catch{}}var Wo=Math.clz32?Math.clz32:MJ,NJ=Math.log,DJ=Math.LN2;function MJ(r){return r>>>=0,r===0?32:31-(NJ(r)/DJ|0)|0}var H_=64,G_=4194304;function Ky(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function nS(r,e){var t=r.pendingLanes;if(t===0)return 0;var n=0,i=r.suspendedLanes,s=r.pingedLanes,a=t&268435455;if(a!==0){var o=a&~i;o!==0?n=Ky(o):(s&=a,s!==0&&(n=Ky(s)))}else a=t&~i,a!==0?n=Ky(a):s!==0&&(n=Ky(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=t&16),e=r.entangledLanes,e!==0)for(r=r.entanglements,e&=n;0<e;)t=31-Wo(e),i=1<<t,n|=r[t],e&=~i;return n}function IJ(r,e){switch(r){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PJ(r,e){for(var t=r.suspendedLanes,n=r.pingedLanes,i=r.expirationTimes,s=r.pendingLanes;0<s;){var a=31-Wo(s),o=1<<a,l=i[a];l===-1?(!(o&t)||o&n)&&(i[a]=IJ(o,e)):l<=e&&(r.expiredLanes|=o),s&=~o}}function A2(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function m9(){var r=H_;return H_<<=1,!(H_&4194240)&&(H_=64),r}function zN(r){for(var e=[],t=0;31>t;t++)e.push(r);return e}function Ix(r,e,t){r.pendingLanes|=e,e!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,e=31-Wo(e),r[e]=t}function RJ(r,e){var t=r.pendingLanes&~e;r.pendingLanes=e,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=e,r.mutableReadLanes&=e,r.entangledLanes&=e,e=r.entanglements;var n=r.eventTimes;for(r=r.expirationTimes;0<t;){var i=31-Wo(t),s=1<<i;e[i]=0,n[i]=-1,r[i]=-1,t&=~s}}function oR(r,e){var t=r.entangledLanes|=e;for(r=r.entanglements;t;){var n=31-Wo(t),i=1<<n;i&e|r[n]&e&&(r[n]|=e),t&=~i}}var fr=0;function p9(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var g9,lR,v9,y9,b9,E2=!1,W_=[],ed=null,td=null,rd=null,Qb=new Map,Jb=new Map,Yc=[],kJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function S3(r,e){switch(r){case"focusin":case"focusout":ed=null;break;case"dragenter":case"dragleave":td=null;break;case"mouseover":case"mouseout":rd=null;break;case"pointerover":case"pointerout":Qb.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jb.delete(e.pointerId)}}function Iy(r,e,t,n,i,s){return r===null||r.nativeEvent!==s?(r={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Rx(e),e!==null&&lR(e)),r):(r.eventSystemFlags|=n,e=r.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),r)}function FJ(r,e,t,n,i){switch(e){case"focusin":return ed=Iy(ed,r,e,t,n,i),!0;case"dragenter":return td=Iy(td,r,e,t,n,i),!0;case"mouseover":return rd=Iy(rd,r,e,t,n,i),!0;case"pointerover":var s=i.pointerId;return Qb.set(s,Iy(Qb.get(s)||null,r,e,t,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Jb.set(s,Iy(Jb.get(s)||null,r,e,t,n,i)),!0}return!1}function w9(r){var e=wf(r.target);if(e!==null){var t=mp(e);if(t!==null){if(e=t.tag,e===13){if(e=l9(t),e!==null){r.blockedOn=e,b9(r.priority,function(){v9(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function HA(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0<e.length;){var t=S2(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t===null){t=r.nativeEvent;var n=new t.constructor(t.type,t);b2=n,t.target.dispatchEvent(n),b2=null}else return e=Rx(t),e!==null&&lR(e),r.blockedOn=t,!1;e.shift()}return!0}function T3(r,e,t){HA(r)&&t.delete(e)}function OJ(){E2=!1,ed!==null&&HA(ed)&&(ed=null),td!==null&&HA(td)&&(td=null),rd!==null&&HA(rd)&&(rd=null),Qb.forEach(T3),Jb.forEach(T3)}function Py(r,e){r.blockedOn===e&&(r.blockedOn=null,E2||(E2=!0,Da.unstable_scheduleCallback(Da.unstable_NormalPriority,OJ)))}function Zb(r){function e(i){return Py(i,r)}if(0<W_.length){Py(W_[0],r);for(var t=1;t<W_.length;t++){var n=W_[t];n.blockedOn===r&&(n.blockedOn=null)}}for(ed!==null&&Py(ed,r),td!==null&&Py(td,r),rd!==null&&Py(rd,r),Qb.forEach(e),Jb.forEach(e),t=0;t<Yc.length;t++)n=Yc[t],n.blockedOn===r&&(n.blockedOn=null);for(;0<Yc.length&&(t=Yc[0],t.blockedOn===null);)w9(t),t.blockedOn===null&&Yc.shift()}var Rg=Ic.ReactCurrentBatchConfig,iS=!0;function BJ(r,e,t,n){var i=fr,s=Rg.transition;Rg.transition=null;try{fr=1,uR(r,e,t,n)}finally{fr=i,Rg.transition=s}}function LJ(r,e,t,n){var i=fr,s=Rg.transition;Rg.transition=null;try{fr=4,uR(r,e,t,n)}finally{fr=i,Rg.transition=s}}function uR(r,e,t,n){if(iS){var i=S2(r,e,t,n);if(i===null)JN(r,e,n,sS,t),S3(r,n);else if(FJ(i,r,e,t,n))n.stopPropagation();else if(S3(r,n),e&4&&-1<kJ.indexOf(r)){for(;i!==null;){var s=Rx(i);if(s!==null&&g9(s),s=S2(r,e,t,n),s===null&&JN(r,e,n,sS,t),s===i)break;i=s}i!==null&&n.stopPropagation()}else JN(r,e,n,null,t)}}var sS=null;function S2(r,e,t,n){if(sS=null,r=sR(n),r=wf(r),r!==null)if(e=mp(r),e===null)r=null;else if(t=e.tag,t===13){if(r=l9(e),r!==null)return r;r=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;r=null}else e!==r&&(r=null);return sS=r,null}function x9(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SJ()){case aR:return 1;case d9:return 4;case rS:case TJ:return 16;case f9:return 536870912;default:return 16}default:return 16}}var Kh=null,cR=null,GA=null;function _9(){if(GA)return GA;var r,e=cR,t=e.length,n,i="value"in Kh?Kh.value:Kh.textContent,s=i.length;for(r=0;r<t&&e[r]===i[r];r++);var a=t-r;for(n=1;n<=a&&e[t-n]===i[s-n];n++);return GA=i.slice(r,1<n?1-n:void 0)}function WA(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}function K_(){return!0}function C3(){return!1}function Pa(r){function e(t,n,i,s,a){this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in r)r.hasOwnProperty(o)&&(t=r[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?K_:C3,this.isPropagationStopped=C3,this}return rn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=K_)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=K_)},persist:function(){},isPersistent:K_}),e}var V0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hR=Pa(V0),Px=rn({},V0,{view:0,detail:0}),$J=Pa(Px),jN,qN,Ry,aC=rn({},Px,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dR,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ry&&(Ry&&r.type==="mousemove"?(jN=r.screenX-Ry.screenX,qN=r.screenY-Ry.screenY):qN=jN=0,Ry=r),jN)},movementY:function(r){return"movementY"in r?r.movementY:qN}}),N3=Pa(aC),VJ=rn({},aC,{dataTransfer:0}),UJ=Pa(VJ),zJ=rn({},Px,{relatedTarget:0}),HN=Pa(zJ),jJ=rn({},V0,{animationName:0,elapsedTime:0,pseudoElement:0}),qJ=Pa(jJ),HJ=rn({},V0,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),GJ=Pa(HJ),WJ=rn({},V0,{data:0}),D3=Pa(WJ),KJ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XJ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YJ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QJ(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=YJ[r])?!!e[r]:!1}function dR(){return QJ}var JJ=rn({},Px,{key:function(r){if(r.key){var e=KJ[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=WA(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?XJ[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dR,charCode:function(r){return r.type==="keypress"?WA(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?WA(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),ZJ=Pa(JJ),eZ=rn({},aC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),M3=Pa(eZ),tZ=rn({},Px,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dR}),rZ=Pa(tZ),nZ=rn({},V0,{propertyName:0,elapsedTime:0,pseudoElement:0}),iZ=Pa(nZ),sZ=rn({},aC,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),aZ=Pa(sZ),oZ=[9,13,27,32],fR=pc&&"CompositionEvent"in window,Nb=null;pc&&"documentMode"in document&&(Nb=document.documentMode);var lZ=pc&&"TextEvent"in window&&!Nb,A9=pc&&(!fR||Nb&&8<Nb&&11>=Nb),I3=" ",P3=!1;function E9(r,e){switch(r){case"keyup":return oZ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function S9(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var sg=!1;function uZ(r,e){switch(r){case"compositionend":return S9(e);case"keypress":return e.which!==32?null:(P3=!0,I3);case"textInput":return r=e.data,r===I3&&P3?null:r;default:return null}}function cZ(r,e){if(sg)return r==="compositionend"||!fR&&E9(r,e)?(r=_9(),GA=cR=Kh=null,sg=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return A9&&e.locale!=="ko"?null:e.data;default:return null}}var hZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function R3(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e==="input"?!!hZ[r.type]:e==="textarea"}function T9(r,e,t,n){n9(n),e=aS(e,"onChange"),0<e.length&&(t=new hR("onChange","change",null,t,n),r.push({event:t,listeners:e}))}var Db=null,e1=null;function dZ(r){B9(r,0)}function oC(r){var e=lg(r);if(YU(e))return r}function fZ(r,e){if(r==="change")return e}var C9=!1;if(pc){var GN;if(pc){var WN="oninput"in document;if(!WN){var k3=document.createElement("div");k3.setAttribute("oninput","return;"),WN=typeof k3.oninput=="function"}GN=WN}else GN=!1;C9=GN&&(!document.documentMode||9<document.documentMode)}function F3(){Db&&(Db.detachEvent("onpropertychange",N9),e1=Db=null)}function N9(r){if(r.propertyName==="value"&&oC(e1)){var e=[];T9(e,e1,r,sR(r)),o9(dZ,e)}}function mZ(r,e,t){r==="focusin"?(F3(),Db=e,e1=t,Db.attachEvent("onpropertychange",N9)):r==="focusout"&&F3()}function pZ(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return oC(e1)}function gZ(r,e){if(r==="click")return oC(e)}function vZ(r,e){if(r==="input"||r==="change")return oC(e)}function yZ(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Qo=typeof Object.is=="function"?Object.is:yZ;function t1(r,e){if(Qo(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var i=t[n];if(!o2.call(e,i)||!Qo(r[i],e[i]))return!1}return!0}function O3(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function B3(r,e){var t=O3(r);r=0;for(var n;t;){if(t.nodeType===3){if(n=r+t.textContent.length,r<=e&&n>=e)return{node:t,offset:e-r};r=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=O3(t)}}function D9(r,e){return r&&e?r===e?!0:r&&r.nodeType===3?!1:e&&e.nodeType===3?D9(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&16):!1:!1}function M9(){for(var r=window,e=ZE();e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)r=e.contentWindow;else break;e=ZE(r.document)}return e}function mR(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e&&(e==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}function bZ(r){var e=M9(),t=r.focusedElem,n=r.selectionRange;if(e!==t&&t&&t.ownerDocument&&D9(t.ownerDocument.documentElement,t)){if(n!==null&&mR(t)){if(e=n.start,r=n.end,r===void 0&&(r=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(r,t.value.length);else if(r=(e=t.ownerDocument||document)&&e.defaultView||window,r.getSelection){r=r.getSelection();var i=t.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!r.extend&&s>n&&(i=n,n=s,s=i),i=B3(t,s);var a=B3(t,n);i&&a&&(r.rangeCount!==1||r.anchorNode!==i.node||r.anchorOffset!==i.offset||r.focusNode!==a.node||r.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),r.removeAllRanges(),s>n?(r.addRange(e),r.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),r.addRange(e)))}}for(e=[],r=t;r=r.parentNode;)r.nodeType===1&&e.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)r=e[t],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var wZ=pc&&"documentMode"in document&&11>=document.documentMode,ag=null,T2=null,Mb=null,C2=!1;function L3(r,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;C2||ag==null||ag!==ZE(n)||(n=ag,"selectionStart"in n&&mR(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Mb&&t1(Mb,n)||(Mb=n,n=aS(T2,"onSelect"),0<n.length&&(e=new hR("onSelect","select",null,e,t),r.push({event:e,listeners:n}),e.target=ag)))}function X_(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var og={animationend:X_("Animation","AnimationEnd"),animationiteration:X_("Animation","AnimationIteration"),animationstart:X_("Animation","AnimationStart"),transitionend:X_("Transition","TransitionEnd")},KN={},I9={};pc&&(I9=document.createElement("div").style,"AnimationEvent"in window||(delete og.animationend.animation,delete og.animationiteration.animation,delete og.animationstart.animation),"TransitionEvent"in window||delete og.transitionend.transition);function lC(r){if(KN[r])return KN[r];if(!og[r])return r;var e=og[r],t;for(t in e)if(e.hasOwnProperty(t)&&t in I9)return KN[r]=e[t];return r}var P9=lC("animationend"),R9=lC("animationiteration"),k9=lC("animationstart"),F9=lC("transitionend"),O9=new Map,$3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pd(r,e){O9.set(r,e),fp(e,[r])}for(var XN=0;XN<$3.length;XN++){var YN=$3[XN],xZ=YN.toLowerCase(),_Z=YN[0].toUpperCase()+YN.slice(1);Pd(xZ,"on"+_Z)}Pd(P9,"onAnimationEnd");Pd(R9,"onAnimationIteration");Pd(k9,"onAnimationStart");Pd("dblclick","onDoubleClick");Pd("focusin","onFocus");Pd("focusout","onBlur");Pd(F9,"onTransitionEnd");g0("onMouseEnter",["mouseout","mouseover"]);g0("onMouseLeave",["mouseout","mouseover"]);g0("onPointerEnter",["pointerout","pointerover"]);g0("onPointerLeave",["pointerout","pointerover"]);fp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fp("onBeforeInput",["compositionend","keypress","textInput","paste"]);fp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AZ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xy));function V3(r,e,t){var n=r.type||"unknown-event";r.currentTarget=t,xJ(n,e,void 0,r),r.currentTarget=null}function B9(r,e){e=(e&4)!==0;for(var t=0;t<r.length;t++){var n=r[t],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;V3(i,o,u),s=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;V3(i,o,u),s=l}}}if(tS)throw r=_2,tS=!1,_2=null,r}function Br(r,e){var t=e[P2];t===void 0&&(t=e[P2]=new Set);var n=r+"__bubble";t.has(n)||(L9(e,r,2,!1),t.add(n))}function QN(r,e,t){var n=0;e&&(n|=4),L9(t,r,n,e)}var Y_="_reactListening"+Math.random().toString(36).slice(2);function r1(r){if(!r[Y_]){r[Y_]=!0,HU.forEach(function(t){t!=="selectionchange"&&(AZ.has(t)||QN(t,!1,r),QN(t,!0,r))});var e=r.nodeType===9?r:r.ownerDocument;e===null||e[Y_]||(e[Y_]=!0,QN("selectionchange",!1,e))}}function L9(r,e,t,n){switch(x9(e)){case 1:var i=BJ;break;case 4:i=LJ;break;default:i=uR}t=i.bind(null,e,t,r),i=void 0,!x2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?r.addEventListener(e,t,{capture:!0,passive:i}):r.addEventListener(e,t,!0):i!==void 0?r.addEventListener(e,t,{passive:i}):r.addEventListener(e,t,!1)}function JN(r,e,t,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=wf(o),a===null)return;if(l=a.tag,l===5||l===6){n=s=a;continue e}o=o.parentNode}}n=n.return}o9(function(){var u=s,c=sR(t),h=[];e:{var d=O9.get(r);if(d!==void 0){var f=hR,p=r;switch(r){case"keypress":if(WA(t)===0)break e;case"keydown":case"keyup":f=ZJ;break;case"focusin":p="focus",f=HN;break;case"focusout":p="blur",f=HN;break;case"beforeblur":case"afterblur":f=HN;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=N3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=UJ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=rZ;break;case P9:case R9:case k9:f=qJ;break;case F9:f=iZ;break;case"scroll":f=$J;break;case"wheel":f=aZ;break;case"copy":case"cut":case"paste":f=GJ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=M3}var g=(e&4)!==0,b=!g&&r==="scroll",v=g?d!==null?d+"Capture":null:d;g=[];for(var x=u,y;x!==null;){y=x;var A=y.stateNode;if(y.tag===5&&A!==null&&(y=A,v!==null&&(A=Yb(x,v),A!=null&&g.push(n1(x,A,y)))),b)break;x=x.return}0<g.length&&(d=new f(d,p,null,t,c),h.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=r==="mouseover"||r==="pointerover",f=r==="mouseout"||r==="pointerout",d&&t!==b2&&(p=t.relatedTarget||t.fromElement)&&(wf(p)||p[gc]))break e;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=t.relatedTarget||t.toElement,f=u,p=p?wf(p):null,p!==null&&(b=mp(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(g=N3,A="onMouseLeave",v="onMouseEnter",x="mouse",(r==="pointerout"||r==="pointerover")&&(g=M3,A="onPointerLeave",v="onPointerEnter",x="pointer"),b=f==null?d:lg(f),y=p==null?d:lg(p),d=new g(A,x+"leave",f,t,c),d.target=b,d.relatedTarget=y,A=null,wf(c)===u&&(g=new g(v,x+"enter",p,t,c),g.target=y,g.relatedTarget=b,A=g),b=A,f&&p)t:{for(g=f,v=p,x=0,y=g;y;y=Op(y))x++;for(y=0,A=v;A;A=Op(A))y++;for(;0<x-y;)g=Op(g),x--;for(;0<y-x;)v=Op(v),y--;for(;x--;){if(g===v||v!==null&&g===v.alternate)break t;g=Op(g),v=Op(v)}g=null}else g=null;f!==null&&U3(h,d,f,g,!1),p!==null&&b!==null&&U3(h,b,p,g,!0)}}e:{if(d=u?lg(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var w=fZ;else if(R3(d))if(C9)w=vZ;else{w=pZ;var _=mZ}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=gZ);if(w&&(w=w(r,u))){T9(h,w,t,c);break e}_&&_(r,d,u),r==="focusout"&&(_=d._wrapperState)&&_.controlled&&d.type==="number"&&m2(d,"number",d.value)}switch(_=u?lg(u):window,r){case"focusin":(R3(_)||_.contentEditable==="true")&&(ag=_,T2=u,Mb=null);break;case"focusout":Mb=T2=ag=null;break;case"mousedown":C2=!0;break;case"contextmenu":case"mouseup":case"dragend":C2=!1,L3(h,t,c);break;case"selectionchange":if(wZ)break;case"keydown":case"keyup":L3(h,t,c)}var S;if(fR)e:{switch(r){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else sg?E9(r,t)&&(E="onCompositionEnd"):r==="keydown"&&t.keyCode===229&&(E="onCompositionStart");E&&(A9&&t.locale!=="ko"&&(sg||E!=="onCompositionStart"?E==="onCompositionEnd"&&sg&&(S=_9()):(Kh=c,cR="value"in Kh?Kh.value:Kh.textContent,sg=!0)),_=aS(u,E),0<_.length&&(E=new D3(E,r,null,t,c),h.push({event:E,listeners:_}),S?E.data=S:(S=S9(t),S!==null&&(E.data=S)))),(S=lZ?uZ(r,t):cZ(r,t))&&(u=aS(u,"onBeforeInput"),0<u.length&&(c=new D3("onBeforeInput","beforeinput",null,t,c),h.push({event:c,listeners:u}),c.data=S))}B9(h,e)})}function n1(r,e,t){return{instance:r,listener:e,currentTarget:t}}function aS(r,e){for(var t=e+"Capture",n=[];r!==null;){var i=r,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Yb(r,t),s!=null&&n.unshift(n1(r,s,i)),s=Yb(r,e),s!=null&&n.push(n1(r,s,i))),r=r.return}return n}function Op(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function U3(r,e,t,n,i){for(var s=e._reactName,a=[];t!==null&&t!==n;){var o=t,l=o.alternate,u=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&u!==null&&(o=u,i?(l=Yb(t,s),l!=null&&a.unshift(n1(t,l,o))):i||(l=Yb(t,s),l!=null&&a.push(n1(t,l,o)))),t=t.return}a.length!==0&&r.push({event:e,listeners:a})}var EZ=/\r\n?/g,SZ=/\u0000|\uFFFD/g;function z3(r){return(typeof r=="string"?r:""+r).replace(EZ,`
`).replace(SZ,"")}function Q_(r,e,t){if(e=z3(e),z3(r)!==e&&t)throw Error(Oe(425))}function oS(){}var N2=null,D2=null;function M2(r,e){return r==="textarea"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var I2=typeof setTimeout=="function"?setTimeout:void 0,TZ=typeof clearTimeout=="function"?clearTimeout:void 0,j3=typeof Promise=="function"?Promise:void 0,CZ=typeof queueMicrotask=="function"?queueMicrotask:typeof j3<"u"?function(r){return j3.resolve(null).then(r).catch(NZ)}:I2;function NZ(r){setTimeout(function(){throw r})}function ZN(r,e){var t=e,n=0;do{var i=t.nextSibling;if(r.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(n===0){r.removeChild(i),Zb(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=i}while(t);Zb(e)}function nd(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break;if(e===8){if(e=r.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return r}function q3(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&&e++}r=r.previousSibling}return null}var U0=Math.random().toString(36).slice(2),Ll="__reactFiber$"+U0,i1="__reactProps$"+U0,gc="__reactContainer$"+U0,P2="__reactEvents$"+U0,DZ="__reactListeners$"+U0,MZ="__reactHandles$"+U0;function wf(r){var e=r[Ll];if(e)return e;for(var t=r.parentNode;t;){if(e=t[gc]||t[Ll]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(r=q3(r);r!==null;){if(t=r[Ll])return t;r=q3(r)}return e}r=t,t=r.parentNode}return null}function Rx(r){return r=r[Ll]||r[gc],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function lg(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(Oe(33))}function uC(r){return r[i1]||null}var R2=[],ug=-1;function Rd(r){return{current:r}}function Vr(r){0>ug||(r.current=R2[ug],R2[ug]=null,ug--)}function kr(r,e){ug++,R2[ug]=r.current,r.current=e}var pd={},ts=Rd(pd),Gs=Rd(!1),Qm=pd;function v0(r,e){var t=r.type.contextTypes;if(!t)return pd;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=i),i}function Ws(r){return r=r.childContextTypes,r!=null}function lS(){Vr(Gs),Vr(ts)}function H3(r,e,t){if(ts.current!==pd)throw Error(Oe(168));kr(ts,e),kr(Gs,t)}function $9(r,e,t){var n=r.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Oe(108,mJ(r)||"Unknown",i));return rn({},t,n)}function uS(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||pd,Qm=ts.current,kr(ts,r),kr(Gs,Gs.current),!0}function G3(r,e,t){var n=r.stateNode;if(!n)throw Error(Oe(169));t?(r=$9(r,e,Qm),n.__reactInternalMemoizedMergedChildContext=r,Vr(Gs),Vr(ts),kr(ts,r)):Vr(Gs),kr(Gs,t)}var bu=null,cC=!1,eD=!1;function V9(r){bu===null?bu=[r]:bu.push(r)}function IZ(r){cC=!0,V9(r)}function kd(){if(!eD&&bu!==null){eD=!0;var r=0,e=fr;try{var t=bu;for(fr=1;r<t.length;r++){var n=t[r];do n=n(!0);while(n!==null)}bu=null,cC=!1}catch(i){throw bu!==null&&(bu=bu.slice(r+1)),h9(aR,kd),i}finally{fr=e,eD=!1}}return null}var cg=[],hg=0,cS=null,hS=0,no=[],io=0,Jm=null,tc=1,rc="";function of(r,e){cg[hg++]=hS,cg[hg++]=cS,cS=r,hS=e}function U9(r,e,t){no[io++]=tc,no[io++]=rc,no[io++]=Jm,Jm=r;var n=tc;r=rc;var i=32-Wo(n)-1;n&=~(1<<i),t+=1;var s=32-Wo(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,tc=1<<32-Wo(e)+i|t<<i|n,rc=s+r}else tc=1<<s|t<<i|n,rc=r}function pR(r){r.return!==null&&(of(r,1),U9(r,1,0))}function gR(r){for(;r===cS;)cS=cg[--hg],cg[hg]=null,hS=cg[--hg],cg[hg]=null;for(;r===Jm;)Jm=no[--io],no[io]=null,rc=no[--io],no[io]=null,tc=no[--io],no[io]=null}var Ca=null,Ea=null,Hr=!1,zo=null;function z9(r,e){var t=lo(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=r,e=r.deletions,e===null?(r.deletions=[t],r.flags|=16):e.push(t)}function W3(r,e){switch(r.tag){case 5:var t=r.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(r.stateNode=e,Ca=r,Ea=nd(e.firstChild),!0):!1;case 6:return e=r.pendingProps===""||e.nodeType!==3?null:e,e!==null?(r.stateNode=e,Ca=r,Ea=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Jm!==null?{id:tc,overflow:rc}:null,r.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=lo(18,null,null,0),t.stateNode=e,t.return=r,r.child=t,Ca=r,Ea=null,!0):!1;default:return!1}}function k2(r){return(r.mode&1)!==0&&(r.flags&128)===0}function F2(r){if(Hr){var e=Ea;if(e){var t=e;if(!W3(r,e)){if(k2(r))throw Error(Oe(418));e=nd(t.nextSibling);var n=Ca;e&&W3(r,e)?z9(n,t):(r.flags=r.flags&-4097|2,Hr=!1,Ca=r)}}else{if(k2(r))throw Error(Oe(418));r.flags=r.flags&-4097|2,Hr=!1,Ca=r}}}function K3(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Ca=r}function J_(r){if(r!==Ca)return!1;if(!Hr)return K3(r),Hr=!0,!1;var e;if((e=r.tag!==3)&&!(e=r.tag!==5)&&(e=r.type,e=e!=="head"&&e!=="body"&&!M2(r.type,r.memoizedProps)),e&&(e=Ea)){if(k2(r))throw j9(),Error(Oe(418));for(;e;)z9(r,e),e=nd(e.nextSibling)}if(K3(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Oe(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="/$"){if(e===0){Ea=nd(r.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}r=r.nextSibling}Ea=null}}else Ea=Ca?nd(r.stateNode.nextSibling):null;return!0}function j9(){for(var r=Ea;r;)r=nd(r.nextSibling)}function y0(){Ea=Ca=null,Hr=!1}function vR(r){zo===null?zo=[r]:zo.push(r)}var PZ=Ic.ReactCurrentBatchConfig;function ky(r,e,t){if(r=t.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Oe(309));var n=t.stateNode}if(!n)throw Error(Oe(147,r));var i=n,s=""+r;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof r!="string")throw Error(Oe(284));if(!t._owner)throw Error(Oe(290,r))}return r}function Z_(r,e){throw r=Object.prototype.toString.call(e),Error(Oe(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r))}function X3(r){var e=r._init;return e(r._payload)}function q9(r){function e(v,x){if(r){var y=v.deletions;y===null?(v.deletions=[x],v.flags|=16):y.push(x)}}function t(v,x){if(!r)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function n(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function i(v,x){return v=od(v,x),v.index=0,v.sibling=null,v}function s(v,x,y){return v.index=y,r?(y=v.alternate,y!==null?(y=y.index,y<x?(v.flags|=2,x):y):(v.flags|=2,x)):(v.flags|=1048576,x)}function a(v){return r&&v.alternate===null&&(v.flags|=2),v}function o(v,x,y,A){return x===null||x.tag!==6?(x=oD(y,v.mode,A),x.return=v,x):(x=i(x,y),x.return=v,x)}function l(v,x,y,A){var w=y.type;return w===ig?c(v,x,y.props.children,A,y.key):x!==null&&(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Gc&&X3(w)===x.type)?(A=i(x,y.props),A.ref=ky(v,x,y),A.return=v,A):(A=eE(y.type,y.key,y.props,null,v.mode,A),A.ref=ky(v,x,y),A.return=v,A)}function u(v,x,y,A){return x===null||x.tag!==4||x.stateNode.containerInfo!==y.containerInfo||x.stateNode.implementation!==y.implementation?(x=lD(y,v.mode,A),x.return=v,x):(x=i(x,y.children||[]),x.return=v,x)}function c(v,x,y,A,w){return x===null||x.tag!==7?(x=qm(y,v.mode,A,w),x.return=v,x):(x=i(x,y),x.return=v,x)}function h(v,x,y){if(typeof x=="string"&&x!==""||typeof x=="number")return x=oD(""+x,v.mode,y),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case z_:return y=eE(x.type,x.key,x.props,null,v.mode,y),y.ref=ky(v,null,x),y.return=v,y;case ng:return x=lD(x,v.mode,y),x.return=v,x;case Gc:var A=x._init;return h(v,A(x._payload),y)}if(Wy(x)||Dy(x))return x=qm(x,v.mode,y,null),x.return=v,x;Z_(v,x)}return null}function d(v,x,y,A){var w=x!==null?x.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return w!==null?null:o(v,x,""+y,A);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case z_:return y.key===w?l(v,x,y,A):null;case ng:return y.key===w?u(v,x,y,A):null;case Gc:return w=y._init,d(v,x,w(y._payload),A)}if(Wy(y)||Dy(y))return w!==null?null:c(v,x,y,A,null);Z_(v,y)}return null}function f(v,x,y,A,w){if(typeof A=="string"&&A!==""||typeof A=="number")return v=v.get(y)||null,o(x,v,""+A,w);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case z_:return v=v.get(A.key===null?y:A.key)||null,l(x,v,A,w);case ng:return v=v.get(A.key===null?y:A.key)||null,u(x,v,A,w);case Gc:var _=A._init;return f(v,x,y,_(A._payload),w)}if(Wy(A)||Dy(A))return v=v.get(y)||null,c(x,v,A,w,null);Z_(x,A)}return null}function p(v,x,y,A){for(var w=null,_=null,S=x,E=x=0,C=null;S!==null&&E<y.length;E++){S.index>E?(C=S,S=null):C=S.sibling;var N=d(v,S,y[E],A);if(N===null){S===null&&(S=C);break}r&&S&&N.alternate===null&&e(v,S),x=s(N,x,E),_===null?w=N:_.sibling=N,_=N,S=C}if(E===y.length)return t(v,S),Hr&&of(v,E),w;if(S===null){for(;E<y.length;E++)S=h(v,y[E],A),S!==null&&(x=s(S,x,E),_===null?w=S:_.sibling=S,_=S);return Hr&&of(v,E),w}for(S=n(v,S);E<y.length;E++)C=f(S,v,E,y[E],A),C!==null&&(r&&C.alternate!==null&&S.delete(C.key===null?E:C.key),x=s(C,x,E),_===null?w=C:_.sibling=C,_=C);return r&&S.forEach(function(D){return e(v,D)}),Hr&&of(v,E),w}function g(v,x,y,A){var w=Dy(y);if(typeof w!="function")throw Error(Oe(150));if(y=w.call(y),y==null)throw Error(Oe(151));for(var _=w=null,S=x,E=x=0,C=null,N=y.next();S!==null&&!N.done;E++,N=y.next()){S.index>E?(C=S,S=null):C=S.sibling;var D=d(v,S,N.value,A);if(D===null){S===null&&(S=C);break}r&&S&&D.alternate===null&&e(v,S),x=s(D,x,E),_===null?w=D:_.sibling=D,_=D,S=C}if(N.done)return t(v,S),Hr&&of(v,E),w;if(S===null){for(;!N.done;E++,N=y.next())N=h(v,N.value,A),N!==null&&(x=s(N,x,E),_===null?w=N:_.sibling=N,_=N);return Hr&&of(v,E),w}for(S=n(v,S);!N.done;E++,N=y.next())N=f(S,v,E,N.value,A),N!==null&&(r&&N.alternate!==null&&S.delete(N.key===null?E:N.key),x=s(N,x,E),_===null?w=N:_.sibling=N,_=N);return r&&S.forEach(function(M){return e(v,M)}),Hr&&of(v,E),w}function b(v,x,y,A){if(typeof y=="object"&&y!==null&&y.type===ig&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case z_:e:{for(var w=y.key,_=x;_!==null;){if(_.key===w){if(w=y.type,w===ig){if(_.tag===7){t(v,_.sibling),x=i(_,y.props.children),x.return=v,v=x;break e}}else if(_.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Gc&&X3(w)===_.type){t(v,_.sibling),x=i(_,y.props),x.ref=ky(v,_,y),x.return=v,v=x;break e}t(v,_);break}else e(v,_);_=_.sibling}y.type===ig?(x=qm(y.props.children,v.mode,A,y.key),x.return=v,v=x):(A=eE(y.type,y.key,y.props,null,v.mode,A),A.ref=ky(v,x,y),A.return=v,v=A)}return a(v);case ng:e:{for(_=y.key;x!==null;){if(x.key===_)if(x.tag===4&&x.stateNode.containerInfo===y.containerInfo&&x.stateNode.implementation===y.implementation){t(v,x.sibling),x=i(x,y.children||[]),x.return=v,v=x;break e}else{t(v,x);break}else e(v,x);x=x.sibling}x=lD(y,v.mode,A),x.return=v,v=x}return a(v);case Gc:return _=y._init,b(v,x,_(y._payload),A)}if(Wy(y))return p(v,x,y,A);if(Dy(y))return g(v,x,y,A);Z_(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,x!==null&&x.tag===6?(t(v,x.sibling),x=i(x,y),x.return=v,v=x):(t(v,x),x=oD(y,v.mode,A),x.return=v,v=x),a(v)):t(v,x)}return b}var b0=q9(!0),H9=q9(!1),dS=Rd(null),fS=null,dg=null,yR=null;function bR(){yR=dg=fS=null}function wR(r){var e=dS.current;Vr(dS),r._currentValue=e}function O2(r,e,t){for(;r!==null;){var n=r.alternate;if((r.childLanes&e)!==e?(r.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),r===t)break;r=r.return}}function kg(r,e){fS=r,yR=dg=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&e&&(qs=!0),r.firstContext=null)}function po(r){var e=r._currentValue;if(yR!==r)if(r={context:r,memoizedValue:e,next:null},dg===null){if(fS===null)throw Error(Oe(308));dg=r,fS.dependencies={lanes:0,firstContext:r}}else dg=dg.next=r;return e}var xf=null;function xR(r){xf===null?xf=[r]:xf.push(r)}function G9(r,e,t,n){var i=e.interleaved;return i===null?(t.next=t,xR(e)):(t.next=i.next,i.next=t),e.interleaved=t,vc(r,n)}function vc(r,e){r.lanes|=e;var t=r.alternate;for(t!==null&&(t.lanes|=e),t=r,r=r.return;r!==null;)r.childLanes|=e,t=r.alternate,t!==null&&(t.childLanes|=e),t=r,r=r.return;return t.tag===3?t.stateNode:null}var Wc=!1;function _R(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function W9(r,e){r=r.updateQueue,e.updateQueue===r&&(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function oc(r,e){return{eventTime:r,lane:e,tag:0,payload:null,callback:null,next:null}}function id(r,e,t){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,er&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,vc(r,t)}return i=n.interleaved,i===null?(e.next=e,xR(n)):(e.next=i.next,i.next=e),n.interleaved=e,vc(r,t)}function KA(r,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,oR(r,t)}}function Y3(r,e){var t=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=a:s=s.next=a,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}function mS(r,e,t,n){var i=r.updateQueue;Wc=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var c=r.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;a=0,c=u=l=null,o=s;do{var d=o.lane,f=o.eventTime;if((n&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=r,g=o;switch(d=e,f=t,g.tag){case 1:if(p=g.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=rn({},h,d);break e;case 2:Wc=!0}}o.callback!==null&&o.lane!==0&&(r.flags|=64,d=i.effects,d===null?i.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=f,l=h):c=c.next=f,a|=d;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;d=o,o=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ep|=a,r.lanes=a,r.memoizedState=h}}function Q3(r,e,t){if(r=e.effects,e.effects=null,r!==null)for(e=0;e<r.length;e++){var n=r[e],i=n.callback;if(i!==null){if(n.callback=null,n=t,typeof i!="function")throw Error(Oe(191,i));i.call(n)}}}var kx={},zl=Rd(kx),s1=Rd(kx),a1=Rd(kx);function _f(r){if(r===kx)throw Error(Oe(174));return r}function AR(r,e){switch(kr(a1,e),kr(s1,r),kr(zl,kx),r=e.nodeType,r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:g2(null,"");break;default:r=r===8?e.parentNode:e,e=r.namespaceURI||null,r=r.tagName,e=g2(e,r)}Vr(zl),kr(zl,e)}function w0(){Vr(zl),Vr(s1),Vr(a1)}function K9(r){_f(a1.current);var e=_f(zl.current),t=g2(e,r.type);e!==t&&(kr(s1,r),kr(zl,t))}function ER(r){s1.current===r&&(Vr(zl),Vr(s1))}var Yr=Rd(0);function pS(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var tD=[];function SR(){for(var r=0;r<tD.length;r++)tD[r]._workInProgressVersionPrimary=null;tD.length=0}var XA=Ic.ReactCurrentDispatcher,rD=Ic.ReactCurrentBatchConfig,Zm=0,Zr=null,qn=null,di=null,gS=!1,Ib=!1,o1=0,RZ=0;function $i(){throw Error(Oe(321))}function TR(r,e){if(e===null)return!1;for(var t=0;t<e.length&&t<r.length;t++)if(!Qo(r[t],e[t]))return!1;return!0}function CR(r,e,t,n,i,s){if(Zm=s,Zr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,XA.current=r===null||r.memoizedState===null?BZ:LZ,r=t(n,i),Ib){s=0;do{if(Ib=!1,o1=0,25<=s)throw Error(Oe(301));s+=1,di=qn=null,e.updateQueue=null,XA.current=$Z,r=t(n,i)}while(Ib)}if(XA.current=vS,e=qn!==null&&qn.next!==null,Zm=0,di=qn=Zr=null,gS=!1,e)throw Error(Oe(300));return r}function NR(){var r=o1!==0;return o1=0,r}function ml(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return di===null?Zr.memoizedState=di=r:di=di.next=r,di}function go(){if(qn===null){var r=Zr.alternate;r=r!==null?r.memoizedState:null}else r=qn.next;var e=di===null?Zr.memoizedState:di.next;if(e!==null)di=e,qn=r;else{if(r===null)throw Error(Oe(310));qn=r,r={memoizedState:qn.memoizedState,baseState:qn.baseState,baseQueue:qn.baseQueue,queue:qn.queue,next:null},di===null?Zr.memoizedState=di=r:di=di.next=r}return di}function l1(r,e){return typeof e=="function"?e(r):e}function nD(r){var e=go(),t=e.queue;if(t===null)throw Error(Oe(311));t.lastRenderedReducer=r;var n=qn,i=n.baseQueue,s=t.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,l=null,u=s;do{var c=u.lane;if((Zm&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:r(n,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=h,a=n):l=l.next=h,Zr.lanes|=c,ep|=c}u=u.next}while(u!==null&&u!==s);l===null?a=n:l.next=o,Qo(n,e.memoizedState)||(qs=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,t.lastRenderedState=n}if(r=t.interleaved,r!==null){i=r;do s=i.lane,Zr.lanes|=s,ep|=s,i=i.next;while(i!==r)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function iD(r){var e=go(),t=e.queue;if(t===null)throw Error(Oe(311));t.lastRenderedReducer=r;var n=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var a=i=i.next;do s=r(s,a.action),a=a.next;while(a!==i);Qo(s,e.memoizedState)||(qs=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,n]}function X9(){}function Y9(r,e){var t=Zr,n=go(),i=e(),s=!Qo(n.memoizedState,i);if(s&&(n.memoizedState=i,qs=!0),n=n.queue,DR(Z9.bind(null,t,n,r),[r]),n.getSnapshot!==e||s||di!==null&&di.memoizedState.tag&1){if(t.flags|=2048,u1(9,J9.bind(null,t,n,i,e),void 0,null),mi===null)throw Error(Oe(349));Zm&30||Q9(t,e,i)}return i}function Q9(r,e,t){r.flags|=16384,r={getSnapshot:e,value:t},e=Zr.updateQueue,e===null?(e={lastEffect:null,stores:null},Zr.updateQueue=e,e.stores=[r]):(t=e.stores,t===null?e.stores=[r]:t.push(r))}function J9(r,e,t,n){e.value=t,e.getSnapshot=n,ez(e)&&tz(r)}function Z9(r,e,t){return t(function(){ez(e)&&tz(r)})}function ez(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!Qo(r,t)}catch{return!0}}function tz(r){var e=vc(r,1);e!==null&&Ko(e,r,1,-1)}function J3(r){var e=ml();return typeof r=="function"&&(r=r()),e.memoizedState=e.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l1,lastRenderedState:r},e.queue=r,r=r.dispatch=OZ.bind(null,Zr,r),[e.memoizedState,r]}function u1(r,e,t,n){return r={tag:r,create:e,destroy:t,deps:n,next:null},e=Zr.updateQueue,e===null?(e={lastEffect:null,stores:null},Zr.updateQueue=e,e.lastEffect=r.next=r):(t=e.lastEffect,t===null?e.lastEffect=r.next=r:(n=t.next,t.next=r,r.next=n,e.lastEffect=r)),r}function rz(){return go().memoizedState}function YA(r,e,t,n){var i=ml();Zr.flags|=r,i.memoizedState=u1(1|e,t,void 0,n===void 0?null:n)}function hC(r,e,t,n){var i=go();n=n===void 0?null:n;var s=void 0;if(qn!==null){var a=qn.memoizedState;if(s=a.destroy,n!==null&&TR(n,a.deps)){i.memoizedState=u1(e,t,s,n);return}}Zr.flags|=r,i.memoizedState=u1(1|e,t,s,n)}function Z3(r,e){return YA(8390656,8,r,e)}function DR(r,e){return hC(2048,8,r,e)}function nz(r,e){return hC(4,2,r,e)}function iz(r,e){return hC(4,4,r,e)}function sz(r,e){if(typeof e=="function")return r=r(),e(r),function(){e(null)};if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function az(r,e,t){return t=t!=null?t.concat([r]):null,hC(4,4,sz.bind(null,e,r),t)}function MR(){}function oz(r,e){var t=go();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&TR(e,n[1])?n[0]:(t.memoizedState=[r,e],r)}function lz(r,e){var t=go();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&TR(e,n[1])?n[0]:(r=r(),t.memoizedState=[r,e],r)}function uz(r,e,t){return Zm&21?(Qo(t,e)||(t=m9(),Zr.lanes|=t,ep|=t,r.baseState=!0),e):(r.baseState&&(r.baseState=!1,qs=!0),r.memoizedState=t)}function kZ(r,e){var t=fr;fr=t!==0&&4>t?t:4,r(!0);var n=rD.transition;rD.transition={};try{r(!1),e()}finally{fr=t,rD.transition=n}}function cz(){return go().memoizedState}function FZ(r,e,t){var n=ad(r);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},hz(r))dz(e,t);else if(t=G9(r,e,t,n),t!==null){var i=ys();Ko(t,r,n,i),fz(t,e,n)}}function OZ(r,e,t){var n=ad(r),i={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(hz(r))dz(e,i);else{var s=r.alternate;if(r.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,t);if(i.hasEagerState=!0,i.eagerState=o,Qo(o,a)){var l=e.interleaved;l===null?(i.next=i,xR(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=G9(r,e,i,n),t!==null&&(i=ys(),Ko(t,r,n,i),fz(t,e,n))}}function hz(r){var e=r.alternate;return r===Zr||e!==null&&e===Zr}function dz(r,e){Ib=gS=!0;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}function fz(r,e,t){if(t&4194240){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,oR(r,t)}}var vS={readContext:po,useCallback:$i,useContext:$i,useEffect:$i,useImperativeHandle:$i,useInsertionEffect:$i,useLayoutEffect:$i,useMemo:$i,useReducer:$i,useRef:$i,useState:$i,useDebugValue:$i,useDeferredValue:$i,useTransition:$i,useMutableSource:$i,useSyncExternalStore:$i,useId:$i,unstable_isNewReconciler:!1},BZ={readContext:po,useCallback:function(r,e){return ml().memoizedState=[r,e===void 0?null:e],r},useContext:po,useEffect:Z3,useImperativeHandle:function(r,e,t){return t=t!=null?t.concat([r]):null,YA(4194308,4,sz.bind(null,e,r),t)},useLayoutEffect:function(r,e){return YA(4194308,4,r,e)},useInsertionEffect:function(r,e){return YA(4,2,r,e)},useMemo:function(r,e){var t=ml();return e=e===void 0?null:e,r=r(),t.memoizedState=[r,e],r},useReducer:function(r,e,t){var n=ml();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:e},n.queue=r,r=r.dispatch=FZ.bind(null,Zr,r),[n.memoizedState,r]},useRef:function(r){var e=ml();return r={current:r},e.memoizedState=r},useState:J3,useDebugValue:MR,useDeferredValue:function(r){return ml().memoizedState=r},useTransition:function(){var r=J3(!1),e=r[0];return r=kZ.bind(null,r[1]),ml().memoizedState=r,[e,r]},useMutableSource:function(){},useSyncExternalStore:function(r,e,t){var n=Zr,i=ml();if(Hr){if(t===void 0)throw Error(Oe(407));t=t()}else{if(t=e(),mi===null)throw Error(Oe(349));Zm&30||Q9(n,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,Z3(Z9.bind(null,n,s,r),[r]),n.flags|=2048,u1(9,J9.bind(null,n,s,t,e),void 0,null),t},useId:function(){var r=ml(),e=mi.identifierPrefix;if(Hr){var t=rc,n=tc;t=(n&~(1<<32-Wo(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=o1++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=RZ++,e=":"+e+"r"+t.toString(32)+":";return r.memoizedState=e},unstable_isNewReconciler:!1},LZ={readContext:po,useCallback:oz,useContext:po,useEffect:DR,useImperativeHandle:az,useInsertionEffect:nz,useLayoutEffect:iz,useMemo:lz,useReducer:nD,useRef:rz,useState:function(){return nD(l1)},useDebugValue:MR,useDeferredValue:function(r){var e=go();return uz(e,qn.memoizedState,r)},useTransition:function(){var r=nD(l1)[0],e=go().memoizedState;return[r,e]},useMutableSource:X9,useSyncExternalStore:Y9,useId:cz,unstable_isNewReconciler:!1},$Z={readContext:po,useCallback:oz,useContext:po,useEffect:DR,useImperativeHandle:az,useInsertionEffect:nz,useLayoutEffect:iz,useMemo:lz,useReducer:iD,useRef:rz,useState:function(){return iD(l1)},useDebugValue:MR,useDeferredValue:function(r){var e=go();return qn===null?e.memoizedState=r:uz(e,qn.memoizedState,r)},useTransition:function(){var r=iD(l1)[0],e=go().memoizedState;return[r,e]},useMutableSource:X9,useSyncExternalStore:Y9,useId:cz,unstable_isNewReconciler:!1};function No(r,e){if(r&&r.defaultProps){e=rn({},e),r=r.defaultProps;for(var t in r)e[t]===void 0&&(e[t]=r[t]);return e}return e}function B2(r,e,t,n){e=r.memoizedState,t=t(n,e),t=t==null?e:rn({},e,t),r.memoizedState=t,r.lanes===0&&(r.updateQueue.baseState=t)}var dC={isMounted:function(r){return(r=r._reactInternals)?mp(r)===r:!1},enqueueSetState:function(r,e,t){r=r._reactInternals;var n=ys(),i=ad(r),s=oc(n,i);s.payload=e,t!=null&&(s.callback=t),e=id(r,s,i),e!==null&&(Ko(e,r,i,n),KA(e,r,i))},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var n=ys(),i=ad(r),s=oc(n,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=id(r,s,i),e!==null&&(Ko(e,r,i,n),KA(e,r,i))},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=ys(),n=ad(r),i=oc(t,n);i.tag=2,e!=null&&(i.callback=e),e=id(r,i,n),e!==null&&(Ko(e,r,n,t),KA(e,r,n))}};function eB(r,e,t,n,i,s,a){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!t1(t,n)||!t1(i,s):!0}function mz(r,e,t){var n=!1,i=pd,s=e.contextType;return typeof s=="object"&&s!==null?s=po(s):(i=Ws(e)?Qm:ts.current,n=e.contextTypes,s=(n=n!=null)?v0(r,i):pd),e=new e(t,s),r.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dC,r.stateNode=e,e._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=s),e}function tB(r,e,t,n){r=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==r&&dC.enqueueReplaceState(e,e.state,null)}function L2(r,e,t,n){var i=r.stateNode;i.props=t,i.state=r.memoizedState,i.refs={},_R(r);var s=e.contextType;typeof s=="object"&&s!==null?i.context=po(s):(s=Ws(e)?Qm:ts.current,i.context=v0(r,s)),i.state=r.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(B2(r,e,s,t),i.state=r.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&dC.enqueueReplaceState(i,i.state,null),mS(r,t,i,n),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4194308)}function x0(r,e){try{var t="",n=e;do t+=fJ(n),n=n.return;while(n);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:r,source:e,stack:i,digest:null}}function sD(r,e,t){return{value:r,source:null,stack:t??null,digest:e??null}}function $2(r,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var VZ=typeof WeakMap=="function"?WeakMap:Map;function pz(r,e,t){t=oc(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){bS||(bS=!0,X2=n),$2(r,e)},t}function gz(r,e,t){t=oc(-1,t),t.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;t.payload=function(){return n(i)},t.callback=function(){$2(r,e)}}var s=r.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){$2(r,e),typeof n!="function"&&(sd===null?sd=new Set([this]):sd.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function rB(r,e,t){var n=r.pingCache;if(n===null){n=r.pingCache=new VZ;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(t)||(i.add(t),r=eee.bind(null,r,e,t),e.then(r,r))}function nB(r){do{var e;if((e=r.tag===13)&&(e=r.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return r;r=r.return}while(r!==null);return null}function iB(r,e,t,n,i){return r.mode&1?(r.flags|=65536,r.lanes=i,r):(r===e?r.flags|=65536:(r.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=oc(-1,1),e.tag=2,id(t,e,1))),t.lanes|=1),r)}var UZ=Ic.ReactCurrentOwner,qs=!1;function ps(r,e,t,n){e.child=r===null?H9(e,null,t,n):b0(e,r.child,t,n)}function sB(r,e,t,n,i){t=t.render;var s=e.ref;return kg(e,i),n=CR(r,e,t,n,s,i),t=NR(),r!==null&&!qs?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,yc(r,e,i)):(Hr&&t&&pR(e),e.flags|=1,ps(r,e,n,i),e.child)}function aB(r,e,t,n,i){if(r===null){var s=t.type;return typeof s=="function"&&!LR(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,vz(r,e,s,n,i)):(r=eE(t.type,null,n,e,e.mode,i),r.ref=e.ref,r.return=e,e.child=r)}if(s=r.child,!(r.lanes&i)){var a=s.memoizedProps;if(t=t.compare,t=t!==null?t:t1,t(a,n)&&r.ref===e.ref)return yc(r,e,i)}return e.flags|=1,r=od(s,n),r.ref=e.ref,r.return=e,e.child=r}function vz(r,e,t,n,i){if(r!==null){var s=r.memoizedProps;if(t1(s,n)&&r.ref===e.ref)if(qs=!1,e.pendingProps=n=s,(r.lanes&i)!==0)r.flags&131072&&(qs=!0);else return e.lanes=r.lanes,yc(r,e,i)}return V2(r,e,t,n,i)}function yz(r,e,t){var n=e.pendingProps,i=n.children,s=r!==null?r.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kr(mg,ba),ba|=t;else{if(!(t&1073741824))return r=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:r,cachePool:null,transitions:null},e.updateQueue=null,kr(mg,ba),ba|=r,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:t,kr(mg,ba),ba|=n}else s!==null?(n=s.baseLanes|t,e.memoizedState=null):n=t,kr(mg,ba),ba|=n;return ps(r,e,i,t),e.child}function bz(r,e){var t=e.ref;(r===null&&t!==null||r!==null&&r.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function V2(r,e,t,n,i){var s=Ws(t)?Qm:ts.current;return s=v0(e,s),kg(e,i),t=CR(r,e,t,n,s,i),n=NR(),r!==null&&!qs?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,yc(r,e,i)):(Hr&&n&&pR(e),e.flags|=1,ps(r,e,t,i),e.child)}function oB(r,e,t,n,i){if(Ws(t)){var s=!0;uS(e)}else s=!1;if(kg(e,i),e.stateNode===null)QA(r,e),mz(e,t,n),L2(e,t,n,i),n=!0;else if(r===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=t.contextType;typeof u=="object"&&u!==null?u=po(u):(u=Ws(t)?Qm:ts.current,u=v0(e,u));var c=t.getDerivedStateFromProps,h=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==u)&&tB(e,a,n,u),Wc=!1;var d=e.memoizedState;a.state=d,mS(e,n,a,i),l=e.memoizedState,o!==n||d!==l||Gs.current||Wc?(typeof c=="function"&&(B2(e,t,c,n),l=e.memoizedState),(o=Wc||eB(e,t,o,n,d,l,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,W9(r,e),o=e.memoizedProps,u=e.type===e.elementType?o:No(e.type,o),a.props=u,h=e.pendingProps,d=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=po(l):(l=Ws(t)?Qm:ts.current,l=v0(e,l));var f=t.getDerivedStateFromProps;(c=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||d!==l)&&tB(e,a,n,l),Wc=!1,d=e.memoizedState,a.state=d,mS(e,n,a,i);var p=e.memoizedState;o!==h||d!==p||Gs.current||Wc?(typeof f=="function"&&(B2(e,t,f,n),p=e.memoizedState),(u=Wc||eB(e,t,u,n,d,p,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,p,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,p,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===r.memoizedProps&&d===r.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===r.memoizedProps&&d===r.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),a.props=n,a.state=p,a.context=l,n=u):(typeof a.componentDidUpdate!="function"||o===r.memoizedProps&&d===r.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===r.memoizedProps&&d===r.memoizedState||(e.flags|=1024),n=!1)}return U2(r,e,t,n,s,i)}function U2(r,e,t,n,i,s){bz(r,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&G3(e,t,!1),yc(r,e,s);n=e.stateNode,UZ.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,r!==null&&a?(e.child=b0(e,r.child,null,s),e.child=b0(e,null,o,s)):ps(r,e,o,s),e.memoizedState=n.state,i&&G3(e,t,!0),e.child}function wz(r){var e=r.stateNode;e.pendingContext?H3(r,e.pendingContext,e.pendingContext!==e.context):e.context&&H3(r,e.context,!1),AR(r,e.containerInfo)}function lB(r,e,t,n,i){return y0(),vR(i),e.flags|=256,ps(r,e,t,n),e.child}var z2={dehydrated:null,treeContext:null,retryLane:0};function j2(r){return{baseLanes:r,cachePool:null,transitions:null}}function xz(r,e,t){var n=e.pendingProps,i=Yr.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=r!==null&&r.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(r===null||r.memoizedState!==null)&&(i|=1),kr(Yr,i&1),r===null)return F2(e),r=e.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(e.mode&1?r.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,r=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=pC(a,n,0,null),r=qm(r,n,t,null),s.return=e,r.return=e,s.sibling=r,e.child=s,e.child.memoizedState=j2(t),e.memoizedState=z2,r):IR(e,a));if(i=r.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return zZ(r,e,a,n,o,i,t);if(s){s=n.fallback,a=e.mode,i=r.child,o=i.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=od(i,l),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=od(o,s):(s=qm(s,a,t,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=r.child.memoizedState,a=a===null?j2(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=r.childLanes&~t,e.memoizedState=z2,n}return s=r.child,r=s.sibling,n=od(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,r!==null&&(t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)),e.child=n,e.memoizedState=null,n}function IR(r,e){return e=pC({mode:"visible",children:e},r.mode,0,null),e.return=r,r.child=e}function eA(r,e,t,n){return n!==null&&vR(n),b0(e,r.child,null,t),r=IR(e,e.pendingProps.children),r.flags|=2,e.memoizedState=null,r}function zZ(r,e,t,n,i,s,a){if(t)return e.flags&256?(e.flags&=-257,n=sD(Error(Oe(422))),eA(r,e,a,n)):e.memoizedState!==null?(e.child=r.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=pC({mode:"visible",children:n.children},i,0,null),s=qm(s,i,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&b0(e,r.child,null,a),e.child.memoizedState=j2(a),e.memoizedState=z2,s);if(!(e.mode&1))return eA(r,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(Oe(419)),n=sD(s,n,void 0),eA(r,e,a,n)}if(o=(a&r.childLanes)!==0,qs||o){if(n=mi,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,vc(r,i),Ko(n,r,i,-1))}return BR(),n=sD(Error(Oe(421))),eA(r,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=r.child,e=tee.bind(null,r),i._reactRetry=e,null):(r=s.treeContext,Ea=nd(i.nextSibling),Ca=e,Hr=!0,zo=null,r!==null&&(no[io++]=tc,no[io++]=rc,no[io++]=Jm,tc=r.id,rc=r.overflow,Jm=e),e=IR(e,n.children),e.flags|=4096,e)}function uB(r,e,t){r.lanes|=e;var n=r.alternate;n!==null&&(n.lanes|=e),O2(r.return,e,t)}function aD(r,e,t,n,i){var s=r.memoizedState;s===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=t,s.tailMode=i)}function _z(r,e,t){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(ps(r,e,n.children,t),n=Yr.current,n&2)n=n&1|2,e.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&uB(r,t,e);else if(r.tag===19)uB(r,t,e);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(kr(Yr,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)r=t.alternate,r!==null&&pS(r)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),aD(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(r=i.alternate,r!==null&&pS(r)===null){e.child=i;break}r=i.sibling,i.sibling=t,t=i,i=r}aD(e,!0,t,null,s);break;case"together":aD(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function QA(r,e){!(e.mode&1)&&r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2)}function yc(r,e,t){if(r!==null&&(e.dependencies=r.dependencies),ep|=e.lanes,!(t&e.childLanes))return null;if(r!==null&&e.child!==r.child)throw Error(Oe(153));if(e.child!==null){for(r=e.child,t=od(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=od(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}function jZ(r,e,t){switch(e.tag){case 3:wz(e),y0();break;case 5:K9(e);break;case 1:Ws(e.type)&&uS(e);break;case 4:AR(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;kr(dS,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(kr(Yr,Yr.current&1),e.flags|=128,null):t&e.child.childLanes?xz(r,e,t):(kr(Yr,Yr.current&1),r=yc(r,e,t),r!==null?r.sibling:null);kr(Yr,Yr.current&1);break;case 19:if(n=(t&e.childLanes)!==0,r.flags&128){if(n)return _z(r,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),kr(Yr,Yr.current),n)break;return null;case 22:case 23:return e.lanes=0,yz(r,e,t)}return yc(r,e,t)}var Az,q2,Ez,Sz;Az=function(r,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)r.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};q2=function(){};Ez=function(r,e,t,n){var i=r.memoizedProps;if(i!==n){r=e.stateNode,_f(zl.current);var s=null;switch(t){case"input":i=d2(r,i),n=d2(r,n),s=[];break;case"select":i=rn({},i,{value:void 0}),n=rn({},n,{value:void 0}),s=[];break;case"textarea":i=p2(r,i),n=p2(r,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=oS)}v2(t,n);var a;t=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Kb.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Kb.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Br("scroll",r),s||o===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Sz=function(r,e,t,n){t!==n&&(e.flags|=4)};function Fy(r,e){if(!Hr)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function Vi(r){var e=r.alternate!==null&&r.alternate.child===r.child,t=0,n=0;if(e)for(var i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=r,i=i.sibling;else for(i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=r,i=i.sibling;return r.subtreeFlags|=n,r.childLanes=t,e}function qZ(r,e,t){var n=e.pendingProps;switch(gR(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vi(e),null;case 1:return Ws(e.type)&&lS(),Vi(e),null;case 3:return n=e.stateNode,w0(),Vr(Gs),Vr(ts),SR(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(J_(e)?e.flags|=4:r===null||r.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zo!==null&&(J2(zo),zo=null))),q2(r,e),Vi(e),null;case 5:ER(e);var i=_f(a1.current);if(t=e.type,r!==null&&e.stateNode!=null)Ez(r,e,t,n,i),r.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Oe(166));return Vi(e),null}if(r=_f(zl.current),J_(e)){n=e.stateNode,t=e.type;var s=e.memoizedProps;switch(n[Ll]=e,n[i1]=s,r=(e.mode&1)!==0,t){case"dialog":Br("cancel",n),Br("close",n);break;case"iframe":case"object":case"embed":Br("load",n);break;case"video":case"audio":for(i=0;i<Xy.length;i++)Br(Xy[i],n);break;case"source":Br("error",n);break;case"img":case"image":case"link":Br("error",n),Br("load",n);break;case"details":Br("toggle",n);break;case"input":y3(n,s),Br("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Br("invalid",n);break;case"textarea":w3(n,s),Br("invalid",n)}v2(t,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&Q_(n.textContent,o,r),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Q_(n.textContent,o,r),i=["children",""+o]):Kb.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Br("scroll",n)}switch(t){case"input":j_(n),b3(n,s,!0);break;case"textarea":j_(n),x3(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=oS)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=ZU(t)),r==="http://www.w3.org/1999/xhtml"?t==="script"?(r=a.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=a.createElement(t,{is:n.is}):(r=a.createElement(t),t==="select"&&(a=r,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):r=a.createElementNS(r,t),r[Ll]=e,r[i1]=n,Az(r,e,!1,!1),e.stateNode=r;e:{switch(a=y2(t,n),t){case"dialog":Br("cancel",r),Br("close",r),i=n;break;case"iframe":case"object":case"embed":Br("load",r),i=n;break;case"video":case"audio":for(i=0;i<Xy.length;i++)Br(Xy[i],r);i=n;break;case"source":Br("error",r),i=n;break;case"img":case"image":case"link":Br("error",r),Br("load",r),i=n;break;case"details":Br("toggle",r),i=n;break;case"input":y3(r,n),i=d2(r,n),Br("invalid",r);break;case"option":i=n;break;case"select":r._wrapperState={wasMultiple:!!n.multiple},i=rn({},n,{value:void 0}),Br("invalid",r);break;case"textarea":w3(r,n),i=p2(r,n),Br("invalid",r);break;default:i=n}v2(t,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?r9(r,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&e9(r,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Xb(r,l):typeof l=="number"&&Xb(r,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Kb.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Br("scroll",r):l!=null&&tR(r,s,l,a))}switch(t){case"input":j_(r),b3(r,n,!1);break;case"textarea":j_(r),x3(r);break;case"option":n.value!=null&&r.setAttribute("value",""+md(n.value));break;case"select":r.multiple=!!n.multiple,s=n.value,s!=null?Mg(r,!!n.multiple,s,!1):n.defaultValue!=null&&Mg(r,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=oS)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vi(e),null;case 6:if(r&&e.stateNode!=null)Sz(r,e,r.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Oe(166));if(t=_f(a1.current),_f(zl.current),J_(e)){if(n=e.stateNode,t=e.memoizedProps,n[Ll]=e,(s=n.nodeValue!==t)&&(r=Ca,r!==null))switch(r.tag){case 3:Q_(n.nodeValue,t,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Q_(n.nodeValue,t,(r.mode&1)!==0)}s&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[Ll]=e,e.stateNode=n}return Vi(e),null;case 13:if(Vr(Yr),n=e.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Hr&&Ea!==null&&e.mode&1&&!(e.flags&128))j9(),y0(),e.flags|=98560,s=!1;else if(s=J_(e),n!==null&&n.dehydrated!==null){if(r===null){if(!s)throw Error(Oe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Oe(317));s[Ll]=e}else y0(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vi(e),s=!1}else zo!==null&&(J2(zo),zo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(r!==null&&r.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(r===null||Yr.current&1?Gn===0&&(Gn=3):BR())),e.updateQueue!==null&&(e.flags|=4),Vi(e),null);case 4:return w0(),q2(r,e),r===null&&r1(e.stateNode.containerInfo),Vi(e),null;case 10:return wR(e.type._context),Vi(e),null;case 17:return Ws(e.type)&&lS(),Vi(e),null;case 19:if(Vr(Yr),s=e.memoizedState,s===null)return Vi(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)Fy(s,!1);else{if(Gn!==0||r!==null&&r.flags&128)for(r=e.child;r!==null;){if(a=pS(r),a!==null){for(e.flags|=128,Fy(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)s=t,r=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,r=a.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t=t.sibling;return kr(Yr,Yr.current&1|2),e.child}r=r.sibling}s.tail!==null&&En()>_0&&(e.flags|=128,n=!0,Fy(s,!1),e.lanes=4194304)}else{if(!n)if(r=pS(a),r!==null){if(e.flags|=128,n=!0,t=r.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Fy(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Hr)return Vi(e),null}else 2*En()-s.renderingStartTime>_0&&t!==1073741824&&(e.flags|=128,n=!0,Fy(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(t=s.last,t!==null?t.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=En(),e.sibling=null,t=Yr.current,kr(Yr,n?t&1|2:t&1),e):(Vi(e),null);case 22:case 23:return OR(),n=e.memoizedState!==null,r!==null&&r.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ba&1073741824&&(Vi(e),e.subtreeFlags&6&&(e.flags|=8192)):Vi(e),null;case 24:return null;case 25:return null}throw Error(Oe(156,e.tag))}function HZ(r,e){switch(gR(e),e.tag){case 1:return Ws(e.type)&&lS(),r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 3:return w0(),Vr(Gs),Vr(ts),SR(),r=e.flags,r&65536&&!(r&128)?(e.flags=r&-65537|128,e):null;case 5:return ER(e),null;case 13:if(Vr(Yr),r=e.memoizedState,r!==null&&r.dehydrated!==null){if(e.alternate===null)throw Error(Oe(340));y0()}return r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 19:return Vr(Yr),null;case 4:return w0(),null;case 10:return wR(e.type._context),null;case 22:case 23:return OR(),null;case 24:return null;default:return null}}var tA=!1,Qi=!1,GZ=typeof WeakSet=="function"?WeakSet:Set,Je=null;function fg(r,e){var t=r.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){dn(r,e,n)}else t.current=null}function H2(r,e,t){try{t()}catch(n){dn(r,e,n)}}var cB=!1;function WZ(r,e){if(N2=iS,r=M9(),mR(r)){if("selectionStart"in r)var t={start:r.selectionStart,end:r.selectionEnd};else e:{t=(t=r.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,u=0,c=0,h=r,d=null;t:for(;;){for(var f;h!==t||i!==0&&h.nodeType!==3||(o=a+i),h!==s||n!==0&&h.nodeType!==3||(l=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===r)break t;if(d===t&&++u===i&&(o=a),d===s&&++c===n&&(l=a),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(D2={focusedElem:r,selectionRange:t},iS=!1,Je=e;Je!==null;)if(e=Je,r=e.child,(e.subtreeFlags&1028)!==0&&r!==null)r.return=e,Je=r;else for(;Je!==null;){e=Je;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,b=p.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:No(e.type,g),b);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Oe(163))}}catch(A){dn(e,e.return,A)}if(r=e.sibling,r!==null){r.return=e.return,Je=r;break}Je=e.return}return p=cB,cB=!1,p}function Pb(r,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&r)===r){var s=i.destroy;i.destroy=void 0,s!==void 0&&H2(e,t,s)}i=i.next}while(i!==n)}}function fC(r,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&r)===r){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function G2(r){var e=r.ref;if(e!==null){var t=r.stateNode;switch(r.tag){case 5:r=t;break;default:r=t}typeof e=="function"?e(r):e.current=r}}function Tz(r){var e=r.alternate;e!==null&&(r.alternate=null,Tz(e)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(e=r.stateNode,e!==null&&(delete e[Ll],delete e[i1],delete e[P2],delete e[DZ],delete e[MZ])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Cz(r){return r.tag===5||r.tag===3||r.tag===4}function hB(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Cz(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function W2(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(r,e):t.insertBefore(r,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(r,t)):(e=t,e.appendChild(r)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=oS));else if(n!==4&&(r=r.child,r!==null))for(W2(r,e,t),r=r.sibling;r!==null;)W2(r,e,t),r=r.sibling}function K2(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.insertBefore(r,e):t.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(K2(r,e,t),r=r.sibling;r!==null;)K2(r,e,t),r=r.sibling}var Ai=null,Uo=!1;function Uc(r,e,t){for(t=t.child;t!==null;)Nz(r,e,t),t=t.sibling}function Nz(r,e,t){if(Ul&&typeof Ul.onCommitFiberUnmount=="function")try{Ul.onCommitFiberUnmount(sC,t)}catch{}switch(t.tag){case 5:Qi||fg(t,e);case 6:var n=Ai,i=Uo;Ai=null,Uc(r,e,t),Ai=n,Uo=i,Ai!==null&&(Uo?(r=Ai,t=t.stateNode,r.nodeType===8?r.parentNode.removeChild(t):r.removeChild(t)):Ai.removeChild(t.stateNode));break;case 18:Ai!==null&&(Uo?(r=Ai,t=t.stateNode,r.nodeType===8?ZN(r.parentNode,t):r.nodeType===1&&ZN(r,t),Zb(r)):ZN(Ai,t.stateNode));break;case 4:n=Ai,i=Uo,Ai=t.stateNode.containerInfo,Uo=!0,Uc(r,e,t),Ai=n,Uo=i;break;case 0:case 11:case 14:case 15:if(!Qi&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&H2(t,e,a),i=i.next}while(i!==n)}Uc(r,e,t);break;case 1:if(!Qi&&(fg(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(o){dn(t,e,o)}Uc(r,e,t);break;case 21:Uc(r,e,t);break;case 22:t.mode&1?(Qi=(n=Qi)||t.memoizedState!==null,Uc(r,e,t),Qi=n):Uc(r,e,t);break;default:Uc(r,e,t)}}function dB(r){var e=r.updateQueue;if(e!==null){r.updateQueue=null;var t=r.stateNode;t===null&&(t=r.stateNode=new GZ),e.forEach(function(n){var i=ree.bind(null,r,n);t.has(n)||(t.add(n),n.then(i,i))})}}function Ao(r,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];try{var s=r,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Ai=o.stateNode,Uo=!1;break e;case 3:Ai=o.stateNode.containerInfo,Uo=!0;break e;case 4:Ai=o.stateNode.containerInfo,Uo=!0;break e}o=o.return}if(Ai===null)throw Error(Oe(160));Nz(s,a,i),Ai=null,Uo=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){dn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Dz(e,r),e=e.sibling}function Dz(r,e){var t=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Ao(e,r),cl(r),n&4){try{Pb(3,r,r.return),fC(3,r)}catch(g){dn(r,r.return,g)}try{Pb(5,r,r.return)}catch(g){dn(r,r.return,g)}}break;case 1:Ao(e,r),cl(r),n&512&&t!==null&&fg(t,t.return);break;case 5:if(Ao(e,r),cl(r),n&512&&t!==null&&fg(t,t.return),r.flags&32){var i=r.stateNode;try{Xb(i,"")}catch(g){dn(r,r.return,g)}}if(n&4&&(i=r.stateNode,i!=null)){var s=r.memoizedProps,a=t!==null?t.memoizedProps:s,o=r.type,l=r.updateQueue;if(r.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&QU(i,s),y2(o,a);var u=y2(o,s);for(a=0;a<l.length;a+=2){var c=l[a],h=l[a+1];c==="style"?r9(i,h):c==="dangerouslySetInnerHTML"?e9(i,h):c==="children"?Xb(i,h):tR(i,c,h,u)}switch(o){case"input":f2(i,s);break;case"textarea":JU(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Mg(i,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?Mg(i,!!s.multiple,s.defaultValue,!0):Mg(i,!!s.multiple,s.multiple?[]:"",!1))}i[i1]=s}catch(g){dn(r,r.return,g)}}break;case 6:if(Ao(e,r),cl(r),n&4){if(r.stateNode===null)throw Error(Oe(162));i=r.stateNode,s=r.memoizedProps;try{i.nodeValue=s}catch(g){dn(r,r.return,g)}}break;case 3:if(Ao(e,r),cl(r),n&4&&t!==null&&t.memoizedState.isDehydrated)try{Zb(e.containerInfo)}catch(g){dn(r,r.return,g)}break;case 4:Ao(e,r),cl(r);break;case 13:Ao(e,r),cl(r),i=r.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(kR=En())),n&4&&dB(r);break;case 22:if(c=t!==null&&t.memoizedState!==null,r.mode&1?(Qi=(u=Qi)||c,Ao(e,r),Qi=u):Ao(e,r),cl(r),n&8192){if(u=r.memoizedState!==null,(r.stateNode.isHidden=u)&&!c&&r.mode&1)for(Je=r,c=r.child;c!==null;){for(h=Je=c;Je!==null;){switch(d=Je,f=d.child,d.tag){case 0:case 11:case 14:case 15:Pb(4,d,d.return);break;case 1:fg(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){n=d,t=d.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){dn(n,t,g)}}break;case 5:fg(d,d.return);break;case 22:if(d.memoizedState!==null){mB(h);continue}}f!==null?(f.return=d,Je=f):mB(h)}c=c.sibling}e:for(c=null,h=r;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=t9("display",a))}catch(g){dn(r,r.return,g)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){dn(r,r.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===r)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ao(e,r),cl(r),n&4&&dB(r);break;case 21:break;default:Ao(e,r),cl(r)}}function cl(r){var e=r.flags;if(e&2){try{e:{for(var t=r.return;t!==null;){if(Cz(t)){var n=t;break e}t=t.return}throw Error(Oe(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Xb(i,""),n.flags&=-33);var s=hB(r);K2(r,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=hB(r);W2(r,o,a);break;default:throw Error(Oe(161))}}catch(l){dn(r,r.return,l)}r.flags&=-3}e&4096&&(r.flags&=-4097)}function KZ(r,e,t){Je=r,Mz(r)}function Mz(r,e,t){for(var n=(r.mode&1)!==0;Je!==null;){var i=Je,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||tA;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Qi;o=tA;var u=Qi;if(tA=a,(Qi=l)&&!u)for(Je=i;Je!==null;)a=Je,l=a.child,a.tag===22&&a.memoizedState!==null?pB(i):l!==null?(l.return=a,Je=l):pB(i);for(;s!==null;)Je=s,Mz(s),s=s.sibling;Je=i,tA=o,Qi=u}fB(r)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Je=s):fB(r)}}function fB(r){for(;Je!==null;){var e=Je;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qi||fC(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Qi)if(t===null)n.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:No(e.type,t.memoizedProps);n.componentDidUpdate(i,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Q3(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Q3(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Zb(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Oe(163))}Qi||e.flags&512&&G2(e)}catch(d){dn(e,e.return,d)}}if(e===r){Je=null;break}if(t=e.sibling,t!==null){t.return=e.return,Je=t;break}Je=e.return}}function mB(r){for(;Je!==null;){var e=Je;if(e===r){Je=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Je=t;break}Je=e.return}}function pB(r){for(;Je!==null;){var e=Je;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{fC(4,e)}catch(l){dn(e,t,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){dn(e,i,l)}}var s=e.return;try{G2(e)}catch(l){dn(e,s,l)}break;case 5:var a=e.return;try{G2(e)}catch(l){dn(e,a,l)}}}catch(l){dn(e,e.return,l)}if(e===r){Je=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Je=o;break}Je=e.return}}var XZ=Math.ceil,yS=Ic.ReactCurrentDispatcher,PR=Ic.ReactCurrentOwner,co=Ic.ReactCurrentBatchConfig,er=0,mi=null,Rn=null,Pi=0,ba=0,mg=Rd(0),Gn=0,c1=null,ep=0,mC=0,RR=0,Rb=null,zs=null,kR=0,_0=1/0,gu=null,bS=!1,X2=null,sd=null,rA=!1,Xh=null,wS=0,kb=0,Y2=null,JA=-1,ZA=0;function ys(){return er&6?En():JA!==-1?JA:JA=En()}function ad(r){return r.mode&1?er&2&&Pi!==0?Pi&-Pi:PZ.transition!==null?(ZA===0&&(ZA=m9()),ZA):(r=fr,r!==0||(r=window.event,r=r===void 0?16:x9(r.type)),r):1}function Ko(r,e,t,n){if(50<kb)throw kb=0,Y2=null,Error(Oe(185));Ix(r,t,n),(!(er&2)||r!==mi)&&(r===mi&&(!(er&2)&&(mC|=t),Gn===4&&Qc(r,Pi)),Ks(r,n),t===1&&er===0&&!(e.mode&1)&&(_0=En()+500,cC&&kd()))}function Ks(r,e){var t=r.callbackNode;PJ(r,e);var n=nS(r,r===mi?Pi:0);if(n===0)t!==null&&E3(t),r.callbackNode=null,r.callbackPriority=0;else if(e=n&-n,r.callbackPriority!==e){if(t!=null&&E3(t),e===1)r.tag===0?IZ(gB.bind(null,r)):V9(gB.bind(null,r)),CZ(function(){!(er&6)&&kd()}),t=null;else{switch(p9(n)){case 1:t=aR;break;case 4:t=d9;break;case 16:t=rS;break;case 536870912:t=f9;break;default:t=rS}t=Lz(t,Iz.bind(null,r))}r.callbackPriority=e,r.callbackNode=t}}function Iz(r,e){if(JA=-1,ZA=0,er&6)throw Error(Oe(327));var t=r.callbackNode;if(Fg()&&r.callbackNode!==t)return null;var n=nS(r,r===mi?Pi:0);if(n===0)return null;if(n&30||n&r.expiredLanes||e)e=xS(r,n);else{e=n;var i=er;er|=2;var s=Rz();(mi!==r||Pi!==e)&&(gu=null,_0=En()+500,jm(r,e));do try{JZ();break}catch(o){Pz(r,o)}while(!0);bR(),yS.current=s,er=i,Rn!==null?e=0:(mi=null,Pi=0,e=Gn)}if(e!==0){if(e===2&&(i=A2(r),i!==0&&(n=i,e=Q2(r,i))),e===1)throw t=c1,jm(r,0),Qc(r,n),Ks(r,En()),t;if(e===6)Qc(r,n);else{if(i=r.current.alternate,!(n&30)&&!YZ(i)&&(e=xS(r,n),e===2&&(s=A2(r),s!==0&&(n=s,e=Q2(r,s))),e===1))throw t=c1,jm(r,0),Qc(r,n),Ks(r,En()),t;switch(r.finishedWork=i,r.finishedLanes=n,e){case 0:case 1:throw Error(Oe(345));case 2:lf(r,zs,gu);break;case 3:if(Qc(r,n),(n&130023424)===n&&(e=kR+500-En(),10<e)){if(nS(r,0)!==0)break;if(i=r.suspendedLanes,(i&n)!==n){ys(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=I2(lf.bind(null,r,zs,gu),e);break}lf(r,zs,gu);break;case 4:if(Qc(r,n),(n&4194240)===n)break;for(e=r.eventTimes,i=-1;0<n;){var a=31-Wo(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=En()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*XZ(n/1960))-n,10<n){r.timeoutHandle=I2(lf.bind(null,r,zs,gu),n);break}lf(r,zs,gu);break;case 5:lf(r,zs,gu);break;default:throw Error(Oe(329))}}}return Ks(r,En()),r.callbackNode===t?Iz.bind(null,r):null}function Q2(r,e){var t=Rb;return r.current.memoizedState.isDehydrated&&(jm(r,e).flags|=256),r=xS(r,e),r!==2&&(e=zs,zs=t,e!==null&&J2(e)),r}function J2(r){zs===null?zs=r:zs.push.apply(zs,r)}function YZ(r){for(var e=r;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var i=t[n],s=i.getSnapshot;i=i.value;try{if(!Qo(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qc(r,e){for(e&=~RR,e&=~mC,r.suspendedLanes|=e,r.pingedLanes&=~e,r=r.expirationTimes;0<e;){var t=31-Wo(e),n=1<<t;r[t]=-1,e&=~n}}function gB(r){if(er&6)throw Error(Oe(327));Fg();var e=nS(r,0);if(!(e&1))return Ks(r,En()),null;var t=xS(r,e);if(r.tag!==0&&t===2){var n=A2(r);n!==0&&(e=n,t=Q2(r,n))}if(t===1)throw t=c1,jm(r,0),Qc(r,e),Ks(r,En()),t;if(t===6)throw Error(Oe(345));return r.finishedWork=r.current.alternate,r.finishedLanes=e,lf(r,zs,gu),Ks(r,En()),null}function FR(r,e){var t=er;er|=1;try{return r(e)}finally{er=t,er===0&&(_0=En()+500,cC&&kd())}}function tp(r){Xh!==null&&Xh.tag===0&&!(er&6)&&Fg();var e=er;er|=1;var t=co.transition,n=fr;try{if(co.transition=null,fr=1,r)return r()}finally{fr=n,co.transition=t,er=e,!(er&6)&&kd()}}function OR(){ba=mg.current,Vr(mg)}function jm(r,e){r.finishedWork=null,r.finishedLanes=0;var t=r.timeoutHandle;if(t!==-1&&(r.timeoutHandle=-1,TZ(t)),Rn!==null)for(t=Rn.return;t!==null;){var n=t;switch(gR(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&lS();break;case 3:w0(),Vr(Gs),Vr(ts),SR();break;case 5:ER(n);break;case 4:w0();break;case 13:Vr(Yr);break;case 19:Vr(Yr);break;case 10:wR(n.type._context);break;case 22:case 23:OR()}t=t.return}if(mi=r,Rn=r=od(r.current,null),Pi=ba=e,Gn=0,c1=null,RR=mC=ep=0,zs=Rb=null,xf!==null){for(e=0;e<xf.length;e++)if(t=xf[e],n=t.interleaved,n!==null){t.interleaved=null;var i=n.next,s=t.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}t.pending=n}xf=null}return r}function Pz(r,e){do{var t=Rn;try{if(bR(),XA.current=vS,gS){for(var n=Zr.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}gS=!1}if(Zm=0,di=qn=Zr=null,Ib=!1,o1=0,PR.current=null,t===null||t.return===null){Gn=1,c1=e,Rn=null;break}e:{var s=r,a=t.return,o=t,l=e;if(e=Pi,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=nB(a);if(f!==null){f.flags&=-257,iB(f,a,o,s,e),f.mode&1&&rB(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){rB(s,u,e),BR();break e}l=Error(Oe(426))}}else if(Hr&&o.mode&1){var b=nB(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),iB(b,a,o,s,e),vR(x0(l,o));break e}}s=l=x0(l,o),Gn!==4&&(Gn=2),Rb===null?Rb=[s]:Rb.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=pz(s,l,e);Y3(s,v);break e;case 1:o=l;var x=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(sd===null||!sd.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=gz(s,o,e);Y3(s,A);break e}}s=s.return}while(s!==null)}Fz(t)}catch(w){e=w,Rn===t&&t!==null&&(Rn=t=t.return);continue}break}while(!0)}function Rz(){var r=yS.current;return yS.current=vS,r===null?vS:r}function BR(){(Gn===0||Gn===3||Gn===2)&&(Gn=4),mi===null||!(ep&268435455)&&!(mC&268435455)||Qc(mi,Pi)}function xS(r,e){var t=er;er|=2;var n=Rz();(mi!==r||Pi!==e)&&(gu=null,jm(r,e));do try{QZ();break}catch(i){Pz(r,i)}while(!0);if(bR(),er=t,yS.current=n,Rn!==null)throw Error(Oe(261));return mi=null,Pi=0,Gn}function QZ(){for(;Rn!==null;)kz(Rn)}function JZ(){for(;Rn!==null&&!AJ();)kz(Rn)}function kz(r){var e=Bz(r.alternate,r,ba);r.memoizedProps=r.pendingProps,e===null?Fz(r):Rn=e,PR.current=null}function Fz(r){var e=r;do{var t=e.alternate;if(r=e.return,e.flags&32768){if(t=HZ(t,e),t!==null){t.flags&=32767,Rn=t;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Gn=6,Rn=null;return}}else if(t=qZ(t,e,ba),t!==null){Rn=t;return}if(e=e.sibling,e!==null){Rn=e;return}Rn=e=r}while(e!==null);Gn===0&&(Gn=5)}function lf(r,e,t){var n=fr,i=co.transition;try{co.transition=null,fr=1,ZZ(r,e,t,n)}finally{co.transition=i,fr=n}return null}function ZZ(r,e,t,n){do Fg();while(Xh!==null);if(er&6)throw Error(Oe(327));t=r.finishedWork;var i=r.finishedLanes;if(t===null)return null;if(r.finishedWork=null,r.finishedLanes=0,t===r.current)throw Error(Oe(177));r.callbackNode=null,r.callbackPriority=0;var s=t.lanes|t.childLanes;if(RJ(r,s),r===mi&&(Rn=mi=null,Pi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||rA||(rA=!0,Lz(rS,function(){return Fg(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=co.transition,co.transition=null;var a=fr;fr=1;var o=er;er|=4,PR.current=null,WZ(r,t),Dz(t,r),bZ(D2),iS=!!N2,D2=N2=null,r.current=t,KZ(t),EJ(),er=o,fr=a,co.transition=s}else r.current=t;if(rA&&(rA=!1,Xh=r,wS=i),s=r.pendingLanes,s===0&&(sd=null),CJ(t.stateNode),Ks(r,En()),e!==null)for(n=r.onRecoverableError,t=0;t<e.length;t++)i=e[t],n(i.value,{componentStack:i.stack,digest:i.digest});if(bS)throw bS=!1,r=X2,X2=null,r;return wS&1&&r.tag!==0&&Fg(),s=r.pendingLanes,s&1?r===Y2?kb++:(kb=0,Y2=r):kb=0,kd(),null}function Fg(){if(Xh!==null){var r=p9(wS),e=co.transition,t=fr;try{if(co.transition=null,fr=16>r?16:r,Xh===null)var n=!1;else{if(r=Xh,Xh=null,wS=0,er&6)throw Error(Oe(331));var i=er;for(er|=4,Je=r.current;Je!==null;){var s=Je,a=s.child;if(Je.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(Je=u;Je!==null;){var c=Je;switch(c.tag){case 0:case 11:case 15:Pb(8,c,s)}var h=c.child;if(h!==null)h.return=c,Je=h;else for(;Je!==null;){c=Je;var d=c.sibling,f=c.return;if(Tz(c),c===u){Je=null;break}if(d!==null){d.return=f,Je=d;break}Je=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}Je=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Je=a;else e:for(;Je!==null;){if(s=Je,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Pb(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Je=v;break e}Je=s.return}}var x=r.current;for(Je=x;Je!==null;){a=Je;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,Je=y;else e:for(a=x;Je!==null;){if(o=Je,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:fC(9,o)}}catch(w){dn(o,o.return,w)}if(o===a){Je=null;break e}var A=o.sibling;if(A!==null){A.return=o.return,Je=A;break e}Je=o.return}}if(er=i,kd(),Ul&&typeof Ul.onPostCommitFiberRoot=="function")try{Ul.onPostCommitFiberRoot(sC,r)}catch{}n=!0}return n}finally{fr=t,co.transition=e}}return!1}function vB(r,e,t){e=x0(t,e),e=pz(r,e,1),r=id(r,e,1),e=ys(),r!==null&&(Ix(r,1,e),Ks(r,e))}function dn(r,e,t){if(r.tag===3)vB(r,r,t);else for(;e!==null;){if(e.tag===3){vB(e,r,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(sd===null||!sd.has(n))){r=x0(t,r),r=gz(e,r,1),e=id(e,r,1),r=ys(),e!==null&&(Ix(e,1,r),Ks(e,r));break}}e=e.return}}function eee(r,e,t){var n=r.pingCache;n!==null&&n.delete(e),e=ys(),r.pingedLanes|=r.suspendedLanes&t,mi===r&&(Pi&t)===t&&(Gn===4||Gn===3&&(Pi&130023424)===Pi&&500>En()-kR?jm(r,0):RR|=t),Ks(r,e)}function Oz(r,e){e===0&&(r.mode&1?(e=G_,G_<<=1,!(G_&130023424)&&(G_=4194304)):e=1);var t=ys();r=vc(r,e),r!==null&&(Ix(r,e,t),Ks(r,t))}function tee(r){var e=r.memoizedState,t=0;e!==null&&(t=e.retryLane),Oz(r,t)}function ree(r,e){var t=0;switch(r.tag){case 13:var n=r.stateNode,i=r.memoizedState;i!==null&&(t=i.retryLane);break;case 19:n=r.stateNode;break;default:throw Error(Oe(314))}n!==null&&n.delete(e),Oz(r,t)}var Bz;Bz=function(r,e,t){if(r!==null)if(r.memoizedProps!==e.pendingProps||Gs.current)qs=!0;else{if(!(r.lanes&t)&&!(e.flags&128))return qs=!1,jZ(r,e,t);qs=!!(r.flags&131072)}else qs=!1,Hr&&e.flags&1048576&&U9(e,hS,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;QA(r,e),r=e.pendingProps;var i=v0(e,ts.current);kg(e,t),i=CR(null,e,n,r,i,t);var s=NR();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ws(n)?(s=!0,uS(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_R(e),i.updater=dC,e.stateNode=i,i._reactInternals=e,L2(e,n,r,t),e=U2(null,e,n,!0,s,t)):(e.tag=0,Hr&&s&&pR(e),ps(null,e,i,t),e=e.child),e;case 16:n=e.elementType;e:{switch(QA(r,e),r=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=iee(n),r=No(n,r),i){case 0:e=V2(null,e,n,r,t);break e;case 1:e=oB(null,e,n,r,t);break e;case 11:e=sB(null,e,n,r,t);break e;case 14:e=aB(null,e,n,No(n.type,r),t);break e}throw Error(Oe(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:No(n,i),V2(r,e,n,i,t);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:No(n,i),oB(r,e,n,i,t);case 3:e:{if(wz(e),r===null)throw Error(Oe(387));n=e.pendingProps,s=e.memoizedState,i=s.element,W9(r,e),mS(e,n,null,t);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=x0(Error(Oe(423)),e),e=lB(r,e,n,t,i);break e}else if(n!==i){i=x0(Error(Oe(424)),e),e=lB(r,e,n,t,i);break e}else for(Ea=nd(e.stateNode.containerInfo.firstChild),Ca=e,Hr=!0,zo=null,t=H9(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(y0(),n===i){e=yc(r,e,t);break e}ps(r,e,n,t)}e=e.child}return e;case 5:return K9(e),r===null&&F2(e),n=e.type,i=e.pendingProps,s=r!==null?r.memoizedProps:null,a=i.children,M2(n,i)?a=null:s!==null&&M2(n,s)&&(e.flags|=32),bz(r,e),ps(r,e,a,t),e.child;case 6:return r===null&&F2(e),null;case 13:return xz(r,e,t);case 4:return AR(e,e.stateNode.containerInfo),n=e.pendingProps,r===null?e.child=b0(e,null,n,t):ps(r,e,n,t),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:No(n,i),sB(r,e,n,i,t);case 7:return ps(r,e,e.pendingProps,t),e.child;case 8:return ps(r,e,e.pendingProps.children,t),e.child;case 12:return ps(r,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,kr(dS,n._currentValue),n._currentValue=a,s!==null)if(Qo(s.value,a)){if(s.children===i.children&&!Gs.current){e=yc(r,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=oc(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),O2(s.return,t,e),o.lanes|=t;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Oe(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),O2(a,t,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}ps(r,e,i.children,t),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,kg(e,t),i=po(i),n=n(i),e.flags|=1,ps(r,e,n,t),e.child;case 14:return n=e.type,i=No(n,e.pendingProps),i=No(n.type,i),aB(r,e,n,i,t);case 15:return vz(r,e,e.type,e.pendingProps,t);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:No(n,i),QA(r,e),e.tag=1,Ws(n)?(r=!0,uS(e)):r=!1,kg(e,t),mz(e,n,i),L2(e,n,i,t),U2(null,e,n,!0,r,t);case 19:return _z(r,e,t);case 22:return yz(r,e,t)}throw Error(Oe(156,e.tag))};function Lz(r,e){return h9(r,e)}function nee(r,e,t,n){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lo(r,e,t,n){return new nee(r,e,t,n)}function LR(r){return r=r.prototype,!(!r||!r.isReactComponent)}function iee(r){if(typeof r=="function")return LR(r)?1:0;if(r!=null){if(r=r.$$typeof,r===nR)return 11;if(r===iR)return 14}return 2}function od(r,e){var t=r.alternate;return t===null?(t=lo(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=r.flags&14680064,t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t}function eE(r,e,t,n,i,s){var a=2;if(n=r,typeof r=="function")LR(r)&&(a=1);else if(typeof r=="string")a=5;else e:switch(r){case ig:return qm(t.children,i,s,e);case rR:a=8,i|=8;break;case l2:return r=lo(12,t,e,i|2),r.elementType=l2,r.lanes=s,r;case u2:return r=lo(13,t,e,i),r.elementType=u2,r.lanes=s,r;case c2:return r=lo(19,t,e,i),r.elementType=c2,r.lanes=s,r;case KU:return pC(t,i,s,e);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case GU:a=10;break e;case WU:a=9;break e;case nR:a=11;break e;case iR:a=14;break e;case Gc:a=16,n=null;break e}throw Error(Oe(130,r==null?r:typeof r,""))}return e=lo(a,t,e,i),e.elementType=r,e.type=n,e.lanes=s,e}function qm(r,e,t,n){return r=lo(7,r,n,e),r.lanes=t,r}function pC(r,e,t,n){return r=lo(22,r,n,e),r.elementType=KU,r.lanes=t,r.stateNode={isHidden:!1},r}function oD(r,e,t){return r=lo(6,r,null,e),r.lanes=t,r}function lD(r,e,t){return e=lo(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}function see(r,e,t,n,i){this.tag=e,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zN(0),this.expirationTimes=zN(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zN(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $R(r,e,t,n,i,s,a,o,l){return r=new see(r,e,t,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=lo(3,null,null,e),r.current=s,s.stateNode=r,s.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},_R(s),r}function aee(r,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ng,key:n==null?null:""+n,children:r,containerInfo:e,implementation:t}}function $z(r){if(!r)return pd;r=r._reactInternals;e:{if(mp(r)!==r||r.tag!==1)throw Error(Oe(170));var e=r;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ws(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Oe(171))}if(r.tag===1){var t=r.type;if(Ws(t))return $9(r,t,e)}return e}function Vz(r,e,t,n,i,s,a,o,l){return r=$R(t,n,!0,r,i,s,a,o,l),r.context=$z(null),t=r.current,n=ys(),i=ad(t),s=oc(n,i),s.callback=e??null,id(t,s,i),r.current.lanes=i,Ix(r,i,n),Ks(r,n),r}function gC(r,e,t,n){var i=e.current,s=ys(),a=ad(i);return t=$z(t),e.context===null?e.context=t:e.pendingContext=t,e=oc(s,a),e.payload={element:r},n=n===void 0?null:n,n!==null&&(e.callback=n),r=id(i,e,a),r!==null&&(Ko(r,i,a,s),KA(r,i,a)),a}function _S(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function yB(r,e){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&&t<e?t:e}}function VR(r,e){yB(r,e),(r=r.alternate)&&yB(r,e)}function oee(){return null}var Uz=typeof reportError=="function"?reportError:function(r){console.error(r)};function UR(r){this._internalRoot=r}vC.prototype.render=UR.prototype.render=function(r){var e=this._internalRoot;if(e===null)throw Error(Oe(409));gC(r,e,null,null)};vC.prototype.unmount=UR.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var e=r.containerInfo;tp(function(){gC(null,r,null,null)}),e[gc]=null}};function vC(r){this._internalRoot=r}vC.prototype.unstable_scheduleHydration=function(r){if(r){var e=y9();r={blockedOn:null,target:r,priority:e};for(var t=0;t<Yc.length&&e!==0&&e<Yc[t].priority;t++);Yc.splice(t,0,r),t===0&&w9(r)}};function zR(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function yC(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function bB(){}function lee(r,e,t,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=_S(a);s.call(u)}}var a=Vz(e,n,r,0,null,!1,!1,"",bB);return r._reactRootContainer=a,r[gc]=a.current,r1(r.nodeType===8?r.parentNode:r),tp(),a}for(;i=r.lastChild;)r.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=_S(l);o.call(u)}}var l=$R(r,0,!1,null,null,!1,!1,"",bB);return r._reactRootContainer=l,r[gc]=l.current,r1(r.nodeType===8?r.parentNode:r),tp(function(){gC(e,l,t,n)}),l}function bC(r,e,t,n,i){var s=t._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=_S(a);o.call(l)}}gC(e,a,r,i)}else a=lee(t,e,r,i,n);return _S(a)}g9=function(r){switch(r.tag){case 3:var e=r.stateNode;if(e.current.memoizedState.isDehydrated){var t=Ky(e.pendingLanes);t!==0&&(oR(e,t|1),Ks(e,En()),!(er&6)&&(_0=En()+500,kd()))}break;case 13:tp(function(){var n=vc(r,1);if(n!==null){var i=ys();Ko(n,r,1,i)}}),VR(r,1)}};lR=function(r){if(r.tag===13){var e=vc(r,134217728);if(e!==null){var t=ys();Ko(e,r,134217728,t)}VR(r,134217728)}};v9=function(r){if(r.tag===13){var e=ad(r),t=vc(r,e);if(t!==null){var n=ys();Ko(t,r,e,n)}VR(r,e)}};y9=function(){return fr};b9=function(r,e){var t=fr;try{return fr=r,e()}finally{fr=t}};w2=function(r,e,t){switch(e){case"input":if(f2(r,t),e=t.name,t.type==="radio"&&e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==r&&n.form===r.form){var i=uC(n);if(!i)throw Error(Oe(90));YU(n),f2(n,i)}}}break;case"textarea":JU(r,t);break;case"select":e=t.value,e!=null&&Mg(r,!!t.multiple,e,!1)}};s9=FR;a9=tp;var uee={usingClientEntryPoint:!1,Events:[Rx,lg,uC,n9,i9,FR]},Oy={findFiberByHostInstance:wf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cee={bundleType:Oy.bundleType,version:Oy.version,rendererPackageName:Oy.rendererPackageName,rendererConfig:Oy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ic.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=u9(r),r===null?null:r.stateNode},findFiberByHostInstance:Oy.findFiberByHostInstance||oee,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nA=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nA.isDisabled&&nA.supportsFiber)try{sC=nA.inject(cee),Ul=nA}catch{}}Ia.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uee;Ia.createPortal=function(r,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zR(e))throw Error(Oe(200));return aee(r,e,null,t)};Ia.createRoot=function(r,e){if(!zR(r))throw Error(Oe(299));var t=!1,n="",i=Uz;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=$R(r,1,!1,null,null,t,!1,n,i),r[gc]=e.current,r1(r.nodeType===8?r.parentNode:r),new UR(e)};Ia.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(Oe(188)):(r=Object.keys(r).join(","),Error(Oe(268,r)));return r=u9(e),r=r===null?null:r.stateNode,r};Ia.flushSync=function(r){return tp(r)};Ia.hydrate=function(r,e,t){if(!yC(e))throw Error(Oe(200));return bC(null,r,e,!0,t)};Ia.hydrateRoot=function(r,e,t){if(!zR(r))throw Error(Oe(405));var n=t!=null&&t.hydratedSources||null,i=!1,s="",a=Uz;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=Vz(e,null,r,1,t??null,i,!1,s,a),r[gc]=e.current,r1(r),n)for(r=0;r<n.length;r++)t=n[r],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new vC(e)};Ia.render=function(r,e,t){if(!yC(e))throw Error(Oe(200));return bC(null,r,e,!1,t)};Ia.unmountComponentAtNode=function(r){if(!yC(r))throw Error(Oe(40));return r._reactRootContainer?(tp(function(){bC(null,null,r,!1,function(){r._reactRootContainer=null,r[gc]=null})}),!0):!1};Ia.unstable_batchedUpdates=FR;Ia.unstable_renderSubtreeIntoContainer=function(r,e,t,n){if(!yC(t))throw Error(Oe(200));if(r==null||r._reactInternals===void 0)throw Error(Oe(38));return bC(r,e,t,!1,n)};Ia.version="18.3.1-next-f1338f8080-20240426";function zz(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zz)}catch(r){console.error(r)}}zz(),zU.exports=Ia;var hee=zU.exports,wB=hee;a2.createRoot=wB.createRoot,a2.hydrateRoot=wB.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function h1(){return h1=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},h1.apply(this,arguments)}var Yh;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Yh||(Yh={}));const xB="popstate";function dee(r){r===void 0&&(r={});function e(n,i){let{pathname:s,search:a,hash:o}=n.location;return Z2("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:AS(i)}return mee(e,t,null,r)}function Sn(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function jR(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fee(){return Math.random().toString(36).substr(2,8)}function _B(r,e){return{usr:r.state,key:r.key,idx:e}}function Z2(r,e,t,n){return t===void 0&&(t=null),h1({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?z0(e):e,{state:t,key:e&&e.key||n||fee()})}function AS(r){let{pathname:e="/",search:t="",hash:n=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function z0(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substr(n),r=r.substr(0,n)),r&&(e.pathname=r)}return e}function mee(r,e,t,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,o=Yh.Pop,l=null,u=c();u==null&&(u=0,a.replaceState(h1({},a.state,{idx:u}),""));function c(){return(a.state||{idx:null}).idx}function h(){o=Yh.Pop;let b=c(),v=b==null?null:b-u;u=b,l&&l({action:o,location:g.location,delta:v})}function d(b,v){o=Yh.Push;let x=Z2(g.location,b,v);u=c()+1;let y=_B(x,u),A=g.createHref(x);try{a.pushState(y,"",A)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(A)}s&&l&&l({action:o,location:g.location,delta:1})}function f(b,v){o=Yh.Replace;let x=Z2(g.location,b,v);u=c();let y=_B(x,u),A=g.createHref(x);a.replaceState(y,"",A),s&&l&&l({action:o,location:g.location,delta:0})}function p(b){let v=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof b=="string"?b:AS(b);return x=x.replace(/ $/,"%20"),Sn(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let g={get action(){return o},get location(){return r(i,a)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(xB,h),l=b,()=>{i.removeEventListener(xB,h),l=null}},createHref(b){return e(i,b)},createURL:p,encodeLocation(b){let v=p(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:f,go(b){return a.go(b)}};return g}var AB;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(AB||(AB={}));function pee(r,e,t){return t===void 0&&(t="/"),gee(r,e,t)}function gee(r,e,t,n){let i=typeof e=="string"?z0(e):e,s=qR(i.pathname||"/",t);if(s==null)return null;let a=jz(r);vee(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=Dee(s);o=Tee(a[l],u)}return o}function jz(r,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(Sn(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=ld([n,l.relativePath]),c=t.concat(l);s.children&&s.children.length>0&&(Sn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),jz(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:Eee(u,s.index),routesMeta:c})};return r.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of qz(s.path))i(s,a,l)}),e}function qz(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=qz(n.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>r.startsWith("/")&&l===""?"/":l)}function vee(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:See(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const yee=/^:[\w-]+$/,bee=3,wee=2,xee=1,_ee=10,Aee=-2,EB=r=>r==="*";function Eee(r,e){let t=r.split("/"),n=t.length;return t.some(EB)&&(n+=Aee),e&&(n+=wee),t.filter(i=>!EB(i)).reduce((i,s)=>i+(yee.test(s)?bee:s===""?xee:_ee),n)}function See(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function Tee(r,e,t){let{routesMeta:n}=r,i={},s="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",h=Cee({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),d=l.route;if(!h)return null;Object.assign(i,h.params),a.push({params:i,pathname:ld([s,h.pathname]),pathnameBase:kee(ld([s,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(s=ld([s,h.pathnameBase]))}return a}function Cee(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=Nee(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((u,c,h)=>{let{paramName:d,isOptional:f}=c;if(d==="*"){let g=o[h]||"";a=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const p=o[h];return f&&!p?u[d]=void 0:u[d]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:r}}function Nee(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),jR(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Dee(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jR(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function qR(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}const Mee=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Iee=r=>Mee.test(r);function Pee(r,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?z0(r):r,s;if(t)if(Iee(t))s=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),jR(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+t))}t.startsWith("/")?s=SB(t.substring(1),"/"):s=SB(t,e)}else s=e;return{pathname:s,search:Fee(n),hash:Oee(i)}}function SB(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function uD(r,e,t,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ree(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function HR(r,e){let t=Ree(r);return e?t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function GR(r,e,t,n){n===void 0&&(n=!1);let i;typeof r=="string"?i=z0(r):(i=h1({},r),Sn(!i.pathname||!i.pathname.includes("?"),uD("?","pathname","search",i)),Sn(!i.pathname||!i.pathname.includes("#"),uD("#","pathname","hash",i)),Sn(!i.search||!i.search.includes("#"),uD("#","search","hash",i)));let s=r===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=t;else{let h=e.length-1;if(!n&&a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),h-=1;i.pathname=d.join("/")}o=h>=0?e[h]:"/"}let l=Pee(i,o),u=a&&a!=="/"&&a.endsWith("/"),c=(s||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const ld=r=>r.join("/").replace(/\/\/+/g,"/"),kee=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Fee=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Oee=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Bee(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const Hz=["post","put","patch","delete"];new Set(Hz);const Lee=["get",...Hz];new Set(Lee);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function d1(){return d1=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},d1.apply(this,arguments)}const WR=ue.createContext(null),$ee=ue.createContext(null),Fd=ue.createContext(null),wC=ue.createContext(null),iu=ue.createContext({outlet:null,matches:[],isDataRoute:!1}),Gz=ue.createContext(null);function Vee(r,e){let{relative:t}=e===void 0?{}:e;j0()||Sn(!1);let{basename:n,navigator:i}=ue.useContext(Fd),{hash:s,pathname:a,search:o}=Xz(r,{relative:t}),l=a;return n!=="/"&&(l=a==="/"?n:ld([n,a])),i.createHref({pathname:l,search:o,hash:s})}function j0(){return ue.useContext(wC)!=null}function q0(){return j0()||Sn(!1),ue.useContext(wC).location}function Wz(r){ue.useContext(Fd).static||ue.useLayoutEffect(r)}function H0(){let{isDataRoute:r}=ue.useContext(iu);return r?tte():Uee()}function Uee(){j0()||Sn(!1);let r=ue.useContext(WR),{basename:e,future:t,navigator:n}=ue.useContext(Fd),{matches:i}=ue.useContext(iu),{pathname:s}=q0(),a=JSON.stringify(HR(i,t.v7_relativeSplatPath)),o=ue.useRef(!1);return Wz(()=>{o.current=!0}),ue.useCallback(function(u,c){if(c===void 0&&(c={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=GR(u,JSON.parse(a),s,c.relative==="path");r==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ld([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,a,s,r])}const zee=ue.createContext(null);function jee(r){let e=ue.useContext(iu).outlet;return e&&ue.createElement(zee.Provider,{value:r},e)}function Kz(){let{matches:r}=ue.useContext(iu),e=r[r.length-1];return e?e.params:{}}function Xz(r,e){let{relative:t}=e===void 0?{}:e,{future:n}=ue.useContext(Fd),{matches:i}=ue.useContext(iu),{pathname:s}=q0(),a=JSON.stringify(HR(i,n.v7_relativeSplatPath));return ue.useMemo(()=>GR(r,JSON.parse(a),s,t==="path"),[r,a,s,t])}function qee(r,e){return Hee(r,e)}function Hee(r,e,t,n){j0()||Sn(!1);let{navigator:i}=ue.useContext(Fd),{matches:s}=ue.useContext(iu),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=q0(),c;if(e){var h;let b=typeof e=="string"?z0(e):e;l==="/"||(h=b.pathname)!=null&&h.startsWith(l)||Sn(!1),c=b}else c=u;let d=c.pathname||"/",f=d;if(l!=="/"){let b=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(b.length).join("/")}let p=pee(r,{pathname:f}),g=Yee(p&&p.map(b=>Object.assign({},b,{params:Object.assign({},o,b.params),pathname:ld([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:ld([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,t,n);return e&&g?ue.createElement(wC.Provider,{value:{location:d1({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Yh.Pop}},g):g}function Gee(){let r=ete(),e=Bee(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ue.createElement(ue.Fragment,null,ue.createElement("h2",null,"Unexpected Application Error!"),ue.createElement("h3",{style:{fontStyle:"italic"}},e),t?ue.createElement("pre",{style:i},t):null,null)}const Wee=ue.createElement(Gee,null);class Kee extends ue.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?ue.createElement(iu.Provider,{value:this.props.routeContext},ue.createElement(Gz.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Xee(r){let{routeContext:e,match:t,children:n}=r,i=ue.useContext(WR);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),ue.createElement(iu.Provider,{value:e},n)}function Yee(r,e,t,n){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),r==null){var s;if(!t)return null;if(t.errors)r=t.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let a=r,o=(i=t)==null?void 0:i.errors;if(o!=null){let c=a.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);c>=0||Sn(!1),a=a.slice(0,Math.min(a.length,c+1))}let l=!1,u=-1;if(t&&n&&n.v7_partialHydration)for(let c=0;c<a.length;c++){let h=a[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:d,errors:f}=t,p=h.route.loader&&d[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||p){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,h,d)=>{let f,p=!1,g=null,b=null;t&&(f=o&&h.route.id?o[h.route.id]:void 0,g=h.route.errorElement||Wee,l&&(u<0&&d===0?(rte("route-fallback"),p=!0,b=null):u===d&&(p=!0,b=h.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,d+1)),x=()=>{let y;return f?y=g:p?y=b:h.route.Component?y=ue.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=c,ue.createElement(Xee,{match:h,routeContext:{outlet:c,matches:v,isDataRoute:t!=null},children:y})};return t&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?ue.createElement(Kee,{location:t.location,revalidation:t.revalidation,component:g,error:f,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var Yz=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(Yz||{}),Qz=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(Qz||{});function Qee(r){let e=ue.useContext(WR);return e||Sn(!1),e}function Jee(r){let e=ue.useContext($ee);return e||Sn(!1),e}function Zee(r){let e=ue.useContext(iu);return e||Sn(!1),e}function Jz(r){let e=Zee(),t=e.matches[e.matches.length-1];return t.route.id||Sn(!1),t.route.id}function ete(){var r;let e=ue.useContext(Gz),t=Jee(),n=Jz();return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function tte(){let{router:r}=Qee(Yz.UseNavigateStable),e=Jz(Qz.UseNavigateStable),t=ue.useRef(!1);return Wz(()=>{t.current=!0}),ue.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?r.navigate(i):r.navigate(i,d1({fromRouteId:e},s)))},[r,e])}const TB={};function rte(r,e,t){TB[r]||(TB[r]=!0)}function nte(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function ite(r){let{to:e,replace:t,state:n,relative:i}=r;j0()||Sn(!1);let{future:s,static:a}=ue.useContext(Fd),{matches:o}=ue.useContext(iu),{pathname:l}=q0(),u=H0(),c=GR(e,HR(o,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(c);return ue.useEffect(()=>u(JSON.parse(h),{replace:t,state:n,relative:i}),[u,h,i,t,n]),null}function ste(r){return jee(r.context)}function gi(r){Sn(!1)}function ate(r){let{basename:e="/",children:t=null,location:n,navigationType:i=Yh.Pop,navigator:s,static:a=!1,future:o}=r;j0()&&Sn(!1);let l=e.replace(/^\/*/,"/"),u=ue.useMemo(()=>({basename:l,navigator:s,static:a,future:d1({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof n=="string"&&(n=z0(n));let{pathname:c="/",search:h="",hash:d="",state:f=null,key:p="default"}=n,g=ue.useMemo(()=>{let b=qR(c,l);return b==null?null:{location:{pathname:b,search:h,hash:d,state:f,key:p},navigationType:i}},[l,c,h,d,f,p,i]);return g==null?null:ue.createElement(Fd.Provider,{value:u},ue.createElement(wC.Provider,{children:t,value:g}))}function ote(r){let{children:e,location:t}=r;return qee(eM(e),t)}new Promise(()=>{});function eM(r,e){e===void 0&&(e=[]);let t=[];return ue.Children.forEach(r,(n,i)=>{if(!ue.isValidElement(n))return;let s=[...e,i];if(n.type===ue.Fragment){t.push.apply(t,eM(n.props.children,s));return}n.type!==gi&&Sn(!1),!n.props.index||!n.props.children||Sn(!1);let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=eM(n.props.children,s)),t.push(a)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tM(){return tM=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},tM.apply(this,arguments)}function lte(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function ute(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function cte(r,e){return r.button===0&&(!e||e==="_self")&&!ute(r)}const hte=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],dte="6";try{window.__reactRouterVersion=dte}catch{}const fte="startTransition",CB=eJ[fte];function mte(r){let{basename:e,children:t,future:n,window:i}=r,s=ue.useRef();s.current==null&&(s.current=dee({window:i,v5Compat:!0}));let a=s.current,[o,l]=ue.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},c=ue.useCallback(h=>{u&&CB?CB(()=>l(h)):l(h)},[l,u]);return ue.useLayoutEffect(()=>a.listen(c),[a,c]),ue.useEffect(()=>nte(n),[n]),ue.createElement(ate,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,future:n})}const pte=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gte=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cr=ue.forwardRef(function(e,t){let{onClick:n,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:u,preventScrollReset:c,viewTransition:h}=e,d=lte(e,hte),{basename:f}=ue.useContext(Fd),p,g=!1;if(typeof u=="string"&&gte.test(u)&&(p=u,pte))try{let y=new URL(window.location.href),A=u.startsWith("//")?new URL(y.protocol+u):new URL(u),w=qR(A.pathname,f);A.origin===y.origin&&w!=null?u=w+A.search+A.hash:g=!0}catch{}let b=Vee(u,{relative:i}),v=vte(u,{replace:a,state:o,target:l,preventScrollReset:c,relative:i,viewTransition:h});function x(y){n&&n(y),y.defaultPrevented||v(y)}return ue.createElement("a",tM({},d,{href:p||b,onClick:g||s?n:x,ref:t,target:l}))});var NB;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(NB||(NB={}));var DB;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(DB||(DB={}));function vte(r,e){let{target:t,replace:n,state:i,preventScrollReset:s,relative:a,viewTransition:o}=e===void 0?{}:e,l=H0(),u=q0(),c=Xz(r,{relative:a});return ue.useCallback(h=>{if(cte(h,t)){h.preventDefault();let d=n!==void 0?n:AS(u)===AS(c);l(r,{replace:d,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[u,l,c,n,i,t,r,s,a,o])}const Zz=ue.createContext(),bo=()=>{const r=ue.useContext(Zz);if(!r)throw new Error("useTheme must be used within ThemeProvider");return r},yte=({children:r})=>{const[e,t]=ue.useState(()=>{const i=localStorage.getItem("theme");return i?i==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});ue.useEffect(()=>{const i=document.documentElement;e?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",e?"dark":"light")},[e]);const n=()=>{t(i=>!i)};return P.jsx(Zz.Provider,{value:{isDark:e,toggleTheme:n},children:r})},e7="authToken",t7="user",bte=()=>localStorage.getItem(e7),wte=()=>{localStorage.removeItem(e7)},bc=()=>{const r=localStorage.getItem(t7);return r?JSON.parse(r):null},xte=()=>{localStorage.removeItem(t7)},rM=()=>!!bte(),_te=()=>{wte(),xte()};function Ate(){const{isDark:r,toggleTheme:e}=bo(),t=H0(),[n,i]=ue.useState(!1),[s,a]=ue.useState(!1),[o,l]=ue.useState(null),[u,c]=ue.useState(!1);ue.useEffect(()=>{rM()&&(l(bc()),c(!0));const f=()=>{rM()?(l(bc()),c(!0)):(l(null),c(!1))};return window.addEventListener("auth-change",f),()=>window.removeEventListener("auth-change",f)},[]);const h=()=>{_te(),localStorage.removeItem("user"),localStorage.removeItem("authToken"),l(null),c(!1),a(!1),i(!1),window.dispatchEvent(new Event("auth-change")),t("/")},d=[{to:"/",label:""},{to:"/concepts",label:""},{to:"/papers",label:" "},{to:"/whiteboard",label:" "},{to:"/calculator",label:""},{to:"/forum",label:""},{to:"/glossary",label:" "},{to:"/references",label:" "},...u&&o?[{to:"/notes",label:""}]:[]];return P.jsx("header",{className:`sticky top-0 z-40 transition-colors duration-300 ${r?"bg-gray-900 border-gray-800":"bg-white border-gray-200"} border-b backdrop-blur`,children:P.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[P.jsxs("div",{className:"flex items-center justify-between",children:[P.jsx(Cr,{to:"/",className:"text-xl sm:text-2xl font-bold text-blue-500 dark:text-blue-400 whitespace-nowrap",children:"Astro Hub"}),P.jsxs("nav",{className:"hidden md:flex items-center gap-3 lg:gap-6",children:[d.map(f=>P.jsx(Cr,{to:f.to,className:`transition text-sm lg:text-base ${r?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,children:f.label},f.to)),P.jsx("button",{onClick:e,className:`p-2 rounded-lg border transition text-lg ${r?"border-gray-700 hover:bg-gray-800":"border-gray-300 hover:bg-gray-100"}`,"aria-label":" ",children:r?"":""}),u&&o?P.jsxs("div",{className:"relative",children:[P.jsxs("button",{onClick:()=>a(!s),className:`p-2 rounded-lg border transition ${r?"border-gray-700 hover:bg-gray-800":"border-gray-300 hover:bg-gray-100"}`,children:[" ",o.username]}),s&&P.jsxs("div",{className:`absolute right-0 mt-2 w-48 rounded-lg shadow-lg ${r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border`,children:[P.jsx(Cr,{to:"/profile",className:`block px-4 py-2 first:rounded-t-lg ${r?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>a(!1),children:""}),P.jsx(Cr,{to:"/bookmarks",className:`block px-4 py-2 ${r?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>a(!1),children:""}),P.jsx(Cr,{to:"/notes",className:`block px-4 py-2 ${r?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>a(!1),children:""}),P.jsx("button",{onClick:h,className:`w-full text-left px-4 py-2 last:rounded-b-lg ${r?"text-red-400 hover:bg-gray-700":"text-red-600 hover:bg-gray-100"}`,children:""})]})]}):P.jsxs("div",{className:"flex gap-2",children:[P.jsx(Cr,{to:"/login",className:`px-4 py-2 rounded-lg border transition ${r?"border-blue-400 text-blue-400 hover:bg-blue-400 hover:text-gray-900":"border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white"}`,children:""}),P.jsx(Cr,{to:"/signup",className:`px-4 py-2 rounded-lg transition text-white ${r?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"}`,children:""})]})]}),P.jsxs("div",{className:"md:hidden flex items-center gap-3",children:[P.jsx("button",{onClick:e,className:`p-2 rounded-lg border transition text-lg ${r?"border-gray-700 hover:bg-gray-800":"border-gray-300 hover:bg-gray-100"}`,"aria-label":" ",children:r?"":""}),P.jsx("button",{onClick:()=>i(!n),className:`p-2 transition ${r?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,"aria-label":"",children:n?"":""})]})]}),n&&P.jsxs("nav",{className:`md:hidden mt-4 space-y-2 pb-4 border-t transition-colors duration-300 pt-4 ${r?"border-gray-800":"border-gray-200"}`,children:[d.map(f=>P.jsx(Cr,{to:f.to,className:`block py-2 transition ${r?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:f.label},f.to)),u&&o?P.jsx(P.Fragment,{children:P.jsxs("div",{className:`py-2 border-t transition-colors duration-300 ${r?"border-gray-800":"border-gray-200"} mt-2 pt-2`,children:[P.jsx("div",{className:`px-2 py-1 text-sm ${r?"text-gray-400":"text-gray-500"}`,children:o.username}),P.jsx(Cr,{to:"/profile",className:`block py-2 transition ${r?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:""}),P.jsx(Cr,{to:"/bookmarks",className:`block py-2 transition ${r?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:""}),P.jsx(Cr,{to:"/notes",className:`block py-2 transition ${r?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:""}),P.jsx("button",{onClick:h,className:`w-full text-left py-2 transition ${r?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-700"}`,children:""})]})}):P.jsxs("div",{className:`py-2 border-t transition-colors duration-300 mt-2 pt-2 ${r?"border-gray-800":"border-gray-200"}`,children:[P.jsx(Cr,{to:"/login",className:`block py-2 transition ${r?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"}`,onClick:()=>i(!1),children:""}),P.jsx(Cr,{to:"/signup",className:`block py-2 transition ${r?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"}`,onClick:()=>i(!1),children:""})]})]})]})})}function Ete(){const[r,e]=ue.useState(0);return ue.useEffect(()=>{const t=()=>{const n=window.scrollY,i=document.documentElement.scrollHeight-window.innerHeight,s=i>0?n/i*100:0;e(Math.min(100,Math.max(0,s)))};return window.addEventListener("scroll",t,{passive:!0}),()=>window.removeEventListener("scroll",t)},[]),P.jsx("div",{className:"scroll-progress",children:P.jsx("div",{className:"scroll-progress__bar",style:{transform:`scaleX(${r/100})`}})})}function Ste(){const{isDark:r}=bo();return P.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${r?"bg-gray-950 text-gray-100":"bg-white text-gray-900"}`,children:[P.jsx(Ete,{}),P.jsx(Ate,{}),P.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:P.jsx(ste,{})}),P.jsx("footer",{className:`border-t py-6 text-center text-sm transition-colors duration-300 ${r?"bg-gray-900 border-gray-800 text-gray-400":"bg-gray-50 border-gray-200 text-gray-600"}`,children:P.jsx("p",{children:" 2025 Astrophysics Hub    "})})]})}const r7=ue.createContext({});function Tte(r){const e=ue.useRef(null);return e.current===null&&(e.current=r()),e.current}const KR=typeof window<"u",Cte=KR?ue.useLayoutEffect:ue.useEffect,XR=ue.createContext(null);function YR(r,e){r.indexOf(e)===-1&&r.push(e)}function QR(r,e){const t=r.indexOf(e);t>-1&&r.splice(t,1)}const wc=(r,e,t)=>t>e?e:t<r?r:t;let JR=()=>{};const xc={},n7=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function i7(r){return typeof r=="object"&&r!==null}const s7=r=>/^0[^.\s]+$/u.test(r);function ZR(r){let e;return()=>(e===void 0&&(e=r()),e)}const ho=r=>r,Nte=(r,e)=>t=>e(r(t)),Fx=(...r)=>r.reduce(Nte),f1=(r,e,t)=>{const n=e-r;return n===0?1:(t-r)/n};class ek{constructor(){this.subscriptions=[]}add(e){return YR(this.subscriptions,e),()=>QR(this.subscriptions,e)}notify(e,t,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,n);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const jl=r=>r*1e3,uo=r=>r/1e3;function a7(r,e){return e?r*(1e3/e):0}const o7=(r,e,t)=>(((1-3*t+3*e)*r+(3*t-6*e))*r+3*e)*r,Dte=1e-7,Mte=12;function Ite(r,e,t,n,i){let s,a,o=0;do a=e+(t-e)/2,s=o7(a,n,i)-r,s>0?t=a:e=a;while(Math.abs(s)>Dte&&++o<Mte);return a}function Ox(r,e,t,n){if(r===e&&t===n)return ho;const i=s=>Ite(s,0,1,r,t);return s=>s===0||s===1?s:o7(i(s),e,n)}const l7=r=>e=>e<=.5?r(2*e)/2:(2-r(2*(1-e)))/2,u7=r=>e=>1-r(1-e),c7=Ox(.33,1.53,.69,.99),tk=u7(c7),h7=l7(tk),d7=r=>(r*=2)<1?.5*tk(r):.5*(2-Math.pow(2,-10*(r-1))),rk=r=>1-Math.sin(Math.acos(r)),f7=u7(rk),m7=l7(rk),Pte=Ox(.42,0,1,1),Rte=Ox(0,0,.58,1),p7=Ox(.42,0,.58,1),kte=r=>Array.isArray(r)&&typeof r[0]!="number",g7=r=>Array.isArray(r)&&typeof r[0]=="number",Fte={linear:ho,easeIn:Pte,easeInOut:p7,easeOut:Rte,circIn:rk,circInOut:m7,circOut:f7,backIn:tk,backInOut:h7,backOut:c7,anticipate:d7},Ote=r=>typeof r=="string",MB=r=>{if(g7(r)){JR(r.length===4);const[e,t,n,i]=r;return Ox(e,t,n,i)}else if(Ote(r))return Fte[r];return r},iA=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Bte(r,e){let t=new Set,n=new Set,i=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(c){a.has(c)&&(u.schedule(c),r()),c(o)}const u={schedule:(c,h=!1,d=!1)=>{const p=d&&i?t:n;return h&&a.add(c),p.has(c)||p.add(c),c},cancel:c=>{n.delete(c),a.delete(c)},process:c=>{if(o=c,i){s=!0;return}i=!0,[t,n]=[n,t],t.forEach(l),t.clear(),i=!1,s&&(s=!1,u.process(c))}};return u}const Lte=40;function v7(r,e){let t=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,a=iA.reduce((y,A)=>(y[A]=Bte(s),y),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:c,update:h,preRender:d,render:f,postRender:p}=a,g=()=>{const y=xc.useManualTiming?i.timestamp:performance.now();t=!1,xc.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(y-i.timestamp,Lte),1)),i.timestamp=y,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),c.process(i),h.process(i),d.process(i),f.process(i),p.process(i),i.isProcessing=!1,t&&e&&(n=!1,r(g))},b=()=>{t=!0,n=!0,i.isProcessing||r(g)};return{schedule:iA.reduce((y,A)=>{const w=a[A];return y[A]=(_,S=!1,E=!1)=>(t||b(),w.schedule(_,S,E)),y},{}),cancel:y=>{for(let A=0;A<iA.length;A++)a[iA[A]].cancel(y)},state:i,steps:a}}const{schedule:Gr,cancel:gd,state:Ei,steps:cD}=v7(typeof requestAnimationFrame<"u"?requestAnimationFrame:ho,!0);let tE;function $te(){tE=void 0}const Hs={now:()=>(tE===void 0&&Hs.set(Ei.isProcessing||xc.useManualTiming?Ei.timestamp:performance.now()),tE),set:r=>{tE=r,queueMicrotask($te)}},y7=r=>e=>typeof e=="string"&&e.startsWith(r),nk=y7("--"),Vte=y7("var(--"),ik=r=>Vte(r)?Ute.test(r.split("/*")[0].trim()):!1,Ute=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,G0={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},m1={...G0,transform:r=>wc(0,1,r)},sA={...G0,default:1},Fb=r=>Math.round(r*1e5)/1e5,sk=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function zte(r){return r==null}const jte=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ak=(r,e)=>t=>!!(typeof t=="string"&&jte.test(t)&&t.startsWith(r)||e&&!zte(t)&&Object.prototype.hasOwnProperty.call(t,e)),b7=(r,e,t)=>n=>{if(typeof n!="string")return n;const[i,s,a,o]=n.match(sk);return{[r]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},qte=r=>wc(0,255,r),hD={...G0,transform:r=>Math.round(qte(r))},Af={test:ak("rgb","red"),parse:b7("red","green","blue"),transform:({red:r,green:e,blue:t,alpha:n=1})=>"rgba("+hD.transform(r)+", "+hD.transform(e)+", "+hD.transform(t)+", "+Fb(m1.transform(n))+")"};function Hte(r){let e="",t="",n="",i="";return r.length>5?(e=r.substring(1,3),t=r.substring(3,5),n=r.substring(5,7),i=r.substring(7,9)):(e=r.substring(1,2),t=r.substring(2,3),n=r.substring(3,4),i=r.substring(4,5),e+=e,t+=t,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const nM={test:ak("#"),parse:Hte,transform:Af.transform},Bx=r=>({test:e=>typeof e=="string"&&e.endsWith(r)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${r}`}),jc=Bx("deg"),ql=Bx("%"),pt=Bx("px"),Gte=Bx("vh"),Wte=Bx("vw"),IB={...ql,parse:r=>ql.parse(r)/100,transform:r=>ql.transform(r*100)},pg={test:ak("hsl","hue"),parse:b7("hue","saturation","lightness"),transform:({hue:r,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(r)+", "+ql.transform(Fb(e))+", "+ql.transform(Fb(t))+", "+Fb(m1.transform(n))+")"},Pn={test:r=>Af.test(r)||nM.test(r)||pg.test(r),parse:r=>Af.test(r)?Af.parse(r):pg.test(r)?pg.parse(r):nM.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?Af.transform(r):pg.transform(r),getAnimatableNone:r=>{const e=Pn.parse(r);return e.alpha=0,Pn.transform(e)}},Kte=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Xte(r){var e,t;return isNaN(r)&&typeof r=="string"&&(((e=r.match(sk))==null?void 0:e.length)||0)+(((t=r.match(Kte))==null?void 0:t.length)||0)>0}const w7="number",x7="color",Yte="var",Qte="var(",PB="${}",Jte=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function p1(r){const e=r.toString(),t=[],n={color:[],number:[],var:[]},i=[];let s=0;const o=e.replace(Jte,l=>(Pn.test(l)?(n.color.push(s),i.push(x7),t.push(Pn.parse(l))):l.startsWith(Qte)?(n.var.push(s),i.push(Yte),t.push(l)):(n.number.push(s),i.push(w7),t.push(parseFloat(l))),++s,PB)).split(PB);return{values:t,split:o,indexes:n,types:i}}function _7(r){return p1(r).values}function A7(r){const{split:e,types:t}=p1(r),n=e.length;return i=>{let s="";for(let a=0;a<n;a++)if(s+=e[a],i[a]!==void 0){const o=t[a];o===w7?s+=Fb(i[a]):o===x7?s+=Pn.transform(i[a]):s+=i[a]}return s}}const Zte=r=>typeof r=="number"?0:Pn.test(r)?Pn.getAnimatableNone(r):r;function ere(r){const e=_7(r);return A7(r)(e.map(Zte))}const vd={test:Xte,parse:_7,createTransformer:A7,getAnimatableNone:ere};function dD(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function tre({hue:r,saturation:e,lightness:t,alpha:n}){r/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;i=dD(l,o,r+1/3),s=dD(l,o,r),a=dD(l,o,r-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:n}}function ES(r,e){return t=>t>0?e:r}const Jr=(r,e,t)=>r+(e-r)*t,fD=(r,e,t)=>{const n=r*r,i=t*(e*e-n)+n;return i<0?0:Math.sqrt(i)},rre=[nM,Af,pg],nre=r=>rre.find(e=>e.test(r));function RB(r){const e=nre(r);if(!e)return!1;let t=e.parse(r);return e===pg&&(t=tre(t)),t}const kB=(r,e)=>{const t=RB(r),n=RB(e);if(!t||!n)return ES(r,e);const i={...t};return s=>(i.red=fD(t.red,n.red,s),i.green=fD(t.green,n.green,s),i.blue=fD(t.blue,n.blue,s),i.alpha=Jr(t.alpha,n.alpha,s),Af.transform(i))},iM=new Set(["none","hidden"]);function ire(r,e){return iM.has(r)?t=>t<=0?r:e:t=>t>=1?e:r}function sre(r,e){return t=>Jr(r,e,t)}function ok(r){return typeof r=="number"?sre:typeof r=="string"?ik(r)?ES:Pn.test(r)?kB:lre:Array.isArray(r)?E7:typeof r=="object"?Pn.test(r)?kB:are:ES}function E7(r,e){const t=[...r],n=t.length,i=r.map((s,a)=>ok(s)(s,e[a]));return s=>{for(let a=0;a<n;a++)t[a]=i[a](s);return t}}function are(r,e){const t={...r,...e},n={};for(const i in t)r[i]!==void 0&&e[i]!==void 0&&(n[i]=ok(r[i])(r[i],e[i]));return i=>{for(const s in n)t[s]=n[s](i);return t}}function ore(r,e){const t=[],n={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],a=r.indexes[s][n[s]],o=r.values[a]??0;t[i]=o,n[s]++}return t}const lre=(r,e)=>{const t=vd.createTransformer(e),n=p1(r),i=p1(e);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?iM.has(r)&&!i.values.length||iM.has(e)&&!n.values.length?ire(r,e):Fx(E7(ore(n,i),i.values),t):ES(r,e)};function S7(r,e,t){return typeof r=="number"&&typeof e=="number"&&typeof t=="number"?Jr(r,e,t):ok(r)(r,e)}const ure=r=>{const e=({timestamp:t})=>r(t);return{start:(t=!0)=>Gr.update(e,t),stop:()=>gd(e),now:()=>Ei.isProcessing?Ei.timestamp:Hs.now()}},T7=(r,e,t=10)=>{let n="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)n+=Math.round(r(s/(i-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},SS=2e4;function lk(r){let e=0;const t=50;let n=r.next(e);for(;!n.done&&e<SS;)e+=t,n=r.next(e);return e>=SS?1/0:e}function cre(r,e=100,t){const n=t({...r,keyframes:[0,e]}),i=Math.min(lk(n),SS);return{type:"keyframes",ease:s=>n.next(i*s).value/e,duration:uo(i)}}const hre=5;function C7(r,e,t){const n=Math.max(e-hre,0);return a7(t-r(n),e-n)}const cn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},mD=.001;function dre({duration:r=cn.duration,bounce:e=cn.bounce,velocity:t=cn.velocity,mass:n=cn.mass}){let i,s,a=1-e;a=wc(cn.minDamping,cn.maxDamping,a),r=wc(cn.minDuration,cn.maxDuration,uo(r)),a<1?(i=u=>{const c=u*a,h=c*r,d=c-t,f=sM(u,a),p=Math.exp(-h);return mD-d/f*p},s=u=>{const h=u*a*r,d=h*t+t,f=Math.pow(a,2)*Math.pow(u,2)*r,p=Math.exp(-h),g=sM(Math.pow(u,2),a);return(-i(u)+mD>0?-1:1)*((d-f)*p)/g}):(i=u=>{const c=Math.exp(-u*r),h=(u-t)*r+1;return-mD+c*h},s=u=>{const c=Math.exp(-u*r),h=(t-u)*(r*r);return c*h});const o=5/r,l=mre(i,s,o);if(r=jl(r),isNaN(l))return{stiffness:cn.stiffness,damping:cn.damping,duration:r};{const u=Math.pow(l,2)*n;return{stiffness:u,damping:a*2*Math.sqrt(n*u),duration:r}}}const fre=12;function mre(r,e,t){let n=t;for(let i=1;i<fre;i++)n=n-r(n)/e(n);return n}function sM(r,e){return r*Math.sqrt(1-e*e)}const pre=["duration","bounce"],gre=["stiffness","damping","mass"];function FB(r,e){return e.some(t=>r[t]!==void 0)}function vre(r){let e={velocity:cn.velocity,stiffness:cn.stiffness,damping:cn.damping,mass:cn.mass,isResolvedFromDuration:!1,...r};if(!FB(r,gre)&&FB(r,pre))if(r.visualDuration){const t=r.visualDuration,n=2*Math.PI/(t*1.2),i=n*n,s=2*wc(.05,1,1-(r.bounce||0))*Math.sqrt(i);e={...e,mass:cn.mass,stiffness:i,damping:s}}else{const t=dre(r);e={...e,...t,mass:cn.mass},e.isResolvedFromDuration=!0}return e}function TS(r=cn.visualDuration,e=cn.bounce){const t=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:e}:r;let{restSpeed:n,restDelta:i}=t;const s=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:h,velocity:d,isResolvedFromDuration:f}=vre({...t,velocity:-uo(t.velocity||0)}),p=d||0,g=u/(2*Math.sqrt(l*c)),b=a-s,v=uo(Math.sqrt(l/c)),x=Math.abs(b)<5;n||(n=x?cn.restSpeed.granular:cn.restSpeed.default),i||(i=x?cn.restDelta.granular:cn.restDelta.default);let y;if(g<1){const w=sM(v,g);y=_=>{const S=Math.exp(-g*v*_);return a-S*((p+g*v*b)/w*Math.sin(w*_)+b*Math.cos(w*_))}}else if(g===1)y=w=>a-Math.exp(-v*w)*(b+(p+v*b)*w);else{const w=v*Math.sqrt(g*g-1);y=_=>{const S=Math.exp(-g*v*_),E=Math.min(w*_,300);return a-S*((p+g*v*b)*Math.sinh(E)+w*b*Math.cosh(E))/w}}const A={calculatedDuration:f&&h||null,next:w=>{const _=y(w);if(f)o.done=w>=h;else{let S=w===0?p:0;g<1&&(S=w===0?jl(p):C7(y,w,_));const E=Math.abs(S)<=n,C=Math.abs(a-_)<=i;o.done=E&&C}return o.value=o.done?a:_,o},toString:()=>{const w=Math.min(lk(A),SS),_=T7(S=>A.next(w*S).value,w,30);return w+"ms "+_},toTransition:()=>{}};return A}TS.applyToOptions=r=>{const e=cre(r,100,TS);return r.ease=e.ease,r.duration=jl(e.duration),r.type="keyframes",r};function aM({keyframes:r,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:c}){const h=r[0],d={done:!1,value:h},f=E=>o!==void 0&&E<o||l!==void 0&&E>l,p=E=>o===void 0?l:l===void 0||Math.abs(o-E)<Math.abs(l-E)?o:l;let g=t*e;const b=h+g,v=a===void 0?b:a(b);v!==b&&(g=v-h);const x=E=>-g*Math.exp(-E/n),y=E=>v+x(E),A=E=>{const C=x(E),N=y(E);d.done=Math.abs(C)<=u,d.value=d.done?v:N};let w,_;const S=E=>{f(d.value)&&(w=E,_=TS({keyframes:[d.value,p(d.value)],velocity:C7(y,E,d.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return S(0),{calculatedDuration:null,next:E=>{let C=!1;return!_&&w===void 0&&(C=!0,A(E),S(E)),w!==void 0&&E>=w?_.next(E-w):(!C&&A(E),d)}}}function yre(r,e,t){const n=[],i=t||xc.mix||S7,s=r.length-1;for(let a=0;a<s;a++){let o=i(r[a],r[a+1]);if(e){const l=Array.isArray(e)?e[a]||ho:e;o=Fx(l,o)}n.push(o)}return n}function bre(r,e,{clamp:t=!0,ease:n,mixer:i}={}){const s=r.length;if(JR(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=r[0]===r[1];r[0]>r[s-1]&&(r=[...r].reverse(),e=[...e].reverse());const o=yre(e,n,i),l=o.length,u=c=>{if(a&&c<r[0])return e[0];let h=0;if(l>1)for(;h<r.length-2&&!(c<r[h+1]);h++);const d=f1(r[h],r[h+1],c);return o[h](d)};return t?c=>u(wc(r[0],r[s-1],c)):u}function wre(r,e){const t=r[r.length-1];for(let n=1;n<=e;n++){const i=f1(0,e,n);r.push(Jr(t,1,i))}}function xre(r){const e=[0];return wre(e,r.length-1),e}function _re(r,e){return r.map(t=>t*e)}function Are(r,e){return r.map(()=>e||p7).splice(0,r.length-1)}function Ob({duration:r=300,keyframes:e,times:t,ease:n="easeInOut"}){const i=kte(n)?n.map(MB):MB(n),s={done:!1,value:e[0]},a=_re(t&&t.length===e.length?t:xre(e),r),o=bre(a,e,{ease:Array.isArray(i)?i:Are(e,i)});return{calculatedDuration:r,next:l=>(s.value=o(l),s.done=l>=r,s)}}const Ere=r=>r!==null;function uk(r,{repeat:e,repeatType:t="loop"},n,i=1){const s=r.filter(Ere),o=i<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!o||n===void 0?s[o]:n}const Sre={decay:aM,inertia:aM,tween:Ob,keyframes:Ob,spring:TS};function N7(r){typeof r.type=="string"&&(r.type=Sre[r.type])}class ck{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Tre=r=>r/100;class hk extends ck{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,i;const{motionValue:t}=this.options;t&&t.updatedAt!==Hs.now()&&this.tick(Hs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(n=this.options).onStop)==null||i.call(n))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;N7(e);const{type:t=Ob,repeat:n=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=e;let{keyframes:o}=e;const l=t||Ob;l!==Ob&&typeof o[0]!="number"&&(this.mixKeyframes=Fx(Tre,S7(o[0],o[1])),o=[0,100]);const u=l({...e,keyframes:o});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=lk(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=u}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:c,repeat:h,repeatType:d,repeatDelay:f,type:p,onUpdate:g,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const v=this.currentTime-u*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?v<0:v>i;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let y=this.currentTime,A=n;if(h){const E=Math.min(this.currentTime,i)/o;let C=Math.floor(E),N=E%1;!N&&E>=1&&(N=1),N===1&&C--,C=Math.min(C,h+1),!!(C%2)&&(d==="reverse"?(N=1-N,f&&(N-=f/o)):d==="mirror"&&(A=a)),y=wc(0,1,N)*o}const w=x?{done:!1,value:c[0]}:A.next(y);s&&(w.value=s(w.value));let{done:_}=w;!x&&l!==null&&(_=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return S&&p!==aM&&(w.value=uk(c,this.options,b,this.speed)),g&&g(w.value),S&&this.finish(),w}then(e,t){return this.finished.then(e,t)}get duration(){return uo(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+uo(e)}get time(){return uo(this.currentTime)}set time(e){var t;e=jl(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Hs.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=uo(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=ure,startTime:t}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(s=(i=this.options).onPlay)==null||s.call(i);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=t??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Hs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function Cre(r){for(let e=1;e<r.length;e++)r[e]??(r[e]=r[e-1])}const Ef=r=>r*180/Math.PI,oM=r=>{const e=Ef(Math.atan2(r[1],r[0]));return lM(e)},Nre={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:oM,rotateZ:oM,skewX:r=>Ef(Math.atan(r[1])),skewY:r=>Ef(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},lM=r=>(r=r%360,r<0&&(r+=360),r),OB=oM,BB=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),LB=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),Dre={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:BB,scaleY:LB,scale:r=>(BB(r)+LB(r))/2,rotateX:r=>lM(Ef(Math.atan2(r[6],r[5]))),rotateY:r=>lM(Ef(Math.atan2(-r[2],r[0]))),rotateZ:OB,rotate:OB,skewX:r=>Ef(Math.atan(r[4])),skewY:r=>Ef(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function uM(r){return r.includes("scale")?1:0}function cM(r,e){if(!r||r==="none")return uM(e);const t=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(t)n=Dre,i=t;else{const o=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=Nre,i=o}if(!i)return uM(e);const s=n[e],a=i[1].split(",").map(Ire);return typeof s=="function"?s(a):a[s]}const Mre=(r,e)=>{const{transform:t="none"}=getComputedStyle(r);return cM(t,e)};function Ire(r){return parseFloat(r.trim())}const W0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],K0=new Set(W0),$B=r=>r===G0||r===pt,Pre=new Set(["x","y","z"]),Rre=W0.filter(r=>!Pre.has(r));function kre(r){const e=[];return Rre.forEach(t=>{const n=r.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e}const Hm={width:({x:r},{paddingLeft:e="0",paddingRight:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),height:({y:r},{paddingTop:e="0",paddingBottom:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),top:(r,{top:e})=>parseFloat(e),left:(r,{left:e})=>parseFloat(e),bottom:({y:r},{top:e})=>parseFloat(e)+(r.max-r.min),right:({x:r},{left:e})=>parseFloat(e)+(r.max-r.min),x:(r,{transform:e})=>cM(e,"x"),y:(r,{transform:e})=>cM(e,"y")};Hm.translateX=Hm.x;Hm.translateY=Hm.y;const Gm=new Set;let hM=!1,dM=!1,fM=!1;function D7(){if(dM){const r=Array.from(Gm).filter(n=>n.needsMeasurement),e=new Set(r.map(n=>n.element)),t=new Map;e.forEach(n=>{const i=kre(n);i.length&&(t.set(n,i),n.render())}),r.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const i=t.get(n);i&&i.forEach(([s,a])=>{var o;(o=n.getValue(s))==null||o.set(a)})}),r.forEach(n=>n.measureEndState()),r.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}dM=!1,hM=!1,Gm.forEach(r=>r.complete(fM)),Gm.clear()}function M7(){Gm.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(dM=!0)})}function Fre(){fM=!0,M7(),D7(),fM=!1}class dk{constructor(e,t,n,i,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Gm.add(this),hM||(hM=!0,Gr.read(M7),Gr.resolveKeyframes(D7))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(n&&t){const o=n.readValue(t,a);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=a),i&&s===void 0&&i.set(e[0])}Cre(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Gm.delete(this)}cancel(){this.state==="scheduled"&&(Gm.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Ore=r=>r.startsWith("--");function Bre(r,e,t){Ore(e)?r.style.setProperty(e,t):r.style[e]=t}const Lre=ZR(()=>window.ScrollTimeline!==void 0),$re={};function Vre(r,e){const t=ZR(r);return()=>$re[e]??t()}const I7=Vre(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Yy=([r,e,t,n])=>`cubic-bezier(${r}, ${e}, ${t}, ${n})`,VB={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yy([0,.65,.55,1]),circOut:Yy([.55,0,1,.45]),backIn:Yy([.31,.01,.66,-.59]),backOut:Yy([.33,1.53,.69,.99])};function P7(r,e){if(r)return typeof r=="function"?I7()?T7(r,e):"ease-out":g7(r)?Yy(r):Array.isArray(r)?r.map(t=>P7(t,e)||VB.easeOut):VB[r]}function Ure(r,e,t,{delay:n=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:l}={},u=void 0){const c={[e]:t};l&&(c.offset=l);const h=P7(o,i);Array.isArray(h)&&(c.easing=h);const d={delay:n,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return u&&(d.pseudoElement=u),r.animate(c,d)}function R7(r){return typeof r=="function"&&"applyToOptions"in r}function zre({type:r,...e}){return R7(r)&&I7()?r.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class jre extends ck{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=e,JR(typeof e.type!="string");const u=zre(e);this.animation=Ure(t,n,i,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const c=uk(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(c):Bre(t,n,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,n;const e=((n=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:n.call(t).duration)||0;return uo(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+uo(e)}get time(){return uo(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=jl(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Lre()?(this.animation.timeline=e,ho):t(this)}}const k7={anticipate:d7,backInOut:h7,circInOut:m7};function qre(r){return r in k7}function Hre(r){typeof r.ease=="string"&&qre(r.ease)&&(r.ease=k7[r.ease])}const UB=10;class Gre extends jre{constructor(e){Hre(e),N7(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:i,element:s,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const o=new hk({...a,autoplay:!1}),l=jl(this.finishedTime??this.time);t.setWithVelocity(o.sample(l-UB).value,o.sample(l).value,UB),o.stop()}}const zB=(r,e)=>e==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(vd.test(r)||r==="0")&&!r.startsWith("url("));function Wre(r){const e=r[0];if(r.length===1)return!0;for(let t=0;t<r.length;t++)if(r[t]!==e)return!0}function Kre(r,e,t,n){const i=r[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=r[r.length-1],a=zB(i,e),o=zB(s,e);return!a||!o?!1:Wre(r)||(t==="spring"||R7(t))&&n}function mM(r){r.duration=0,r.type="keyframes"}const Xre=new Set(["opacity","clipPath","filter","transform"]),Yre=ZR(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Qre(r){var c;const{motionValue:e,name:t,repeatDelay:n,repeatType:i,damping:s,type:a}=r;if(!(((c=e==null?void 0:e.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return Yre()&&t&&Xre.has(t)&&(t!=="transform"||!u)&&!l&&!n&&i!=="mirror"&&s!==0&&a!=="inertia"}const Jre=40;class Zre extends ck{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:o,name:l,motionValue:u,element:c,...h}){var p;super(),this.stop=()=>{var g,b;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=Hs.now();const d={autoplay:e,delay:t,type:n,repeat:i,repeatDelay:s,repeatType:a,name:l,motionValue:u,element:c,...h},f=(c==null?void 0:c.KeyframeResolver)||dk;this.keyframeResolver=new f(o,(g,b,v)=>this.onKeyframesResolved(g,b,d,!v),l,u,c),(p=this.keyframeResolver)==null||p.scheduleResolve()}onKeyframesResolved(e,t,n,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:o,delay:l,isHandoff:u,onUpdate:c}=n;this.resolvedAt=Hs.now(),Kre(e,s,a,o)||((xc.instantAnimations||!l)&&(c==null||c(uk(e,n,t))),e[0]=e[e.length-1],mM(n),n.repeat=0);const d={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Jre?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},f=!u&&Qre(d)?new Gre({...d,element:d.motionValue.owner.current}):new hk(d);f.finished.then(()=>this.notifyFinished()).catch(ho),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Fre()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const ene=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function tne(r){const e=ene.exec(r);if(!e)return[,];const[,t,n,i]=e;return[`--${t??n}`,i]}function F7(r,e,t=1){const[n,i]=tne(r);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const a=s.trim();return n7(a)?parseFloat(a):a}return ik(i)?F7(i,e,t+1):i}function fk(r,e){return(r==null?void 0:r[e])??(r==null?void 0:r.default)??r}const O7=new Set(["width","height","top","left","right","bottom",...W0]),rne={test:r=>r==="auto",parse:r=>r},B7=r=>e=>e.test(r),L7=[G0,pt,ql,jc,Wte,Gte,rne],jB=r=>L7.find(B7(r));function nne(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||s7(r):!0}const ine=new Set(["brightness","contrast","saturate","opacity"]);function sne(r){const[e,t]=r.slice(0,-1).split("(");if(e==="drop-shadow")return r;const[n]=t.match(sk)||[];if(!n)return r;const i=t.replace(n,"");let s=ine.has(e)?1:0;return n!==t&&(s*=100),e+"("+s+i+")"}const ane=/\b([a-z-]*)\(.*?\)/gu,pM={...vd,getAnimatableNone:r=>{const e=r.match(ane);return e?e.map(sne).join(" "):r}},qB={...G0,transform:Math.round},one={rotate:jc,rotateX:jc,rotateY:jc,rotateZ:jc,scale:sA,scaleX:sA,scaleY:sA,scaleZ:sA,skew:jc,skewX:jc,skewY:jc,distance:pt,translateX:pt,translateY:pt,translateZ:pt,x:pt,y:pt,z:pt,perspective:pt,transformPerspective:pt,opacity:m1,originX:IB,originY:IB,originZ:pt},mk={borderWidth:pt,borderTopWidth:pt,borderRightWidth:pt,borderBottomWidth:pt,borderLeftWidth:pt,borderRadius:pt,radius:pt,borderTopLeftRadius:pt,borderTopRightRadius:pt,borderBottomRightRadius:pt,borderBottomLeftRadius:pt,width:pt,maxWidth:pt,height:pt,maxHeight:pt,top:pt,right:pt,bottom:pt,left:pt,padding:pt,paddingTop:pt,paddingRight:pt,paddingBottom:pt,paddingLeft:pt,margin:pt,marginTop:pt,marginRight:pt,marginBottom:pt,marginLeft:pt,backgroundPositionX:pt,backgroundPositionY:pt,...one,zIndex:qB,fillOpacity:m1,strokeOpacity:m1,numOctaves:qB},lne={...mk,color:Pn,backgroundColor:Pn,outlineColor:Pn,fill:Pn,stroke:Pn,borderColor:Pn,borderTopColor:Pn,borderRightColor:Pn,borderBottomColor:Pn,borderLeftColor:Pn,filter:pM,WebkitFilter:pM},$7=r=>lne[r];function V7(r,e){let t=$7(r);return t!==pM&&(t=vd),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const une=new Set(["auto","none","0"]);function cne(r,e,t){let n=0,i;for(;n<r.length&&!i;){const s=r[n];typeof s=="string"&&!une.has(s)&&p1(s).values.length&&(i=r[n]),n++}if(i&&t)for(const s of e)r[s]=V7(t,i)}class hne extends dk{constructor(e,t,n,i,s){super(e,t,n,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),ik(u))){const c=F7(u,t.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!O7.has(n)||e.length!==2)return;const[i,s]=e,a=jB(i),o=jB(s);if(a!==o)if($B(a)&&$B(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else Hm[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let i=0;i<e.length;i++)(e[i]===null||nne(e[i]))&&n.push(i);n.length&&cne(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Hm[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(n,i).jump(i,!1)}measureEndState(){var o;const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const s=n.length-1,a=n[s];n[s]=Hm[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function dne(r,e,t){if(r instanceof EventTarget)return[r];if(typeof r=="string"){let n=document;const i=(t==null?void 0:t[r])??n.querySelectorAll(r);return i?Array.from(i):[]}return Array.from(r)}const U7=(r,e)=>e&&typeof r=="number"?e.transform(r):r;function fne(r){return i7(r)&&"offsetHeight"in r}const HB=30,mne=r=>!isNaN(parseFloat(r));class pne{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var s;const i=Hs.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Hs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=mne(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new ek);const n=this.events[e].add(t);return e==="change"?()=>{n(),Gr.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Hs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>HB)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,HB);return a7(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function A0(r,e){return new pne(r,e)}const{schedule:pk}=v7(queueMicrotask,!1),To={x:!1,y:!1};function z7(){return To.x||To.y}function gne(r){return r==="x"||r==="y"?To[r]?null:(To[r]=!0,()=>{To[r]=!1}):To.x||To.y?null:(To.x=To.y=!0,()=>{To.x=To.y=!1})}function j7(r,e){const t=dne(r),n=new AbortController,i={passive:!0,...e,signal:n.signal};return[t,i,()=>n.abort()]}function GB(r){return!(r.pointerType==="touch"||z7())}function vne(r,e,t={}){const[n,i,s]=j7(r,t),a=o=>{if(!GB(o))return;const{target:l}=o,u=e(l,o);if(typeof u!="function"||!l)return;const c=h=>{GB(h)&&(u(h),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,i)};return n.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const q7=(r,e)=>e?r===e?!0:q7(r,e.parentElement):!1,gk=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,yne=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function bne(r){return yne.has(r.tagName)||r.tabIndex!==-1}const rE=new WeakSet;function WB(r){return e=>{e.key==="Enter"&&r(e)}}function pD(r,e){r.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const wne=(r,e)=>{const t=r.currentTarget;if(!t)return;const n=WB(()=>{if(rE.has(t))return;pD(t,"down");const i=WB(()=>{pD(t,"up")}),s=()=>pD(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",n,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",n),e)};function KB(r){return gk(r)&&!z7()}function xne(r,e,t={}){const[n,i,s]=j7(r,t),a=o=>{const l=o.currentTarget;if(!KB(o))return;rE.add(l);const u=e(l,o),c=(f,p)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",d),rE.has(l)&&rE.delete(l),KB(f)&&typeof u=="function"&&u(f,{success:p})},h=f=>{c(f,l===window||l===document||t.useGlobalTarget||q7(l,f.target))},d=f=>{c(f,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",d,i)};return n.forEach(o=>{(t.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),fne(o)&&(o.addEventListener("focus",u=>wne(u,i)),!bne(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),s}function H7(r){return i7(r)&&"ownerSVGElement"in r}function _ne(r){return H7(r)&&r.tagName==="svg"}const Zi=r=>!!(r&&r.getVelocity),Ane=[...L7,Pn,vd],Ene=r=>Ane.find(B7(r)),G7=ue.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});function Sne(r=!0){const e=ue.useContext(XR);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,s=ue.useId();ue.useEffect(()=>{if(r)return i(s)},[r]);const a=ue.useCallback(()=>r&&n&&n(s),[s,n,r]);return!t&&n?[!1,a]:[!0]}const W7=ue.createContext({strict:!1}),XB={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},E0={};for(const r in XB)E0[r]={isEnabled:e=>XB[r].some(t=>!!e[t])};function Tne(r){for(const e in r)E0[e]={...E0[e],...r[e]}}const Cne=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function CS(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||Cne.has(r)}let K7=r=>!CS(r);function Nne(r){typeof r=="function"&&(K7=e=>e.startsWith("on")?!CS(e):r(e))}try{Nne(require("@emotion/is-prop-valid").default)}catch{}function Dne(r,e,t){const n={};for(const i in r)i==="values"&&typeof r.values=="object"||(K7(i)||t===!0&&CS(i)||!e&&!CS(i)||r.draggable&&i.startsWith("onDrag"))&&(n[i]=r[i]);return n}const xC=ue.createContext({});function _C(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function g1(r){return typeof r=="string"||Array.isArray(r)}const vk=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],yk=["initial",...vk];function AC(r){return _C(r.animate)||yk.some(e=>g1(r[e]))}function X7(r){return!!(AC(r)||r.variants)}function Mne(r,e){if(AC(r)){const{initial:t,animate:n}=r;return{initial:t===!1||g1(t)?t:void 0,animate:g1(n)?n:void 0}}return r.inherit!==!1?e:{}}function Ine(r){const{initial:e,animate:t}=Mne(r,ue.useContext(xC));return ue.useMemo(()=>({initial:e,animate:t}),[YB(e),YB(t)])}function YB(r){return Array.isArray(r)?r.join(" "):r}const v1={};function Pne(r){for(const e in r)v1[e]=r[e],nk(e)&&(v1[e].isCSSVariable=!0)}function Y7(r,{layout:e,layoutId:t}){return K0.has(r)||r.startsWith("origin")||(e||t!==void 0)&&(!!v1[r]||r==="opacity")}const Rne={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},kne=W0.length;function Fne(r,e,t){let n="",i=!0;for(let s=0;s<kne;s++){const a=W0[s],o=r[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||t){const u=U7(o,mk[a]);if(!l){i=!1;const c=Rne[a]||a;n+=`${c}(${u}) `}t&&(e[a]=u)}}return n=n.trim(),t?n=t(e,i?"":n):i&&(n="none"),n}function bk(r,e,t){const{style:n,vars:i,transformOrigin:s}=r;let a=!1,o=!1;for(const l in e){const u=e[l];if(K0.has(l)){a=!0;continue}else if(nk(l)){i[l]=u;continue}else{const c=U7(u,mk[l]);l.startsWith("origin")?(o=!0,s[l]=c):n[l]=c}}if(e.transform||(a||t?n.transform=Fne(e,r.transform,t):n.transform&&(n.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;n.transformOrigin=`${l} ${u} ${c}`}}const wk=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Q7(r,e,t){for(const n in e)!Zi(e[n])&&!Y7(n,t)&&(r[n]=e[n])}function One({transformTemplate:r},e){return ue.useMemo(()=>{const t=wk();return bk(t,e,r),Object.assign({},t.vars,t.style)},[e])}function Bne(r,e){const t=r.style||{},n={};return Q7(n,t,r),Object.assign(n,One(r,e)),n}function Lne(r,e){const t={},n=Bne(r,e);return r.drag&&r.dragListener!==!1&&(t.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(t.tabIndex=0),t.style=n,t}const $ne={offset:"stroke-dashoffset",array:"stroke-dasharray"},Vne={offset:"strokeDashoffset",array:"strokeDasharray"};function Une(r,e,t=1,n=0,i=!0){r.pathLength=1;const s=i?$ne:Vne;r[s.offset]=pt.transform(-n);const a=pt.transform(e),o=pt.transform(t);r[s.array]=`${a} ${o}`}function J7(r,{attrX:e,attrY:t,attrScale:n,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...o},l,u,c){if(bk(r,o,u),l){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:h,style:d}=r;h.transform&&(d.transform=h.transform,delete h.transform),(d.transform||h.transformOrigin)&&(d.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),d.transform&&(d.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),t!==void 0&&(h.y=t),n!==void 0&&(h.scale=n),i!==void 0&&Une(h,i,s,a,!1)}const Z7=()=>({...wk(),attrs:{}}),ej=r=>typeof r=="string"&&r.toLowerCase()==="svg";function zne(r,e,t,n){const i=ue.useMemo(()=>{const s=Z7();return J7(s,e,ej(n),r.transformTemplate,r.style),{...s.attrs,style:{...s.style}}},[e]);if(r.style){const s={};Q7(s,r.style,r),i.style={...s,...i.style}}return i}const jne=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function xk(r){return typeof r!="string"||r.includes("-")?!1:!!(jne.indexOf(r)>-1||/[A-Z]/u.test(r))}function qne(r,e,t,{latestValues:n},i,s=!1){const o=(xk(r)?zne:Lne)(e,n,i,r),l=Dne(e,typeof r=="string",s),u=r!==ue.Fragment?{...l,...o,ref:t}:{},{children:c}=e,h=ue.useMemo(()=>Zi(c)?c.get():c,[c]);return ue.createElement(r,{...u,children:h})}function QB(r){const e=[{},{}];return r==null||r.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function _k(r,e,t,n){if(typeof e=="function"){const[i,s]=QB(n);e=e(t!==void 0?t:r.custom,i,s)}if(typeof e=="string"&&(e=r.variants&&r.variants[e]),typeof e=="function"){const[i,s]=QB(n);e=e(t!==void 0?t:r.custom,i,s)}return e}function nE(r){return Zi(r)?r.get():r}function Hne({scrapeMotionValuesFromProps:r,createRenderState:e},t,n,i){return{latestValues:Gne(t,n,i,r),renderState:e()}}function Gne(r,e,t,n){const i={},s=n(r,{});for(const d in s)i[d]=nE(s[d]);let{initial:a,animate:o}=r;const l=AC(r),u=X7(r);e&&u&&!l&&r.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let c=t?t.initial===!1:!1;c=c||a===!1;const h=c?o:a;if(h&&typeof h!="boolean"&&!_C(h)){const d=Array.isArray(h)?h:[h];for(let f=0;f<d.length;f++){const p=_k(r,d[f]);if(p){const{transitionEnd:g,transition:b,...v}=p;for(const x in v){let y=v[x];if(Array.isArray(y)){const A=c?y.length-1:0;y=y[A]}y!==null&&(i[x]=y)}for(const x in g)i[x]=g[x]}}}return i}const tj=r=>(e,t)=>{const n=ue.useContext(xC),i=ue.useContext(XR),s=()=>Hne(r,e,n,i);return t?s():Tte(s)};function Ak(r,e,t){var s;const{style:n}=r,i={};for(const a in n)(Zi(n[a])||e.style&&Zi(e.style[a])||Y7(a,r)||((s=t==null?void 0:t.getValue(a))==null?void 0:s.liveStyle)!==void 0)&&(i[a]=n[a]);return i}const Wne=tj({scrapeMotionValuesFromProps:Ak,createRenderState:wk});function rj(r,e,t){const n=Ak(r,e,t);for(const i in r)if(Zi(r[i])||Zi(e[i])){const s=W0.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[s]=r[i]}return n}const Kne=tj({scrapeMotionValuesFromProps:rj,createRenderState:Z7}),Xne=Symbol.for("motionComponentSymbol");function gg(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function Yne(r,e,t){return ue.useCallback(n=>{n&&r.onMount&&r.onMount(n),e&&(n?e.mount(n):e.unmount()),t&&(typeof t=="function"?t(n):gg(t)&&(t.current=n))},[e])}const Ek=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Qne="framerAppearId",nj="data-"+Ek(Qne),ij=ue.createContext({});function Jne(r,e,t,n,i){var g,b;const{visualElement:s}=ue.useContext(xC),a=ue.useContext(W7),o=ue.useContext(XR),l=ue.useContext(G7).reducedMotion,u=ue.useRef(null);n=n||a.renderer,!u.current&&n&&(u.current=n(r,{visualState:e,parent:s,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,h=ue.useContext(ij);c&&!c.projection&&i&&(c.type==="html"||c.type==="svg")&&Zne(u.current,t,i,h);const d=ue.useRef(!1);ue.useInsertionEffect(()=>{c&&d.current&&c.update(t,o)});const f=t[nj],p=ue.useRef(!!f&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,f))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,f)));return Cte(()=>{c&&(d.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),p.current&&c.animationState&&c.animationState.animateChanges())}),ue.useEffect(()=>{c&&(!p.current&&c.animationState&&c.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,f)}),p.current=!1),c.enteringChildren=void 0)}),c}function Zne(r,e,t,n){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=e;r.projection=new t(r.latestValues,e["data-framer-portal-id"]?void 0:sj(r.parent)),r.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&gg(o),visualElement:r,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,crossfade:c,layoutScroll:l,layoutRoot:u})}function sj(r){if(r)return r.options.allowProjection!==!1?r.projection:sj(r.parent)}function gD(r,{forwardMotionProps:e=!1}={},t,n){t&&Tne(t);const i=xk(r)?Kne:Wne;function s(o,l){let u;const c={...ue.useContext(G7),...o,layoutId:eie(o)},{isStatic:h}=c,d=Ine(o),f=i(o,h);if(!h&&KR){tie();const p=rie(c);u=p.MeasureLayout,d.visualElement=Jne(r,f,c,n,p.ProjectionNode)}return P.jsxs(xC.Provider,{value:d,children:[u&&d.visualElement?P.jsx(u,{visualElement:d.visualElement,...c}):null,qne(r,o,Yne(f,d.visualElement,l),f,h,e)]})}s.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const a=ue.forwardRef(s);return a[Xne]=r,a}function eie({layoutId:r}){const e=ue.useContext(r7).id;return e&&r!==void 0?e+"-"+r:r}function tie(r,e){ue.useContext(W7).strict}function rie(r){const{drag:e,layout:t}=E0;if(!e&&!t)return{};const n={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(r)||t!=null&&t.isEnabled(r)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function nie(r,e){if(typeof Proxy>"u")return gD;const t=new Map,n=(s,a)=>gD(s,a,r,e),i=(s,a)=>n(s,a);return new Proxy(i,{get:(s,a)=>a==="create"?n:(t.has(a)||t.set(a,gD(a,void 0,r,e)),t.get(a))})}function aj({top:r,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:r,max:n}}}function iie({x:r,y:e}){return{top:e.min,right:r.max,bottom:e.max,left:r.min}}function sie(r,e){if(!e)return r;const t=e({x:r.left,y:r.top}),n=e({x:r.right,y:r.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}function vD(r){return r===void 0||r===1}function gM({scale:r,scaleX:e,scaleY:t}){return!vD(r)||!vD(e)||!vD(t)}function uf(r){return gM(r)||oj(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function oj(r){return JB(r.x)||JB(r.y)}function JB(r){return r&&r!=="0%"}function NS(r,e,t){const n=r-t,i=e*n;return t+i}function ZB(r,e,t,n,i){return i!==void 0&&(r=NS(r,i,n)),NS(r,t,n)+e}function vM(r,e=0,t=1,n,i){r.min=ZB(r.min,e,t,n,i),r.max=ZB(r.max,e,t,n,i)}function lj(r,{x:e,y:t}){vM(r.x,e.translate,e.scale,e.originPoint),vM(r.y,t.translate,t.scale,t.originPoint)}const e4=.999999999999,t4=1.0000000000001;function aie(r,e,t,n=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let o=0;o<i;o++){s=t[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&yg(r,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,lj(r,a)),n&&uf(s.latestValues)&&yg(r,s.latestValues))}e.x<t4&&e.x>e4&&(e.x=1),e.y<t4&&e.y>e4&&(e.y=1)}function vg(r,e){r.min=r.min+e,r.max=r.max+e}function r4(r,e,t,n,i=.5){const s=Jr(r.min,r.max,i);vM(r,e,t,s,n)}function yg(r,e){r4(r.x,e.x,e.scaleX,e.scale,e.originX),r4(r.y,e.y,e.scaleY,e.scale,e.originY)}function uj(r,e){return aj(sie(r.getBoundingClientRect(),e))}function oie(r,e,t){const n=uj(r,t),{scroll:i}=e;return i&&(vg(n.x,i.offset.x),vg(n.y,i.offset.y)),n}const n4=()=>({translate:0,scale:1,origin:0,originPoint:0}),bg=()=>({x:n4(),y:n4()}),i4=()=>({min:0,max:0}),wn=()=>({x:i4(),y:i4()}),yM={current:null},cj={current:!1};function lie(){if(cj.current=!0,!!KR)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),e=()=>yM.current=r.matches;r.addEventListener("change",e),e()}else yM.current=!1}const uie=new WeakMap;function cie(r,e,t){for(const n in e){const i=e[n],s=t[n];if(Zi(i))r.addValue(n,i);else if(Zi(s))r.addValue(n,A0(i,{owner:r}));else if(s!==i)if(r.hasValue(n)){const a=r.getValue(n);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=r.getStaticValue(n);r.addValue(n,A0(a!==void 0?a:i,{owner:r}))}}for(const n in t)e[n]===void 0&&r.removeValue(n);return e}const s4=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class hie{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=dk,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const d=Hs.now();this.renderScheduledAt<d&&(this.renderScheduledAt=d,Gr.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=AC(t),this.isVariantNode=X7(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(t,{},this);for(const d in h){const f=h[d];l[d]!==void 0&&Zi(f)&&f.set(l[d])}}mount(e){var t;this.current=e,uie.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),cj.current||lie(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:yM.current,(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),gd(this.notifyUpdate),gd(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=K0.has(e);n&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Gr.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in E0){const t=E0[e];if(!t)continue;const{isEnabled:n,Feature:i}=t;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<s4.length;n++){const i=s4[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=cie(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=A0(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(n7(n)||s7(n))?n=parseFloat(n):!Ene(n)&&vd.test(t)&&(n=V7(e,t)),this.setBaseTarget(e,Zi(n)?n.get():n)),Zi(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var s;const{initial:t}=this.props;let n;if(typeof t=="string"||typeof t=="object"){const a=_k(this.props,t,(s=this.presenceContext)==null?void 0:s.custom);a&&(n=a[e])}if(t&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Zi(i)?i:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new ek),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){pk.render(this.render)}}class hj extends hie{constructor(){super(...arguments),this.KeyframeResolver=hne}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Zi(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function dj(r,{style:e,vars:t},n,i){const s=r.style;let a;for(a in e)s[a]=e[a];i==null||i.applyProjectionStyles(s,n);for(a in t)s.setProperty(a,t[a])}function die(r){return window.getComputedStyle(r)}class fie extends hj{constructor(){super(...arguments),this.type="html",this.renderInstance=dj}readValueFromInstance(e,t){var n;if(K0.has(t))return(n=this.projection)!=null&&n.isProjecting?uM(t):Mre(e,t);{const i=die(e),s=(nk(t)?i.getPropertyValue(t):i[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return uj(e,t)}build(e,t,n){bk(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return Ak(e,t,n)}}const fj=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function mie(r,e,t,n){dj(r,e,void 0,n);for(const i in e.attrs)r.setAttribute(fj.has(i)?i:Ek(i),e.attrs[i])}class pie extends hj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=wn}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(K0.has(t)){const n=$7(t);return n&&n.default||0}return t=fj.has(t)?t:Ek(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return rj(e,t,n)}build(e,t,n){J7(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,i){mie(e,t,n,i)}mount(e){this.isSVGTag=ej(e.tagName),super.mount(e)}}const gie=(r,e)=>xk(r)?new pie(e):new fie(e,{allowProjection:r!==ue.Fragment});function Og(r,e,t){const n=r.getProps();return _k(n,e,t!==void 0?t:n.custom,r)}const bM=r=>Array.isArray(r);function vie(r,e,t){r.hasValue(e)?r.getValue(e).set(t):r.addValue(e,A0(t))}function yie(r){return bM(r)?r[r.length-1]||0:r}function bie(r,e){const t=Og(r,e);let{transitionEnd:n={},transition:i={},...s}=t||{};s={...s,...n};for(const a in s){const o=yie(s[a]);vie(r,a,o)}}function wie(r){return!!(Zi(r)&&r.add)}function wM(r,e){const t=r.getValue("willChange");if(wie(t))return t.add(e);if(!t&&xc.WillChange){const n=new xc.WillChange("auto");r.addValue("willChange",n),n.add(e)}}function mj(r){return r.props[nj]}const xie=r=>r!==null;function _ie(r,{repeat:e,repeatType:t="loop"},n){const i=r.filter(xie),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[s]}const Aie={type:"spring",stiffness:500,damping:25,restSpeed:10},Eie=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),Sie={type:"keyframes",duration:.8},Tie={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Cie=(r,{keyframes:e})=>e.length>2?Sie:K0.has(r)?r.startsWith("scale")?Eie(e[1]):Aie:Tie;function Nie({when:r,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const Sk=(r,e,t,n={},i,s)=>a=>{const o=fk(n,r)||{},l=o.delay||n.delay||0;let{elapsed:u=0}=n;u=u-jl(l);const c={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:d=>{e.set(d),o.onUpdate&&o.onUpdate(d)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:r,motionValue:e,element:s?void 0:i};Nie(o)||Object.assign(c,Cie(r,c)),c.duration&&(c.duration=jl(c.duration)),c.repeatDelay&&(c.repeatDelay=jl(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let h=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(mM(c),c.delay===0&&(h=!0)),(xc.instantAnimations||xc.skipAnimations)&&(h=!0,mM(c),c.delay=0),c.allowFlatten=!o.type&&!o.ease,h&&!s&&e.get()!==void 0){const d=_ie(c.keyframes,o);if(d!==void 0){Gr.update(()=>{c.onUpdate(d),c.onComplete()});return}}return o.isSync?new hk(c):new Zre(c)};function Die({protectedKeys:r,needsAnimating:e},t){const n=r.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function pj(r,e,{delay:t=0,transitionOverride:n,type:i}={}){let{transition:s=r.getDefaultTransition(),transitionEnd:a,...o}=e;n&&(s=n);const l=[],u=i&&r.animationState&&r.animationState.getState()[i];for(const c in o){const h=r.getValue(c,r.latestValues[c]??null),d=o[c];if(d===void 0||u&&Die(u,c))continue;const f={delay:t,...fk(s||{},c)},p=h.get();if(p!==void 0&&!h.isAnimating&&!Array.isArray(d)&&d===p&&!f.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const v=mj(r);if(v){const x=window.MotionHandoffAnimation(v,c,Gr);x!==null&&(f.startTime=x,g=!0)}}wM(r,c),h.start(Sk(c,h,d,r.shouldReduceMotion&&O7.has(c)?{type:!1}:f,r,g));const b=h.animation;b&&l.push(b)}return a&&Promise.all(l).then(()=>{Gr.update(()=>{a&&bie(r,a)})}),l}function gj(r,e,t,n=0,i=1){const s=Array.from(r).sort((u,c)=>u.sortNodePosition(c)).indexOf(e),a=r.size,o=(a-1)*n;return typeof t=="function"?t(s,a):i===1?s*n:o-s*n}function xM(r,e,t={}){var l;const n=Og(r,e,t.type==="exit"?(l=r.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=r.getDefaultTransition()||{}}=n||{};t.transitionOverride&&(i=t.transitionOverride);const s=n?()=>Promise.all(pj(r,n,t)):()=>Promise.resolve(),a=r.variantChildren&&r.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:d}=i;return Mie(r,e,u,c,h,d,t)}:()=>Promise.resolve(),{when:o}=i;if(o){const[u,c]=o==="beforeChildren"?[s,a]:[a,s];return u().then(()=>c())}else return Promise.all([s(),a(t.delay)])}function Mie(r,e,t=0,n=0,i=0,s=1,a){const o=[];for(const l of r.variantChildren)l.notify("AnimationStart",e),o.push(xM(l,e,{...a,delay:t+(typeof n=="function"?0:n)+gj(r.variantChildren,l,n,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(o)}function Iie(r,e,t={}){r.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(s=>xM(r,s,t));n=Promise.all(i)}else if(typeof e=="string")n=xM(r,e,t);else{const i=typeof e=="function"?Og(r,e,t.custom):e;n=Promise.all(pj(r,i,t))}return n.then(()=>{r.notify("AnimationComplete",e)})}function vj(r,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==r.length)return!1;for(let n=0;n<t;n++)if(e[n]!==r[n])return!1;return!0}const Pie=yk.length;function yj(r){if(!r)return;if(!r.isControllingVariants){const t=r.parent?yj(r.parent)||{}:{};return r.props.initial!==void 0&&(t.initial=r.props.initial),t}const e={};for(let t=0;t<Pie;t++){const n=yk[t],i=r.props[n];(g1(i)||i===!1)&&(e[n]=i)}return e}const Rie=[...vk].reverse(),kie=vk.length;function Fie(r){return e=>Promise.all(e.map(({animation:t,options:n})=>Iie(r,t,n)))}function Oie(r){let e=Fie(r),t=a4(),n=!0;const i=l=>(u,c)=>{var d;const h=Og(r,c,l==="exit"?(d=r.presenceContext)==null?void 0:d.custom:void 0);if(h){const{transition:f,transitionEnd:p,...g}=h;u={...u,...g,...p}}return u};function s(l){e=l(r)}function a(l){const{props:u}=r,c=yj(r.parent)||{},h=[],d=new Set;let f={},p=1/0;for(let b=0;b<kie;b++){const v=Rie[b],x=t[v],y=u[v]!==void 0?u[v]:c[v],A=g1(y),w=v===l?x.isActive:null;w===!1&&(p=b);let _=y===c[v]&&y!==u[v]&&A;if(_&&n&&r.manuallyAnimateOnMount&&(_=!1),x.protectedKeys={...f},!x.isActive&&w===null||!y&&!x.prevProp||_C(y)||typeof y=="boolean")continue;const S=Bie(x.prevProp,y);let E=S||v===l&&x.isActive&&!_&&A||b>p&&A,C=!1;const N=Array.isArray(y)?y:[y];let D=N.reduce(i(v),{});w===!1&&(D={});const{prevResolvedValues:M={}}=x,I={...M,...D},U=z=>{E=!0,d.has(z)&&(C=!0,d.delete(z)),x.needsAnimating[z]=!0;const q=r.getValue(z);q&&(q.liveStyle=!1)};for(const z in I){const q=D[z],H=M[z];if(f.hasOwnProperty(z))continue;let te=!1;bM(q)&&bM(H)?te=!vj(q,H):te=q!==H,te?q!=null?U(z):d.add(z):q!==void 0&&d.has(z)?U(z):x.protectedKeys[z]=!0}x.prevProp=y,x.prevResolvedValues=D,x.isActive&&(f={...f,...D}),n&&r.blockInitialAnimation&&(E=!1);const X=_&&S;E&&(!X||C)&&h.push(...N.map(z=>{const q={type:v};if(typeof z=="string"&&n&&!X&&r.manuallyAnimateOnMount&&r.parent){const{parent:H}=r,te=Og(H,z);if(H.enteringChildren&&te){const{delayChildren:ce}=te.transition||{};q.delay=gj(H.enteringChildren,r,ce)}}return{animation:z,options:q}}))}if(d.size){const b={};if(typeof u.initial!="boolean"){const v=Og(r,Array.isArray(u.initial)?u.initial[0]:u.initial);v&&v.transition&&(b.transition=v.transition)}d.forEach(v=>{const x=r.getBaseTarget(v),y=r.getValue(v);y&&(y.liveStyle=!0),b[v]=x??null}),h.push({animation:b})}let g=!!h.length;return n&&(u.initial===!1||u.initial===u.animate)&&!r.manuallyAnimateOnMount&&(g=!1),n=!1,g?e(h):Promise.resolve()}function o(l,u){var h;if(t[l].isActive===u)return Promise.resolve();(h=r.variantChildren)==null||h.forEach(d=>{var f;return(f=d.animationState)==null?void 0:f.setActive(l,u)}),t[l].isActive=u;const c=a(l);for(const d in t)t[d].protectedKeys={};return c}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>t,reset:()=>{t=a4()}}}function Bie(r,e){return typeof e=="string"?e!==r:Array.isArray(e)?!vj(e,r):!1}function sf(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function a4(){return{animate:sf(!0),whileInView:sf(),whileHover:sf(),whileTap:sf(),whileDrag:sf(),whileFocus:sf(),exit:sf()}}class Od{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Lie extends Od{constructor(e){super(e),e.animationState||(e.animationState=Oie(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();_C(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let $ie=0;class Vie extends Od{constructor(){super(...arguments),this.id=$ie++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Uie={animation:{Feature:Lie},exit:{Feature:Vie}};function y1(r,e,t,n={passive:!0}){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t)}function Lx(r){return{point:{x:r.pageX,y:r.pageY}}}const zie=r=>e=>gk(e)&&r(e,Lx(e));function Bb(r,e,t,n){return y1(r,e,zie(t),n)}const bj=1e-4,jie=1-bj,qie=1+bj,wj=.01,Hie=0-wj,Gie=0+wj;function gs(r){return r.max-r.min}function Wie(r,e,t){return Math.abs(r-e)<=t}function o4(r,e,t,n=.5){r.origin=n,r.originPoint=Jr(e.min,e.max,r.origin),r.scale=gs(t)/gs(e),r.translate=Jr(t.min,t.max,r.origin)-r.originPoint,(r.scale>=jie&&r.scale<=qie||isNaN(r.scale))&&(r.scale=1),(r.translate>=Hie&&r.translate<=Gie||isNaN(r.translate))&&(r.translate=0)}function Lb(r,e,t,n){o4(r.x,e.x,t.x,n?n.originX:void 0),o4(r.y,e.y,t.y,n?n.originY:void 0)}function l4(r,e,t){r.min=t.min+e.min,r.max=r.min+gs(e)}function Kie(r,e,t){l4(r.x,e.x,t.x),l4(r.y,e.y,t.y)}function u4(r,e,t){r.min=e.min-t.min,r.max=r.min+gs(e)}function $b(r,e,t){u4(r.x,e.x,t.x),u4(r.y,e.y,t.y)}function za(r){return[r("x"),r("y")]}const xj=({current:r})=>r?r.ownerDocument.defaultView:null,c4=(r,e)=>Math.abs(r-e);function Xie(r,e){const t=c4(r.x,e.x),n=c4(r.y,e.y);return Math.sqrt(t**2+n**2)}class _j{constructor(e,t,{transformPagePoint:n,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=bD(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=Xie(d.offset,{x:0,y:0})>=this.distanceThreshold;if(!f&&!p)return;const{point:g}=d,{timestamp:b}=Ei;this.history.push({...g,timestamp:b});const{onStart:v,onMove:x}=this.handlers;f||(v&&v(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=yD(f,this.transformPagePoint),Gr.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:p,onSessionEnd:g,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=bD(d.type==="pointercancel"?this.lastMoveEventInfo:yD(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,v),g&&g(d,v)},!gk(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=a,this.contextWindow=i||window;const o=Lx(e),l=yD(o,this.transformPagePoint),{point:u}=l,{timestamp:c}=Ei;this.history=[{...u,timestamp:c}];const{onSessionStart:h}=t;h&&h(e,bD(l,this.history)),this.removeListeners=Fx(Bb(this.contextWindow,"pointermove",this.handlePointerMove),Bb(this.contextWindow,"pointerup",this.handlePointerUp),Bb(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),gd(this.updatePoint)}}function yD(r,e){return e?{point:e(r.point)}:r}function h4(r,e){return{x:r.x-e.x,y:r.y-e.y}}function bD({point:r},e){return{point:r,delta:h4(r,Aj(e)),offset:h4(r,Yie(e)),velocity:Qie(e,.1)}}function Yie(r){return r[0]}function Aj(r){return r[r.length-1]}function Qie(r,e){if(r.length<2)return{x:0,y:0};let t=r.length-1,n=null;const i=Aj(r);for(;t>=0&&(n=r[t],!(i.timestamp-n.timestamp>jl(e)));)t--;if(!n)return{x:0,y:0};const s=uo(i.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Jie(r,{min:e,max:t},n){return e!==void 0&&r<e?r=n?Jr(e,r,n.min):Math.max(r,e):t!==void 0&&r>t&&(r=n?Jr(t,r,n.max):Math.min(r,t)),r}function d4(r,e,t){return{min:e!==void 0?r.min+e:void 0,max:t!==void 0?r.max+t-(r.max-r.min):void 0}}function Zie(r,{top:e,left:t,bottom:n,right:i}){return{x:d4(r.x,t,i),y:d4(r.y,e,n)}}function f4(r,e){let t=e.min-r.min,n=e.max-r.max;return e.max-e.min<r.max-r.min&&([t,n]=[n,t]),{min:t,max:n}}function ese(r,e){return{x:f4(r.x,e.x),y:f4(r.y,e.y)}}function tse(r,e){let t=.5;const n=gs(r),i=gs(e);return i>n?t=f1(e.min,e.max-n,r.min):n>i&&(t=f1(r.min,r.max-i,e.min)),wc(0,1,t)}function rse(r,e){const t={};return e.min!==void 0&&(t.min=e.min-r.min),e.max!==void 0&&(t.max=e.max-r.min),t}const _M=.35;function nse(r=_M){return r===!1?r=0:r===!0&&(r=_M),{x:m4(r,"left","right"),y:m4(r,"top","bottom")}}function m4(r,e,t){return{min:p4(r,e),max:p4(r,t)}}function p4(r,e){return typeof r=="number"?r:r[e]||0}const ise=new WeakMap;class sse{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:n}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Lx(h).point)},a=(h,d)=>{const{drag:f,dragPropagation:p,onDragStart:g}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=gne(f),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=d,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),za(v=>{let x=this.getAxisMotionValue(v).get()||0;if(ql.test(x)){const{projection:y}=this.visualElement;if(y&&y.layout){const A=y.layout.layoutBox[v];A&&(x=gs(A)*(parseFloat(x)/100))}}this.originPoint[v]=x}),g&&Gr.postRender(()=>g(h,d)),wM(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},o=(h,d)=>{this.latestPointerEvent=h,this.latestPanInfo=d;const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:g,onDrag:b}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:v}=d;if(p&&this.currentDirection===null){this.currentDirection=ase(v),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",d.point,v),this.updateAxis("y",d.point,v),this.visualElement.render(),b&&b(h,d)},l=(h,d)=>{this.latestPointerEvent=h,this.latestPanInfo=d,this.stop(h,d),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>za(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)==null?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new _j(e,{onSessionStart:s,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:n,contextWindow:xj(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,i=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!n)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&Gr.postRender(()=>o(n,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:i}=this.getProps();if(!n||!aA(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=Jie(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&gg(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=Zie(n.layoutBox,e):this.constraints=!1,this.elastic=nse(t),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&za(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=rse(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!gg(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=oie(n,i.root,this.visualElement.getTransformPagePoint());let a=ese(i.layout.layoutBox,s);if(t){const o=t(iie(a));this.hasMutatedConstraints=!!o,o&&(a=aj(o))}return a}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=za(c=>{if(!aA(c,t,this.currentDirection))return;let h=l&&l[c]||{};a&&(h={min:0,max:0});const d=i?200:1e6,f=i?40:1e7,p={type:"inertia",velocity:n?e[c]:0,bounceStiffness:d,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(c,p)});return Promise.all(u).then(o)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return wM(this.visualElement,e),n.start(Sk(e,n,0,t,this.visualElement,!1))}stopAnimation(){za(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){za(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[t];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){za(t=>{const{drag:n}=this.getProps();if(!aA(t,n,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[t];s.set(e[t]-Jr(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!gg(t)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};za(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=tse({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),za(a=>{if(!aA(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(Jr(l,u,i[a]))})}addListeners(){if(!this.visualElement.current)return;ise.set(this.visualElement,this);const e=this.visualElement.current,t=Bb(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();gg(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Gr.read(n);const a=y1(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(za(c=>{const h=this.getAxisMotionValue(c);h&&(this.originPoint[c]+=l[c].translate,h.set(h.get()+l[c].translate))}),this.visualElement.render())});return()=>{a(),t(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=_M,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function aA(r,e,t){return(e===!0||e===r)&&(t===null||t===r)}function ase(r,e=10){let t=null;return Math.abs(r.y)>e?t="y":Math.abs(r.x)>e&&(t="x"),t}class ose extends Od{constructor(e){super(e),this.removeGroupControls=ho,this.removeListeners=ho,this.controls=new sse(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ho}unmount(){this.removeGroupControls(),this.removeListeners()}}const g4=r=>(e,t)=>{r&&Gr.postRender(()=>r(e,t))};class lse extends Od{constructor(){super(...arguments),this.removePointerDownListener=ho}onPointerDown(e){this.session=new _j(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:xj(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:g4(e),onStart:g4(t),onMove:n,onEnd:(s,a)=>{delete this.session,i&&Gr.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=Bb(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const iE={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function v4(r,e){return e.max===e.min?0:r/(e.max-e.min)*100}const By={correct:(r,e)=>{if(!e.target)return r;if(typeof r=="string")if(pt.test(r))r=parseFloat(r);else return r;const t=v4(r,e.target.x),n=v4(r,e.target.y);return`${t}% ${n}%`}},use={correct:(r,{treeScale:e,projectionDelta:t})=>{const n=r,i=vd.parse(r);if(i.length>5)return n;const s=vd.createTransformer(r),a=typeof i[0]!="number"?1:0,o=t.x.scale*e.x,l=t.y.scale*e.y;i[0+a]/=o,i[1+a]/=l;const u=Jr(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=u),typeof i[3+a]=="number"&&(i[3+a]/=u),s(i)}};let wD=!1;class cse extends ue.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:i}=this.props,{projection:s}=e;Pne(hse),s&&(t.group&&t.group.add(s),n&&n.register&&i&&n.register(s),wD&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),iE.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:i,isPresent:s}=this.props,{projection:a}=n;return a&&(a.isPresent=s,wD=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Gr.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),pk.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:i}=e;wD=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Ej(r){const[e,t]=Sne(),n=ue.useContext(r7);return P.jsx(cse,{...r,layoutGroup:n,switchLayoutGroup:ue.useContext(ij),isPresent:e,safeToRemove:t})}const hse={borderRadius:{...By,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:By,borderTopRightRadius:By,borderBottomLeftRadius:By,borderBottomRightRadius:By,boxShadow:use};function dse(r,e,t){const n=Zi(r)?r:A0(r);return n.start(Sk("",n,e,t)),n.animation}const fse=(r,e)=>r.depth-e.depth;class mse{constructor(){this.children=[],this.isDirty=!1}add(e){YR(this.children,e),this.isDirty=!0}remove(e){QR(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(fse),this.isDirty=!1,this.children.forEach(e)}}function pse(r,e){const t=Hs.now(),n=({timestamp:i})=>{const s=i-t;s>=e&&(gd(n),r(s-e))};return Gr.setup(n,!0),()=>gd(n)}const Sj=["TopLeft","TopRight","BottomLeft","BottomRight"],gse=Sj.length,y4=r=>typeof r=="string"?parseFloat(r):r,b4=r=>typeof r=="number"||pt.test(r);function vse(r,e,t,n,i,s){i?(r.opacity=Jr(0,t.opacity??1,yse(n)),r.opacityExit=Jr(e.opacity??1,0,bse(n))):s&&(r.opacity=Jr(e.opacity??1,t.opacity??1,n));for(let a=0;a<gse;a++){const o=`border${Sj[a]}Radius`;let l=w4(e,o),u=w4(t,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||b4(l)===b4(u)?(r[o]=Math.max(Jr(y4(l),y4(u),n),0),(ql.test(u)||ql.test(l))&&(r[o]+="%")):r[o]=u}(e.rotate||t.rotate)&&(r.rotate=Jr(e.rotate||0,t.rotate||0,n))}function w4(r,e){return r[e]!==void 0?r[e]:r.borderRadius}const yse=Tj(0,.5,f7),bse=Tj(.5,.95,ho);function Tj(r,e,t){return n=>n<r?0:n>e?1:t(f1(r,e,n))}function x4(r,e){r.min=e.min,r.max=e.max}function Oa(r,e){x4(r.x,e.x),x4(r.y,e.y)}function _4(r,e){r.translate=e.translate,r.scale=e.scale,r.originPoint=e.originPoint,r.origin=e.origin}function A4(r,e,t,n,i){return r-=e,r=NS(r,1/t,n),i!==void 0&&(r=NS(r,1/i,n)),r}function wse(r,e=0,t=1,n=.5,i,s=r,a=r){if(ql.test(e)&&(e=parseFloat(e),e=Jr(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=Jr(s.min,s.max,n);r===s&&(o-=e),r.min=A4(r.min,e,t,o,i),r.max=A4(r.max,e,t,o,i)}function E4(r,e,[t,n,i],s,a){wse(r,e[t],e[n],e[i],e.scale,s,a)}const xse=["x","scaleX","originX"],_se=["y","scaleY","originY"];function S4(r,e,t,n){E4(r.x,e,xse,t?t.x:void 0,n?n.x:void 0),E4(r.y,e,_se,t?t.y:void 0,n?n.y:void 0)}function T4(r){return r.translate===0&&r.scale===1}function Cj(r){return T4(r.x)&&T4(r.y)}function C4(r,e){return r.min===e.min&&r.max===e.max}function Ase(r,e){return C4(r.x,e.x)&&C4(r.y,e.y)}function N4(r,e){return Math.round(r.min)===Math.round(e.min)&&Math.round(r.max)===Math.round(e.max)}function Nj(r,e){return N4(r.x,e.x)&&N4(r.y,e.y)}function D4(r){return gs(r.x)/gs(r.y)}function M4(r,e){return r.translate===e.translate&&r.scale===e.scale&&r.originPoint===e.originPoint}class Ese{constructor(){this.members=[]}add(e){YR(this.members,e),e.scheduleRender()}remove(e){if(QR(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let n;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Sse(r,e,t){let n="";const i=r.x.translate/e.x,s=r.y.translate/e.y,a=(t==null?void 0:t.z)||0;if((i||s||a)&&(n=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:u,rotate:c,rotateX:h,rotateY:d,skewX:f,skewY:p}=t;u&&(n=`perspective(${u}px) ${n}`),c&&(n+=`rotate(${c}deg) `),h&&(n+=`rotateX(${h}deg) `),d&&(n+=`rotateY(${d}deg) `),f&&(n+=`skewX(${f}deg) `),p&&(n+=`skewY(${p}deg) `)}const o=r.x.scale*e.x,l=r.y.scale*e.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const xD=["","X","Y","Z"],Tse=1e3;let Cse=0;function _D(r,e,t,n){const{latestValues:i}=e;i[r]&&(t[r]=i[r],e.setStaticValue(r,0),n&&(n[r]=0))}function Dj(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:e}=r.options;if(!e)return;const t=mj(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=r.options;window.MotionCancelOptimisedAnimation(t,"transform",Gr,!(i||s))}const{parent:n}=r;n&&!n.hasCheckedOptimisedAppear&&Dj(n)}function Mj({attachResizeListener:r,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(a={},o=e==null?void 0:e()){this.id=Cse++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Mse),this.nodes.forEach(kse),this.nodes.forEach(Fse),this.nodes.forEach(Ise)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new mse)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new ek),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=H7(a)&&!_ne(a),this.instance=a;const{layoutId:o,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),r){let c,h=0;const d=()=>this.root.updateBlockedByResize=!1;Gr.read(()=>{h=window.innerWidth}),r(a,()=>{const f=window.innerWidth;f!==h&&(h=f,this.root.updateBlockedByResize=!0,c&&c(),c=pse(d,250),iE.hasAnimatedSinceResize&&(iE.hasAnimatedSinceResize=!1,this.nodes.forEach(R4)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:d,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||u.getDefaultTransition()||Vse,{onLayoutAnimationStart:g,onLayoutAnimationComplete:b}=u.getProps(),v=!this.targetLayout||!Nj(this.targetLayout,f),x=!h&&d;if(this.options.layoutRoot||this.resumeFrom||x||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const y={...fk(p,"layout"),onPlay:g,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(y.delay=0,y.type=!1),this.startAnimation(y),this.setAnimationOrigin(c,x)}else h||R4(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),gd(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ose),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Dj(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const h=this.path[c];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(I4);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(P4);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Rse),this.nodes.forEach(Nse),this.nodes.forEach(Dse)):this.nodes.forEach(P4),this.clearAllSnapshots();const o=Hs.now();Ei.delta=wc(0,1e3/60,o-Ei.timestamp),Ei.timestamp=o,Ei.isProcessing=!0,cD.update.process(Ei),cD.preRender.process(Ei),cD.render.process(Ei),Ei.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,pk.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Pse),this.sharedNodes.forEach(Bse)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Gr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Gr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!gs(this.snapshot.measuredBox.x)&&!gs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=wn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!Cj(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;a&&this.instance&&(o||uf(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),Use(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:a}=this.options;if(!a)return wn();const o=a.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(zse))){const{scroll:c}=this.root;c&&(vg(o.x,c.offset.x),vg(o.y,c.offset.y))}return o}removeElementScroll(a){var l;const o=wn();if(Oa(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:h,options:d}=c;c!==this.root&&h&&d.layoutScroll&&(h.wasRoot&&Oa(o,a),vg(o.x,h.offset.x),vg(o.y,h.offset.y))}return o}applyTransform(a,o=!1){const l=wn();Oa(l,a);for(let u=0;u<this.path.length;u++){const c=this.path[u];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&yg(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),uf(c.latestValues)&&yg(l,c.latestValues)}return uf(this.latestValues)&&yg(l,this.latestValues),l}removeTransform(a){const o=wn();Oa(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!uf(u.latestValues))continue;gM(u.latestValues)&&u.updateSnapshot();const c=wn(),h=u.measurePageBox();Oa(c,h),S4(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return uf(this.latestValues)&&S4(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ei.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var d;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(d=this.parent)!=null&&d.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:h}=this.options;if(!(!this.layout||!(c||h))){if(this.resolvedRelativeTargetAt=Ei.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wn(),this.relativeTargetOrigin=wn(),$b(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),Oa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=wn(),this.targetWithTransforms=wn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Kie(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Oa(this.target,this.layout.layoutBox),lj(this.target,this.targetDelta)):Oa(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wn(),this.relativeTargetOrigin=wn(),$b(this.relativeTargetOrigin,this.target,f.target),Oa(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||gM(this.parent.latestValues)||oj(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var p;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Ei.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;Oa(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,d=this.treeScale.y;aie(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=wn());const{target:f}=a;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(_4(this.prevProjectionDelta.x,this.projectionDelta.x),_4(this.prevProjectionDelta.y,this.projectionDelta.y)),Lb(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==d||!M4(this.projectionDelta.x,this.prevProjectionDelta.x)||!M4(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=bg(),this.projectionDelta=bg(),this.projectionDeltaWithTransform=bg()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},h=bg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const d=wn(),f=l?l.source:void 0,p=this.layout?this.layout.source:void 0,g=f!==p,b=this.getStack(),v=!b||b.members.length<=1,x=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some($se));this.animationProgress=0;let y;this.mixTargetDelta=A=>{const w=A/1e3;k4(h.x,a.x,w),k4(h.y,a.y,w),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&($b(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Lse(this.relativeTarget,this.relativeTargetOrigin,d,w),y&&Ase(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=wn()),Oa(y,this.relativeTarget)),g&&(this.animationValues=c,vse(c,u,this.latestValues,w,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var o,l,u;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(gd(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Gr.update(()=>{iE.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=A0(0)),this.currentAnimation=dse(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),a.onUpdate&&a.onUpdate(c)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Tse),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:c}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&Ij(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||wn();const h=gs(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+h;const d=gs(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+d}Oa(o,l),yg(o,c),Lb(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Ese),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&_D("z",a,u,this.animationValues);for(let c=0;c<xD.length;c++)_D(`rotate${xD[c]}`,a,u,this.animationValues),_D(`skew${xD[c]}`,a,u,this.animationValues);a.render();for(const c in u)a.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=nE(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=nE(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!uf(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=Sse(this.projectionDeltaWithTransform,this.treeScale,c);l&&(h=l(c,h)),a.transform=h;const{x:d,y:f}=this.projectionDelta;a.transformOrigin=`${d.origin*100}% ${f.origin*100}% 0`,u.animationValues?a.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:a.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const p in v1){if(c[p]===void 0)continue;const{correct:g,applyTo:b,isCSSVariable:v}=v1[p],x=h==="none"?c[p]:g(c[p],u);if(b){const y=b.length;for(let A=0;A<y;A++)a[b[A]]=x}else v?this.options.visualElement.renderState.vars[p]=x:a[p]=x}this.options.layoutId&&(a.pointerEvents=u===this?nE(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(I4),this.root.sharedNodes.clear()}}}function Nse(r){r.updateLayout()}function Dse(r){var t;const e=((t=r.resumeFrom)==null?void 0:t.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&e&&r.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=r.layout,{animationType:s}=r.options,a=e.source!==r.layout.source;s==="size"?za(h=>{const d=a?e.measuredBox[h]:e.layoutBox[h],f=gs(d);d.min=n[h].min,d.max=d.min+f}):Ij(s,e.layoutBox,n)&&za(h=>{const d=a?e.measuredBox[h]:e.layoutBox[h],f=gs(n[h]);d.max=d.min+f,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[h].max=r.relativeTarget[h].min+f)});const o=bg();Lb(o,n,e.layoutBox);const l=bg();a?Lb(l,r.applyTransform(i,!0),e.measuredBox):Lb(l,n,e.layoutBox);const u=!Cj(o);let c=!1;if(!r.resumeFrom){const h=r.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:d,layout:f}=h;if(d&&f){const p=wn();$b(p,e.layoutBox,d.layoutBox);const g=wn();$b(g,n,f.layoutBox),Nj(p,g)||(c=!0),h.options.layoutRoot&&(r.relativeTarget=g,r.relativeTargetOrigin=p,r.relativeParent=h)}}}r.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(r.isLead()){const{onExitComplete:n}=r.options;n&&n()}r.options.transition=void 0}function Mse(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function Ise(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function Pse(r){r.clearSnapshot()}function I4(r){r.clearMeasurements()}function P4(r){r.isLayoutDirty=!1}function Rse(r){const{visualElement:e}=r.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),r.resetTransform()}function R4(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function kse(r){r.resolveTargetDelta()}function Fse(r){r.calcProjection()}function Ose(r){r.resetSkewAndRotation()}function Bse(r){r.removeLeadSnapshot()}function k4(r,e,t){r.translate=Jr(e.translate,0,t),r.scale=Jr(e.scale,1,t),r.origin=e.origin,r.originPoint=e.originPoint}function F4(r,e,t,n){r.min=Jr(e.min,t.min,n),r.max=Jr(e.max,t.max,n)}function Lse(r,e,t,n){F4(r.x,e.x,t.x,n),F4(r.y,e.y,t.y,n)}function $se(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const Vse={duration:.45,ease:[.4,0,.1,1]},O4=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),B4=O4("applewebkit/")&&!O4("chrome/")?Math.round:ho;function L4(r){r.min=B4(r.min),r.max=B4(r.max)}function Use(r){L4(r.x),L4(r.y)}function Ij(r,e,t){return r==="position"||r==="preserve-aspect"&&!Wie(D4(e),D4(t),.2)}function zse(r){var e;return r!==r.root&&((e=r.scroll)==null?void 0:e.wasRoot)}const jse=Mj({attachResizeListener:(r,e)=>y1(r,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),AD={current:void 0},Pj=Mj({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!AD.current){const r=new jse({});r.mount(window),r.setOptions({layoutScroll:!0}),AD.current=r}return AD.current},resetTransform:(r,e)=>{r.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),qse={pan:{Feature:lse},drag:{Feature:ose,ProjectionNode:Pj,MeasureLayout:Ej}};function $4(r,e,t){const{props:n}=r;r.animationState&&n.whileHover&&r.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=n[i];s&&Gr.postRender(()=>s(e,Lx(e)))}class Hse extends Od{mount(){const{current:e}=this.node;e&&(this.unmount=vne(e,(t,n)=>($4(this.node,n,"Start"),i=>$4(this.node,i,"End"))))}unmount(){}}class Gse extends Od{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Fx(y1(this.node.current,"focus",()=>this.onFocus()),y1(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function V4(r,e,t){const{props:n}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&n.whileTap&&r.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=n[i];s&&Gr.postRender(()=>s(e,Lx(e)))}class Wse extends Od{mount(){const{current:e}=this.node;e&&(this.unmount=xne(e,(t,n)=>(V4(this.node,n,"Start"),(i,{success:s})=>V4(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const AM=new WeakMap,ED=new WeakMap,Kse=r=>{const e=AM.get(r.target);e&&e(r)},Xse=r=>{r.forEach(Kse)};function Yse({root:r,...e}){const t=r||document;ED.has(t)||ED.set(t,{});const n=ED.get(t),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(Xse,{root:r,...e})),n[i]}function Qse(r,e,t){const n=Yse(e);return AM.set(r,t),n.observe(r),()=>{AM.delete(r),n.unobserve(r)}}const Jse={some:0,all:1};class Zse extends Od{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:Jse[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:h}=this.node.getProps(),d=u?c:h;d&&d(l)};return Qse(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(eae(e,t))&&this.startObserver()}unmount(){}}function eae({viewport:r={}},{viewport:e={}}={}){return t=>r[t]!==e[t]}const tae={inView:{Feature:Zse},tap:{Feature:Wse},focus:{Feature:Gse},hover:{Feature:Hse}},rae={layout:{ProjectionNode:Pj,MeasureLayout:Ej}},nae={...Uie,...tae,...qse,...rae},Qe=nie(nae,gie),Tk=[{slug:"general-relativity",title:"   ",category:"relativity",description:"Einstein Field Equation, Schwarzschild/Kerr ,  ",content:{overview:"    . Schwarzschild Kerr        (vacuum solution).",keyPoints:["Einstein Field Equation: G = 8GT","Schwarzschild :  ,   ","Kerr :  , ergosphere "," :  / ","Shapiro delay:    ",": f = f0(1-2GM/rc)"],keyFormulas:[{tex:"G_{\\mu\\nu} = R_{\\mu\\nu} - \\frac{1}{2}g_{\\mu\\nu}R = \\frac{8\\pi G}{c^4}T_{\\mu\\nu}",desc:"Einstein Field Equation"},{tex:"ds^2 = -\\left(1 - \\frac{2GM}{c^2r}\\right)c^2dt^2 + \\left(1 - \\frac{2GM}{c^2r}\\right)^{-1}dr^2 + r^2(d\\theta^2 + \\sin^2\\theta\\,d\\phi^2)",desc:"Schwarzschild "},{tex:"r_s = \\frac{2GM}{c^2}",desc:"Schwarzschild "},{tex:"\\frac{d^2x^\\lambda}{d\\tau^2} + \\Gamma^\\lambda_{\\mu\\nu}\\frac{dx^\\mu}{d\\tau}\\frac{dx^\\nu}{d\\tau} = 0",desc:" "}],observations:'   (42.98"/century),  ,  ',relatedPapers:["The Mathematical Theory of Black Holes (Chandrasekhar, 1983)","General Relativity (Carroll, 2004)","Gravitational Waves from Coalescing Compact Binaries (Abbott et al. LIGO, 2016)"]}},{slug:"stellar-structure",title:"   ",category:"stars",description:"  , Lane-Emden ,   ",content:{overview:"         .         .",keyPoints:[" : dP/dr = -GM/r","  : radiative flux  opacity ","Lane-Emden  :   "," : PP chain (), CNO cycle ()"," : convection instability criterion (adiabatic gradient vs. radiative gradient)",": photosphere  "],keyFormulas:[{tex:"\\frac{dP}{dr} = -\\rho \\frac{GM(<r)}{r^2}",desc:"  "},{tex:"F_\\mathrm{rad} = -\\frac{c}{3\\kappa\\rho}\\frac{dT^4}{dr}",desc:" "},{tex:"\\frac{d^2u}{d\\xi^2} + \\frac{2}{\\xi}\\frac{du}{d\\xi} + u^n = 0",desc:"Lane-Emden "},{tex:"PP\\,\\mathrm{chain}: {}^1H + {}^1H \\to {}^2H + e^+ + \\nu",desc:"-  "}],observations:"  L=3.82810W,  R=6.9610m,   T_c~1.5710K,  _c~150 g/cm",relatedPapers:["Stellar Interiors: Physical Principles, Structure and Evolution (Hansen, Kawaler & Trimble, 2004)","The Theory of Stellar Structure and Evolution (Kippenhahn, Weigert & Weiss, 2012)"]}},{slug:"black-hole-astrophysics",title:" : Kerr  ",category:"relativity",description:"Kerr ergosphere, ISCO , Hawking ,  ",content:{overview:" (Kerr )   .  (Hawking )   ,       .",keyPoints:["Kerr :   a = J/M ","Ergosphere:   g_tt=0 ","ISCO (Innermost Stable Circular Orbit): a=0  r_ISCO = 6GM/c","Hawking :  T_H = c/(8kGM)","Penrose process:    ","Accretion disk: viscosity   "],keyFormulas:[{tex:"ds^2 = -\\frac{\\Delta}{\\rho^2}(c\\,dt - a\\sin^2\\theta\\,d\\phi)^2 + \\frac{\\rho^2}{\\Delta}dr^2 + \\rho^2 d\\theta^2 + \\frac{\\sin^2\\theta}{\\rho^2}(a c\\,dt - (r^2+a^2)d\\phi)^2",desc:"Kerr  (Boyer-Lindquist )"},{tex:"r_{\\mathrm{ISCO}} = \\frac{GM}{c^2}\\left(3 + Z_2 - \\sqrt{(3-Z_1)(3+Z_1+2Z_2)}\\right)",desc:"ISCO  (Kerr )"},{tex:"T_H = \\frac{\\hbar c^3}{8\\pi k_B G M}",desc:"Hawking "},{tex:"\\eta = 1 - \\sqrt{1 - \\frac{2GM}{c^2 r_{\\mathrm{ISCO}}}}",desc:" "}],observations:"M87   M=(6.50.7)10M (EHT 2019), Sagittarius A*  M=(4.2970.013)10M",relatedPapers:["Black Hole Accretion in Supermassive and Stellar Mass Regimes (Done et al. 2007)","The Event Horizon Telescope Collaboration (2019, ApJ Letters)","Information and the Nature of Reality (Wheeler & Ford, 1998)"]}},{slug:"galaxy-dynamics",title:"  ",category:"galaxies",description:"Jeans ,   , CDM,  ",content:{overview:"  , ,    . Jeans        .",keyPoints:["Jeans :    "," :   NFW  ","Virial theorem: 2K + U = 0 ( )"," :   ~85%","CDM : M0.3, 0.7"," : N-body + hydrodynamics"],keyFormulas:[{tex:"\\frac{d\\sigma_r^2}{dr} + 2\\frac{\\beta}{r}\\sigma_r^2 = -\\frac{GM(<r)}{r^2}",desc:"Jeans "},{tex:"v_{\\mathrm{c}}(r) = \\sqrt{\\frac{GM(<r)}{r}}",desc:"  "},{tex:"\\rho_{\\mathrm{NFW}}(r) = \\frac{\\rho_s}{(r/r_s)(1+r/r_s)^2}",desc:"Navarro-Frenk-White  "},{tex:"2\\langle K \\rangle + \\langle U \\rangle = 0",desc:" Virial "}],observations:"    (220 km/s at 8 kpc),    ( )",relatedPapers:["Galactic Dynamics (Binney & Tremaine, 2008)","The Concentration of Dark Matter Halos (Navarro, Frenk & White, 1997)","Simulations of the formation, evolution and clustering of galaxies and quasars (Springel et al. 2005)"]}},{slug:"cosmology",title:"  ",category:"cosmology",description:"Friedmann , CMB  ,  ",content:{overview:"      . Friedmann     , CMB    CDM  .",keyPoints:["Friedmann : a(t)  "," : t = 13.7870.020 Gyr (Planck 2018)"," : _   120 ","CMB :   T/T ~ 10","  : C_     "," : w(z) = p/(c)"],keyFormulas:[{tex:"\\left(\\frac{\\dot{a}}{a}\\right)^2 + \\frac{k}{a^2} = \\frac{8\\pi G}{3}\\rho",desc:"1 Friedmann "},{tex:"\\frac{\\ddot{a}}{a} = -\\frac{4\\pi G}{3}(\\rho + 3p) + \\frac{\\Lambda}{3}",desc:"2 Friedmann "},{tex:"T(z) = T_0 (1+z)",desc:"  "},{tex:"w = \\frac{p}{\\rho c^2}",desc:"  "}],observations:"CMB: b=0.049, cdm=0.264, =0.684, H0=67.4 km/s/Mpc (Planck 2018)",relatedPapers:["Planck 2018 results (Planck Collaboration, 2018)","A High-Resolution Cosmic Microwave Background Map (WMAP, 2003-2013)","Observational Evidence from Supernovae for an Accelerating Universe (Perlmutter et al. 1999)"]}},{slug:"observational-astronomy",title:" : , , ",category:"observations",description:"Equivalent Width, Voigt profile, CCD photometry,  ",content:{overview:"    .   (Equivalent Width, Doppler shift), CCD ,      .",keyPoints:["Equivalent Width (EW):    ","Voigt profile:  +   ","CCD : -(S/N), (dynamic range)",'X-ray : Chandra  0.5",   100 eV',"IR  (JWST): NIRCam  0.6-5m,  /~1600"," (VLBI): baseline ~10000 km,  ~as"],keyFormulas:[{tex:"EW = \\int_{\\lambda_1}^{\\lambda_2} \\left(1 - \\frac{F_\\lambda}{F_c}\\right)d\\lambda",desc:""},{tex:"f(\\nu) = \\frac{I(\\nu_0)}{\\sqrt{\\pi}}\\int_{-\\infty}^{\\infty}\\frac{e^{-t^2}}{1+(a(\\nu-\\nu_0+t\\Delta\\nu_D)/\\Delta\\nu_D)^2}dt",desc:"Voigt "},{tex:"(S/N)_{\\mathrm{CCD}} = \\frac{Ne}{\\sqrt{Ne + n_r^2 + n_d^2}}",desc:"CCD -"},{tex:"\\theta_{\\mathrm{res}} \\approx 1.22\\frac{\\lambda}{D}",desc:"  (Rayleigh criterion)"}],observations:"JWST NIRCam z~11   (_obs~2m), Chandra    , EHT   (48as)",relatedPapers:["Observational Astrophysics (Birney, Gonzalez & Oesper, 2006)","Modern Observational Astronomy: the Principles, Science and Techniques (Filippenko, 2006)"]}},{slug:"mass-luminosity",title:"- ",category:"stars",description:"    ",content:{overview:"       .       .",keyPoints:[": L  M^3.5 ()","     (2.5~4.5)","     "],keyFormulas:[{tex:"L \\approx M^{3.5}",desc:"-  ()"},{tex:"t_{\\mathrm{lifetime}} \\approx \\frac{M}{L} \\propto M^{-2.5}",desc:"  "}],observations:"  1   1, 10   ~3000",relatedPapers:["Mass-Luminosity Relations (1970)","Stellar Evolution Theory (1995)"]}},{slug:"dark-matter-rotation",title:"  ",category:"galaxies",description:"      ",content:{overview:"            ,    .",keyPoints:["   :    "," :  v  1/r ( )",": v   (100~300 km/s)"," :   ~85%"],keyFormulas:[{tex:"v(r) = \\sqrt{\\frac{GM(<r)}{r}}",desc:"   "},{tex:"M(<r) \\propto r",desc:" r  "}],observations:"M31 ,     ",relatedPapers:["The Rotation of Spiral Nebulae (1975)","Dark Matter and Galaxy Formation (2010)"]}},{slug:"cosmic-microwave-background",title:"  (CMB)",category:"cosmology",description:"    , ,  ",content:{overview:"CMB   38       .      .",keyPoints:[": 1965 Penzias & Wilson",": 2.725 K ( )",":   T/T ~ 10",":   "],keyFormulas:[{tex:"T(z) = T_0 (1 + z)",desc:"  CMB "},{tex:"T_0 = 2.725 \\, \\mathrm{K}",desc:"CMB  "}],observations:"WMAP, Planck   m=0.315, =0.685, H0=67 km/s/Mpc ",relatedPapers:["A Measurement of the Fluctuations in the Cosmic Microwave Background (1992)","Planck 2018 results (2018)"]}},{slug:"gravitational-waves",title:"   ",category:"observations",description:"LIGO/Virgo ,  ,  ,   ",content:{overview:"     . 2015  (GW150914) ,   (BBH),  (BNS),  (NSBH)    . /          .",keyPoints:["LIGO/Virgo :    h ~ 10  "," :  (inspection)  (merger)  (ringdown) 3"," :  , , ,   Bayesian "," : r-process     ",": GW + GRB() + kilonova()  "," :   H0  ,   "],keyFormulas:[{tex:"h_+(t) = \\frac{2G}{c^4}\\frac{M_c^{5/3}}{D_L}\\left(\\pi f(t)\\right)^{2/3}\\cos(\\Phi(t))",desc:"  +  ( )"},{tex:"\\frac{df}{dt} = \\frac{96}{5}\\pi^{8/3}\\frac{G^{5/3}}{c^5}M_c^{5/3}f^{11/3}",desc:"   (chirp)"},{tex:"M_c = \\frac{(m_1 m_2)^{3/5}}{(m_1 + m_2)^{1/5}}",desc:" (chirp mass)"},{tex:"T_{\\mathrm{merge}} = \\frac{5}{256}\\frac{c^5}{G^3}\\frac{1}{M_c^{5/3}\\pi^{8/3}f_0^{8/3}}",desc:"   (f)"},{tex:"Q = \\frac{M \\omega}{c} \\quad (\\text{ISCO})\\, Q_{\\text{Kerr}} \\sim \\frac{c^3}{G M} \\left(1 + \\sqrt{1-a^*/a}\\right)",desc:"  "}],observations:"GW150914:  36+29 M, GW170817:  1.36-1.60 M, GW190814: -  (  9:1)",relatedPapers:["Observation of Gravitational Waves from a Binary Black Hole Merger (Abbott et al., PRL 2016)","GW170817: Observation of Gravitational Waves from a Binary Neutron Star Inspiral (Abbott et al., PRL 2017)","Tests of General Relativity with GW150914 (Abbott et al., PRL 2016)"]}},{slug:"high-energy-astrophysics",title:"  X ",category:"observations",description:"X-ray binary, AGN  , Compton , Synchrotron ",content:{overview:"  X(0.1~100 keV), (>100 keV)   . X , (AGN),      .      Compton  Synchrotron     .",keyPoints:["X-ray binary: / +   ( )","Low-mass X-ray binary (LMXB):   < 1 M,  X ","High-mass X-ray binary (HMXB):   > 10 M,  ","Compton :   +    ,  ","Inverse Compton:   +     X/","Synchrotron :     ","AGN  :   Seyfert 1/2  (  )"],keyFormulas:[{tex:"E_\\gamma \\approx 4\\gamma k_B T_e",desc:"Compton   (Thomson regime)"},{tex:"\\nu_{\\mathrm{sync}} = \\frac{e B}{2\\pi m_e c} \\gamma^2",desc:"Synchrotron  "},{tex:"L_\\mathrm{Edd} = \\frac{4\\pi G M m_p c}{\\sigma_T} \\approx 1.3 \\times 10^{38} \\left(\\frac{M}{M_\\odot}\\right) \\, \\mathrm{erg~s^{-1}}",desc:"Eddington  "},{tex:"\\tau_T = n_e \\sigma_T L",desc:"Thomson "}],observations:"Cygnus X-1 ( HMXB), Sco X-1 ( LMXB), M87  AGN ( ), NGC 4151 ()",relatedPapers:["Physics of Compact Objects (Wheeler et al., 1996)","X-ray Binaries (Lewin & van der Klis, 2006)","AGN Unification Model (Antonucci, 1993)"]}},{slug:"cosmic-ray-physics",title:"   ",category:"observations",description:"Fermi ,  ,   , - ",content:{overview:"    ( ).  ,  ,    . Fermi          .   ,  ,     .",keyPoints:["Fermi 1 :  / ,   (E/E  %)","Fermi 2 :  (magnetic mirror)    ","  : SNe Ia  SNe II  "," : E^(-2.7) power law (  10~10 eV)"," : CR      (  )"," : ~90% , ~10% , ~1%  "," (UHECR): E > 10 eV,  (GZK cutoff)"],keyFormulas:[{tex:"\\frac{dE}{dt} \\propto E",desc:"Fermi 1  (  )"},{tex:"N(E) \\propto E^{-\\alpha}",desc:"  power law (  2.7)"},{tex:"E_c = \\frac{3eB\\,r_L^2}{2\\Delta t}",desc:"Fermi    (  r_L,   t)"},{tex:"E_{\\mathrm{GZK}} \\approx 5 \\times 10^{19} \\, \\mathrm{eV}",desc:"GZK cutoff  (CMB )"}],observations:"  :    , IceCube   ( CR  )",relatedPapers:["The Origin of Cosmic Rays (Jokipii, 1987)","Cosmic Ray Propagation and Solar Modulation (Potgieter, 2013)","Supernova Remnants as Cosmic Ray Accelerators (Berezhko & Vlk, 2007)"]}},{slug:"adaptive-optics-interferometry",title:"  ",category:"observations",description:"  , VLBI,  ,  ",content:{overview:"    . (AO)          . VLBI( )         .",keyPoints:[" seeing:      (typical ~0.5~2 arcsec)"," :  = /(2D), D  ",": (wavefront sensor) +  (deformable mirror)  ","Strehl ratio: AO  . Strehl  1 (), 0 (  )","VLBI (Very Long Baseline Interferometry):   ,   "," : Keck I&II, VLTI (  ~ 1 )"," (phase closure):     "],keyFormulas:[{tex:"\\theta_{\\mathrm{diff}} = 1.22 \\frac{\\lambda}{D}",desc:"Rayleigh  "},{tex:"B_{\\mathrm{eff}} = \\lambda D / d",desc:"   ( , D baseline, d  )"},{tex:"S = \\exp\\left(-\\frac{\\pi^2}{2\\ln 2} \\sigma_\\phi^2\\right)",desc:"Strehl ratio (_: RMS  )"}],observations:"Event Horizon Telescope (EHT): 10  VLBI M87, Sgr A*   (2019, 2022)",relatedPapers:["Adaptive Optics for Astronomy (Roddier, 1999)","VLBI Astrometry (Porcas et al., 2003)","First M87 Event Horizon Telescope Results (EHT Collaboration, 2019)"]}},{slug:"modified-gravity",title:" : MOND TeVeS",category:"relativity",description:"  ,   , CDM ",content:{overview:"           . MOND (  )      , TeVeS  .",keyPoints:["MOND : a < a  F = m(a/a)  (a ~ 1.210 m/s)","  :   MOND   ( )","Deep MOND (Deep Modified Newtonian Dynamics): a << a F  (GMm/r)","TeVeS (Tensor-Vector-Scalar):  MOND,    ","Bullet Cluster :     , MOND  ","  (UV completion): MOND   "],keyFormulas:[{tex:"F = m \\frac{a^2}{a_0}\\,\\, (a << a_0)",desc:"Deep MOND "},{tex:"a_0 = \\frac{cH_0}{6}\\approx 1.2 \\times 10^{-10}\\,\\mathrm{m/s^2}",desc:"MOND "},{tex:"v_\\mathrm{rot} \\approx \\sqrt[4]{GMa_0}\\,\\, (a << a_0)",desc:"MOND   ( )"}],observations:"  ,   , CMB , BBN  ",relatedPapers:["MOND and the Dark Matter Problem (Milgrom, 2015)","Relativistic MOND via TeVeS (Bekenstein, 2004)","The Bullet Cluster Evidence against Dark Matter (Clowe et al., 2006)"]}},{slug:"dark-matter-detection",title:" : WIMPs, Axions,  ",category:"galaxies",description:" ,  ,  ,  ",content:{overview:"    85%   . WIMPs (   ) axions  ,     .",keyPoints:["WIMPs (Weakly Interacting Massive Particles):  10~1000 GeV/c,   ","Axions:    (eV ), QCD  "," : XENON, LUX, SuperCDMS       "," :      ,  "," : LHC      "," :    "],keyFormulas:[{tex:"\\sigma_{\\mathrm{WIMP-nucleon}} \\sim 10^{-45}\\,\\mathrm{cm}^2\\,\\, (\\mathrm{spin\\text{-}independent})",desc:"WIMP-  "},{tex:"m_a \\sim 10^{-6}\\,\\mathrm{eV} \\sim 10^{-2}\\,\\mathrm{eV}",desc:"  "},{tex:"F_a = \\frac{m_e v^2}{g_{a\\gamma\\gamma} m_a}",desc:"  "}],observations:"Planck 2018: _cdm h = 0.1200.001, LHC Run 2: WIMP   , AMS:   ",relatedPapers:["Dark Matter Candidates: From Theory to Direct Detection (Hooper & Kolb, 2010)","Axion Dark Matter Searches (Irastorza & Redondo, 2018)","XENON1T Results on Light Dark Matter Particles (XENON Collaboration, 2019)"]}},{slug:"exoplanet-systems",title:": , ,  ",category:"stars",description:"  ,  ,   , TRAPPIST-1 ",content:{overview:"5500   (2024).   (protoplanetary disk)    , /     .",keyPoints:[" :          (  )"," :        (m sin i)"," (transit photometry):        ( 0.01%)"," :      (HO, CO, CH)","  :         ","TESS/JWST:   ,    "],keyFormulas:[{tex:"\\frac{\\Delta F}{F} = \\frac{R_p^2}{R_*^2}",desc:"   (R_p: , R_*:  )"},{tex:"a_\\mathrm{HZ} = \\sqrt{\\frac{L_*}{L_\\odot}}",desc:"   "},{tex:"K = \\frac{(m \\sin i)}{\\sqrt{1-e^2}} \\sqrt{\\frac{GM_*}{a^3}}",desc:"RV  ( )"}],observations:"Kepler  2662, TESS  600+ (), TRAPPIST-1: 7   (3   )",relatedPapers:["Exoplanet Atmospheres (Seager, 2010)","Planet Formation in Protoplanetary Disks (Nakano et al., 2015)","JWST Transiting Exoplanet Community Early Release Science Program (Louie et al., 2023)"]}},{slug:"supernova-cosmology",title:" :  Ia  ",category:"cosmology",description:"  Ia ,   ,  , w ",content:{overview:'1998,   Type Ia  "  "   (Nobel 2011). SNe Ia      .',keyPoints:["Type Ia SN:       ",":    M_V  -19.3 (0.3)","Phillips :       (  )","Dust extinction:     (E(B-V) )","Hubble diagram:   vs  _ _m  "," :  ()  , w = -1 "],keyFormulas:[{tex:"m = M + 5\\log_{10}(d_L) + 25",desc:"  (m:  , M:  )"},{tex:"d_L = \\frac{1+z}{H_0} \\int_0^z \\frac{dz^\\prime}{E(z^\\prime)}",desc:"  (CDM)"},{tex:"M_V^\\mathrm{corr} = M_V - 2.5\\alpha(s-1)",desc:"Phillips  (s:  )"}],observations:"Riess et al. 1998 42 SNe Ia, Perlmutter et al. 1999 52 SNe Ia,  1000+  , H = 73.041.04 km/s/Mpc (SH0ES 2022)",relatedPapers:["Observational Evidence from Supernovae for an Accelerating Universe (Riess et al., 1998)","Measurements of  and  from 42 High-Redshift Supernovae (Perlmutter et al., 1999)","Local Void is Consistent with CDM (Kenworthy et al., 2021)"]}},{slug:"agn-unified-model",title:"   : , ,  ",category:"galaxies",description:" ,  , Fanaroff-Riley , Eddington ",content:{overview:"AGN (Active Galactic Nuclei)  (SMBH)  .  ( ,  )    ,   .",keyPoints:["SMBH:    10~10 M",":   (inner disk) +   (outer disk)","(Torus):    ,    >> 1","(Jet):   ,    ~ 0.99","Fanaroff-Riley : FR I (,  ) vs FR II (,  )","Eddington : L_Edd = 4GMm_p c/_T  1.410(M/M) W"," (BLR/NLR):    "],keyFormulas:[{tex:"L_\\mathrm{Edd} = \\frac{4\\pi GMm_p c}{\\sigma_T} = 1.4 \\times 10^{31}\\left(\\frac{M}{M_\\odot}\\right)\\,\\mathrm{W}",desc:"Eddington "},{tex:"\\lambda_\\mathrm{Edd} = \\frac{L_\\mathrm{bol}}{L_\\mathrm{Edd}}",desc:"Eddington "},{tex:"\\dot{M} = \\frac{L}{\\eta c^2}",desc:" (: radiative efficiency)"}],observations:"M87 SMBH M=(6.50.7)10M, Centaurus A   >4 Mpc, NGC 1068   (ALMA)",relatedPapers:["AGN Unification: The Quest Continues (Krolik, 2007)","Accretion in Supermassive Black Holes (Narayan & Quataert, 2005)","First M87 Event Horizon Telescope Results (EHT Collaboration, 2019)"]}}],U4=[{term:"Absolute Magnitude ()",definition:"  10 pc    .    ."},{term:"Accretion Disk ( )",definition:",        .  40%   ."},{term:"Adiabatic Gradient ( )",definition:"        . dT/dP = T/(P)."},{term:"Blackbody Radiation ()",definition:"   ,      . Planck  ."},{term:"Blue Shift ()",definition:"      .  < 0."},{term:"CCD Photometry (CCD )",definition:"Charge-Coupled Device    . -  100  ."},{term:"CMB Power Spectrum (CMB )",definition:"CMB      C_ .  ,    ."},{term:"CNO Cycle (CNO )",definition:"   : C  N  C  N  O  N  C + He."},{term:"Doppler Shift ( )",definition:"    . v << c  / = v/c."},{term:"Dynamical Mass ( )",definition:"Jeans     .      ."},{term:"EOS Parameter ( )",definition:" w = p/(c). CDM w = -1.  ."},{term:"Equivalent Width (, EW)",definition:"     .  column density  ."},{term:"Ergosphere ()",definition:"Kerr   g_tt > 0 .       ."},{term:"Friedmann Equation ( )",definition:"    . (/a) + k/a = 8G/3."},{term:"Geodesic ()",definition:'    . Riemannian  "" .'},{term:"Gravitational Redshift ()",definition:"     . / = -GM/cr."},{term:"Gravitational Waves ()",definition:"   .  h ~ 10 (LIGO).  ,   ."},{term:"Gravitational Wave Strain ( )",definition:"LIGO     : h = L/L ~ 10.   ."},{term:"Gravitational Wave Detector ( )",definition:"LIGO, Virgo, KAGRA    .      ."},{term:"MOND (Modified Newtonian Dynamics)",definition:"      . a < a ~ 10 m/s   ."},{term:"TeVeS (Tensor-Vector-Scalar Gravity)",definition:"MOND  .   = ."},{term:"Bullet Cluster ( )",definition:"    . X-        ."},{term:"WIMPs (Weakly Interacting Massive Particles)",definition:" .  10~1000 GeV/c,     ."},{term:"Axion ()",definition:"     (eV~meV ). QCD  Peccei-Quinn  ."},{term:"Exoplanet ()",definition:"    . 5500+  (2024).  ,   ."},{term:"Habitable Zone (  )",definition:"          .    ."},{term:"Type Ia Supernova (Ia )",definition:"      .      ."},{term:"Phillips Relation (Phillips )",definition:"Type Ia SN     .      ."},{term:"AGN (Active Galactic Nuclei)",definition:" .       ."},{term:"SMBH (Supermassive Black Hole)",definition:"   .  10~10 M.     ."},{term:"AGN Torus (AGN )",definition:"AGN     .    >> 1.     ."},{term:"Eddington Luminosity (Eddington )",definition:"    . L_Edd = 4GMm_p c/_T  1.410(M/M) W."},{term:"Fanaroff-Riley Classification",definition:"Radio galaxy  . FR I:    . FR II:    ."},{term:"Hawking Radiation ( )",definition:"   .  T_H = c/(8kGM)."},{term:"Hubble Constant ( )",definition:"   . H  67-73 km/s/Mpc (   )."},{term:"Hubble Distance ( )",definition:"     . d_H = c/H  4400 Mpc."},{term:"ISCO (  )",definition:"Innermost Stable Circular Orbit.     . r_ISCO = 6GM/c (Schwarzschild)."},{term:"Jeans Equation ( )",definition:"   . d_r/dr + 2_r/r = -GM/r."},{term:"Jeans Mass ( )",definition:"    . M_J = (kT/G)^(3/2)(5T/G)^(1/2)."},{term:"Kerr Metric ( )",definition:"   .   a = J/Mc .    ."},{term:"Lane-Emden Equation (- )",definition:"     . du/d + 2/du/d + u^n = 0."},{term:"Luminosity Distance ( )",definition:"      . d_L = (1+z)d_c (CDM)."},{term:"LIGO (Laser Interferometer Gravitational-Wave Observatory)",definition:"  . Hanford & Livingston   .   4 km,   125 W."},{term:"Mass-Luminosity Relation (- )",definition:"L  M^,    3.5.    ."},{term:"MHD Simulations ( )",definition:"     .  , ,   ."},{term:"Matched Filtering ( )",definition:"   .   (cross-correlation) S/N ."},{term:"Merger ()",definition:"   . /     ."},{term:"NFW Profile (NFW  )",definition:"Navarro-Frenk-White   :   1/(r/r_s(1+r/r_s))."},{term:"Neutron Star ()",definition:"     .  ~10 km,  ~10^17 kg/cm,  ."},{term:"Opacity ()",definition:"    .  = /().     ."},{term:"Photometric Redshift ( )",definition:"     .     ."},{term:"Planck Function ( )",definition:"   . B_ = 2h/c1/(e^(h/kT)-1)."},{term:"QFT in Curved Spacetime (  )",definition:" . Hawking   ."},{term:"Radiative Transfer ( )",definition:"    . F_rad = -c/(3)dT/dr."},{term:"Redshift ()",definition:"    . z = (_obs - _emit)/_emit."},{term:"Rotation Curve ()",definition:"   vs  .     ."},{term:"Schwarzschild Metric ( )",definition:"   .   . r_s = 2GM/c ."},{term:"Shapiro Delay ( )",definition:"   . t = (2GM/c)ln(4rr/b)."},{term:"Spectral Classification ( )",definition:"   : O B A F G K M.   100 K ."},{term:"Starburst Galaxy ( )",definition:"     . SFR > 1 M/yr.    ."},{term:"Stefan-Boltzmann Law (- )",definition:"  : L = 4RT,  = 5.6710 W m K."},{term:"Tully-Fisher Relation (- )",definition:"     .    ."},{term:"Tidal Deformability ( )",definition:"    .  .    ."},{term:"Time Delay ( )",definition:"     .  (sky localization) ."},{term:"Virial Theorem ( )",definition:"  : 2K + U = 0 ( )."},{term:"Virgo (  )",definition:" Cascina  .   3 km,   200 W. LIGO 3  ."},{term:"Voigt Profile ( )",definition:" ( + )   .    ."},{term:"White Dwarf ()",definition:"   .    .   (Hubble time > age)."},{term:"X-ray Spectroscopy (X )",definition:"Chandra, XMM-Newton     .  K (6.4 keV)    ."},{term:"Zero-Age Main Sequence (ZAMS)",definition:"      . Hertzsprung-Russell  ."}],iae=[{id:1,title:"Observation of Gravitational Waves from a Binary Black Hole Merger",authors:"Abbott, B. P. et al. (LIGO/Virgo Collaboration)",year:2016,arxivId:"1602.03837",journal:"Physical Review Letters 116, 061102",doi:"10.1103/PhysRevLett.116.061102",abstract:"On 14 September 2015 at 09:50:45 UTC the two detectors of the Laser Interferometer Gravitational-Wave Observatory observed a transient gravitational-wave signal. The signal sweeps upward in frequency from 35 to 250 Hz, with peak gravitational-wave strain of 1.0  10.",summary:{background:"  100     .        .",methodology:"Matched filtering :     . S/N > 24 . Bayesian parameter estimation , , ,  .",theory:"   : dE/dt = -32/5G/(c)(mm)(m+m)/(a).    Kerr  .",data_analysis:"Advanced LIGO (2 ): N = 510/Hz @ 100Hz. 4 km arm interferometer, Fabry-Prot cavity resonator .  :   , /  subtraction.",results:"  () q = 1.20.1,   M = 65 M,    M_f = 62 M,  E = 3.0 Mc (   ).",limiting_factors:" shot noise  thermal noise ,   0.2  parameter inference  ."}},{id:2,title:"First M87 Event Horizon Telescope Results. I. The Shadow of the Supermassive Black Hole",authors:"Event Horizon Telescope Collaboration",year:2019,arxivId:"1906.11238",journal:"The Astrophysical Journal Letters 875, L1",doi:"10.3847/2041-8213/ab0ec7",abstract:"We present the first Event Horizon Telescope (EHT) observations at 1.3 mm wavelength of the supermassive black hole candidate in the galactic center of the radio galaxy M87. We have resolved the central compact radio source on angular scales of ~5 microarcseconds.",summary:{background:"         . VLBI    10,000 km .",methodology:"Very Long Baseline Interferometry (VLBI): 8    .    . Phase calibration, self-calibration  . Imaging: CLEAN ,   .",theory:"General relativistic magnetohydrodynamics (GRMHD)    . Kerr     (null geodesics).   : r_shadow  5.2 GM/c (M87  r_shadow  42 as).",data_analysis:"Visibility :   . u-v plane   .     . Uncertainty quantification:    .",results:"  M = (6.50.7)10 M.     d = 42.03.0 as.   10%  .    .",limiting_factors:"  ,    ,  (intraday variability) ,    ."}},{id:3,title:"A Universe of Black Holes and Bulges Revealed by JWST",authors:"Labb, I. et al.",year:2023,arxivId:"2306.02465",journal:"Nature ( )",doi:"10.1038/nature25755",abstract:"The James Webb Space Telescope (JWST) has revealed a population of surprisingly massive galaxies at z > 10, indicating accelerated galaxy assembly in the early universe.",summary:{background:"JWST     (z > 6)    .        .",methodology:"NIRCam : 0.6-5 m ,   SED fitting.  : NIRSpec   (R ~ 1000). (PSF) ,  .",theory:"SED modeling: Stellar population synthesis (FSPS, BAGPIPES). Dust attenuation curve . Photometric redshift vs spectroscopic redshift . Virial mass : M_vir = r/G ( ).",data_analysis:": P(z, params | data)  L(data | z, params)  Prior(z, params). Bayesian inference , , SFR .     (confidence interval) .",results:" z = 13.2  JADES-GS-z13-0:  M* = (3.21.9)10 M.  ~500 Myr.    330 Myr   (   a = 0.07).",limiting_factors:"  ,      degeneracy,  -    ,   ."}},{id:4,title:"The Weak Gravitational Lensing Signal and the Clustering of GAMA Galaxies",authors:"Leauthaud, A. et al.",year:2017,arxivId:"1511.06428",journal:"Monthly Notices of the Royal Astronomical Society",doi:"10.1093/mnras/stw2897",abstract:"We present joint measurements of the weak gravitational lensing signal around GAMA galaxies and their clustering. These measurements allow direct constraints on galaxy assembly bias and the dark matter halo profiles.",summary:{background:"          .     .",methodology:"Weak lensing shear : background     (typical  ~ 0.01).  :  = _cr  _tan. 2-point correlation   clustering .",theory:"NFW : (r) = _s / [(r/r_s)(1+r/r_s)].  c  r    M = (4/3)_crit200r. Halo mass function  .",data_analysis:"Forward modeling:   shear     .  galaxy-halo  (P(halo mass | galaxy properties)). Likelihood: L = _i P(data_i | model, params).",results:"  M* = 10 M     M_DM ~ 10 M.   c = 5.01.5.      .",limiting_factors:"    S/N,    (shape noise), systematic lensing , photometric redshift ."}},{id:5,title:"GW170817: Observation of Gravitational Waves from a Binary Neutron Star Inspiral",authors:"Abbott, B. P. et al. (LIGO/Virgo Collaboration)",year:2017,arxivId:"1710.05832",journal:"Physical Review Letters 119, 161101",doi:"10.1103/PhysRevLett.119.161101",abstract:"On August 17, 2017 at 12:41:04 UTC the Advanced LIGO and Advanced Virgo gravitational-wave detectors made their first observation of a binary neutron star inspiral. A loud gravitational-wave signal was detected with a duration of approximately 100 seconds.",summary:{background:"   r-process (  )  .  +  (kilonova)     .",methodology:"Bayesian parameter estimation: 9  ~ , , ,  . Matched filtering  . 3 (LIGO Hanford, LIGO Livingston, Virgo)  source localization (sky position ).",theory:"  :   M_max . Tidal deformability   (compressibility) .    5 (  ).",data_analysis:"  ~100 sec     . Nested sampling    (marginalized probability) . Model comparison: BNS vs NSBH vs BBH.",results:"  : m = 1.36-1.60 M, m = 1.17-1.36 M. Tidal deformability  = 560. r-process    0.03-0.05 M.  kilonova AT2017gfo   .",limiting_factors:"Virgo    source localization  (~600 sq deg),   (gap),  merger   ."}}],qp=[{id:1,name:"  ",description:", ,    "},{id:2,name:" ",description:" , , CCD, , VLBI  "},{id:3,name:" ",description:"LIGO, EHT, JWST     "},{id:4,name:" ",description:"N-body, MHD, hydrodynamics   "},{id:5,name:" ",description:", Bayesian ,   "},{id:6,name:" ",description:", ,  ,   "}],SD={textbooks:[{title:"Gravitational Waves Volume 1: Theory and Experiments",authors:"Maggiore, M.",year:2007},{title:"The Theory of Stellar Structure and Evolution",authors:"Kippenhahn, R., Weigert, A. & Weiss, A.",year:2012},{title:"Galactic Dynamics",authors:"Binney, J. & Tremaine, S.",year:2008},{title:"General Relativity",authors:"Carroll, S. M.",year:2004},{title:"Black Hole Thermodynamics",authors:"Wald, R. M.",year:2001},{title:"Observational Astrophysics",authors:"Birney, D. S., Gonzalez, G. & Oesper, D. A.",year:2006},{title:"The Early Universe",authors:"Kolb, E. W. & Turner, M. S.",year:1990},{title:"Modern Astrophysics",authors:"Carroll, B. W., Ostlie, D. A. & et al.",year:2007}],databases:[{name:"NASA ADS (Astrophysics Data System)",url:"https://ui.adsabs.harvard.edu/",desc:"    . 240+  ."},{name:"arXiv Astro-ph",url:"https://arxiv.org/archive/astro-ph",desc:" .  ~50  .   ."},{name:"Simbad",url:"https://simbad.u-strasbg.fr/",desc:", ,      , ."},{name:"NED (NASA Extragalactic Database)",url:"https://ned.ipac.caltech.edu/",desc:"   . , ,    ."},{name:"VizieR",url:"https://vizier.cds.unistra.fr/",desc:"700+      ."},{name:"Gravitational Wave Open Science Center (GWOSC)",url:"https://gwosc.readthedocs.io/",desc:"LIGO/Virgo  ,  , ."}],tools:[{name:"GIZMO",url:"https://www.tapir.caltech.edu/~phopkins/Site/GIZMO.html",desc:"N-body +  +  +    ."},{name:"ATHENA++",url:"https://www.athena-code.org/",desc:"  (GRMHD) .    ."},{name:"Planck 2018 Legacy Release",url:"https://irsa.ipac.caltech.edu/data/Planck/",desc:"CMB  ,  ,   ."},{name:"FSPS (Flexible Stellar Population Synthesis)",url:"https://github.com/bd-j/fsps",desc:"   . SED ."},{name:"dynesty (Dynamic Nested Sampling)",url:"https://github.com/joshspeagle/dynesty",desc:"   Bayesian .   ."},{name:"SIMBAD Sky Map",url:"http://simbad.u-strasbg.fr/simbad/sim-fcoo",desc:"      ."},{name:"JWST Exposure Time Calculator",url:"https://jwst.etc.stsci.edu/",desc:"JWST     S/N ."}]},sE={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},aE={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4}}};function sae(){const{isDark:r}=bo(),e=Tk.slice(0,3);return ue.useEffect(()=>{if(!localStorage.getItem("registeredUsers")){const n={[btoa("test@example.com")]:{email:"test@example.com",password:btoa("Test1234"),username:"",affiliation:" ",createdAt:new Date().toISOString()}};localStorage.setItem("registeredUsers",JSON.stringify(n)),console.log("   : test@example.com / Test1234")}},[]),P.jsxs("div",{className:"space-y-8 sm:space-y-12",children:[P.jsxs("section",{className:"py-8 sm:py-12 md:py-20 text-center",children:[P.jsx(Qe.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},children:P.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-bold mb-4 bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-400 dark:to-purple-500 bg-clip-text text-transparent",children:" "})}),P.jsx(Qe.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-base sm:text-lg md:text-xl text-gray-600 dark:text-gray-300 mb-8 px-4",children:" ,  ,   "}),P.jsxs(Qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"flex flex-col sm:flex-row gap-4 justify-center px-4",children:[P.jsx(Qe.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:P.jsx(Cr,{to:"/concepts",className:"block px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition font-medium shadow-lg hover:shadow-xl",children:" "})}),P.jsx(Qe.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:P.jsx(Cr,{to:"/papers",className:"block px-8 py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg hover:from-orange-700 hover:to-orange-800 transition font-medium shadow-lg hover:shadow-xl",children:" "})})]})]}),P.jsx(Qe.section,{variants:sE,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6",children:[{title:" ",description:", ,        ",icon:""},{title:" ",description:"    .    ",icon:""},{title:"",description:", ,    .    ",icon:""}].map((t,n)=>P.jsxs(Qe.div,{variants:aE,whileHover:{y:-8,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},className:`p-6 rounded-lg border transition ${r?"bg-gray-800 border-gray-700 hover:border-blue-500":"bg-white border-gray-200 hover:border-blue-500"}`,children:[P.jsx("div",{className:"text-4xl mb-3",children:t.icon}),P.jsx("h3",{className:`text-lg sm:text-xl font-bold mb-2 ${r?"text-white":"text-gray-900"}`,children:t.title}),P.jsx("p",{className:`text-sm sm:text-base ${r?"text-gray-300":"text-gray-600"}`,children:t.description})]},n))}),P.jsxs(Qe.section,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6},viewport:{once:!0,amount:.2},children:[P.jsx(Qe.h2,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-6 text-gray-900 dark:text-white",children:" "}),P.jsx(Qe.div,{variants:sE,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:e.map(t=>P.jsx(Qe.div,{variants:aE,whileHover:{y:-8},className:`p-6 rounded-lg border transition cursor-pointer ${r?"bg-gray-800 border-gray-700 hover:border-blue-500":"bg-white border-gray-200 hover:border-blue-500"}`,children:P.jsxs(Cr,{to:`/concepts/${t.slug}`,children:[P.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 mb-2",children:t.title}),P.jsx("p",{className:`text-sm sm:text-base ${r?"text-gray-300":"text-gray-600"}`,children:t.description})]})},t.slug))})]}),P.jsxs(Qe.section,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6},viewport:{once:!0,amount:.2},children:[P.jsx(Qe.h2,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-6 text-gray-900 dark:text-white",children:"  "}),P.jsx(Qe.div,{variants:sE,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},className:"space-y-4",children:iae.map(t=>P.jsxs(Qe.div,{variants:aE,whileHover:{x:8},className:`p-4 sm:p-6 rounded-lg border transition ${r?"bg-gray-800 border-gray-700 hover:border-orange-500":"bg-white border-gray-200 hover:border-orange-500"}`,children:[P.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2",children:[P.jsxs("div",{className:"flex-1",children:[P.jsx("h3",{className:"font-bold text-blue-600 dark:text-blue-400 text-sm sm:text-base",children:t.title}),P.jsxs("p",{className:`text-xs sm:text-sm ${r?"text-gray-400":"text-gray-500"}`,children:[t.authors," (",t.year,")"]})]}),P.jsx("span",{className:`text-xs px-3 py-1 rounded whitespace-nowrap ${r?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:t.year})]}),P.jsx("p",{className:`text-xs sm:text-sm mt-3 ${r?"text-gray-300":"text-gray-600"}`,children:t.abstract})]},t.id))}),P.jsx(Qe.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"mt-8 text-center",children:P.jsx(Qe.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:P.jsx(Cr,{to:"/papers",className:"inline-block px-8 py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg hover:from-orange-700 hover:to-orange-800 transition font-medium shadow-lg hover:shadow-xl",children:"   "})})})]})]})}function aae(){const{isDark:r}=bo(),e={relativity:"",stars:"",galaxies:"",cosmology:"",observations:""},t={relativity:"from-red-500 to-pink-500",stars:"from-yellow-500 to-orange-500",galaxies:"from-purple-500 to-indigo-500",cosmology:"from-blue-500 to-cyan-500",observations:"from-green-500 to-emerald-500"};return P.jsxs("div",{className:"space-y-12 sm:space-y-16",children:[P.jsxs(Qe.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6},children:[P.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent",children:" "}),P.jsx(Qe.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`text-sm sm:text-base ${r?"text-gray-300":"text-gray-600"}`,children:"  5  , 14     ."})]}),Object.entries(e).map(([n,i],s)=>{const a=Tk.filter(o=>o.category===n);return a.length===0?null:P.jsxs(Qe.section,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6},viewport:{once:!0,amount:.1},children:[P.jsx(Qe.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},className:"mb-6",children:P.jsx("div",{className:`inline-block bg-gradient-to-r ${t[n]} p-0.5 rounded-lg`,children:P.jsx("div",{className:`px-4 py-2 rounded-md ${r?"bg-gray-900":"bg-white"}`,children:P.jsx("h2",{className:`text-lg sm:text-xl font-bold bg-gradient-to-r ${t[n]} bg-clip-text text-transparent`,children:i})})})}),P.jsx(Qe.div,{variants:sE,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:a.map((o,l)=>P.jsxs(Qe.div,{variants:aE,whileHover:{y:-12,boxShadow:"0 20px 40px -10px rgba(0, 0, 0, 0.15)"},className:`group relative overflow-hidden rounded-xl border-2 transition cursor-pointer ${r?"bg-gradient-to-br from-gray-800 to-gray-900 border-gray-700 hover:border-blue-500":"bg-gradient-to-br from-white to-gray-50 border-gray-200 hover:border-blue-500"}`,children:[P.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${t[n]} opacity-0 group-hover:opacity-5 transition-opacity duration-300`}),P.jsxs(Cr,{to:`/concepts/${o.slug}`,className:"relative block p-6",children:[P.jsx("div",{className:"mb-4",children:P.jsx("span",{className:`inline-block px-3 py-1 text-xs font-semibold rounded-full ${r?"bg-gray-700 text-blue-300":"bg-blue-100 text-blue-700"}`,children:i})}),P.jsx("h3",{className:"text-base sm:text-lg font-bold mb-2 text-blue-600 dark:text-blue-400 group-hover:translate-x-1 transition-transform",children:o.title}),P.jsx("p",{className:`text-sm sm:text-base line-clamp-2 mb-4 ${r?"text-gray-300":"text-gray-600"}`,children:o.description}),P.jsxs("div",{className:`text-xs space-y-1 ${r?"text-gray-400":"text-gray-500"}`,children:[o.content.keyPoints.slice(0,2).map((u,c)=>P.jsxs("div",{className:"flex items-start gap-2",children:[P.jsx("span",{className:"text-blue-400",children:""}),P.jsx("span",{className:"line-clamp-1",children:u})]},c)),o.content.keyPoints.length>2&&P.jsxs("div",{className:"text-blue-500 font-medium",children:["+ ",o.content.keyPoints.length-2," ..."]})]})]})]},o.slug))})]},n)})]})}function oae({tex:r,display:e=!1}){return ue.useEffect(()=>{if(window.katex)try{window.katex.render(r,document.getElementById(`math-${r}`),{displayMode:e,throwOnError:!1})}catch(t){console.error("KaTeX error:",t)}},[r,e]),P.jsx("div",{id:`math-${r}`,className:"inline-block"})}function lae(){const{slug:r}=Kz(),e=Tk.find(n=>n.slug===r);if(!e)return P.jsx("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:"   ."});const{content:t}=e;return P.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 sm:space-y-8",children:[P.jsxs("div",{children:[P.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-2 text-gray-900 dark:text-white",children:e.title}),P.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm sm:text-base",children:e.description})]}),P.jsxs("section",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg",children:[P.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:""}),P.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed text-sm sm:text-base",children:t.overview})]}),P.jsxs("section",{className:"px-4 sm:px-0",children:[P.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),P.jsx("ul",{className:"space-y-2",children:t.keyPoints.map((n,i)=>P.jsxs("li",{className:"flex gap-3 text-sm sm:text-base",children:[P.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-bold flex-shrink-0",children:""}),P.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:n})]},i))})]}),t.keyFormulas&&t.keyFormulas.length>0&&P.jsxs("section",{className:"px-4 sm:px-0",children:[P.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),P.jsx("div",{className:"space-y-4",children:t.keyFormulas.map((n,i)=>P.jsxs("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg overflow-x-auto",children:[P.jsx(oae,{tex:n.tex}),P.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-2",children:n.desc})]},i))})]}),P.jsxs("section",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg",children:[P.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),P.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm sm:text-base",children:t.observations})]}),t.relatedPapers&&t.relatedPapers.length>0&&P.jsxs("section",{className:"px-4 sm:px-0",children:[P.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),P.jsx("ul",{className:"space-y-2",children:t.relatedPapers.map((n,i)=>P.jsx("li",{className:"text-gray-700 dark:text-gray-300 border-l-2 border-blue-600 dark:border-blue-400 pl-4 text-sm sm:text-base",children:n},i))})]})]})}const uae=()=>{};var z4={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},cae=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=r[t++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=r[t++],a=r[t++],o=r[t++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const s=r[t++],a=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},kj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const s=r[i],a=i+1<r.length,o=a?r[i+1]:0,l=i+2<r.length,u=l?r[i+2]:0,c=s>>2,h=(s&3)<<4|o>>4;let d=(o&15)<<2|u>>6,f=u&63;l||(f=64,a||(d=64)),n.push(t[c],t[h],t[d],t[f])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Rj(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):cae(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const s=t[r.charAt(i++)],o=i<r.length?t[r.charAt(i)]:0;++i;const u=i<r.length?t[r.charAt(i)]:64;++i;const h=i<r.length?t[r.charAt(i)]:64;if(++i,s==null||o==null||u==null||h==null)throw new hae;const d=s<<2|o>>4;if(n.push(d),u!==64){const f=o<<4&240|u>>2;if(n.push(f),h!==64){const p=u<<6&192|h;n.push(p)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class hae extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dae=function(r){const e=Rj(r);return kj.encodeByteArray(e,!0)},DS=function(r){return dae(r).replace(/\./g,"")},Fj=function(r){try{return kj.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fae(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mae=()=>fae().__FIREBASE_DEFAULTS__,pae=()=>{if(typeof process>"u"||typeof z4>"u")return;const r=z4.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},gae=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Fj(r[1]);return e&&JSON.parse(e)},EC=()=>{try{return uae()||mae()||pae()||gae()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Oj=r=>{var e,t;return(t=(e=EC())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},Bj=r=>{const e=Oj(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},Lj=()=>{var r;return(r=EC())==null?void 0:r.config},$j=r=>{var e;return(e=EC())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ck(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,s=r.sub||r.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...r};return[DS(JSON.stringify(t)),DS(JSON.stringify(a)),""].join(".")}const Vb={};function yae(){const r={prod:[],emulator:[]};for(const e of Object.keys(Vb))Vb[e]?r.emulator.push(e):r.prod.push(e);return r}function bae(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let j4=!1;function Nk(r,e){if(typeof window>"u"||typeof document>"u"||!pp(window.location.host)||Vb[r]===e||Vb[r]||j4)return;Vb[r]=e;function t(d){return`__firebase__banner__${d}`}const n="__firebase__banner",s=yae().prod.length>0;function a(){const d=document.getElementById(n);d&&d.remove()}function o(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function l(d,f){d.setAttribute("width","24"),d.setAttribute("id",f),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function u(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{j4=!0,a()},d}function c(d,f){d.setAttribute("id",f),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function h(){const d=bae(n),f=t("text"),p=document.getElementById(f)||document.createElement("span"),g=t("learnmore"),b=document.getElementById(g)||document.createElement("a"),v=t("preprendIcon"),x=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const y=d.element;o(y),c(b,g);const A=u();l(x,v),y.append(x,p,b,A),document.body.appendChild(y)}s?(p.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",f)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wae(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rs())}function xae(){var e;const r=(e=EC())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _ae(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Aae(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Eae(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Sae(){const r=rs();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Tae(){return!xae()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Cae(){try{return typeof indexedDB=="object"}catch{return!1}}function Nae(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dae="FirebaseError";class su extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=Dae,Object.setPrototypeOf(this,su.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$x.prototype.create)}}class $x{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?Mae(s,n):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new su(i,o,n)}}function Mae(r,e){return r.replace(Iae,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const Iae=/\{\$([^}]+)}/g;function Pae(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function rp(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const s=r[i],a=e[i];if(q4(s)&&q4(a)){if(!rp(s,a))return!1}else if(s!==a)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function q4(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Qy(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,s]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Jy(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function Rae(r,e){const t=new kae(r,e);return t.subscribe.bind(t)}class kae{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");Fae(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=TD),i.error===void 0&&(i.error=TD),i.complete===void 0&&(i.complete=TD);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fae(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function TD(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(r){return r&&r._delegate?r._delegate:r}class yd{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oae{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new vae;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Lae(e))try{this.getOrInitializeService({instanceIdentifier:cf})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=cf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cf){return this.instances.has(e)}getOptions(e=cf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&a.resolve(i)}return i}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Bae(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=cf){return this.component?this.component.multipleInstances?e:cf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Bae(r){return r===cf?void 0:r}function Lae(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ae{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Oae(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(qt||(qt={}));const Vae={debug:qt.DEBUG,verbose:qt.VERBOSE,info:qt.INFO,warn:qt.WARN,error:qt.ERROR,silent:qt.SILENT},Uae=qt.INFO,zae={[qt.DEBUG]:"log",[qt.VERBOSE]:"log",[qt.INFO]:"info",[qt.WARN]:"warn",[qt.ERROR]:"error"},jae=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=zae[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dk{constructor(e){this.name=e,this._logLevel=Uae,this._logHandler=jae,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Vae[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qt.DEBUG,...e),this._logHandler(this,qt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qt.VERBOSE,...e),this._logHandler(this,qt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qt.INFO,...e),this._logHandler(this,qt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qt.WARN,...e),this._logHandler(this,qt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qt.ERROR,...e),this._logHandler(this,qt.ERROR,...e)}}const qae=(r,e)=>e.some(t=>r instanceof t);let H4,G4;function Hae(){return H4||(H4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Gae(){return G4||(G4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Uj=new WeakMap,EM=new WeakMap,zj=new WeakMap,CD=new WeakMap,Mk=new WeakMap;function Wae(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",s),r.removeEventListener("error",a)},s=()=>{t(ud(r.result)),i()},a=()=>{n(r.error),i()};r.addEventListener("success",s),r.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Uj.set(t,r)}).catch(()=>{}),Mk.set(e,r),e}function Kae(r){if(EM.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",s),r.removeEventListener("error",a),r.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",s),r.addEventListener("error",a),r.addEventListener("abort",a)});EM.set(r,e)}let SM={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return EM.get(r);if(e==="objectStoreNames")return r.objectStoreNames||zj.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ud(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Xae(r){SM=r(SM)}function Yae(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(ND(this),e,...t);return zj.set(n,e.sort?e.sort():[e]),ud(n)}:Gae().includes(r)?function(...e){return r.apply(ND(this),e),ud(Uj.get(this))}:function(...e){return ud(r.apply(ND(this),e))}}function Qae(r){return typeof r=="function"?Yae(r):(r instanceof IDBTransaction&&Kae(r),qae(r,Hae())?new Proxy(r,SM):r)}function ud(r){if(r instanceof IDBRequest)return Wae(r);if(CD.has(r))return CD.get(r);const e=Qae(r);return e!==r&&(CD.set(r,e),Mk.set(e,r)),e}const ND=r=>Mk.get(r);function Jae(r,e,{blocked:t,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(r,e),o=ud(a);return n&&a.addEventListener("upgradeneeded",l=>{n(ud(a.result),l.oldVersion,l.newVersion,ud(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const Zae=["get","getKey","getAll","getAllKeys","count"],eoe=["put","add","delete","clear"],DD=new Map;function W4(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(DD.get(e))return DD.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=eoe.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||Zae.includes(t)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let u=l.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[t](...o),i&&l.done]))[0]};return DD.set(e,s),s}Xae(r=>({...r,get:(e,t,n)=>W4(e,t)||r.get(e,t,n),has:(e,t)=>!!W4(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class toe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(roe(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function roe(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const TM="@firebase/app",K4="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=new Dk("@firebase/app"),noe="@firebase/app-compat",ioe="@firebase/analytics-compat",soe="@firebase/analytics",aoe="@firebase/app-check-compat",ooe="@firebase/app-check",loe="@firebase/auth",uoe="@firebase/auth-compat",coe="@firebase/database",hoe="@firebase/data-connect",doe="@firebase/database-compat",foe="@firebase/functions",moe="@firebase/functions-compat",poe="@firebase/installations",goe="@firebase/installations-compat",voe="@firebase/messaging",yoe="@firebase/messaging-compat",boe="@firebase/performance",woe="@firebase/performance-compat",xoe="@firebase/remote-config",_oe="@firebase/remote-config-compat",Aoe="@firebase/storage",Eoe="@firebase/storage-compat",Soe="@firebase/firestore",Toe="@firebase/ai",Coe="@firebase/firestore-compat",Noe="firebase",Doe="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM="[DEFAULT]",Moe={[TM]:"fire-core",[noe]:"fire-core-compat",[soe]:"fire-analytics",[ioe]:"fire-analytics-compat",[ooe]:"fire-app-check",[aoe]:"fire-app-check-compat",[loe]:"fire-auth",[uoe]:"fire-auth-compat",[coe]:"fire-rtdb",[hoe]:"fire-data-connect",[doe]:"fire-rtdb-compat",[foe]:"fire-fn",[moe]:"fire-fn-compat",[poe]:"fire-iid",[goe]:"fire-iid-compat",[voe]:"fire-fcm",[yoe]:"fire-fcm-compat",[boe]:"fire-perf",[woe]:"fire-perf-compat",[xoe]:"fire-rc",[_oe]:"fire-rc-compat",[Aoe]:"fire-gcs",[Eoe]:"fire-gcs-compat",[Soe]:"fire-fst",[Coe]:"fire-fst-compat",[Toe]:"fire-vertex","fire-js":"fire-js",[Noe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=new Map,Ioe=new Map,NM=new Map;function X4(r,e){try{r.container.addComponent(e)}catch(t){_c.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function np(r){const e=r.name;if(NM.has(e))return _c.debug(`There were multiple attempts to register component ${e}.`),!1;NM.set(e,r);for(const t of MS.values())X4(t,r);for(const t of Ioe.values())X4(t,r);return!0}function SC(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Aa(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Poe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cd=new $x("app","Firebase",Poe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Roe{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new yd("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cd.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp=Doe;function jj(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:CM,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw cd.create("bad-app-name",{appName:String(i)});if(t||(t=Lj()),!t)throw cd.create("no-options");const s=MS.get(i);if(s){if(rp(t,s.options)&&rp(n,s.config))return s;throw cd.create("duplicate-app",{appName:i})}const a=new $ae(i);for(const l of NM.values())a.addComponent(l);const o=new Roe(t,n,a);return MS.set(i,o),o}function Ik(r=CM){const e=MS.get(r);if(!e&&r===CM&&Lj())return jj();if(!e)throw cd.create("no-app",{appName:r});return e}function Hl(r,e,t){let n=Moe[r]??r;t&&(n+=`-${t}`);const i=n.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${n}" with version "${e}":`];i&&a.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_c.warn(a.join(" "));return}np(new yd(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const koe="firebase-heartbeat-database",Foe=1,b1="firebase-heartbeat-store";let MD=null;function qj(){return MD||(MD=Jae(koe,Foe,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(b1)}catch(t){console.warn(t)}}}}).catch(r=>{throw cd.create("idb-open",{originalErrorMessage:r.message})})),MD}async function Ooe(r){try{const t=(await qj()).transaction(b1),n=await t.objectStore(b1).get(Hj(r));return await t.done,n}catch(e){if(e instanceof su)_c.warn(e.message);else{const t=cd.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_c.warn(t.message)}}}async function Y4(r,e){try{const n=(await qj()).transaction(b1,"readwrite");await n.objectStore(b1).put(e,Hj(r)),await n.done}catch(t){if(t instanceof su)_c.warn(t.message);else{const n=cd.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});_c.warn(n.message)}}}function Hj(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Boe=1024,Loe=30;class $oe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Uoe(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Q4();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Loe){const a=zoe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){_c.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Q4(),{heartbeatsToSend:n,unsentEntries:i}=Voe(this._heartbeatsCache.heartbeats),s=DS(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return _c.warn(t),""}}}function Q4(){return new Date().toISOString().substring(0,10)}function Voe(r,e=Boe){const t=[];let n=r.slice();for(const i of r){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),J4(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),J4(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class Uoe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Cae()?Nae().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Ooe(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Y4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Y4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function J4(r){return DS(JSON.stringify({version:2,heartbeats:r})).length}function zoe(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function joe(r){np(new yd("platform-logger",e=>new toe(e),"PRIVATE")),np(new yd("heartbeat",e=>new $oe(e),"PRIVATE")),Hl(TM,K4,r),Hl(TM,K4,"esm2020"),Hl("fire-js","")}joe("");var Z4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hd,Gj;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,E){function C(){}C.prototype=E.prototype,S.F=E.prototype,S.prototype=new C,S.prototype.constructor=S,S.D=function(N,D,M){for(var I=Array(arguments.length-2),U=2;U<arguments.length;U++)I[U-2]=arguments[U];return E.prototype[D].apply(N,I)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,E,C){C||(C=0);const N=Array(16);if(typeof E=="string")for(var D=0;D<16;++D)N[D]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(D=0;D<16;++D)N[D]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=S.g[0],C=S.g[1],D=S.g[2];let M=S.g[3],I;I=E+(M^C&(D^M))+N[0]+3614090360&4294967295,E=C+(I<<7&4294967295|I>>>25),I=M+(D^E&(C^D))+N[1]+3905402710&4294967295,M=E+(I<<12&4294967295|I>>>20),I=D+(C^M&(E^C))+N[2]+606105819&4294967295,D=M+(I<<17&4294967295|I>>>15),I=C+(E^D&(M^E))+N[3]+3250441966&4294967295,C=D+(I<<22&4294967295|I>>>10),I=E+(M^C&(D^M))+N[4]+4118548399&4294967295,E=C+(I<<7&4294967295|I>>>25),I=M+(D^E&(C^D))+N[5]+1200080426&4294967295,M=E+(I<<12&4294967295|I>>>20),I=D+(C^M&(E^C))+N[6]+2821735955&4294967295,D=M+(I<<17&4294967295|I>>>15),I=C+(E^D&(M^E))+N[7]+4249261313&4294967295,C=D+(I<<22&4294967295|I>>>10),I=E+(M^C&(D^M))+N[8]+1770035416&4294967295,E=C+(I<<7&4294967295|I>>>25),I=M+(D^E&(C^D))+N[9]+2336552879&4294967295,M=E+(I<<12&4294967295|I>>>20),I=D+(C^M&(E^C))+N[10]+4294925233&4294967295,D=M+(I<<17&4294967295|I>>>15),I=C+(E^D&(M^E))+N[11]+2304563134&4294967295,C=D+(I<<22&4294967295|I>>>10),I=E+(M^C&(D^M))+N[12]+1804603682&4294967295,E=C+(I<<7&4294967295|I>>>25),I=M+(D^E&(C^D))+N[13]+4254626195&4294967295,M=E+(I<<12&4294967295|I>>>20),I=D+(C^M&(E^C))+N[14]+2792965006&4294967295,D=M+(I<<17&4294967295|I>>>15),I=C+(E^D&(M^E))+N[15]+1236535329&4294967295,C=D+(I<<22&4294967295|I>>>10),I=E+(D^M&(C^D))+N[1]+4129170786&4294967295,E=C+(I<<5&4294967295|I>>>27),I=M+(C^D&(E^C))+N[6]+3225465664&4294967295,M=E+(I<<9&4294967295|I>>>23),I=D+(E^C&(M^E))+N[11]+643717713&4294967295,D=M+(I<<14&4294967295|I>>>18),I=C+(M^E&(D^M))+N[0]+3921069994&4294967295,C=D+(I<<20&4294967295|I>>>12),I=E+(D^M&(C^D))+N[5]+3593408605&4294967295,E=C+(I<<5&4294967295|I>>>27),I=M+(C^D&(E^C))+N[10]+38016083&4294967295,M=E+(I<<9&4294967295|I>>>23),I=D+(E^C&(M^E))+N[15]+3634488961&4294967295,D=M+(I<<14&4294967295|I>>>18),I=C+(M^E&(D^M))+N[4]+3889429448&4294967295,C=D+(I<<20&4294967295|I>>>12),I=E+(D^M&(C^D))+N[9]+568446438&4294967295,E=C+(I<<5&4294967295|I>>>27),I=M+(C^D&(E^C))+N[14]+3275163606&4294967295,M=E+(I<<9&4294967295|I>>>23),I=D+(E^C&(M^E))+N[3]+4107603335&4294967295,D=M+(I<<14&4294967295|I>>>18),I=C+(M^E&(D^M))+N[8]+1163531501&4294967295,C=D+(I<<20&4294967295|I>>>12),I=E+(D^M&(C^D))+N[13]+2850285829&4294967295,E=C+(I<<5&4294967295|I>>>27),I=M+(C^D&(E^C))+N[2]+4243563512&4294967295,M=E+(I<<9&4294967295|I>>>23),I=D+(E^C&(M^E))+N[7]+1735328473&4294967295,D=M+(I<<14&4294967295|I>>>18),I=C+(M^E&(D^M))+N[12]+2368359562&4294967295,C=D+(I<<20&4294967295|I>>>12),I=E+(C^D^M)+N[5]+4294588738&4294967295,E=C+(I<<4&4294967295|I>>>28),I=M+(E^C^D)+N[8]+2272392833&4294967295,M=E+(I<<11&4294967295|I>>>21),I=D+(M^E^C)+N[11]+1839030562&4294967295,D=M+(I<<16&4294967295|I>>>16),I=C+(D^M^E)+N[14]+4259657740&4294967295,C=D+(I<<23&4294967295|I>>>9),I=E+(C^D^M)+N[1]+2763975236&4294967295,E=C+(I<<4&4294967295|I>>>28),I=M+(E^C^D)+N[4]+1272893353&4294967295,M=E+(I<<11&4294967295|I>>>21),I=D+(M^E^C)+N[7]+4139469664&4294967295,D=M+(I<<16&4294967295|I>>>16),I=C+(D^M^E)+N[10]+3200236656&4294967295,C=D+(I<<23&4294967295|I>>>9),I=E+(C^D^M)+N[13]+681279174&4294967295,E=C+(I<<4&4294967295|I>>>28),I=M+(E^C^D)+N[0]+3936430074&4294967295,M=E+(I<<11&4294967295|I>>>21),I=D+(M^E^C)+N[3]+3572445317&4294967295,D=M+(I<<16&4294967295|I>>>16),I=C+(D^M^E)+N[6]+76029189&4294967295,C=D+(I<<23&4294967295|I>>>9),I=E+(C^D^M)+N[9]+3654602809&4294967295,E=C+(I<<4&4294967295|I>>>28),I=M+(E^C^D)+N[12]+3873151461&4294967295,M=E+(I<<11&4294967295|I>>>21),I=D+(M^E^C)+N[15]+530742520&4294967295,D=M+(I<<16&4294967295|I>>>16),I=C+(D^M^E)+N[2]+3299628645&4294967295,C=D+(I<<23&4294967295|I>>>9),I=E+(D^(C|~M))+N[0]+4096336452&4294967295,E=C+(I<<6&4294967295|I>>>26),I=M+(C^(E|~D))+N[7]+1126891415&4294967295,M=E+(I<<10&4294967295|I>>>22),I=D+(E^(M|~C))+N[14]+2878612391&4294967295,D=M+(I<<15&4294967295|I>>>17),I=C+(M^(D|~E))+N[5]+4237533241&4294967295,C=D+(I<<21&4294967295|I>>>11),I=E+(D^(C|~M))+N[12]+1700485571&4294967295,E=C+(I<<6&4294967295|I>>>26),I=M+(C^(E|~D))+N[3]+2399980690&4294967295,M=E+(I<<10&4294967295|I>>>22),I=D+(E^(M|~C))+N[10]+4293915773&4294967295,D=M+(I<<15&4294967295|I>>>17),I=C+(M^(D|~E))+N[1]+2240044497&4294967295,C=D+(I<<21&4294967295|I>>>11),I=E+(D^(C|~M))+N[8]+1873313359&4294967295,E=C+(I<<6&4294967295|I>>>26),I=M+(C^(E|~D))+N[15]+4264355552&4294967295,M=E+(I<<10&4294967295|I>>>22),I=D+(E^(M|~C))+N[6]+2734768916&4294967295,D=M+(I<<15&4294967295|I>>>17),I=C+(M^(D|~E))+N[13]+1309151649&4294967295,C=D+(I<<21&4294967295|I>>>11),I=E+(D^(C|~M))+N[4]+4149444226&4294967295,E=C+(I<<6&4294967295|I>>>26),I=M+(C^(E|~D))+N[11]+3174756917&4294967295,M=E+(I<<10&4294967295|I>>>22),I=D+(E^(M|~C))+N[2]+718787259&4294967295,D=M+(I<<15&4294967295|I>>>17),I=C+(M^(D|~E))+N[9]+3951481745&4294967295,S.g[0]=S.g[0]+E&4294967295,S.g[1]=S.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,S.g[2]=S.g[2]+D&4294967295,S.g[3]=S.g[3]+M&4294967295}n.prototype.v=function(S,E){E===void 0&&(E=S.length);const C=E-this.blockSize,N=this.C;let D=this.h,M=0;for(;M<E;){if(D==0)for(;M<=C;)i(this,S,M),M+=this.blockSize;if(typeof S=="string"){for(;M<E;)if(N[D++]=S.charCodeAt(M++),D==this.blockSize){i(this,N),D=0;break}}else for(;M<E;)if(N[D++]=S[M++],D==this.blockSize){i(this,N),D=0;break}}this.h=D,this.o+=E},n.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var E=1;E<S.length-8;++E)S[E]=0;E=this.o*8;for(var C=S.length-8;C<S.length;++C)S[C]=E&255,E/=256;for(this.v(S),S=Array(16),E=0,C=0;C<4;++C)for(let N=0;N<32;N+=8)S[E++]=this.g[C]>>>N&255;return S};function s(S,E){var C=o;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=E(S)}function a(S,E){this.h=E;const C=[];let N=!0;for(let D=S.length-1;D>=0;D--){const M=S[D]|0;N&&M==E||(C[D]=M,N=!1)}this.g=C}var o={};function l(S){return-128<=S&&S<128?s(S,function(E){return new a([E|0],E<0?-1:0)}):new a([S|0],S<0?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return h;if(S<0)return b(u(-S));const E=[];let C=1;for(let N=0;S>=C;N++)E[N]=S/C|0,C*=4294967296;return new a(E,0)}function c(S,E){if(S.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(S.charAt(0)=="-")return b(c(S.substring(1),E));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=u(Math.pow(E,8));let N=h;for(let M=0;M<S.length;M+=8){var D=Math.min(8,S.length-M);const I=parseInt(S.substring(M,M+D),E);D<8?(D=u(Math.pow(E,D)),N=N.j(D).add(u(I))):(N=N.j(C),N=N.add(u(I)))}return N}var h=l(0),d=l(1),f=l(16777216);r=a.prototype,r.m=function(){if(g(this))return-b(this).m();let S=0,E=1;for(let C=0;C<this.g.length;C++){const N=this.i(C);S+=(N>=0?N:4294967296+N)*E,E*=4294967296}return S},r.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(p(this))return"0";if(g(this))return"-"+b(this).toString(S);const E=u(Math.pow(S,6));var C=this;let N="";for(;;){const D=A(C,E).g;C=v(C,D.j(E));let M=((C.g.length>0?C.g[0]:C.h)>>>0).toString(S);if(C=D,p(C))return M+N;for(;M.length<6;)M="0"+M;N=M+N}},r.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function p(S){if(S.h!=0)return!1;for(let E=0;E<S.g.length;E++)if(S.g[E]!=0)return!1;return!0}function g(S){return S.h==-1}r.l=function(S){return S=v(this,S),g(S)?-1:p(S)?0:1};function b(S){const E=S.g.length,C=[];for(let N=0;N<E;N++)C[N]=~S.g[N];return new a(C,~S.h).add(d)}r.abs=function(){return g(this)?b(this):this},r.add=function(S){const E=Math.max(this.g.length,S.g.length),C=[];let N=0;for(let D=0;D<=E;D++){let M=N+(this.i(D)&65535)+(S.i(D)&65535),I=(M>>>16)+(this.i(D)>>>16)+(S.i(D)>>>16);N=I>>>16,M&=65535,I&=65535,C[D]=I<<16|M}return new a(C,C[C.length-1]&-2147483648?-1:0)};function v(S,E){return S.add(b(E))}r.j=function(S){if(p(this)||p(S))return h;if(g(this))return g(S)?b(this).j(b(S)):b(b(this).j(S));if(g(S))return b(this.j(b(S)));if(this.l(f)<0&&S.l(f)<0)return u(this.m()*S.m());const E=this.g.length+S.g.length,C=[];for(var N=0;N<2*E;N++)C[N]=0;for(N=0;N<this.g.length;N++)for(let D=0;D<S.g.length;D++){const M=this.i(N)>>>16,I=this.i(N)&65535,U=S.i(D)>>>16,X=S.i(D)&65535;C[2*N+2*D]+=I*X,x(C,2*N+2*D),C[2*N+2*D+1]+=M*X,x(C,2*N+2*D+1),C[2*N+2*D+1]+=I*U,x(C,2*N+2*D+1),C[2*N+2*D+2]+=M*U,x(C,2*N+2*D+2)}for(S=0;S<E;S++)C[S]=C[2*S+1]<<16|C[2*S];for(S=E;S<2*E;S++)C[S]=0;return new a(C,0)};function x(S,E){for(;(S[E]&65535)!=S[E];)S[E+1]+=S[E]>>>16,S[E]&=65535,E++}function y(S,E){this.g=S,this.h=E}function A(S,E){if(p(E))throw Error("division by zero");if(p(S))return new y(h,h);if(g(S))return E=A(b(S),E),new y(b(E.g),b(E.h));if(g(E))return E=A(S,b(E)),new y(b(E.g),E.h);if(S.g.length>30){if(g(S)||g(E))throw Error("slowDivide_ only works with positive integers.");for(var C=d,N=E;N.l(S)<=0;)C=w(C),N=w(N);var D=_(C,1),M=_(N,1);for(N=_(N,2),C=_(C,2);!p(N);){var I=M.add(N);I.l(S)<=0&&(D=D.add(C),M=I),N=_(N,1),C=_(C,1)}return E=v(S,D.j(E)),new y(D,E)}for(D=h;S.l(E)>=0;){for(C=Math.max(1,Math.floor(S.m()/E.m())),N=Math.ceil(Math.log(C)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),M=u(C),I=M.j(E);g(I)||I.l(S)>0;)C-=N,M=u(C),I=M.j(E);p(M)&&(M=d),D=D.add(M),S=v(S,I)}return new y(D,S)}r.B=function(S){return A(this,S).h},r.and=function(S){const E=Math.max(this.g.length,S.g.length),C=[];for(let N=0;N<E;N++)C[N]=this.i(N)&S.i(N);return new a(C,this.h&S.h)},r.or=function(S){const E=Math.max(this.g.length,S.g.length),C=[];for(let N=0;N<E;N++)C[N]=this.i(N)|S.i(N);return new a(C,this.h|S.h)},r.xor=function(S){const E=Math.max(this.g.length,S.g.length),C=[];for(let N=0;N<E;N++)C[N]=this.i(N)^S.i(N);return new a(C,this.h^S.h)};function w(S){const E=S.g.length+1,C=[];for(let N=0;N<E;N++)C[N]=S.i(N)<<1|S.i(N-1)>>>31;return new a(C,S.h)}function _(S,E){const C=E>>5;E%=32;const N=S.g.length-C,D=[];for(let M=0;M<N;M++)D[M]=E>0?S.i(M+C)>>>E|S.i(M+C+1)<<32-E:S.i(M+C);return new a(D,S.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,Gj=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=c,hd=a}).apply(typeof Z4<"u"?Z4:typeof self<"u"?self:typeof window<"u"?window:{});var oA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wj,Zy,Kj,oE,DM,Xj,Yj,Qj;(function(){var r,e=Object.defineProperty;function t(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof oA=="object"&&oA];for(var F=0;F<T.length;++F){var V=T[F];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var n=t(this);function i(T,F){if(F)e:{var V=n;T=T.split(".");for(var J=0;J<T.length-1;J++){var ye=T[J];if(!(ye in V))break e;V=V[ye]}T=T[T.length-1],J=V[T],F=F(J),F!=J&&F!=null&&e(V,T,{configurable:!0,writable:!0,value:F})}}i("Symbol.dispose",function(T){return T||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(T){return T||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(T){return T||function(F){var V=[],J;for(J in F)Object.prototype.hasOwnProperty.call(F,J)&&V.push([J,F[J]]);return V}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function o(T){var F=typeof T;return F=="object"&&T!=null||F=="function"}function l(T,F,V){return T.call.apply(T.bind,arguments)}function u(T,F,V){return u=l,u.apply(null,arguments)}function c(T,F){var V=Array.prototype.slice.call(arguments,1);return function(){var J=V.slice();return J.push.apply(J,arguments),T.apply(this,J)}}function h(T,F){function V(){}V.prototype=F.prototype,T.Z=F.prototype,T.prototype=new V,T.prototype.constructor=T,T.Ob=function(J,ye,Ae){for(var Le=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)Le[Ot-2]=arguments[Ot];return F.prototype[ye].apply(J,Le)}}var d=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?T=>T&&AsyncContext.Snapshot.wrap(T):T=>T;function f(T){const F=T.length;if(F>0){const V=Array(F);for(let J=0;J<F;J++)V[J]=T[J];return V}return[]}function p(T,F){for(let J=1;J<arguments.length;J++){const ye=arguments[J];var V=typeof ye;if(V=V!="object"?V:ye?Array.isArray(ye)?"array":V:"null",V=="array"||V=="object"&&typeof ye.length=="number"){V=T.length||0;const Ae=ye.length||0;T.length=V+Ae;for(let Le=0;Le<Ae;Le++)T[V+Le]=ye[Le]}else T.push(ye)}}class g{constructor(F,V){this.i=F,this.j=V,this.h=0,this.g=null}get(){let F;return this.h>0?(this.h--,F=this.g,this.g=F.next,F.next=null):F=this.i(),F}}function b(T){a.setTimeout(()=>{throw T},0)}function v(){var T=S;let F=null;return T.g&&(F=T.g,T.g=T.g.next,T.g||(T.h=null),F.next=null),F}class x{constructor(){this.h=this.g=null}add(F,V){const J=y.get();J.set(F,V),this.h?this.h.next=J:this.g=J,this.h=J}}var y=new g(()=>new A,T=>T.reset());class A{constructor(){this.next=this.g=this.h=null}set(F,V){this.h=F,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let w,_=!1,S=new x,E=()=>{const T=Promise.resolve(void 0);w=()=>{T.then(C)}};function C(){for(var T;T=v();){try{T.h.call(T.g)}catch(V){b(V)}var F=y;F.j(T),F.h<100&&(F.h++,T.next=F.g,F.g=T)}_=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(T,F){this.type=T,this.g=this.target=F,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var T=!1,F=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const V=()=>{};a.addEventListener("test",V,F),a.removeEventListener("test",V,F)}catch{}return T}();function I(T){return/^[\s\xa0]*$/.test(T)}function U(T,F){D.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T&&this.init(T,F)}h(U,D),U.prototype.init=function(T,F){const V=this.type=T.type,J=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;this.target=T.target||T.srcElement,this.g=F,F=T.relatedTarget,F||(V=="mouseover"?F=T.fromElement:V=="mouseout"&&(F=T.toElement)),this.relatedTarget=F,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=T.pointerType,this.state=T.state,this.i=T,T.defaultPrevented&&U.Z.h.call(this)},U.prototype.h=function(){U.Z.h.call(this);const T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var X="closure_listenable_"+(Math.random()*1e6|0),k=0;function z(T,F,V,J,ye){this.listener=T,this.proxy=null,this.src=F,this.type=V,this.capture=!!J,this.ha=ye,this.key=++k,this.da=this.fa=!1}function q(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function H(T,F,V){for(const J in T)F.call(V,T[J],J,T)}function te(T,F){for(const V in T)F.call(void 0,T[V],V,T)}function ce(T){const F={};for(const V in T)F[V]=T[V];return F}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(T,F){let V,J;for(let ye=1;ye<arguments.length;ye++){J=arguments[ye];for(V in J)T[V]=J[V];for(let Ae=0;Ae<re.length;Ae++)V=re[Ae],Object.prototype.hasOwnProperty.call(J,V)&&(T[V]=J[V])}}function ne(T){this.src=T,this.g={},this.h=0}ne.prototype.add=function(T,F,V,J,ye){const Ae=T.toString();T=this.g[Ae],T||(T=this.g[Ae]=[],this.h++);const Le=pe(T,F,J,ye);return Le>-1?(F=T[Le],V||(F.fa=!1)):(F=new z(F,this.src,Ae,!!J,ye),F.fa=V,T.push(F)),F};function W(T,F){const V=F.type;if(V in T.g){var J=T.g[V],ye=Array.prototype.indexOf.call(J,F,void 0),Ae;(Ae=ye>=0)&&Array.prototype.splice.call(J,ye,1),Ae&&(q(F),T.g[V].length==0&&(delete T.g[V],T.h--))}}function pe(T,F,V,J){for(let ye=0;ye<T.length;++ye){const Ae=T[ye];if(!Ae.da&&Ae.listener==F&&Ae.capture==!!V&&Ae.ha==J)return ye}return-1}var me="closure_lm_"+(Math.random()*1e6|0),ie={};function K(T,F,V,J,ye){if(Array.isArray(F)){for(let Ae=0;Ae<F.length;Ae++)K(T,F[Ae],V,J,ye);return null}return V=Be(V),T&&T[X]?T.J(F,V,o(J)?!!J.capture:!1,ye):ae(T,F,V,!1,J,ye)}function ae(T,F,V,J,ye,Ae){if(!F)throw Error("Invalid event type");const Le=o(ye)?!!ye.capture:!!ye;let Ot=Ve(T);if(Ot||(T[me]=Ot=new ne(T)),V=Ot.add(F,V,J,Le,Ae),V.proxy)return V;if(J=ge(),V.proxy=J,J.src=T,J.listener=V,T.addEventListener)M||(ye=Le),ye===void 0&&(ye=!1),T.addEventListener(F.toString(),J,ye);else if(T.attachEvent)T.attachEvent(ve(F.toString()),J);else if(T.addListener&&T.removeListener)T.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return V}function ge(){function T(V){return F.call(T.src,T.listener,V)}const F=Ie;return T}function he(T,F,V,J,ye){if(Array.isArray(F))for(var Ae=0;Ae<F.length;Ae++)he(T,F[Ae],V,J,ye);else J=o(J)?!!J.capture:!!J,V=Be(V),T&&T[X]?(T=T.i,Ae=String(F).toString(),Ae in T.g&&(F=T.g[Ae],V=pe(F,V,J,ye),V>-1&&(q(F[V]),Array.prototype.splice.call(F,V,1),F.length==0&&(delete T.g[Ae],T.h--)))):T&&(T=Ve(T))&&(F=T.g[F.toString()],T=-1,F&&(T=pe(F,V,J,ye)),(V=T>-1?F[T]:null)&&be(V))}function be(T){if(typeof T!="number"&&T&&!T.da){var F=T.src;if(F&&F[X])W(F.i,T);else{var V=T.type,J=T.proxy;F.removeEventListener?F.removeEventListener(V,J,T.capture):F.detachEvent?F.detachEvent(ve(V),J):F.addListener&&F.removeListener&&F.removeListener(J),(V=Ve(F))?(W(V,T),V.h==0&&(V.src=null,F[me]=null)):q(T)}}}function ve(T){return T in ie?ie[T]:ie[T]="on"+T}function Ie(T,F){if(T.da)T=!0;else{F=new U(F,this);const V=T.listener,J=T.ha||T.src;T.fa&&be(T),T=V.call(J,F)}return T}function Ve(T){return T=T[me],T instanceof ne?T:null}var We="__closure_events_fn_"+(Math.random()*1e9>>>0);function Be(T){return typeof T=="function"?T:(T[We]||(T[We]=function(F){return T.handleEvent(F)}),T[We])}function $e(){N.call(this),this.i=new ne(this),this.M=this,this.G=null}h($e,N),$e.prototype[X]=!0,$e.prototype.removeEventListener=function(T,F,V,J){he(this,T,F,V,J)};function Ge(T,F){var V,J=T.G;if(J)for(V=[];J;J=J.G)V.push(J);if(T=T.M,J=F.type||F,typeof F=="string")F=new D(F,T);else if(F instanceof D)F.target=F.target||T;else{var ye=F;F=new D(J,T),O(F,ye)}ye=!0;let Ae,Le;if(V)for(Le=V.length-1;Le>=0;Le--)Ae=F.g=V[Le],ye=Z(Ae,J,!0,F)&&ye;if(Ae=F.g=T,ye=Z(Ae,J,!0,F)&&ye,ye=Z(Ae,J,!1,F)&&ye,V)for(Le=0;Le<V.length;Le++)Ae=F.g=V[Le],ye=Z(Ae,J,!1,F)&&ye}$e.prototype.N=function(){if($e.Z.N.call(this),this.i){var T=this.i;for(const F in T.g){const V=T.g[F];for(let J=0;J<V.length;J++)q(V[J]);delete T.g[F],T.h--}}this.G=null},$e.prototype.J=function(T,F,V,J){return this.i.add(String(T),F,!1,V,J)},$e.prototype.K=function(T,F,V,J){return this.i.add(String(T),F,!0,V,J)};function Z(T,F,V,J){if(F=T.i.g[String(F)],!F)return!0;F=F.concat();let ye=!0;for(let Ae=0;Ae<F.length;++Ae){const Le=F[Ae];if(Le&&!Le.da&&Le.capture==V){const Ot=Le.listener,Ln=Le.ha||Le.src;Le.fa&&W(T.i,Le),ye=Ot.call(Ln,J)!==!1&&ye}}return ye&&!J.defaultPrevented}function Q(T,F){if(typeof T!="function")if(T&&typeof T.handleEvent=="function")T=u(T.handleEvent,T);else throw Error("Invalid listener argument");return Number(F)>2147483647?-1:a.setTimeout(T,F||0)}function L(T){T.g=Q(()=>{T.g=null,T.i&&(T.i=!1,L(T))},T.l);const F=T.h;T.h=null,T.m.apply(null,F)}class G extends N{constructor(F,V){super(),this.m=F,this.l=V,this.h=null,this.i=!1,this.g=null}j(F){this.h=arguments,this.g?this.i=!0:L(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ee(T){N.call(this),this.h=T,this.g={}}h(ee,N);var oe=[];function fe(T){H(T.g,function(F,V){this.g.hasOwnProperty(V)&&be(F)},T),T.g={}}ee.prototype.N=function(){ee.Z.N.call(this),fe(this)},ee.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=a.JSON.stringify,Se=a.JSON.parse,_e=class{stringify(T){return a.JSON.stringify(T,void 0)}parse(T){return a.JSON.parse(T,void 0)}};function Pe(){}function Ee(){}var qe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function bt(){D.call(this,"d")}h(bt,D);function Lt(){D.call(this,"c")}h(Lt,D);var rt={},pr=null;function B(){return pr=pr||new $e}rt.Ia="serverreachability";function le(T){D.call(this,rt.Ia,T)}h(le,D);function we(T){const F=B();Ge(F,new le(F))}rt.STAT_EVENT="statevent";function Me(T,F){D.call(this,rt.STAT_EVENT,T),this.stat=F}h(Me,D);function ze(T){const F=B();Ge(F,new Me(F,T))}rt.Ja="timingevent";function ut(T,F){D.call(this,rt.Ja,T),this.size=F}h(ut,D);function vn(T,F){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){T()},F)}function Fa(){this.g=!0}Fa.prototype.ua=function(){this.g=!1};function my(T,F,V,J,ye,Ae){T.info(function(){if(T.g)if(Ae){var Le="",Ot=Ae.split("&");for(let Er=0;Er<Ot.length;Er++){var Ln=Ot[Er].split("=");if(Ln.length>1){const ei=Ln[0];Ln=Ln[1];const ul=ei.split("_");Le=ul.length>=2&&ul[1]=="type"?Le+(ei+"="+Ln+"&"):Le+(ei+"=redacted&")}}}else Le=null;else Le=Ae;return"XMLHTTP REQ ("+J+") [attempt "+ye+"]: "+F+`
`+V+`
`+Le})}function _N(T,F,V,J,ye,Ae,Le){T.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+ye+"]: "+F+`
`+V+`
`+Ae+" "+Le})}function kc(T,F,V,J){T.info(function(){return"XMLHTTP TEXT ("+F+"): "+EN(T,V)+(J?" "+J:"")})}function AN(T,F){T.info(function(){return"TIMEOUT: "+F})}Fa.prototype.info=function(){};function EN(T,F){if(!T.g)return F;if(!F)return null;try{const Ae=JSON.parse(F);if(Ae){for(T=0;T<Ae.length;T++)if(Array.isArray(Ae[T])){var V=Ae[T];if(!(V.length<2)){var J=V[1];if(Array.isArray(J)&&!(J.length<1)){var ye=J[0];if(ye!="noop"&&ye!="stop"&&ye!="close")for(let Le=1;Le<J.length;Le++)J[Le]=""}}}}return de(Ae)}catch{return F}}var Pp={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},S_={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},T_;function py(){}h(py,Pe),py.prototype.g=function(){return new XMLHttpRequest},T_=new py;function Jd(T){return encodeURIComponent(String(T))}function SN(T){var F=1;T=T.split(":");const V=[];for(;F>0&&T.length;)V.push(T.shift()),F--;return T.length&&V.push(T.join(":")),V}function ol(T,F,V,J){this.j=T,this.i=F,this.l=V,this.S=J||1,this.V=new ee(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new C_}function C_(){this.i=null,this.g="",this.h=!1}var N_={},gy={};function vy(T,F,V){T.M=1,T.A=R_(ll(F)),T.u=V,T.R=!0,D_(T,null)}function D_(T,F){T.F=Date.now(),Rp(T),T.B=ll(T.A);var V=T.B,J=T.S;Array.isArray(J)||(J=[String(J)]),jO(V.i,"t",J),T.C=0,V=T.j.L,T.h=new C_,T.g=o3(T.j,V?F:null,!T.u),T.P>0&&(T.O=new G(u(T.Y,T,T.g),T.P)),F=T.V,V=T.g,J=T.ba;var ye="readystatechange";Array.isArray(ye)||(ye&&(oe[0]=ye.toString()),ye=oe);for(let Ae=0;Ae<ye.length;Ae++){const Le=K(V,ye[Ae],J||F.handleEvent,!1,F.h||F);if(!Le)break;F.g[Le.key]=Le}F=T.J?ce(T.J):{},T.u?(T.v||(T.v="POST"),F["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.B,T.v,T.u,F)):(T.v="GET",T.g.ea(T.B,T.v,null,F)),we(),my(T.i,T.v,T.B,T.l,T.S,T.u)}ol.prototype.ba=function(T){T=T.target;const F=this.O;F&&Lc(T)==3?F.j():this.Y(T)},ol.prototype.Y=function(T){try{if(T==this.g)e:{const Ot=Lc(this.g),Ln=this.g.ya(),Er=this.g.ca();if(!(Ot<3)&&(Ot!=3||this.g&&(this.h.h||this.g.la()||YO(this.g)))){this.K||Ot!=4||Ln==7||(Ln==8||Er<=0?we(3):we(2)),yy(this);var F=this.g.ca();this.X=F;var V=TN(this);if(this.o=F==200,_N(this.i,this.v,this.B,this.l,this.S,Ot,F),this.o){if(this.U&&!this.L){t:{if(this.g){var J,ye=this.g;if((J=ye.g?ye.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(J)){var Ae=J;break t}}Ae=null}if(T=Ae)kc(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Zt(this,T);else{this.o=!1,this.m=3,ze(12),Qs(this),Zd(this);break e}}if(this.R){T=!0;let ei;for(;!this.K&&this.C<V.length;)if(ei=CN(this,V),ei==gy){Ot==4&&(this.m=4,ze(14),T=!1),kc(this.i,this.l,null,"[Incomplete Response]");break}else if(ei==N_){this.m=4,ze(15),kc(this.i,this.l,V,"[Invalid Chunk]"),T=!1;break}else kc(this.i,this.l,ei,null),Zt(this,ei);if(M_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||V.length!=0||this.h.h||(this.m=1,ze(16),T=!1),this.o=this.o&&T,!T)kc(this.i,this.l,V,"[Invalid Chunked Response]"),Qs(this),Zd(this);else if(V.length>0&&!this.W){this.W=!0;var Le=this.j;Le.g==this&&Le.aa&&!Le.P&&(Le.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),kN(Le),Le.P=!0,ze(11))}}else kc(this.i,this.l,V,null),Zt(this,V);Ot==4&&Qs(this),this.o&&!this.K&&(Ot==4?n3(this.j,this):(this.o=!1,Rp(this)))}else RQ(this.g),F==400&&V.indexOf("Unknown SID")>0?(this.m=3,ze(12)):(this.m=0,ze(13)),Qs(this),Zd(this)}}}catch{}finally{}};function TN(T){if(!M_(T))return T.g.la();const F=YO(T.g);if(F==="")return"";let V="";const J=F.length,ye=Lc(T.g)==4;if(!T.h.i){if(typeof TextDecoder>"u")return Qs(T),Zd(T),"";T.h.i=new a.TextDecoder}for(let Ae=0;Ae<J;Ae++)T.h.h=!0,V+=T.h.i.decode(F[Ae],{stream:!(ye&&Ae==J-1)});return F.length=0,T.h.g+=V,T.C=0,T.h.g}function M_(T){return T.g?T.v=="GET"&&T.M!=2&&T.j.Aa:!1}function CN(T,F){var V=T.C,J=F.indexOf(`
`,V);return J==-1?gy:(V=Number(F.substring(V,J)),isNaN(V)?N_:(J+=1,J+V>F.length?gy:(F=F.slice(J,J+V),T.C=J+V,F)))}ol.prototype.cancel=function(){this.K=!0,Qs(this)};function Rp(T){T.T=Date.now()+T.H,I_(T,T.H)}function I_(T,F){if(T.D!=null)throw Error("WatchDog timer not null");T.D=vn(u(T.aa,T),F)}function yy(T){T.D&&(a.clearTimeout(T.D),T.D=null)}ol.prototype.aa=function(){this.D=null;const T=Date.now();T-this.T>=0?(AN(this.i,this.B),this.M!=2&&(we(),ze(17)),Qs(this),this.m=2,Zd(this)):I_(this,this.T-T)};function Zd(T){T.j.I==0||T.K||n3(T.j,T)}function Qs(T){yy(T);var F=T.O;F&&typeof F.dispose=="function"&&F.dispose(),T.O=null,fe(T.V),T.g&&(F=T.g,T.g=null,F.abort(),F.dispose())}function Zt(T,F){try{var V=T.j;if(V.I!=0&&(V.g==T||by(V.h,T))){if(!T.L&&by(V.h,T)&&V.I==3){try{var J=V.Ba.g.parse(F)}catch{J=null}if(Array.isArray(J)&&J.length==3){var ye=J;if(ye[0]==0){e:if(!V.v){if(V.g)if(V.g.F+3e3<T.F)L_(V),O_(V);else break e;RN(V),ze(18)}}else V.xa=ye[1],0<V.xa-V.K&&ye[2]<37500&&V.F&&V.A==0&&!V.C&&(V.C=vn(u(V.Va,V),6e3));Fc(V.h)<=1&&V.ta&&(V.ta=void 0)}else rf(V,11)}else if((T.L||V.g==T)&&L_(V),!I(F))for(ye=V.Ba.g.parse(F),F=0;F<ye.length;F++){let Er=ye[F];const ei=Er[0];if(!(ei<=V.K))if(V.K=ei,Er=Er[1],V.I==2)if(Er[0]=="c"){V.M=Er[1],V.ba=Er[2];const ul=Er[3];ul!=null&&(V.ka=ul,V.j.info("VER="+V.ka));const nf=Er[4];nf!=null&&(V.za=nf,V.j.info("SVER="+V.za));const $c=Er[5];$c!=null&&typeof $c=="number"&&$c>0&&(J=1.5*$c,V.O=J,V.j.info("backChannelRequestTimeoutMs_="+J)),J=V;const Vc=T.g;if(Vc){const V_=Vc.g?Vc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(V_){var Ae=J.h;Ae.g||V_.indexOf("spdy")==-1&&V_.indexOf("quic")==-1&&V_.indexOf("h2")==-1||(Ae.j=Ae.l,Ae.g=new Set,Ae.h&&(NN(Ae,Ae.h),Ae.h=null))}if(J.G){const FN=Vc.g?Vc.g.getResponseHeader("X-HTTP-Session-Id"):null;FN&&(J.wa=FN,Or(J.J,J.G,FN))}}V.I=3,V.l&&V.l.ra(),V.aa&&(V.T=Date.now()-T.F,V.j.info("Handshake RTT: "+V.T+"ms")),J=V;var Le=T;if(J.na=a3(J,J.L?J.ba:null,J.W),Le.L){OO(J.h,Le);var Ot=Le,Ln=J.O;Ln&&(Ot.H=Ln),Ot.D&&(yy(Ot),Rp(Ot)),J.g=Le}else t3(J);V.i.length>0&&B_(V)}else Er[0]!="stop"&&Er[0]!="close"||rf(V,7);else V.I==3&&(Er[0]=="stop"||Er[0]=="close"?Er[0]=="stop"?rf(V,7):PN(V):Er[0]!="noop"&&V.l&&V.l.qa(Er),V.A=0)}}we(4)}catch{}}var Li=class{constructor(T,F){this.g=T,this.map=F}};function P_(T){this.l=T||10,a.PerformanceNavigationTiming?(T=a.performance.getEntriesByType("navigation"),T=T.length>0&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ef(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function Fc(T){return T.h?1:T.g?T.g.size:0}function by(T,F){return T.h?T.h==F:T.g?T.g.has(F):!1}function NN(T,F){T.g?T.g.add(F):T.h=F}function OO(T,F){T.h&&T.h==F?T.h=null:T.g&&T.g.has(F)&&T.g.delete(F)}P_.prototype.cancel=function(){if(this.i=BO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function BO(T){if(T.h!=null)return T.i.concat(T.h.G);if(T.g!=null&&T.g.size!==0){let F=T.i;for(const V of T.g.values())F=F.concat(V.G);return F}return f(T.i)}var LO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xQ(T,F){if(T){T=T.split("&");for(let V=0;V<T.length;V++){const J=T[V].indexOf("=");let ye,Ae=null;J>=0?(ye=T[V].substring(0,J),Ae=T[V].substring(J+1)):ye=T[V],F(ye,Ae?decodeURIComponent(Ae.replace(/\+/g," ")):"")}}}function Oc(T){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let F;T instanceof Oc?(this.l=T.l,wy(this,T.j),this.o=T.o,this.g=T.g,xy(this,T.u),this.h=T.h,DN(this,qO(T.i)),this.m=T.m):T&&(F=String(T).match(LO))?(this.l=!1,wy(this,F[1]||"",!0),this.o=_y(F[2]||""),this.g=_y(F[3]||"",!0),xy(this,F[4]),this.h=_y(F[5]||"",!0),DN(this,F[6]||"",!0),this.m=_y(F[7]||"")):(this.l=!1,this.i=new Ey(null,this.l))}Oc.prototype.toString=function(){const T=[];var F=this.j;F&&T.push(Ay(F,$O,!0),":");var V=this.g;return(V||F=="file")&&(T.push("//"),(F=this.o)&&T.push(Ay(F,$O,!0),"@"),T.push(Jd(V).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.u,V!=null&&T.push(":",String(V))),(V=this.h)&&(this.g&&V.charAt(0)!="/"&&T.push("/"),T.push(Ay(V,V.charAt(0)=="/"?EQ:AQ,!0))),(V=this.i.toString())&&T.push("?",V),(V=this.m)&&T.push("#",Ay(V,TQ)),T.join("")},Oc.prototype.resolve=function(T){const F=ll(this);let V=!!T.j;V?wy(F,T.j):V=!!T.o,V?F.o=T.o:V=!!T.g,V?F.g=T.g:V=T.u!=null;var J=T.h;if(V)xy(F,T.u);else if(V=!!T.h){if(J.charAt(0)!="/")if(this.g&&!this.h)J="/"+J;else{var ye=F.h.lastIndexOf("/");ye!=-1&&(J=F.h.slice(0,ye+1)+J)}if(ye=J,ye==".."||ye==".")J="";else if(ye.indexOf("./")!=-1||ye.indexOf("/.")!=-1){J=ye.lastIndexOf("/",0)==0,ye=ye.split("/");const Ae=[];for(let Le=0;Le<ye.length;){const Ot=ye[Le++];Ot=="."?J&&Le==ye.length&&Ae.push(""):Ot==".."?((Ae.length>1||Ae.length==1&&Ae[0]!="")&&Ae.pop(),J&&Le==ye.length&&Ae.push("")):(Ae.push(Ot),J=!0)}J=Ae.join("/")}else J=ye}return V?F.h=J:V=T.i.toString()!=="",V?DN(F,qO(T.i)):V=!!T.m,V&&(F.m=T.m),F};function ll(T){return new Oc(T)}function wy(T,F,V){T.j=V?_y(F,!0):F,T.j&&(T.j=T.j.replace(/:$/,""))}function xy(T,F){if(F){if(F=Number(F),isNaN(F)||F<0)throw Error("Bad port number "+F);T.u=F}else T.u=null}function DN(T,F,V){F instanceof Ey?(T.i=F,CQ(T.i,T.l)):(V||(F=Ay(F,SQ)),T.i=new Ey(F,T.l))}function Or(T,F,V){T.i.set(F,V)}function R_(T){return Or(T,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),T}function _y(T,F){return T?F?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function Ay(T,F,V){return typeof T=="string"?(T=encodeURI(T).replace(F,_Q),V&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function _Q(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var $O=/[#\/\?@]/g,AQ=/[#\?:]/g,EQ=/[#\?]/g,SQ=/[#\?@]/g,TQ=/#/g;function Ey(T,F){this.h=this.g=null,this.i=T||null,this.j=!!F}function tf(T){T.g||(T.g=new Map,T.h=0,T.i&&xQ(T.i,function(F,V){T.add(decodeURIComponent(F.replace(/\+/g," ")),V)}))}r=Ey.prototype,r.add=function(T,F){tf(this),this.i=null,T=kp(this,T);let V=this.g.get(T);return V||this.g.set(T,V=[]),V.push(F),this.h+=1,this};function VO(T,F){tf(T),F=kp(T,F),T.g.has(F)&&(T.i=null,T.h-=T.g.get(F).length,T.g.delete(F))}function UO(T,F){return tf(T),F=kp(T,F),T.g.has(F)}r.forEach=function(T,F){tf(this),this.g.forEach(function(V,J){V.forEach(function(ye){T.call(F,ye,J,this)},this)},this)};function zO(T,F){tf(T);let V=[];if(typeof F=="string")UO(T,F)&&(V=V.concat(T.g.get(kp(T,F))));else for(T=Array.from(T.g.values()),F=0;F<T.length;F++)V=V.concat(T[F]);return V}r.set=function(T,F){return tf(this),this.i=null,T=kp(this,T),UO(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[F]),this.h+=1,this},r.get=function(T,F){return T?(T=zO(this,T),T.length>0?String(T[0]):F):F};function jO(T,F,V){VO(T,F),V.length>0&&(T.i=null,T.g.set(kp(T,F),f(V)),T.h+=V.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],F=Array.from(this.g.keys());for(let J=0;J<F.length;J++){var V=F[J];const ye=Jd(V);V=zO(this,V);for(let Ae=0;Ae<V.length;Ae++){let Le=ye;V[Ae]!==""&&(Le+="="+Jd(V[Ae])),T.push(Le)}}return this.i=T.join("&")};function qO(T){const F=new Ey;return F.i=T.i,T.g&&(F.g=new Map(T.g),F.h=T.h),F}function kp(T,F){return F=String(F),T.j&&(F=F.toLowerCase()),F}function CQ(T,F){F&&!T.j&&(tf(T),T.i=null,T.g.forEach(function(V,J){const ye=J.toLowerCase();J!=ye&&(VO(this,J),jO(this,ye,V))},T)),T.j=F}function NQ(T,F){const V=new Fa;if(a.Image){const J=new Image;J.onload=c(Bc,V,"TestLoadImage: loaded",!0,F,J),J.onerror=c(Bc,V,"TestLoadImage: error",!1,F,J),J.onabort=c(Bc,V,"TestLoadImage: abort",!1,F,J),J.ontimeout=c(Bc,V,"TestLoadImage: timeout",!1,F,J),a.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=T}else F(!1)}function DQ(T,F){const V=new Fa,J=new AbortController,ye=setTimeout(()=>{J.abort(),Bc(V,"TestPingServer: timeout",!1,F)},1e4);fetch(T,{signal:J.signal}).then(Ae=>{clearTimeout(ye),Ae.ok?Bc(V,"TestPingServer: ok",!0,F):Bc(V,"TestPingServer: server error",!1,F)}).catch(()=>{clearTimeout(ye),Bc(V,"TestPingServer: error",!1,F)})}function Bc(T,F,V,J,ye){try{ye&&(ye.onload=null,ye.onerror=null,ye.onabort=null,ye.ontimeout=null),J(V)}catch{}}function MQ(){this.g=new _e}function MN(T){this.i=T.Sb||null,this.h=T.ab||!1}h(MN,Pe),MN.prototype.g=function(){return new k_(this.i,this.h)};function k_(T,F){$e.call(this),this.H=T,this.o=F,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(k_,$e),r=k_.prototype,r.open=function(T,F){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=T,this.D=F,this.readyState=1,Ty(this)},r.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const F={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};T&&(F.body=T),(this.H||a).fetch(new Request(this.D,F)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Sy(this)),this.readyState=0},r.Pa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,Ty(this)),this.g&&(this.readyState=3,Ty(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;HO(this)}else T.text().then(this.Oa.bind(this),this.ga.bind(this))};function HO(T){T.j.read().then(T.Ma.bind(T)).catch(T.ga.bind(T))}r.Ma=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var F=T.value?T.value:new Uint8Array(0);(F=this.B.decode(F,{stream:!T.done}))&&(this.response=this.responseText+=F)}T.done?Sy(this):Ty(this),this.readyState==3&&HO(this)}},r.Oa=function(T){this.g&&(this.response=this.responseText=T,Sy(this))},r.Na=function(T){this.g&&(this.response=T,Sy(this))},r.ga=function(){this.g&&Sy(this)};function Sy(T){T.readyState=4,T.l=null,T.j=null,T.B=null,Ty(T)}r.setRequestHeader=function(T,F){this.A.append(T,F)},r.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],F=this.h.entries();for(var V=F.next();!V.done;)V=V.value,T.push(V[0]+": "+V[1]),V=F.next();return T.join(`\r
`)};function Ty(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(k_.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function GO(T){let F="";return H(T,function(V,J){F+=J,F+=":",F+=V,F+=`\r
`}),F}function IN(T,F,V){e:{for(J in V){var J=!1;break e}J=!0}J||(V=GO(V),typeof T=="string"?V!=null&&Jd(V):Or(T,F,V))}function sn(T){$e.call(this),this.headers=new Map,this.L=T||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(sn,$e);var IQ=/^https?$/i,PQ=["POST","PUT"];r=sn.prototype,r.Fa=function(T){this.H=T},r.ea=function(T,F,V,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);F=F?F.toUpperCase():"GET",this.D=T,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():T_.g(),this.g.onreadystatechange=d(u(this.Ca,this));try{this.B=!0,this.g.open(F,String(T),!0),this.B=!1}catch(Ae){WO(this,Ae);return}if(T=V||"",V=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var ye in J)V.set(ye,J[ye]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const Ae of J.keys())V.set(Ae,J.get(Ae));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(V.keys()).find(Ae=>Ae.toLowerCase()=="content-type"),ye=a.FormData&&T instanceof a.FormData,!(Array.prototype.indexOf.call(PQ,F,void 0)>=0)||J||ye||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ae,Le]of V)this.g.setRequestHeader(Ae,Le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(T),this.v=!1}catch(Ae){WO(this,Ae)}};function WO(T,F){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=F,T.o=5,KO(T),F_(T)}function KO(T){T.A||(T.A=!0,Ge(T,"complete"),Ge(T,"error"))}r.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=T||7,Ge(this,"complete"),Ge(this,"abort"),F_(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),F_(this,!0)),sn.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?XO(this):this.Xa())},r.Xa=function(){XO(this)};function XO(T){if(T.h&&typeof s<"u"){if(T.v&&Lc(T)==4)setTimeout(T.Ca.bind(T),0);else if(Ge(T,"readystatechange"),Lc(T)==4){T.h=!1;try{const Ae=T.ca();e:switch(Ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var F=!0;break e;default:F=!1}var V;if(!(V=F)){var J;if(J=Ae===0){let Le=String(T.D).match(LO)[1]||null;!Le&&a.self&&a.self.location&&(Le=a.self.location.protocol.slice(0,-1)),J=!IQ.test(Le?Le.toLowerCase():"")}V=J}if(V)Ge(T,"complete"),Ge(T,"success");else{T.o=6;try{var ye=Lc(T)>2?T.g.statusText:""}catch{ye=""}T.l=ye+" ["+T.ca()+"]",KO(T)}}finally{F_(T)}}}}function F_(T,F){if(T.g){T.m&&(clearTimeout(T.m),T.m=null);const V=T.g;T.g=null,F||Ge(T,"ready");try{V.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Lc(T){return T.g?T.g.readyState:0}r.ca=function(){try{return Lc(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(T){if(this.g){var F=this.g.responseText;return T&&F.indexOf(T)==0&&(F=F.substring(T.length)),Se(F)}};function YO(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.F){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function RQ(T){const F={};T=(T.g&&Lc(T)>=2&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<T.length;J++){if(I(T[J]))continue;var V=SN(T[J]);const ye=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const Ae=F[ye]||[];F[ye]=Ae,Ae.push(V)}te(F,function(J){return J.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cy(T,F,V){return V&&V.internalChannelParams&&V.internalChannelParams[T]||F}function QO(T){this.za=0,this.i=[],this.j=new Fa,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Cy("failFast",!1,T),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Cy("baseRetryDelayMs",5e3,T),this.Za=Cy("retryDelaySeedMs",1e4,T),this.Ta=Cy("forwardChannelMaxRetries",2,T),this.va=Cy("forwardChannelRequestTimeoutMs",2e4,T),this.ma=T&&T.xmlHttpFactory||void 0,this.Ua=T&&T.Rb||void 0,this.Aa=T&&T.useFetchStreams||!1,this.O=void 0,this.L=T&&T.supportsCrossDomainXhr||!1,this.M="",this.h=new P_(T&&T.concurrentRequestLimit),this.Ba=new MQ,this.S=T&&T.fastHandshake||!1,this.R=T&&T.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=T&&T.Pb||!1,T&&T.ua&&this.j.ua(),T&&T.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&T&&T.detectBufferingProxy||!1,this.ia=void 0,T&&T.longPollingTimeout&&T.longPollingTimeout>0&&(this.ia=T.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=QO.prototype,r.ka=8,r.I=1,r.connect=function(T,F,V,J){ze(0),this.W=T,this.H=F||{},V&&J!==void 0&&(this.H.OSID=V,this.H.OAID=J),this.F=this.X,this.J=a3(this,null,this.W),B_(this)};function PN(T){if(JO(T),T.I==3){var F=T.V++,V=ll(T.J);if(Or(V,"SID",T.M),Or(V,"RID",F),Or(V,"TYPE","terminate"),Ny(T,V),F=new ol(T,T.j,F),F.M=2,F.A=R_(ll(V)),V=!1,a.navigator&&a.navigator.sendBeacon)try{V=a.navigator.sendBeacon(F.A.toString(),"")}catch{}!V&&a.Image&&(new Image().src=F.A,V=!0),V||(F.g=o3(F.j,null),F.g.ea(F.A)),F.F=Date.now(),Rp(F)}s3(T)}function O_(T){T.g&&(kN(T),T.g.cancel(),T.g=null)}function JO(T){O_(T),T.v&&(a.clearTimeout(T.v),T.v=null),L_(T),T.h.cancel(),T.m&&(typeof T.m=="number"&&a.clearTimeout(T.m),T.m=null)}function B_(T){if(!ef(T.h)&&!T.m){T.m=!0;var F=T.Ea;w||E(),_||(w(),_=!0),S.add(F,T),T.D=0}}function kQ(T,F){return Fc(T.h)>=T.h.j-(T.m?1:0)?!1:T.m?(T.i=F.G.concat(T.i),!0):T.I==1||T.I==2||T.D>=(T.Sa?0:T.Ta)?!1:(T.m=vn(u(T.Ea,T,F),i3(T,T.D)),T.D++,!0)}r.Ea=function(T){if(this.m)if(this.m=null,this.I==1){if(!T){this.V=Math.floor(Math.random()*1e5),T=this.V++;const ye=new ol(this,this.j,T);let Ae=this.o;if(this.U&&(Ae?(Ae=ce(Ae),O(Ae,this.U)):Ae=this.U),this.u!==null||this.R||(ye.J=Ae,Ae=null),this.S)e:{for(var F=0,V=0;V<this.i.length;V++){t:{var J=this.i[V];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break t}J=void 0}if(J===void 0)break;if(F+=J,F>4096){F=V;break e}if(F===4096||V===this.i.length-1){F=V+1;break e}}F=1e3}else F=1e3;F=e3(this,ye,F),V=ll(this.J),Or(V,"RID",T),Or(V,"CVER",22),this.G&&Or(V,"X-HTTP-Session-Id",this.G),Ny(this,V),Ae&&(this.R?F="headers="+Jd(GO(Ae))+"&"+F:this.u&&IN(V,this.u,Ae)),NN(this.h,ye),this.Ra&&Or(V,"TYPE","init"),this.S?(Or(V,"$req",F),Or(V,"SID","null"),ye.U=!0,vy(ye,V,null)):vy(ye,V,F),this.I=2}}else this.I==3&&(T?ZO(this,T):this.i.length==0||ef(this.h)||ZO(this))};function ZO(T,F){var V;F?V=F.l:V=T.V++;const J=ll(T.J);Or(J,"SID",T.M),Or(J,"RID",V),Or(J,"AID",T.K),Ny(T,J),T.u&&T.o&&IN(J,T.u,T.o),V=new ol(T,T.j,V,T.D+1),T.u===null&&(V.J=T.o),F&&(T.i=F.G.concat(T.i)),F=e3(T,V,1e3),V.H=Math.round(T.va*.5)+Math.round(T.va*.5*Math.random()),NN(T.h,V),vy(V,J,F)}function Ny(T,F){T.H&&H(T.H,function(V,J){Or(F,J,V)}),T.l&&H({},function(V,J){Or(F,J,V)})}function e3(T,F,V){V=Math.min(T.i.length,V);const J=T.l?u(T.l.Ka,T.l,T):null;e:{var ye=T.i;let Ot=-1;for(;;){const Ln=["count="+V];Ot==-1?V>0?(Ot=ye[0].g,Ln.push("ofs="+Ot)):Ot=0:Ln.push("ofs="+Ot);let Er=!0;for(let ei=0;ei<V;ei++){var Ae=ye[ei].g;const ul=ye[ei].map;if(Ae-=Ot,Ae<0)Ot=Math.max(0,ye[ei].g-100),Er=!1;else try{Ae="req"+Ae+"_"||"";try{var Le=ul instanceof Map?ul:Object.entries(ul);for(const[nf,$c]of Le){let Vc=$c;o($c)&&(Vc=de($c)),Ln.push(Ae+nf+"="+encodeURIComponent(Vc))}}catch(nf){throw Ln.push(Ae+"type="+encodeURIComponent("_badmap")),nf}}catch{J&&J(ul)}}if(Er){Le=Ln.join("&");break e}}Le=void 0}return T=T.i.splice(0,V),F.G=T,Le}function t3(T){if(!T.g&&!T.v){T.Y=1;var F=T.Da;w||E(),_||(w(),_=!0),S.add(F,T),T.A=0}}function RN(T){return T.g||T.v||T.A>=3?!1:(T.Y++,T.v=vn(u(T.Da,T),i3(T,T.A)),T.A++,!0)}r.Da=function(){if(this.v=null,r3(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var T=4*this.T;this.j.info("BP detection timer enabled: "+T),this.B=vn(u(this.Wa,this),T)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ze(10),O_(this),r3(this))};function kN(T){T.B!=null&&(a.clearTimeout(T.B),T.B=null)}function r3(T){T.g=new ol(T,T.j,"rpc",T.Y),T.u===null&&(T.g.J=T.o),T.g.P=0;var F=ll(T.na);Or(F,"RID","rpc"),Or(F,"SID",T.M),Or(F,"AID",T.K),Or(F,"CI",T.F?"0":"1"),!T.F&&T.ia&&Or(F,"TO",T.ia),Or(F,"TYPE","xmlhttp"),Ny(T,F),T.u&&T.o&&IN(F,T.u,T.o),T.O&&(T.g.H=T.O);var V=T.g;T=T.ba,V.M=1,V.A=R_(ll(F)),V.u=null,V.R=!0,D_(V,T)}r.Va=function(){this.C!=null&&(this.C=null,O_(this),RN(this),ze(19))};function L_(T){T.C!=null&&(a.clearTimeout(T.C),T.C=null)}function n3(T,F){var V=null;if(T.g==F){L_(T),kN(T),T.g=null;var J=2}else if(by(T.h,F))V=F.G,OO(T.h,F),J=1;else return;if(T.I!=0){if(F.o)if(J==1){V=F.u?F.u.length:0,F=Date.now()-F.F;var ye=T.D;J=B(),Ge(J,new ut(J,V)),B_(T)}else t3(T);else if(ye=F.m,ye==3||ye==0&&F.X>0||!(J==1&&kQ(T,F)||J==2&&RN(T)))switch(V&&V.length>0&&(F=T.h,F.i=F.i.concat(V)),ye){case 1:rf(T,5);break;case 4:rf(T,10);break;case 3:rf(T,6);break;default:rf(T,2)}}}function i3(T,F){let V=T.Qa+Math.floor(Math.random()*T.Za);return T.isActive()||(V*=2),V*F}function rf(T,F){if(T.j.info("Error code "+F),F==2){var V=u(T.bb,T),J=T.Ua;const ye=!J;J=new Oc(J||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||wy(J,"https"),R_(J),ye?NQ(J.toString(),V):DQ(J.toString(),V)}else ze(2);T.I=0,T.l&&T.l.pa(F),s3(T),JO(T)}r.bb=function(T){T?(this.j.info("Successfully pinged google.com"),ze(2)):(this.j.info("Failed to ping google.com"),ze(1))};function s3(T){if(T.I=0,T.ja=[],T.l){const F=BO(T.h);(F.length!=0||T.i.length!=0)&&(p(T.ja,F),p(T.ja,T.i),T.h.i.length=0,f(T.i),T.i.length=0),T.l.oa()}}function a3(T,F,V){var J=V instanceof Oc?ll(V):new Oc(V);if(J.g!="")F&&(J.g=F+"."+J.g),xy(J,J.u);else{var ye=a.location;J=ye.protocol,F=F?F+"."+ye.hostname:ye.hostname,ye=+ye.port;const Ae=new Oc(null);J&&wy(Ae,J),F&&(Ae.g=F),ye&&xy(Ae,ye),V&&(Ae.h=V),J=Ae}return V=T.G,F=T.wa,V&&F&&Or(J,V,F),Or(J,"VER",T.ka),Ny(T,J),J}function o3(T,F,V){if(F&&!T.L)throw Error("Can't create secondary domain capable XhrIo object.");return F=T.Aa&&!T.ma?new sn(new MN({ab:V})):new sn(T.ma),F.Fa(T.L),F}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function l3(){}r=l3.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function $_(){}$_.prototype.g=function(T,F){return new Js(T,F)};function Js(T,F){$e.call(this),this.g=new QO(F),this.l=T,this.h=F&&F.messageUrlParams||null,T=F&&F.messageHeaders||null,F&&F.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=F&&F.initMessageHeaders||null,F&&F.messageContentType&&(T?T["X-WebChannel-Content-Type"]=F.messageContentType:T={"X-WebChannel-Content-Type":F.messageContentType}),F&&F.sa&&(T?T["X-WebChannel-Client-Profile"]=F.sa:T={"X-WebChannel-Client-Profile":F.sa}),this.g.U=T,(T=F&&F.Qb)&&!I(T)&&(this.g.u=T),this.A=F&&F.supportsCrossDomainXhr||!1,this.v=F&&F.sendRawJson||!1,(F=F&&F.httpSessionIdParam)&&!I(F)&&(this.g.G=F,T=this.h,T!==null&&F in T&&(T=this.h,F in T&&delete T[F])),this.j=new Fp(this)}h(Js,$e),Js.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Js.prototype.close=function(){PN(this.g)},Js.prototype.o=function(T){var F=this.g;if(typeof T=="string"){var V={};V.__data__=T,T=V}else this.v&&(V={},V.__data__=de(T),T=V);F.i.push(new Li(F.Ya++,T)),F.I==3&&B_(F)},Js.prototype.N=function(){this.g.l=null,delete this.j,PN(this.g),delete this.g,Js.Z.N.call(this)};function u3(T){bt.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var F=T.__sm__;if(F){e:{for(const V in F){T=V;break e}T=void 0}(this.i=T)&&(T=this.i,F=F!==null&&T in F?F[T]:void 0),this.data=F}else this.data=T}h(u3,bt);function c3(){Lt.call(this),this.status=1}h(c3,Lt);function Fp(T){this.g=T}h(Fp,l3),Fp.prototype.ra=function(){Ge(this.g,"a")},Fp.prototype.qa=function(T){Ge(this.g,new u3(T))},Fp.prototype.pa=function(T){Ge(this.g,new c3)},Fp.prototype.oa=function(){Ge(this.g,"b")},$_.prototype.createWebChannel=$_.prototype.g,Js.prototype.send=Js.prototype.o,Js.prototype.open=Js.prototype.m,Js.prototype.close=Js.prototype.close,Qj=function(){return new $_},Yj=function(){return B()},Xj=rt,DM={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Pp.NO_ERROR=0,Pp.TIMEOUT=8,Pp.HTTP_ERROR=6,oE=Pp,S_.COMPLETE="complete",Kj=S_,Ee.EventType=qe,qe.OPEN="a",qe.CLOSE="b",qe.ERROR="c",qe.MESSAGE="d",$e.prototype.listen=$e.prototype.J,Zy=Ee,sn.prototype.listenOnce=sn.prototype.K,sn.prototype.getLastError=sn.prototype.Ha,sn.prototype.getLastErrorCode=sn.prototype.ya,sn.prototype.getStatus=sn.prototype.ca,sn.prototype.getResponseJson=sn.prototype.La,sn.prototype.getResponseText=sn.prototype.la,sn.prototype.send=sn.prototype.ea,sn.prototype.setWithCredentials=sn.prototype.Fa,Wj=sn}).apply(typeof oA<"u"?oA:typeof self<"u"?self:typeof window<"u"?window:{});const eL="@firebase/firestore",tL="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yi.UNAUTHENTICATED=new Yi(null),Yi.GOOGLE_CREDENTIALS=new Yi("google-credentials-uid"),Yi.FIRST_PARTY=new Yi("first-party-uid"),Yi.MOCK_USER=new Yi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let X0="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip=new Dk("@firebase/firestore");function Hp(){return ip.logLevel}function Ke(r,...e){if(ip.logLevel<=qt.DEBUG){const t=e.map(Pk);ip.debug(`Firestore (${X0}): ${r}`,...t)}}function Ac(r,...e){if(ip.logLevel<=qt.ERROR){const t=e.map(Pk);ip.error(`Firestore (${X0}): ${r}`,...t)}}function S0(r,...e){if(ip.logLevel<=qt.WARN){const t=e.map(Pk);ip.warn(`Firestore (${X0}): ${r}`,...t)}}function Pk(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,Jj(r,n,t)}function Jj(r,e,t){let n=`FIRESTORE (${X0}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Ac(n),new Error(n)}function ar(r,e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,r||Jj(e,i,n)}function Tt(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends su{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qoe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Yi.UNAUTHENTICATED))}shutdown(){}}class Hoe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Goe{constructor(e){this.t=e,this.currentUser=Yi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ar(this.o===void 0,42304);let n=this.i;const i=l=>this.i!==n?(n=this.i,t(l)):Promise.resolve();let s=new lc;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new lc,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new lc)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ar(typeof n.accessToken=="string",31837,{l:n}),new Zj(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ar(e===null||typeof e=="string",2055,{h:e}),new Yi(e)}}class Woe{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Yi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Koe{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Woe(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Yi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Xoe{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Aa(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ar(this.o===void 0,3512);const n=s=>{s.error!=null&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Ke("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const i=s=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new rL(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ar(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new rL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yoe(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=Yoe(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<t&&(n+=e.charAt(i[s]%62))}return n}}function Ht(r,e){return r<e?-1:r>e?1:0}function MM(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const i=r.charAt(n),s=e.charAt(n);if(i!==s)return ID(i)===ID(s)?Ht(i,s):ID(i)?1:-1}return Ht(r.length,e.length)}const Qoe=55296,Joe=57343;function ID(r){const e=r.charCodeAt(0);return e>=Qoe&&e<=Joe}function T0(r,e,t){return r.length===e.length&&r.every((n,i)=>t(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL="__name__";class pl{constructor(e,t,n){t===void 0?t=0:t>e.length&&mt(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&mt(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return pl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pl?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=pl.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Ht(e.length,t.length)}static compareSegments(e,t){const n=pl.isNumericId(e),i=pl.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?pl.extractNumericId(e).compare(pl.extractNumericId(t)):MM(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hd.fromString(e.substring(4,e.length-2))}}class Rr extends pl{construct(e,t,n){return new Rr(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new He(Ce.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(i=>i.length>0))}return new Rr(t)}static emptyPath(){return new Rr([])}}const Zoe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ni extends pl{construct(e,t,n){return new Ni(e,t,n)}static isValidIdentifier(e){return Zoe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ni.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nL}static keyField(){return new Ni([nL])}static fromServerFormat(e){const t=[];let n="",i=0;const s=()=>{if(n.length===0)throw new He(Ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new He(Ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new He(Ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(n+=o,i++):(s(),i++)}if(s(),a)throw new He(Ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ni(t)}static emptyPath(){return new Ni([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.path=e}static fromPath(e){return new ot(Rr.fromString(e))}static fromName(e){return new ot(Rr.fromString(e).popFirst(5))}static empty(){return new ot(Rr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Rr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Rr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ot(new Rr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eq(r,e,t){if(!t)throw new He(Ce.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function ele(r,e,t,n){if(e===!0&&n===!0)throw new He(Ce.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function iL(r){if(!ot.isDocumentKey(r))throw new He(Ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function sL(r){if(ot.isDocumentKey(r))throw new He(Ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function tq(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function TC(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":mt(12329,{type:typeof r})}function bs(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new He(Ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=TC(r);throw new He(Ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(r,e){const t={typeString:r};return e&&(t.value=e),t}function Ux(r,e){if(!tq(r))throw new He(Ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const i=e[n].typeString,s="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const a=r[n];if(i&&typeof a!==i){t=`JSON field '${n}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${n}' field to equal '${s.value}'`;break}}if(t)throw new He(Ce.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL=-62135596800,oL=1e6;class $r{static now(){return $r.fromMillis(Date.now())}static fromDate(e){return $r.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*oL);return new $r(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new He(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new He(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<aL)throw new He(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oL}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$r._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ux(e,$r._jsonSchema))return new $r(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-aL;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$r._jsonSchemaVersion="firestore/timestamp/1.0",$r._jsonSchema={type:Fn("string",$r._jsonSchemaVersion),seconds:Fn("number"),nanoseconds:Fn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{static fromTimestamp(e){return new xt(e)}static min(){return new xt(new $r(0,0))}static max(){return new xt(new $r(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=-1;function tle(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=xt.fromTimestamp(n===1e9?new $r(t+1,0):new $r(t,n));return new bd(i,ot.empty(),e)}function rle(r){return new bd(r.readTime,r.key,w1)}class bd{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new bd(xt.min(),ot.empty(),w1)}static max(){return new bd(xt.max(),ot.empty(),w1)}}function nle(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ot.comparator(r.documentKey,e.documentKey),t!==0?t:Ht(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ile="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sle{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y0(r){if(r.code!==Ce.FAILED_PRECONDITION||r.message!==ile)throw r;Ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&mt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ne((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ne?t:Ne.resolve(t)}catch(t){return Ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ne.reject(t)}static resolve(e){return new Ne((t,n)=>{t(e)})}static reject(e){return new Ne((t,n)=>{n(e)})}static waitFor(e){return new Ne((t,n)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&t()},l=>n(l))}),a=!0,s===i&&t()})}static or(e){let t=Ne.resolve(!1);for(const n of e)t=t.next(i=>i?Ne.resolve(i):n());return t}static forEach(e,t){const n=[];return e.forEach((i,s)=>{n.push(t.call(this,i,s))}),this.waitFor(n)}static mapArray(e,t){return new Ne((n,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const u=l;t(e[u]).next(c=>{a[u]=c,++o,o===s&&n(a)},c=>i(c))}})}static doWhile(e,t){return new Ne((n,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):n()};s()})}}function ale(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Q0(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}CC.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=-1;function NC(r){return r==null}function IS(r){return r===0&&1/r==-1/0}function ole(r){return typeof r=="number"&&Number.isInteger(r)&&!IS(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rq="";function lle(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=lL(e)),e=ule(r.get(t),e);return lL(e)}function ule(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const s=r.charAt(i);switch(s){case"\0":t+="";break;case rq:t+="";break;default:t+=s}}return t}function lL(r){return r+rq+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Bd(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function nq(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,t){this.comparator=e,this.root=t||Si.EMPTY}insert(e,t){return new nn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Si.BLACK,null,null))}remove(e){return new nn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Si.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lA(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lA(this.root,e,this.comparator,!1)}getReverseIterator(){return new lA(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lA(this.root,e,this.comparator,!0)}}class lA{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Si{constructor(e,t,n,i,s){this.key=e,this.value=t,this.color=n??Si.RED,this.left=i??Si.EMPTY,this.right=s??Si.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,s){return new Si(e??this.key,t??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,n),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Si.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Si.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Si.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Si.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw mt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw mt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw mt(27949);return e+(this.isRed()?0:1)}}Si.EMPTY=null,Si.RED=!0,Si.BLACK=!1;Si.EMPTY=new class{constructor(){this.size=0}get key(){throw mt(57766)}get value(){throw mt(16141)}get color(){throw mt(16727)}get left(){throw mt(29726)}get right(){throw mt(36894)}copy(e,t,n,i,s){return this}insert(e,t,n){return new Si(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.comparator=e,this.data=new nn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cL(this.data.getIterator())}getIteratorFrom(e){return new cL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof Kn)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Kn(this.comparator);return t.data=e,t}}class cL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.fields=e,e.sort(Ni.comparator)}static empty(){return new Sa([])}unionWith(e){let t=new Kn(Ni.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Sa(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return T0(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iq extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new iq("Invalid base64 string: "+s):s}}(e);return new Fi(t)}static fromUint8Array(e){const t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new Fi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fi.EMPTY_BYTE_STRING=new Fi("");const cle=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wd(r){if(ar(!!r,39018),typeof r=="string"){let e=0;const t=cle.exec(r);if(ar(!!t,46558,{timestamp:r}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:_n(r.seconds),nanos:_n(r.nanos)}}function _n(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function xd(r){return typeof r=="string"?Fi.fromBase64String(r):Fi.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sq="server_timestamp",aq="__type__",oq="__previous_value__",lq="__local_write_time__";function Fk(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[aq])==null?void 0:n.stringValue)===sq}function DC(r){const e=r.mapValue.fields[oq];return Fk(e)?DC(e):e}function x1(r){const e=wd(r.mapValue.fields[lq].timestampValue);return new $r(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hle{constructor(e,t,n,i,s,a,o,l,u,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=c}}const PS="(default)";class _1{constructor(e,t){this.projectId=e,this.database=t||PS}static empty(){return new _1("","")}get isDefaultDatabase(){return this.database===PS}isEqual(e){return e instanceof _1&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uq="__type__",dle="__max__",uA={mapValue:{}},cq="__vector__",RS="value";function _d(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Fk(r)?4:mle(r)?9007199254740991:fle(r)?10:11:mt(28295,{value:r})}function Jl(r,e){if(r===e)return!0;const t=_d(r);if(t!==_d(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return x1(r).isEqual(x1(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=wd(i.timestampValue),o=wd(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(i,s){return xd(i.bytesValue).isEqual(xd(s.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(i,s){return _n(i.geoPointValue.latitude)===_n(s.geoPointValue.latitude)&&_n(i.geoPointValue.longitude)===_n(s.geoPointValue.longitude)}(r,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _n(i.integerValue)===_n(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=_n(i.doubleValue),o=_n(s.doubleValue);return a===o?IS(a)===IS(o):isNaN(a)&&isNaN(o)}return!1}(r,e);case 9:return T0(r.arrayValue.values||[],e.arrayValue.values||[],Jl);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(uL(a)!==uL(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Jl(a[l],o[l])))return!1;return!0}(r,e);default:return mt(52216,{left:r})}}function A1(r,e){return(r.values||[]).find(t=>Jl(t,e))!==void 0}function C0(r,e){if(r===e)return 0;const t=_d(r),n=_d(e);if(t!==n)return Ht(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ht(r.booleanValue,e.booleanValue);case 2:return function(s,a){const o=_n(s.integerValue||s.doubleValue),l=_n(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(r,e);case 3:return hL(r.timestampValue,e.timestampValue);case 4:return hL(x1(r),x1(e));case 5:return MM(r.stringValue,e.stringValue);case 6:return function(s,a){const o=xd(s),l=xd(a);return o.compareTo(l)}(r.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let u=0;u<o.length&&u<l.length;u++){const c=Ht(o[u],l[u]);if(c!==0)return c}return Ht(o.length,l.length)}(r.referenceValue,e.referenceValue);case 8:return function(s,a){const o=Ht(_n(s.latitude),_n(a.latitude));return o!==0?o:Ht(_n(s.longitude),_n(a.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return dL(r.arrayValue,e.arrayValue);case 10:return function(s,a){var d,f,p,g;const o=s.fields||{},l=a.fields||{},u=(d=o[RS])==null?void 0:d.arrayValue,c=(f=l[RS])==null?void 0:f.arrayValue,h=Ht(((p=u==null?void 0:u.values)==null?void 0:p.length)||0,((g=c==null?void 0:c.values)==null?void 0:g.length)||0);return h!==0?h:dL(u,c)}(r.mapValue,e.mapValue);case 11:return function(s,a){if(s===uA.mapValue&&a===uA.mapValue)return 0;if(s===uA.mapValue)return 1;if(a===uA.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),u=a.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let h=0;h<l.length&&h<c.length;++h){const d=MM(l[h],c[h]);if(d!==0)return d;const f=C0(o[l[h]],u[c[h]]);if(f!==0)return f}return Ht(l.length,c.length)}(r.mapValue,e.mapValue);default:throw mt(23264,{he:t})}}function hL(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ht(r,e);const t=wd(r),n=wd(e),i=Ht(t.seconds,n.seconds);return i!==0?i:Ht(t.nanos,n.nanos)}function dL(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const s=C0(t[i],n[i]);if(s)return s}return Ht(t.length,n.length)}function N0(r){return IM(r)}function IM(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const n=wd(t);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return xd(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return ot.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let n="[",i=!0;for(const s of t.values||[])i?i=!1:n+=",",n+=IM(s);return n+"]"}(r.arrayValue):"mapValue"in r?function(t){const n=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of n)s?s=!1:i+=",",i+=`${a}:${IM(t.fields[a])}`;return i+"}"}(r.mapValue):mt(61005,{value:r})}function lE(r){switch(_d(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=DC(r);return e?16+lE(e):16;case 5:return 2*r.stringValue.length;case 6:return xd(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,s)=>i+lE(s),0)}(r.arrayValue);case 10:case 11:return function(n){let i=0;return Bd(n.fields,(s,a)=>{i+=s.length+lE(a)}),i}(r.mapValue);default:throw mt(13486,{value:r})}}function fL(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function PM(r){return!!r&&"integerValue"in r}function Ok(r){return!!r&&"arrayValue"in r}function mL(r){return!!r&&"nullValue"in r}function pL(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function uE(r){return!!r&&"mapValue"in r}function fle(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[uq])==null?void 0:n.stringValue)===cq}function Ub(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Bd(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=Ub(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ub(r.arrayValue.values[t]);return e}return{...r}}function mle(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===dle}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this.value=e}static empty(){return new js({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!uE(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ub(t)}setAll(e){let t=Ni.emptyPath(),n={},i=[];e.forEach((a,o)=>{if(!t.isImmediateParentOf(o)){const l=this.getFieldsMap(t);this.applyChanges(l,n,i),n={},i=[],t=o.popLast()}a?n[o.lastSegment()]=Ub(a):i.push(o.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,i)}delete(e){const t=this.field(e.popLast());uE(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];uE(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Bd(t,(i,s)=>e[i]=s);for(const i of n)delete e[i]}clone(){return new js(Ub(this.value))}}function hq(r){const e=[];return Bd(r.fields,(t,n)=>{const i=new Ni([t]);if(uE(n)){const s=hq(n.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Sa(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,t,n,i,s,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Ji(e,0,xt.min(),xt.min(),xt.min(),js.empty(),0)}static newFoundDocument(e,t,n,i){return new Ji(e,1,t,xt.min(),n,i,0)}static newNoDocument(e,t){return new Ji(e,2,t,xt.min(),xt.min(),js.empty(),0)}static newUnknownDocument(e,t){return new Ji(e,3,t,xt.min(),xt.min(),js.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=js.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=js.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ji&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ji(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,t){this.position=e,this.inclusive=t}}function gL(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const s=e[i],a=r.position[i];if(s.field.isKeyField()?n=ot.comparator(ot.fromName(a.referenceValue),t.key):n=C0(a,t.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function vL(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Jl(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,t="asc"){this.field=e,this.dir=t}}function ple(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dq{}class kn extends dq{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new vle(e,t,n):t==="array-contains"?new wle(e,n):t==="in"?new xle(e,n):t==="not-in"?new _le(e,n):t==="array-contains-any"?new Ale(e,n):new kn(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new yle(e,n):new ble(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(C0(t,this.value)):t!==null&&_d(this.value)===_d(t)&&this.matchesComparison(C0(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return mt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jo extends dq{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Jo(e,t)}matches(e){return fq(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fq(r){return r.op==="and"}function mq(r){return gle(r)&&fq(r)}function gle(r){for(const e of r.filters)if(e instanceof Jo)return!1;return!0}function RM(r){if(r instanceof kn)return r.field.canonicalString()+r.op.toString()+N0(r.value);if(mq(r))return r.filters.map(e=>RM(e)).join(",");{const e=r.filters.map(t=>RM(t)).join(",");return`${r.op}(${e})`}}function pq(r,e){return r instanceof kn?function(n,i){return i instanceof kn&&n.op===i.op&&n.field.isEqual(i.field)&&Jl(n.value,i.value)}(r,e):r instanceof Jo?function(n,i){return i instanceof Jo&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((s,a,o)=>s&&pq(a,i.filters[o]),!0):!1}(r,e):void mt(19439)}function gq(r){return r instanceof kn?function(t){return`${t.field.canonicalString()} ${t.op} ${N0(t.value)}`}(r):r instanceof Jo?function(t){return t.op.toString()+" {"+t.getFilters().map(gq).join(" ,")+"}"}(r):"Filter"}class vle extends kn{constructor(e,t,n){super(e,t,n),this.key=ot.fromName(n.referenceValue)}matches(e){const t=ot.comparator(e.key,this.key);return this.matchesComparison(t)}}class yle extends kn{constructor(e,t){super(e,"in",t),this.keys=vq("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ble extends kn{constructor(e,t){super(e,"not-in",t),this.keys=vq("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function vq(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(n=>ot.fromName(n.referenceValue))}class wle extends kn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ok(t)&&A1(t.arrayValue,this.value)}}class xle extends kn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&A1(this.value.arrayValue,t)}}class _le extends kn{constructor(e,t){super(e,"not-in",t)}matches(e){if(A1(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!A1(this.value.arrayValue,t)}}class Ale extends kn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ok(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>A1(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ele{constructor(e,t=null,n=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function yL(r,e=null,t=[],n=[],i=null,s=null,a=null){return new Ele(r,e,t,n,i,s,a)}function Bk(r){const e=Tt(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>RM(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),NC(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>N0(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>N0(n)).join(",")),e.Te=t}return e.Te}function Lk(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!ple(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!pq(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!vL(r.startAt,e.startAt)&&vL(r.endAt,e.endAt)}function kM(r){return ot.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,t=null,n=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Sle(r,e,t,n,i,s,a,o){return new J0(r,e,t,n,i,s,a,o)}function MC(r){return new J0(r)}function bL(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function yq(r){return r.collectionGroup!==null}function zb(r){const e=Tt(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Kn(Ni.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new E1(s,n))}),t.has(Ni.keyField().canonicalString())||e.Ie.push(new E1(Ni.keyField(),n))}return e.Ie}function Gl(r){const e=Tt(r);return e.Ee||(e.Ee=Tle(e,zb(r))),e.Ee}function Tle(r,e){if(r.limitType==="F")return yL(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new E1(i.field,s)});const t=r.endAt?new kS(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new kS(r.startAt.position,r.startAt.inclusive):null;return yL(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function FM(r,e){const t=r.filters.concat([e]);return new J0(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function FS(r,e,t){return new J0(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function IC(r,e){return Lk(Gl(r),Gl(e))&&r.limitType===e.limitType}function bq(r){return`${Bk(Gl(r))}|lt:${r.limitType}`}function Gp(r){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(i=>gq(i)).join(", ")}]`),NC(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>N0(i)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>N0(i)).join(",")),`Target(${n})`}(Gl(r))}; limitType=${r.limitType})`}function PC(r,e){return e.isFoundDocument()&&function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):ot.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(r,e)&&function(n,i){for(const s of zb(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(r,e)&&function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0}(r,e)&&function(n,i){return!(n.startAt&&!function(a,o,l){const u=gL(a,o,l);return a.inclusive?u<=0:u<0}(n.startAt,zb(n),i)||n.endAt&&!function(a,o,l){const u=gL(a,o,l);return a.inclusive?u>=0:u>0}(n.endAt,zb(n),i))}(r,e)}function Cle(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function wq(r){return(e,t)=>{let n=!1;for(const i of zb(r)){const s=Nle(i,e,t);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function Nle(r,e,t){const n=r.field.isKeyField()?ot.comparator(e.key,t.key):function(s,a,o){const l=a.data.field(s),u=o.data.field(s);return l!==null&&u!==null?C0(l,u):mt(42886)}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return mt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Bd(this.inner,(t,n)=>{for(const[i,s]of n)e(i,s)})}isEmpty(){return nq(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dle=new nn(ot.comparator);function Ec(){return Dle}const xq=new nn(ot.comparator);function eb(...r){let e=xq;for(const t of r)e=e.insert(t.key,t);return e}function _q(r){let e=xq;return r.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function Sf(){return jb()}function Aq(){return jb()}function jb(){return new vp(r=>r.toString(),(r,e)=>r.isEqual(e))}const Mle=new nn(ot.comparator),Ile=new Kn(ot.comparator);function Gt(...r){let e=Ile;for(const t of r)e=e.add(t);return e}const Ple=new Kn(Ht);function Rle(){return Ple}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:IS(e)?"-0":e}}function Eq(r){return{integerValue:""+r}}function Sq(r,e){return ole(e)?Eq(e):$k(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(){this._=void 0}}function kle(r,e,t){return r instanceof S1?function(i,s){const a={fields:{[aq]:{stringValue:sq},[lq]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Fk(s)&&(s=DC(s)),s&&(a.fields[oq]=s),{mapValue:a}}(t,e):r instanceof T1?Cq(r,e):r instanceof C1?Nq(r,e):function(i,s){const a=Tq(i,s),o=wL(a)+wL(i.Ae);return PM(a)&&PM(i.Ae)?Eq(o):$k(i.serializer,o)}(r,e)}function Fle(r,e,t){return r instanceof T1?Cq(r,e):r instanceof C1?Nq(r,e):t}function Tq(r,e){return r instanceof N1?function(n){return PM(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class S1 extends RC{}class T1 extends RC{constructor(e){super(),this.elements=e}}function Cq(r,e){const t=Dq(e);for(const n of r.elements)t.some(i=>Jl(i,n))||t.push(n);return{arrayValue:{values:t}}}class C1 extends RC{constructor(e){super(),this.elements=e}}function Nq(r,e){let t=Dq(e);for(const n of r.elements)t=t.filter(i=>!Jl(i,n));return{arrayValue:{values:t}}}class N1 extends RC{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function wL(r){return _n(r.integerValue||r.doubleValue)}function Dq(r){return Ok(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mq{constructor(e,t){this.field=e,this.transform=t}}function Ole(r,e){return r.field.isEqual(e.field)&&function(n,i){return n instanceof T1&&i instanceof T1||n instanceof C1&&i instanceof C1?T0(n.elements,i.elements,Jl):n instanceof N1&&i instanceof N1?Jl(n.Ae,i.Ae):n instanceof S1&&i instanceof S1}(r.transform,e.transform)}class Ble{constructor(e,t){this.version=e,this.transformResults=t}}class ws{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ws}static exists(e){return new ws(void 0,e)}static updateTime(e){return new ws(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cE(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class kC{}function Iq(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new FC(r.key,ws.none()):new zx(r.key,r.data,ws.none());{const t=r.data,n=js.empty();let i=new Kn(Ni.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?n.delete(s):n.set(s,a),i=i.add(s)}return new Ld(r.key,n,new Sa(i.toArray()),ws.none())}}function Lle(r,e,t){r instanceof zx?function(i,s,a){const o=i.value.clone(),l=_L(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(r,e,t):r instanceof Ld?function(i,s,a){if(!cE(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=_L(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(Pq(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(r,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function qb(r,e,t,n){return r instanceof zx?function(s,a,o,l){if(!cE(s.precondition,a))return o;const u=s.value.clone(),c=AL(s.fieldTransforms,l,a);return u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(r,e,t,n):r instanceof Ld?function(s,a,o,l){if(!cE(s.precondition,a))return o;const u=AL(s.fieldTransforms,l,a),c=a.data;return c.setAll(Pq(s)),c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(r,e,t,n):function(s,a,o){return cE(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(r,e,t)}function $le(r,e){let t=null;for(const n of r.fieldTransforms){const i=e.data.field(n.field),s=Tq(n.transform,i||null);s!=null&&(t===null&&(t=js.empty()),t.set(n.field,s))}return t||null}function xL(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&T0(n,i,(s,a)=>Ole(s,a))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class zx extends kC{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ld extends kC{constructor(e,t,n,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Pq(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function _L(r,e,t){const n=new Map;ar(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let i=0;i<t.length;i++){const s=r[i],a=s.transform,o=e.data.field(s.field);n.set(s.field,Fle(a,o,t[i]))}return n}function AL(r,e,t){const n=new Map;for(const i of r){const s=i.transform,a=t.data.field(i.field);n.set(i.field,kle(s,a,e))}return n}class FC extends kC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vle extends kC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ule{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Lle(s,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=qb(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=qb(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Aq();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=t.has(i.key)?null:o;const l=Iq(a,o);l!==null&&n.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(xt.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gt())}isEqual(e){return this.batchId===e.batchId&&T0(this.mutations,e.mutations,(t,n)=>xL(t,n))&&T0(this.baseMutations,e.baseMutations,(t,n)=>xL(t,n))}}class Vk{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){ar(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=function(){return Mle}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,n[a].version);return new Vk(e,t,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zle{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jle{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dn,Jt;function qle(r){switch(r){case Ce.OK:return mt(64938);case Ce.CANCELLED:case Ce.UNKNOWN:case Ce.DEADLINE_EXCEEDED:case Ce.RESOURCE_EXHAUSTED:case Ce.INTERNAL:case Ce.UNAVAILABLE:case Ce.UNAUTHENTICATED:return!1;case Ce.INVALID_ARGUMENT:case Ce.NOT_FOUND:case Ce.ALREADY_EXISTS:case Ce.PERMISSION_DENIED:case Ce.FAILED_PRECONDITION:case Ce.ABORTED:case Ce.OUT_OF_RANGE:case Ce.UNIMPLEMENTED:case Ce.DATA_LOSS:return!0;default:return mt(15467,{code:r})}}function Rq(r){if(r===void 0)return Ac("GRPC error has no .code"),Ce.UNKNOWN;switch(r){case Dn.OK:return Ce.OK;case Dn.CANCELLED:return Ce.CANCELLED;case Dn.UNKNOWN:return Ce.UNKNOWN;case Dn.DEADLINE_EXCEEDED:return Ce.DEADLINE_EXCEEDED;case Dn.RESOURCE_EXHAUSTED:return Ce.RESOURCE_EXHAUSTED;case Dn.INTERNAL:return Ce.INTERNAL;case Dn.UNAVAILABLE:return Ce.UNAVAILABLE;case Dn.UNAUTHENTICATED:return Ce.UNAUTHENTICATED;case Dn.INVALID_ARGUMENT:return Ce.INVALID_ARGUMENT;case Dn.NOT_FOUND:return Ce.NOT_FOUND;case Dn.ALREADY_EXISTS:return Ce.ALREADY_EXISTS;case Dn.PERMISSION_DENIED:return Ce.PERMISSION_DENIED;case Dn.FAILED_PRECONDITION:return Ce.FAILED_PRECONDITION;case Dn.ABORTED:return Ce.ABORTED;case Dn.OUT_OF_RANGE:return Ce.OUT_OF_RANGE;case Dn.UNIMPLEMENTED:return Ce.UNIMPLEMENTED;case Dn.DATA_LOSS:return Ce.DATA_LOSS;default:return mt(39323,{code:r})}}(Jt=Dn||(Dn={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hle(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gle=new hd([4294967295,4294967295],0);function EL(r){const e=Hle().encode(r),t=new Gj;return t.update(e),new Uint8Array(t.digest())}function SL(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new hd([t,n],0),new hd([i,s],0)]}class Uk{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new tb(`Invalid padding: ${t}`);if(n<0)throw new tb(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new tb(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new tb(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=hd.fromNumber(this.ge)}ye(e,t,n){let i=e.add(t.multiply(hd.fromNumber(n)));return i.compare(Gle)===1&&(i=new hd([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=EL(e),[n,i]=SL(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(n,i,s);if(!this.we(a))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Uk(s,i,t);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.ge===0)return;const t=EL(e),[n,i]=SL(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(n,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class tb extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,t,n,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,jx.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new OC(xt.min(),i,new nn(Ht),Ec(),Gt())}}class jx{constructor(e,t,n,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new jx(n,t,Gt(),Gt(),Gt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e,t,n,i){this.be=e,this.removedTargetIds=t,this.key=n,this.De=i}}class kq{constructor(e,t){this.targetId=e,this.Ce=t}}class Fq{constructor(e,t,n=Fi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class TL{constructor(){this.ve=0,this.Fe=CL(),this.Me=Fi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Gt(),t=Gt(),n=Gt();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:mt(38017,{changeType:s})}}),new jx(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=CL()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ar(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Wle{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ec(),this.Je=cA(),this.He=cA(),this.Ye=new nn(Ht)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:mt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((n,i)=>{this.rt(i)&&t(i)})}st(e){const t=e.targetId,n=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(kM(s))if(n===0){const a=new ot(s.path);this.et(t,a,Ji.newNoDocument(a,xt.min()))}else ar(n===1,20013,{expectedCount:n});else{const a=this._t(t);if(a!==n){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=t;let a,o;try{a=xd(n).toUint8Array()}catch(l){if(l instanceof iq)return S0("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new Uk(a,i,s)}catch(l){return S0(l instanceof tb?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let i=0;return n.forEach(s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(t,s,null),i++)}),i}Tt(e){const t=new Map;this.ze.forEach((s,a)=>{const o=this.ot(a);if(o){if(s.current&&kM(o.target)){const l=new ot(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,Ji.newNoDocument(l,e))}s.Be&&(t.set(a,s.ke()),s.qe())}});let n=Gt();this.He.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const i=new OC(e,t,this.Ye,this.je,n);return this.je=Ec(),this.Je=cA(),this.He=cA(),this.Ye=new nn(Ht),i}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new TL,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Kn(Ht),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Kn(Ht),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ke("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new TL),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function cA(){return new nn(ot.comparator)}function CL(){return new nn(ot.comparator)}const Kle={asc:"ASCENDING",desc:"DESCENDING"},Xle={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Yle={and:"AND",or:"OR"};class Qle{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function OM(r,e){return r.useProto3Json||NC(e)?e:{value:e}}function OS(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Oq(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Jle(r,e){return OS(r,e.toTimestamp())}function Wl(r){return ar(!!r,49232),xt.fromTimestamp(function(t){const n=wd(t);return new $r(n.seconds,n.nanos)}(r))}function zk(r,e){return BM(r,e).canonicalString()}function BM(r,e){const t=function(i){return new Rr(["projects",i.projectId,"databases",i.database])}(r).child("documents");return e===void 0?t:t.child(e)}function Bq(r){const e=Rr.fromString(r);return ar(zq(e),10190,{key:e.toString()}),e}function LM(r,e){return zk(r.databaseId,e.path)}function PD(r,e){const t=Bq(e);if(t.get(1)!==r.databaseId.projectId)throw new He(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new He(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ot($q(t))}function Lq(r,e){return zk(r.databaseId,e)}function Zle(r){const e=Bq(r);return e.length===4?Rr.emptyPath():$q(e)}function $M(r){return new Rr(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function $q(r){return ar(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function NL(r,e,t){return{name:LM(r,e),fields:t.value.mapValue.fields}}function eue(r,e){let t;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:mt(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(ar(c===void 0||typeof c=="string",58123),Fi.fromBase64String(c||"")):(ar(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),Fi.fromUint8Array(c||new Uint8Array))}(r,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(u){const c=u.code===void 0?Ce.UNKNOWN:Rq(u.code);return new He(c,u.message||"")}(a);t=new Fq(n,i,s,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=PD(r,n.document.name),s=Wl(n.document.updateTime),a=n.document.createTime?Wl(n.document.createTime):xt.min(),o=new js({mapValue:{fields:n.document.fields}}),l=Ji.newFoundDocument(i,s,a,o),u=n.targetIds||[],c=n.removedTargetIds||[];t=new hE(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=PD(r,n.document),s=n.readTime?Wl(n.readTime):xt.min(),a=Ji.newNoDocument(i,s),o=n.removedTargetIds||[];t=new hE([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=PD(r,n.document),s=n.removedTargetIds||[];t=new hE([],s,i,null)}else{if(!("filter"in e))return mt(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,a=new jle(i,s),o=n.targetId;t=new kq(o,a)}}return t}function tue(r,e){let t;if(e instanceof zx)t={update:NL(r,e.key,e.value)};else if(e instanceof FC)t={delete:LM(r,e.key)};else if(e instanceof Ld)t={update:NL(r,e.key,e.data),updateMask:cue(e.fieldMask)};else{if(!(e instanceof Vle))return mt(16599,{Vt:e.type});t={verify:LM(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(s,a){const o=a.transform;if(o instanceof S1)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof T1)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof C1)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof N1)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw mt(20930,{transform:a.transform})}(0,n))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Jle(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:mt(27497)}(r,e.precondition)),t}function rue(r,e){return r&&r.length>0?(ar(e!==void 0,14353),r.map(t=>function(i,s){let a=i.updateTime?Wl(i.updateTime):Wl(s);return a.isEqual(xt.min())&&(a=Wl(s)),new Ble(a,i.transformResults||[])}(t,e))):[]}function nue(r,e){return{documents:[Lq(r,e.path)]}}function iue(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=Lq(r,i);const s=function(u){if(u.length!==0)return Uq(Jo.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const a=function(u){if(u.length!==0)return u.map(c=>function(d){return{field:Wp(d.field),direction:oue(d.dir)}}(c))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const o=OM(r,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:t,parent:i}}function sue(r){let e=Zle(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){ar(n===1,65062);const c=t.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];t.where&&(s=function(h){const d=Vq(h);return d instanceof Jo&&mq(d)?d.getFilters():[d]}(t.where));let a=[];t.orderBy&&(a=function(h){return h.map(d=>function(p){return new E1(Kp(p.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(t.orderBy));let o=null;t.limit&&(o=function(h){let d;return d=typeof h=="object"?h.value:h,NC(d)?null:d}(t.limit));let l=null;t.startAt&&(l=function(h){const d=!!h.before,f=h.values||[];return new kS(f,d)}(t.startAt));let u=null;return t.endAt&&(u=function(h){const d=!h.before,f=h.values||[];return new kS(f,d)}(t.endAt)),Sle(e,i,a,s,o,"F",l,u)}function aue(r,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mt(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Vq(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Kp(t.unaryFilter.field);return kn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Kp(t.unaryFilter.field);return kn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Kp(t.unaryFilter.field);return kn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Kp(t.unaryFilter.field);return kn.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return mt(61313);default:return mt(60726)}}(r):r.fieldFilter!==void 0?function(t){return kn.create(Kp(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return mt(58110);default:return mt(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Jo.create(t.compositeFilter.filters.map(n=>Vq(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return mt(1026)}}(t.compositeFilter.op))}(r):mt(30097,{filter:r})}function oue(r){return Kle[r]}function lue(r){return Xle[r]}function uue(r){return Yle[r]}function Wp(r){return{fieldPath:r.canonicalString()}}function Kp(r){return Ni.fromServerFormat(r.fieldPath)}function Uq(r){return r instanceof kn?function(t){if(t.op==="=="){if(pL(t.value))return{unaryFilter:{field:Wp(t.field),op:"IS_NAN"}};if(mL(t.value))return{unaryFilter:{field:Wp(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(pL(t.value))return{unaryFilter:{field:Wp(t.field),op:"IS_NOT_NAN"}};if(mL(t.value))return{unaryFilter:{field:Wp(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wp(t.field),op:lue(t.op),value:t.value}}}(r):r instanceof Jo?function(t){const n=t.getFilters().map(i=>Uq(i));return n.length===1?n[0]:{compositeFilter:{op:uue(t.op),filters:n}}}(r):mt(54877,{filter:r})}function cue(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function zq(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,t,n,i,s=xt.min(),a=xt.min(),o=Fi.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Qh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Qh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hue{constructor(e){this.yt=e}}function due(r){const e=sue({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?FS(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fue{constructor(){this.Cn=new mue}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ne.resolve()}getCollectionParents(e,t){return Ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ne.resolve()}deleteFieldIndex(e,t){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,t){return Ne.resolve()}getDocumentsMatchingTarget(e,t){return Ne.resolve(null)}getIndexType(e,t){return Ne.resolve(0)}getFieldIndexes(e,t){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,t){return Ne.resolve(bd.min())}getMinOffsetFromCollectionGroup(e,t){return Ne.resolve(bd.min())}updateCollectionGroup(e,t,n){return Ne.resolve()}updateIndexEntries(e,t){return Ne.resolve()}}class mue{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Kn(Rr.comparator),s=!i.has(n);return this.index[t]=i.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Kn(Rr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jq=41943040;class Vs{static withCacheSize(e){return new Vs(e,Vs.DEFAULT_COLLECTION_PERCENTILE,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vs.DEFAULT_COLLECTION_PERCENTILE=10,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vs.DEFAULT=new Vs(jq,Vs.DEFAULT_COLLECTION_PERCENTILE,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vs.DISABLED=new Vs(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new D0(0)}static cr(){return new D0(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML="LruGarbageCollector",pue=1048576;function IL([r,e],[t,n]){const i=Ht(r,t);return i===0?Ht(e,n):i}class gue{constructor(e){this.Ir=e,this.buffer=new Kn(IL),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();IL(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vue{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ke(ML,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Q0(t)?Ke(ML,"Ignoring IndexedDB error during garbage collection: ",t):await Y0(t)}await this.Vr(3e5)})}}class yue{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return Ne.resolve(CC.ce);const n=new gue(t);return this.mr.forEachTarget(e,i=>n.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>n.Ar(i))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(DL)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DL):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,i,s,a,o,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,a=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(n=h,o=Date.now(),this.removeTargets(e,n,t))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(u=Date.now(),Hp()<=qt.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-c}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function bue(r,e){return new yue(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wue{constructor(){this.changes=new vp(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ji.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?Ne.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xue{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ue{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(n!==null&&qb(n.mutation,i,Sa.empty(),$r.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,Gt()).next(()=>n))}getLocalViewOfDocuments(e,t,n=Gt()){const i=Sf();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,n).next(s=>{let a=eb();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const n=Sf();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Gt()))}populateOverlays(e,t,n){const i=[];return n.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{t.set(a,o)})})}computeViews(e,t,n,i){let s=Ec();const a=jb(),o=function(){return jb()}();return t.forEach((l,u)=>{const c=n.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof Ld)?s=s.insert(u.key,u):c!==void 0?(a.set(u.key,c.mutation.getFieldMask()),qb(c.mutation,u,c.mutation.getFieldMask(),$r.now())):a.set(u.key,Sa.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>a.set(u,c)),t.forEach((u,c)=>o.set(u,new xue(c,a.get(u)??null))),o))}recalculateAndSaveOverlays(e,t){const n=jb();let i=new nn((a,o)=>a-o),s=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const o of a)o.keys().forEach(l=>{const u=t.get(l);if(u===null)return;let c=n.get(l)||Sa.empty();c=o.applyToLocalView(u,c),n.set(l,c);const h=(i.get(o.batchId)||Gt()).add(l);i=i.insert(o.batchId,h)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,c=l.value,h=Aq();c.forEach(d=>{if(!s.has(d)){const f=Iq(t.get(d),n.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,h))}return Ne.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,i){return function(a){return ot.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yq(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-s.size):Ne.resolve(Sf());let o=w1,l=s;return a.next(u=>Ne.forEach(u,(c,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(c)?Ne.resolve():this.remoteDocumentCache.getEntry(e,c).next(d=>{l=l.insert(c,d)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Gt())).next(c=>({batchId:o,changes:_q(c)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ot(t)).next(n=>{let i=eb();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const s=t.collectionGroup;let a=eb();return this.indexManager.getCollectionParents(e,s).next(o=>Ne.forEach(o,l=>{const u=function(h,d){return new J0(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,i).next(c=>{c.forEach((h,d)=>{a=a.insert(h,d)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,i))).next(a=>{s.forEach((l,u)=>{const c=u.getKey();a.get(c)===null&&(a=a.insert(c,Ji.newInvalidDocument(c)))});let o=eb();return a.forEach((l,u)=>{const c=s.get(l);c!==void 0&&qb(c.mutation,u,Sa.empty(),$r.now()),PC(t,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aue{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Wl(i.createTime)}}(t)),Ne.resolve()}getNamedQuery(e,t){return Ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:due(i.bundledQuery),readTime:Wl(i.readTime)}}(t)),Ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eue{constructor(){this.overlays=new nn(ot.comparator),this.qr=new Map}getOverlay(e,t){return Ne.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Sf();return Ne.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&n.set(i,s)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((i,s)=>{this.St(e,t,s)}),Ne.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),Ne.resolve()}getOverlaysForCollection(e,t,n){const i=Sf(),s=t.length+1,a=new ot(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>n&&i.set(l.getKey(),l)}return Ne.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let s=new nn((u,c)=>u-c);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>n){let c=s.get(u.largestBatchId);c===null&&(c=Sf(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const o=Sf(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>o.set(u,c)),!(o.size()>=i)););return Ne.resolve(o)}St(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new zle(t,n));let s=this.qr.get(t);s===void 0&&(s=Gt(),this.qr.set(t,s)),this.qr.set(t,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sue{constructor(){this.sessionToken=Fi.EMPTY_BYTE_STRING}getSessionToken(e){return Ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(){this.Qr=new Kn(hi.$r),this.Ur=new Kn(hi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new hi(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.Gr(new hi(e,t))}zr(e,t){e.forEach(n=>this.removeReference(n,t))}jr(e){const t=new ot(new Rr([])),n=new hi(t,e),i=new hi(t,e+1),s=[];return this.Ur.forEachInRange([n,i],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ot(new Rr([])),n=new hi(t,e),i=new hi(t,e+1);let s=Gt();return this.Ur.forEachInRange([n,i],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new hi(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class hi{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ot.comparator(e.key,t.key)||Ht(e.Yr,t.Yr)}static Kr(e,t){return Ht(e.Yr,t.Yr)||ot.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tue{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Kn(hi.$r)}checkEmpty(e){return Ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Ule(s,t,n,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new hi(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ne.resolve(a)}lookupMutationBatch(e,t){return Ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.ei(n),s=i<0?0:i;return Ne.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(this.mutationQueue.length===0?kk:this.tr-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new hi(t,0),i=new hi(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,i],a=>{const o=this.Xr(a.Yr);s.push(o)}),Ne.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Kn(Ht);return t.forEach(i=>{const s=new hi(i,0),a=new hi(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],o=>{n=n.add(o.Yr)})}),Ne.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let s=n;ot.isDocumentKey(s)||(s=s.child(""));const a=new hi(new ot(s),0);let o=new Kn(Ht);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!n.isPrefixOf(u)&&(u.length===i&&(o=o.add(l.Yr)),!0)},a),Ne.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(n=>{const i=this.Xr(n);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ar(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Ne.forEach(t.mutations,i=>{const s=new hi(i.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new hi(t,0),i=this.Zr.firstAfterOrEqual(n);return Ne.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cue{constructor(e){this.ri=e,this.docs=function(){return new nn(ot.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),s=i?i.size:0,a=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ne.resolve(n?n.document.mutableCopy():Ji.newInvalidDocument(t))}getEntries(e,t){let n=Ec();return t.forEach(i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():Ji.newInvalidDocument(i))}),Ne.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let s=Ec();const a=t.path,o=new ot(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||nle(rle(c),n)<=0||(i.has(c.key)||PC(t,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Ne.resolve(s)}getAllFromCollectionGroup(e,t,n,i){mt(9500)}ii(e,t){return Ne.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new Nue(this)}getSize(e){return Ne.resolve(this.size)}}class Nue extends wue{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)}),Ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Due{constructor(e){this.persistence=e,this.si=new vp(t=>Bk(t),Lk),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this.oi=0,this._i=new jk,this.targetCount=0,this.ai=D0.ur()}forEachTarget(e,t){return this.si.forEach((n,i)=>t(i)),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new D0(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ne.resolve()}updateTargetData(e,t){return this.Pr(t),Ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,t,n){let i=0;const s=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),Ne.waitFor(s).next(()=>i)}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Ne.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Ne.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),Ne.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ne.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Ne.resolve(n)}containsKey(e,t){return Ne.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qq{constructor(e,t){this.ui={},this.overlays={},this.ci=new CC(0),this.li=!1,this.li=!0,this.hi=new Sue,this.referenceDelegate=e(this),this.Pi=new Due(this),this.indexManager=new fue,this.remoteDocumentCache=function(i){return new Cue(i)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new hue(t),this.Ii=new Aue(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Eue,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Tue(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Ke("MemoryPersistence","Starting transaction:",e);const i=new Mue(this.ci.next());return this.referenceDelegate.Ei(),n(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return Ne.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Mue extends sle{constructor(e){super(),this.currentSequenceNumber=e}}class qk{constructor(e){this.persistence=e,this.Ri=new jk,this.Vi=null}static mi(e){return new qk(e)}get fi(){if(this.Vi)return this.Vi;throw mt(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Ne.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.fi,n=>{const i=ot.fromPath(n);return this.gi(e,i).next(s=>{s||t.removeEntry(i,xt.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Ne.or([()=>Ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class BS{constructor(e,t){this.persistence=e,this.pi=new vp(n=>lle(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=bue(this,t)}static mi(e,t){return new BS(e,t)}Ei(){}di(e){return Ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(i=>n+i))}wr(e){let t=0;return this.pr(e,n=>{t++}).next(()=>t)}pr(e,t){return Ne.forEach(this.pi,(n,i)=>this.br(e,n,i).next(s=>s?Ne.resolve():t(i)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,a=>this.br(e,a,t).next(o=>{o||(n++,s.removeEntry(a,xt.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ne.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ne.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=lE(e.data.value)),t}br(e,t,n){return Ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return Ne.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=i}static As(e,t){let n=Gt(),i=Gt();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Hk(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iue{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pue{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Tae()?8:ale(rs())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,i){const s={result:null};return this.ys(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(e,t,i,n).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new Iue;return this.Ss(e,t,a).next(o=>{if(s.result=o,this.Vs)return this.bs(e,t,a,o.size)})}).next(()=>s.result)}bs(e,t,n,i){return n.documentReadCount<this.fs?(Hp()<=qt.DEBUG&&Ke("QueryEngine","SDK will not create cache indexes for query:",Gp(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ne.resolve()):(Hp()<=qt.DEBUG&&Ke("QueryEngine","Query:",Gp(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(Hp()<=qt.DEBUG&&Ke("QueryEngine","The SDK decides to create cache indexes for query:",Gp(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gl(t))):Ne.resolve())}ys(e,t){if(bL(t))return Ne.resolve(null);let n=Gl(t);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=FS(t,null,"F"),n=Gl(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const a=Gt(...s);return this.ps.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const u=this.Ds(t,o);return this.Cs(t,u,a,l.readTime)?this.ys(e,FS(t,null,"F")):this.vs(e,u,t,l)}))})))}ws(e,t,n,i){return bL(t)||i.isEqual(xt.min())?Ne.resolve(null):this.ps.getDocuments(e,n).next(s=>{const a=this.Ds(t,s);return this.Cs(t,a,n,i)?Ne.resolve(null):(Hp()<=qt.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Gp(t)),this.vs(e,a,t,tle(i,w1)).next(o=>o))})}Ds(e,t){let n=new Kn(wq(e));return t.forEach((i,s)=>{PC(e,s)&&(n=n.add(s))}),n}Cs(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,n){return Hp()<=qt.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",Gp(t)),this.ps.getDocumentsMatchingQuery(e,t,bd.min(),n)}vs(e,t,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk="LocalStore",Rue=3e8;class kue{constructor(e,t,n,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new nn(Ht),this.xs=new vp(s=>Bk(s),Lk),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _ue(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Fue(r,e,t,n){return new kue(r,e,t,n)}async function Hq(r,e){const t=Tt(r);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(n))).next(s=>{const a=[],o=[];let l=Gt();for(const u of i){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return t.localDocuments.getDocuments(n,l).next(u=>({Ls:u,removedBatchIds:a,addedBatchIds:o}))})})}function Oue(r,e){const t=Tt(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,u,c){const h=u.batch,d=h.keys();let f=Ne.resolve();return d.forEach(p=>{f=f.next(()=>c.getEntry(l,p)).next(g=>{const b=u.docVersions.get(p);ar(b!==null,48541),g.version.compareTo(b)<0&&(h.applyToRemoteDocument(g,u),g.isValidDocument()&&(g.setReadTime(u.commitVersion),c.addEntry(g)))})}),f.next(()=>o.mutationQueue.removeMutationBatch(l,h))}(t,n,e,s).next(()=>s.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=Gt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(n,i))})}function Gq(r){const e=Tt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function Bue(r,e){const t=Tt(r),n=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const o=[];e.targetChanges.forEach((c,h)=>{const d=i.get(h);if(!d)return;o.push(t.Pi.removeMatchingKeys(s,c.removedDocuments,h).next(()=>t.Pi.addMatchingKeys(s,c.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(Fi.EMPTY_BYTE_STRING,xt.min()).withLastLimboFreeSnapshotVersion(xt.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,n)),i=i.insert(h,f),function(g,b,v){return g.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=Rue?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(d,f,c)&&o.push(t.Pi.updateTargetData(s,f))});let l=Ec(),u=Gt();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(s,c))}),o.push(Lue(s,a,e.documentUpdates).next(c=>{l=c.ks,u=c.qs})),!n.isEqual(xt.min())){const c=t.Pi.getLastRemoteSnapshotVersion(s).next(h=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(c)}return Ne.waitFor(o).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(t.Ms=i,s))}function Lue(r,e,t){let n=Gt(),i=Gt();return t.forEach(s=>n=n.add(s)),e.getEntries(r,n).next(s=>{let a=Ec();return t.forEach((o,l)=>{const u=s.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(xt.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):Ke(Gk,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{ks:a,qs:i}})}function $ue(r,e){const t=Tt(r);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=kk),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Vue(r,e){const t=Tt(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return t.Pi.getTargetData(n,e).next(s=>s?(i=s,Ne.resolve(i)):t.Pi.allocateTargetId(n).next(a=>(i=new Qh(e,a,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=t.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n})}async function VM(r,e,t){const n=Tt(r),i=n.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",s,a=>n.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Q0(a))throw a;Ke(Gk,`Failed to update sequence numbers for target ${e}: ${a}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function PL(r,e,t){const n=Tt(r);let i=xt.min(),s=Gt();return n.persistence.runTransaction("Execute query","readwrite",a=>function(l,u,c){const h=Tt(l),d=h.xs.get(c);return d!==void 0?Ne.resolve(h.Ms.get(d)):h.Pi.getTargetData(u,c)}(n,a,Gl(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(a,e,t?i:xt.min(),t?s:Gt())).next(o=>(Uue(n,Cle(e),o),{documents:o,Qs:s})))}function Uue(r,e,t){let n=r.Os.get(e)||xt.min();t.forEach((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),r.Os.set(e,n)}class RL{constructor(){this.activeTargetIds=Rle()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zue{constructor(){this.Mo=new RL,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new RL,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jue{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL="ConnectivityMonitor";class FL{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ke(kL,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ke(kL,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hA=null;function UM(){return hA===null?hA=function(){return 268435456+Math.round(2147483648*Math.random())}():hA++,"0x"+hA.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD="RestConnection",que={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Hue{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===PS?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,t,n,i,s){const a=UM(),o=this.zo(e,t.toUriEncodedString());Ke(RD,`Sending RPC '${e}' ${a}:`,o,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(o),c=pp(u);return this.Jo(e,o,l,n,c).then(h=>(Ke(RD,`Received RPC '${e}' ${a}: `,h),h),h=>{throw S0(RD,`RPC '${e}' ${a} failed with error: `,h,"url: ",o,"request:",n),h})}Ho(e,t,n,i,s,a){return this.Go(e,t,n,i,s)}jo(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+X0}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),n&&n.headers.forEach((i,s)=>e[s]=i)}zo(e,t){const n=que[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gue{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui="WebChannelConnection";class Wue extends Hue{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,i,s){const a=UM();return new Promise((o,l)=>{const u=new Wj;u.setWithCredentials(!0),u.listenOnce(Kj.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case oE.NO_ERROR:const h=u.getResponseJson();Ke(Ui,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),o(h);break;case oE.TIMEOUT:Ke(Ui,`RPC '${e}' ${a} timed out`),l(new He(Ce.DEADLINE_EXCEEDED,"Request time out"));break;case oE.HTTP_ERROR:const d=u.getStatus();if(Ke(Ui,`RPC '${e}' ${a} failed with status:`,d,"response text:",u.getResponseText()),d>0){let f=u.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f==null?void 0:f.error;if(p&&p.status&&p.message){const g=function(v){const x=v.toLowerCase().replace(/_/g,"-");return Object.values(Ce).indexOf(x)>=0?x:Ce.UNKNOWN}(p.status);l(new He(g,p.message))}else l(new He(Ce.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new He(Ce.UNAVAILABLE,"Connection failed."));break;default:mt(9055,{l_:e,streamId:a,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Ke(Ui,`RPC '${e}' ${a} completed.`)}});const c=JSON.stringify(i);Ke(Ui,`RPC '${e}' ${a} sending request:`,i),u.send(t,"POST",c,n,15)})}T_(e,t,n){const i=UM(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Qj(),o=Yj(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,n),l.encodeInitMessageHeaders=!0;const c=s.join("");Ke(Ui,`Creating RPC '${e}' stream ${i}: ${c}`,l);const h=a.createWebChannel(c,l);this.I_(h);let d=!1,f=!1;const p=new Gue({Yo:b=>{f?Ke(Ui,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(d||(Ke(Ui,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),Ke(Ui,`RPC '${e}' stream ${i} sending:`,b),h.send(b))},Zo:()=>h.close()}),g=(b,v,x)=>{b.listen(v,y=>{try{x(y)}catch(A){setTimeout(()=>{throw A},0)}})};return g(h,Zy.EventType.OPEN,()=>{f||(Ke(Ui,`RPC '${e}' stream ${i} transport opened.`),p.o_())}),g(h,Zy.EventType.CLOSE,()=>{f||(f=!0,Ke(Ui,`RPC '${e}' stream ${i} transport closed`),p.a_(),this.E_(h))}),g(h,Zy.EventType.ERROR,b=>{f||(f=!0,S0(Ui,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),p.a_(new He(Ce.UNAVAILABLE,"The operation could not be completed")))}),g(h,Zy.EventType.MESSAGE,b=>{var v;if(!f){const x=b.data[0];ar(!!x,16349);const y=x,A=(y==null?void 0:y.error)||((v=y[0])==null?void 0:v.error);if(A){Ke(Ui,`RPC '${e}' stream ${i} received error:`,A);const w=A.status;let _=function(C){const N=Dn[C];if(N!==void 0)return Rq(N)}(w),S=A.message;_===void 0&&(_=Ce.INTERNAL,S="Unknown error status: "+w+" with message "+A.message),f=!0,p.a_(new He(_,S)),h.close()}else Ke(Ui,`RPC '${e}' stream ${i} received:`,x),p.u_(x)}}),g(o,Xj.STAT_EVENT,b=>{b.stat===DM.PROXY?Ke(Ui,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===DM.NOPROXY&&Ke(Ui,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.__()},0),p}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function kD(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(r){return new Qle(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wq{constructor(e,t,n=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-n);i>0&&Ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL="PersistentStream";class Kq{constructor(e,t,n,i,s,a,o,l){this.Mi=e,this.S_=n,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Wq(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Ce.RESOURCE_EXHAUSTED?(Ac(t.toString()),Ac("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.D_===t&&this.G_(n,i)},n=>{e(()=>{const i=new He(Ce.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{n(()=>this.z_(i))}),this.stream.onMessage(i=>{n(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ke(OL,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Ke(OL,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Kue extends Kq{constructor(e,t,n,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=eue(this.serializer,e),n=function(s){if(!("targetChange"in s))return xt.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?xt.min():a.readTime?Wl(a.readTime):xt.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=$M(this.serializer),t.addTarget=function(s,a){let o;const l=a.target;if(o=kM(l)?{documents:nue(s,l)}:{query:iue(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=Oq(s,a.resumeToken);const u=OM(s,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(xt.min())>0){o.readTime=OS(s,a.snapshotVersion.toTimestamp());const u=OM(s,a.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const n=aue(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=$M(this.serializer),t.removeTarget=e,this.q_(t)}}class Xue extends Kq{constructor(e,t,n,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ar(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ar(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ar(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=rue(e.writeResults,e.commitTime),n=Wl(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=$M(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>tue(this.serializer,n))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yue{}class Que extends Yue{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new He(Ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(e,BM(t,n),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new He(Ce.UNKNOWN,s.toString())})}Ho(e,t,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(e,BM(t,n),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new He(Ce.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Jue{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ac(t),this.aa=!1):Ke("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="RemoteStore";class Zue{constructor(e,t,n,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{n.enqueueAndForget(async()=>{yp(this)&&(Ke(sp,"Restarting streams for network reachability change."),await async function(l){const u=Tt(l);u.Ea.add(4),await qx(u),u.Ra.set("Unknown"),u.Ea.delete(4),await LC(u)}(this))})}),this.Ra=new Jue(n,i)}}async function LC(r){if(yp(r))for(const e of r.da)await e(!0)}async function qx(r){for(const e of r.da)await e(!1)}function Xq(r,e){const t=Tt(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Yk(t)?Xk(t):Z0(t).O_()&&Kk(t,e))}function Wk(r,e){const t=Tt(r),n=Z0(t);t.Ia.delete(e),n.O_()&&Yq(t,e),t.Ia.size===0&&(n.O_()?n.L_():yp(t)&&t.Ra.set("Unknown"))}function Kk(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xt.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Z0(r).Y_(e)}function Yq(r,e){r.Va.Ue(e),Z0(r).Z_(e)}function Xk(r){r.Va=new Wle({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Z0(r).start(),r.Ra.ua()}function Yk(r){return yp(r)&&!Z0(r).x_()&&r.Ia.size>0}function yp(r){return Tt(r).Ea.size===0}function Qq(r){r.Va=void 0}async function ece(r){r.Ra.set("Online")}async function tce(r){r.Ia.forEach((e,t)=>{Kk(r,e)})}async function rce(r,e){Qq(r),Yk(r)?(r.Ra.ha(e),Xk(r)):r.Ra.set("Unknown")}async function nce(r,e,t){if(r.Ra.set("Online"),e instanceof Fq&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))}(r,e)}catch(n){Ke(sp,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await LS(r,n)}else if(e instanceof hE?r.Va.Ze(e):e instanceof kq?r.Va.st(e):r.Va.tt(e),!t.isEqual(xt.min()))try{const n=await Gq(r.localStore);t.compareTo(n)>=0&&await function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.Ia.get(u);c&&s.Ia.set(u,c.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,u)=>{const c=s.Ia.get(l);if(!c)return;s.Ia.set(l,c.withResumeToken(Fi.EMPTY_BYTE_STRING,c.snapshotVersion)),Yq(s,l);const h=new Qh(c.target,l,u,c.sequenceNumber);Kk(s,h)}),s.remoteSyncer.applyRemoteEvent(o)}(r,t)}catch(n){Ke(sp,"Failed to raise snapshot:",n),await LS(r,n)}}async function LS(r,e,t){if(!Q0(e))throw e;r.Ea.add(1),await qx(r),r.Ra.set("Offline"),t||(t=()=>Gq(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{Ke(sp,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await LC(r)})}function Jq(r,e){return e().catch(t=>LS(r,t,e))}async function $C(r){const e=Tt(r),t=Ad(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:kk;for(;ice(e);)try{const i=await $ue(e.localStore,n);if(i===null){e.Ta.length===0&&t.L_();break}n=i.batchId,sce(e,i)}catch(i){await LS(e,i)}Zq(e)&&eH(e)}function ice(r){return yp(r)&&r.Ta.length<10}function sce(r,e){r.Ta.push(e);const t=Ad(r);t.O_()&&t.X_&&t.ea(e.mutations)}function Zq(r){return yp(r)&&!Ad(r).x_()&&r.Ta.length>0}function eH(r){Ad(r).start()}async function ace(r){Ad(r).ra()}async function oce(r){const e=Ad(r);for(const t of r.Ta)e.ea(t.mutations)}async function lce(r,e,t){const n=r.Ta.shift(),i=Vk.from(n,e,t);await Jq(r,()=>r.remoteSyncer.applySuccessfulWrite(i)),await $C(r)}async function uce(r,e){e&&Ad(r).X_&&await async function(n,i){if(function(a){return qle(a)&&a!==Ce.ABORTED}(i.code)){const s=n.Ta.shift();Ad(n).B_(),await Jq(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i)),await $C(n)}}(r,e),Zq(r)&&eH(r)}async function BL(r,e){const t=Tt(r);t.asyncQueue.verifyOperationInProgress(),Ke(sp,"RemoteStore received new credentials");const n=yp(t);t.Ea.add(3),await qx(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await LC(t)}async function cce(r,e){const t=Tt(r);e?(t.Ea.delete(2),await LC(t)):e||(t.Ea.add(2),await qx(t),t.Ra.set("Unknown"))}function Z0(r){return r.ma||(r.ma=function(t,n,i){const s=Tt(t);return s.sa(),new Kue(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(r.datastore,r.asyncQueue,{Xo:ece.bind(null,r),t_:tce.bind(null,r),r_:rce.bind(null,r),H_:nce.bind(null,r)}),r.da.push(async e=>{e?(r.ma.B_(),Yk(r)?Xk(r):r.Ra.set("Unknown")):(await r.ma.stop(),Qq(r))})),r.ma}function Ad(r){return r.fa||(r.fa=function(t,n,i){const s=Tt(t);return s.sa(),new Xue(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:ace.bind(null,r),r_:uce.bind(null,r),ta:oce.bind(null,r),na:lce.bind(null,r)}),r.da.push(async e=>{e?(r.fa.B_(),await $C(r)):(await r.fa.stop(),r.Ta.length>0&&(Ke(sp,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))})),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,t,n,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new lc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,s){const a=Date.now()+n,o=new Qk(e,t,a,i,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new He(Ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jk(r,e){if(Ac("AsyncQueue",`${e}: ${r}`),Q0(r))return new He(Ce.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{static emptySet(e){return new Bg(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ot.comparator(t.key,n.key):(t,n)=>ot.comparator(t.key,n.key),this.keyedMap=eb(),this.sortedSet=new nn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Bg;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(){this.ga=new nn(ot.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):mt(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class M0{constructor(e,t,n,i,s,a,o,l,u){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,n,i,s){const a=[];return t.forEach(o=>{a.push({type:0,doc:o})}),new M0(e,t,Bg.emptySet(t),a,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&IC(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hce{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class dce{constructor(){this.queries=$L(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const i=Tt(t),s=i.queries;i.queries=$L(),s.forEach((a,o)=>{for(const l of o.Sa)l.onError(n)})})(this,new He(Ce.ABORTED,"Firestore shutting down"))}}function $L(){return new vp(r=>bq(r),IC)}async function Zk(r,e){const t=Tt(r);let n=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(n=2):(s=new hce,n=e.Da()?0:1);try{switch(n){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const o=Jk(a,`Initialization of query '${Gp(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&tF(t)}async function eF(r,e){const t=Tt(r),n=e.query;let i=3;const s=t.queries.get(n);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function fce(r,e){const t=Tt(r);let n=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(n=!0);a.wa=i}}n&&tF(t)}function mce(r,e,t){const n=Tt(r),i=n.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);n.queries.delete(e)}function tF(r){r.Ca.forEach(e=>{e.next()})}var zM,VL;(VL=zM||(zM={})).Ma="default",VL.Cache="cache";class rF{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new M0(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=M0.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==zM.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tH{constructor(e){this.key=e}}class rH{constructor(e){this.key=e}}class pce{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Gt(),this.mutatedKeys=Gt(),this.eu=wq(e),this.tu=new Bg(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new LL,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,h)=>{const d=i.get(c),f=PC(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let b=!1;d&&f?d.data.isEqual(f.data)?p!==g&&(n.track({type:3,doc:f}),b=!0):this.su(d,f)||(n.track({type:2,doc:f}),b=!0,(l&&this.eu(f,l)>0||u&&this.eu(f,u)<0)&&(o=!0)):!d&&f?(n.track({type:0,doc:f}),b=!0):d&&!f&&(n.track({type:1,doc:d}),b=!0,(l||u)&&(o=!0)),b&&(f?(a=a.add(f),s=g?s.add(c):s.delete(c)):(a=a.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const c=this.query.limitType==="F"?a.last():a.first();a=a.delete(c.key),s=s.delete(c.key),n.track({type:1,doc:c})}return{tu:a,iu:n,Cs:o,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((c,h)=>function(f,p){const g=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt(20277,{Rt:b})}};return g(f)-g(p)}(c.type,h.type)||this.eu(c.doc,h.doc)),this.ou(n),i=i??!1;const o=t&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,a.length!==0||u?{snapshot:new M0(this.query,e.tu,s,a,e.mutatedKeys,l===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new LL,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Gt(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const t=[];return e.forEach(n=>{this.Xa.has(n)||t.push(new rH(n))}),this.Xa.forEach(n=>{e.has(n)||t.push(new tH(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=Gt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return M0.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const nF="SyncEngine";class gce{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class vce{constructor(e){this.key=e,this.hu=!1}}class yce{constructor(e,t,n,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new vp(o=>bq(o),IC),this.Iu=new Map,this.Eu=new Set,this.du=new nn(ot.comparator),this.Au=new Map,this.Ru=new jk,this.Vu={},this.mu=new Map,this.fu=D0.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function bce(r,e,t=!0){const n=lH(r);let i;const s=n.Tu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await nH(n,e,t,!0),i}async function wce(r,e){const t=lH(r);await nH(t,e,!0,!1)}async function nH(r,e,t,n){const i=await Vue(r.localStore,Gl(e)),s=i.targetId,a=r.sharedClientState.addLocalQueryTarget(s,t);let o;return n&&(o=await xce(r,e,s,a==="current",i.resumeToken)),r.isPrimaryClient&&t&&Xq(r.remoteStore,i),o}async function xce(r,e,t,n,i){r.pu=(h,d,f)=>async function(g,b,v,x){let y=b.view.ru(v);y.Cs&&(y=await PL(g.localStore,b.query,!1).then(({documents:S})=>b.view.ru(S,y)));const A=x&&x.targetChanges.get(b.targetId),w=x&&x.targetMismatches.get(b.targetId)!=null,_=b.view.applyChanges(y,g.isPrimaryClient,A,w);return zL(g,b.targetId,_.au),_.snapshot}(r,h,d,f);const s=await PL(r.localStore,e,!0),a=new pce(e,s.Qs),o=a.ru(s.documents),l=jx.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),u=a.applyChanges(o,r.isPrimaryClient,l);zL(r,t,u.au);const c=new gce(e,t,a);return r.Tu.set(e,c),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),u.snapshot}async function _ce(r,e,t){const n=Tt(r),i=n.Tu.get(e),s=n.Iu.get(i.targetId);if(s.length>1)return n.Iu.set(i.targetId,s.filter(a=>!IC(a,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await VM(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),t&&Wk(n.remoteStore,i.targetId),jM(n,i.targetId)}).catch(Y0)):(jM(n,i.targetId),await VM(n.localStore,i.targetId,!0))}async function Ace(r,e){const t=Tt(r),n=t.Tu.get(e),i=t.Iu.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),Wk(t.remoteStore,n.targetId))}async function Ece(r,e,t){const n=Ice(r);try{const i=await function(a,o){const l=Tt(a),u=$r.now(),c=o.reduce((f,p)=>f.add(p.key),Gt());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=Ec(),g=Gt();return l.Ns.getEntries(f,c).next(b=>{p=b,p.forEach((v,x)=>{x.isValidDocument()||(g=g.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,p)).next(b=>{h=b;const v=[];for(const x of o){const y=$le(x,h.get(x.key).overlayedDocument);y!=null&&v.push(new Ld(x.key,y,hq(y.value.mapValue),ws.exists(!0)))}return l.mutationQueue.addMutationBatch(f,u,v,o)}).next(b=>{d=b;const v=b.applyToLocalDocumentSet(h,g);return l.documentOverlayCache.saveOverlays(f,b.batchId,v)})}).then(()=>({batchId:d.batchId,changes:_q(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(a,o,l){let u=a.Vu[a.currentUser.toKey()];u||(u=new nn(Ht)),u=u.insert(o,l),a.Vu[a.currentUser.toKey()]=u}(n,i.batchId,t),await Hx(n,i.changes),await $C(n.remoteStore)}catch(i){const s=Jk(i,"Failed to persist write");t.reject(s)}}async function iH(r,e){const t=Tt(r);try{const n=await Bue(t.localStore,e);e.targetChanges.forEach((i,s)=>{const a=t.Au.get(s);a&&(ar(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?ar(a.hu,14607):i.removedDocuments.size>0&&(ar(a.hu,42227),a.hu=!1))}),await Hx(t,n,e)}catch(n){await Y0(n)}}function UL(r,e,t){const n=Tt(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.Tu.forEach((s,a)=>{const o=a.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const l=Tt(a);l.onlineState=o;let u=!1;l.queries.forEach((c,h)=>{for(const d of h.Sa)d.va(o)&&(u=!0)}),u&&tF(l)}(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Sce(r,e,t){const n=Tt(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.Au.get(e),s=i&&i.key;if(s){let a=new nn(ot.comparator);a=a.insert(s,Ji.newNoDocument(s,xt.min()));const o=Gt().add(s),l=new OC(xt.min(),new Map,new nn(Ht),a,o);await iH(n,l),n.du=n.du.remove(s),n.Au.delete(e),iF(n)}else await VM(n.localStore,e,!1).then(()=>jM(n,e,t)).catch(Y0)}async function Tce(r,e){const t=Tt(r),n=e.batch.batchId;try{const i=await Oue(t.localStore,e);aH(t,n,null),sH(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Hx(t,i)}catch(i){await Y0(i)}}async function Cce(r,e,t){const n=Tt(r);try{const i=await function(a,o){const l=Tt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,o).next(h=>(ar(h!==null,37113),c=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(n.localStore,e);aH(n,e,t),sH(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Hx(n,i)}catch(i){await Y0(i)}}function sH(r,e){(r.mu.get(e)||[]).forEach(t=>{t.resolve()}),r.mu.delete(e)}function aH(r,e,t){const n=Tt(r);let i=n.Vu[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function jM(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach(n=>{r.Ru.containsKey(n)||oH(r,n)})}function oH(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Wk(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),iF(r))}function zL(r,e,t){for(const n of t)n instanceof tH?(r.Ru.addReference(n.key,e),Nce(r,n)):n instanceof rH?(Ke(nF,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||oH(r,n.key)):mt(19791,{wu:n})}function Nce(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(Ke(nF,"New document in limbo: "+t),r.Eu.add(n),iF(r))}function iF(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ot(Rr.fromString(e)),n=r.fu.next();r.Au.set(n,new vce(t)),r.du=r.du.insert(t,n),Xq(r.remoteStore,new Qh(Gl(MC(t.path)),n,"TargetPurposeLimboResolution",CC.ce))}}async function Hx(r,e,t){const n=Tt(r),i=[],s=[],a=[];n.Tu.isEmpty()||(n.Tu.forEach((o,l)=>{a.push(n.pu(l,e,t).then(u=>{var c;if((u||t)&&n.isPrimaryClient){const h=u?!u.fromCache:(c=t==null?void 0:t.targetChanges.get(l.targetId))==null?void 0:c.current;n.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=Hk.As(l.targetId,u);s.push(h)}}))}),await Promise.all(a),n.Pu.H_(i),await async function(l,u){const c=Tt(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Ne.forEach(u,d=>Ne.forEach(d.Es,f=>c.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>Ne.forEach(d.ds,f=>c.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!Q0(h))throw h;Ke(Gk,"Failed to update sequence numbers: "+h)}for(const h of u){const d=h.targetId;if(!h.fromCache){const f=c.Ms.get(d),p=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(p);c.Ms=c.Ms.insert(d,g)}}}(n.localStore,s))}async function Dce(r,e){const t=Tt(r);if(!t.currentUser.isEqual(e)){Ke(nF,"User change. New user:",e.toKey());const n=await Hq(t.localStore,e);t.currentUser=e,function(s,a){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new He(Ce.CANCELLED,a))})}),s.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Hx(t,n.Ls)}}function Mce(r,e){const t=Tt(r),n=t.Au.get(e);if(n&&n.hu)return Gt().add(n.key);{let i=Gt();const s=t.Iu.get(e);if(!s)return i;for(const a of s){const o=t.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}function lH(r){const e=Tt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=iH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mce.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Sce.bind(null,e),e.Pu.H_=fce.bind(null,e.eventManager),e.Pu.yu=mce.bind(null,e.eventManager),e}function Ice(r){const e=Tt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Tce.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Cce.bind(null,e),e}class $S{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=BC(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Fue(this.persistence,new Pue,e.initialUser,this.serializer)}Cu(e){return new qq(qk.mi,this.serializer)}Du(e){return new zue}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$S.provider={build:()=>new $S};class Pce extends $S{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ar(this.persistence.referenceDelegate instanceof BS,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new vue(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Vs.withCacheSize(this.cacheSizeBytes):Vs.DEFAULT;return new qq(n=>BS.mi(n,t),this.serializer)}}class qM{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>UL(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Dce.bind(null,this.syncEngine),await cce(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new dce}()}createDatastore(e){const t=BC(e.databaseInfo.databaseId),n=function(s){return new Wue(s)}(e.databaseInfo);return function(s,a,o,l){return new Que(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,i,s,a,o){return new Zue(n,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,t=>UL(this.syncEngine,t,0),function(){return FL.v()?new FL:new jue}())}createSyncEngine(e,t){return function(i,s,a,o,l,u,c){const h=new yce(i,s,a,o,l,u);return c&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=Tt(i);Ke(sp,"RemoteStore shutting down."),s.Ea.add(5),await qx(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}qM.provider={build:()=>new qM};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ac("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="FirestoreClient";class Rce{constructor(e,t,n,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Yi.UNAUTHENTICATED,this.clientId=Rk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async a=>{Ke(Ed,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(Ke(Ed,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Jk(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function FD(r,e){r.asyncQueue.verifyOperationInProgress(),Ke(Ed,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(async i=>{n.isEqual(i)||(await Hq(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function jL(r,e){r.asyncQueue.verifyOperationInProgress();const t=await kce(r);Ke(Ed,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(n=>BL(e.remoteStore,n)),r.setAppCheckTokenChangeListener((n,i)=>BL(e.remoteStore,i)),r._onlineComponents=e}async function kce(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Ke(Ed,"Using user provided OfflineComponentProvider");try{await FD(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Ce.FAILED_PRECONDITION||i.code===Ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;S0("Error using user provided cache. Falling back to memory cache: "+t),await FD(r,new $S)}}else Ke(Ed,"Using default OfflineComponentProvider"),await FD(r,new Pce(void 0));return r._offlineComponents}async function uH(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Ke(Ed,"Using user provided OnlineComponentProvider"),await jL(r,r._uninitializedComponentsProvider._online)):(Ke(Ed,"Using default OnlineComponentProvider"),await jL(r,new qM))),r._onlineComponents}function Fce(r){return uH(r).then(e=>e.syncEngine)}async function VS(r){const e=await uH(r),t=e.eventManager;return t.onListen=bce.bind(null,e.syncEngine),t.onUnlisten=_ce.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=wce.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Ace.bind(null,e.syncEngine),t}function Oce(r,e,t={}){const n=new lc;return r.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,u){const c=new sF({next:d=>{c.Nu(),a.enqueueAndForget(()=>eF(s,h));const f=d.docs.has(o);!f&&d.fromCache?u.reject(new He(Ce.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&l&&l.source==="server"?u.reject(new He(Ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new rF(MC(o.path),c,{includeMetadataChanges:!0,qa:!0});return Zk(s,h)}(await VS(r),r.asyncQueue,e,t,n)),n.promise}function Bce(r,e,t={}){const n=new lc;return r.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,u){const c=new sF({next:d=>{c.Nu(),a.enqueueAndForget(()=>eF(s,h)),d.fromCache&&l.source==="server"?u.reject(new He(Ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new rF(o,c,{includeMetadataChanges:!0,qa:!0});return Zk(s,h)}(await VS(r),r.asyncQueue,e,t,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cH(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hH="firestore.googleapis.com",HL=!0;class GL{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new He(Ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hH,this.ssl=HL}else this.host=e.host,this.ssl=e.ssl??HL;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jq;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pue)throw new He(Ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ele("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cH(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new He(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new He(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new He(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class VC{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GL({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new He(Ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new He(Ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GL(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new qoe;switch(n.type){case"firstParty":return new Koe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new He(Ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=qL.get(t);n&&(Ke("ComponentProvider","Removing Datastore"),qL.delete(t),n.terminate())}(this),Promise.resolve()}}function Lce(r,e,t,n={}){var u;r=bs(r,VC);const i=pp(e),s=r._getSettings(),a={...s,emulatorOptions:r._getEmulatorOptions()},o=`${e}:${t}`;i&&(Ck(`https://${o}`),Nk("Firestore",!0)),s.host!==hH&&s.host!==o&&S0("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:i,emulatorOptions:n};if(!rp(l,a)&&(r._setSettings(l),n.mockUserToken)){let c,h;if(typeof n.mockUserToken=="string")c=n.mockUserToken,h=Yi.MOCK_USER;else{c=Vj(n.mockUserToken,(u=r._app)==null?void 0:u.options.projectId);const d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new He(Ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Yi(d)}r._authCredentials=new Hoe(new Zj(c,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Pc(this.firestore,e,this._query)}}class pn{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}toJSON(){return{type:pn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Ux(t,pn._jsonSchema))return new pn(e,n||null,new ot(Rr.fromString(t.referencePath)))}}pn._jsonSchemaVersion="firestore/documentReference/1.0",pn._jsonSchema={type:Fn("string",pn._jsonSchemaVersion),referencePath:Fn("string")};class dd extends Pc{constructor(e,t,n){super(e,t,MC(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new ot(e))}withConverter(e){return new dd(this.firestore,e,this._path)}}function Ta(r,e,...t){if(r=Tn(r),eq("collection","path",e),r instanceof VC){const n=Rr.fromString(e,...t);return sL(n),new dd(r,null,n)}{if(!(r instanceof pn||r instanceof dd))throw new He(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Rr.fromString(e,...t));return sL(n),new dd(r.firestore,null,n)}}function Xo(r,e,...t){if(r=Tn(r),arguments.length===1&&(e=Rk.newId()),eq("doc","path",e),r instanceof VC){const n=Rr.fromString(e,...t);return iL(n),new pn(r,null,new ot(n))}{if(!(r instanceof pn||r instanceof dd))throw new He(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Rr.fromString(e,...t));return iL(n),new pn(r.firestore,r instanceof dd?r.converter:null,new ot(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL="AsyncQueue";class KL{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Wq(this,"async_queue_retry"),this._c=()=>{const n=kD();n&&Ke(WL,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=kD();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=kD();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new lc;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Q0(e))throw e;Ke(WL,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,Ac("INTERNAL UNHANDLED ERROR: ",XL(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Qk.createAndSchedule(this,e,t,n,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&mt(47125,{Pc:XL(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function XL(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YL(r){return function(t,n){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1}(r,["next","error","complete"])}class Zl extends VC{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new KL,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new KL(e),this._firestoreClient=void 0,await e}}}function $ce(r,e){const t=typeof r=="object"?r:Ik(),n=typeof r=="string"?r:PS,i=SC(t,"firestore").getImmediate({identifier:n});if(!i._initialized){const s=Bj("firestore");s&&Lce(i,...s)}return i}function Gx(r){if(r._terminated)throw new He(Ce.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Vce(r),r._firestoreClient}function Vce(r){var n,i,s;const e=r._freezeSettings(),t=function(o,l,u,c){return new hle(o,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,cH(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(r._databaseId,((n=r._app)==null?void 0:n.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new Rce(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this._byteString=e}static fromBase64String(e){try{return new so(Fi.fromBase64String(e))}catch(t){throw new He(Ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new so(Fi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:so._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ux(e,so._jsonSchema))return so.fromBase64String(e.bytes)}}so._jsonSchemaVersion="firestore/bytes/1.0",so._jsonSchema={type:Fn("string",so._jsonSchemaVersion),bytes:Fn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new He(Ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ni(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new He(Ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new He(Ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Kl._jsonSchemaVersion}}static fromJSON(e){if(Ux(e,Kl._jsonSchema))return new Kl(e.latitude,e.longitude)}}Kl._jsonSchemaVersion="firestore/geoPoint/1.0",Kl._jsonSchema={type:Fn("string",Kl._jsonSchemaVersion),latitude:Fn("number"),longitude:Fn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Xl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ux(e,Xl._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Xl(e.vectorValues);throw new He(Ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xl._jsonSchemaVersion="firestore/vectorValue/1.0",Xl._jsonSchema={type:Fn("string",Xl._jsonSchemaVersion),vectorValues:Fn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uce=/^__.*__$/;class zce{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Ld(e,this.data,this.fieldMask,t,this.fieldTransforms):new zx(e,this.data,t,this.fieldTransforms)}}class dH{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Ld(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fH(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt(40011,{Ac:r})}}class aF{constructor(e,t,n,i,s,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new aF({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return US(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(fH(this.Ac)&&Uce.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class jce{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||BC(e)}Cc(e,t,n,i=!1){return new aF({Ac:e,methodName:t,Dc:n,path:Ni.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xx(r){const e=r._freezeSettings(),t=BC(r._databaseId);return new jce(r._databaseId,!!e.ignoreUndefinedProperties,t)}function oF(r,e,t,n,i,s={}){const a=r.Cc(s.merge||s.mergeFields?2:0,e,t,i);cF("Data must be an object, but it was:",a,n);const o=gH(n,a);let l,u;if(s.merge)l=new Sa(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const c=[];for(const h of s.mergeFields){const d=HM(e,h,t);if(!a.contains(d))throw new He(Ce.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);yH(c,d)||c.push(d)}l=new Sa(c),u=a.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=a.fieldTransforms;return new zce(new js(o),l,u)}class UC extends Kx{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof UC}}class lF extends Kx{_toFieldTransform(e){return new Mq(e.path,new S1)}isEqual(e){return e instanceof lF}}class uF extends Kx{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new N1(e.serializer,Sq(e.serializer,this.Fc));return new Mq(e.path,t)}isEqual(e){return e instanceof uF&&this.Fc===e.Fc}}function mH(r,e,t,n){const i=r.Cc(1,e,t);cF("Data must be an object, but it was:",i,n);const s=[],a=js.empty();Bd(n,(l,u)=>{const c=hF(e,l,t);u=Tn(u);const h=i.yc(c);if(u instanceof UC)s.push(c);else{const d=Yx(u,h);d!=null&&(s.push(c),a.set(c,d))}});const o=new Sa(s);return new dH(a,o,i.fieldTransforms)}function pH(r,e,t,n,i,s){const a=r.Cc(1,e,t),o=[HM(e,n,t)],l=[i];if(s.length%2!=0)throw new He(Ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)o.push(HM(e,s[d])),l.push(s[d+1]);const u=[],c=js.empty();for(let d=o.length-1;d>=0;--d)if(!yH(u,o[d])){const f=o[d];let p=l[d];p=Tn(p);const g=a.yc(f);if(p instanceof UC)u.push(f);else{const b=Yx(p,g);b!=null&&(u.push(f),c.set(f,b))}}const h=new Sa(u);return new dH(c,h,a.fieldTransforms)}function qce(r,e,t,n=!1){return Yx(t,r.Cc(n?4:3,e))}function Yx(r,e){if(vH(r=Tn(r)))return cF("Unsupported field value:",e,r),gH(r,e);if(r instanceof Kx)return function(n,i){if(!fH(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,i){const s=[];let a=0;for(const o of n){let l=Yx(o,i.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(r,e)}return function(n,i){if((n=Tn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Sq(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=$r.fromDate(n);return{timestampValue:OS(i.serializer,s)}}if(n instanceof $r){const s=new $r(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:OS(i.serializer,s)}}if(n instanceof Kl)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof so)return{bytesValue:Oq(i.serializer,n._byteString)};if(n instanceof pn){const s=i.databaseId,a=n.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:zk(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Xl)return function(a,o){return{mapValue:{fields:{[uq]:{stringValue:cq},[RS]:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return $k(o.serializer,u)})}}}}}}(n,i);throw i.Sc(`Unsupported field value: ${TC(n)}`)}(r,e)}function gH(r,e){const t={};return nq(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bd(r,(n,i)=>{const s=Yx(i,e.mc(n));s!=null&&(t[n]=s)}),{mapValue:{fields:t}}}function vH(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof $r||r instanceof Kl||r instanceof so||r instanceof pn||r instanceof Kx||r instanceof Xl)}function cF(r,e,t){if(!vH(t)||!tq(t)){const n=TC(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function HM(r,e,t){if((e=Tn(e))instanceof Wx)return e._internalPath;if(typeof e=="string")return hF(r,e);throw US("Field path arguments must be of type string or ",r,!1,void 0,t)}const Hce=new RegExp("[~\\*/\\[\\]]");function hF(r,e,t){if(e.search(Hce)>=0)throw US(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Wx(...e.split("."))._internalPath}catch{throw US(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function US(r,e,t,n,i){const s=n&&!n.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${n}`),a&&(l+=` in document ${i}`),l+=")"),new He(Ce.INVALID_ARGUMENT,o+r+l)}function yH(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bH{constructor(e,t,n,i,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Gce(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Gce extends bH{data(){return super.data()}}function zC(r,e){return typeof e=="string"?hF(r,e):e instanceof Wx?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wH(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new He(Ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dF{}class fF extends dF{}function ey(r,e,...t){let n=[];e instanceof dF&&n.push(e),n=n.concat(t),function(s){const a=s.filter(l=>l instanceof mF).length,o=s.filter(l=>l instanceof jC).length;if(a>1||a>0&&o>0)throw new He(Ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)r=i._apply(r);return r}class jC extends fF{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new jC(e,t,n)}_apply(e){const t=this._parse(e);return _H(e._query,t),new Pc(e.firestore,e.converter,FM(e._query,t))}_parse(e){const t=Xx(e.firestore);return function(s,a,o,l,u,c,h){let d;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new He(Ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){JL(h,c);const p=[];for(const g of h)p.push(QL(l,s,g));d={arrayValue:{values:p}}}else d=QL(l,s,h)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||JL(h,c),d=qce(o,a,h,c==="in"||c==="not-in");return kn.create(u,c,d)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function xH(r,e,t){const n=e,i=zC("where",r);return jC._create(i,n,t)}class mF extends dF{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new mF(e,t)}_parse(e){const t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:Jo.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)_H(a,l),a=FM(a,l)}(e._query,t),new Pc(e.firestore,e.converter,FM(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class pF extends fF{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new pF(e,t)}_apply(e){const t=function(i,s,a){if(i.startAt!==null)throw new He(Ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new He(Ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new E1(s,a)}(e._query,this._field,this._direction);return new Pc(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new J0(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function qC(r,e="asc"){const t=e,n=zC("orderBy",r);return pF._create(n,t)}class gF extends fF{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new gF(e,t,n)}_apply(e){return new Pc(e.firestore,e.converter,FS(e._query,this._limit,this._limitType))}}function Wce(r){return gF._create("limit",r,"F")}function QL(r,e,t){if(typeof(t=Tn(t))=="string"){if(t==="")throw new He(Ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yq(e)&&t.indexOf("/")!==-1)throw new He(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Rr.fromString(t));if(!ot.isDocumentKey(n))throw new He(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return fL(r,new ot(n))}if(t instanceof pn)return fL(r,t._key);throw new He(Ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${TC(t)}.`)}function JL(r,e){if(!Array.isArray(r)||r.length===0)throw new He(Ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _H(r,e){const t=function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(r.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new He(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new He(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Kce{convertValue(e,t="none"){switch(_d(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _n(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw mt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Bd(e,(i,s)=>{n[i]=this.convertValue(s,t)}),n}convertVectorValue(e){var n,i,s;const t=(s=(i=(n=e.fields)==null?void 0:n[RS].arrayValue)==null?void 0:i.values)==null?void 0:s.map(a=>_n(a.doubleValue));return new Xl(t)}convertGeoPoint(e){return new Kl(_n(e.latitude),_n(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=DC(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(x1(e));default:return null}}convertTimestamp(e){const t=wd(e);return new $r(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Rr.fromString(e);ar(zq(n),9688,{name:e});const i=new _1(n.get(1),n.get(3)),s=new ot(n.popFirst(5));return i.isEqual(t)||Ac(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vF(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class rb{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wm extends bH{constructor(e,t,n,i,s,a){super(e,t,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new dE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(zC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new He(Ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Wm._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Wm._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wm._jsonSchema={type:Fn("string",Wm._jsonSchemaVersion),bundleSource:Fn("string","DocumentSnapshot"),bundleName:Fn("string"),bundle:Fn("string")};class dE extends Wm{data(e={}){return super.data(e)}}class Km{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new rb(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new dE(this._firestore,this._userDataWriter,n.key,n,new rb(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new He(Ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const l=new dE(i._firestore,i._userDataWriter,o.doc.key,o.doc,new rb(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new dE(i._firestore,i._userDataWriter,o.doc.key,o.doc,new rb(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),c=a.indexOf(o.doc.key)),{type:Xce(o.type),doc:l,oldIndex:u,newIndex:c}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new He(Ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Km._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rk.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Xce(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(r){r=bs(r,pn);const e=bs(r.firestore,Zl);return Oce(Gx(e),r._key).then(t=>AH(e,r,t))}Km._jsonSchemaVersion="firestore/querySnapshot/1.0",Km._jsonSchema={type:Fn("string",Km._jsonSchemaVersion),bundleSource:Fn("string","QuerySnapshot"),bundleName:Fn("string"),bundle:Fn("string")};class bF extends Kce{constructor(e){super(),this.firestore=e}convertBytes(e){return new so(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,t)}}function Qx(r){r=bs(r,Pc);const e=bs(r.firestore,Zl),t=Gx(e),n=new bF(e);return wH(r._query),Bce(t,r._query).then(i=>new Km(e,n,r,i))}function GM(r,e,t){r=bs(r,pn);const n=bs(r.firestore,Zl),i=vF(r.converter,e,t);return Zx(n,[oF(Xx(n),"setDoc",r._key,i,r.converter!==null,t).toMutation(r._key,ws.none())])}function pf(r,e,t,...n){r=bs(r,pn);const i=bs(r.firestore,Zl),s=Xx(i);let a;return a=typeof(e=Tn(e))=="string"||e instanceof Wx?pH(s,"updateDoc",r._key,e,t,n):mH(s,"updateDoc",r._key,e),Zx(i,[a.toMutation(r._key,ws.exists(!0))])}function zS(r){return Zx(bs(r.firestore,Zl),[new FC(r._key,ws.none())])}function Jx(r,e){const t=bs(r.firestore,Zl),n=Xo(r),i=vF(r.converter,e);return Zx(t,[oF(Xx(r.firestore),"addDoc",n._key,i,r.converter!==null,{}).toMutation(n._key,ws.exists(!1))]).then(()=>n)}function WM(r,...e){var l,u,c;r=Tn(r);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||YL(e[n])||(t=e[n++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(YL(e[n])){const h=e[n];e[n]=(l=h.next)==null?void 0:l.bind(h),e[n+1]=(u=h.error)==null?void 0:u.bind(h),e[n+2]=(c=h.complete)==null?void 0:c.bind(h)}let s,a,o;if(r instanceof pn)a=bs(r.firestore,Zl),o=MC(r._key.path),s={next:h=>{e[n]&&e[n](AH(a,r,h))},error:e[n+1],complete:e[n+2]};else{const h=bs(r,Pc);a=bs(h.firestore,Zl),o=h._query;const d=new bF(a);s={next:f=>{e[n]&&e[n](new Km(a,d,h,f))},error:e[n+1],complete:e[n+2]},wH(r._query)}return function(d,f,p,g){const b=new sF(g),v=new rF(f,b,p);return d.asyncQueue.enqueueAndForget(async()=>Zk(await VS(d),v)),()=>{b.Nu(),d.asyncQueue.enqueueAndForget(async()=>eF(await VS(d),v))}}(Gx(a),o,i,s)}function Zx(r,e){return function(n,i){const s=new lc;return n.asyncQueue.enqueueAndForget(async()=>Ece(await Fce(n),i,s)),s.promise}(Gx(r),e)}function AH(r,e,t){const n=t.docs.get(e._key),i=new bF(r);return new Wm(r,i,e._key,n,new rb(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yce{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Xx(e)}set(e,t,n){this._verifyNotCommitted();const i=OD(e,this._firestore),s=vF(i.converter,t,n),a=oF(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,n);return this._mutations.push(a.toMutation(i._key,ws.none())),this}update(e,t,n,...i){this._verifyNotCommitted();const s=OD(e,this._firestore);let a;return a=typeof(t=Tn(t))=="string"||t instanceof Wx?pH(this._dataReader,"WriteBatch.update",s._key,t,n,i):mH(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,ws.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=OD(e,this._firestore);return this._mutations=this._mutations.concat(new FC(t._key,ws.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new He(Ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function OD(r,e){if((r=Tn(r)).firestore!==e)throw new He(Ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function In(){return new lF("serverTimestamp")}function Qce(r){return new uF("increment",r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jce(r){return Gx(r=bs(r,Zl)),new Yce(r,e=>Zx(r,e))}(function(e,t=!0){(function(i){X0=i})(gp),np(new yd("firestore",(n,{instanceIdentifier:i,options:s})=>{const a=n.getProvider("app").getImmediate(),o=new Zl(new Goe(n.getProvider("auth-internal")),new Xoe(a,n.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new He(Ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _1(u.options.projectId,c)}(a,i),a);return s={useFetchStreams:t,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Hl(eL,tL,e),Hl(eL,tL,"esm2020")})();const fs=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),KM=[.001,0,0,.001,0,0],BD=1.35,ya={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Jc={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},D1="pdfjs_internal_editor_",Dt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Kt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Zce={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},XM={TRIANGLES:1,LATTICE:2},vi={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},fE={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Nn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Xp={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},HC={ERRORS:0,WARNINGS:1,INFOS:5},M1={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Ly={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},ehe={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let GC=HC.WARNINGS;function the(r){Number.isInteger(r)&&(GC=r)}function rhe(){return GC}function WC(r){GC>=HC.INFOS&&console.info(`Info: ${r}`)}function Et(r){GC>=HC.WARNINGS&&console.warn(`Warning: ${r}`)}function Dr(r){throw new Error(r)}function Xt(r,e){r||Dr(e)}function nhe(r){switch(r==null?void 0:r.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function EH(r,e=null,t=null){if(!r)return null;if(t&&typeof r=="string"){if(t.addDefaultProtocol&&r.startsWith("www.")){const i=r.match(/\./g);(i==null?void 0:i.length)>=2&&(r=`http://${r}`)}if(t.tryConvertEncoding)try{r=lhe(r)}catch{}}const n=e?URL.parse(r,e):URL.parse(r);return nhe(n)?n:null}function SH(r,e,t=!1){const n=URL.parse(r);return n?(n.hash=e,n.href):t&&EH(r,"http://example.com")?r.split("#",1)[0]+`${e?`#${e}`:""}`:""}function St(r,e,t,n=!1){return Object.defineProperty(r,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const bp=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class ZL extends bp{constructor(e,t){super(e,"PasswordException"),this.code=t}}class LD extends bp{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class YM extends bp{constructor(e){super(e,"InvalidPDFException")}}class jS extends bp{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class ihe extends bp{constructor(e){super(e,"FormatError")}}class Sd extends bp{constructor(e){super(e,"AbortException")}}function TH(r){(typeof r!="object"||(r==null?void 0:r.length)===void 0)&&Dr("Invalid argument for bytesToString");const e=r.length,t=8192;if(e<t)return String.fromCharCode.apply(null,r);const n=[];for(let i=0;i<e;i+=t){const s=Math.min(i+t,e),a=r.subarray(i,s);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function e_(r){typeof r!="string"&&Dr("Invalid argument for stringToBytes");const e=r.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=r.charCodeAt(n)&255;return t}function she(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function ahe(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function ohe(){try{return new Function(""),!0}catch{return!1}}class Ri{static get isLittleEndian(){return St(this,"isLittleEndian",ahe())}static get isEvalSupported(){return St(this,"isEvalSupported",ohe())}static get isOffscreenCanvasSupported(){return St(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return St(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return St(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return St(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return St(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return St(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const $D=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));var dc,mE,QM;class et{static makeHexColor(e,t,n){return`#${$D[e]}${$D[t]}${$D[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const i=e[n],s=e[n+1];e[n]=i*t[0]+s*t[2]+t[4],e[n+1]=i*t[1]+s*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const i=t[0],s=t[1],a=t[2],o=t[3],l=t[4],u=t[5];for(let c=0;c<6;c+=2){const h=e[n+c],d=e[n+c+1];e[n+c]=h*i+d*a+l,e[n+c+1]=h*s+d*o+u}}static applyInverseTransform(e,t){const n=e[0],i=e[1],s=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/s,e[1]=(-n*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/s}static axialAlignedBoundingBox(e,t,n){const i=t[0],s=t[1],a=t[2],o=t[3],l=t[4],u=t[5],c=e[0],h=e[1],d=e[2],f=e[3];let p=i*c+l,g=p,b=i*d+l,v=b,x=o*h+u,y=x,A=o*f+u,w=A;if(s!==0||a!==0){const _=s*c,S=s*d,E=a*h,C=a*f;p+=E,v+=E,b+=C,g+=C,x+=_,w+=_,A+=S,y+=S}n[0]=Math.min(n[0],p,b,g,v),n[1]=Math.min(n[1],x,A,y,w),n[2]=Math.max(n[2],p,b,g,v),n[3]=Math.max(n[3],x,A,y,w)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],i=e[1],s=e[2],a=e[3],o=n**2+i**2,l=n*s+i*a,u=s**2+a**2,c=(o+u)/2,h=Math.sqrt(c**2-(o*u-l**2));t[0]=Math.sqrt(c+h||1),t[1]=Math.sqrt(c-h||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>a?null:[n,s,i,a]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,i,s){s[0]=Math.min(s[0],e,n),s[1]=Math.min(s[1],t,i),s[2]=Math.max(s[2],e,n),s[3]=Math.max(s[3],t,i)}static bezierBoundingBox(e,t,n,i,s,a,o,l,u){u[0]=Math.min(u[0],e,o),u[1]=Math.min(u[1],t,l),u[2]=Math.max(u[2],e,o),u[3]=Math.max(u[3],t,l),j(this,dc,QM).call(this,e,n,s,o,t,i,a,l,3*(-e+3*(n-s)+o),6*(e-2*n+s),3*(n-e),u),j(this,dc,QM).call(this,e,n,s,o,t,i,a,l,3*(-t+3*(i-a)+l),6*(t-2*i+a),3*(i-t),u)}}dc=new WeakSet,mE=function(e,t,n,i,s,a,o,l,u,c){if(u<=0||u>=1)return;const h=1-u,d=u*u,f=d*u,p=h*(h*(h*e+3*u*t)+3*d*n)+f*i,g=h*(h*(h*s+3*u*a)+3*d*o)+f*l;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],g),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],g)},QM=function(e,t,n,i,s,a,o,l,u,c,h,d){if(Math.abs(u)<1e-12){Math.abs(c)>=1e-12&&j(this,dc,mE).call(this,e,t,n,i,s,a,o,l,-h/c,d);return}const f=c**2-4*h*u;if(f<0)return;const p=Math.sqrt(f),g=2*u;j(this,dc,mE).call(this,e,t,n,i,s,a,o,l,(-c+p)/g,d),j(this,dc,mE).call(this,e,t,n,i,s,a,o,l,(-c-p)/g,d)},$(et,dc);function lhe(r){return decodeURIComponent(escape(r))}let VD=null,e5=null;function uhe(r){return VD||(VD=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,e5=new Map([["","t"]])),r.replaceAll(VD,(e,t,n)=>t?t.normalize("NFKC"):e5.get(n))}function CH(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),TH(r)}const wg="pdfjs_internal_id_";function che(r,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,i,...s]=t;if(!r(n)&&!Number.isInteger(n)||!e(i))return!1;const a=s.length;let o=!0;switch(i.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;o=!1;break;default:return!1}for(const l of s)if(!(typeof l=="number"||o&&l===null))return!1;return!0}function ms(r,e,t){return Math.min(Math.max(r,e),t)}function NH(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(TH(r))}function hhe(r){return Uint8Array.fromBase64?Uint8Array.fromBase64(r):e_(atob(r))}typeof Promise.try!="function"&&(Promise.try=function(r,...e){return new Promise(t=>{t(r(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((e,t)=>e+t,0)});class I1{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function i(s){var l;if(!s)return;let a=null;const o=s.name;if(o==="#text")a=s.value;else if(I1.shouldBuildText(o))(l=s==null?void 0:s.attributes)!=null&&l.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&t.push({str:a}),!!s.children)for(const u of s.children)i(u)}return i(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class DH{static setupStorage(e,t,n,i,s){const a=i.getValue(t,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),s==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",o=>{i.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),s==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of n.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:i,linkService:s}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${i}`);for(const[l,u]of Object.entries(a))if(u!=null)switch(l){case"class":u.length&&e.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,u)}o&&s.addLinkAttributes(e,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(e,a.dataId,t,n)}static render(e){var h,d;const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,s=e.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:s,linkService:n});const o=s!=="richText",l=e.div;if(l.append(a),e.viewport){const f=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=f}o&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const f=document.createTextNode(i.value);a.append(f),o&&I1.shouldBuildText(i.name)&&u.push(f)}return{textDivs:u}}const c=[[i,-1,a]];for(;c.length>0;){const[f,p,g]=c.at(-1);if(p+1===f.children.length){c.pop();continue}const b=f.children[++c.at(-1)[1]];if(b===null)continue;const{name:v}=b;if(v==="#text"){const y=document.createTextNode(b.value);u.push(y),g.append(y);continue}const x=(h=b==null?void 0:b.attributes)!=null&&h.xmlns?document.createElementNS(b.attributes.xmlns,v):document.createElement(v);if(g.append(x),b.attributes&&this.setAttributes({html:x,element:b,storage:t,intent:s,linkService:n}),((d=b.children)==null?void 0:d.length)>0)c.push([b,-1,x]);else if(b.value){const y=document.createTextNode(b.value);o&&I1.shouldBuildText(v)&&u.push(y),x.append(y)}}for(const f of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const fu="http://www.w3.org/2000/svg",vf=class vf{};Re(vf,"CSS",96),Re(vf,"PDF",72),Re(vf,"PDF_TO_CSS_UNITS",vf.CSS/vf.PDF);let Td=vf;async function t_(r,e="text"){if(nb(r,document.baseURI)){const t=await fetch(r);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const i=new XMLHttpRequest;i.open("GET",r,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class r_{constructor({viewBox:e,userUnit:t,scale:n,rotation:i,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=i,this.offsetX=s,this.offsetY=a,n*=t;const l=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let c,h,d,f;switch(i%=360,i<0&&(i+=360),i){case 180:c=-1,h=0,d=0,f=1;break;case 90:c=0,h=1,d=1,f=0;break;case 270:c=0,h=-1,d=-1,f=0;break;case 0:c=1,h=0,d=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,f=-f);let p,g,b,v;c===0?(p=Math.abs(u-e[1])*n+s,g=Math.abs(l-e[0])*n+a,b=(e[3]-e[1])*n,v=(e[2]-e[0])*n):(p=Math.abs(l-e[0])*n+s,g=Math.abs(u-e[1])*n+a,b=(e[2]-e[0])*n,v=(e[3]-e[1])*n),this.transform=[c*n,h*n,d*n,f*n,p-c*n*l-d*n*u,g-h*n*l-f*n*u],this.width=b,this.height=v}get rawDims(){const e=this.viewBox;return St(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new r_({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:s})}convertToViewportPoint(e,t){const n=[e,t];return et.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];et.applyTransform(t,this.transform);const n=[e[2],e[3]];return et.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return et.applyInverseTransform(n,this.transform),n}}class wF extends bp{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function KC(r){const e=r.length;let t=0;for(;t<e&&r[t].trim()==="";)t++;return r.substring(t,t+5).toLowerCase()==="data:"}function xF(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function dhe(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function fhe(r,e="document.pdf"){if(typeof r!="string")return e;if(KC(r))return Et('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(r);if(!n)return e;const i=o=>{try{let l=decodeURIComponent(o);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:o):l}catch{return o}},s=/\.pdf$/i,a=n.pathname.split("/").at(-1);if(s.test(a))return i(a);if(n.searchParams.size>0){const o=Array.from(n.searchParams.values()).reverse();for(const u of o)if(s.test(u))return i(u);const l=Array.from(n.searchParams.keys()).reverse();for(const u of l)if(s.test(u))return i(u)}if(n.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(l)return i(l[0])}return e}class t5{constructor(){Re(this,"started",Object.create(null));Re(this,"times",[])}time(e){e in this.started&&Et(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Et(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:s}of this.times)e.push(`${n.padEnd(t)} ${s-i}ms
`);return e.join("")}}function nb(r,e){const t=e?URL.parse(r,e):URL.parse(r);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function vo(r){r.preventDefault()}function fn(r){r.preventDefault(),r.stopPropagation()}function mhe(r){console.log("Deprecated API usage: "+r)}var U1;class qS{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;m(this,U1)||R(this,U1,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=m(this,U1).exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const u=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,u==="-"?(a+=c,o+=h):u==="+"&&(a-=c,o-=h),new Date(Date.UTC(n,i,s,a,o,l))}}U1=new WeakMap,$(qS,U1);function phe(r,{scale:e=1,rotation:t=0}){const{width:n,height:i}=r.attributes.style,s=[0,0,parseInt(n),parseInt(i)];return new r_({viewBox:s,userUnit:1,scale:e,rotation:t})}function n_(r){if(r.startsWith("#")){const e=parseInt(r.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(e=>parseInt(e)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Et(`Not a valid color format: "${r}"`),[0,0,0])}function ghe(r){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of r.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;r.set(t,n_(n))}e.remove()}function Xr(r){const{a:e,b:t,c:n,d:i,e:s,f:a}=r.getTransform();return[e,t,n,i,s,a]}function hl(r){const{a:e,b:t,c:n,d:i,e:s,f:a}=r.getTransform().invertSelf();return[e,t,n,i,s,a]}function ap(r,e,t=!1,n=!0){if(e instanceof r_){const{pageWidth:i,pageHeight:s}=e.rawDims,{style:a}=r,o=Ri.isCSSRoundSupported,l=`var(--total-scale-factor) * ${i}px`,u=`var(--total-scale-factor) * ${s}px`,c=o?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,h=o?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!t||e.rotation%180===0?(a.width=c,a.height=h):(a.width=h,a.height=c)}n&&r.setAttribute("data-main-rotation",e.rotation)}class eu{constructor(){const{pixelRatio:e}=eu;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,i,s=-1){let a=1/0,o=1/0,l=1/0;n=eu.capPixels(n,s),n>0&&(a=Math.sqrt(n/(e*t))),i!==-1&&(o=i/e,l=i/t);const u=Math.min(a,o,l);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const JM=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class vhe{static get isDarkMode(){var e;return St(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class yhe{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),St(this,"commentForegroundColor",n_(n))}}function bhe(r,e,t,n){n=Math.min(Math.max(n??1,0),1);const i=255*(1-n);return r=Math.round(r*n+i),e=Math.round(e*n+i),t=Math.round(t*n+i),[r,e,t]}function r5(r,e){const t=r[0]/255,n=r[1]/255,i=r[2]/255,s=Math.max(t,n,i),a=Math.min(t,n,i),o=(s+a)/2;if(s===a)e[0]=e[1]=0;else{const l=s-a;switch(e[1]=o<.5?l/(s+a):l/(2-s-a),s){case t:e[0]=((n-i)/l+(n<i?6:0))*60;break;case n:e[0]=((i-t)/l+2)*60;break;case i:e[0]=((t-n)/l+4)*60;break}}e[2]=o}function ZM(r,e){const t=r[0],n=r[1],i=r[2],s=(1-Math.abs(2*i-1))*n,a=s*(1-Math.abs(t/60%2-1)),o=i-s/2;switch(Math.floor(t/60)){case 0:e[0]=s+o,e[1]=a+o,e[2]=o;break;case 1:e[0]=a+o,e[1]=s+o,e[2]=o;break;case 2:e[0]=o,e[1]=s+o,e[2]=a+o;break;case 3:e[0]=o,e[1]=a+o,e[2]=s+o;break;case 4:e[0]=a+o,e[1]=o,e[2]=s+o;break;case 5:case 6:e[0]=s+o,e[1]=o,e[2]=a+o;break}}function n5(r){return r<=.03928?r/12.92:((r+.055)/1.055)**2.4}function i5(r,e,t){ZM(r,t),t.map(n5);const n=.2126*t[0]+.7152*t[1]+.0722*t[2];ZM(e,t),t.map(n5);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)}const s5=new Map;function whe(r,e){const t=r[0]+r[1]*256+r[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=s5.get(t);if(n)return n;const i=new Float32Array(9),s=i.subarray(0,3),a=i.subarray(3,6);r5(r,a);const o=i.subarray(6,9);r5(e,o);const l=o[2]<.5,u=l?12:4.5;if(a[2]=l?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),i5(a,o,s)<u){let c,h;l?(c=a[2],h=1):(c=0,h=a[2]);const d=.005;for(;h-c>d;){const f=a[2]=(c+h)/2;l===i5(a,o,s)<u?c=f:h=f}a[2]=l?h:c}return ZM(a,s),n=et.makeHexColor(Math.round(s[0]*255),Math.round(s[1]*255),Math.round(s[2]*255)),s5.set(t,n),n}function MH({html:r,dir:e,className:t},n){const i=document.createDocumentFragment();if(typeof r=="string"){const s=document.createElement("p");s.dir=e||"auto";const a=r.split(/(?:\r\n?|\n)/);for(let o=0,l=a.length;o<l;++o){const u=a[o];s.append(document.createTextNode(u)),o<l-1&&s.append(document.createElement("br"))}i.append(s)}else DH.render({xfaHtml:r,div:i,intent:"richText"});i.firstElementChild.classList.add("richText",t),n.append(i)}function IH(r){const e=new Path2D;if(!r)return e;for(let t=0,n=r.length;t<n;)switch(r[t++]){case Ly.moveTo:e.moveTo(r[t++],r[t++]);break;case Ly.lineTo:e.lineTo(r[t++],r[t++]);break;case Ly.curveTo:e.bezierCurveTo(r[t++],r[t++],r[t++],r[t++],r[t++],r[t++]);break;case Ly.quadraticCurveTo:e.quadraticCurveTo(r[t++],r[t++],r[t++],r[t++]);break;case Ly.closePath:e.closePath();break;default:Et(`Unrecognized drawing path operator: ${r[t-1]}`);break}return e}var nh,ih,qa,Ha,z1,sh,Hg,Gg,j1,LT,PH,Di,RH,kH,Yp,ib;const vu=class vu{constructor(e){$(this,Di);$(this,nh,null);$(this,ih,null);$(this,qa);$(this,Ha,null);$(this,z1,null);$(this,sh,null);$(this,Hg,null);$(this,Gg,null);R(this,qa,e),m(vu,j1)||R(vu,j1,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=R(this,nh,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=m(this,qa)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",vo,{signal:t}),e.addEventListener("pointerdown",j(vu,LT,PH),{signal:t}));const n=R(this,Ha,document.createElement("div"));n.className="buttons",e.append(n);const i=m(this,qa).toolbarPosition;if(i){const{style:s}=e,a=m(this,qa)._uiManager.direction==="ltr"?1-i[0]:i[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return m(this,nh)}hide(){var e;m(this,nh).classList.add("hidden"),(e=m(this,ih))==null||e.hideDropdown()}show(){var e,t;m(this,nh).classList.remove("hidden"),(e=m(this,z1))==null||e.shown(),(t=m(this,sh))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=m(this,qa),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",m(vu,j1)[e]),j(this,Di,Yp).call(this,n)&&n.addEventListener("click",i=>{t.delete()},{signal:t._signal}),m(this,Ha).append(n)}async addAltText(e){const t=await e.render();j(this,Di,Yp).call(this,t),m(this,Ha).append(t,m(this,Di,ib)),R(this,z1,e)}addComment(e,t=null){if(m(this,sh))return;const n=e.renderForToolbar();if(!n)return;j(this,Di,Yp).call(this,n);const i=R(this,Hg,m(this,Di,ib));t?(m(this,Ha).insertBefore(n,t),m(this,Ha).insertBefore(i,t)):m(this,Ha).append(n,i),R(this,sh,e),e.toolbar=this}addColorPicker(e){if(m(this,ih))return;R(this,ih,e);const t=e.renderButton();j(this,Di,Yp).call(this,t),m(this,Ha).append(t,m(this,Di,ib))}async addEditSignatureButton(e){const t=R(this,Gg,await e.renderEditButton(m(this,qa)));j(this,Di,Yp).call(this,t),m(this,Ha).append(t,m(this,Di,ib))}removeButton(e){var t,n;switch(e){case"comment":(t=m(this,sh))==null||t.removeToolbarCommentButton(),R(this,sh,null),(n=m(this,Hg))==null||n.remove(),R(this,Hg,null);break}}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,n){if(!t&&e==="comment")return;const i=m(this,Ha).querySelector(n);i&&e==="comment"&&this.addComment(t,i)}updateEditSignatureButton(e){m(this,Gg)&&(m(this,Gg).title=e)}remove(){var e;m(this,nh).remove(),(e=m(this,ih))==null||e.destroy(),R(this,ih,null)}};nh=new WeakMap,ih=new WeakMap,qa=new WeakMap,Ha=new WeakMap,z1=new WeakMap,sh=new WeakMap,Hg=new WeakMap,Gg=new WeakMap,j1=new WeakMap,LT=new WeakSet,PH=function(e){e.stopPropagation()},Di=new WeakSet,RH=function(e){m(this,qa)._focusEventsAllowed=!1,fn(e)},kH=function(e){m(this,qa)._focusEventsAllowed=!0,fn(e)},Yp=function(e){const t=m(this,qa)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",j(this,Di,RH).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",j(this,Di,kH).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",vo,{signal:t}),!0)},ib=function(){const e=document.createElement("div");return e.className="divider",e},$(vu,LT),$(vu,j1,null);let eI=vu;var q1,Nf,wu,Dc,FH,OH,tI;class xhe{constructor(e){$(this,Dc);$(this,q1,null);$(this,Nf,null);$(this,wu);R(this,wu,e)}show(e,t,n){const[i,s]=j(this,Dc,OH).call(this,t,n),{style:a}=m(this,Nf)||R(this,Nf,j(this,Dc,FH).call(this));e.append(m(this,Nf)),a.insetInlineEnd=`${100*i}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){m(this,Nf).remove()}}q1=new WeakMap,Nf=new WeakMap,wu=new WeakMap,Dc=new WeakSet,FH=function(){const e=R(this,Nf,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=m(this,wu)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",vo,{signal:t});const n=R(this,q1,document.createElement("div"));return n.className="buttons",e.append(n),m(this,wu).hasCommentManager()&&j(this,Dc,tI).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{m(this,wu).commentSelection("floating_button")}),j(this,Dc,tI).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{m(this,wu).highlightSelection("floating_button")}),e},OH=function(e,t){let n=0,i=0;for(const s of e){const a=s.y+s.height;if(a<n)continue;const o=s.x+(t?s.width:0);if(a>n){i=o,n=a;continue}t?o>i&&(i=o):o<i&&(i=o)}return[t?1-i:i,n]},tI=function(e,t,n,i){const s=document.createElement("button");s.classList.add("basic",e),s.tabIndex=0,s.setAttribute("data-l10n-id",t);const a=document.createElement("span");s.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",n);const o=m(this,wu)._signal;o instanceof AbortSignal&&!o.aborted&&(s.addEventListener("contextmenu",vo,{signal:o}),s.addEventListener("click",i,{signal:o})),m(this,q1).append(s)};function BH(r,e,t){for(const n of t)e.addEventListener(n,r[n].bind(r))}var Df,Mf,Wg,If;const gr=class gr{static initializeAndAddPointerId(e){(m(gr,Mf)||R(gr,Mf,new Set)).add(e)}static setPointer(e,t){m(gr,Df)||R(gr,Df,t),m(gr,If)??R(gr,If,e)}static setTimeStamp(e){R(gr,Wg,e)}static isSamePointerId(e){return m(gr,Df)===e}static isSamePointerIdOrRemove(e){var t;return m(gr,Df)===e?!0:((t=m(gr,Mf))==null||t.delete(e),!1)}static isSamePointerType(e){return m(gr,If)===e}static isInitializedAndDifferentPointerType(e){return m(gr,If)!==null&&!gr.isSamePointerType(e)}static isSameTimeStamp(e){return m(gr,Wg)===e}static isUsingMultiplePointers(){var e;return((e=m(gr,Mf))==null?void 0:e.size)>=1}static clearPointerType(){R(gr,If,null)}static clearPointerIds(){R(gr,Df,NaN),R(gr,Mf,null)}static clearTimeStamp(){R(gr,Wg,NaN)}};Df=new WeakMap,Mf=new WeakMap,Wg=new WeakMap,If=new WeakMap,$(gr,Df,NaN),$(gr,Mf,null),$(gr,Wg,NaN),$(gr,If,null);let qi=gr;var $T;class _he{constructor(){$(this,$T,0)}get id(){return`${D1}${$n(this,$T)._++}`}}$T=new WeakMap;var Kg,H1,Hi,Xg,pE;const MO=class MO{constructor(){$(this,Xg);$(this,Kg,CH());$(this,H1,0);$(this,Hi,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const s=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return St(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:t,name:n,size:i,type:s}=e;return j(this,Xg,pE).call(this,`${t}_${n}_${i}_${s}`,e)}async getFromUrl(e){return j(this,Xg,pE).call(this,e,e)}async getFromBlob(e,t){const n=await t;return j(this,Xg,pE).call(this,e,n)}async getFromId(e){m(this,Hi)||R(this,Hi,new Map);const t=m(this,Hi).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){m(this,Hi)||R(this,Hi,new Map);let n=m(this,Hi).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${m(this,Kg)}_${$n(this,H1)._++}`,refCounter:1,isSvg:!1},m(this,Hi).set(e,n),m(this,Hi).set(n.id,n),n}getSvgUrl(e){const t=m(this,Hi).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;m(this,Hi)||R(this,Hi,new Map);const t=m(this,Hi).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(n.width,n.height);s.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=s.convertToBlob()}(i=n.close)==null||i.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${m(this,Kg)}_`)}};Kg=new WeakMap,H1=new WeakMap,Hi=new WeakMap,Xg=new WeakSet,pE=async function(e,t){m(this,Hi)||R(this,Hi,new Map);let n=m(this,Hi).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${m(this,Kg)}_${$n(this,H1)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(n.url=t,i=await t_(t,"blob")):t instanceof File?i=n.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const s=MO._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((u,c)=>{o.onload=()=>{n.bitmap=o,n.isSvg=!0,u()},a.onload=async()=>{const h=n.svgUrl=a.result;o.src=await s?`${h}#svgView(preserveAspectRatio(none))`:h},o.onerror=a.onerror=c});a.readAsDataURL(i),await l}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){Et(i),n=null}return m(this,Hi).set(e,n),n&&m(this,Hi).set(n.id,n),n};let rI=MO;var yn,ah,G1,Kr;class Ahe{constructor(e=128){$(this,yn,[]);$(this,ah,!1);$(this,G1);$(this,Kr,-1);R(this,G1,e)}add({cmd:e,undo:t,post:n,mustExec:i,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(i&&e(),m(this,ah))return;const l={cmd:e,undo:t,post:n,type:s};if(m(this,Kr)===-1){m(this,yn).length>0&&(m(this,yn).length=0),R(this,Kr,0),m(this,yn).push(l);return}if(a&&m(this,yn)[m(this,Kr)].type===s){o&&(l.undo=m(this,yn)[m(this,Kr)].undo),m(this,yn)[m(this,Kr)]=l;return}const u=m(this,Kr)+1;u===m(this,G1)?m(this,yn).splice(0,1):(R(this,Kr,u),u<m(this,yn).length&&m(this,yn).splice(u)),m(this,yn).push(l)}undo(){if(m(this,Kr)===-1)return;R(this,ah,!0);const{undo:e,post:t}=m(this,yn)[m(this,Kr)];e(),t==null||t(),R(this,ah,!1),R(this,Kr,m(this,Kr)-1)}redo(){if(m(this,Kr)<m(this,yn).length-1){R(this,Kr,m(this,Kr)+1),R(this,ah,!0);const{cmd:e,post:t}=m(this,yn)[m(this,Kr)];e(),t==null||t(),R(this,ah,!1)}}hasSomethingToUndo(){return m(this,Kr)!==-1}hasSomethingToRedo(){return m(this,Kr)<m(this,yn).length-1}cleanType(e){if(m(this,Kr)!==-1){for(let t=m(this,Kr);t>=0;t--)if(m(this,yn)[t].type!==e){m(this,yn).splice(t+1,m(this,Kr)-t),R(this,Kr,t);return}m(this,yn).length=0,R(this,Kr,-1)}}destroy(){R(this,yn,null)}}yn=new WeakMap,ah=new WeakMap,G1=new WeakMap,Kr=new WeakMap;var VT,LH;class i_{constructor(e){$(this,VT);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Ri.platform;for(const[n,i,s={}]of e)for(const a of n){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:i,options:s}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:i,options:s}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(j(this,VT,LH).call(this,t));if(!n)return;const{callback:i,options:{bubbles:s=!1,args:a=[],checker:o=null}}=n;o&&!o(e,t)||(i.bind(e,...a,t)(),s||fn(t))}}VT=new WeakSet,LH=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const UT=class UT{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return ghe(e),St(this,"_colors",e)}convert(e){const t=n_(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every((s,a)=>s===t[a]))return UT._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?et.makeHexColor(...t):e}};Re(UT,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let nI=UT;var Yg,ea,Qg,an,zn,Jg,Ga,Zg,Wa,Gi,oh,lh,ev,uh,gl,Ka,Pf,W1,K1,tv,X1,vl,ch,rv,hh,yl,zT,dh,nv,Y1,fh,Rf,iv,mh,Q1,Mn,lr,xu,ph,gh,J1,sv,Z1,vh,bl,_u,ew,tw,Xa,je,gE,iI,$H,VH,sb,UH,zH,jH,sI,qH,HH,GH,WH,ls,mu,KH,XH,aI,YH,ab,oI;const Tg=class Tg{constructor(e,t,n,i,s,a,o,l,u,c,h,d,f,p,g,b){$(this,je);$(this,Yg,new AbortController);$(this,ea,null);$(this,Qg,null);$(this,an,new Map);$(this,zn,new Map);$(this,Jg,null);$(this,Ga,null);$(this,Zg,null);$(this,Wa,new Ahe);$(this,Gi,null);$(this,oh,null);$(this,lh,null);$(this,ev,0);$(this,uh,new Set);$(this,gl,null);$(this,Ka,null);$(this,Pf,new Set);Re(this,"_editorUndoBar",null);$(this,W1,!1);$(this,K1,!1);$(this,tv,!1);$(this,X1,null);$(this,vl,null);$(this,ch,null);$(this,rv,null);$(this,hh,!1);$(this,yl,null);$(this,zT,new _he);$(this,dh,!1);$(this,nv,!1);$(this,Y1,!1);$(this,fh,null);$(this,Rf,null);$(this,iv,null);$(this,mh,null);$(this,Q1,null);$(this,Mn,Dt.NONE);$(this,lr,new Set);$(this,xu,null);$(this,ph,null);$(this,gh,null);$(this,J1,null);$(this,sv,null);$(this,Z1,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});$(this,vh,[0,0]);$(this,bl,null);$(this,_u,null);$(this,ew,null);$(this,tw,null);$(this,Xa,null);const v=this._signal=m(this,Yg).signal;R(this,_u,e),R(this,ew,t),R(this,tw,n),R(this,Jg,i),R(this,Gi,s),R(this,ph,a),R(this,sv,l),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:v}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),o._on("setpreference",this.onSetPreference.bind(this),{signal:v}),o._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:v}),window.addEventListener("pointerdown",()=>{R(this,nv,!0)},{capture:!0,signal:v}),window.addEventListener("pointerup",()=>{R(this,nv,!1)},{capture:!0,signal:v}),j(this,je,UH).call(this),j(this,je,WH).call(this),j(this,je,sI).call(this),R(this,Ga,l.annotationStorage),R(this,X1,l.filterFactory),R(this,gh,u),R(this,rv,c||null),R(this,W1,h),R(this,K1,d),R(this,tv,f),R(this,Q1,p||null),this.viewParameters={realScale:Td.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=b!==!1,s==null||s.setSidebarUiManager(this)}static get _keyboardManager(){const e=Tg.prototype,t=a=>m(a,_u).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return St(this,"_keyboardManager",new i_([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&m(a,_u).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&m(a,_u).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}destroy(){var e,t,n,i,s,a,o,l,u;(e=m(this,Xa))==null||e.resolve(),R(this,Xa,null),(t=m(this,Yg))==null||t.abort(),R(this,Yg,null),this._signal=null;for(const c of m(this,zn).values())c.destroy();m(this,zn).clear(),m(this,an).clear(),m(this,Pf).clear(),(n=m(this,mh))==null||n.clear(),R(this,ea,null),m(this,lr).clear(),m(this,Wa).destroy(),(i=m(this,Jg))==null||i.destroy(),(s=m(this,Gi))==null||s.destroy(),(a=m(this,ph))==null||a.destroy(),(o=m(this,yl))==null||o.hide(),R(this,yl,null),(l=m(this,iv))==null||l.destroy(),R(this,iv,null),R(this,Qg,null),m(this,vl)&&(clearTimeout(m(this,vl)),R(this,vl,null)),m(this,bl)&&(clearTimeout(m(this,bl)),R(this,bl,null)),(u=this._editorUndoBar)==null||u.destroy(),R(this,sv,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return m(this,Q1)}get useNewAltTextFlow(){return m(this,K1)}get useNewAltTextWhenAddingImage(){return m(this,tv)}get hcmFilter(){return St(this,"hcmFilter",m(this,gh)?m(this,X1).addHCMFilter(m(this,gh).foreground,m(this,gh).background):"none")}get direction(){return St(this,"direction",getComputedStyle(m(this,_u)).direction)}get _highlightColors(){return St(this,"_highlightColors",m(this,rv)?new Map(m(this,rv).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return St(this,"highlightColors",null);const t=new Map,n=!!m(this,gh);for(const[i,s]of e){const a=i.endsWith("_HCM");if(n&&a){t.set(i.replace("_HCM",""),s);continue}!n&&!a&&t.set(i,s)}return St(this,"highlightColors",t)}get highlightColorNames(){return St(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),R(this,lh,e)}setMainHighlightColorPicker(e){R(this,iv,e)}editAltText(e,t=!1){var n;(n=m(this,Jg))==null||n.editAltText(this,e,t)}hasCommentManager(){return!!m(this,Gi)}editComment(e,t,n,i){var s;(s=m(this,Gi))==null||s.showDialog(this,e,t,n,i)}selectComment(e,t){const n=m(this,zn).get(e),i=n==null?void 0:n.getEditorByUID(t);i==null||i.toggleComment(!0,!0)}updateComment(e){var t;(t=m(this,Gi))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=m(this,Gi))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=m(this,Gi))==null||t.removeComments([e.uid])}toggleComment(e,t,n=void 0){var i;(i=m(this,Gi))==null||i.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){var n;return e&&((n=m(this,Gi))==null?void 0:n.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=m(this,Gi))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(m(this,zn).has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),i=s=>{s.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await n}getSignature(e){var t;(t=m(this,ph))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return m(this,ph)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":R(this,tv,t);break}}onPageChanging({pageNumber:e}){R(this,ev,e-1)}focusMainContainer(){m(this,_u).focus()}findParent(e,t){for(const n of m(this,zn).values()){const{x:i,y:s,width:a,height:o}=n.div.getBoundingClientRect();if(e>=i&&e<=i+a&&t>=s&&t<=s+o)return n}return null}disableUserSelect(e=!1){m(this,ew).classList.toggle("noUserSelect",e)}addShouldRescale(e){m(this,Pf).add(e)}removeShouldRescale(e){m(this,Pf).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Td.PDF_TO_CSS_UNITS;for(const n of m(this,Pf))n.onScaleChanging();(t=m(this,lh))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:a,focusOffset:o}=n,l=n.toString(),c=j(this,je,gE).call(this,n).closest(".textLayer"),h=this.getSelectionBoxes(c);if(!h)return;n.empty();const d=j(this,je,iI).call(this,c),f=m(this,Mn)===Dt.NONE,p=()=>{const g=d==null?void 0:d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:i,anchorOffset:s,focusNode:a,focusOffset:o,text:l});f&&this.showAllEditors("highlight",!0,!0),t&&(g==null||g.editComment())};if(f){this.switchToMode(Dt.HIGHLIGHT,p);return}p()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!m(this,Ga))return null;const t=`${D1}${e}`,n=m(this,Ga).getRawValue(t);return n&&m(this,Ga).remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&m(this,Ga)&&!m(this,Ga).has(e.id)&&m(this,Ga).setValue(e.id,e)}a11yAlert(e,t=null){const n=m(this,tw);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,m(this,hh)&&(R(this,hh,!1),j(this,je,sb).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of m(this,lr))if(t.div.contains(e)){R(this,Rf,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!m(this,Rf))return;const[e,t]=m(this,Rf);R(this,Rf,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){j(this,je,sI).call(this),this.setEditingState(!0)}removeEditListeners(){j(this,je,qH).call(this),this.setEditingState(!1)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of m(this,Ka))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of m(this,Ka))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=m(this,ea))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of m(this,lr)){const s=i.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const a of m(this,Ka))if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(s){Et(`paste: "${s.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const s=[];for(const l of n){const u=await i.deserialize(l);if(!u)return;s.push(u)}const a=()=>{for(const l of s)j(this,je,aI).call(this,l);j(this,je,oI).call(this,s)},o=()=>{for(const l of s)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(s){Et(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),m(this,Mn)!==Dt.NONE&&!this.isEditorHandlingKeyboard&&Tg._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,m(this,hh)&&(R(this,hh,!1),j(this,je,sb).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(j(this,je,zH).call(this),j(this,je,HH).call(this),j(this,je,ls).call(this,{isEditing:m(this,Mn)!==Dt.NONE,isEmpty:j(this,je,ab).call(this),hasSomethingToUndo:m(this,Wa).hasSomethingToUndo(),hasSomethingToRedo:m(this,Wa).hasSomethingToRedo(),hasSelectedEditor:!1})):(j(this,je,jH).call(this),j(this,je,GH).call(this),j(this,je,ls).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!m(this,Ka)){R(this,Ka,e);for(const t of m(this,Ka))j(this,je,mu).call(this,t.defaultPropertiesToUpdate)}}getId(){return m(this,zT).id}get currentLayer(){return m(this,zn).get(m(this,ev))}getLayer(e){return m(this,zn).get(e)}get currentPageIndex(){return m(this,ev)}addLayer(e){m(this,zn).set(e.pageIndex,e),m(this,dh)?e.enable():e.disable()}removeLayer(e){m(this,zn).delete(e.pageIndex)}async updateMode(e,t=null,n=!1,i=!1,s=!1){var a,o,l,u,c,h;if(m(this,Mn)!==e&&!(m(this,Xa)&&(await m(this,Xa).promise,!m(this,Xa)))){if(R(this,Xa,Promise.withResolvers()),(a=m(this,lh))==null||a.commitOrRemove(),m(this,Mn)===Dt.POPUP&&((o=m(this,Gi))==null||o.hideSidebar()),(l=m(this,Gi))==null||l.destroyPopup(),R(this,Mn,e),e===Dt.NONE){this.setEditingState(!1),j(this,je,XH).call(this);for(const d of m(this,an).values())d.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),m(this,Xa).resolve();return}for(const d of m(this,an).values())d.addStandaloneCommentButton();e===Dt.SIGNATURE&&await((c=m(this,ph))==null?void 0:c.loadSignatures()),this.setEditingState(!0),await j(this,je,KH).call(this),this.unselectAll();for(const d of m(this,zn).values())d.updateMode(e);if(e===Dt.POPUP){m(this,Qg)||R(this,Qg,await m(this,sv).getAnnotationsByType(new Set(m(this,Ka).map(p=>p._editorType))));const d=new Set,f=[];for(const p of m(this,an).values()){const{annotationElementId:g,hasComment:b,deleted:v}=p;g&&d.add(g),b&&!v&&f.push(p.getData())}for(const p of m(this,Qg)){const{id:g,popupRef:b,contentsObj:v}=p;b&&(v!=null&&v.str)&&!d.has(g)&&!m(this,uh).has(g)&&f.push(p)}(h=m(this,Gi))==null||h.showSidebar(f)}if(!t){n&&this.addNewEditorFromKeyboard(),m(this,Xa).resolve();return}for(const d of m(this,an).values())d.uid===t?(this.setSelected(d),s?d.editComment():i?d.enterInEditMode():d.focus()):d.unselect();m(this,Xa).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==m(this,Mn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(m(this,Ka)){switch(e){case Kt.CREATE:this.currentLayer.addNewEditor(t);return;case Kt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(m(this,J1)||R(this,J1,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of m(this,lr))n.updateParams(e,t);else for(const n of m(this,Ka))n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var s;for(const a of m(this,an).values())a.editorType===e&&a.show(t);(((s=m(this,J1))==null?void 0:s.get(Kt.HIGHLIGHT_SHOW_ALL))??!0)!==t&&j(this,je,mu).call(this,[[Kt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(m(this,Y1)!==e){R(this,Y1,e);for(const t of m(this,zn).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of m(this,an).values())t.pageIndex===e&&(yield t)}getEditor(e){return m(this,an).get(e)}addEditor(e){m(this,an).set(e.id,e)}removeEditor(e){var t,n;e.div.contains(document.activeElement)&&(m(this,vl)&&clearTimeout(m(this,vl)),R(this,vl,setTimeout(()=>{this.focusMainContainer(),R(this,vl,null)},0))),m(this,an).delete(e.id),e.annotationElementId&&((t=m(this,mh))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!m(this,uh).has(e.annotationElementId))&&((n=m(this,Ga))==null||n.remove(e.id))}addDeletedAnnotationElement(e){m(this,uh).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return m(this,uh).has(e)}removeDeletedAnnotationElement(e){m(this,uh).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){m(this,ea)!==e&&(R(this,ea,e),e&&j(this,je,mu).call(this,e.propertiesToUpdate))}updateUI(e){m(this,je,YH)===e&&j(this,je,mu).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){j(this,je,mu).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(m(this,lr).has(e)){m(this,lr).delete(e),e.unselect(),j(this,je,ls).call(this,{hasSelectedEditor:this.hasSelection});return}m(this,lr).add(e),e.select(),j(this,je,mu).call(this,e.propertiesToUpdate),j(this,je,ls).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.uid}),(t=m(this,lh))==null||t.commitOrRemove();for(const n of m(this,lr))n!==e&&n.unselect();m(this,lr).clear(),m(this,lr).add(e),e.select(),j(this,je,mu).call(this,e.propertiesToUpdate),j(this,je,ls).call(this,{hasSelectedEditor:!0})}isSelected(e){return m(this,lr).has(e)}get firstSelectedEditor(){return m(this,lr).values().next().value}unselect(e){e.unselect(),m(this,lr).delete(e),j(this,je,ls).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return m(this,lr).size!==0}get isEnterHandled(){return m(this,lr).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;m(this,Wa).undo(),j(this,je,ls).call(this,{hasSomethingToUndo:m(this,Wa).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:j(this,je,ab).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){m(this,Wa).redo(),j(this,je,ls).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:m(this,Wa).hasSomethingToRedo(),isEmpty:j(this,je,ab).call(this)})}addCommands(e){m(this,Wa).add(e),j(this,je,ls).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:j(this,je,ab).call(this)})}cleanUndoStack(e){m(this,Wa).cleanType(e)}delete(){var s;this.commitOrRemove();const e=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...m(this,lr)],n=()=>{var a;(a=this._editorUndoBar)==null||a.show(i,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},i=()=>{for(const a of t)j(this,je,aI).call(this,a)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=m(this,ea))==null||e.commitOrRemove()}hasSomethingToControl(){return m(this,ea)||this.hasSelection}selectAll(){for(const e of m(this,lr))e.commit();j(this,je,oI).call(this,m(this,an).values())}unselectAll(){var e;if(!(m(this,ea)&&(m(this,ea).commitOrRemove(),m(this,Mn)!==Dt.NONE))&&!((e=m(this,lh))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of m(this,lr))t.unselect();m(this,lr).clear(),j(this,je,ls).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;m(this,vh)[0]+=e,m(this,vh)[1]+=t;const[i,s]=m(this,vh),a=[...m(this,lr)],o=1e3;m(this,bl)&&clearTimeout(m(this,bl)),R(this,bl,setTimeout(()=>{R(this,bl,null),m(this,vh)[0]=m(this,vh)[1]=0,this.addCommands({cmd:()=>{for(const l of a)m(this,an).has(l.id)&&(l.translateInPage(i,s),l.translationDone())},undo:()=>{for(const l of a)m(this,an).has(l.id)&&(l.translateInPage(-i,-s),l.translationDone())},mustExec:!1})},o));for(const l of a)l.translateInPage(e,t),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),R(this,gl,new Map);for(const e of m(this,lr))m(this,gl).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!m(this,gl))return!1;this.disableUserSelect(!1);const e=m(this,gl);R(this,gl,null);let t=!1;for(const[{x:i,y:s,pageIndex:a},o]of e)o.newX=i,o.newY=s,o.newPageIndex=a,t||(t=i!==o.savedX||s!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const n=(i,s,a,o)=>{if(m(this,an).has(i.id)){const l=m(this,zn).get(o);l?i._setParentAndPosition(l,s,a):(i.pageIndex=o,i.x=s,i.y=a)}};return this.addCommands({cmd:()=>{for(const[i,{newX:s,newY:a,newPageIndex:o}]of e)n(i,s,a,o)},undo:()=>{for(const[i,{savedX:s,savedY:a,savedPageIndex:o}]of e)n(i,s,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(m(this,gl))for(const n of m(this,gl).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||m(this,lr).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return m(this,ea)===e}getActive(){return m(this,ea)}getMode(){return m(this,Mn)}isEditingMode(){return m(this,Mn)!==Dt.NONE}get imageManager(){return St(this,"imageManager",new rI)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,c=t.rangeCount;u<c;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:n,y:i,width:s,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(u,c,h,d)=>({x:(c-i)/a,y:1-(u+h-n)/s,width:d/a,height:h/s});break;case"180":o=(u,c,h,d)=>({x:1-(u+h-n)/s,y:1-(c+d-i)/a,width:h/s,height:d/a});break;case"270":o=(u,c,h,d)=>({x:1-(c+d-i)/a,y:(u-n)/s,width:d/a,height:h/s});break;default:o=(u,c,h,d)=>({x:(u-n)/s,y:(c-i)/a,width:h/s,height:d/a});break}const l=[];for(let u=0,c=t.rangeCount;u<c;u++){const h=t.getRangeAt(u);if(!h.collapsed)for(const{x:d,y:f,width:p,height:g}of h.getClientRects())p===0||g===0||l.push(o(d,f,p,g))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(m(this,Zg)||R(this,Zg,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=m(this,Zg))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=m(this,Zg))==null?void 0:i.get(e.data.id);if(!t)return;const n=m(this,Ga).getRawValue(t);n&&(m(this,Mn)===Dt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){var s;const i=(s=m(this,mh))==null?void 0:s.get(e);i&&(i.setCanvas(t,n),m(this,mh).delete(e))}addMissingCanvas(e,t){(m(this,mh)||R(this,mh,new Map)).set(e,t)}};Yg=new WeakMap,ea=new WeakMap,Qg=new WeakMap,an=new WeakMap,zn=new WeakMap,Jg=new WeakMap,Ga=new WeakMap,Zg=new WeakMap,Wa=new WeakMap,Gi=new WeakMap,oh=new WeakMap,lh=new WeakMap,ev=new WeakMap,uh=new WeakMap,gl=new WeakMap,Ka=new WeakMap,Pf=new WeakMap,W1=new WeakMap,K1=new WeakMap,tv=new WeakMap,X1=new WeakMap,vl=new WeakMap,ch=new WeakMap,rv=new WeakMap,hh=new WeakMap,yl=new WeakMap,zT=new WeakMap,dh=new WeakMap,nv=new WeakMap,Y1=new WeakMap,fh=new WeakMap,Rf=new WeakMap,iv=new WeakMap,mh=new WeakMap,Q1=new WeakMap,Mn=new WeakMap,lr=new WeakMap,xu=new WeakMap,ph=new WeakMap,gh=new WeakMap,J1=new WeakMap,sv=new WeakMap,Z1=new WeakMap,vh=new WeakMap,bl=new WeakMap,_u=new WeakMap,ew=new WeakMap,tw=new WeakMap,Xa=new WeakMap,je=new WeakSet,gE=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},iI=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of m(this,zn).values())if(n.hasTextLayer(e))return n;return null},$H=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=j(this,je,gE).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(m(this,yl)||R(this,yl,new xhe(this)),m(this,yl).show(n,i,this.direction==="ltr"))},VH=function(){var s,a,o;const e=document.getSelection();if(!e||e.isCollapsed){m(this,xu)&&((s=m(this,yl))==null||s.hide(),R(this,xu,null),j(this,je,ls).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===m(this,xu))return;const i=j(this,je,gE).call(this,e).closest(".textLayer");if(!i){m(this,xu)&&((a=m(this,yl))==null||a.hide(),R(this,xu,null),j(this,je,ls).call(this,{hasSelectedText:!1}));return}if((o=m(this,yl))==null||o.hide(),R(this,xu,t),j(this,je,ls).call(this,{hasSelectedText:!0}),!(m(this,Mn)!==Dt.HIGHLIGHT&&m(this,Mn)!==Dt.NONE)&&(m(this,Mn)===Dt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),R(this,hh,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=m(this,Mn)===Dt.HIGHLIGHT?j(this,je,iI).call(this,i):null;if(l==null||l.toggleDrawing(),m(this,nv)){const u=new AbortController,c=this.combinedSignal(u),h=d=>{d.type==="pointerup"&&d.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),d.type==="pointerup"&&j(this,je,sb).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:c}),window.addEventListener("blur",h,{signal:c})}else l==null||l.toggleDrawing(!0),j(this,je,sb).call(this,"main_toolbar")}},sb=function(e=""){m(this,Mn)===Dt.HIGHLIGHT?this.highlightSelection(e):m(this,W1)&&j(this,je,$H).call(this)},UH=function(){document.addEventListener("selectionchange",j(this,je,VH).bind(this),{signal:this._signal})},zH=function(){if(m(this,ch))return;R(this,ch,new AbortController);const e=this.combinedSignal(m(this,ch));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},jH=function(){var e;(e=m(this,ch))==null||e.abort(),R(this,ch,null)},sI=function(){if(m(this,fh))return;R(this,fh,new AbortController);const e=this.combinedSignal(m(this,fh));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},qH=function(){var e;(e=m(this,fh))==null||e.abort(),R(this,fh,null)},HH=function(){if(m(this,oh))return;R(this,oh,new AbortController);const e=this.combinedSignal(m(this,oh));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},GH=function(){var e;(e=m(this,oh))==null||e.abort(),R(this,oh,null)},WH=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},ls=function(e){Object.entries(e).some(([n,i])=>m(this,Z1)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(m(this,Z1),e)}),m(this,Mn)===Dt.HIGHLIGHT&&e.hasSelectedEditor===!1&&j(this,je,mu).call(this,[[Kt.HIGHLIGHT_FREE,!0]]))},mu=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},KH=async function(){if(!m(this,dh)){R(this,dh,!0);const e=[];for(const t of m(this,zn).values())e.push(t.enable());await Promise.all(e);for(const t of m(this,an).values())t.enable()}},XH=function(){if(this.unselectAll(),m(this,dh)){R(this,dh,!1);for(const e of m(this,zn).values())e.disable();for(const e of m(this,an).values())e.disable()}},aI=function(e){const t=m(this,zn).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},YH=function(){let e=null;for(e of m(this,lr));return e},ab=function(){if(m(this,an).size===0)return!0;if(m(this,an).size===1)for(const e of m(this,an).values())return e.isEmpty();return!1},oI=function(e){for(const t of m(this,lr))t.unselect();m(this,lr).clear();for(const t of e)t.isEmpty()||(m(this,lr).add(t),t.select());j(this,je,ls).call(this,{hasSelectedEditor:this.hasSelection})},Re(Tg,"TRANSLATE_SMALL",1),Re(Tg,"TRANSLATE_BIG",10);let op=Tg;var ni,wl,Do,av,xl,ta,ov,_l,Ps,Au,kf,Al,yh,Go,ob,vE;const us=class us{constructor(e){$(this,Go);$(this,ni,null);$(this,wl,!1);$(this,Do,null);$(this,av,null);$(this,xl,null);$(this,ta,null);$(this,ov,!1);$(this,_l,null);$(this,Ps,null);$(this,Au,null);$(this,kf,null);$(this,Al,!1);R(this,Ps,e),R(this,Al,e._uiManager.useNewAltTextFlow),m(us,yh)||R(us,yh,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){us._l10n??(us._l10n=e)}async render(){const e=R(this,Do,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=R(this,av,document.createElement("span"));e.append(t),m(this,Al)?(e.classList.add("new"),e.setAttribute("data-l10n-id",m(us,yh).missing),t.setAttribute("data-l10n-id",m(us,yh)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=m(this,Ps)._uiManager._signal;e.addEventListener("contextmenu",vo,{signal:n}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:n});const i=s=>{s.preventDefault(),m(this,Ps)._uiManager.editAltText(m(this,Ps)),m(this,Al)&&m(this,Ps)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:m(this,Go,ob)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(R(this,ov,!0),i(s))},{signal:n}),await j(this,Go,vE).call(this),e}finish(){m(this,Do)&&(m(this,Do).focus({focusVisible:m(this,ov)}),R(this,ov,!1))}isEmpty(){return m(this,Al)?m(this,ni)===null:!m(this,ni)&&!m(this,wl)}hasData(){return m(this,Al)?m(this,ni)!==null||!!m(this,Au):this.isEmpty()}get guessedText(){return m(this,Au)}async setGuessedText(e){m(this,ni)===null&&(R(this,Au,e),R(this,kf,await us._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),j(this,Go,vE).call(this))}toggleAltTextBadge(e=!1){var t;if(!m(this,Al)||m(this,ni)){(t=m(this,_l))==null||t.remove(),R(this,_l,null);return}if(!m(this,_l)){const n=R(this,_l,document.createElement("div"));n.className="noAltTextBadge",m(this,Ps).div.append(n)}m(this,_l).classList.toggle("hidden",!e)}serialize(e){let t=m(this,ni);return!e&&m(this,Au)===t&&(t=m(this,kf)),{altText:t,decorative:m(this,wl),guessedText:m(this,Au),textWithDisclaimer:m(this,kf)}}get data(){return{altText:m(this,ni),decorative:m(this,wl)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:i,cancel:s=!1}){n&&(R(this,Au,n),R(this,kf,i)),!(m(this,ni)===e&&m(this,wl)===t)&&(s||(R(this,ni,e),R(this,wl,t)),j(this,Go,vE).call(this))}toggle(e=!1){m(this,Do)&&(!e&&m(this,ta)&&(clearTimeout(m(this,ta)),R(this,ta,null)),m(this,Do).disabled=!e)}shown(){m(this,Ps)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:m(this,Go,ob)}})}destroy(){var e,t;(e=m(this,Do))==null||e.remove(),R(this,Do,null),R(this,av,null),R(this,xl,null),(t=m(this,_l))==null||t.remove(),R(this,_l,null)}};ni=new WeakMap,wl=new WeakMap,Do=new WeakMap,av=new WeakMap,xl=new WeakMap,ta=new WeakMap,ov=new WeakMap,_l=new WeakMap,Ps=new WeakMap,Au=new WeakMap,kf=new WeakMap,Al=new WeakMap,yh=new WeakMap,Go=new WeakSet,ob=function(){return m(this,ni)&&"added"||m(this,ni)===null&&this.guessedText&&"review"||"missing"},vE=async function(){var i,s,a;const e=m(this,Do);if(!e)return;if(m(this,Al)){if(e.classList.toggle("done",!!m(this,ni)),e.setAttribute("data-l10n-id",m(us,yh)[m(this,Go,ob)]),(i=m(this,av))==null||i.setAttribute("data-l10n-id",m(us,yh)[`${m(this,Go,ob)}-label`]),!m(this,ni)){(s=m(this,xl))==null||s.remove();return}}else{if(!m(this,ni)&&!m(this,wl)){e.classList.remove("done"),(a=m(this,xl))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=m(this,xl);if(!t){R(this,xl,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${m(this,Ps).id}`;const o=100,l=m(this,Ps)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(m(this,ta)),R(this,ta,null)},{once:!0}),e.addEventListener("mouseenter",()=>{R(this,ta,setTimeout(()=>{R(this,ta,null),m(this,xl).classList.add("show"),m(this,Ps)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:l}),e.addEventListener("mouseleave",()=>{var u;m(this,ta)&&(clearTimeout(m(this,ta)),R(this,ta,null)),(u=m(this,xl))==null||u.classList.remove("show")},{signal:l})}m(this,wl)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=m(this,ni)),t.parentNode||e.append(t);const n=m(this,Ps).getElementForAltText();n==null||n.setAttribute("aria-describedby",t.id)},$(us,yh,null),Re(us,"_l10n",null);let HS=us;var yi,Ya,Ff,Pr,rw,Of,Mo,Bf,Lf,$f,nw,lI;class dA{constructor(e){$(this,nw);$(this,yi,null);$(this,Ya,null);$(this,Ff,!1);$(this,Pr,null);$(this,rw,null);$(this,Of,null);$(this,Mo,null);$(this,Bf,null);$(this,Lf,!1);$(this,$f,null);R(this,Pr,e)}renderForToolbar(){const e=R(this,Ya,document.createElement("button"));return e.className="comment",j(this,nw,lI).call(this,e,!1)}renderForStandalone(){const e=R(this,yi,document.createElement("button"));e.className="annotationCommentButton";const t=m(this,Pr).commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd=`calc(${100*(m(this,Pr)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const i=m(this,Pr).commentButtonColor;i&&(n.backgroundColor=i)}return j(this,nw,lI).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=m(this,yi)??m(this,Ya))==null||e.focus()},0)}onUpdatedColor(){if(!m(this,yi))return;const e=m(this,Pr).commentButtonColor;e&&(m(this,yi).style.backgroundColor=e),m(this,Pr)._uiManager.updatePopupColor(m(this,Pr))}get commentButtonWidth(){var e;return(((e=m(this,yi))==null?void 0:e.getBoundingClientRect().width)??0)/m(this,Pr).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(m(this,$f))return m(this,$f);if(!m(this,yi))return null;const{x:e,y:t,height:n}=m(this,yi).getBoundingClientRect(),{x:i,y:s,width:a,height:o}=m(this,Pr).parent.boundingClientRect;return[(e-i)/a,(t+n-s)/o]}set commentPopupPositionInLayer(e){R(this,$f,e)}hasDefaultPopupPosition(){return m(this,$f)===null}removeStandaloneCommentButton(){var e;(e=m(this,yi))==null||e.remove(),R(this,yi,null)}removeToolbarCommentButton(){var e;(e=m(this,Ya))==null||e.remove(),R(this,Ya,null)}setCommentButtonStates({selected:e,hasPopup:t}){m(this,yi)&&(m(this,yi).classList.toggle("selected",e),m(this,yi).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let n,i;if(t)[n,i]=t;else{[n,i]=m(this,Pr).commentButtonPosition;const{width:c,height:h,x:d,y:f}=m(this,Pr);n=d+n*c,i=f+i*h}const s=m(this,Pr).parent.boundingClientRect,{x:a,y:o,width:l,height:u}=s;m(this,Pr)._uiManager.editComment(m(this,Pr),a+n*l,o+i*u,{...e,parentDimensions:s})}finish(){m(this,Ya)&&(m(this,Ya).focus({focusVisible:m(this,Ff)}),R(this,Ff,!1))}isDeleted(){return m(this,Lf)||m(this,Mo)===""}isEmpty(){return m(this,Mo)===null}hasBeenEdited(){return this.isDeleted()||m(this,Mo)!==m(this,rw)}serialize(){return this.data}get data(){return{text:m(this,Mo),richText:m(this,Of),date:m(this,Bf),deleted:this.isDeleted()}}set data(e){if(e!==m(this,Mo)&&R(this,Of,null),e===null){R(this,Mo,""),R(this,Lf,!0);return}R(this,Mo,e),R(this,Bf,new Date),R(this,Lf,!1)}setInitialText(e,t=null){R(this,rw,e),this.data=e,R(this,Bf,null),R(this,Of,t)}shown(){}destroy(){var e,t;(e=m(this,Ya))==null||e.remove(),R(this,Ya,null),(t=m(this,yi))==null||t.remove(),R(this,yi,null),R(this,Mo,""),R(this,Of,null),R(this,Bf,null),R(this,Pr,null),R(this,Ff,!1),R(this,Lf,!1)}}yi=new WeakMap,Ya=new WeakMap,Ff=new WeakMap,Pr=new WeakMap,rw=new WeakMap,Of=new WeakMap,Mo=new WeakMap,Bf=new WeakMap,Lf=new WeakMap,$f=new WeakMap,nw=new WeakSet,lI=function(e,t){if(!m(this,Pr)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[m(this,Pr)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=m(this,Pr)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",vo,{signal:n}),t&&(e.addEventListener("focusin",s=>{m(this,Pr)._focusEventsAllowed=!1,fn(s)},{capture:!0,signal:n}),e.addEventListener("focusout",s=>{m(this,Pr)._focusEventsAllowed=!0,fn(s)},{capture:!0,signal:n})),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:n});const i=s=>{s.preventDefault(),e===m(this,Ya)?this.edit():m(this,Pr).toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(R(this,Ff,!0),i(s))},{signal:n}),e.addEventListener("pointerenter",()=>{m(this,Pr).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{m(this,Pr).toggleComment(!1,!1)},{signal:n}),e};var lv,Vf,iw,sw,aw,ow,lw,Eu,Uf,Su,zf,Tu,Id,QH,JH,ZH;const IO=class IO{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:s=null,onPinchEnd:a=null,signal:o}){$(this,Id);$(this,lv);$(this,Vf,!1);$(this,iw,null);$(this,sw);$(this,aw);$(this,ow);$(this,lw);$(this,Eu,null);$(this,Uf);$(this,Su,null);$(this,zf);$(this,Tu,null);R(this,lv,e),R(this,iw,n),R(this,sw,t),R(this,aw,i),R(this,ow,s),R(this,lw,a),R(this,zf,new AbortController),R(this,Uf,AbortSignal.any([o,m(this,zf).signal])),e.addEventListener("touchstart",j(this,Id,QH).bind(this),{passive:!1,signal:m(this,Uf)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/eu.pixelRatio}destroy(){var e,t;(e=m(this,zf))==null||e.abort(),R(this,zf,null),(t=m(this,Eu))==null||t.abort(),R(this,Eu,null)}};lv=new WeakMap,Vf=new WeakMap,iw=new WeakMap,sw=new WeakMap,aw=new WeakMap,ow=new WeakMap,lw=new WeakMap,Eu=new WeakMap,Uf=new WeakMap,Su=new WeakMap,zf=new WeakMap,Tu=new WeakMap,Id=new WeakSet,QH=function(e){var i,s,a;if((i=m(this,sw))!=null&&i.call(this))return;if(e.touches.length===1){if(m(this,Eu))return;const o=R(this,Eu,new AbortController),l=AbortSignal.any([m(this,Uf),o.signal]),u=m(this,lv),c={capture:!0,signal:l,passive:!1},h=d=>{var f;d.pointerType==="touch"&&((f=m(this,Eu))==null||f.abort(),R(this,Eu,null))};u.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(fn(d),h(d))},c),u.addEventListener("pointerup",h,c),u.addEventListener("pointercancel",h,c);return}if(!m(this,Tu)){R(this,Tu,new AbortController);const o=AbortSignal.any([m(this,Uf),m(this,Tu).signal]),l=m(this,lv),u={signal:o,capture:!1,passive:!1};l.addEventListener("touchmove",j(this,Id,JH).bind(this),u);const c=j(this,Id,ZH).bind(this);l.addEventListener("touchend",c,u),l.addEventListener("touchcancel",c,u),u.capture=!0,l.addEventListener("pointerdown",fn,u),l.addEventListener("pointermove",fn,u),l.addEventListener("pointercancel",fn,u),l.addEventListener("pointerup",fn,u),(s=m(this,aw))==null||s.call(this)}if(fn(e),e.touches.length!==2||(a=m(this,iw))!=null&&a.call(this)){R(this,Su,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),R(this,Su,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},JH=function(e){var A;if(!m(this,Su)||e.touches.length!==2)return;fn(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:i,screenY:s}=t,{screenX:a,screenY:o}=n,l=m(this,Su),{touch0X:u,touch0Y:c,touch1X:h,touch1Y:d}=l,f=h-u,p=d-c,g=a-i,b=o-s,v=Math.hypot(g,b)||1,x=Math.hypot(f,p)||1;if(!m(this,Vf)&&Math.abs(x-v)<=IO.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=s,l.touch1X=a,l.touch1Y=o,!m(this,Vf)){R(this,Vf,!0);return}const y=[(i+a)/2,(s+o)/2];(A=m(this,ow))==null||A.call(this,y,x,v)},ZH=function(e){var t;e.touches.length>=2||(m(this,Tu)&&(m(this,Tu).abort(),R(this,Tu,null),(t=m(this,lw))==null||t.call(this)),m(this,Su)&&(fn(e),R(this,Su,null),R(this,Vf,!1)))};let GS=IO;var jf,Io,jr,Sr,Cu,uv,bh,uw,bi,qf,Nu,Qa,wh,cw,Hf,ra,hw,Gf,Du,El,cv,hv,Ja,Wf,dw,jT,ht,uI,fw,cI,yE,eG,tG,hI,bE,dI,rG,nG,iG,fI,sG,mI,aG,oG,lG,pI,lb;const Nt=class Nt{constructor(e){$(this,ht);$(this,jf,null);$(this,Io,null);$(this,jr,null);$(this,Sr,null);$(this,Cu,null);$(this,uv,!1);$(this,bh,null);$(this,uw,"");$(this,bi,null);$(this,qf,null);$(this,Nu,null);$(this,Qa,null);$(this,wh,null);$(this,cw,"");$(this,Hf,!1);$(this,ra,null);$(this,hw,!1);$(this,Gf,!1);$(this,Du,!1);$(this,El,null);$(this,cv,0);$(this,hv,0);$(this,Ja,null);$(this,Wf,null);Re(this,"isSelected",!1);Re(this,"_isCopy",!1);Re(this,"_editToolbar",null);Re(this,"_initialOptions",Object.create(null));Re(this,"_initialData",null);Re(this,"_isVisible",!0);Re(this,"_uiManager",null);Re(this,"_focusEventsAllowed",!0);$(this,dw,!1);$(this,jT,Nt._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[s,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Nt.prototype._resizeWithKeyboard,t=op.TRANSLATE_SMALL,n=op.TRANSLATE_BIG;return St(this,"_resizerKeyboardManager",new i_([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Nt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return St(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Ehe({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Nt._l10n??(Nt._l10n=e),Nt._l10nResizer||(Nt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Nt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Nt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Dr("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return m(this,dw)}set _isDraggable(e){var t;R(this,dw,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=m(this,jT)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(j(this,ht,lb).call(this),(t=m(this,Qa))==null||t.remove(),R(this,Qa,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(m(this,Hf)?R(this,Hf,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[s,a]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/s,this.y=(t+i)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,i]=this.parentDimensions;this.setAt(e*n,t*i,this.width*n,this.height*i),this._onTranslated()}translate(e,t){j(this,ht,uI).call(this,this.parentDimensions,e,t)}translateInPage(e,t){m(this,ra)||R(this,ra,[this.x,this.y,this.width,this.height]),j(this,ht,uI).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){m(this,ra)||R(this,ra,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,s]}=this;if(this.x+=e/i,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[l,u]=this.getBaseTranslation();a+=l,o+=u;const{style:c}=n;c.left=`${(100*a).toFixed(2)}%`,c.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!m(this,ra)&&(m(this,ra)[0]!==this.x||m(this,ra)[1]!==this.y)}get _hasBeenResized(){return!!m(this,ra)&&(m(this,ra)[2]!==this.width||m(this,ra)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Nt,i=n/e,s=n/t;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,i]}=this;let{x:s,y:a,width:o,height:l}=this;if(o*=n,l*=i,s*=n,a*=i,this._mustFixPosition)switch(e){case 0:s=ms(s,0,n-o),a=ms(a,0,i-l);break;case 90:s=ms(s,0,n-l),a=ms(a,o,i);break;case 180:s=ms(s,o,n),a=ms(a,l,i);break;case 270:s=ms(s,l,n),a=ms(a,0,i-o);break}this.x=s/=n,this.y=a/=i;const[u,c]=this.getBaseTranslation();s+=u,a+=c,t.left=`${(100*s).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return j(n=Nt,fw,cI).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return j(n=Nt,fw,cI).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=m(this,jr))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||m(this,Gf))return this._editToolbar;this._editToolbar=new eI(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=m(this,jr))==null||t.destroy()}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return m(this,jr)||(HS.initialize(Nt._l10n),R(this,jr,new HS(this)),m(this,jf)&&(m(this,jr).data=m(this,jf),R(this,jf,null))),m(this,jr)}get altTextData(){var e;return(e=m(this,jr))==null?void 0:e.data}set altTextData(e){m(this,jr)&&(m(this,jr).data=e)}get guessedAltText(){var e;return(e=m(this,jr))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=m(this,jr))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=m(this,jr))==null?void 0:t.serialize(e)}hasAltText(){return!!m(this,jr)&&!m(this,jr).isEmpty()}hasAltTextData(){var e;return((e=m(this,jr))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=m(this,Sr))==null||e.focusButton()}addCommentButton(){return this.canAddComment?m(this,Sr)||R(this,Sr,new dA(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(m(this,Cu)){this._uiManager.isEditingMode()&&m(this,Cu).classList.remove("hidden");return}this.hasComment&&(R(this,Cu,m(this,Sr).renderForStandalone()),this.div.append(m(this,Cu)))}}removeStandaloneCommentButton(){m(this,Sr).removeStandaloneCommentButton(),R(this,Cu,null)}hideStandaloneCommentButton(){var e;(e=m(this,Cu))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:n,deleted:i}}=m(this,Sr);return{text:t,richText:e,date:n,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){m(this,Sr)||R(this,Sr,new dA(this)),m(this,Sr).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(m(this,Sr)||R(this,Sr,new dA(this)),m(this,Sr).setInitialText(e,n),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){var e;return(e=m(this,Sr))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=m(this,Sr))==null?void 0:e.isDeleted()}get hasComment(){return!!m(this,Sr)&&!m(this,Sr).isEmpty()&&!m(this,Sr).isDeleted()}async editComment(e){m(this,Sr)||R(this,Sr,new dA(this)),m(this,Sr).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){m(this,Sr).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[s]=this.pageDimensions,[a]=this.pageTranslation,o=a+s+1,l=i-100,u=o+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[o,l,u,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){m(this,Sr).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var a;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=m(this,uv)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),j(this,ht,mI).call(this);const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),BH(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(m(this,Wf)||R(this,Wf,new GS({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:j(this,ht,rG).bind(this),onPinching:j(this,ht,nG).bind(this),onPinchEnd:j(this,ht,iG).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(a=this._uiManager._editorUndoBar)==null||a.hide(),e}pointerdown(e){const{isMac:t}=Ri.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(R(this,Hf,!0),this._isDraggable){j(this,ht,sG).call(this,e);return}j(this,ht,fI).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){m(this,El)&&clearTimeout(m(this,El)),R(this,El,setTimeout(()=>{var e;R(this,El,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const i=this.parentScale,[s,a]=this.pageDimensions,[o,l]=this.pageTranslation,u=e/i,c=t/i,h=this.x*s,d=this.y*a,f=this.width*s,p=this.height*a;switch(n){case 0:return[h+u+o,a-d-c-p+l,h+u+f+o,a-d-c+l];case 90:return[h+c+o,a-d+u+l,h+c+p+o,a-d+u+f+l];case 180:return[h-u-f+o,a-d+c+l,h-u+o,a-d+c+p+l];case 270:return[h-c-p+o,a-d-u-f+l,h-c+o,a-d-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,s,a]=e,o=s-n,l=a-i;switch(this.rotation){case 0:return[n,t-a,o,l];case 90:return[n,t-i,l,o];case 180:return[s,t-i,o,l];case 270:return[s,t-a,l,o];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Nt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=m(this,Sr))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:i,deleted:s,richText:a},uid:o,pageIndex:l,creationDate:u,modificationDate:c}=this;return{id:o,pageIndex:l,rect:this.getPDFRect(),richText:a,contentsObj:{str:e},creationDate:u,modificationDate:n||c,popupRef:!s,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),R(this,Gf,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),R(this,Gf,!1),!0):!1}isInEditMode(){return m(this,Gf)}shouldGetKeyboardEvents(){return m(this,Du)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return t<a&&i>0&&e<s&&n>0}rebuild(){j(this,ht,mI).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,R(i,jf,e.accessibilityData),i._isCopy=e.isCopy||!1;const[s,a]=i.pageDimensions,[o,l,u,c]=i.getRectInCurrentCoords(e.rect,a);return i.x=o/s,i.y=l/a,i.width=u/s,i.height=c/a,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t,n;if((e=m(this,wh))==null||e.abort(),R(this,wh,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),m(this,El)&&(clearTimeout(m(this,El)),R(this,El,null)),j(this,ht,lb).call(this),this.removeEditToolbar(),m(this,Ja)){for(const i of m(this,Ja).values())clearTimeout(i);R(this,Ja,null)}this.parent=null,(t=m(this,Wf))==null||t.destroy(),R(this,Wf,null),(n=m(this,Qa))==null||n.remove(),R(this,Qa,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(j(this,ht,eG).call(this),m(this,bi).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,i,s,a]=this.getPDFRect();return[Nt._round(n+(s-n)*e),Nt._round(i+(a-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return m(this,Sr).commentPopupPositionInLayer}set commentPopupPosition(e){m(this,Sr).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return m(this,Sr).hasDefaultPopupPosition()}get commentButtonWidth(){return m(this,Sr).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){var t;(t=m(this,Sr))==null||t.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),R(this,Nu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=m(this,bi).children;if(!m(this,Io)){R(this,Io,Array.from(t));const a=j(this,ht,aG).bind(this),o=j(this,ht,oG).bind(this),l=this._uiManager._signal;for(const u of m(this,Io)){const c=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",a,{signal:l}),u.addEventListener("blur",o,{signal:l}),u.addEventListener("focus",j(this,ht,lG).bind(this,c),{signal:l}),u.setAttribute("data-l10n-id",Nt._l10nResizer[c])}}const n=m(this,Io)[0];let i=0;for(const a of t){if(a===n)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(m(this,Io).length/4);if(s!==i){if(s<i)for(let o=0;o<i-s;o++)m(this,bi).append(m(this,bi).firstElementChild);else if(s>i)for(let o=0;o<s-i;o++)m(this,bi).firstElementChild.before(m(this,bi).lastElementChild);let a=0;for(const o of t){const u=m(this,Io)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",Nt._l10nResizer[u])}}j(this,ht,pI).call(this,0),R(this,Du,!0),m(this,bi).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){m(this,Du)&&j(this,ht,dI).call(this,m(this,cw),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){j(this,ht,lb).call(this),this.div.focus()}select(){var e,t,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,s;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(t=this._editToolbar)==null||t.show(),(n=m(this,jr))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,n,i,s;this.isSelected&&(this.isSelected=!1,(e=m(this,bi))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(s=m(this,jr))==null||s.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return m(this,hw)}set isEditing(e){R(this,hw,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){m(this,Ja)||R(this,Ja,new Map);const{action:n}=e;let i=m(this,Ja).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),m(this,Ja).delete(n),m(this,Ja).size===0&&R(this,Ja,null)},Nt._telemetryTimeout),m(this,Ja).set(n,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),R(this,uv,!1)}disable(){this.div&&(this.div.tabIndex=-1),R(this,uv,!0)}updateFakeAnnotationElement(e){if(!m(this,Qa)&&!this.deleted){R(this,Qa,e.addFakeAnnotation(this));return}if(this.deleted){m(this,Qa).remove(),R(this,Qa,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&m(this,Qa).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstElementChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};jf=new WeakMap,Io=new WeakMap,jr=new WeakMap,Sr=new WeakMap,Cu=new WeakMap,uv=new WeakMap,bh=new WeakMap,uw=new WeakMap,bi=new WeakMap,qf=new WeakMap,Nu=new WeakMap,Qa=new WeakMap,wh=new WeakMap,cw=new WeakMap,Hf=new WeakMap,ra=new WeakMap,hw=new WeakMap,Gf=new WeakMap,Du=new WeakMap,El=new WeakMap,cv=new WeakMap,hv=new WeakMap,Ja=new WeakMap,Wf=new WeakMap,dw=new WeakMap,jT=new WeakMap,ht=new WeakSet,uI=function([e,t],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},fw=new WeakSet,cI=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},yE=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},eG=function(){if(m(this,bi))return;R(this,bi,document.createElement("div")),m(this,bi).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const i=document.createElement("div");m(this,bi).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",j(this,ht,tG).bind(this,n),{signal:t}),i.addEventListener("contextmenu",vo,{signal:t}),i.tabIndex=-1}this.div.prepend(m(this,bi))},tG=function(e,t){var c;t.preventDefault();const{isMac:n}=Ri.platform;if(t.button!==0||t.ctrlKey&&n)return;(c=m(this,jr))==null||c.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,R(this,qf,[t.screenX,t.screenY]);const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",j(this,ht,dI).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",fn,{passive:!1,signal:a}),window.addEventListener("contextmenu",vo,{signal:a}),R(this,Nu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var h;s.abort(),this.parent.togglePointerEvents(!0),(h=m(this,jr))==null||h.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=o,this.div.style.cursor=l,j(this,ht,bE).call(this)};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})},hI=function(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},bE=function(){if(!m(this,Nu))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=m(this,Nu);R(this,Nu,null);const s=this.x,a=this.y,o=this.width,l=this.height;s===e&&a===t&&o===n&&l===i||this.addCommands({cmd:j(this,ht,hI).bind(this,s,a,o,l),undo:j(this,ht,hI).bind(this,e,t,n,i),mustExec:!0})},dI=function(e,t){const[n,i]=this.parentDimensions,s=this.x,a=this.y,o=this.width,l=this.height,u=Nt.MIN_SIZE/n,c=Nt.MIN_SIZE/i,h=j(this,ht,yE).call(this,this.rotation),d=(k,z)=>[h[0]*k+h[2]*z,h[1]*k+h[3]*z],f=j(this,ht,yE).call(this,360-this.rotation),p=(k,z)=>[f[0]*k+f[2]*z,f[1]*k+f[3]*z];let g,b,v=!1,x=!1;switch(e){case"topLeft":v=!0,g=(k,z)=>[0,0],b=(k,z)=>[k,z];break;case"topMiddle":g=(k,z)=>[k/2,0],b=(k,z)=>[k/2,z];break;case"topRight":v=!0,g=(k,z)=>[k,0],b=(k,z)=>[0,z];break;case"middleRight":x=!0,g=(k,z)=>[k,z/2],b=(k,z)=>[0,z/2];break;case"bottomRight":v=!0,g=(k,z)=>[k,z],b=(k,z)=>[0,0];break;case"bottomMiddle":g=(k,z)=>[k/2,z],b=(k,z)=>[k/2,0];break;case"bottomLeft":v=!0,g=(k,z)=>[0,z],b=(k,z)=>[k,0];break;case"middleLeft":x=!0,g=(k,z)=>[0,z/2],b=(k,z)=>[k,z/2];break}const y=g(o,l),A=b(o,l);let w=d(...A);const _=Nt._round(s+w[0]),S=Nt._round(a+w[1]);let E=1,C=1,N,D;if(t.fromKeyboard)({deltaX:N,deltaY:D}=t);else{const{screenX:k,screenY:z}=t,[q,H]=m(this,qf);[N,D]=this.screenToPageTranslation(k-q,z-H),m(this,qf)[0]=k,m(this,qf)[1]=z}if([N,D]=p(N/n,D/i),v){const k=Math.hypot(o,l);E=C=Math.max(Math.min(Math.hypot(A[0]-y[0]-N,A[1]-y[1]-D)/k,1/o,1/l),u/o,c/l)}else x?E=ms(Math.abs(A[0]-y[0]-N),u,1)/o:C=ms(Math.abs(A[1]-y[1]-D),c,1)/l;const M=Nt._round(o*E),I=Nt._round(l*C);w=d(...b(M,I));const U=_-w[0],X=S-w[1];m(this,ra)||R(this,ra,[this.x,this.y,this.width,this.height]),this.width=M,this.height=I,this.x=U,this.y=X,this.setDims(),this.fixAndSetPosition(),this._onResizing()},rG=function(){var e;R(this,Nu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=m(this,jr))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},nG=function(e,t,n){let s=.7*(n/t)+1-.7;if(s===1)return;const a=j(this,ht,yE).call(this,this.rotation),o=(_,S)=>[a[0]*_+a[2]*S,a[1]*_+a[3]*S],[l,u]=this.parentDimensions,c=this.x,h=this.y,d=this.width,f=this.height,p=Nt.MIN_SIZE/l,g=Nt.MIN_SIZE/u;s=Math.max(Math.min(s,1/d,1/f),p/d,g/f);const b=Nt._round(d*s),v=Nt._round(f*s);if(b===d&&v===f)return;m(this,ra)||R(this,ra,[c,h,d,f]);const x=o(d/2,f/2),y=Nt._round(c+x[0]),A=Nt._round(h+x[1]),w=o(b/2,v/2);this.x=y-w[0],this.y=A-w[1],this.width=b,this.height=v,this.setDims(),this.fixAndSetPosition(),this._onResizing()},iG=function(){var e;(e=m(this,jr))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),j(this,ht,bE).call(this)},fI=function(e){const{isMac:t}=Ri.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},sG=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,s=this._uiManager.combinedSignal(i),a={capture:!0,passive:!1,signal:s},o=u=>{i.abort(),R(this,bh,null),R(this,Hf,!1),this._uiManager.endDragSession()||j(this,ht,fI).call(this,u),n&&this._onStopDragging()};t&&(R(this,cv,e.clientX),R(this,hv,e.clientY),R(this,bh,e.pointerId),R(this,uw,e.pointerType),window.addEventListener("pointermove",u=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:c,clientY:h,pointerId:d}=u;if(d!==m(this,bh)){fn(u);return}const[f,p]=this.screenToPageTranslation(c-m(this,cv),h-m(this,hv));R(this,cv,c),R(this,hv,h),this._uiManager.dragSelectedEditors(f,p)},a),window.addEventListener("touchmove",fn,a),window.addEventListener("pointerdown",u=>{u.pointerType===m(this,uw)&&(m(this,Wf)||u.isPrimary)&&o(u),fn(u)},a));const l=u=>{if(!m(this,bh)||m(this,bh)===u.pointerId){o(u);return}fn(u)};window.addEventListener("pointerup",l,{signal:s}),window.addEventListener("blur",l,{signal:s})},mI=function(){if(m(this,wh)||!this.div)return;R(this,wh,new AbortController);const e=this._uiManager.combinedSignal(m(this,wh));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},aG=function(e){Nt._resizerKeyboardManager.exec(this,e)},oG=function(e){var t;m(this,Du)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==m(this,bi)&&j(this,ht,lb).call(this)},lG=function(e){R(this,cw,m(this,Du)?e:"")},pI=function(e){if(m(this,Io))for(const t of m(this,Io))t.tabIndex=e},lb=function(){R(this,Du,!1),j(this,ht,pI).call(this,-1),j(this,ht,bE).call(this)},$(Nt,fw),Re(Nt,"_l10n",null),Re(Nt,"_l10nResizer",null),Re(Nt,"_borderLineWidth",-1),Re(Nt,"_colorManager",new nI),Re(Nt,"_zIndex",1),Re(Nt,"_telemetryTimeout",1e3);let Fr=Nt;class Ehe extends Fr{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const a5=3285377520,Ba=4294901760,dl=65535;class uG{constructor(e){this.h1=e?e&4294967295:a5,this.h2=e?e&4294967295:a5}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let g=0,b=e.length;g<b;g++){const v=e.charCodeAt(g);v<=255?t[n++]=v:(t[n++]=v>>>8,t[n++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,s=n-i*4,a=new Uint32Array(t.buffer,0,i);let o=0,l=0,u=this.h1,c=this.h2;const h=3432918353,d=461845907,f=h&dl,p=d&dl;for(let g=0;g<i;g++)g&1?(o=a[g],o=o*h&Ba|o*f&dl,o=o<<15|o>>>17,o=o*d&Ba|o*p&dl,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(l=a[g],l=l*h&Ba|l*f&dl,l=l<<15|l>>>17,l=l*d&Ba|l*p&dl,c^=l,c=c<<13|c>>>19,c=c*5+3864292196);switch(o=0,s){case 3:o^=t[i*4+2]<<16;case 2:o^=t[i*4+1]<<8;case 1:o^=t[i*4],o=o*h&Ba|o*f&dl,o=o<<15|o>>>17,o=o*d&Ba|o*p&dl,i&1?u^=o:c^=o}this.h1=u,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Ba|e*36045&dl,t=t*4283543511&Ba|((t<<16|e>>>16)*2950163797&Ba)>>>16,e^=t>>>1,e=e*444984403&Ba|e*60499&dl,t=t*3301882366&Ba|((t<<16|e>>>16)*3120437893&Ba)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const gI=Object.freeze({map:null,hash:"",transfer:void 0});var Kf,Xf,Mu,wi,qT,cG;class _F{constructor(){$(this,qT);$(this,Kf,!1);$(this,Xf,null);$(this,Mu,null);$(this,wi,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=m(this,wi).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return m(this,wi).get(e)}remove(e){const t=m(this,wi).get(e);if(t!==void 0&&(t instanceof Fr&&m(this,Mu).delete(t.annotationElementId),m(this,wi).delete(e),m(this,wi).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of m(this,wi).values())if(n instanceof Fr)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=m(this,wi).get(e);let i=!1;if(n!==void 0)for(const[s,a]of Object.entries(t))n[s]!==a&&(i=!0,n[s]=a);else i=!0,m(this,wi).set(e,t);i&&j(this,qT,cG).call(this),t instanceof Fr&&((m(this,Mu)||R(this,Mu,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return m(this,wi).has(e)}get size(){return m(this,wi).size}resetModified(){m(this,Kf)&&(R(this,Kf,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new hG(this)}get serializable(){if(m(this,wi).size===0)return gI;const e=new Map,t=new uG,n=[],i=Object.create(null);let s=!1;for(const[a,o]of m(this,wi)){const l=o instanceof Fr?o.serialize(!1,i):o;l&&(e.set(a,l),t.update(`${a}:${JSON.stringify(l)}`),s||(s=!!l.bitmap))}if(s)for(const a of e.values())a.bitmap&&n.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:gI}get editorStats(){let e=null;const t=new Map;let n=0,i=0;for(const s of m(this,wi).values()){if(!(s instanceof Fr)){s.popup&&(s.popup.deleted?i+=1:n+=1);continue}s.isCommentDeleted?i+=1:s.hasEditedComment&&(n+=1);const a=s.telemetryFinalData;if(!a)continue;const{type:o}=a;t.has(o)||t.set(o,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const l=e[o]||(e[o]=new Map);for(const[u,c]of Object.entries(a)){if(u==="type")continue;let h=l.get(u);h||(h=new Map,l.set(u,h));const d=h.get(c)??0;h.set(c,d+1)}}if((i>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:i,edited:n}),!e)return null;for(const[s,a]of t)e[s]=a.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){R(this,Xf,null)}updateEditor(e,t){var i;const n=(i=m(this,Mu))==null?void 0:i.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=m(this,Mu))==null?void 0:t.get(e))||null}get modifiedIds(){if(m(this,Xf))return m(this,Xf);const e=[];if(m(this,Mu))for(const t of m(this,Mu).values())t.serialize()&&e.push(t.annotationElementId);return R(this,Xf,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return m(this,wi).entries()}}Kf=new WeakMap,Xf=new WeakMap,Mu=new WeakMap,wi=new WeakMap,qT=new WeakSet,cG=function(){m(this,Kf)||(R(this,Kf,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var mw;class hG extends _F{constructor(t){super();$(this,mw);const{map:n,hash:i,transfer:s}=t.serializable,a=structuredClone(n,s?{transfer:s}:null);R(this,mw,{map:a,hash:i,transfer:s})}get print(){Dr("Should not call PrintAnnotationStorage.print")}get serializable(){return m(this,mw)}get modifiedIds(){return St(this,"modifiedIds",{ids:new Set,hash:""})}}mw=new WeakMap;var dv;class She{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){$(this,dv,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),m(this,dv).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||m(this,dv).has(e.loadedName))){if(Xt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:a}=e,o=new FontFace(i,s,a);this.addNativeFontFace(o);try{await o.load(),m(this,dv).add(i),n==null||n(e)}catch{Et(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Dr("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw Et(`Failed to load font '${n.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return St(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return St(this,"isSyncFontLoadingSupported",fs||Ri.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Xt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const s=n.shift();setTimeout(s.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:t,callback:e};return n.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return St(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(A,w){return A.charCodeAt(w)<<24|A.charCodeAt(w+1)<<16|A.charCodeAt(w+2)<<8|A.charCodeAt(w+3)&255}function i(A,w,_,S){const E=A.substring(0,w),C=A.substring(w+_);return E+S+C}let s,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let u=0;function c(A,w){if(++u>30){Et("Load test font never loaded."),w();return}if(l.font="30px "+A,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){w();return}setTimeout(c.bind(null,A,w))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=i(d,976,h.length,h);const p=16,g=1482184792;let b=n(d,p);for(s=0,a=h.length-3;s<a;s+=4)b=b-g+n(h,s)|0;s<h.length&&(b=b-g+n(h+"XXX",s)|0),d=i(d,p,4,she(b));const v=`url(data:font/opentype;base64,${btoa(d)});`,x=`@font-face {font-family:"${h}";src:${v}}`;this.insertRule(x);const y=this._document.createElement("div");y.style.visibility="hidden",y.style.width=y.style.height="10px",y.style.position="absolute",y.style.top=y.style.left="0px";for(const A of[e.loadedName,h]){const w=this._document.createElement("span");w.textContent="Hi",w.style.fontFamily=A,y.append(w)}this._document.body.append(y),c(h,()=>{y.remove(),t.complete()})}}dv=new WeakMap;var vr;class The{constructor(e,t=null,n,i){$(this,vr);this.compiledGlyphs=Object.create(null),R(this,vr,e),this._inspectFont=t,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${NH(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let i;try{i=e.get(n)}catch(a){Et(`getPathGenerator - ignoring character: "${a}".`)}const s=IH(i);return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=s}get black(){return m(this,vr).black}get bold(){return m(this,vr).bold}get disableFontFace(){return m(this,vr).disableFontFace??!1}set disableFontFace(e){St(this,"disableFontFace",!!e)}get fontExtraProperties(){return m(this,vr).fontExtraProperties??!1}get isInvalidPDFjsFont(){return m(this,vr).isInvalidPDFjsFont}get isType3Font(){return m(this,vr).isType3Font}get italic(){return m(this,vr).italic}get missingFile(){return m(this,vr).missingFile}get remeasure(){return m(this,vr).remeasure}get vertical(){return m(this,vr).vertical}get ascent(){return m(this,vr).ascent}get defaultWidth(){return m(this,vr).defaultWidth}get descent(){return m(this,vr).descent}get bbox(){return m(this,vr).bbox}set bbox(e){St(this,"bbox",e)}get fontMatrix(){return m(this,vr).fontMatrix}get fallbackName(){return m(this,vr).fallbackName}get loadedName(){return m(this,vr).loadedName}get mimetype(){return m(this,vr).mimetype}get name(){return m(this,vr).name}get data(){return m(this,vr).data}clearData(){m(this,vr).clearData()}get cssFontInfo(){return m(this,vr).cssFontInfo}get systemFontInfo(){return m(this,vr).systemFontInfo}get defaultVMetrics(){return m(this,vr).defaultVMetrics}}vr=new WeakMap;var fv,mv,pw,pv,wE;const Cg=class Cg{constructor(e){$(this,pv);$(this,fv);$(this,mv);$(this,pw);R(this,fv,e),R(this,mv,new DataView(m(this,fv))),R(this,pw,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let i=0;for(const u of Cg.strings){const c=t.encode(e[u]);n[u]=c,i+=4+c.length}const s=new ArrayBuffer(i),a=new Uint8Array(s),o=new DataView(s);let l=0;for(const u of Cg.strings){const c=n[u],h=c.length;o.setUint32(l,h),a.set(c,l+4),l+=4+h}return Xt(l===s.byteLength,"CssFontInfo.write: Buffer overflow"),s}get fontFamily(){return j(this,pv,wE).call(this,0)}get fontWeight(){return j(this,pv,wE).call(this,1)}get italicAngle(){return j(this,pv,wE).call(this,2)}};fv=new WeakMap,mv=new WeakMap,pw=new WeakMap,pv=new WeakSet,wE=function(e){Xt(e<Cg.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=m(this,mv).getUint32(t)+4;const n=m(this,mv).getUint32(t);return m(this,pw).decode(new Uint8Array(m(this,fv),t+4,n))},Re(Cg,"strings",["fontFamily","fontWeight","italicAngle"]);let WS=Cg;var xh,Sl,Yf,Qf,ub;const Ng=class Ng{constructor(e){$(this,Qf);$(this,xh);$(this,Sl);$(this,Yf);R(this,xh,e),R(this,Sl,new DataView(m(this,xh))),R(this,Yf,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let i=0;for(const d of Ng.strings){const f=t.encode(e[d]);n[d]=f,i+=4+f.length}i+=4;let s,a,o=1+i;e.style&&(s=t.encode(e.style.style),a=t.encode(e.style.weight),o+=4+s.length+4+a.length);const l=new ArrayBuffer(o),u=new Uint8Array(l),c=new DataView(l);let h=0;c.setUint8(h++,e.guessFallback?1:0),c.setUint32(h,0),h+=4,i=0;for(const d of Ng.strings){const f=n[d],p=f.length;i+=4+p,c.setUint32(h,p),u.set(f,h+4),h+=4+p}return c.setUint32(h-i-4,i),e.style&&(c.setUint32(h,s.length),u.set(s,h+4),h+=4+s.length,c.setUint32(h,a.length),u.set(a,h+4),h+=4+a.length),Xt(h<=l.byteLength,"SubstitionInfo.write: Buffer overflow"),l.transferToFixedLength(h)}get guessFallback(){return m(this,Sl).getUint8(0)!==0}get css(){return j(this,Qf,ub).call(this,0)}get loadedName(){return j(this,Qf,ub).call(this,1)}get baseFontName(){return j(this,Qf,ub).call(this,2)}get src(){return j(this,Qf,ub).call(this,3)}get style(){let e=1;e+=4+m(this,Sl).getUint32(e);const t=m(this,Sl).getUint32(e),n=m(this,Yf).decode(new Uint8Array(m(this,xh),e+4,t));e+=4+t;const i=m(this,Sl).getUint32(e),s=m(this,Yf).decode(new Uint8Array(m(this,xh),e+4,i));return{style:n,weight:s}}};xh=new WeakMap,Sl=new WeakMap,Yf=new WeakMap,Qf=new WeakSet,ub=function(e){Xt(e<Ng.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=m(this,Sl).getUint32(t)+4;const n=m(this,Sl).getUint32(t);return m(this,Yf).decode(new Uint8Array(m(this,xh),t+4,n))},Re(Ng,"strings",["css","loadedName","baseFontName","src"]);let KS=Ng;var gv,vv,yv,bv,na,Tl,gw,yr,hn,So,xE,cb;const It=class It{constructor({data:e,extra:t}){$(this,hn);$(this,Tl);$(this,gw);$(this,yr);R(this,Tl,e),R(this,gw,new TextDecoder),R(this,yr,new DataView(m(this,Tl))),t&&Object.assign(this,t)}get black(){return j(this,hn,So).call(this,0)}get bold(){return j(this,hn,So).call(this,1)}get disableFontFace(){return j(this,hn,So).call(this,2)}get fontExtraProperties(){return j(this,hn,So).call(this,3)}get isInvalidPDFjsFont(){return j(this,hn,So).call(this,4)}get isType3Font(){return j(this,hn,So).call(this,5)}get italic(){return j(this,hn,So).call(this,6)}get missingFile(){return j(this,hn,So).call(this,7)}get remeasure(){return j(this,hn,So).call(this,8)}get vertical(){return j(this,hn,So).call(this,9)}get ascent(){return j(this,hn,xE).call(this,0)}get defaultWidth(){return j(this,hn,xE).call(this,1)}get descent(){return j(this,hn,xE).call(this,2)}get bbox(){let e=m(It,vv);if(m(this,yr).getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<4;i++)n.push(m(this,yr).getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=m(It,yv);if(m(this,yr).getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<6;i++)n.push(m(this,yr).getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=m(It,bv);if(m(this,yr).getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<3;i++)n.push(m(this,yr).getInt16(e,!0)),e+=2;return n}get fallbackName(){return j(this,hn,cb).call(this,0)}get loadedName(){return j(this,hn,cb).call(this,1)}get mimetype(){return j(this,hn,cb).call(this,2)}get name(){return j(this,hn,cb).call(this,3)}get data(){let e=m(It,na);const t=m(this,yr).getUint32(e);e+=4+t;const n=m(this,yr).getUint32(e);e+=4+n;const i=m(this,yr).getUint32(e);e+=4+i;const s=m(this,yr).getUint32(e);if(s!==0)return new Uint8Array(m(this,Tl),e+4,s)}clearData(){let e=m(It,na);const t=m(this,yr).getUint32(e);e+=4+t;const n=m(this,yr).getUint32(e);e+=4+n;const i=m(this,yr).getUint32(e);e+=4+i;const s=m(this,yr).getUint32(e);new Uint8Array(m(this,Tl),e+4,s).fill(0),m(this,yr).setUint32(e,0)}get cssFontInfo(){let e=m(It,na);const t=m(this,yr).getUint32(e);e+=4+t;const n=m(this,yr).getUint32(e);e+=4+n;const i=m(this,yr).getUint32(e);if(i===0)return null;const s=new Uint8Array(i);return s.set(new Uint8Array(m(this,Tl),e+4,i)),new WS(s.buffer)}get systemFontInfo(){let e=m(It,na);const t=m(this,yr).getUint32(e);e+=4+t;const n=m(this,yr).getUint32(e);if(n===0)return null;const i=new Uint8Array(n);return i.set(new Uint8Array(m(this,Tl),e+4,n)),new KS(i.buffer)}static write(e){const t=e.systemFontInfo?KS.write(e.systemFontInfo):null,n=e.cssFontInfo?WS.write(e.cssFontInfo):null,i=new TextEncoder,s={};let a=0;for(const g of It.strings)s[g]=i.encode(e[g]),a+=4+s[g].length;const o=m(It,na)+4+a+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),l=new ArrayBuffer(o),u=new Uint8Array(l),c=new DataView(l);let h=0;const d=It.bools.length;let f=0,p=0;for(let g=0;g<d;g++){const b=e[It.bools[g]];f|=(b===void 0?0:b?2:1)<<p,p+=2,(p===8||g===d-1)&&(c.setUint8(h++,f),f=0,p=0)}Xt(h===m(It,gv),"FontInfo.write: Boolean properties offset mismatch");for(const g of It.numbers)c.setFloat64(h,e[g]),h+=8;if(Xt(h===m(It,vv),"FontInfo.write: Number properties offset mismatch"),e.bbox){c.setUint8(h++,4);for(const g of e.bbox)c.setInt16(h,g,!0),h+=2}else c.setUint8(h++,0),h+=2*4;if(Xt(h===m(It,yv),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){c.setUint8(h++,6);for(const g of e.fontMatrix)c.setFloat64(h,g,!0),h+=8}else c.setUint8(h++,0),h+=8*6;if(Xt(h===m(It,bv),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){c.setUint8(h++,1);for(const g of e.defaultVMetrics)c.setInt16(h,g,!0),h+=2}else c.setUint8(h++,0),h+=3*2;Xt(h===m(It,na),"FontInfo.write: DefaultVMetrics properties offset mismatch"),c.setUint32(m(It,na),0),h+=4;for(const g of It.strings){const b=s[g],v=b.length;c.setUint32(h,v),u.set(b,h+4),h+=4+v}if(c.setUint32(m(It,na),h-m(It,na)-4),!t)c.setUint32(h,0),h+=4;else{const g=t.byteLength;c.setUint32(h,g),Xt(h+4+g<=l.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(t),h+4),h+=4+g}if(!n)c.setUint32(h,0),h+=4;else{const g=n.byteLength;c.setUint32(h,g),Xt(h+4+g<=l.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(n),h+4),h+=4+g}return e.data===void 0?(c.setUint32(h,0),h+=4):(c.setUint32(h,e.data.length),u.set(e.data,h+4),h+=4+e.data.length),Xt(h<=l.byteLength,"FontInfo.write: Buffer overflow"),l.transferToFixedLength(h)}};gv=new WeakMap,vv=new WeakMap,yv=new WeakMap,bv=new WeakMap,na=new WeakMap,Tl=new WeakMap,gw=new WeakMap,yr=new WeakMap,hn=new WeakSet,So=function(e){Xt(e<It.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=e*2%8,i=m(this,yr).getUint8(t)>>n&3;return i===0?void 0:i===2},xE=function(e){return Xt(e<It.numbers.length,"Invalid number index"),m(this,yr).getFloat64(m(It,gv)+e*8)},cb=function(e){Xt(e<It.strings.length,"Invalid string index");let t=m(It,na)+4;for(let s=0;s<e;s++)t+=m(this,yr).getUint32(t)+4;const n=m(this,yr).getUint32(t),i=new Uint8Array(n);return i.set(new Uint8Array(m(this,Tl),t+4,n)),m(this,gw).decode(i)},Re(It,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),Re(It,"numbers",["ascent","defaultWidth","descent"]),Re(It,"strings",["fallbackName","loadedName","mimetype","name"]),$(It,gv,Math.ceil(It.bools.length*2/8)),$(It,vv,m(It,gv)+It.numbers.length*8),$(It,yv,m(It,vv)+1+2*4),$(It,bv,m(It,yv)+1+8*6),$(It,na,m(It,bv)+1+2*3);let vI=It;var vw,yw,bw,ww,xw,_w,Aw,Ew;const Ir=class Ir{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,n=null,i=[],s=[],a=[],o=[],l=null,u=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,n=e[2],a=e[3],t===1?i.push(...e[4],...e[5]):i.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,l=e[1],i=e[2],s=e[3],o=e[4]||[],n=e[6],u=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const c=Math.floor(i.length/2),h=Math.floor(s.length/3),d=a.length,f=o.length;let p=0;for(const w of o)p+=1,p=Math.ceil(p/4)*4,p+=4+w.coords.length*4,p+=4+w.colors.length*4,w.verticesPerRow!==void 0&&(p+=4);const g=20+c*8+h*3+d*8+(n?16:0)+(u?3:0)+p,b=new ArrayBuffer(g),v=new DataView(b),x=new Uint8Array(b);v.setUint8(m(Ir,vw),t),v.setUint8(m(Ir,yw),n?1:0),v.setUint8(m(Ir,bw),u?1:0),v.setUint8(m(Ir,ww),l),v.setUint32(m(Ir,xw),c,!0),v.setUint32(m(Ir,_w),h,!0),v.setUint32(m(Ir,Aw),d,!0),v.setUint32(m(Ir,Ew),f,!0);let y=20;new Float32Array(b,y,c*2).set(i),y+=c*8,x.set(s,y),y+=h*3;for(const[w,_]of a)v.setFloat32(y,w,!0),y+=4,v.setUint32(y,parseInt(_.slice(1),16),!0),y+=4;if(n)for(const w of n)v.setFloat32(y,w,!0),y+=4;u&&(x.set(u,y),y+=3);for(let w=0;w<o.length;w++){const _=o[w];v.setUint8(y,_.type),y+=1,y=Math.ceil(y/4)*4,v.setUint32(y,_.coords.length,!0),y+=4,new Int32Array(b,y,_.coords.length).set(_.coords),y+=_.coords.length*4,v.setUint32(y,_.colors.length,!0),y+=4,new Int32Array(b,y,_.colors.length).set(_.colors),y+=_.colors.length*4,_.verticesPerRow!==void 0&&(v.setUint32(y,_.verticesPerRow,!0),y+=4)}return b}getIR(){const e=this.view,t=this.data[m(Ir,vw)],n=!!this.data[m(Ir,yw)],i=!!this.data[m(Ir,bw)],s=e.getUint32(m(Ir,xw),!0),a=e.getUint32(m(Ir,_w),!0),o=e.getUint32(m(Ir,Aw),!0),l=e.getUint32(m(Ir,Ew),!0);let u=20;const c=new Float32Array(this.buffer,u,s*2);u+=s*8;const h=new Uint8Array(this.buffer,u,a*3);u+=a*3;const d=[];for(let b=0;b<o;++b){const v=e.getFloat32(u,!0);u+=4;const x=e.getUint32(u,!0);u+=4,d.push([v,`#${x.toString(16).padStart(6,"0")}`])}let f=null;if(n){f=[];for(let b=0;b<4;++b)f.push(e.getFloat32(u,!0)),u+=4}let p=null;i&&(p=new Uint8Array(this.buffer,u,3),u+=3);const g=[];for(let b=0;b<l;++b){const v=e.getUint8(u);u+=1,u=Math.ceil(u/4)*4;const x=e.getUint32(u,!0);u+=4;const y=new Int32Array(this.buffer,u,x);u+=x*4;const A=e.getUint32(u,!0);u+=4;const w=new Int32Array(this.buffer,u,A);u+=A*4;const _={type:v,coords:y,colors:w};v===XM.LATTICE&&(_.verticesPerRow=e.getUint32(u,!0),u+=4),g.push(_)}if(t===1)return["RadialAxial","axial",f,d,Array.from(c.slice(0,2)),Array.from(c.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",f,d,[c[0],c[1]],[c[3],c[4]],c[2],c[5]];if(t===3){const b=this.data[m(Ir,ww)];let v=null;if(c.length>0){let x=c[0],y=c[0],A=c[1],w=c[1];for(let _=0;_<c.length;_+=2){const S=c[_],E=c[_+1];x=x>S?S:x,A=A>E?E:A,y=y<S?S:y,w=w<E?E:w}v=[x,A,y,w]}return["Mesh",b,c,h,g,v,f,p]}throw new Error(`Unsupported pattern kind: ${t}`)}};vw=new WeakMap,yw=new WeakMap,bw=new WeakMap,ww=new WeakMap,xw=new WeakMap,_w=new WeakMap,Aw=new WeakMap,Ew=new WeakMap,$(Ir,vw,0),$(Ir,yw,1),$(Ir,bw,2),$(Ir,ww,3),$(Ir,xw,4),$(Ir,_w,8),$(Ir,Aw,12),$(Ir,Ew,16);let yI=Ir;function Che(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(fs)return r;const e=URL.parse(r,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Nhe(r){if(fs&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return e_(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r==null?void 0:r.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function fA(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const bI=r=>typeof r=="object"&&Number.isInteger(r==null?void 0:r.num)&&r.num>=0&&Number.isInteger(r==null?void 0:r.gen)&&r.gen>=0,Dhe=r=>typeof r=="object"&&typeof(r==null?void 0:r.name)=="string",Mhe=che.bind(null,bI,Dhe);var Iu,HT;class Ihe{constructor(){$(this,Iu,new Map);$(this,HT,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};m(this,HT).then(()=>{for(const[i]of m(this,Iu))i.call(this,n)})}addEventListener(e,t,n=null){let i=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:s}=n;if(s.aborted){Et("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);i=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}m(this,Iu).set(t,i)}removeEventListener(e,t){const n=m(this,Iu).get(t);n==null||n(),m(this,Iu).delete(t)}terminate(){for(const[,e]of m(this,Iu))e==null||e();m(this,Iu).clear()}}Iu=new WeakMap,HT=new WeakMap;const mA={DATA:1,ERROR:2},Cn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function o5(){}function Ms(r){if(r instanceof Sd||r instanceof YM||r instanceof ZL||r instanceof jS||r instanceof LD)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||Dr('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new Sd(r.message);case"InvalidPDFException":return new YM(r.message);case"PasswordException":return new ZL(r.message,r.code);case"ResponseException":return new jS(r.message,r.status,r.missing);case"UnknownErrorException":return new LD(r.message,r.details)}return new LD(r.message,r.toString())}var wv,mo,dG,fG,mG,_E;class hb{constructor(e,t,n){$(this,mo);$(this,wv,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",j(this,mo,dG).bind(this),{signal:m(this,wv).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,t,n,i){const s=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const c=Promise.withResolvers();return this.streamControllers[s]={controller:u,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:e,streamId:s,data:t,desiredSize:u.desiredSize},i),c.promise},pull:u=>{const c=Promise.withResolvers();return this.streamControllers[s].pullCall=c,l.postMessage({sourceName:a,targetName:o,stream:Cn.PULL,streamId:s,desiredSize:u.desiredSize}),c.promise},cancel:u=>{Xt(u instanceof Error,"cancel must have a valid reason");const c=Promise.withResolvers();return this.streamControllers[s].cancelCall=c,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:Cn.CANCEL,streamId:s,reason:Ms(u)}),c.promise}},n)}destroy(){var e;(e=m(this,wv))==null||e.abort(),R(this,wv,null)}}wv=new WeakMap,mo=new WeakSet,dG=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){j(this,mo,mG).call(this,e);return}if(e.callback){const n=e.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===mA.DATA)i.resolve(e.data);else if(e.callback===mA.ERROR)i.reject(Ms(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,i=e.sourceName,s=this.comObj;Promise.try(t,e.data).then(function(a){s.postMessage({sourceName:n,targetName:i,callback:mA.DATA,callbackId:e.callbackId,data:a})},function(a){s.postMessage({sourceName:n,targetName:i,callback:mA.ERROR,callbackId:e.callbackId,reason:Ms(a)})});return}if(e.streamId){j(this,mo,fG).call(this,e);return}t(e.data)},fG=function(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,s=this.comObj,a=this,o=this.actionHandler[e.action],l={enqueue(u,c=1,h){if(this.isCancelled)return;const d=this.desiredSize;this.desiredSize-=c,d>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:i,stream:Cn.ENQUEUE,streamId:t,chunk:u},h)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:Cn.CLOSE,streamId:t}),delete a.streamSinks[t])},error(u){Xt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:Cn.ERROR,streamId:t,reason:Ms(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(o,e.data,l).then(function(){s.postMessage({sourceName:n,targetName:i,stream:Cn.START_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:n,targetName:i,stream:Cn.START_COMPLETE,streamId:t,reason:Ms(u)})})},mG=function(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,s=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case Cn.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Ms(e.reason));break;case Cn.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Ms(e.reason));break;case Cn.PULL:if(!o){s.postMessage({sourceName:n,targetName:i,stream:Cn.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||o5).then(function(){s.postMessage({sourceName:n,targetName:i,stream:Cn.PULL_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:n,targetName:i,stream:Cn.PULL_COMPLETE,streamId:t,reason:Ms(u)})});break;case Cn.ENQUEUE:if(Xt(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Cn.CLOSE:if(Xt(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),j(this,mo,_E).call(this,a,t);break;case Cn.ERROR:Xt(a,"error should have stream controller"),a.controller.error(Ms(e.reason)),j(this,mo,_E).call(this,a,t);break;case Cn.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Ms(e.reason)),j(this,mo,_E).call(this,a,t);break;case Cn.CANCEL:if(!o)break;const l=Ms(e.reason);Promise.try(o.onCancel||o5,l).then(function(){s.postMessage({sourceName:n,targetName:i,stream:Cn.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:n,targetName:i,stream:Cn.CANCEL_COMPLETE,streamId:t,reason:Ms(u)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},_E=async function(e,t){var n,i,s;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(i=e.pullCall)==null?void 0:i.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[t]};var Sw;class pG{constructor({enableHWA:e=!1}){$(this,Sw,!1);R(this,Sw,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!m(this,Sw)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Dr("Abstract method `_createCanvas` called.")}}Sw=new WeakMap;class Phe extends pG{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class gG{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Dr("Abstract method `_fetch` called.")}}class l5 extends gG{async _fetch(e){const t=await t_(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):e_(t)}}class vG{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,s){return"none"}destroy(e=!1){}}var Jf,xv,Pu,Ru,Wi,Zf,em,Xe,ji,db,Qp,AE,Jp,yG,wI,Zp,fb,mb,xI,pb;class Rhe extends vG{constructor({docId:t,ownerDocument:n=globalThis.document}){super();$(this,Xe);$(this,Jf);$(this,xv);$(this,Pu);$(this,Ru);$(this,Wi);$(this,Zf);$(this,em,0);R(this,Ru,t),R(this,Wi,n)}addFilter(t){if(!t)return"none";let n=m(this,Xe,ji).get(t);if(n)return n;const[i,s,a]=j(this,Xe,AE).call(this,t),o=t.length===1?i:`${i}${s}${a}`;if(n=m(this,Xe,ji).get(o),n)return m(this,Xe,ji).set(t,n),n;const l=`g_${m(this,Ru)}_transfer_map_${$n(this,em)._++}`,u=j(this,Xe,Jp).call(this,l);m(this,Xe,ji).set(t,u),m(this,Xe,ji).set(o,u);const c=j(this,Xe,Zp).call(this,l);return j(this,Xe,mb).call(this,i,s,a,c),u}addHCMFilter(t,n){var p;const i=`${t}-${n}`,s="base";let a=m(this,Xe,db).get(s);if((a==null?void 0:a.key)===i||(a?((p=a.filter)==null||p.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},m(this,Xe,db).set(s,a)),!t||!n))return a.url;const o=j(this,Xe,pb).call(this,t);t=et.makeHexColor(...o);const l=j(this,Xe,pb).call(this,n);if(n=et.makeHexColor(...l),m(this,Xe,Qp).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return a.url;const u=new Array(256);for(let g=0;g<=255;g++){const b=g/255;u[g]=b<=.03928?b/12.92:((b+.055)/1.055)**2.4}const c=u.join(","),h=`g_${m(this,Ru)}_hcm_filter`,d=a.filter=j(this,Xe,Zp).call(this,h);j(this,Xe,mb).call(this,c,c,c,d),j(this,Xe,wI).call(this,d);const f=(g,b)=>{const v=o[g]/255,x=l[g]/255,y=new Array(b+1);for(let A=0;A<=b;A++)y[A]=v+A/b*(x-v);return y.join(",")};return j(this,Xe,mb).call(this,f(0,5),f(1,5),f(2,5),d),a.url=j(this,Xe,Jp).call(this,h),a.url}addAlphaFilter(t){let n=m(this,Xe,ji).get(t);if(n)return n;const[i]=j(this,Xe,AE).call(this,[t]),s=`alpha_${i}`;if(n=m(this,Xe,ji).get(s),n)return m(this,Xe,ji).set(t,n),n;const a=`g_${m(this,Ru)}_alpha_map_${$n(this,em)._++}`,o=j(this,Xe,Jp).call(this,a);m(this,Xe,ji).set(t,o),m(this,Xe,ji).set(s,o);const l=j(this,Xe,Zp).call(this,a);return j(this,Xe,xI).call(this,i,l),o}addLuminosityFilter(t){let n=m(this,Xe,ji).get(t||"luminosity");if(n)return n;let i,s;if(t?([i]=j(this,Xe,AE).call(this,[t]),s=`luminosity_${i}`):s="luminosity",n=m(this,Xe,ji).get(s),n)return m(this,Xe,ji).set(t,n),n;const a=`g_${m(this,Ru)}_luminosity_map_${$n(this,em)._++}`,o=j(this,Xe,Jp).call(this,a);m(this,Xe,ji).set(t,o),m(this,Xe,ji).set(s,o);const l=j(this,Xe,Zp).call(this,a);return j(this,Xe,yG).call(this,l),t&&j(this,Xe,xI).call(this,i,l),o}addHighlightHCMFilter(t,n,i,s,a){var x;const o=`${n}-${i}-${s}-${a}`;let l=m(this,Xe,db).get(t);if((l==null?void 0:l.key)===o||(l?((x=l.filter)==null||x.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},m(this,Xe,db).set(t,l)),!n||!i))return l.url;const[u,c]=[n,i].map(j(this,Xe,pb).bind(this));let h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[f,p]=[s,a].map(j(this,Xe,pb).bind(this));d<h&&([h,d,f,p]=[d,h,p,f]),m(this,Xe,Qp).style.color="";const g=(y,A,w)=>{const _=new Array(256),S=(d-h)/w,E=y/255,C=(A-y)/(255*w);let N=0;for(let D=0;D<=w;D++){const M=Math.round(h+D*S),I=E+D*C;for(let U=N;U<=M;U++)_[U]=I;N=M+1}for(let D=N;D<256;D++)_[D]=_[N-1];return _.join(",")},b=`g_${m(this,Ru)}_hcm_${t}_filter`,v=l.filter=j(this,Xe,Zp).call(this,b);return j(this,Xe,wI).call(this,v),j(this,Xe,mb).call(this,g(f[0],p[0],5),g(f[1],p[1],5),g(f[2],p[2],5),v),l.url=j(this,Xe,Jp).call(this,b),l.url}destroy(t=!1){var n,i,s,a;t&&((n=m(this,Zf))!=null&&n.size)||((i=m(this,Pu))==null||i.parentNode.parentNode.remove(),R(this,Pu,null),(s=m(this,xv))==null||s.clear(),R(this,xv,null),(a=m(this,Zf))==null||a.clear(),R(this,Zf,null),R(this,em,0))}}Jf=new WeakMap,xv=new WeakMap,Pu=new WeakMap,Ru=new WeakMap,Wi=new WeakMap,Zf=new WeakMap,em=new WeakMap,Xe=new WeakSet,ji=function(){return m(this,xv)||R(this,xv,new Map)},db=function(){return m(this,Zf)||R(this,Zf,new Map)},Qp=function(){if(!m(this,Pu)){const t=m(this,Wi).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=m(this,Wi).createElementNS(fu,"svg");i.setAttribute("width",0),i.setAttribute("height",0),R(this,Pu,m(this,Wi).createElementNS(fu,"defs")),t.append(i),i.append(m(this,Pu)),m(this,Wi).body.append(t)}return m(this,Pu)},AE=function(t){if(t.length===1){const u=t[0],c=new Array(256);for(let d=0;d<256;d++)c[d]=u[d]/255;const h=c.join(",");return[h,h,h]}const[n,i,s]=t,a=new Array(256),o=new Array(256),l=new Array(256);for(let u=0;u<256;u++)a[u]=n[u]/255,o[u]=i[u]/255,l[u]=s[u]/255;return[a.join(","),o.join(","),l.join(",")]},Jp=function(t){if(m(this,Jf)===void 0){R(this,Jf,"");const n=m(this,Wi).URL;n!==m(this,Wi).baseURI&&(KC(n)?Et('#createUrl: ignore "data:"-URL for performance reasons.'):R(this,Jf,SH(n,"")))}return`url(${m(this,Jf)}#${t})`},yG=function(t){const n=m(this,Wi).createElementNS(fu,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},wI=function(t){const n=m(this,Wi).createElementNS(fu,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},Zp=function(t){const n=m(this,Wi).createElementNS(fu,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),m(this,Xe,Qp).append(n),n},fb=function(t,n,i){const s=m(this,Wi).createElementNS(fu,n);s.setAttribute("type","discrete"),s.setAttribute("tableValues",i),t.append(s)},mb=function(t,n,i,s){const a=m(this,Wi).createElementNS(fu,"feComponentTransfer");s.append(a),j(this,Xe,fb).call(this,a,"feFuncR",t),j(this,Xe,fb).call(this,a,"feFuncG",n),j(this,Xe,fb).call(this,a,"feFuncB",i)},xI=function(t,n){const i=m(this,Wi).createElementNS(fu,"feComponentTransfer");n.append(i),j(this,Xe,fb).call(this,i,"feFuncA",t)},pb=function(t){return m(this,Xe,Qp).style.color=t,n_(getComputedStyle(m(this,Xe,Qp)).getPropertyValue("color"))};class bG{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Dr("Abstract method `_fetch` called.")}}class u5 extends bG{async _fetch(e){const t=await t_(e,"arraybuffer");return new Uint8Array(t)}}class wG{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Dr("Abstract method `_fetch` called.")}}class c5 extends wG{async _fetch(e){const t=await t_(e,"arraybuffer");return new Uint8Array(t)}}fs&&Et("Please use the `legacy` build in Node.js environments.");async function AF(r){const t=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(t)}class khe extends vG{}class Fhe extends pG{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class Ohe extends gG{async _fetch(e){return AF(e)}}class Bhe extends bG{async _fetch(e){return AF(e)}}class Lhe extends wG{async _fetch(e){return AF(e)}}const Bp="__forcedDependency",{floor:h5,ceil:d5}=Math;function pA(r,e,t,n,i,s){r[e*4+0]=Math.min(r[e*4+0],t),r[e*4+1]=Math.min(r[e*4+1],n),r[e*4+2]=Math.max(r[e*4+2],i),r[e*4+3]=Math.max(r[e*4+3],s)}const _I=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var _v,_h;class $he{constructor(e,t){$(this,_v);$(this,_h);R(this,_v,e),R(this,_h,t)}get length(){return m(this,_v).length}isEmpty(e){return m(this,_v)[e]===_I}minX(e){return m(this,_h)[e*4+0]/256}minY(e){return m(this,_h)[e*4+1]/256}maxX(e){return(m(this,_h)[e*4+2]+1)/256}maxY(e){return(m(this,_h)[e*4+3]+1)/256}}_v=new WeakMap,_h=new WeakMap;const gA=(r,e)=>{if(!r)return;let t=r.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},r.set(e,t)),t};var Rs,ks,tm,Po,rm,ku,ur,br,Fu,Fs,Tw,Av,nm,im,Ou,Ki,Cl,Cw,AI;class Vhe{constructor(e,t,n=!1){$(this,Cw);$(this,Rs,{__proto__:null});$(this,ks,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Bp]:[]});$(this,tm,new Map);$(this,Po,[]);$(this,rm,[]);$(this,ku,[[1,0,0,1,0,0]]);$(this,ur,[-1/0,-1/0,1/0,1/0]);$(this,br,new Float64Array([1/0,1/0,-1/0,-1/0]));$(this,Fu,-1);$(this,Fs,new Set);$(this,Tw,new Map);$(this,Av,new Map);$(this,nm);$(this,im);$(this,Ou);$(this,Ki);$(this,Cl);R(this,nm,e.width),R(this,im,e.height),j(this,Cw,AI).call(this,t),n&&R(this,Cl,new Map)}growOperationsCount(e){e>=m(this,Ki).length&&j(this,Cw,AI).call(this,e,m(this,Ki))}save(e){return R(this,Rs,{__proto__:m(this,Rs)}),R(this,ks,{__proto__:m(this,ks),transform:{__proto__:m(this,ks).transform},moveText:{__proto__:m(this,ks).moveText},sameLineText:{__proto__:m(this,ks).sameLineText},[Bp]:{__proto__:m(this,ks)[Bp]}}),R(this,ur,{__proto__:m(this,ur)}),m(this,Po).push(e),this}restore(e){var i;const t=Object.getPrototypeOf(m(this,Rs));if(t===null)return this;R(this,Rs,t),R(this,ks,Object.getPrototypeOf(m(this,ks))),R(this,ur,Object.getPrototypeOf(m(this,ur)));const n=m(this,Po).pop();return n!==void 0&&((i=gA(m(this,Cl),e))==null||i.dependencies.add(n),m(this,Ki)[e]=m(this,Ki)[n]),this}recordOpenMarker(e){return m(this,Po).push(e),this}getOpenMarker(){return m(this,Po).length===0?null:m(this,Po).at(-1)}recordCloseMarker(e){var n;const t=m(this,Po).pop();return t!==void 0&&((n=gA(m(this,Cl),e))==null||n.dependencies.add(t),m(this,Ki)[e]=m(this,Ki)[t]),this}beginMarkedContent(e){return m(this,rm).push(e),this}endMarkedContent(e){var n;const t=m(this,rm).pop();return t!==void 0&&((n=gA(m(this,Cl),e))==null||n.dependencies.add(t),m(this,Ki)[e]=m(this,Ki)[t]),this}pushBaseTransform(e){return m(this,ku).push(et.multiplyByDOMMatrix(m(this,ku).at(-1),e.getTransform())),this}popBaseTransform(){return m(this,ku).length>1&&m(this,ku).pop(),this}recordSimpleData(e,t){return m(this,Rs)[e]=t,this}recordIncrementalData(e,t){return m(this,ks)[e].push(t),this}resetIncrementalData(e,t){return m(this,ks)[e].length=0,this}recordNamedData(e,t){return m(this,tm).set(e,t),this}recordSimpleDataFromNamed(e,t,n){m(this,Rs)[e]=m(this,tm).get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Bp,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in m(this,Rs)&&this.recordFutureForcedDependency(t,m(this,Rs)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of m(this,Fs))this.recordFutureForcedDependency(Bp,e);return this}resetBBox(e){return m(this,Fu)!==e&&(R(this,Fu,e),m(this,br)[0]=1/0,m(this,br)[1]=1/0,m(this,br)[2]=-1/0,m(this,br)[3]=-1/0),this}recordClipBox(e,t,n,i,s,a){const o=et.multiplyByDOMMatrix(m(this,ku).at(-1),t.getTransform()),l=[1/0,1/0,-1/0,-1/0];et.axialAlignedBoundingBox([n,s,i,a],o,l);const u=et.intersect(m(this,ur),l);return u?(m(this,ur)[0]=u[0],m(this,ur)[1]=u[1],m(this,ur)[2]=u[2],m(this,ur)[3]=u[3]):(m(this,ur)[0]=m(this,ur)[1]=1/0,m(this,ur)[2]=m(this,ur)[3]=-1/0),this}recordBBox(e,t,n,i,s,a){const o=m(this,ur);if(o[0]===1/0)return this;const l=et.multiplyByDOMMatrix(m(this,ku).at(-1),t.getTransform());if(o[0]===-1/0)return et.axialAlignedBoundingBox([n,s,i,a],l,m(this,br)),this;const u=[1/0,1/0,-1/0,-1/0];return et.axialAlignedBoundingBox([n,s,i,a],l,u),m(this,br)[0]=Math.min(m(this,br)[0],Math.max(u[0],o[0])),m(this,br)[1]=Math.min(m(this,br)[1],Math.max(u[1],o[1])),m(this,br)[2]=Math.max(m(this,br)[2],Math.min(u[2],o[2])),m(this,br)[3]=Math.max(m(this,br)[3],Math.min(u[3],o[3])),this}recordCharacterBBox(e,t,n,i=1,s=0,a=0,o){const l=n.bbox;let u,c;if(l&&(u=l[2]!==l[0]&&l[3]!==l[1]&&m(this,Av).get(n),u!==!1&&(c=[0,0,0,0],et.axialAlignedBoundingBox(l,n.fontMatrix,c),(i!==1||s!==0||a!==0)&&et.scaleMinMax([i,0,0,-i,s,a],c),u)))return this.recordBBox(e,t,c[0],c[2],c[1],c[3]);if(!o)return this.recordFullPageBBox(e);const h=o();return l&&c&&u===void 0&&(u=c[0]<=s-h.actualBoundingBoxLeft&&c[2]>=s+h.actualBoundingBoxRight&&c[1]<=a-h.actualBoundingBoxAscent&&c[3]>=a+h.actualBoundingBoxDescent,m(this,Av).set(n,u),u)?this.recordBBox(e,t,c[0],c[2],c[1],c[3]):this.recordBBox(e,t,s-h.actualBoundingBoxLeft,s+h.actualBoundingBoxRight,a-h.actualBoundingBoxAscent,a+h.actualBoundingBoxDescent)}recordFullPageBBox(e){return m(this,br)[0]=Math.max(0,m(this,ur)[0]),m(this,br)[1]=Math.max(0,m(this,ur)[1]),m(this,br)[2]=Math.min(m(this,nm),m(this,ur)[2]),m(this,br)[3]=Math.min(m(this,im),m(this,ur)[3]),this}getSimpleIndex(e){return m(this,Rs)[e]}recordDependencies(e,t){const n=m(this,Fs),i=m(this,Rs),s=m(this,ks);for(const a of t)a in m(this,Rs)?n.add(i[a]):a in s&&s[a].forEach(n.add,n);return this}recordNamedDependency(e,t){return m(this,tm).has(t)&&m(this,Fs).add(m(this,tm).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[Bp]),m(this,Cl)){const n=gA(m(this,Cl),e),{dependencies:i}=n;m(this,Fs).forEach(i.add,i),m(this,Po).forEach(i.add,i),m(this,rm).forEach(i.add,i),i.delete(e),n.isRenderingOperation=!0}if(m(this,Fu)===e){const n=h5(m(this,br)[0]*256/m(this,nm)),i=h5(m(this,br)[1]*256/m(this,im)),s=d5(m(this,br)[2]*256/m(this,nm)),a=d5(m(this,br)[3]*256/m(this,im));pA(m(this,Ou),e,n,i,s,a);for(const o of m(this,Fs))o!==e&&pA(m(this,Ou),o,n,i,s,a);for(const o of m(this,Po))o!==e&&pA(m(this,Ou),o,n,i,s,a);for(const o of m(this,rm))o!==e&&pA(m(this,Ou),o,n,i,s,a);t||(m(this,Fs).clear(),R(this,Fu,-1))}return this}recordShowTextOperation(e,t=!1){const n=Array.from(m(this,Fs));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return m(this,Fu)===e&&(R(this,Fu,-1),m(this,ur)[0]=Math.max(m(this,ur)[0],m(this,br)[0]),m(this,ur)[1]=Math.max(m(this,ur)[1],m(this,br)[1]),m(this,ur)[2]=Math.min(m(this,ur)[2],m(this,br)[2]),m(this,ur)[3]=Math.min(m(this,ur)[3],m(this,br)[3]),t||m(this,Fs).clear()),this}_takePendingDependencies(){const e=m(this,Fs);return R(this,Fs,new Set),e}_extractOperation(e){const t=m(this,Tw).get(e);return m(this,Tw).delete(e),t}_pushPendingDependencies(e){for(const t of e)m(this,Fs).add(t)}take(){return m(this,Av).clear(),new $he(m(this,Ki),m(this,Ou))}takeDebugMetadata(){return m(this,Cl)}}Rs=new WeakMap,ks=new WeakMap,tm=new WeakMap,Po=new WeakMap,rm=new WeakMap,ku=new WeakMap,ur=new WeakMap,br=new WeakMap,Fu=new WeakMap,Fs=new WeakMap,Tw=new WeakMap,Av=new WeakMap,nm=new WeakMap,im=new WeakMap,Ou=new WeakMap,Ki=new WeakMap,Cl=new WeakMap,Cw=new WeakSet,AI=function(e,t){const n=new ArrayBuffer(e*4);R(this,Ou,new Uint8ClampedArray(n)),R(this,Ki,new Uint32Array(n)),t&&t.length>0?(m(this,Ki).set(t),m(this,Ki).fill(_I,t.length)):m(this,Ki).fill(_I)};var Tr,on,Ro,Ev,Sv;const PO=class PO{constructor(e,t,n){$(this,Tr);$(this,on);$(this,Ro);$(this,Ev,0);$(this,Sv,0);if(e instanceof PO&&m(e,Ro)===!!n)return e;R(this,Tr,e),R(this,on,t),R(this,Ro,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(e){return $n(this,Sv)._++,m(this,Tr).save(m(this,on)),this}restore(e){return m(this,Sv)>0&&(m(this,Tr).restore(m(this,on)),$n(this,Sv)._--),this}recordOpenMarker(e){return $n(this,Ev)._++,this}getOpenMarker(){return m(this,Ev)>0?m(this,on):m(this,Tr).getOpenMarker()}recordCloseMarker(e){return $n(this,Ev)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return m(this,Tr).pushBaseTransform(e),this}popBaseTransform(){return m(this,Tr).popBaseTransform(),this}recordSimpleData(e,t){return m(this,Tr).recordSimpleData(e,m(this,on)),this}recordIncrementalData(e,t){return m(this,Tr).recordIncrementalData(e,m(this,on)),this}resetIncrementalData(e,t){return m(this,Tr).resetIncrementalData(e,m(this,on)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return m(this,Tr).recordSimpleDataFromNamed(e,t,m(this,on)),this}recordFutureForcedDependency(e,t){return m(this,Tr).recordFutureForcedDependency(e,m(this,on)),this}inheritSimpleDataAsFutureForcedDependencies(e){return m(this,Tr).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return m(this,Tr).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return m(this,Ro)||m(this,Tr).resetBBox(m(this,on)),this}recordClipBox(e,t,n,i,s,a){return m(this,Ro)||m(this,Tr).recordClipBox(m(this,on),t,n,i,s,a),this}recordBBox(e,t,n,i,s,a){return m(this,Ro)||m(this,Tr).recordBBox(m(this,on),t,n,i,s,a),this}recordCharacterBBox(e,t,n,i,s,a,o){return m(this,Ro)||m(this,Tr).recordCharacterBBox(m(this,on),t,n,i,s,a,o),this}recordFullPageBBox(e){return m(this,Ro)||m(this,Tr).recordFullPageBBox(m(this,on)),this}getSimpleIndex(e){return m(this,Tr).getSimpleIndex(e)}recordDependencies(e,t){return m(this,Tr).recordDependencies(m(this,on),t),this}recordNamedDependency(e,t){return m(this,Tr).recordNamedDependency(m(this,on),t),this}recordOperation(e){return m(this,Tr).recordOperation(m(this,on),!0),this}recordShowTextOperation(e){return m(this,Tr).recordShowTextOperation(m(this,on),!0),this}bboxToClipBoxDropOperation(e){return m(this,Ro)||m(this,Tr).bboxToClipBoxDropOperation(m(this,on),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Tr=new WeakMap,on=new WeakMap,Ro=new WeakMap,Ev=new WeakMap,Sv=new WeakMap;let XS=PO;const La={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Ti={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function EI(r,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,n),r.clip(i)}class EF{isModifyingCurrentTransform(){return!1}getPattern(){Dr("Abstract method `getPattern` called.")}}class Uhe extends EF{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,i){let s;if(i===Ti.STROKE||i===Ti.FILL){const a=t.current.getClippedPathBoundingBox(i,Xr(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,u=t.cachedCanvases.getCanvas("pattern",o,l),c=u.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-a[0],-a[1]),n=et.transform(n,[1,0,0,1,a[0],a[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),EI(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),s=e.createPattern(u.canvas,"no-repeat");const h=new DOMMatrix(n);s.setTransform(h)}else EI(e,this._bbox),s=this._createGradient(e);return s}}function UD(r,e,t,n,i,s,a,o){const l=e.coords,u=e.colors,c=r.data,h=r.width*4;let d;l[t+1]>l[n+1]&&(d=t,t=n,n=d,d=s,s=a,a=d),l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=a,a=o,o=d),l[t+1]>l[n+1]&&(d=t,t=n,n=d,d=s,s=a,a=d);const f=(l[t]+e.offsetX)*e.scaleX,p=(l[t+1]+e.offsetY)*e.scaleY,g=(l[n]+e.offsetX)*e.scaleX,b=(l[n+1]+e.offsetY)*e.scaleY,v=(l[i]+e.offsetX)*e.scaleX,x=(l[i+1]+e.offsetY)*e.scaleY;if(p>=x)return;const y=u[s],A=u[s+1],w=u[s+2],_=u[a],S=u[a+1],E=u[a+2],C=u[o],N=u[o+1],D=u[o+2],M=Math.round(p),I=Math.round(x);let U,X,k,z,q,H,te,ce;for(let re=M;re<=I;re++){if(re<b){const me=re<p?0:(p-re)/(p-b);U=f-(f-g)*me,X=y-(y-_)*me,k=A-(A-S)*me,z=w-(w-E)*me}else{let me;re>x?me=1:b===x?me=0:me=(b-re)/(b-x),U=g-(g-v)*me,X=_-(_-C)*me,k=S-(S-N)*me,z=E-(E-D)*me}let O;re<p?O=0:re>x?O=1:O=(p-re)/(p-x),q=f-(f-v)*O,H=y-(y-C)*O,te=A-(A-N)*O,ce=w-(w-D)*O;const ne=Math.round(Math.min(U,q)),W=Math.round(Math.max(U,q));let pe=h*re+ne*4;for(let me=ne;me<=W;me++)O=(U-me)/(U-q),O<0?O=0:O>1&&(O=1),c[pe++]=X-(X-H)*O|0,c[pe++]=k-(k-te)*O|0,c[pe++]=z-(z-ce)*O|0,c[pe++]=255}}function zhe(r,e,t){const n=e.coords,i=e.colors;let s,a;switch(e.type){case XM.LATTICE:const o=e.verticesPerRow,l=Math.floor(n.length/o)-1,u=o-1;for(s=0;s<l;s++){let c=s*o;for(let h=0;h<u;h++,c++)UD(r,t,n[c],n[c+1],n[c+o],i[c],i[c+1],i[c+o]),UD(r,t,n[c+o+1],n[c+1],n[c+o],i[c+o+1],i[c+1],i[c+o])}break;case XM.TRIANGLES:for(s=0,a=n.length;s<a;s+=3)UD(r,t,n[s],n[s+1],n[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class jhe extends EF{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,c=Math.ceil(this._bounds[3])-l,h=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),d=Math.min(Math.ceil(Math.abs(c*e[1]*1.1)),3e3),f=u/h,p=c/d,g={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/f,scaleY:1/p},b=h+2*2,v=d+2*2,x=n.getCanvas("mesh",b,v),y=x.context,A=y.createImageData(h,d);if(t){const _=A.data;for(let S=0,E=_.length;S<E;S+=4)_[S]=t[0],_[S+1]=t[1],_[S+2]=t[2],_[S+3]=255}for(const _ of this._figures)zhe(A,_,g);return y.putImageData(A,2,2),{canvas:x.canvas,offsetX:o-2*f,offsetY:l-2*p,scaleX:f,scaleY:p}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,i){EI(e,this._bbox);const s=new Float32Array(2);if(i===Ti.SHADING)et.singularValueDecompose2dScale(Xr(e),s);else if(this.matrix){et.singularValueDecompose2dScale(this.matrix,s);const[o,l]=s;et.singularValueDecompose2dScale(t.baseTransform,s),s[0]*=o,s[1]*=l}else et.singularValueDecompose2dScale(t.baseTransform,s);const a=this._createMeshCanvas(s,i===Ti.SHADING?null:this._background,t.cachedCanvases);return i!==Ti.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class qhe extends EF{getPattern(){return"hotpink"}}function Hhe(r){switch(r[0]){case"RadialAxial":return new Uhe(r);case"Mesh":return new jhe(r);case"Dummy":return new qhe}throw new Error(`Unknown IR type: ${r[0]}`)}const f5={COLORED:1,UNCOLORED:2},GT=class GT{constructor(e,t,n,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e,t){var H,te;const{bbox:n,operatorList:i,paintType:s,tilingType:a,color:o,canvasGraphicsFactory:l}=this;let{xstep:u,ystep:c}=this;u=Math.abs(u),c=Math.abs(c),WC("TilingType: "+a);const h=n[0],d=n[1],f=n[2],p=n[3],g=f-h,b=p-d,v=new Float32Array(2);et.singularValueDecompose2dScale(this.matrix,v);const[x,y]=v;et.singularValueDecompose2dScale(this.baseTransform,v);const A=x*v[0],w=y*v[1];let _=g,S=b,E=!1,C=!1;const N=Math.ceil(u*A),D=Math.ceil(c*w),M=Math.ceil(g*A),I=Math.ceil(b*w);N>=M?_=u:E=!0,D>=I?S=c:C=!0;const U=this.getSizeAndScale(_,this.ctx.canvas.width,A),X=this.getSizeAndScale(S,this.ctx.canvas.height,w),k=e.cachedCanvases.getCanvas("pattern",U.size,X.size),z=k.context,q=l.createCanvasGraphics(z,t);if(q.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(q,s,o),z.translate(-U.scale*h,-X.scale*d),q.transform(0,U.scale,0,0,X.scale,0,0),z.save(),(H=q.dependencyTracker)==null||H.save(),this.clipBbox(q,h,d,f,p),q.baseTransform=Xr(q.ctx),q.executeOperatorList(i),q.endDrawing(),(te=q.dependencyTracker)==null||te.restore(),z.restore(),E||C){const ce=k.canvas;E&&(_=u),C&&(S=c);const re=this.getSizeAndScale(_,this.ctx.canvas.width,A),O=this.getSizeAndScale(S,this.ctx.canvas.height,w),ne=re.size,W=O.size,pe=e.cachedCanvases.getCanvas("pattern-workaround",ne,W),me=pe.context,ie=E?Math.floor(g/u):0,K=C?Math.floor(b/c):0;for(let ae=0;ae<=ie;ae++)for(let ge=0;ge<=K;ge++)me.drawImage(ce,ne*ae,W*ge,ne,W,0,0,ne,W);return{canvas:pe.canvas,scaleX:re.scale,scaleY:O.scale,offsetX:h,offsetY:d}}return{canvas:k.canvas,scaleX:U.scale,scaleY:X.scale,offsetX:h,offsetY:d}}getSizeAndScale(e,t,n){const i=Math.max(GT.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*n);return s>=i?s=i:n=s/e,{scale:n,size:s}}clipBbox(e,t,n,i,s){const a=i-t,o=s-n;e.ctx.rect(t,n,a,o),et.axialAlignedBoundingBox([t,n,i,s],Xr(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,s=e.current;switch(t){case f5.COLORED:const{fillStyle:a,strokeStyle:o}=this.ctx;i.fillStyle=s.fillColor=a,i.strokeStyle=s.strokeColor=o;break;case f5.UNCOLORED:i.fillStyle=i.strokeStyle=n,s.fillColor=s.strokeColor=n;break;default:throw new ihe(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,i,s){let a=n;i!==Ti.SHADING&&(a=et.transform(a,t.baseTransform),this.matrix&&(a=et.transform(a,this.matrix)));const o=this.createPatternCanvas(t,s);let l=new DOMMatrix(a);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const u=e.createPattern(o.canvas,"repeat");return u.setTransform(l),u}};Re(GT,"MAX_PATTERN_SIZE",3e3);let SI=GT;function Ghe({src:r,srcPos:e=0,dest:t,width:n,height:i,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const o=Ri.isLittleEndian?4278190080:255,[l,u]=a?[s,o]:[o,s],c=n>>3,h=n&7,d=r.length;t=new Uint32Array(t.buffer);let f=0;for(let p=0;p<i;p++){for(const b=e+c;e<b;e++){const v=e<d?r[e]:255;t[f++]=v&128?u:l,t[f++]=v&64?u:l,t[f++]=v&32?u:l,t[f++]=v&16?u:l,t[f++]=v&8?u:l,t[f++]=v&4?u:l,t[f++]=v&2?u:l,t[f++]=v&1?u:l}if(h===0)continue;const g=e<d?r[e++]:255;for(let b=0;b<h;b++)t[f++]=g&1<<7-b?u:l}return{srcPos:e,destPos:f}}const m5=16,p5=100,Whe=15,g5=10,$s=16,zD=new DOMMatrix,wa=new Float32Array(2),xg=new Float32Array([1/0,1/0,-1/0,-1/0]);function Khe(r,e){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){e.save(),this.__originalSave()},r.restore=function(){e.restore(),this.__originalRestore()},r.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},r.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},r.transform=function(t,n,i,s,a,o){e.transform(t,n,i,s,a,o),this.__originalTransform(t,n,i,s,a,o)},r.setTransform=function(t,n,i,s,a,o){e.setTransform(t,n,i,s,a,o),this.__originalSetTransform(t,n,i,s,a,o)},r.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},r.rotate=function(t){e.rotate(t),this.__originalRotate(t)},r.clip=function(t){e.clip(t),this.__originalClip(t)},r.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},r.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},r.bezierCurveTo=function(t,n,i,s,a,o){e.bezierCurveTo(t,n,i,s,a,o),this.__originalBezierCurveTo(t,n,i,s,a,o)},r.rect=function(t,n,i,s){e.rect(t,n,i,s),this.__originalRect(t,n,i,s)},r.closePath=function(){e.closePath(),this.__originalClosePath()},r.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class Xhe{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function vA(r,e,t,n,i,s,a,o,l,u){const[c,h,d,f,p,g]=Xr(r);if(h===0&&d===0){const x=a*c+p,y=Math.round(x),A=o*f+g,w=Math.round(A),_=(a+l)*c+p,S=Math.abs(Math.round(_)-y)||1,E=(o+u)*f+g,C=Math.abs(Math.round(E)-w)||1;return r.setTransform(Math.sign(c),0,0,Math.sign(f),y,w),r.drawImage(e,t,n,i,s,0,0,S,C),r.setTransform(c,h,d,f,p,g),[S,C]}if(c===0&&f===0){const x=o*d+p,y=Math.round(x),A=a*h+g,w=Math.round(A),_=(o+u)*d+p,S=Math.abs(Math.round(_)-y)||1,E=(a+l)*h+g,C=Math.abs(Math.round(E)-w)||1;return r.setTransform(0,Math.sign(h),Math.sign(d),0,y,w),r.drawImage(e,t,n,i,s,0,0,C,S),r.setTransform(c,h,d,f,p,g),[C,S]}r.drawImage(e,t,n,i,s,a,o,l,u);const b=Math.hypot(c,h),v=Math.hypot(d,f);return[b*l,v*u]}class v5{constructor(e,t,n){Re(this,"alphaIsShape",!1);Re(this,"fontSize",0);Re(this,"fontSizeScale",1);Re(this,"textMatrix",null);Re(this,"textMatrixScale",1);Re(this,"fontMatrix",KM);Re(this,"leading",0);Re(this,"x",0);Re(this,"y",0);Re(this,"lineX",0);Re(this,"lineY",0);Re(this,"charSpacing",0);Re(this,"wordSpacing",0);Re(this,"textHScale",1);Re(this,"textRenderingMode",vi.FILL);Re(this,"textRise",0);Re(this,"fillColor","#000000");Re(this,"strokeColor","#000000");Re(this,"patternFill",!1);Re(this,"patternStroke",!1);Re(this,"fillAlpha",1);Re(this,"strokeAlpha",1);Re(this,"lineWidth",1);Re(this,"activeSMask",null);Re(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=xg.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Ti.FILL,t=null){const n=this.minMax.slice();if(e===Ti.STROKE){t||Dr("Stroke bounding box must include transform."),et.singularValueDecompose2dScale(t,wa);const i=wa[0]*this.lineWidth/2,s=wa[1]*this.lineWidth/2;n[0]-=i,n[1]-=s,n[2]+=i,n[3]+=s}return n}updateClipFromPath(){const e=et.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(xg,0)}getClippedPathBoundingBox(e=Ti.FILL,t=null){return et.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function y5(r,e){if(e instanceof ImageData){r.putImageData(e,0,0);return}const t=e.height,n=e.width,i=t%$s,s=(t-i)/$s,a=i===0?s:s+1,o=r.createImageData(n,$s);let l=0,u;const c=e.data,h=o.data;let d,f,p,g;if(e.kind===fE.GRAYSCALE_1BPP){const b=c.byteLength,v=new Uint32Array(h.buffer,0,h.byteLength>>2),x=v.length,y=n+7>>3,A=4294967295,w=Ri.isLittleEndian?4278190080:255;for(d=0;d<a;d++){for(p=d<s?$s:i,u=0,f=0;f<p;f++){const _=b-l;let S=0;const E=_>y?n:_*8-7,C=E&-8;let N=0,D=0;for(;S<C;S+=8)D=c[l++],v[u++]=D&128?A:w,v[u++]=D&64?A:w,v[u++]=D&32?A:w,v[u++]=D&16?A:w,v[u++]=D&8?A:w,v[u++]=D&4?A:w,v[u++]=D&2?A:w,v[u++]=D&1?A:w;for(;S<E;S++)N===0&&(D=c[l++],N=128),v[u++]=D&N?A:w,N>>=1}for(;u<x;)v[u++]=0;r.putImageData(o,0,d*$s)}}else if(e.kind===fE.RGBA_32BPP){for(f=0,g=n*$s*4,d=0;d<s;d++)h.set(c.subarray(l,l+g)),l+=g,r.putImageData(o,0,f),f+=$s;d<a&&(g=n*i*4,h.set(c.subarray(l,l+g)),r.putImageData(o,0,f))}else if(e.kind===fE.RGB_24BPP)for(p=$s,g=n*p,d=0;d<a;d++){for(d>=s&&(p=i,g=n*p),u=0,f=g;f--;)h[u++]=c[l++],h[u++]=c[l++],h[u++]=c[l++],h[u++]=255;r.putImageData(o,0,d*$s)}else throw new Error(`bad image kind: ${e.kind}`)}function b5(r,e){if(e.bitmap){r.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,i=t%$s,s=(t-i)/$s,a=i===0?s:s+1,o=r.createImageData(n,$s);let l=0;const u=e.data,c=o.data;for(let h=0;h<a;h++){const d=h<s?$s:i;({srcPos:l}=Ghe({src:u,srcPos:l,dest:c,width:n,height:d,nonBlackColor:0})),r.putImageData(o,0,h*$s)}}function $y(r,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)r[n]!==void 0&&(e[n]=r[n]);r.setLineDash!==void 0&&(e.setLineDash(r.getLineDash()),e.lineDashOffset=r.lineDashOffset)}function yA(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:e}=r;e!=="none"&&e!==""&&(r.filter="none")}function w5(r,e){if(e)return!0;et.singularValueDecompose2dScale(r,wa);const t=Math.fround(eu.pixelRatio*Td.PDF_TO_CSS_UNITS);return wa[0]<=t&&wa[1]<=t}const Yhe=["butt","round","square"],Qhe=["miter","round","bevel"],Jhe={},x5={};var el,TI,CI,NI;const RO=class RO{constructor(e,t,n,i,s,{optionalContentConfig:a,markedContentStack:o=null},l,u,c){$(this,el);this.ctx=e,this.current=new v5(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new Xhe(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=c??null}getObject(e,t,n=null){var i;return typeof t=="string"?((i=this.dependencyTracker)==null||i.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:i=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,n){const l=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Xr(this.compositeCtx))}this.ctx.save(),yA(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Xr(this.ctx)}executeOperatorList(e,t,n,i,s){var v;const a=e.argsArray,o=e.fnArray;let l=t||0;const u=a.length;if(u===l)return l;const c=u-l>g5&&typeof n=="function",h=c?Date.now()+Whe:0;let d=0;const f=this.commonObjs,p=this.objs;let g,b;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,n),l;if(!s||s(l))if(g=o[l],b=a[l]??null,g!==M1.dependency)b===null?this[g](l):this[g](l,...b);else for(const x of b){(v=this.dependencyTracker)==null||v.recordNamedData(x,l);const y=x.startsWith("g_")?f:p;if(!y.has(x))return y.get(x,n),l}if(l++,l===u)return l;if(c&&++d>g5){if(Date.now()>h)return n(),l;d=0}}}endDrawing(){j(this,el,TI).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),j(this,el,CI).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,i=e.height??e.displayHeight;let s=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=n,l=i,u="prescale1",c,h;for(;s>2&&o>1||a>2&&l>1;){let d=o,f=l;s>2&&o>1&&(d=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),s/=o/d),a>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/f),c=this.cachedCanvases.getCanvas(u,d,f),h=c.context,h.clearRect(0,0,d,f),h.drawImage(e,0,0,o,l,0,0,d,f),e=c.canvas,o=d,l=f,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e,t){var N,D;const n=this.ctx,{width:i,height:s}=t,a=this.current.fillColor,o=this.current.patternFill,l=Xr(n);let u,c,h,d;if((t.bitmap||t.data)&&t.count>1){const M=t.bitmap||t.data.buffer;c=JSON.stringify(o?l:[l.slice(0,4),a]),u=this._cachedBitmapsMap.get(M),u||(u=new Map,this._cachedBitmapsMap.set(M,u));const I=u.get(c);if(I&&!o){const U=Math.round(Math.min(l[0],l[2])+l[4]),X=Math.round(Math.min(l[1],l[3])+l[5]);return(N=this.dependencyTracker)==null||N.recordDependencies(e,La.transformAndFill),{canvas:I,offsetX:U,offsetY:X}}h=I}h||(d=this.cachedCanvases.getCanvas("maskCanvas",i,s),b5(d.context,t));let f=et.transform(l,[1/i,0,0,-1/s,0,0]);f=et.transform(f,[1,0,0,1,0,-s]);const p=xg.slice();et.axialAlignedBoundingBox([0,0,i,s],f,p);const[g,b,v,x]=p,y=Math.round(v-g)||1,A=Math.round(x-b)||1,w=this.cachedCanvases.getCanvas("fillCanvas",y,A),_=w.context,S=g,E=b;_.translate(-S,-E),_.transform(...f),h||(h=this._scaleImage(d.canvas,hl(_)),h=h.img,u&&o&&u.set(c,h)),_.imageSmoothingEnabled=w5(Xr(_),t.interpolate),vA(_,h,0,0,h.width,h.height,0,0,i,s),_.globalCompositeOperation="source-in";const C=et.transform(hl(_),[1,0,0,1,-S,-E]);return _.fillStyle=o?a.getPattern(n,this,C,Ti.FILL,e):a,_.fillRect(0,0,i,s),u&&!o&&(this.cachedCanvases.delete("fillCanvas"),u.set(c,w.canvas)),(D=this.dependencyTracker)==null||D.recordDependencies(e,La.transformAndFill),{canvas:w.canvas,offsetX:Math.round(S),offsetY:Math.round(E)}}setLineWidth(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",e),this.ctx.lineCap=Yhe[t]}setLineJoin(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=Qhe[t]}setMiterLimit(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var n,i,s,a,o;for(const[l,u]of t)switch(l){case"LW":this.setLineWidth(e,u);break;case"LC":this.setLineCap(e,u);break;case"LJ":this.setLineJoin(e,u);break;case"ML":this.setMiterLimit(e,u);break;case"D":this.setDash(e,u[0],u[1]);break;case"RI":this.setRenderingIntent(e,u);break;case"FL":this.setFlatness(e,u);break;case"Font":this.setFont(e,u[0],u[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=u;break;case"ca":(i=this.dependencyTracker)==null||i.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(s=this.dependencyTracker)==null||s.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=u;break;case"SMask":(a=this.dependencyTracker)==null||a.recordSimpleData("SMask",e),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(o=this.dependencyTracker)==null||o.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,t,n);this.suspendedCtx=this.ctx;const a=this.ctx=s.context;a.setTransform(this.suspendedCtx.getTransform()),$y(this.suspendedCtx,a),Khe(a,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),$y(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const s=i[0],a=i[1],o=i[2]-s,l=i[3]-a;o===0||l===0||(this.genericComposeSMask(t.context,n,o,l,t.subtype,t.backdrop,t.transferMap,s,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,s,a,o,l,u,c,h){let d=e.canvas,f=l-c,p=u-h;if(a)if(f<0||p<0||f+n>d.width||p+i>d.height){const b=this.cachedCanvases.getCanvas("maskExtension",n,i),v=b.context;v.drawImage(d,-f,-p),v.globalCompositeOperation="destination-atop",v.fillStyle=a,v.fillRect(0,0,n,i),v.globalCompositeOperation="source-over",d=b.canvas,f=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const b=new Path2D;b.rect(f,p,n,i),e.clip(b),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(f,p,n,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const g=new Path2D;g.rect(l,u,n,i),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(d,f,p,n,i,l,u,n,i),t.restore()}save(e){var n;this.inSMaskMode&&$y(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(n=this.dependencyTracker)==null||n.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&$y(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,i,s,a,o){var l;(l=this.dependencyTracker)==null||l.recordIncrementalData("transform",e),this.ctx.transform(t,n,i,s,a,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,i){let[s]=n;if(!i){s||(s=n[0]=new Path2D),this[t](e,s);return}if(this.dependencyTracker!==null){const a=t===M1.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-a,i[2]+a,i[1]-a,i[3]+a).recordDependencies(e,["transform"])}s instanceof Path2D||(s=n[0]=IH(s)),et.axialAlignedBoundingBox(i,Xr(this.ctx),this.current.minMax),this[t](e,s),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){var a;const i=this.ctx,s=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const o=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=s.getPattern(i,this,hl(i),Ti.STROKE,e),o){const l=new Path2D;l.addPath(t,i.getTransform().invertSelf().multiplySelf(o)),t=l}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);(a=this.dependencyTracker)==null||a.recordDependencies(e,La.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Ti.STROKE,Xr(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){var u,c,h;const i=this.ctx,s=this.current.fillColor,a=this.current.patternFill;let o=!1;if(a){const d=s.isModifyingCurrentTransform()?i.getTransform():null;if((u=this.dependencyTracker)==null||u.save(e),i.save(),i.fillStyle=s.getPattern(i,this,hl(i),Ti.FILL,e),d){const f=new Path2D;f.addPath(t,i.getTransform().invertSelf().multiplySelf(d)),t=f}o=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),(c=this.dependencyTracker)==null||c.recordDependencies(e,La.fill),o&&(i.restore(),(h=this.dependencyTracker)==null||h.restore(e)),n&&this.consumePath(e,t,l)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var n;this.ctx.fill(t),(n=this.dependencyTracker)==null||n.recordDependencies(e,La.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=Jhe}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=x5}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){const i=new Path2D,s=n.getTransform().invertSelf();for(const{transform:a,x:o,y:l,fontSize:u,path:c}of t)c&&i.addPath(c,new DOMMatrix(a).preMultiplySelf(s).translate(o,l).scale(u,-u));n.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){var h,d;(h=this.dependencyTracker)==null||h.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const i=this.commonObjs.get(t),s=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=i.fontMatrix||KM,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&Et("Invalid font matrix for font "+t),n<0?(n=-n,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;const a=i.loadedName||"sans-serif",o=((d=i.systemFontInfo)==null?void 0:d.css)||`"${a}", ${i.fallbackName}`;let l="normal";i.black?l="900":i.bold&&(l="bold");const u=i.italic?"italic":"normal";let c=n;n<m5?c=m5:n>p5&&(c=p5),this.current.fontSizeScale=n/c,this.ctx.font=`${u} ${l} ${c}px ${o}`}setTextRenderingMode(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,n,i,s,a){var v,x,y,A;const o=this.ctx,l=this.current,u=l.font,c=l.textRenderingMode,h=l.fontSize/l.fontSizeScale,d=c&vi.FILL_STROKE_MASK,f=!!(c&vi.ADD_TO_PATH_FLAG),p=l.patternFill&&!u.missingFile,g=l.patternStroke&&!u.missingFile;let b;if((u.disableFontFace||f||p||g)&&!u.missingFile&&(b=u.getPathGenerator(this.commonObjs,t)),b&&(u.disableFontFace||p||g)){o.save(),o.translate(n,i),o.scale(h,-h),(v=this.dependencyTracker)==null||v.recordCharacterBBox(e,o,u);let w;if(d===vi.FILL||d===vi.FILL_STROKE)if(s){w=o.getTransform(),o.setTransform(...s);const _=j(this,el,NI).call(this,b,w,s);o.fill(_)}else o.fill(b);if(d===vi.STROKE||d===vi.FILL_STROKE)if(a){w||(w=o.getTransform()),o.setTransform(...a);const{a:_,b:S,c:E,d:C}=w,N=et.inverseTransform(a),D=et.transform([_,S,E,C,0,0],N);et.singularValueDecompose2dScale(D,wa),o.lineWidth*=Math.max(wa[0],wa[1])/h,o.stroke(j(this,el,NI).call(this,b,w,a))}else o.lineWidth/=h,o.stroke(b);o.restore()}else(d===vi.FILL||d===vi.FILL_STROKE)&&(o.fillText(t,n,i),(x=this.dependencyTracker)==null||x.recordCharacterBBox(e,o,u,h,n,i,()=>o.measureText(t))),(d===vi.STROKE||d===vi.FILL_STROKE)&&(this.dependencyTracker&&((y=this.dependencyTracker)==null||y.recordCharacterBBox(e,o,u,h,n,i,()=>o.measureText(t)).recordDependencies(e,La.stroke)),o.strokeText(t,n,i));f&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Xr(o),x:n,y:i,fontSize:h,path:b}),(A=this.dependencyTracker)==null||A.recordCharacterBBox(e,o,u,h,n,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return St(this,"isFontSubpixelAAEnabled",n)}showText(e,t){var E,C,N,D;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,La.showText).resetBBox(e),this.current.textRenderingMode&vi.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,i=n.font;if(i.isType3Font){this.showType3Text(e,t),(E=this.dependencyTracker)==null||E.recordShowTextOperation(e);return}const s=n.fontSize;if(s===0){(C=this.dependencyTracker)==null||C.recordOperation(e);return}const a=this.ctx,o=n.fontSizeScale,l=n.charSpacing,u=n.wordSpacing,c=n.fontDirection,h=n.textHScale*c,d=t.length,f=i.vertical,p=f?1:-1,g=i.defaultVMetrics,b=s*n.fontMatrix[0],v=n.textRenderingMode===vi.FILL&&!i.disableFontFace&&!n.patternFill;a.save(),n.textMatrix&&a.transform(...n.textMatrix),a.translate(n.x,n.y+n.textRise),c>0?a.scale(h,-1):a.scale(h,1);let x,y;if(n.patternFill){a.save();const M=n.fillColor.getPattern(a,this,hl(a),Ti.FILL,e);x=Xr(a),a.restore(),a.fillStyle=M}if(n.patternStroke){a.save();const M=n.strokeColor.getPattern(a,this,hl(a),Ti.STROKE,e);y=Xr(a),a.restore(),a.strokeStyle=M}let A=n.lineWidth;const w=n.textMatrixScale;if(w===0||A===0){const M=n.textRenderingMode&vi.FILL_STROKE_MASK;(M===vi.STROKE||M===vi.FILL_STROKE)&&(A=this.getSinglePixelWidth())}else A/=w;if(o!==1&&(a.scale(o,o),A/=o),a.lineWidth=A,i.isInvalidPDFjsFont){const M=[];let I=0;for(const X of t)M.push(X.unicode),I+=X.width;const U=M.join("");if(a.fillText(U,0,0),this.dependencyTracker!==null){const X=a.measureText(U);this.dependencyTracker.recordBBox(e,this.ctx,-X.actualBoundingBoxLeft,X.actualBoundingBoxRight,-X.actualBoundingBoxAscent,X.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=I*b*h,a.restore(),this.compose();return}let _=0,S;for(S=0;S<d;++S){const M=t[S];if(typeof M=="number"){_+=p*M*s/1e3;continue}let I=!1;const U=(M.isSpace?u:0)+l,X=M.fontChar,k=M.accent;let z,q,H=M.width;if(f){const re=M.vmetric||g,O=-(M.vmetric?re[1]:H*.5)*b,ne=re[2]*b;H=re?-re[0]:H,z=O/o,q=(_+ne)/o}else z=_/o,q=0;let te;if(i.remeasure&&H>0){te=a.measureText(X);const re=te.width*1e3/s*o;if(H<re&&this.isFontSubpixelAAEnabled){const O=H/re;I=!0,a.save(),a.scale(O,1),z/=O}else H!==re&&(z+=(H-re)/2e3*s/o)}if(this.contentVisible&&(M.isInFont||i.missingFile)){if(v&&!k)a.fillText(X,z,q),(N=this.dependencyTracker)==null||N.recordCharacterBBox(e,a,te?{bbox:null}:i,s/o,z,q,()=>te??a.measureText(X));else if(this.paintChar(e,X,z,q,x,y),k){const re=z+s*k.offset.x/o,O=q-s*k.offset.y/o;this.paintChar(e,k.fontChar,re,O,x,y)}}const ce=f?H*b-U*c:H*b+U*c;_+=ce,I&&a.restore()}f?n.y-=_:n.x+=_*h,a.restore(),this.compose(),(D=this.dependencyTracker)==null||D.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,i=this.current,s=i.font,a=i.fontSize,o=i.fontDirection,l=s.vertical?1:-1,u=i.charSpacing,c=i.wordSpacing,h=i.textHScale*o,d=i.fontMatrix||KM,f=t.length,p=i.textRenderingMode===vi.INVISIBLE;let g,b,v,x;if(p||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(h,o);const y=this.dependencyTracker;for(this.dependencyTracker=y?new XS(y,e):null,g=0;g<f;++g){if(b=t[g],typeof b=="number"){x=l*b*a/1e3,this.ctx.translate(x,0),i.x+=x*h;continue}const A=(b.isSpace?c:0)+u,w=s.charProcOperatorList[b.operatorListId];w?this.contentVisible&&(this.save(),n.scale(a,a),n.transform(...d),this.executeOperatorList(w),this.restore()):Et(`Type3 character "${b.operatorListId}" is not available.`);const _=[b.width,0];et.applyTransform(_,d),v=_[0]*a+A,n.translate(v,0),i.x+=v*h}n.restore(),y&&(this.dependencyTracker=y)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,i,s,a,o){var u;const l=new Path2D;l.rect(i,s,a-i,o-s),this.ctx.clip(l),(u=this.dependencyTracker)==null||u.recordBBox(e,this.ctx,i,a,s,o).recordClipBox(e,this.ctx,i,a,s,o),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const i=this.baseTransform||Xr(this.ctx),s={createCanvasGraphics:(a,o)=>new RO(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new XS(this.dependencyTracker,o,!0):null)};n=new SI(t,this.ctx,s,i)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=Hhe(this.getObject(e,t)),this.cachedPatterns.set(t,i)),n&&(i.matrix=n),i}shadingFill(e,t){var a;if(!this.contentVisible)return;const n=this.ctx;this.save(e);const i=this._getPattern(e,t);n.fillStyle=i.getPattern(n,this,hl(n),Ti.SHADING,e);const s=hl(n);if(s){const{width:o,height:l}=n.canvas,u=xg.slice();et.axialAlignedBoundingBox([0,0,o,l],s,u);const[c,h,d,f]=u;this.ctx.fillRect(c,h,d-c,f-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(a=this.dependencyTracker)==null||a.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,La.transform).recordDependencies(e,La.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Dr("Should not call beginInlineImage")}beginImageData(){Dr("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){var i;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Xr(this.ctx),n)){et.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[s,a,o,l]=n,u=new Path2D;u.rect(s,a,o-s,l-a),this.ctx.clip(u),(i=this.dependencyTracker)==null||i.recordClipBox(e,this.ctx,s,o,a,l),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var y;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||WC("TODO: Support non-isolated groups."),t.knockout&&Et("Knockout groups not supported.");const i=Xr(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=xg.slice();et.axialAlignedBoundingBox(t.bbox,Xr(n),s);const a=[0,0,n.canvas.width,n.canvas.height];s=et.intersect(s,a)||[0,0,0,0];const o=Math.floor(s[0]),l=Math.floor(s[1]),u=Math.max(Math.ceil(s[2])-o,1),c=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,u,c]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,u,c),f=d.context;f.translate(-o,-l),f.transform(...i);let p=new Path2D;const[g,b,v,x]=t.bbox;if(p.rect(g,b,v-g,x-b),t.matrix){const A=new Path2D;A.addPath(p,new DOMMatrix(t.matrix)),p=A}f.clip(p),t.smask&&this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(o,l),n.save()),$y(n,f),this.ctx=f,(y=this.dependencyTracker)==null||y.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){var s;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,(s=this.dependencyTracker)==null||s.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=Xr(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...a);const o=xg.slice();et.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],a,o),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,n,i,s,a){if(j(this,el,TI).call(this),yA(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const o=n[2]-n[0],l=n[3]-n[1];if(a&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=o,n[3]=l,et.singularValueDecompose2dScale(Xr(this.ctx),wa);const{viewportScale:u}=this,c=Math.ceil(o*this.outputScaleX*u),h=Math.ceil(l*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(c,h);const{canvas:d,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(t,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(wa[0],0,0,-wa[1],0,l*wa[1]),yA(this.ctx)}else{yA(this.ctx),this.endPath(e);const u=new Path2D;u.rect(n[0],n[1],o,l),this.ctx.clip(u)}}this.current=new v5(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...s)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),j(this,el,CI).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var o;if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const i=this.ctx,s=this._createMaskCanvas(e,t),a=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,s.offsetX,s.offsetY),(o=this.dependencyTracker)==null||o.resetBBox(e).recordBBox(e,this.ctx,s.offsetX,s.offsetX+a.width,s.offsetY,s.offsetY+a.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,i=0,s=0,a,o){var h,d,f;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const l=this.ctx;l.save();const u=Xr(l);l.transform(n,i,s,a,0,0);const c=this._createMaskCanvas(e,t);l.setTransform(1,0,0,1,c.offsetX-u[4],c.offsetY-u[5]),(h=this.dependencyTracker)==null||h.resetBBox(e);for(let p=0,g=o.length;p<g;p+=2){const b=et.transform(u,[n,i,s,a,o[p],o[p+1]]);l.drawImage(c.canvas,b[4],b[5]),(d=this.dependencyTracker)==null||d.recordBBox(e,this.ctx,b[4],b[4]+c.canvas.width,b[5],b[5]+c.canvas.height)}l.restore(),this.compose(),(f=this.dependencyTracker)==null||f.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var a,o,l;if(!this.contentVisible)return;const n=this.ctx,i=this.current.fillColor,s=this.current.patternFill;(a=this.dependencyTracker)==null||a.resetBBox(e).recordDependencies(e,La.transformAndFill);for(const u of t){const{data:c,width:h,height:d,transform:f}=u,p=this.cachedCanvases.getCanvas("maskCanvas",h,d),g=p.context;g.save();const b=this.getObject(e,c,u);b5(g,b),g.globalCompositeOperation="source-in",g.fillStyle=s?i.getPattern(g,this,hl(n),Ti.FILL,e):i,g.fillRect(0,0,h,d),g.restore(),n.save(),n.transform(...f),n.scale(1,-1),vA(n,p.canvas,0,0,h,d,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,n,0,h,0,d),n.restore()}this.compose(),(l=this.dependencyTracker)==null||l.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){Et("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,i,s){if(!this.contentVisible)return;const a=this.getObject(e,t);if(!a){Et("Dependent image isn't ready yet");return}const o=a.width,l=a.height,u=[];for(let c=0,h=s.length;c<h;c+=2)u.push({transform:[n,0,0,i,s[c],s[c+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(e,a,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:i}=e,s=this.cachedCanvases.getCanvas("inlineImage",n,i),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",s.canvas}paintInlineImageXObject(e,t){var u;if(!this.contentVisible)return;const n=t.width,i=t.height,s=this.ctx;this.save(e);const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none"),s.scale(1/n,-1/i);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",n,i).context;y5(h,t),o=this.applyTransferMapsToCanvas(h)}const l=this._scaleImage(o,hl(s));s.imageSmoothingEnabled=w5(Xr(s),t.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,s,0,n,-i,0).recordDependencies(e,La.imageXObject).recordOperation(e),vA(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-i,n,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){var a,o,l;if(!this.contentVisible)return;const i=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const u=t.width,c=t.height,d=this.cachedCanvases.getCanvas("inlineImage",u,c).context;y5(d,t),s=this.applyTransferMapsToCanvas(d)}(a=this.dependencyTracker)==null||a.resetBBox(e);for(const u of n)i.save(),i.transform(...u.transform),i.scale(1,-1),vA(i,s,u.x,u.y,u.w,u.h,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,i,0,1,-1,0),i.restore();(l=this.dependencyTracker)==null||l.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,La.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){var a,o;const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const s=this.ctx;this.pendingClip?(i||(this.pendingClip===x5?s.clip(t,"evenodd"):s.clip(t)),this.pendingClip=null,(a=this.dependencyTracker)==null||a.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(o=this.dependencyTracker)==null||o.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Xr(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:s}=this.ctx.getTransform();let a,o;if(n===0&&i===0){const l=Math.abs(t),u=Math.abs(s);if(l===u)if(e===0)a=o=1/l;else{const c=l*e;a=o=c<1?1/c:1}else if(e===0)a=1/l,o=1/u;else{const c=l*e,h=u*e;a=c<1?1/c:1,o=h<1?1/h:1}}else{const l=Math.abs(t*s-n*i),u=Math.hypot(t,n),c=Math.hypot(i,s);if(e===0)a=c/l,o=u/l;else{const h=e*l;a=c>h?c/h:1,o=u>h?u/h:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:i}}=this,[s,a]=this.getScaleForStroking();if(s===a){n.lineWidth=(i||1)*s,n.stroke(e);return}const o=n.getLineDash();t&&n.save(),n.scale(s,a),zD.a=1/s,zD.d=1/a;const l=new Path2D;if(l.addPath(e,zD),o.length>0){const u=Math.max(s,a);n.setLineDash(o.map(c=>c/u)),n.lineDashOffset/=u}n.lineWidth=i||1,n.stroke(l),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};el=new WeakSet,TI=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},CI=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},NI=function(e,t,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i};let Lg=RO;for(const r in M1)Lg.prototype[r]!==void 0&&(Lg.prototype[M1[r]]=Lg.prototype[r]);var Nw,Dw;class $l{static get workerPort(){return m(this,Nw)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");R(this,Nw,e)}static get workerSrc(){return m(this,Dw)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");R(this,Dw,e)}}Nw=new WeakMap,Dw=new WeakMap,$($l,Nw,null),$($l,Dw,"");var Tv,Mw;class Zhe{constructor({parsedData:e,rawData:t}){$(this,Tv);$(this,Mw);R(this,Tv,e),R(this,Mw,t)}getRaw(){return m(this,Mw)}get(e){return m(this,Tv).get(e)??null}[Symbol.iterator](){return m(this,Tv).entries()}}Tv=new WeakMap,Mw=new WeakMap;const eg=Symbol("INTERNAL");var Iw,Pw,Rw,Cv;class ede{constructor(e,{name:t,intent:n,usage:i,rbGroups:s}){$(this,Iw,!1);$(this,Pw,!1);$(this,Rw,!1);$(this,Cv,!0);R(this,Iw,!!(e&ya.DISPLAY)),R(this,Pw,!!(e&ya.PRINT)),this.name=t,this.intent=n,this.usage=i,this.rbGroups=s}get visible(){if(m(this,Rw))return m(this,Cv);if(!m(this,Cv))return!1;const{print:e,view:t}=this.usage;return m(this,Iw)?(t==null?void 0:t.viewState)!=="OFF":m(this,Pw)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==eg&&Dr("Internal method `_setVisible` called."),R(this,Rw,n),R(this,Cv,t)}}Iw=new WeakMap,Pw=new WeakMap,Rw=new WeakMap,Cv=new WeakMap;var Ah,wr,Nv,Dv,kw,DI;class tde{constructor(e,t=ya.DISPLAY){$(this,kw);$(this,Ah,null);$(this,wr,new Map);$(this,Nv,null);$(this,Dv,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,R(this,Dv,e.order);for(const n of e.groups)m(this,wr).set(n.id,new ede(t,n));if(e.baseState==="OFF")for(const n of m(this,wr).values())n._setVisible(eg,!1);for(const n of e.on)m(this,wr).get(n)._setVisible(eg,!0);for(const n of e.off)m(this,wr).get(n)._setVisible(eg,!1);R(this,Nv,this.getHash())}}isVisible(e){if(m(this,wr).size===0)return!0;if(!e)return WC("Optional content group not defined."),!0;if(e.type==="OCG")return m(this,wr).has(e.id)?m(this,wr).get(e.id).visible:(Et(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return j(this,kw,DI).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!m(this,wr).has(t))return Et(`Optional content group not found: ${t}`),!0;if(m(this,wr).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!m(this,wr).has(t))return Et(`Optional content group not found: ${t}`),!0;if(!m(this,wr).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!m(this,wr).has(t))return Et(`Optional content group not found: ${t}`),!0;if(!m(this,wr).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!m(this,wr).has(t))return Et(`Optional content group not found: ${t}`),!0;if(m(this,wr).get(t).visible)return!1}return!0}return Et(`Unknown optional content policy ${e.policy}.`),!0}return Et(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var s;const i=m(this,wr).get(e);if(!i){Et(`Optional content group not found: ${e}`);return}if(n&&t&&i.rbGroups.length)for(const a of i.rbGroups)for(const o of a)o!==e&&((s=m(this,wr).get(o))==null||s._setVisible(eg,!1,!0));i._setVisible(eg,!!t,!0),R(this,Ah,null)}setOCGState({state:e,preserveRB:t}){let n;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const s=m(this,wr).get(i);if(s)switch(n){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!s.visible,t);break}}R(this,Ah,null)}get hasInitialVisibility(){return m(this,Nv)===null||this.getHash()===m(this,Nv)}getOrder(){return m(this,wr).size?m(this,Dv)?m(this,Dv).slice():[...m(this,wr).keys()]:null}getGroup(e){return m(this,wr).get(e)||null}getHash(){if(m(this,Ah)!==null)return m(this,Ah);const e=new uG;for(const[t,n]of m(this,wr))e.update(`${t}:${n.visible}`);return R(this,Ah,e.hexdigest())}[Symbol.iterator](){return m(this,wr).entries()}}Ah=new WeakMap,wr=new WeakMap,Nv=new WeakMap,Dv=new WeakMap,kw=new WeakSet,DI=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const s=e[i];let a;if(Array.isArray(s))a=j(this,kw,DI).call(this,s);else if(m(this,wr).has(s))a=m(this,wr).get(s).visible;else return Et(`Optional content group not found: ${s}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};class rde{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Xt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:s,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(s==null?void 0:s.length)>0){const l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),e.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(n),!0)});Xt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,i,s;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(s=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||s.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Xt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new nde(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new ide(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class nde{constructor(e,t,n=!1,i=null){this._stream=e,this._done=n||!1,this._filename=xF(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ide{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function sde(r){let e=!0,t=n("filename\\*","i").exec(r);if(t){t=t[1];let c=o(t);return c=unescape(c),c=l(c),c=u(c),s(c)}if(t=a(r),t){const c=u(t);return s(c)}if(t=n("filename","i").exec(r),t){t=t[1];let c=o(t);return c=u(c),s(c)}function n(c,h){return new RegExp("(?:^|;)\\s*"+c+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function i(c,h){if(c){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const d=new TextDecoder(c,{fatal:!0}),f=e_(h);h=d.decode(f),e=!1}catch{}}return h}function s(c){return e&&/[\x80-\xff]/.test(c)&&(c=i("utf-8",c),e&&(c=i("iso-8859-1",c))),c}function a(c){const h=[];let d;const f=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(d=f.exec(c))!==null;){let[,g,b,v]=d;if(g=parseInt(g,10),g in h){if(g===0)break;continue}h[g]=[b,v]}const p=[];for(let g=0;g<h.length&&g in h;++g){let[b,v]=h[g];v=o(v),b&&(v=unescape(v),g===0&&(v=l(v))),p.push(v)}return p.join("")}function o(c){if(c.startsWith('"')){const h=c.slice(1).split('\\"');for(let d=0;d<h.length;++d){const f=h[d].indexOf('"');f!==-1&&(h[d]=h[d].slice(0,f),h.length=d+1),h[d]=h[d].replaceAll(/\\(.)/g,"$1")}c=h.join('"')}return c}function l(c){const h=c.indexOf("'");if(h===-1)return c;const d=c.slice(0,h),p=c.slice(h+1).replace(/^[^']*'/,"");return i(d,p)}function u(c){return!c.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(c)?c:c.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,d,f,p){if(f==="q"||f==="Q")return p=p.replaceAll("_"," "),p=p.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,b){return String.fromCharCode(parseInt(b,16))}),i(d,p);try{p=atob(p)}catch{}return i(d,p)})}return""}function xG(r,e){const t=new Headers;if(!r||!e||typeof e!="object")return t;for(const n in e){const i=e[n];i!==void 0&&t.append(n,i)}return t}function XC(r){var e;return((e=URL.parse(r))==null?void 0:e.origin)??null}function _G({responseHeaders:r,isHttp:e,rangeChunkSize:t,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(r.get("Content-Length"),10);return!Number.isInteger(s)||(i.suggestedLength=s,s<=2*t)||n||!e||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function AG(r){const e=r.get("Content-Disposition");if(e){let t=sde(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(xF(t))return t}return null}function s_(r,e){return new jS(`Unexpected server response (${r}) while retrieving PDF "${e}".`,r,r===404||r===0&&e.startsWith("file:"))}function EG(r){return r===200||r===206}function SG(r,e,t){return{method:"GET",headers:r,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function TG(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(Et(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class ade{constructor(e){Re(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=xG(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Xt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new ode(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new lde(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class ode{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),i=t.url;fetch(i,SG(n,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=XC(s.url),!EG(s.status))throw s_(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();const a=s.headers,{allowRangeRequests:o,suggestedLength:l}=_G({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=AG(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Sd("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:TG(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class lde{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${n-1}`);const a=i.url;fetch(a,SG(s,this._withCredentials,this._abortController)).then(o=>{const l=XC(o.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!EG(o.status))throw s_(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:TG(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const jD=200,qD=206;function ude(r){const e=r.response;return typeof e!="string"?e:e_(e).buffer}class cde{constructor({url:e,httpHeaders:t,withCredentials:n}){Re(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=xG(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,a]of this.headers)t.setRequestHeader(s,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=qD):i.expectedStatus=jD,t.responseType="arraybuffer",Xt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var i;const n=this.pendingRequests[e];n&&((i=n.onProgress)==null||i.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){n.onError(i.status);return}const s=i.status||jD;if(!(s===jD&&n.expectedStatus===qD)&&s!==n.expectedStatus){n.onError(i.status);return}const o=ude(i);if(s===qD){const l=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);u?n.onDone({begin:parseInt(u[1],10),chunk:o}):(Et('Missing or invalid "Content-Range" header.'),n.onError(0))}else o?n.onDone({begin:0,chunk:o}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class hde{constructor(e){this._source=e,this._manager=new cde(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Xt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new dde(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new fde(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class dde{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=XC(t.responseURL);const n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[l,...u]=o.split(": ");return[l,u.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:a}=_G({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=AG(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=s_(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class fde{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=XC((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=s_(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const mde=/^[a-z][a-z0-9\-+.]+:/i;function pde(r){if(mde.test(r))return new URL(r);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(r))}class gde{constructor(e){this.source=e,this.url=pde(e.url),Xt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Xt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new vde(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new yde(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class vde{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=s_(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Sd("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class yde{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Vy=Symbol("INITIAL_DATA");var ia,Fw,MI;class CG{constructor(){$(this,Fw);$(this,ia,Object.create(null))}get(e,t=null){if(t){const i=j(this,Fw,MI).call(this,e);return i.promise.then(()=>t(i.data)),null}const n=m(this,ia)[e];if(!n||n.data===Vy)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=m(this,ia)[e];return!!t&&t.data!==Vy}delete(e){const t=m(this,ia)[e];return!t||t.data===Vy?!1:(delete m(this,ia)[e],!0)}resolve(e,t=null){const n=j(this,Fw,MI).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in m(this,ia)){const{data:n}=m(this,ia)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}R(this,ia,Object.create(null))}*[Symbol.iterator](){for(const e in m(this,ia)){const{data:t}=m(this,ia)[e];t!==Vy&&(yield[e,t])}}}ia=new WeakMap,Fw=new WeakSet,MI=function(e){var t;return(t=m(this,ia))[e]||(t[e]={...Promise.withResolvers(),data:Vy})};const bde=1e5,_5=30;var DU,Eh,Os,Ow,Bw,sm,Bu,Lw,$w,am,Mv,Iv,Sh,Pv,Vw,Rv,om,Uw,zw,kv,lm,jw,Th,Fv,Mc,NG,DG,II,Na,EE,PI,MG,IG;const Vn=class Vn{constructor({textContentSource:e,container:t,viewport:n}){$(this,Mc);$(this,Eh,Promise.withResolvers());$(this,Os,null);$(this,Ow,!1);$(this,Bw,!!((DU=globalThis.FontInspector)!=null&&DU.enabled));$(this,sm,null);$(this,Bu,null);$(this,Lw,0);$(this,$w,0);$(this,am,null);$(this,Mv,null);$(this,Iv,0);$(this,Sh,0);$(this,Pv,Object.create(null));$(this,Vw,[]);$(this,Rv,null);$(this,om,[]);$(this,Uw,new WeakMap);$(this,zw,null);var l;if(e instanceof ReadableStream)R(this,Rv,e);else if(typeof e=="object")R(this,Rv,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');R(this,Os,R(this,Mv,t)),R(this,Sh,n.scale*eu.pixelRatio),R(this,Iv,n.rotation),R(this,Bu,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:s,pageX:a,pageY:o}=n.rawDims;R(this,zw,[1,0,0,-1,-a,o+s]),R(this,$w,i),R(this,Lw,s),j(l=Vn,Na,MG).call(l),ap(t,n),m(this,Eh).promise.finally(()=>{m(Vn,Fv).delete(this),R(this,Bu,null),R(this,Pv,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Ri.platform;return St(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{m(this,am).read().then(({value:t,done:n})=>{if(n){m(this,Eh).resolve();return}m(this,sm)??R(this,sm,t.lang),Object.assign(m(this,Pv),t.styles),j(this,Mc,NG).call(this,t.items),e()},m(this,Eh).reject)};return R(this,am,m(this,Rv).getReader()),m(Vn,Fv).add(this),e(),m(this,Eh).promise}update({viewport:e,onBefore:t=null}){var s;const n=e.scale*eu.pixelRatio,i=e.rotation;if(i!==m(this,Iv)&&(t==null||t(),R(this,Iv,i),ap(m(this,Mv),{rotation:i})),n!==m(this,Sh)){t==null||t(),R(this,Sh,n);const a={div:null,properties:null,ctx:j(s=Vn,Na,EE).call(s,m(this,sm))};for(const o of m(this,om))a.properties=m(this,Uw).get(o),a.div=o,j(this,Mc,II).call(this,a)}}cancel(){var t;const e=new Sd("TextLayer task cancelled.");(t=m(this,am))==null||t.cancel(e).catch(()=>{}),R(this,am,null),m(this,Eh).reject(e)}get textDivs(){return m(this,om)}get textContentItemsStr(){return m(this,Vw)}static cleanup(){if(!(m(this,Fv).size>0)){m(this,kv).clear();for(const{canvas:e}of m(this,lm).values())e.remove();m(this,lm).clear()}}};Eh=new WeakMap,Os=new WeakMap,Ow=new WeakMap,Bw=new WeakMap,sm=new WeakMap,Bu=new WeakMap,Lw=new WeakMap,$w=new WeakMap,am=new WeakMap,Mv=new WeakMap,Iv=new WeakMap,Sh=new WeakMap,Pv=new WeakMap,Vw=new WeakMap,Rv=new WeakMap,om=new WeakMap,Uw=new WeakMap,zw=new WeakMap,kv=new WeakMap,lm=new WeakMap,jw=new WeakMap,Th=new WeakMap,Fv=new WeakMap,Mc=new WeakSet,NG=function(e){var i,s;if(m(this,Ow))return;(s=m(this,Bu)).ctx??(s.ctx=j(i=Vn,Na,EE).call(i,m(this,sm)));const t=m(this,om),n=m(this,Vw);for(const a of e){if(t.length>bde){Et("Ignoring additional textDivs for performance reasons."),R(this,Ow,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=m(this,Os);R(this,Os,document.createElement("span")),m(this,Os).classList.add("markedContent"),a.id&&m(this,Os).setAttribute("id",`${a.id}`),o.append(m(this,Os))}else a.type==="endMarkedContent"&&R(this,Os,m(this,Os).parentNode);continue}n.push(a.str),j(this,Mc,DG).call(this,a)}},DG=function(e){var g;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};m(this,om).push(t);const i=et.transform(m(this,zw),e.transform);let s=Math.atan2(i[1],i[0]);const a=m(this,Pv)[e.fontName];a.vertical&&(s+=Math.PI/2);let o=m(this,Bw)&&a.fontSubstitution||a.fontFamily;o=Vn.fontFamilyMap.get(o)||o;const l=Math.hypot(i[2],i[3]),u=l*j(g=Vn,Na,IG).call(g,o,a,m(this,sm));let c,h;s===0?(c=i[4],h=i[5]-u):(c=i[4]+u*Math.sin(s),h=i[5]-u*Math.cos(s));const d="calc(var(--total-scale-factor) *",f=t.style;m(this,Os)===m(this,Mv)?(f.left=`${(100*c/m(this,$w)).toFixed(2)}%`,f.top=`${(100*h/m(this,Lw)).toFixed(2)}%`):(f.left=`${d}${c.toFixed(2)}px)`,f.top=`${d}${h.toFixed(2)}px)`),f.fontSize=`${d}${(m(Vn,Th)*l).toFixed(2)}px)`,f.fontFamily=o,n.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,m(this,Bw)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),s!==0&&(n.angle=s*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const b=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);b!==v&&Math.max(b,v)/Math.min(b,v)>1.5&&(p=!0)}if(p&&(n.canvasWidth=a.vertical?e.height:e.width),m(this,Uw).set(t,n),m(this,Bu).div=t,m(this,Bu).properties=n,j(this,Mc,II).call(this,m(this,Bu)),n.hasText&&m(this,Os).append(t),n.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),m(this,Os).append(b)}},II=function(e){var o;const{div:t,properties:n,ctx:i}=e,{style:s}=t;let a="";if(m(Vn,Th)>1&&(a=`scale(${1/m(Vn,Th)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:l}=s,{canvasWidth:u,fontSize:c}=n;j(o=Vn,Na,PI).call(o,i,c*m(this,Sh),l);const{width:h}=i.measureText(t.textContent);h>0&&(a=`scaleX(${u*m(this,Sh)/h}) ${a}`)}n.angle!==0&&(a=`rotate(${n.angle}deg) ${a}`),a.length>0&&(s.transform=a)},Na=new WeakSet,EE=function(e=null){let t=m(this,lm).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),m(this,lm).set(e,t),m(this,jw).set(t,{size:0,family:""})}return t},PI=function(e,t,n){const i=m(this,jw).get(e);t===i.size&&n===i.family||(e.font=`${t}px ${n}`,i.size=t,i.family=n)},MG=function(){if(m(this,Th)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),R(this,Th,e.getBoundingClientRect().height),e.remove()},IG=function(e,t,n){const i=m(this,kv).get(e);if(i)return i;const s=j(this,Na,EE).call(this,n);s.canvas.width=s.canvas.height=_5,j(this,Na,PI).call(this,s,_5,e);const a=s.measureText(""),o=a.fontBoundingBoxAscent,l=Math.abs(a.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let u=.8;return o?u=o/(o+l):(Ri.platform.isFirefox&&Et("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?u=t.ascent:t.descent&&(u=1+t.descent)),m(this,kv).set(e,u),u},$(Vn,Na),$(Vn,kv,new Map),$(Vn,lm,new Map),$(Vn,jw,new WeakMap),$(Vn,Th,null),$(Vn,Fv,new Set);let P1=Vn;const wde=100;function PG(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const e=new RI,{docId:t}=e,n=r.url?Che(r.url):null,i=r.data?Nhe(r.data):null,s=r.httpHeaders||null,a=r.withCredentials===!0,o=r.password??null,l=r.range instanceof RG?r.range:null,u=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let c=r.worker instanceof R1?r.worker:null;const h=r.verbosity,d=typeof r.docBaseUrl=="string"&&!KC(r.docBaseUrl)?r.docBaseUrl:null,f=fA(r.cMapUrl),p=r.cMapPacked!==!1,g=r.CMapReaderFactory||(fs?Ohe:l5),b=fA(r.iccUrl),v=fA(r.standardFontDataUrl),x=r.StandardFontDataFactory||(fs?Bhe:u5),y=fA(r.wasmUrl),A=r.WasmFactory||(fs?Lhe:c5),w=r.stopAtErrors!==!0,_=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,S=r.isEvalSupported!==!1,E=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!fs,C=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!fs&&(Ri.platform.isFirefox||!globalThis.chrome),N=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,D=typeof r.disableFontFace=="boolean"?r.disableFontFace:fs,M=r.fontExtraProperties===!0,I=r.enableXfa===!0,U=r.ownerDocument||globalThis.document,X=r.disableRange===!0,k=r.disableStream===!0,z=r.disableAutoFetch===!0,q=r.pdfBug===!0,H=r.CanvasFactory||(fs?Fhe:Phe),te=r.FilterFactory||(fs?khe:Rhe),ce=r.enableHWA===!0,re=r.useWasm!==!1,O=l?l.length:r.length??NaN,ne=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!fs&&!D,W=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(g===l5&&x===u5&&A===c5&&f&&v&&y&&nb(f,document.baseURI)&&nb(v,document.baseURI)&&nb(y,document.baseURI)),pe=null;the(h);const me={canvasFactory:new H({ownerDocument:U,enableHWA:ce}),filterFactory:new te({docId:t,ownerDocument:U}),cMapReaderFactory:W?null:new g({baseUrl:f,isCompressed:p}),standardFontDataFactory:W?null:new x({baseUrl:v}),wasmFactory:W?null:new A({baseUrl:y})};c||(c=R1.create({verbosity:h,port:$l.workerPort}),e._worker=c);const ie={docId:t,apiVersion:"5.4.449",data:i,password:o,disableAutoFetch:z,rangeChunkSize:u,length:O,docBaseUrl:d,enableXfa:I,evaluatorOptions:{maxImageSize:_,disableFontFace:D,ignoreErrors:w,isEvalSupported:S,isOffscreenCanvasSupported:E,isImageDecoderSupported:C,canvasMaxAreaInBytes:N,fontExtraProperties:M,useSystemFonts:ne,useWasm:re,useWorkerFetch:W,cMapUrl:f,iccUrl:b,standardFontDataUrl:v,wasmUrl:y}},K={ownerDocument:U,pdfBug:q,styleElement:pe,loadingParams:{disableAutoFetch:z,enableXfa:I}};return c.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const ae=c.messageHandler.sendWithPromise("GetDocRequest",ie,i?[i.buffer]:null);let ge;if(l)ge=new rde(l,{disableRange:X,disableStream:k});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");const he=nb(n)?ade:fs?gde:hde;ge=new he({url:n,length:O,httpHeaders:s,withCredentials:a,rangeChunkSize:u,disableRange:X,disableStream:k})}return ae.then(he=>{if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const be=new hb(t,he,c.port),ve=new Ade(be,e,ge,K,me,ce);e._transport=ve,be.send("Ready",null)})}).catch(e._capability.reject),e}var WT;const KT=class KT{constructor(){Re(this,"_capability",Promise.withResolvers());Re(this,"_transport",null);Re(this,"_worker",null);Re(this,"docId",`d${$n(KT,WT)._++}`);Re(this,"destroyed",!1);Re(this,"onPassword",null);Re(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,n,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,s}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};WT=new WeakMap,$(KT,WT,0);let RI=KT;var um,qw,Hw,Gw,Ww;class RG{constructor(e,t,n=!1,i=null){$(this,um,Promise.withResolvers());$(this,qw,[]);$(this,Hw,[]);$(this,Gw,[]);$(this,Ww,[]);this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(e){m(this,Ww).push(e)}addProgressListener(e){m(this,Gw).push(e)}addProgressiveReadListener(e){m(this,Hw).push(e)}addProgressiveDoneListener(e){m(this,qw).push(e)}onDataRange(e,t){for(const n of m(this,Ww))n(e,t)}onDataProgress(e,t){m(this,um).promise.then(()=>{for(const n of m(this,Gw))n(e,t)})}onDataProgressiveRead(e){m(this,um).promise.then(()=>{for(const t of m(this,Hw))t(e)})}onDataProgressiveDone(){m(this,um).promise.then(()=>{for(const e of m(this,qw))e()})}transportReady(){m(this,um).resolve()}requestDataRange(e,t){Dr("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}um=new WeakMap,qw=new WeakMap,Hw=new WeakMap,Gw=new WeakMap,Ww=new WeakMap;class xde{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return St(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Lu,cm,gb;class _de{constructor(e,t,n,i=!1){$(this,cm);$(this,Lu,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new t5:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new CG,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:s=!1}={}){return new r_({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return St(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:i="display",annotationMode:s=Jc.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:u=null,pageColors:c=null,printAnnotationStorage:h=null,isEditing:d=!1,recordOperations:f=!1,operationsFilter:p=null}){var C,N,D;(C=this._stats)==null||C.time("Overall");const g=this._transport.getRenderingIntent(i,s,h,d),{renderingIntent:b,cacheKey:v}=g;R(this,Lu,!1),l||(l=this._transport.getOptionalContentConfig(b));let x=this._intentStates.get(v);x||(x=Object.create(null),this._intentStates.set(v,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const y=!!(b&ya.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(N=this._stats)==null||N.time("Page Request"),this._pumpOperatorList(g));const A=!!(this._pdfBug&&((D=globalThis.StepperManager)!=null&&D.enabled)),w=!this.recordedBBoxes&&(f||A),_=M=>{var I,U;if(x.renderTasks.delete(S),w){const X=(I=S.gfx)==null?void 0:I.dependencyTracker.take();X&&(S.stepper&&S.stepper.setOperatorBBoxes(X,S.gfx.dependencyTracker.takeDebugMetadata()),f&&(this.recordedBBoxes=X))}y&&R(this,Lu,!0),j(this,cm,gb).call(this),M?(S.capability.reject(M),this._abortOperatorList({intentState:x,reason:M instanceof Error?M:new Error(M)})):S.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(U=globalThis.Stats)!=null&&U.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},S=new kI({callback:_,params:{canvas:t,canvasContext:e,dependencyTracker:w?new Vhe(t,x.operatorList.length,A):null,viewport:n,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!y,pdfBug:this._pdfBug,pageColors:c,enableHWA:this._transport.enableHWA,operationsFilter:p});(x.renderTasks||(x.renderTasks=new Set)).add(S);const E=S.task;return Promise.all([x.displayReadyCapability.promise,l]).then(([M,I])=>{var U;if(this.destroyed){_();return}if((U=this._stats)==null||U.time("Rendering"),!(I.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");S.initializeGraphics({transparency:M,optionalContentConfig:I}),S.operatorListChanged()}).catch(_),E}getOperatorList({intent:e="display",annotationMode:t=Jc.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){var u;function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(e,t,n,i,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>I1.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,i){function s(){a.read().then(function({value:l,done:u}){if(u){n(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),s()},i)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),R(this,Lu,!1),Promise.all(e)}cleanup(e=!1){R(this,Lu,!0);const t=j(this,cm,gb).call(this);return e&&t&&this._stats&&(this._stats=new t5),t}_startRenderPage(e,t){var i,s;const n=this._intentStates.get(t);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(s=n.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&j(this,cm,gb).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:i}){const{map:s,transfer:a}=n,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:i},a).getReader(),u=this._intentStates.get(t);u.streamReader=l;const c=()=>{l.read().then(({value:h,done:d})=>{if(d){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,u),c())},h=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const d of u.renderTasks)d.operatorListChanged();j(this,cm,gb).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(h);else if(u.opListReadCapability)u.opListReadCapability.reject(h);else throw h}})};c()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof wF){let i=wde;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new Sd(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,s]of this._intentStates)if(s===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Lu=new WeakMap,cm=new WeakSet,gb=function(){if(!m(this,Lu)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),R(this,Lu,!1),!0};var Ch,ko,$u,hm,XT,dm,fm,vs,SE,kG,FG,vb,Ov,TE;const zr=class zr{constructor({name:e=null,port:t=null,verbosity:n=rhe()}={}){$(this,vs);$(this,Ch,Promise.withResolvers());$(this,ko,null);$(this,$u,null);$(this,hm,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(m(zr,fm).has(t))throw new Error("Cannot use more than one PDFWorker per port.");m(zr,fm).set(t,this),j(this,vs,kG).call(this,t)}else j(this,vs,FG).call(this)}get promise(){return m(this,Ch).promise}get port(){return m(this,$u)}get messageHandler(){return m(this,ko)}destroy(){var e,t;this.destroyed=!0,(e=m(this,hm))==null||e.terminate(),R(this,hm,null),m(zr,fm).delete(m(this,$u)),R(this,$u,null),(t=m(this,ko))==null||t.destroy(),R(this,ko,null)}static create(e){const t=m(this,fm).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new zr(e)}static get workerSrc(){if($l.workerSrc)return $l.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return St(this,"_setupFakeWorkerGlobal",(async()=>m(this,Ov,TE)?m(this,Ov,TE):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ch=new WeakMap,ko=new WeakMap,$u=new WeakMap,hm=new WeakMap,XT=new WeakMap,dm=new WeakMap,fm=new WeakMap,vs=new WeakSet,SE=function(){m(this,Ch).resolve(),m(this,ko).send("configure",{verbosity:this.verbosity})},kG=function(e){R(this,$u,e),R(this,ko,new hb("main","worker",e)),m(this,ko).on("ready",()=>{}),j(this,vs,SE).call(this)},FG=function(){if(m(zr,dm)||m(zr,Ov,TE)){j(this,vs,vb).call(this);return}let{workerSrc:e}=zr;try{zr._isSameOrigin(window.location,e)||(e=zr._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new hb("main","worker",t),i=()=>{s.abort(),n.destroy(),t.terminate(),this.destroyed?m(this,Ch).reject(new Error("Worker was destroyed")):j(this,vs,vb).call(this)},s=new AbortController;t.addEventListener("error",()=>{m(this,hm)||i()},{signal:s.signal}),n.on("test",o=>{if(s.abort(),this.destroyed||!o){i();return}R(this,ko,n),R(this,$u,t),R(this,hm,t),j(this,vs,SE).call(this)}),n.on("ready",o=>{if(s.abort(),this.destroyed){i();return}try{a()}catch{j(this,vs,vb).call(this)}});const a=()=>{const o=new Uint8Array;n.send("test",o,[o.buffer])};a();return}catch{WC("The worker has been disabled.")}j(this,vs,vb).call(this)},vb=function(){m(zr,dm)||(Et("Setting up fake worker."),R(zr,dm,!0)),zr._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){m(this,Ch).reject(new Error("Worker was destroyed"));return}const t=new Ihe;R(this,$u,t);const n=`fake${$n(zr,XT)._++}`,i=new hb(n+"_worker",n,t);e.setup(i,t),R(this,ko,new hb(n,n+"_worker",t)),j(this,vs,SE).call(this)}).catch(e=>{m(this,Ch).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Ov=new WeakSet,TE=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},$(zr,Ov),$(zr,XT,0),$(zr,dm,!1),$(zr,fm,new WeakMap),fs&&(R(zr,dm,!0),$l.workerSrc||($l.workerSrc="./pdf.worker.mjs")),zr._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const i=new URL(t,n);return n.origin===i.origin},zr._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},zr.fromPort=e=>{if(mhe("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return zr.create(e)};let R1=zr;var Vu,Nl,Bv,Lv,Uu,mm,yb;class Ade{constructor(e,t,n,i,s,a){$(this,mm);$(this,Vu,new Map);$(this,Nl,new Map);$(this,Bv,new Map);$(this,Lv,new Map);$(this,Uu,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new CG,this.fontLoader=new She({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}get annotationStorage(){return St(this,"annotationStorage",new _F)}getRenderingIntent(e,t=Jc.ENABLE,n=null,i=!1,s=!1){let a=ya.DISPLAY,o=gI;switch(e){case"any":a=ya.ANY;break;case"display":break;case"print":a=ya.PRINT;break;default:Et(`getRenderingIntent - invalid intent: ${e}`)}const l=a&ya.PRINT&&n instanceof hG?n:this.annotationStorage;switch(t){case Jc.DISABLE:a+=ya.ANNOTATIONS_DISABLE;break;case Jc.ENABLE:break;case Jc.ENABLE_FORMS:a+=ya.ANNOTATIONS_FORMS;break;case Jc.ENABLE_STORAGE:a+=ya.ANNOTATIONS_STORAGE,o=l.serializable;break;default:Et(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(a+=ya.IS_EDITING),s&&(a+=ya.OPLIST);const{ids:u,hash:c}=l.modifiedIds,h=[a,o.hash,c];return{renderingIntent:a,cacheKey:h.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=m(this,Uu))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of m(this,Nl).values())e.push(i._destroy());m(this,Nl).clear(),m(this,Bv).clear(),m(this,Lv).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,s;this.commonObjs.clear(),this.fontLoader.clear(),m(this,Vu).clear(),this.filterFactory.destroy(),P1.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new Sd("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,i)=>{Xt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},i.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){i.close();return}Xt(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this._fullReader.cancel(s),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async n=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:s,contentLength:a}=this._fullReader;return(!i||!s)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:s,contentLength:a}}),e.on("GetRangeReader",(n,i)=>{Xt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(n.begin,n.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:a,done:o}){if(o){i.close();return}Xt(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{s.cancel(a),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new xde(n,this))}),e.on("DocException",n=>{t._capability.reject(Ms(n))}),e.on("PasswordRequest",n=>{R(this,Uu,Promise.withResolvers());try{if(!t.onPassword)throw Ms(n);const i=s=>{s instanceof Error?m(this,Uu).reject(s):m(this,Uu).resolve({password:s})};t.onPassword(i,n.code)}catch(i){m(this,Uu).reject(i)}return m(this,Uu).promise}),e.on("DataLoaded",n=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;m(this,Nl).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,i,s])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in s){const d=s.error;Et(`Error during font loading: ${d}`),this.commonObjs.resolve(n,d);break}const o=new vI(s),l=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(d,f)=>globalThis.FontInspector.fontAdded(d,f):null,u=new The(o,l,s.extra,s.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(n,u)});break;case"CopyLocalImage":const{imageRef:c}=s;Xt(c,"The imageRef must be defined.");for(const d of m(this,Nl).values())for(const[,f]of d.objs)if((f==null?void 0:f.ref)===c)return f.dataLen?(this.commonObjs.resolve(n,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":this.commonObjs.resolve(n,s);break;case"Pattern":const h=new yI(s);this.commonObjs.resolve(n,h.getIR());break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([n,i,s,a])=>{var l;if(this.destroyed)return;const o=m(this,Nl).get(i);if(!o.objs.has(n)){if(o._intentStates.size===0){(l=a==null?void 0:a.bitmap)==null||l.close();return}switch(s){case"Image":case"Pattern":o.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",n=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Et("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=m(this,Bv).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&m(this,Lv).set(s.refStr,e);const a=new _de(t,s,this,this._params.pdfBug);return m(this,Nl).set(t,a),a});return m(this,Bv).set(t,i),i}getPageIndex(e){return bI(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return j(this,mm,yb).call(this,"GetFieldObjects")}hasJSActions(){return j(this,mm,yb).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return j(this,mm,yb).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return j(this,mm,yb).call(this,"GetOptionalContentConfig").then(t=>new tde(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=m(this,Vu).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(i=>{var s,a;return{info:i[0],metadata:i[1]?new Zhe(i[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null,hasStructTree:i[2]}});return m(this,Vu).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of m(this,Nl).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),m(this,Vu).clear(),this.filterFactory.destroy(!0),P1.cleanup()}}cachedPageNumber(e){if(!bI(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return m(this,Lv).get(t)??null}}Vu=new WeakMap,Nl=new WeakMap,Bv=new WeakMap,Lv=new WeakMap,Uu=new WeakMap,mm=new WeakSet,yb=function(e,t=null){const n=m(this,Vu).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return m(this,Vu).set(e,i),i};var Nh;class Ede{constructor(e){$(this,Nh,null);Re(this,"onContinue",null);Re(this,"onError",null);R(this,Nh,e)}get promise(){return m(this,Nh).capability.promise}cancel(e=0){m(this,Nh).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=m(this,Nh).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=m(this,Nh);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Nh=new WeakMap;var Dh,pm;const yf=class yf{constructor({callback:e,params:t,objs:n,commonObjs:i,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:c=!1,pdfBug:h=!1,pageColors:d=null,enableHWA:f=!1,operationsFilter:p=null}){$(this,Dh,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=h,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=c===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Ede(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=f,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=p}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var l,u;if(this.cancelled)return;if(this._canvas){if(m(yf,pm).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");m(yf,pm).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:i,background:s,dependencyTracker:a}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Lg(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:i,viewport:n,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,t=0){var n,i,s;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),m(this,Dh)&&(window.cancelAnimationFrame(m(this,Dh)),R(this,Dh,null)),m(yf,pm).delete(this._canvas),e||(e=new wF(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(s=(i=this.task).onError)==null||s.call(i,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?R(this,Dh,window.requestAnimationFrame(()=>{R(this,Dh,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),m(yf,pm).delete(this._canvas),this.callback())))}};Dh=new WeakMap,pm=new WeakMap,$(yf,pm,new WeakSet);let kI=yf;const Sde="5.4.449",Tde="f44e5f0e6";var sa,gm,$v,jn,Kw,Vv,zu,Xw,Mh,Fo,Yw,_r,FI,OI,BI,hf,OG,qc;const Is=class Is{constructor({editor:e=null,uiManager:t=null}){$(this,_r);$(this,sa,null);$(this,gm,null);$(this,$v);$(this,jn,null);$(this,Kw,!1);$(this,Vv,!1);$(this,zu,null);$(this,Xw);$(this,Mh,null);$(this,Fo,null);var n,i;e?(R(this,Vv,!1),R(this,zu,e)):R(this,Vv,!0),R(this,Fo,(e==null?void 0:e._uiManager)||t),R(this,Xw,m(this,Fo)._eventBus),R(this,$v,((n=e==null?void 0:e.color)==null?void 0:n.toUpperCase())||((i=m(this,Fo))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),m(Is,Yw)||R(Is,Yw,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return St(this,"_keyboardManager",new i_([[["Escape","mac+Escape"],Is.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Is.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Is.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Is.prototype._moveToPrevious],[["Home","mac+Home"],Is.prototype._moveToBeginning],[["End","mac+End"],Is.prototype._moveToEnd]]))}renderButton(){const e=R(this,sa,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",m(this,zu)&&(e.ariaControls=`${m(this,zu).id}_colorpicker_dropdown`);const t=m(this,Fo)._signal;e.addEventListener("click",j(this,_r,hf).bind(this),{signal:t}),e.addEventListener("keydown",j(this,_r,BI).bind(this),{signal:t});const n=R(this,gm,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=m(this,$v),e.append(n),e}renderMainDropdown(){const e=R(this,jn,j(this,_r,FI).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===m(this,sa)){j(this,_r,hf).call(this,e);return}const t=e.target.getAttribute("data-color");t&&j(this,_r,OI).call(this,t,e)}_moveToNext(e){var t,n;if(!m(this,_r,qc)){j(this,_r,hf).call(this,e);return}if(e.target===m(this,sa)){(t=m(this,jn).firstElementChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=m(this,jn))==null?void 0:t.firstElementChild)||e.target===m(this,sa)){m(this,_r,qc)&&this._hideDropdownFromKeyboard();return}m(this,_r,qc)||j(this,_r,hf).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!m(this,_r,qc)){j(this,_r,hf).call(this,e);return}(t=m(this,jn).firstElementChild)==null||t.focus()}_moveToEnd(e){var t;if(!m(this,_r,qc)){j(this,_r,hf).call(this,e);return}(t=m(this,jn).lastElementChild)==null||t.focus()}hideDropdown(){var e,t;(e=m(this,jn))==null||e.classList.add("hidden"),m(this,sa).ariaExpanded="false",(t=m(this,Mh))==null||t.abort(),R(this,Mh,null)}_hideDropdownFromKeyboard(){var e;if(!m(this,Vv)){if(!m(this,_r,qc)){(e=m(this,zu))==null||e.unselect();return}this.hideDropdown(),m(this,sa).focus({preventScroll:!0,focusVisible:m(this,Kw)})}}updateColor(e){if(m(this,gm)&&(m(this,gm).style.backgroundColor=e),!m(this,jn))return;const t=m(this,Fo).highlightColors.values();for(const n of m(this,jn).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=m(this,sa))==null||e.remove(),R(this,sa,null),R(this,gm,null),(t=m(this,jn))==null||t.remove(),R(this,jn,null)}};sa=new WeakMap,gm=new WeakMap,$v=new WeakMap,jn=new WeakMap,Kw=new WeakMap,Vv=new WeakMap,zu=new WeakMap,Xw=new WeakMap,Mh=new WeakMap,Fo=new WeakMap,Yw=new WeakMap,_r=new WeakSet,FI=function(){const e=document.createElement("div"),t=m(this,Fo)._signal;e.addEventListener("contextmenu",vo,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),m(this,zu)&&(e.id=`${m(this,zu).id}_colorpicker_dropdown`);for(const[n,i]of m(this,Fo).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=n,s.setAttribute("data-l10n-id",m(Is,Yw)[n]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=i,s.ariaSelected=i===m(this,$v),s.addEventListener("click",j(this,_r,OI).bind(this,i),{signal:t}),e.append(s)}return e.addEventListener("keydown",j(this,_r,BI).bind(this),{signal:t}),e},OI=function(e,t){t.stopPropagation(),m(this,Xw).dispatch("switchannotationeditorparams",{source:this,type:Kt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},BI=function(e){Is._keyboardManager.exec(this,e)},hf=function(e){if(m(this,_r,qc)){this.hideDropdown();return}if(R(this,Kw,e.detail===0),m(this,Mh)||(R(this,Mh,new AbortController),window.addEventListener("pointerdown",j(this,_r,OG).bind(this),{signal:m(this,Fo).combinedSignal(m(this,Mh))})),m(this,sa).ariaExpanded="true",m(this,jn)){m(this,jn).classList.remove("hidden");return}const t=R(this,jn,j(this,_r,FI).call(this));m(this,sa).append(t)},OG=function(e){var t;(t=m(this,jn))!=null&&t.contains(e.target)||this.hideDropdown()},qc=function(){return m(this,jn)&&!m(this,jn).classList.contains("hidden")},$(Is,Yw,null);let YS=Is;var Dl,Qw,Uv,Jw;const bf=class bf{constructor(e){$(this,Dl,null);$(this,Qw,null);$(this,Uv,null);R(this,Qw,e),R(this,Uv,e._uiManager),m(bf,Jw)||R(bf,Jw,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(m(this,Dl))return m(this,Dl);const{editorType:e,colorType:t,color:n}=m(this,Qw),i=R(this,Dl,document.createElement("input"));return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",m(bf,Jw)[e]),i.addEventListener("input",()=>{m(this,Uv).updateParams(t,i.value)},{signal:m(this,Uv)._signal}),i}update(e){m(this,Dl)&&(m(this,Dl).value=e)}destroy(){var e;(e=m(this,Dl))==null||e.remove(),R(this,Dl,null)}hideDropdown(){}};Dl=new WeakMap,Qw=new WeakMap,Uv=new WeakMap,Jw=new WeakMap,$(bf,Jw,null);let QS=bf;function A5(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function Uy(r){return Math.max(0,Math.min(255,255*r))}class E5{static CMYK_G([e,t,n,i]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Uy(e),[e,e,e]}static G_HTML([e]){const t=A5(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Uy)}static RGB_HTML(e){return`#${e.map(A5).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,n+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,n,i]){return[Uy(1-Math.min(1,e+i)),Uy(1-Math.min(1,n+i)),Uy(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const i=1-e,s=1-t,a=1-n,o=Math.min(i,s,a);return["CMYK",i,s,a,o]}}class Cde{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Dr("Abstract method `_createSVG` called.")}}class JS extends Cde{_createSVG(e){return document.createElementNS(fu,e)}}const Nde=9,lp=new WeakSet,Dde=new Date().getTimezoneOffset()*60*1e3;class HD{static create(e){switch(e.data.annotationType){case Nn.LINK:return new SF(e);case Nn.TEXT:return new Ide(e);case Nn.WIDGET:switch(e.data.fieldType){case"Tx":return new Pde(e);case"Btn":return e.data.radioButton?new $G(e):e.data.checkBox?new kde(e):new Fde(e);case"Ch":return new Ode(e);case"Sig":return new Rde(e)}return new wp(e);case Nn.POPUP:return new $I(e);case Nn.FREETEXT:return new qG(e);case Nn.LINE:return new Lde(e);case Nn.SQUARE:return new $de(e);case Nn.CIRCLE:return new Vde(e);case Nn.POLYLINE:return new HG(e);case Nn.CARET:return new zde(e);case Nn.INK:return new TF(e);case Nn.POLYGON:return new Ude(e);case Nn.HIGHLIGHT:return new GG(e);case Nn.UNDERLINE:return new jde(e);case Nn.SQUIGGLY:return new qde(e);case Nn.STRIKEOUT:return new Hde(e);case Nn.STAMP:return new WG(e);case Nn.FILEATTACHMENT:return new Gde(e);default:return new en(e)}}}var vm,zv,Za,Zw,LI;const kO=class kO{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){$(this,Zw);$(this,vm,null);$(this,zv,!1);$(this,Za,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return kO._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:e}=this,t=(n=this.annotationStorage)==null?void 0:n.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var o;const e=(o=this.annotationStorage)==null?void 0:o.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:n,rect:i}=this.data;let s=-1/0,a=-1/0;if((t==null?void 0:t.length)>=8){for(let l=0;l<t.length;l+=8)t[l+1]>a?(a=t[l+1],s=t[l+2]):t[l+1]===a&&(s=Math.max(s,t[l+2]));return[s,a]}if((n==null?void 0:n.length)>=1){for(const l of n)for(let u=0,c=l.length;u<c;u+=2)l[u+1]>a?(a=l[u+1],s=l[u]):l[u+1]===a&&(s=Math.max(s,l[u]));if(s!==1/0)return[s,a]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:s,pageY:a}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-s)/n,e[1]=100*(e[1]-a)/i,e}get commentText(){var t,n,i;const{data:e}=this;return((n=(t=this.annotationStorage.getRawValue(`${D1}${e.id}`))==null?void 0:t.popup)==null?void 0:n.contents)||((i=e.contentsObj)==null?void 0:i.str)||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${D1}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=m(this,Za))==null?void 0:e.popup)||this.popup)==null||t.remove(),R(this,Za,this.popup=null)}updateEdited(e){var s;if(!this.container)return;e.rect&&(m(this,vm)||R(this,vm,{rect:this.data.rect.slice(0)}));const{rect:t,popup:n}=e;t&&j(this,Zw,LI).call(this,t);let i=((s=m(this,Za))==null?void 0:s.popup)||this.popup;!i&&(n!=null&&n.text)&&(this._createPopup(n),i=m(this,Za).popup),i&&(i.updateEdited(e),n!=null&&n.deleted&&(i.remove(),R(this,Za,null),this.popup=null))}resetEdited(){var e;m(this,vm)&&(j(this,Zw,LI).call(this,m(this,vm).rect),(e=m(this,Za))==null||e.popup.resetEdited(),R(this,vm,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),!(this instanceof wp)&&!(this instanceof SF)&&(s.tabIndex=0);const{style:a}=s;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof $I){const{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,s),s}const{width:o,height:l}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,b=t.borderStyle.verticalCornerRadius;if(g>0||b>0){const x=`calc(${g}px * var(--total-scale-factor)) / calc(${b}px * var(--total-scale-factor))`;a.borderRadius=x}else if(this instanceof $G){const x=`calc(${o}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;a.borderRadius=x}switch(t.borderStyle.style){case Xp.SOLID:a.borderStyle="solid";break;case Xp.DASHED:a.borderStyle="dashed";break;case Xp.BEVELED:Et("Unimplemented border style: beveled");break;case Xp.INSET:Et("Unimplemented border style: inset");break;case Xp.UNDERLINE:a.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(R(this,zv,!0),a.borderColor=et.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):a.borderWidth=0}const u=et.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:h,pageX:d,pageY:f}=i.rawDims;a.left=`${100*(u[0]-d)/c}%`,a.top=`${100*(u[1]-f)/h}%`;const{rotation:p}=t;return t.hasOwnCanvas||p===0?(a.width=`${100*o/c}%`,a.height=`${100*l/h}%`):this.setRotation(p,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:s,height:a}=this;e%180!==0&&([s,a]=[a,s]),t.style.width=`${100*s/n}%`,t.style.height=`${100*a/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,i)=>{const s=i.detail[t],a=s[0],o=s.slice(1);i.target.style[n]=E5[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[n]:E5[`${a}_rgb`](o)})};return St(this,"_commonActions",{display:t=>{const{display:n}=t.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail)){const s=e[i]||n[i];s==null||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,s]of Object.entries(t)){const a=n[i];if(a){const o={detail:{[i]:s},target:e};a(o),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,s]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){const[g,b,v,x]=e.subarray(2,6);if(i===g&&s===b&&t===v&&n===x)return}const{style:a}=this.container;let o;if(m(this,zv)){const{borderColor:g,borderWidth:b}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${b}">`],this.container.classList.add("hasBorder")}const l=i-t,u=s-n,{svgFactory:c}=this,h=c.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const d=c.createElement("defs");h.append(d);const f=c.createElement("clipPath"),p=`clippath_${this.data.id}`;f.setAttribute("id",p),f.setAttribute("clipPathUnits","objectBoundingBox"),d.append(f);for(let g=2,b=e.length;g<b;g+=8){const v=e[g],x=e[g+1],y=e[g+2],A=e[g+3],w=c.createElement("rect"),_=(y-t)/l,S=(s-x)/u,E=(v-y)/l,C=(x-A)/u;w.setAttribute("x",_),w.setAttribute("y",S),w.setAttribute("width",E),w.setAttribute("height",C),f.append(w),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${_}" y="${S}" width="${E}" height="${C}"/>`)}m(this,zv)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(h),this.container.style.clipPath=`url(#${p})`}_createPopup(e=null){const{data:t}=this;let n,i;e?(n={str:e.text},i=e.date):(n=t.contentsObj,i=t.modificationDate),R(this,Za,new $I({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(m(this,Za)||this.popup||this.data.popupRef)}get extraPopupElement(){return m(this,Za)}render(){Dr("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:s,id:a,exportValues:o}of i){if(s===-1||a===t)continue;const l=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!lp.has(u)){Et(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:l,domElement:u})}return n}for(const i of document.getElementsByName(e)){const{exportValue:s}=i,a=i.getAttribute("data-element-id");a!==t&&lp.has(i)&&n.push({id:a,exportValue:s,domElement:i})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};vm=new WeakMap,zv=new WeakMap,Za=new WeakMap,Zw=new WeakSet,LI=function(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}}}=this;n==null||n.splice(0,4,...e),t.left=`${100*(e[0]-o)/s}%`,t.top=`${100*(a-e[3]+l)/a}%`,i===0?(t.width=`${100*(e[2]-e[0])/s}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(i)};let en=kO;class Mde extends en{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var _a,df,BG,LG;class SF extends en{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});$(this,_a);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let s=!1;return t.url?(n.addLinkAttributes(i,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),s=!0):t.attachment?(j(this,_a,BG).call(this,i,t.attachment,t.overlaidText,t.attachmentDest),s=!0):t.setOCGState?(j(this,_a,LG).call(this,i,t.setOCGState,t.overlaidText),s=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),s=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&(this.contentElement=i,this.container.append(i)),this.container}_bindLink(t,n,i=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&j(this,_a,df).call(this),i&&(t.title=i)}_bindNamedAction(t,n,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),i&&(t.title=i),j(this,_a,df).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(n.actions)){const a=i.get(s);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:s}}),!1})}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),j(this,_a,df).call(this)}_bindResetFormAction(t,n){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),j(this,_a,df).call(this),!this._fieldObjects){Et('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var h;i==null||i();const{fields:s,refs:a,include:o}=n,l=[];if(s.length!==0||a.length!==0){const d=new Set(a);for(const f of s){const p=this._fieldObjects[f]||[];for(const{id:g}of p)d.add(g)}for(const f of Object.values(this._fieldObjects))for(const p of f)d.has(p.id)===o&&l.push(p)}else for(const d of Object.values(this._fieldObjects))l.push(...d);const u=this.annotationStorage,c=[];for(const d of l){const{id:f}=d;switch(c.push(f),d.type){case"text":{const g=d.defaultValue||"";u.setValue(f,{value:g});break}case"checkbox":case"radiobutton":{const g=d.defaultValue===d.exportValues;u.setValue(f,{value:g});break}case"combobox":case"listbox":{const g=d.defaultValue||"";u.setValue(f,{value:g});break}default:continue}const p=document.querySelector(`[data-element-id="${f}"]`);if(p){if(!lp.has(p)){Et(`_bindResetFormAction - element not allowed: ${f}`);continue}}else continue;p.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}})),!1}}}_a=new WeakSet,df=function(){this.container.setAttribute("data-internal-link","")},BG=function(t,n,i="",s=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:i&&(t.title=i),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(n.content,n.filename,s),!1},j(this,_a,df).call(this)},LG=function(t,n,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),i&&(t.title=i),j(this,_a,df).call(this)};class Ide extends en{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class wp extends en{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Ri.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,s){n.includes("mouse")?e.addEventListener(n,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(n,a=>{var o;if(n==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}s&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(a)}}))})}_setEventListeners(e,t,n,i){var s,a,o;for(const[l,u]of n)(u==="Action"||(s=this.data.actions)!=null&&s[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,u,i),u==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":et.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||Nde,s=e.style;let a;const o=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),c=Math.round(u/(BD*i))||1,h=u/c;a=Math.min(i,l(h/BD))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(i,l(u/BD))}s.fontSize=`calc(${a}px * var(--total-scale-factor))`,s.color=et.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Pde extends wp{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,i){const s=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),s.setValue(a.id,{[i]:n})}render(){var i,s;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=a.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const c={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=u??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",u??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),lp.add(n),this.contentElement=n,n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:h,datetimeType:d,timeStep:f}=this.data,p=!!d&&this.enableScripting;h&&(n.title=h),this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",b=>{e.setValue(t,{value:b.target.value}),this.setPropertyOnSiblings(n,"value",b.target.value,"value"),c.formattedValue=null}),n.addEventListener("resetform",b=>{const v=this.data.defaultFieldValue??"";n.value=c.userValue=v,c.formattedValue=null});let g=b=>{const{formattedValue:v}=c;v!=null&&(b.target.value=v),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",v=>{var y;if(c.focused)return;const{target:x}=v;if(p&&(x.type=d,f&&(x.step=f)),c.userValue){const A=c.userValue;if(p)if(d==="time"){const w=new Date(A),_=[w.getHours(),w.getMinutes(),w.getSeconds()];x.value=_.map(S=>S.toString().padStart(2,"0")).join(":")}else x.value=new Date(A-Dde).toISOString().split(d==="date"?"T":".",1)[0];else x.value=A}c.lastCommittedValue=x.value,c.commitKey=1,(y=this.data.actions)!=null&&y.Focus||(c.focused=!0)}),n.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const x={value(y){c.userValue=y.detail.value??"",p||e.setValue(t,{value:c.userValue.toString()}),y.target.value=c.userValue},formattedValue(y){const{formattedValue:A}=y.detail;c.formattedValue=A,A!=null&&y.target!==document.activeElement&&(y.target.value=A);const w={formattedValue:A};p&&(w.value=A),e.setValue(t,w)},selRange(y){y.target.setSelectionRange(...y.detail.selRange)},charLimit:y=>{var S;const{charLimit:A}=y.detail,{target:w}=y;if(A===0){w.removeAttribute("maxLength");return}w.setAttribute("maxLength",A);let _=c.userValue;!_||_.length<=A||(_=_.slice(0,A),w.value=c.userValue=_,e.setValue(t,{value:_}),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:1,selStart:w.selectionStart,selEnd:w.selectionEnd}}))}};this._dispatchEventFromSandbox(x,v)}),n.addEventListener("keydown",v=>{var A;c.commitKey=1;let x=-1;if(v.key==="Escape"?x=0:v.key==="Enter"&&!this.data.multiLine?x=2:v.key==="Tab"&&(c.commitKey=3),x===-1)return;const{value:y}=v.target;c.lastCommittedValue!==y&&(c.lastCommittedValue=y,c.userValue=y,(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:x,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const b=g;g=null,n.addEventListener("blur",v=>{var A,w;if(!c.focused||!v.relatedTarget)return;(A=this.data.actions)!=null&&A.Blur||(c.focused=!1);const{target:x}=v;let{value:y}=x;if(p){if(y&&d==="time"){const _=y.split(":").map(S=>parseInt(S,10));y=new Date(2e3,0,1,_[0],_[1],_[2]||0).valueOf(),x.step=""}else y.includes("T")||(y=`${y}T00:00`),y=new Date(y).valueOf();x.type="text"}c.userValue=y,c.lastCommittedValue!==y&&((w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:c.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),b(v)}),(s=this.data.actions)!=null&&s.Keystroke&&n.addEventListener("beforeinput",v=>{var C;c.lastCommittedValue=null;const{data:x,target:y}=v,{value:A,selectionStart:w,selectionEnd:_}=y;let S=w,E=_;switch(v.inputType){case"deleteWordBackward":{const N=A.substring(0,w).match(/\w*[^\w]*$/);N&&(S-=N[0].length);break}case"deleteWordForward":{const N=A.substring(w).match(/^[^\w]*\w*/);N&&(E+=N[0].length);break}case"deleteContentBackward":w===_&&(S-=1);break;case"deleteContentForward":w===_&&(E+=1);break}v.preventDefault(),(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,change:x||"",willCommit:!1,selStart:S,selEnd:E}})}),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(g&&n.addEventListener("blur",g),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Rde extends wp{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class kde extends wp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return lp.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=0,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const u of this._getElementsByName(o,n)){const c=l&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=c),e.setValue(u.id,{value:c})}e.setValue(n,{value:l})}),s.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(n,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class $G extends wp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const a of this._getElementsByName(t.fieldName,n))e.setValue(a.id,{value:!1});const s=document.createElement("input");if(lp.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const u of this._getElementsByName(o,n))e.setValue(u.id,{value:!1});e.setValue(n,{value:l})}),s.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;s.addEventListener("updatefromsandbox",o=>{const l={value:u=>{const c=a===u.detail.value;for(const h of this._getElementsByName(u.target.name)){const d=c&&h.id===n;h.domElement&&(h.domElement.checked=d),e.setValue(h.id,{value:d})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Fde extends SF{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class Ode extends wp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");lp.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",c=>{const h=this.data.defaultFieldValue;for(const d of i.options)d.selected=d.value===h});for(const c of this.data.options){const h=document.createElement("option");h.textContent=c.displayValue,h.value=c.exportValue,n.value.includes(c.exportValue)&&(h.setAttribute("selected",!0),s=!1),i.append(h)}let a=null;if(s){const c=document.createElement("option");c.value=" ",c.setAttribute("hidden",!0),c.setAttribute("selected",!0),i.prepend(c),a=()=>{c.remove(),i.removeEventListener("input",a),a=null},i.addEventListener("input",a)}const o=c=>{const h=c?"value":"textContent",{options:d,multiple:f}=i;return f?Array.prototype.filter.call(d,p=>p.selected).map(p=>p[h]):d.selectedIndex===-1?null:d[d.selectedIndex][h]};let l=o(!1);const u=c=>{const h=c.target.options;return Array.prototype.map.call(h,d=>({displayValue:d.textContent,exportValue:d.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",c=>{const h={value(d){a==null||a();const f=d.detail.value,p=new Set(Array.isArray(f)?f:[f]);for(const g of i.options)g.selected=p.has(g.value);e.setValue(t,{value:o(!0)}),l=o(!1)},multipleSelection(d){i.multiple=!0},remove(d){const f=i.options,p=d.detail.remove;f[p].selected=!1,i.remove(p),f.length>0&&Array.prototype.findIndex.call(f,b=>b.selected)===-1&&(f[0].selected=!0),e.setValue(t,{value:o(!0),items:u(d)}),l=o(!1)},clear(d){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),l=o(!1)},insert(d){const{index:f,displayValue:p,exportValue:g}=d.detail.insert,b=i.children[f],v=document.createElement("option");v.textContent=p,v.value=g,b?b.before(v):i.append(v),e.setValue(t,{value:o(!0),items:u(d)}),l=o(!1)},items(d){const{items:f}=d.detail;for(;i.length!==0;)i.remove(0);for(const p of f){const{displayValue:g,exportValue:b}=p,v=document.createElement("option");v.textContent=g,v.value=b,i.append(v)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:o(!0),items:u(d)}),l=o(!1)},indices(d){const f=new Set(d.detail.indices);for(const p of d.target.options)p.selected=f.has(p.index);e.setValue(t,{value:o(!0)}),l=o(!1)},editable(d){d.target.disabled=!d.detail.editable}};this._dispatchEventFromSandbox(h,c)}),i.addEventListener("input",c=>{var f;const h=o(!0),d=o(!1);e.setValue(t,{value:h}),c.preventDefault(),(f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:d,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],c=>c.target.value)):i.addEventListener("input",function(c){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var ex,VI;class $I extends en{constructor(t){const{data:n,elements:i,parent:s}=t,a=!!s._commentManager;super(t,{isRenderable:!a&&en._hasPopupData(n)});$(this,ex);if(this.elements=i,a&&en._hasPopupData(n)){const o=this.popup=j(this,ex,VI).call(this);for(const l of i)l.popup=o}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const n=this.popup=j(this,ex,VI).call(this),i=[];for(const s of this.elements)s.popup=n,s.container.ariaHasPopup="dialog",i.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(s=>`${wg}${s}`).join(",")),this.container}}ex=new WeakSet,VI=function(){return new Bde({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var aa,Ih,YT,QT,jv,qv,ln,Ml,Ph,ym,Hv,Gv,Il,oa,ju,qu,un,Hu,Rh,tx,Gu,Wv,bm,kh,ii,Fh,Ft,CE,UI,zI,jI,NE,qI,VG,UG,zG,jG,DE,ME,HI;class Bde{constructor({container:e,color:t,elements:n,titleObj:i,modificationDate:s,contentsObj:a,richText:o,parent:l,rect:u,parentRect:c,open:h,commentManager:d=null}){$(this,Ft);$(this,aa,null);$(this,Ih,j(this,Ft,zG).bind(this));$(this,YT,j(this,Ft,HI).bind(this));$(this,QT,j(this,Ft,ME).bind(this));$(this,jv,j(this,Ft,DE).bind(this));$(this,qv,null);$(this,ln,null);$(this,Ml,null);$(this,Ph,null);$(this,ym,null);$(this,Hv,null);$(this,Gv,null);$(this,Il,!1);$(this,oa,null);$(this,ju,null);$(this,qu,null);$(this,un,null);$(this,Hu,null);$(this,Rh,null);$(this,tx,null);$(this,Gu,null);$(this,Wv,null);$(this,bm,null);$(this,kh,!1);$(this,ii,null);$(this,Fh,null);R(this,ln,e),R(this,Wv,i),R(this,Ml,a),R(this,Gu,o),R(this,Hv,l),R(this,qv,t),R(this,tx,u),R(this,Gv,c),R(this,ym,n),R(this,aa,d),R(this,ii,n[0]),R(this,Ph,qS.toDateObject(s)),this.trigger=n.flatMap(f=>f.getElementsToTriggerPopup()),d||(j(this,Ft,CE).call(this),m(this,ln).hidden=!0,h&&j(this,Ft,DE).call(this))}renderCommentButton(){if(m(this,un)){m(this,un).parentNode||m(this,ii).container.after(m(this,un));return}if(m(this,Hu)||j(this,Ft,UI).call(this),!m(this,Hu))return;const{signal:e}=R(this,ju,new AbortController),t=m(this,ii).hasOwnCommentButton,n=()=>{m(this,aa).toggleCommentPopup(this,!0,void 0,!t)},i=()=>{m(this,aa).toggleCommentPopup(this,!1,!0,!t)},s=()=>{m(this,aa).toggleCommentPopup(this,!1,!1)};if(t){R(this,un,m(this,ii).container);for(const a of this.trigger)a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.addEventListener("keydown",m(this,Ih),{signal:e}),a.addEventListener("click",n,{signal:e}),a.addEventListener("pointerenter",i,{signal:e}),a.addEventListener("pointerleave",s,{signal:e}),a.classList.add("popupTriggerArea")}else{const a=R(this,un,document.createElement("button"));a.className="annotationCommentButton";const o=m(this,ii).container;a.style.zIndex=o.style.zIndex+1,a.tabIndex=0,a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.setAttribute("data-l10n-id","pdfjs-show-comment-button"),j(this,Ft,jI).call(this),j(this,Ft,zI).call(this),a.addEventListener("keydown",m(this,Ih),{signal:e}),a.addEventListener("click",n,{signal:e}),a.addEventListener("pointerenter",i,{signal:e}),a.addEventListener("pointerleave",s,{signal:e}),o.after(a)}}get commentButtonColor(){const{color:e,opacity:t}=m(this,ii).commentData;return e?m(this,Hv)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=m(this,un))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:i,modificationDate:s}=m(this,ii).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:i,modificationDate:s}}get elementBeforePopup(){return m(this,un)}get comment(){return m(this,Fh)||R(this,Fh,m(this,ii).commentText),m(this,Fh)}set comment(e){e!==this.comment&&(m(this,ii).commentText=R(this,Fh,e))}focus(){var e;(e=m(this,ii).container)==null||e.focus()}get parentBoundingClientRect(){return m(this,ii).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){m(this,un)&&(m(this,un).classList.toggle("selected",e),m(this,un).ariaExpanded=t)}setSelectedCommentButton(e){m(this,un).classList.toggle("selected",e)}get commentPopupPosition(){if(m(this,Rh))return m(this,Rh);const{x:e,y:t,height:n}=m(this,un).getBoundingClientRect(),{x:i,y:s,width:a,height:o}=m(this,ii).layer.getBoundingClientRect();return[(e-i)/a,(t+n-s)/o]}set commentPopupPosition(e){R(this,Rh,e)}hasDefaultPopupPosition(){return m(this,Rh)===null}get commentButtonPosition(){return m(this,Hu)}get commentButtonWidth(){return m(this,un).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=m(this,Rh)||this.commentButtonPosition.map(u=>u/100),i=this.parentBoundingClientRect,{x:s,y:a,width:o,height:l}=i;m(this,aa).showDialog(null,this,s+t*o,a+n*l,{...e,parentDimensions:i})}render(){var n,i;if(m(this,oa))return;const e=R(this,oa,document.createElement("div"));if(e.className="popup",m(this,qv)){const s=e.style.outlineColor=et.makeHexColor(...m(this,qv));e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const t=document.createElement("span");if(t.className="header",(n=m(this,Wv))!=null&&n.str){const s=document.createElement("span");s.className="title",t.append(s),{dir:s.dir,str:s.textContent}=m(this,Wv)}if(e.append(t),m(this,Ph)){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:m(this,Ph).valueOf()})),s.dateTime=m(this,Ph).toISOString(),t.append(s)}MH({html:m(this,Ft,NE)||m(this,Ml).str,dir:(i=m(this,Ml))==null?void 0:i.dir,className:"popupContent"},e),m(this,ln).append(e)}updateEdited({rect:e,popup:t,deleted:n}){var i;if(m(this,aa)){n?(this.remove(),R(this,Fh,null)):t&&(t.deleted?this.remove():(j(this,Ft,jI).call(this),R(this,Fh,t.text))),e&&(R(this,Hu,null),j(this,Ft,UI).call(this),j(this,Ft,zI).call(this));return}if(n||t!=null&&t.deleted){this.remove();return}j(this,Ft,CE).call(this),m(this,bm)||R(this,bm,{contentsObj:m(this,Ml),richText:m(this,Gu)}),e&&R(this,qu,null),t&&t.text&&(R(this,Gu,j(this,Ft,UG).call(this,t.text)),R(this,Ph,qS.toDateObject(t.date)),R(this,Ml,null)),(i=m(this,oa))==null||i.remove(),R(this,oa,null)}resetEdited(){var e;m(this,bm)&&({contentsObj:$n(this,Ml)._,richText:$n(this,Gu)._}=m(this,bm),R(this,bm,null),(e=m(this,oa))==null||e.remove(),R(this,oa,null),R(this,qu,null))}remove(){var e,t,n;if((e=m(this,ju))==null||e.abort(),R(this,ju,null),(t=m(this,oa))==null||t.remove(),R(this,oa,null),R(this,kh,!1),R(this,Il,!1),(n=m(this,un))==null||n.remove(),R(this,un,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){R(this,kh,this.isVisible),m(this,kh)&&(m(this,ln).hidden=!0)}maybeShow(){m(this,aa)||(j(this,Ft,CE).call(this),m(this,kh)&&(m(this,oa)||j(this,Ft,ME).call(this),R(this,kh,!1),m(this,ln).hidden=!1))}get isVisible(){return m(this,aa)?!1:m(this,ln).hidden===!1}}aa=new WeakMap,Ih=new WeakMap,YT=new WeakMap,QT=new WeakMap,jv=new WeakMap,qv=new WeakMap,ln=new WeakMap,Ml=new WeakMap,Ph=new WeakMap,ym=new WeakMap,Hv=new WeakMap,Gv=new WeakMap,Il=new WeakMap,oa=new WeakMap,ju=new WeakMap,qu=new WeakMap,un=new WeakMap,Hu=new WeakMap,Rh=new WeakMap,tx=new WeakMap,Gu=new WeakMap,Wv=new WeakMap,bm=new WeakMap,kh=new WeakMap,ii=new WeakMap,Fh=new WeakMap,Ft=new WeakSet,CE=function(){var t;if(m(this,ju))return;R(this,ju,new AbortController);const{signal:e}=m(this,ju);for(const n of this.trigger)n.addEventListener("click",m(this,jv),{signal:e}),n.addEventListener("pointerenter",m(this,QT),{signal:e}),n.addEventListener("pointerleave",m(this,YT),{signal:e}),n.classList.add("popupTriggerArea");for(const n of m(this,ym))(t=n.container)==null||t.addEventListener("keydown",m(this,Ih),{signal:e})},UI=function(){const e=m(this,ym).find(t=>t.hasCommentButton);e&&R(this,Hu,e._normalizePoint(e.commentButtonPosition))},zI=function(){if(m(this,ii).extraPopupElement&&!m(this,ii).editor)return;m(this,un)||this.renderCommentButton();const[e,t]=m(this,Hu),{style:n}=m(this,un);n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`},jI=function(){m(this,ii).extraPopupElement||(m(this,un)||this.renderCommentButton(),m(this,un).style.backgroundColor=this.commentButtonColor||"")},NE=function(){const e=m(this,Gu),t=m(this,Ml);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&m(this,Gu).html||null},qI=function(){var e,t,n;return((n=(t=(e=m(this,Ft,NE))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},VG=function(){var e,t,n;return((n=(t=(e=m(this,Ft,NE))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},UG=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:m(this,Ft,VG),fontSize:m(this,Ft,qI)?`calc(${m(this,Ft,qI)}px * var(--total-scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:i});return n},zG=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&m(this,Il))&&j(this,Ft,DE).call(this)},jG=function(){if(m(this,qu)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:s}}}=m(this,Hv);let a=!!m(this,Gv),o=a?m(this,Gv):m(this,tx);for(const p of m(this,ym))if(!o||et.intersect(p.data.rect,o)!==null){o=p.data.rect,a=!0;break}const l=et.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),c=a?o[2]-o[0]+5:0,h=l[0]+c,d=l[1];R(this,qu,[100*(h-i)/t,100*(d-s)/n]);const{style:f}=m(this,ln);f.left=`${m(this,qu)[0]}%`,f.top=`${m(this,qu)[1]}%`},DE=function(){if(m(this,aa)){m(this,aa).toggleCommentPopup(this,!1);return}R(this,Il,!m(this,Il)),m(this,Il)?(j(this,Ft,ME).call(this),m(this,ln).addEventListener("click",m(this,jv)),m(this,ln).addEventListener("keydown",m(this,Ih))):(j(this,Ft,HI).call(this),m(this,ln).removeEventListener("click",m(this,jv)),m(this,ln).removeEventListener("keydown",m(this,Ih)))},ME=function(){m(this,oa)||this.render(),this.isVisible?m(this,Il)&&m(this,ln).classList.add("focused"):(j(this,Ft,jG).call(this),m(this,ln).hidden=!1,m(this,ln).style.zIndex=parseInt(m(this,ln).style.zIndex)+1e3)},HI=function(){m(this,ln).classList.remove("focused"),!(m(this,Il)||!this.isVisible)&&(m(this,ln).hidden=!0,m(this,ln).style.zIndex=parseInt(m(this,ln).style.zIndex)-1e3)};class qG extends en{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Dt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var rx;class Lde extends en{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});$(this,rx,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:i}=this,s=this.svgFactory.create(n,i,!0),a=R(this,rx,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return m(this,rx)}addHighlightArea(){this.container.classList.add("highlightArea")}}rx=new WeakMap;var nx;class $de extends en{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});$(this,nx,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:i}=this,s=this.svgFactory.create(n,i,!0),a=t.borderStyle.width,o=R(this,nx,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",n-a),o.setAttribute("height",i-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return m(this,nx)}addHighlightArea(){this.container.classList.add("highlightArea")}}nx=new WeakMap;var ix;class Vde extends en{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});$(this,ix,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:i}=this,s=this.svgFactory.create(n,i,!0),a=t.borderStyle.width,o=R(this,ix,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",n/2),o.setAttribute("cy",i/2),o.setAttribute("rx",n/2-a/2),o.setAttribute("ry",i/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return m(this,ix)}addHighlightArea(){this.container.classList.add("highlightArea")}}ix=new WeakMap;var sx;class HG extends en{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});$(this,sx,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:i,popupRef:s},width:a,height:o}=this;if(!n)return this.container;const l=this.svgFactory.create(a,o,!0);let u=[];for(let h=0,d=n.length;h<d;h+=2){const f=n[h]-t[0],p=t[3]-n[h+1];u.push(`${f},${p}`)}u=u.join(" ");const c=R(this,sx,this.svgFactory.createElement(this.svgElementName));return c.setAttribute("points",u),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),l.append(c),this.container.append(l),!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return m(this,sx)}addHighlightArea(){this.container.classList.add("highlightArea")}}sx=new WeakMap;class Ude extends HG{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class zde extends en{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var ax,wm,ox,GI;class TF extends en{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});$(this,ox);$(this,ax,null);$(this,wm,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Dt.HIGHLIGHT:Dt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:i,borderStyle:s,popupRef:a}}=this,{transform:o,width:l,height:u}=j(this,ox,GI).call(this,n,t),c=this.svgFactory.create(l,u,!0),h=R(this,ax,this.svgFactory.createElement("svg:g"));c.append(h),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",o);for(let d=0,f=i.length;d<f;d++){const p=this.svgFactory.createElement(this.svgElementName);m(this,wm).push(p),p.setAttribute("points",i[d].join(",")),h.append(p)}return!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:i,rect:s}=t,a=m(this,ax);if(n>=0&&a.setAttribute("stroke-width",n||1),i)for(let o=0,l=m(this,wm).length;o<l;o++)m(this,wm)[o].setAttribute("points",i[o].join(","));if(s){const{transform:o,width:l,height:u}=j(this,ox,GI).call(this,this.data.rotation,s);a.parentElement.setAttribute("viewBox",`0 0 ${l} ${u}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return m(this,wm)}addHighlightArea(){this.container.classList.add("highlightArea")}}ax=new WeakMap,wm=new WeakMap,ox=new WeakSet,GI=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class GG extends en{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Dt.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class jde extends en{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class qde extends en{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class Hde extends en{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class WG extends en{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Dt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var lx,ux,WI;class Gde extends en{constructor(t){var i;super(t,{isRenderable:!0});$(this,ux);$(this,lx,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",j(this,ux,WI).bind(this)),R(this,lx,i);const{isMac:s}=Ri.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(s?a.metaKey:a.ctrlKey)&&j(this,ux,WI).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return m(this,lx)}addHighlightArea(){this.container.classList.add("highlightArea")}}lx=new WeakMap,ux=new WeakSet,WI=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var xm,_m,Kv,Oh,cx,Am,la,hx,fc,IE,XI;const FO=class FO{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:i,page:s,viewport:a,structTreeLayer:o,commentManager:l,linkService:u,annotationStorage:c}){$(this,fc);$(this,xm,null);$(this,_m,null);$(this,Kv,null);$(this,Oh,new Map);$(this,cx,null);$(this,Am,null);$(this,la,[]);$(this,hx,!1);this.div=e,R(this,xm,t),R(this,_m,n),R(this,cx,o||null),R(this,Am,u||null),R(this,Kv,c||new _F),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=l||null}hasEditableAnnotations(){return m(this,Oh).size>0}async render(e){var o;const{annotations:t}=e,n=this.div;ap(n,this.viewport);const i=new Map,s=[],a={data:null,layer:n,linkService:m(this,Am),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new JS,annotationStorage:m(this,Kv),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const u=l.annotationType===Nn.POPUP;if(u){const d=i.get(l.id);if(!d)continue;if(!this._commentManager){s.push(l);continue}a.elements=d}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;a.data=l;const c=HD.create(a);if(!c.isRenderable)continue;if(!u&&(m(this,la).push(c),l.popupRef)){const d=i.get(l.popupRef);d?d.push(c):i.set(l.popupRef,[c])}const h=c.render();l.hidden&&(h.style.visibility="hidden"),c._isEditable&&(m(this,Oh).set(c.data.id,c),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(c))}await j(this,fc,IE).call(this);for(const l of s){const u=a.elements=i.get(l.id);a.data=l;const c=HD.create(a);if(!c.isRenderable)continue;const h=c.render();c.contentElement.id=`${wg}${l.id}`,l.hidden&&(h.style.visibility="hidden"),u.at(-1).container.after(h)}j(this,fc,XI).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:m(this,Am),svgFactory:new JS,parent:this};for(const n of e){n.borderStyle||(n.borderStyle=FO._defaultBorderStyle),t.data=n;const i=HD.create(t);i.isRenderable&&(i.render(),i.contentElement.id=`${wg}${n.id}`,m(this,la).push(i))}await j(this,fc,IE).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,ap(t,{rotation:e.rotation}),j(this,fc,XI).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(m(this,Oh).values())}getEditableAnnotation(e){return m(this,Oh).get(e)}addFakeAnnotation(e){const{div:t}=this,{id:n,rotation:i}=e,s=new Mde({data:{id:n,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:m(this,Am),annotationStorage:m(this,Kv)});return s.render(),s.contentElement.id=`${wg}${n}`,s.createOrUpdatePopup(),m(this,la).push(s),s}removeAnnotation(e){var i;const t=m(this,la).findIndex(s=>s.data.id===e);if(t<0)return;const[n]=m(this,la).splice(t,1);(i=m(this,xm))==null||i.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const t of e)t.updateFakeAnnotationElement(this);j(this,fc,IE).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return St(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Xp.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};xm=new WeakMap,_m=new WeakMap,Kv=new WeakMap,Oh=new WeakMap,cx=new WeakMap,Am=new WeakMap,la=new WeakMap,hx=new WeakMap,fc=new WeakSet,IE=async function(){var n,i,s;if(m(this,la).length===0)return;this.div.replaceChildren();const e=[];if(!m(this,hx)){R(this,hx,!0);for(const{contentElement:a,data:{id:o}}of m(this,la)){const l=a.id=`${wg}${o}`;e.push((n=m(this,cx))==null?void 0:n.getAriaAttributes(l).then(u=>{if(u)for(const[c,h]of u)a.setAttribute(c,h)}))}}m(this,la).sort(({data:{rect:[a,o,l,u]}},{data:{rect:[c,h,d,f]}})=>{if(a===l&&o===u)return 1;if(c===d&&h===f)return-1;const p=u,g=o,b=(o+u)/2,v=f,x=h,y=(h+f)/2;if(b>=v&&y<=g)return-1;if(y>=p&&b<=x)return 1;const A=(a+l)/2,w=(c+d)/2;return A-w});const t=document.createDocumentFragment();for(const a of m(this,la))t.append(a.container),this._commentManager?(s=((i=a.extraPopupElement)==null?void 0:i.popup)||a.popup)==null||s.renderCommentButton():a.extraPopupElement&&t.append(a.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),m(this,xm))for(const a of m(this,la))m(this,xm).addPointerInTextLayer(a.contentElement,!1)},XI=function(){var t;if(!m(this,_m))return;const e=this.div;for(const[n,i]of m(this,_m)){const s=e.querySelector(`[data-annotation-id="${n}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:a}=s;a?a.nodeName==="CANVAS"?a.replaceWith(i):a.classList.contains("annotationContent")?a.after(i):a.before(i):s.append(i);const o=m(this,Oh).get(n);o&&(o._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(n,s.id,i),o._hasNoCanvas=!1):o.canvas=i)}m(this,_m).clear()};let KI=FO;const bA=/\r\n?|\n/g;var ua,dx,Em,ca,Bn,KG,XG,YG,PE,mc,RE,kE,QG,QI,JG;const Lr=class Lr extends Fr{constructor(t){super({...t,name:"freeTextEditor"});$(this,Bn);$(this,ua,"");$(this,dx,`${this.id}-editor`);$(this,Em,null);$(this,ca);Re(this,"_colorPicker",null);this.color=t.color||Lr._defaultColor||Fr._defaultLineColor,R(this,ca,t.fontSize||Lr._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const t=Lr.prototype,n=a=>a.isEmpty(),i=op.TRANSLATE_SMALL,s=op.TRANSLATE_BIG;return St(this,"_keyboardManager",new i_([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}]]))}static initialize(t,n){Fr.initialize(t,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Kt.FREETEXT_SIZE:Lr._defaultFontSize=n;break;case Kt.FREETEXT_COLOR:Lr._defaultColor=n;break}}updateParams(t,n){switch(t){case Kt.FREETEXT_SIZE:j(this,Bn,KG).call(this,n);break;case Kt.FREETEXT_COLOR:j(this,Bn,XG).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Kt.FREETEXT_SIZE,Lr._defaultFontSize],[Kt.FREETEXT_COLOR,Lr._defaultColor||Fr._defaultLineColor]]}get propertiesToUpdate(){return[[Kt.FREETEXT_SIZE,m(this,ca)],[Kt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new QS(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Kt.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-Lr._internalPadding*t,-(Lr._internalPadding+m(this,ca))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),R(this,Em,new AbortController);const t=this._uiManager.combinedSignal(m(this,Em));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",m(this,dx)),this._isDraggable=!0,(t=m(this,Em))==null||t.abort(),R(this,Em,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=m(this,ua),n=R(this,ua,j(this,Bn,YG).call(this).trimEnd());if(t===n)return;const i=s=>{if(R(this,ua,s),!s){this.remove();return}j(this,Bn,kE).call(this),this._uiManager.rebuild(this),j(this,Bn,PE).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(t)},mustExec:!1}),j(this,Bn,PE).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Lr._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",m(this,dx)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${m(this,ca)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[c,h]=this.pageDimensions,[d,f]=this.pageTranslation;let p,g;switch(this.rotation){case 0:p=t+(o[0]-d)/c,g=n+this.height-(o[1]-f)/h;break;case 90:p=t+(o[0]-d)/c,g=n-(o[1]-f)/h,[l,u]=[u,-l];break;case 180:p=t-this.width+(o[0]-d)/c,g=n-(o[1]-f)/h,[l,u]=[-l,-u];break;case 270:p=t+(o[0]-d-this.height*h)/c,g=n+(o[1]-f-this.width*c)/h,[l,u]=[-u,l];break}this.setAt(p*s,g*a,l,u)}else this._moveAfterPaste(t,n);j(this,Bn,kE).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var p,g,b;const n=t.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const s=j(p=Lr,mc,QI).call(p,n.getData("text")||"").replaceAll(bA,`
`);if(!s)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!s.includes(`
`)){o.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:u}=o,c=[],h=[];if(l.nodeType===Node.TEXT_NODE){const v=l.parentElement;if(h.push(l.nodeValue.slice(u).replaceAll(bA,"")),v!==this.editorDiv){let x=c;for(const y of this.editorDiv.childNodes){if(y===v){x=h;continue}x.push(j(g=Lr,mc,RE).call(g,y))}}c.push(l.nodeValue.slice(0,u).replaceAll(bA,""))}else if(l===this.editorDiv){let v=c,x=0;for(const y of this.editorDiv.childNodes)x++===u&&(v=h),v.push(j(b=Lr,mc,RE).call(b,y))}R(this,ua,`${c.join(`
`)}${s}${h.join(`
`)}`),j(this,Bn,kE).call(this);const d=new Range;let f=Math.sumPrecise(c.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const x=v.nodeValue.length;if(f<=x){d.setStart(v,f),d.setEnd(v,f);break}f-=x}a.removeAllRanges(),a.addRange(d)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Lr._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,i){var o;let s=null;if(t instanceof qG){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:c,rotation:h,id:d,popupRef:f,richText:p,contentsObj:g,creationDate:b,modificationDate:v},textContent:x,textPosition:y,parent:{page:{pageNumber:A}}}=t;if(!x||x.length===0)return null;s=t={annotationType:Dt.FREETEXT,color:Array.from(u),fontSize:l,value:x.join(`
`),position:y,pageIndex:A-1,rect:c.slice(0),rotation:h,annotationElementId:d,id:d,deleted:!1,popupRef:f,comment:(g==null?void 0:g.str)||null,richText:p,creationDate:b,modificationDate:v}}const a=await super.deserialize(t,n,i);return R(a,ca,t.fontSize),a.color=et.makeHexColor(...t.color),R(a,ua,j(o=Lr,mc,QI).call(o,t.value)),a._initialData=s,t.comment&&a.setCommentData(t),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Fr._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:n,fontSize:m(this,ca),value:j(this,Bn,QG).call(this)});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!j(this,Bn,JG).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(!n)return null;const{style:i}=n;i.fontSize=`calc(${m(this,ca)}px * var(--total-scale-factor))`,i.color=this.color,n.replaceChildren();for(const s of m(this,ua).split(`
`)){const a=document.createElement("div");a.append(s?document.createTextNode(s):document.createElement("br")),n.append(a)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:m(this,ua)}}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};ua=new WeakMap,dx=new WeakMap,Em=new WeakMap,ca=new WeakMap,Bn=new WeakSet,KG=function(t){const n=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-m(this,ca))*this.parentScale),R(this,ca,s),j(this,Bn,PE).call(this)},i=m(this,ca);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Kt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},XG=function(t){const n=s=>{this.color=s,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Kt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},YG=function(){var i;const t=[];this.editorDiv.normalize();let n=null;for(const s of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(j(i=Lr,mc,RE).call(i,s)),n=s);return t.join(`
`)},PE=function(){const[t,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:s,div:a}=this,o=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",s.div.append(this.div),i=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/n):(this.width=i.height/t,this.height=i.width/n),this.fixAndSetPosition()},mc=new WeakSet,RE=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(bA,"")},kE=function(){if(this.editorDiv.replaceChildren(),!!m(this,ua))for(const t of m(this,ua).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},QG=function(){return m(this,ua).replaceAll(""," ")},QI=function(t){return t.replaceAll(" ","")},JG=function(t){const{value:n,fontSize:i,color:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==i||t.color.some((o,l)=>o!==s[l])||t.pageIndex!==a},$(Lr,mc),Re(Lr,"_freeTextDefaultContent",""),Re(Lr,"_internalPadding",0),Re(Lr,"_defaultColor",null),Re(Lr,"_defaultFontSize",10),Re(Lr,"_type","freetext"),Re(Lr,"_editorType",Dt.FREETEXT);let YI=Lr;class Ye{toSVGPath(){Dr("Abstract method `toSVGPath` must be implemented.")}get box(){Dr("Abstract getter `box` must be implemented.")}serialize(e,t){Dr("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,s,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o]*i,a[o+1]=n+e[o+1]*s;return a}static _rescaleAndSwap(e,t,n,i,s,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o+1]*i,a[o+1]=n+e[o]*s;return a}static _translate(e,t,n,i){i||(i=new Float32Array(e.length));for(let s=0,a=e.length;s<a;s+=2)i[s]=t+e[s],i[s+1]=n+e[s+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,i,s){switch(s){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,s,a){return[(e+5*n)/6,(t+5*i)/6,(5*n+s)/6,(5*i+a)/6,(n+s)/2,(i+a)/2]}}Re(Ye,"PRECISION",1e-4);var ha,Oo,Xv,Yv,Pl,Vt,Sm,Tm,fx,mx,Qv,Jv,Bh,px,JT,ZT,Wn,bb,ZG,eW,tW,rW,nW,iW;const yu=class yu{constructor({x:e,y:t},n,i,s,a,o=0){$(this,Wn);$(this,ha);$(this,Oo,[]);$(this,Xv);$(this,Yv);$(this,Pl,[]);$(this,Vt,new Float32Array(18));$(this,Sm);$(this,Tm);$(this,fx);$(this,mx);$(this,Qv);$(this,Jv);$(this,Bh,[]);R(this,ha,n),R(this,Jv,s*i),R(this,Yv,a),m(this,Vt).set([NaN,NaN,NaN,NaN,e,t],6),R(this,Xv,o),R(this,mx,m(yu,px)*i),R(this,fx,m(yu,ZT)*i),R(this,Qv,i),m(this,Bh).push(e,t)}isEmpty(){return isNaN(m(this,Vt)[8])}add({x:e,y:t}){var C;R(this,Sm,e),R(this,Tm,t);const[n,i,s,a]=m(this,ha);let[o,l,u,c]=m(this,Vt).subarray(8,12);const h=e-u,d=t-c,f=Math.hypot(h,d);if(f<m(this,fx))return!1;const p=f-m(this,mx),g=p/f,b=g*h,v=g*d;let x=o,y=l;o=u,l=c,u+=b,c+=v,(C=m(this,Bh))==null||C.push(e,t);const A=-v/p,w=b/p,_=A*m(this,Jv),S=w*m(this,Jv);return m(this,Vt).set(m(this,Vt).subarray(2,8),0),m(this,Vt).set([u+_,c+S],4),m(this,Vt).set(m(this,Vt).subarray(14,18),12),m(this,Vt).set([u-_,c-S],16),isNaN(m(this,Vt)[6])?(m(this,Pl).length===0&&(m(this,Vt).set([o+_,l+S],2),m(this,Pl).push(NaN,NaN,NaN,NaN,(o+_-n)/s,(l+S-i)/a),m(this,Vt).set([o-_,l-S],14),m(this,Oo).push(NaN,NaN,NaN,NaN,(o-_-n)/s,(l-S-i)/a)),m(this,Vt).set([x,y,o,l,u,c],6),!this.isEmpty()):(m(this,Vt).set([x,y,o,l,u,c],6),Math.abs(Math.atan2(y-l,x-o)-Math.atan2(v,b))<Math.PI/2?([o,l,u,c]=m(this,Vt).subarray(2,6),m(this,Pl).push(NaN,NaN,NaN,NaN,((o+u)/2-n)/s,((l+c)/2-i)/a),[o,l,x,y]=m(this,Vt).subarray(14,18),m(this,Oo).push(NaN,NaN,NaN,NaN,((x+o)/2-n)/s,((y+l)/2-i)/a),!0):([x,y,o,l,u,c]=m(this,Vt).subarray(0,6),m(this,Pl).push(((x+5*o)/6-n)/s,((y+5*l)/6-i)/a,((5*o+u)/6-n)/s,((5*l+c)/6-i)/a,((o+u)/2-n)/s,((l+c)/2-i)/a),[u,c,o,l,x,y]=m(this,Vt).subarray(12,18),m(this,Oo).push(((x+5*o)/6-n)/s,((y+5*l)/6-i)/a,((5*o+u)/6-n)/s,((5*l+c)/6-i)/a,((o+u)/2-n)/s,((l+c)/2-i)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=m(this,Pl),t=m(this,Oo);if(isNaN(m(this,Vt)[6])&&!this.isEmpty())return j(this,Wn,ZG).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);j(this,Wn,tW).call(this,n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return j(this,Wn,eW).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,i,s,a){return new sW(e,t,n,i,s,a)}getOutlines(){var h;const e=m(this,Pl),t=m(this,Oo),n=m(this,Vt),[i,s,a,o]=m(this,ha),l=new Float32Array((((h=m(this,Bh))==null?void 0:h.length)??0)+2);for(let d=0,f=l.length-2;d<f;d+=2)l[d]=(m(this,Bh)[d]-i)/a,l[d+1]=(m(this,Bh)[d+1]-s)/o;if(l[l.length-2]=(m(this,Sm)-i)/a,l[l.length-1]=(m(this,Tm)-s)/o,isNaN(n[6])&&!this.isEmpty())return j(this,Wn,rW).call(this,l);const u=new Float32Array(m(this,Pl).length+24+m(this,Oo).length);let c=e.length;for(let d=0;d<c;d+=2){if(isNaN(e[d])){u[d]=u[d+1]=NaN;continue}u[d]=e[d],u[d+1]=e[d+1]}c=j(this,Wn,iW).call(this,u,c);for(let d=t.length-6;d>=6;d-=6)for(let f=0;f<6;f+=2){if(isNaN(t[d+f])){u[c]=u[c+1]=NaN,c+=2;continue}u[c]=t[d+f],u[c+1]=t[d+f+1],c+=2}return j(this,Wn,nW).call(this,u,c),this.newFreeDrawOutline(u,l,m(this,ha),m(this,Qv),m(this,Xv),m(this,Yv))}};ha=new WeakMap,Oo=new WeakMap,Xv=new WeakMap,Yv=new WeakMap,Pl=new WeakMap,Vt=new WeakMap,Sm=new WeakMap,Tm=new WeakMap,fx=new WeakMap,mx=new WeakMap,Qv=new WeakMap,Jv=new WeakMap,Bh=new WeakMap,px=new WeakMap,JT=new WeakMap,ZT=new WeakMap,Wn=new WeakSet,bb=function(){const e=m(this,Vt).subarray(4,6),t=m(this,Vt).subarray(16,18),[n,i,s,a]=m(this,ha);return[(m(this,Sm)+(e[0]-t[0])/2-n)/s,(m(this,Tm)+(e[1]-t[1])/2-i)/a,(m(this,Sm)+(t[0]-e[0])/2-n)/s,(m(this,Tm)+(t[1]-e[1])/2-i)/a]},ZG=function(){const[e,t,n,i]=m(this,ha),[s,a,o,l]=j(this,Wn,bb).call(this);return`M${(m(this,Vt)[2]-e)/n} ${(m(this,Vt)[3]-t)/i} L${(m(this,Vt)[4]-e)/n} ${(m(this,Vt)[5]-t)/i} L${s} ${a} L${o} ${l} L${(m(this,Vt)[16]-e)/n} ${(m(this,Vt)[17]-t)/i} L${(m(this,Vt)[14]-e)/n} ${(m(this,Vt)[15]-t)/i} Z`},eW=function(e){const t=m(this,Oo);e.push(`L${t[4]} ${t[5]} Z`)},tW=function(e){const[t,n,i,s]=m(this,ha),a=m(this,Vt).subarray(4,6),o=m(this,Vt).subarray(16,18),[l,u,c,h]=j(this,Wn,bb).call(this);e.push(`L${(a[0]-t)/i} ${(a[1]-n)/s} L${l} ${u} L${c} ${h} L${(o[0]-t)/i} ${(o[1]-n)/s}`)},rW=function(e){const t=m(this,Vt),[n,i,s,a]=m(this,ha),[o,l,u,c]=j(this,Wn,bb).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-n)/s,(t[3]-i)/a,NaN,NaN,NaN,NaN,(t[4]-n)/s,(t[5]-i)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,u,c,NaN,NaN,NaN,NaN,(t[16]-n)/s,(t[17]-i)/a,NaN,NaN,NaN,NaN,(t[14]-n)/s,(t[15]-i)/a],0),this.newFreeDrawOutline(h,e,m(this,ha),m(this,Qv),m(this,Xv),m(this,Yv))},nW=function(e,t){const n=m(this,Oo);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},iW=function(e,t){const n=m(this,Vt).subarray(4,6),i=m(this,Vt).subarray(16,18),[s,a,o,l]=m(this,ha),[u,c,h,d]=j(this,Wn,bb).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-s)/o,(n[1]-a)/l,NaN,NaN,NaN,NaN,u,c,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,(i[0]-s)/o,(i[1]-a)/l],t),t+=24},$(yu,px,8),$(yu,JT,2),$(yu,ZT,m(yu,px)+m(yu,JT));let ZS=yu;var Zv,Cm,Wu,gx,da,vx,bn,eC,aW;class sW extends Ye{constructor(t,n,i,s,a,o){super();$(this,eC);$(this,Zv);$(this,Cm,new Float32Array(4));$(this,Wu);$(this,gx);$(this,da);$(this,vx);$(this,bn);R(this,bn,t),R(this,da,n),R(this,Zv,i),R(this,vx,s),R(this,Wu,a),R(this,gx,o),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],j(this,eC,aW).call(this,o);const[l,u,c,h]=m(this,Cm);for(let d=0,f=t.length;d<f;d+=2)t[d]=(t[d]-l)/c,t[d+1]=(t[d+1]-u)/h;for(let d=0,f=n.length;d<f;d+=2)n[d]=(n[d]-l)/c,n[d+1]=(n[d+1]-u)/h}toSVGPath(){const t=[`M${m(this,bn)[4]} ${m(this,bn)[5]}`];for(let n=6,i=m(this,bn).length;n<i;n+=6){if(isNaN(m(this,bn)[n])){t.push(`L${m(this,bn)[n+4]} ${m(this,bn)[n+5]}`);continue}t.push(`C${m(this,bn)[n]} ${m(this,bn)[n+1]} ${m(this,bn)[n+2]} ${m(this,bn)[n+3]} ${m(this,bn)[n+4]} ${m(this,bn)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,i,s],a){const o=i-t,l=s-n;let u,c;switch(a){case 0:u=Ye._rescale(m(this,bn),t,s,o,-l),c=Ye._rescale(m(this,da),t,s,o,-l);break;case 90:u=Ye._rescaleAndSwap(m(this,bn),t,n,o,l),c=Ye._rescaleAndSwap(m(this,da),t,n,o,l);break;case 180:u=Ye._rescale(m(this,bn),i,n,-o,l),c=Ye._rescale(m(this,da),i,n,-o,l);break;case 270:u=Ye._rescaleAndSwap(m(this,bn),i,s,-o,-l),c=Ye._rescaleAndSwap(m(this,da),i,s,-o,-l);break}return{outline:Array.from(u),points:[Array.from(c)]}}get box(){return m(this,Cm)}newOutliner(t,n,i,s,a,o=0){return new ZS(t,n,i,s,a,o)}getNewOutline(t,n){const[i,s,a,o]=m(this,Cm),[l,u,c,h]=m(this,Zv),d=a*c,f=o*h,p=i*c+l,g=s*h+u,b=this.newOutliner({x:m(this,da)[0]*d+p,y:m(this,da)[1]*f+g},m(this,Zv),m(this,vx),t,m(this,gx),n??m(this,Wu));for(let v=2;v<m(this,da).length;v+=2)b.add({x:m(this,da)[v]*d+p,y:m(this,da)[v+1]*f+g});return b.getOutlines()}}Zv=new WeakMap,Cm=new WeakMap,Wu=new WeakMap,gx=new WeakMap,da=new WeakMap,vx=new WeakMap,bn=new WeakMap,eC=new WeakSet,aW=function(t){const n=m(this,bn);let i=n[4],s=n[5];const a=[i,s,i,s];let o=i,l=s,u=i,c=s;const h=t?Math.max:Math.min,d=new Float32Array(4);for(let p=6,g=n.length;p<g;p+=6){const b=n[p+4],v=n[p+5];isNaN(n[p])?(et.pointBoundingBox(b,v,a),l>v?(o=b,l=v):l===v&&(o=h(o,b)),c<v?(u=b,c=v):c===v&&(u=h(u,b))):(d[0]=d[1]=1/0,d[2]=d[3]=-1/0,et.bezierBoundingBox(i,s,...n.slice(p,p+6),d),et.rectBoundingBox(d[0],d[1],d[2],d[3],a),l>d[1]?(o=d[0],l=d[1]):l===d[1]&&(o=h(o,d[0])),c<d[3]?(u=d[2],c=d[3]):c===d[3]&&(u=h(u,d[2]))),i=b,s=v}const f=m(this,Cm);f[0]=a[0]-m(this,Wu),f[1]=a[1]-m(this,Wu),f[2]=a[2]-a[0]+2*m(this,Wu),f[3]=a[3]-a[1]+2*m(this,Wu),this.firstPoint=[o,l],this.lastPoint=[u,c]};var yx,bx,wx,Lh,Bo,Ss,oW,FE,lW,uW,ZI;class JI{constructor(e,t=0,n=0,i=!0){$(this,Ss);$(this,yx);$(this,bx);$(this,wx);$(this,Lh,[]);$(this,Bo,[]);const s=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:g,y:b,width:v,height:x}of e){const y=Math.floor((g-t)/a)*a,A=Math.ceil((g+v+t)/a)*a,w=Math.floor((b-t)/a)*a,_=Math.ceil((b+x+t)/a)*a,S=[y,w,_,!0],E=[A,w,_,!1];m(this,Lh).push(S,E),et.rectBoundingBox(y,w,A,_,s)}const o=s[2]-s[0]+2*n,l=s[3]-s[1]+2*n,u=s[0]-n,c=s[1]-n;let h=i?-1/0:1/0,d=1/0;const f=m(this,Lh).at(i?-1:-2),p=[f[0],f[2]];for(const g of m(this,Lh)){const[b,v,x,y]=g;!y&&i?v<d?(d=v,h=b):v===d&&(h=Math.max(h,b)):y&&!i&&(v<d?(d=v,h=b):v===d&&(h=Math.min(h,b))),g[0]=(b-u)/o,g[1]=(v-c)/l,g[2]=(x-c)/l}R(this,yx,new Float32Array([u,c,o,l])),R(this,bx,[h,d]),R(this,wx,p)}getOutlines(){m(this,Lh).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of m(this,Lh))t[3]?(e.push(...j(this,Ss,ZI).call(this,t)),j(this,Ss,lW).call(this,t)):(j(this,Ss,uW).call(this,t),e.push(...j(this,Ss,ZI).call(this,t)));return j(this,Ss,oW).call(this,e)}}yx=new WeakMap,bx=new WeakMap,wx=new WeakMap,Lh=new WeakMap,Bo=new WeakMap,Ss=new WeakSet,oW=function(e){const t=[],n=new Set;for(const a of e){const[o,l,u]=a;t.push([o,l,a],[o,u,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const l=t[a][2],u=t[a+1][2];l.push(u),u.push(l),n.add(l),n.add(u)}const i=[];let s;for(;n.size>0;){const a=n.values().next().value;let[o,l,u,c,h]=a;n.delete(a);let d=o,f=l;for(s=[o,u],i.push(s);;){let p;if(n.has(c))p=c;else if(n.has(h))p=h;else break;n.delete(p),[o,l,u,c,h]=p,d!==o&&(s.push(d,f,o,f===l?l:u),d=o),f=f===l?u:l}s.push(d,f)}return new Wde(i,m(this,yx),m(this,bx),m(this,wx))},FE=function(e){const t=m(this,Bo);let n=0,i=t.length-1;for(;n<=i;){const s=n+i>>1,a=t[s][0];if(a===e)return s;a<e?n=s+1:i=s-1}return i+1},lW=function([,e,t]){const n=j(this,Ss,FE).call(this,e);m(this,Bo).splice(n,0,[e,t])},uW=function([,e,t]){const n=j(this,Ss,FE).call(this,e);for(let i=n;i<m(this,Bo).length;i++){const[s,a]=m(this,Bo)[i];if(s!==e)break;if(s===e&&a===t){m(this,Bo).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[s,a]=m(this,Bo)[i];if(s!==e)break;if(s===e&&a===t){m(this,Bo).splice(i,1);return}}},ZI=function(e){const[t,n,i]=e,s=[[t,n,i]],a=j(this,Ss,FE).call(this,i);for(let o=0;o<a;o++){const[l,u]=m(this,Bo)[o];for(let c=0,h=s.length;c<h;c++){const[,d,f]=s[c];if(!(u<=d||f<=l)){if(d>=l){if(f>u)s[c][1]=u;else{if(h===1)return[];s.splice(c,1),c--,h--}continue}s[c][2]=l,f>u&&s.push([t,u,f])}}}return s};var xx,e0;class Wde extends Ye{constructor(t,n,i,s){super();$(this,xx);$(this,e0);R(this,e0,t),R(this,xx,n),this.firstPoint=i,this.lastPoint=s}toSVGPath(){const t=[];for(const n of m(this,e0)){let[i,s]=n;t.push(`M${i} ${s}`);for(let a=2;a<n.length;a+=2){const o=n[a],l=n[a+1];o===i?(t.push(`V${l}`),s=l):l===s&&(t.push(`H${o}`),i=o)}t.push("Z")}return t.join(" ")}serialize([t,n,i,s],a){const o=[],l=i-t,u=s-n;for(const c of m(this,e0)){const h=new Array(c.length);for(let d=0;d<c.length;d+=2)h[d]=t+c[d]*l,h[d+1]=s-c[d+1]*u;o.push(h)}return o}get box(){return m(this,xx)}get classNamesForOutlining(){return["highlightOutline"]}}xx=new WeakMap,e0=new WeakMap;class eP extends ZS{newFreeDrawOutline(e,t,n,i,s,a){return new Kde(e,t,n,i,s,a)}}class Kde extends sW{newOutliner(e,t,n,i,s,a=0){return new eP(e,t,n,i,s,a)}}var t0,_x,Ku,Nm,Ax,Bs,Ex,Sx,Dm,fa,ma,xi,r0,n0,Xi,i0,eo,Tx,kt,tP,OE,cW,hW,dW,rP,ff,oo,tg,fW,BE,LE,mW,pW,gW,vW,yW;const ir=class ir extends Fr{constructor(t){super({...t,name:"highlightEditor"});$(this,kt);$(this,t0,null);$(this,_x,0);$(this,Ku);$(this,Nm,null);$(this,Ax,null);$(this,Bs,null);$(this,Ex,null);$(this,Sx,0);$(this,Dm,null);$(this,fa,null);$(this,ma,null);$(this,xi,!1);$(this,r0,null);$(this,n0,null);$(this,Xi,null);$(this,i0,"");$(this,eo);$(this,Tx,"");this.color=t.color||ir._defaultColor,R(this,eo,t.thickness||ir._defaultThickness),this.opacity=t.opacity||ir._defaultOpacity,R(this,Ku,t.boxes||null),R(this,Tx,t.methodOfCreation||""),R(this,i0,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(R(this,xi,!0),j(this,kt,OE).call(this,t),j(this,kt,ff).call(this)):m(this,Ku)&&(R(this,t0,t.anchorNode),R(this,_x,t.anchorOffset),R(this,Ex,t.focusNode),R(this,Sx,t.focusOffset),j(this,kt,tP).call(this),j(this,kt,ff).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=ir.prototype;return St(this,"_keyboardManager",new i_([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:m(this,xi)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:m(this,eo),methodOfCreation:m(this,Tx)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var i;Fr.initialize(t,n),ir._defaultColor||(ir._defaultColor=((i=n.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case Kt.HIGHLIGHT_COLOR:ir._defaultColor=n;break;case Kt.HIGHLIGHT_THICKNESS:ir._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return m(this,n0)}get commentButtonPosition(){return m(this,r0)}updateParams(t,n){switch(t){case Kt.HIGHLIGHT_COLOR:j(this,kt,cW).call(this,n);break;case Kt.HIGHLIGHT_THICKNESS:j(this,kt,hW).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Kt.HIGHLIGHT_COLOR,ir._defaultColor],[Kt.HIGHLIGHT_THICKNESS,ir._defaultThickness]]}get propertiesToUpdate(){return[[Kt.HIGHLIGHT_COLOR,this.color||ir._defaultColor],[Kt.HIGHLIGHT_THICKNESS,m(this,eo)||ir._defaultThickness],[Kt.HIGHLIGHT_FREE,m(this,xi)]]}onUpdatedColor(){var t,n;(t=this.parent)==null||t.drawLayer.updateProperties(m(this,ma),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=m(this,Ax))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",R(this,Ax,new YS({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(j(this,kt,LE).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,j(this,kt,LE).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){j(this,kt,rP).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(j(this,kt,ff).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let n=!1;this.parent&&!t?j(this,kt,rP).call(this):t&&(j(this,kt,ff).call(this,t),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var s,a,o;const{drawLayer:n}=this.parent;let i;m(this,xi)?(t=(t-this.rotation+360)%360,i=j(s=ir,oo,tg).call(s,m(this,fa).box,t)):i=j(a=ir,oo,tg).call(a,[this.x,this.y,this.width,this.height],t),n.updateProperties(m(this,ma),{bbox:i,root:{"data-main-rotation":t}}),n.updateProperties(m(this,Xi),{bbox:j(o=ir,oo,tg).call(o,m(this,Bs).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();m(this,i0)&&(t.setAttribute("aria-label",m(this,i0)),t.setAttribute("role","mark")),m(this,xi)?t.classList.add("free"):this.div.addEventListener("keydown",j(this,kt,fW).bind(this),{signal:this._uiManager._signal});const n=R(this,Dm,document.createElement("div"));return t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=m(this,Nm),this.setDims(),BH(this,m(this,Dm),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(m(this,Xi),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(m(this,Xi),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:j(this,kt,BE).call(this,!0);break;case 1:case 3:j(this,kt,BE).call(this,!1);break}}select(){var t;super.select(),m(this,Xi)&&((t=this.parent)==null||t.drawLayer.updateProperties(m(this,Xi),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),m(this,Xi)&&((t=this.parent)==null||t.drawLayer.updateProperties(m(this,Xi),{rootClass:{selected:!1}}),m(this,xi)||j(this,kt,BE).call(this,!1))}get _mustFixPosition(){return!m(this,xi)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(m(this,ma),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(m(this,Xi),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:i,x:s,y:a}){const{x:o,y:l,width:u,height:c}=i.getBoundingClientRect(),h=new AbortController,d=t.combinedSignal(h),f=p=>{h.abort(),j(this,oo,vW).call(this,t,p)};window.addEventListener("blur",f,{signal:d}),window.addEventListener("pointerup",f,{signal:d}),window.addEventListener("pointerdown",fn,{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",vo,{signal:d}),i.addEventListener("pointermove",j(this,oo,gW).bind(this,t),{signal:d}),this._freeHighlight=new eP({x:s,y:a},[o,l,u,c],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,i){var g,b,v,x;let s=null;if(t instanceof GG){const{data:{quadPoints:y,rect:A,rotation:w,id:_,color:S,opacity:E,popupRef:C,richText:N,contentsObj:D,creationDate:M,modificationDate:I},parent:{page:{pageNumber:U}}}=t;s=t={annotationType:Dt.HIGHLIGHT,color:Array.from(S),opacity:E,quadPoints:y,boxes:null,pageIndex:U-1,rect:A.slice(0),rotation:w,annotationElementId:_,id:_,deleted:!1,popupRef:C,richText:N,comment:(D==null?void 0:D.str)||null,creationDate:M,modificationDate:I}}else if(t instanceof TF){const{data:{inkLists:y,rect:A,rotation:w,id:_,color:S,borderStyle:{rawWidth:E},popupRef:C,richText:N,contentsObj:D,creationDate:M,modificationDate:I},parent:{page:{pageNumber:U}}}=t;s=t={annotationType:Dt.HIGHLIGHT,color:Array.from(S),thickness:E,inkLists:y,boxes:null,pageIndex:U-1,rect:A.slice(0),rotation:w,annotationElementId:_,id:_,deleted:!1,popupRef:C,richText:N,comment:(D==null?void 0:D.str)||null,creationDate:M,modificationDate:I}}const{color:a,quadPoints:o,inkLists:l,opacity:u}=t,c=await super.deserialize(t,n,i);c.color=et.makeHexColor(...a),c.opacity=u||1,l&&R(c,eo,t.thickness),c._initialData=s,t.comment&&c.setCommentData(t);const[h,d]=c.pageDimensions,[f,p]=c.pageTranslation;if(o){const y=R(c,Ku,[]);for(let A=0;A<o.length;A+=8)y.push({x:(o[A]-f)/h,y:1-(o[A+1]-p)/d,width:(o[A+2]-o[A])/h,height:(o[A+1]-o[A+5])/d});j(g=c,kt,tP).call(g),j(b=c,kt,ff).call(b),c.rotate(c.rotation)}else if(l){R(c,xi,!0);const y=l[0],A={x:y[0]-f,y:d-(y[1]-p)},w=new eP(A,[0,0,h,d],1,m(c,eo)/2,!0,.001);for(let E=0,C=y.length;E<C;E+=2)A.x=y[E]-f,A.y=d-(y[E+1]-p),w.add(A);const{id:_,clipPathId:S}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:c.color,"fill-opacity":c._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:w.toSVGPath()}},!0,!0);j(v=c,kt,OE).call(v,{highlightOutlines:w.getOutlines(),highlightId:_,clipPathId:S}),j(x=c,kt,ff).call(x),c.rotate(c.parentRotation)}return c}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=Fr._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:n,opacity:this.opacity,thickness:m(this,eo),quadPoints:j(this,kt,mW).call(this),outlines:j(this,kt,pW).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!j(this,kt,yW).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};t0=new WeakMap,_x=new WeakMap,Ku=new WeakMap,Nm=new WeakMap,Ax=new WeakMap,Bs=new WeakMap,Ex=new WeakMap,Sx=new WeakMap,Dm=new WeakMap,fa=new WeakMap,ma=new WeakMap,xi=new WeakMap,r0=new WeakMap,n0=new WeakMap,Xi=new WeakMap,i0=new WeakMap,eo=new WeakMap,Tx=new WeakMap,kt=new WeakSet,tP=function(){const t=new JI(m(this,Ku),.001);R(this,fa,t.getOutlines()),[this.x,this.y,this.width,this.height]=m(this,fa).box;const n=new JI(m(this,Ku),.0025,.001,this._uiManager.direction==="ltr");R(this,Bs,n.getOutlines());const{firstPoint:i}=m(this,fa);R(this,r0,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);const{lastPoint:s}=m(this,Bs);R(this,n0,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},OE=function({highlightOutlines:t,highlightId:n,clipPathId:i}){var d,f;if(R(this,fa,t),R(this,Bs,t.getNewOutline(m(this,eo)/2+1.5,.0025)),n>=0)R(this,ma,n),R(this,Nm,i),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),R(this,Xi,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:m(this,Bs).box,path:{d:m(this,Bs).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(m(this,ma),{bbox:j(d=ir,oo,tg).call(d,m(this,fa).box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(m(this,Xi),{bbox:j(f=ir,oo,tg).call(f,m(this,Bs).box,p),path:{d:m(this,Bs).toSVGPath()}})}const[a,o,l,u]=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=l,this.height=u;break;case 90:{const[p,g]=this.parentDimensions;this.x=o,this.y=1-a,this.width=l*g/p,this.height=u*p/g;break}case 180:this.x=1-a,this.y=1-o,this.width=l,this.height=u;break;case 270:{const[p,g]=this.parentDimensions;this.x=1-o,this.y=a,this.width=l*g/p,this.height=u*p/g;break}}const{firstPoint:c}=t;R(this,r0,[(c[0]-a)/l,(c[1]-o)/u]);const{lastPoint:h}=m(this,Bs);R(this,n0,[(h[0]-a)/l,(h[1]-o)/u])},cW=function(t){const n=(a,o)=>{this.color=a,this.opacity=o,this.onUpdatedColor()},i=this.color,s=this.opacity;this.addCommands({cmd:n.bind(this,t,ir._defaultOpacity),undo:n.bind(this,i,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Kt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},hW=function(t){const n=m(this,eo),i=s=>{R(this,eo,s),j(this,kt,dW).call(this,s)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Kt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},dW=function(t){m(this,xi)&&(j(this,kt,OE).call(this,{highlightOutlines:m(this,fa).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())},rP=function(){m(this,ma)===null||!this.parent||(this.parent.drawLayer.remove(m(this,ma)),R(this,ma,null),this.parent.drawLayer.remove(m(this,Xi)),R(this,Xi,null))},ff=function(t=this.parent){m(this,ma)===null&&({id:$n(this,ma)._,clipPathId:$n(this,Nm)._}=t.drawLayer.draw({bbox:m(this,fa).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:m(this,xi)},path:{d:m(this,fa).toSVGPath()}},!1,!0),R(this,Xi,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:m(this,xi)},bbox:m(this,Bs).box,path:{d:m(this,Bs).toSVGPath()}},m(this,xi))),m(this,Dm)&&(m(this,Dm).style.clipPath=m(this,Nm)))},oo=new WeakSet,tg=function([t,n,i,s],a){switch(a){case 90:return[1-n-s,t,s,i];case 180:return[1-t-i,1-n-s,i,s];case 270:return[n,1-t-i,s,i]}return[t,n,i,s]},fW=function(t){ir._keyboardManager.exec(this,t)},BE=function(t){if(!m(this,t0))return;const n=window.getSelection();t?n.setPosition(m(this,t0),m(this,_x)):n.setPosition(m(this,Ex),m(this,Sx))},LE=function(){return m(this,xi)?this.rotation:0},mW=function(){if(m(this,xi))return null;const[t,n]=this.pageDimensions,[i,s]=this.pageTranslation,a=m(this,Ku),o=new Float32Array(a.length*8);let l=0;for(const{x:u,y:c,width:h,height:d}of a){const f=u*t+i,p=(1-c)*n+s;o[l]=o[l+4]=f,o[l+1]=o[l+3]=p,o[l+2]=o[l+6]=f+h*t,o[l+5]=o[l+7]=p-d*n,l+=8}return o},pW=function(t){return m(this,fa).serialize(t,j(this,kt,LE).call(this))},gW=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},vW=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},yW=function(t){const{color:n}=this._initialData;return this.hasEditedComment||t.color.some((i,s)=>i!==n[s])},$(ir,oo),Re(ir,"_defaultColor",null),Re(ir,"_defaultOpacity",1),Re(ir,"_defaultThickness",12),Re(ir,"_type","highlight"),Re(ir,"_editorType",Dt.HIGHLIGHT),Re(ir,"_freeHighlightId",-1),Re(ir,"_freeHighlight",null),Re(ir,"_freeHighlightClipId","");let eT=ir;var Mm;class bW{constructor(){$(this,Mm,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){m(this,Mm)[e]=t}toSVGProperties(){const e=m(this,Mm);return R(this,Mm,Object.create(null)),{root:e}}reset(){R(this,Mm,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Dr("Not implemented")}}Mm=new WeakMap;var pa,s0,si,Im,Pm,tr,nP,iP,sP,wb,wW,$E,xb,rg;const jt=class jt extends Fr{constructor(t){super(t);$(this,tr);$(this,pa,null);$(this,s0);Re(this,"_colorPicker",null);Re(this,"_drawId",null);R(this,s0,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(j(this,tr,nP).call(this,t),j(this,tr,wb).call(this))}static _mergeSVGProperties(t,n){const i=new Set(Object.keys(t));for(const[s,a]of Object.entries(n))i.has(s)?Object.assign(t[s],a):t[s]=a;return t}static getDefaultDrawingOptions(t){Dr("Not implemented")}static get typesMap(){Dr("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(m(jt,si).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[i,s]of this.typesMap)t.push([i,n[s]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[i,s]of this.constructor.typesMap)t.push([i,n[s]]);return t}_updateProperty(t,n,i){const s=this._drawingOptions,a=s[n],o=l=>{var c;s.updateProperty(n,l);const u=m(this,pa).updateProperty(n,l);u&&j(this,tr,xb).call(this,u),(c=this.parent)==null||c.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,i),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,jt._mergeSVGProperties(m(this,pa).getPathResizingSVGProperties(j(this,tr,$E).call(this)),{bbox:j(this,tr,rg).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,jt._mergeSVGProperties(m(this,pa).getPathResizedSVGProperties(j(this,tr,$E).call(this)),{bbox:j(this,tr,rg).call(this)}))}_onTranslating(t,n){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:j(this,tr,rg).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,jt._mergeSVGProperties(m(this,pa).getPathTranslatedSVGProperties(j(this,tr,$E).call(this),this.parentDimensions),{bbox:j(this,tr,rg).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,m(this,s0)&&(R(this,s0,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){j(this,tr,sP).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(j(this,tr,wb).call(this),j(this,tr,xb).call(this,m(this,pa).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),j(this,tr,sP).call(this)):t&&(this._uiManager.addShouldRescale(this),j(this,tr,wb).call(this,t),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,jt._mergeSVGProperties({bbox:j(this,tr,rg).call(this)},m(this,pa).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&j(this,tr,xb).call(this,m(this,pa).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const i=super.render();i.classList.add("draw");const s=document.createElement("div");return i.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),i}static createDrawerInstance(t,n,i,s,a){Dr("Not implemented")}static startDrawing(t,n,i,s){var b;const{target:a,offsetX:o,offsetY:l,pointerId:u,pointerType:c}=s;if(qi.isInitializedAndDifferentPointerType(c))return;const{viewport:{rotation:h}}=t,{width:d,height:f}=a.getBoundingClientRect(),p=R(jt,Im,new AbortController),g=t.combinedSignal(p);if(qi.setPointer(c,u),window.addEventListener("pointerup",v=>{qi.isSamePointerIdOrRemove(v.pointerId)&&this._endDraw(v)},{signal:g}),window.addEventListener("pointercancel",v=>{qi.isSamePointerIdOrRemove(v.pointerId)&&this._currentParent.endDrawingSession()},{signal:g}),window.addEventListener("pointerdown",v=>{qi.isSamePointerType(v.pointerType)&&(qi.initializeAndAddPointerId(v.pointerId),m(jt,si).isCancellable()&&(m(jt,si).removeLastElement(),m(jt,si).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",vo,{signal:g}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),a.addEventListener("touchmove",v=>{qi.isSameTimeStamp(v.timeStamp)&&fn(v)},{signal:g}),t.toggleDrawing(),(b=n._editorUndoBar)==null||b.hide(),m(jt,si)){t.drawLayer.updateProperties(this._currentDrawId,m(jt,si).startNew(o,l,d,f,h));return}n.updateUIForDefaultProperties(this),R(jt,si,this.createDrawerInstance(o,l,d,f,h)),R(jt,Pm,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(m(jt,Pm).toSVGProperties(),m(jt,si).defaultSVGProperties),!0,!1)}static _drawMove(t){if(qi.isSameTimeStamp(t.timeStamp),!m(jt,si))return;const{offsetX:n,offsetY:i,pointerId:s}=t;if(qi.isSamePointerId(s)){if(qi.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,m(jt,si).add(n,i)),qi.setTimeStamp(t.timeStamp),fn(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,R(jt,si,null),R(jt,Pm,null),qi.clearPointerType(),qi.clearTimeStamp()),m(jt,Im)&&(m(jt,Im).abort(),R(jt,Im,null),qi.clearPointerIds())}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,m(jt,si).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=m(jt,si),s=this._currentDrawId,a=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(s,i.setLastElement(a))},undo:()=>{n.drawLayer.updateProperties(s,i.removeLastElement())},mustExec:!1,type:Kt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Kt.DRAW_STEP),!m(jt,si).isEmpty()){const{pageDimensions:[i,s],scale:a}=n,o=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:m(jt,si).getOutlines(i*a,s*a,a,this._INNER_MARGIN),drawingOptions:m(jt,Pm),mustBeCommitted:!t});return this._cleanup(!0),o}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,i,s,a,o){Dr("Not implemented")}static async deserialize(t,n,i){var h,d;const{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}=n.viewport,u=this.deserializeDraw(o,l,s,a,this._INNER_MARGIN,t),c=await super.deserialize(t,n,i);return c.createDrawingOptions(t),j(h=c,tr,nP).call(h,{drawOutlines:u}),j(d=c,tr,wb).call(d),c.onScaleChanging(),c.rotate(),c}serializeDraw(t){const[n,i]=this.pageTranslation,[s,a]=this.pageDimensions;return m(this,pa).serialize([n,i,s,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};pa=new WeakMap,s0=new WeakMap,si=new WeakMap,Im=new WeakMap,Pm=new WeakMap,tr=new WeakSet,nP=function({drawOutlines:t,drawId:n,drawingOptions:i}){R(this,pa,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=j(this,tr,iP).call(this,t,this.parent),j(this,tr,xb).call(this,t.box)},iP=function(t,n){const{id:i}=n.drawLayer.draw(jt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},sP=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},wb=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=j(this,tr,iP).call(this,m(this,pa),t)}},wW=function([t,n,i,s]){const{parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[n,1-t,i*(o/a),s*(a/o)];case 180:return[1-t,1-n,i,s];case 270:return[1-n,t,i*(o/a),s*(a/o)];default:return[t,n,i,s]}},$E=function(){const{x:t,y:n,width:i,height:s,parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[1-n,t,i*(a/o),s*(o/a)];case 180:return[1-t,1-n,i,s];case 270:return[n,1-t,i*(a/o),s*(o/a)];default:return[t,n,i,s]}},xb=function(t){[this.x,this.y,this.width,this.height]=j(this,tr,wW).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},rg=function(){const{x:t,y:n,width:i,height:s,rotation:a,parentRotation:o,parentDimensions:[l,u]}=this;switch((a*4+o)/90){case 1:return[1-n-s,t,s,i];case 2:return[1-t-i,1-n-s,i,s];case 3:return[n,1-t-i,s,i];case 4:return[t,n-i*(l/u),s*(u/l),i*(l/u)];case 5:return[1-n,t,i*(l/u),s*(u/l)];case 6:return[1-t-s*(u/l),1-n,s*(u/l),i*(l/u)];case 7:return[n-i*(l/u),1-t-s*(u/l),i*(l/u),s*(u/l)];case 8:return[t-i,n-s,i,s];case 9:return[1-n,t-i,s,i];case 10:return[1-t,1-n,i,s];case 11:return[n-s,1-t,s,i];case 12:return[t-s*(u/l),n,s*(u/l),i*(l/u)];case 13:return[1-n-i*(l/u),t-s*(u/l),i*(l/u),s*(u/l)];case 14:return[1-t,1-n-i*(l/u),s*(u/l),i*(l/u)];case 15:return[n,1-t,i*(l/u),s*(u/l)];default:return[t,n,i,s]}},Re(jt,"_currentDrawId",-1),Re(jt,"_currentParent",null),$(jt,si,null),$(jt,Im,null),$(jt,Pm,null),Re(jt,"_INNER_MARGIN",3);let tT=jt;var Rl,ai,oi,Rm,a0,cs,_i,to,km,Fm,Om,o0,VE;class Xde{constructor(e,t,n,i,s,a){$(this,o0);$(this,Rl,new Float64Array(6));$(this,ai);$(this,oi);$(this,Rm);$(this,a0);$(this,cs);$(this,_i,"");$(this,to,0);$(this,km,new a_);$(this,Fm);$(this,Om);R(this,Fm,n),R(this,Om,i),R(this,Rm,s),R(this,a0,a),[e,t]=j(this,o0,VE).call(this,e,t);const o=R(this,ai,[NaN,NaN,NaN,NaN,e,t]);R(this,cs,[e,t]),R(this,oi,[{line:o,points:m(this,cs)}]),m(this,Rl).set(o,0)}updateProperty(e,t){e==="stroke-width"&&R(this,a0,t)}isEmpty(){return!m(this,oi)||m(this,oi).length===0}isCancellable(){return m(this,cs).length<=10}add(e,t){[e,t]=j(this,o0,VE).call(this,e,t);const[n,i,s,a]=m(this,Rl).subarray(2,6),o=e-s,l=t-a;return Math.hypot(m(this,Fm)*o,m(this,Om)*l)<=2?null:(m(this,cs).push(e,t),isNaN(n)?(m(this,Rl).set([s,a,e,t],2),m(this,ai).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(m(this,Rl)[0])&&m(this,ai).splice(6,6),m(this,Rl).set([n,i,s,a,e,t],0),m(this,ai).push(...Ye.createBezierPoints(n,i,s,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(m(this,cs).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,s){R(this,Fm,n),R(this,Om,i),R(this,Rm,s),[e,t]=j(this,o0,VE).call(this,e,t);const a=R(this,ai,[NaN,NaN,NaN,NaN,e,t]);R(this,cs,[e,t]);const o=m(this,oi).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),m(this,oi).push({line:a,points:m(this,cs)}),m(this,Rl).set(a,0),R(this,to,0),this.toSVGPath(),null}getLastElement(){return m(this,oi).at(-1)}setLastElement(e){return m(this,oi)?(m(this,oi).push(e),R(this,ai,e.line),R(this,cs,e.points),R(this,to,0),{path:{d:this.toSVGPath()}}):m(this,km).setLastElement(e)}removeLastElement(){if(!m(this,oi))return m(this,km).removeLastElement();m(this,oi).pop(),R(this,_i,"");for(let e=0,t=m(this,oi).length;e<t;e++){const{line:n,points:i}=m(this,oi)[e];R(this,ai,n),R(this,cs,i),R(this,to,0),this.toSVGPath()}return{path:{d:m(this,_i)}}}toSVGPath(){const e=Ye.svgRound(m(this,ai)[4]),t=Ye.svgRound(m(this,ai)[5]);if(m(this,cs).length===2)return R(this,_i,`${m(this,_i)} M ${e} ${t} Z`),m(this,_i);if(m(this,cs).length<=6){const i=m(this,_i).lastIndexOf("M");R(this,_i,`${m(this,_i).slice(0,i)} M ${e} ${t}`),R(this,to,6)}if(m(this,cs).length===4){const i=Ye.svgRound(m(this,ai)[10]),s=Ye.svgRound(m(this,ai)[11]);return R(this,_i,`${m(this,_i)} L ${i} ${s}`),R(this,to,12),m(this,_i)}const n=[];m(this,to)===0&&(n.push(`M ${e} ${t}`),R(this,to,6));for(let i=m(this,to),s=m(this,ai).length;i<s;i+=6){const[a,o,l,u,c,h]=m(this,ai).slice(i,i+6).map(Ye.svgRound);n.push(`C${a} ${o} ${l} ${u} ${c} ${h}`)}return R(this,_i,m(this,_i)+n.join(" ")),R(this,to,m(this,ai).length),m(this,_i)}getOutlines(e,t,n,i){const s=m(this,oi).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),m(this,km).build(m(this,oi),e,t,n,m(this,Rm),m(this,a0),i),R(this,Rl,null),R(this,ai,null),R(this,oi,null),R(this,_i,null),m(this,km)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Rl=new WeakMap,ai=new WeakMap,oi=new WeakMap,Rm=new WeakMap,a0=new WeakMap,cs=new WeakMap,_i=new WeakMap,to=new WeakMap,km=new WeakMap,Fm=new WeakMap,Om=new WeakMap,o0=new WeakSet,VE=function(e,t){return Ye._normalizePoint(e,t,m(this,Fm),m(this,Om),m(this,Rm))};var hs,Cx,Nx,ga,kl,Fl,l0,u0,Bm,Ci,pu,xW,_W,AW;class a_ extends Ye{constructor(){super(...arguments);$(this,Ci);$(this,hs);$(this,Cx,0);$(this,Nx);$(this,ga);$(this,kl);$(this,Fl);$(this,l0);$(this,u0);$(this,Bm)}build(t,n,i,s,a,o,l){R(this,kl,n),R(this,Fl,i),R(this,l0,s),R(this,u0,a),R(this,Bm,o),R(this,Nx,l??0),R(this,ga,t),j(this,Ci,_W).call(this)}get thickness(){return m(this,Bm)}setLastElement(t){return m(this,ga).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return m(this,ga).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of m(this,ga)){if(t.push(`M${Ye.svgRound(n[4])} ${Ye.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${Ye.svgRound(n[10])} ${Ye.svgRound(n[11])}`);continue}for(let i=6,s=n.length;i<s;i+=6){const[a,o,l,u,c,h]=n.subarray(i,i+6).map(Ye.svgRound);t.push(`C${a} ${o} ${l} ${u} ${c} ${h}`)}}return t.join("")}serialize([t,n,i,s],a){const o=[],l=[],[u,c,h,d]=j(this,Ci,xW).call(this);let f,p,g,b,v,x,y,A,w;switch(m(this,u0)){case 0:w=Ye._rescale,f=t,p=n+s,g=i,b=-s,v=t+u*i,x=n+(1-c-d)*s,y=t+(u+h)*i,A=n+(1-c)*s;break;case 90:w=Ye._rescaleAndSwap,f=t,p=n,g=i,b=s,v=t+c*i,x=n+u*s,y=t+(c+d)*i,A=n+(u+h)*s;break;case 180:w=Ye._rescale,f=t+i,p=n,g=-i,b=s,v=t+(1-u-h)*i,x=n+c*s,y=t+(1-u)*i,A=n+(c+d)*s;break;case 270:w=Ye._rescaleAndSwap,f=t+i,p=n+s,g=-i,b=-s,v=t+(1-c-d)*i,x=n+(1-u-h)*s,y=t+(1-c)*i,A=n+(1-u)*s;break}for(const{line:_,points:S}of m(this,ga))o.push(w(_,f,p,g,b,a?new Array(_.length):null)),l.push(w(S,f,p,g,b,a?new Array(S.length):null));return{lines:o,points:l,rect:[v,x,y,A]}}static deserialize(t,n,i,s,a,{paths:{lines:o,points:l},rotation:u,thickness:c}){const h=[];let d,f,p,g,b;switch(u){case 0:b=Ye._rescale,d=-t/i,f=n/s+1,p=1/i,g=-1/s;break;case 90:b=Ye._rescaleAndSwap,d=-n/s,f=-t/i,p=1/s,g=1/i;break;case 180:b=Ye._rescale,d=t/i+1,f=-n/s,p=-1/i,g=1/s;break;case 270:b=Ye._rescaleAndSwap,d=n/s+1,f=t/i+1,p=-1/s,g=-1/i;break}if(!o){o=[];for(const x of l){const y=x.length;if(y===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(y===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}const A=new Float32Array(3*(y-2));o.push(A);let[w,_,S,E]=x.subarray(0,4);A.set([NaN,NaN,NaN,NaN,w,_],0);for(let C=4;C<y;C+=2){const N=x[C],D=x[C+1];A.set(Ye.createBezierPoints(w,_,S,E,N,D),(C-2)*3),[w,_,S,E]=[S,E,N,D]}}}for(let x=0,y=o.length;x<y;x++)h.push({line:b(o[x].map(A=>A??NaN),d,f,p,g),points:b(l[x].map(A=>A??NaN),d,f,p,g)});const v=new this.prototype.constructor;return v.build(h,i,s,1,u,c,a),v}get box(){return m(this,hs)}updateProperty(t,n){return t==="stroke-width"?j(this,Ci,AW).call(this,n):null}updateParentDimensions([t,n],i){const[s,a]=j(this,Ci,pu).call(this);R(this,kl,t),R(this,Fl,n),R(this,l0,i);const[o,l]=j(this,Ci,pu).call(this),u=o-s,c=l-a,h=m(this,hs);return h[0]-=u,h[1]-=c,h[2]+=2*u,h[3]+=2*c,h}updateRotation(t){return R(this,Cx,t),{path:{transform:this.rotationTransform}}}get viewBox(){return m(this,hs).map(Ye.svgRound).join(" ")}get defaultProperties(){const[t,n]=m(this,hs);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ye.svgRound(t)} ${Ye.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=m(this,hs);let i=0,s=0,a=0,o=0,l=0,u=0;switch(m(this,Cx)){case 90:s=n/t,a=-t/n,l=t;break;case 180:i=-1,o=-1,l=t,u=n;break;case 270:s=-n/t,a=t/n,u=n;break;default:return""}return`matrix(${i} ${s} ${a} ${o} ${Ye.svgRound(l)} ${Ye.svgRound(u)})`}getPathResizingSVGProperties([t,n,i,s]){const[a,o]=j(this,Ci,pu).call(this),[l,u,c,h]=m(this,hs);if(Math.abs(c-a)<=Ye.PRECISION||Math.abs(h-o)<=Ye.PRECISION){const b=t+i/2-(l+c/2),v=n+s/2-(u+h/2);return{path:{"transform-origin":`${Ye.svgRound(t)} ${Ye.svgRound(n)}`,transform:`${this.rotationTransform} translate(${b} ${v})`}}}const d=(i-2*a)/(c-2*a),f=(s-2*o)/(h-2*o),p=c/i,g=h/s;return{path:{"transform-origin":`${Ye.svgRound(l)} ${Ye.svgRound(u)}`,transform:`${this.rotationTransform} scale(${p} ${g}) translate(${Ye.svgRound(a)} ${Ye.svgRound(o)}) scale(${d} ${f}) translate(${Ye.svgRound(-a)} ${Ye.svgRound(-o)})`}}}getPathResizedSVGProperties([t,n,i,s]){const[a,o]=j(this,Ci,pu).call(this),l=m(this,hs),[u,c,h,d]=l;if(l[0]=t,l[1]=n,l[2]=i,l[3]=s,Math.abs(h-a)<=Ye.PRECISION||Math.abs(d-o)<=Ye.PRECISION){const v=t+i/2-(u+h/2),x=n+s/2-(c+d/2);for(const{line:y,points:A}of m(this,ga))Ye._translate(y,v,x,y),Ye._translate(A,v,x,A);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ye.svgRound(t)} ${Ye.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const f=(i-2*a)/(h-2*a),p=(s-2*o)/(d-2*o),g=-f*(u+a)+t+a,b=-p*(c+o)+n+o;if(f!==1||p!==1||g!==0||b!==0)for(const{line:v,points:x}of m(this,ga))Ye._rescale(v,g,b,f,p,v),Ye._rescale(x,g,b,f,p,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ye.svgRound(t)} ${Ye.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],i){const[s,a]=i,o=m(this,hs),l=t-o[0],u=n-o[1];if(m(this,kl)===s&&m(this,Fl)===a)for(const{line:c,points:h}of m(this,ga))Ye._translate(c,l,u,c),Ye._translate(h,l,u,h);else{const c=m(this,kl)/s,h=m(this,Fl)/a;R(this,kl,s),R(this,Fl,a);for(const{line:d,points:f}of m(this,ga))Ye._rescale(d,l,u,c,h,d),Ye._rescale(f,l,u,c,h,f);o[2]*=c,o[3]*=h}return o[0]=t,o[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Ye.svgRound(t)} ${Ye.svgRound(n)}`}}}get defaultSVGProperties(){const t=m(this,hs);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Ye.svgRound(t[0])} ${Ye.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}hs=new WeakMap,Cx=new WeakMap,Nx=new WeakMap,ga=new WeakMap,kl=new WeakMap,Fl=new WeakMap,l0=new WeakMap,u0=new WeakMap,Bm=new WeakMap,Ci=new WeakSet,pu=function(t=m(this,Bm)){const n=m(this,Nx)+t/2*m(this,l0);return m(this,u0)%180===0?[n/m(this,kl),n/m(this,Fl)]:[n/m(this,Fl),n/m(this,kl)]},xW=function(){const[t,n,i,s]=m(this,hs),[a,o]=j(this,Ci,pu).call(this,0);return[t+a,n+o,i-2*a,s-2*o]},_W=function(){const t=R(this,hs,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of m(this,ga)){if(s.length<=12){for(let l=4,u=s.length;l<u;l+=6)et.pointBoundingBox(s[l],s[l+1],t);continue}let a=s[4],o=s[5];for(let l=6,u=s.length;l<u;l+=6){const[c,h,d,f,p,g]=s.subarray(l,l+6);et.bezierBoundingBox(a,o,c,h,d,f,p,g,t),a=p,o=g}}const[n,i]=j(this,Ci,pu).call(this);t[0]=ms(t[0]-n,0,1),t[1]=ms(t[1]-i,0,1),t[2]=ms(t[2]+n,0,1),t[3]=ms(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]},AW=function(t){const[n,i]=j(this,Ci,pu).call(this);R(this,Bm,t);const[s,a]=j(this,Ci,pu).call(this),[o,l]=[s-n,a-i],u=m(this,hs);return u[0]-=o,u[1]-=l,u[2]+=2*o,u[3]+=2*l,u};class YC extends bW{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Fr._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new YC(this._viewParameters);return e.updateAll(this),e}}var tC,EW;const Dg=class Dg extends tT{constructor(t){super({...t,name:"inkEditor"});$(this,tC);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){Fr.initialize(t,n),this._defaultDrawingOptions=new YC(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return St(this,"typesMap",new Map([[Kt.INK_THICKNESS,"stroke-width"],[Kt.INK_COLOR,"stroke"],[Kt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,i,s,a){return new Xde(t,n,i,s,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,i,s,a,o){return a_.deserialize(t,n,i,s,a,o)}static async deserialize(t,n,i){let s=null;if(t instanceof TF){const{data:{inkLists:o,rect:l,rotation:u,id:c,color:h,opacity:d,borderStyle:{rawWidth:f},popupRef:p,richText:g,contentsObj:b,creationDate:v,modificationDate:x},parent:{page:{pageNumber:y}}}=t;s=t={annotationType:Dt.INK,color:Array.from(h),thickness:f,opacity:d,paths:{points:o},boxes:null,pageIndex:y-1,rect:l.slice(0),rotation:u,annotationElementId:c,id:c,deleted:!1,popupRef:p,richText:g,comment:(b==null?void 0:b.str)||null,creationDate:v,modificationDate:x}}const a=await super.deserialize(t,n,i);return a._initialData=s,t.comment&&a.setCommentData(t),a}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new QS(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Kt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:i}){this._drawingOptions=Dg.getDefaultDrawingOptions({stroke:et.makeHexColor(...t),"stroke-width":n,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:s,"stroke-opacity":a,"stroke-width":o}}=this,l=Object.assign(super.serialize(t),{color:Fr._colorManager.convert(s),opacity:a,thickness:o,paths:{lines:n,points:i}});return this.addComment(l),t?(l.isCopy=!0,l):this.annotationElementId&&!j(this,tC,EW).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:n,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};tC=new WeakSet,EW=function(t){const{color:n,thickness:i,opacity:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((o,l)=>o!==n[l])||t.thickness!==i||t.opacity!==s||t.pageIndex!==a},Re(Dg,"_type","ink"),Re(Dg,"_editorType",Dt.INK),Re(Dg,"_defaultDrawingOptions",null);let aP=Dg;class oP extends a_{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const wA=8,zy=3;var Lm,or,lP,Lo,SW,TW,uP,UE,CW,NW,DW,cP,hP,MW;class ec{static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:i},s,a,o,l){let u=new OffscreenCanvas(1,1),c=u.getContext("2d",{alpha:!1});const h=200,d=c.font=`${n} ${i} ${h}px ${t}`,{actualBoundingBoxLeft:f,actualBoundingBoxRight:p,actualBoundingBoxAscent:g,actualBoundingBoxDescent:b,fontBoundingBoxAscent:v,fontBoundingBoxDescent:x,width:y}=c.measureText(e),A=1.5,w=Math.ceil(Math.max(Math.abs(f)+Math.abs(p)||0,y)*A),_=Math.ceil(Math.max(Math.abs(g)+Math.abs(b)||h,Math.abs(v)+Math.abs(x)||h)*A);u=new OffscreenCanvas(w,_),c=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),c.font=d,c.filter="grayscale(1)",c.fillStyle="white",c.fillRect(0,0,w,_),c.fillStyle="black",c.fillText(e,w*(A-1)/2,_*(3-A)/2);const S=j(this,or,cP).call(this,c.getImageData(0,0,w,_).data),E=j(this,or,DW).call(this,S),C=j(this,or,hP).call(this,E),N=j(this,or,uP).call(this,S,w,_,C);return this.processDrawnLines({lines:{curves:N,width:w,height:_},pageWidth:s,pageHeight:a,rotation:o,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,n,i,s){const[a,o,l]=j(this,or,MW).call(this,e),[u,c]=j(this,or,NW).call(this,a,o,l,Math.hypot(o,l)*m(this,Lm).sigmaSFactor,m(this,Lm).sigmaR,m(this,Lm).kernelSize),h=j(this,or,hP).call(this,c),d=j(this,or,uP).call(this,u,o,l,h);return this.processDrawnLines({lines:{curves:d,width:o,height:l},pageWidth:t,pageHeight:n,rotation:i,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:s,mustSmooth:a,areContours:o}){i%180!==0&&([t,n]=[n,t]);const{curves:l,width:u,height:c}=e,h=e.thickness??0,d=[],f=Math.min(t/u,n/c),p=f/t,g=f/n,b=[];for(const{points:x}of l){const y=a?j(this,or,CW).call(this,x):x;if(!y)continue;b.push(y);const A=y.length,w=new Float32Array(A),_=new Float32Array(3*(A===2?2:A-2));if(d.push({line:_,points:w}),A===2){w[0]=y[0]*p,w[1]=y[1]*g,_.set([NaN,NaN,NaN,NaN,w[0],w[1]],0);continue}let[S,E,C,N]=y;S*=p,E*=g,C*=p,N*=g,w.set([S,E,C,N],0),_.set([NaN,NaN,NaN,NaN,S,E],0);for(let D=4;D<A;D+=2){const M=w[D]=y[D]*p,I=w[D+1]=y[D+1]*g;_.set(Ye.createBezierPoints(S,E,C,N,M,I),(D-2)*3),[S,E,C,N]=[C,N,M,I]}}if(d.length===0)return null;const v=o?new oP:new a_;return v.build(d,t,n,1,i,o?0:h,s),{outline:v,newCurves:b,areContours:o,thickness:h,width:u,height:c}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:i,height:s}){let a=1/0,o=-1/0,l=0;for(const y of e){l+=y.length;for(let A=2,w=y.length;A<w;A++){const _=y[A]-y[A-2];a=Math.min(a,_),o=Math.max(o,_)}}let u;a>=-128&&o<=127?u=Int8Array:a>=-32768&&o<=32767?u=Int16Array:u=Int32Array;const c=e.length,h=wA+zy*c,d=new Uint32Array(h);let f=0;d[f++]=h*Uint32Array.BYTES_PER_ELEMENT+(l-2*c)*u.BYTES_PER_ELEMENT,d[f++]=0,d[f++]=i,d[f++]=s,d[f++]=t?0:1,d[f++]=Math.max(0,Math.floor(n??0)),d[f++]=c,d[f++]=u.BYTES_PER_ELEMENT;for(const y of e)d[f++]=y.length-2,d[f++]=y[0],d[f++]=y[1];const p=new CompressionStream("deflate-raw"),g=p.writable.getWriter();await g.ready,g.write(d);const b=u.prototype.constructor;for(const y of e){const A=new b(y.length-2);for(let w=2,_=y.length;w<_;w++)A[w-2]=y[w]-y[w-2];g.write(A)}g.close();const v=await new Response(p.readable).arrayBuffer(),x=new Uint8Array(v);return NH(x)}static async decompressSignature(e){try{const t=hhe(e),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),s=i.getWriter();await s.ready,s.write(t).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let a=null,o=0;for await(const y of n)a||(a=new Uint8Array(new Uint32Array(y.buffer,0,4)[0])),a.set(y,o),o+=y.length;const l=new Uint32Array(a.buffer,0,a.length>>2),u=l[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const c=l[2],h=l[3],d=l[4]===0,f=l[5],p=l[6],g=l[7],b=[],v=(wA+zy*p)*Uint32Array.BYTES_PER_ELEMENT;let x;switch(g){case Int8Array.BYTES_PER_ELEMENT:x=new Int8Array(a.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:x=new Int16Array(a.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:x=new Int32Array(a.buffer,v);break}o=0;for(let y=0;y<p;y++){const A=l[zy*y+wA],w=new Float32Array(A+2);b.push(w);for(let _=0;_<zy-1;_++)w[_]=l[zy*y+wA+_+1];for(let _=0;_<A;_++)w[_+2]=w[_]+x[o++]}return{areContours:d,thickness:f,outlines:b,width:c,height:h}}catch(t){return Et(`decompressSignature: ${t}`),null}}}Lm=new WeakMap,or=new WeakSet,lP=function(e,t,n,i){return n-=e,i-=t,n===0?i>0?0:4:n===1?i+6:2-i},Lo=new WeakMap,SW=function(e,t,n,i,s,a,o){const l=j(this,or,lP).call(this,n,i,s,a);for(let u=0;u<8;u++){const c=(-u+l-o+16)%8,h=m(this,Lo)[2*c],d=m(this,Lo)[2*c+1];if(e[(n+h)*t+(i+d)]!==0)return c}return-1},TW=function(e,t,n,i,s,a,o){const l=j(this,or,lP).call(this,n,i,s,a);for(let u=0;u<8;u++){const c=(u+l+o+16)%8,h=m(this,Lo)[2*c],d=m(this,Lo)[2*c+1];if(e[(n+h)*t+(i+d)]!==0)return c}return-1},uP=function(e,t,n,i){const s=e.length,a=new Int32Array(s);for(let c=0;c<s;c++)a[c]=e[c]<=i?1:0;for(let c=1;c<n-1;c++)a[c*t]=a[c*t+t-1]=0;for(let c=0;c<t;c++)a[c]=a[t*n-1-c]=0;let o=1,l;const u=[];for(let c=1;c<n-1;c++){l=1;for(let h=1;h<t-1;h++){const d=c*t+h,f=a[d];if(f===0)continue;let p=c,g=h;if(f===1&&a[d-1]===0)o+=1,g-=1;else if(f>=1&&a[d+1]===0)o+=1,g+=1,f>1&&(l=f);else{f!==1&&(l=Math.abs(f));continue}const b=[h,c],v=g===h+1,x={isHole:v,points:b,id:o,parent:0};u.push(x);let y;for(const D of u)if(D.id===l){y=D;break}y?y.isHole?x.parent=v?y.parent:l:x.parent=v?l:y.parent:x.parent=v?l:0;const A=j(this,or,SW).call(this,a,t,c,h,p,g,0);if(A===-1){a[d]=-o,a[d]!==1&&(l=Math.abs(a[d]));continue}let w=m(this,Lo)[2*A],_=m(this,Lo)[2*A+1];const S=c+w,E=h+_;p=S,g=E;let C=c,N=h;for(;;){const D=j(this,or,TW).call(this,a,t,C,N,p,g,1);w=m(this,Lo)[2*D],_=m(this,Lo)[2*D+1];const M=C+w,I=N+_;b.push(I,M);const U=C*t+N;if(a[U+1]===0?a[U]=-o:a[U]===1&&(a[U]=o),M===c&&I===h&&C===S&&N===E){a[d]!==1&&(l=Math.abs(a[d]));break}else p=C,g=N,C=M,N=I}}}return u},UE=function(e,t,n,i){if(n-t<=4){for(let S=t;S<n-2;S+=2)i.push(e[S],e[S+1]);return}const s=e[t],a=e[t+1],o=e[n-4]-s,l=e[n-3]-a,u=Math.hypot(o,l),c=o/u,h=l/u,d=c*a-h*s,f=l/o,p=1/u,g=Math.atan(f),b=Math.cos(g),v=Math.sin(g),x=p*(Math.abs(b)+Math.abs(v)),y=p*(1-x+x**2),A=Math.max(Math.atan(Math.abs(v+b)*y),Math.atan(Math.abs(v-b)*y));let w=0,_=t;for(let S=t+2;S<n-2;S+=2){const E=Math.abs(d-c*e[S+1]+h*e[S]);E>w&&(_=S,w=E)}w>(u*A)**2?(j(this,or,UE).call(this,e,t,_+2,i),j(this,or,UE).call(this,e,_,n,i)):i.push(s,a)},CW=function(e){const t=[],n=e.length;return j(this,or,UE).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t},NW=function(e,t,n,i,s,a){const o=new Float32Array(a**2),l=-2*i**2,u=a>>1;for(let g=0;g<a;g++){const b=(g-u)**2;for(let v=0;v<a;v++)o[g*a+v]=Math.exp((b+(v-u)**2)/l)}const c=new Float32Array(256),h=-2*s**2;for(let g=0;g<256;g++)c[g]=Math.exp(g**2/h);const d=e.length,f=new Uint8Array(d),p=new Uint32Array(256);for(let g=0;g<n;g++)for(let b=0;b<t;b++){const v=g*t+b,x=e[v];let y=0,A=0;for(let _=0;_<a;_++){const S=g+_-u;if(!(S<0||S>=n))for(let E=0;E<a;E++){const C=b+E-u;if(C<0||C>=t)continue;const N=e[S*t+C],D=o[_*a+E]*c[Math.abs(N-x)];y+=N*D,A+=D}}const w=f[v]=Math.round(y/A);p[w]++}return[f,p]},DW=function(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t},cP=function(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let i=-1/0,s=1/0;for(let o=0,l=n.length;o<l;o++){const u=n[o]=e[o<<2];i=Math.max(i,u),s=Math.min(s,u)}const a=255/(i-s);for(let o=0,l=n.length;o<l;o++)n[o]=(n[o]-s)*a;return n},hP=function(e){let t,n=-1/0,i=-1/0;const s=e.findIndex(l=>l!==0);let a=s,o=s;for(t=s;t<256;t++){const l=e[t];l>n&&(t-a>i&&(i=t-a,o=t-1),n=l,a=t)}for(t=o-1;t>=0&&!(e[t]>e[t+1]);t--);return t},MW=function(e){const t=e,{width:n,height:i}=e,{maxDim:s}=m(this,Lm);let a=n,o=i;if(n>s||i>s){let d=n,f=i,p=Math.log2(Math.max(n,i)/s);const g=Math.floor(p);p=p===g?g-1:g;for(let v=0;v<p;v++){a=Math.ceil(d/2),o=Math.ceil(f/2);const x=new OffscreenCanvas(a,o);x.getContext("2d").drawImage(e,0,0,d,f,0,0,a,o),d=a,f=o,e!==t&&e.close(),e=x.transferToImageBitmap()}const b=Math.min(s/a,s/o);a=Math.round(a*b),o=Math.round(o*b)}const u=new OffscreenCanvas(a,o).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,a,o),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,a,o);const c=u.getImageData(0,0,a,o).data;return[j(this,or,cP).call(this,c),a,o]},$(ec,or),$(ec,Lm,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),$(ec,Lo,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class CF extends bW{constructor(){super(),super.updateProperties({fill:Fr._defaultLineColor,"stroke-width":0})}clone(){const e=new CF;return e.updateAll(this),e}}class NF extends YC{constructor(e){super(e),super.updateProperties({stroke:Fr._defaultLineColor,"stroke-width":1})}clone(){const e=new NF(this._viewParameters);return e.updateAll(this),e}}var $h,Ol,Vh,$m;const Zs=class Zs extends tT{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});$(this,$h,!1);$(this,Ol,null);$(this,Vh,null);$(this,$m,null);this._willKeepAspectRatio=!0,R(this,Vh,t.signatureData||null),R(this,Ol,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){Fr.initialize(t,n),this._defaultDrawingOptions=new CF,this._defaultDrawnSignatureOptions=new NF(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return St(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!m(this,Ol)}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(m(this,Vh)){const{lines:s,mustSmooth:a,areContours:o,description:l,uuid:u,heightInPage:c}=m(this,Vh),{rawDims:{pageWidth:h,pageHeight:d},rotation:f}=this.parent.viewport,p=ec.processDrawnLines({lines:s,pageWidth:h,pageHeight:d,rotation:f,innerMargin:Zs._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(p,c,l,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:m(this,Ol)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){R(this,$m,t),this.addEditToolbar()}getUuid(){return m(this,$m)}get description(){return m(this,Ol)}set description(t){R(this,Ol,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:i,width:s,height:a}=m(this,Vh),o=Math.max(s,a),l=ec.processDrawnLines({lines:{curves:t.map(u=>({points:u})),thickness:i,width:s,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,i,s){const{x:a,y:o}=this,{outline:l}=R(this,Vh,t);R(this,$h,l instanceof oP),this.description=i;let u;m(this,$h)?u=Zs.getDefaultDrawingOptions():(u=Zs._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:u});const[,c]=this.pageDimensions;let h=n/c;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:s}=this.parent.viewport;return ec.process(t,n,i,s,Zs._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:i,pageHeight:s},rotation:a}=this.parent.viewport;return ec.extractContoursFromText(t,n,i,s,a,Zs._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:s}=this.parent.viewport;return ec.processDrawnLines({lines:t,pageWidth:n,pageHeight:i,rotation:s,innerMargin:Zs._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=Zs.getDefaultDrawingOptions():(this._drawingOptions=Zs._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":s}}=this,a=Object.assign(super.serialize(t),{isSignature:!0,areContours:m(this,$h),color:[0,0,0],thickness:m(this,$h)?0:s});return this.addComment(a),t?(a.paths={lines:n,points:i},a.uuid=m(this,$m),a.isCopy=!0):a.lines=n,m(this,Ol)&&(a.accessibilityData={type:"Figure",alt:m(this,Ol)}),a}static deserializeDraw(t,n,i,s,a,o){return o.areContours?oP.deserialize(t,n,i,s,a,o):a_.deserialize(t,n,i,s,a,o)}static async deserialize(t,n,i){var a;const s=await super.deserialize(t,n,i);return R(s,$h,t.areContours),s.description=((a=t.accessibilityData)==null?void 0:a.alt)||"",R(s,$m,t.uuid),s}};$h=new WeakMap,Ol=new WeakMap,Vh=new WeakMap,$m=new WeakMap,Re(Zs,"_type","signature"),Re(Zs,"_editorType",Dt.SIGNATURE),Re(Zs,"_defaultDrawingOptions",null);let dP=Zs;var qr,li,Uh,Xu,zh,c0,Yu,Vm,Bl,va,h0,rr,_b,Ab,zE,jE,qE,mP,HE,IW;class fP extends Fr{constructor(t){super({...t,name:"stampEditor"});$(this,rr);$(this,qr,null);$(this,li,null);$(this,Uh,null);$(this,Xu,null);$(this,zh,null);$(this,c0,"");$(this,Yu,null);$(this,Vm,!1);$(this,Bl,null);$(this,va,!1);$(this,h0,!1);R(this,Xu,t.bitmapUrl),R(this,zh,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){Fr.initialize(t,n)}static isHandlingMimeForPasting(t){return JM.includes(t)}static paste(t,n){n.pasteEditor({mode:Dt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,l=await i.guess({name:"altText",request:{data:s,width:a,height:o,channels:s.length/(a*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),n&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;m(this,li)&&(R(this,qr,null),this._uiManager.imageManager.deleteId(m(this,li)),(t=m(this,Yu))==null||t.remove(),R(this,Yu,null),m(this,Bl)&&(clearTimeout(m(this,Bl)),R(this,Bl,null))),super.remove()}rebuild(){if(!this.parent){m(this,li)&&j(this,rr,zE).call(this);return}super.rebuild(),this.div!==null&&(m(this,li)&&m(this,Yu)===null&&j(this,rr,zE).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(m(this,Uh)||m(this,qr)||m(this,Xu)||m(this,zh)||m(this,li)||m(this,Vm))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),m(this,Vm)||(m(this,qr)?j(this,rr,jE).call(this):j(this,rr,zE).call(this)),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:i,bitmap:s}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(R(this,li,i),s&&R(this,qr,s),R(this,Vm,!1),j(this,rr,jE).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;m(this,Bl)!==null&&clearTimeout(m(this,Bl)),R(this,Bl,setTimeout(()=>{R(this,Bl,null),j(this,rr,mP).call(this)},200))}copyCanvas(t,n,i=!1){t||(t=224);const{width:s,height:a}=m(this,qr),o=new eu;let l=m(this,qr),u=s,c=a,h=null;if(n){if(s>n||a>n){const S=Math.min(n/s,n/a);u=Math.floor(s*S),c=Math.floor(a*S)}h=document.createElement("canvas");const f=h.width=Math.ceil(u*o.sx),p=h.height=Math.ceil(c*o.sy);m(this,va)||(l=j(this,rr,qE).call(this,f,p));const g=h.getContext("2d");g.filter=this._uiManager.hcmFilter;let b="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":vhe.isDarkMode&&(b="#8f8f9d",v="#42414d");const x=15,y=x*o.sx,A=x*o.sy,w=new OffscreenCanvas(y*2,A*2),_=w.getContext("2d");_.fillStyle=b,_.fillRect(0,0,y*2,A*2),_.fillStyle=v,_.fillRect(0,0,y,A),_.fillRect(y,A,y,A),g.fillStyle=g.createPattern(w,"repeat"),g.fillRect(0,0,f,p),g.drawImage(l,0,0,l.width,l.height,0,0,f,p)}let d=null;if(i){let f,p;if(o.symmetric&&l.width<t&&l.height<t)f=l.width,p=l.height;else if(l=m(this,qr),s>t||a>t){const v=Math.min(t/s,t/a);f=Math.floor(s*v),p=Math.floor(a*v),m(this,va)||(l=j(this,rr,qE).call(this,f,p))}const b=new OffscreenCanvas(f,p).getContext("2d",{willReadFrequently:!0});b.drawImage(l,0,0,l.width,l.height,0,0,f,p),d={width:f,height:p,data:b.getImageData(0,0,f,p).data}}return{canvas:h,width:u,height:c,imageData:d}}static async deserialize(t,n,i){var b;let s=null,a=!1;if(t instanceof WG){const{data:{rect:v,rotation:x,id:y,structParent:A,popupRef:w,richText:_,contentsObj:S,creationDate:E,modificationDate:C},container:N,parent:{page:{pageNumber:D}},canvas:M}=t;let I,U;M?(delete t.canvas,{id:I,bitmap:U}=i.imageManager.getFromCanvas(N.id,M),M.remove()):(a=!0,t._hasNoCanvas=!0);const X=((b=await n._structTree.getAriaAttributes(`${wg}${y}`))==null?void 0:b.get("aria-label"))||"";s=t={annotationType:Dt.STAMP,bitmapId:I,bitmap:U,pageIndex:D-1,rect:v.slice(0),rotation:x,annotationElementId:y,id:y,deleted:!1,accessibilityData:{decorative:!1,altText:X},isSvg:!1,structParent:A,popupRef:w,richText:_,comment:(S==null?void 0:S.str)||null,creationDate:E,modificationDate:C}}const o=await super.deserialize(t,n,i),{rect:l,bitmap:u,bitmapUrl:c,bitmapId:h,isSvg:d,accessibilityData:f}=t;a?(i.addMissingCanvas(t.id,o),R(o,Vm,!0)):h&&i.imageManager.isValidId(h)?(R(o,li,h),u&&R(o,qr,u)):R(o,Xu,c),R(o,va,d);const[p,g]=o.pageDimensions;return o.width=(l[2]-l[0])/p,o.height=(l[3]-l[1])/g,f&&(o.altTextData=f),o._initialData=s,t.comment&&o.setCommentData(t),R(o,h0,!!s),o}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(t),{bitmapId:m(this,li),isSvg:m(this,va)});if(this.addComment(i),t)return i.bitmapUrl=j(this,rr,HE).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:s,altText:a}=this.serializeAltText(!1);if(!s&&a&&(i.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const l=j(this,rr,IW).call(this,i);return l.isSame?null:(l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(n===null)return i;n.stamps||(n.stamps=new Map);const o=m(this,va)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(m(this,li)))n.stamps.set(m(this,li),{area:o,serialized:i}),i.bitmap=j(this,rr,HE).call(this,!1);else if(m(this,va)){const l=n.stamps.get(m(this,li));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=j(this,rr,HE).call(this,!1))}return i}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}qr=new WeakMap,li=new WeakMap,Uh=new WeakMap,Xu=new WeakMap,zh=new WeakMap,c0=new WeakMap,Yu=new WeakMap,Vm=new WeakMap,Bl=new WeakMap,va=new WeakMap,h0=new WeakMap,rr=new WeakSet,_b=function(t,n=!1){if(!t){this.remove();return}R(this,qr,t.bitmap),n||(R(this,li,t.id),R(this,va,t.isSvg)),t.file&&R(this,c0,t.file.name),j(this,rr,jE).call(this)},Ab=function(){if(R(this,Uh,null),this._uiManager.enableWaiting(!1),!!m(this,Yu)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&m(this,qr)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&m(this,qr)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},zE=function(){if(m(this,li)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(m(this,li)).then(i=>j(this,rr,_b).call(this,i,!0)).finally(()=>j(this,rr,Ab).call(this));return}if(m(this,Xu)){const i=m(this,Xu);R(this,Xu,null),this._uiManager.enableWaiting(!0),R(this,Uh,this._uiManager.imageManager.getFromUrl(i).then(s=>j(this,rr,_b).call(this,s)).finally(()=>j(this,rr,Ab).call(this)));return}if(m(this,zh)){const i=m(this,zh);R(this,zh,null),this._uiManager.enableWaiting(!0),R(this,Uh,this._uiManager.imageManager.getFromFile(i).then(s=>j(this,rr,_b).call(this,s)).finally(()=>j(this,rr,Ab).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=JM.join(",");const n=this._uiManager._signal;R(this,Uh,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),j(this,rr,_b).call(this,s)}i()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>j(this,rr,Ab).call(this))),t.click()},jE=function(){var u;const{div:t}=this;let{width:n,height:i}=m(this,qr);const[s,a]=this.pageDimensions,o=.75;if(this.width)n=this.width*s,i=this.height*a;else if(n>o*s||i>o*a){const c=Math.min(o*s/n,o*a/i);n*=c,i*=c}this._uiManager.enableWaiting(!1);const l=R(this,Yu,document.createElement("canvas"));l.setAttribute("role","img"),this.addContainer(l),this.width=n/s,this.height=i/a,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),j(this,rr,mP).call(this),m(this,h0)||(this.parent.addUndoableEditor(this),R(this,h0,!0)),this._reportTelemetry({action:"inserted_image"}),m(this,c0)&&this.div.setAttribute("aria-description",m(this,c0)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},qE=function(t,n){const{width:i,height:s}=m(this,qr);let a=i,o=s,l=m(this,qr);for(;a>2*t||o>2*n;){const u=a,c=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*n&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const h=new OffscreenCanvas(a,o);h.getContext("2d").drawImage(l,0,0,u,c,0,0,a,o),l=h.transferToImageBitmap()}return l},mP=function(){const[t,n]=this.parentDimensions,{width:i,height:s}=this,a=new eu,o=Math.ceil(i*t*a.sx),l=Math.ceil(s*n*a.sy),u=m(this,Yu);if(!u||u.width===o&&u.height===l)return;u.width=o,u.height=l;const c=m(this,va)?m(this,qr):j(this,rr,qE).call(this,o,l),h=u.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(c,0,0,c.width,c.height,0,0,o,l)},HE=function(t){if(t){if(m(this,va)){const s=this._uiManager.imageManager.getSvgUrl(m(this,li));if(s)return s}const n=document.createElement("canvas");return{width:n.width,height:n.height}=m(this,qr),n.getContext("2d").drawImage(m(this,qr),0,0),n.toDataURL()}if(m(this,va)){const[n,i]=this.pageDimensions,s=Math.round(this.width*n*Td.PDF_TO_CSS_UNITS),a=Math.round(this.height*i*Td.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(s,a);return o.getContext("2d").drawImage(m(this,qr),0,0,m(this,qr).width,m(this,qr).height,0,0,s,a),o.transferToImageBitmap()}return structuredClone(m(this,qr))},IW=function(t){var o;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,s=t.pageIndex===n,a=(((o=t.accessibilityData)==null?void 0:o.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}},Re(fP,"_type","stamp"),Re(fP,"_editorType",Dt.STAMP);var Um,d0,jh,qh,Qu,Ls,Hh,f0,m0,$o,Ju,ui,Zu,Gh,p0,nt,Wh,Nr,gP,PW,fl,vP,yP,GE;const Co=class Co{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:i,accessibilityManager:s,annotationLayer:a,drawLayer:o,textLayer:l,viewport:u,l10n:c}){$(this,Nr);$(this,Um);$(this,d0,!1);$(this,jh,null);$(this,qh,null);$(this,Qu,null);$(this,Ls,new Map);$(this,Hh,!1);$(this,f0,!1);$(this,m0,!1);$(this,$o,null);$(this,Ju,null);$(this,ui,null);$(this,Zu,null);$(this,Gh,null);$(this,p0,-1);$(this,nt);const h=[...m(Co,Wh).values()];if(!Co._initialized){Co._initialized=!0;for(const d of h)d.initialize(c,e)}e.registerEditorTypes(h),R(this,nt,e),this.pageIndex=t,this.div=n,R(this,Um,s),R(this,jh,a),this.viewport=u,R(this,ui,l),this.drawLayer=o,this._structTree=i,m(this,nt).addLayer(this)}get isEmpty(){return m(this,Ls).size===0}get isInvisible(){return this.isEmpty&&m(this,nt).getMode()===Dt.NONE}updateToolbar(e){m(this,nt).updateToolbar(e)}updateMode(e=m(this,nt).getMode()){switch(j(this,Nr,GE).call(this),e){case Dt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Dt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Dt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Dt.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of m(Co,Wh).values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=m(this,ui))==null?void 0:t.div)}setEditingState(e){m(this,nt).setEditingState(e)}addCommands(e){m(this,nt).addCommands(e)}cleanUndoStack(e){m(this,nt).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=m(this,jh))==null||t.togglePointerEvents(e)}async enable(){var n;R(this,m0,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=m(this,Gh))==null||n.abort(),R(this,Gh,null);const e=new Set;for(const i of m(this,Nr,gP))i.enableEditing(),i.show(!0),i.annotationElementId&&(m(this,nt).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const t=m(this,jh);if(t)for(const i of t.getEditableAnnotations()){if(i.hide(),m(this,nt).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}R(this,m0,!1),m(this,nt)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var i;if(R(this,f0,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),m(this,ui)&&!m(this,Gh)){R(this,Gh,new AbortController);const s=m(this,nt).combinedSignal(m(this,Gh));m(this,ui).div.addEventListener("pointerdown",a=>{const{clientX:l,clientY:u,timeStamp:c}=a,h=m(this,p0);if(c-h>500){R(this,p0,c);return}R(this,p0,-1);const{classList:d}=this.div;d.toggle("getElements",!0);const f=document.elementsFromPoint(l,u);if(d.toggle("getElements",!1),!this.div.contains(f[0]))return;let p;const g=new RegExp(`^${D1}[0-9]+$`);for(const v of f)if(g.test(v.id)){p=v.id;break}if(!p)return;const b=m(this,Ls).get(p);(b==null?void 0:b.annotationElementId)===null&&(a.stopPropagation(),a.preventDefault(),b.dblclick(a))},{signal:s,capture:!0})}const e=m(this,jh),t=[];if(e){const s=new Map,a=new Map;for(const l of m(this,Nr,gP)){if(l.disableEditing(),!l.annotationElementId){t.push(l);continue}if(l.serialize()!==null){s.set(l.annotationElementId,l);continue}else a.set(l.annotationElementId,l);(i=this.getEditableAnnotation(l.annotationElementId))==null||i.show(),l.remove()}const o=e.getEditableAnnotations();for(const l of o){const{id:u}=l.data;if(m(this,nt).isDeletedAnnotationElement(u)){l.updateEdited({deleted:!0});continue}let c=a.get(u);if(c){c.resetAnnotationElement(l),c.show(!1),l.show();continue}c=s.get(u),c&&(m(this,nt).addChangedExistingAnnotation(c),c.renderAnnotationElement(l)&&c.show(!1)),l.show()}}j(this,Nr,GE).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const s of m(Co,Wh).values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e==null||e.updateFakeAnnotations(t),R(this,f0,!1)}getEditableAnnotation(e){var t;return((t=m(this,jh))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){m(this,nt).getActive()!==e&&m(this,nt).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=m(this,ui))!=null&&e.div&&!m(this,Zu)){R(this,Zu,new AbortController);const t=m(this,nt).combinedSignal(m(this,Zu));m(this,ui).div.addEventListener("pointerdown",j(this,Nr,PW).bind(this),{signal:t}),m(this,ui).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=m(this,ui))!=null&&e.div&&m(this,Zu)&&(m(this,Zu).abort(),R(this,Zu,null),m(this,ui).div.classList.remove("highlighting"))}enableClick(){if(m(this,qh))return;R(this,qh,new AbortController);const e=m(this,nt).combinedSignal(m(this,qh));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=m(this,qh))==null||e.abort(),R(this,qh,null)}attach(e){m(this,Ls).set(e.id,e);const{annotationElementId:t}=e;t&&m(this,nt).isDeletedAnnotationElement(t)&&m(this,nt).removeDeletedAnnotationElement(e)}detach(e){var t;m(this,Ls).delete(e.id),(t=m(this,Um))==null||t.removePointerInTextLayer(e.contentDiv),!m(this,f0)&&e.annotationElementId&&m(this,nt).addDeletedAnnotationElement(e)}remove(e){this.detach(e),m(this,nt).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(m(this,nt).addDeletedAnnotationElement(e),Fr.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),m(this,nt).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!m(this,m0)),m(this,nt).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!m(this,Qu)&&(e._focusEventsAllowed=!1,R(this,Qu,setTimeout(()=>{R(this,Qu,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:m(this,nt)._signal}),t.focus())},0))),e._structTreeParentId=(n=m(this,Um))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(const t of m(this,Ls).values())if(t.uid===e)return t;return null}getNextId(){return m(this,nt).getId()}combinedSignal(e){return m(this,nt).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=m(this,Nr,fl))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await m(this,nt).updateMode(e.mode);const{offsetX:n,offsetY:i}=j(this,Nr,yP).call(this),s=this.getNextId(),a=j(this,Nr,vP).call(this,{parent:this,id:s,x:n,y:i,uiManager:m(this,nt),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=m(Co,Wh).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,m(this,nt)))||null}createAndAddNewEditor(e,t,n={}){const i=this.getNextId(),s=j(this,Nr,vP).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:m(this,nt),isCentered:t,...n});return s&&this.add(s),s}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(j(this,Nr,yP).call(this),!0,e)}setSelected(e){m(this,nt).setSelected(e)}toggleSelected(e){m(this,nt).toggleSelected(e)}unselect(e){m(this,nt).unselect(e)}pointerup(e){var i;const{isMac:t}=Ri.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!m(this,Hh)||(R(this,Hh,!1),(i=m(this,Nr,fl))!=null&&i.isDrawer&&m(this,Nr,fl).supportMultipleDrawings))return;if(!m(this,d0)){R(this,d0,!0);return}const n=m(this,nt).getMode();if(n===Dt.STAMP||n===Dt.SIGNATURE){m(this,nt).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(m(this,nt).getMode()===Dt.HIGHLIGHT&&this.enableTextSelection(),m(this,Hh)){R(this,Hh,!1);return}const{isMac:t}=Ri.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(R(this,Hh,!0),(i=m(this,Nr,fl))!=null&&i.isDrawer){this.startDrawingSession(e);return}const n=m(this,nt).getActive();R(this,d0,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),m(this,$o)){m(this,Nr,fl).startDrawing(this,m(this,nt),!1,e);return}m(this,nt).setCurrentDrawingSession(this),R(this,$o,new AbortController);const t=m(this,nt).combinedSignal(m(this,$o));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(R(this,Ju,null),this.commitOrRemove())},{signal:t}),m(this,Nr,fl).startDrawing(this,m(this,nt),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&R(this,Ju,t);return}m(this,Ju)&&setTimeout(()=>{var t;(t=m(this,Ju))==null||t.focus(),R(this,Ju,null)},0)}endDrawingSession(e=!1){return m(this,$o)?(m(this,nt).setCurrentDrawingSession(null),m(this,$o).abort(),R(this,$o,null),R(this,Ju,null),m(this,Nr,fl).endDrawing(e)):null}findNewParent(e,t,n){const i=m(this,nt).findParent(t,n);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return m(this,$o)?(this.endDrawingSession(),!0):!1}onScaleChanging(){m(this,$o)&&m(this,Nr,fl).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=m(this,nt).getActive())==null?void 0:e.parent)===this&&(m(this,nt).commitOrRemove(),m(this,nt).setActiveEditor(null)),m(this,Qu)&&(clearTimeout(m(this,Qu)),R(this,Qu,null));for(const n of m(this,Ls).values())(t=m(this,Um))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,m(this,Ls).clear(),m(this,nt).removeLayer(this)}render({viewport:e}){this.viewport=e,ap(this.div,e);for(const t of m(this,nt).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){m(this,nt).commitOrRemove(),j(this,Nr,GE).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,ap(this.div,{rotation:n}),t!==n)for(const i of m(this,Ls).values())i.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return m(this,nt).viewParameters.realScale}};Um=new WeakMap,d0=new WeakMap,jh=new WeakMap,qh=new WeakMap,Qu=new WeakMap,Ls=new WeakMap,Hh=new WeakMap,f0=new WeakMap,m0=new WeakMap,$o=new WeakMap,Ju=new WeakMap,ui=new WeakMap,Zu=new WeakMap,Gh=new WeakMap,p0=new WeakMap,nt=new WeakMap,Wh=new WeakMap,Nr=new WeakSet,gP=function(){return m(this,Ls).size!==0?m(this,Ls).values():m(this,nt).getEditors(this.pageIndex)},PW=function(e){m(this,nt).unselectAll();const{target:t}=e;if(t===m(this,ui).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&m(this,ui).div.contains(t)){const{isMac:n}=Ri.platform;if(e.button!==0||e.ctrlKey&&n)return;m(this,nt).showAllEditors("highlight",!0,!0),m(this,ui).div.classList.add("free"),this.toggleDrawing(),eT.startHighlighting(this,m(this,nt).direction==="ltr",{target:m(this,ui).div,x:e.x,y:e.y}),m(this,ui).div.addEventListener("pointerup",()=>{m(this,ui).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:m(this,nt)._signal}),e.preventDefault()}},fl=function(){return m(Co,Wh).get(m(this,nt).getMode())},vP=function(e){const t=m(this,Nr,fl);return t?new t.prototype.constructor(e):null},yP=function(){const{x:e,y:t,width:n,height:i}=this.boundingClientRect,s=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+n),l=Math.min(window.innerHeight,t+i),u=(s+o)/2-e,c=(a+l)/2-t,[h,d]=this.viewport.rotation%180===0?[u,c]:[c,u];return{offsetX:h,offsetY:d}},GE=function(){for(const e of m(this,Ls).values())e.isEmpty()&&e.remove()},Re(Co,"_initialized",!1),$(Co,Wh,new Map([YI,aP,fP,eT,dP].map(e=>[e._editorType,e])));let pP=Co;var Vo,ds,zm,Dx,rC,RW,nu,wP,kW,xP;const Un=class Un{constructor({pageIndex:e}){$(this,nu);$(this,Vo,null);$(this,ds,new Map);$(this,zm,new Map);this.pageIndex=e}setParent(e){if(!m(this,Vo)){R(this,Vo,e);return}if(m(this,Vo)!==e){if(m(this,ds).size>0)for(const t of m(this,ds).values())t.remove(),e.append(t);R(this,Vo,e)}}static get _svgFactory(){return St(this,"_svgFactory",new JS)}draw(e,t=!1,n=!1){const i=$n(Un,Dx)._++,s=j(this,nu,wP).call(this),a=Un._svgFactory.createElement("defs");s.append(a);const o=Un._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t&&m(this,zm).set(i,o);const u=n?j(this,nu,kW).call(this,a,l):null,c=Un._svgFactory.createElement("use");return s.append(c),c.setAttribute("href",`#${l}`),this.updateProperties(s,e),m(this,ds).set(i,s),{id:i,clipPathId:`url(#${u})`}}drawOutline(e,t){const n=$n(Un,Dx)._++,i=j(this,nu,wP).call(this),s=Un._svgFactory.createElement("defs");i.append(s);const a=Un._svgFactory.createElement("path");s.append(a);const o=`path_p${this.pageIndex}_${n}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const h=Un._svgFactory.createElement("mask");s.append(h),l=`mask_p${this.pageIndex}_${n}`,h.setAttribute("id",l),h.setAttribute("maskUnits","objectBoundingBox");const d=Un._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const f=Un._svgFactory.createElement("use");h.append(f),f.setAttribute("href",`#${o}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const u=Un._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${o}`),l&&u.setAttribute("mask",`url(#${l})`);const c=u.cloneNode();return i.append(c),u.classList.add("mainOutline"),c.classList.add("secondaryOutline"),this.updateProperties(i,e),m(this,ds).set(n,i),n}finalizeDraw(e,t){m(this,zm).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:n,bbox:i,rootClass:s,path:a}=t,o=typeof e=="number"?m(this,ds).get(e):e;if(o){if(n&&j(this,nu,xP).call(this,o,n),i&&j(l=Un,rC,RW).call(l,o,i),s){const{classList:u}=o;for(const[c,h]of Object.entries(s))u.toggle(c,h)}if(a){const c=o.firstElementChild.firstElementChild;j(this,nu,xP).call(this,c,a)}}}updateParent(e,t){if(t===this)return;const n=m(this,ds).get(e);n&&(m(t,Vo).append(n),m(this,ds).delete(e),m(t,ds).set(e,n))}remove(e){m(this,zm).delete(e),m(this,Vo)!==null&&(m(this,ds).get(e).remove(),m(this,ds).delete(e))}destroy(){R(this,Vo,null);for(const e of m(this,ds).values())e.remove();m(this,ds).clear(),m(this,zm).clear()}};Vo=new WeakMap,ds=new WeakMap,zm=new WeakMap,Dx=new WeakMap,rC=new WeakSet,RW=function(e,[t,n,i,s]){const{style:a}=e;a.top=`${100*n}%`,a.left=`${100*t}%`,a.width=`${100*i}%`,a.height=`${100*s}%`},nu=new WeakSet,wP=function(){const e=Un._svgFactory.create(1,1,!0);return m(this,Vo).append(e),e.setAttribute("aria-hidden",!0),e},kW=function(e,t){const n=Un._svgFactory.createElement("clipPath");e.append(n);const i=`clip_${t}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const s=Un._svgFactory.createElement("use");return n.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),i},xP=function(e,t){for(const[n,i]of Object.entries(t))i===null?e.removeAttribute(n):e.setAttribute(n,i)},$(Un,rC),$(Un,Dx,0);let bP=Un;globalThis._pdfjsTestingUtils={HighlightOutliner:JI};globalThis.pdfjsLib={AbortException:Sd,AnnotationEditorLayer:pP,AnnotationEditorParamsType:Kt,AnnotationEditorType:Dt,AnnotationEditorUIManager:op,AnnotationLayer:KI,AnnotationMode:Jc,AnnotationType:Nn,applyOpacity:bhe,build:Tde,ColorPicker:YS,createValidAbsoluteUrl:EH,CSSConstants:yhe,DOMSVGFactory:JS,DrawLayer:bP,FeatureTest:Ri,fetchData:t_,findContrastColor:whe,getDocument:PG,getFilenameFromUrl:dhe,getPdfFilenameFromUrl:fhe,getRGB:n_,getUuid:CH,getXfaPageViewport:phe,GlobalWorkerOptions:$l,ImageKind:fE,InvalidPDFException:YM,isDataScheme:KC,isPdfFile:xF,isValidExplicitDest:Mhe,MathClamp:ms,noContextMenu:vo,normalizeUnicode:uhe,OPS:M1,OutputScale:eu,PasswordResponses:ehe,PDFDataRangeTransport:RG,PDFDateString:qS,PDFWorker:R1,PermissionFlag:Zce,PixelsPerInch:Td,RenderingCancelledException:wF,renderRichText:MH,ResponseException:jS,setLayerDimensions:ap,shadow:St,SignatureExtractor:ec,stopEvent:fn,SupportedImageMimeTypes:JM,TextLayer:P1,TouchManager:GS,updateUrlHash:SH,Util:et,VerbosityLevel:HC,version:Sde,XfaLayer:DH};$l.workerSrc="/1201-project/pdf.worker.min.js";const Yde="",Qde="https://api-inference.huggingface.co/models/facebook/bart-large-cnn";async function Jde(r){try{const e=await r.arrayBuffer(),t=await PG({data:e}).promise;let n="";const i=Math.min(t.numPages,15);console.log(`PDF  : ${t.numPages},  : ${i}`);for(let s=1;s<=i;s++)try{const o=await(await t.getPage(s)).getTextContent();let l="";for(const u of o.items)u.str&&u.str.trim()&&(l+=u.str+" ");l.trim()&&(n+=l+`
`,console.log(` ${s}   (${l.length})`))}catch(a){console.warn(` ${s}  :`,a);continue}if(!n.trim())throw new Error("PDF    .   PDF  .");return console.log(`  : ${n.length}`),n}catch(e){throw console.error("PDF   :",e),new Error("PDF   : "+e.message)}}async function Zde(r){var e;try{const n=r.substring(0,1024),i=await fetch(Qde,{headers:{Authorization:`Bearer ${Yde}`},method:"POST",body:JSON.stringify({inputs:n})});if(!i.ok)throw new Error(`API : ${i.status}`);const s=await i.json();if(Array.isArray(s)&&((e=s[0])!=null&&e.summary_text))return s[0].summary_text;throw new Error("  ")}catch(t){throw console.error("AI  :",t),t}}function efe(r){const e=r.match(/[^.!?]+[.!?]+/g)||[],t=["","","","","","",""];return e.map((s,a)=>{let o=t.reduce((l,u)=>l+(s.toLowerCase().includes(u)?1:0),0);return o+=1/(a+1),{sentence:s.trim(),score:o}}).sort((s,a)=>a.score-s.score).slice(0,3).map(s=>s.sentence).join(" ")||"  "}async function tfe(r){try{return{summary:await Zde(r),method:"AI"}}catch(e){return console.warn("AI  ,    :",e),{summary:efe(r),method:"Rule-based"}}}var rfe="firebase",nfe="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hl(rfe,nfe,"app");function FW(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ife=FW,OW=new $x("auth","Firebase",FW());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=new Dk("@firebase/auth");function sfe(r,...e){rT.logLevel<=qt.WARN&&rT.warn(`Auth (${gp}): ${r}`,...e)}function WE(r,...e){rT.logLevel<=qt.ERROR&&rT.error(`Auth (${gp}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(r,...e){throw DF(r,...e)}function Yl(r,...e){return DF(r,...e)}function BW(r,e,t){const n={...ife(),[e]:t};return new $x("auth","Firebase",n).create(e,{appName:r.name})}function uc(r){return BW(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function DF(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return OW.create(r,...e)}function ft(r,e,...t){if(!r)throw DF(e,...t)}function nc(r){const e="INTERNAL ASSERTION FAILED: "+r;throw WE(e),new Error(e)}function Sc(r,e){r||nc(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function afe(){return S5()==="http:"||S5()==="https:"}function S5(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ofe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(afe()||Aae()||"connection"in navigator)?navigator.onLine:!0}function lfe(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,t){this.shortDelay=e,this.longDelay=t,Sc(t>e,"Short delay should be less than long delay!"),this.isMobile=wae()||Eae()}get(){return ofe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MF(r,e){Sc(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;nc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;nc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;nc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ufe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cfe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hfe=new o_(3e4,6e4);function $d(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Vd(r,e,t,n,i={}){return $W(r,i,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const o=Vx({key:r.config.apiKey,...a}).slice(1),l=await r._getAdditionalHeaders();l["Content-Type"]="application/json",r.languageCode&&(l["X-Firebase-Locale"]=r.languageCode);const u={method:e,headers:l,...s};return _ae()||(u.referrerPolicy="no-referrer"),r.emulatorConfig&&pp(r.emulatorConfig.host)&&(u.credentials="include"),LW.fetch()(await VW(r,r.config.apiHost,t,o),u)})}async function $W(r,e,t){r._canInitEmulator=!1;const n={...ufe,...e};try{const i=new ffe(r),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw xA(r,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw xA(r,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw xA(r,"email-already-in-use",a);if(l==="USER_DISABLED")throw xA(r,"user-disabled",a);const c=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw BW(r,c,u);Zo(r,c)}}catch(i){if(i instanceof su)throw i;Zo(r,"network-request-failed",{message:String(i)})}}async function l_(r,e,t,n,i={}){const s=await Vd(r,e,t,n,i);return"mfaPendingCredential"in s&&Zo(r,"multi-factor-auth-required",{_serverResponse:s}),s}async function VW(r,e,t,n){const i=`${e}${t}?${n}`,s=r,a=s.config.emulator?MF(r.config,i):`${r.config.apiScheme}://${i}`;return cfe.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function dfe(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ffe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Yl(this.auth,"network-request-failed")),hfe.get())})}}function xA(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const i=Yl(r,e,n);return i.customData._tokenResponse=t,i}function T5(r){return r!==void 0&&r.enterprise!==void 0}class mfe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return dfe(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function pfe(r,e){return Vd(r,"GET","/v2/recaptchaConfig",$d(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gfe(r,e){return Vd(r,"POST","/v1/accounts:delete",e)}async function nT(r,e){return Vd(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vfe(r,e=!1){const t=Tn(r),n=await t.getIdToken(e),i=IF(n);ft(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:n,authTime:Hb(GD(i.auth_time)),issuedAtTime:Hb(GD(i.iat)),expirationTime:Hb(GD(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function GD(r){return Number(r)*1e3}function IF(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return WE("JWT malformed, contained fewer than 3 sections"),null;try{const i=Fj(t);return i?JSON.parse(i):(WE("Failed to decode base64 JWT payload"),null)}catch(i){return WE("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function C5(r){const e=IF(r);return ft(e,"internal-error"),ft(typeof e.exp<"u","internal-error"),ft(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k1(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof su&&yfe(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function yfe({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bfe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hb(this.lastLoginAt),this.creationTime=Hb(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iT(r){var h;const e=r.auth,t=await r.getIdToken(),n=await k1(r,nT(e,{idToken:t}));ft(n==null?void 0:n.users.length,e,"internal-error");const i=n.users[0];r._notifyReloadListener(i);const s=(h=i.providerUserInfo)!=null&&h.length?UW(i.providerUserInfo):[],a=xfe(r.providerData,s),o=r.isAnonymous,l=!(r.email&&i.passwordHash)&&!(a!=null&&a.length),u=o?l:!1,c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new AP(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(r,c)}async function wfe(r){const e=Tn(r);await iT(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xfe(r,e){return[...r.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function UW(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _fe(r,e){const t=await $W(r,{},async()=>{const n=Vx({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=r.config,a=await VW(r,i,"/v1/token",`key=${s}`),o=await r._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return r.emulatorConfig&&pp(r.emulatorConfig.host)&&(l.credentials="include"),LW.fetch()(a,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Afe(r,e){return Vd(r,"POST","/v2/accounts:revokeToken",$d(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ft(e.idToken,"internal-error"),ft(typeof e.idToken<"u","internal-error"),ft(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):C5(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ft(e.length!==0,"internal-error");const t=C5(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ft(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await _fe(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:s}=t,a=new $g;return n&&(ft(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(ft(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(ft(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $g,this.toJSON())}_performRefresh(){return nc("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(r,e){ft(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class qo{constructor({uid:e,auth:t,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new bfe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new AP(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await k1(this,this.stsTokenManager.getToken(this.auth,e));return ft(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return vfe(this,e)}reload(){return wfe(this)}_assign(e){this!==e&&(ft(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new qo({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ft(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await iT(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Aa(this.auth.app))return Promise.reject(uc(this.auth));const e=await this.getIdToken();return await k1(this,gfe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,o=t.tenantId??void 0,l=t._redirectEventId??void 0,u=t.createdAt??void 0,c=t.lastLoginAt??void 0,{uid:h,emailVerified:d,isAnonymous:f,providerData:p,stsTokenManager:g}=t;ft(h&&g,e,"internal-error");const b=$g.fromJSON(this.name,g);ft(typeof h=="string",e,"internal-error"),zc(n,e.name),zc(i,e.name),ft(typeof d=="boolean",e,"internal-error"),ft(typeof f=="boolean",e,"internal-error"),zc(s,e.name),zc(a,e.name),zc(o,e.name),zc(l,e.name),zc(u,e.name),zc(c,e.name);const v=new qo({uid:h,auth:e,email:i,emailVerified:d,displayName:n,isAnonymous:f,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:b,createdAt:u,lastLoginAt:c});return p&&Array.isArray(p)&&(v.providerData=p.map(x=>({...x}))),l&&(v._redirectEventId=l),v}static async _fromIdTokenResponse(e,t,n=!1){const i=new $g;i.updateFromServerResponse(t);const s=new qo({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await iT(s),s}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];ft(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?UW(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new $g;o.updateFromIdToken(n);const l=new qo({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new AP(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5=new Map;function ic(r){Sc(r instanceof Function,"Expected a class definition");let e=N5.get(r);return e?(Sc(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,N5.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zW{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}zW.type="NONE";const D5=zW;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(r,e,t){return`firebase:${r}:${e}:${t}`}class Vg{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=KE(this.userKey,i.apiKey,s),this.fullPersistenceKey=KE("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await nT(this.auth,{idToken:e}).catch(()=>{});return t?qo._fromGetAccountInfoResponse(this.auth,t,e):null}return qo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Vg(ic(D5),e,n);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||ic(D5);const a=KE(n,e.config.apiKey,e.name);let o=null;for(const u of t)try{const c=await u._get(a);if(c){let h;if(typeof c=="string"){const d=await nT(e,{idToken:c}).catch(()=>{});if(!d)break;h=await qo._fromGetAccountInfoResponse(e,d,c)}else h=qo._fromJSON(e,c);u!==s&&(o=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Vg(s,e,n):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new Vg(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GW(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jW(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KW(e))return"Blackberry";if(XW(e))return"Webos";if(qW(e))return"Safari";if((e.includes("chrome/")||HW(e))&&!e.includes("edge/"))return"Chrome";if(WW(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function jW(r=rs()){return/firefox\//i.test(r)}function qW(r=rs()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HW(r=rs()){return/crios\//i.test(r)}function GW(r=rs()){return/iemobile/i.test(r)}function WW(r=rs()){return/android/i.test(r)}function KW(r=rs()){return/blackberry/i.test(r)}function XW(r=rs()){return/webos/i.test(r)}function PF(r=rs()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Efe(r=rs()){var e;return PF(r)&&!!((e=window.navigator)!=null&&e.standalone)}function Sfe(){return Sae()&&document.documentMode===10}function YW(r=rs()){return PF(r)||WW(r)||XW(r)||KW(r)||/windows phone/i.test(r)||GW(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QW(r,e=[]){let t;switch(r){case"Browser":t=M5(rs());break;case"Worker":t=`${M5(rs())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${gp}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tfe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cfe(r,e={}){return Vd(r,"GET","/v2/passwordPolicy",$d(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nfe=6;class Dfe{constructor(e){var n;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Nfe,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mfe{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new I5(this),this.idTokenSubscription=new I5(this),this.beforeStateQueue=new Tfe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OW,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ic(t)),this._initializationPromise=this.queue(async()=>{var n,i,s;if(!this._deleted&&(this.persistenceManager=await Vg.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await nT(this,{idToken:e}),n=await qo._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Aa(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=n==null?void 0:n._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(n=l.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return ft(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await iT(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lfe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Aa(this.app))return Promise.reject(uc(this));const t=e?Tn(e):null;return t&&ft(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ft(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Aa(this.app)?Promise.reject(uc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Aa(this.app)?Promise.reject(uc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ic(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Cfe(this),t=new Dfe(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $x("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await Afe(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ic(e)||this._popupRedirectResolver;ft(t,this,"argument-error"),this.redirectPersistenceManager=await Vg.create(this,[ic(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ft(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,n,i);return()=>{a=!0,l()}}else{const l=e.addObserver(t);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ft(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QW(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var t;if(Aa(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&sfe(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function xp(r){return Tn(r)}class I5{constructor(e){this.auth=e,this.observer=null,this.addObserver=Rae(t=>this.observer=t)}get next(){return ft(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QC={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ife(r){QC=r}function JW(r){return QC.loadJS(r)}function Pfe(){return QC.recaptchaEnterpriseScript}function Rfe(){return QC.gapiScript}function kfe(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Ffe{constructor(){this.enterprise=new Ofe}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ofe{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Bfe="recaptcha-enterprise",ZW="NO_RECAPTCHA";class Lfe{constructor(e){this.type=Bfe,this.auth=xp(e)}async verify(e="verify",t=!1){async function n(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{pfe(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new mfe(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,a(u.siteKey)}}).catch(l=>{o(l)})})}function i(s,a,o){const l=window.grecaptcha;T5(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{a(u)}).catch(()=>{a(ZW)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Ffe().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{n(this.auth).then(o=>{if(!t&&T5(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Pfe();l.length!==0&&(l+=o),JW(l).then(()=>{i(o,s,a)}).catch(u=>{a(u)})}}).catch(o=>{a(o)})})}}async function P5(r,e,t,n=!1,i=!1){const s=new Lfe(r);let a;if(i)a=ZW;else try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const o={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function EP(r,e,t,n,i){var s;if((s=r._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await P5(r,e,t,t==="getOobCode");return n(r,a)}else return n(r,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await P5(r,e,t,t==="getOobCode");return n(r,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $fe(r,e){const t=SC(r,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(rp(s,e??{}))return i;Zo(i,"already-initialized")}return t.initialize({options:e})}function Vfe(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(ic);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Ufe(r,e,t){const n=xp(r);ft(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,s=eK(e),{host:a,port:o}=zfe(e),l=o===null?"":`:${o}`,u={url:`${s}//${a}${l}/`},c=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){ft(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),ft(rp(u,n.config.emulator)&&rp(c,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=c,n.settings.appVerificationDisabledForTesting=!0,pp(a)?(Ck(`${s}//${a}${l}`),Nk("Auth",!0)):jfe()}function eK(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function zfe(r){const e=eK(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:R5(n.substr(s.length+1))}}else{const[s,a]=n.split(":");return{host:s,port:R5(a)}}}function R5(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function jfe(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return nc("not implemented")}_getIdTokenResponse(e){return nc("not implemented")}_linkToIdToken(e,t){return nc("not implemented")}_getReauthenticationResolver(e){return nc("not implemented")}}async function qfe(r,e){return Vd(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hfe(r,e){return l_(r,"POST","/v1/accounts:signInWithPassword",$d(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gfe(r,e){return l_(r,"POST","/v1/accounts:signInWithEmailLink",$d(r,e))}async function Wfe(r,e){return l_(r,"POST","/v1/accounts:signInWithEmailLink",$d(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1 extends RF{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new F1(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new F1(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return EP(e,t,"signInWithPassword",Hfe);case"emailLink":return Gfe(e,{email:this._email,oobCode:this._password});default:Zo(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return EP(e,n,"signUpPassword",qfe);case"emailLink":return Wfe(e,{idToken:t,email:this._email,oobCode:this._password});default:Zo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ug(r,e){return l_(r,"POST","/v1/accounts:signInWithIdp",$d(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kfe="http://localhost";class up extends RF{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new up(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Zo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...s}=t;if(!n||!i)return null;const a=new up(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Ug(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ug(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ug(e,t)}buildRequest(){const e={requestUri:Kfe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Vx(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xfe(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Yfe(r){const e=Qy(Jy(r)).link,t=e?Qy(Jy(e)).deep_link_id:null,n=Qy(Jy(r)).deep_link_id;return(n?Qy(Jy(n)).link:null)||n||t||e||r}class kF{constructor(e){const t=Qy(Jy(e)),n=t.apiKey??null,i=t.oobCode??null,s=Xfe(t.mode??null);ft(n&&i&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Yfe(e);try{return new kF(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(){this.providerId=ty.PROVIDER_ID}static credential(e,t){return F1._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=kF.parseLink(t);return ft(n,"argument-error"),F1._fromEmailAndCode(e,n.code,n.tenantId)}}ty.PROVIDER_ID="password";ty.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ty.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tK{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_ extends tK{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc extends u_{constructor(){super("facebook.com")}static credential(e){return up._fromParams({providerId:Zc.PROVIDER_ID,signInMethod:Zc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zc.credentialFromTaggedObject(e)}static credentialFromError(e){return Zc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zc.credential(e.oauthAccessToken)}catch{return null}}}Zc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh extends u_{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return up._fromParams({providerId:eh.PROVIDER_ID,signInMethod:eh.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return eh.credentialFromTaggedObject(e)}static credentialFromError(e){return eh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return eh.credential(t,n)}catch{return null}}}eh.GOOGLE_SIGN_IN_METHOD="google.com";eh.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th extends u_{constructor(){super("github.com")}static credential(e){return up._fromParams({providerId:th.PROVIDER_ID,signInMethod:th.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return th.credentialFromTaggedObject(e)}static credentialFromError(e){return th.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return th.credential(e.oauthAccessToken)}catch{return null}}}th.GITHUB_SIGN_IN_METHOD="github.com";th.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh extends u_{constructor(){super("twitter.com")}static credential(e,t){return up._fromParams({providerId:rh.PROVIDER_ID,signInMethod:rh.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return rh.credentialFromTaggedObject(e)}static credentialFromError(e){return rh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return rh.credential(t,n)}catch{return null}}}rh.TWITTER_SIGN_IN_METHOD="twitter.com";rh.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qfe(r,e){return l_(r,"POST","/v1/accounts:signUp",$d(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const s=await qo._fromIdTokenResponse(e,n,i),a=k5(n);return new cp({user:s,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=k5(n);return new cp({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function k5(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT extends su{constructor(e,t,n,i){super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,sT.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new sT(e,t,n,i)}}function rK(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?sT._fromErrorAndOperation(r,s,e,n):s})}async function Jfe(r,e,t=!1){const n=await k1(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return cp._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zfe(r,e,t=!1){const{auth:n}=r;if(Aa(n.app))return Promise.reject(uc(n));const i="reauthenticate";try{const s=await k1(r,rK(n,i,e,r),t);ft(s.idToken,n,"internal-error");const a=IF(s.idToken);ft(a,n,"internal-error");const{sub:o}=a;return ft(r.uid===o,n,"user-mismatch"),cp._forOperation(r,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Zo(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nK(r,e,t=!1){if(Aa(r.app))return Promise.reject(uc(r));const n="signIn",i=await rK(r,n,e),s=await cp._fromIdTokenResponse(r,n,i);return t||await r._updateCurrentUser(s.user),s}async function eme(r,e){return nK(xp(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iK(r){const e=xp(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function tme(r,e,t){if(Aa(r.app))return Promise.reject(uc(r));const n=xp(r),a=await EP(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Qfe).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&iK(r),l}),o=await cp._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(o.user),o}function rme(r,e,t){return Aa(r.app)?Promise.reject(uc(r)):eme(Tn(r),ty.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&iK(r),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sK(r,e){return Tn(r).setPersistence(e)}function nme(r,e,t,n){return Tn(r).onIdTokenChanged(e,t,n)}function ime(r,e,t){return Tn(r).beforeAuthStateChanged(e,t)}const aT="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aK{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(aT,"1"),this.storage.removeItem(aT),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sme=1e3,ame=10;class oK extends aK{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YW(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(n);!t&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);Sfe()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,ame):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},sme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}oK.type="LOCAL";const FF=oK;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lK extends aK{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}lK.type="SESSION";const uK=lK;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ome(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const n=new JC(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(a).map(async u=>u(t.origin,s)),l=await ome(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}JC.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OF(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lme{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const u=OF("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(d.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(){return window}function ume(r){Ql().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cK(){return typeof Ql().WorkerGlobalScope<"u"&&typeof Ql().importScripts=="function"}async function cme(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hme(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function dme(){return cK()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hK="firebaseLocalStorageDb",fme=1,oT="firebaseLocalStorage",dK="fbase_key";class c_{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ZC(r,e){return r.transaction([oT],e?"readwrite":"readonly").objectStore(oT)}function mme(){const r=indexedDB.deleteDatabase(hK);return new c_(r).toPromise()}function SP(){const r=indexedDB.open(hK,fme);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(oT,{keyPath:dK})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(oT)?e(n):(n.close(),await mme(),e(await SP()))})})}async function F5(r,e,t){const n=ZC(r,!0).put({[dK]:e,value:t});return new c_(n).toPromise()}async function pme(r,e){const t=ZC(r,!1).get(e),n=await new c_(t).toPromise();return n===void 0?null:n.value}function O5(r,e){const t=ZC(r,!0).delete(e);return new c_(t).toPromise()}const gme=800,vme=3;class fK{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await SP(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>vme)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cK()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=JC._getInstance(dme()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await cme(),!this.activeServiceWorker)return;this.sender=new lme(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hme()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await SP();return await F5(e,aT,"1"),await O5(e,aT),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>F5(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>pme(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>O5(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=ZC(i,!1).getAll();return new c_(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fK.type="LOCAL";const yme=fK;new o_(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bme(r,e){return e?ic(e):(ft(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF extends RF{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ug(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ug(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ug(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wme(r){return nK(r.auth,new BF(r),r.bypassAuthState)}function xme(r){const{auth:e,user:t}=r;return ft(t,e,"internal-error"),Zfe(t,new BF(r),r.bypassAuthState)}async function _me(r){const{auth:e,user:t}=r;return ft(t,e,"internal-error"),Jfe(t,new BF(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mK{constructor(e,t,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wme;case"linkViaPopup":case"linkViaRedirect":return _me;case"reauthViaPopup":case"reauthViaRedirect":return xme;default:Zo(this.auth,"internal-error")}}resolve(e){Sc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ame=new o_(2e3,1e4);class _g extends mK{constructor(e,t,n,i,s){super(e,t,i,s),this.provider=n,this.authWindow=null,this.pollId=null,_g.currentPopupAction&&_g.currentPopupAction.cancel(),_g.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ft(e,this.auth,"internal-error"),e}async onExecution(){Sc(this.filter.length===1,"Popup operations only handle one event");const e=OF();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Yl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Yl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_g.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if((n=(t=this.authWindow)==null?void 0:t.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ame.get())};e()}}_g.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eme="pendingRedirect",XE=new Map;class Sme extends mK{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=XE.get(this.auth._key());if(!e){try{const n=await Tme(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}XE.set(this.auth._key(),e)}return this.bypassAuthState||XE.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Tme(r,e){const t=Dme(e),n=Nme(r);if(!await n._isAvailable())return!1;const i=await n._get(t)==="true";return await n._remove(t),i}function Cme(r,e){XE.set(r._key(),e)}function Nme(r){return ic(r._redirectPersistence)}function Dme(r){return KE(Eme,r.config.apiKey,r.name)}async function Mme(r,e,t=!1){if(Aa(r.app))return Promise.reject(uc(r));const n=xp(r),i=bme(n,e),a=await new Sme(n,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ime=10*60*1e3;class Pme{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Rme(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!pK(e)){const i=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";t.onError(Yl(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ime&&this.cachedEventUids.clear(),this.cachedEventUids.has(B5(e))}saveEventToCache(e){this.cachedEventUids.add(B5(e)),this.lastProcessedEventTime=Date.now()}}function B5(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function pK({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Rme(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pK(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kme(r,e={}){return Vd(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fme=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ome=/^https?/;async function Bme(r){if(r.config.emulator)return;const{authorizedDomains:e}=await kme(r);for(const t of e)try{if(Lme(t))return}catch{}Zo(r,"unauthorized-domain")}function Lme(r){const e=_P(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const a=new URL(r);return a.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===n}if(!Ome.test(t))return!1;if(Fme.test(r))return n===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $me=new o_(3e4,6e4);function L5(){const r=Ql().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function Vme(r){return new Promise((e,t)=>{var i,s,a;function n(){L5(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{L5(),t(Yl(r,"network-request-failed"))},timeout:$me.get()})}if((s=(i=Ql().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((a=Ql().gapi)!=null&&a.load)n();else{const o=kfe("iframefcb");return Ql()[o]=()=>{gapi.load?n():t(Yl(r,"network-request-failed"))},JW(`${Rfe()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw YE=null,e})}let YE=null;function Ume(r){return YE=YE||Vme(r),YE}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zme=new o_(5e3,15e3),jme="__/auth/iframe",qme="emulator/auth/iframe",Hme={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gme=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wme(r){const e=r.config;ft(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?MF(e,qme):`https://${r.config.authDomain}/${jme}`,n={apiKey:e.apiKey,appName:r.name,v:gp},i=Gme.get(r.config.apiHost);i&&(n.eid=i);const s=r._getFrameworks();return s.length&&(n.fw=s.join(",")),`${t}?${Vx(n).slice(1)}`}async function Kme(r){const e=await Ume(r),t=Ql().gapi;return ft(t,r,"internal-error"),e.open({where:document.body,url:Wme(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hme,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const a=Yl(r,"network-request-failed"),o=Ql().setTimeout(()=>{s(a)},zme.get());function l(){Ql().clearTimeout(o),i(n)}n.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xme={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Yme=500,Qme=600,Jme="_blank",Zme="http://localhost";class $5{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function epe(r,e,t,n=Yme,i=Qme){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l={...Xme,width:n.toString(),height:i.toString(),top:s,left:a},u=rs().toLowerCase();t&&(o=HW(u)?Jme:t),jW(u)&&(e=e||Zme,l.scrollbars="yes");const c=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(Efe(u)&&o!=="_self")return tpe(e||"",o),new $5(null);const h=window.open(e||"",o,c);ft(h,r,"popup-blocked");try{h.focus()}catch{}return new $5(h)}function tpe(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rpe="__/auth/handler",npe="emulator/auth/handler",ipe=encodeURIComponent("fac");async function V5(r,e,t,n,i,s){ft(r.config.authDomain,r,"auth-domain-config-required"),ft(r.config.apiKey,r,"invalid-api-key");const a={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:gp,eventId:i};if(e instanceof tK){e.setDefaultLanguage(r.languageCode),a.providerId=e.providerId||"",Pae(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,h]of Object.entries({}))a[c]=h}if(e instanceof u_){const c=e.getScopes().filter(h=>h!=="");c.length>0&&(a.scopes=c.join(","))}r.tenantId&&(a.tid=r.tenantId);const o=a;for(const c of Object.keys(o))o[c]===void 0&&delete o[c];const l=await r._getAppCheckToken(),u=l?`#${ipe}=${encodeURIComponent(l)}`:"";return`${spe(r)}?${Vx(o).slice(1)}${u}`}function spe({config:r}){return r.emulator?MF(r,npe):`https://${r.authDomain}/${rpe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD="webStorageSupport";class ape{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uK,this._completeRedirectFn=Mme,this._overrideRedirectResult=Cme}async _openPopup(e,t,n,i){var a;Sc((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await V5(e,t,n,_P(),i);return epe(e,s,OF())}async _openRedirect(e,t,n,i){await this._originValidation(e);const s=await V5(e,t,n,_P(),i);return ume(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Sc(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Kme(e),n=new Pme(e);return t.register("authEvent",i=>(ft(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(WD,{type:WD},i=>{var a;const s=(a=i==null?void 0:i[0])==null?void 0:a[WD];s!==void 0&&t(!!s),Zo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Bme(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return YW()||qW()||PF()}}const ope=ape;var U5="@firebase/auth",z5="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lpe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ft(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function upe(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cpe(r){np(new yd("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;ft(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:a,authDomain:o,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QW(r)},u=new Mfe(n,i,s,l);return Vfe(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),np(new yd("auth-internal",e=>{const t=xp(e.getProvider("auth").getImmediate());return(n=>new lpe(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hl(U5,z5,upe(r)),Hl(U5,z5,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hpe=5*60,dpe=$j("authIdTokenMaxAge")||hpe;let j5=null;const fpe=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>dpe)return;const i=t==null?void 0:t.token;j5!==i&&(j5=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function mpe(r=Ik()){const e=SC(r,"auth");if(e.isInitialized())return e.getImmediate();const t=$fe(r,{popupRedirectResolver:ope,persistence:[yme,FF,uK]}),n=$j("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const a=fpe(s.toString());ime(t,a,()=>a(t.currentUser)),nme(t,o=>a(o))}}const i=Oj("auth");return i&&Ufe(t,`http://${i}`),t}function ppe(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}Ife({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=i=>{const s=Yl("internal-error");s.customData=i,t(s)},n.type="text/javascript",n.charset="UTF-8",ppe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cpe("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gK="firebasestorage.googleapis.com",gpe="storageBucket",vpe=2*60*1e3,ype=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends su{constructor(e,t,n=0){super(KD(e),`Firebase Storage: ${t} (${KD(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,au.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return KD(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var tu;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(tu||(tu={}));function KD(r){return"storage/"+r}function bpe(){const r="An unknown error occurred, please check the error payload for server response.";return new au(tu.UNKNOWN,r)}function wpe(){return new au(tu.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xpe(){return new au(tu.CANCELED,"User canceled the upload/download.")}function _pe(r){return new au(tu.INVALID_URL,"Invalid URL '"+r+"'.")}function Ape(r){return new au(tu.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function q5(r){return new au(tu.INVALID_ARGUMENT,r)}function vK(){return new au(tu.APP_DELETED,"The Firebase app was deleted.")}function Epe(r){return new au(tu.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Ho.makeFromUrl(e,t)}catch{return new Ho(e,"")}if(n.path==="")return n;throw Ape(e)}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";function s(A){A.path.charAt(A.path.length-1)==="/"&&(A.path_=A.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function u(A){A.path_=decodeURIComponent(A.path)}const c="v[A-Za-z0-9_]+",h=t.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},g=t===gK?"(?:storage.googleapis.com|storage.cloud.google.com)":t,b="([^?#]*)",v=new RegExp(`^https?://${g}/${i}/${b}`,"i"),y=[{regex:o,indices:l,postModify:s},{regex:f,indices:p,postModify:u},{regex:v,indices:{bucket:1,path:2},postModify:u}];for(let A=0;A<y.length;A++){const w=y[A],_=w.regex.exec(e);if(_){const S=_[w.indices.bucket];let E=_[w.indices.path];E||(E=""),n=new Ho(S,E),w.postModify(n);break}}if(n==null)throw _pe(e);return n}}class Spe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tpe(r,e,t){let n=1,i=null,s=null,a=!1,o=0;function l(){return o===2}let u=!1;function c(...b){u||(u=!0,e.apply(null,b))}function h(b){i=setTimeout(()=>{i=null,r(f,l())},b)}function d(){s&&clearTimeout(s)}function f(b,...v){if(u){d();return}if(b){d(),c.call(null,b,...v);return}if(l()||a){d(),c.call(null,b,...v);return}n<64&&(n*=2);let y;o===1?(o=2,y=0):y=(n+Math.random())*1e3,h(y)}let p=!1;function g(b){p||(p=!0,d(),!u&&(i!==null?(b||(o=2),clearTimeout(i),h(0)):b||(o=1)))}return h(0),s=setTimeout(()=>{a=!0,g(!0)},t),g}function Cpe(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Npe(r){return r!==void 0}function H5(r,e,t,n){if(n<e)throw q5(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw q5(`Invalid value for '${r}'. Expected ${t} or less.`)}function Dpe(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const i=e(n)+"="+e(r[n]);t=t+i+"&"}return t=t.slice(0,-1),t}var lT;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(lT||(lT={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mpe(r,e){const t=r>=500&&r<600,i=[408,429].indexOf(r)!==-1,s=e.indexOf(r)!==-1;return t||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ipe{constructor(e,t,n,i,s,a,o,l,u,c,h,d=!0,f=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=h,this.retry=d,this.isUsingEmulator=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,g)=>{this.resolve_=p,this.reject_=g,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new _A(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===lT.NO_ERROR,l=s.getStatus();if(!o||Mpe(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===lT.ABORT;n(!1,new _A(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;n(!0,new _A(u,s))})},t=(n,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());Npe(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=bpe();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(i.canceled){const l=this.appDelete_?vK():xpe();a(l)}else{const l=wpe();a(l)}};this.canceled_?t(!1,new _A(!1,null,!0)):this.backoffId_=Tpe(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Cpe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class _A{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Ppe(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function Rpe(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function kpe(r,e){e&&(r["X-Firebase-GMPID"]=e)}function Fpe(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function Ope(r,e,t,n,i,s,a=!0,o=!1){const l=Dpe(r.urlParams),u=r.url+l,c=Object.assign({},r.headers);return kpe(c,e),Ppe(c,t),Rpe(c,s),Fpe(c,n),new Ipe(u,r.method,c,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,i,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bpe(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function Lpe(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,t){this._service=e,t instanceof Ho?this._location=t:this._location=Ho.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new uT(e,t)}get root(){const e=new Ho(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Lpe(this._location.path)}get storage(){return this._service}get parent(){const e=Bpe(this._location.path);if(e===null)return null;const t=new Ho(this._location.bucket,e);return new uT(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Epe(e)}}function G5(r,e){const t=e==null?void 0:e[gpe];return t==null?null:Ho.makeFromBucketSpec(t,r)}function $pe(r,e,t,n={}){r.host=`${e}:${t}`;const i=pp(e);i&&(Ck(`https://${r.host}/b`),Nk("Storage",!0)),r._isUsingEmulator=!0,r._protocol=i?"https":"http";const{mockUserToken:s}=n;s&&(r._overrideAuthToken=typeof s=="string"?s:Vj(s,r.app.options.projectId))}class Vpe{constructor(e,t,n,i,s,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=gK,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vpe,this._maxUploadRetryTime=ype,this._requests=new Set,i!=null?this._bucket=Ho.makeFromBucketSpec(i,this._host):this._bucket=G5(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ho.makeFromBucketSpec(this._url,e):this._bucket=G5(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){H5("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){H5("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Aa(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new uT(this,e)}_makeRequest(e,t,n,i,s=!0){if(this._deleted)return new Spe(vK());{const a=Ope(e,this._appId,n,i,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const W5="@firebase/storage",K5="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yK="storage";function Upe(r=Ik(),e){r=Tn(r);const n=SC(r,yK).getImmediate({identifier:e}),i=Bj("storage");return i&&zpe(n,...i),n}function zpe(r,e,t,n={}){$pe(r,e,t,n)}function jpe(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),i=r.getProvider("app-check-internal");return new Vpe(t,n,i,e,gp)}function qpe(){np(new yd(yK,jpe,"PUBLIC").setMultipleInstances(!0)),Hl(W5,K5,""),Hl(W5,K5,"esm2020")}qpe();const Hpe={apiKey:"AIzaSyCuCYH38ZqKbtPYPR2ED1nMdD6yBuo1ReA",authDomain:"shop-d542c.firebaseapp.com",projectId:"shop-d542c",storageBucket:"shop-d542c.firebasestorage.app",messagingSenderId:"592347281413",appId:"1:592347281413:web:ed7c8752b195dcbb02846c",measurementId:"G-DFV2PBV8X2"},LF=jj(Hpe),cT=mpe(LF),Qr=$ce(LF);Upe(LF);const Gpe={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},Wpe=15;function Kpe(){const[r,e]=ue.useState(null),[t,n]=ue.useState(!1),[i,s]=ue.useState(null),[a,o]=ue.useState(null),[l,u]=ue.useState(""),[c,h]=ue.useState(""),[d,f]=ue.useState("idle"),[p,g]=ue.useState([]),[b,v]=ue.useState(!0),x=bc();ue.useEffect(()=>{const S=Ta(Qr,"paperSummaries"),E=ey(S,qC("createdAt","desc"),Wce(15)),C=WM(E,N=>{const D=N.docs.map(M=>({id:M.id,...M.data()}));g(D),v(!1)},N=>{console.error("   :",N),v(!1)});return()=>C()},[]);const y=S=>S?S.toDate?S.toDate().toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):new Date(S).toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):" ",A=S=>{var C;const E=(C=S.target.files)==null?void 0:C[0];E&&(E.type==="application/pdf"?(e(E),u(E.name.replace(".pdf","")),o(null)):(o("PDF   ."),e(null)))},w=async()=>{if(!r){o("PDF  .");return}n(!0),o(null),s(null);try{const S=await Jde(r);if(!S||S.trim().length<100)throw new Error("   .  PDF .");const E=await tfe(S);s(E.summary),h(E.method)}catch(S){o(S.message||"    ."),console.error(" :",S)}finally{n(!1)}},_=async()=>{if(!i){o("  .");return}if(!(x!=null&&x.email)){o("  .");return}try{f("loading"),await Jx(Ta(Qr,"paperSummaries"),{title:l||"  ",summary:i,method:c,authorEmail:x.email,authorName:x.username||x.email.split("@")[0],createdAt:In(),publishedAt:new Date().toISOString()}),f("success"),setTimeout(()=>f("idle"),2500)}catch(S){console.error("  :",S),o("    ."),f("error"),setTimeout(()=>f("idle"),3e3)}};return P.jsx("div",{className:"min-h-screen bg-white dark:bg-dark-50 pt-24 pb-12",children:P.jsxs(Qe.div,{className:"max-w-4xl mx-auto px-4",variants:Gpe,initial:"hidden",animate:"visible",children:[P.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"   AI"}),P.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"PDF   AI   ."}),P.jsxs(Qe.div,{className:"bg-gray-50 dark:bg-dark-100 rounded-lg p-8 mb-8 border-2 border-dashed border-blue-400",whileHover:{scale:1.02},children:[P.jsxs("div",{className:"text-center",children:[P.jsx("input",{type:"file",accept:".pdf",onChange:A,className:"hidden",id:"pdf-upload"}),P.jsxs("label",{htmlFor:"pdf-upload",className:"cursor-pointer block",children:[P.jsx("div",{className:"text-6xl mb-4",children:""}),P.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"PDF    "}),P.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["( ",Wpe," )"]})]})]}),r&&P.jsx("div",{className:"mt-6 p-4 bg-blue-100 dark:bg-blue-900/30 rounded-lg border border-blue-400",children:P.jsxs("p",{className:"text-blue-900 dark:text-blue-100",children:[" : ",P.jsx("strong",{children:r.name})]})})]}),P.jsxs("div",{className:"flex gap-4 mb-8",children:[P.jsx(Qe.button,{onClick:w,disabled:!r||t,whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-bold py-3 px-6 rounded-lg transition",children:t?"   ...":" AI "}),P.jsx(Qe.button,{onClick:()=>{e(null),u(""),s(null),o(null)},whileHover:{scale:1.05},className:"bg-gray-400 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition",children:" "})]}),a&&P.jsxs(Qe.div,{className:"bg-red-100 dark:bg-red-900/30 border border-red-400 text-red-700 dark:text-red-200 px-6 py-4 rounded-lg mb-8",initial:{opacity:0},animate:{opacity:1},children:[P.jsx("strong",{children:":"})," ",a]}),i&&P.jsxs(Qe.div,{className:"bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 p-6 rounded-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[P.jsxs("div",{className:"flex items-center mb-4",children:[P.jsx("span",{className:"text-2xl mr-3",children:""}),P.jsxs("div",{children:[P.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:l}),P.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[": ",c==="AI"?" AI  (Hugging Face)":"   "]})]})]}),P.jsx("div",{className:"bg-white dark:bg-dark-100 p-4 rounded-lg",children:P.jsx("p",{className:"text-gray-800 dark:text-gray-200 leading-relaxed",children:i})}),P.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[P.jsx(Qe.button,{onClick:()=>{const S=document.createElement("a");S.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(i)),S.setAttribute("download",`${l}_summary.txt`),S.style.display="none",document.body.appendChild(S),S.click(),document.body.removeChild(S)},whileHover:{scale:1.05},className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded transition text-sm",children:"  "}),P.jsx(Qe.button,{onClick:()=>{navigator.clipboard.writeText(i),alert(" !")},whileHover:{scale:1.05},className:"bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded transition text-sm",children:" "}),P.jsx(Qe.button,{onClick:_,disabled:d==="loading"||!i,whileHover:{scale:i?1.05:1},className:`py-2 px-4 rounded transition text-sm font-semibold ${d==="success"?"bg-emerald-600 text-white":d==="loading"?"bg-gray-400 text-gray-100":"bg-purple-600 hover:bg-purple-700 text-white"}`,children:d==="success"?"  ":d==="loading"?" ...":"  "})]}),!x&&P.jsx("p",{className:"text-xs text-yellow-600 mt-2",children:"     ."})]}),P.jsxs(Qe.div,{className:"mt-12 bg-gray-50 dark:bg-dark-100 rounded-lg p-6 border border-gray-200 dark:border-gray-800",initial:{opacity:0},animate:{opacity:1},children:[P.jsxs("div",{className:"flex items-center justify-between mb-4",children:[P.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"   "}),P.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:" 15 "})]}),b?P.jsx("p",{className:"text-sm text-gray-500",children:"  ..."}):p.length===0?P.jsx("p",{className:"text-sm text-gray-500",children:"   .   !"}):P.jsx("div",{className:"space-y-4",children:p.map(S=>P.jsxs("div",{className:"p-4 rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-dark-200",children:[P.jsxs("div",{className:"flex items-start justify-between gap-4",children:[P.jsxs("div",{children:[P.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:S.title}),P.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[S.authorName||" ","  ",y(S.createdAt||S.publishedAt)]})]}),P.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-200",children:S.method==="AI"?"AI ":"Rule "})]}),P.jsx("p",{className:"mt-3 text-sm text-gray-700 dark:text-gray-200 leading-relaxed whitespace-pre-wrap",children:S.summary})]},S.id))})]}),P.jsxs(Qe.div,{className:"mt-12 bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg border border-blue-200 dark:border-blue-800",initial:{opacity:0},whileInView:{opacity:1},children:[P.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"  "}),P.jsxs("ol",{className:"space-y-2 text-gray-700 dark:text-gray-300",children:[P.jsxs("li",{children:[P.jsx("strong",{children:"1."}),"   PDF  "]}),P.jsxs("li",{children:[P.jsx("strong",{children:"2."}),' "AI "  ']}),P.jsxs("li",{children:[P.jsx("strong",{children:"3."})," AI    "]}),P.jsxs("li",{children:[P.jsx("strong",{children:"4."}),"      "]})]}),P.jsx("div",{className:"mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/30 rounded border border-yellow-200 dark:border-yellow-800",children:P.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[" ",P.jsx("strong",{children:":"})," PDF   5 .       ."]})})]})]})})}function Xpe(){var y;const[r,e]=ue.useState([]),[t,n]=ue.useState(!0),[i,s]=ue.useState(""),[a,o]=ue.useState(null),[l,u]=ue.useState({title:"",category:((y=qp[0])==null?void 0:y.id)??1,content:""}),[c,h]=ue.useState(!1),[d,f]=ue.useState(!1),p=bc(),g=A=>A?typeof A=="string"?A:A.toDate?A.toDate().toLocaleDateString("ko-KR"):A instanceof Date?A.toLocaleDateString("ko-KR"):new Date(A).toLocaleDateString("ko-KR"):"",b=ue.useCallback(async()=>{n(!0),s("");try{const A=ey(Ta(Qr,"forumPosts"),qC("createdAt","desc")),_=(await Qx(A)).docs.map(S=>{var C;const E=S.data();return{id:S.id,...E,createdAt:(C=E.createdAt)!=null&&C.toDate?E.createdAt.toDate():E.createdAt||new Date,replies:E.replies??0}});e(_)}catch(A){console.error("  :",A),s("  .    .")}finally{n(!1)}},[]);ue.useEffect(()=>{b()},[b]);const v=async A=>{var w;if(A.preventDefault(),!l.title.trim()||!l.content.trim()){alert("  .");return}f(!0);try{const _=(p==null?void 0:p.username)||(p==null?void 0:p.email)||" ",S={title:l.title.trim(),content:l.content.trim(),category:Number(l.category),author:_,authorEmail:(p==null?void 0:p.email)||null,replies:0,createdAt:In(),updatedAt:In()},E=await Jx(Ta(Qr,"forumPosts"),S);console.log("   :",E.id);const C={id:E.id,...S,createdAt:new Date};e(N=>[C,...N]),u({title:"",category:((w=qp[0])==null?void 0:w.id)??1,content:""}),h(!1),alert(" .")}catch(_){console.error("   :",_),console.error(" :",_.code),console.error(" :",_.message),alert("  : "+_.message)}finally{f(!1)}},x=a?r.filter(A=>A.category===a):r;return P.jsxs("div",{className:"space-y-8 sm:space-y-12",children:[P.jsxs("div",{children:[P.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),P.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base",children:" ,  ,  ,        ."})]}),P.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[P.jsx("button",{onClick:()=>h(!c),className:"w-full sm:w-auto px-6 py-3 bg-blue-600 dark:bg-blue-600 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-700 transition font-medium text-sm sm:text-base",children:c?"":"  "}),P.jsx("button",{onClick:b,className:"w-full sm:w-auto px-6 py-3 border border-gray-300 dark:border-gray-600 rounded-lg text-sm sm:text-base font-medium hover:bg-gray-100 dark:hover:bg-gray-800",children:""})]}),c&&P.jsxs("form",{onSubmit:v,className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg space-y-4",children:[P.jsxs("div",{children:[P.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:""}),P.jsx("input",{type:"text",value:l.title,onChange:A=>u({...l,title:A.target.value}),className:"w-full bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:" "})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:""}),P.jsx("select",{value:l.category,onChange:A=>u({...l,category:parseInt(A.target.value)}),className:"w-full bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white",children:qp.map(A=>P.jsx("option",{value:A.id,children:A.name},A.id))})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:""}),P.jsx("textarea",{rows:"6",value:l.content,onChange:A=>u({...l,content:A.target.value}),className:"w-full bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 resize-none",placeholder:" "})]}),P.jsx("button",{type:"submit",disabled:d,className:"w-full bg-green-600 dark:bg-green-600 hover:bg-green-700 dark:hover:bg-green-700 disabled:bg-gray-500 text-white px-6 py-2 rounded font-bold transition text-sm sm:text-base",children:d?" ...":""})]}),P.jsxs("div",{className:"flex flex-wrap gap-2",children:[P.jsx("button",{onClick:()=>o(null),className:`px-3 sm:px-4 py-2 rounded transition text-sm sm:text-base ${a===null?"bg-blue-600 text-white":"bg-gray-200 dark:bg-dark-300 text-gray-900 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-dark-200"}`,children:""}),qp.map(A=>P.jsx("button",{onClick:()=>o(A.id),className:`px-3 sm:px-4 py-2 rounded transition text-sm sm:text-base ${a===A.id?"bg-blue-600 text-white":"bg-gray-200 dark:bg-dark-300 text-gray-900 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-dark-200"}`,children:A.name},A.id))]}),P.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[t&&P.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"  ..."}),!t&&x.length===0&&P.jsx("div",{className:"text-center py-10 text-gray-500 dark:text-gray-400 border border-dashed rounded-lg",children:"   ."}),!t&&x.map(A=>{var w;return P.jsx(Cr,{to:`/forum/${A.id}`,state:{post:A},children:P.jsx("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md transition cursor-pointer",children:P.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2",children:[P.jsxs("div",{className:"flex-1 min-w-0",children:[P.jsx("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:P.jsx("span",{className:"text-xs bg-gray-200 dark:bg-dark-300 text-gray-700 dark:text-gray-300 px-2 py-1 rounded",children:((w=qp.find(_=>_.id===A.category))==null?void 0:w.name)||""})}),P.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 break-words",children:A.title}),P.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-2 line-clamp-2",children:A.content}),P.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-2",children:[A.author,"  ",g(A.createdAt)]})]}),P.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 whitespace-nowrap",children:[" ",A.replies??0]})]})})},A.id)})]}),i&&P.jsx("p",{className:"text-sm text-red-500",children:i})]})}function Ype(){var y,A,w;const{postId:r}=Kz();H0();const e=q0(),{isDark:t}=bo(),n=bc(),[i,s]=ue.useState(((y=e.state)==null?void 0:y.post)||null),[a,o]=ue.useState(!((A=e.state)!=null&&A.post)),[l,u]=ue.useState([]),[c,h]=ue.useState(""),[d,f]=ue.useState(""),p=_=>_?typeof _=="string"?_:_.toDate?_.toDate().toLocaleDateString("ko-KR"):_ instanceof Date?_.toLocaleDateString("ko-KR"):new Date(_).toLocaleDateString("ko-KR"):"",g=ue.useCallback(async()=>{var _;o(!0);try{const S=Xo(Qr,"forumPosts",r),E=await yF(S);if(E.exists()){const C=E.data();s({id:E.id,...C,createdAt:(_=C.createdAt)!=null&&_.toDate?C.createdAt.toDate():C.createdAt||new Date})}else s(null)}catch(S){console.error("  :",S),s(null)}finally{o(!1)}},[r]),b=ue.useCallback(async()=>{try{const _=Ta(Qr,"forumPosts",r,"replies"),S=ey(_,qC("createdAt","asc")),C=(await Qx(S)).docs.map(N=>{var M;const D=N.data();return{id:N.id,...D,createdAt:(M=D.createdAt)!=null&&M.toDate?D.createdAt.toDate():D.createdAt||new Date}});u(C)}catch(_){console.error("  :",_)}},[r]);ue.useEffect(()=>{var _;(_=e.state)!=null&&_.post||g()},[g,(w=e.state)==null?void 0:w.post]),ue.useEffect(()=>{b()},[b]);const v=async _=>{if(_.preventDefault(),f(""),!c.trim()){f(" .");return}try{const S=Ta(Qr,"forumPosts",r,"replies"),C={author:(n==null?void 0:n.username)||(n==null?void 0:n.email)||" ",authorEmail:(n==null?void 0:n.email)||null,content:c.trim(),likes:0,createdAt:In()},D={id:(await Jx(S,C)).id,...C,createdAt:new Date};u(I=>[...I,D]),h("");const M=Xo(Qr,"forumPosts",r);await pf(M,{replies:Qce(1),updatedAt:In()}),s(I=>I&&{...I,replies:(I.replies||0)+1})}catch(S){console.error("  :",S),f("  .    .")}};if(a)return P.jsx("div",{className:`text-center py-12 ${t?"text-gray-300":"text-gray-700"}`,children:"  ..."});if(!i)return P.jsxs("div",{className:"text-center py-12",children:[P.jsx("h1",{className:`text-2xl font-bold mb-4 ${t?"text-white":"text-gray-900"}`,children:"   ."}),P.jsx(Cr,{to:"/forum",className:"text-blue-600 hover:text-blue-700 font-medium",children:" "})]});const x=qp.find(_=>_.id===(i==null?void 0:i.category));return P.jsxs("div",{className:"space-y-8",children:[P.jsxs(Qe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[P.jsx(Cr,{to:"/forum",className:`inline-flex items-center gap-2 mb-4 transition ${t?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"}`,children:"  "}),P.jsxs("div",{className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[P.jsx("div",{className:"mb-3",children:P.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${t?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-700"}`,children:x==null?void 0:x.name})}),P.jsx("h1",{className:`text-3xl sm:text-4xl font-bold mb-4 ${t?"text-white":"text-gray-900"}`,children:i.title}),P.jsxs("div",{className:`flex flex-wrap gap-4 mb-6 pb-6 border-b ${t?"border-gray-700 text-gray-300":"border-gray-200 text-gray-600"} text-sm`,children:[P.jsxs("div",{children:[P.jsx("span",{className:"font-medium",children:":"})," ",i.author]}),P.jsxs("div",{children:[P.jsx("span",{className:"font-medium",children:":"})," ",p(i.createdAt)]}),P.jsxs("div",{children:[P.jsx("span",{className:"font-medium",children:":"})," ",i.replies||l.length,""]}),P.jsxs("div",{children:[P.jsx("span",{className:"font-medium",children:":"})," ",i.views||0,""]})]}),P.jsx("div",{className:`prose prose-sm ${t?"prose-invert":""} max-w-none mb-8`,children:P.jsx("div",{className:`${t?"text-gray-200":"text-gray-700"} leading-7 whitespace-pre-wrap`,children:i.content})})]})]}),P.jsxs(Qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[P.jsx("h2",{className:`text-xl font-bold mb-4 ${t?"text-white":"text-gray-900"}`,children:" "}),P.jsxs("form",{onSubmit:v,className:"space-y-4",children:[P.jsx("textarea",{value:c,onChange:_=>h(_.target.value),placeholder:" ...",rows:"4",className:`w-full px-4 py-3 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`}),d&&P.jsx("p",{className:"text-sm text-red-400",children:d}),P.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:" "})]})]}),P.jsxs(Qe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"space-y-4",children:[P.jsxs("h2",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:[" ",l.length,""]}),l.map(_=>P.jsxs(Qe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`p-4 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[P.jsxs("div",{className:`flex justify-between items-start mb-2 ${t?"text-gray-300":"text-gray-600"} text-sm`,children:[P.jsxs("div",{children:[P.jsx("span",{className:"font-medium",children:_.author}),P.jsx("span",{className:"ml-4",children:p(_.createdAt)})]}),P.jsxs("button",{className:`transition ${t?"text-gray-400 hover:text-gray-200":"text-gray-400 hover:text-gray-600"}`,children:[" ",_.likes]})]}),P.jsx("p",{className:`${t?"text-gray-200":"text-gray-700"} leading-6`,children:_.content})]},_.id))]})]})}function Qpe(){const[r,e]=ue.useState(""),t=U4.filter(n=>n.term.toLowerCase().includes(r.toLowerCase())||n.definition.toLowerCase().includes(r.toLowerCase()));return P.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[P.jsxs("div",{children:[P.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),P.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base mb-6",children:"      ."}),P.jsx("input",{type:"search",placeholder:"   ...",value:r,onChange:n=>e(n.target.value),className:"w-full max-w-md bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 text-sm sm:text-base"})]}),P.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[t.map((n,i)=>P.jsxs("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:shadow-md transition",children:[P.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 mb-2",children:n.term}),P.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm sm:text-base",children:n.definition})]},i)),t.length===0&&P.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8 text-sm sm:text-base",children:"  ."})]}),P.jsxs("div",{className:"bg-gray-100 dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 rounded-lg text-center text-gray-600 dark:text-gray-400 text-sm sm:text-base",children:[" ",U4.length,"   ",t.length,"  "]})]})}function Jpe(){return P.jsxs("div",{className:"space-y-8 sm:space-y-12",children:[P.jsxs("div",{children:[P.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),P.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base",children:"    , ,  ."})]}),P.jsxs("section",{children:[P.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:" "}),P.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:SD.textbooks.map((r,e)=>P.jsxs("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:shadow-md transition",children:[P.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 mb-1",children:r.title}),P.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:[r.authors," (",r.year,")"]})]},e))})]}),P.jsxs("section",{children:[P.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"  "}),P.jsx("div",{className:"space-y-3 sm:space-y-4",children:SD.databases.map((r,e)=>P.jsxs("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"block bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md transition",children:[P.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400",children:r.name}),P.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:r.desc}),P.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2 break-all",children:r.url})]},e))})]}),P.jsxs("section",{children:[P.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"   "}),P.jsx("div",{className:"space-y-3 sm:space-y-4",children:SD.tools.map((r,e)=>P.jsxs("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"block bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md transition",children:[P.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400",children:r.name}),P.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:r.desc}),P.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2 break-all",children:r.url})]},e))})]})]})}function Zpe(){const{isDark:r}=bo(),e=bc(),[t,n]=ue.useState({username:"",email:"",affiliation:"",bio:""}),[i,s]=ue.useState(!1),[a,o]=ue.useState(!0),[l,u]=ue.useState(!1),[c,h]=ue.useState("");ue.useEffect(()=>{if(!(e!=null&&e.email)){o(!1);return}(async()=>{try{const g=Xo(Qr,"profiles",e.email),b=await yF(g),v={username:e.username||"",email:e.email,affiliation:"",bio:""};b.exists()?(n({...v,...b.data()}),console.log(" Firestore  :",e.email)):(n(v),console.log("   (Firestore )"))}catch(g){console.error(" Firestore  :",g),n({username:e.username,email:e.email||"",affiliation:"",bio:""})}finally{o(!1)}})()},[e==null?void 0:e.email,e==null?void 0:e.username]);const d=p=>{const{name:g,value:b}=p.target;n(v=>({...v,[g]:b}))},f=async p=>{p.preventDefault(),u(!0);try{await GM(Xo(Qr,"profiles",e.email),{username:t.username,email:t.email,affiliation:t.affiliation,bio:t.bio,updatedAt:In()}),console.log(" Firestore :",e.email),h("  ."),s(!1),setTimeout(()=>h(""),3e3)}catch(g){console.error("  :",g.code,g.message),h("  : "+g.message)}finally{u(!1)}};return e?a?P.jsx("div",{className:`text-center py-12 ${r?"text-gray-400":"text-gray-600"}`,children:"   ..."}):P.jsxs("div",{className:"max-w-2xl mx-auto",children:[P.jsx("h1",{className:`text-3xl font-bold mb-8 ${r?"text-white":"text-gray-900"}`,children:""}),c&&P.jsx("div",{className:`mb-4 p-4 rounded-lg ${c.includes("")?"bg-red-50 text-red-700 dark:bg-red-900 dark:text-red-200":"bg-green-50 text-green-700 dark:bg-green-900 dark:text-green-200"}`,children:c}),P.jsxs("div",{className:`rounded-lg p-8 ${r?"bg-gray-800":"bg-white"} border ${r?"border-gray-700":"border-gray-200"}`,children:[P.jsxs("div",{className:"flex justify-between items-center mb-6",children:[P.jsx("h2",{className:`text-xl font-bold ${r?"text-white":"text-gray-900"}`,children:" "}),P.jsx("button",{onClick:()=>s(!i),className:`px-4 py-2 rounded-lg transition ${r?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white`,children:i?"":""})]}),i?P.jsxs("form",{onSubmit:f,className:"space-y-4",children:[P.jsxs("div",{children:[P.jsx("label",{className:`block text-sm font-medium mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:""}),P.jsx("input",{type:"text",name:"username",value:t.username,onChange:d,className:`w-full px-4 py-2 border rounded-lg ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),P.jsxs("div",{children:[P.jsx("label",{className:`block text-sm font-medium mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:""}),P.jsx("input",{type:"email",name:"email",value:t.email,onChange:d,disabled:!0,className:`w-full px-4 py-2 border rounded-lg opacity-50 cursor-not-allowed ${r?"bg-gray-700 border-gray-600 text-gray-400":"bg-gray-100 border-gray-300 text-gray-600"}`})]}),P.jsxs("div",{children:[P.jsx("label",{className:`block text-sm font-medium mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:" "}),P.jsx("input",{type:"text",name:"affiliation",value:t.affiliation,onChange:d,placeholder:",  ",className:`w-full px-4 py-2 border rounded-lg ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),P.jsxs("div",{children:[P.jsx("label",{className:`block text-sm font-medium mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:""}),P.jsx("textarea",{name:"bio",value:t.bio,onChange:d,placeholder:" ...",rows:"4",className:`w-full px-4 py-2 border rounded-lg ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),P.jsx("button",{type:"submit",disabled:l,className:`w-full py-2 px-4 rounded-lg font-medium text-white transition ${l?"bg-blue-400 cursor-not-allowed opacity-50":"bg-blue-600 hover:bg-blue-700"}`,children:l?" ...":""})]}):P.jsxs("div",{className:"space-y-4",children:[P.jsxs("div",{children:[P.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:""}),P.jsx("p",{className:`text-lg font-medium ${r?"text-white":"text-gray-900"}`,children:t.username})]}),P.jsxs("div",{children:[P.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:""}),P.jsx("p",{className:`text-lg font-medium ${r?"text-white":"text-gray-900"}`,children:t.email})]}),P.jsxs("div",{children:[P.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:" "}),P.jsx("p",{className:`text-lg font-medium ${r?"text-white":"text-gray-900"}`,children:t.affiliation||""})]}),P.jsxs("div",{children:[P.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:""}),P.jsx("p",{className:`text-lg font-medium ${r?"text-white":"text-gray-900"}`,children:t.bio||""})]}),P.jsx("hr",{className:r?"border-gray-700":"border-gray-200"}),P.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[P.jsxs(Cr,{to:"/bookmarks",className:`p-4 rounded-lg border text-center transition hover:shadow-md ${r?"bg-gray-700 border-gray-600 text-gray-200 hover:bg-gray-600":"bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100"}`,children:[P.jsx("p",{className:"text-2xl mb-1",children:""}),P.jsx("p",{className:"font-semibold",children:""})]}),P.jsxs(Cr,{to:"/notes",className:`p-4 rounded-lg border text-center transition hover:shadow-md ${r?"bg-gray-700 border-gray-600 text-gray-200 hover:bg-gray-600":"bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100"}`,children:[P.jsx("p",{className:"text-2xl mb-1",children:""}),P.jsx("p",{className:"font-semibold",children:""})]})]})]})]})]}):P.jsx("div",{className:`text-center py-12 ${r?"text-gray-400":"text-gray-600"}`,children:"   ."})}function ege(){const{isDark:r}=bo(),e=bc(),[t,n]=ue.useState([]),[i,s]=ue.useState(!0),[a,o]=ue.useState("");ue.useEffect(()=>{if(!(e!=null&&e.email)){s(!1);return}l()},[e==null?void 0:e.email]);const l=async()=>{try{const c=ey(Ta(Qr,"bookmarks"),xH("userEmail","==",e.email)),d=(await Qx(c)).docs.map(f=>({id:f.id,...f.data()}));n(d),console.log("  :",e.email,":",d.length)}catch(c){console.error("   :",c),o("   .")}finally{s(!1)}},u=async c=>{try{const h=Xo(Qr,"bookmarks",c);await zS(h),n(d=>d.filter(f=>f.id!==c)),console.log("  :",c)}catch(h){o(h.message)}};return P.jsxs("div",{className:"max-w-4xl mx-auto",children:[P.jsx("h1",{className:`text-3xl font-bold mb-8 ${r?"text-white":"text-gray-900"}`,children:""}),a&&P.jsx("div",{className:`mb-4 p-4 rounded-lg ${r?"bg-red-900 text-red-200 border border-red-700":"bg-red-50 text-red-700 border border-red-200"}`,children:a}),i?P.jsx("div",{className:`text-center py-12 ${r?"text-gray-400":"text-gray-600"}`,children:" ..."}):t.length===0?P.jsxs("div",{className:`text-center py-12 ${r?"text-gray-400":"text-gray-600"}`,children:[P.jsx("p",{className:"mb-4",children:"  ."}),P.jsx(Cr,{to:"/concepts",className:`px-4 py-2 rounded-lg inline-block transition ${r?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white`,children:" "})]}):P.jsx("div",{className:"space-y-4",children:t.map(c=>P.jsxs("div",{className:`p-6 rounded-lg border transition ${r?"bg-gray-800 border-gray-700 hover:border-gray-600":"bg-white border-gray-200 hover:border-gray-300"}`,children:[P.jsxs("div",{className:"flex justify-between items-start gap-4",children:[P.jsxs("div",{className:"flex-1 min-w-0",children:[P.jsx("h2",{className:`text-xl font-bold mb-2 ${r?"text-white":"text-gray-900"}`,children:c.title}),P.jsxs("p",{className:`text-sm mb-3 ${r?"text-gray-400":"text-gray-600"}`,children:[": ",P.jsx("span",{className:"font-medium",children:c.type==="paper"?"":""})]}),P.jsx("p",{className:`line-clamp-2 ${r?"text-gray-300":"text-gray-700"}`,children:c.description})]}),P.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[P.jsx(Cr,{to:c.type==="paper"?`/papers/${c.slug}`:`/concepts/${c.slug}`,className:`px-4 py-2 rounded-lg transition ${r?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white text-sm`,children:""}),P.jsx("button",{onClick:()=>u(c.id),className:`px-4 py-2 rounded-lg transition ${r?"bg-red-600 hover:bg-red-700":"bg-red-500 hover:bg-red-600"} text-white text-sm`,children:""})]})]}),P.jsxs("p",{className:`text-xs mt-4 ${r?"text-gray-500":"text-gray-400"}`,children:[" : ",new Date(c.created_at).toLocaleDateString("ko-KR")]})]},c.id))})]})}function tge(){const{isDark:r}=bo(),e=bc(),[t,n]=ue.useState([]),[i,s]=ue.useState(null),[a,o]=ue.useState(!1),[l,u]=ue.useState(""),[c,h]=ue.useState(""),[d,f]=ue.useState(""),[p,g]=ue.useState(!0),[b,v]=ue.useState("");ue.useEffect(()=>{if(!(e!=null&&e.email)){g(!1);return}(async()=>{try{const D=ey(Ta(Qr,"notes"),xH("userEmail","==",e.email)),I=(await Qx(D)).docs.map(U=>({id:U.id,...U.data()}));n(I),console.log("   :",e.email,":",I.length)}catch(D){console.log(" Firestore  :",D)}finally{g(!1)}})()},[e==null?void 0:e.email]);const x=()=>{o(!0),s(null),u(""),h(""),f("")},y=N=>{s(N.id),o(!1),u(N.title),h(N.content),f(N.tags.join(", "))},A=async()=>{if(!l.trim()){alert(" .");return}try{if(a){const D={id:(await Jx(Ta(Qr,"notes"),{title:l,content:c,tags:d.split(",").map(I=>I.trim()).filter(I=>I),userEmail:e.email,createdAt:In(),updatedAt:In()})).id,title:l,content:c,tags:d.split(",").map(I=>I.trim()).filter(I=>I),userEmail:e.email,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},M=[D,...t];n(M),o(!1),s(D.id),v("  !"),setTimeout(()=>v(""),2e3),console.log("  :",e.email,l)}else if(i){const N=Xo(Qr,"notes",i);await pf(N,{title:l,content:c,tags:d.split(",").map(M=>M.trim()).filter(M=>M),userEmail:e.email,updatedAt:In()});const D=t.map(M=>M.id===i?{...M,title:l,content:c,tags:d.split(",").map(I=>I.trim()).filter(I=>I),updatedAt:new Date().toISOString()}:M);n(D),v("  !"),setTimeout(()=>v(""),2e3)}}catch(N){console.error("  :",N),v("  ."),setTimeout(()=>v(""),2e3)}},w=async N=>{if(confirm("  ?"))try{await zS(Xo(Qr,"notes",N));const D=t.filter(M=>M.id!==N);n(D),i===N&&(s(null),o(!1))}catch(D){console.error("  :",D),alert("  .")}},_=N=>new Date(N).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric"}),S=r?"bg-gray-800 border-gray-700":"bg-white border-gray-200",E=r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300",C=r?"text-gray-300":"text-gray-700";return P.jsxs("div",{className:"min-h-screen space-y-8",children:[b&&P.jsx(Qe.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`fixed top-20 right-4 px-6 py-3 rounded-lg shadow-lg font-semibold text-white z-50 ${b.includes("")?"bg-red-600":"bg-green-600"}`,children:b}),P.jsxs(Qe.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6},children:[P.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-indigo-600 to-blue-600 dark:from-indigo-400 dark:to-blue-400 bg-clip-text text-transparent",children:" "}),P.jsx("p",{className:`text-sm sm:text-base ${r?"text-gray-300":"text-gray-600"}`,children:", ,    "})]}),P.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[P.jsxs(Qe.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.6},className:`p-6 rounded-lg border ${S}`,children:[P.jsxs("div",{className:"flex justify-between items-center mb-4",children:[P.jsx("h2",{className:"text-xl font-bold",children:" "}),P.jsx("button",{onClick:x,className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium",children:"+  "})]}),P.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:t.length===0?P.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:" ."}):t.map(N=>P.jsxs("div",{onClick:()=>y(N),className:`p-3 rounded-lg cursor-pointer transition-all ${i===N.id?r?"bg-blue-900 border-blue-500":"bg-blue-100 border-blue-400":r?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} border`,children:[P.jsx("p",{className:"font-semibold text-sm truncate",children:N.title}),P.jsx("p",{className:`text-xs ${r?"text-gray-400":"text-gray-500"}`,children:_(N.updatedAt)})]},N.id))})]}),P.jsx(Qe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:`p-6 rounded-lg border lg:col-span-2 ${S}`,children:a||i?P.jsxs("div",{className:"space-y-4",children:[P.jsxs("div",{children:[P.jsx("label",{className:`block text-sm font-semibold mb-2 ${C}`,children:""}),P.jsx("input",{type:"text",value:l,onChange:N=>u(N.target.value),placeholder:"  ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${E}`})]}),P.jsxs("div",{children:[P.jsx("label",{className:`block text-sm font-semibold mb-2 ${C}`,children:" ( )"}),P.jsx("input",{type:"text",value:d,onChange:N=>f(N.target.value),placeholder:": , Kerr metric, ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${E}`})]}),P.jsxs("div",{children:[P.jsx("label",{className:`block text-sm font-semibold mb-2 ${C}`,children:""}),P.jsx("textarea",{value:c,onChange:N=>h(N.target.value),placeholder:"  ",rows:"12",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none ${E}`})]}),P.jsxs("div",{className:"flex gap-2 justify-end",children:[P.jsx("button",{onClick:()=>{o(!1),s(null)},className:`px-4 py-2 rounded-lg font-medium ${r?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"}`,children:""}),i&&P.jsx("button",{onClick:()=>w(i),className:"px-4 py-2 rounded-lg font-medium bg-red-600 hover:bg-red-700 text-white",children:""}),P.jsx("button",{onClick:A,className:"px-4 py-2 rounded-lg font-medium bg-blue-600 hover:bg-blue-700 text-white",children:""})]})]}):P.jsxs("div",{className:`text-center py-12 ${r?"text-gray-400":"text-gray-500"}`,children:[P.jsx("p",{className:"text-lg",children:"     "}),P.jsx("p",{className:"text-sm mt-2",children:" : ,  ,      !"})]})})]}),t.length>0&&P.jsxs(Qe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`p-6 rounded-lg border ${S}`,children:[P.jsx("h3",{className:"text-lg font-bold mb-3",children:""}),P.jsx("div",{className:"flex flex-wrap gap-2",children:[...new Set(t.flatMap(N=>N.tags).sort())].map(N=>P.jsxs("button",{onClick:()=>{const D=t.filter(M=>M.tags.includes(N));D.length>0&&y(D[0])},className:`px-3 py-1 rounded-full text-sm font-medium transition-all ${r?"bg-gray-700 text-gray-200 hover:bg-blue-600":"bg-gray-200 text-gray-800 hover:bg-blue-500 hover:text-white"}`,children:["#",N]},N))})]})]})}const af="global-whiteboard",rge=15e3,nge=45e3,ige=.5,sge=3,$a=80,age=[{key:"pen",label:""},{key:"highlighter",label:""},{key:"eraser",label:""},{key:"pan",label:""}],oge=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(16).slice(2)}`,lge=(r,e,t)=>Math.min(Math.max(r,e),t);function uge(){const r=ue.useRef(null),e=ue.useRef(null),t=ue.useRef(null),n=ue.useRef({scale:1,offsetX:0,offsetY:0}),i=ue.useRef({startX:0,startY:0,originX:0,originY:0}),[s,a]=ue.useState({scale:1,offsetX:0,offsetY:0}),[o,l]=ue.useState(!1),[u,c]=ue.useState("pen"),[h,d]=ue.useState([]),[f,p]=ue.useState(null),[g,b]=ue.useState(!1),[v,x]=ue.useState(!1),[y,A]=ue.useState("#0ea5e9"),[w,_]=ue.useState(4),[S,E]=ue.useState([]),[C,N]=ue.useState([]),[D,M]=ue.useState(!0),[I,U]=ue.useState("  ..."),[X,k]=ue.useState(null),{isDark:z}=bo(),q=ue.useMemo(()=>bc(),[]),H=ue.useMemo(oge,[]),te=ue.useMemo(()=>u==="pan"?v?"grabbing":"grab":u==="eraser"?"cell":"crosshair",[v,u]);ue.useEffect(()=>{n.current=s},[s]),ue.useEffect(()=>{u==="highlighter"&&w<10&&_(14),u==="eraser"&&w<12&&_(18)},[u]);const ce=ue.useMemo(()=>Xo(Qr,"whiteboardSessions",af),[]),re=ue.useMemo(()=>ey(Ta(Qr,"whiteboardSessions",af,"strokes"),qC("createdAt")),[]),O=ue.useMemo(()=>Ta(Qr,"whiteboardSessions",af,"presence"),[]),ne=ue.useCallback(async()=>{try{(await yF(ce)).exists()||await GM(ce,{createdAt:In(),lastActivity:In(),title:"Research Collaboration Whiteboard"})}catch(Q){k("   .   ."),console.error(Q)}},[ce]),W=ue.useCallback(()=>{const Q=r.current,L=e.current;if(!Q||!L)return;const{width:G,height:ee}=L.getBoundingClientRect(),oe=window.devicePixelRatio||1;Q.width=Math.floor(G*oe),Q.height=Math.floor(ee*oe),Q.style.width=`${G}px`,Q.style.height=`${ee}px`,Q.getContext("2d").setTransform(1,0,0,1,0,0),a(de=>{const Se=Q.width/2,_e=Q.height/2,Pe=(Se-de.offsetX)/de.scale,Ee=(_e-de.offsetY)/de.scale;return{scale:de.scale,offsetX:Se-Pe*de.scale,offsetY:_e-Ee*de.scale}})},[]),pe=ue.useCallback((Q,L)=>{var oe;if(!((oe=L==null?void 0:L.points)!=null&&oe.length))return;const G=L.mode??"pen";Q.save(),Q.lineCap="round",Q.lineJoin="round",Q.lineWidth=L.size,Q.globalCompositeOperation=G==="eraser"?"destination-out":"source-over",Q.strokeStyle=G==="eraser"?"#000000":L.color;const ee=L.opacity??(G==="highlighter"?.35:1);Q.globalAlpha=ee,Q.beginPath(),Q.moveTo(L.points[0].x,L.points[0].y);for(let fe=1;fe<L.points.length;fe+=1){const de=L.points[fe];Q.lineTo(de.x,de.y)}Q.stroke(),Q.restore()},[]),me=ue.useCallback((Q=null)=>{const L=r.current;if(!L)return;const G=L.getContext("2d"),ee=z?"#020617":"#f8fafc",{scale:oe,offsetX:fe,offsetY:de}=n.current;if(G.save(),G.setTransform(1,0,0,1,0,0),G.clearRect(0,0,L.width,L.height),G.fillStyle=ee,G.fillRect(0,0,L.width,L.height),o){G.save(),G.translate(fe,de),G.scale(oe,oe);const Se=1/oe,_e=L.width*Se,Pe=L.height*Se,Ee=Math.floor(-fe*Se/$a)*$a,qe=Math.floor(-de*Se/$a)*$a,bt=Ee+_e+$a*2,Lt=qe+Pe+$a*2;G.strokeStyle=z?"rgba(148, 163, 184, 0.18)":"rgba(51, 65, 85, 0.12)",G.lineWidth=Se,G.beginPath();for(let rt=Ee;rt<=bt;rt+=$a)G.moveTo(rt,qe-$a),G.lineTo(rt,Lt+$a);for(let rt=qe;rt<=Lt;rt+=$a)G.moveTo(Ee-$a,rt),G.lineTo(bt+$a,rt);G.stroke(),G.restore()}G.save(),G.translate(fe,de),G.scale(oe,oe),h.forEach(Se=>pe(G,Se)),Q&&pe(G,Q),G.restore(),G.restore()},[pe,o,z,h]);ue.useEffect(()=>{W(),me(f)},[f,me,W]),ue.useEffect(()=>{me(f)},[f,o,me,s]),ue.useEffect(()=>{const Q=()=>{W(),me(f)};return window.addEventListener("resize",Q),()=>window.removeEventListener("resize",Q)},[f,me,W]),ue.useEffect(()=>{ne()},[ne]),ue.useEffect(()=>{const Q=WM(re,L=>{const G=L.docs.map(ee=>({id:ee.id,color:ee.data().color,size:ee.data().size,opacity:ee.data().opacity??1,points:ee.data().points??[],mode:ee.data().mode??"pen",userId:ee.data().userId??null}));d(G),U(" "),M(!1)},L=>{console.error(L),k("   ."),M(!1)});return()=>Q()},[re]),ue.useEffect(()=>{const Q=Xo(O,H),L=async()=>{try{await GM(Q,{userId:(q==null?void 0:q.uid)??H,displayName:(q==null?void 0:q.username)??" ",affiliation:(q==null?void 0:q.affiliation)??"",updatedAt:In(),joinedAt:In()},{merge:!0})}catch(ee){console.error(ee)}},G=async()=>{try{await pf(Q,{updatedAt:In()})}catch(ee){console.error(ee)}};return L(),t.current=setInterval(G,rge),()=>{clearInterval(t.current),pf(Q,{updatedAt:In(),leftAt:In()}).catch(()=>{}).finally(()=>zS(Q).catch(()=>{}))}},[O,H,q]),ue.useEffect(()=>{const Q=WM(O,L=>{const G=Date.now(),ee=L.docs.map(oe=>({id:oe.id,...oe.data()})).filter(oe=>{var fe;return(fe=oe.updatedAt)!=null&&fe.toMillis?G-oe.updatedAt.toMillis()<nge:!1}).sort((oe,fe)=>{var _e,Pe,Ee,qe;const de=((Pe=(_e=oe.updatedAt)==null?void 0:_e.toMillis)==null?void 0:Pe.call(_e))??0;return(((qe=(Ee=fe.updatedAt)==null?void 0:Ee.toMillis)==null?void 0:qe.call(Ee))??0)-de});N(ee)},L=>console.error(L));return()=>Q()},[O]);const ie=ue.useCallback(Q=>{const L=r.current;if(!L)return null;const G=L.getBoundingClientRect(),{clientX:ee,clientY:oe}=Q,fe=L.width/G.width,de=L.height/G.height,Se=(ee-G.left)*fe,_e=(oe-G.top)*de,{scale:Pe,offsetX:Ee,offsetY:qe}=n.current;return{x:(Se-Ee)/Pe,y:(_e-qe)/Pe}},[]),K=Q=>{const L=r.current;if(!L)return;const G=L.getBoundingClientRect(),ee=L.width/G.width,oe=L.height/G.height;if(u==="pan"){x(!0),b(!1);const _e=(Q.clientX-G.left)*ee,Pe=(Q.clientY-G.top)*oe,{offsetX:Ee,offsetY:qe}=n.current;i.current={startX:_e,startY:Pe,originX:Ee,originY:qe},L.setPointerCapture(Q.pointerId);return}Q.preventDefault();const fe=ie(Q);if(!fe)return;const de=u;p({color:de==="eraser"?"#000000":y,size:w,opacity:de==="highlighter"?.35:1,mode:de,points:[fe]}),b(!0),L.setPointerCapture(Q.pointerId)},ae=Q=>{const L=r.current;if(!L)return;if(v){Q.preventDefault();const ee=L.getBoundingClientRect(),oe=L.width/ee.width,fe=L.height/ee.height,de=(Q.clientX-ee.left)*oe,Se=(Q.clientY-ee.top)*fe,_e=de-i.current.startX,Pe=Se-i.current.startY;a(Ee=>({scale:Ee.scale,offsetX:i.current.originX+_e,offsetY:i.current.originY+Pe}));return}if(!g)return;Q.preventDefault();const G=ie(Q);G&&p(ee=>ee&&{...ee,points:[...ee.points,G]})},ge=ue.useCallback(async Q=>{try{U("   ...");const L=await Jx(Ta(Qr,"whiteboardSessions",af,"strokes"),{color:Q.color,size:Q.size,opacity:Q.opacity??1,points:Q.points,mode:Q.mode??"pen",userId:(q==null?void 0:q.uid)??"guest",createdAt:In()});E(G=>[...G,L.id]),await pf(ce,{lastActivity:In()}),U(" ")}catch(L){console.error(L),k("  .   ."),U(" ")}},[ce,q]),he=Q=>{const L=r.current;if(L){if(v){try{L.releasePointerCapture(Q.pointerId)}catch{}x(!1);return}if(g){Q.preventDefault();try{L.releasePointerCapture(Q.pointerId)}catch{}b(!1),p(G=>(G&&G.points.length&&ge(G),null))}}},be=Q=>{(g||v)&&he(Q)},ve=async()=>{try{U("  ...");const Q=await Qx(Ta(Qr,"whiteboardSessions",af,"strokes")),L=Jce(Qr);Q.forEach(G=>L.delete(G.ref)),await L.commit(),await pf(ce,{lastActivity:In()}),E([]),U(" ")}catch(Q){console.error(Q),k("  ."),U(" ")}},Ie=()=>{const Q=r.current;if(!Q)return;const L=Q.toDataURL("image/png"),G=document.createElement("a");G.href=L,G.download=`whiteboard-export-${Date.now()}.png`,G.click()},Ve=()=>{const Q={boardId:af,exportedAt:new Date().toISOString(),strokes:h.map(ee=>({color:ee.color,size:ee.size,opacity:ee.opacity??1,mode:ee.mode??"pen",userId:ee.userId??null,points:ee.points}))},L=new Blob([JSON.stringify(Q,null,2)],{type:"application/json"}),G=document.createElement("a");G.href=URL.createObjectURL(L),G.download=`whiteboard-strokes-${Date.now()}.json`,G.click(),setTimeout(()=>URL.revokeObjectURL(G.href),1e3)},We=async()=>{const Q=S.at(-1);if(Q)try{U("   ..."),await zS(Xo(Qr,"whiteboardSessions",af,"strokes",Q)),E(L=>L.slice(0,-1)),await pf(ce,{lastActivity:In()}),U(" ")}catch(L){console.error(L),k("    ."),U("  ")}},Be=ue.useCallback((Q,L)=>{a(G=>{const ee=lge(G.scale*Q,ige,sge);if(ee===G.scale)return G;const oe=r.current;if(!oe)return{scale:ee,offsetX:G.offsetX,offsetY:G.offsetY};const fe=(L==null?void 0:L.x)??oe.width/2,de=(L==null?void 0:L.y)??oe.height/2,Se=(fe-G.offsetX)/G.scale,_e=(de-G.offsetY)/G.scale;return{scale:ee,offsetX:fe-Se*ee,offsetY:de-_e*ee}})},[]),$e=()=>Be(1.2),Ge=()=>Be(.8),Z=()=>{a({scale:1,offsetX:0,offsetY:0})};return ue.useEffect(()=>{k(null)},[y,w,u]),P.jsx("div",{className:"px-4 py-10 sm:px-6 lg:px-8",children:P.jsxs("div",{className:"mx-auto flex max-w-6xl flex-col gap-6 lg:flex-row",children:[P.jsxs("section",{className:"flex-1 space-y-6",children:[P.jsxs("header",{className:"space-y-2",children:[P.jsx("h1",{className:"text-3xl font-semibold text-slate-900 dark:text-slate-100",children:"  "}),P.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"   ,  ,         .   Firestore   ,         ."})]}),P.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white shadow-sm dark:border-slate-700 dark:bg-slate-900",children:[P.jsxs("div",{className:"flex flex-wrap items-center gap-3 border-b border-slate-200 px-4 py-3 dark:border-slate-700",children:[P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:""}),P.jsx("div",{className:"flex overflow-hidden rounded-md border border-slate-200 dark:border-slate-600",children:age.map(Q=>P.jsx("button",{type:"button",onClick:()=>c(Q.key),className:`px-3 py-1.5 text-xs font-medium transition ${u===Q.key?"bg-slate-900 text-white dark:bg-slate-100 dark:text-slate-900":"bg-white text-slate-600 hover:bg-slate-100 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700"}`,children:Q.label},Q.key))})]}),P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("label",{htmlFor:"brush-color",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:" "}),P.jsx("input",{id:"brush-color",type:"color",value:y,onChange:Q=>A(Q.target.value),disabled:u==="eraser",className:`h-9 w-14 rounded border border-slate-200 dark:border-slate-600 ${u==="eraser"?"cursor-not-allowed opacity-60":"cursor-pointer"}`})]}),P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("label",{htmlFor:"brush-size",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:" "}),P.jsx("input",{id:"brush-size",type:"range",min:"2",max:"60",step:"1",value:w,onChange:Q=>_(Number(Q.target.value)),className:"h-9 w-32"}),P.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[w,"px"]})]}),P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("button",{type:"button",onClick:We,disabled:S.length===0,className:`inline-flex items-center gap-1 rounded-md px-3 py-2 text-xs font-semibold transition ${S.length===0?"cursor-not-allowed bg-slate-200 text-slate-400 dark:bg-slate-800 dark:text-slate-500":"bg-slate-700 text-white hover:bg-slate-900 dark:bg-slate-200 dark:text-slate-900"}`,children:" "}),P.jsxs("button",{type:"button",onClick:()=>l(Q=>!Q),className:`inline-flex items-center gap-1 rounded-md px-3 py-2 text-xs font-semibold transition ${o?"bg-emerald-500 text-white hover:bg-emerald-600":"bg-slate-200 text-slate-700 hover:bg-slate-300 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600"}`,children:[" ",o?"":""]})]}),P.jsxs("div",{className:"ml-auto flex flex-wrap items-center gap-2",children:[P.jsxs("div",{className:"flex items-center gap-1 rounded-md border border-slate-200 px-2 py-1.5 text-xs font-medium text-slate-700 dark:border-slate-600 dark:text-slate-200",children:[P.jsx("button",{type:"button",onClick:Ge,className:"rounded px-2 py-1 transition hover:bg-slate-200 dark:hover:bg-slate-700",children:"-"}),P.jsxs("span",{className:"min-w-[3.5rem] text-center",children:[Math.round(s.scale*100),"%"]}),P.jsx("button",{type:"button",onClick:$e,className:"rounded px-2 py-1 transition hover:bg-slate-200 dark:hover:bg-slate-700",children:"+"}),P.jsx("button",{type:"button",onClick:Z,className:"rounded px-2 py-1 transition hover:bg-slate-200 dark:hover:bg-slate-700",children:"Reset"})]}),P.jsx("button",{type:"button",onClick:ve,className:"inline-flex items-center gap-1 rounded-md bg-rose-500 px-3 py-2 text-xs font-semibold text-white shadow-sm transition hover:bg-rose-600",children:" "}),P.jsx("button",{type:"button",onClick:Ie,className:"inline-flex items-center gap-1 rounded-md bg-slate-800 px-3 py-2 text-xs font-semibold text-white shadow-sm transition hover:bg-slate-900 dark:bg-slate-100 dark:text-slate-900",children:"PNG "}),P.jsx("button",{type:"button",onClick:Ve,className:"inline-flex items-center gap-1 rounded-md bg-slate-200 px-3 py-2 text-xs font-semibold text-slate-700 shadow-sm transition hover:bg-slate-300 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:"JSON "})]})]}),P.jsxs("div",{className:"relative overflow-hidden rounded-b-xl",ref:e,children:[D&&P.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center bg-white/80 text-sm font-medium text-slate-600 dark:bg-slate-900/80 dark:text-slate-200",children:"  ..."}),P.jsx("canvas",{ref:r,className:"h-[540px] w-full touch-none",style:{cursor:te},onPointerDown:K,onPointerMove:ae,onPointerUp:he,onPointerCancel:he,onPointerLeave:be})]})]}),P.jsxs("footer",{className:"space-y-1 text-sm",children:[P.jsxs("p",{className:"font-medium text-slate-700 dark:text-slate-200",children:[": ",P.jsx("span",{className:"font-normal text-slate-600 dark:text-slate-300",children:I})]}),X&&P.jsx("p",{className:"text-sm text-rose-500",children:X})]})]}),P.jsxs("aside",{className:"w-full max-w-md space-y-4 rounded-xl border border-slate-200 bg-white p-5 shadow-sm dark:border-slate-700 dark:bg-slate-900",children:[P.jsxs("div",{children:[P.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"  "}),P.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:C.length>0?` ${C.length}  .`:"  .    ."})]}),P.jsx("ul",{className:"space-y-3",children:C.map(Q=>{var L,G,ee,oe;return P.jsxs("li",{className:"flex items-start gap-3 rounded-lg border border-slate-200 px-3 py-2 text-sm dark:border-slate-700",children:[P.jsx("span",{className:"mt-1 inline-flex h-2.5 w-2.5 flex-shrink-0 rounded-full bg-emerald-500"}),P.jsxs("div",{children:[P.jsx("p",{className:"font-medium text-slate-700 dark:text-slate-200",children:Q.displayName}),Q.affiliation&&P.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:Q.affiliation}),P.jsxs("p",{className:"text-xs text-slate-400",children:[" : ",((oe=(G=(L=Q.updatedAt)==null?void 0:L.toDate)==null?void 0:(ee=G.call(L)).toLocaleTimeString)==null?void 0:oe.call(ee,[],{hour:"2-digit",minute:"2-digit"}))??" "]})]})]},Q.id)})}),P.jsx("div",{className:"rounded-lg bg-slate-50 p-3 text-xs text-slate-600 dark:bg-slate-800 dark:text-slate-300",children:"  Firestore ,           ."})]})]})})}function An(){return An=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},An.apply(null,arguments)}var bK={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null,legacySubset:!1};function xs(r,e){if(hT(r,e))return r[e];throw typeof r[e]=="function"&&$F(r,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function I0(r,e,t){if(hT(r,e))return r[e]=t,t;throw new Error('No access to property "'+e+'"')}function hT(r,e){return!hge(r)&&!Array.isArray(r)?!1:Ze(dge,e)?!0:!(e in Object.prototype||e in Function.prototype)}function cge(r,e){if(!$F(r,e))throw new Error('No access to method "'+e+'"');return r[e]}function $F(r,e){return r==null||typeof r[e]!="function"||Ze(r,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(r)?!1:Ze(fge,e)?!0:!(e in Object.prototype||e in Function.prototype)}function hge(r){return typeof r=="object"&&r&&r.constructor===Object}var dge={length:!0,name:!0},fge={toString:!0,valueOf:!0,toLocaleString:!0};class eN{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return xs(this.wrappedObject,e)}set(e,t){return I0(this.wrappedObject,e,t),this}has(e){return hT(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return xK(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){hT(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class wK{constructor(e,t,n){this.a=e,this.b=t,this.bKeys=n,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,t){return this.bKeys.has(e)?this.b.set(e,t):this.a.set(e,t),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return xK(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function xK(r,e){return{next:()=>{var t=r.next();return t.done?t:{value:e(t.value),done:!1}}}}function O1(){return new Map}function zg(r){if(!r)return O1();if(EK(r))return r;if(rN(r))return new eN(r);throw new Error("createMap can create maps from objects or Maps")}function mge(r){if(r instanceof eN)return r.wrappedObject;var e={};for(var t of r.keys()){var n=r.get(t);I0(e,t,n)}return e}function st(r){return typeof r=="number"}function _t(r){return!r||typeof r!="object"||typeof r.constructor!="function"?!1:r.isBigNumber===!0&&typeof r.constructor.prototype=="object"&&r.constructor.prototype.isBigNumber===!0||typeof r.constructor.isDecimal=="function"&&r.constructor.isDecimal(r)===!0}function Gb(r){return typeof r=="bigint"}function cc(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isComplex===!0||!1}function h_(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isFraction===!0||!1}function xa(r){return r&&r.constructor.prototype.isUnit===!0||!1}function mn(r){return typeof r=="string"}var cr=Array.isArray;function lt(r){return r&&r.constructor.prototype.isMatrix===!0||!1}function Ma(r){return Array.isArray(r)||lt(r)}function dT(r){return r&&r.isDenseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function Tf(r){return r&&r.isSparseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function VF(r){return r&&r.constructor.prototype.isRange===!0||!1}function tN(r){return r&&r.constructor.prototype.isIndex===!0||!1}function pge(r){return typeof r=="boolean"}function gge(r){return r&&r.constructor.prototype.isResultSet===!0||!1}function _K(r){return r&&r.constructor.prototype.isHelp===!0||!1}function AK(r){return typeof r=="function"}function vge(r){return r instanceof Date}function yge(r){return r instanceof RegExp}function rN(r){return!!(r&&typeof r=="object"&&r.constructor===Object&&!cc(r)&&!h_(r))}function EK(r){return r?r instanceof Map||r instanceof eN||typeof r.set=="function"&&typeof r.get=="function"&&typeof r.keys=="function"&&typeof r.has=="function":!1}function bge(r){return r===null}function wge(r){return r===void 0}function Tc(r){return r&&r.isAccessorNode===!0&&r.constructor.prototype.isNode===!0||!1}function ro(r){return r&&r.isArrayNode===!0&&r.constructor.prototype.isNode===!0||!1}function xge(r){return r&&r.isAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function _ge(r){return r&&r.isBlockNode===!0&&r.constructor.prototype.isNode===!0||!1}function Age(r){return r&&r.isConditionalNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ut(r){return r&&r.isConstantNode===!0&&r.constructor.prototype.isNode===!0||!1}function TP(r){return Ut(r)||xn(r)&&r.args.length===1&&Ut(r.args[0])&&"-+~".includes(r.op)}function d_(r){return r&&r.isFunctionAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function Cd(r){return r&&r.isFunctionNode===!0&&r.constructor.prototype.isNode===!0||!1}function ry(r){return r&&r.isIndexNode===!0&&r.constructor.prototype.isNode===!0||!1}function sr(r){return r&&r.isNode===!0&&r.constructor.prototype.isNode===!0||!1}function nN(r){return r&&r.isObjectNode===!0&&r.constructor.prototype.isNode===!0||!1}function xn(r){return r&&r.isOperatorNode===!0&&r.constructor.prototype.isNode===!0||!1}function Cc(r){return r&&r.isParenthesisNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ege(r){return r&&r.isRangeNode===!0&&r.constructor.prototype.isNode===!0||!1}function Sge(r){return r&&r.isRelationalNode===!0&&r.constructor.prototype.isNode===!0||!1}function fi(r){return r&&r.isSymbolNode===!0&&r.constructor.prototype.isNode===!0||!1}function SK(r){return r&&r.constructor.prototype.isChain===!0||!1}function dr(r){var e=typeof r;return e==="object"?r===null?"null":_t(r)?"BigNumber":r.constructor&&r.constructor.name?r.constructor.name:"Object":e}function gt(r){var e=typeof r;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||r===null||r===void 0)return r;if(typeof r.clone=="function")return r.clone();if(Array.isArray(r))return r.map(function(t){return gt(t)});if(r instanceof Date)return new Date(r.valueOf());if(_t(r))return r;if(rN(r))return Tge(r,gt);if(e==="function")return r;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(r,")"))}function Tge(r,e){var t={};for(var n in r)Ze(r,n)&&(t[n]=e(r[n]));return t}function TK(r,e){for(var t in e)Ze(e,t)&&(r[t]=e[t]);return r}function Nc(r,e){var t,n,i;if(Array.isArray(r)){if(!Array.isArray(e)||r.length!==e.length)return!1;for(n=0,i=r.length;n<i;n++)if(!Nc(r[n],e[n]))return!1;return!0}else{if(typeof r=="function")return r===e;if(r instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(t in r)if(!(t in e)||!Nc(r[t],e[t]))return!1;for(t in e)if(!(t in r))return!1;return!0}else return r===e}}function Cge(r,e,t){var n=!0,i;Object.defineProperty(r,e,{get:function(){return n&&(i=t(),n=!1),i},set:function(a){i=a,n=!1},configurable:!0,enumerable:!0})}function Ze(r,e){return r&&Object.hasOwnProperty.call(r,e)}function Nge(r,e){for(var t={},n=0;n<e.length;n++){var i=e[n],s=r[i];s!==void 0&&(t[i]=s)}return t}var Dge=["Matrix","Array"],Mge=["number","BigNumber","bigint","Fraction"],Te=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(bK)};An(Te,bK,{MATRIX_OPTIONS:Dge,NUMBER_OPTIONS:Mge});function X5(){return!0}function Va(){return!1}function Lp(){}const Y5="Argument is not a typed-function.";function CK(){function r(L){return typeof L=="object"&&L!==null&&L.constructor===Object}const e=[{name:"number",test:function(L){return typeof L=="number"}},{name:"string",test:function(L){return typeof L=="string"}},{name:"boolean",test:function(L){return typeof L=="boolean"}},{name:"Function",test:function(L){return typeof L=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(L){return L instanceof Date}},{name:"RegExp",test:function(L){return L instanceof RegExp}},{name:"Object",test:r},{name:"null",test:function(L){return L===null}},{name:"undefined",test:function(L){return L===void 0}}],t={name:"any",test:X5,isAny:!0};let n,i,s=0,a={createCount:0};function o(L){const G=n.get(L);if(G)return G;let ee='Unknown type "'+L+'"';const oe=L.toLowerCase();let fe;for(fe of i)if(fe.toLowerCase()===oe){ee+='. Did you mean "'+fe+'" ?';break}throw new TypeError(ee)}function l(L){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const ee=G?o(G).index:i.length,oe=[];for(let de=0;de<L.length;++de){if(!L[de]||typeof L[de].name!="string"||typeof L[de].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Se=L[de].name;if(n.has(Se))throw new TypeError('Duplicate type name "'+Se+'"');oe.push(Se),n.set(Se,{name:Se,test:L[de].test,isAny:L[de].isAny,index:ee+de,conversionsTo:[]})}const fe=i.slice(ee);i=i.slice(0,ee).concat(oe).concat(fe);for(let de=ee+oe.length;de<i.length;++de)n.get(i[de]).index=de}function u(){n=new Map,i=[],s=0,l([t],!1)}u(),l(e);function c(){let L;for(L of i)n.get(L).conversionsTo=[];s=0}function h(L){const G=i.filter(ee=>{const oe=n.get(ee);return!oe.isAny&&oe.test(L)});return G.length?G:["any"]}function d(L){return L&&typeof L=="function"&&"_typedFunctionData"in L}function f(L,G,ee){if(!d(L))throw new TypeError(Y5);const oe=ee&&ee.exact,fe=Array.isArray(G)?G.join(","):G,de=A(fe),Se=b(de);if(!oe||Se in L.signatures){const qe=L._typedFunctionData.signatureMap.get(Se);if(qe)return qe}const _e=de.length;let Pe;if(oe){Pe=[];let qe;for(qe in L.signatures)Pe.push(L._typedFunctionData.signatureMap.get(qe))}else Pe=L._typedFunctionData.signatures;for(let qe=0;qe<_e;++qe){const bt=de[qe],Lt=[];let rt;for(rt of Pe){const pr=E(rt.params,qe);if(!(!pr||bt.restParam&&!pr.restParam)){if(!pr.hasAny){const B=y(pr);if(bt.types.some(le=>!B.has(le.name)))continue}Lt.push(rt)}}if(Pe=Lt,Pe.length===0)break}let Ee;for(Ee of Pe)if(Ee.params.length<=_e)return Ee;throw new TypeError("Signature not found (signature: "+(L.name||"unnamed")+"("+b(de,", ")+"))")}function p(L,G,ee){return f(L,G,ee).implementation}function g(L,G){const ee=o(G);if(ee.test(L))return L;const oe=ee.conversionsTo;if(oe.length===0)throw new Error("There are no conversions to "+G+" defined.");for(let fe=0;fe<oe.length;fe++)if(o(oe[fe].from).test(L))return oe[fe].convert(L);throw new Error("Cannot convert "+L+" to "+G)}function b(L){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return L.map(ee=>ee.name).join(G)}function v(L){const G=L.indexOf("...")===0,oe=(G?L.length>3?L.slice(3):"any":L).split("|").map(_e=>o(_e.trim()));let fe=!1,de=G?"...":"";return{types:oe.map(function(_e){return fe=_e.isAny||fe,de+=_e.name+"|",{name:_e.name,typeIndex:_e.index,test:_e.test,isAny:_e.isAny,conversion:null,conversionIndex:-1}}),name:de.slice(0,-1),hasAny:fe,hasConversion:!1,restParam:G}}function x(L){const G=L.types.map(Se=>Se.name),ee=z(G);let oe=L.hasAny,fe=L.name;const de=ee.map(function(Se){const _e=o(Se.from);return oe=_e.isAny||oe,fe+="|"+Se.from,{name:Se.from,typeIndex:_e.index,test:_e.test,isAny:_e.isAny,conversion:Se,conversionIndex:Se.index}});return{types:L.types.concat(de),name:fe,hasAny:oe,hasConversion:de.length>0,restParam:L.restParam}}function y(L){return L.typeSet||(L.typeSet=new Set,L.types.forEach(G=>L.typeSet.add(G.name))),L.typeSet}function A(L){const G=[];if(typeof L!="string")throw new TypeError("Signatures must be strings");const ee=L.trim();if(ee==="")return G;const oe=ee.split(",");for(let fe=0;fe<oe.length;++fe){const de=v(oe[fe].trim());if(de.restParam&&fe!==oe.length-1)throw new SyntaxError('Unexpected rest parameter "'+oe[fe]+'": only allowed for the last parameter');if(de.types.length===0)return null;G.push(de)}return G}function w(L){const G=K(L);return G?G.restParam:!1}function _(L){if(!L||L.types.length===0)return X5;if(L.types.length===1)return o(L.types[0].name).test;if(L.types.length===2){const G=o(L.types[0].name).test,ee=o(L.types[1].name).test;return function(fe){return G(fe)||ee(fe)}}else{const G=L.types.map(function(ee){return o(ee.name).test});return function(oe){for(let fe=0;fe<G.length;fe++)if(G[fe](oe))return!0;return!1}}}function S(L){let G,ee,oe;if(w(L)){G=ie(L).map(_);const fe=G.length,de=_(K(L)),Se=function(_e){for(let Pe=fe;Pe<_e.length;Pe++)if(!de(_e[Pe]))return!1;return!0};return function(Pe){for(let Ee=0;Ee<G.length;Ee++)if(!G[Ee](Pe[Ee]))return!1;return Se(Pe)&&Pe.length>=fe+1}}else return L.length===0?function(de){return de.length===0}:L.length===1?(ee=_(L[0]),function(de){return ee(de[0])&&de.length===1}):L.length===2?(ee=_(L[0]),oe=_(L[1]),function(de){return ee(de[0])&&oe(de[1])&&de.length===2}):(G=L.map(_),function(de){for(let Se=0;Se<G.length;Se++)if(!G[Se](de[Se]))return!1;return de.length===G.length})}function E(L,G){return G<L.length?L[G]:w(L)?K(L):null}function C(L,G){const ee=E(L,G);return ee?y(ee):new Set}function N(L){return L.conversion===null||L.conversion===void 0}function D(L,G){const ee=new Set;return L.forEach(oe=>{const fe=C(oe.params,G);let de;for(de of fe)ee.add(de)}),ee.has("any")?["any"]:Array.from(ee)}function M(L,G,ee){let oe,fe;const de=L||"unnamed";let Se=ee,_e;for(_e=0;_e<G.length;_e++){const bt=[];if(Se.forEach(Lt=>{const rt=E(Lt.params,_e),pr=_(rt);(_e<Lt.params.length||w(Lt.params))&&pr(G[_e])&&bt.push(Lt)}),bt.length===0){if(fe=D(Se,_e),fe.length>0){const Lt=h(G[_e]);return oe=new TypeError("Unexpected type of argument in function "+de+" (expected: "+fe.join(" or ")+", actual: "+Lt.join(" | ")+", index: "+_e+")"),oe.data={category:"wrongType",fn:de,index:_e,actual:Lt,expected:fe},oe}}else Se=bt}const Pe=Se.map(function(bt){return w(bt.params)?1/0:bt.params.length});if(G.length<Math.min.apply(null,Pe))return fe=D(Se,_e),oe=new TypeError("Too few arguments in function "+de+" (expected: "+fe.join(" or ")+", index: "+G.length+")"),oe.data={category:"tooFewArgs",fn:de,index:G.length,expected:fe},oe;const Ee=Math.max.apply(null,Pe);if(G.length>Ee)return oe=new TypeError("Too many arguments in function "+de+" (expected: "+Ee+", actual: "+G.length+")"),oe.data={category:"tooManyArgs",fn:de,index:G.length,expectedLength:Ee},oe;const qe=[];for(let bt=0;bt<G.length;++bt)qe.push(h(G[bt]).join("|"));return oe=new TypeError('Arguments of type "'+qe.join(", ")+'" do not match any of the defined signatures of function '+de+"."),oe.data={category:"mismatch",actual:qe},oe}function I(L){let G=i.length+1;for(let ee=0;ee<L.types.length;ee++)G=Math.min(G,L.types[ee].typeIndex);return G}function U(L){let G=s+1;for(let ee=0;ee<L.types.length;ee++)N(L.types[ee])||(G=Math.min(G,L.types[ee].conversionIndex));return G}function X(L,G){if(L.hasAny){if(!G.hasAny)return .1}else if(G.hasAny)return-.1;if(L.restParam){if(!G.restParam)return .01}else if(G.restParam)return-.01;const ee=I(L)-I(G);if(ee<0)return-.001;if(ee>0)return .001;const oe=U(L),fe=U(G);if(L.hasConversion){if(!G.hasConversion)return(1+oe)*1e-6}else if(G.hasConversion)return-(1+fe)*1e-6;const de=oe-fe;return de<0?-1e-7:de>0?1e-7:0}function k(L,G){const ee=L.params,oe=G.params,fe=K(ee),de=K(oe),Se=w(ee),_e=w(oe);if(Se&&fe.hasAny){if(!_e||!de.hasAny)return 1e7}else if(_e&&de.hasAny)return-1e7;let Pe=0,Ee=0,qe;for(qe of ee)qe.hasAny&&++Pe,qe.hasConversion&&++Ee;let bt=0,Lt=0;for(qe of oe)qe.hasAny&&++bt,qe.hasConversion&&++Lt;if(Pe!==bt)return(Pe-bt)*1e6;if(Se&&fe.hasConversion){if(!_e||!de.hasConversion)return 1e5}else if(_e&&de.hasConversion)return-1e5;if(Ee!==Lt)return(Ee-Lt)*1e4;if(Se){if(!_e)return 1e3}else if(_e)return-1e3;const rt=(ee.length-oe.length)*(Se?-100:100);if(rt!==0)return rt;const pr=[];let B=0;for(let ze=0;ze<ee.length;++ze){const ut=X(ee[ze],oe[ze]);pr.push(ut),B+=ut}if(B!==0)return(B<0?-10:10)+B;let le,we=9;const Me=we/(pr.length+1);for(le of pr){if(le!==0)return(le<0?-we:we)+le;we-=Me}return 0}function z(L){if(L.length===0)return[];const G=L.map(o);if(L.length===1)return G[0].conversionsTo;const ee=new Set(L),oe=new Set;for(let de=0;de<G.length;++de)for(const Se of G[de].conversionsTo)ee.has(Se.from)||oe.add(Se.from);const fe=[];for(const de of oe){let Se=s+1,_e=null;for(let Pe=0;Pe<G.length;++Pe)for(const Ee of G[Pe].conversionsTo)Ee.from===de&&Ee.index<Se&&(Se=Ee.index,_e=Ee);fe.push(_e)}return fe}function q(L,G){let ee=G,oe="";if(L.some(de=>de.hasConversion)){const de=w(L),Se=L.map(H);oe=Se.map(_e=>_e.name).join(";"),ee=function(){const Pe=[],Ee=de?arguments.length-1:arguments.length;for(let qe=0;qe<Ee;qe++)Pe[qe]=Se[qe](arguments[qe]);return de&&(Pe[Ee]=arguments[Ee].map(Se[Ee])),G.apply(this,Pe)}}let fe=ee;if(w(L)){const de=L.length-1;fe=function(){return ee.apply(this,ae(arguments,0,de).concat([ae(arguments,de)]))}}return oe&&Object.defineProperty(fe,"name",{value:oe}),fe}function H(L){let G,ee,oe,fe;const de=[],Se=[];let _e="";L.types.forEach(function(Ee){Ee.conversion&&(_e+=Ee.conversion.from+"~>"+Ee.conversion.to+",",de.push(o(Ee.conversion.from).test),Se.push(Ee.conversion.convert))}),_e?_e=_e.slice(0,-1):_e="pass";let Pe=Ee=>Ee;switch(Se.length){case 0:break;case 1:G=de[0],oe=Se[0],Pe=function(qe){return G(qe)?oe(qe):qe};break;case 2:G=de[0],ee=de[1],oe=Se[0],fe=Se[1],Pe=function(qe){return G(qe)?oe(qe):ee(qe)?fe(qe):qe};break;default:Pe=function(qe){for(let bt=0;bt<Se.length;bt++)if(de[bt](qe))return Se[bt](qe);return qe}}return Object.defineProperty(Pe,"name",{value:_e}),Pe}function te(L){function G(ee,oe,fe){if(oe<ee.length){const de=ee[oe];let Se=[];if(de.restParam){const _e=de.types.filter(N);_e.length<de.types.length&&Se.push({types:_e,name:"..."+_e.map(Pe=>Pe.name).join("|"),hasAny:_e.some(Pe=>Pe.isAny),hasConversion:!1,restParam:!0}),Se.push(de)}else Se=de.types.map(function(_e){return{types:[_e],name:_e.name,hasAny:_e.isAny,hasConversion:_e.conversion,restParam:!1}});return he(Se,function(_e){return G(ee,oe+1,fe.concat([_e]))})}else return[fe]}return G(L,0,[])}function ce(L,G){const ee=Math.max(L.length,G.length);for(let _e=0;_e<ee;_e++){const Pe=C(L,_e),Ee=C(G,_e);let qe=!1,bt;for(bt of Ee)if(Pe.has(bt)){qe=!0;break}if(!qe)return!1}const oe=L.length,fe=G.length,de=w(L),Se=w(G);return de?Se?oe===fe:fe>=oe:Se?oe>=fe:oe===fe}function re(L){return L.map(G=>We(G)?Ie(G.referToSelf.callback):Ve(G)?ve(G.referTo.references,G.referTo.callback):G)}function O(L,G,ee){const oe=[];let fe;for(fe of L){let de=ee[fe];if(typeof de!="number")throw new TypeError('No definition for referenced signature "'+fe+'"');if(de=G[de],typeof de!="function")return!1;oe.push(de)}return oe}function ne(L,G,ee){const oe=re(L),fe=new Array(oe.length).fill(!1);let de=!0;for(;de;){de=!1;let Se=!0;for(let _e=0;_e<oe.length;++_e){if(fe[_e])continue;const Pe=oe[_e];if(We(Pe))oe[_e]=Pe.referToSelf.callback(ee),oe[_e].referToSelf=Pe.referToSelf,fe[_e]=!0,Se=!1;else if(Ve(Pe)){const Ee=O(Pe.referTo.references,oe,G);Ee?(oe[_e]=Pe.referTo.callback.apply(this,Ee),oe[_e].referTo=Pe.referTo,fe[_e]=!0,Se=!1):de=!0}}if(Se&&de)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return oe}function W(L){const G=/\bthis(\(|\.signatures\b)/;Object.keys(L).forEach(ee=>{const oe=L[ee];if(G.test(oe.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function pe(L,G){if(a.createCount++,Object.keys(G).length===0)throw new SyntaxError("No signatures provided");a.warnAgainstDeprecatedThis&&W(G);const ee=[],oe=[],fe={},de=[];let Se;for(Se in G){if(!Object.prototype.hasOwnProperty.call(G,Se))continue;const Zt=A(Se);if(!Zt)continue;ee.forEach(function(Fc){if(ce(Fc,Zt))throw new TypeError('Conflicting signatures "'+b(Fc)+'" and "'+b(Zt)+'".')}),ee.push(Zt);const Li=oe.length;oe.push(G[Se]);const P_=Zt.map(x);let ef;for(ef of te(P_)){const Fc=b(ef);de.push({params:ef,name:Fc,fn:Li}),ef.every(by=>!by.hasConversion)&&(fe[Fc]=Li)}}de.sort(k);const _e=ne(oe,fe,Qs);let Pe;for(Pe in fe)Object.prototype.hasOwnProperty.call(fe,Pe)&&(fe[Pe]=_e[fe[Pe]]);const Ee=[],qe=new Map;for(Pe of de)qe.has(Pe.name)||(Pe.fn=_e[Pe.fn],Ee.push(Pe),qe.set(Pe.name,Pe));const bt=Ee[0]&&Ee[0].params.length<=2&&!w(Ee[0].params),Lt=Ee[1]&&Ee[1].params.length<=2&&!w(Ee[1].params),rt=Ee[2]&&Ee[2].params.length<=2&&!w(Ee[2].params),pr=Ee[3]&&Ee[3].params.length<=2&&!w(Ee[3].params),B=Ee[4]&&Ee[4].params.length<=2&&!w(Ee[4].params),le=Ee[5]&&Ee[5].params.length<=2&&!w(Ee[5].params),we=bt&&Lt&&rt&&pr&&B&&le;for(let Zt=0;Zt<Ee.length;++Zt)Ee[Zt].test=S(Ee[Zt].params);const Me=bt?_(Ee[0].params[0]):Va,ze=Lt?_(Ee[1].params[0]):Va,ut=rt?_(Ee[2].params[0]):Va,vn=pr?_(Ee[3].params[0]):Va,Fa=B?_(Ee[4].params[0]):Va,my=le?_(Ee[5].params[0]):Va,_N=bt?_(Ee[0].params[1]):Va,kc=Lt?_(Ee[1].params[1]):Va,AN=rt?_(Ee[2].params[1]):Va,EN=pr?_(Ee[3].params[1]):Va,Pp=B?_(Ee[4].params[1]):Va,S_=le?_(Ee[5].params[1]):Va;for(let Zt=0;Zt<Ee.length;++Zt)Ee[Zt].implementation=q(Ee[Zt].params,Ee[Zt].fn);const T_=bt?Ee[0].implementation:Lp,py=Lt?Ee[1].implementation:Lp,Jd=rt?Ee[2].implementation:Lp,SN=pr?Ee[3].implementation:Lp,ol=B?Ee[4].implementation:Lp,C_=le?Ee[5].implementation:Lp,N_=bt?Ee[0].params.length:-1,gy=Lt?Ee[1].params.length:-1,vy=rt?Ee[2].params.length:-1,D_=pr?Ee[3].params.length:-1,TN=B?Ee[4].params.length:-1,M_=le?Ee[5].params.length:-1,CN=we?6:0,Rp=Ee.length,I_=Ee.map(Zt=>Zt.test),yy=Ee.map(Zt=>Zt.implementation),Zd=function(){for(let Li=CN;Li<Rp;Li++)if(I_[Li](arguments))return yy[Li].apply(this,arguments);return a.onMismatch(L,arguments,Ee)};function Qs(Zt,Li){return arguments.length===N_&&Me(Zt)&&_N(Li)?T_.apply(this,arguments):arguments.length===gy&&ze(Zt)&&kc(Li)?py.apply(this,arguments):arguments.length===vy&&ut(Zt)&&AN(Li)?Jd.apply(this,arguments):arguments.length===D_&&vn(Zt)&&EN(Li)?SN.apply(this,arguments):arguments.length===TN&&Fa(Zt)&&Pp(Li)?ol.apply(this,arguments):arguments.length===M_&&my(Zt)&&S_(Li)?C_.apply(this,arguments):Zd.apply(this,arguments)}try{Object.defineProperty(Qs,"name",{value:L})}catch{}return Qs.signatures=fe,Qs._typedFunctionData={signatures:Ee,signatureMap:qe},Qs}function me(L,G,ee){throw M(L,G,ee)}function ie(L){return ae(L,0,L.length-1)}function K(L){return L[L.length-1]}function ae(L,G,ee){return Array.prototype.slice.call(L,G,ee)}function ge(L,G){for(let ee=0;ee<L.length;ee++)if(G(L[ee]))return L[ee]}function he(L,G){return Array.prototype.concat.apply([],L.map(G))}function be(){const L=ie(arguments).map(ee=>b(A(ee))),G=K(arguments);if(typeof G!="function")throw new TypeError("Callback function expected as last argument");return ve(L,G)}function ve(L,G){return{referTo:{references:L,callback:G}}}function Ie(L){if(typeof L!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:L}}}function Ve(L){return L&&typeof L.referTo=="object"&&Array.isArray(L.referTo.references)&&typeof L.referTo.callback=="function"}function We(L){return L&&typeof L.referToSelf=="object"&&typeof L.referToSelf.callback=="function"}function Be(L,G){if(!L)return G;if(G&&G!==L){const ee=new Error("Function names do not match (expected: "+L+", actual: "+G+")");throw ee.data={actual:G,expected:L},ee}return L}function $e(L){let G;for(const ee in L)Object.prototype.hasOwnProperty.call(L,ee)&&(d(L[ee])||typeof L[ee].signature=="string")&&(G=Be(G,L[ee].name));return G}function Ge(L,G){let ee;for(ee in G)if(Object.prototype.hasOwnProperty.call(G,ee)){if(ee in L&&G[ee]!==L[ee]){const oe=new Error('Signature "'+ee+'" is defined twice');throw oe.data={signature:ee,sourceFunction:G[ee],destFunction:L[ee]},oe}L[ee]=G[ee]}}const Z=a;a=function(L){const G=typeof L=="string",ee=G?1:0;let oe=G?L:"";const fe={};for(let de=ee;de<arguments.length;++de){const Se=arguments[de];let _e={},Pe;if(typeof Se=="function"?(Pe=Se.name,typeof Se.signature=="string"?_e[Se.signature]=Se:d(Se)&&(_e=Se.signatures)):r(Se)&&(_e=Se,G||(Pe=$e(Se))),Object.keys(_e).length===0){const Ee=new TypeError("Argument to 'typed' at index "+de+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Ee.data={index:de,argument:Se},Ee}G||(oe=Be(oe,Pe)),Ge(fe,_e)}return pe(oe||"",fe)},a.create=CK,a.createCount=Z.createCount,a.onMismatch=me,a.throwMismatchError=me,a.createError=M,a.clear=u,a.clearConversions=c,a.addTypes=l,a._findType=o,a.referTo=be,a.referToSelf=Ie,a.convert=g,a.findSignature=f,a.find=p,a.isTypedFunction=d,a.warnAgainstDeprecatedThis=!0,a.addType=function(L,G){let ee="any";G!==!1&&n.has("Object")&&(ee="Object"),a.addTypes([L],ee)};function Q(L){if(!L||typeof L.from!="string"||typeof L.to!="string"||typeof L.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(L.to===L.from)throw new SyntaxError('Illegal to define conversion from "'+L.from+'" to itself.')}return a.addConversion=function(L){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};Q(L);const ee=o(L.to),oe=ee.conversionsTo.find(fe=>fe.from===L.from);if(oe)if(G&&G.override)a.removeConversion({from:oe.from,to:L.to,convert:oe.convert});else throw new Error('There is already a conversion from "'+L.from+'" to "'+ee.name+'"');ee.conversionsTo.push({from:L.from,to:ee.name,convert:L.convert,index:s++})},a.addConversions=function(L,G){L.forEach(ee=>a.addConversion(ee,G))},a.removeConversion=function(L){Q(L);const G=o(L.to),ee=ge(G.conversionsTo,fe=>fe.from===L.from);if(!ee)throw new Error("Attempt to remove nonexistent conversion from "+L.from+" to "+L.to);if(ee.convert!==L.convert)throw new Error("Conversion to remove does not match existing conversion");const oe=G.conversionsTo.indexOf(ee);G.conversionsTo.splice(oe,1)},a.resolve=function(L,G){if(!d(L))throw new TypeError(Y5);const ee=L._typedFunctionData.signatures;for(let oe=0;oe<ee.length;++oe)if(ee[oe].test(G))return ee[oe];return null},a}const fT=CK();function Y(r,e,t,n){function i(s){var a=Nge(s,e.map(Rge));return Ige(r,e,s),t(a)}return i.isFactory=!0,i.fn=r,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function Ige(r,e,t){var n=e.filter(s=>!Pge(s)).every(s=>t[s]!==void 0);if(!n){var i=e.filter(s=>t[s]===void 0);throw new Error('Cannot create function "'.concat(r,'", ')+"some dependencies are missing: ".concat(i.map(s=>'"'.concat(s,'"')).join(", "),"."))}}function Pge(r){return r&&r[0]==="?"}function Rge(r){return r&&r[0]==="?"?r.slice(1):r}function tt(r){return typeof r=="boolean"?!0:Number.isFinite(r)?r===Math.round(r):!1}function Ud(r,e){if(e.number==="bigint")try{BigInt(r)}catch{return e.numberFallback}return e.number}var Jh=Math.sign||function(r){return r>0?1:r<0?-1:0},kge=Math.log2||function(e){return Math.log(e)/Math.LN2},Fge=Math.log10||function(e){return Math.log(e)/Math.LN10},Oge=Math.log1p||function(r){return Math.log(r+1)},Bge=Math.cbrt||function(e){if(e===0)return e;var t=e<0,n;return t&&(e=-e),Number.isFinite(e)?(n=Math.exp(Math.log(e)/3),n=(e/(n*n)+2*n)/3):n=e,t?-n:n},Lge=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function XD(r,e,t){var n={2:"0b",8:"0o",16:"0x"},i=n[e],s="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!tt(t))throw new Error("size must be an integer");if(r>2**(t-1)-1||r<-(2**(t-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!tt(r))throw new Error("Value must be an integer");r<0&&(r=r+2**t),s="i".concat(t)}var a="";return r<0&&(r=-r,a="-"),"".concat(a).concat(i).concat(r.toString(e)).concat(s)}function Xm(r,e){if(typeof e=="function")return e(r);if(r===1/0)return"Infinity";if(r===-1/0)return"-Infinity";if(isNaN(r))return"NaN";var{notation:t,precision:n,wordSize:i}=NK(e);switch(t){case"fixed":return DK(r,n);case"exponential":return MK(r,n);case"engineering":return $ge(r,n);case"bin":return XD(r,2,i);case"oct":return XD(r,8,i);case"hex":return XD(r,16,i);case"auto":return Vge(r,n,e).replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],a=arguments[4];return s!=="."?s+a:a});default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function NK(r){var e="auto",t,n;if(r!==void 0)if(st(r))t=r;else if(_t(r))t=r.toNumber();else if(rN(r))r.precision!==void 0&&(t=Q5(r.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),r.wordSize!==void 0&&(n=Q5(r.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),r.notation&&(e=r.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:t,wordSize:n}}function f_(r){var e=String(r).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+r);var t=e[1],n=e[2],i=parseFloat(e[4]||"0"),s=n.indexOf(".");i+=s!==-1?s-1:n.length-1;var a=n.replace(".","").replace(/^0*/,function(o){return i-=o.length,""}).replace(/0*$/,"").split("").map(function(o){return parseInt(o)});return a.length===0&&(a.push(0),i++),{sign:t,coefficients:a,exponent:i}}function $ge(r,e){if(isNaN(r)||!Number.isFinite(r))return String(r);var t=f_(r),n=iN(t,e),i=n.exponent,s=n.coefficients,a=i%3===0?i:i<0?i-3-i%3:i-i%3;if(st(e))for(;e>s.length||i-a+1>s.length;)s.push(0);else for(var o=Math.abs(i-a)-(s.length-1),l=0;l<o;l++)s.push(0);for(var u=Math.abs(i-a),c=1;u>0;)c++,u--;var h=s.slice(c).join(""),d=st(e)&&h.length||h.match(/[1-9]/)?"."+h:"",f=s.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+a.toString();return n.sign+f}function DK(r,e){if(isNaN(r)||!Number.isFinite(r))return String(r);var t=f_(r),n=typeof e=="number"?iN(t,t.exponent+1+e):t,i=n.coefficients,s=n.exponent+1,a=s+(e||0);return i.length<a&&(i=i.concat(jg(a-i.length))),s<0&&(i=jg(-s+1).concat(i),s=1),s<i.length&&i.splice(s,0,s===0?"0.":"."),n.sign+i.join("")}function MK(r,e){if(isNaN(r)||!Number.isFinite(Number(r)))return String(r);var t=f_(r),n=e?iN(t,e):t,i=n.coefficients,s=n.exponent;i.length<e&&(i=i.concat(jg(e-i.length)));var a=i.shift();return n.sign+a+(i.length>0?"."+i.join(""):"")+"e"+(s>=0?"+":"")+s}function Vge(r,e,t){if(isNaN(r)||!Number.isFinite(r))return String(r);var n=J5(t==null?void 0:t.lowerExp,-3),i=J5(t==null?void 0:t.upperExp,5),s=f_(r),a=e?iN(s,e):s;if(a.exponent<n||a.exponent>=i)return MK(r,e);var o=a.coefficients,l=a.exponent;o.length<e&&(o=o.concat(jg(e-o.length))),o=o.concat(jg(l-o.length+1+(o.length<e?e-o.length:0))),o=jg(-l).concat(o);var u=l>0?l:0;return u<o.length-1&&o.splice(u+1,0,"."),a.sign+o.join("")}function iN(r,e){for(var t={sign:r.sign,coefficients:r.coefficients,exponent:r.exponent},n=t.coefficients;e<=0;)n.unshift(0),t.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var s=e-1;for(n[s]++;n[s]===10;)n.pop(),s===0&&(n.unshift(0),t.exponent++,s++),s--,n[s]++}}return t}function jg(r){for(var e=[],t=0;t<r;t++)e.push(0);return e}function Uge(r){return r.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function pi(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(t<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(r)||isNaN(e)?!1:!Number.isFinite(r)||!Number.isFinite(e)?r===e:r===e?!0:Math.abs(r-e)<=Math.max(t*Math.max(Math.abs(r),Math.abs(e)),n)}var zge=Math.acosh||function(r){return Math.log(Math.sqrt(r*r-1)+r)},jge=Math.asinh||function(r){return Math.log(Math.sqrt(r*r+1)+r)},qge=Math.atanh||function(r){return Math.log((1+r)/(1-r))/2},Hge=Math.cosh||function(r){return(Math.exp(r)+Math.exp(-r))/2},Gge=Math.sinh||function(r){return(Math.exp(r)-Math.exp(-r))/2},Wge=Math.tanh||function(r){var e=Math.exp(2*r);return(e-1)/(e+1)};function Kge(r,e){var t=!0,n=e>0?!0:e<0?!1:1/e===1/0;return t^n?-r:r}function Q5(r,e){if(st(r))return r;if(_t(r))return r.toNumber();e()}function J5(r,e){return st(r)?r:_t(r)?r.toNumber():e}var IK=function(){return IK=fT.create,fT},Xge=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Yge=Y("typed",Xge,function(e){var{BigNumber:t,Complex:n,DenseMatrix:i,Fraction:s}=e,a=IK();return a.clear(),a.addTypes([{name:"number",test:st},{name:"Complex",test:cc},{name:"BigNumber",test:_t},{name:"bigint",test:Gb},{name:"Fraction",test:h_},{name:"Unit",test:xa},{name:"identifier",test:o=>mn&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(o)},{name:"string",test:mn},{name:"Chain",test:SK},{name:"Array",test:cr},{name:"Matrix",test:lt},{name:"DenseMatrix",test:dT},{name:"SparseMatrix",test:Tf},{name:"Range",test:VF},{name:"Index",test:tN},{name:"boolean",test:pge},{name:"ResultSet",test:gge},{name:"Help",test:_K},{name:"function",test:AK},{name:"Date",test:vge},{name:"RegExp",test:yge},{name:"null",test:bge},{name:"undefined",test:wge},{name:"AccessorNode",test:Tc},{name:"ArrayNode",test:ro},{name:"AssignmentNode",test:xge},{name:"BlockNode",test:_ge},{name:"ConditionalNode",test:Age},{name:"ConstantNode",test:Ut},{name:"FunctionNode",test:Cd},{name:"FunctionAssignmentNode",test:d_},{name:"IndexNode",test:ry},{name:"Node",test:sr},{name:"ObjectNode",test:nN},{name:"OperatorNode",test:xn},{name:"ParenthesisNode",test:Cc},{name:"RangeNode",test:Ege},{name:"RelationalNode",test:Sge},{name:"SymbolNode",test:fi},{name:"Map",test:EK},{name:"Object",test:rN}]),a.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(t||AA(l),Uge(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new t(l)}},{from:"number",to:"Complex",convert:function(l){return n||EA(l),new n(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return n||EA(l),new n(l.toNumber(),0)}},{from:"bigint",to:"number",convert:function(l){if(l>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+l+")");return Number(l)}},{from:"bigint",to:"BigNumber",convert:function(l){return t||AA(l),new t(l.toString())}},{from:"bigint",to:"Fraction",convert:function(l){return s||SA(l),new s(l)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return n||EA(l),new n(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){s||SA(l);var u=new s(l);if(u.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return u}},{from:"string",to:"number",convert:function(l){var u=Number(l);if(isNaN(u))throw new Error('Cannot convert "'+l+'" to a number');return u}},{from:"string",to:"BigNumber",convert:function(l){t||AA(l);try{return new t(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(l){try{return BigInt(l)}catch{throw new Error('Cannot convert "'+l+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(l){s||SA(l);try{return new s(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){n||EA(l);try{return new n(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return t||AA(l),new t(+l)}},{from:"boolean",to:"bigint",convert:function(l){return BigInt(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return s||SA(l),new s(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return i||Qge(),new i(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),a.onMismatch=(o,l,u)=>{var c=a.createError(o,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Ma(l[0])&&u.some(d=>!d.params.includes(","))){var h=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw h.data=c.data,h}throw c},a.onMismatch=(o,l,u)=>{var c=a.createError(o,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Ma(l[0])&&u.some(d=>!d.params.includes(","))){var h=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw h.data=c.data,h}throw c},a});function AA(r){throw new Error("Cannot convert value ".concat(r," into a BigNumber: no class 'BigNumber' provided"))}function EA(r){throw new Error("Cannot convert value ".concat(r," into a Complex number: no class 'Complex' provided"))}function Qge(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function SA(r){throw new Error("Cannot convert value ".concat(r," into a Fraction, no class 'Fraction' provided."))}var Jge="ResultSet",Zge=[],eve=Y(Jge,Zge,()=>{function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return r.prototype.type="ResultSet",r.prototype.isResultSet=!0,r.prototype.valueOf=function(){return this.entries},r.prototype.toString=function(){return"["+this.entries.map(String).join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},r.fromJSON=function(e){return new r(e.entries)},r},{isClass:!0});/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Ag=9e15,zd=1e9,CP="0123456789abcdef",mT="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",pT="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",NP={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Ag,maxE:Ag,crypto:!1},PK,sc,wt=!0,sN="[DecimalError] ",Nd=sN+"Invalid argument: ",RK=sN+"Precision limit exceeded",kK=sN+"crypto unavailable",FK="[object Decimal]",ns=Math.floor,Hn=Math.pow,tve=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,rve=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,nve=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,OK=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Yo=1e7,ct=7,ive=9007199254740991,sve=mT.length-1,DP=pT.length-1,De={toStringTag:FK};De.absoluteValue=De.abs=function(){var r=new this.constructor(this);return r.s<0&&(r.s=1),at(r)};De.ceil=function(){return at(new this.constructor(this),this.e+1,2)};De.clampedTo=De.clamp=function(r,e){var t,n=this,i=n.constructor;if(r=new i(r),e=new i(e),!r.s||!e.s)return new i(NaN);if(r.gt(e))throw Error(Nd+e);return t=n.cmp(r),t<0?r:n.cmp(e)>0?e:new i(n)};De.comparedTo=De.cmp=function(r){var e,t,n,i,s=this,a=s.d,o=(r=new s.constructor(r)).d,l=s.s,u=r.s;if(!a||!o)return!l||!u?NaN:l!==u?l:a===o?0:!a^l<0?1:-1;if(!a[0]||!o[0])return a[0]?l:o[0]?-u:0;if(l!==u)return l;if(s.e!==r.e)return s.e>r.e^l<0?1:-1;for(n=a.length,i=o.length,e=0,t=n<i?n:i;e<t;++e)if(a[e]!==o[e])return a[e]>o[e]^l<0?1:-1;return n===i?0:n>i^l<0?1:-1};De.cosine=De.cos=function(){var r,e,t=this,n=t.constructor;return t.d?t.d[0]?(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+ct,n.rounding=1,t=ave(n,UK(n,t)),n.precision=r,n.rounding=e,at(sc==2||sc==3?t.neg():t,r,e,!0)):new n(1):new n(NaN)};De.cubeRoot=De.cbrt=function(){var r,e,t,n,i,s,a,o,l,u,c=this,h=c.constructor;if(!c.isFinite()||c.isZero())return new h(c);for(wt=!1,s=c.s*Hn(c.s*c,1/3),!s||Math.abs(s)==1/0?(t=Mi(c.d),r=c.e,(s=(r-t.length+1)%3)&&(t+=s==1||s==-2?"0":"00"),s=Hn(t,1/3),r=ns((r+1)/3)-(r%3==(r<0?-1:2)),s==1/0?t="5e"+r:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+r),n=new h(t),n.s=c.s):n=new h(s.toString()),a=(r=h.precision)+3;;)if(o=n,l=o.times(o).times(o),u=l.plus(c),n=Mr(u.plus(c).times(o),u.plus(l),a+2,1),Mi(o.d).slice(0,a)===(t=Mi(n.d)).slice(0,a))if(t=t.slice(a-3,a+1),t=="9999"||!i&&t=="4999"){if(!i&&(at(o,r+1,0),o.times(o).times(o).eq(c))){n=o;break}a+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(at(n,r+1,1),e=!n.times(n).times(n).eq(c));break}return wt=!0,at(n,r,h.rounding,e)};De.decimalPlaces=De.dp=function(){var r,e=this.d,t=NaN;if(e){if(r=e.length-1,t=(r-ns(this.e/ct))*ct,r=e[r],r)for(;r%10==0;r/=10)t--;t<0&&(t=0)}return t};De.dividedBy=De.div=function(r){return Mr(this,new this.constructor(r))};De.dividedToIntegerBy=De.divToInt=function(r){var e=this,t=e.constructor;return at(Mr(e,new t(r),0,1,1),t.precision,t.rounding)};De.equals=De.eq=function(r){return this.cmp(r)===0};De.floor=function(){return at(new this.constructor(this),this.e+1,3)};De.greaterThan=De.gt=function(r){return this.cmp(r)>0};De.greaterThanOrEqualTo=De.gte=function(r){var e=this.cmp(r);return e==1||e===0};De.hyperbolicCosine=De.cosh=function(){var r,e,t,n,i,s=this,a=s.constructor,o=new a(1);if(!s.isFinite())return new a(s.s?1/0:NaN);if(s.isZero())return o;t=a.precision,n=a.rounding,a.precision=t+Math.max(s.e,s.sd())+4,a.rounding=1,i=s.d.length,i<32?(r=Math.ceil(i/3),e=(1/oN(4,r)).toString()):(r=16,e="2.3283064365386962890625e-10"),s=P0(a,1,s.times(e),new a(1),!0);for(var l,u=r,c=new a(8);u--;)l=s.times(s),s=o.minus(l.times(c.minus(l.times(c))));return at(s,a.precision=t,a.rounding=n,!0)};De.hyperbolicSine=De.sinh=function(){var r,e,t,n,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(e=s.precision,t=s.rounding,s.precision=e+Math.max(i.e,i.sd())+4,s.rounding=1,n=i.d.length,n<3)i=P0(s,2,i,i,!0);else{r=1.4*Math.sqrt(n),r=r>16?16:r|0,i=i.times(1/oN(5,r)),i=P0(s,2,i,i,!0);for(var a,o=new s(5),l=new s(16),u=new s(20);r--;)a=i.times(i),i=i.times(o.plus(a.times(l.times(a).plus(u))))}return s.precision=e,s.rounding=t,at(i,e,t,!0)};De.hyperbolicTangent=De.tanh=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+7,n.rounding=1,Mr(t.sinh(),t.cosh(),n.precision=r,n.rounding=e)):new n(t.s)};De.inverseCosine=De.acos=function(){var r=this,e=r.constructor,t=r.abs().cmp(1),n=e.precision,i=e.rounding;return t!==-1?t===0?r.isNeg()?Vl(e,n,i):new e(0):new e(NaN):r.isZero()?Vl(e,n+4,i).times(.5):(e.precision=n+6,e.rounding=1,r=new e(1).minus(r).div(r.plus(1)).sqrt().atan(),e.precision=n,e.rounding=i,r.times(2))};De.inverseHyperbolicCosine=De.acosh=function(){var r,e,t=this,n=t.constructor;return t.lte(1)?new n(t.eq(1)?0:NaN):t.isFinite()?(r=n.precision,e=n.rounding,n.precision=r+Math.max(Math.abs(t.e),t.sd())+4,n.rounding=1,wt=!1,t=t.times(t).minus(1).sqrt().plus(t),wt=!0,n.precision=r,n.rounding=e,t.ln()):new n(t)};De.inverseHyperbolicSine=De.asinh=function(){var r,e,t=this,n=t.constructor;return!t.isFinite()||t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+2*Math.max(Math.abs(t.e),t.sd())+6,n.rounding=1,wt=!1,t=t.times(t).plus(1).sqrt().plus(t),wt=!0,n.precision=r,n.rounding=e,t.ln())};De.inverseHyperbolicTangent=De.atanh=function(){var r,e,t,n,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(r=s.precision,e=s.rounding,n=i.sd(),Math.max(n,r)<2*-i.e-1?at(new s(i),r,e,!0):(s.precision=t=n-i.e,i=Mr(i.plus(1),new s(1).minus(i),t+r,1),s.precision=r+4,s.rounding=1,i=i.ln(),s.precision=r,s.rounding=e,i.times(.5))):new s(NaN)};De.inverseSine=De.asin=function(){var r,e,t,n,i=this,s=i.constructor;return i.isZero()?new s(i):(e=i.abs().cmp(1),t=s.precision,n=s.rounding,e!==-1?e===0?(r=Vl(s,t+4,n).times(.5),r.s=i.s,r):new s(NaN):(s.precision=t+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=t,s.rounding=n,i.times(2)))};De.inverseTangent=De.atan=function(){var r,e,t,n,i,s,a,o,l,u=this,c=u.constructor,h=c.precision,d=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&h+4<=DP)return a=Vl(c,h+4,d).times(.25),a.s=u.s,a}else{if(!u.s)return new c(NaN);if(h+4<=DP)return a=Vl(c,h+4,d).times(.5),a.s=u.s,a}for(c.precision=o=h+10,c.rounding=1,t=Math.min(28,o/ct+2|0),r=t;r;--r)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(wt=!1,e=Math.ceil(o/ct),n=1,l=u.times(u),a=new c(u),i=u;r!==-1;)if(i=i.times(l),s=a.minus(i.div(n+=2)),i=i.times(l),a=s.plus(i.div(n+=2)),a.d[e]!==void 0)for(r=e;a.d[r]===s.d[r]&&r--;);return t&&(a=a.times(2<<t-1)),wt=!0,at(a,c.precision=h,c.rounding=d,!0)};De.isFinite=function(){return!!this.d};De.isInteger=De.isInt=function(){return!!this.d&&ns(this.e/ct)>this.d.length-2};De.isNaN=function(){return!this.s};De.isNegative=De.isNeg=function(){return this.s<0};De.isPositive=De.isPos=function(){return this.s>0};De.isZero=function(){return!!this.d&&this.d[0]===0};De.lessThan=De.lt=function(r){return this.cmp(r)<0};De.lessThanOrEqualTo=De.lte=function(r){return this.cmp(r)<1};De.logarithm=De.log=function(r){var e,t,n,i,s,a,o,l,u=this,c=u.constructor,h=c.precision,d=c.rounding,f=5;if(r==null)r=new c(10),e=!0;else{if(r=new c(r),t=r.d,r.s<0||!t||!t[0]||r.eq(1))return new c(NaN);e=r.eq(10)}if(t=u.d,u.s<0||!t||!t[0]||u.eq(1))return new c(t&&!t[0]?-1/0:u.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)s=!0;else{for(i=t[0];i%10===0;)i/=10;s=i!==1}if(wt=!1,o=h+f,a=Zh(u,o),n=e?gT(c,o+10):Zh(r,o),l=Mr(a,n,o,1),B1(l.d,i=h,d))do if(o+=10,a=Zh(u,o),n=e?gT(c,o+10):Zh(r,o),l=Mr(a,n,o,1),!s){+Mi(l.d).slice(i+1,i+15)+1==1e14&&(l=at(l,h+1,0));break}while(B1(l.d,i+=10,d));return wt=!0,at(l,h,d)};De.minus=De.sub=function(r){var e,t,n,i,s,a,o,l,u,c,h,d,f=this,p=f.constructor;if(r=new p(r),!f.d||!r.d)return!f.s||!r.s?r=new p(NaN):f.d?r.s=-r.s:r=new p(r.d||f.s!==r.s?f:NaN),r;if(f.s!=r.s)return r.s=-r.s,f.plus(r);if(u=f.d,d=r.d,o=p.precision,l=p.rounding,!u[0]||!d[0]){if(d[0])r.s=-r.s;else if(u[0])r=new p(f);else return new p(l===3?-0:0);return wt?at(r,o,l):r}if(t=ns(r.e/ct),c=ns(f.e/ct),u=u.slice(),s=c-t,s){for(h=s<0,h?(e=u,s=-s,a=d.length):(e=d,t=c,a=u.length),n=Math.max(Math.ceil(o/ct),a)+2,s>n&&(s=n,e.length=1),e.reverse(),n=s;n--;)e.push(0);e.reverse()}else{for(n=u.length,a=d.length,h=n<a,h&&(a=n),n=0;n<a;n++)if(u[n]!=d[n]){h=u[n]<d[n];break}s=0}for(h&&(e=u,u=d,d=e,r.s=-r.s),a=u.length,n=d.length-a;n>0;--n)u[a++]=0;for(n=d.length;n>s;){if(u[--n]<d[n]){for(i=n;i&&u[--i]===0;)u[i]=Yo-1;--u[i],u[n]+=Yo}u[n]-=d[n]}for(;u[--a]===0;)u.pop();for(;u[0]===0;u.shift())--t;return u[0]?(r.d=u,r.e=aN(u,t),wt?at(r,o,l):r):new p(l===3?-0:0)};De.modulo=De.mod=function(r){var e,t=this,n=t.constructor;return r=new n(r),!t.d||!r.s||r.d&&!r.d[0]?new n(NaN):!r.d||t.d&&!t.d[0]?at(new n(t),n.precision,n.rounding):(wt=!1,n.modulo==9?(e=Mr(t,r.abs(),0,3,1),e.s*=r.s):e=Mr(t,r,0,n.modulo,1),e=e.times(r),wt=!0,t.minus(e))};De.naturalExponential=De.exp=function(){return MP(this)};De.naturalLogarithm=De.ln=function(){return Zh(this)};De.negated=De.neg=function(){var r=new this.constructor(this);return r.s=-r.s,at(r)};De.plus=De.add=function(r){var e,t,n,i,s,a,o,l,u,c,h=this,d=h.constructor;if(r=new d(r),!h.d||!r.d)return!h.s||!r.s?r=new d(NaN):h.d||(r=new d(r.d||h.s===r.s?h:NaN)),r;if(h.s!=r.s)return r.s=-r.s,h.minus(r);if(u=h.d,c=r.d,o=d.precision,l=d.rounding,!u[0]||!c[0])return c[0]||(r=new d(h)),wt?at(r,o,l):r;if(s=ns(h.e/ct),n=ns(r.e/ct),u=u.slice(),i=s-n,i){for(i<0?(t=u,i=-i,a=c.length):(t=c,n=s,a=u.length),s=Math.ceil(o/ct),a=s>a?s+1:a+1,i>a&&(i=a,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(a=u.length,i=c.length,a-i<0&&(i=a,t=c,c=u,u=t),e=0;i;)e=(u[--i]=u[i]+c[i]+e)/Yo|0,u[i]%=Yo;for(e&&(u.unshift(e),++n),a=u.length;u[--a]==0;)u.pop();return r.d=u,r.e=aN(u,n),wt?at(r,o,l):r};De.precision=De.sd=function(r){var e,t=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(Nd+r);return t.d?(e=BK(t.d),r&&t.e+1>e&&(e=t.e+1)):e=NaN,e};De.round=function(){var r=this,e=r.constructor;return at(new e(r),r.e+1,e.rounding)};De.sine=De.sin=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+ct,n.rounding=1,t=lve(n,UK(n,t)),n.precision=r,n.rounding=e,at(sc>2?t.neg():t,r,e,!0)):new n(NaN)};De.squareRoot=De.sqrt=function(){var r,e,t,n,i,s,a=this,o=a.d,l=a.e,u=a.s,c=a.constructor;if(u!==1||!o||!o[0])return new c(!u||u<0&&(!o||o[0])?NaN:o?a:1/0);for(wt=!1,u=Math.sqrt(+a),u==0||u==1/0?(e=Mi(o),(e.length+l)%2==0&&(e+="0"),u=Math.sqrt(e),l=ns((l+1)/2)-(l<0||l%2),u==1/0?e="5e"+l:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),n=new c(e)):n=new c(u.toString()),t=(l=c.precision)+3;;)if(s=n,n=s.plus(Mr(a,s,t+2,1)).times(.5),Mi(s.d).slice(0,t)===(e=Mi(n.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!i&&e=="4999"){if(!i&&(at(s,l+1,0),s.times(s).eq(a))){n=s;break}t+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(at(n,l+1,1),r=!n.times(n).eq(a));break}return wt=!0,at(n,l,c.rounding,r)};De.tangent=De.tan=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+10,n.rounding=1,t=t.sin(),t.s=1,t=Mr(t,new n(1).minus(t.times(t)).sqrt(),r+10,0),n.precision=r,n.rounding=e,at(sc==2||sc==4?t.neg():t,r,e,!0)):new n(NaN)};De.times=De.mul=function(r){var e,t,n,i,s,a,o,l,u,c=this,h=c.constructor,d=c.d,f=(r=new h(r)).d;if(r.s*=c.s,!d||!d[0]||!f||!f[0])return new h(!r.s||d&&!d[0]&&!f||f&&!f[0]&&!d?NaN:!d||!f?r.s/0:r.s*0);for(t=ns(c.e/ct)+ns(r.e/ct),l=d.length,u=f.length,l<u&&(s=d,d=f,f=s,a=l,l=u,u=a),s=[],a=l+u,n=a;n--;)s.push(0);for(n=u;--n>=0;){for(e=0,i=l+n;i>n;)o=s[i]+f[n]*d[i-n-1]+e,s[i--]=o%Yo|0,e=o/Yo|0;s[i]=(s[i]+e)%Yo|0}for(;!s[--a];)s.pop();return e?++t:s.shift(),r.d=s,r.e=aN(s,t),wt?at(r,h.precision,h.rounding):r};De.toBinary=function(r,e){return UF(this,2,r,e)};De.toDecimalPlaces=De.toDP=function(r,e){var t=this,n=t.constructor;return t=new n(t),r===void 0?t:(Ys(r,0,zd),e===void 0?e=n.rounding:Ys(e,0,8),at(t,r+t.e+1,e))};De.toExponential=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=ru(n,!0):(Ys(r,0,zd),e===void 0?e=i.rounding:Ys(e,0,8),n=at(new i(n),r+1,e),t=ru(n,!0,r+1)),n.isNeg()&&!n.isZero()?"-"+t:t};De.toFixed=function(r,e){var t,n,i=this,s=i.constructor;return r===void 0?t=ru(i):(Ys(r,0,zd),e===void 0?e=s.rounding:Ys(e,0,8),n=at(new s(i),r+i.e+1,e),t=ru(n,!1,r+n.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};De.toFraction=function(r){var e,t,n,i,s,a,o,l,u,c,h,d,f=this,p=f.d,g=f.constructor;if(!p)return new g(f);if(u=t=new g(1),n=l=new g(0),e=new g(n),s=e.e=BK(p)-f.e-1,a=s%ct,e.d[0]=Hn(10,a<0?ct+a:a),r==null)r=s>0?e:u;else{if(o=new g(r),!o.isInt()||o.lt(u))throw Error(Nd+o);r=o.gt(e)?s>0?e:u:o}for(wt=!1,o=new g(Mi(p)),c=g.precision,g.precision=s=p.length*ct*2;h=Mr(o,e,0,1,1),i=t.plus(h.times(n)),i.cmp(r)!=1;)t=n,n=i,i=u,u=l.plus(h.times(i)),l=i,i=e,e=o.minus(h.times(i)),o=i;return i=Mr(r.minus(t),n,0,1,1),l=l.plus(i.times(u)),t=t.plus(i.times(n)),l.s=u.s=f.s,d=Mr(u,n,s,1).minus(f).abs().cmp(Mr(l,t,s,1).minus(f).abs())<1?[u,n]:[l,t],g.precision=c,wt=!0,d};De.toHexadecimal=De.toHex=function(r,e){return UF(this,16,r,e)};De.toNearest=function(r,e){var t=this,n=t.constructor;if(t=new n(t),r==null){if(!t.d)return t;r=new n(1),e=n.rounding}else{if(r=new n(r),e===void 0?e=n.rounding:Ys(e,0,8),!t.d)return r.s?t:r;if(!r.d)return r.s&&(r.s=t.s),r}return r.d[0]?(wt=!1,t=Mr(t,r,0,e,1).times(r),wt=!0,at(t)):(r.s=t.s,t=r),t};De.toNumber=function(){return+this};De.toOctal=function(r,e){return UF(this,8,r,e)};De.toPower=De.pow=function(r){var e,t,n,i,s,a,o=this,l=o.constructor,u=+(r=new l(r));if(!o.d||!r.d||!o.d[0]||!r.d[0])return new l(Hn(+o,u));if(o=new l(o),o.eq(1))return o;if(n=l.precision,s=l.rounding,r.eq(1))return at(o,n,s);if(e=ns(r.e/ct),e>=r.d.length-1&&(t=u<0?-u:u)<=ive)return i=LK(l,o,t,n),r.s<0?new l(1).div(i):at(i,n,s);if(a=o.s,a<0){if(e<r.d.length-1)return new l(NaN);if(r.d[e]&1||(a=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=a,o}return t=Hn(+o,u),e=t==0||!isFinite(t)?ns(u*(Math.log("0."+Mi(o.d))/Math.LN10+o.e+1)):new l(t+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?a/0:0):(wt=!1,l.rounding=o.s=1,t=Math.min(12,(e+"").length),i=MP(r.times(Zh(o,n+t)),n),i.d&&(i=at(i,n+5,1),B1(i.d,n,s)&&(e=n+10,i=at(MP(r.times(Zh(o,e+t)),e),e+5,1),+Mi(i.d).slice(n+1,n+15)+1==1e14&&(i=at(i,n+1,0)))),i.s=a,wt=!0,l.rounding=s,at(i,n,s))};De.toPrecision=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=ru(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(Ys(r,1,zd),e===void 0?e=i.rounding:Ys(e,0,8),n=at(new i(n),r,e),t=ru(n,r<=n.e||n.e<=i.toExpNeg,r)),n.isNeg()&&!n.isZero()?"-"+t:t};De.toSignificantDigits=De.toSD=function(r,e){var t=this,n=t.constructor;return r===void 0?(r=n.precision,e=n.rounding):(Ys(r,1,zd),e===void 0?e=n.rounding:Ys(e,0,8)),at(new n(t),r,e)};De.toString=function(){var r=this,e=r.constructor,t=ru(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()&&!r.isZero()?"-"+t:t};De.truncated=De.trunc=function(){return at(new this.constructor(this),this.e+1,1)};De.valueOf=De.toJSON=function(){var r=this,e=r.constructor,t=ru(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()?"-"+t:t};function Mi(r){var e,t,n,i=r.length-1,s="",a=r[0];if(i>0){for(s+=a,e=1;e<i;e++)n=r[e]+"",t=ct-n.length,t&&(s+=Kc(t)),s+=n;a=r[e],n=a+"",t=ct-n.length,t&&(s+=Kc(t))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}function Ys(r,e,t){if(r!==~~r||r<e||r>t)throw Error(Nd+r)}function B1(r,e,t,n){var i,s,a,o;for(s=r[0];s>=10;s/=10)--e;return--e<0?(e+=ct,i=0):(i=Math.ceil((e+1)/ct),e%=ct),s=Hn(10,ct-e),o=r[i]%s|0,n==null?e<3?(e==0?o=o/100|0:e==1&&(o=o/10|0),a=t<4&&o==99999||t>3&&o==49999||o==5e4||o==0):a=(t<4&&o+1==s||t>3&&o+1==s/2)&&(r[i+1]/s/100|0)==Hn(10,e-2)-1||(o==s/2||o==0)&&(r[i+1]/s/100|0)==0:e<4?(e==0?o=o/1e3|0:e==1?o=o/100|0:e==2&&(o=o/10|0),a=(n||t<4)&&o==9999||!n&&t>3&&o==4999):a=((n||t<4)&&o+1==s||!n&&t>3&&o+1==s/2)&&(r[i+1]/s/1e3|0)==Hn(10,e-3)-1,a}function QE(r,e,t){for(var n,i=[0],s,a=0,o=r.length;a<o;){for(s=i.length;s--;)i[s]*=e;for(i[0]+=CP.indexOf(r.charAt(a++)),n=0;n<i.length;n++)i[n]>t-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/t|0,i[n]%=t)}return i.reverse()}function ave(r,e){var t,n,i;if(e.isZero())return e;n=e.d.length,n<32?(t=Math.ceil(n/3),i=(1/oN(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),r.precision+=t,e=P0(r,1,e.times(i),new r(1));for(var s=t;s--;){var a=e.times(e);e=a.times(a).minus(a).times(8).plus(1)}return r.precision-=t,e}var Mr=function(){function r(n,i,s){var a,o=0,l=n.length;for(n=n.slice();l--;)a=n[l]*i+o,n[l]=a%s|0,o=a/s|0;return o&&n.unshift(o),n}function e(n,i,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(n[o]!=i[o]){l=n[o]>i[o]?1:-1;break}return l}function t(n,i,s,a){for(var o=0;s--;)n[s]-=o,o=n[s]<i[s]?1:0,n[s]=o*a+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,a,o,l){var u,c,h,d,f,p,g,b,v,x,y,A,w,_,S,E,C,N,D,M,I=n.constructor,U=n.s==i.s?1:-1,X=n.d,k=i.d;if(!X||!X[0]||!k||!k[0])return new I(!n.s||!i.s||(X?k&&X[0]==k[0]:!k)?NaN:X&&X[0]==0||!k?U*0:U/0);for(l?(f=1,c=n.e-i.e):(l=Yo,f=ct,c=ns(n.e/f)-ns(i.e/f)),D=k.length,C=X.length,v=new I(U),x=v.d=[],h=0;k[h]==(X[h]||0);h++);if(k[h]>(X[h]||0)&&c--,s==null?(_=s=I.precision,a=I.rounding):o?_=s+(n.e-i.e)+1:_=s,_<0)x.push(1),p=!0;else{if(_=_/f+2|0,h=0,D==1){for(d=0,k=k[0],_++;(h<C||d)&&_--;h++)S=d*l+(X[h]||0),x[h]=S/k|0,d=S%k|0;p=d||h<C}else{for(d=l/(k[0]+1)|0,d>1&&(k=r(k,d,l),X=r(X,d,l),D=k.length,C=X.length),E=D,y=X.slice(0,D),A=y.length;A<D;)y[A++]=0;M=k.slice(),M.unshift(0),N=k[0],k[1]>=l/2&&++N;do d=0,u=e(k,y,D,A),u<0?(w=y[0],D!=A&&(w=w*l+(y[1]||0)),d=w/N|0,d>1?(d>=l&&(d=l-1),g=r(k,d,l),b=g.length,A=y.length,u=e(g,y,b,A),u==1&&(d--,t(g,D<b?M:k,b,l))):(d==0&&(u=d=1),g=k.slice()),b=g.length,b<A&&g.unshift(0),t(y,g,A,l),u==-1&&(A=y.length,u=e(k,y,D,A),u<1&&(d++,t(y,D<A?M:k,A,l))),A=y.length):u===0&&(d++,y=[0]),x[h++]=d,u&&y[0]?y[A++]=X[E]||0:(y=[X[E]],A=1);while((E++<C||y[0]!==void 0)&&_--);p=y[0]!==void 0}x[0]||x.shift()}if(f==1)v.e=c,PK=p;else{for(h=1,d=x[0];d>=10;d/=10)h++;v.e=h+c*f-1,at(v,o?s+v.e+1:s,a,p)}return v}}();function at(r,e,t,n){var i,s,a,o,l,u,c,h,d,f=r.constructor;e:if(e!=null){if(h=r.d,!h)return r;for(i=1,o=h[0];o>=10;o/=10)i++;if(s=e-i,s<0)s+=ct,a=e,c=h[d=0],l=c/Hn(10,i-a-1)%10|0;else if(d=Math.ceil((s+1)/ct),o=h.length,d>=o)if(n){for(;o++<=d;)h.push(0);c=l=0,i=1,s%=ct,a=s-ct+1}else break e;else{for(c=o=h[d],i=1;o>=10;o/=10)i++;s%=ct,a=s-ct+i,l=a<0?0:c/Hn(10,i-a-1)%10|0}if(n=n||e<0||h[d+1]!==void 0||(a<0?c:c%Hn(10,i-a-1)),u=t<4?(l||n)&&(t==0||t==(r.s<0?3:2)):l>5||l==5&&(t==4||n||t==6&&(s>0?a>0?c/Hn(10,i-a):0:h[d-1])%10&1||t==(r.s<0?8:7)),e<1||!h[0])return h.length=0,u?(e-=r.e+1,h[0]=Hn(10,(ct-e%ct)%ct),r.e=-e||0):h[0]=r.e=0,r;if(s==0?(h.length=d,o=1,d--):(h.length=d+1,o=Hn(10,ct-s),h[d]=a>0?(c/Hn(10,i-a)%Hn(10,a)|0)*o:0),u)for(;;)if(d==0){for(s=1,a=h[0];a>=10;a/=10)s++;for(a=h[0]+=o,o=1;a>=10;a/=10)o++;s!=o&&(r.e++,h[0]==Yo&&(h[0]=1));break}else{if(h[d]+=o,h[d]!=Yo)break;h[d--]=0,o=1}for(s=h.length;h[--s]===0;)h.pop()}return wt&&(r.e>f.maxE?(r.d=null,r.e=NaN):r.e<f.minE&&(r.e=0,r.d=[0])),r}function ru(r,e,t){if(!r.isFinite())return VK(r);var n,i=r.e,s=Mi(r.d),a=s.length;return e?(t&&(n=t-a)>0?s=s.charAt(0)+"."+s.slice(1)+Kc(n):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(r.e<0?"e":"e+")+r.e):i<0?(s="0."+Kc(-i-1)+s,t&&(n=t-a)>0&&(s+=Kc(n))):i>=a?(s+=Kc(i+1-a),t&&(n=t-i-1)>0&&(s=s+"."+Kc(n))):((n=i+1)<a&&(s=s.slice(0,n)+"."+s.slice(n)),t&&(n=t-a)>0&&(i+1===a&&(s+="."),s+=Kc(n))),s}function aN(r,e){var t=r[0];for(e*=ct;t>=10;t/=10)e++;return e}function gT(r,e,t){if(e>sve)throw wt=!0,t&&(r.precision=t),Error(RK);return at(new r(mT),e,1,!0)}function Vl(r,e,t){if(e>DP)throw Error(RK);return at(new r(pT),e,t,!0)}function BK(r){var e=r.length-1,t=e*ct+1;if(e=r[e],e){for(;e%10==0;e/=10)t--;for(e=r[0];e>=10;e/=10)t++}return t}function Kc(r){for(var e="";r--;)e+="0";return e}function LK(r,e,t,n){var i,s=new r(1),a=Math.ceil(n/ct+4);for(wt=!1;;){if(t%2&&(s=s.times(e),e6(s.d,a)&&(i=!0)),t=ns(t/2),t===0){t=s.d.length-1,i&&s.d[t]===0&&++s.d[t];break}e=e.times(e),e6(e.d,a)}return wt=!0,s}function Z5(r){return r.d[r.d.length-1]&1}function $K(r,e,t){for(var n,i,s=new r(e[0]),a=0;++a<e.length;){if(i=new r(e[a]),!i.s){s=i;break}n=s.cmp(i),(n===t||n===0&&s.s===t)&&(s=i)}return s}function MP(r,e){var t,n,i,s,a,o,l,u=0,c=0,h=0,d=r.constructor,f=d.rounding,p=d.precision;if(!r.d||!r.d[0]||r.e>17)return new d(r.d?r.d[0]?r.s<0?0:1/0:1:r.s?r.s<0?0:r:NaN);for(e==null?(wt=!1,l=p):l=e,o=new d(.03125);r.e>-2;)r=r.times(o),h+=5;for(n=Math.log(Hn(2,h))/Math.LN10*2+5|0,l+=n,t=s=a=new d(1),d.precision=l;;){if(s=at(s.times(r),l,1),t=t.times(++c),o=a.plus(Mr(s,t,l,1)),Mi(o.d).slice(0,l)===Mi(a.d).slice(0,l)){for(i=h;i--;)a=at(a.times(a),l,1);if(e==null)if(u<3&&B1(a.d,l-n,f,u))d.precision=l+=10,t=s=o=new d(1),c=0,u++;else return at(a,d.precision=p,f,wt=!0);else return d.precision=p,a}a=o}}function Zh(r,e){var t,n,i,s,a,o,l,u,c,h,d,f=1,p=10,g=r,b=g.d,v=g.constructor,x=v.rounding,y=v.precision;if(g.s<0||!b||!b[0]||!g.e&&b[0]==1&&b.length==1)return new v(b&&!b[0]?-1/0:g.s!=1?NaN:b?0:g);if(e==null?(wt=!1,c=y):c=e,v.precision=c+=p,t=Mi(b),n=t.charAt(0),Math.abs(s=g.e)<15e14){for(;n<7&&n!=1||n==1&&t.charAt(1)>3;)g=g.times(r),t=Mi(g.d),n=t.charAt(0),f++;s=g.e,n>1?(g=new v("0."+t),s++):g=new v(n+"."+t.slice(1))}else return u=gT(v,c+2,y).times(s+""),g=Zh(new v(n+"."+t.slice(1)),c-p).plus(u),v.precision=y,e==null?at(g,y,x,wt=!0):g;for(h=g,l=a=g=Mr(g.minus(1),g.plus(1),c,1),d=at(g.times(g),c,1),i=3;;){if(a=at(a.times(d),c,1),u=l.plus(Mr(a,new v(i),c,1)),Mi(u.d).slice(0,c)===Mi(l.d).slice(0,c))if(l=l.times(2),s!==0&&(l=l.plus(gT(v,c+2,y).times(s+""))),l=Mr(l,new v(f),c,1),e==null)if(B1(l.d,c-p,x,o))v.precision=c+=p,u=a=g=Mr(h.minus(1),h.plus(1),c,1),d=at(g.times(g),c,1),i=o=1;else return at(l,v.precision=y,x,wt=!0);else return v.precision=y,l;l=u,i+=2}}function VK(r){return String(r.s*r.s/0)}function JE(r,e){var t,n,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(t<0&&(t=n),t+=+e.slice(n+1),e=e.substring(0,n)):t<0&&(t=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,r.e=t=t-n-1,r.d=[],n=(t+1)%ct,t<0&&(n+=ct),n<i){for(n&&r.d.push(+e.slice(0,n)),i-=ct;n<i;)r.d.push(+e.slice(n,n+=ct));e=e.slice(n),n=ct-e.length}else n-=i;for(;n--;)e+="0";r.d.push(+e),wt&&(r.e>r.constructor.maxE?(r.d=null,r.e=NaN):r.e<r.constructor.minE&&(r.e=0,r.d=[0]))}else r.e=0,r.d=[0];return r}function ove(r,e){var t,n,i,s,a,o,l,u,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),OK.test(e))return JE(r,e)}else if(e==="Infinity"||e==="NaN")return+e||(r.s=NaN),r.e=NaN,r.d=null,r;if(rve.test(e))t=16,e=e.toLowerCase();else if(tve.test(e))t=2;else if(nve.test(e))t=8;else throw Error(Nd+e);for(s=e.search(/p/i),s>0?(l=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),a=s>=0,n=r.constructor,a&&(e=e.replace(".",""),o=e.length,s=o-s,i=LK(n,new n(t),s,s*2)),u=QE(e,t,Yo),c=u.length-1,s=c;u[s]===0;--s)u.pop();return s<0?new n(r.s*0):(r.e=aN(u,c),r.d=u,wt=!1,a&&(r=Mr(r,i,o*4)),l&&(r=r.times(Math.abs(l)<54?Hn(2,l):Dd.pow(2,l))),wt=!0,r)}function lve(r,e){var t,n=e.d.length;if(n<3)return e.isZero()?e:P0(r,2,e,e);t=1.4*Math.sqrt(n),t=t>16?16:t|0,e=e.times(1/oN(5,t)),e=P0(r,2,e,e);for(var i,s=new r(5),a=new r(16),o=new r(20);t--;)i=e.times(e),e=e.times(s.plus(i.times(a.times(i).minus(o))));return e}function P0(r,e,t,n,i){var s,a,o,l,u=r.precision,c=Math.ceil(u/ct);for(wt=!1,l=t.times(t),o=new r(n);;){if(a=Mr(o.times(l),new r(e++*e++),u,1),o=i?n.plus(a):n.minus(a),n=Mr(a.times(l),new r(e++*e++),u,1),a=o.plus(n),a.d[c]!==void 0){for(s=c;a.d[s]===o.d[s]&&s--;);if(s==-1)break}s=o,o=n,n=a,a=s}return wt=!0,a.d.length=c+1,a}function oN(r,e){for(var t=r;--e;)t*=r;return t}function UK(r,e){var t,n=e.s<0,i=Vl(r,r.precision,1),s=i.times(.5);if(e=e.abs(),e.lte(s))return sc=n?4:1,e;if(t=e.divToInt(i),t.isZero())sc=n?3:2;else{if(e=e.minus(t.times(i)),e.lte(s))return sc=Z5(t)?n?2:3:n?4:1,e;sc=Z5(t)?n?1:4:n?3:2}return e.minus(i).abs()}function UF(r,e,t,n){var i,s,a,o,l,u,c,h,d,f=r.constructor,p=t!==void 0;if(p?(Ys(t,1,zd),n===void 0?n=f.rounding:Ys(n,0,8)):(t=f.precision,n=f.rounding),!r.isFinite())c=VK(r);else{for(c=ru(r),a=c.indexOf("."),p?(i=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):i=e,a>=0&&(c=c.replace(".",""),d=new f(1),d.e=c.length-a,d.d=QE(ru(d),10,i),d.e=d.d.length),h=QE(c,10,i),s=l=h.length;h[--l]==0;)h.pop();if(!h[0])c=p?"0p+0":"0";else{if(a<0?s--:(r=new f(r),r.d=h,r.e=s,r=Mr(r,d,t,n,0,i),h=r.d,s=r.e,u=PK),a=h[t],o=i/2,u=u||h[t+1]!==void 0,u=n<4?(a!==void 0||u)&&(n===0||n===(r.s<0?3:2)):a>o||a===o&&(n===4||u||n===6&&h[t-1]&1||n===(r.s<0?8:7)),h.length=t,u)for(;++h[--t]>i-1;)h[t]=0,t||(++s,h.unshift(1));for(l=h.length;!h[l-1];--l);for(a=0,c="";a<l;a++)c+=CP.charAt(h[a]);if(p){if(l>1)if(e==16||e==8){for(a=e==16?4:3,--l;l%a;l++)c+="0";for(h=QE(c,i,e),l=h.length;!h[l-1];--l);for(a=1,c="1.";a<l;a++)c+=CP.charAt(h[a])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>l)for(s-=l;s--;)c+="0";else s<l&&(c=c.slice(0,s)+"."+c.slice(s))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return r.s<0?"-"+c:c}function e6(r,e){if(r.length>e)return r.length=e,!0}function uve(r){return new this(r).abs()}function cve(r){return new this(r).acos()}function hve(r){return new this(r).acosh()}function dve(r,e){return new this(r).plus(e)}function fve(r){return new this(r).asin()}function mve(r){return new this(r).asinh()}function pve(r){return new this(r).atan()}function gve(r){return new this(r).atanh()}function vve(r,e){r=new this(r),e=new this(e);var t,n=this.precision,i=this.rounding,s=n+4;return!r.s||!e.s?t=new this(NaN):!r.d&&!e.d?(t=Vl(this,s,1).times(e.s>0?.25:.75),t.s=r.s):!e.d||r.isZero()?(t=e.s<0?Vl(this,n,i):new this(0),t.s=r.s):!r.d||e.isZero()?(t=Vl(this,s,1).times(.5),t.s=r.s):e.s<0?(this.precision=s,this.rounding=1,t=this.atan(Mr(r,e,s,1)),e=Vl(this,s,1),this.precision=n,this.rounding=i,t=r.s<0?t.minus(e):t.plus(e)):t=this.atan(Mr(r,e,s,1)),t}function yve(r){return new this(r).cbrt()}function bve(r){return at(r=new this(r),r.e+1,2)}function wve(r,e,t){return new this(r).clamp(e,t)}function xve(r){if(!r||typeof r!="object")throw Error(sN+"Object expected");var e,t,n,i=r.defaults===!0,s=["precision",1,zd,"rounding",0,8,"toExpNeg",-Ag,0,"toExpPos",0,Ag,"maxE",0,Ag,"minE",-Ag,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(t=s[e],i&&(this[t]=NP[t]),(n=r[t])!==void 0)if(ns(n)===n&&n>=s[e+1]&&n<=s[e+2])this[t]=n;else throw Error(Nd+t+": "+n);if(t="crypto",i&&(this[t]=NP[t]),(n=r[t])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(kK);else this[t]=!1;else throw Error(Nd+t+": "+n);return this}function _ve(r){return new this(r).cos()}function Ave(r){return new this(r).cosh()}function zK(r){var e,t,n;function i(s){var a,o,l,u=this;if(!(u instanceof i))return new i(s);if(u.constructor=i,t6(s)){u.s=s.s,wt?!s.d||s.e>i.maxE?(u.e=NaN,u.d=null):s.e<i.minE?(u.e=0,u.d=[0]):(u.e=s.e,u.d=s.d.slice()):(u.e=s.e,u.d=s.d?s.d.slice():s.d);return}if(l=typeof s,l==="number"){if(s===0){u.s=1/s<0?-1:1,u.e=0,u.d=[0];return}if(s<0?(s=-s,u.s=-1):u.s=1,s===~~s&&s<1e7){for(a=0,o=s;o>=10;o/=10)a++;wt?a>i.maxE?(u.e=NaN,u.d=null):a<i.minE?(u.e=0,u.d=[0]):(u.e=a,u.d=[s]):(u.e=a,u.d=[s]);return}if(s*0!==0){s||(u.s=NaN),u.e=NaN,u.d=null;return}return JE(u,s.toString())}if(l==="string")return(o=s.charCodeAt(0))===45?(s=s.slice(1),u.s=-1):(o===43&&(s=s.slice(1)),u.s=1),OK.test(s)?JE(u,s):ove(u,s);if(l==="bigint")return s<0?(s=-s,u.s=-1):u.s=1,JE(u,s.toString());throw Error(Nd+s)}if(i.prototype=De,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=xve,i.clone=zK,i.isDecimal=t6,i.abs=uve,i.acos=cve,i.acosh=hve,i.add=dve,i.asin=fve,i.asinh=mve,i.atan=pve,i.atanh=gve,i.atan2=vve,i.cbrt=yve,i.ceil=bve,i.clamp=wve,i.cos=_ve,i.cosh=Ave,i.div=Eve,i.exp=Sve,i.floor=Tve,i.hypot=Cve,i.ln=Nve,i.log=Dve,i.log10=Ive,i.log2=Mve,i.max=Pve,i.min=Rve,i.mod=kve,i.mul=Fve,i.pow=Ove,i.random=Bve,i.round=Lve,i.sign=$ve,i.sin=Vve,i.sinh=Uve,i.sqrt=zve,i.sub=jve,i.sum=qve,i.tan=Hve,i.tanh=Gve,i.trunc=Wve,r===void 0&&(r={}),r&&r.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)r.hasOwnProperty(t=n[e++])||(r[t]=this[t]);return i.config(r),i}function Eve(r,e){return new this(r).div(e)}function Sve(r){return new this(r).exp()}function Tve(r){return at(r=new this(r),r.e+1,3)}function Cve(){var r,e,t=new this(0);for(wt=!1,r=0;r<arguments.length;)if(e=new this(arguments[r++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return wt=!0,new this(1/0);t=e}return wt=!0,t.sqrt()}function t6(r){return r instanceof Dd||r&&r.toStringTag===FK||!1}function Nve(r){return new this(r).ln()}function Dve(r,e){return new this(r).log(e)}function Mve(r){return new this(r).log(2)}function Ive(r){return new this(r).log(10)}function Pve(){return $K(this,arguments,-1)}function Rve(){return $K(this,arguments,1)}function kve(r,e){return new this(r).mod(e)}function Fve(r,e){return new this(r).mul(e)}function Ove(r,e){return new this(r).pow(e)}function Bve(r){var e,t,n,i,s=0,a=new this(1),o=[];if(r===void 0?r=this.precision:Ys(r,1,zd),n=Math.ceil(r/ct),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));s<n;)i=e[s],i>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:o[s++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);s<n;)i=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,s):(o.push(i%1e7),s+=4);s=n/4}else throw Error(kK);else for(;s<n;)o[s++]=Math.random()*1e7|0;for(n=o[--s],r%=ct,n&&r&&(i=Hn(10,ct-r),o[s]=(n/i|0)*i);o[s]===0;s--)o.pop();if(s<0)t=0,o=[0];else{for(t=-1;o[0]===0;t-=ct)o.shift();for(n=1,i=o[0];i>=10;i/=10)n++;n<ct&&(t-=ct-n)}return a.e=t,a.d=o,a}function Lve(r){return at(r=new this(r),r.e+1,this.rounding)}function $ve(r){return r=new this(r),r.d?r.d[0]?r.s:0*r.s:r.s||NaN}function Vve(r){return new this(r).sin()}function Uve(r){return new this(r).sinh()}function zve(r){return new this(r).sqrt()}function jve(r,e){return new this(r).sub(e)}function qve(){var r=0,e=arguments,t=new this(e[r]);for(wt=!1;t.s&&++r<e.length;)t=t.plus(e[r]);return wt=!0,at(t,this.precision,this.rounding)}function Hve(r){return new this(r).tan()}function Gve(r){return new this(r).tanh()}function Wve(r){return at(r=new this(r),r.e+1,1)}De[Symbol.for("nodejs.util.inspect.custom")]=De.toString;De[Symbol.toStringTag]="Decimal";var Dd=De.constructor=zK(NP);mT=new Dd(mT);pT=new Dd(pT);var Kve="BigNumber",Xve=["?on","config"],Yve=Y(Kve,Xve,r=>{var{on:e,config:t}=r,n=Dd.clone({precision:t.precision,modulo:Dd.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,s){i.precision!==s.precision&&n.config({precision:i.precision})}),n},{isClass:!0});const zi=Math.cosh||function(r){return Math.abs(r)<1e-9?1-r:(Math.exp(r)+Math.exp(-r))*.5},Ua=Math.sinh||function(r){return Math.abs(r)<1e-9?r:(Math.exp(r)-Math.exp(-r))*.5},Qve=r=>{const e=Math.sin(.5*r);return-2*e*e},YD=function(r,e){return r=Math.abs(r),e=Math.abs(e),r<e&&([r,e]=[e,r]),r<1e8?Math.sqrt(r*r+e*e):(e/=r,r*Math.sqrt(1+e*e))},$p=function(){throw SyntaxError("Invalid Param")};function QD(r,e){const t=Math.abs(r),n=Math.abs(e);return r===0?Math.log(n):e===0?Math.log(t):t<3e3&&n<3e3?Math.log(r*r+e*e)*.5:(r=r*.5,e=e*.5,.5*Math.log(r*r+e*e)+Math.LN2)}const Jve={re:0,im:0},mf=function(r,e){const t=Jve;if(r==null)t.re=t.im=0;else if(e!==void 0)t.re=r,t.im=e;else switch(typeof r){case"object":if("im"in r&&"re"in r)t.re=r.re,t.im=r.im;else if("abs"in r&&"arg"in r){if(!isFinite(r.abs)&&isFinite(r.arg))return xe.INFINITY;t.re=r.abs*Math.cos(r.arg),t.im=r.abs*Math.sin(r.arg)}else if("r"in r&&"phi"in r){if(!isFinite(r.r)&&isFinite(r.phi))return xe.INFINITY;t.re=r.r*Math.cos(r.phi),t.im=r.r*Math.sin(r.phi)}else r.length===2?(t.re=r[0],t.im=r[1]):$p();break;case"string":t.im=t.re=0;const n=r.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,s=0;n===null&&$p();for(let a=0;a<n.length;a++){const o=n[a];o===" "||o==="	"||o===`
`||(o==="+"?i++:o==="-"?s++:o==="i"||o==="I"?(i+s===0&&$p(),n[a+1]!==" "&&!isNaN(n[a+1])?(t.im+=parseFloat((s%2?"-":"")+n[a+1]),a++):t.im+=parseFloat((s%2?"-":"")+"1"),i=s=0):((i+s===0||isNaN(o))&&$p(),n[a+1]==="i"||n[a+1]==="I"?(t.im+=parseFloat((s%2?"-":"")+o),a++):t.re+=parseFloat((s%2?"-":"")+o),i=s=0))}i+s>0&&$p();break;case"number":t.im=0,t.re=r;break;default:$p()}return isNaN(t.re)||isNaN(t.im),t};function xe(r,e){if(!(this instanceof xe))return new xe(r,e);const t=mf(r,e);this.re=t.re,this.im=t.im}xe.prototype={re:0,im:0,sign:function(){const r=YD(this.re,this.im);return new xe(this.re/r,this.im/r)},add:function(r,e){const t=mf(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im));return n||i?n&&i?xe.NAN:xe.INFINITY:new xe(this.re+t.re,this.im+t.im)},sub:function(r,e){const t=mf(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im));return n||i?n&&i?xe.NAN:xe.INFINITY:new xe(this.re-t.re,this.im-t.im)},mul:function(r,e){const t=mf(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im)),s=this.re===0&&this.im===0,a=t.re===0&&t.im===0;return n&&a||i&&s?xe.NAN:n||i?xe.INFINITY:t.im===0&&this.im===0?new xe(this.re*t.re,0):new xe(this.re*t.re-this.im*t.im,this.re*t.im+this.im*t.re)},div:function(r,e){const t=mf(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im)),s=this.re===0&&this.im===0,a=t.re===0&&t.im===0;if(s&&a||n&&i)return xe.NAN;if(a||n)return xe.INFINITY;if(s||i)return xe.ZERO;if(t.im===0)return new xe(this.re/t.re,this.im/t.re);if(Math.abs(t.re)<Math.abs(t.im)){const o=t.re/t.im,l=t.re*o+t.im;return new xe((this.re*o+this.im)/l,(this.im*o-this.re)/l)}else{const o=t.im/t.re,l=t.im*o+t.re;return new xe((this.re+this.im*o)/l,(this.im-this.re*o)/l)}},pow:function(r,e){const t=mf(r,e),n=this.re===0&&this.im===0;if(t.re===0&&t.im===0)return xe.ONE;if(t.im===0){if(this.im===0&&this.re>0)return new xe(Math.pow(this.re,t.re),0);if(this.re===0)switch((t.re%4+4)%4){case 0:return new xe(Math.pow(this.im,t.re),0);case 1:return new xe(0,Math.pow(this.im,t.re));case 2:return new xe(-Math.pow(this.im,t.re),0);case 3:return new xe(0,-Math.pow(this.im,t.re))}}if(n&&t.re>0)return xe.ZERO;const s=Math.atan2(this.im,this.re),a=QD(this.re,this.im);let o=Math.exp(t.re*a-t.im*s),l=t.im*a+t.re*s;return new xe(o*Math.cos(l),o*Math.sin(l))},sqrt:function(){const r=this.re,e=this.im;if(e===0)return r>=0?new xe(Math.sqrt(r),0):new xe(0,Math.sqrt(-r));const t=YD(r,e);let n=Math.sqrt(.5*(t+Math.abs(r))),i=Math.abs(e)/(2*n);return r>=0?new xe(n,e<0?-i:i):new xe(i,e<0?-n:n)},exp:function(){const r=Math.exp(this.re);return this.im===0?new xe(r,0):new xe(r*Math.cos(this.im),r*Math.sin(this.im))},expm1:function(){const r=this.re,e=this.im;return new xe(Math.expm1(r)*Math.cos(e)+Qve(e),Math.exp(r)*Math.sin(e))},log:function(){const r=this.re,e=this.im;return e===0&&r>0?new xe(Math.log(r),0):new xe(QD(r,e),Math.atan2(e,r))},abs:function(){return YD(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const r=this.re,e=this.im;return new xe(Math.sin(r)*zi(e),Math.cos(r)*Ua(e))},cos:function(){const r=this.re,e=this.im;return new xe(Math.cos(r)*zi(e),-Math.sin(r)*Ua(e))},tan:function(){const r=2*this.re,e=2*this.im,t=Math.cos(r)+zi(e);return new xe(Math.sin(r)/t,Ua(e)/t)},cot:function(){const r=2*this.re,e=2*this.im,t=Math.cos(r)-zi(e);return new xe(-Math.sin(r)/t,Ua(e)/t)},sec:function(){const r=this.re,e=this.im,t=.5*zi(2*e)+.5*Math.cos(2*r);return new xe(Math.cos(r)*zi(e)/t,Math.sin(r)*Ua(e)/t)},csc:function(){const r=this.re,e=this.im,t=.5*zi(2*e)-.5*Math.cos(2*r);return new xe(Math.sin(r)*zi(e)/t,-Math.cos(r)*Ua(e)/t)},asin:function(){const r=this.re,e=this.im,t=new xe(e*e-r*r+1,-2*r*e).sqrt(),n=new xe(t.re-e,t.im+r).log();return new xe(n.im,-n.re)},acos:function(){const r=this.re,e=this.im,t=new xe(e*e-r*r+1,-2*r*e).sqrt(),n=new xe(t.re-e,t.im+r).log();return new xe(Math.PI/2-n.im,n.re)},atan:function(){const r=this.re,e=this.im;if(r===0){if(e===1)return new xe(0,1/0);if(e===-1)return new xe(0,-1/0)}const t=r*r+(1-e)*(1-e),n=new xe((1-e*e-r*r)/t,-2*r/t).log();return new xe(-.5*n.im,.5*n.re)},acot:function(){const r=this.re,e=this.im;if(e===0)return new xe(Math.atan2(1,r),0);const t=r*r+e*e;return t!==0?new xe(r/t,-e/t).atan():new xe(r!==0?r/0:0,e!==0?-e/0:0).atan()},asec:function(){const r=this.re,e=this.im;if(r===0&&e===0)return new xe(0,1/0);const t=r*r+e*e;return t!==0?new xe(r/t,-e/t).acos():new xe(r!==0?r/0:0,e!==0?-e/0:0).acos()},acsc:function(){const r=this.re,e=this.im;if(r===0&&e===0)return new xe(Math.PI/2,1/0);const t=r*r+e*e;return t!==0?new xe(r/t,-e/t).asin():new xe(r!==0?r/0:0,e!==0?-e/0:0).asin()},sinh:function(){const r=this.re,e=this.im;return new xe(Ua(r)*Math.cos(e),zi(r)*Math.sin(e))},cosh:function(){const r=this.re,e=this.im;return new xe(zi(r)*Math.cos(e),Ua(r)*Math.sin(e))},tanh:function(){const r=2*this.re,e=2*this.im,t=zi(r)+Math.cos(e);return new xe(Ua(r)/t,Math.sin(e)/t)},coth:function(){const r=2*this.re,e=2*this.im,t=zi(r)-Math.cos(e);return new xe(Ua(r)/t,-Math.sin(e)/t)},csch:function(){const r=this.re,e=this.im,t=Math.cos(2*e)-zi(2*r);return new xe(-2*Ua(r)*Math.cos(e)/t,2*zi(r)*Math.sin(e)/t)},sech:function(){const r=this.re,e=this.im,t=Math.cos(2*e)+zi(2*r);return new xe(2*zi(r)*Math.cos(e)/t,-2*Ua(r)*Math.sin(e)/t)},asinh:function(){const r=this.re,e=this.im;if(e===0){if(r===0)return new xe(0,0);const s=Math.abs(r),a=Math.log(s+Math.sqrt(s*s+1));return new xe(r<0?-a:a,0)}const t=r*r-e*e+1,n=2*r*e,i=new xe(t,n).sqrt();return new xe(r+i.re,e+i.im).log()},acosh:function(){const r=this.re,e=this.im;if(e===0){if(r>1)return new xe(Math.log(r+Math.sqrt(r-1)*Math.sqrt(r+1)),0);if(r<-1){const i=Math.sqrt(r*r-1);return new xe(Math.log(-r+i),Math.PI)}return new xe(0,Math.acos(r))}const t=new xe(r-1,e).sqrt(),n=new xe(r+1,e).sqrt();return new xe(r+t.re*n.re-t.im*n.im,e+t.re*n.im+t.im*n.re).log()},atanh:function(){const r=this.re,e=this.im;if(e===0){if(r===0)return new xe(0,0);if(r===1)return new xe(1/0,0);if(r===-1)return new xe(-1/0,0);if(-1<r&&r<1)return new xe(.5*Math.log((1+r)/(1-r)),0);if(r>1){const l=(r+1)/(r-1);return new xe(.5*Math.log(l),-Math.PI/2)}const o=(1+r)/(1-r);return new xe(.5*Math.log(-o),Math.PI/2)}const t=1-r,n=1+r,i=t*t+e*e;if(i===0)return new xe(r!==-1?r/0:0,e!==0?e/0:0);const s=(n*t-e*e)/i,a=(e*t+n*e)/i;return new xe(QD(s,a)/2,Math.atan2(a,s)/2)},acoth:function(){const r=this.re,e=this.im;if(r===0&&e===0)return new xe(0,Math.PI/2);const t=r*r+e*e;return t!==0?new xe(r/t,-e/t).atanh():new xe(r!==0?r/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const r=this.re,e=this.im;if(e===0){if(r===0)return new xe(1/0,0);const n=1/r;return new xe(Math.log(n+Math.sqrt(n*n+1)),0)}const t=r*r+e*e;return t!==0?new xe(r/t,-e/t).asinh():new xe(r!==0?r/0:0,e!==0?-e/0:0).asinh()},asech:function(){const r=this.re,e=this.im;if(this.isZero())return xe.INFINITY;const t=r*r+e*e;return t!==0?new xe(r/t,-e/t).acosh():new xe(r!==0?r/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return xe.INFINITY;if(this.isInfinite())return xe.ZERO;const r=this.re,e=this.im,t=r*r+e*e;return new xe(r/t,-e/t)},conjugate:function(){return new xe(this.re,-this.im)},neg:function(){return new xe(-this.re,-this.im)},ceil:function(r){return r=Math.pow(10,r||0),new xe(Math.ceil(this.re*r)/r,Math.ceil(this.im*r)/r)},floor:function(r){return r=Math.pow(10,r||0),new xe(Math.floor(this.re*r)/r,Math.floor(this.im*r)/r)},round:function(r){return r=Math.pow(10,r||0),new xe(Math.round(this.re*r)/r,Math.round(this.im*r)/r)},equals:function(r,e){const t=mf(r,e);return Math.abs(t.re-this.re)<=xe.EPSILON&&Math.abs(t.im-this.im)<=xe.EPSILON},clone:function(){return new xe(this.re,this.im)},toString:function(){let r=this.re,e=this.im,t="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(r)<xe.EPSILON&&(r=0),Math.abs(e)<xe.EPSILON&&(e=0),e===0?t+r:(r!==0?(t+=r,t+=" ",e<0?(e=-e,t+="-"):t+="+",t+=" "):e<0&&(e=-e,t+="-"),e!==1&&(t+=e),t+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};xe.ZERO=new xe(0,0);xe.ONE=new xe(1,0);xe.I=new xe(0,1);xe.PI=new xe(Math.PI,0);xe.E=new xe(Math.E,0);xe.INFINITY=new xe(1/0,1/0);xe.NAN=new xe(NaN,NaN);xe.EPSILON=1e-15;var Zve="Complex",e0e=[],t0e=Y(Zve,e0e,()=>(Object.defineProperty(xe,"name",{value:"Complex"}),xe.prototype.constructor=xe,xe.prototype.type="Complex",xe.prototype.isComplex=!0,xe.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},xe.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},xe.prototype.format=function(r){var e="",t=this.im,n=this.re,i=Xm(this.re,r),s=Xm(this.im,r),a=st(r)?r:r?r.precision:null;if(a!==null){var o=Math.pow(10,-a);Math.abs(n/t)<o&&(n=0),Math.abs(t/n)<o&&(t=0)}return t===0?e=i:n===0?t===1?e="i":t===-1?e="-i":e=s+"i":t<0?t===-1?e=i+" - i":e=i+" - "+s.substring(1)+"i":t===1?e=i+" + i":e=i+" + "+s+"i",e},xe.fromPolar=function(r){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return xe(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var t=arguments[0],n=arguments[1];if(st(t)){if(xa(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),st(n))return new xe({r:t,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},xe.prototype.valueOf=xe.prototype.toString,xe.fromJSON=function(r){return new xe(r)},xe.compare=function(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0},xe),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(r){if(isNaN(r))throw new Error("");return r});const it=BigInt(0),Bt=BigInt(1),ci=BigInt(2),Wb=BigInt(3),Eg=BigInt(5),Us=BigInt(10);BigInt(Number.MAX_SAFE_INTEGER);const r0e=2e3,Ue={s:Bt,n:it,d:Bt};function hu(r,e){try{r=BigInt(r)}catch{throw Hc()}return r*e}function Eo(r){return typeof r=="bigint"?r:Math.floor(r)}function Ur(r,e){if(e===it)throw zF();const t=Object.create(ja.prototype);t.s=r<it?-Bt:Bt,r=r<it?-r:r;const n=gf(r,e);return t.n=r/n,t.d=e/n,t}const n0e=[ci*ci,ci,ci*ci,ci,ci*ci,ci*Wb,ci,ci*Wb];function Vp(r){const e=Object.create(null);if(r<=Bt)return e[r]=Bt,e;const t=n=>{e[n]=(e[n]||it)+Bt};for(;r%ci===it;)t(ci),r/=ci;for(;r%Wb===it;)t(Wb),r/=Wb;for(;r%Eg===it;)t(Eg),r/=Eg;for(let n=0,i=ci+Eg;i*i<=r;){for(;r%i===it;)t(i),r/=i;i+=n0e[n],n=n+1&7}return r>Bt&&t(r),e}const ri=function(r,e){let t=it,n=Bt,i=Bt;if(r!=null)if(e!==void 0){if(typeof r=="bigint")t=r;else{if(isNaN(r))throw Hc();if(r%1!==0)throw r6();t=BigInt(r)}if(typeof e=="bigint")n=e;else{if(isNaN(e))throw Hc();if(e%1!==0)throw r6();n=BigInt(e)}i=t*n}else if(typeof r=="object"){if("d"in r&&"n"in r)t=BigInt(r.n),n=BigInt(r.d),"s"in r&&(t*=BigInt(r.s));else if(0 in r)t=BigInt(r[0]),1 in r&&(n=BigInt(r[1]));else if(typeof r=="bigint")t=r;else throw Hc();i=t*n}else if(typeof r=="number"){if(isNaN(r))throw Hc();if(r<0&&(i=-Bt,r=-r),r%1===0)t=BigInt(r);else{let s=1,a=0,o=1,l=1,u=1,c=1e7;for(r>=1&&(s=10**Math.floor(1+Math.log10(r)),r/=s);o<=c&&u<=c;){let h=(a+l)/(o+u);if(r===h){o+u<=c?(t=a+l,n=o+u):u>o?(t=l,n=u):(t=a,n=o);break}else r>h?(a+=l,o+=u):(l+=a,u+=o),o>c?(t=l,n=u):(t=a,n=o)}t=BigInt(t)*BigInt(s),n=BigInt(n)}}else if(typeof r=="string"){let s=0,a=it,o=it,l=it,u=Bt,c=Bt,h=r.replace(/_/g,"").match(/\d+|./g);if(h===null)throw Hc();if(h[s]==="-"?(i=-Bt,s++):h[s]==="+"&&s++,h.length===s+1?o=hu(h[s++],i):h[s+1]==="."||h[s]==="."?(h[s]!=="."&&(a=hu(h[s++],i)),s++,(s+1===h.length||h[s+1]==="("&&h[s+3]===")"||h[s+1]==="'"&&h[s+3]==="'")&&(o=hu(h[s],i),u=Us**BigInt(h[s].length),s++),(h[s]==="("&&h[s+2]===")"||h[s]==="'"&&h[s+2]==="'")&&(l=hu(h[s+1],i),c=Us**BigInt(h[s+1].length)-Bt,s+=3)):h[s+1]==="/"||h[s+1]===":"?(o=hu(h[s],i),u=hu(h[s+2],Bt),s+=3):h[s+3]==="/"&&h[s+1]===" "&&(a=hu(h[s],i),o=hu(h[s+2],i),u=hu(h[s+4],Bt),s+=5),h.length<=s)n=u*c,i=t=l+n*a+c*o;else throw Hc()}else if(typeof r=="bigint")t=r,i=r,n=Bt;else throw Hc();if(n===it)throw zF();Ue.s=i<it?-Bt:Bt,Ue.n=t<it?-t:t,Ue.d=n<it?-n:n};function i0e(r,e,t){let n=Bt;for(;e>it;r=r*r%t,e>>=Bt)e&Bt&&(n=n*r%t);return n}function s0e(r,e){for(;e%ci===it;e/=ci);for(;e%Eg===it;e/=Eg);if(e===Bt)return it;let t=Us%e,n=1;for(;t!==Bt;n++)if(t=t*Us%e,n>r0e)return it;return BigInt(n)}function a0e(r,e,t){let n=Bt,i=i0e(Us,t,e);for(let s=0;s<300;s++){if(n===i)return BigInt(s);n=n*Us%e,i=i*Us%e}return 0}function gf(r,e){if(!r)return e;if(!e)return r;for(;;){if(r%=e,!r)return e;if(e%=r,!e)return r}}function ja(r,e){if(ri(r,e),this instanceof ja)r=gf(Ue.d,Ue.n),this.s=Ue.s,this.n=Ue.n/r,this.d=Ue.d/r;else return Ur(Ue.s*Ue.n,Ue.d)}const zF=function(){return new Error("Division by Zero")},Hc=function(){return new Error("Invalid argument")},r6=function(){return new Error("Parameters must be integer")};ja.prototype={s:Bt,n:it,d:Bt,abs:function(){return Ur(this.n,this.d)},neg:function(){return Ur(-this.s*this.n,this.d)},add:function(r,e){return ri(r,e),Ur(this.s*this.n*Ue.d+Ue.s*this.d*Ue.n,this.d*Ue.d)},sub:function(r,e){return ri(r,e),Ur(this.s*this.n*Ue.d-Ue.s*this.d*Ue.n,this.d*Ue.d)},mul:function(r,e){return ri(r,e),Ur(this.s*Ue.s*this.n*Ue.n,this.d*Ue.d)},div:function(r,e){return ri(r,e),Ur(this.s*Ue.s*this.n*Ue.d,this.d*Ue.n)},clone:function(){return Ur(this.s*this.n,this.d)},mod:function(r,e){if(r===void 0)return Ur(this.s*this.n%this.d,Bt);if(ri(r,e),it===Ue.n*this.d)throw zF();return Ur(this.s*(Ue.d*this.n)%(Ue.n*this.d),Ue.d*this.d)},gcd:function(r,e){return ri(r,e),Ur(gf(Ue.n,this.n)*gf(Ue.d,this.d),Ue.d*this.d)},lcm:function(r,e){return ri(r,e),Ue.n===it&&this.n===it?Ur(it,Bt):Ur(Ue.n*this.n,gf(Ue.n,this.n)*gf(Ue.d,this.d))},inverse:function(){return Ur(this.s*this.d,this.n)},pow:function(r,e){if(ri(r,e),Ue.d===Bt)return Ue.s<it?Ur((this.s*this.d)**Ue.n,this.n**Ue.n):Ur((this.s*this.n)**Ue.n,this.d**Ue.n);if(this.s<it)return null;let t=Vp(this.n),n=Vp(this.d),i=Bt,s=Bt;for(let a in t)if(a!=="1"){if(a==="0"){i=it;break}if(t[a]*=Ue.n,t[a]%Ue.d===it)t[a]/=Ue.d;else return null;i*=BigInt(a)**t[a]}for(let a in n)if(a!=="1"){if(n[a]*=Ue.n,n[a]%Ue.d===it)n[a]/=Ue.d;else return null;s*=BigInt(a)**n[a]}return Ue.s<it?Ur(s,i):Ur(i,s)},log:function(r,e){if(ri(r,e),this.s<=it||Ue.s<=it)return null;const t=Object.create(null),n=Vp(Ue.n),i=Vp(Ue.d),s=Vp(this.n),a=Vp(this.d);for(const u in i)n[u]=(n[u]||it)-i[u];for(const u in a)s[u]=(s[u]||it)-a[u];for(const u in n)u!=="1"&&(t[u]=!0);for(const u in s)u!=="1"&&(t[u]=!0);let o=null,l=null;for(const u in t){const c=n[u]||it,h=s[u]||it;if(c===it){if(h!==it)return null;continue}let d=h,f=c;const p=gf(d,f);if(d/=p,f/=p,o===null&&l===null)o=d,l=f;else if(d*l!==o*f)return null}return o!==null&&l!==null?Ur(o,l):null},equals:function(r,e){return ri(r,e),this.s*this.n*Ue.d===Ue.s*Ue.n*this.d},lt:function(r,e){return ri(r,e),this.s*this.n*Ue.d<Ue.s*Ue.n*this.d},lte:function(r,e){return ri(r,e),this.s*this.n*Ue.d<=Ue.s*Ue.n*this.d},gt:function(r,e){return ri(r,e),this.s*this.n*Ue.d>Ue.s*Ue.n*this.d},gte:function(r,e){return ri(r,e),this.s*this.n*Ue.d>=Ue.s*Ue.n*this.d},compare:function(r,e){ri(r,e);let t=this.s*this.n*Ue.d-Ue.s*Ue.n*this.d;return(it<t)-(t<it)},ceil:function(r){return r=Us**BigInt(r||0),Ur(Eo(this.s*r*this.n/this.d)+(r*this.n%this.d>it&&this.s>=it?Bt:it),r)},floor:function(r){return r=Us**BigInt(r||0),Ur(Eo(this.s*r*this.n/this.d)-(r*this.n%this.d>it&&this.s<it?Bt:it),r)},round:function(r){return r=Us**BigInt(r||0),Ur(Eo(this.s*r*this.n/this.d)+this.s*((this.s>=it?Bt:it)+ci*(r*this.n%this.d)>this.d?Bt:it),r)},roundTo:function(r,e){ri(r,e);const t=this.n*Ue.d,n=this.d*Ue.n,i=t%n;let s=Eo(t/n);return i+i>=n&&s++,Ur(this.s*s*Ue.n,Ue.d)},divisible:function(r,e){return ri(r,e),Ue.n===it?!1:this.n*Ue.d%(Ue.n*this.d)===it},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(r=15){let e=this.n,t=this.d,n=s0e(e,t),i=a0e(e,t,n),s=this.s<it?"-":"";if(s+=Eo(e/t),e%=t,e*=Us,e&&(s+="."),n){for(let a=i;a--;)s+=Eo(e/t),e%=t,e*=Us;s+="(";for(let a=n;a--;)s+=Eo(e/t),e%=t,e*=Us;s+=")"}else for(let a=r;e&&a--;)s+=Eo(e/t),e%=t,e*=Us;return s},toFraction:function(r=!1){let e=this.n,t=this.d,n=this.s<it?"-":"";if(t===Bt)n+=e;else{const i=Eo(e/t);r&&i>it&&(n+=i,n+=" ",e%=t),n+=e,n+="/",n+=t}return n},toLatex:function(r=!1){let e=this.n,t=this.d,n=this.s<it?"-":"";if(t===Bt)n+=e;else{const i=Eo(e/t);r&&i>it&&(n+=i,e%=t),n+="\\frac{",n+=e,n+="}{",n+=t,n+="}"}return n},toContinued:function(){let r=this.n,e=this.d;const t=[];for(;e;){t.push(Eo(r/e));const n=r%e;r=e,e=n}return t},simplify:function(r=.001){const e=BigInt(Math.ceil(1/r)),t=this.abs(),n=t.toContinued();for(let i=1;i<n.length;i++){let s=Ur(n[i-1],Bt);for(let o=i-2;o>=0;o--)s=s.inverse().add(n[o]);let a=s.sub(t);if(a.n*e<a.d)return s.mul(this.s)}return this}};var o0e="Fraction",l0e=[],u0e=Y(o0e,l0e,()=>(Object.defineProperty(ja,"name",{value:"Fraction"}),ja.prototype.constructor=ja,ja.prototype.type="Fraction",ja.prototype.isFraction=!0,ja.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},ja.fromJSON=function(r){return new ja(r)},ja),{isClass:!0}),c0e="Range",h0e=[],d0e=Y(c0e,h0e,()=>{function r(e,t,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");var i=e!=null,s=t!=null,a=n!=null;if(i){if(_t(e))e=e.toNumber();else if(typeof e!="number"&&!Gb(e))throw new TypeError("Parameter start must be a number or bigint")}if(s){if(_t(t))t=t.toNumber();else if(typeof t!="number"&&!Gb(t))throw new TypeError("Parameter end must be a number or bigint")}if(a){if(_t(n))n=n.toNumber();else if(typeof n!="number"&&!Gb(n))throw new TypeError("Parameter step must be a number or bigint")}if(this.start=i?parseFloat(e):0,this.end=s?parseFloat(t):0,this.step=a?parseFloat(n):1,a&&pi(this.step,0))throw new Error("Step must not be zero")}return r.prototype.type="Range",r.prototype.isRange=!0,r.parse=function(e){if(typeof e!="string")return null;var t=e.split(":"),n=t.map(function(s){return parseFloat(s)}),i=n.some(function(s){return isNaN(s)});if(i)return null;switch(n.length){case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[2],n[1]);default:return null}},r.prototype.clone=function(){return new r(this.start,this.end,this.step)},r.prototype.size=function(){var e=0,t=this.start,n=this.step,i=this.end,s=i-t;return Jh(n)===Jh(s)?e=Math.ceil(s/n):s===0&&(e=0),isNaN(e)&&(e=0),[e]},r.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},r.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},r.prototype.forEach=function(e){var t=this.start,n=this.step,i=this.end,s=0;if(n>0)for(;t<i;)e(t,[s],this),t+=n,s++;else if(n<0)for(;t>i;)e(t,[s],this),t+=n,s++},r.prototype.map=function(e){var t=[];return this.forEach(function(n,i,s){t[i[0]]=e(n,i,s)}),t},r.prototype.toArray=function(){var e=[];return this.forEach(function(t,n){e[n[0]]=t}),e},r.prototype.valueOf=function(){return this.toArray()},r.prototype.format=function(e){var t=Xm(this.start,e);return this.step!==1&&(t+=":"+Xm(this.step,e)),t+=":"+Xm(this.end,e),t},r.prototype.toString=function(){return this.format()},r.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},r.fromJSON=function(e){return new r(e.start,e.end,e.step)},r},{isClass:!0}),f0e="Matrix",m0e=[],p0e=Y(f0e,m0e,()=>{function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator")}return r.prototype.type="Matrix",r.prototype.isMatrix=!0,r.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},r.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},r.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},r.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},r.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},r.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},r.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},r.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},r.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},r.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},r.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},r.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},r.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},r.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},r.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},r.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},r.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},r},{isClass:!0});function JD(r,e,t){var n=r.constructor,i=new n(2),s="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!tt(t))throw new Error("size must be an integer");if(r.greaterThan(i.pow(t-1).sub(1))||r.lessThan(i.pow(t-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!r.isInteger())throw new Error("Value must be an integer");r.lessThan(0)&&(r=r.add(i.pow(t))),s="i".concat(t)}switch(e){case 2:return"".concat(r.toBinary()).concat(s);case 8:return"".concat(r.toOctal()).concat(s);case 16:return"".concat(r.toHexadecimal()).concat(s);default:throw new Error("Base ".concat(e," not supported "))}}function g0e(r,e){if(typeof e=="function")return e(r);if(!r.isFinite())return r.isNaN()?"NaN":r.gt(0)?"Infinity":"-Infinity";var{notation:t,precision:n,wordSize:i}=NK(e);switch(t){case"fixed":return y0e(r,n);case"exponential":return n6(r,n);case"engineering":return v0e(r,n);case"bin":return JD(r,2,i);case"oct":return JD(r,8,i);case"hex":return JD(r,16,i);case"auto":{var s=i6(e==null?void 0:e.lowerExp,-3),a=i6(e==null?void 0:e.upperExp,5);if(r.isZero())return"0";var o,l=r.toSignificantDigits(n),u=l.e;return u>=s&&u<a?o=l.toFixed():o=n6(r,n),o.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],h=arguments[4];return c!=="."?c+h:h})}default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function v0e(r,e){var t=r.e,n=t%3===0?t:t<0?t-3-t%3:t-t%3,i=r.mul(Math.pow(10,-n)),s=i.toPrecision(e);if(s.includes("e")){var a=r.constructor;s=new a(s).toFixed()}return s+"e"+(t>=0?"+":"")+n.toString()}function n6(r,e){return e!==void 0?r.toExponential(e-1):r.toExponential()}function y0e(r,e){return r.toFixed(e)}function i6(r,e){return st(r)?r:_t(r)?r.toNumber():e}function b0e(r,e){var t=r.length-e.length,n=r.length;return r.substring(t,n)===e}function Pt(r,e){var t=w0e(r,e);return e&&typeof e=="object"&&"truncate"in e&&t.length>e.truncate?t.substring(0,e.truncate-3)+"...":t}function w0e(r,e){if(typeof r=="number")return Xm(r,e);if(_t(r))return g0e(r,e);if(x0e(r))return!e||e.fraction!=="decimal"?"".concat(r.s*r.n,"/").concat(r.d):r.toString();if(Array.isArray(r))return jK(r,e);if(mn(r))return Sg(r);if(typeof r=="function")return r.syntax?String(r.syntax):"function";if(r&&typeof r=="object"){if(typeof r.format=="function")return r.format(e);if(r&&r.toString(e)!=={}.toString())return r.toString(e);var t=Object.keys(r).map(n=>Sg(n)+": "+Pt(r[n],e));return"{"+t.join(", ")+"}"}return String(r)}function Sg(r){for(var e=String(r),t="",n=0;n<e.length;){var i=e.charAt(n);t+=i in s6?s6[i]:i,n++}return'"'+t+'"'}var s6={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function ao(r){var e=String(r);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function jK(r,e){if(Array.isArray(r)){for(var t="[",n=r.length,i=0;i<n;i++)i!==0&&(t+=", "),t+=jK(r[i],e);return t+="]",t}else return Pt(r,e)}function x0e(r){return r&&typeof r=="object"&&typeof r.s=="bigint"&&typeof r.n=="bigint"&&typeof r.d=="bigint"||!1}function IP(r,e){if(!mn(r))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+dr(r)+", index: 0)");if(!mn(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+dr(e)+", index: 1)");return r===e?0:r>e?1:-1}function Mt(r,e,t){if(!(this instanceof Mt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=r,this.expected=e,this.relation=t,this.message="Dimension mismatch ("+(Array.isArray(r)?"["+r.join(", ")+"]":r)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}Mt.prototype=new RangeError;Mt.prototype.constructor=RangeError;Mt.prototype.name="DimensionError";Mt.prototype.isDimensionError=!0;function tl(r,e,t){if(!(this instanceof tl))throw new SyntaxError("Constructor must be called with the new operator");this.index=r,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=t),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}tl.prototype=new RangeError;tl.prototype.constructor=RangeError;tl.prototype.name="IndexError";tl.prototype.isIndexError=!0;function vt(r){for(var e=[];Array.isArray(r);)e.push(r.length),r=r[0];return e}function qK(r,e,t){var n,i=r.length;if(i!==e[t])throw new Mt(i,e[t]);if(t<e.length-1){var s=t+1;for(n=0;n<i;n++){var a=r[n];if(!Array.isArray(a))throw new Mt(e.length-1,e.length,"<");qK(r[n],e,s)}}else for(n=0;n<i;n++)if(Array.isArray(r[n]))throw new Mt(e.length+1,e.length,">")}function a6(r,e){var t=e.length===0;if(t){if(Array.isArray(r))throw new Mt(r.length,0)}else qK(r,e,0)}function vT(r,e){var t=r.isMatrix?r._size:vt(r),n=e._sourceSize;n.forEach((i,s)=>{if(i!==null&&i!==t[s])throw new Mt(i,t[s])})}function xr(r,e){if(r!==void 0){if(!st(r)||!tt(r))throw new TypeError("Index must be an integer (value: "+r+")");if(r<0||typeof e=="number"&&r>=e)throw new tl(r,e)}}function R0(r){for(var e=0;e<r._dimensions.length;++e){var t=r._dimensions[e];if(t._data&&cr(t._data)){if(t._size[0]===0)return!0}else if(t.isRange){if(t.start===t.end)return!0}else if(mn(t)&&t.length===0)return!0}return!1}function k0(r,e,t){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!st(i)||!tt(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Pt(e)+")")}),(st(r)||_t(r))&&(r=[r]);var n=t!==void 0?t:0;return PP(r,e,0,n),r}function PP(r,e,t,n){var i,s,a=r.length,o=e[t],l=Math.min(a,o);if(r.length=o,t<e.length-1){var u=t+1;for(i=0;i<l;i++)s=r[i],Array.isArray(s)||(s=[s],r[i]=s),PP(s,e,u,n);for(i=l;i<o;i++)s=[],r[i]=s,PP(s,e,u,n)}else{for(i=0;i<l;i++)for(;Array.isArray(r[i]);)r[i]=r[i][0];for(i=l;i<o;i++)r[i]=n}}function jF(r,e){var t=Yt(r,!0),n=t.length;if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Mt(0,n,"!=");e=qF(e,n);var i=HK(e);if(n!==i)throw new Mt(i,n,"!=");try{return _0e(t,e)}catch(s){throw s instanceof Mt?new Mt(i,n,"!="):s}}function qF(r,e){var t=HK(r),n=r.slice(),i=-1,s=r.indexOf(i),a=r.indexOf(i,s+1)>=0;if(a)throw new Error("More than one wildcard in sizes");var o=s>=0,l=e%t===0;if(o)if(l)n[s]=-e/t;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-t);return n}function HK(r){return r.reduce((e,t)=>e*t,1)}function _0e(r,e){for(var t=r,n,i=e.length-1;i>0;i--){var s=e[i];n=[];for(var a=t.length/s,o=0;o<a;o++)n.push(t.slice(o*s,(o+1)*s));t=n}return t}function yT(r,e){for(var t=vt(r);Array.isArray(r)&&r.length===1;)r=r[0],t.shift();for(var n=t.length;t[n-1]===1;)n--;return n<t.length&&(r=GK(r,n,0),t.length=n),r}function GK(r,e,t){var n,i;if(t<e){var s=t+1;for(n=0,i=r.length;n<i;n++)r[n]=GK(r[n],e,s)}else for(;Array.isArray(r);)r=r[0];return r}function WK(r,e,t,n){var i=n||vt(r);if(t)for(var s=0;s<t;s++)r=[r],i.unshift(1);for(r=KK(r,e,0);i.length<e;)i.push(1);return r}function KK(r,e,t){var n,i;if(Array.isArray(r)){var s=t+1;for(n=0,i=r.length;n<i;n++)r[n]=KK(r[n],e,s)}else for(var a=t;a<e;a++)r=[r];return r}function Yt(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(r))return r;if(typeof e!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var t=[];return e?i(r):n(r),t;function n(s){for(var a=0;a<s.length;a++){var o=s[a];Array.isArray(o)?n(o):t.push(o)}}function i(s){if(Array.isArray(s[0]))for(var a=0;a<s.length;a++)i(s[a]);else for(var o=0;o<s.length;o++)t.push(s[o])}}function fd(r,e){return Array.prototype.map.call(r,e)}function XK(r,e){Array.prototype.forEach.call(r,e)}function o6(r,e){if(vt(r).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(r,e)}function l6(r,e){if(vt(r).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(r,t=>e.test(t))}function u6(r,e){return Array.prototype.join.call(r,e)}function F0(r){if(!Array.isArray(r))throw new TypeError("Array input expected");if(r.length===0)return r;var e=[],t=0;e[0]={value:r[0],identifier:0};for(var n=1;n<r.length;n++)r[n]===r[n-1]?t++:t=0,e.push({value:r[n],identifier:t});return e}function bT(r){if(!Array.isArray(r))throw new TypeError("Array input expected");if(r.length===0)return r;for(var e=[],t=0;t<r.length;t++)e.push(r[t].value);return e}function lN(r,e){for(var t,n=0,i=0;i<r.length;i++){var s=r[i],a=Array.isArray(s);if(i===0&&a&&(n=s.length),a&&s.length!==n)return;var o=a?lN(s,e):e(s);if(t===void 0)t=o;else if(t!==o)return"mixed"}return t}function YK(r,e,t,n){if(n<t){if(r.length!==e.length)throw new Mt(r.length,e.length);for(var i=[],s=0;s<r.length;s++)i[s]=YK(r[s],e[s],t,n+1);return i}else return r.concat(e)}function QK(){var r=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(r.length===1)return r[0];if(r.length>1)return r.slice(1).reduce(function(t,n){return YK(t,n,e,0)},r[0]);throw new Error("Wrong number of arguments in function concat")}function wT(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];for(var n=e.map(d=>d.length),i=Math.max(...n),s=new Array(i).fill(null),a=0;a<e.length;a++)for(var o=e[a],l=n[a],u=0;u<l;u++){var c=i-l+u;o[u]>s[c]&&(s[c]=o[u])}for(var h=0;h<e.length;h++)JK(e[h],s);return s}function JK(r,e){for(var t=e.length,n=r.length,i=0;i<n;i++){var s=t-n+i;if(r[i]<e[s]&&r[i]>1||r[i]>e[s])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(r,") not possible to broadcast dimension ").concat(n," with size ").concat(r[i]," to size ").concat(e[s]))}}function Cf(r,e){var t=vt(r);if(Nc(t,e))return r;JK(t,e);var n=wT(t,e),i=n.length,s=[...Array(i-t.length).fill(1),...t],a=E0e(r);t.length<i&&(a=jF(a,s),t=vt(a));for(var o=0;o<i;o++)t[o]<n[o]&&(a=A0e(a,n[o],o),t=vt(a));return a}function A0e(r,e,t){return QK(...Array(e).fill(r),t)}function xT(r,e){if(!Array.isArray(r))throw new Error("Array expected");var t=vt(r);if(e.length!==t.length)throw new Mt(e.length,t.length);for(var n=0;n<e.length;n++)xr(e[n],t[n]);return e.reduce((i,s)=>i[s],r)}function RP(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(r.length===0)return[];if(t)return s(r);var n=[];return i(r,0);function i(a,o){if(Array.isArray(a)){for(var l=a.length,u=Array(l),c=0;c<l;c++)n[o]=c,u[c]=i(a[c],o+1);return u}else return e(a,n.slice(0,o),r)}function s(a){if(Array.isArray(a)){for(var o=a.length,l=Array(o),u=0;u<o;u++)l[u]=s(a[u]);return l}else return e(a)}}function ZK(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(r.length===0)return;if(t){s(r);return}var n=[];i(r,0);function i(a,o){if(Array.isArray(a))for(var l=a.length,u=0;u<l;u++)n[o]=u,i(a[u],o+1);else e(a,n.slice(0,o),r)}function s(a){if(Array.isArray(a))for(var o=a.length,l=0;l<o;l++)s(a[l]);else e(a)}}function E0e(r){return An([],r)}function hp(r,e,t,n){if(fT.isTypedFunction(r)){var i;if(n)i=1;else{var s=e.isMatrix?e.size():vt(e),a=s.length?s[s.length-1]===0:!0;if(a)return{isUnary:n,fn:r};var o=s.map(()=>0),l=e.isMatrix?e.get(o):xT(e,o);i=C0e(r,l,o,e)}var u;if(e.isMatrix&&e.dataType!=="mixed"&&e.dataType!==void 0){var c=S0e(r,i);u=c!==void 0?c:r}else u=r;return i>=1&&i<=3?{isUnary:i===1,fn:function(){for(var d=arguments.length,f=new Array(d),p=0;p<d;p++)f[p]=arguments[p];return c6(u,f.slice(0,i),t,r.name)}}:{isUnary:!1,fn:function(){for(var d=arguments.length,f=new Array(d),p=0;p<d;p++)f[p]=arguments[p];return c6(u,f,t,r.name)}}}return n===void 0?{isUnary:T0e(r),fn:r}:{isUnary:n,fn:r}}function S0e(r,e){var t=[];if(Object.entries(r.signatures).forEach(n=>{var[i,s]=n;i.split(",").length===e&&t.push(s)}),t.length===1)return t[0]}function T0e(r){if(r.length!==1)return!1;var e=r.toString();if(/arguments/.test(e))return!1;var t=e.match(/\(.*?\)/);return!/\.\.\./.test(t)}function C0e(r,e,t,n){for(var i=[e,t,n],s=3;s>0;s--){var a=i.slice(0,s);if(fT.resolve(r,a)!==null)return s}}function c6(r,e,t,n){try{return r(...e)}catch(i){N0e(i,e,t,n)}}function N0e(r,e,t,n){var i;if(r instanceof TypeError&&((i=r.data)===null||i===void 0?void 0:i.category)==="wrongType"){var s=[];throw s.push("value: ".concat(dr(e[0]))),e.length>=2&&s.push("index: ".concat(dr(e[1]))),e.length>=3&&s.push("array: ".concat(dr(e[2]))),new TypeError("Function ".concat(t," cannot apply callback arguments ")+"".concat(n,"(").concat(s.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(t," cannot apply callback arguments ")+"to function ".concat(n,": ").concat(r.message))}var D0e="DenseMatrix",M0e=["Matrix","config"],I0e=Y(D0e,M0e,r=>{var{Matrix:e,config:t}=r;function n(h,d){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(d&&!mn(d))throw new Error("Invalid datatype: "+d);if(lt(h))h.type==="DenseMatrix"?(this._data=gt(h._data),this._size=gt(h._size),this._datatype=d||h._datatype):(this._data=h.toArray(),this._size=h.size(),this._datatype=d||h._datatype);else if(h&&cr(h.data)&&cr(h.size))this._data=h.data,this._size=h.size,a6(this._data,this._size),this._datatype=d||h.datatype;else if(cr(h))this._data=c(h),this._size=vt(this._data),a6(this._data,this._size),this._datatype=d;else{if(h)throw new TypeError("Unsupported type of data ("+dr(h)+")");this._data=[],this._size=[0],this._datatype=d}}n.prototype=new e,n.prototype.createDenseMatrix=function(h,d){return new n(h,d)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return lN(this._data,dr)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(h,d){return new n(h,d)},n.prototype.subset=function(h,d,f){switch(arguments.length){case 1:return i(this,h);case 2:case 3:return a(this,h,d,f);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(h){return xT(this._data,h)},n.prototype.set=function(h,d,f){if(!cr(h))throw new TypeError("Array expected");if(h.length<this._size.length)throw new Mt(h.length,this._size.length,"<");var p,g,b,v=h.map(function(y){return y+1});u(this,v,f);var x=this._data;for(p=0,g=h.length-1;p<g;p++)b=h[p],xr(b,x.length),x=x[b];return b=h[h.length-1],xr(b,x.length),x[b]=d,this};function i(h,d){if(!tN(d))throw new TypeError("Invalid index");var f=t.legacySubset?d.size().every(w=>w===1):d.isScalar();if(f)return h.get(d.min());var p=d.size();if(p.length!==h._size.length)throw new Mt(p.length,h._size.length);for(var g=d.min(),b=d.max(),v=0,x=h._size.length;v<x;v++)xr(g[v],h._size[v]),xr(b[v],h._size[v]);var y=new n,A=s(h._data,d);return y._size=A.size,y._datatype=h._datatype,y._data=A.data,t.legacySubset?y.reshape(d.size()):y}function s(h,d){var f=d.size().length-1,p=Array(f);return{data:g(h),size:p.filter(b=>b!==null)};function g(b){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,x=d.dimension(v);function y(A,w){return st(A)?w(A):A.map(w).valueOf()}return st(x)?p[v]=null:p[v]=x.size()[0],v<f?y(x,A=>(xr(A,b.length),g(b[A],v+1))):y(x,A=>(xr(A,b.length),b[A]))}}function a(h,d,f,p){if(!d||d.isIndex!==!0)throw new TypeError("Invalid index");var g=d.size(),b=d.isScalar(),v;if(lt(f)?(v=f.size(),f=f.valueOf()):v=vt(f),b){if(v.length!==0)throw new TypeError("Scalar expected");h.set(d.min(),f,p)}else{if(!Nc(v,g)){if(v.length===0)f=Cf([f],g);else try{f=Cf(f,g)}catch{}v=vt(f)}if(g.length<h._size.length)throw new Mt(g.length,h._size.length,"<");if(v.length<g.length){for(var x=0,y=0;g[x]===1&&v[x]===1;)x++;for(;g[x]===1;)y++,x++;f=WK(f,g.length,y,v)}if(!Nc(g,v))throw new Mt(g,v,">");var A=d.max().map(function(w){return w+1});u(h,A,p),o(h._data,d,f)}return h}function o(h,d,f){var p=d.size().length-1;g(h,f);function g(b,v){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,y=d.dimension(x),A=(_,S)=>{xr(_,b.length),g(b[_],v[S[0]],x+1)},w=(_,S)=>{xr(_,b.length),b[_]=v[S[0]]};x<p?st(y)?A(y,[0]):y.forEach(A):st(y)?w(y,[0]):y.forEach(w)}}n.prototype.resize=function(h,d,f){if(!Ma(h))throw new TypeError("Array or Matrix expected");var p=h.valueOf().map(b=>Array.isArray(b)&&b.length===1?b[0]:b),g=f?this.clone():this;return l(g,p,d)};function l(h,d,f){if(d.length===0){for(var p=h._data;cr(p);)p=p[0];return p}return h._size=d.slice(0),h._data=k0(h._data,h._size,f),h}n.prototype.reshape=function(h,d){var f=d?this.clone():this;f._data=jF(f._data,h);var p=f._size.reduce((g,b)=>g*b);return f._size=qF(h,p),f};function u(h,d,f){for(var p=h._size.slice(0),g=!1;p.length<d.length;)p.push(0),g=!0;for(var b=0,v=d.length;b<v;b++)d[b]>p[b]&&(p[b]=d[b],g=!0);g&&l(h,p,f)}n.prototype.clone=function(){var h=new n({data:gt(this._data),size:gt(this._size),datatype:this._datatype});return h},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(h){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=this,p=f._size.length-1;if(p<0)return f.clone();var g=hp(h,f,"map",d),b=g.fn,v=f.create(void 0,f._datatype);if(v._size=f._size,d||g.isUnary)return v._data=S(f._data),v;if(p===0){for(var x=f.valueOf(),y=Array(x.length),A=0;A<x.length;A++)y[A]=b(x[A],[A],f);return v._data=y,v}var w=[];return v._data=_(f._data),v;function _(E){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,N=Array(E.length);if(C<p)for(var D=0;D<E.length;D++)w[C]=D,N[D]=_(E[D],C+1);else for(var M=0;M<E.length;M++)w[C]=M,N[M]=b(E[M],w.slice(),f);return N}function S(E){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,N=Array(E.length);if(C<p)for(var D=0;D<E.length;D++)N[D]=S(E[D],C+1);else for(var M=0;M<E.length;M++)N[M]=b(E[M]);return N}},n.prototype.forEach=function(h){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=this,p=f._size.length-1;if(p<0)return;var g=hp(h,f,"map",d),b=g.fn;if(d||g.isUnary){A(f._data);return}if(p===0){for(var v=0;v<f._data.length;v++)b(f._data[v],[v],f);return}var x=[];y(f._data);function y(w){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(_<p)for(var S=0;S<w.length;S++)x[_]=S,y(w[S],_+1);else for(var E=0;E<w.length;E++)x[_]=E,b(w[E],x.slice(),f)}function A(w){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(_<p)for(var S=0;S<w.length;S++)A(w[S],_+1);else for(var E=0;E<w.length;E++)b(w[E])}},n.prototype[Symbol.iterator]=function*(){var h=this._size.length-1;if(!(h<0)){if(h===0){for(var d=0;d<this._data.length;d++)yield{value:this._data[d],index:[d]};return}for(var f=Array(h+1).fill(0),p=this._size.reduce((y,A)=>y*A,1),g=0;g<p;g++){for(var b=this._data,v=0;v<h;v++)b=b[f[v]];yield{value:b[f[h]],index:f.slice()};for(var x=h;x>=0&&(f[x]++,!(f[x]<this._size[x]));x--)f[x]=0}}},n.prototype.rows=function(){var h=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var f=this._data;for(var p of f)h.push(new n([p],this._datatype));return h},n.prototype.columns=function(){var h=this,d=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var p=this._data,g=function(x){var y=p.map(A=>[A[x]]);d.push(new n(y,h._datatype))},b=0;b<f[1];b++)g(b);return d},n.prototype.toArray=function(){return gt(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(h){return Pt(this._data,h)},n.prototype.toString=function(){return Pt(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(h){if(h){if(_t(h)&&(h=h.toNumber()),!st(h)||!tt(h))throw new TypeError("The parameter k must be an integer number")}else h=0;for(var d=h>0?h:0,f=h<0?-h:0,p=this._size[0],g=this._size[1],b=Math.min(p-f,g-d),v=[],x=0;x<b;x++)v[x]=this._data[x+f][x+d];return new n({data:v,size:[b],datatype:this._datatype})},n.diagonal=function(h,d,f,p){if(!cr(h))throw new TypeError("Array expected, size parameter");if(h.length!==2)throw new Error("Only two dimensions matrix are supported");if(h=h.map(function(E){if(_t(E)&&(E=E.toNumber()),!st(E)||!tt(E)||E<1)throw new Error("Size values must be positive integers");return E}),f){if(_t(f)&&(f=f.toNumber()),!st(f)||!tt(f))throw new TypeError("The parameter k must be an integer number")}else f=0;var g=f>0?f:0,b=f<0?-f:0,v=h[0],x=h[1],y=Math.min(v-b,x-g),A;if(cr(d)){if(d.length!==y)throw new Error("Invalid value array length");A=function(C){return d[C]}}else if(lt(d)){var w=d.size();if(w.length!==1||w[0]!==y)throw new Error("Invalid matrix length");A=function(C){return d.get([C])}}else A=function(){return d};p||(p=_t(A(0))?A(0).mul(0):0);var _=[];if(h.length>0){_=k0(_,h,p);for(var S=0;S<y;S++)_[S+b][S+g]=A(S)}return new n({data:_,size:[v,x]})},n.fromJSON=function(h){return new n(h)},n.prototype.swapRows=function(h,d){if(!st(h)||!tt(h)||!st(d)||!tt(d))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return xr(h,this._size[0]),xr(d,this._size[0]),n._swapRows(h,d,this._data),this},n._swapRows=function(h,d,f){var p=f[h];f[h]=f[d],f[d]=p};function c(h){return lt(h)?c(h.valueOf()):cr(h)?h.map(c):h}return n},{isClass:!0}),h6="clone",P0e=["typed"],R0e=Y(h6,P0e,r=>{var{typed:e}=r;return e(h6,{any:gt})});function eX(r){var e=r.length,t=r[0].length,n,i,s=[];for(i=0;i<t;i++){var a=[];for(n=0;n<e;n++)a.push(r[n][i]);s.push(a)}return s}function ny(r){for(var e=0;e<r.length;e++)if(Ma(r[e]))return!0;return!1}function Md(r,e){lt(r)?r.forEach(t=>e(t),!1,!0):ZK(r,e,!0)}function At(r,e,t){if(!t)return lt(r)?r.map(i=>e(i),!1,!0):RP(r,e,!0);var n=i=>i===0?i:e(i);return lt(r)?r.map(i=>n(i),!1,!0):RP(r,n,!0)}function uN(r,e,t){var n=Array.isArray(r)?vt(r):r.size();if(e<0||e>=n.length)throw new tl(e,n.length);return lt(r)?r.create(_T(r.valueOf(),e,t),r.datatype()):_T(r,e,t)}function _T(r,e,t){var n,i,s,a;if(e<=0)if(Array.isArray(r[0])){for(a=eX(r),i=[],n=0;n<a.length;n++)i[n]=_T(a[n],e-1,t);return i}else{for(s=r[0],n=1;n<r.length;n++)s=t(s,r[n]);return s}else{for(i=[],n=0;n<r.length;n++)i[n]=_T(r[n],e-1,t);return i}}function d6(r,e,t,n,i,s,a,o,l,u,c){var h=r._values,d=r._index,f=r._ptr,p,g,b,v;if(n)for(g=f[e],b=f[e+1],p=g;p<b;p++)v=d[p],t[v]!==s?(t[v]=s,a.push(v),n[v]=h[p]):(n[v]=o(n[v],h[p]),i[v]=s);else for(g=f[e],b=f[e+1],p=g;p<b;p++)v=d[p],t[v]!==s?(t[v]=s,a.push(v)):i[v]=s}var f6="isInteger",k0e=["typed","equal"],F0e=Y(f6,k0e,r=>{var{typed:e,equal:t}=r;return e(f6,{number:n=>Number.isFinite(n)?t(n,Math.round(n)):!1,BigNumber:n=>n.isFinite()?t(n.round(),n):!1,bigint:n=>!0,Fraction:n=>n.d===1n,"Array | Matrix":e.referToSelf(n=>i=>At(i,n))})}),rl="number",iy="number, number";function tX(r){return Math.abs(r)}tX.signature=rl;function rX(r,e){return r+e}rX.signature=iy;function nX(r,e){return r-e}nX.signature=iy;function iX(r,e){return r*e}iX.signature=iy;function sX(r){return-r}sX.signature=rl;function aX(r){return r}aX.signature=rl;function Eb(r){return Bge(r)}Eb.signature=rl;function oX(r){return r*r*r}oX.signature=rl;function lX(r){return Math.exp(r)}lX.signature=rl;function uX(r){return Lge(r)}uX.signature=rl;function cX(r,e){if(!tt(r)||!tt(e))throw new Error("Parameters in function lcm must be integer numbers");if(r===0||e===0)return 0;for(var t,n=r*e;e!==0;)t=e,e=r%t,r=t;return Math.abs(n/r)}cX.signature=iy;function m6(r,e){return e?Math.log(r)/Math.log(e):Math.log(r)}function AT(r){return Fge(r)}AT.signature=rl;function kP(r){return kge(r)}kP.signature=rl;function p6(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,t=e<0;if(t&&(e=-e),e===0)throw new Error("Root must be non-zero");if(r<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(r===0)return t?1/0:0;if(!isFinite(r))return t?0:r;var n=Math.pow(Math.abs(r),1/e);return n=r<0?-n:n,t?1/n:n}function FP(r){return Jh(r)}FP.signature=rl;function hX(r){return r*r}hX.signature=rl;function dX(r,e){var t,n,i,s=0,a=1,o=1,l=0;if(!tt(r)||!tt(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)n=Math.floor(r/e),i=r-n*e,t=s,s=a-n*s,a=t,t=o,o=l-n*o,l=t,r=e,e=i;var u;return r<0?u=[-r,-a,-l]:u=[r,r?a:0,l],u}dX.signature=iy;function fX(r,e){return r*r<1&&e===1/0||r*r>1&&e===-1/0?0:Math.pow(r,e)}fX.signature=iy;function jy(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!tt(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(DK(r,e))}var O0e="number",sy="number, number";function mX(r,e){if(!tt(r)||!tt(e))throw new Error("Integers expected in function bitAnd");return r&e}mX.signature=sy;function pX(r){if(!tt(r))throw new Error("Integer expected in function bitNot");return~r}pX.signature=O0e;function gX(r,e){if(!tt(r)||!tt(e))throw new Error("Integers expected in function bitOr");return r|e}gX.signature=sy;function vX(r,e){if(!tt(r)||!tt(e))throw new Error("Integers expected in function bitXor");return r^e}vX.signature=sy;function yX(r,e){if(!tt(r)||!tt(e))throw new Error("Integers expected in function leftShift");return r<<e}yX.signature=sy;function bX(r,e){if(!tt(r)||!tt(e))throw new Error("Integers expected in function rightArithShift");return r>>e}bX.signature=sy;function wX(r,e){if(!tt(r)||!tt(e))throw new Error("Integers expected in function rightLogShift");return r>>>e}wX.signature=sy;function ac(r,e){if(e<r)return 1;if(e===r)return e;var t=e+r>>1;return ac(r,t)*ac(t+1,e)}function xX(r,e){if(!tt(r)||r<0)throw new TypeError("Positive integer value expected in function combinations");if(!tt(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>r)throw new TypeError("k must be less than or equal to n");for(var t=r-e,n=1,i=e<t?t+1:e+1,s=2,a=e<t?e:t,o=i;o<=r;++o)for(n*=o;s<=a&&n%s===0;)n/=s,++s;return s<=a&&(n/=ac(s,a)),n}xX.signature="number, number";var B0e=Math.PI,L0e=2*Math.PI,$0e=Math.E,V0e=1.618033988749895,U0e="number",HF="number, number";function _X(r){return!r}_X.signature=U0e;function OP(r,e){return!!(r||e)}OP.signature=HF;function BP(r,e){return!!r!=!!e}BP.signature=HF;function LP(r,e){return!!(r&&e)}LP.signature=HF;function ET(r){var e;if(tt(r))return r<=0?Number.isFinite(r)?1/0:NaN:r>171?1/0:ac(1,r-1);if(r<.5)return Math.PI/(Math.sin(Math.PI*r)*ET(1-r));if(r>=171.35)return 1/0;if(r>85){var t=r*r,n=t*r,i=n*r,s=i*r;return Math.sqrt(2*Math.PI/r)*Math.pow(r/Math.E,r)*(1+1/(12*r)+1/(288*t)-139/(51840*n)-571/(2488320*i)+163879/(209018880*s)+5246819/(75246796800*s*r))}--r,e=qg[0];for(var a=1;a<qg.length;++a)e+=qg[a]/(r+a);var o=r+AX+.5;return Math.sqrt(2*Math.PI)*Math.pow(o,r+.5)*Math.exp(-o)*e}ET.signature="number";var AX=4.7421875,qg=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],EX=.9189385332046728,z0e=5,j0e=7,g6=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function ST(r){if(r<0)return NaN;if(r===0)return 1/0;if(!Number.isFinite(r))return r;if(r<.5)return Math.log(Math.PI/Math.sin(Math.PI*r))-ST(1-r);r=r-1;for(var e=r+z0e+.5,t=g6[0],n=j0e-1;n>=1;n--)t+=g6[n]/(r+n);return EX+(r+.5)*Math.log(e)-e+Math.log(t)}ST.signature="number";var is="number";function SX(r){return zge(r)}SX.signature=is;function TX(r){return Math.atan(1/r)}TX.signature=is;function CX(r){return Number.isFinite(r)?(Math.log((r+1)/r)+Math.log(r/(r-1)))/2:0}CX.signature=is;function NX(r){return Math.asin(1/r)}NX.signature=is;function DX(r){var e=1/r;return Math.log(e+Math.sqrt(e*e+1))}DX.signature=is;function MX(r){return Math.acos(1/r)}MX.signature=is;function IX(r){var e=1/r,t=Math.sqrt(e*e-1);return Math.log(t+e)}IX.signature=is;function PX(r){return jge(r)}PX.signature=is;function RX(r){return qge(r)}RX.signature=is;function kX(r){return 1/Math.tan(r)}kX.signature=is;function FX(r){var e=Math.exp(2*r);return(e+1)/(e-1)}FX.signature=is;function OX(r){return 1/Math.sin(r)}OX.signature=is;function BX(r){return r===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(r)-Math.exp(-r)))*Jh(r)}BX.signature=is;function LX(r){return 1/Math.cos(r)}LX.signature=is;function $X(r){return 2/(Math.exp(r)+Math.exp(-r))}$X.signature=is;function VX(r){return Gge(r)}VX.signature=is;var GF="number";function UX(r){return r<0}UX.signature=GF;function zX(r){return r>0}zX.signature=GF;function jX(r){return Number.isNaN(r)}jX.signature=GF;function yo(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(t<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return r.isNaN()||e.isNaN()?!1:!r.isFinite()||!e.isFinite()?r.eq(e):r.eq(e)?!0:r.minus(e).abs().lte(r.constructor.max(r.constructor.max(r.abs(),e.abs()).mul(t),n))}var v6="isNegative",q0e=["typed","config"],H0e=Y(v6,q0e,r=>{var{typed:e,config:t}=r;return e(v6,{number:n=>pi(n,0,t.relTol,t.absTol)?!1:UX(n),BigNumber:n=>yo(n,new n.constructor(0),t.relTol,t.absTol)?!1:n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n<0n,Fraction:n=>n.s<0n,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>At(i,n))})}),y6="isNumeric",G0e=["typed"],W0e=Y(y6,G0e,r=>{var{typed:e}=r;return e(y6,{"number | BigNumber | bigint | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(t=>n=>At(n,t))})}),b6="hasNumericValue",K0e=["typed","isNumeric"],X0e=Y(b6,K0e,r=>{var{typed:e,isNumeric:t}=r;return e(b6,{boolean:()=>!0,string:function(i){return i.trim().length>0&&!isNaN(Number(i))},any:function(i){return t(i)}})}),w6="isPositive",Y0e=["typed","config"],Q0e=Y(w6,Y0e,r=>{var{typed:e,config:t}=r;return e(w6,{number:n=>pi(n,0,t.relTol,t.absTol)?!1:zX(n),BigNumber:n=>yo(n,new n.constructor(0),t.relTol,t.absTol)?!1:!n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n>0n,Fraction:n=>n.s>0n&&n.n>0n,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>At(i,n))})}),x6="isZero",J0e=["typed","equalScalar"],Z0e=Y(x6,J0e,r=>{var{typed:e,equalScalar:t}=r;return e(x6,{"number | BigNumber | Complex | Fraction":n=>t(n,0),bigint:n=>n===0n,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>At(i,n))})}),_6="isNaN",eye=["typed"],tye=Y(_6,eye,r=>{var{typed:e}=r;return e(_6,{number:jX,BigNumber:function(n){return n.isNaN()},bigint:function(n){return!1},Fraction:function(n){return!1},Complex:function(n){return n.isNaN()},Unit:function(n){return Number.isNaN(n.value)},"Array | Matrix":e.referToSelf(t=>n=>At(n,t))})}),A6="isBounded",rye=["typed"],nye=Y(A6,rye,r=>{var{typed:e}=r;return e(A6,{number:t=>Number.isFinite(t),"BigNumber | Complex":t=>t.isFinite(),"bigint | Fraction":()=>!0,"null | undefined":()=>!1,Unit:e.referToSelf(t=>n=>t(n.value)),"Array | Matrix":e.referToSelf(t=>n=>(Array.isArray(n)||(n=n.valueOf()),n.every(i=>t(i))))})}),E6="isFinite",iye=["typed","isBounded","map"],sye=Y(E6,iye,r=>{var{typed:e,isBounded:t,map:n}=r;return e(E6,{"Array | Matrix":i=>n(i,t),any:i=>t(i)})}),S6="typeOf",aye=["typed"],oye=Y(S6,aye,r=>{var{typed:e}=r;return e(S6,{any:dr})});function lye(r,e,t,n){return pi(r.re,e.re,t,n)&&pi(r.im,e.im,t,n)}var ay=Y("compareUnits",["typed"],r=>{var{typed:e}=r;return{"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(t,[n.valueType(),i.valueType()])(n.value,i.value)})}}),TT="equalScalar",uye=["typed","config"],cye=Y(TT,uye,r=>{var{typed:e,config:t}=r,n=ay({typed:e});return e(TT,{"boolean, boolean":function(s,a){return s===a},"number, number":function(s,a){return pi(s,a,t.relTol,t.absTol)},"BigNumber, BigNumber":function(s,a){return s.eq(a)||yo(s,a,t.relTol,t.absTol)},"bigint, bigint":function(s,a){return s===a},"Fraction, Fraction":function(s,a){return s.equals(a)},"Complex, Complex":function(s,a){return lye(s,a,t.relTol,t.absTol)}},n)});Y(TT,["typed","config"],r=>{var{typed:e,config:t}=r;return e(TT,{"number, number":function(i,s){return pi(i,s,t.relTol,t.absTol)}})});var hye="SparseMatrix",dye=["typed","equalScalar","Matrix"],fye=Y(hye,dye,r=>{var{typed:e,equalScalar:t,Matrix:n}=r;function i(g,b){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(b&&!mn(b))throw new Error("Invalid datatype: "+b);if(lt(g))s(this,g,b);else if(g&&cr(g.index)&&cr(g.ptr)&&cr(g.size))this._values=g.values,this._index=g.index,this._ptr=g.ptr,this._size=g.size,this._datatype=b||g.datatype;else if(cr(g))a(this,g,b);else{if(g)throw new TypeError("Unsupported type of data ("+dr(g)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=b}}function s(g,b,v){b.type==="SparseMatrix"?(g._values=b._values?gt(b._values):void 0,g._index=gt(b._index),g._ptr=gt(b._ptr),g._size=gt(b._size),g._datatype=v||b._datatype):a(g,b.valueOf(),v||b._datatype)}function a(g,b,v){g._values=[],g._index=[],g._ptr=[],g._datatype=v;var x=b.length,y=0,A=t,w=0;if(mn(v)&&(A=e.find(t,[v,v])||t,w=e.convert(0,v)),x>0){var _=0;do{g._ptr.push(g._index.length);for(var S=0;S<x;S++){var E=b[S];if(cr(E)){if(_===0&&y<E.length&&(y=E.length),_<E.length){var C=E[_];A(C,w)||(g._values.push(C),g._index.push(S))}}else _===0&&y<1&&(y=1),A(E,w)||(g._values.push(E),g._index.push(S))}_++}while(_<y)}for(;g._ptr.length<=y;)g._ptr.push(g._index.length);g._size=[x,y]}i.prototype=new n,i.prototype.createSparseMatrix=function(g,b){return new i(g,b)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return lN(this._values,dr)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(g,b){return new i(g,b)},i.prototype.density=function(){var g=this._size[0],b=this._size[1];return g!==0&&b!==0?this._index.length/(g*b):0},i.prototype.subset=function(g,b,v){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,g);case 2:case 3:return l(this,g,b,v);default:throw new SyntaxError("Wrong number of arguments")}};function o(g,b){if(!tN(b))throw new TypeError("Invalid index");var v=b.isScalar();if(v)return g.get(b.min());var x=b.size();if(x.length!==g._size.length)throw new Mt(x.length,g._size.length);var y,A,w,_,S=b.min(),E=b.max();for(y=0,A=g._size.length;y<A;y++)xr(S[y],g._size[y]),xr(E[y],g._size[y]);var C=g._values,N=g._index,D=g._ptr,M=b.dimension(0),I=b.dimension(1),U=[],X=[];function k(ce,re){X[ce]=re[0],U[ce]=!0}Number.isInteger(M)?k(M,[0]):M.forEach(k);var z=C?[]:void 0,q=[],H=[];function te(ce){for(H.push(q.length),w=D[ce],_=D[ce+1];w<_;w++)y=N[w],U[y]===!0&&(q.push(X[y]),z&&z.push(C[w]))}return Number.isInteger(I)?te(I):I.forEach(te),H.push(q.length),new i({values:z,index:q,ptr:H,size:x,datatype:g._datatype})}function l(g,b,v,x){if(!b||b.isIndex!==!0)throw new TypeError("Invalid index");var y=b.size(),A=b.isScalar(),w;if(lt(v)?(w=v.size(),v=v.toArray()):w=vt(v),A){if(w.length!==0)throw new TypeError("Scalar expected");g.set(b.min(),v,x)}else{if(y.length!==1&&y.length!==2)throw new Mt(y.length,g._size.length,"<");if(w.length<y.length){for(var _=0,S=0;y[_]===1&&w[_]===1;)_++;for(;y[_]===1;)S++,_++;v=WK(v,y.length,S,w)}if(!Nc(y,w))throw new Mt(y,w,">");if(y.length===1){var E=b.dimension(0);D(E,(M,I)=>{xr(M),g.set([M,0],v[I[0]],x)})}else{var C=b.dimension(0),N=b.dimension(1);D(C,(M,I)=>{xr(M),D(N,(U,X)=>{xr(U),g.set([M,U],v[I[0]][X[0]],x)})})}}return g;function D(M,I){st(M)?I(M,[0]):M.forEach(I)}}i.prototype.get=function(g){if(!cr(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new Mt(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var b=g[0],v=g[1];xr(b,this._size[0]),xr(v,this._size[1]);var x=u(b,this._ptr[v],this._ptr[v+1],this._index);return x<this._ptr[v+1]&&this._index[x]===b?this._values[x]:0},i.prototype.set=function(g,b,v){if(!cr(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new Mt(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var x=g[0],y=g[1],A=this._size[0],w=this._size[1],_=t,S=0;mn(this._datatype)&&(_=e.find(t,[this._datatype,this._datatype])||t,S=e.convert(0,this._datatype)),(x>A-1||y>w-1)&&(d(this,Math.max(x+1,A),Math.max(y+1,w),v),A=this._size[0],w=this._size[1]),xr(x,A),xr(y,w);var E=u(x,this._ptr[y],this._ptr[y+1],this._index);return E<this._ptr[y+1]&&this._index[E]===x?_(b,S)?c(E,y,this._values,this._index,this._ptr):this._values[E]=b:_(b,S)||h(E,x,y,b,this._values,this._index,this._ptr),this};function u(g,b,v,x){if(v-b===0)return v;for(var y=b;y<v;y++)if(x[y]===g)return y;return b}function c(g,b,v,x,y){v.splice(g,1),x.splice(g,1);for(var A=b+1;A<y.length;A++)y[A]--}function h(g,b,v,x,y,A,w){y.splice(g,0,x),A.splice(g,0,b);for(var _=v+1;_<w.length;_++)w[_]++}i.prototype.resize=function(g,b,v){if(!Ma(g))throw new TypeError("Array or Matrix expected");var x=g.valueOf().map(A=>Array.isArray(A)&&A.length===1?A[0]:A);if(x.length!==2)throw new Error("Only two dimensions matrix are supported");x.forEach(function(A){if(!st(A)||!tt(A)||A<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Pt(x)+")")});var y=v?this.clone():this;return d(y,x[0],x[1],b)};function d(g,b,v,x){var y=x||0,A=t,w=0;mn(g._datatype)&&(A=e.find(t,[g._datatype,g._datatype])||t,w=e.convert(0,g._datatype),y=e.convert(y,g._datatype));var _=!A(y,w),S=g._size[0],E=g._size[1],C,N,D;if(v>E){for(N=E;N<v;N++)if(g._ptr[N]=g._values.length,_)for(C=0;C<S;C++)g._values.push(y),g._index.push(C);g._ptr[v]=g._values.length}else v<E&&(g._ptr.splice(v+1,E-v),g._values.splice(g._ptr[v],g._values.length),g._index.splice(g._ptr[v],g._index.length));if(E=v,b>S){if(_){var M=0;for(N=0;N<E;N++){g._ptr[N]=g._ptr[N]+M,D=g._ptr[N+1]+M;var I=0;for(C=S;C<b;C++,I++)g._values.splice(D+I,0,y),g._index.splice(D+I,0,C),M++}g._ptr[E]=g._values.length}}else if(b<S){var U=0;for(N=0;N<E;N++){g._ptr[N]=g._ptr[N]-U;var X=g._ptr[N],k=g._ptr[N+1]-U;for(D=X;D<k;D++)C=g._index[D],C>b-1&&(g._values.splice(D,1),g._index.splice(D,1),U++)}g._ptr[N]=g._values.length}return g._size[0]=b,g._size[1]=v,g}i.prototype.reshape=function(g,b){if(!cr(g))throw new TypeError("Array expected");if(g.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");g.forEach(function(H){if(!st(H)||!tt(H)||H<=-2||H===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Pt(g)+")")});var v=this._size[0]*this._size[1];g=qF(g,v);var x=g[0]*g[1];if(v!==x)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var y=b?this.clone():this;if(this._size[0]===g[0]&&this._size[1]===g[1])return y;for(var A=[],w=0;w<y._ptr.length;w++)for(var _=0;_<y._ptr[w+1]-y._ptr[w];_++)A.push(w);for(var S=y._values.slice(),E=y._index.slice(),C=0;C<y._index.length;C++){var N=E[C],D=A[C],M=N*y._size[1]+D;A[C]=M%g[1],E[C]=Math.floor(M/g[1])}y._values.length=0,y._index.length=0,y._ptr.length=g[1]+1,y._size=g.slice();for(var I=0;I<y._ptr.length;I++)y._ptr[I]=0;for(var U=0;U<S.length;U++){var X=E[U],k=A[U],z=S[U],q=u(X,y._ptr[k],y._ptr[k+1],y._index);h(q,X,k,z,y._values,y._index,y._ptr)}return y},i.prototype.clone=function(){var g=new i({values:this._values?gt(this._values):void 0,index:gt(this._index),ptr:gt(this._ptr),size:gt(this._size),datatype:this._datatype});return g},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(g,b){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var v=this,x=this._size[0],y=this._size[1],A=hp(g,v,"map"),w=function(S,E,C){return A.fn(S,[E,C],v)};return f(this,0,x-1,0,y-1,w,b)};function f(g,b,v,x,y,A,w){var _=[],S=[],E=[],C=t,N=0;mn(g._datatype)&&(C=e.find(t,[g._datatype,g._datatype])||t,N=e.convert(0,g._datatype));for(var D=function(O,ne,W){var pe=A(O,ne,W);C(pe,N)||(_.push(pe),S.push(ne))},M=x;M<=y;M++){E.push(_.length);var I=g._ptr[M],U=g._ptr[M+1];if(w)for(var X=I;X<U;X++){var k=g._index[X];k>=b&&k<=v&&D(g._values[X],k-b,M-x)}else{for(var z={},q=I;q<U;q++){var H=g._index[q];z[H]=g._values[q]}for(var te=b;te<=v;te++){var ce=te in z?z[te]:0;D(ce,te-b,M-x)}}}return E.push(_.length),new i({values:_,index:S,ptr:E,size:[v-b+1,y-x+1]})}i.prototype.forEach=function(g,b){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var v=this,x=this._size[0],y=this._size[1],A=hp(g,v,"forEach"),w=0;w<y;w++){var _=this._ptr[w],S=this._ptr[w+1];if(b)for(var E=_;E<S;E++){var C=this._index[E];A.fn(this._values[E],[C,w],v)}else{for(var N={},D=_;D<S;D++){var M=this._index[D];N[M]=this._values[D]}for(var I=0;I<x;I++){var U=I in N?N[I]:0;A.fn(U,[I,w],v)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var g=this._size[1],b=0;b<g;b++)for(var v=this._ptr[b],x=this._ptr[b+1],y=v;y<x;y++){var A=this._index[y];yield{value:this._values[y],index:[A,b]}}},i.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)};function p(g,b,v,x,y){var A=x[0],w=x[1],_=[],S,E;for(S=0;S<A;S++)for(_[S]=[],E=0;E<w;E++)_[S][E]=0;for(E=0;E<w;E++)for(var C=v[E],N=v[E+1],D=C;D<N;D++)S=b[D],_[S][E]=g?y?gt(g[D]):g[D]:1;return _}return i.prototype.format=function(g){for(var b=this._size[0],v=this._size[1],x=this.density(),y="Sparse Matrix ["+Pt(b,g)+" x "+Pt(v,g)+"] density: "+Pt(x,g)+`
`,A=0;A<v;A++)for(var w=this._ptr[A],_=this._ptr[A+1],S=w;S<_;S++){var E=this._index[S];y+=`
    (`+Pt(E,g)+", "+Pt(A,g)+") ==> "+(this._values?Pt(this._values[S],g):"X")}return y},i.prototype.toString=function(){return Pt(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(g){if(g){if(_t(g)&&(g=g.toNumber()),!st(g)||!tt(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var b=g>0?g:0,v=g<0?-g:0,x=this._size[0],y=this._size[1],A=Math.min(x-v,y-b),w=[],_=[],S=[];S[0]=0;for(var E=b;E<y&&w.length<A;E++)for(var C=this._ptr[E],N=this._ptr[E+1],D=C;D<N;D++){var M=this._index[D];if(M===E-b+v){w.push(this._values[D]),_[w.length-1]=M-v;break}}return S.push(w.length),new i({values:w,index:_,ptr:S,size:[A,1]})},i.fromJSON=function(g){return new i(g)},i.diagonal=function(g,b,v,x,y){if(!cr(g))throw new TypeError("Array expected, size parameter");if(g.length!==2)throw new Error("Only two dimensions matrix are supported");if(g=g.map(function(H){if(_t(H)&&(H=H.toNumber()),!st(H)||!tt(H)||H<1)throw new Error("Size values must be positive integers");return H}),v){if(_t(v)&&(v=v.toNumber()),!st(v)||!tt(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var A=t,w=0;mn(y)&&(A=e.find(t,[y,y])||t,w=e.convert(0,y));var _=v>0?v:0,S=v<0?-v:0,E=g[0],C=g[1],N=Math.min(E-S,C-_),D;if(cr(b)){if(b.length!==N)throw new Error("Invalid value array length");D=function(te){return b[te]}}else if(lt(b)){var M=b.size();if(M.length!==1||M[0]!==N)throw new Error("Invalid matrix length");D=function(te){return b.get([te])}}else D=function(){return b};for(var I=[],U=[],X=[],k=0;k<C;k++){X.push(I.length);var z=k-_;if(z>=0&&z<N){var q=D(z);A(q,w)||(U.push(z+S),I.push(q))}}return X.push(I.length),new i({values:I,index:U,ptr:X,size:[E,C]})},i.prototype.swapRows=function(g,b){if(!st(g)||!tt(g)||!st(b)||!tt(b))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return xr(g,this._size[0]),xr(b,this._size[0]),i._swapRows(g,b,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(g,b,v,x,y){for(var A=x[g],w=x[g+1],_=A;_<w;_++)y(v[_],b[_])},i._swapRows=function(g,b,v,x,y,A){for(var w=0;w<v;w++){var _=A[w],S=A[w+1],E=u(g,_,S,y),C=u(b,_,S,y);if(E<S&&C<S&&y[E]===g&&y[C]===b){if(x){var N=x[E];x[E]=x[C],x[C]=N}continue}if(E<S&&y[E]===g&&(C>=S||y[C]!==b)){var D=x?x[E]:void 0;y.splice(C,0,b),x&&x.splice(C,0,D),y.splice(C<=E?E+1:E,1),x&&x.splice(C<=E?E+1:E,1);continue}if(C<S&&y[C]===b&&(E>=S||y[E]!==g)){var M=x?x[C]:void 0;y.splice(E,0,g),x&&x.splice(E,0,M),y.splice(E<=C?C+1:C,1),x&&x.splice(E<=C?C+1:C,1)}}},i},{isClass:!0}),mye="number",pye=["typed"];function gye(r){var e=r.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var t={"0b":2,"0o":8,"0x":16}[e[1]],n=e[2],i=e[3];return{input:r,radix:t,integerPart:n,fractionalPart:i}}else return null}function vye(r){for(var e=parseInt(r.integerPart,r.radix),t=0,n=0;n<r.fractionalPart.length;n++){var i=parseInt(r.fractionalPart[n],r.radix);t+=i/Math.pow(r.radix,n+1)}var s=e+t;if(isNaN(s))throw new SyntaxError('String "'+r.input+'" is not a valid number');return s}var yye=Y(mye,pye,r=>{var{typed:e}=r,t=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var s=gye(i);if(s)return vye(s);var a=0,o=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);o&&(a=Number(o[2]),i=o[1]);var l=Number(i);if(isNaN(l))throw new SyntaxError('String "'+i+'" is not a valid number');if(o){if(l>2**a-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));l>=2**(a-1)&&(l=l-2**a)}return l},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:e.referToSelf(n=>i=>{var s=i.clone();return s.value=n(i.value),s}),null:function(i){return 0},"Unit, string | Unit":function(i,s){return i.toNumber(s)},"Array | Matrix":e.referToSelf(n=>i=>At(i,n))});return t.fromJSON=function(n){return parseFloat(n.value)},t}),bye="bigint",wye=["typed"],xye=Y(bye,wye,r=>{var{typed:e}=r,t=e("bigint",{"":function(){return 0n},bigint:function(i){return i},number:function(i){return BigInt(i.toFixed())},BigNumber:function(i){return BigInt(i.round().toString())},Fraction:function(i){return BigInt(i.valueOf().toFixed())},"string | boolean":function(i){return BigInt(i)},null:function(i){return 0n},"Array | Matrix":e.referToSelf(n=>i=>At(i,n))});return t.fromJSON=function(n){return BigInt(n.value)},t}),T6="string",_ye=["typed"],Aye=Y(T6,_ye,r=>{var{typed:e}=r;return e(T6,{"":function(){return""},number:Xm,null:function(n){return"null"},boolean:function(n){return n+""},string:function(n){return n},"Array | Matrix":e.referToSelf(t=>n=>At(n,t)),any:function(n){return String(n)}})}),C6="boolean",Eye=["typed"],Sye=Y(C6,Eye,r=>{var{typed:e}=r;return e(C6,{"":function(){return!1},boolean:function(n){return n},number:function(n){return!!n},null:function(n){return!1},BigNumber:function(n){return!n.isZero()},string:function(n){var i=n.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;var s=Number(n);if(n!==""&&!isNaN(s))return!!s;throw new Error('Cannot convert "'+n+'" to a boolean')},"Array | Matrix":e.referToSelf(t=>n=>At(n,t))})}),Tye="bignumber",Cye=["typed","BigNumber"],Nye=Y(Tye,Cye,r=>{var{typed:e,BigNumber:t}=r;return e("bignumber",{"":function(){return new t(0)},number:function(i){return new t(i+"")},string:function(i){var s=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(s){var a=s[2],o=t(s[1]),l=new t(2).pow(Number(a));if(o.gt(l.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var u=new t(2).pow(Number(a)-1);return o.gte(u)?o.sub(l):o}return new t(i)},BigNumber:function(i){return i},bigint:function(i){return new t(i.toString())},Unit:e.referToSelf(n=>i=>{var s=i.clone();return s.value=n(i.value),s}),Fraction:function(i){return new t(String(i.n)).div(String(i.d)).times(String(i.s))},null:function(i){return new t(0)},"Array | Matrix":e.referToSelf(n=>i=>At(i,n))})}),Dye="complex",Mye=["typed","Complex"],Iye=Y(Dye,Mye,r=>{var{typed:e,Complex:t}=r;return e("complex",{"":function(){return t.ZERO},number:function(i){return new t(i,0)},"number, number":function(i,s){return new t(i,s)},"BigNumber, BigNumber":function(i,s){return new t(i.toNumber(),s.toNumber())},Fraction:function(i){return new t(i.valueOf(),0)},Complex:function(i){return i.clone()},string:function(i){return t(i)},null:function(i){return t(0)},Object:function(i){if("re"in i&&"im"in i)return new t(i.re,i.im);if("r"in i&&"phi"in i||"abs"in i&&"arg"in i)return new t(i);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(n=>i=>At(i,n))})}),Pye="fraction",Rye=["typed","Fraction"],kye=Y(Pye,Rye,r=>{var{typed:e,Fraction:t}=r;return e("fraction",{number:function(i){if(!Number.isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new t(i)},string:function(i){return new t(i)},"number, number":function(i,s){return new t(i,s)},"bigint, bigint":function(i,s){return new t(i,s)},null:function(i){return new t(0)},BigNumber:function(i){return new t(i.toString())},bigint:function(i){return new t(i.toString())},Fraction:function(i){return i},Unit:e.referToSelf(n=>i=>{var s=i.clone();return s.value=n(i.value),s}),Object:function(i){return new t(i)},"Array | Matrix":e.referToSelf(n=>i=>At(i,n))})}),N6="matrix",Fye=["typed","Matrix","DenseMatrix","SparseMatrix"],Oye=Y(N6,Fye,r=>{var{typed:e,Matrix:t,DenseMatrix:n,SparseMatrix:i}=r;return e(N6,{"":function(){return s([])},string:function(o){return s([],o)},"string, string":function(o,l){return s([],o,l)},Array:function(o){return s(o)},Matrix:function(o){return s(o,o.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(a,o,l){if(o==="dense"||o==="default"||o===void 0)return new n(a,l);if(o==="sparse")return new i(a,l);throw new TypeError("Unknown matrix type "+JSON.stringify(o)+".")}}),D6="matrixFromFunction",Bye=["typed","matrix","isZero"],Lye=Y(D6,Bye,r=>{var{typed:e,matrix:t,isZero:n}=r;return e(D6,{"Array | Matrix, function, string, string":function(a,o,l,u){return i(a,o,l,u)},"Array | Matrix, function, string":function(a,o,l){return i(a,o,l)},"Matrix, function":function(a,o){return i(a,o,"dense")},"Array, function":function(a,o){return i(a,o,"dense").toArray()},"Array | Matrix, string, function":function(a,o,l){return i(a,l,o)},"Array | Matrix, string, string, function":function(a,o,l,u){return i(a,u,o,l)}});function i(s,a,o,l){var u;return l!==void 0?u=t(o,l):u=t(o),u.resize(s),u.forEach(function(c,h){var d=a(h);n(d)||u.set(h,d)}),u}}),M6="matrixFromRows",$ye=["typed","matrix","flatten","size"],Vye=Y(M6,$ye,r=>{var{typed:e,matrix:t,flatten:n,size:i}=r;return e(M6,{"...Array":function(l){return s(l)},"...Matrix":function(l){return t(s(l.map(u=>u.toArray())))}});function s(o){if(o.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var l=a(o[0]),u=[];for(var c of o){var h=a(c);if(h!==l)throw new TypeError("The vectors had different length: "+(l|0)+"  "+(h|0));u.push(n(c))}return u}function a(o){var l=i(o);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),I6="matrixFromColumns",Uye=["typed","matrix","flatten","size"],zye=Y(I6,Uye,r=>{var{typed:e,matrix:t,flatten:n,size:i}=r;return e(I6,{"...Array":function(l){return s(l)},"...Matrix":function(l){return t(s(l.map(u=>u.toArray())))}});function s(o){if(o.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var l=a(o[0]),u=[],c=0;c<l;c++)u[c]=[];for(var h of o){var d=a(h);if(d!==l)throw new TypeError("The vectors had different length: "+(l|0)+"  "+(d|0));for(var f=n(h),p=0;p<l;p++)u[p].push(f[p])}return u}function a(o){var l=i(o);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),P6="splitUnit",jye=["typed"],qye=Y(P6,jye,r=>{var{typed:e}=r;return e(P6,{"Unit, Array":function(n,i){return n.splitUnit(i)}})}),R6="unaryMinus",Hye=["typed"],Gye=Y(R6,Hye,r=>{var{typed:e}=r;return e(R6,{number:sX,"Complex | BigNumber | Fraction":t=>t.neg(),bigint:t=>-t,Unit:e.referToSelf(t=>n=>{var i=n.clone();return i.value=e.find(t,i.valueType())(n.value),i}),"Array | Matrix":e.referToSelf(t=>n=>At(n,t,!0))})}),k6="unaryPlus",Wye=["typed","config","numeric"],Kye=Y(k6,Wye,r=>{var{typed:e,config:t,numeric:n}=r;return e(k6,{number:aX,Complex:function(s){return s},BigNumber:function(s){return s},bigint:function(s){return s},Fraction:function(s){return s},Unit:function(s){return s.clone()},"Array | Matrix":e.referToSelf(i=>s=>At(s,i,!0)),boolean:function(s){return n(s?1:0,t.number)},string:function(s){return n(s,Ud(s,t))}})}),F6="abs",Xye=["typed"],Yye=Y(F6,Xye,r=>{var{typed:e}=r;return e(F6,{number:tX,"Complex | BigNumber | Fraction | Unit":t=>t.abs(),bigint:t=>t<0n?-t:t,"Array | Matrix":e.referToSelf(t=>n=>At(n,t,!0))})}),O6="mapSlices",Qye=["typed","isInteger"],$P=Y(O6,Qye,r=>{var{typed:e,isInteger:t}=r;return e(O6,{"Array | Matrix, number | BigNumber, function":function(i,s,a){if(!t(s))throw new TypeError("Integer number expected for dimension");var o=Array.isArray(i)?vt(i):i.size();if(s<0||s>=o.length)throw new tl(s,o.length);return lt(i)?i.create(CT(i.valueOf(),s,a),i.datatype()):CT(i,s,a)}})},{formerly:"apply"});function CT(r,e,t){var n,i,s;if(e<=0)if(Array.isArray(r[0])){for(s=Jye(r),i=[],n=0;n<s.length;n++)i[n]=CT(s[n],e-1,t);return i}else return t(r);else{for(i=[],n=0;n<r.length;n++)i[n]=CT(r[n],e-1,t);return i}}function Jye(r){var e=r.length,t=r[0].length,n,i,s=[];for(i=0;i<t;i++){var a=[];for(n=0;n<e;n++)a.push(r[n][i]);s.push(a)}return s}var B6="addScalar",Zye=["typed"],ebe=Y(B6,Zye,r=>{var{typed:e}=r;return e(B6,{"number, number":rX,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"bigint, bigint":function(n,i){return n+i},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var s=n.clone();return s.value=e.find(t,[s.valueType(),i.valueType()])(s.value,i.value),s.fixPrefix=!1,s})})}),L6="subtractScalar",tbe=["typed"],rbe=Y(L6,tbe,r=>{var{typed:e}=r;return e(L6,{"number, number":nX,"Complex, Complex":function(n,i){return n.sub(i)},"BigNumber, BigNumber":function(n,i){return n.minus(i)},"bigint, bigint":function(n,i){return n-i},"Fraction, Fraction":function(n,i){return n.sub(i)},"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var s=n.clone();return s.value=e.find(t,[s.valueType(),i.valueType()])(s.value,i.value),s.fixPrefix=!1,s})})}),$6="cbrt",nbe=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],ibe=Y($6,nbe,r=>{var{config:e,typed:t,isNegative:n,unaryMinus:i,matrix:s,Complex:a,BigNumber:o,Fraction:l}=r;return t($6,{number:Eb,Complex:u,"Complex, boolean":u,BigNumber:function(d){return d.cbrt()},Unit:c});function u(h,d){var f=h.arg()/3,p=h.abs(),g=new a(Eb(p),0).mul(new a(0,f).exp());if(d){var b=[g,new a(Eb(p),0).mul(new a(0,f+Math.PI*2/3).exp()),new a(Eb(p),0).mul(new a(0,f-Math.PI*2/3).exp())];return e.matrix==="Array"?b:s(b)}else return g}function c(h){if(h.value&&cc(h.value)){var d=h.clone();return d.value=1,d=d.pow(1/3),d.value=u(h.value),d}else{var f=n(h.value);f&&(h.value=i(h.value));var p;_t(h.value)?p=new o(1).div(3):h_(h.value)?p=new l(1,3):p=1/3;var g=h.pow(p);return f&&(g.value=i(g.value)),g}}}),sbe="matAlgo11xS0s",abe=["typed","equalScalar"],Bi=Y(sbe,abe,r=>{var{typed:e,equalScalar:t}=r;return function(i,s,a,o){var l=i._values,u=i._index,c=i._ptr,h=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f=h[0],p=h[1],g,b=t,v=0,x=a;typeof d=="string"&&(g=d,b=e.find(t,[g,g]),v=e.convert(0,g),s=e.convert(s,g),x=e.find(a,[g,g]));for(var y=[],A=[],w=[],_=0;_<p;_++){w[_]=A.length;for(var S=c[_],E=c[_+1],C=S;C<E;C++){var N=u[C],D=o?x(s,l[C]):x(l[C],s);b(D,v)||(A.push(N),y.push(D))}}return w[p]=A.length,i.createSparseMatrix({values:y,index:A,ptr:w,size:[f,p],datatype:g})}}),obe="matAlgo12xSfs",lbe=["typed","DenseMatrix"],Yn=Y(obe,lbe,r=>{var{typed:e,DenseMatrix:t}=r;return function(i,s,a,o){var l=i._values,u=i._index,c=i._ptr,h=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f=h[0],p=h[1],g,b=a;typeof d=="string"&&(g=d,s=e.convert(s,g),b=e.find(a,[g,g]));for(var v=[],x=[],y=[],A=0;A<p;A++){for(var w=A+1,_=c[A],S=c[A+1],E=_;E<S;E++){var C=u[E];x[C]=l[E],y[C]=w}for(var N=0;N<f;N++)A===0&&(v[N]=[]),y[N]===w?v[N][A]=o?b(s,x[N]):b(x[N],s):v[N][A]=o?b(s,0):b(0,s)}return new t({data:v,size:[f,p],datatype:g})}}),ube="matAlgo14xDs",cbe=["typed"],wo=Y(ube,cbe,r=>{var{typed:e}=r;return function(i,s,a,o){var l=i._data,u=i._size,c=i._datatype,h,d=a;typeof c=="string"&&(h=c,s=e.convert(s,h),d=e.find(a,[h,h]));var f=u.length>0?t(d,0,u,u[0],l,s,o):[];return i.createDenseMatrix({data:f,size:gt(u),datatype:h})};function t(n,i,s,a,o,l,u){var c=[];if(i===s.length-1)for(var h=0;h<a;h++)c[h]=u?n(l,o[h]):n(o[h],l);else for(var d=0;d<a;d++)c[d]=t(n,i+1,s,s[i+1],o[d],l,u);return c}}),VP="ceil",hbe=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],dbe=new Dd(10),fbe=Y(VP,["typed","config","round"],r=>{var{typed:e,config:t,round:n}=r;function i(s){var a=Math.ceil(s),o=n(s);return a===o?a:pi(s,o,t.relTol,t.absTol)&&!pi(s,a,t.relTol,t.absTol)?o:a}return e(VP,{number:i,"number, number":function(a,o){if(!tt(o))throw new RangeError("number of decimals in function ceil must be an integer");if(o<0||o>15)throw new RangeError("number of decimals in ceil number must be in range 0-15");var l=10**o;return i(a*l)/l}})}),mbe=Y(VP,hbe,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:s,zeros:a,DenseMatrix:o}=r,l=Bi({typed:e,equalScalar:s}),u=Yn({typed:e,DenseMatrix:o}),c=wo({typed:e}),h=fbe({typed:e,config:t,round:n});function d(f){var p=(v,x)=>yo(v,x,t.relTol,t.absTol),g=f.ceil(),b=n(f);return g.eq(b)?g:p(f,b)&&!p(f,g)?b:g}return e("ceil",{number:h.signatures.number,"number,number":h.signatures["number,number"],Complex:function(p){return p.ceil()},"Complex, number":function(p,g){return p.ceil(g)},"Complex, BigNumber":function(p,g){return p.ceil(g.toNumber())},BigNumber:d,"BigNumber, BigNumber":function(p,g){var b=dbe.pow(g);return d(p.mul(b)).div(b)},bigint:f=>f,"bigint, number":(f,p)=>f,"bigint, BigNumber":(f,p)=>f,Fraction:function(p){return p.ceil()},"Fraction, number":function(p,g){return p.ceil(g)},"Fraction, BigNumber":function(p,g){return p.ceil(g.toNumber())},"Unit, number, Unit":e.referToSelf(f=>function(p,g,b){var v=p.toNumeric(b);return b.multiply(f(v,g))}),"Unit, BigNumber, Unit":e.referToSelf(f=>(p,g,b)=>f(p,g.toNumber(),b)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(f=>(p,g,b)=>At(p,v=>f(v,g,b),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(f=>(p,g)=>f(p,0,g)),"Array | Matrix":e.referToSelf(f=>p=>At(p,f,!0)),"Array, number | BigNumber":e.referToSelf(f=>(p,g)=>At(p,b=>f(b,g),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(f=>(p,g)=>l(p,g,f,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(f=>(p,g)=>c(p,g,f,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(f=>(p,g)=>c(i(g),p,f,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(f=>(p,g)=>s(p,0)?a(g.size(),g.storage()):g.storage()==="dense"?c(g,p,f,!0):u(g,p,f,!0))})}),V6="cube",pbe=["typed"],gbe=Y(V6,pbe,r=>{var{typed:e}=r;return e(V6,{number:oX,Complex:function(n){return n.mul(n).mul(n)},BigNumber:function(n){return n.times(n).times(n)},bigint:function(n){return n*n*n},Fraction:function(n){return n.pow(3)},Unit:function(n){return n.pow(3)}})}),U6="exp",vbe=["typed"],ybe=Y(U6,vbe,r=>{var{typed:e}=r;return e(U6,{number:lX,Complex:function(n){return n.exp()},BigNumber:function(n){return n.exp()}})}),z6="expm1",bbe=["typed","Complex"],wbe=Y(z6,bbe,r=>{var{typed:e,Complex:t}=r;return e(z6,{number:uX,Complex:function(i){var s=Math.exp(i.re);return new t(s*Math.cos(i.im)-1,s*Math.sin(i.im))},BigNumber:function(i){return i.exp().minus(1)}})}),UP="fix",xbe=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],_be=Y(UP,["typed","ceil","floor"],r=>{var{typed:e,ceil:t,floor:n}=r;return e(UP,{number:function(s){return s>0?n(s):t(s)},"number, number":function(s,a){return s>0?n(s,a):t(s,a)}})}),Abe=Y(UP,xbe,r=>{var{typed:e,Complex:t,matrix:n,ceil:i,floor:s,equalScalar:a,zeros:o,DenseMatrix:l}=r,u=Yn({typed:e,DenseMatrix:l}),c=wo({typed:e}),h=_be({typed:e,ceil:i,floor:s});return e("fix",{number:h.signatures.number,"number, number | BigNumber":h.signatures["number,number"],Complex:function(f){return new t(f.re>0?Math.floor(f.re):Math.ceil(f.re),f.im>0?Math.floor(f.im):Math.ceil(f.im))},"Complex, number":function(f,p){return new t(f.re>0?s(f.re,p):i(f.re,p),f.im>0?s(f.im,p):i(f.im,p))},"Complex, BigNumber":function(f,p){var g=p.toNumber();return new t(f.re>0?s(f.re,g):i(f.re,g),f.im>0?s(f.im,g):i(f.im,g))},BigNumber:function(f){return f.isNegative()?i(f):s(f)},"BigNumber, number | BigNumber":function(f,p){return f.isNegative()?i(f,p):s(f,p)},bigint:d=>d,"bigint, number":(d,f)=>d,"bigint, BigNumber":(d,f)=>d,Fraction:function(f){return f.s<0n?f.ceil():f.floor()},"Fraction, number | BigNumber":function(f,p){return f.s<0n?i(f,p):s(f,p)},"Unit, number, Unit":e.referToSelf(d=>function(f,p,g){var b=f.toNumeric(g);return g.multiply(d(b,p))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(f,p,g)=>d(f,p.toNumber(),g)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(f,p,g)=>At(f,b=>d(b,p,g),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(f,p)=>d(f,0,p)),"Array | Matrix":e.referToSelf(d=>f=>At(f,d,!0)),"Array | Matrix, number | BigNumber":e.referToSelf(d=>(f,p)=>At(f,g=>d(g,p),!0)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(f,p)=>c(n(p),f,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(f,p)=>a(f,0)?o(p.size(),p.storage()):p.storage()==="dense"?c(p,f,d,!0):u(p,f,d,!0))})}),zP="floor",Ebe=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],Sbe=new Dd(10),Tbe=Y(zP,["typed","config","round"],r=>{var{typed:e,config:t,round:n}=r;function i(s){var a=Math.floor(s),o=n(s);return a===o?a:pi(s,o,t.relTol,t.absTol)&&!pi(s,a,t.relTol,t.absTol)?o:a}return e(zP,{number:i,"number, number":function(a,o){if(!tt(o))throw new RangeError("number of decimals in function floor must be an integer");if(o<0||o>15)throw new RangeError("number of decimals in floor number must be in range 0 - 15");var l=10**o;return i(a*l)/l}})}),qX=Y(zP,Ebe,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:s,zeros:a,DenseMatrix:o}=r,l=Bi({typed:e,equalScalar:s}),u=Yn({typed:e,DenseMatrix:o}),c=wo({typed:e}),h=Tbe({typed:e,config:t,round:n});function d(f){var p=(v,x)=>yo(v,x,t.relTol,t.absTol),g=f.floor(),b=n(f);return g.eq(b)?g:p(f,b)&&!p(f,g)?b:g}return e("floor",{number:h.signatures.number,"number,number":h.signatures["number,number"],Complex:function(p){return p.floor()},"Complex, number":function(p,g){return p.floor(g)},"Complex, BigNumber":function(p,g){return p.floor(g.toNumber())},BigNumber:d,"BigNumber, BigNumber":function(p,g){var b=Sbe.pow(g);return d(p.mul(b)).div(b)},bigint:f=>f,"bigint, number":(f,p)=>f,"bigint, BigNumber":(f,p)=>f,Fraction:function(p){return p.floor()},"Fraction, number":function(p,g){return p.floor(g)},"Fraction, BigNumber":function(p,g){return p.floor(g.toNumber())},"Unit, number, Unit":e.referToSelf(f=>function(p,g,b){var v=p.toNumeric(b);return b.multiply(f(v,g))}),"Unit, BigNumber, Unit":e.referToSelf(f=>(p,g,b)=>f(p,g.toNumber(),b)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(f=>(p,g,b)=>At(p,v=>f(v,g,b),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(f=>(p,g)=>f(p,0,g)),"Array | Matrix":e.referToSelf(f=>p=>At(p,f,!0)),"Array, number | BigNumber":e.referToSelf(f=>(p,g)=>At(p,b=>f(b,g),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(f=>(p,g)=>l(p,g,f,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(f=>(p,g)=>c(p,g,f,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(f=>(p,g)=>c(i(g),p,f,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(f=>(p,g)=>s(p,0)?a(g.size(),g.storage()):g.storage()==="dense"?c(g,p,f,!0):u(g,p,f,!0))})}),Cbe="matAlgo02xDS0",Nbe=["typed","equalScalar"],nl=Y(Cbe,Nbe,r=>{var{typed:e,equalScalar:t}=r;return function(i,s,a,o){var l=i._data,u=i._size,c=i._datatype||i.getDataType(),h=s._values,d=s._index,f=s._ptr,p=s._size,g=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(u.length!==p.length)throw new Mt(u.length,p.length);if(u[0]!==p[0]||u[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+p+")");if(!h)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var b=u[0],v=u[1],x,y=t,A=0,w=a;typeof c=="string"&&c===g&&c!=="mixed"&&(x=c,y=e.find(t,[x,x]),A=e.convert(0,x),w=e.find(a,[x,x]));for(var _=[],S=[],E=[],C=0;C<v;C++){E[C]=S.length;for(var N=f[C],D=f[C+1],M=N;M<D;M++){var I=d[M],U=o?w(h[M],l[I][C]):w(l[I][C],h[M]);y(U,A)||(S.push(I),_.push(U))}}return E[v]=S.length,s.createSparseMatrix({values:_,index:S,ptr:E,size:[b,v],datatype:c===i._datatype&&g===s._datatype?x:void 0})}}),Dbe="matAlgo03xDSf",Mbe=["typed"],ss=Y(Dbe,Mbe,r=>{var{typed:e}=r;return function(n,i,s,a){var o=n._data,l=n._size,u=n._datatype||n.getDataType(),c=i._values,h=i._index,d=i._ptr,f=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==f.length)throw new Mt(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g=l[0],b=l[1],v,x=0,y=s;typeof u=="string"&&u===p&&u!=="mixed"&&(v=u,x=e.convert(0,v),y=e.find(s,[v,v]));for(var A=[],w=0;w<g;w++)A[w]=[];for(var _=[],S=[],E=0;E<b;E++){for(var C=E+1,N=d[E],D=d[E+1],M=N;M<D;M++){var I=h[M];_[I]=a?y(c[M],o[I][E]):y(o[I][E],c[M]),S[I]=C}for(var U=0;U<g;U++)S[U]===C?A[U][E]=_[U]:A[U][E]=a?y(x,o[U][E]):y(o[U][E],x)}return n.createDenseMatrix({data:A,size:[g,b],datatype:u===n._datatype&&p===i._datatype?v:void 0})}}),Ibe="matAlgo05xSfSf",Pbe=["typed","equalScalar"],cN=Y(Ibe,Pbe,r=>{var{typed:e,equalScalar:t}=r;return function(i,s,a){var o=i._values,l=i._index,u=i._ptr,c=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,f=s._index,p=s._ptr,g=s._size,b=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==g.length)throw new Mt(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");var v=c[0],x=c[1],y,A=t,w=0,_=a;typeof h=="string"&&h===b&&h!=="mixed"&&(y=h,A=e.find(t,[y,y]),w=e.convert(0,y),_=e.find(a,[y,y]));var S=o&&d?[]:void 0,E=[],C=[],N=S?[]:void 0,D=S?[]:void 0,M=[],I=[],U,X,k,z;for(X=0;X<x;X++){C[X]=E.length;var q=X+1;for(k=u[X],z=u[X+1];k<z;k++)U=l[k],E.push(U),M[U]=q,N&&(N[U]=o[k]);for(k=p[X],z=p[X+1];k<z;k++)U=f[k],M[U]!==q&&E.push(U),I[U]=q,D&&(D[U]=d[k]);if(S)for(k=C[X];k<E.length;){U=E[k];var H=M[U],te=I[U];if(H===q||te===q){var ce=H===q?N[U]:w,re=te===q?D[U]:w,O=_(ce,re);A(O,w)?E.splice(k,1):(S.push(O),k++)}}}return C[x]=E.length,i.createSparseMatrix({values:S,index:E,ptr:C,size:[v,x],datatype:h===i._datatype&&b===s._datatype?y:void 0})}}),Rbe="matAlgo13xDD",kbe=["typed"],HX=Y(Rbe,kbe,r=>{var{typed:e}=r;return function(i,s,a){var o=i._data,l=i._size,u=i._datatype,c=s._data,h=s._size,d=s._datatype,f=[];if(l.length!==h.length)throw new Mt(l.length,h.length);for(var p=0;p<l.length;p++){if(l[p]!==h[p])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");f[p]=l[p]}var g,b=a;typeof u=="string"&&u===d&&(g=u,b=e.find(a,[g,g]));var v=f.length>0?t(b,0,f,f[0],o,c):[];return i.createDenseMatrix({data:v,size:f,datatype:g})};function t(n,i,s,a,o,l){var u=[];if(i===s.length-1)for(var c=0;c<a;c++)u[c]=n(o[c],l[c]);else for(var h=0;h<a;h++)u[h]=t(n,i+1,s,s[i+1],o[h],l[h]);return u}});function ti(r,e){if(Nc(r.size(),e.size()))return[r,e];var t=wT(r.size(),e.size());return[r,e].map(n=>Fbe(n,t))}function Fbe(r,e){return Nc(r.size(),e)?r:r.create(Cf(r.valueOf(),e),r.datatype())}var Obe="matrixAlgorithmSuite",Bbe=["typed","matrix"],Ar=Y(Obe,Bbe,r=>{var{typed:e,matrix:t}=r,n=HX({typed:e}),i=wo({typed:e});return function(a){var o=a.elop,l=a.SD||a.DS,u;o?(u={"DenseMatrix, DenseMatrix":(f,p)=>n(...ti(f,p),o),"Array, Array":(f,p)=>n(...ti(t(f),t(p)),o).valueOf(),"Array, DenseMatrix":(f,p)=>n(...ti(t(f),p),o),"DenseMatrix, Array":(f,p)=>n(...ti(f,t(p)),o)},a.SS&&(u["SparseMatrix, SparseMatrix"]=(f,p)=>a.SS(...ti(f,p),o,!1)),a.DS&&(u["DenseMatrix, SparseMatrix"]=(f,p)=>a.DS(...ti(f,p),o,!1),u["Array, SparseMatrix"]=(f,p)=>a.DS(...ti(t(f),p),o,!1)),l&&(u["SparseMatrix, DenseMatrix"]=(f,p)=>l(...ti(p,f),o,!0),u["SparseMatrix, Array"]=(f,p)=>l(...ti(t(p),f),o,!0))):(u={"DenseMatrix, DenseMatrix":e.referToSelf(f=>(p,g)=>n(...ti(p,g),f)),"Array, Array":e.referToSelf(f=>(p,g)=>n(...ti(t(p),t(g)),f).valueOf()),"Array, DenseMatrix":e.referToSelf(f=>(p,g)=>n(...ti(t(p),g),f)),"DenseMatrix, Array":e.referToSelf(f=>(p,g)=>n(...ti(p,t(g)),f))},a.SS&&(u["SparseMatrix, SparseMatrix"]=e.referToSelf(f=>(p,g)=>a.SS(...ti(p,g),f,!1))),a.DS&&(u["DenseMatrix, SparseMatrix"]=e.referToSelf(f=>(p,g)=>a.DS(...ti(p,g),f,!1)),u["Array, SparseMatrix"]=e.referToSelf(f=>(p,g)=>a.DS(...ti(t(p),g),f,!1))),l&&(u["SparseMatrix, DenseMatrix"]=e.referToSelf(f=>(p,g)=>l(...ti(g,p),f,!0)),u["SparseMatrix, Array"]=e.referToSelf(f=>(p,g)=>l(...ti(t(g),p),f,!0))));var c=a.scalar||"any",h=a.Ds||a.Ss;h&&(o?(u["DenseMatrix,"+c]=(f,p)=>i(f,p,o,!1),u[c+", DenseMatrix"]=(f,p)=>i(p,f,o,!0),u["Array,"+c]=(f,p)=>i(t(f),p,o,!1).valueOf(),u[c+", Array"]=(f,p)=>i(t(p),f,o,!0).valueOf()):(u["DenseMatrix,"+c]=e.referToSelf(f=>(p,g)=>i(p,g,f,!1)),u[c+", DenseMatrix"]=e.referToSelf(f=>(p,g)=>i(g,p,f,!0)),u["Array,"+c]=e.referToSelf(f=>(p,g)=>i(t(p),g,f,!1).valueOf()),u[c+", Array"]=e.referToSelf(f=>(p,g)=>i(t(g),p,f,!0).valueOf())));var d=a.sS!==void 0?a.sS:a.Ss;return o?(a.Ss&&(u["SparseMatrix,"+c]=(f,p)=>a.Ss(f,p,o,!1)),d&&(u[c+", SparseMatrix"]=(f,p)=>d(p,f,o,!0))):(a.Ss&&(u["SparseMatrix,"+c]=e.referToSelf(f=>(p,g)=>a.Ss(p,g,f,!1))),d&&(u[c+", SparseMatrix"]=e.referToSelf(f=>(p,g)=>d(g,p,f,!0)))),o&&o.signatures&&TK(u,o.signatures),u}}),j6="mod",Lbe=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],GX=Y(j6,Lbe,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:s,zeros:a,DenseMatrix:o,concat:l}=r,u=qX({typed:e,config:t,round:n,matrix:i,equalScalar:s,zeros:a,DenseMatrix:o}),c=nl({typed:e,equalScalar:s}),h=ss({typed:e}),d=cN({typed:e,equalScalar:s}),f=Bi({typed:e,equalScalar:s}),p=Yn({typed:e,DenseMatrix:o}),g=Ar({typed:e,matrix:i,concat:l});return e(j6,{"number, number":b,"BigNumber, BigNumber":function(x,y){return y.isZero()?x:x.sub(y.mul(u(x.div(y))))},"bigint, bigint":function(x,y){if(y===0n)return x;if(x<0){var A=x%y;return A===0n?A:A+y}return x%y},"Fraction, Fraction":function(x,y){return y.equals(0)?x:x.sub(y.mul(u(x.div(y))))}},g({SS:d,DS:h,SD:c,Ss:f,sS:p}));function b(v,x){return x===0?v:v-x*u(v/x)}}),$be="matAlgo01xDSid",Vbe=["typed"],jd=Y($be,Vbe,r=>{var{typed:e}=r;return function(n,i,s,a){var o=n._data,l=n._size,u=n._datatype||n.getDataType(),c=i._values,h=i._index,d=i._ptr,f=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==f.length)throw new Mt(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g=l[0],b=l[1],v=typeof u=="string"&&u!=="mixed"&&u===p?u:void 0,x=v?e.find(s,[v,v]):s,y,A,w=[];for(y=0;y<g;y++)w[y]=[];var _=[],S=[];for(A=0;A<b;A++){for(var E=A+1,C=d[A],N=d[A+1],D=C;D<N;D++)y=h[D],_[y]=a?x(c[D],o[y][A]):x(o[y][A],c[D]),S[y]=E;for(y=0;y<g;y++)S[y]===E?w[y][A]=_[y]:w[y][A]=o[y][A]}return n.createDenseMatrix({data:w,size:[g,b],datatype:u===n._datatype&&p===i._datatype?v:void 0})}}),Ube="matAlgo04xSidSid",zbe=["typed","equalScalar"],WF=Y(Ube,zbe,r=>{var{typed:e,equalScalar:t}=r;return function(i,s,a){var o=i._values,l=i._index,u=i._ptr,c=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,f=s._index,p=s._ptr,g=s._size,b=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==g.length)throw new Mt(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");var v=c[0],x=c[1],y,A=t,w=0,_=a;typeof h=="string"&&h===b&&h!=="mixed"&&(y=h,A=e.find(t,[y,y]),w=e.convert(0,y),_=e.find(a,[y,y]));var S=o&&d?[]:void 0,E=[],C=[],N=o&&d?[]:void 0,D=o&&d?[]:void 0,M=[],I=[],U,X,k,z,q;for(X=0;X<x;X++){C[X]=E.length;var H=X+1;for(z=u[X],q=u[X+1],k=z;k<q;k++)U=l[k],E.push(U),M[U]=H,N&&(N[U]=o[k]);for(z=p[X],q=p[X+1],k=z;k<q;k++)if(U=f[k],M[U]===H){if(N){var te=_(N[U],d[k]);A(te,w)?M[U]=null:N[U]=te}}else E.push(U),I[U]=H,D&&(D[U]=d[k]);if(N&&D)for(k=C[X];k<E.length;)U=E[k],M[U]===H?(S[k]=N[U],k++):I[U]===H?(S[k]=D[U],k++):E.splice(k,1)}return C[x]=E.length,i.createSparseMatrix({values:S,index:E,ptr:C,size:[v,x],datatype:h===i._datatype&&b===s._datatype?y:void 0})}}),jbe="matAlgo10xSids",qbe=["typed","DenseMatrix"],_p=Y(jbe,qbe,r=>{var{typed:e,DenseMatrix:t}=r;return function(i,s,a,o){var l=i._values,u=i._index,c=i._ptr,h=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f=h[0],p=h[1],g,b=a;typeof d=="string"&&(g=d,s=e.convert(s,g),b=e.find(a,[g,g]));for(var v=[],x=[],y=[],A=0;A<p;A++){for(var w=A+1,_=c[A],S=c[A+1],E=_;E<S;E++){var C=u[E];x[C]=l[E],y[C]=w}for(var N=0;N<f;N++)A===0&&(v[N]=[]),y[N]===w?v[N][A]=o?b(s,x[N]):b(x[N],s):v[N][A]=s}return new t({data:v,size:[f,p],datatype:g})}});function Ap(r,e,t,n){if(!(this instanceof Ap))throw new SyntaxError("Constructor must be called with the new operator");this.fn=r,this.count=e,this.min=t,this.max=n,this.message="Wrong number of arguments in function "+r+" ("+e+" provided, "+t+(n!=null?"-"+n:"")+" expected)",this.stack=new Error().stack}Ap.prototype=new Error;Ap.prototype.constructor=Error;Ap.prototype.name="ArgumentsError";Ap.prototype.isArgumentsError=!0;var q6="gcd",Hbe=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],ZD="number | BigNumber | Fraction | Matrix | Array",Gbe="".concat(ZD,", ").concat(ZD,", ...").concat(ZD);function H6(r){return!r.some(e=>Array.isArray(e))}var Wbe=Y(q6,Hbe,r=>{var{typed:e,matrix:t,config:n,round:i,equalScalar:s,zeros:a,BigNumber:o,DenseMatrix:l,concat:u}=r,c=GX({typed:e,config:n,round:i,matrix:t,equalScalar:s,zeros:a,DenseMatrix:l,concat:u}),h=jd({typed:e}),d=WF({typed:e,equalScalar:s}),f=_p({typed:e,DenseMatrix:l}),p=Ar({typed:e,matrix:t,concat:u});return e(q6,{"number, number":g,"BigNumber, BigNumber":b,"Fraction, Fraction":(v,x)=>v.gcd(x)},p({SS:d,DS:h,Ss:f}),{[Gbe]:e.referToSelf(v=>(x,y,A)=>{for(var w=v(x,y),_=0;_<A.length;_++)w=v(w,A[_]);return w}),Array:e.referToSelf(v=>x=>{if(x.length===1&&Array.isArray(x[0])&&H6(x[0]))return v(...x[0]);if(H6(x))return v(...x);throw new Ap("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(v=>x=>v(x.toArray()))});function g(v,x){if(!tt(v)||!tt(x))throw new Error("Parameters in function gcd must be integer numbers");for(var y;x!==0;)y=c(v,x),v=x,x=y;return v<0?-v:v}function b(v,x){if(!v.isInt()||!x.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var y=new o(0);!x.isZero();){var A=c(v,x);v=x,x=A}return v.lt(y)?v.neg():v}}),Kbe="matAlgo06xS0S0",Xbe=["typed","equalScalar"],hN=Y(Kbe,Xbe,r=>{var{typed:e,equalScalar:t}=r;return function(i,s,a){var o=i._values,l=i._size,u=i._datatype||i._data===void 0?i._datatype:i.getDataType(),c=s._values,h=s._size,d=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(l.length!==h.length)throw new Mt(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");var f=l[0],p=l[1],g,b=t,v=0,x=a;typeof u=="string"&&u===d&&u!=="mixed"&&(g=u,b=e.find(t,[g,g]),v=e.convert(0,g),x=e.find(a,[g,g]));for(var y=o&&c?[]:void 0,A=[],w=[],_=y?[]:void 0,S=[],E=[],C=0;C<p;C++){w[C]=A.length;var N=C+1;if(d6(i,C,S,_,E,N,A,x),d6(s,C,S,_,E,N,A,x),_)for(var D=w[C];D<A.length;){var M=A[D];if(E[M]===N){var I=_[M];b(I,v)?A.splice(D,1):(y.push(I),D++)}else A.splice(D,1)}else for(var U=w[C];U<A.length;){var X=A[U];E[X]!==N?A.splice(U,1):U++}}return w[p]=A.length,i.createSparseMatrix({values:y,index:A,ptr:w,size:[f,p],datatype:u===i._datatype&&d===s._datatype?g:void 0})}}),G6="lcm",Ybe=["typed","matrix","equalScalar","concat"],Qbe=Y(G6,Ybe,r=>{var{typed:e,matrix:t,equalScalar:n,concat:i}=r,s=nl({typed:e,equalScalar:n}),a=hN({typed:e,equalScalar:n}),o=Bi({typed:e,equalScalar:n}),l=Ar({typed:e,matrix:t,concat:i}),u="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(u,", ").concat(u,", ...").concat(u)]=e.referToSelf(d=>(f,p,g)=>{for(var b=d(f,p),v=0;v<g.length;v++)b=d(b,g[v]);return b}),e(G6,{"number, number":cX,"BigNumber, BigNumber":h,"Fraction, Fraction":(d,f)=>d.lcm(f)},l({SS:a,DS:s,Ss:o}),c);function h(d,f){if(!d.isInt()||!f.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(d.isZero())return d;if(f.isZero())return f;for(var p=d.times(f);!f.isZero();){var g=f;f=d.mod(g),d=g}return p.div(d).abs()}});function KF(r,e,t,n){return function(i){if(i>0||t.predictable){if(i<=0)return NaN;var s=i.toString(16),a=s.substring(0,15);return r*(s.length-a.length)+e(+("0x"+a))}return n(i.toNumber())}}var W6="log10",Jbe=["typed","config","Complex"],Zbe=AT(16),e1e=Y(W6,Jbe,r=>{var{typed:e,config:t,Complex:n}=r;function i(a){return a.log().div(Math.LN10)}function s(a){return i(new n(a,0))}return e(W6,{number:function(o){return o>=0||t.predictable?AT(o):s(o)},bigint:KF(Zbe,AT,t,s),Complex:i,BigNumber:function(o){return!o.isNegative()||t.predictable?o.log():s(o.toNumber())},"Array | Matrix":e.referToSelf(a=>o=>At(o,a))})}),K6="log2",t1e=["typed","config","Complex"],r1e=Y(K6,t1e,r=>{var{typed:e,config:t,Complex:n}=r;function i(a){return s(new n(a,0))}return e(K6,{number:function(o){return o>=0||t.predictable?kP(o):i(o)},bigint:KF(4,kP,t,i),Complex:s,BigNumber:function(o){return!o.isNegative()||t.predictable?o.log(2):i(o.toNumber())},"Array | Matrix":e.referToSelf(a=>o=>At(o,a))});function s(a){var o=Math.sqrt(a.re*a.re+a.im*a.im);return new n(Math.log2?Math.log2(o):Math.log(o)/Math.LN2,Math.atan2(a.im,a.re)/Math.LN2)}}),n1e="multiplyScalar",i1e=["typed"],s1e=Y(n1e,i1e,r=>{var{typed:e}=r;return e("multiplyScalar",{"number, number":iX,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"bigint, bigint":function(n,i){return n*i},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(t,n)=>n.multiply(t),"Unit, number | Fraction | BigNumber | Complex | Unit":(t,n)=>t.multiply(n)})}),X6="multiply",a1e=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],o1e=Y(X6,a1e,r=>{var{typed:e,matrix:t,addScalar:n,multiplyScalar:i,equalScalar:s,dot:a}=r,o=Bi({typed:e,equalScalar:s}),l=wo({typed:e});function u(w,_){switch(w.length){case 1:switch(_.length){case 1:if(w[0]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(w[0]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+w[0]+") must match Matrix rows ("+_[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+_.length+" dimensions)")}break;case 2:switch(_.length){case 1:if(w[1]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+w[1]+") must match Vector length ("+_[0]+")");break;case 2:if(w[1]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+w[1]+") must match Matrix B rows ("+_[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+_.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+w.length+" dimensions)")}}function c(w,_,S){if(S===0)throw new Error("Cannot multiply two empty vectors");return a(w,_)}function h(w,_){if(_.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(w,_)}function d(w,_){var S=w._data,E=w._size,C=w._datatype||w.getDataType(),N=_._data,D=_._size,M=_._datatype||_.getDataType(),I=E[0],U=D[1],X,k=n,z=i;C&&M&&C===M&&typeof C=="string"&&C!=="mixed"&&(X=C,k=e.find(n,[X,X]),z=e.find(i,[X,X]));for(var q=[],H=0;H<U;H++){for(var te=z(S[0],N[0][H]),ce=1;ce<I;ce++)te=k(te,z(S[ce],N[ce][H]));q[H]=te}return w.createDenseMatrix({data:q,size:[U],datatype:C===w._datatype&&M===_._datatype?X:void 0})}var f=e("_multiplyMatrixVector",{"DenseMatrix, any":g,"SparseMatrix, any":x}),p=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":b,"DenseMatrix, SparseMatrix":v,"SparseMatrix, DenseMatrix":y,"SparseMatrix, SparseMatrix":A});function g(w,_){var S=w._data,E=w._size,C=w._datatype||w.getDataType(),N=_._data,D=_._datatype||_.getDataType(),M=E[0],I=E[1],U,X=n,k=i;C&&D&&C===D&&typeof C=="string"&&C!=="mixed"&&(U=C,X=e.find(n,[U,U]),k=e.find(i,[U,U]));for(var z=[],q=0;q<M;q++){for(var H=S[q],te=k(H[0],N[0]),ce=1;ce<I;ce++)te=X(te,k(H[ce],N[ce]));z[q]=te}return w.createDenseMatrix({data:z,size:[M],datatype:C===w._datatype&&D===_._datatype?U:void 0})}function b(w,_){var S=w._data,E=w._size,C=w._datatype||w.getDataType(),N=_._data,D=_._size,M=_._datatype||_.getDataType(),I=E[0],U=E[1],X=D[1],k,z=n,q=i;C&&M&&C===M&&typeof C=="string"&&C!=="mixed"&&C!=="mixed"&&(k=C,z=e.find(n,[k,k]),q=e.find(i,[k,k]));for(var H=[],te=0;te<I;te++){var ce=S[te];H[te]=[];for(var re=0;re<X;re++){for(var O=q(ce[0],N[0][re]),ne=1;ne<U;ne++)O=z(O,q(ce[ne],N[ne][re]));H[te][re]=O}}return w.createDenseMatrix({data:H,size:[I,X],datatype:C===w._datatype&&M===_._datatype?k:void 0})}function v(w,_){var S=w._data,E=w._size,C=w._datatype||w.getDataType(),N=_._values,D=_._index,M=_._ptr,I=_._size,U=_._datatype||_._data===void 0?_._datatype:_.getDataType();if(!N)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var X=E[0],k=I[1],z,q=n,H=i,te=s,ce=0;C&&U&&C===U&&typeof C=="string"&&C!=="mixed"&&(z=C,q=e.find(n,[z,z]),H=e.find(i,[z,z]),te=e.find(s,[z,z]),ce=e.convert(0,z));for(var re=[],O=[],ne=[],W=_.createSparseMatrix({values:re,index:O,ptr:ne,size:[X,k],datatype:C===w._datatype&&U===_._datatype?z:void 0}),pe=0;pe<k;pe++){ne[pe]=O.length;var me=M[pe],ie=M[pe+1];if(ie>me)for(var K=0,ae=0;ae<X;ae++){for(var ge=ae+1,he=void 0,be=me;be<ie;be++){var ve=D[be];K!==ge?(he=H(S[ae][ve],N[be]),K=ge):he=q(he,H(S[ae][ve],N[be]))}K===ge&&!te(he,ce)&&(O.push(ae),re.push(he))}}return ne[k]=O.length,W}function x(w,_){var S=w._values,E=w._index,C=w._ptr,N=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var D=_._data,M=_._datatype||_.getDataType(),I=w._size[0],U=_._size[0],X=[],k=[],z=[],q,H=n,te=i,ce=s,re=0;N&&M&&N===M&&typeof N=="string"&&N!=="mixed"&&(q=N,H=e.find(n,[q,q]),te=e.find(i,[q,q]),ce=e.find(s,[q,q]),re=e.convert(0,q));var O=[],ne=[];z[0]=0;for(var W=0;W<U;W++){var pe=D[W];if(!ce(pe,re))for(var me=C[W],ie=C[W+1],K=me;K<ie;K++){var ae=E[K];ne[ae]?O[ae]=H(O[ae],te(pe,S[K])):(ne[ae]=!0,k.push(ae),O[ae]=te(pe,S[K]))}}for(var ge=k.length,he=0;he<ge;he++){var be=k[he];X[he]=O[be]}return z[1]=k.length,w.createSparseMatrix({values:X,index:k,ptr:z,size:[I,1],datatype:N===w._datatype&&M===_._datatype?q:void 0})}function y(w,_){var S=w._values,E=w._index,C=w._ptr,N=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var D=_._data,M=_._datatype||_.getDataType(),I=w._size[0],U=_._size[0],X=_._size[1],k,z=n,q=i,H=s,te=0;N&&M&&N===M&&typeof N=="string"&&N!=="mixed"&&(k=N,z=e.find(n,[k,k]),q=e.find(i,[k,k]),H=e.find(s,[k,k]),te=e.convert(0,k));for(var ce=[],re=[],O=[],ne=w.createSparseMatrix({values:ce,index:re,ptr:O,size:[I,X],datatype:N===w._datatype&&M===_._datatype?k:void 0}),W=[],pe=[],me=0;me<X;me++){O[me]=re.length;for(var ie=me+1,K=0;K<U;K++){var ae=D[K][me];if(!H(ae,te))for(var ge=C[K],he=C[K+1],be=ge;be<he;be++){var ve=E[be];pe[ve]!==ie?(pe[ve]=ie,re.push(ve),W[ve]=q(ae,S[be])):W[ve]=z(W[ve],q(ae,S[be]))}}for(var Ie=O[me],Ve=re.length,We=Ie;We<Ve;We++){var Be=re[We];ce[We]=W[Be]}}return O[X]=re.length,ne}function A(w,_){var S=w._values,E=w._index,C=w._ptr,N=w._datatype||w._data===void 0?w._datatype:w.getDataType(),D=_._values,M=_._index,I=_._ptr,U=_._datatype||_._data===void 0?_._datatype:_.getDataType(),X=w._size[0],k=_._size[1],z=S&&D,q,H=n,te=i;N&&U&&N===U&&typeof N=="string"&&N!=="mixed"&&(q=N,H=e.find(n,[q,q]),te=e.find(i,[q,q]));for(var ce=z?[]:void 0,re=[],O=[],ne=w.createSparseMatrix({values:ce,index:re,ptr:O,size:[X,k],datatype:N===w._datatype&&U===_._datatype?q:void 0}),W=z?[]:void 0,pe=[],me,ie,K,ae,ge,he,be,ve,Ie=0;Ie<k;Ie++){O[Ie]=re.length;var Ve=Ie+1;for(ge=I[Ie],he=I[Ie+1],ae=ge;ae<he;ae++)if(ve=M[ae],z)for(ie=C[ve],K=C[ve+1],me=ie;me<K;me++)be=E[me],pe[be]!==Ve?(pe[be]=Ve,re.push(be),W[be]=te(D[ae],S[me])):W[be]=H(W[be],te(D[ae],S[me]));else for(ie=C[ve],K=C[ve+1],me=ie;me<K;me++)be=E[me],pe[be]!==Ve&&(pe[be]=Ve,re.push(be));if(z)for(var We=O[Ie],Be=re.length,$e=We;$e<Be;$e++){var Ge=re[$e];ce[$e]=W[Ge]}}return O[k]=re.length,ne}return e(X6,i,{"Array, Array":e.referTo("Matrix, Matrix",w=>(_,S)=>{u(vt(_),vt(S));var E=w(t(_),t(S));return lt(E)?E.valueOf():E}),"Matrix, Matrix":function(_,S){var E=_.size(),C=S.size();return u(E,C),E.length===1?C.length===1?c(_,S,E[0]):h(_,S):C.length===1?f(_,S):p(_,S)},"Matrix, Array":e.referTo("Matrix,Matrix",w=>(_,S)=>w(_,t(S))),"Array, Matrix":e.referToSelf(w=>(_,S)=>w(t(_,S.storage()),S)),"SparseMatrix, any":function(_,S){return o(_,S,i,!1)},"DenseMatrix, any":function(_,S){return l(_,S,i,!1)},"any, SparseMatrix":function(_,S){return o(S,_,i,!0)},"any, DenseMatrix":function(_,S){return l(S,_,i,!0)},"Array, any":function(_,S){return l(t(_),S,i,!1).valueOf()},"any, Array":function(_,S){return l(t(S),_,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(w=>(_,S,E)=>{for(var C=w(_,S),N=0;N<E.length;N++)C=w(C,E[N]);return C})})}),Y6="nthRoot",l1e=["typed","matrix","equalScalar","BigNumber","concat"],u1e=Y(Y6,l1e,r=>{var{typed:e,matrix:t,equalScalar:n,BigNumber:i,concat:s}=r,a=jd({typed:e}),o=nl({typed:e,equalScalar:n}),l=hN({typed:e,equalScalar:n}),u=Bi({typed:e,equalScalar:n}),c=Ar({typed:e,matrix:t,concat:s});function h(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(Y6,{number:p6,"number, number":p6,BigNumber:f=>d(f,new i(2)),"BigNumber, BigNumber":d,Complex:h,"Complex, number":h,Array:e.referTo("DenseMatrix,number",f=>p=>f(t(p),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",f=>p=>f(p,2)),SparseMatrix:e.referTo("SparseMatrix,number",f=>p=>f(p,2)),"SparseMatrix, SparseMatrix":e.referToSelf(f=>(p,g)=>{if(g.density()===1)return l(p,g,f);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(f=>(p,g)=>{if(g.density()===1)return a(p,g,f,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",f=>(p,g)=>f(t(p),g)),"number | BigNumber, SparseMatrix":e.referToSelf(f=>(p,g)=>{if(g.density()===1)return u(g,p,f,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:o,Ss:u,sS:!1}));function d(f,p){var g=i.precision,b=i.clone({precision:g+2}),v=new i(0),x=new b(1),y=p.isNegative();if(y&&(p=p.neg()),p.isZero())throw new Error("Root must be non-zero");if(f.isNegative()&&!p.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(f.isZero())return y?new b(1/0):0;if(!f.isFinite())return y?v:f;var A=f.abs().pow(x.div(p));return A=f.isNeg()?A.neg():A,new i((y?x.div(A):A).toPrecision(g))}}),Q6="sign",c1e=["typed","BigNumber","Fraction","complex"],h1e=Y(Q6,c1e,r=>{var{typed:e,BigNumber:t,complex:n,Fraction:i}=r;return e(Q6,{number:FP,Complex:function(a){return a.im===0?n(FP(a.re)):a.sign()},BigNumber:function(a){return new t(a.cmp(0))},bigint:function(a){return a>0n?1n:a<0n?-1n:0n},Fraction:function(a){return a.n===0n?new i(0):new i(a.s)},"Array | Matrix":e.referToSelf(s=>a=>At(a,s,!0)),Unit:e.referToSelf(s=>a=>{if(!a._isDerived()&&a.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(s,a.valueType())(a.value)})})}),d1e="sqrt",f1e=["config","typed","Complex"],m1e=Y(d1e,f1e,r=>{var{config:e,typed:t,Complex:n}=r;return t("sqrt",{number:i,Complex:function(a){return a.sqrt()},BigNumber:function(a){return!a.isNegative()||e.predictable?a.sqrt():i(a.toNumber())},Unit:function(a){return a.pow(.5)}});function i(s){return isNaN(s)?NaN:s>=0||e.predictable?Math.sqrt(s):new n(s,0).sqrt()}}),J6="square",p1e=["typed"],g1e=Y(J6,p1e,r=>{var{typed:e}=r;return e(J6,{number:hX,Complex:function(n){return n.mul(n)},BigNumber:function(n){return n.times(n)},bigint:function(n){return n*n},Fraction:function(n){return n.mul(n)},Unit:function(n){return n.pow(2)}})}),Z6="subtract",v1e=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],y1e=Y(Z6,v1e,r=>{var{typed:e,matrix:t,equalScalar:n,subtractScalar:i,unaryMinus:s,DenseMatrix:a,concat:o}=r,l=jd({typed:e}),u=ss({typed:e}),c=cN({typed:e,equalScalar:n}),h=_p({typed:e,DenseMatrix:a}),d=Yn({typed:e,DenseMatrix:a}),f=Ar({typed:e,matrix:t,concat:o});return e(Z6,{"any, any":i},f({elop:i,SS:c,DS:l,SD:u,Ss:d,sS:h}))}),e$="xgcd",b1e=["typed","config","matrix","BigNumber"],w1e=Y(e$,b1e,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e(e$,{"number, number":function(o,l){var u=dX(o,l);return t.matrix==="Array"?u:n(u)},"BigNumber, BigNumber":s});function s(a,o){var l,u,c,h=new i(0),d=new i(1),f=h,p=d,g=d,b=h;if(!a.isInt()||!o.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!o.isZero();)u=a.div(o).floor(),c=a.mod(o),l=f,f=p.minus(u.times(f)),p=l,l=g,g=b.minus(u.times(g)),b=l,a=o,o=c;var v;return a.lt(h)?v=[a.neg(),p.neg(),b.neg()]:v=[a,a.isZero()?0:p,b],t.matrix==="Array"?v:n(v)}}),t$="invmod",x1e=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],_1e=Y(t$,x1e,r=>{var{typed:e,config:t,BigNumber:n,xgcd:i,equal:s,smaller:a,mod:o,add:l,isInteger:u}=r;return e(t$,{"number, number":c,"BigNumber, BigNumber":c});function c(h,d){if(!u(h)||!u(d))throw new Error("Parameters in function invmod must be integer numbers");if(h=o(h,d),s(d,0))throw new Error("Divisor must be non zero");var f=i(h,d);f=f.valueOf();var[p,g]=f;return s(p,n(1))?(g=o(g,d),a(g,n(0))&&(g=l(g,d)),g):NaN}}),A1e="matAlgo09xS0Sf",E1e=["typed","equalScalar"],WX=Y(A1e,E1e,r=>{var{typed:e,equalScalar:t}=r;return function(i,s,a){var o=i._values,l=i._index,u=i._ptr,c=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,f=s._index,p=s._ptr,g=s._size,b=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==g.length)throw new Mt(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");var v=c[0],x=c[1],y,A=t,w=0,_=a;typeof h=="string"&&h===b&&h!=="mixed"&&(y=h,A=e.find(t,[y,y]),w=e.convert(0,y),_=e.find(a,[y,y]));var S=o&&d?[]:void 0,E=[],C=[],N=S?[]:void 0,D=[],M,I,U,X,k;for(I=0;I<x;I++){C[I]=E.length;var z=I+1;if(N)for(X=p[I],k=p[I+1],U=X;U<k;U++)M=f[U],D[M]=z,N[M]=d[U];for(X=u[I],k=u[I+1],U=X;U<k;U++)if(M=l[U],N){var q=D[M]===z?N[M]:w,H=_(o[U],q);A(H,w)||(E.push(M),S.push(H))}else E.push(M)}return C[x]=E.length,i.createSparseMatrix({values:S,index:E,ptr:C,size:[v,x],datatype:h===i._datatype&&b===s._datatype?y:void 0})}}),r$="dotMultiply",S1e=["typed","matrix","equalScalar","multiplyScalar","concat"],T1e=Y(r$,S1e,r=>{var{typed:e,matrix:t,equalScalar:n,multiplyScalar:i,concat:s}=r,a=nl({typed:e,equalScalar:n}),o=WX({typed:e,equalScalar:n}),l=Bi({typed:e,equalScalar:n}),u=Ar({typed:e,matrix:t,concat:s});return e(r$,u({elop:i,SS:o,DS:a,Ss:l}))});function C1e(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);if(r.isZero()||e.eq(-1)||r.eq(e))return r;if(e.isZero()||r.eq(-1))return e;if(!r.isFinite()||!e.isFinite()){if(!r.isFinite()&&!e.isFinite())return r.isNegative()===e.isNegative()?r:new t(0);if(!r.isFinite())return e.isNegative()?r:r.isNegative()?new t(0):e;if(!e.isFinite())return r.isNegative()?e:e.isNegative()?new t(0):r}return XF(r,e,function(n,i){return n&i})}function L1(r){if(r.isFinite()&&!r.isInteger())throw new Error("Integer expected in function bitNot");var e=r.constructor,t=e.precision;e.config({precision:1e9});var n=r.plus(new e(1));return n.s=-n.s||null,e.config({precision:t}),n}function N1e(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);var n=new t(-1);return r.isZero()||e.eq(n)||r.eq(e)?e:e.isZero()||r.eq(n)?r:!r.isFinite()||!e.isFinite()?!r.isFinite()&&!r.isNegative()&&e.isNegative()||r.isNegative()&&!e.isNegative()&&!e.isFinite()?n:r.isNegative()&&e.isNegative()?r.isFinite()?r:e:r.isFinite()?e:r:XF(r,e,function(i,s){return i|s})}function XF(r,e,t){var n=r.constructor,i,s,a=+(r.s<0),o=+(e.s<0);if(a){i=TA(L1(r));for(var l=0;l<i.length;++l)i[l]^=1}else i=TA(r);if(o){s=TA(L1(e));for(var u=0;u<s.length;++u)s[u]^=1}else s=TA(e);var c,h,d;i.length<=s.length?(c=i,h=s,d=a):(c=s,h=i,d=o);var f=c.length,p=h.length,g=t(a,o)^1,b=new n(g^1),v=new n(1),x=new n(2),y=n.precision;for(n.config({precision:1e9});f>0;)t(c[--f],h[--p])===g&&(b=b.plus(v)),v=v.times(x);for(;p>0;)t(d,h[--p])===g&&(b=b.plus(v)),v=v.times(x);return n.config({precision:y}),g===0&&(b.s=-b.s),b}function TA(r){for(var e=r.d,t=e[0]+"",n=1;n<e.length;++n){for(var i=e[n]+"",s=7-i.length;s--;)i="0"+i;t+=i}for(var a=t.length;t.charAt(a)==="0";)a--;var o=r.e,l=t.slice(0,a+1||1),u=l.length;if(o>0)if(++o>u)for(o-=u;o--;)l+="0";else o<u&&(l=l.slice(0,o)+"."+l.slice(o));for(var c=[0],h=0;h<l.length;){for(var d=c.length;d--;)c[d]*=10;c[0]+=parseInt(l.charAt(h++));for(var f=0;f<c.length;++f)c[f]>1&&((c[f+1]===null||c[f+1]===void 0)&&(c[f+1]=0),c[f+1]+=c[f]>>1,c[f]&=1)}return c.reverse()}function D1e(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);if(r.isZero())return e;if(e.isZero())return r;if(r.eq(e))return new t(0);var n=new t(-1);return r.eq(n)?L1(e):e.eq(n)?L1(r):!r.isFinite()||!e.isFinite()?!r.isFinite()&&!e.isFinite()?n:new t(r.isNegative()===e.isNegative()?1/0:-1/0):XF(r,e,function(i,s){return i^s})}function M1e(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var t=r.constructor;return r.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):r.isZero()||e.isZero()?r:!r.isFinite()&&!e.isFinite()?new t(NaN):e.lt(55)?r.times(Math.pow(2,e.toNumber())+""):r.times(new t(2).pow(e))}function I1e(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var t=r.constructor;return r.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):r.isZero()||e.isZero()?r:e.isFinite()?e.lt(55)?r.div(Math.pow(2,e.toNumber())+"").floor():r.div(new t(2).pow(e)).floor():r.isNegative()?new t(-1):r.isFinite()?new t(0):new t(NaN)}var n$="bitAnd",P1e=["typed","matrix","equalScalar","concat"],KX=Y(n$,P1e,r=>{var{typed:e,matrix:t,equalScalar:n,concat:i}=r,s=nl({typed:e,equalScalar:n}),a=hN({typed:e,equalScalar:n}),o=Bi({typed:e,equalScalar:n}),l=Ar({typed:e,matrix:t,concat:i});return e(n$,{"number, number":mX,"BigNumber, BigNumber":C1e,"bigint, bigint":(u,c)=>u&c},l({SS:a,DS:s,Ss:o}))}),i$="bitNot",R1e=["typed"],k1e=Y(i$,R1e,r=>{var{typed:e}=r;return e(i$,{number:pX,BigNumber:L1,bigint:t=>~t,"Array | Matrix":e.referToSelf(t=>n=>At(n,t))})}),s$="bitOr",F1e=["typed","matrix","equalScalar","DenseMatrix","concat"],XX=Y(s$,F1e,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:s}=r,a=jd({typed:e}),o=WF({typed:e,equalScalar:n}),l=_p({typed:e,DenseMatrix:i}),u=Ar({typed:e,matrix:t,concat:s});return e(s$,{"number, number":gX,"BigNumber, BigNumber":N1e,"bigint, bigint":(c,h)=>c|h},u({SS:o,DS:a,Ss:l}))}),O1e="matAlgo07xSSf",B1e=["typed","SparseMatrix"],ou=Y(O1e,B1e,r=>{var{typed:e,SparseMatrix:t}=r;return function(s,a,o){var l=s._size,u=s._datatype||s._data===void 0?s._datatype:s.getDataType(),c=a._size,h=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(l.length!==c.length)throw new Mt(l.length,c.length);if(l[0]!==c[0]||l[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+c+")");var d=l[0],f=l[1],p,g=0,b=o;typeof u=="string"&&u===h&&u!=="mixed"&&(p=u,g=e.convert(0,p),b=e.find(o,[p,p]));for(var v=[],x=[],y=new Array(f+1).fill(0),A=[],w=[],_=[],S=[],E=0;E<f;E++){var C=E+1,N=0;n(s,E,_,A,C),n(a,E,S,w,C);for(var D=0;D<d;D++){var M=_[D]===C?A[D]:g,I=S[D]===C?w[D]:g,U=b(M,I);U!==0&&U!==!1&&(x.push(D),v.push(U),N++)}y[E+1]=y[E]+N}return new t({values:v,index:x,ptr:y,size:[d,f],datatype:u===s._datatype&&h===a._datatype?p:void 0})};function n(i,s,a,o,l){for(var u=i._values,c=i._index,h=i._ptr,d=h[s],f=h[s+1];d<f;d++){var p=c[d];a[p]=l,o[p]=u[d]}}}),a$="bitXor",L1e=["typed","matrix","DenseMatrix","concat","SparseMatrix"],$1e=Y(a$,L1e,r=>{var{typed:e,matrix:t,DenseMatrix:n,concat:i,SparseMatrix:s}=r,a=ss({typed:e}),o=ou({typed:e,SparseMatrix:s}),l=Yn({typed:e,DenseMatrix:n}),u=Ar({typed:e,matrix:t,concat:i});return e(a$,{"number, number":vX,"BigNumber, BigNumber":D1e,"bigint, bigint":(c,h)=>c^h},u({SS:o,DS:a,Ss:l}))}),o$="arg",V1e=["typed"],U1e=Y(o$,V1e,r=>{var{typed:e}=r;return e(o$,{number:function(n){return Math.atan2(0,n)},BigNumber:function(n){return n.constructor.atan2(0,n)},Complex:function(n){return n.arg()},"Array | Matrix":e.referToSelf(t=>n=>At(n,t))})}),l$="conj",z1e=["typed"],j1e=Y(l$,z1e,r=>{var{typed:e}=r;return e(l$,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.conjugate(),Unit:e.referToSelf(t=>n=>new n.constructor(t(n.toNumeric()),n.formatUnits())),"Array | Matrix":e.referToSelf(t=>n=>At(n,t))})}),u$="im",q1e=["typed"],H1e=Y(u$,q1e,r=>{var{typed:e}=r;return e(u$,{number:()=>0,"BigNumber | Fraction":t=>t.mul(0),Complex:t=>t.im,"Array | Matrix":e.referToSelf(t=>n=>At(n,t))})}),c$="re",G1e=["typed"],W1e=Y(c$,G1e,r=>{var{typed:e}=r;return e(c$,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.re,"Array | Matrix":e.referToSelf(t=>n=>At(n,t))})}),h$="not",K1e=["typed"],X1e=Y(h$,K1e,r=>{var{typed:e}=r;return e(h$,{"null | undefined":()=>!0,number:_X,Complex:function(n){return n.re===0&&n.im===0},BigNumber:function(n){return n.isZero()||n.isNaN()},bigint:t=>!t,Unit:e.referToSelf(t=>n=>e.find(t,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(t=>n=>At(n,t))})}),d$="nullish",Y1e=["typed","matrix","size","flatten","deepEqual"],YX=Y(d$,Y1e,r=>{var{typed:e,matrix:t,size:n,flatten:i,deepEqual:s}=r,a=ss({typed:e}),o=wo({typed:e}),l=HX({typed:e});return e(d$,{"number|bigint|Complex|BigNumber|Fraction|Unit|string|boolean|SparseMatrix, any":(u,c)=>u,"null, any":(u,c)=>c,"undefined, any":(u,c)=>c,"SparseMatrix, Array | Matrix":(u,c)=>{var h=n(u),d=n(c);if(s(h,d))return u;throw new Mt(h,d)},"DenseMatrix, DenseMatrix":e.referToSelf(u=>(c,h)=>l(c,h,u)),"DenseMatrix, SparseMatrix":e.referToSelf(u=>(c,h)=>a(c,h,u,!1)),"DenseMatrix, Array":e.referToSelf(u=>(c,h)=>l(c,t(h),u)),"DenseMatrix, any":e.referToSelf(u=>(c,h)=>o(c,h,u,!1)),"Array, Array":e.referToSelf(u=>(c,h)=>l(t(c),t(h),u).valueOf()),"Array, DenseMatrix":e.referToSelf(u=>(c,h)=>l(t(c),h,u)),"Array, SparseMatrix":e.referToSelf(u=>(c,h)=>a(t(c),h,u,!1)),"Array, any":e.referToSelf(u=>(c,h)=>o(t(c),h,u,!1).valueOf())})}),f$="or",Q1e=["typed","matrix","equalScalar","DenseMatrix","concat"],QX=Y(f$,Q1e,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:s}=r,a=ss({typed:e}),o=cN({typed:e,equalScalar:n}),l=Yn({typed:e,DenseMatrix:i}),u=Ar({typed:e,matrix:t,concat:s});return e(f$,{"number, number":OP,"Complex, Complex":function(h,d){return h.re!==0||h.im!==0||d.re!==0||d.im!==0},"BigNumber, BigNumber":function(h,d){return!h.isZero()&&!h.isNaN()||!d.isZero()&&!d.isNaN()},"bigint, bigint":OP,"Unit, Unit":e.referToSelf(c=>(h,d)=>c(h.value||0,d.value||0))},u({SS:o,DS:a,Ss:l}))}),m$="xor",J1e=["typed","matrix","DenseMatrix","concat","SparseMatrix"],Z1e=Y(m$,J1e,r=>{var{typed:e,matrix:t,DenseMatrix:n,concat:i,SparseMatrix:s}=r,a=ss({typed:e}),o=ou({typed:e,SparseMatrix:s}),l=Yn({typed:e,DenseMatrix:n}),u=Ar({typed:e,matrix:t,concat:i});return e(m$,{"number, number":BP,"Complex, Complex":function(h,d){return(h.re!==0||h.im!==0)!=(d.re!==0||d.im!==0)},"bigint, bigint":BP,"BigNumber, BigNumber":function(h,d){return(!h.isZero()&&!h.isNaN())!=(!d.isZero()&&!d.isNaN())},"Unit, Unit":e.referToSelf(c=>(h,d)=>c(h.value||0,d.value||0))},u({SS:o,DS:a,Ss:l}))}),p$="concat",ewe=["typed","matrix","isInteger"],JX=Y(p$,ewe,r=>{var{typed:e,matrix:t,isInteger:n}=r;return e(p$,{"...Array | Matrix | number | BigNumber":function(s){var a,o=s.length,l=-1,u,c=!1,h=[];for(a=0;a<o;a++){var d=s[a];if(lt(d)&&(c=!0),st(d)||_t(d)){if(a!==o-1)throw new Error("Dimension must be specified as last argument");if(u=l,l=d.valueOf(),!n(l))throw new TypeError("Integer number expected for dimension");if(l<0||a>0&&l>u)throw new tl(l,u+1)}else{var f=gt(d).valueOf(),p=vt(f);if(h[a]=f,u=l,l=p.length-1,a>0&&l!==u)throw new Mt(u+1,l+1)}}if(h.length===0)throw new SyntaxError("At least one matrix expected");for(var g=h.shift();h.length;)g=QK(g,h.shift(),l);return c?t(g):g},"...string":function(s){return s.join("")}})}),g$="column",twe=["typed","Index","matrix","range"],ZX=Y(g$,twe,r=>{var{typed:e,Index:t,matrix:n,range:i}=r;return e(g$,{"Matrix, number":s,"Array, number":function(o,l){return s(n(gt(o)),l).valueOf()}});function s(a,o){if(a.size().length!==2)throw new Error("Only two dimensional matrix is supported");xr(o,a.size()[1]);var l=i(0,a.size()[0]),u=new t(l,[o]),c=a.subset(u);return lt(c)?c:n([[c]])}}),v$="count",rwe=["typed","size","prod"],nwe=Y(v$,rwe,r=>{var{typed:e,size:t,prod:n}=r;return e(v$,{string:function(s){return s.length},"Matrix | Array":function(s){return n(t(s))}})}),y$="cross",iwe=["typed","matrix","subtract","multiply"],swe=Y(y$,iwe,r=>{var{typed:e,matrix:t,subtract:n,multiply:i}=r;return e(y$,{"Matrix, Matrix":function(o,l){return t(s(o.toArray(),l.toArray()))},"Matrix, Array":function(o,l){return t(s(o.toArray(),l))},"Array, Matrix":function(o,l){return t(s(o,l.toArray()))},"Array, Array":s});function s(a,o){var l=Math.max(vt(a).length,vt(o).length);a=yT(a),o=yT(o);var u=vt(a),c=vt(o);if(u.length!==1||c.length!==1||u[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+u.join(", ")+"], B = ["+c.join(", ")+"])");var h=[n(i(a[1],o[2]),i(a[2],o[1])),n(i(a[2],o[0]),i(a[0],o[2])),n(i(a[0],o[1]),i(a[1],o[0]))];return l>1?[h]:h}}),b$="diag",awe=["typed","matrix","DenseMatrix","SparseMatrix"],owe=Y(b$,awe,r=>{var{typed:e,matrix:t,DenseMatrix:n,SparseMatrix:i}=r;return e(b$,{Array:function(u){return s(u,0,vt(u),null)},"Array, number":function(u,c){return s(u,c,vt(u),null)},"Array, BigNumber":function(u,c){return s(u,c.toNumber(),vt(u),null)},"Array, string":function(u,c){return s(u,0,vt(u),c)},"Array, number, string":function(u,c,h){return s(u,c,vt(u),h)},"Array, BigNumber, string":function(u,c,h){return s(u,c.toNumber(),vt(u),h)},Matrix:function(u){return s(u,0,u.size(),u.storage())},"Matrix, number":function(u,c){return s(u,c,u.size(),u.storage())},"Matrix, BigNumber":function(u,c){return s(u,c.toNumber(),u.size(),u.storage())},"Matrix, string":function(u,c){return s(u,0,u.size(),c)},"Matrix, number, string":function(u,c,h){return s(u,c,u.size(),h)},"Matrix, BigNumber, string":function(u,c,h){return s(u,c.toNumber(),u.size(),h)}});function s(l,u,c,h){if(!tt(u))throw new TypeError("Second parameter in function diag must be an integer");var d=u>0?u:0,f=u<0?-u:0;switch(c.length){case 1:return a(l,u,h,c[0],f,d);case 2:return o(l,u,h,c,f,d)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function a(l,u,c,h,d,f){var p=[h+d,h+f];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var g=c==="sparse"?i.diagonal(p,l,u):n.diagonal(p,l,u);return c!==null?g:g.valueOf()}function o(l,u,c,h,d,f){if(lt(l)){var p=l.diagonal(u);return c!==null?c!==p.storage()?t(p,c):p:p.valueOf()}for(var g=Math.min(h[0]-d,h[1]-f),b=[],v=0;v<g;v++)b[v]=l[v+d][v+f];return c!==null?t(b):b}}),lwe="filter",uwe=["typed"],eY=Y(lwe,uwe,r=>{var{typed:e}=r;return e("filter",{"Array, function":w$,"Matrix, function":function(n,i){return n.create(w$(n.valueOf(),i),n.datatype())},"Array, RegExp":l6,"Matrix, RegExp":function(n,i){return n.create(l6(n.valueOf(),i),n.datatype())}})});function w$(r,e){var t=hp(e,r,"filter");return t.isUnary?o6(r,t.fn):o6(r,function(n,i,s){return t.fn(n,[i],s)})}var x$="flatten",cwe=["typed"],hwe=Y(x$,cwe,r=>{var{typed:e}=r;return e(x$,{Array:function(n){return Yt(n)},DenseMatrix:function(n){return n.create(Yt(n.valueOf(),!0),n.datatype())},SparseMatrix:function(n){throw new TypeError("SparseMatrix is not supported by function flatten because it does not support 1D vectors. Convert to a DenseMatrix or Array first. Example: flatten(x.toArray())")}})}),jP="forEach",dwe=["typed"],tY=Y(jP,dwe,r=>{var{typed:e}=r;return e(jP,{"Array, function":fwe,"Matrix, function":function(n,i){n.forEach(i)}})});function fwe(r,e){var t=hp(e,r,jP);ZK(r,t.fn,t.isUnary)}var _$="getMatrixDataType",mwe=["typed"],pwe=Y(_$,mwe,r=>{var{typed:e}=r;return e(_$,{Array:function(n){return lN(n,dr)},Matrix:function(n){return n.getDataType()}})}),A$="identity",gwe=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],vwe=Y(A$,gwe,r=>{var{typed:e,config:t,matrix:n,BigNumber:i,DenseMatrix:s,SparseMatrix:a}=r;return e(A$,{"":function(){return t.matrix==="Matrix"?n([]):[]},string:function(c){return n(c)},"number | BigNumber":function(c){return l(c,c,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,h){return l(c,c,h)},"number | BigNumber, number | BigNumber":function(c,h){return l(c,h,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,h,d){return l(c,h,d)},Array:function(c){return o(c)},"Array, string":function(c,h){return o(c,h)},Matrix:function(c){return o(c.valueOf(),c.storage())},"Matrix, string":function(c,h){return o(c.valueOf(),h)}});function o(u,c){switch(u.length){case 0:return c?n(c):[];case 1:return l(u[0],u[0],c);case 2:return l(u[0],u[1],c);default:throw new Error("Vector containing two values expected")}}function l(u,c,h){var d=_t(u)||_t(c)?i:null;if(_t(u)&&(u=u.toNumber()),_t(c)&&(c=c.toNumber()),!tt(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!tt(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var f=d?new i(1):1,p=d?new d(0):0,g=[u,c];if(h){if(h==="sparse")return a.diagonal(g,f,0,p);if(h==="dense")return s.diagonal(g,f,0,p);throw new TypeError('Unknown matrix type "'.concat(h,'"'))}for(var b=k0([],g,p),v=u<c?u:c,x=0;x<v;x++)b[x][x]=f;return b}}),E$="kron",ywe=["typed","matrix","multiplyScalar"],bwe=Y(E$,ywe,r=>{var{typed:e,matrix:t,multiplyScalar:n}=r;return e(E$,{"Matrix, Matrix":function(o,l){return t(s(o.toArray(),l.toArray()))},"Matrix, Array":function(o,l){return t(s(o.toArray(),l))},"Array, Matrix":function(o,l){return t(s(o,l.toArray()))},"Array, Array":s});function i(a,o){return a.flatMap(l=>o.map(u=>n(l,u)))}function s(a,o){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(l<0){var u=vt(a).length,c=vt(o).length;for(l=Math.max(u,c);u++<l;)a=[a];for(;c++<l;)o=[o]}return l===1?i(a,o):a.flatMap(h=>o.map(d=>s(h,d,l-1)))}}),e2="map",wwe=["typed"],rY=Y(e2,wwe,r=>{var{typed:e}=r;return e(e2,{"Array, function":o,"Matrix, function":function(u,c){return u.map(c)},"Array|Matrix, Array|Matrix, ...Array|Matrix|function":(l,u,c)=>t([l,u,...c.slice(0,c.length-1)],c[c.length-1])});function t(l,u){if(typeof u!="function")throw new Error("Last argument must be a callback function");var c=l[0].isMatrix,h=l.map(w=>w.isMatrix?w.size():vt(w)),d=wT(...h),f=l.length,p=c?(w,_)=>w.get(_):xT,g=l.map((w,_)=>{var S=h[_].map(()=>0);return w.isMatrix?w.get(S):xT(w,S)}),b=e.isTypedFunction(u)?a(u,g,d.map(()=>0),l):s(u,f);if(b<2){var v=i(b,u,null);return n(l,v)}var x=c?l.map(w=>w.isMatrix?w.create(Cf(w.toArray(),d),w.datatype()):l[0].create(Cf(w.valueOf(),d))):l.map(w=>w.isMatrix?Cf(w.toArray(),d):Cf(w,d)),y=i(b,u,x),A=(w,_)=>y([w,...x.slice(1).map(S=>p(S,_))],_);return c?x[0].map(A):o(x[0],A)}function n(l,u){var c=l[0],h=l.map(w=>w.isMatrix?w.valueOf():w),d=l.map(w=>w.isMatrix?w.size():vt(w)),f=wT(...d),p=d.map(w=>f.length-w.length),g=f.length-1,b=u.length>1,v=b?[]:null,x=A(h,0);if(c.isMatrix){var y=c.create();return y._data=x,y._size=f,y}else return x;function A(w){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,S=f[_],E=Array(S);if(_<g)for(var C=function(U){v&&(v[_]=U),E[U]=A(w.map((X,k)=>p[k]>_?X:X.length===1?X[0]:X[U]),_+1)},N=0;N<S;N++)C(N);else for(var D=function(U){v&&(v[_]=U),E[U]=u(w.map(X=>X.length===1?X[0]:X[U]),v?v.slice():void 0)},M=0;M<S;M++)D(M);return E}}function i(l,u,c){switch(l){case 0:return h=>u(...h);case 1:return(h,d)=>u(...h,d);case 2:return(h,d)=>u(...h,d,...c)}}function s(l,u){var c=l.toString();if(/arguments/.test(c))return 2;var h=c.match(/\(.*?\)/);return/\.\.\./.test(h)||l.length>u+1?2:l.length===u+1?1:0}function a(l,u,c,h){return e.resolve(l,[...u,c,...h])!==null?2:e.resolve(l,[...u,c])!==null?1:(e.resolve(l,u)!==null,0)}function o(l,u){var c=hp(u,l,e2);return RP(l,c.fn,c.isUnary)}}),S$="diff",xwe=["typed","matrix","subtract","number"],nY=Y(S$,xwe,r=>{var{typed:e,matrix:t,subtract:n,number:i}=r;return e(S$,{"Array | Matrix":function(c){return lt(c)?t(a(c.toArray())):a(c)},"Array | Matrix, number":function(c,h){if(!tt(h))throw new RangeError("Dimension must be a whole number");return lt(c)?t(s(c.toArray(),h)):s(c,h)},"Array, BigNumber":e.referTo("Array,number",u=>(c,h)=>u(c,i(h))),"Matrix, BigNumber":e.referTo("Matrix,number",u=>(c,h)=>u(c,i(h)))});function s(u,c){if(lt(u)&&(u=u.toArray()),!Array.isArray(u))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var h=[];return u.forEach(d=>{h.push(s(d,c-1))}),h}else{if(c===0)return a(u);throw RangeError("Cannot have negative dimension")}}function a(u){for(var c=[],h=u.length,d=1;d<h;d++)c.push(o(u[d-1],u[d]));return c}function o(u,c){lt(u)&&(u=u.toArray()),lt(c)&&(c=c.toArray());var h=Array.isArray(u),d=Array.isArray(c);if(h&&d)return l(u,c);if(!h&&!d)return n(c,u);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function l(u,c){if(u.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var h=[],d=u.length,f=0;f<d;f++)h.push(o(u[f],c[f]));return h}}),_we="ones",Awe=["typed","config","matrix","BigNumber"],Ewe=Y(_we,Awe,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e("ones",{"":function(){return t.matrix==="Array"?s([]):s([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var h=u.pop();return s(u,h)}else return t.matrix==="Array"?s(u):s(u,"default")},Array:s,Matrix:function(u){var c=u.storage();return s(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return s(u.valueOf(),c)}});function s(l,u){var c=a(l),h=c?new i(1):1;if(o(l),u){var d=n(u);return l.length>0?d.resize(l,h):d}else{var f=[];return l.length>0?k0(f,l,h):f}}function a(l){var u=!1;return l.forEach(function(c,h,d){_t(c)&&(u=!0,d[h]=c.toNumber())}),u}function o(l){l.forEach(function(u){if(typeof u!="number"||!tt(u)||u<0)throw new Error("Parameters in function ones must be positive integers")})}});function YF(){throw new Error('No "bignumber" implementation available')}function iY(){throw new Error('No "fraction" implementation available')}function Swe(){throw new Error('No "matrix" implementation available')}var T$="range",Twe=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],sY=Y(T$,Twe,r=>{var{typed:e,config:t,matrix:n,bignumber:i,smaller:s,smallerEq:a,larger:o,largerEq:l,add:u,isZero:c,isPositive:h}=r;return e(T$,{string:f,"string, boolean":f,number:function(v){throw new TypeError("Too few arguments to function range(): ".concat(v))},boolean:function(v){throw new TypeError("Unexpected type of argument 1 to function range(): ".concat(v,", number|bigint|BigNumber|Fraction"))},"number, number":function(v,x){return d(p(v,x,1,!1))},"number, number, number":function(v,x,y){return d(p(v,x,y,!1))},"number, number, boolean":function(v,x,y){return d(p(v,x,1,y))},"number, number, number, boolean":function(v,x,y,A){return d(p(v,x,y,A))},"bigint, bigint|number":function(v,x){return d(p(v,x,1n,!1))},"number, bigint":function(v,x){return d(p(BigInt(v),x,1n,!1))},"bigint, bigint|number, bigint|number":function(v,x,y){return d(p(v,x,BigInt(y),!1))},"number, bigint, bigint|number":function(v,x,y){return d(p(BigInt(v),x,BigInt(y),!1))},"bigint, bigint|number, boolean":function(v,x,y){return d(p(v,x,1n,y))},"number, bigint, boolean":function(v,x,y){return d(p(BigInt(v),x,1n,y))},"bigint, bigint|number, bigint|number, boolean":function(v,x,y,A){return d(p(v,x,BigInt(y),A))},"number, bigint, bigint|number, boolean":function(v,x,y,A){return d(p(BigInt(v),x,BigInt(y),A))},"BigNumber, BigNumber":function(v,x){var y=v.constructor;return d(p(v,x,new y(1),!1))},"BigNumber, BigNumber, BigNumber":function(v,x,y){return d(p(v,x,y,!1))},"BigNumber, BigNumber, boolean":function(v,x,y){var A=v.constructor;return d(p(v,x,new A(1),y))},"BigNumber, BigNumber, BigNumber, boolean":function(v,x,y,A){return d(p(v,x,y,A))},"Fraction, Fraction":function(v,x){return d(p(v,x,1,!1))},"Fraction, Fraction, Fraction":function(v,x,y){return d(p(v,x,y,!1))},"Fraction, Fraction, boolean":function(v,x,y){return d(p(v,x,1,y))},"Fraction, Fraction, Fraction, boolean":function(v,x,y,A){return d(p(v,x,y,A))},"Unit, Unit, Unit":function(v,x,y){return d(p(v,x,y,!1))},"Unit, Unit, Unit, boolean":function(v,x,y,A){return d(p(v,x,y,A))}});function d(b){return t.matrix==="Matrix"?n?n(b):Swe():b}function f(b,v){var x=g(b);if(!x)throw new SyntaxError('String "'+b+'" is no valid range');return t.number==="BigNumber"?(i===void 0&&YF(),d(p(i(x.start),i(x.end),i(x.step)))):d(p(x.start,x.end,x.step,v))}function p(b,v,x,y){var A=[];if(c(x))throw new Error("Step must be non-zero");for(var w=h(x)?y?a:s:y?l:o,_=b;w(_,v);)A.push(_),_=u(_,x);return A}function g(b){var v=b.split(":"),x=v.map(function(A){return Number(A)}),y=x.some(function(A){return isNaN(A)});if(y)return null;switch(x.length){case 2:return{start:x[0],end:x[1],step:1};case 3:return{start:x[0],end:x[2],step:x[1]};default:return null}}}),C$="reshape",Cwe=["typed","isInteger","matrix"],Nwe=Y(C$,Cwe,r=>{var{typed:e,isInteger:t}=r;return e(C$,{"Matrix, Array":function(i,s){return i.reshape(s,!0)},"Array, Array":function(i,s){return s.forEach(function(a){if(!t(a))throw new TypeError("Invalid size for dimension: "+a)}),jF(i,s)}})}),Dwe="resize",Mwe=["config","matrix"],Iwe=Y(Dwe,Mwe,r=>{var{config:e,matrix:t}=r;return function(s,a,o){if(arguments.length!==2&&arguments.length!==3)throw new Ap("resize",arguments.length,2,3);if(lt(a)&&(a=a.valueOf()),_t(a[0])&&(a=a.map(function(c){return _t(c)?c.toNumber():c})),lt(s))return s.resize(a,o,!0);if(typeof s=="string")return n(s,a,o);var l=Array.isArray(s)?!1:e.matrix!=="Array";if(a.length===0){for(;Array.isArray(s);)s=s[0];return gt(s)}else{Array.isArray(s)||(s=[s]),s=gt(s);var u=k0(s,a,o);return l?t(u):u}};function n(i,s,a){if(a!==void 0){if(typeof a!="string"||a.length!==1)throw new TypeError("Single character expected as defaultValue")}else a=" ";if(s.length!==1)throw new Mt(s.length,1);var o=s[0];if(typeof o!="number"||!tt(o))throw new TypeError("Invalid size, must contain positive integers (size: "+Pt(s)+")");if(i.length>o)return i.substring(0,o);if(i.length<o){for(var l=i,u=0,c=o-i.length;u<c;u++)l+=a;return l}else return i}}),N$="rotate",Pwe=["typed","multiply","rotationMatrix"],Rwe=Y(N$,Pwe,r=>{var{typed:e,multiply:t,rotationMatrix:n}=r;return e(N$,{"Array , number | BigNumber | Complex | Unit":function(a,o){i(a,2);var l=t(n(o),a);return l.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(a,o){return i(a,2),t(n(o),a)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(a,o,l){i(a,3);var u=t(n(o,l),a);return u},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(a,o,l){return i(a,3),t(n(o,l),a)}});function i(s,a){var o=Array.isArray(s)?vt(s):s.size();if(o.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(a));if(o.length===2&&o[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(a));if(o[0]!==a)throw new RangeError("Vector must be of dimensions 1x".concat(a))}}),D$="rotationMatrix",kwe=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],Fwe=Y(D$,kwe,r=>{var{typed:e,config:t,multiplyScalar:n,addScalar:i,unaryMinus:s,norm:a,BigNumber:o,matrix:l,DenseMatrix:u,SparseMatrix:c,cos:h,sin:d}=r;return e(D$,{"":function(){return t.matrix==="Matrix"?l([]):[]},string:function(y){return l(y)},"number | BigNumber | Complex | Unit":function(y){return f(y,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(y,A){return f(y,A)},"number | BigNumber | Complex | Unit, Array":function(y,A){var w=l(A);return p(w),v(y,w,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(y,A){p(A);var w=A.storage()||(t.matrix==="Matrix"?"dense":void 0);return v(y,A,w)},"number | BigNumber | Complex | Unit, Array, string":function(y,A,w){var _=l(A);return p(_),v(y,_,w)},"number | BigNumber | Complex | Unit, Matrix, string":function(y,A,w){return p(A),v(y,A,w)}});function f(x,y){var A=_t(x),w=A?new o(-1):-1,_=h(x),S=d(x),E=[[_,n(w,S)],[S,_]];return b(E,y)}function p(x){var y=x.size();if(y.length<1||y[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function g(x){return x.reduce((y,A)=>n(y,A))}function b(x,y){if(y){if(y==="sparse")return new c(x);if(y==="dense")return new u(x);throw new TypeError('Unknown matrix type "'.concat(y,'"'))}return x}function v(x,y,A){var w=a(y);if(w===0)throw new RangeError("Rotation around zero vector");var _=_t(x)?o:null,S=_?new _(1):1,E=_?new _(-1):-1,C=_?new _(y.get([0])/w):y.get([0])/w,N=_?new _(y.get([1])/w):y.get([1])/w,D=_?new _(y.get([2])/w):y.get([2])/w,M=h(x),I=i(S,s(M)),U=d(x),X=i(M,g([C,C,I])),k=i(g([C,N,I]),g([E,D,U])),z=i(g([C,D,I]),g([N,U])),q=i(g([C,N,I]),g([D,U])),H=i(M,g([N,N,I])),te=i(g([N,D,I]),g([E,C,U])),ce=i(g([C,D,I]),g([E,N,U])),re=i(g([N,D,I]),g([C,U])),O=i(M,g([D,D,I])),ne=[[X,k,z],[q,H,te],[ce,re,O]];return b(ne,A)}}),M$="row",Owe=["typed","Index","matrix","range"],aY=Y(M$,Owe,r=>{var{typed:e,Index:t,matrix:n,range:i}=r;return e(M$,{"Matrix, number":s,"Array, number":function(o,l){return s(n(gt(o)),l).valueOf()}});function s(a,o){if(a.size().length!==2)throw new Error("Only two dimensional matrix is supported");xr(o,a.size()[0]);var l=i(0,a.size()[1]),u=new t([o],l),c=a.subset(u);return lt(c)?c:n([[c]])}}),I$="size",Bwe=["typed"],Lwe=Y(I$,Bwe,r=>{var{typed:e}=r;return e(I$,{Matrix:t=>t.size(),Array:vt,string:t=>[t.length],"number | Complex | BigNumber | Unit | boolean | null":t=>[]})}),P$="squeeze",$we=["typed"],Vwe=Y(P$,$we,r=>{var{typed:e}=r;return e(P$,{Array:function(n){return yT(gt(n))},Matrix:function(n){var i=yT(n.toArray());return Array.isArray(i)?n.create(i,n.datatype()):i},any:function(n){return gt(n)}})}),R$="subset",Uwe=["typed","matrix","zeros","add"],oY=Y(R$,Uwe,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r;return e(R$,{"Matrix, Index":function(o,l){return R0(l)?t():(vT(o,l),o.subset(l))},"Array, Index":e.referTo("Matrix, Index",function(a){return function(o,l){var u=a(t(o),l);return l.isScalar()?u:u.valueOf()}}),"Object, Index":jwe,"string, Index":zwe,"Matrix, Index, any, any":function(o,l,u,c){return R0(l)?o:(vT(o,l),o.clone().subset(l,s(u,l),c))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(a){return function(o,l,u,c){var h=a(t(o),l,u,c);return h.isMatrix?h.valueOf():h}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(a){return function(o,l,u){return a(t(o),l,u,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(a){return function(o,l,u){return a(o,l,u,void 0)}}),"string, Index, string":k$,"string, Index, string, string":k$,"Object, Index, any":qwe});function s(a,o){if(typeof a=="string")throw new Error("can't boradcast a string");if(o.isScalar())return a;var l=o.size();if(l.every(u=>u>0))try{return i(a,n(l))}catch{return a}else return a}});function zwe(r,e){if(!tN(e))throw new TypeError("Index expected");if(R0(e))return"";if(vT(Array.from(r),e),e.size().length!==1)throw new Mt(e.size().length,1);var t=r.length;xr(e.min()[0],t),xr(e.max()[0],t);var n=e.dimension(0),i="";function s(a){i+=r.charAt(a)}return Number.isInteger(n)?s(n):n.forEach(s),i}function k$(r,e,t,n){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(R0(e))return r;if(vT(Array.from(r),e),e.size().length!==1)throw new Mt(e.size().length,1);if(n!==void 0){if(typeof n!="string"||n.length!==1)throw new TypeError("Single character expected as defaultValue")}else n=" ";var i=e.dimension(0),s=Number.isInteger(i)?1:i.size()[0];if(s!==t.length)throw new Mt(i.size()[0],t.length);var a=r.length;xr(e.min()[0]),xr(e.max()[0]);for(var o=[],l=0;l<a;l++)o[l]=r.charAt(l);function u(d,f){o[d]=t.charAt(f[0])}if(Number.isInteger(i)?u(i,[0]):i.forEach(u),o.length>a)for(var c=a-1,h=o.length;c<h;c++)o[c]||(o[c]=n);return o.join("")}function jwe(r,e){if(!R0(e)){if(e.size().length!==1)throw new Mt(e.size(),1);var t=e.dimension(0);if(typeof t!="string")throw new TypeError("String expected as index to retrieve an object property");return xs(r,t)}}function qwe(r,e,t){if(R0(e))return r;if(e.size().length!==1)throw new Mt(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");var i=gt(r);return I0(i,n,t),i}var F$="transpose",Hwe=["typed","matrix"],Gwe=Y(F$,Hwe,r=>{var{typed:e,matrix:t}=r;return e(F$,{Array:a=>n(t(a)).valueOf(),Matrix:n,any:gt});function n(a){var o=a.size(),l;switch(o.length){case 1:l=a.clone();break;case 2:{var u=o[0],c=o[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+Pt(o)+")");switch(a.storage()){case"dense":l=i(a,u,c);break;case"sparse":l=s(a,u,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+Pt(o)+")")}return l}function i(a,o,l){for(var u=a._data,c=[],h,d=0;d<l;d++){h=c[d]=[];for(var f=0;f<o;f++)h[f]=gt(u[f][d])}return a.createDenseMatrix({data:c,size:[l,o],datatype:a._datatype})}function s(a,o,l){for(var u=a._values,c=a._index,h=a._ptr,d=u?[]:void 0,f=[],p=[],g=[],b=0;b<o;b++)g[b]=0;var v,x,y;for(v=0,x=c.length;v<x;v++)g[c[v]]++;for(var A=0,w=0;w<o;w++)p.push(A),A+=g[w],g[w]=p[w];for(p.push(A),y=0;y<l;y++)for(var _=h[y],S=h[y+1],E=_;E<S;E++){var C=g[c[E]]++;f[C]=y,u&&(d[C]=gt(u[E]))}return a.createSparseMatrix({values:d,index:f,ptr:p,size:[l,o],datatype:a._datatype})}}),O$="ctranspose",Wwe=["typed","transpose","conj"],Kwe=Y(O$,Wwe,r=>{var{typed:e,transpose:t,conj:n}=r;return e(O$,{any:function(s){return n(t(s))}})}),B$="zeros",Xwe=["typed","config","matrix","BigNumber"],Ywe=Y(B$,Xwe,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e(B$,{"":function(){return t.matrix==="Array"?s([]):s([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var h=u.pop();return s(u,h)}else return t.matrix==="Array"?s(u):s(u,"default")},Array:s,Matrix:function(u){var c=u.storage();return s(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return s(u.valueOf(),c)}});function s(l,u){var c=a(l),h=c?new i(0):0;if(o(l),u){var d=n(u);return l.length>0?d.resize(l,h):d}else{var f=[];return l.length>0?k0(f,l,h):f}}function a(l){var u=!1;return l.forEach(function(c,h,d){_t(c)&&(u=!0,d[h]=c.toNumber())}),u}function o(l){l.forEach(function(u){if(typeof u!="number"||!tt(u)||u<0)throw new Error("Parameters in function zeros must be positive integers")})}}),L$="fft",Qwe=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],Jwe=Y(L$,Qwe,r=>{var{typed:e,matrix:t,addScalar:n,multiplyScalar:i,divideScalar:s,exp:a,tau:o,i:l,dotDivide:u,conj:c,pow:h,ceil:d,log2:f}=r;return e(L$,{Array:p,Matrix:function(y){return y.create(p(y.valueOf()),y.datatype())}});function p(x){var y=vt(x);return y.length===1?v(x,y[0]):g(x.map(A=>p(A,y.slice(1))),0)}function g(x,y){var A=vt(x);if(y!==0)return new Array(A[0]).fill(0).map((_,S)=>g(x[S],y-1));if(A.length===1)return v(x);function w(_){var S=vt(_);return new Array(S[1]).fill(0).map((E,C)=>new Array(S[0]).fill(0).map((N,D)=>_[D][C]))}return w(g(w(x),1))}function b(x){for(var y=x.length,A=a(s(i(-1,i(l,o)),y)),w=[],_=1-y;_<y;_++)w.push(h(A,s(h(_,2),2)));for(var S=h(2,d(f(y+y-1))),E=[...new Array(y).fill(0).map((k,z)=>i(x[z],w[y-1+z])),...new Array(S-y).fill(0)],C=[...new Array(y+y-1).fill(0).map((k,z)=>s(1,w[z])),...new Array(S-(y+y-1)).fill(0)],N=v(E),D=v(C),M=new Array(S).fill(0).map((k,z)=>i(N[z],D[z])),I=u(c(p(c(M))),S),U=[],X=y-1;X<y+y-1;X++)U.push(i(I[X],w[X]));return U}function v(x){var y=x.length;if(y===1)return[x[0]];if(y%2===0){for(var A=[...v(x.filter((E,C)=>C%2===0)),...v(x.filter((E,C)=>C%2===1))],w=0;w<y/2;w++){var _=A[w],S=i(A[w+y/2],a(i(i(o,l),s(-w,y))));A[w]=n(_,S),A[w+y/2]=n(_,i(-1,S))}return A}else return b(x)}}),$$="ifft",Zwe=["typed","fft","dotDivide","conj"],exe=Y($$,Zwe,r=>{var{typed:e,fft:t,dotDivide:n,conj:i}=r;return e($$,{"Array | Matrix":function(a){var o=lt(a)?a.size():vt(a);return n(i(t(i(a))),o.reduce((l,u)=>l*u,1))}})});function $1(r){"@babel/helpers - typeof";return $1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$1(r)}function txe(r,e){if($1(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if($1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function rxe(r){var e=txe(r,"string");return $1(e)=="symbol"?e:e+""}function On(r,e,t){return(e=rxe(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function V$(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function nxe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?V$(Object(t),!0).forEach(function(n){On(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):V$(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var ixe="solveODE",sxe=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],axe=Y(ixe,sxe,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:s,max:a,map:o,abs:l,isPositive:u,isNegative:c,larger:h,smaller:d,matrix:f,bignumber:p,unaryMinus:g}=r;function b(E){return function(C,N,D,M){var I=!(N.length===2&&(N.every(_)||N.every(xa)));if(I)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var U=N[0],X=N[1],k=h(X,U),z=M.firstStep;if(z!==void 0&&!u(z))throw new Error('"firstStep" must be positive');var q=M.maxStep;if(q!==void 0&&!u(q))throw new Error('"maxStep" must be positive');var H=M.minStep;if(H&&c(H))throw new Error('"minStep" must be positive or zero');var te=[U,X,z,H,q].filter(L=>L!==void 0);if(!(te.every(_)||te.every(xa)))throw new Error('Inconsistent type of "t" dependant variables');for(var ce=1,re=M.tol?M.tol:1e-4,O=M.minDelta?M.minDelta:.2,ne=M.maxDelta?M.maxDelta:5,W=M.maxIter?M.maxIter:1e4,pe=[U,X,...D,q,H].some(_t),[me,ie,K,ae]=pe?[p(E.a),p(E.c),p(E.b),p(E.bp)]:[E.a,E.c,E.b,E.bp],ge=z?k?z:g(z):s(n(X,U),ce),he=[U],be=[D],ve=n(K,ae),Ie=0,Ve=0,We=A(k),Be=w(k);We(he[Ie],X);){var $e=[];ge=Be(he[Ie],X,ge),$e.push(C(he[Ie],be[Ie]));for(var Ge=1;Ge<ie.length;++Ge)$e.push(C(t(he[Ie],i(ie[Ge],ge)),t(be[Ie],i(ge,me[Ge],$e))));var Z=a(l(o(i(ve,$e),L=>xa(L)?L.value:L)));Z<re&&re/Z>1/4&&(he.push(t(he[Ie],ge)),be.push(t(be[Ie],i(ge,K,$e))),Ie++);var Q=.84*(re/Z)**(1/5);if(d(Q,O)?Q=O:h(Q,ne)&&(Q=ne),Q=pe?p(Q):Q,ge=i(ge,Q),q&&h(l(ge),q)?ge=k?q:g(q):H&&d(l(ge),H)&&(ge=k?H:g(H)),Ve++,Ve>W)throw new Error("Maximum number of iterations reached, try changing options")}return{t:he,y:be}}}function v(E,C,N,D){var M=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],I=[null,1/2,3/4,1],U=[2/9,1/3,4/9,0],X=[7/24,1/4,1/3,1/8],k={a:M,c:I,b:U,bp:X};return b(k)(E,C,N,D)}function x(E,C,N,D){var M=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],I=[null,1/5,3/10,4/5,8/9,1,1],U=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],X=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],k={a:M,c:I,b:U,bp:X};return b(k)(E,C,N,D)}function y(E,C,N,D){var M=D.method?D.method:"RK45",I={RK23:v,RK45:x};if(M.toUpperCase()in I){var U=nxe({},D);return delete U.method,I[M.toUpperCase()](E,C,N,U)}else{var X=Object.keys(I).map(z=>'"'.concat(z,'"')),k="".concat(X.slice(0,-1).join(", ")," and ").concat(X.slice(-1));throw new Error('Unavailable method "'.concat(M,'". Available methods are ').concat(k))}}function A(E){return E?d:h}function w(E){var C=E?h:d;return function(N,D,M){var I=t(N,M);return C(I,D)?n(D,N):M}}function _(E){return _t(E)||st(E)}function S(E,C,N,D){var M=y(E,C.toArray(),N.toArray(),D);return{t:f(M.t),y:f(M.y)}}return e("solveODE",{"function, Array, Array, Object":y,"function, Matrix, Matrix, Object":S,"function, Array, Array":(E,C,N)=>y(E,C,N,{}),"function, Matrix, Matrix":(E,C,N)=>S(E,C,N,{}),"function, Array, number | BigNumber | Unit":(E,C,N)=>{var D=y(E,C,[N],{});return{t:D.t,y:D.y.map(M=>M[0])}},"function, Matrix, number | BigNumber | Unit":(E,C,N)=>{var D=y(E,C.toArray(),[N],{});return{t:f(D.t),y:f(D.y.map(M=>M[0]))}},"function, Array, number | BigNumber | Unit, Object":(E,C,N,D)=>{var M=y(E,C,[N],D);return{t:M.t,y:M.y.map(I=>I[0])}},"function, Matrix, number | BigNumber | Unit, Object":(E,C,N,D)=>{var M=y(E,C.toArray(),[N],D);return{t:f(M.t),y:f(M.y.map(I=>I[0]))}}})}),oxe="erf",lxe=["typed"],uxe=Y(oxe,lxe,r=>{var{typed:e}=r;return e("name",{number:function(a){var o=Math.abs(a);return o>=dxe?Jh(a):o<=cxe?Jh(a)*t(o):o<=4?Jh(a)*(1-n(o)):Jh(a)*(1-i(o))},"Array | Matrix":e.referToSelf(s=>a=>At(a,s))});function t(s){var a=s*s,o=du[0][4]*a,l=a,u;for(u=0;u<3;u+=1)o=(o+du[0][u])*a,l=(l+Up[0][u])*a;return s*(o+du[0][3])/(l+Up[0][3])}function n(s){var a=du[1][8]*s,o=s,l;for(l=0;l<7;l+=1)a=(a+du[1][l])*s,o=(o+Up[1][l])*s;var u=(a+du[1][7])/(o+Up[1][7]),c=parseInt(s*16)/16,h=(s-c)*(s+c);return Math.exp(-c*c)*Math.exp(-h)*u}function i(s){var a=1/(s*s),o=du[2][5]*a,l=a,u;for(u=0;u<4;u+=1)o=(o+du[2][u])*a,l=(l+Up[2][u])*a;var c=a*(o+du[2][4])/(l+Up[2][4]);c=(hxe-c)/s,a=parseInt(s*16)/16;var h=(s-a)*(s+a);return Math.exp(-a*a)*Math.exp(-h)*c}}),cxe=.46875,hxe=.5641895835477563,du=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],Up=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],dxe=Math.pow(2,53),U$="zeta",fxe=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isBounded","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],mxe=Y(U$,fxe,r=>{var{typed:e,config:t,multiply:n,pow:i,divide:s,factorial:a,equal:o,smallerEq:l,isBounded:u,isNegative:c,gamma:h,sin:d,subtract:f,add:p,Complex:g,BigNumber:b,pi:v}=r;return e(U$,{number:S=>x(S,E=>E,()=>20),BigNumber:S=>x(S,E=>new b(E),()=>Math.abs(Math.log10(t.relTol))),Complex:y});function x(S,E,C){return o(S,0)?E(-.5):o(S,1)?E(NaN):u(S)?A(S,E,C,N=>N):c(S)?E(NaN):E(1)}function y(S){return S.re===0&&S.im===0?new g(-.5):S.re===1?new g(NaN,NaN):S.re===1/0&&S.im===0?new g(1):S.im===1/0||S.re===-1/0?new g(NaN,NaN):A(S,E=>E,E=>Math.round(1.3*15+.9*Math.abs(E.im)),E=>E.re)}function A(S,E,C,N){var D=C(S);if(N(S)>-(D-1)/2)return _(S,E(D),E);var M=n(i(2,S),i(E(v),f(S,1)));return M=n(M,d(n(s(E(v),2),S))),M=n(M,h(f(1,S))),n(M,A(f(1,S),E,C,N))}function w(S,E){for(var C=S,N=S;l(N,E);N=p(N,1)){var D=s(n(a(p(E,f(N,1))),i(4,N)),n(a(f(E,N)),a(n(2,N))));C=p(C,D)}return n(E,C)}function _(S,E,C){for(var N=s(1,n(w(C(0),E),f(1,i(2,f(1,S))))),D=C(0),M=C(1);l(M,E);M=p(M,1))D=p(D,s(n((-1)**(M-1),w(M,E)),i(M,S)));return n(N,D)}}),z$="mode",pxe=["typed","isNaN","isNumeric"],gxe=Y(z$,pxe,r=>{var{typed:e,isNaN:t,isNumeric:n}=r;return e(z$,{"Array | Matrix":i,"...":function(a){return i(a)}});function i(s){s=Yt(s.valueOf());var a=s.length;if(a===0)throw new Error("Cannot calculate mode of an empty array");for(var o={},l=[],u=0,c=0;c<s.length;c++){var h=s[c];if(n(h)&&t(h))throw new Error("Cannot calculate mode of an array containing NaN values");h in o||(o[h]=0),o[h]++,o[h]===u?l.push(h):o[h]>u&&(u=o[h],l=[h])}return l}});function Ts(r,e,t){var n;return String(r).includes("Unexpected type")?(n=arguments.length>2?" (type: "+dr(t)+", value: "+JSON.stringify(t)+")":" (type: "+r.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+n)):String(r).includes("complex numbers")?(n=arguments.length>2?" (type: "+dr(t)+", value: "+JSON.stringify(t)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+n)):r}var j$="prod",vxe=["typed","config","multiplyScalar","numeric"],yxe=Y(j$,vxe,r=>{var{typed:e,config:t,multiplyScalar:n,numeric:i}=r;return e(j$,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(o,l){throw new Error("prod(A, dim) is not yet supported")},"...":function(o){return s(o)}});function s(a){var o;if(Md(a,function(l){try{o=o===void 0?l:n(o,l)}catch(u){throw Ts(u,"prod",l)}}),typeof o=="string"&&(o=i(o,Ud(o,t))),o===void 0)throw new Error("Cannot calculate prod of an empty array");return o}}),q$="format",bxe=["typed"],wxe=Y(q$,bxe,r=>{var{typed:e}=r;return e(q$,{any:Pt,"any, Object | function | number | BigNumber":Pt})}),H$="bin",xxe=["typed","format"],_xe=Y(H$,xxe,r=>{var{typed:e,format:t}=r;return e(H$,{"number | BigNumber":function(i){return t(i,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(i,s){return t(i,{notation:"bin",wordSize:s})}})}),G$="oct",Axe=["typed","format"],Exe=Y(G$,Axe,r=>{var{typed:e,format:t}=r;return e(G$,{"number | BigNumber":function(i){return t(i,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(i,s){return t(i,{notation:"oct",wordSize:s})}})}),W$="hex",Sxe=["typed","format"],Txe=Y(W$,Sxe,r=>{var{typed:e,format:t}=r;return e(W$,{"number | BigNumber":function(i){return t(i,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(i,s){return t(i,{notation:"hex",wordSize:s})}})}),lY=/\$([\w.]+)/g,K$="print",Cxe=["typed"],uY=Y(K$,Cxe,r=>{var{typed:e}=r;return e(K$,{"string, Object | Array":X$,"string, Object | Array, number | Object":X$})});function X$(r,e,t){return r.replace(lY,function(n,i){var s=i.split("."),a=e[s.shift()];for(a!==void 0&&a.isMatrix&&(a=a.toArray());s.length&&a!==void 0;){var o=s.shift();a=o?a[o]:a+"."}return a!==void 0?mn(a)?a:Pt(a,t):n})}var Y$="to",Nxe=["typed","matrix","concat"],Dxe=Y(Y$,Nxe,r=>{var{typed:e,matrix:t,concat:n}=r,i=Ar({typed:e,matrix:t,concat:n});return e(Y$,{"Unit, Unit | string":(s,a)=>s.to(a)},i({Ds:!0}))}),Q$="toBest",Mxe=["typed"],Ixe=Y(Q$,Mxe,r=>{var{typed:e}=r;return e(Q$,{Unit:t=>t.toBest(),"Unit, string":(t,n)=>t.toBest(n.split(",")),"Unit, string, Object":(t,n,i)=>t.toBest(n.split(","),i),"Unit, Array":(t,n)=>t.toBest(n),"Unit, Array, Object":(t,n,i)=>t.toBest(n,i)})}),J$="isPrime",Pxe=["typed"],Rxe=Y(J$,Pxe,r=>{var{typed:e}=r;return e(J$,{number:function(n){if(n<=3)return n>1;if(n%2===0||n%3===0)return!1;for(var i=5;i*i<=n;i+=6)if(n%i===0||n%(i+2)===0)return!1;return!0},bigint:function(n){if(n<=3n)return n>1n;if(n%2n===0n||n%3n===0n)return!1;for(var i=5n;i*i<=n;i+=6n)if(n%i===0n||n%(i+2n)===0n)return!1;return!0},BigNumber:function(n){if(n.lte(3))return n.gt(1);if(n.mod(2).eq(0)||n.mod(3).eq(0))return!1;if(n.lt(Math.pow(2,32))){for(var i=n.toNumber(),s=5;s*s<=i;s+=6)if(i%s===0||i%(s+2)===0)return!1;return!0}function a(x,y,A){for(var w=1;!y.eq(0);)y.mod(2).eq(0)?(y=y.div(2),x=x.mul(x).mod(A)):(y=y.sub(1),w=x.mul(w).mod(A));return w}var o=n.constructor.clone({precision:n.toFixed(0).length*2});n=new o(n);for(var l=0,u=n.sub(1);u.mod(2).eq(0);)u=u.div(2),l+=1;var c=null;if(n.lt("3317044064679887385961981"))c=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(x=>x<n);else{var h=Math.min(n.toNumber()-2,Math.floor(2*Math.pow(n.toFixed(0).length*Math.log(10),2)));c=[];for(var d=2;d<=h;d+=1)c.push(h)}for(var f=0;f<c.length;f+=1){var p=c[f],g=a(n.sub(n).add(p),u,n);if(!g.eq(1)){for(var b=0,v=g;!v.eq(n.sub(1));b+=1,v=v.mul(v).mod(n))if(b===l-1)return!1}}return!0},"Array | Matrix":e.referToSelf(t=>n=>At(n,t))})}),kxe="numeric",Fxe=["number","?bignumber","?fraction"],Oxe=Y(kxe,Fxe,r=>{var{number:e,bignumber:t,fraction:n}=r,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},s={number:a=>e(a),BigNumber:t?a=>t(a):YF,bigint:a=>BigInt(a),Fraction:n?a=>n(a):iY};return function(o){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",u=arguments.length>2?arguments[2]:void 0;if(u!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=dr(o);if(!(c in i))throw new TypeError("Cannot convert "+o+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(l in s))throw new TypeError("Cannot convert "+o+' to type "'+l+'"; valid output types are '+Object.keys(s).join(", "));return l===c?o:s[l](o)}}),Z$="divideScalar",Bxe=["typed","numeric"],Lxe=Y(Z$,Bxe,r=>{var{typed:e,numeric:t}=r;return e(Z$,{"number, number":function(i,s){return i/s},"Complex, Complex":function(i,s){return i.div(s)},"BigNumber, BigNumber":function(i,s){return i.div(s)},"bigint, bigint":function(i,s){return i/s},"Fraction, Fraction":function(i,s){return i.div(s)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,i)=>n.divide(i),"number | Fraction | Complex | BigNumber, Unit":(n,i)=>i.divideInto(n)})}),eV="pow",$xe=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],Vxe=Y(eV,$xe,r=>{var{typed:e,config:t,identity:n,multiply:i,matrix:s,inv:a,number:o,fraction:l,Complex:u}=r;return e(eV,{"number, number":c,"Complex, Complex":function(p,g){return p.pow(g)},"BigNumber, BigNumber":function(p,g){return g.isInteger()||p>=0||t.predictable?p.pow(g):new u(p.toNumber(),0).pow(g.toNumber(),0)},"bigint, bigint":(f,p)=>f**p,"Fraction, Fraction":function(p,g){var b=p.pow(g);if(b!=null)return b;if(t.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(p.valueOf(),g.valueOf())},"Array, number":h,"Array, BigNumber":function(p,g){return h(p,g.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(p,g){return d(p,g.toNumber())},"Unit, number | BigNumber":function(p,g){return p.pow(g)}});function c(f,p){if(t.predictable&&!tt(p)&&f<0)try{var g=l(p),b=o(g);if((p===b||Math.abs((p-b)/p)<1e-14)&&g.d%2n===1n)return(g.n%2n===0n?1:-1)*Math.pow(-f,p)}catch{}return t.predictable&&(f<-1&&p===1/0||f>-1&&f<0&&p===-1/0)?NaN:tt(p)||f>=0||t.predictable?fX(f,p):f*f<1&&p===1/0||f*f>1&&p===-1/0?0:new u(f,0).pow(p,0)}function h(f,p){if(!tt(p))throw new TypeError("For A^b, b must be an integer (value is "+p+")");var g=vt(f);if(g.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+g.length+" dimensions)");if(g[0]!==g[1])throw new Error("For A^b, A must be square (size is "+g[0]+"x"+g[1]+")");if(p<0)try{return h(a(f),-p)}catch(x){throw x.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+p+")"):x}for(var b=n(g[0]).valueOf(),v=f;p>=1;)(p&1)===1&&(b=i(v,b)),p>>=1,v=i(v,v);return b}function d(f,p){return s(h(f.valueOf(),p))}}),zp="Number of decimals in function round must be an integer",tV="round",Uxe=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],zxe=Y(tV,Uxe,r=>{var{typed:e,config:t,matrix:n,equalScalar:i,zeros:s,BigNumber:a,DenseMatrix:o}=r,l=Bi({typed:e,equalScalar:i}),u=Yn({typed:e,DenseMatrix:o}),c=wo({typed:e});function h(d){return Math.abs(f_(d).exponent)}return e(tV,{number:function(f){var p=jy(f,h(t.relTol)),g=pi(f,p,t.relTol,t.absTol)?p:f;return jy(g)},"number, number":function(f,p){var g=h(t.relTol);if(p>=g)return jy(f,p);var b=jy(f,g),v=pi(f,b,t.relTol,t.absTol)?b:f;return jy(v,p)},"number, BigNumber":function(f,p){if(!p.isInteger())throw new TypeError(zp);return new a(f).toDecimalPlaces(p.toNumber())},Complex:function(f){return f.round()},"Complex, number":function(f,p){if(p%1)throw new TypeError(zp);return f.round(p)},"Complex, BigNumber":function(f,p){if(!p.isInteger())throw new TypeError(zp);var g=p.toNumber();return f.round(g)},BigNumber:function(f){var p=new a(f).toDecimalPlaces(h(t.relTol)),g=yo(f,p,t.relTol,t.absTol)?p:f;return g.toDecimalPlaces(0)},"BigNumber, BigNumber":function(f,p){if(!p.isInteger())throw new TypeError(zp);var g=h(t.relTol);if(p>=g)return f.toDecimalPlaces(p.toNumber());var b=f.toDecimalPlaces(g),v=yo(f,b,t.relTol,t.absTol)?b:f;return v.toDecimalPlaces(p.toNumber())},bigint:d=>d,"bigint, number":(d,f)=>d,"bigint, BigNumber":(d,f)=>d,Fraction:function(f){return f.round()},"Fraction, number":function(f,p){if(p%1)throw new TypeError(zp);return f.round(p)},"Fraction, BigNumber":function(f,p){if(!p.isInteger())throw new TypeError(zp);return f.round(p.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(f,p,g){var b=f.toNumeric(g);return g.multiply(d(b,p))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(f,p,g)=>d(f,p.toNumber(),g)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(f,p,g)=>At(f,b=>d(b,p,g),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(f,p)=>d(f,0,p)),"Array | Matrix":e.referToSelf(d=>f=>At(f,d,!0)),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(f,p)=>l(f,p,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(f,p)=>c(f,p,d,!1)),"Array, number | BigNumber":e.referToSelf(d=>(f,p)=>c(n(f),p,d,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(d=>(f,p)=>i(f,0)?s(p.size(),p.storage()):u(p,f,d,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(d=>(f,p)=>i(f,0)?s(p.size(),p.storage()):c(p,f,d,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(d=>(f,p)=>c(n(p),f,d,!0).valueOf())})}),rV="log",jxe=["config","typed","typeOf","divideScalar","Complex"],qxe=Math.log(16),Hxe=Y(rV,jxe,r=>{var{typed:e,typeOf:t,config:n,divideScalar:i,Complex:s}=r;function a(l){return l.log()}function o(l){return a(new s(l,0))}return e(rV,{number:function(u){return u>=0||n.predictable?m6(u):o(u)},bigint:KF(qxe,m6,n,o),Complex:a,BigNumber:function(u){return!u.isNegative()||n.predictable?u.ln():o(u.toNumber())},"any, any":e.referToSelf(l=>(u,c)=>{if(t(u)==="Fraction"&&t(c)==="Fraction"){var h=u.log(c);if(h!==null)return h}return i(l(u),l(c))})})}),nV="log1p",Gxe=["typed","config","divideScalar","log","Complex"],Wxe=Y(nV,Gxe,r=>{var{typed:e,config:t,divideScalar:n,log:i,Complex:s}=r;return e(nV,{number:function(l){return l>=-1||t.predictable?Oge(l):a(new s(l,0))},Complex:a,BigNumber:function(l){var u=l.plus(1);return!u.isNegative()||t.predictable?u.ln():a(new s(l.toNumber(),0))},"Array | Matrix":e.referToSelf(o=>l=>At(l,o)),"any, any":e.referToSelf(o=>(l,u)=>n(o(l),i(u)))});function a(o){var l=o.re+1;return new s(Math.log(Math.sqrt(l*l+o.im*o.im)),Math.atan2(o.im,l))}}),iV="nthRoots",Kxe=["config","typed","divideScalar","Complex"],Xxe=Y(iV,Kxe,r=>{var{typed:e,config:t,divideScalar:n,Complex:i}=r,s=[function(l){return new i(l,0)},function(l){return new i(0,l)},function(l){return new i(-l,0)},function(l){return new i(0,-l)}];function a(o,l){if(l<0)throw new Error("Root must be greater than zero");if(l===0)throw new Error("Root must be non-zero");if(l%1!==0)throw new Error("Root must be an integer");if(o===0||o.abs()===0)return[new i(0,0)];var u=typeof o=="number",c;(u||o.re===0||o.im===0)&&(u?c=2*+(o<0):o.im===0?c=2*+(o.re<0):c=2*+(o.im<0)+1);for(var h=o.arg(),d=o.abs(),f=[],p=Math.pow(d,1/l),g=0;g<l;g++){var b=(c+4*g)/l;if(b===Math.round(b)){f.push(s[b%4](p));continue}f.push(new i({r:p,phi:(h+2*Math.PI*g)/l}))}return f}return e(iV,{Complex:function(l){return a(l,2)},"Complex, number":a})}),sV="dotPow",Yxe=["typed","equalScalar","matrix","pow","DenseMatrix","concat","SparseMatrix"],Qxe=Y(sV,Yxe,r=>{var{typed:e,equalScalar:t,matrix:n,pow:i,DenseMatrix:s,concat:a,SparseMatrix:o}=r,l=ss({typed:e}),u=ou({typed:e,SparseMatrix:o}),c=Bi({typed:e,equalScalar:t}),h=Yn({typed:e,DenseMatrix:s}),d=Ar({typed:e,matrix:n,concat:a}),f={};for(var p in i.signatures)Object.prototype.hasOwnProperty.call(i.signatures,p)&&!p.includes("Matrix")&&!p.includes("Array")&&(f[p]=i.signatures[p]);var g=e(f);return e(sV,d({elop:g,SS:u,DS:l,Ss:c,sS:h}))}),aV="dotDivide",Jxe=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat","SparseMatrix"],Zxe=Y(aV,Jxe,r=>{var{typed:e,matrix:t,equalScalar:n,divideScalar:i,DenseMatrix:s,concat:a,SparseMatrix:o}=r,l=nl({typed:e,equalScalar:n}),u=ss({typed:e}),c=ou({typed:e,SparseMatrix:o}),h=Bi({typed:e,equalScalar:n}),d=Yn({typed:e,DenseMatrix:s}),f=Ar({typed:e,matrix:t,concat:a});return e(aV,f({elop:i,SS:c,DS:u,SD:l,Ss:h,sS:d}))});function m_(r){var{DenseMatrix:e}=r;return function(n,i,s){var a=n.size();if(a.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+Pt(a)+")");var o=a[0],l=a[1];if(o!==l)throw new RangeError("Matrix must be square (size: "+Pt(a)+")");var u=[];if(lt(i)){var c=i.size(),h=i._data;if(c.length===1){if(c[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var d=0;d<o;d++)u[d]=[h[d]];return new e({data:u,size:[o,1],datatype:i._datatype})}if(c.length===2){if(c[0]!==o||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(dT(i)){if(s){u=[];for(var f=0;f<o;f++)u[f]=[h[f][0]];return new e({data:u,size:[o,1],datatype:i._datatype})}return i}if(Tf(i)){for(var p=0;p<o;p++)u[p]=[0];for(var g=i._values,b=i._index,v=i._ptr,x=v[1],y=v[0];y<x;y++){var A=b[y];u[A][0]=g[y]}return new e({data:u,size:[o,1],datatype:i._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(cr(i)){var w=vt(i);if(w.length===1){if(w[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var _=0;_<o;_++)u[_]=[i[_]];return new e({data:u,size:[o,1]})}if(w.length===2){if(w[0]!==o||w[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var S=0;S<o;S++)u[S]=[i[S][0]];return new e({data:u,size:[o,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var oV="lsolve",e_e=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],t_e=Y(oV,e_e,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:s,equalScalar:a,DenseMatrix:o}=r,l=m_({DenseMatrix:o});return e(oV,{"SparseMatrix, Array | Matrix":function(d,f){return c(d,f)},"DenseMatrix, Array | Matrix":function(d,f){return u(d,f)},"Array, Array | Matrix":function(d,f){var p=t(d),g=u(p,f);return g.valueOf()}});function u(h,d){d=l(h,d,!0);for(var f=d._data,p=h._size[0],g=h._size[1],b=[],v=h._data,x=0;x<g;x++){var y=f[x][0]||0,A=void 0;if(a(y,0))A=0;else{var w=v[x][x];if(a(w,0))throw new Error("Linear system cannot be solved since matrix is singular");A=n(y,w);for(var _=x+1;_<p;_++)f[_]=[s(f[_][0]||0,i(A,v[_][x]))]}b[x]=[A]}return new o({data:b,size:[p,1]})}function c(h,d){d=l(h,d,!0);for(var f=d._data,p=h._size[0],g=h._size[1],b=h._values,v=h._index,x=h._ptr,y=[],A=0;A<g;A++){var w=f[A][0]||0;if(a(w,0))y[A]=[0];else{for(var _=0,S=[],E=[],C=x[A],N=x[A+1],D=C;D<N;D++){var M=v[D];M===A?_=b[D]:M>A&&(S.push(b[D]),E.push(M))}if(a(_,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var I=n(w,_),U=0,X=E.length;U<X;U++){var k=E[U];f[k]=[s(f[k][0]||0,i(I,S[U]))]}y[A]=[I]}}return new o({data:y,size:[p,1]})}}),lV="usolve",r_e=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],n_e=Y(lV,r_e,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:s,equalScalar:a,DenseMatrix:o}=r,l=m_({DenseMatrix:o});return e(lV,{"SparseMatrix, Array | Matrix":function(d,f){return c(d,f)},"DenseMatrix, Array | Matrix":function(d,f){return u(d,f)},"Array, Array | Matrix":function(d,f){var p=t(d),g=u(p,f);return g.valueOf()}});function u(h,d){d=l(h,d,!0);for(var f=d._data,p=h._size[0],g=h._size[1],b=[],v=h._data,x=g-1;x>=0;x--){var y=f[x][0]||0,A=void 0;if(a(y,0))A=0;else{var w=v[x][x];if(a(w,0))throw new Error("Linear system cannot be solved since matrix is singular");A=n(y,w);for(var _=x-1;_>=0;_--)f[_]=[s(f[_][0]||0,i(A,v[_][x]))]}b[x]=[A]}return new o({data:b,size:[p,1]})}function c(h,d){d=l(h,d,!0);for(var f=d._data,p=h._size[0],g=h._size[1],b=h._values,v=h._index,x=h._ptr,y=[],A=g-1;A>=0;A--){var w=f[A][0]||0;if(a(w,0))y[A]=[0];else{for(var _=0,S=[],E=[],C=x[A],N=x[A+1],D=N-1;D>=C;D--){var M=v[D];M===A?_=b[D]:M<A&&(S.push(b[D]),E.push(M))}if(a(_,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var I=n(w,_),U=0,X=E.length;U<X;U++){var k=E[U];f[k]=[s(f[k][0],i(I,S[U]))]}y[A]=[I]}}return new o({data:y,size:[p,1]})}}),uV="lsolveAll",i_e=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],s_e=Y(uV,i_e,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:s,equalScalar:a,DenseMatrix:o}=r,l=m_({DenseMatrix:o});return e(uV,{"SparseMatrix, Array | Matrix":function(d,f){return c(d,f)},"DenseMatrix, Array | Matrix":function(d,f){return u(d,f)},"Array, Array | Matrix":function(d,f){var p=t(d),g=u(p,f);return g.map(b=>b.valueOf())}});function u(h,d){for(var f=[l(h,d,!0)._data.map(E=>E[0])],p=h._data,g=h._size[0],b=h._size[1],v=0;v<b;v++)for(var x=f.length,y=0;y<x;y++){var A=f[y];if(a(p[v][v],0))if(a(A[v],0)){if(y===0){var _=[...A];_[v]=1;for(var S=v+1;S<b;S++)_[S]=s(_[S],p[S][v]);f.push(_)}}else{if(y===0)return[];f.splice(y,1),y-=1,x-=1}else{A[v]=n(A[v],p[v][v]);for(var w=v+1;w<b;w++)A[w]=s(A[w],i(A[v],p[w][v]))}}return f.map(E=>new o({data:E.map(C=>[C]),size:[g,1]}))}function c(h,d){for(var f=[l(h,d,!0)._data.map(ce=>ce[0])],p=h._size[0],g=h._size[1],b=h._values,v=h._index,x=h._ptr,y=0;y<g;y++)for(var A=f.length,w=0;w<A;w++){for(var _=f[w],S=[],E=[],C=x[y],N=x[y+1],D=0,M=C;M<N;M++){var I=v[M];I===y?D=b[M]:I>y&&(S.push(b[M]),E.push(I))}if(a(D,0))if(a(_[y],0)){if(w===0){var z=[..._];z[y]=1;for(var q=0,H=E.length;q<H;q++){var te=E[q];z[te]=s(z[te],S[q])}f.push(z)}}else{if(w===0)return[];f.splice(w,1),w-=1,A-=1}else{_[y]=n(_[y],D);for(var U=0,X=E.length;U<X;U++){var k=E[U];_[k]=s(_[k],i(_[y],S[U]))}}}return f.map(ce=>new o({data:ce.map(re=>[re]),size:[p,1]}))}}),cV="usolveAll",a_e=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],o_e=Y(cV,a_e,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:s,equalScalar:a,DenseMatrix:o}=r,l=m_({DenseMatrix:o});return e(cV,{"SparseMatrix, Array | Matrix":function(d,f){return c(d,f)},"DenseMatrix, Array | Matrix":function(d,f){return u(d,f)},"Array, Array | Matrix":function(d,f){var p=t(d),g=u(p,f);return g.map(b=>b.valueOf())}});function u(h,d){for(var f=[l(h,d,!0)._data.map(E=>E[0])],p=h._data,g=h._size[0],b=h._size[1],v=b-1;v>=0;v--)for(var x=f.length,y=0;y<x;y++){var A=f[y];if(a(p[v][v],0))if(a(A[v],0)){if(y===0){var _=[...A];_[v]=1;for(var S=v-1;S>=0;S--)_[S]=s(_[S],p[S][v]);f.push(_)}}else{if(y===0)return[];f.splice(y,1),y-=1,x-=1}else{A[v]=n(A[v],p[v][v]);for(var w=v-1;w>=0;w--)A[w]=s(A[w],i(A[v],p[w][v]))}}return f.map(E=>new o({data:E.map(C=>[C]),size:[g,1]}))}function c(h,d){for(var f=[l(h,d,!0)._data.map(ce=>ce[0])],p=h._size[0],g=h._size[1],b=h._values,v=h._index,x=h._ptr,y=g-1;y>=0;y--)for(var A=f.length,w=0;w<A;w++){for(var _=f[w],S=[],E=[],C=x[y],N=x[y+1],D=0,M=N-1;M>=C;M--){var I=v[M];I===y?D=b[M]:I<y&&(S.push(b[M]),E.push(I))}if(a(D,0))if(a(_[y],0)){if(w===0){var z=[..._];z[y]=1;for(var q=0,H=E.length;q<H;q++){var te=E[q];z[te]=s(z[te],S[q])}f.push(z)}}else{if(w===0)return[];f.splice(w,1),w-=1,A-=1}else{_[y]=n(_[y],D);for(var U=0,X=E.length;U<X;U++){var k=E[U];_[k]=s(_[k],i(_[y],S[U]))}}}return f.map(ce=>new o({data:ce.map(re=>[re]),size:[p,1]}))}}),l_e="matAlgo08xS0Sid",u_e=["typed","equalScalar"],QF=Y(l_e,u_e,r=>{var{typed:e,equalScalar:t}=r;return function(i,s,a){var o=i._values,l=i._index,u=i._ptr,c=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,f=s._index,p=s._ptr,g=s._size,b=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==g.length)throw new Mt(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");if(!o||!d)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var v=c[0],x=c[1],y,A=t,w=0,_=a;typeof h=="string"&&h===b&&h!=="mixed"&&(y=h,A=e.find(t,[y,y]),w=e.convert(0,y),_=e.find(a,[y,y]));for(var S=[],E=[],C=[],N=[],D=[],M,I,U,X,k=0;k<x;k++){C[k]=E.length;var z=k+1;for(I=u[k],U=u[k+1],M=I;M<U;M++)X=l[M],D[X]=z,N[X]=o[M],E.push(X);for(I=p[k],U=p[k+1],M=I;M<U;M++)X=f[M],D[X]===z&&(N[X]=_(N[X],d[M]));for(M=C[k];M<E.length;){X=E[M];var q=N[X];A(q,w)?E.splice(M,1):(S.push(q),M++)}}return C[x]=E.length,i.createSparseMatrix({values:S,index:E,ptr:C,size:[v,x],datatype:h===i._datatype&&b===s._datatype?y:void 0})}}),JF=Y("useMatrixForArrayScalar",["typed","matrix"],r=>{var{typed:e,matrix:t}=r;return{"Array, number":e.referTo("DenseMatrix, number",n=>(i,s)=>n(t(i),s).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",n=>(i,s)=>n(t(i),s).valueOf()),"number, Array":e.referTo("number, DenseMatrix",n=>(i,s)=>n(i,t(s)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",n=>(i,s)=>n(i,t(s)).valueOf())}}),hV="leftShift",c_e=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],h_e=Y(hV,c_e,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:s,concat:a}=r,o=jd({typed:e}),l=nl({typed:e,equalScalar:n}),u=QF({typed:e,equalScalar:n}),c=_p({typed:e,DenseMatrix:s}),h=Bi({typed:e,equalScalar:n}),d=wo({typed:e}),f=Ar({typed:e,matrix:t,concat:a}),p=JF({typed:e,matrix:t});return e(hV,{"number, number":yX,"BigNumber, BigNumber":M1e,"bigint, bigint":(g,b)=>g<<b,"SparseMatrix, number | BigNumber":e.referToSelf(g=>(b,v)=>n(v,0)?b.clone():h(b,v,g,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(g=>(b,v)=>n(v,0)?b.clone():d(b,v,g,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(g=>(b,v)=>n(b,0)?i(v.size(),v.storage()):c(v,b,g,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(g=>(b,v)=>n(b,0)?i(v.size(),v.storage()):d(v,b,g,!0))},p,f({SS:u,DS:o,SD:l}))}),dV="rightArithShift",d_e=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],f_e=Y(dV,d_e,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:s,concat:a}=r,o=jd({typed:e}),l=nl({typed:e,equalScalar:n}),u=QF({typed:e,equalScalar:n}),c=_p({typed:e,DenseMatrix:s}),h=Bi({typed:e,equalScalar:n}),d=wo({typed:e}),f=Ar({typed:e,matrix:t,concat:a}),p=JF({typed:e,matrix:t});return e(dV,{"number, number":bX,"BigNumber, BigNumber":I1e,"bigint, bigint":(g,b)=>g>>b,"SparseMatrix, number | BigNumber":e.referToSelf(g=>(b,v)=>n(v,0)?b.clone():h(b,v,g,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(g=>(b,v)=>n(v,0)?b.clone():d(b,v,g,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(g=>(b,v)=>n(b,0)?i(v.size(),v.storage()):c(v,b,g,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(g=>(b,v)=>n(b,0)?i(v.size(),v.storage()):d(v,b,g,!0))},p,f({SS:u,DS:o,SD:l}))}),fV="rightLogShift",m_e=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],p_e=Y(fV,m_e,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:s,concat:a}=r,o=jd({typed:e}),l=nl({typed:e,equalScalar:n}),u=QF({typed:e,equalScalar:n}),c=_p({typed:e,DenseMatrix:s}),h=Bi({typed:e,equalScalar:n}),d=wo({typed:e}),f=Ar({typed:e,matrix:t,concat:a}),p=JF({typed:e,matrix:t});return e(fV,{"number, number":wX,"SparseMatrix, number | BigNumber":e.referToSelf(g=>(b,v)=>n(v,0)?b.clone():h(b,v,g,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(g=>(b,v)=>n(v,0)?b.clone():d(b,v,g,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(g=>(b,v)=>n(b,0)?i(v.size(),v.storage()):c(v,b,g,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(g=>(b,v)=>n(b,0)?i(v.size(),v.storage()):d(v,b,g,!0))},p,f({SS:u,DS:o,SD:l}))}),mV="and",g_e=["typed","matrix","equalScalar","zeros","not","concat"],cY=Y(mV,g_e,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,not:s,concat:a}=r,o=nl({typed:e,equalScalar:n}),l=hN({typed:e,equalScalar:n}),u=Bi({typed:e,equalScalar:n}),c=wo({typed:e}),h=Ar({typed:e,matrix:t,concat:a});return e(mV,{"number, number":LP,"Complex, Complex":function(f,p){return(f.re!==0||f.im!==0)&&(p.re!==0||p.im!==0)},"BigNumber, BigNumber":function(f,p){return!f.isZero()&&!p.isZero()&&!f.isNaN()&&!p.isNaN()},"bigint, bigint":LP,"Unit, Unit":e.referToSelf(d=>(f,p)=>d(f.value||0,p.value||0)),"SparseMatrix, any":e.referToSelf(d=>(f,p)=>s(p)?i(f.size(),f.storage()):u(f,p,d,!1)),"DenseMatrix, any":e.referToSelf(d=>(f,p)=>s(p)?i(f.size(),f.storage()):c(f,p,d,!1)),"any, SparseMatrix":e.referToSelf(d=>(f,p)=>s(f)?i(f.size(),f.storage()):u(p,f,d,!0)),"any, DenseMatrix":e.referToSelf(d=>(f,p)=>s(f)?i(f.size(),f.storage()):c(p,f,d,!0)),"Array, any":e.referToSelf(d=>(f,p)=>d(t(f),p).valueOf()),"any, Array":e.referToSelf(d=>(f,p)=>d(f,t(p)).valueOf())},h({SS:l,DS:o}))}),NT="compare",v_e=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],y_e=Y(NT,v_e,r=>{var{typed:e,config:t,equalScalar:n,matrix:i,BigNumber:s,Fraction:a,DenseMatrix:o,concat:l}=r,u=ss({typed:e}),c=cN({typed:e,equalScalar:n}),h=Yn({typed:e,DenseMatrix:o}),d=Ar({typed:e,matrix:i,concat:l}),f=ay({typed:e});return e(NT,b_e({typed:e,config:t}),{"boolean, boolean":function(g,b){return g===b?0:g>b?1:-1},"BigNumber, BigNumber":function(g,b){return yo(g,b,t.relTol,t.absTol)?new s(0):new s(g.cmp(b))},"bigint, bigint":function(g,b){return g===b?0n:g>b?1n:-1n},"Fraction, Fraction":function(g,b){return new a(g.compare(b))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,d({SS:c,DS:u,Ss:h}))}),b_e=Y(NT,["typed","config"],r=>{var{typed:e,config:t}=r;return e(NT,{"number, number":function(i,s){return pi(i,s,t.relTol,t.absTol)?0:i>s?1:-1}})}),w_e=function r(e,t){var n=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,i=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,a=/^0x[0-9a-f]+$/i,o=/^0/,l=function(y){return r.insensitive&&(""+y).toLowerCase()||""+y},u=l(e).replace(i,"")||"",c=l(t).replace(i,"")||"",h=u.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=c.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=parseInt(u.match(a),16)||h.length!==1&&u.match(s)&&Date.parse(u),p=parseInt(c.match(a),16)||f&&c.match(s)&&Date.parse(c)||null,g,b;if(p){if(f<p)return-1;if(f>p)return 1}for(var v=0,x=Math.max(h.length,d.length);v<x;v++){if(g=!(h[v]||"").match(o)&&parseFloat(h[v])||h[v]||0,b=!(d[v]||"").match(o)&&parseFloat(d[v])||d[v]||0,isNaN(g)!==isNaN(b))return isNaN(g)?1:-1;if(typeof g!=typeof b&&(g+="",b+=""),g<b)return-1;if(g>b)return 1}return 0};const jp=nC(w_e);var pV="compareNatural",x_e=["typed","compare"],__e=Y(pV,x_e,r=>{var{typed:e,compare:t}=r,n=t.signatures["boolean,boolean"];return e(pV,{"any, any":i});function i(l,u){var c=dr(l),h=dr(u),d;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(h==="number"||h==="BigNumber"||h==="Fraction"))return d=t(l,u),d.toString()!=="0"?d>0?1:-1:jp(c,h);var f=["Array","DenseMatrix","SparseMatrix"];if(f.includes(c)||f.includes(h))return d=s(i,l,u),d!==0?d:jp(c,h);if(c!==h)return jp(c,h);if(c==="Complex")return A_e(l,u);if(c==="Unit")return l.equalBase(u)?i(l.value,u.value):a(i,l.formatUnits(),u.formatUnits());if(c==="boolean")return n(l,u);if(c==="string")return jp(l,u);if(c==="Object")return o(i,l,u);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function s(l,u,c){return Tf(u)&&Tf(c)?a(l,u.toJSON().values,c.toJSON().values):Tf(u)?s(l,u.toArray(),c):Tf(c)?s(l,u,c.toArray()):dT(u)?s(l,u.toJSON().data,c):dT(c)?s(l,u,c.toJSON().data):Array.isArray(u)?Array.isArray(c)?a(l,u,c):s(l,u,[c]):s(l,[u],c)}function a(l,u,c){for(var h=0,d=Math.min(u.length,c.length);h<d;h++){var f=l(u[h],c[h]);if(f!==0)return f}return u.length>c.length?1:u.length<c.length?-1:0}function o(l,u,c){var h=Object.keys(u),d=Object.keys(c);h.sort(jp),d.sort(jp);var f=a(l,h,d);if(f!==0)return f;for(var p=0;p<h.length;p++){var g=l(u[h[p]],c[d[p]]);if(g!==0)return g}return 0}});function A_e(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0}var gV="compareText",E_e=["typed","matrix","concat"];IP.signature="any, any";var S_e=Y(gV,E_e,r=>{var{typed:e,matrix:t,concat:n}=r,i=Ar({typed:e,matrix:t,concat:n});return e(gV,IP,i({elop:IP,Ds:!0}))}),DT="equal",T_e=["typed","matrix","equalScalar","DenseMatrix","SparseMatrix"],C_e=Y(DT,T_e,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:s,SparseMatrix:a}=r,o=ss({typed:e}),l=ou({typed:e,SparseMatrix:a}),u=Yn({typed:e,DenseMatrix:i}),c=Ar({typed:e,matrix:t});return e(DT,N_e({typed:e,equalScalar:n}),c({elop:n,SS:l,DS:o,Ss:u}))}),N_e=Y(DT,["typed","equalScalar"],r=>{var{typed:e,equalScalar:t}=r;return e(DT,{"any, any":function(i,s){return i===null?s===null:s===null?i===null:i===void 0?s===void 0:s===void 0?i===void 0:t(i,s)}})}),vV="equalText",D_e=["typed","compareText","isZero"],M_e=Y(vV,D_e,r=>{var{typed:e,compareText:t,isZero:n}=r;return e(vV,{"any, any":function(s,a){return n(t(s,a))}})}),MT="smaller",I_e=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],P_e=Y(MT,I_e,r=>{var{typed:e,config:t,bignumber:n,matrix:i,DenseMatrix:s,concat:a,SparseMatrix:o}=r,l=ss({typed:e}),u=ou({typed:e,SparseMatrix:o}),c=Yn({typed:e,DenseMatrix:s}),h=Ar({typed:e,matrix:i,concat:a}),d=ay({typed:e});function f(p,g){return p.lt(g)&&!yo(p,g,t.relTol,t.absTol)}return e(MT,R_e({typed:e,config:t}),{"boolean, boolean":(p,g)=>p<g,"BigNumber, BigNumber":f,"bigint, bigint":(p,g)=>p<g,"Fraction, Fraction":(p,g)=>p.compare(g)===-1,"Fraction, BigNumber":function(g,b){return f(n(g),b)},"BigNumber, Fraction":function(g,b){return f(g,n(b))},"Complex, Complex":function(g,b){throw new TypeError("No ordering relation is defined for complex numbers")}},d,h({SS:u,DS:l,Ss:c}))}),R_e=Y(MT,["typed","config"],r=>{var{typed:e,config:t}=r;return e(MT,{"number, number":function(i,s){return i<s&&!pi(i,s,t.relTol,t.absTol)}})}),IT="smallerEq",k_e=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],F_e=Y(IT,k_e,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:s,SparseMatrix:a}=r,o=ss({typed:e}),l=ou({typed:e,SparseMatrix:a}),u=Yn({typed:e,DenseMatrix:i}),c=Ar({typed:e,matrix:n,concat:s}),h=ay({typed:e});return e(IT,O_e({typed:e,config:t}),{"boolean, boolean":(d,f)=>d<=f,"BigNumber, BigNumber":function(f,p){return f.lte(p)||yo(f,p,t.relTol,t.absTol)},"bigint, bigint":(d,f)=>d<=f,"Fraction, Fraction":(d,f)=>d.compare(f)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,c({SS:l,DS:o,Ss:u}))}),O_e=Y(IT,["typed","config"],r=>{var{typed:e,config:t}=r;return e(IT,{"number, number":function(i,s){return i<=s||pi(i,s,t.relTol,t.absTol)}})}),PT="larger",B_e=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],L_e=Y(PT,B_e,r=>{var{typed:e,config:t,bignumber:n,matrix:i,DenseMatrix:s,concat:a,SparseMatrix:o}=r,l=ss({typed:e}),u=ou({typed:e,SparseMatrix:o}),c=Yn({typed:e,DenseMatrix:s}),h=Ar({typed:e,matrix:i,concat:a}),d=ay({typed:e});function f(p,g){return p.gt(g)&&!yo(p,g,t.relTol,t.absTol)}return e(PT,$_e({typed:e,config:t}),{"boolean, boolean":(p,g)=>p>g,"BigNumber, BigNumber":f,"bigint, bigint":(p,g)=>p>g,"Fraction, Fraction":(p,g)=>p.compare(g)===1,"Fraction, BigNumber":function(g,b){return f(n(g),b)},"BigNumber, Fraction":function(g,b){return f(g,n(b))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},d,h({SS:u,DS:l,Ss:c}))}),$_e=Y(PT,["typed","config"],r=>{var{typed:e,config:t}=r;return e(PT,{"number, number":function(i,s){return i>s&&!pi(i,s,t.relTol,t.absTol)}})}),RT="largerEq",V_e=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],U_e=Y(RT,V_e,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:s,SparseMatrix:a}=r,o=ss({typed:e}),l=ou({typed:e,SparseMatrix:a}),u=Yn({typed:e,DenseMatrix:i}),c=Ar({typed:e,matrix:n,concat:s}),h=ay({typed:e});return e(RT,z_e({typed:e,config:t}),{"boolean, boolean":(d,f)=>d>=f,"BigNumber, BigNumber":function(f,p){return f.gte(p)||yo(f,p,t.relTol,t.absTol)},"bigint, bigint":function(f,p){return f>=p},"Fraction, Fraction":(d,f)=>d.compare(f)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,c({SS:l,DS:o,Ss:u}))}),z_e=Y(RT,["typed","config"],r=>{var{typed:e,config:t}=r;return e(RT,{"number, number":function(i,s){return i>=s||pi(i,s,t.relTol,t.absTol)}})}),yV="deepEqual",j_e=["typed","equal"],q_e=Y(yV,j_e,r=>{var{typed:e,equal:t}=r;return e(yV,{"any, any":function(s,a){return n(s.valueOf(),a.valueOf())}});function n(i,s){if(Array.isArray(i))if(Array.isArray(s)){var a=i.length;if(a!==s.length)return!1;for(var o=0;o<a;o++)if(!n(i[o],s[o]))return!1;return!0}else return!1;else return Array.isArray(s)?!1:t(i,s)}}),kT="unequal",H_e=["typed","config","equalScalar","matrix","DenseMatrix","concat","SparseMatrix"],G_e=Y(kT,H_e,r=>{var{typed:e,config:t,equalScalar:n,matrix:i,DenseMatrix:s,concat:a,SparseMatrix:o}=r,l=ss({typed:e}),u=ou({typed:e,SparseMatrix:o}),c=Yn({typed:e,DenseMatrix:s}),h=Ar({typed:e,matrix:i,concat:a});return e(kT,W_e({typed:e,equalScalar:n}),h({elop:d,SS:u,DS:l,Ss:c}));function d(f,p){return!n(f,p)}}),W_e=Y(kT,["typed","equalScalar"],r=>{var{typed:e,equalScalar:t}=r;return e(kT,{"any, any":function(i,s){return i===null?s!==null:s===null?i!==null:i===void 0?s!==void 0:s===void 0?i!==void 0:!t(i,s)}})}),bV="partitionSelect",K_e=["typed","isNumeric","isNaN","compare"],X_e=Y(bV,K_e,r=>{var{typed:e,isNumeric:t,isNaN:n,compare:i}=r,s=i,a=(u,c)=>-i(u,c);return e(bV,{"Array | Matrix, number":function(c,h){return o(c,h,s)},"Array | Matrix, number, string":function(c,h,d){if(d==="asc")return o(c,h,s);if(d==="desc")return o(c,h,a);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":o});function o(u,c,h){if(!tt(c)||c<0)throw new Error("k must be a non-negative integer");if(lt(u)){var d=u.size();if(d.length>1)throw new Error("Only one dimensional matrices supported");return l(u.valueOf(),c,h)}if(Array.isArray(u))return l(u,c,h)}function l(u,c,h){if(c>=u.length)throw new Error("k out of bounds");for(var d=0;d<u.length;d++)if(t(u[d])&&n(u[d]))return u[d];for(var f=0,p=u.length-1;f<p;){for(var g=f,b=p,v=u[Math.floor(Math.random()*(p-f+1))+f];g<b;)if(h(u[g],v)>=0){var x=u[b];u[b]=u[g],u[g]=x,--b}else++g;h(u[g],v)>0&&--g,c<=g?p=g:f=g+1}return u[c]}}),wV="sort",Y_e=["typed","matrix","compare","compareNatural"],Q_e=Y(wV,Y_e,r=>{var{typed:e,matrix:t,compare:n,compareNatural:i}=r,s=n,a=(c,h)=>-n(c,h);return e(wV,{Array:function(h){return l(h),h.sort(s)},Matrix:function(h){return u(h),t(h.toArray().sort(s),h.storage())},"Array, function":function(h,d){return l(h),h.sort(d)},"Matrix, function":function(h,d){return u(h),t(h.toArray().sort(d),h.storage())},"Array, string":function(h,d){return l(h),h.sort(o(d))},"Matrix, string":function(h,d){return u(h),t(h.toArray().sort(o(d)),h.storage())}});function o(c){if(c==="asc")return s;if(c==="desc")return a;if(c==="natural")return i;throw new Error('String "asc", "desc", or "natural" expected')}function l(c){if(vt(c).length!==1)throw new Error("One dimensional array expected")}function u(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),xV="max",J_e=["typed","config","numeric","larger","isNaN"],hY=Y(xV,J_e,r=>{var{typed:e,config:t,numeric:n,larger:i,isNaN:s}=r;return e(xV,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(u,c){return uN(u,c.valueOf(),a)},"...":function(u){if(ny(u))throw new TypeError("Scalar values expected in function max");return o(u)}});function a(l,u){try{return i(l,u)?l:u}catch(c){throw Ts(c,"max",u)}}function o(l){var u;if(Md(l,function(c){try{(s(c)||u===void 0||i(c,u))&&(u=c)}catch(h){throw Ts(h,"max",c)}}),u===void 0)throw new Error("Cannot calculate max of an empty array");return typeof u=="string"&&(u=n(u,Ud(u,t))),u}}),_V="min",Z_e=["typed","config","numeric","smaller","isNaN"],dY=Y(_V,Z_e,r=>{var{typed:e,config:t,numeric:n,smaller:i,isNaN:s}=r;return e(_V,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(u,c){return uN(u,c.valueOf(),a)},"...":function(u){if(ny(u))throw new TypeError("Scalar values expected in function min");return o(u)}});function a(l,u){try{return i(l,u)?l:u}catch(c){throw Ts(c,"min",u)}}function o(l){var u;if(Md(l,function(c){try{(s(c)||u===void 0||i(c,u))&&(u=c)}catch(h){throw Ts(h,"min",c)}}),u===void 0)throw new Error("Cannot calculate min of an empty array");return typeof u=="string"&&(u=n(u,Ud(u,t))),u}}),eAe="ImmutableDenseMatrix",tAe=["smaller","DenseMatrix"],rAe=Y(eAe,tAe,r=>{var{smaller:e,DenseMatrix:t}=r;function n(i,s){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(s&&!mn(s))throw new Error("Invalid datatype: "+s);if(lt(i)||cr(i)){var a=new t(i,s);this._data=a._data,this._size=a._size,this._datatype=a._datatype,this._min=null,this._max=null}else if(i&&cr(i.data)&&cr(i.size))this._data=i.data,this._size=i.size,this._datatype=i.datatype,this._min=typeof i.min<"u"?i.min:null,this._max=typeof i.max<"u"?i.max:null;else{if(i)throw new TypeError("Unsupported type of data ("+dr(i)+")");this._data=[],this._size=[0],this._datatype=s,this._min=null,this._max=null}}return n.prototype=new t,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(i){switch(arguments.length){case 1:{var s=t.prototype.subset.call(this,i);return lt(s)?new n({data:s._data,size:s._size,datatype:s._datatype}):s}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:gt(this._data),size:gt(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(i){return new n(i)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(this._min===null){var i=null;this.forEach(function(s){(i===null||e(s,i))&&(i=s)}),this._min=i!==null?i:void 0}return this._min},n.prototype.max=function(){if(this._max===null){var i=null;this.forEach(function(s){(i===null||e(i,s))&&(i=s)}),this._max=i!==null?i:void 0}return this._max},n},{isClass:!0}),nAe="Index",iAe=["ImmutableDenseMatrix","getMatrixDataType"],sAe=Y(nAe,iAe,r=>{var{ImmutableDenseMatrix:e,getMatrixDataType:t}=r;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var s=0,a=arguments.length;s<a;s++){var o=s<0||arguments.length<=s?void 0:arguments[s],l=cr(o),u=lt(o),c=typeof o,h=null;if(VF(o))this._dimensions.push(o),this._isScalar=!1;else if(l||u){var d=void 0;this._isScalar=!1,t(o)==="boolean"?(l&&(d=i(AV(o).valueOf())),u&&(d=i(AV(o._data).valueOf())),h=o.valueOf().length):d=i(o.valueOf()),this._dimensions.push(d)}else if(c==="number")this._dimensions.push(o);else if(c==="bigint")this._dimensions.push(Number(o));else if(c==="string")this._dimensions.push(o);else throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");this._sourceSize.push(h)}}n.prototype.type="Index",n.prototype.isIndex=!0;function i(s){for(var a=0,o=s.length;a<o;a++)if(!st(s[a])||!tt(s[a]))throw new TypeError("Index parameters must be positive integer numbers");var l=new e;return l._data=s,l._size=[s.length],l}return n.prototype.clone=function(){var s=new n;return s._dimensions=gt(this._dimensions),s._isScalar=this._isScalar,s._sourceSize=this._sourceSize,s},n.create=function(s){var a=new n;return n.apply(a,s),a},n.prototype.size=function(){for(var s=[],a=0,o=this._dimensions.length;a<o;a++){var l=this._dimensions[a];s[a]=mn(l)||st(l)?1:l.size()[0]}return s},n.prototype.max=function(){for(var s=[],a=0,o=this._dimensions.length;a<o;a++){var l=this._dimensions[a];s[a]=mn(l)||st(l)?l:l.max()}return s},n.prototype.min=function(){for(var s=[],a=0,o=this._dimensions.length;a<o;a++){var l=this._dimensions[a];s[a]=mn(l)||st(l)?l:l.min()}return s},n.prototype.forEach=function(s){for(var a=0,o=this._dimensions.length;a<o;a++)s(this._dimensions[a],a,this)},n.prototype.dimension=function(s){var a;return st(s)&&(a=this._dimensions[s])!==null&&a!==void 0?a:null},n.prototype.isObjectProperty=function(){return this._dimensions.length===1&&mn(this._dimensions[0])},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},n.prototype.isScalar=function(){return this._isScalar},n.prototype.toArray=function(){for(var s=[],a=0,o=this._dimensions.length;a<o;a++){var l=this._dimensions[a];s.push(mn(l)||st(l)?l:l.toArray())}return s},n.prototype.valueOf=n.prototype.toArray,n.prototype.toString=function(){for(var s=[],a=0,o=this._dimensions.length;a<o;a++){var l=this._dimensions[a];mn(l)?s.push(JSON.stringify(l)):s.push(l.toString())}return"["+s.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},n.fromJSON=function(s){return n.create(s.dimensions)},n},{isClass:!0});function AV(r){var e=[];return r.forEach((t,n)=>{t&&e.push(n)}),e}var aAe="FibonacciHeap",oAe=["smaller","larger"],lAe=Y(aAe,oAe,r=>{var{smaller:e,larger:t}=r,n=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(c,h){var d={key:c,value:h,degree:0};if(this._minimum){var f=this._minimum;d.left=f,d.right=f.right,f.right=d,d.right.left=d,e(c,f.key)&&(this._minimum=d)}else d.left=d,d.right=d,this._minimum=d;return this._size++,d},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var h=this._minimum,d=c.degree,f=c.child;d>0;){var p=f.right;f.left.right=f.right,f.right.left=f.left,f.left=h,f.right=h.right,h.right=f,f.right.left=f,f.parent=null,f=p,d--}return c.left.right=c.right,c.right.left=c.left,c===c.right?h=null:(h=c.right,h=u(h,this._size)),this._size--,this._minimum=h,c},i.prototype.remove=function(c){this._minimum=s(this._minimum,c,-1),this.extractMinimum()};function s(c,h,d){h.key=d;var f=h.parent;return f&&e(h.key,f.key)&&(a(c,h,f),o(c,f)),e(h.key,c.key)&&(c=h),c}function a(c,h,d){h.left.right=h.right,h.right.left=h.left,d.degree--,d.child===h&&(d.child=h.right),d.degree===0&&(d.child=null),h.left=c,h.right=c.right,c.right=h,h.right.left=h,h.parent=null,h.mark=!1}function o(c,h){var d=h.parent;d&&(h.mark?(a(c,h,d),o(d)):h.mark=!0)}var l=function(h,d){h.left.right=h.right,h.right.left=h.left,h.parent=d,d.child?(h.left=d.child,h.right=d.child.right,d.child.right=h,h.right.left=h):(d.child=h,h.right=h,h.left=h),d.degree++,h.mark=!1};function u(c,h){var d=Math.floor(Math.log(h)*n)+1,f=new Array(d),p=0,g=c;if(g)for(p++,g=g.right;g!==c;)p++,g=g.right;for(var b;p>0;){for(var v=g.degree,x=g.right;b=f[v],!!b;){if(t(g.key,b.key)){var y=b;b=g,g=y}l(b,g),f[v]=null,v++}f[v]=g,g=x,p--}c=null;for(var A=0;A<d;A++)b=f[A],b&&(c?(b.left.right=b.right,b.right.left=b.left,b.left=c,b.right=c.right,c.right=b,b.right.left=b,e(b.key,c.key)&&(c=b)):c=b);return c}return i},{isClass:!0}),uAe="Spa",cAe=["addScalar","equalScalar","FibonacciHeap"],hAe=Y(uAe,cAe,r=>{var{addScalar:e,equalScalar:t,FibonacciHeap:n}=r;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(s,a){if(this._values[s])this._values[s].value=a;else{var o=this._heap.insert(s,a);this._values[s]=o}},i.prototype.get=function(s){var a=this._values[s];return a?a.value:0},i.prototype.accumulate=function(s,a){var o=this._values[s];o?o.value=e(o.value,a):(o=this._heap.insert(s,a),this._values[s]=o)},i.prototype.forEach=function(s,a,o){var l=this._heap,u=this._values,c=[],h=l.extractMinimum();for(h&&c.push(h);h&&h.key<=a;)h.key>=s&&(t(h.value,0)||o(h.key,h.value,this)),h=l.extractMinimum(),h&&c.push(h);for(var d=0;d<c.length;d++){var f=c[d];h=l.insert(f.key,f.value),u[h.key]=h}},i.prototype.swap=function(s,a){var o=this._values[s],l=this._values[a];if(!o&&l)o=this._heap.insert(s,l.value),this._heap.remove(l),this._values[s]=o,this._values[a]=void 0;else if(o&&!l)l=this._heap.insert(a,o.value),this._heap.remove(o),this._values[a]=l,this._values[s]=void 0;else if(o&&l){var u=o.value;o.value=l.value,l.value=u}},i},{isClass:!0});function dAe(r){var e=0,t=1,n=Object.create(null),i=Object.create(null),s=0,a=function(l){var u=i[l];if(u&&(delete n[u],delete i[l],--e,t===u)){if(!e){s=0,t=1;return}for(;!Object.prototype.hasOwnProperty.call(n,++t););}};return r=Math.abs(r),{hit:function(l){var u=i[l],c=++s;if(n[c]=l,i[l]=c,!u)return++e,e<=r?void 0:(l=n[t],a(l),l);if(delete n[u],t===u)for(;!Object.prototype.hasOwnProperty.call(n,++t););},delete:a,clear:function(){e=s=0,t=1,n=Object.create(null),i=Object.create(null)}}}function p_(r){var{hasher:e,limit:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t=t??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function n(){typeof n.cache!="object"&&(n.cache={values:new Map,lru:dAe(t||Number.POSITIVE_INFINITY)});for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=e(i);if(n.cache.values.has(a))return n.cache.lru.hit(a),n.cache.values.get(a);var o=r.apply(r,i);return n.cache.values.set(a,o),n.cache.values.delete(n.cache.lru.hit(a)),o}}var fAe=p_(function(r){return new r(1).exp()},{hasher:dN}),mAe=p_(function(r){return new r(1).plus(new r(5).sqrt()).div(2)},{hasher:dN}),ZF=p_(function(r){return r.acos(-1)},{hasher:dN}),pAe=p_(function(r){return ZF(r).times(2)},{hasher:dN});function dN(r){return r[0].precision}function EV(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function t2(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?EV(Object(t),!0).forEach(function(n){On(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):EV(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var gAe="Unit",vAe=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],yAe=Y(gAe,vAe,r=>{var{on:e,config:t,addScalar:n,subtractScalar:i,multiplyScalar:s,divideScalar:a,pow:o,abs:l,fix:u,round:c,equal:h,isNumeric:d,format:f,number:p,Complex:g,BigNumber:b,Fraction:v}=r,x=p,y=!1,A=!0;function w(Z,Q){if(!(this instanceof w))throw new Error("Constructor must be called with the new operator");if(!(Z==null||d(Z)||cc(Z)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=y,this.skipAutomaticSimplification=A,Q===void 0)this.units=[],this.dimensions=ne.map(G=>0);else if(typeof Q=="string"){var L=w.parse(Q);this.units=L.units,this.dimensions=L.dimensions}else if(xa(Q)&&Q.value===null)this.fixPrefix=Q.fixPrefix,this.skipAutomaticSimplification=Q.skipAutomaticSimplification,this.dimensions=Q.dimensions.slice(0),this.units=Q.units.map(G=>An({},G));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(Z)}Object.defineProperty(w,"name",{value:"Unit"}),w.prototype.constructor=w,w.prototype.type="Unit",w.prototype.isUnit=!0;var _,S,E;function C(){for(;E===" "||E==="	";)M()}function N(Z){return Z>="0"&&Z<="9"||Z==="."}function D(Z){return Z>="0"&&Z<="9"}function M(){S++,E=_.charAt(S)}function I(Z){S=Z,E=_.charAt(S)}function U(){var Z="",Q=S;if(E==="+"?M():E==="-"&&(Z+=E,M()),!N(E))return I(Q),null;if(E==="."){if(Z+=E,M(),!D(E))return I(Q),null}else{for(;D(E);)Z+=E,M();E==="."&&(Z+=E,M())}for(;D(E);)Z+=E,M();if(E==="E"||E==="e"){var L="",G=S;if(L+=E,M(),(E==="+"||E==="-")&&(L+=E,M()),!D(E))return I(G),Z;for(Z=Z+L;D(E);)Z+=E,M()}return Z}function X(){for(var Z="";D(E)||w.isValidAlpha(E);)Z+=E,M();var Q=Z.charAt(0);return w.isValidAlpha(Q)?Z:null}function k(Z){return E===Z?(M(),Z):null}w.parse=function(Z,Q){if(Q=Q||{},_=Z,S=-1,E="",typeof _!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var L=new w;L.units=[];var G=1,ee=!1;M(),C();var oe=U(),fe=null;if(oe){if(t.number==="BigNumber")fe=new b(oe);else if(t.number==="Fraction")try{fe=new v(oe)}catch{fe=parseFloat(oe)}else fe=parseFloat(oe);C(),k("*")?(G=1,ee=!0):k("/")&&(G=-1,ee=!0)}for(var de=[],Se=1;;){for(C();E==="(";)de.push(G),Se*=G,G=1,M(),C();var _e=void 0;if(E){var Pe=E;if(_e=X(),_e===null)throw new SyntaxError('Unexpected "'+Pe+'" in "'+_+'" at index '+S.toString())}else break;var Ee=z(_e);if(Ee===null)throw new SyntaxError('Unit "'+_e+'" not found.');var qe=G*Se;if(C(),k("^")){C();var bt=U();if(bt===null)throw new SyntaxError('In "'+Z+'", "^" must be followed by a floating-point number');qe*=bt}L.units.push({unit:Ee.unit,prefix:Ee.prefix,power:qe});for(var Lt=0;Lt<ne.length;Lt++)L.dimensions[Lt]+=(Ee.unit.dimensions[Lt]||0)*qe;for(C();E===")";){if(de.length===0)throw new SyntaxError('Unmatched ")" in "'+_+'" at index '+S.toString());Se/=de.pop(),M(),C()}if(ee=!1,k("*")?(G=1,ee=!0):k("/")?(G=-1,ee=!0):G=1,Ee.unit.base){var rt=Ee.unit.base.key;he.auto[rt]={unit:Ee.unit,prefix:Ee.prefix}}}if(C(),E)throw new SyntaxError('Could not parse: "'+Z+'"');if(ee)throw new SyntaxError('Trailing characters: "'+Z+'"');if(de.length!==0)throw new SyntaxError('Unmatched "(" in "'+_+'"');if(L.units.length===0&&!Q.allowNoUnits)throw new SyntaxError('"'+Z+'" contains no units');return L.value=fe!==void 0?L._normalize(fe):null,L},w.prototype.clone=function(){var Z=new w;Z.fixPrefix=this.fixPrefix,Z.skipAutomaticSimplification=this.skipAutomaticSimplification,Z.value=gt(this.value),Z.dimensions=this.dimensions.slice(0),Z.units=[];for(var Q=0;Q<this.units.length;Q++){Z.units[Q]={};for(var L in this.units[Q])Ze(this.units[Q],L)&&(Z.units[Q][L]=this.units[Q][L])}return Z},w.prototype.valueType=function(){return dr(this.value)},w.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},w.prototype._normalize=function(Z){if(Z==null||this.units.length===0)return Z;for(var Q=Z,L=w._getNumberConverter(dr(Z)),G=0;G<this.units.length;G++){var ee=L(this.units[G].unit.value),oe=L(this.units[G].prefix.value),fe=L(this.units[G].power);Q=s(Q,o(s(ee,oe),fe))}return Q},w.prototype._denormalize=function(Z,Q){if(Z==null||this.units.length===0)return Z;for(var L=Z,G=w._getNumberConverter(dr(Z)),ee=0;ee<this.units.length;ee++){var oe=G(this.units[ee].unit.value),fe=G(this.units[ee].prefix.value),de=G(this.units[ee].power);L=a(L,o(s(oe,fe),de))}return L};var z=p_(Z=>{if(Ze(K,Z)){var Q=K[Z],L=Q.prefixes[""];return{unit:Q,prefix:L}}for(var G in K)if(Ze(K,G)&&b0e(Z,G)){var ee=K[G],oe=Z.length-G.length,fe=Z.substring(0,oe),de=Ze(ee.prefixes,fe)?ee.prefixes[fe]:void 0;if(de!==void 0)return{unit:ee,prefix:de}}return null},{hasher:Z=>Z[0],limit:100});w.isValuelessUnit=function(Z){return z(Z)!==null},w.prototype.hasBase=function(Z){if(typeof Z=="string"&&(Z=W[Z]),!Z)return!1;for(var Q=0;Q<ne.length;Q++)if(Math.abs((this.dimensions[Q]||0)-(Z.dimensions[Q]||0))>1e-12)return!1;return!0},w.prototype.equalBase=function(Z){for(var Q=0;Q<ne.length;Q++)if(Math.abs((this.dimensions[Q]||0)-(Z.dimensions[Q]||0))>1e-12)return!1;return!0},w.prototype.equals=function(Z){return this.equalBase(Z)&&h(this.value,Z.value)},w.prototype.multiply=function(Z){for(var Q=this.clone(),L=xa(Z)?Z:new w(Z),G=0;G<ne.length;G++)Q.dimensions[G]=(this.dimensions[G]||0)+(L.dimensions[G]||0);for(var ee=0;ee<L.units.length;ee++){var oe=t2({},L.units[ee]);Q.units.push(oe)}if(this.value!==null||L.value!==null){var fe=this.value===null?this._normalize(H(L.value)):this.value,de=L.value===null?L._normalize(H(this.value)):L.value;Q.value=s(fe,de)}else Q.value=null;return xa(Z)&&(Q.skipAutomaticSimplification=!1),q(Q)},w.prototype.divideInto=function(Z){return new w(Z).divide(this)},w.prototype.divide=function(Z){for(var Q=this.clone(),L=xa(Z)?Z:new w(Z),G=0;G<ne.length;G++)Q.dimensions[G]=(this.dimensions[G]||0)-(L.dimensions[G]||0);for(var ee=0;ee<L.units.length;ee++){var oe=t2(t2({},L.units[ee]),{},{power:-L.units[ee].power});Q.units.push(oe)}if(this.value!==null||L.value!==null){var fe=this.value===null?this._normalize(H(L.value)):this.value,de=L.value===null?L._normalize(H(this.value)):L.value;Q.value=a(fe,de)}else Q.value=null;return xa(Z)&&(Q.skipAutomaticSimplification=!1),q(Q)},w.prototype.pow=function(Z){for(var Q=this.clone(),L=0;L<ne.length;L++)Q.dimensions[L]=(this.dimensions[L]||0)*Z;for(var G=0;G<Q.units.length;G++)Q.units[G].power*=Z;return Q.value!==null?Q.value=o(Q.value,Z):Q.value=null,Q.skipAutomaticSimplification=!1,q(Q)};function q(Z){return Z.equalBase(W.NONE)&&Z.value!==null&&!t.predictable?Z.value:Z}function H(Z){var Q=w._getNumberConverter(dr(Z));return Q(1)}w.prototype.abs=function(){var Z=this.clone();if(Z.value!==null)if(Z._isDerived()||Z.units.length===0||Z.units[0].unit.offset===0)Z.value=l(Z.value);else{var Q=Z._numberConverter(),L=Q(Z.units[0].unit.value),G=Q(Z.units[0].unit.offset),ee=s(L,G);Z.value=i(l(n(Z.value,ee)),ee)}for(var oe in Z.units)(Z.units[oe].unit.name==="VA"||Z.units[oe].unit.name==="VAR")&&(Z.units[oe].unit=K.W);return Z},w.prototype.to=function(Z){var Q=this.value===null?this._normalize(1):this.value,L;if(typeof Z=="string")L=w.parse(Z);else if(xa(Z))L=Z.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(L))throw new Error("Units do not match ('".concat(L.toString(),"' != '").concat(this.toString(),"')"));if(L.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||L.units.length===0||this.units[0].unit.offset===L.units[0].unit.offset)L.value=gt(Q);else{var G=w._getNumberConverter(dr(Q)),ee=this.units[0].unit.value,oe=this.units[0].unit.offset,fe=s(ee,oe),de=L.units[0].unit.value,Se=L.units[0].unit.offset,_e=s(de,Se);L.value=n(Q,G(i(fe,_e)))}return L.fixPrefix=!0,L.skipAutomaticSimplification=!0,L},w.prototype.toNumber=function(Z){return x(this.toNumeric(Z))},w.prototype.toNumeric=function(Z){var Q;return Z?Q=this.to(Z):Q=this.clone(),Q._isDerived()||Q.units.length===0?Q._denormalize(Q.value):Q._denormalize(Q.value,Q.units[0].prefix.value)},w.prototype.toString=function(){return this.format()},w.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix,skipSimp:this.skipAutomaticSimplification}},w.fromJSON=function(Z){var Q,L,G,ee=new w(Z.value,(Q=Z.unit)!==null&&Q!==void 0?Q:void 0);return ee.fixPrefix=(L=Z.fixPrefix)!==null&&L!==void 0?L:y,ee.skipAutomaticSimplification=(G=Z.skipSimp)!==null&&G!==void 0?G:A,ee},w.prototype.valueOf=w.prototype.toString,w.prototype.simplify=function(){var Z=this.clone(),Q=[],L;for(var G in be)if(Ze(be,G)&&Z.hasBase(W[G])){L=G;break}if(L==="NONE")Z.units=[];else{var ee;if(L&&Ze(be,L)&&(ee=be[L]),ee)Z.units=[{unit:ee.unit,prefix:ee.prefix,power:1}];else{for(var oe=!1,fe=0;fe<ne.length;fe++){var de=ne[fe];Math.abs(Z.dimensions[fe]||0)>1e-12&&(Ze(be,de)?Q.push({unit:be[de].unit,prefix:be[de].prefix,power:Z.dimensions[fe]||0}):oe=!0)}Q.length<Z.units.length&&!oe&&(Z.units=Q)}}return Z},w.prototype.toSI=function(){for(var Z=this.clone(),Q=[],L=0;L<ne.length;L++){var G=ne[L];if(Math.abs(Z.dimensions[L]||0)>1e-12)if(Ze(he.si,G))Q.push({unit:he.si[G].unit,prefix:he.si[G].prefix,power:Z.dimensions[L]||0});else throw new Error("Cannot express custom unit "+G+" in SI units")}return Z.units=Q,Z.fixPrefix=!0,Z.skipAutomaticSimplification=!0,this.value!==null?(Z.value=null,this.to(Z)):Z},w.prototype.formatUnits=function(){for(var Z="",Q="",L=0,G=0,ee=0;ee<this.units.length;ee++)this.units[ee].power>0?(L++,Z+=" "+this.units[ee].prefix.name+this.units[ee].unit.name,Math.abs(this.units[ee].power-1)>1e-15&&(Z+="^"+this.units[ee].power)):this.units[ee].power<0&&G++;if(G>0)for(var oe=0;oe<this.units.length;oe++)this.units[oe].power<0&&(L>0?(Q+=" "+this.units[oe].prefix.name+this.units[oe].unit.name,Math.abs(this.units[oe].power+1)>1e-15&&(Q+="^"+-this.units[oe].power)):(Q+=" "+this.units[oe].prefix.name+this.units[oe].unit.name,Q+="^"+this.units[oe].power));Z=Z.substr(1),Q=Q.substr(1),L>1&&G>0&&(Z="("+Z+")"),G>1&&L>0&&(Q="("+Q+")");var fe=Z;return L>0&&G>0&&(fe+=" / "),fe+=Q,fe},w.prototype.toBest=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Z&&!Array.isArray(Z))throw new Error("Invalid unit type. Expected string or Unit.");var L=this.units[0].unit.prefixes;if(Z&&Z.length>0){var G=Z.map(fe=>{var de=null;if(typeof fe=="string"){if(de=w.parse(fe),!de)throw new Error("Invalid unit type. Expected compatible string or Unit.")}else if(!xa(fe))throw new Error("Invalid unit type. Expected compatible string or Unit.");de===null&&(de=fe.clone());try{return this.to(de.formatUnits()),de}catch{throw new Error("Invalid unit type. Expected compatible string or Unit.")}}),ee=G.map(fe=>fe.units[0].prefix);this.units[0].unit.prefixes=ee.reduce((fe,de)=>(fe[de.name]=de,fe),{}),this.units[0].prefix=ee[0]}var oe=te(this,Q).simp;return this.units[0].unit.prefixes=L,oe.fixPrefix=!0,oe},w.prototype.format=function(Z){var{simp:Q,valueStr:L,unitStr:G}=te(this,Z),ee=L;return Q.value&&cc(Q.value)&&(ee="("+ee+")"),G.length>0&&ee.length>0&&(ee+=" "),ee+=G,ee};function te(Z){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},L=Z.skipAutomaticSimplification||Z.value===null?Z.clone():Z.simplify();ce(L),re(L,Q.offset);var G=L._denormalize(L.value),ee=L.value!==null?f(G,Q||{}):"",oe=L.formatUnits();return{simp:L,valueStr:ee,unitStr:oe}}function ce(Z){var Q=!1;typeof Z.value<"u"&&Z.value!==null&&cc(Z.value)&&(Q=Math.abs(Z.value.re)<1e-14);for(var L in Z.units)Ze(Z.units,L)&&Z.units[L].unit&&(Z.units[L].unit.name==="VA"&&Q?Z.units[L].unit=K.VAR:Z.units[L].unit.name==="VAR"&&!Q&&(Z.units[L].unit=K.VA))}function re(Z,Q){Z.units.length===1&&!Z.fixPrefix&&Math.abs(Z.units[0].power-Math.round(Z.units[0].power))<1e-14&&(Z.units[0].prefix=Z._bestPrefix(Q))}w.prototype._bestPrefix=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1.2;if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var Q=this.value!==null?l(this.value):0,L=l(this.units[0].unit.value),G=this.units[0].prefix;if(Q===0)return G;var ee=this.units[0].power,oe=Math.log(Q/Math.pow(G.value*L,ee))/Math.LN10-Z;if(oe>-2.200001&&oe<1.800001)return G;oe=Math.abs(oe);var fe=this.units[0].unit.prefixes;for(var de in fe)if(Ze(fe,de)){var Se=fe[de];if(Se.scientific){var _e=Math.abs(Math.log(Q/Math.pow(Se.value*L,ee))/Math.LN10-Z);(_e<oe||_e===oe&&Se.name.length<G.name.length)&&(G=Se,oe=_e)}}return G},w.prototype.splitUnit=function(Z){for(var Q=this.clone(),L=[],G=0;G<Z.length&&(Q=Q.to(Z[G]),G!==Z.length-1);G++){var ee=Q.toNumeric(),oe=c(ee),fe=void 0,de=h(oe,ee);de?fe=oe:fe=u(Q.toNumeric());var Se=new w(fe,Z[G].toString());L.push(Se),Q=i(Q,Se)}for(var _e=0,Pe=0;Pe<L.length;Pe++)_e=n(_e,L[Pe].value);return h(_e,this.value)&&(Q.value=0),L.push(Q),L};var O={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};O.SHORTLONG=An({},O.SHORT,O.LONG),O.BINARY_SHORT=An({},O.BINARY_SHORT_SI,O.BINARY_SHORT_IEC),O.BINARY_LONG=An({},O.BINARY_LONG_SI,O.BINARY_LONG_IEC);var ne=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],W={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var pe in W)Ze(W,pe)&&(W[pe].key=pe);var me={},ie={name:"",base:me,value:1,offset:0,dimensions:ne.map(Z=>0)},K={meter:{name:"meter",base:W.LENGTH,prefixes:O.LONG,value:1,offset:0},inch:{name:"inch",base:W.LENGTH,prefixes:O.NONE,value:.0254,offset:0},foot:{name:"foot",base:W.LENGTH,prefixes:O.NONE,value:.3048,offset:0},yard:{name:"yard",base:W.LENGTH,prefixes:O.NONE,value:.9144,offset:0},mile:{name:"mile",base:W.LENGTH,prefixes:O.NONE,value:1609.344,offset:0},link:{name:"link",base:W.LENGTH,prefixes:O.NONE,value:.201168,offset:0},rod:{name:"rod",base:W.LENGTH,prefixes:O.NONE,value:5.0292,offset:0},chain:{name:"chain",base:W.LENGTH,prefixes:O.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:W.LENGTH,prefixes:O.NONE,value:1e-10,offset:0},m:{name:"m",base:W.LENGTH,prefixes:O.SHORT,value:1,offset:0},in:{name:"in",base:W.LENGTH,prefixes:O.NONE,value:.0254,offset:0},ft:{name:"ft",base:W.LENGTH,prefixes:O.NONE,value:.3048,offset:0},yd:{name:"yd",base:W.LENGTH,prefixes:O.NONE,value:.9144,offset:0},mi:{name:"mi",base:W.LENGTH,prefixes:O.NONE,value:1609.344,offset:0},li:{name:"li",base:W.LENGTH,prefixes:O.NONE,value:.201168,offset:0},rd:{name:"rd",base:W.LENGTH,prefixes:O.NONE,value:5.02921,offset:0},ch:{name:"ch",base:W.LENGTH,prefixes:O.NONE,value:20.1168,offset:0},mil:{name:"mil",base:W.LENGTH,prefixes:O.NONE,value:254e-7,offset:0},m2:{name:"m2",base:W.SURFACE,prefixes:O.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:W.SURFACE,prefixes:O.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:W.SURFACE,prefixes:O.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:W.SURFACE,prefixes:O.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:W.SURFACE,prefixes:O.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:W.SURFACE,prefixes:O.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:W.SURFACE,prefixes:O.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:W.SURFACE,prefixes:O.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:W.SURFACE,prefixes:O.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:W.SURFACE,prefixes:O.NONE,value:1e4,offset:0},m3:{name:"m3",base:W.VOLUME,prefixes:O.CUBIC,value:1,offset:0},L:{name:"L",base:W.VOLUME,prefixes:O.SHORT,value:.001,offset:0},l:{name:"l",base:W.VOLUME,prefixes:O.SHORT,value:.001,offset:0},litre:{name:"litre",base:W.VOLUME,prefixes:O.LONG,value:.001,offset:0},cuin:{name:"cuin",base:W.VOLUME,prefixes:O.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:W.VOLUME,prefixes:O.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:W.VOLUME,prefixes:O.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:W.VOLUME,prefixes:O.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:W.VOLUME,prefixes:O.NONE,value:15e-6,offset:0},drop:{name:"drop",base:W.VOLUME,prefixes:O.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:W.VOLUME,prefixes:O.NONE,value:5e-8,offset:0},minim:{name:"minim",base:W.VOLUME,prefixes:O.NONE,value:61611519921875e-21,offset:0},fluiddram:{name:"fluiddram",base:W.VOLUME,prefixes:O.NONE,value:36966911953125e-19,offset:0},fluidounce:{name:"fluidounce",base:W.VOLUME,prefixes:O.NONE,value:295735295625e-16,offset:0},gill:{name:"gill",base:W.VOLUME,prefixes:O.NONE,value:.00011829411825,offset:0},cc:{name:"cc",base:W.VOLUME,prefixes:O.NONE,value:1e-6,offset:0},cup:{name:"cup",base:W.VOLUME,prefixes:O.NONE,value:.0002365882365,offset:0},pint:{name:"pint",base:W.VOLUME,prefixes:O.NONE,value:.000473176473,offset:0},quart:{name:"quart",base:W.VOLUME,prefixes:O.NONE,value:.000946352946,offset:0},gallon:{name:"gallon",base:W.VOLUME,prefixes:O.NONE,value:.003785411784,offset:0},beerbarrel:{name:"beerbarrel",base:W.VOLUME,prefixes:O.NONE,value:.117347765304,offset:0},oilbarrel:{name:"oilbarrel",base:W.VOLUME,prefixes:O.NONE,value:.158987294928,offset:0},hogshead:{name:"hogshead",base:W.VOLUME,prefixes:O.NONE,value:.238480942392,offset:0},g:{name:"g",base:W.MASS,prefixes:O.SHORT,value:.001,offset:0},gram:{name:"gram",base:W.MASS,prefixes:O.LONG,value:.001,offset:0},ton:{name:"ton",base:W.MASS,prefixes:O.SHORT,value:907.18474,offset:0},t:{name:"t",base:W.MASS,prefixes:O.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:W.MASS,prefixes:O.LONG,value:1e3,offset:0},grain:{name:"grain",base:W.MASS,prefixes:O.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:W.MASS,prefixes:O.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:W.MASS,prefixes:O.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:W.MASS,prefixes:O.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:W.MASS,prefixes:O.NONE,value:45.359237,offset:0},stick:{name:"stick",base:W.MASS,prefixes:O.NONE,value:.115,offset:0},stone:{name:"stone",base:W.MASS,prefixes:O.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:W.MASS,prefixes:O.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:W.MASS,prefixes:O.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:W.MASS,prefixes:O.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:W.MASS,prefixes:O.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:W.MASS,prefixes:O.NONE,value:45.359237,offset:0},s:{name:"s",base:W.TIME,prefixes:O.SHORT,value:1,offset:0},min:{name:"min",base:W.TIME,prefixes:O.NONE,value:60,offset:0},h:{name:"h",base:W.TIME,prefixes:O.NONE,value:3600,offset:0},second:{name:"second",base:W.TIME,prefixes:O.LONG,value:1,offset:0},sec:{name:"sec",base:W.TIME,prefixes:O.LONG,value:1,offset:0},minute:{name:"minute",base:W.TIME,prefixes:O.NONE,value:60,offset:0},hour:{name:"hour",base:W.TIME,prefixes:O.NONE,value:3600,offset:0},day:{name:"day",base:W.TIME,prefixes:O.NONE,value:86400,offset:0},week:{name:"week",base:W.TIME,prefixes:O.NONE,value:7*86400,offset:0},month:{name:"month",base:W.TIME,prefixes:O.NONE,value:2629800,offset:0},year:{name:"year",base:W.TIME,prefixes:O.NONE,value:31557600,offset:0},decade:{name:"decade",base:W.TIME,prefixes:O.NONE,value:315576e3,offset:0},century:{name:"century",base:W.TIME,prefixes:O.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:W.TIME,prefixes:O.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:W.FREQUENCY,prefixes:O.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:W.FREQUENCY,prefixes:O.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:W.ANGLE,prefixes:O.SHORT,value:1,offset:0},radian:{name:"radian",base:W.ANGLE,prefixes:O.LONG,value:1,offset:0},deg:{name:"deg",base:W.ANGLE,prefixes:O.SHORT,value:null,offset:0},degree:{name:"degree",base:W.ANGLE,prefixes:O.LONG,value:null,offset:0},grad:{name:"grad",base:W.ANGLE,prefixes:O.SHORT,value:null,offset:0},gradian:{name:"gradian",base:W.ANGLE,prefixes:O.LONG,value:null,offset:0},cycle:{name:"cycle",base:W.ANGLE,prefixes:O.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:W.ANGLE,prefixes:O.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:W.ANGLE,prefixes:O.NONE,value:null,offset:0},A:{name:"A",base:W.CURRENT,prefixes:O.SHORT,value:1,offset:0},ampere:{name:"ampere",base:W.CURRENT,prefixes:O.LONG,value:1,offset:0},K:{name:"K",base:W.TEMPERATURE,prefixes:O.SHORT,value:1,offset:0},degC:{name:"degC",base:W.TEMPERATURE,prefixes:O.SHORT,value:1,offset:273.15},degF:{name:"degF",base:W.TEMPERATURE,prefixes:O.SHORT,value:new v(5,9),offset:459.67},degR:{name:"degR",base:W.TEMPERATURE,prefixes:O.SHORT,value:new v(5,9),offset:0},kelvin:{name:"kelvin",base:W.TEMPERATURE,prefixes:O.LONG,value:1,offset:0},celsius:{name:"celsius",base:W.TEMPERATURE,prefixes:O.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:W.TEMPERATURE,prefixes:O.LONG,value:new v(5,9),offset:459.67},rankine:{name:"rankine",base:W.TEMPERATURE,prefixes:O.LONG,value:new v(5,9),offset:0},mol:{name:"mol",base:W.AMOUNT_OF_SUBSTANCE,prefixes:O.SHORT,value:1,offset:0},mole:{name:"mole",base:W.AMOUNT_OF_SUBSTANCE,prefixes:O.LONG,value:1,offset:0},cd:{name:"cd",base:W.LUMINOUS_INTENSITY,prefixes:O.SHORT,value:1,offset:0},candela:{name:"candela",base:W.LUMINOUS_INTENSITY,prefixes:O.LONG,value:1,offset:0},N:{name:"N",base:W.FORCE,prefixes:O.SHORT,value:1,offset:0},newton:{name:"newton",base:W.FORCE,prefixes:O.LONG,value:1,offset:0},dyn:{name:"dyn",base:W.FORCE,prefixes:O.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:W.FORCE,prefixes:O.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:W.FORCE,prefixes:O.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:W.FORCE,prefixes:O.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:W.FORCE,prefixes:O.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:W.FORCE,prefixes:O.NONE,value:9.80665,offset:0},J:{name:"J",base:W.ENERGY,prefixes:O.SHORT,value:1,offset:0},joule:{name:"joule",base:W.ENERGY,prefixes:O.LONG,value:1,offset:0},erg:{name:"erg",base:W.ENERGY,prefixes:O.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:W.ENERGY,prefixes:O.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:W.ENERGY,prefixes:O.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:W.ENERGY,prefixes:O.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:W.ENERGY,prefixes:O.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:W.POWER,prefixes:O.SHORT,value:1,offset:0},watt:{name:"watt",base:W.POWER,prefixes:O.LONG,value:1,offset:0},hp:{name:"hp",base:W.POWER,prefixes:O.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:W.POWER,prefixes:O.SHORT,value:g.I,offset:0},VA:{name:"VA",base:W.POWER,prefixes:O.SHORT,value:1,offset:0},Pa:{name:"Pa",base:W.PRESSURE,prefixes:O.SHORT,value:1,offset:0},psi:{name:"psi",base:W.PRESSURE,prefixes:O.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:W.PRESSURE,prefixes:O.NONE,value:101325,offset:0},bar:{name:"bar",base:W.PRESSURE,prefixes:O.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:W.PRESSURE,prefixes:O.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:W.PRESSURE,prefixes:O.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:W.PRESSURE,prefixes:O.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:W.PRESSURE,prefixes:O.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:W.ELECTRIC_CHARGE,prefixes:O.LONG,value:1,offset:0},C:{name:"C",base:W.ELECTRIC_CHARGE,prefixes:O.SHORT,value:1,offset:0},farad:{name:"farad",base:W.ELECTRIC_CAPACITANCE,prefixes:O.LONG,value:1,offset:0},F:{name:"F",base:W.ELECTRIC_CAPACITANCE,prefixes:O.SHORT,value:1,offset:0},volt:{name:"volt",base:W.ELECTRIC_POTENTIAL,prefixes:O.LONG,value:1,offset:0},V:{name:"V",base:W.ELECTRIC_POTENTIAL,prefixes:O.SHORT,value:1,offset:0},ohm:{name:"ohm",base:W.ELECTRIC_RESISTANCE,prefixes:O.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:W.ELECTRIC_INDUCTANCE,prefixes:O.LONG,value:1,offset:0},H:{name:"H",base:W.ELECTRIC_INDUCTANCE,prefixes:O.SHORT,value:1,offset:0},siemens:{name:"siemens",base:W.ELECTRIC_CONDUCTANCE,prefixes:O.LONG,value:1,offset:0},S:{name:"S",base:W.ELECTRIC_CONDUCTANCE,prefixes:O.SHORT,value:1,offset:0},weber:{name:"weber",base:W.MAGNETIC_FLUX,prefixes:O.LONG,value:1,offset:0},Wb:{name:"Wb",base:W.MAGNETIC_FLUX,prefixes:O.SHORT,value:1,offset:0},tesla:{name:"tesla",base:W.MAGNETIC_FLUX_DENSITY,prefixes:O.LONG,value:1,offset:0},T:{name:"T",base:W.MAGNETIC_FLUX_DENSITY,prefixes:O.SHORT,value:1,offset:0},b:{name:"b",base:W.BIT,prefixes:O.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:W.BIT,prefixes:O.BINARY_LONG,value:1,offset:0},B:{name:"B",base:W.BIT,prefixes:O.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:W.BIT,prefixes:O.BINARY_LONG,value:8,offset:0}},ae={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fldr:"fluiddram",fluiddrams:"fluiddram",floz:"fluidounce",fluidounces:"fluidounce",gi:"gill",gills:"gill",cp:"cup",cups:"cup",pt:"pint",pints:"pint",qt:"quart",quarts:"quart",gal:"gallon",gallons:"gallon",bbl:"beerbarrel",beerbarrels:"beerbarrel",obl:"oilbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function ge(Z){if(Z.number==="BigNumber"){var Q=ZF(b);K.rad.value=new b(1),K.deg.value=Q.div(180),K.grad.value=Q.div(200),K.cycle.value=Q.times(2),K.arcsec.value=Q.div(648e3),K.arcmin.value=Q.div(10800)}else K.rad.value=1,K.deg.value=Math.PI/180,K.grad.value=Math.PI/200,K.cycle.value=Math.PI*2,K.arcsec.value=Math.PI/648e3,K.arcmin.value=Math.PI/10800;K.radian.value=K.rad.value,K.degree.value=K.deg.value,K.gradian.value=K.grad.value}ge(t),e&&e("config",function(Z,Q){Z.number!==Q.number&&ge(Z)});var he={si:{NONE:{unit:ie,prefix:O.NONE[""]},LENGTH:{unit:K.m,prefix:O.SHORT[""]},MASS:{unit:K.g,prefix:O.SHORT.k},TIME:{unit:K.s,prefix:O.SHORT[""]},CURRENT:{unit:K.A,prefix:O.SHORT[""]},TEMPERATURE:{unit:K.K,prefix:O.SHORT[""]},LUMINOUS_INTENSITY:{unit:K.cd,prefix:O.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:K.mol,prefix:O.SHORT[""]},ANGLE:{unit:K.rad,prefix:O.SHORT[""]},BIT:{unit:K.bits,prefix:O.SHORT[""]},FORCE:{unit:K.N,prefix:O.SHORT[""]},ENERGY:{unit:K.J,prefix:O.SHORT[""]},POWER:{unit:K.W,prefix:O.SHORT[""]},PRESSURE:{unit:K.Pa,prefix:O.SHORT[""]},ELECTRIC_CHARGE:{unit:K.C,prefix:O.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:K.F,prefix:O.SHORT[""]},ELECTRIC_POTENTIAL:{unit:K.V,prefix:O.SHORT[""]},ELECTRIC_RESISTANCE:{unit:K.ohm,prefix:O.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:K.H,prefix:O.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:K.S,prefix:O.SHORT[""]},MAGNETIC_FLUX:{unit:K.Wb,prefix:O.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:K.T,prefix:O.SHORT[""]},FREQUENCY:{unit:K.Hz,prefix:O.SHORT[""]}}};he.cgs=JSON.parse(JSON.stringify(he.si)),he.cgs.LENGTH={unit:K.m,prefix:O.SHORT.c},he.cgs.MASS={unit:K.g,prefix:O.SHORT[""]},he.cgs.FORCE={unit:K.dyn,prefix:O.SHORT[""]},he.cgs.ENERGY={unit:K.erg,prefix:O.NONE[""]},he.us=JSON.parse(JSON.stringify(he.si)),he.us.LENGTH={unit:K.ft,prefix:O.NONE[""]},he.us.MASS={unit:K.lbm,prefix:O.NONE[""]},he.us.TEMPERATURE={unit:K.degF,prefix:O.NONE[""]},he.us.FORCE={unit:K.lbf,prefix:O.NONE[""]},he.us.ENERGY={unit:K.BTU,prefix:O.BTU[""]},he.us.POWER={unit:K.hp,prefix:O.NONE[""]},he.us.PRESSURE={unit:K.psi,prefix:O.NONE[""]},he.auto=JSON.parse(JSON.stringify(he.si));var be=he.auto;w.setUnitSystem=function(Z){if(Ze(he,Z))be=he[Z];else throw new Error("Unit system "+Z+" does not exist. Choices are: "+Object.keys(he).join(", "))},w.getUnitSystem=function(){for(var Z in he)if(Ze(he,Z)&&he[Z]===be)return Z},w.typeConverters={BigNumber:function(Q){return Q!=null&&Q.isFraction?new b(String(Q.n)).div(String(Q.d)).times(String(Q.s)):new b(Q+"")},Fraction:function(Q){return new v(Q)},Complex:function(Q){return Q},number:function(Q){return Q!=null&&Q.isFraction?p(Q):Q}},w.prototype._numberConverter=function(){var Z=w.typeConverters[this.valueType()];if(Z)return Z;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},w._getNumberConverter=function(Z){if(!w.typeConverters[Z])throw new TypeError('Unsupported type "'+Z+'"');return w.typeConverters[Z]};for(var ve in K)if(Ze(K,ve)){var Ie=K[ve];Ie.dimensions=Ie.base.dimensions}for(var Ve in ae)if(Ze(ae,Ve)){var We=K[ae[Ve]],Be={};for(var $e in We)Ze(We,$e)&&(Be[$e]=We[$e]);Be.name=Ve,K[Ve]=Be}w.isValidAlpha=function(Q){return/^[a-zA-Z]$/.test(Q)};function Ge(Z){for(var Q=0;Q<Z.length;Q++){if(E=Z.charAt(Q),Q===0&&!w.isValidAlpha(E))throw new Error('Invalid unit name (must begin with alpha character): "'+Z+'"');if(Q>0&&!(w.isValidAlpha(E)||D(E)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+Z+'"')}}return w.createUnit=function(Z,Q){if(typeof Z!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(Q&&Q.override){for(var L in Z)if(Ze(Z,L)&&w.deleteUnit(L),Z[L].aliases)for(var G=0;G<Z[L].aliases.length;G++)w.deleteUnit(Z[L].aliases[G])}var ee;for(var oe in Z)Ze(Z,oe)&&(ee=w.createUnitSingle(oe,Z[oe]));return ee},w.createUnitSingle=function(Z,Q){if((typeof Q>"u"||Q===null)&&(Q={}),typeof Z!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(Ze(K,Z))throw new Error('Cannot create unit "'+Z+'": a unit with that name already exists');Ge(Z);var L=null,G=[],ee=0,oe,fe,de;if(Q&&Q.type==="Unit")L=Q.clone();else if(typeof Q=="string")Q!==""&&(oe=Q);else if(typeof Q=="object")oe=Q.definition,fe=Q.prefixes,ee=Q.offset,de=Q.baseName,Q.aliases&&(G=Q.aliases.valueOf());else throw new TypeError('Cannot create unit "'+Z+'" from "'+Q.toString()+'": expecting "string" or "Unit" or "Object"');if(G){for(var Se=0;Se<G.length;Se++)if(Ze(K,G[Se]))throw new Error('Cannot create alias "'+G[Se]+'": a unit with that name already exists')}if(oe&&typeof oe=="string"&&!L)try{L=w.parse(oe,{allowNoUnits:!0})}catch(ut){throw ut.message='Could not create unit "'+Z+'" from "'+oe+'": '+ut.message,ut}else oe&&oe.type==="Unit"&&(L=oe.clone());G=G||[],ee=ee||0,fe&&fe.toUpperCase?fe=O[fe.toUpperCase()]||O.NONE:fe=O.NONE;var _e={};if(L){_e={name:Z,value:L.value,dimensions:L.dimensions.slice(0),prefixes:fe,offset:ee};var bt=!1;for(var Lt in W)if(Ze(W,Lt)){for(var rt=!0,pr=0;pr<ne.length;pr++)if(Math.abs((_e.dimensions[pr]||0)-(W[Lt].dimensions[pr]||0))>1e-12){rt=!1;break}if(rt){bt=!0,_e.base=W[Lt];break}}if(!bt){de=de||Z+"_STUFF";var B={dimensions:L.dimensions.slice(0)};B.key=de,W[de]=B,be[de]={unit:_e,prefix:O.NONE[""]},_e.base=W[de]}}else{if(de=de||Z+"_STUFF",ne.indexOf(de)>=0)throw new Error('Cannot create new base unit "'+Z+'": a base unit with that name already exists (and cannot be overridden)');ne.push(de);for(var Pe in W)Ze(W,Pe)&&(W[Pe].dimensions[ne.length-1]=0);for(var Ee={dimensions:[]},qe=0;qe<ne.length;qe++)Ee.dimensions[qe]=0;Ee.dimensions[ne.length-1]=1,Ee.key=de,W[de]=Ee,_e={name:Z,value:1,dimensions:W[de].dimensions.slice(0),prefixes:fe,offset:ee,base:W[de]},be[de]={unit:_e,prefix:O.NONE[""]}}w.UNITS[Z]=_e;for(var le=0;le<G.length;le++){var we=G[le],Me={};for(var ze in _e)Ze(_e,ze)&&(Me[ze]=_e[ze]);Me.name=we,w.UNITS[we]=Me}return delete z.cache,new w(null,Z)},w.deleteUnit=function(Z){delete w.UNITS[Z],delete z.cache},w.PREFIXES=O,w.BASE_DIMENSIONS=ne,w.BASE_UNITS=W,w.UNIT_SYSTEMS=he,w.UNITS=K,w},{isClass:!0}),SV="unit",bAe=["typed","Unit"],wAe=Y(SV,bAe,r=>{var{typed:e,Unit:t}=r;return e(SV,{Unit:function(i){return i.clone()},string:function(i){return t.isValuelessUnit(i)?new t(null,i):t.parse(i,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(i,s){return new t(i,s)},"number | BigNumber | Fraction":function(i){return new t(i)},"Array | Matrix":e.referToSelf(n=>i=>At(i,n))})}),TV="sparse",xAe=["typed","SparseMatrix"],_Ae=Y(TV,xAe,r=>{var{typed:e,SparseMatrix:t}=r;return e(TV,{"":function(){return new t([])},string:function(i){return new t([],i)},"Array | Matrix":function(i){return new t(i)},"Array | Matrix, string":function(i,s){return new t(i,s)}})}),CV="createUnit",AAe=["typed","Unit"],EAe=Y(CV,AAe,r=>{var{typed:e,Unit:t}=r;return e(CV,{"Object, Object":function(i,s){return t.createUnit(i,s)},Object:function(i){return t.createUnit(i,{})},"string, Unit | string | Object, Object":function(i,s,a){var o={};return o[i]=s,t.createUnit(o,a)},"string, Unit | string | Object":function(i,s){var a={};return a[i]=s,t.createUnit(a,{})},string:function(i){var s={};return s[i]={},t.createUnit(s,{})}})}),NV="acos",SAe=["typed","config","Complex"],TAe=Y(NV,SAe,r=>{var{typed:e,config:t,Complex:n}=r;return e(NV,{number:function(s){return s>=-1&&s<=1||t.predictable?Math.acos(s):new n(s,0).acos()},Complex:function(s){return s.acos()},BigNumber:function(s){return s.acos()}})}),DV="acosh",CAe=["typed","config","Complex"],NAe=Y(DV,CAe,r=>{var{typed:e,config:t,Complex:n}=r;return e(DV,{number:function(s){return s>=1||t.predictable?SX(s):s<=-1?new n(Math.log(Math.sqrt(s*s-1)-s),Math.PI):new n(s,0).acosh()},Complex:function(s){return s.acosh()},BigNumber:function(s){return s.acosh()}})}),MV="acot",DAe=["typed","BigNumber"],MAe=Y(MV,DAe,r=>{var{typed:e,BigNumber:t}=r;return e(MV,{number:TX,Complex:function(i){return i.acot()},BigNumber:function(i){return new t(1).div(i).atan()}})}),IV="acoth",IAe=["typed","config","Complex","BigNumber"],PAe=Y(IV,IAe,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(IV,{number:function(a){return a>=1||a<=-1||t.predictable?CX(a):new n(a,0).acoth()},Complex:function(a){return a.acoth()},BigNumber:function(a){return new i(1).div(a).atanh()}})}),PV="acsc",RAe=["typed","config","Complex","BigNumber"],kAe=Y(PV,RAe,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(PV,{number:function(a){return a<=-1||a>=1||t.predictable?NX(a):new n(a,0).acsc()},Complex:function(a){return a.acsc()},BigNumber:function(a){return new i(1).div(a).asin()}})}),RV="acsch",FAe=["typed","BigNumber"],OAe=Y(RV,FAe,r=>{var{typed:e,BigNumber:t}=r;return e(RV,{number:DX,Complex:function(i){return i.acsch()},BigNumber:function(i){return new t(1).div(i).asinh()}})}),kV="asec",BAe=["typed","config","Complex","BigNumber"],LAe=Y(kV,BAe,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(kV,{number:function(a){return a<=-1||a>=1||t.predictable?MX(a):new n(a,0).asec()},Complex:function(a){return a.asec()},BigNumber:function(a){return new i(1).div(a).acos()}})}),FV="asech",$Ae=["typed","config","Complex","BigNumber"],VAe=Y(FV,$Ae,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(FV,{number:function(a){if(a<=1&&a>=-1||t.predictable){var o=1/a;if(o>0||t.predictable)return IX(a);var l=Math.sqrt(o*o-1);return new n(Math.log(l-o),Math.PI)}return new n(a,0).asech()},Complex:function(a){return a.asech()},BigNumber:function(a){return new i(1).div(a).acosh()}})}),OV="asin",UAe=["typed","config","Complex"],zAe=Y(OV,UAe,r=>{var{typed:e,config:t,Complex:n}=r;return e(OV,{number:function(s){return s>=-1&&s<=1||t.predictable?Math.asin(s):new n(s,0).asin()},Complex:function(s){return s.asin()},BigNumber:function(s){return s.asin()}})}),jAe="asinh",qAe=["typed"],HAe=Y(jAe,qAe,r=>{var{typed:e}=r;return e("asinh",{number:PX,Complex:function(n){return n.asinh()},BigNumber:function(n){return n.asinh()}})}),GAe="atan",WAe=["typed"],KAe=Y(GAe,WAe,r=>{var{typed:e}=r;return e("atan",{number:function(n){return Math.atan(n)},Complex:function(n){return n.atan()},BigNumber:function(n){return n.atan()}})}),BV="atan2",XAe=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],YAe=Y(BV,XAe,r=>{var{typed:e,matrix:t,equalScalar:n,BigNumber:i,DenseMatrix:s,concat:a}=r,o=nl({typed:e,equalScalar:n}),l=ss({typed:e}),u=WX({typed:e,equalScalar:n}),c=Bi({typed:e,equalScalar:n}),h=Yn({typed:e,DenseMatrix:s}),d=Ar({typed:e,matrix:t,concat:a});return e(BV,{"number, number":Math.atan2,"BigNumber, BigNumber":(f,p)=>i.atan2(f,p)},d({scalar:"number | BigNumber",SS:u,DS:l,SD:o,Ss:c,sS:h}))}),LV="atanh",QAe=["typed","config","Complex"],JAe=Y(LV,QAe,r=>{var{typed:e,config:t,Complex:n}=r;return e(LV,{number:function(s){return s<=1&&s>=-1||t.predictable?RX(s):new n(s,0).atanh()},Complex:function(s){return s.atanh()},BigNumber:function(s){return s.atanh()}})}),oy=Y("trigUnit",["typed"],r=>{var{typed:e}=r;return{Unit:e.referToSelf(t=>n=>{if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(t,n.valueType())(n.value)})}}),$V="cos",ZAe=["typed"],eEe=Y($V,ZAe,r=>{var{typed:e}=r,t=oy({typed:e});return e($V,{number:Math.cos,"Complex | BigNumber":n=>n.cos()},t)}),VV="cosh",tEe=["typed"],rEe=Y(VV,tEe,r=>{var{typed:e}=r;return e(VV,{number:Hge,"Complex | BigNumber":t=>t.cosh()})}),UV="cot",nEe=["typed","BigNumber"],iEe=Y(UV,nEe,r=>{var{typed:e,BigNumber:t}=r,n=oy({typed:e});return e(UV,{number:kX,Complex:i=>i.cot(),BigNumber:i=>new t(1).div(i.tan())},n)}),zV="coth",sEe=["typed","BigNumber"],aEe=Y(zV,sEe,r=>{var{typed:e,BigNumber:t}=r;return e(zV,{number:FX,Complex:n=>n.coth(),BigNumber:n=>new t(1).div(n.tanh())})}),jV="csc",oEe=["typed","BigNumber"],lEe=Y(jV,oEe,r=>{var{typed:e,BigNumber:t}=r,n=oy({typed:e});return e(jV,{number:OX,Complex:i=>i.csc(),BigNumber:i=>new t(1).div(i.sin())},n)}),qV="csch",uEe=["typed","BigNumber"],cEe=Y(qV,uEe,r=>{var{typed:e,BigNumber:t}=r;return e(qV,{number:BX,Complex:n=>n.csch(),BigNumber:n=>new t(1).div(n.sinh())})}),HV="sec",hEe=["typed","BigNumber"],dEe=Y(HV,hEe,r=>{var{typed:e,BigNumber:t}=r,n=oy({typed:e});return e(HV,{number:LX,Complex:i=>i.sec(),BigNumber:i=>new t(1).div(i.cos())},n)}),GV="sech",fEe=["typed","BigNumber"],mEe=Y(GV,fEe,r=>{var{typed:e,BigNumber:t}=r;return e(GV,{number:$X,Complex:n=>n.sech(),BigNumber:n=>new t(1).div(n.cosh())})}),WV="sin",pEe=["typed"],gEe=Y(WV,pEe,r=>{var{typed:e}=r,t=oy({typed:e});return e(WV,{number:Math.sin,"Complex | BigNumber":n=>n.sin()},t)}),KV="sinh",vEe=["typed"],yEe=Y(KV,vEe,r=>{var{typed:e}=r;return e(KV,{number:VX,"Complex | BigNumber":t=>t.sinh()})}),XV="tan",bEe=["typed"],wEe=Y(XV,bEe,r=>{var{typed:e}=r,t=oy({typed:e});return e(XV,{number:Math.tan,"Complex | BigNumber":n=>n.tan()},t)}),xEe="tanh",_Ee=["typed"],AEe=Y(xEe,_Ee,r=>{var{typed:e}=r;return e("tanh",{number:Wge,"Complex | BigNumber":t=>t.tanh()})}),YV="setCartesian",EEe=["typed","size","subset","compareNatural","Index","DenseMatrix"],SEe=Y(YV,EEe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:s,DenseMatrix:a}=r;return e(YV,{"Array | Matrix, Array | Matrix":function(l,u){var c=[];if(n(t(l),new s(0))!==0&&n(t(u),new s(0))!==0){var h=Yt(Array.isArray(l)?l:l.toArray()).sort(i),d=Yt(Array.isArray(u)?u:u.toArray()).sort(i);c=[];for(var f=0;f<h.length;f++)for(var p=0;p<d.length;p++)c.push([h[f],d[p]])}return Array.isArray(l)&&Array.isArray(u)?c:new a(c)}})}),QV="setDifference",TEe=["typed","size","subset","compareNatural","Index","DenseMatrix"],CEe=Y(QV,TEe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:s,DenseMatrix:a}=r;return e(QV,{"Array | Matrix, Array | Matrix":function(l,u){var c;if(n(t(l),new s(0))===0)c=[];else{if(n(t(u),new s(0))===0)return Yt(l.toArray());var h=F0(Yt(Array.isArray(l)?l:l.toArray()).sort(i)),d=F0(Yt(Array.isArray(u)?u:u.toArray()).sort(i));c=[];for(var f,p=0;p<h.length;p++){f=!1;for(var g=0;g<d.length;g++)if(i(h[p].value,d[g].value)===0&&h[p].identifier===d[g].identifier){f=!0;break}f||c.push(h[p])}}return Array.isArray(l)&&Array.isArray(u)?bT(c):new a(bT(c))}})}),JV="setDistinct",NEe=["typed","size","subset","compareNatural","Index","DenseMatrix"],DEe=Y(JV,NEe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:s,DenseMatrix:a}=r;return e(JV,{"Array | Matrix":function(l){var u;if(n(t(l),new s(0))===0)u=[];else{var c=Yt(Array.isArray(l)?l:l.toArray()).sort(i);u=[],u.push(c[0]);for(var h=1;h<c.length;h++)i(c[h],c[h-1])!==0&&u.push(c[h])}return Array.isArray(l)?u:new a(u)}})}),ZV="setIntersect",MEe=["typed","size","subset","compareNatural","Index","DenseMatrix"],IEe=Y(ZV,MEe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:s,DenseMatrix:a}=r;return e(ZV,{"Array | Matrix, Array | Matrix":function(l,u){var c;if(n(t(l),new s(0))===0||n(t(u),new s(0))===0)c=[];else{var h=F0(Yt(Array.isArray(l)?l:l.toArray()).sort(i)),d=F0(Yt(Array.isArray(u)?u:u.toArray()).sort(i));c=[];for(var f=0;f<h.length;f++)for(var p=0;p<d.length;p++)if(i(h[f].value,d[p].value)===0&&h[f].identifier===d[p].identifier){c.push(h[f]);break}}return Array.isArray(l)&&Array.isArray(u)?bT(c):new a(bT(c))}})}),e8="setIsSubset",PEe=["typed","size","subset","compareNatural","Index"],REe=Y(e8,PEe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:s}=r;return e(e8,{"Array | Matrix, Array | Matrix":function(o,l){if(n(t(o),new s(0))===0)return!0;if(n(t(l),new s(0))===0)return!1;for(var u=F0(Yt(Array.isArray(o)?o:o.toArray()).sort(i)),c=F0(Yt(Array.isArray(l)?l:l.toArray()).sort(i)),h,d=0;d<u.length;d++){h=!1;for(var f=0;f<c.length;f++)if(i(u[d].value,c[f].value)===0&&u[d].identifier===c[f].identifier){h=!0;break}if(h===!1)return!1}return!0}})}),t8="setMultiplicity",kEe=["typed","size","subset","compareNatural","Index"],FEe=Y(t8,kEe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:s}=r;return e(t8,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(o,l){if(n(t(l),new s(0))===0)return 0;for(var u=Yt(Array.isArray(l)?l:l.toArray()),c=0,h=0;h<u.length;h++)i(u[h],o)===0&&c++;return c}})}),r8="setPowerset",OEe=["typed","size","subset","compareNatural","Index"],BEe=Y(r8,OEe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:s}=r;return e(r8,{"Array | Matrix":function(u){if(n(t(u),new s(0))===0)return[];for(var c=Yt(Array.isArray(u)?u:u.toArray()).sort(i),h=[],d=0;d.toString(2).length<=c.length;)h.push(a(c,d.toString(2).split("").reverse())),d++;return o(h)}});function a(l,u){for(var c=[],h=0;h<u.length;h++)u[h]==="1"&&c.push(l[h]);return c}function o(l){for(var u=[],c=l.length-1;c>0;c--)for(var h=0;h<c;h++)l[h].length>l[h+1].length&&(u=l[h],l[h]=l[h+1],l[h+1]=u);return l}}),n8="setSize",LEe=["typed","compareNatural"],$Ee=Y(n8,LEe,r=>{var{typed:e,compareNatural:t}=r;return e(n8,{"Array | Matrix":function(i){return Array.isArray(i)?Yt(i).length:Yt(i.toArray()).length},"Array | Matrix, boolean":function(i,s){if(s===!1||i.length===0)return Array.isArray(i)?Yt(i).length:Yt(i.toArray()).length;for(var a=Yt(Array.isArray(i)?i:i.toArray()).sort(t),o=1,l=1;l<a.length;l++)t(a[l],a[l-1])!==0&&o++;return o}})}),i8="setSymDifference",VEe=["typed","size","concat","subset","setDifference","Index"],UEe=Y(i8,VEe,r=>{var{typed:e,size:t,concat:n,subset:i,setDifference:s,Index:a}=r;return e(i8,{"Array | Matrix, Array | Matrix":function(l,u){if(i(t(l),new a(0))===0)return Yt(u);if(i(t(u),new a(0))===0)return Yt(l);var c=Yt(l),h=Yt(u);return n(s(c,h),s(h,c))}})}),s8="setUnion",zEe=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],jEe=Y(s8,zEe,r=>{var{typed:e,size:t,concat:n,subset:i,setIntersect:s,setSymDifference:a,Index:o}=r;return e(s8,{"Array | Matrix, Array | Matrix":function(u,c){if(i(t(u),new o(0))===0)return Yt(c);if(i(t(c),new o(0))===0)return Yt(u);var h=Yt(u),d=Yt(c);return n(a(h,d),s(h,d))}})}),a8="add",qEe=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],HEe=Y(a8,qEe,r=>{var{typed:e,matrix:t,addScalar:n,equalScalar:i,DenseMatrix:s,SparseMatrix:a,concat:o}=r,l=jd({typed:e}),u=WF({typed:e,equalScalar:i}),c=_p({typed:e,DenseMatrix:s}),h=Ar({typed:e,matrix:t,concat:o});return e(a8,{"any, any":n,"any, any, ...any":e.referToSelf(d=>(f,p,g)=>{for(var b=d(f,p),v=0;v<g.length;v++)b=d(b,g[v]);return b})},h({elop:n,DS:l,SS:u,Ss:c}))}),o8="hypot",GEe=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],WEe=Y(o8,GEe,r=>{var{typed:e,abs:t,addScalar:n,divideScalar:i,multiplyScalar:s,sqrt:a,smaller:o,isPositive:l}=r;return e(o8,{"... number | BigNumber":u,Array:u,Matrix:c=>u(Yt(c.toArray(),!0))});function u(c){for(var h=0,d=0,f=0;f<c.length;f++){if(cc(c[f]))throw new TypeError("Unexpected type of argument to hypot");var p=t(c[f]);o(d,p)?(h=s(h,s(i(d,p),i(d,p))),h=n(h,1),d=p):h=n(h,l(p)?s(i(p,d),i(p,d)):p)}return s(d,a(h))}}),l8="norm",KEe=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],XEe=Y(l8,KEe,r=>{var{typed:e,abs:t,add:n,pow:i,conj:s,sqrt:a,multiply:o,equalScalar:l,larger:u,smaller:c,matrix:h,ctranspose:d,eigs:f}=r;return e(l8,{number:Math.abs,Complex:function(E){return E.abs()},BigNumber:function(E){return E.abs()},boolean:function(E){return Math.abs(E)},Array:function(E){return _(h(E),2)},Matrix:function(E){return _(E,2)},"Array, number | BigNumber | string":function(E,C){return _(h(E),C)},"Matrix, number | BigNumber | string":function(E,C){return _(E,C)}});function p(S){var E=0;return S.forEach(function(C){var N=t(C);u(N,E)&&(E=N)},!0),E}function g(S){var E;return S.forEach(function(C){var N=t(C);(!E||c(N,E))&&(E=N)},!0),E||0}function b(S,E){if(E===Number.POSITIVE_INFINITY||E==="inf")return p(S);if(E===Number.NEGATIVE_INFINITY||E==="-inf")return g(S);if(E==="fro")return _(S,2);if(typeof E=="number"&&!isNaN(E)){if(!l(E,0)){var C=0;return S.forEach(function(N){C=n(i(t(N),E),C)},!0),i(C,1/E)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function v(S){var E=0;return S.forEach(function(C,N){E=n(E,o(C,s(C)))}),t(a(E))}function x(S){var E=[],C=0;return S.forEach(function(N,D){var M=D[1],I=n(E[M]||0,t(N));u(I,C)&&(C=I),E[M]=I},!0),C}function y(S){var E=S.size();if(E[0]!==E[1])throw new RangeError("Invalid matrix dimensions");var C=d(S),N=o(C,S),D=f(N).values.toArray(),M=D[D.length-1];return t(a(M))}function A(S){var E=[],C=0;return S.forEach(function(N,D){var M=D[0],I=n(E[M]||0,t(N));u(I,C)&&(C=I),E[M]=I},!0),C}function w(S,E){if(E===1)return x(S);if(E===Number.POSITIVE_INFINITY||E==="inf")return A(S);if(E==="fro")return v(S);if(E===2)return y(S);throw new Error("Unsupported parameter value "+E)}function _(S,E){var C=S.size();if(C.length===1)return b(S,E);if(C.length===2){if(C[0]&&C[1])return w(S,E);throw new RangeError("Invalid matrix dimensions")}}}),u8="dot",YEe=["typed","addScalar","multiplyScalar","conj","size"],QEe=Y(u8,YEe,r=>{var{typed:e,addScalar:t,multiplyScalar:n,conj:i,size:s}=r;return e(u8,{"Array | DenseMatrix, Array | DenseMatrix":o,"SparseMatrix, SparseMatrix":l});function a(u,c){var h=s(u),d=s(c),f,p;if(h.length===1)f=h[0];else if(h.length===2&&h[1]===1)f=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(d.length===1)p=d[0];else if(d.length===2&&d[1]===1)p=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(f!==p)throw new RangeError("Vectors must have equal length ("+f+" != "+p+")");if(f===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return f}function o(u,c){var h=a(u,c),d=lt(u)?u._data:u,f=lt(u)?u._datatype||u.getDataType():void 0,p=lt(c)?c._data:c,g=lt(c)?c._datatype||c.getDataType():void 0,b=s(u).length===2,v=s(c).length===2,x=t,y=n;if(f&&g&&f===g&&typeof f=="string"&&f!=="mixed"){var A=f;x=e.find(t,[A,A]),y=e.find(n,[A,A])}if(!b&&!v){for(var w=y(i(d[0]),p[0]),_=1;_<h;_++)w=x(w,y(i(d[_]),p[_]));return w}if(!b&&v){for(var S=y(i(d[0]),p[0][0]),E=1;E<h;E++)S=x(S,y(i(d[E]),p[E][0]));return S}if(b&&!v){for(var C=y(i(d[0][0]),p[0]),N=1;N<h;N++)C=x(C,y(i(d[N][0]),p[N]));return C}if(b&&v){for(var D=y(i(d[0][0]),p[0][0]),M=1;M<h;M++)D=x(D,y(i(d[M][0]),p[M][0]));return D}}function l(u,c){a(u,c);for(var h=u._index,d=u._values,f=c._index,p=c._values,g=0,b=t,v=n,x=0,y=0;x<h.length&&y<f.length;){var A=h[x],w=f[y];if(A<w){x++;continue}if(A>w){y++;continue}A===w&&(g=b(g,v(d[x],p[y])),x++,y++)}return g}}),JEe="trace",ZEe=["typed","matrix","add"],eSe=Y(JEe,ZEe,r=>{var{typed:e,matrix:t,add:n}=r;return e("trace",{Array:function(o){return i(t(o))},SparseMatrix:s,DenseMatrix:i,any:gt});function i(a){var o=a._size,l=a._data;switch(o.length){case 1:if(o[0]===1)return gt(l[0]);throw new RangeError("Matrix must be square (size: "+Pt(o)+")");case 2:{var u=o[0],c=o[1];if(u===c){for(var h=0,d=0;d<u;d++)h=n(h,l[d][d]);return h}else throw new RangeError("Matrix must be square (size: "+Pt(o)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Pt(o)+")")}}function s(a){var o=a._values,l=a._index,u=a._ptr,c=a._size,h=c[0],d=c[1];if(h===d){var f=0;if(o.length>0)for(var p=0;p<d;p++)for(var g=u[p],b=u[p+1],v=g;v<b;v++){var x=l[v];if(x===p){f=n(f,o[v]);break}if(x>p)break}return f}throw new RangeError("Matrix must be square (size: "+Pt(c)+")")}}),c8="index",tSe=["typed","Index"],rSe=Y(c8,tSe,r=>{var{typed:e,Index:t}=r;return e(c8,{"...number | string | BigNumber | Range | Array | Matrix":function(i){var s=i.map(function(o){return _t(o)?o.toNumber():cr(o)||lt(o)?o.map(function(l){return _t(l)?l.toNumber():l}):o}),a=new t;return t.apply(a,s),a}})}),fY=new Set(["end"]),nSe="Node",iSe=["mathWithTransform"],sSe=Y(nSe,iSe,r=>{var{mathWithTransform:e}=r;function t(i){for(var s of[...fY])if(i.has(s))throw new Error('Scope contains an illegal symbol, "'+s+'" is a reserved keyword')}class n{get type(){return"Node"}get isNode(){return!0}evaluate(s){return this.compile().evaluate(s)}compile(){var s=this._compile(e,{}),a={},o=null;function l(u){var c=zg(u);return t(c),s(c,a,o)}return{evaluate:l}}_compile(s,a){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(s){throw new Error("Cannot run forEach on a Node interface")}map(s){throw new Error("Cannot run map on a Node interface")}_ifNode(s){if(!sr(s))throw new TypeError("Callback function must return a Node");return s}traverse(s){s(this,null,null);function a(o,l){o.forEach(function(u,c,h){l(u,c,h),a(u,l)})}a(this,s)}transform(s){function a(o,l,u){var c=s(o,l,u);return c!==o?c:o.map(a)}return a(this,null,null)}filter(s){var a=[];return this.traverse(function(o,l,u){s(o,l,u)&&a.push(o)}),a}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(s){return s.cloneDeep()})}equals(s){return s?this.type===s.type&&Nc(this,s):!1}toString(s){var a=this._getCustomString(s);return typeof a<"u"?a:this._toString(s)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(s){var a=this._getCustomString(s);return typeof a<"u"?a:this._toHTML(s)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(s){var a=this._getCustomString(s);return typeof a<"u"?a:this._toTex(s)}_toTex(s){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(s){if(s&&typeof s=="object")switch(typeof s.handler){case"object":case"undefined":return;case"function":return s.handler(this,s);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return n},{isClass:!0,isNode:!0});function Ds(r){return r&&r.isIndexError?new tl(r.index+1,r.min+1,r.max!==void 0?r.max+1:void 0):r}function mY(r){var{subset:e}=r;return function(n,i){try{if(Array.isArray(n))return e(n,i);if(n&&typeof n.subset=="function")return n.subset(i);if(typeof n=="string")return e(n,i);if(typeof n=="object"){if(!i.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return xs(n,i.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(s){throw Ds(s)}}}var CA="AccessorNode",aSe=["subset","Node"],oSe=Y(CA,aSe,r=>{var{subset:e,Node:t}=r,n=mY({subset:e});function i(a){return!(Tc(a)||ro(a)||Ut(a)||Cd(a)||nN(a)||Cc(a)||fi(a))}class s extends t{constructor(o,l){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(super(),!sr(o))throw new TypeError('Node expected for parameter "object"');if(!ry(l))throw new TypeError('IndexNode expected for parameter "index"');this.object=o,this.index=l,this.optionalChaining=u}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return CA}get isAccessorNode(){return!0}_compile(o,l){var u=this.object._compile(o,l),c=this.index._compile(o,l),h=this.optionalChaining,d=Tc(this.object)&&this.object.optionalChaining;if(this.index.isObjectProperty()){var f=this.index.getObjectProperty();return function(g,b,v){var x=v||{},y=u(g,b,x);if(h&&y==null){x.optionalShortCircuit=!0;return}if(!(d&&x!==null&&x!==void 0&&x.optionalShortCircuit))return xs(y,f)}}else return function(g,b,v){var x=v||{},y=u(g,b,x);if(h&&y==null){x.optionalShortCircuit=!0;return}if(!(d&&x!==null&&x!==void 0&&x.optionalShortCircuit)){var A=c(g,b,y);return n(y,A)}}}forEach(o){o(this.object,"object",this),o(this.index,"index",this)}map(o){return new s(this._ifNode(o(this.object,"object",this)),this._ifNode(o(this.index,"index",this)),this.optionalChaining)}clone(){return new s(this.object,this.index,this.optionalChaining)}_toString(o){var l=this.object.toString(o);i(this.object)&&(l="("+l+")");var u=this.optionalChaining?this.index.dotNotation?"?":"?.":"";return l+u+this.index.toString(o)}_toHTML(o){var l=this.object.toHTML(o);return i(this.object)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+this.index.toHTML(o)}_toTex(o){var l=this.object.toTex(o);return i(this.object)&&(l="\\left(' + object + '\\right)"),l+this.index.toTex(o)}toJSON(){return{mathjs:CA,object:this.object,index:this.index,optionalChaining:this.optionalChaining}}static fromJSON(o){return new s(o.object,o.index,o.optionalChaining)}}return On(s,"name",CA),s},{isClass:!0,isNode:!0}),NA="ArrayNode",lSe=["Node"],uSe=Y(NA,lSe,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),this.items=i||[],!Array.isArray(this.items)||!this.items.every(sr))throw new TypeError("Array containing Nodes expected")}get type(){return NA}get isArrayNode(){return!0}_compile(i,s){var a=fd(this.items,function(u){return u._compile(i,s)}),o=i.config.matrix!=="Array";if(o){var l=i.matrix;return function(c,h,d){return l(fd(a,function(f){return f(c,h,d)}))}}else return function(c,h,d){return fd(a,function(f){return f(c,h,d)})}}forEach(i){for(var s=0;s<this.items.length;s++){var a=this.items[s];i(a,"items["+s+"]",this)}}map(i){for(var s=[],a=0;a<this.items.length;a++)s[a]=this._ifNode(i(this.items[a],"items["+a+"]",this));return new t(s)}clone(){return new t(this.items.slice(0))}_toString(i){var s=this.items.map(function(a){return a.toString(i)});return"["+s.join(", ")+"]"}toJSON(){return{mathjs:NA,items:this.items}}static fromJSON(i){return new t(i.items)}_toHTML(i){var s=this.items.map(function(a){return a.toHTML(i)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){function s(a,o){var l=a.some(ro)&&!a.every(ro),u=o||l,c=u?"&":"\\\\",h=a.map(function(d){return d.items?s(d.items,!o):d.toTex(i)}).join(c);return l||!u||u&&!o?"\\begin{bmatrix}"+h+"\\end{bmatrix}":h}return s(this.items,!1)}}return On(t,"name",NA),t},{isClass:!0,isNode:!0});function cSe(r){var{subset:e,matrix:t}=r;return function(i,s,a){try{if(Array.isArray(i)){var o=t(i).subset(s,a).valueOf();return o.forEach((l,u)=>{i[u]=l}),i}else{if(i&&typeof i.subset=="function")return i.subset(s,a);if(typeof i=="string")return e(i,s,a);if(typeof i=="object"){if(!s.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return I0(i,s.getObjectProperty(),a),i}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(l){throw Ds(l)}}}var jo=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:nullish":{op:"??",associativity:"left",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function DA(r,e){if(!e||e!=="auto")return r;for(var t=r;Cc(t);)t=t.content;return t}function hr(r,e,t,n){var i=r;e!=="keep"&&(i=r.getContent());for(var s=i.getIdentifier(),a=null,o=0;o<jo.length;o++)if(s in jo[o]){a=o;break}if(s==="OperatorNode:multiply"&&i.implicit&&t!=="show"){var l=DA(i.args[0],e);!(Ut(l)&&n&&n.getIdentifier()==="OperatorNode:divide"&&TP(DA(n.args[0],e)))&&!(l.getIdentifier()==="OperatorNode:divide"&&TP(DA(l.args[0],e))&&Ut(DA(l.args[1])))&&(a+=1)}return a}function qy(r,e){var t=r;e!=="keep"&&(t=r.getContent());var n=t.getIdentifier(),i=hr(t,e);if(i===null)return null;var s=jo[i][n];if(Ze(s,"associativity")){if(s.associativity==="left")return"left";if(s.associativity==="right")return"right";throw Error("'"+n+"' has the invalid associativity '"+s.associativity+"'.")}return null}function r2(r,e,t){var n=t!=="keep"?r.getContent():r,i=t!=="keep"?r.getContent():e,s=n.getIdentifier(),a=i.getIdentifier(),o=hr(n,t);if(o===null)return null;var l=jo[o][s];if(Ze(l,"associativeWith")&&l.associativeWith instanceof Array){for(var u=0;u<l.associativeWith.length;u++)if(l.associativeWith[u]===a)return!0;return!1}return null}function hSe(r){var e="OperatorNode:"+r;for(var t of jo)if(e in t)return t[e].op;return null}var MA="AssignmentNode",dSe=["subset","?matrix","Node"],fSe=Y(MA,dSe,r=>{var{subset:e,matrix:t,Node:n}=r,i=mY({subset:e}),s=cSe({subset:e,matrix:t});function a(l,u,c){u||(u="keep");var h=hr(l,u,c),d=hr(l.value,u,c);return u==="all"||d!==null&&d<=h}class o extends n{constructor(u,c,h){if(super(),this.object=u,this.index=h?c:null,this.value=h||c,!fi(u)&&!Tc(u))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(fi(u)&&u.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!ry(this.index))throw new TypeError('IndexNode expected as "index"');if(!sr(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return MA}get isAssignmentNode(){return!0}_compile(u,c){var h=this.object._compile(u,c),d=this.index?this.index._compile(u,c):null,f=this.value._compile(u,c),p=this.object.name;if(this.index)if(this.index.isObjectProperty()){var g=this.index.getObjectProperty();return function(A,w,_){var S=h(A,w,_),E=f(A,w,_);return I0(S,g,E),E}}else{if(fi(this.object))return function(A,w,_){var S=h(A,w,_),E=f(A,w,_),C=d(A,w,S);return A.set(p,s(S,C,E)),E};var b=this.object.object._compile(u,c);if(this.object.index.isObjectProperty()){var v=this.object.index.getObjectProperty();return function(A,w,_){var S=b(A,w,_),E=xs(S,v),C=d(A,w,E),N=f(A,w,_);return I0(S,v,s(E,C,N)),N}}else{var x=this.object.index._compile(u,c);return function(A,w,_){var S=b(A,w,_),E=x(A,w,S),C=i(S,E),N=d(A,w,C),D=f(A,w,_);return s(S,E,s(C,N,D)),D}}}else{if(!fi(this.object))throw new TypeError("SymbolNode expected as object");return function(A,w,_){var S=f(A,w,_);return A.set(p,S),S}}}forEach(u){u(this.object,"object",this),this.index&&u(this.index,"index",this),u(this.value,"value",this)}map(u){var c=this._ifNode(u(this.object,"object",this)),h=this.index?this._ifNode(u(this.index,"index",this)):null,d=this._ifNode(u(this.value,"value",this));return new o(c,h,d)}clone(){return new o(this.object,this.index,this.value)}_toString(u){var c=this.object.toString(u),h=this.index?this.index.toString(u):"",d=this.value.toString(u);return a(this,u&&u.parenthesis,u&&u.implicit)&&(d="("+d+")"),c+h+" = "+d}toJSON(){return{mathjs:MA,object:this.object,index:this.index,value:this.value}}static fromJSON(u){return new o(u.object,u.index,u.value)}_toHTML(u){var c=this.object.toHTML(u),h=this.index?this.index.toHTML(u):"",d=this.value.toHTML(u);return a(this,u&&u.parenthesis,u&&u.implicit)&&(d='<span class="math-paranthesis math-round-parenthesis">(</span>'+d+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+h+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+d}_toTex(u){var c=this.object.toTex(u),h=this.index?this.index.toTex(u):"",d=this.value.toTex(u);return a(this,u&&u.parenthesis,u&&u.implicit)&&(d="\\left(".concat(d,"\\right)")),c+h+"="+d}}return On(o,"name",MA),o},{isClass:!0,isNode:!0}),IA="BlockNode",mSe=["ResultSet","Node"],pSe=Y(IA,mSe,r=>{var{ResultSet:e,Node:t}=r;class n extends t{constructor(s){if(super(),!Array.isArray(s))throw new Error("Array expected");this.blocks=s.map(function(a){var o=a&&a.node,l=a&&a.visible!==void 0?a.visible:!0;if(!sr(o))throw new TypeError('Property "node" must be a Node');if(typeof l!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:o,visible:l}})}get type(){return IA}get isBlockNode(){return!0}_compile(s,a){var o=fd(this.blocks,function(l){return{evaluate:l.node._compile(s,a),visible:l.visible}});return function(u,c,h){var d=[];return XK(o,function(p){var g=p.evaluate(u,c,h);p.visible&&d.push(g)}),new e(d)}}forEach(s){for(var a=0;a<this.blocks.length;a++)s(this.blocks[a].node,"blocks["+a+"].node",this)}map(s){for(var a=[],o=0;o<this.blocks.length;o++){var l=this.blocks[o],u=this._ifNode(s(l.node,"blocks["+o+"].node",this));a[o]={node:u,visible:l.visible}}return new n(a)}clone(){var s=this.blocks.map(function(a){return{node:a.node,visible:a.visible}});return new n(s)}_toString(s){return this.blocks.map(function(a){return a.node.toString(s)+(a.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:IA,blocks:this.blocks}}static fromJSON(s){return new n(s.blocks)}_toHTML(s){return this.blocks.map(function(a){return a.node.toHTML(s)+(a.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(s){return this.blocks.map(function(a){return a.node.toTex(s)+(a.visible?"":";")}).join(`\\;\\;
`)}}return On(n,"name",IA),n},{isClass:!0,isNode:!0}),PA="ConditionalNode",gSe=["Node"],vSe=Y(PA,gSe,r=>{var{Node:e}=r;function t(i){if(typeof i=="number"||typeof i=="boolean"||typeof i=="string")return!!i;if(i){if(_t(i))return!i.isZero();if(cc(i))return!!(i.re||i.im);if(xa(i))return!!i.value}if(i==null)return!1;throw new TypeError('Unsupported type of condition "'+dr(i)+'"')}class n extends e{constructor(s,a,o){if(super(),!sr(s))throw new TypeError("Parameter condition must be a Node");if(!sr(a))throw new TypeError("Parameter trueExpr must be a Node");if(!sr(o))throw new TypeError("Parameter falseExpr must be a Node");this.condition=s,this.trueExpr=a,this.falseExpr=o}get type(){return PA}get isConditionalNode(){return!0}_compile(s,a){var o=this.condition._compile(s,a),l=this.trueExpr._compile(s,a),u=this.falseExpr._compile(s,a);return function(h,d,f){return t(o(h,d,f))?l(h,d,f):u(h,d,f)}}forEach(s){s(this.condition,"condition",this),s(this.trueExpr,"trueExpr",this),s(this.falseExpr,"falseExpr",this)}map(s){return new n(this._ifNode(s(this.condition,"condition",this)),this._ifNode(s(this.trueExpr,"trueExpr",this)),this._ifNode(s(this.falseExpr,"falseExpr",this)))}clone(){return new n(this.condition,this.trueExpr,this.falseExpr)}_toString(s){var a=s&&s.parenthesis?s.parenthesis:"keep",o=hr(this,a,s&&s.implicit),l=this.condition.toString(s),u=hr(this.condition,a,s&&s.implicit);(a==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=o)&&(l="("+l+")");var c=this.trueExpr.toString(s),h=hr(this.trueExpr,a,s&&s.implicit);(a==="all"||this.trueExpr.type==="OperatorNode"||h!==null&&h<=o)&&(c="("+c+")");var d=this.falseExpr.toString(s),f=hr(this.falseExpr,a,s&&s.implicit);return(a==="all"||this.falseExpr.type==="OperatorNode"||f!==null&&f<=o)&&(d="("+d+")"),l+" ? "+c+" : "+d}toJSON(){return{mathjs:PA,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(s){return new n(s.condition,s.trueExpr,s.falseExpr)}_toHTML(s){var a=s&&s.parenthesis?s.parenthesis:"keep",o=hr(this,a,s&&s.implicit),l=this.condition.toHTML(s),u=hr(this.condition,a,s&&s.implicit);(a==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=o)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(s),h=hr(this.trueExpr,a,s&&s.implicit);(a==="all"||this.trueExpr.type==="OperatorNode"||h!==null&&h<=o)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var d=this.falseExpr.toHTML(s),f=hr(this.falseExpr,a,s&&s.implicit);return(a==="all"||this.falseExpr.type==="OperatorNode"||f!==null&&f<=o)&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+d}_toTex(s){return"\\begin{cases} {"+this.trueExpr.toTex(s)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(s)+"}\\\\{"+this.falseExpr.toTex(s)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return On(n,"name",PA),n},{isClass:!0,isNode:!0}),qP=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},ySe={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},bSe={"":"\\--","":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},wSe=function(e,t){return qP({},e,t)},xSe=function(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.preserveFormatting,n=t===void 0?!1:t,i=e.escapeMapFn,s=i===void 0?wSe:i,a=String(r),o="",l=s(qP({},ySe),n?qP({},bSe):{}),u=Object.keys(l),c=function(){var d=!1;u.forEach(function(f,p){d||a.length>=f.length&&a.slice(0,f.length)===f&&(o+=l[u[p]],a=a.slice(f.length,a.length),d=!0)}),d||(o+=a.slice(0,1),a=a.slice(1,a.length))};a;)c();return o};const _Se=nC(xSe);var HP={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},Wt={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},h8={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(Wt.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(Wt.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(Wt.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(Wt.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(Wt.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},fraction:{2:"\\frac{${args[0]}}{${args[1]}}"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(Wt.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(Wt.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : y^${args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(Wt.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(Wt.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(Wt.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(Wt.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(Wt.bitAnd,"${args[1]}\\right)")},bitNot:{1:Wt.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(Wt.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(Wt.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(Wt.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(Wt.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(Wt.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(Wt.and,"${args[1]}\\right)")},not:{1:Wt.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(Wt.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(Wt.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(Wt.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(Wt.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(Wt.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(Wt.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(Wt.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(Wt.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(Wt.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(Wt.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(Wt.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(Wt.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(Wt.to,"${args[1]}\\right)")},numeric:function(e,t){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},bigint:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(HP.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},ASe="\\mathrm{${name}}\\left(${args}\\right)",d8={deg:"^\\circ"};function GP(r){return _Se(r,{preserveFormatting:!0})}function pY(r,e){return e=typeof e>"u"?!1:e,e?Ze(d8,r)?d8[r]:"\\mathrm{"+GP(r)+"}":Ze(HP,r)?HP[r]:GP(r)}var RA="ConstantNode",ESe=["Node","isBounded"],SSe=Y(RA,ESe,r=>{var{Node:e,isBounded:t}=r;class n extends e{constructor(s){super(),this.value=s}get type(){return RA}get isConstantNode(){return!0}_compile(s,a){var o=this.value;return function(){return o}}forEach(s){}map(s){return this.clone()}clone(){return new n(this.value)}_toString(s){return Pt(this.value,s)}_toHTML(s){var a=this._toString(s);switch(dr(this.value)){case"number":case"bigint":case"BigNumber":case"Fraction":return'<span class="math-number">'+a+"</span>";case"string":return'<span class="math-string">'+a+"</span>";case"boolean":return'<span class="math-boolean">'+a+"</span>";case"null":return'<span class="math-null-symbol">'+a+"</span>";case"undefined":return'<span class="math-undefined">'+a+"</span>";default:return'<span class="math-symbol">'+a+"</span>"}}toJSON(){return{mathjs:RA,value:this.value}}static fromJSON(s){return new n(s.value)}_toTex(s){var a=this._toString(s),o=dr(this.value);switch(o){case"string":return"\\mathtt{"+GP(a)+"}";case"number":case"BigNumber":{if(!t(this.value))return this.value.valueOf()<0?"-\\infty":"\\infty";var l=a.toLowerCase().indexOf("e");return l!==-1?a.substring(0,l)+"\\cdot10^{"+a.substring(l+1)+"}":a}case"bigint":return a.toString();case"Fraction":return this.value.toLatex();default:return a}}}return On(n,"name",RA),n},{isClass:!0,isNode:!0}),kA="FunctionAssignmentNode",TSe=["typed","Node"],CSe=Y(kA,TSe,r=>{var{typed:e,Node:t}=r;function n(s,a,o){var l=hr(s,a,o),u=hr(s.expr,a,o);return a==="all"||u!==null&&u<=l}class i extends t{constructor(a,o,l){if(super(),typeof a!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(o))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!sr(l))throw new TypeError('Node expected for parameter "expr"');if(fY.has(a))throw new Error('Illegal function name, "'+a+'" is a reserved keyword');var u=new Set;for(var c of o){var h=typeof c=="string"?c:c.name;if(u.has(h))throw new Error('Duplicate parameter name "'.concat(h,'"'));u.add(h)}this.name=a,this.params=o.map(function(d){return d&&d.name||d}),this.types=o.map(function(d){return d&&d.type||"any"}),this.expr=l}get type(){return kA}get isFunctionAssignmentNode(){return!0}_compile(a,o){var l=Object.create(o);XK(this.params,function(g){l[g]=!0});var u=this.expr,c=u._compile(a,l),h=this.name,d=this.params,f=u6(this.types,","),p=h+"("+u6(this.params,", ")+")";return function(b,v,x){var y={};y[f]=function(){for(var w=Object.create(v),_=0;_<d.length;_++)w[d[_]]=arguments[_];return c(b,w,x)};var A=e(h,y);return A.syntax=p,A.expr=u.toString(),b.set(h,A),A}}forEach(a){a(this.expr,"expr",this)}map(a){var o=this._ifNode(a(this.expr,"expr",this));return new i(this.name,this.params.slice(0),o)}clone(){return new i(this.name,this.params.slice(0),this.expr)}_toString(a){var o=a&&a.parenthesis?a.parenthesis:"keep",l=this.expr.toString(a);return n(this,o,a&&a.implicit)&&(l="("+l+")"),this.name+"("+this.params.join(", ")+") = "+l}toJSON(){var a=this.types;return{mathjs:kA,name:this.name,params:this.params.map(function(o,l){return{name:o,type:a[l]}}),expr:this.expr}}static fromJSON(a){return new i(a.name,a.params,a.expr)}_toHTML(a){for(var o=a&&a.parenthesis?a.parenthesis:"keep",l=[],u=0;u<this.params.length;u++)l.push('<span class="math-symbol math-parameter">'+ao(this.params[u])+"</span>");var c=this.expr.toHTML(a);return n(this,o,a&&a.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+ao(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+l.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(a){var o=a&&a.parenthesis?a.parenthesis:"keep",l=this.expr.toTex(a);return n(this,o,a&&a.implicit)&&(l="\\left(".concat(l,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(pY).join(",")+"\\right)="+l}}return On(i,"name",kA),i},{isClass:!0,isNode:!0}),FA="IndexNode",NSe=["Node","size"],DSe=Y(FA,NSe,r=>{var{Node:e,size:t}=r;class n extends e{constructor(s,a){if(super(),this.dimensions=s,this.dotNotation=a||!1,!Array.isArray(s)||!s.every(sr))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return FA}get isIndexNode(){return!0}_compile(s,a){var o=fd(this.dimensions,function(u,c){var h=u.filter(p=>p.isSymbolNode&&p.name==="end").length>0;if(h){var d=Object.create(a);d.end=!0;var f=u._compile(s,d);return function(g,b,v){if(!lt(v)&&!cr(v)&&!mn(v))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+dr(v));var x=t(v),y=Object.create(b);return y.end=x[c],f(g,y,v)}}else return u._compile(s,a)}),l=xs(s,"index");return function(c,h,d){var f=fd(o,function(p){return p(c,h,d)});return l(...f)}}forEach(s){for(var a=0;a<this.dimensions.length;a++)s(this.dimensions[a],"dimensions["+a+"]",this)}map(s){for(var a=[],o=0;o<this.dimensions.length;o++)a[o]=this._ifNode(s(this.dimensions[o],"dimensions["+o+"]",this));return new n(a,this.dotNotation)}clone(){return new n(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&Ut(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(s){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:FA,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(s){return new n(s.dimensions,s.dotNotation)}_toHTML(s){for(var a=[],o=0;o<this.dimensions.length;o++)a[o]=this.dimensions[o].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+ao(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(s){var a=this.dimensions.map(function(o){return o.toTex(s)});return this.dotNotation?"."+this.getObjectProperty():"_{"+a.join(",")+"}"}}return On(n,"name",FA),n},{isClass:!0,isNode:!0}),OA="ObjectNode",MSe=["Node"],ISe=Y(OA,MSe,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),this.properties=i||{},i&&(typeof i!="object"||!Object.keys(i).every(function(s){return sr(i[s])})))throw new TypeError("Object containing Nodes expected")}get type(){return OA}get isObjectNode(){return!0}_compile(i,s){var a={};for(var o in this.properties)if(Ze(this.properties,o)){var l=Sg(o),u=JSON.parse(l),c=xs(this.properties,o);a[u]=c._compile(i,s)}return function(d,f,p){var g={};for(var b in a)Ze(a,b)&&(g[b]=a[b](d,f,p));return g}}forEach(i){for(var s in this.properties)Ze(this.properties,s)&&i(this.properties[s],"properties["+Sg(s)+"]",this)}map(i){var s={};for(var a in this.properties)Ze(this.properties,a)&&(s[a]=this._ifNode(i(this.properties[a],"properties["+Sg(a)+"]",this)));return new t(s)}clone(){var i={};for(var s in this.properties)Ze(this.properties,s)&&(i[s]=this.properties[s]);return new t(i)}_toString(i){var s=[];for(var a in this.properties)Ze(this.properties,a)&&s.push(Sg(a)+": "+this.properties[a].toString(i));return"{"+s.join(", ")+"}"}toJSON(){return{mathjs:OA,properties:this.properties}}static fromJSON(i){return new t(i.properties)}_toHTML(i){var s=[];for(var a in this.properties)Ze(this.properties,a)&&s.push('<span class="math-symbol math-property">'+ao(a)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[a].toHTML(i));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(i){var s=[];for(var a in this.properties)Ze(this.properties,a)&&s.push("\\mathbf{"+a+":} & "+this.properties[a].toTex(i)+"\\\\");var o="\\left\\{\\begin{array}{ll}"+s.join(`
`)+"\\end{array}\\right\\}";return o}}return On(t,"name",OA),t},{isClass:!0,isNode:!0});function Sb(r,e){return new wK(r,new eN(e),new Set(Object.keys(e)))}var BA="OperatorNode",PSe=["Node"],RSe=Y(BA,PSe,r=>{var{Node:e}=r;function t(s,a){var o=s;if(a==="auto")for(;Cc(o);)o=o.content;return Ut(o)?!0:xn(o)?t(o.args[0],a):!1}function n(s,a,o,l,u){var c=hr(s,a,o),h=qy(s,a);if(a==="all"||l.length>2&&s.getIdentifier()!=="OperatorNode:add"&&s.getIdentifier()!=="OperatorNode:multiply")return l.map(function(N){switch(N.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var d;switch(l.length){case 0:d=[];break;case 1:{var f=hr(l[0],a,o,s);if(u&&f!==null){var p,g;if(a==="keep"?(p=l[0].getIdentifier(),g=s.getIdentifier()):(p=l[0].getContent().getIdentifier(),g=s.getContent().getIdentifier()),jo[c][g].latexLeftParens===!1){d=[!1];break}if(jo[f][p].latexParens===!1){d=[!1];break}}if(f===null){d=[!1];break}if(f<=c){d=[!0];break}d=[!1]}break;case 2:{var b,v=hr(l[0],a,o,s),x=r2(s,l[0],a);v===null?b=!1:v===c&&h==="right"&&!x||v<c?b=!0:b=!1;var y,A=hr(l[1],a,o,s),w=r2(s,l[1],a);if(A===null?y=!1:A===c&&h==="left"&&!w||A<c?y=!0:y=!1,u){var _,S,E;a==="keep"?(_=s.getIdentifier(),S=s.args[0].getIdentifier(),E=s.args[1].getIdentifier()):(_=s.getContent().getIdentifier(),S=s.args[0].getContent().getIdentifier(),E=s.args[1].getContent().getIdentifier()),v!==null&&(jo[c][_].latexLeftParens===!1&&(b=!1),jo[v][S].latexParens===!1&&(b=!1)),A!==null&&(jo[c][_].latexRightParens===!1&&(y=!1),jo[A][E].latexParens===!1&&(y=!1))}d=[b,y]}break;default:(s.getIdentifier()==="OperatorNode:add"||s.getIdentifier()==="OperatorNode:multiply")&&(d=l.map(function(N){var D=hr(N,a,o,s),M=r2(s,N,a),I=qy(N,a);return D===null?!1:c===D&&h===I&&!M?!0:D<c}));break}if(l.length>=2&&s.getIdentifier()==="OperatorNode:multiply"&&s.implicit&&a!=="all"&&o==="hide")for(var C=1;C<d.length;++C)t(l[C],a)&&!d[C-1]&&(a!=="keep"||!Cc(l[C-1]))&&(d[C]=!0);return d}class i extends e{constructor(a,o,l,u,c){if(super(),typeof a!="string")throw new TypeError('string expected for parameter "op"');if(typeof o!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(l)||!l.every(sr))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=u===!0,this.isPercentage=c===!0,this.op=a,this.fn=o,this.args=l||[]}get type(){return BA}get isOperatorNode(){return!0}_compile(a,o){if(typeof this.fn!="string"||!$F(a,this.fn))throw a[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var l=xs(a,this.fn),u=fd(this.args,function(p){return p._compile(a,o)});if(typeof l=="function"&&l.rawArgs===!0){var c=this.args;return function(g,b,v){return l(c,a,Sb(g,b))}}else if(u.length===1){var h=u[0];return function(g,b,v){return l(h(g,b,v))}}else if(u.length===2){var d=u[0],f=u[1];return function(g,b,v){return l(d(g,b,v),f(g,b,v))}}else return function(g,b,v){return l.apply(null,fd(u,function(x){return x(g,b,v)}))}}forEach(a){for(var o=0;o<this.args.length;o++)a(this.args[o],"args["+o+"]",this)}map(a){for(var o=[],l=0;l<this.args.length;l++)o[l]=this._ifNode(a(this.args[l],"args["+l+"]",this));return new i(this.op,this.fn,o,this.implicit,this.isPercentage)}clone(){return new i(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(a){var o=a&&a.parenthesis?a.parenthesis:"keep",l=a&&a.implicit?a.implicit:"hide",u=this.args,c=n(this,o,l,u,!1);if(u.length===1){var h=qy(this,o),d=u[0].toString(a);c[0]&&(d="("+d+")");var f=/[a-zA-Z]+/.test(this.op);return h==="right"?this.op+(f?" ":"")+d:h==="left"?d+(f?" ":"")+this.op:d+this.op}else if(u.length===2){var p=u[0].toString(a),g=u[1].toString(a);return c[0]&&(p="("+p+")"),c[1]&&(g="("+g+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?p+" "+g:p+" "+this.op+" "+g}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var b=u.map(function(v,x){return v=v.toString(a),c[x]&&(v="("+v+")"),v});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?b.join(" "):b.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:BA,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(a){return new i(a.op,a.fn,a.args,a.implicit,a.isPercentage)}_toHTML(a){var o=a&&a.parenthesis?a.parenthesis:"keep",l=a&&a.implicit?a.implicit:"hide",u=this.args,c=n(this,o,l,u,!1);if(u.length===1){var h=qy(this,o),d=u[0].toHTML(a);return c[0]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),h==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+ao(this.op)+"</span>"+d:d+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+ao(this.op)+"</span>"}else if(u.length===2){var f=u[0].toHTML(a),p=u[1].toHTML(a);return c[0]&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(p='<span class="math-parenthesis math-round-parenthesis">(</span>'+p+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?f+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+p:f+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ao(this.op)+"</span>"+p}else{var g=u.map(function(b,v){return b=b.toHTML(a),c[v]&&(b='<span class="math-parenthesis math-round-parenthesis">(</span>'+b+'<span class="math-parenthesis math-round-parenthesis">)</span>'),b});return u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?g.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):g.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ao(this.op)+"</span>"):'<span class="math-function">'+ao(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+g.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(a){var o=a&&a.parenthesis?a.parenthesis:"keep",l=a&&a.implicit?a.implicit:"hide",u=this.args,c=n(this,o,l,u,!0),h=Wt[this.fn];if(h=typeof h>"u"?this.op:h,u.length===1){var d=qy(this,o),f=u[0].toTex(a);return c[0]&&(f="\\left(".concat(f,"\\right)")),d==="right"?h+f:f+h}else if(u.length===2){var p=u[0],g=p.toTex(a);c[0]&&(g="\\left(".concat(g,"\\right)"));var b=u[1],v=b.toTex(a);c[1]&&(v="\\left(".concat(v,"\\right)"));var x;switch(o==="keep"?x=p.getIdentifier():x=p.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return h+"{"+g+"}{"+v+"}";case"OperatorNode:pow":switch(g="{"+g+"}",v="{"+v+"}",x){case"ConditionalNode":case"OperatorNode:divide":g="\\left(".concat(g,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&l==="hide")return g+"~"+v}return g+h+v}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var y=u.map(function(A,w){return A=A.toTex(a),c[w]&&(A="\\left(".concat(A,"\\right)")),A});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&l==="hide"?y.join("~"):y.join(h)}else return"\\mathrm{"+this.fn+"}\\left("+u.map(function(A){return A.toTex(a)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return On(i,"name",BA),i},{isClass:!0,isNode:!0}),LA="ParenthesisNode",kSe=["Node"],FSe=Y(LA,kSe,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),!sr(i))throw new TypeError('Node expected for parameter "content"');this.content=i}get type(){return LA}get isParenthesisNode(){return!0}_compile(i,s){return this.content._compile(i,s)}getContent(){return this.content.getContent()}forEach(i){i(this.content,"content",this)}map(i){var s=i(this.content,"content",this);return new t(s)}clone(){return new t(this.content)}_toString(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"("+this.content.toString(i)+")":this.content.toString(i)}toJSON(){return{mathjs:LA,content:this.content}}static fromJSON(i){return new t(i.content)}_toHTML(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(i)}_toTex(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"\\left(".concat(this.content.toTex(i),"\\right)"):this.content.toTex(i)}}return On(t,"name",LA),t},{isClass:!0,isNode:!0}),$A="RangeNode",OSe=["Node"],BSe=Y($A,OSe,r=>{var{Node:e}=r;function t(i,s,a){var o=hr(i,s,a),l={},u=hr(i.start,s,a);if(l.start=u!==null&&u<=o||s==="all",i.step){var c=hr(i.step,s,a);l.step=c!==null&&c<=o||s==="all"}var h=hr(i.end,s,a);return l.end=h!==null&&h<=o||s==="all",l}class n extends e{constructor(s,a,o){if(super(),!sr(s))throw new TypeError("Node expected");if(!sr(a))throw new TypeError("Node expected");if(o&&!sr(o))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=s,this.end=a,this.step=o||null}get type(){return $A}get isRangeNode(){return!0}needsEnd(){var s=this.filter(function(a){return fi(a)&&a.name==="end"});return s.length>0}_compile(s,a){var o=s.range,l=this.start._compile(s,a),u=this.end._compile(s,a);if(this.step){var c=this.step._compile(s,a);return function(d,f,p){return o(l(d,f,p),u(d,f,p),c(d,f,p))}}else return function(d,f,p){return o(l(d,f,p),u(d,f,p))}}forEach(s){s(this.start,"start",this),s(this.end,"end",this),this.step&&s(this.step,"step",this)}map(s){return new n(this._ifNode(s(this.start,"start",this)),this._ifNode(s(this.end,"end",this)),this.step&&this._ifNode(s(this.step,"step",this)))}clone(){return new n(this.start,this.end,this.step&&this.step)}_toString(s){var a=s&&s.parenthesis?s.parenthesis:"keep",o=t(this,a,s&&s.implicit),l,u=this.start.toString(s);if(o.start&&(u="("+u+")"),l=u,this.step){var c=this.step.toString(s);o.step&&(c="("+c+")"),l+=":"+c}var h=this.end.toString(s);return o.end&&(h="("+h+")"),l+=":"+h,l}toJSON(){return{mathjs:$A,start:this.start,end:this.end,step:this.step}}static fromJSON(s){return new n(s.start,s.end,s.step)}_toHTML(s){var a=s&&s.parenthesis?s.parenthesis:"keep",o=t(this,a,s&&s.implicit),l,u=this.start.toHTML(s);if(o.start&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l=u,this.step){var c=this.step.toHTML(s);o.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+c}var h=this.end.toHTML(s);return o.end&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+h,l}_toTex(s){var a=s&&s.parenthesis?s.parenthesis:"keep",o=t(this,a,s&&s.implicit),l=this.start.toTex(s);if(o.start&&(l="\\left(".concat(l,"\\right)")),this.step){var u=this.step.toTex(s);o.step&&(u="\\left(".concat(u,"\\right)")),l+=":"+u}var c=this.end.toTex(s);return o.end&&(c="\\left(".concat(c,"\\right)")),l+=":"+c,l}}return On(n,"name",$A),n},{isClass:!0,isNode:!0}),VA="RelationalNode",LSe=["Node"],$Se=Y(VA,LSe,r=>{var{Node:e}=r,t={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class n extends e{constructor(s,a){if(super(),!Array.isArray(s))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(a))throw new TypeError("Parameter params must be an array");if(s.length!==a.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=s,this.params=a}get type(){return VA}get isRelationalNode(){return!0}_compile(s,a){var o=this,l=this.params.map(u=>u._compile(s,a));return function(c,h,d){for(var f,p=l[0](c,h,d),g=0;g<o.conditionals.length;g++){f=p,p=l[g+1](c,h,d);var b=xs(s,o.conditionals[g]);if(!b(f,p))return!1}return!0}}forEach(s){this.params.forEach((a,o)=>s(a,"params["+o+"]",this),this)}map(s){return new n(this.conditionals.slice(),this.params.map((a,o)=>this._ifNode(s(a,"params["+o+"]",this)),this))}clone(){return new n(this.conditionals,this.params)}_toString(s){for(var a=s&&s.parenthesis?s.parenthesis:"keep",o=hr(this,a,s&&s.implicit),l=this.params.map(function(h,d){var f=hr(h,a,s&&s.implicit);return a==="all"||f!==null&&f<=o?"("+h.toString(s)+")":h.toString(s)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=" "+t[this.conditionals[c]],u+=" "+l[c+1];return u}toJSON(){return{mathjs:VA,conditionals:this.conditionals,params:this.params}}static fromJSON(s){return new n(s.conditionals,s.params)}_toHTML(s){for(var a=s&&s.parenthesis?s.parenthesis:"keep",o=hr(this,a,s&&s.implicit),l=this.params.map(function(h,d){var f=hr(h,a,s&&s.implicit);return a==="all"||f!==null&&f<=o?'<span class="math-parenthesis math-round-parenthesis">(</span>'+h.toHTML(s)+'<span class="math-parenthesis math-round-parenthesis">)</span>':h.toHTML(s)}),u=l[0],c=0;c<this.conditionals.length;c++)u+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ao(t[this.conditionals[c]])+"</span>"+l[c+1];return u}_toTex(s){for(var a=s&&s.parenthesis?s.parenthesis:"keep",o=hr(this,a,s&&s.implicit),l=this.params.map(function(h,d){var f=hr(h,a,s&&s.implicit);return a==="all"||f!==null&&f<=o?"\\left("+h.toTex(s)+"\right)":h.toTex(s)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=Wt[this.conditionals[c]]+l[c+1];return u}}return On(n,"name",VA),n},{isClass:!0,isNode:!0}),VSe="SymbolNode",USe=["math","?Unit","Node"],zSe=Y(VSe,USe,r=>{var{math:e,Unit:t,Node:n}=r;function i(a){return t?t.isValuelessUnit(a):!1}class s extends n{constructor(o){if(super(),typeof o!="string")throw new TypeError('String expected for parameter "name"');this.name=o}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(o,l){var u=this.name;if(l[u]===!0)return function(h,d,f){return xs(d,u)};if(u in o)return function(h,d,f){return h.has(u)?h.get(u):xs(o,u)};var c=i(u);return function(h,d,f){return h.has(u)?h.get(u):c?new t(null,u):s.onUndefinedSymbol(u)}}forEach(o){}map(o){return this.clone()}static onUndefinedSymbol(o){throw new Error("Undefined symbol "+o)}clone(){return new s(this.name)}_toString(o){return this.name}_toHTML(o){var l=ao(this.name);return l==="true"||l==="false"?'<span class="math-symbol math-boolean">'+l+"</span>":l==="i"?'<span class="math-symbol math-imaginary-symbol">'+l+"</span>":l==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+l+"</span>":l==="NaN"?'<span class="math-symbol math-nan-symbol">'+l+"</span>":l==="null"?'<span class="math-symbol math-null-symbol">'+l+"</span>":l==="undefined"?'<span class="math-symbol math-undefined-symbol">'+l+"</span>":'<span class="math-symbol">'+l+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(o){return new s(o.name)}_toTex(o){var l=!1;typeof e[this.name]>"u"&&i(this.name)&&(l=!0);var u=pY(this.name,l);return u[0]==="\\"?u:" "+u}}return s},{isClass:!0,isNode:!0}),UA="FunctionNode",jSe=["math","Node","SymbolNode"],qSe=Y(UA,jSe,r=>{var e,{math:t,Node:n,SymbolNode:i}=r,s=l=>Pt(l,{truncate:78});function a(l,u,c){for(var h="",d=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,f=0,p;(p=d.exec(l))!==null;)if(h+=l.substring(f,p.index),f=p.index,p[0]==="$$")h+="$",f++;else{f+=p[0].length;var g=u[p[1]];if(!g)throw new ReferenceError("Template: Property "+p[1]+" does not exist.");if(p[2]===void 0)switch(typeof g){case"string":h+=g;break;case"object":if(sr(g))h+=g.toTex(c);else if(Array.isArray(g))h+=g.map(function(b,v){if(sr(b))return b.toTex(c);throw new TypeError("Template: "+p[1]+"["+v+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes")}else if(sr(g[p[2]]&&g[p[2]]))h+=g[p[2]].toTex(c);else throw new TypeError("Template: "+p[1]+"["+p[2]+"] is not a Node.")}return h+=l.slice(f),h}class o extends n{constructor(u,c,h){if(super(),typeof u=="string"&&(u=new i(u)),!sr(u))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every(sr))throw new TypeError('Array containing Nodes expected for parameter "args"');var d=typeof h;if(!(d==="undefined"||d==="boolean"))throw new TypeError("optional flag, if specified, must be boolean");this.fn=u,this.args=c||[],this.optional=!!h}get name(){return this.fn.name||""}get type(){return UA}get isFunctionNode(){return!0}_compile(u,c){var h=this.args.map(C=>C._compile(u,c)),d=this.optional||Tc(this.fn)&&this.fn.optionalChaining;if(fi(this.fn)){var f=this.fn.name;if(c[f]){var x=this.args;return function(N,D,M){var I=xs(D,f);if(!(d&&I===void 0)){if(typeof I!="function")throw new TypeError("Argument '".concat(f,"' was not a function; received: ").concat(s(I)));if(I.rawArgs)return I(x,u,Sb(N,D));var U=h.map(X=>X(N,D,M));return I.apply(I,U)}}}else{var p=f in u?xs(u,f):void 0,g=typeof p=="function"&&p.rawArgs===!0,b=C=>{var N;if(C.has(f))N=C.get(f);else if(f in u)N=xs(u,f);else if(d)N=void 0;else return o.onUndefinedFunction(f);if(typeof N=="function"||d&&N===void 0)return N;throw new TypeError("'".concat(f,`' is not a function; its value is:
  `).concat(s(N)))};if(g){var v=this.args;return function(N,D,M){var I=b(N);if(I.rawArgs===!0)return I(v,u,Sb(N,D));var U=h.map(X=>X(N,D,M));return I(...U)}}else switch(h.length){case 0:return function(N,D,M){var I=b(N);if(!(d&&I===void 0))return I()};case 1:return function(N,D,M){var I=b(N);if(!(d&&I===void 0)){var U=h[0];return I(U(N,D,M))}};case 2:return function(N,D,M){var I=b(N);if(!(d&&I===void 0)){var U=h[0],X=h[1];return I(U(N,D,M),X(N,D,M))}};default:return function(N,D,M){var I=b(N);if(!(d&&I===void 0)){var U=h.map(X=>X(N,D,M));return I(...U)}}}}}else if(Tc(this.fn)&&ry(this.fn.index)&&this.fn.index.isObjectProperty()){var y=this.fn.object._compile(u,c),A=this.fn.index.getObjectProperty(),w=this.args;return function(N,D,M){var I=y(N,D,M);if(!(d&&(I==null||I[A]===void 0))){var U=cge(I,A);if(U!=null&&U.rawArgs)return U(w,u,Sb(N,D));var X=h.map(k=>k(N,D,M));return U.apply(I,X)}}}else{var _=this.fn.toString(),S=this.fn._compile(u,c),E=this.args;return function(N,D,M){var I=S(N,D,M);if(!(d&&I===void 0)){if(typeof I!="function")throw new TypeError("Expression '".concat(_,"' did not evaluate to a function; value is:")+`
  `.concat(s(I)));if(I.rawArgs)return I(E,u,Sb(N,D));var U=h.map(X=>X(N,D,M));return I.apply(I,U)}}}}forEach(u){u(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)u(this.args[c],"args["+c+"]",this)}map(u){for(var c=this._ifNode(u(this.fn,"fn",this)),h=[],d=0;d<this.args.length;d++)h[d]=this._ifNode(u(this.args[d],"args["+d+"]",this));return new o(c,h)}clone(){return new o(this.fn,this.args.slice(0))}toString(u){var c,h=this.fn.toString(u);return u&&typeof u.handler=="object"&&Ze(u.handler,h)&&(c=u.handler[h](this,u)),typeof c<"u"?c:super.toString(u)}_toString(u){var c=this.args.map(function(d){return d.toString(u)}),h=d_(this.fn)?"("+this.fn.toString(u)+")":this.fn.toString(u);return h+"("+c.join(", ")+")"}toJSON(){return{mathjs:UA,fn:this.fn,args:this.args}}_toHTML(u){var c=this.args.map(function(h){return h.toHTML(u)});return'<span class="math-function">'+ao(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(u){var c;return u&&typeof u.handler=="object"&&Ze(u.handler,this.name)&&(c=u.handler[this.name](this,u)),typeof c<"u"?c:super.toTex(u)}_toTex(u){var c=this.args.map(function(f){return f.toTex(u)}),h;h8[this.name]&&(h=h8[this.name]),t[this.name]&&(typeof t[this.name].toTex=="function"||typeof t[this.name].toTex=="object"||typeof t[this.name].toTex=="string")&&(h=t[this.name].toTex);var d;switch(typeof h){case"function":d=h(this,u);break;case"string":d=a(h,this,u);break;case"object":switch(typeof h[c.length]){case"function":d=h[c.length](this,u);break;case"string":d=a(h[c.length],this,u);break}}return typeof d<"u"?d:a(ASe,this,u)}getIdentifier(){return this.type+":"+this.name}}return e=o,On(o,"name",UA),On(o,"onUndefinedFunction",function(l){throw new Error("Undefined function "+l)}),On(o,"fromJSON",function(l){return new e(l.fn,l.args)}),o},{isClass:!0,isNode:!0}),f8="parse",HSe=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],GSe=Y(f8,HSe,r=>{var{typed:e,numeric:t,config:n,AccessorNode:i,ArrayNode:s,AssignmentNode:a,BlockNode:o,ConditionalNode:l,ConstantNode:u,FunctionAssignmentNode:c,FunctionNode:h,IndexNode:d,ObjectNode:f,OperatorNode:p,ParenthesisNode:g,RangeNode:b,RelationalNode:v,SymbolNode:x}=r,y=e(f8,{string:function(le){return ce(le,{})},"Array | Matrix":function(le){return A(le,{})},"string, Object":function(le,we){var Me=we.nodes!==void 0?we.nodes:{};return ce(le,Me)},"Array | Matrix, Object":A});function A(B){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},we=le.nodes!==void 0?le.nodes:{};return At(B,function(Me){if(typeof Me!="string")throw new TypeError("String expected");return ce(Me,we)})}var w={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},_={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"?.":!0,"??":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},S={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},E={true:!0,false:!1,null:null,undefined:void 0},C=["NaN","Infinity"],N={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function D(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:w.NULL,nestingLevel:0,conditionalLevel:null}}function M(B,le){return B.expression.substr(B.index,le)}function I(B){return M(B,1)}function U(B){B.index++}function X(B){return B.expression.charAt(B.index-1)}function k(B){return B.expression.charAt(B.index+1)}function z(B){for(B.tokenType=w.NULL,B.token="",B.comment="";;){if(I(B)==="#")for(;I(B)!==`
`&&I(B)!=="";)B.comment+=I(B),U(B);if(y.isWhitespace(I(B),B.nestingLevel))U(B);else break}if(I(B)===""){B.tokenType=w.DELIMITER;return}if(I(B)===`
`&&!B.nestingLevel){B.tokenType=w.DELIMITER,B.token=I(B),U(B);return}var le=I(B),we=M(B,2),Me=M(B,3);if(Me.length===3&&_[Me]){B.tokenType=w.DELIMITER,B.token=Me,U(B),U(B),U(B);return}if(we.length===2&&_[we]&&(we!=="?."||!y.isDigit(B.expression.charAt(B.index+2)))){B.tokenType=w.DELIMITER,B.token=we,U(B),U(B);return}if(_[le]){B.tokenType=w.DELIMITER,B.token=le,U(B);return}if(y.isDigitDot(le)){B.tokenType=w.NUMBER;var ze=M(B,2);if(ze==="0b"||ze==="0o"||ze==="0x"){for(B.token+=I(B),U(B),B.token+=I(B),U(B);y.isAlpha(I(B),X(B),k(B))||y.isDigit(I(B));)B.token+=I(B),U(B);if(I(B)===".")for(B.token+=".",U(B);y.isAlpha(I(B),X(B),k(B))||y.isDigit(I(B));)B.token+=I(B),U(B);else if(I(B)==="i")for(B.token+="i",U(B);y.isDigit(I(B));)B.token+=I(B),U(B);return}if(I(B)==="."){if(B.token+=I(B),U(B),!y.isDigit(I(B))){B.tokenType=w.DELIMITER;return}}else{for(;y.isDigit(I(B));)B.token+=I(B),U(B);y.isDecimalMark(I(B),k(B))&&(B.token+=I(B),U(B))}for(;y.isDigit(I(B));)B.token+=I(B),U(B);if(I(B)==="E"||I(B)==="e"){if(y.isDigit(k(B))||k(B)==="-"||k(B)==="+"){if(B.token+=I(B),U(B),(I(B)==="+"||I(B)==="-")&&(B.token+=I(B),U(B)),!y.isDigit(I(B)))throw rt(B,'Digit expected, got "'+I(B)+'"');for(;y.isDigit(I(B));)B.token+=I(B),U(B);if(y.isDecimalMark(I(B),k(B)))throw rt(B,'Digit expected, got "'+I(B)+'"')}else if(y.isDecimalMark(k(B),B.expression.charAt(B.index+2)))throw U(B),rt(B,'Digit expected, got "'+I(B)+'"')}return}if(y.isAlpha(I(B),X(B),k(B))){for(;y.isAlpha(I(B),X(B),k(B))||y.isDigit(I(B));)B.token+=I(B),U(B);Ze(S,B.token)?B.tokenType=w.DELIMITER:B.tokenType=w.SYMBOL;return}for(B.tokenType=w.UNKNOWN;I(B)!=="";)B.token+=I(B),U(B);throw rt(B,'Syntax error in part "'+B.token+'"')}function q(B){do z(B);while(B.token===`
`)}function H(B){B.nestingLevel++}function te(B){B.nestingLevel--}y.isAlpha=function(le,we,Me){return y.isValidLatinOrGreek(le)||y.isValidMathSymbol(le,Me)||y.isValidMathSymbol(we,le)},y.isValidLatinOrGreek=function(le){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(le)},y.isValidMathSymbol=function(le,we){return/^[\uD835]$/.test(le)&&/^[\uDC00-\uDFFF]$/.test(we)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(we)},y.isWhitespace=function(le,we){return le===" "||le==="	"||le===""||le===`
`&&we>0},y.isDecimalMark=function(le,we){return le==="."&&we!=="/"&&we!=="*"&&we!=="^"},y.isDigitDot=function(le){return le>="0"&&le<="9"||le==="."},y.isDigit=function(le){return le>="0"&&le<="9"};function ce(B,le){var we=D();An(we,{expression:B,extraNodes:le}),z(we);var Me=re(we);if(we.token!=="")throw we.tokenType===w.DELIMITER?pr(we,"Unexpected operator "+we.token):rt(we,'Unexpected part "'+we.token+'"');return Me}function re(B){var le,we=[],Me;for(B.token!==""&&B.token!==`
`&&B.token!==";"&&(le=O(B),B.comment&&(le.comment=B.comment));B.token===`
`||B.token===";";)we.length===0&&le&&(Me=B.token!==";",we.push({node:le,visible:Me})),z(B),B.token!==`
`&&B.token!==";"&&B.token!==""&&(le=O(B),B.comment&&(le.comment=B.comment),Me=B.token!==";",we.push({node:le,visible:Me}));return we.length>0?new o(we):(le||(le=new u(void 0),B.comment&&(le.comment=B.comment)),le)}function O(B){var le,we,Me,ze,ut=ne(B);if(B.token==="="){if(fi(ut))return le=ut.name,q(B),Me=O(B),new a(new x(le),Me);if(Tc(ut)){if(ut.optionalChaining)throw rt(B,"Cannot assign to optional chain");return q(B),Me=O(B),new a(ut.object,ut.index,Me)}else if(Cd(ut)&&fi(ut.fn)&&(ze=!0,we=[],le=ut.name,ut.args.forEach(function(vn,Fa){fi(vn)?we[Fa]=vn.name:ze=!1}),ze))return q(B),Me=O(B),new c(le,we,Me);throw rt(B,"Invalid left hand side of assignment operator =")}return ut}function ne(B){for(var le=W(B);B.token==="?";){var we=B.conditionalLevel;B.conditionalLevel=B.nestingLevel,q(B);var Me=le,ze=O(B);if(B.token!==":")throw rt(B,"False part of conditional expression expected");B.conditionalLevel=null,q(B);var ut=O(B);le=new l(Me,ze,ut),B.conditionalLevel=we}return le}function W(B){for(var le=pe(B);B.token==="or";)q(B),le=new p("or","or",[le,pe(B)]);return le}function pe(B){for(var le=me(B);B.token==="xor";)q(B),le=new p("xor","xor",[le,me(B)]);return le}function me(B){for(var le=ie(B);B.token==="and";)q(B),le=new p("and","and",[le,ie(B)]);return le}function ie(B){for(var le=K(B);B.token==="|";)q(B),le=new p("|","bitOr",[le,K(B)]);return le}function K(B){for(var le=ae(B);B.token==="^|";)q(B),le=new p("^|","bitXor",[le,ae(B)]);return le}function ae(B){for(var le=ge(B);B.token==="&";)q(B),le=new p("&","bitAnd",[le,ge(B)]);return le}function ge(B){for(var le=[he(B)],we=[],Me={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};Ze(Me,B.token);){var ze={name:B.token,fn:Me[B.token]};we.push(ze),q(B),le.push(he(B))}return le.length===1?le[0]:le.length===2?new p(we[0].name,we[0].fn,le):new v(we.map(ut=>ut.fn),le)}function he(B){var le,we,Me,ze;le=be(B);for(var ut={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};Ze(ut,B.token);)we=B.token,Me=ut[we],q(B),ze=[le,be(B)],le=new p(we,Me,ze);return le}function be(B){var le,we,Me,ze;le=ve(B);for(var ut={to:"to",in:"to"};Ze(ut,B.token);)we=B.token,Me=ut[we],q(B),we==="in"&&"])},;".includes(B.token)?le=new p("*","multiply",[le,new x("in")],!0):(ze=[le,ve(B)],le=new p(we,Me,ze));return le}function ve(B){var le,we=[];if(B.token===":"?le=new u(1):le=Ie(B),B.token===":"&&B.conditionalLevel!==B.nestingLevel){for(we.push(le);B.token===":"&&we.length<3;)q(B),B.token===")"||B.token==="]"||B.token===","||B.token===""?we.push(new x("end")):we.push(Ie(B));we.length===3?le=new b(we[0],we[2],we[1]):le=new b(we[0],we[1])}return le}function Ie(B){var le,we,Me,ze;le=Ve(B);for(var ut={"+":"add","-":"subtract"};Ze(ut,B.token);){we=B.token,Me=ut[we],q(B);var vn=Ve(B);vn.isPercentage?ze=[le,new p("*","multiply",[le,vn])]:ze=[le,vn],le=new p(we,Me,ze)}return le}function Ve(B){var le,we,Me,ze;le=We(B),we=le;for(var ut={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};Ze(ut,B.token);)Me=B.token,ze=ut[Me],q(B),we=We(B),le=new p(Me,ze,[le,we]);return le}function We(B){var le,we;for(le=Be(B),we=le;B.tokenType===w.SYMBOL||B.token==="in"&&Ut(le)||B.token==="in"&&xn(le)&&le.fn==="unaryMinus"&&Ut(le.args[0])||B.tokenType===w.NUMBER&&!Ut(we)&&(!xn(we)||we.op==="!")||B.token==="(";)we=Be(B),le=new p("*","multiply",[le,we],!0);return le}function Be(B){for(var le=$e(B),we=le,Me=[];B.token==="/"&&TP(we);)if(Me.push(An({},B)),q(B),B.tokenType===w.NUMBER)if(Me.push(An({},B)),q(B),B.tokenType===w.SYMBOL||B.token==="("||B.token==="in")An(B,Me.pop()),Me.pop(),we=$e(B),le=new p("/","divide",[le,we]);else{Me.pop(),An(B,Me.pop());break}else{An(B,Me.pop());break}return le}function $e(B){var le=Ge(B);if(B.token==="%"){var we=An({},B);q(B);try{Ge(B),An(B,we)}catch{le=new p("/","divide",[le,new u(100)],!1,!0)}}return le}function Ge(B){var le,we,Me,ze={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return Ze(ze,B.token)?(Me=ze[B.token],le=B.token,q(B),we=[Ge(B)],new p(le,Me,we)):Z(B)}function Z(B){var le,we,Me,ze;return le=Q(B),(B.token==="^"||B.token===".^")&&(we=B.token,Me=we==="^"?"pow":"dotPow",q(B),ze=[le,Ge(B)],le=new p(we,Me,ze)),le}function Q(B){for(var le=L(B);B.token==="??";)q(B),le=new p("??","nullish",[le,L(B)]);return le}function L(B){var le,we,Me,ze;le=G(B);for(var ut={"!":"factorial","'":"ctranspose"};Ze(ut,B.token);)we=B.token,Me=ut[we],z(B),ze=[le],le=new p(we,Me,ze),le=oe(B,le);return le}function G(B){var le=[];if(B.tokenType===w.SYMBOL&&Ze(B.extraNodes,B.token)){var we=B.extraNodes[B.token];if(z(B),B.token==="("){if(le=[],H(B),z(B),B.token!==")")for(le.push(O(B));B.token===",";)z(B),le.push(O(B));if(B.token!==")")throw rt(B,"Parenthesis ) expected");te(B),z(B)}return new we(le)}return ee(B)}function ee(B){var le,we;return B.tokenType===w.SYMBOL||B.tokenType===w.DELIMITER&&B.token in S?(we=B.token,z(B),Ze(E,we)?le=new u(E[we]):C.includes(we)?le=new u(t(we,"number")):le=new x(we),le=oe(B,le),le):fe(B)}function oe(B,le,we){for(var Me;;){var ze=!1;B.token==="?."&&(ze=!0,z(B));var ut=(B.token==="("||B.token==="["||B.token===".")&&!0;if(!(ze||ut))break;if(Me=[],B.token==="(")if(ze||fi(le)||Tc(le)){if(H(B),z(B),B.token!==")")for(Me.push(O(B));B.token===",";)z(B),Me.push(O(B));if(B.token!==")")throw rt(B,"Parenthesis ) expected");te(B),z(B),le=new h(le,Me,ze)}else return le;else if(B.token==="["){if(H(B),z(B),B.token!=="]")for(Me.push(O(B));B.token===",";)z(B),Me.push(O(B));if(B.token!=="]")throw rt(B,"Parenthesis ] expected");te(B),z(B),le=new i(le,new d(Me),ze)}else{ze||z(B);var vn=B.tokenType===w.SYMBOL||B.tokenType===w.DELIMITER&&B.token in S;if(!vn){var Fa="Property name expected after ";throw Fa+=ze?"optional chain":"dot",rt(B,Fa)}Me.push(new u(B.token)),z(B);var my=!0;le=new i(le,new d(Me,my),ze)}}return le}function fe(B){var le,we;return B.token==='"'||B.token==="'"?(we=de(B,B.token),le=new u(we),le=oe(B,le),le):Se(B)}function de(B,le){for(var we="";I(B)!==""&&I(B)!==le;)if(I(B)==="\\"){U(B);var Me=I(B),ze=N[Me];if(ze!==void 0)we+=ze,B.index+=1;else if(Me==="u"){var ut=B.expression.slice(B.index+1,B.index+5);if(/^[0-9A-Fa-f]{4}$/.test(ut))we+=String.fromCharCode(parseInt(ut,16)),B.index+=5;else throw rt(B,"Invalid unicode character \\u".concat(ut))}else throw rt(B,"Bad escape character \\".concat(Me))}else we+=I(B),U(B);if(z(B),B.token!==le)throw rt(B,"End of string ".concat(le," expected"));return z(B),we}function Se(B){var le,we,Me,ze;if(B.token==="["){if(H(B),z(B),B.token!=="]"){var ut=_e(B);if(B.token===";"){for(Me=1,we=[ut];B.token===";";)z(B),B.token!=="]"&&(we[Me]=_e(B),Me++);if(B.token!=="]")throw rt(B,"End of matrix ] expected");te(B),z(B),ze=we[0].items.length;for(var vn=1;vn<Me;vn++)if(we[vn].items.length!==ze)throw pr(B,"Column dimensions mismatch ("+we[vn].items.length+" !== "+ze+")");le=new s(we)}else{if(B.token!=="]")throw rt(B,"End of matrix ] expected");te(B),z(B),le=ut}}else te(B),z(B),le=new s([]);return oe(B,le)}return Pe(B)}function _e(B){for(var le=[O(B)],we=1;B.token===",";)z(B),B.token!=="]"&&B.token!==";"&&(le[we]=O(B),we++);return new s(le)}function Pe(B){if(B.token==="{"){H(B);var le,we={};do if(z(B),B.token!=="}"){if(B.token==='"'||B.token==="'")le=de(B,B.token);else if(B.tokenType===w.SYMBOL||B.tokenType===w.DELIMITER&&B.token in S)le=B.token,z(B);else throw rt(B,"Symbol or string expected as object key");if(B.token!==":")throw rt(B,"Colon : expected after object key");z(B),we[le]=O(B)}while(B.token===",");if(B.token!=="}")throw rt(B,"Comma , or bracket } expected after object value");te(B),z(B);var Me=new f(we);return Me=oe(B,Me),Me}return Ee(B)}function Ee(B){var le;if(B.tokenType===w.NUMBER){le=B.token,z(B);var we=Ud(le,n),Me=t(le,we);return new u(Me)}return qe(B)}function qe(B){var le;if(B.token==="("){if(H(B),z(B),le=O(B),B.token!==")")throw rt(B,"Parenthesis ) expected");return te(B),z(B),le=new g(le),le=oe(B,le),le}return bt(B)}function bt(B){throw B.token===""?rt(B,"Unexpected end of expression"):rt(B,"Value expected")}function Lt(B){return B.index-B.token.length+1}function rt(B,le){var we=Lt(B),Me=new SyntaxError(le+" (char "+we+")");return Me.char=we,Me}function pr(B,le){var we=Lt(B),Me=new SyntaxError(le+" (char "+we+")");return Me.char=we,Me}return e.addConversion({from:"string",to:"Node",convert:y}),y}),m8="compile",WSe=["typed","parse"],KSe=Y(m8,WSe,r=>{var{typed:e,parse:t}=r;return e(m8,{string:function(i){return t(i).compile()},"Array | Matrix":function(i){return At(i,function(s){return t(s).compile()})}})}),p8="evaluate",XSe=["typed","parse"],YSe=Y(p8,XSe,r=>{var{typed:e,parse:t}=r;return e(p8,{string:function(i){var s=O1();return t(i).compile().evaluate(s)},"string, Map | Object":function(i,s){return t(i).compile().evaluate(s)},"Array | Matrix":function(i){var s=O1();return At(i,function(a){return t(a).compile().evaluate(s)})},"Array | Matrix, Map | Object":function(i,s){return At(i,function(a){return t(a).compile().evaluate(s)})}})}),QSe="Parser",JSe=["evaluate","parse"],ZSe=Y(QSe,JSe,r=>{var{evaluate:e,parse:t}=r;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:O1(),writable:!1})}n.prototype.type="Parser",n.prototype.isParser=!0,n.prototype.evaluate=function(s){return e(s,this.scope)},n.prototype.get=function(s){if(this.scope.has(s))return this.scope.get(s)},n.prototype.getAll=function(){return mge(this.scope)},n.prototype.getAllAsMap=function(){return this.scope};function i(s){if(s.length===0)return!1;for(var a=0;a<s.length;a++){var o=s.charAt(a-1),l=s.charAt(a),u=s.charAt(a+1),c=t.isAlpha(l,o,u)||a>0&&t.isDigit(l);if(!c)return!1}return!0}return n.prototype.set=function(s,a){if(!i(s))throw new Error("Invalid variable name: '".concat(s,"'. Variable names must follow the specified rules."));return this.scope.set(s,a),a},n.prototype.remove=function(s){this.scope.delete(s)},n.prototype.clear=function(){this.scope.clear()},n.prototype.toJSON=function(){var s={mathjs:"Parser",variables:{},functions:{}};for(var[a,o]of this.scope)if(AK(o)){if(!eTe(o))throw new Error("Cannot serialize external function ".concat(a));s.functions[a]="".concat(o.syntax," = ").concat(o.expr)}else s.variables[a]=o;return s},n.fromJSON=function(s){var a=new n;return Object.entries(s.variables).forEach(o=>{var[l,u]=o;return a.set(l,u)}),Object.entries(s.functions).forEach(o=>{var[l,u]=o;return a.evaluate(u)}),a},n},{isClass:!0});function eTe(r){return typeof r=="function"&&typeof r.syntax=="string"&&typeof r.expr=="string"}var g8="parser",tTe=["typed","Parser"],rTe=Y(g8,tTe,r=>{var{typed:e,Parser:t}=r;return e(g8,{"":function(){return new t}})}),v8="lup",nTe=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],iTe=Y(v8,nTe,r=>{var{typed:e,matrix:t,abs:n,addScalar:i,divideScalar:s,multiplyScalar:a,subtractScalar:o,larger:l,equalScalar:u,unaryMinus:c,DenseMatrix:h,SparseMatrix:d,Spa:f}=r;return e(v8,{DenseMatrix:function(v){return p(v)},SparseMatrix:function(v){return g(v)},Array:function(v){var x=t(v),y=p(x);return{L:y.L.valueOf(),U:y.U.valueOf(),p:y.p}}});function p(b){var v=b._size[0],x=b._size[1],y=Math.min(v,x),A=gt(b._data),w=[],_=[v,y],S=[],E=[y,x],C,N,D,M=[];for(C=0;C<v;C++)M[C]=C;for(N=0;N<x;N++){if(N>0)for(C=0;C<v;C++){var I=Math.min(C,N),U=0;for(D=0;D<I;D++)U=i(U,a(A[C][D],A[D][N]));A[C][N]=o(A[C][N],U)}var X=N,k=0,z=0;for(C=N;C<v;C++){var q=A[C][N],H=n(q);l(H,k)&&(X=C,k=H,z=q)}if(N!==X&&(M[N]=[M[X],M[X]=M[N]][0],h._swapRows(N,X,A)),N<v)for(C=N+1;C<v;C++){var te=A[C][N];u(te,0)||(A[C][N]=s(A[C][N],z))}}for(N=0;N<x;N++)for(C=0;C<v;C++){if(N===0&&(C<x&&(S[C]=[]),w[C]=[]),C<N){C<x&&(S[C][N]=A[C][N]),N<v&&(w[C][N]=0);continue}if(C===N){C<x&&(S[C][N]=A[C][N]),N<v&&(w[C][N]=1);continue}C<x&&(S[C][N]=0),N<v&&(w[C][N]=A[C][N])}var ce=new h({data:w,size:_}),re=new h({data:S,size:E}),O=[];for(C=0,y=M.length;C<y;C++)O[M[C]]=C;return{L:ce,U:re,p:O,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function g(b){var v=b._size[0],x=b._size[1],y=Math.min(v,x),A=b._values,w=b._index,_=b._ptr,S=[],E=[],C=[],N=[v,y],D=[],M=[],I=[],U=[y,x],X,k,z,q=[],H=[];for(X=0;X<v;X++)q[X]=X,H[X]=X;var te=function(O,ne){var W=H[O],pe=H[ne];q[W]=ne,q[pe]=O,H[O]=pe,H[ne]=W},ce=function(){var O=new f;k<v&&(C.push(S.length),S.push(1),E.push(k)),I.push(D.length);var ne=_[k],W=_[k+1];for(z=ne;z<W;z++)X=w[z],O.set(q[X],A[z]);k>0&&O.forEach(0,k-1,function(K,ae){d._forEachRow(K,S,E,C,function(ge,he){ge>K&&O.accumulate(ge,c(a(he,ae)))})});var pe=k,me=O.get(k),ie=n(me);O.forEach(k+1,v-1,function(K,ae){var ge=n(ae);l(ge,ie)&&(pe=K,ie=ge,me=ae)}),k!==pe&&(d._swapRows(k,pe,N[1],S,E,C),d._swapRows(k,pe,U[1],D,M,I),O.swap(k,pe),te(k,pe)),O.forEach(0,v-1,function(K,ae){K<=k?(D.push(ae),M.push(K)):(ae=s(ae,me),u(ae,0)||(S.push(ae),E.push(K)))})};for(k=0;k<x;k++)ce();return I.push(D.length),C.push(S.length),{L:new d({values:S,index:E,ptr:C,size:N}),U:new d({values:D,index:M,ptr:I,size:U}),p:q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),y8="qr",sTe=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],aTe=Y(y8,sTe,r=>{var{typed:e,matrix:t,zeros:n,identity:i,isZero:s,equal:a,sign:o,sqrt:l,conj:u,unaryMinus:c,addScalar:h,divideScalar:d,multiplyScalar:f,subtractScalar:p,complex:g}=r;return An(e(y8,{DenseMatrix:function(A){return v(A)},SparseMatrix:function(A){return x()},Array:function(A){var w=t(A),_=v(w);return{Q:_.Q.valueOf(),R:_.R.valueOf()}}}),{_denseQRimpl:b});function b(y){var A=y._size[0],w=y._size[1],_=i([A],"dense"),S=_._data,E=y.clone(),C=E._data,N,D,M,I=n([A],"");for(M=0;M<Math.min(w,A);++M){var U=C[M][M],X=c(a(U,0)?1:o(U)),k=u(X),z=0;for(N=M;N<A;N++)z=h(z,f(C[N][M],u(C[N][M])));var q=f(X,l(z));if(!s(q)){var H=p(U,q);for(I[M]=1,N=M+1;N<A;N++)I[N]=d(C[N][M],H);var te=c(u(d(H,q))),ce=void 0;for(D=M;D<w;D++){for(ce=0,N=M;N<A;N++)ce=h(ce,f(u(I[N]),C[N][D]));for(ce=f(ce,te),N=M;N<A;N++)C[N][D]=f(p(C[N][D],f(I[N],ce)),k)}for(N=0;N<A;N++){for(ce=0,D=M;D<A;D++)ce=h(ce,f(S[N][D],I[D]));for(ce=f(ce,te),D=M;D<A;++D)S[N][D]=d(p(S[N][D],f(ce,u(I[D]))),k)}}}return{Q:_,R:E,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function v(y){var A=b(y),w=A.R._data;if(y._data.length>0)for(var _=w[0][0].type==="Complex"?g(0):0,S=0;S<w.length;++S)for(var E=0;E<S&&E<(w[0]||[]).length;++E)w[S][E]=_;return A}function x(y){throw new Error("qr not implemented for sparse matrices yet")}});function oTe(r,e,t,n){r._values;for(var i=r._index,s=r._ptr,a=r._size,o=r._datatype,l=a[0],u=a[1],c=null,h=[],d=[],f=0,p=0;p<u;p++){d[p]=f;for(var g=t?t[p]:p,b=s[g],v=s[g+1],x=b;x<v;x++){var y=i[x];h[f]=y,f++}}return d[u]=f,r.createSparseMatrix({values:c,index:h,ptr:d,size:[l,u],datatype:o})}function gY(r,e,t,n,i,s,a){var o=0;for(t[a]=r;o>=0;){var l=t[a+o],u=t[n+l];u===-1?(o--,s[e++]=l):(t[n+l]=t[i+u],++o,t[a+o]=u)}return e}function lTe(r,e){if(!r)return null;var t=0,n,i=[],s=[],a=0,o=e,l=2*e;for(n=0;n<e;n++)s[a+n]=-1;for(n=e-1;n>=0;n--)r[n]!==-1&&(s[o+n]=s[a+r[n]],s[a+r[n]]=n);for(n=0;n<e;n++)r[n]===-1&&(t=gY(n,t,s,a,o,i,l));return i}function uTe(r,e){if(!r)return null;var t=r._index,n=r._ptr,i=r._size,s=i[0],a=i[1],o=[],l=[],u=0,c=a,h,d;for(h=0;h<s;h++)l[c+h]=-1;for(var f=0;f<a;f++){o[f]=-1,l[u+f]=-1;for(var p=n[f],g=n[f+1],b=p;b<g;b++){var v=t[b];for(h=l[c+v];h!==-1&&h<f;h=d)d=l[u+h],l[u+h]=f,d===-1&&(o[h]=f);l[c+v]=f}}return o}function cTe(r,e,t){for(var n=r._values,i=r._index,s=r._ptr,a=r._size,o=a[1],l=0,u=0;u<o;u++){var c=s[u];for(s[u]=l;c<s[u+1];c++)e(i[c],u,n?n[c]:1,t)&&(i[l]=i[c],n&&(n[l]=n[c]),l++)}return s[o]=l,i.splice(l,i.length-l),n&&n.splice(l,n.length-l),l}function Xc(r){return-r-2}var hTe="csAmd",dTe=["add","multiply","transpose"],fTe=Y(hTe,dTe,r=>{var{add:e,multiply:t,transpose:n}=r;return function(c,h){if(!h||c<=0||c>3)return null;var d=h._size,f=d[0],p=d[1],g=0,b=Math.max(16,10*Math.sqrt(p));b=Math.min(p-2,b);var v=i(c,h,f,p,b);cTe(v,l,null);for(var x=v._index,y=v._ptr,A=y[p],w=[],_=[],S=0,E=p+1,C=2*(p+1),N=3*(p+1),D=4*(p+1),M=5*(p+1),I=6*(p+1),U=7*(p+1),X=w,k=s(p,y,_,S,N,X,C,U,E,I,D,M),z=a(p,y,_,M,D,I,b,E,N,X,C),q=0,H,te,ce,re,O,ne,W,pe,me,ie,K,ae,ge,he,be,ve;z<p;){for(ce=-1;q<p&&(ce=_[N+q])===-1;q++);_[C+ce]!==-1&&(X[_[C+ce]]=-1),_[N+q]=_[C+ce];var Ie=_[D+ce],Ve=_[E+ce];z+=Ve;var We=0;_[E+ce]=-Ve;var Be=y[ce],$e=Ie===0?Be:A,Ge=$e;for(re=1;re<=Ie+1;re++){for(re>Ie?(ne=ce,W=Be,pe=_[S+ce]-Ie):(ne=x[Be++],W=y[ne],pe=_[S+ne]),O=1;O<=pe;O++)H=x[W++],!((me=_[E+H])<=0)&&(We+=me,_[E+H]=-me,x[Ge++]=H,_[C+H]!==-1&&(X[_[C+H]]=X[H]),X[H]!==-1?_[C+X[H]]=_[C+H]:_[N+_[M+H]]=_[C+H]);ne!==ce&&(y[ne]=Xc(ce),_[I+ne]=0)}for(Ie!==0&&(A=Ge),_[M+ce]=We,y[ce]=$e,_[S+ce]=Ge-$e,_[D+ce]=-2,k=o(k,g,_,I,p),ie=$e;ie<Ge;ie++)if(H=x[ie],!((K=_[D+H])<=0)){me=-_[E+H];var Z=k-me;for(Be=y[H],ae=y[H]+K-1;Be<=ae;Be++)ne=x[Be],_[I+ne]>=k?_[I+ne]-=me:_[I+ne]!==0&&(_[I+ne]=_[M+ne]+Z)}for(ie=$e;ie<Ge;ie++){for(H=x[ie],ae=y[H],ge=ae+_[D+H]-1,he=ae,be=0,ve=0,Be=ae;Be<=ge;Be++)if(ne=x[Be],_[I+ne]!==0){var Q=_[I+ne]-k;Q>0?(ve+=Q,x[he++]=ne,be+=ne):(y[ne]=Xc(ce),_[I+ne]=0)}_[D+H]=he-ae+1;var L=he,G=ae+_[S+H];for(Be=ge+1;Be<G;Be++){te=x[Be];var ee=_[E+te];ee<=0||(ve+=ee,x[he++]=te,be+=te)}ve===0?(y[H]=Xc(ce),me=-_[E+H],We-=me,Ve+=me,z+=me,_[E+H]=0,_[D+H]=-1):(_[M+H]=Math.min(_[M+H],ve),x[he]=x[L],x[L]=x[ae],x[ae]=ce,_[S+H]=he-ae+1,be=(be<0?-be:be)%p,_[C+H]=_[U+be],_[U+be]=H,X[H]=be)}for(_[M+ce]=We,g=Math.max(g,We),k=o(k+g,g,_,I,p),ie=$e;ie<Ge;ie++)if(H=x[ie],!(_[E+H]>=0))for(be=X[H],H=_[U+be],_[U+be]=-1;H!==-1&&_[C+H]!==-1;H=_[C+H],k++){for(pe=_[S+H],K=_[D+H],Be=y[H]+1;Be<=y[H]+pe-1;Be++)_[I+x[Be]]=k;var oe=H;for(te=_[C+H];te!==-1;){var fe=_[S+te]===pe&&_[D+te]===K;for(Be=y[te]+1;fe&&Be<=y[te]+pe-1;Be++)_[I+x[Be]]!==k&&(fe=0);fe?(y[te]=Xc(H),_[E+H]+=_[E+te],_[E+te]=0,_[D+te]=-1,te=_[C+te],_[C+oe]=te):(oe=te,te=_[C+te])}}for(Be=$e,ie=$e;ie<Ge;ie++)H=x[ie],!((me=-_[E+H])<=0)&&(_[E+H]=me,ve=_[M+H]+We-me,ve=Math.min(ve,p-z-me),_[N+ve]!==-1&&(X[_[N+ve]]=H),_[C+H]=_[N+ve],X[H]=-1,_[N+ve]=H,q=Math.min(q,ve),_[M+H]=ve,x[Be++]=H);_[E+ce]=Ve,(_[S+ce]=Be-$e)===0&&(y[ce]=-1,_[I+ce]=0),Ie!==0&&(A=Be)}for(H=0;H<p;H++)y[H]=Xc(y[H]);for(te=0;te<=p;te++)_[N+te]=-1;for(te=p;te>=0;te--)_[E+te]>0||(_[C+te]=_[N+y[te]],_[N+y[te]]=te);for(ne=p;ne>=0;ne--)_[E+ne]<=0||y[ne]!==-1&&(_[C+ne]=_[N+y[ne]],_[N+y[ne]]=ne);for(ce=0,H=0;H<=p;H++)y[H]===-1&&(ce=gY(H,ce,_,N,C,w,I));return w.splice(w.length-1,1),w};function i(u,c,h,d,f){var p=n(c);if(u===1&&d===h)return e(c,p);if(u===2){for(var g=p._index,b=p._ptr,v=0,x=0;x<h;x++){var y=b[x];if(b[x]=v,!(b[x+1]-y>f))for(var A=b[x+1];y<A;y++)g[v++]=g[y]}return b[h]=v,c=n(p),t(p,c)}return t(p,c)}function s(u,c,h,d,f,p,g,b,v,x,y,A){for(var w=0;w<u;w++)h[d+w]=c[w+1]-c[w];h[d+u]=0;for(var _=0;_<=u;_++)h[f+_]=-1,p[_]=-1,h[g+_]=-1,h[b+_]=-1,h[v+_]=1,h[x+_]=1,h[y+_]=0,h[A+_]=h[d+_];var S=o(0,0,h,x,u);return h[y+u]=-2,c[u]=-1,h[x+u]=0,S}function a(u,c,h,d,f,p,g,b,v,x,y){for(var A=0,w=0;w<u;w++){var _=h[d+w];if(_===0)h[f+w]=-2,A++,c[w]=-1,h[p+w]=0;else if(_>g)h[b+w]=0,h[f+w]=-1,A++,c[w]=Xc(u),h[b+u]++;else{var S=h[v+_];S!==-1&&(x[S]=w),h[y+w]=h[v+_],h[v+_]=w}}return A}function o(u,c,h,d,f){if(u<2||u+c<0){for(var p=0;p<f;p++)h[d+p]!==0&&(h[d+p]=1);u=2}return u}function l(u,c){return u!==c}});function mTe(r,e,t,n,i,s,a){var o,l,u=0,c;if(r<=e||t[n+e]<=t[i+r])return-1;t[i+r]=t[n+e];var h=t[s+r];if(t[s+r]=e,h===-1)u=1,c=r;else{for(u=2,c=h;c!==t[a+c];c=t[a+c]);for(o=h;o!==c;o=l)l=t[a+o],t[a+o]=c}return{jleaf:u,q:c}}var pTe="csCounts",gTe=["transpose"],vTe=Y(pTe,gTe,r=>{var{transpose:e}=r;return function(t,n,i,s){if(!t||!n||!i)return null;var a=t._size,o=a[0],l=a[1],u,c,h,d,f,p,g,b=4*l+(s?l+o+1:0),v=[],x=0,y=l,A=2*l,w=3*l,_=4*l,S=5*l+1;for(h=0;h<b;h++)v[h]=-1;var E=[],C=e(t),N=C._index,D=C._ptr;for(h=0;h<l;h++)for(c=i[h],E[c]=v[w+c]===-1?1:0;c!==-1&&v[w+c]===-1;c=n[c])v[w+c]=h;if(s){for(h=0;h<l;h++)v[i[h]]=h;for(u=0;u<o;u++){for(h=l,p=D[u],g=D[u+1],f=p;f<g;f++)h=Math.min(h,v[N[f]]);v[S+u]=v[_+h],v[_+h]=u}}for(u=0;u<l;u++)v[x+u]=u;for(h=0;h<l;h++){for(c=i[h],n[c]!==-1&&E[n[c]]--,d=s?v[_+h]:c;d!==-1;d=s?v[S+d]:-1)for(f=D[d];f<D[d+1];f++){u=N[f];var M=mTe(u,c,v,w,y,A,x);M.jleaf>=1&&E[c]++,M.jleaf===2&&E[M.q]--}n[c]!==-1&&(v[x+c]=n[c])}for(c=0;c<l;c++)n[c]!==-1&&(E[n[c]]+=E[c]);return E}}),yTe="csSqr",bTe=["add","multiply","transpose"],wTe=Y(yTe,bTe,r=>{var{add:e,multiply:t,transpose:n}=r,i=fTe({add:e,multiply:t,transpose:n}),s=vTe({transpose:n});return function(l,u,c){var h=u._ptr,d=u._size,f=d[1],p,g={};if(g.q=i(l,u),l&&!g.q)return null;if(c){var b=l?oTe(u,null,g.q):u;g.parent=uTe(b);var v=lTe(g.parent,f);if(g.cp=s(b,g.parent,v,1),b&&g.parent&&g.cp&&a(b,g))for(g.unz=0,p=0;p<f;p++)g.unz+=g.cp[p]}else g.unz=4*h[f]+f,g.lnz=g.unz;return g};function a(o,l){var u=o._ptr,c=o._index,h=o._size,d=h[0],f=h[1];l.pinv=[],l.leftmost=[];var p=l.parent,g=l.pinv,b=l.leftmost,v=[],x=0,y=d,A=d+f,w=d+2*f,_,S,E,C,N;for(S=0;S<f;S++)v[y+S]=-1,v[A+S]=-1,v[w+S]=0;for(_=0;_<d;_++)b[_]=-1;for(S=f-1;S>=0;S--)for(C=u[S],N=u[S+1],E=C;E<N;E++)b[c[E]]=S;for(_=d-1;_>=0;_--)g[_]=-1,S=b[_],S!==-1&&(v[w+S]++===0&&(v[A+S]=_),v[x+_]=v[y+S],v[y+S]=_);for(l.lnz=0,l.m2=d,S=0;S<f;S++)if(_=v[y+S],l.lnz++,_<0&&(_=l.m2++),g[_]=S,!(--w[S]<=0)){l.lnz+=v[w+S];var D=p[S];D!==-1&&(v[w+D]===0&&(v[A+D]=v[A+S]),v[x+v[A+S]]=v[y+D],v[y+D]=v[x+_],v[w+D]+=v[w+S])}for(_=0;_<d;_++)g[_]<0&&(g[_]=S++);return!0}});function WP(r,e){return r[e]<0}function vY(r,e){r[e]=Xc(r[e])}function b8(r){return r<0?Xc(r):r}function xTe(r,e,t,n,i){var s=e._index,a=e._ptr,o=e._size,l=o[1],u,c,h,d=0;for(n[0]=r;d>=0;){r=n[d];var f=i?i[r]:r;WP(a,r)||(vY(a,r),n[l+d]=f<0?0:b8(a[f]));var p=1;for(c=n[l+d],h=f<0?0:b8(a[f+1]);c<h;c++)if(u=s[c],!WP(a,u)){n[l+d]=c,n[++d]=u,p=0;break}p&&(d--,n[--t]=r)}return t}function _Te(r,e,t,n,i){var s=r._ptr,a=r._size,o=e._index,l=e._ptr,u=a[1],c,h,d,f=u;for(h=l[t],d=l[t+1],c=h;c<d;c++){var p=o[c];WP(s,p)||(f=xTe(p,r,f,n,i))}for(c=f;c<u;c++)vY(s,n[c]);return f}var ATe="csSpsolve",ETe=["divideScalar","multiply","subtract"],STe=Y(ATe,ETe,r=>{var{divideScalar:e,multiply:t,subtract:n}=r;return function(s,a,o,l,u,c,h){var d=s._values,f=s._index,p=s._ptr,g=s._size,b=g[1],v=a._values,x=a._index,y=a._ptr,A,w,_,S,E=_Te(s,a,o,l,c);for(A=E;A<b;A++)u[l[A]]=0;for(w=y[o],_=y[o+1],A=w;A<_;A++)u[x[A]]=v[A];for(var C=E;C<b;C++){var N=l[C],D=c?c[N]:N;if(!(D<0))for(w=p[D],_=p[D+1],u[N]=e(u[N],d[h?w:_-1]),A=h?w+1:w,S=h?_:_-1;A<S;A++){var M=f[A];u[M]=n(u[M],t(d[A],u[N]))}}return E}}),TTe="csLu",CTe=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],NTe=Y(TTe,CTe,r=>{var{abs:e,divideScalar:t,multiply:n,subtract:i,larger:s,largerEq:a,SparseMatrix:o}=r,l=STe({divideScalar:t,multiply:n,subtract:i});return function(c,h,d){if(!c)return null;var f=c._size,p=f[1],g,b=100,v=100;h&&(g=h.q,b=h.lnz||b,v=h.unz||v);var x=[],y=[],A=[],w=new o({values:x,index:y,ptr:A,size:[p,p]}),_=[],S=[],E=[],C=new o({values:_,index:S,ptr:E,size:[p,p]}),N=[],D,M,I=[],U=[];for(D=0;D<p;D++)I[D]=0,N[D]=-1,A[D+1]=0;b=0,v=0;for(var X=0;X<p;X++){A[X]=b,E[X]=v;var k=g?g[X]:X,z=l(w,c,k,U,I,N,1),q=-1,H=-1;for(M=z;M<p;M++)if(D=U[M],N[D]<0){var te=e(I[D]);s(te,H)&&(H=te,q=D)}else S[v]=N[D],_[v++]=I[D];if(q===-1||H<=0)return null;N[k]<0&&a(e(I[k]),n(H,d))&&(q=k);var ce=I[q];for(S[v]=X,_[v++]=ce,N[q]=X,y[b]=q,x[b++]=1,M=z;M<p;M++)D=U[M],N[D]<0&&(y[b]=D,x[b++]=t(I[D],ce)),I[D]=0}for(A[p]=b,E[p]=v,M=0;M<b;M++)y[M]=N[y[M]];return x.splice(b,x.length-b),y.splice(b,y.length-b),_.splice(v,_.length-v),S.splice(v,S.length-v),{L:w,U:C,pinv:N}}}),w8="slu",DTe=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],MTe=Y(w8,DTe,r=>{var{typed:e,abs:t,add:n,multiply:i,transpose:s,divideScalar:a,subtract:o,larger:l,largerEq:u,SparseMatrix:c}=r,h=wTe({add:n,multiply:i,transpose:s}),d=NTe({abs:t,divideScalar:a,multiply:i,subtract:o,larger:l,largerEq:u,SparseMatrix:c});return e(w8,{"SparseMatrix, number, number":function(p,g,b){if(!tt(g)||g<0||g>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(b<0||b>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var v=h(g,p,!1),x=d(p,v,b);return{L:x.L,U:x.U,p:x.pinv,q:v.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function x8(r,e){var t,n=e.length,i=[];if(r)for(t=0;t<n;t++)i[r[t]]=e[t];else for(t=0;t<n;t++)i[t]=e[t];return i}var _8="lusolve",ITe=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],PTe=Y(_8,ITe,r=>{var{typed:e,matrix:t,lup:n,slu:i,usolve:s,lsolve:a,DenseMatrix:o}=r,l=m_({DenseMatrix:o});return e(_8,{"Array, Array | Matrix":function(d,f){d=t(d);var p=n(d),g=c(p.L,p.U,p.p,null,f);return g.valueOf()},"DenseMatrix, Array | Matrix":function(d,f){var p=n(d);return c(p.L,p.U,p.p,null,f)},"SparseMatrix, Array | Matrix":function(d,f){var p=n(d);return c(p.L,p.U,p.p,null,f)},"SparseMatrix, Array | Matrix, number, number":function(d,f,p,g){var b=i(d,p,g);return c(b.L,b.U,b.p,b.q,f)},"Object, Array | Matrix":function(d,f){return c(d.L,d.U,d.p,d.q,f)}});function u(h){if(lt(h))return h;if(cr(h))return t(h);throw new TypeError("Invalid Matrix LU decomposition")}function c(h,d,f,p,g){h=u(h),d=u(d),f&&(g=l(h,g,!0),g._data=x8(f,g._data));var b=a(h,g),v=s(d,b);return p&&(v._data=x8(p,v._data)),v}}),A8="polynomialRoot",RTe=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],kTe=Y(A8,RTe,r=>{var{typed:e,isZero:t,equalScalar:n,add:i,subtract:s,multiply:a,divide:o,sqrt:l,unaryMinus:u,cbrt:c,typeOf:h,im:d,re:f}=r;return e(A8,{"number|Complex, ...number|Complex":(p,g)=>{for(var b=[p,...g];b.length>0&&t(b[b.length-1]);)b.pop();if(b.length<2)throw new RangeError("Polynomial [".concat(p,", ").concat(g,"] must have a non-zero non-constant coefficient"));switch(b.length){case 2:return[u(o(b[0],b[1]))];case 3:{var[v,x,y]=b,A=a(2,y),w=a(x,x),_=a(4,y,v);if(n(w,_))return[o(u(x),A)];var S=l(s(w,_));return[o(s(S,x),A),o(s(u(S),x),A)]}case 4:{var[E,C,N,D]=b,M=u(a(3,D)),I=a(N,N),U=a(3,D,C),X=i(a(2,N,N,N),a(27,D,D,E)),k=a(9,D,N,C);if(n(I,U)&&n(X,k))return[o(N,M)];var z=s(I,U),q=s(X,k),H=i(a(18,D,N,C,E),a(N,N,C,C)),te=i(a(4,N,N,N,E),a(4,D,C,C,C),a(27,D,D,E,E));if(n(H,te))return[o(s(a(4,D,N,C),i(a(9,D,D,E),a(N,N,N))),a(D,z)),o(s(a(9,D,E),a(N,C)),a(2,z))];var ce;n(I,U)?ce=q:ce=o(i(q,l(s(a(q,q),a(4,z,z,z)))),2);var re=!0,O=c(ce,re).toArray().map(ne=>o(i(N,ne,o(z,ne)),M));return O.map(ne=>h(ne)==="Complex"&&n(f(ne),f(ne)+d(ne))?f(ne):ne)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(b))}}})}),FTe="Help",OTe=["evaluate"],BTe=Y(FTe,OTe,r=>{var{evaluate:e}=r;function t(n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!n)throw new Error('Argument "doc" missing');this.doc=n}return t.prototype.type="Help",t.prototype.isHelp=!0,t.prototype.toString=function(){var n=this.doc||{},i=`
`;if(n.name&&(i+="Name: "+n.name+`

`),n.category&&(i+="Category: "+n.category+`

`),n.description&&(i+=`Description:
    `+n.description+`

`),n.syntax&&(i+=`Syntax:
    `+n.syntax.join(`
    `)+`

`),n.examples){i+=`Examples:
`;for(var s=!1,a=e("config()"),o={config:h=>(s=!0,e("config(newConfig)",{newConfig:h}))},l=0;l<n.examples.length;l++){var u=n.examples[l];i+="    "+u+`
`;var c=void 0;try{c=e(u,o)}catch(h){c=h}c!==void 0&&!_K(c)&&(i+="        "+Pt(c,{precision:14})+`
`)}i+=`
`,s&&e("config(originalConfig)",{originalConfig:a})}return n.mayThrow&&n.mayThrow.length&&(i+="Throws: "+n.mayThrow.join(", ")+`

`),n.seealso&&n.seealso.length&&(i+="See also: "+n.seealso.join(", ")+`
`),i},t.prototype.toJSON=function(){var n=gt(this.doc);return n.mathjs="Help",n},t.fromJSON=function(n){var i={};return Object.keys(n).filter(s=>s!=="mathjs").forEach(s=>{i[s]=n[s]}),new t(i)},t.prototype.valueOf=t.prototype.toString,t},{isClass:!0}),LTe="Chain",$Te=["?on","math","typed"],VTe=Y(LTe,$Te,r=>{var{on:e,math:t,typed:n}=r;function i(u){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");SK(u)?this.value=u.value:this.value=u}i.prototype.type="Chain",i.prototype.isChain=!0,i.prototype.done=function(){return this.value},i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return Pt(this.value)},i.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},i.fromJSON=function(u){return new i(u.value)};function s(u,c){typeof c=="function"&&(i.prototype[u]=o(c))}function a(u,c){Cge(i.prototype,u,function(){var d=c();if(typeof d=="function")return o(d)})}function o(u){return function(){if(arguments.length===0)return new i(u(this.value));for(var c=[this.value],h=0;h<arguments.length;h++)c[h+1]=arguments[h];if(n.isTypedFunction(u)){var d=n.resolve(u,c);if(d.params.length===1)throw new Error("chain function "+u.name+" cannot match rest parameter between chain value and additional arguments.");return new i(d.implementation.apply(u,c))}return new i(u.apply(u,c))}}i.createProxy=function(u,c){if(typeof u=="string")s(u,c);else{var h=function(p){Ze(u,p)&&l[p]===void 0&&a(p,()=>u[p])};for(var d in u)h(d)}};var l={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return i.createProxy(t),e&&e("import",function(u,c,h){h||a(u,c)}),i},{isClass:!0}),E8={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},UTe={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},zTe={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},jTe={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},qTe={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},HTe={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},GTe={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},WTe={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},KTe={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},XTe={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},YTe={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},S8={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},QTe={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},JTe={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},ZTe={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},eCe={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},tCe={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},rCe={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","bigint","complex","fraction","index","matrix","string","unit"]},nCe={name:"bigint",category:"Construction",syntax:["bigint(x)"],description:"Create a bigint, an integer with an arbitrary number of digits, from a number or string.",examples:["123123123123123123 # a large number will lose digits",'bigint("123123123123123123")','bignumber(["1", "3", "5"])'],seealso:["boolean","bignumber","number","complex","fraction","index","matrix","string","unit"]},iCe={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},sCe={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},aCe={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},oCe={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},lCe={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix","number","range","string","unit"]},uCe={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},cCe={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","bigint","boolean","complex","fraction","index","matrix","string","unit"]},hCe={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},dCe={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},fCe={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},mCe={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},pCe={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},gCe={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},vCe={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},yCe={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},bCe={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},wCe={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},xCe={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},_Ce={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},ACe={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},ECe={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},SCe={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},TCe={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},CCe={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},NCe={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},DCe={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},MCe={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},ICe={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},PCe={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},RCe={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},kCe={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},FCe={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},OCe={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},BCe={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},LCe={name:"ceil",category:"Arithmetic",syntax:["ceil(x)","ceil(x, n)","ceil(unit, valuelessUnit)","ceil(unit, n, valuelessUnit)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)","ceil(3.241cm, cm)","ceil(3.241cm, 2, cm)"],seealso:["floor","fix","round"]},$Ce={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},VCe={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},UCe={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},zCe={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},jCe={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},qCe={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},HCe={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},GCe={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},WCe={name:"fix",category:"Arithmetic",syntax:["fix(x)","fix(x, n)","fix(unit, valuelessUnit)","fix(unit, n, valuelessUnit)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)","fix(3.241cm, cm)","fix(3.241cm, 2, cm)"],seealso:["ceil","floor","round"]},KCe={name:"floor",category:"Arithmetic",syntax:["floor(x)","floor(x, n)","floor(unit, valuelessUnit)","floor(unit, n, valuelessUnit)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)","floor(3.241cm, cm)","floor(3.241cm, 2, cm)"],seealso:["ceil","fix","round"]},XCe={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},YCe={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenuse of a list with values.",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},QCe={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax  1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},JCe={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},ZCe={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},eNe={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},tNe={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},rNe={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},nNe={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},iNe={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},sNe={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},aNe={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},oNe={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},lNe={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},uNe={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},cNe={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>0, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},hNe={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},dNe={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},fNe={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},mNe={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},pNe={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},gNe={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},vNe={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},yNe={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},bNe={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},wNe={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},xNe={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},_Ne={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},ANe={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},ENe={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},SNe={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},TNe={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},CNe={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},NNe={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},DNe={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},MNe={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},INe={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"The Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers","bernoulli"]},PNe={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},RNe={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},kNe={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},FNe={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},ONe={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:["parser","parse","compile"]},BNe={name:"parser",category:"Expression",syntax:["parser()"],description:"Create a parser object that keeps a context of variables and their values, allowing the evaluation of expressions in that context.",examples:["myParser = parser()",'myParser.evaluate("sqrt(3^2 + 4^2)")','myParser.set("x", 3)','myParser.evaluate("y = x + 3")','myParser.evaluate(["y = x + 3", "y = y + 1"])','myParser.get("y")'],seealso:["evaluate","parse","compile"]},LNe={name:"parse",category:"Expression",syntax:["parse(expr)","parse(expr, options)","parse([expr1, expr2, expr3, ...])","parse([expr1, expr2, expr3, ...], options)"],description:"Parse an expression. Returns a node tree, which can be evaluated by invoking node.evaluate() or transformed into a functional object via node.compile().",examples:['node1 = parse("sqrt(3^2 + 4^2)")',"node1.evaluate()","code1 = node1.compile()","code1.evaluate()","scope = {a: 3, b: 4}",'node2 = parse("a * b")',"node2.evaluate(scope)","code2 = node2.compile()","code2.evaluate(scope)"],seealso:["parser","evaluate","compile"]},$Ne={name:"compile",category:"Expression",syntax:["compile(expr) ","compile([expr1, expr2, expr3, ...])"],description:"Parse and compile an expression. Returns a an object with a function evaluate([scope]) to evaluate the compiled expression.",examples:['code1 = compile("sqrt(3^2 + 4^2)")',"code1.evaluate() ",'code2 = compile("a * b")',"code2.evaluate({a: 3, b: 4})"],seealso:["parser","parse","evaluate"]},VNe={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},UNe={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},zNe={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},jNe={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},qNe={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},HNe={name:"nullish",category:"Logical",syntax:["x ?? y","nullish(x, y)"],description:"Nullish coalescing operator. Returns the right-hand operand when the left-hand operand is null or undefined, and otherwise returns the left-hand operand.",examples:["null ?? 42","undefined ?? 42","0 ?? 42","false ?? 42","null ?? undefined ?? 42"],seealso:["and","or","not"]},GNe={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},WNe={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},KNe={name:"mapSlices",category:"Matrix",syntax:["mapSlices(A, dim, callback)"],description:"Generate a matrix one dimension less than A by applying callback to each slice of A along dimension dim.",examples:["A = [[1, 2], [3, 4]]","mapSlices(A, 1, sum)","mapSlices(A, 2, prod)"],seealso:["map","forEach"]},XNe={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},YNe={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},QNe={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},JNe={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},ZNe={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},eDe={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},tDe={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},rDe={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicate the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},nDe={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},iDe={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},sDe={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},aDe={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},oDe={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},lDe={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},uDe={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},cDe={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},hDe={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the MoorePenrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},dDe={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the Kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},fDe={name:"map",category:"Matrix",syntax:["map(x, callback)","map(x, y, ..., callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array or the matrices/arrays.",examples:["map([1, 2, 3], square)","map([1, 2], [3, 4], f(a,b) = a + b)"],seealso:["filter","forEach"]},mDe={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},pDe={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},gDe={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},vDe={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},yDe={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},bDe={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},wDe={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},xDe={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},_De={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},ADe={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},EDe={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},SDe={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},TDe={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},CDe={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},NDe={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},DDe={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},MDe={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},IDe={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},PDe={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional Fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},RDe={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse Fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},kDe={name:"bernoulli",category:"Probability",syntax:["bernoulli(n)"],description:"The nth Bernoulli number",examples:["bernoulli(4)","bernoulli(fraction(12))"],seealso:["combinations","gamma","stirlingS2"]},FDe={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},ODe={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},BDe={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},LDe={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},$De={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},VDe={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},UDe={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},zDe={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},jDe={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},qDe={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},HDe={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},GDe={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},WDe={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},KDe={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},XDe={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},YDe={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},QDe={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},JDe={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not. Comparing a value with NaN returns false.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},ZDe={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},e2e={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not. Comparing a value with NaN returns false.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},t2e={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},r2e={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},n2e={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},i2e={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},s2e={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},a2e={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},o2e={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},l2e={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},u2e={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},c2e={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},h2e={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},d2e={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},f2e={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},m2e={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},p2e={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},g2e={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemann's Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},v2e={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},y2e={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},b2e={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},w2e={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},x2e={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},_2e={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},A2e={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},E2e={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probability are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},S2e={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},T2e={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},C2e={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","variance"]},N2e={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},D2e={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},M2e={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},I2e={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},P2e={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},R2e={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the inverse hyperbolic tangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},k2e={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},F2e={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the inverse hyperbolic cosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},O2e={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},B2e={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},L2e={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},$2e={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},V2e={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},U2e={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},z2e={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},j2e={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},q2e={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},H2e={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},G2e={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},W2e={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},K2e={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},X2e={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},Y2e={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},Q2e={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},J2e={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},Z2e={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},eMe={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},tMe={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},rMe={name:"toBest",category:"Units",syntax:["toBest(x)","toBest(x, unitList)","toBest(x, unitList, options)"],description:"Converts to the most appropriate display unit.",examples:['toBest(unit(5000, "m"))','toBest(unit(3500000, "W"))','toBest(unit(0.000000123, "A"))','toBest(unit(10, "m"), "cm")','toBest(unit(10, "m"), "mm,km", {offset: 1.5})'],seealso:[]},nMe={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},iMe={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables, and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},sMe={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},aMe={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},oMe={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},lMe={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},uMe={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero","isFinite","isBounded"]},cMe={name:"isBounded",category:"Utils",syntax:["isBounded(x)"],description:"Test whether a value or its entries are bounded.",examples:["isBounded(Infinity)","isBounded(bigint(3))","isBounded([3, -Infinity, -3])"],seealso:["isFinite","isNumeric","isNaN","isNegative","isPositive"]},hMe={name:"isFinite",category:"Utils",syntax:["isFinite(x)"],description:"Test whether a value is finite, elementwise on collections.",examples:["isFinite(Infinity)","isFinite(bigint(3))","isFinite([3, -Infinity, -3])"],seealso:["isBounded","isNumeric","isNaN","isNegative","isPositive"]},dMe={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},fMe={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue","isFinite","isBounded"]},mMe={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},pMe={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},gMe={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},vMe={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, bigint, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "bigint")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","bigint","fraction","bignumber","string","format"]},yMe={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},bMe={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},wMe={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},xMe={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},_Me={bignumber:rCe,bigint:nCe,boolean:iCe,complex:sCe,createUnit:aCe,fraction:oCe,index:lCe,matrix:uCe,number:cCe,sparse:hCe,splitUnit:dCe,string:fCe,unit:mCe,e:E8,E:E8,false:UTe,i:zTe,Infinity:jTe,LN2:HTe,LN10:qTe,LOG2E:WTe,LOG10E:GTe,NaN:KTe,null:XTe,pi:S8,PI:S8,phi:YTe,SQRT1_2:QTe,SQRT2:JTe,tau:ZTe,true:eCe,version:tCe,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant. Deprecated in favor of coulombConstant",examples:["coulombConstant"]},coulombConstant:{description:"Coulomb's constant",examples:["coulombConstant"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Bohr magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Bohr radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:yCe,lsolve:wCe,lsolveAll:xCe,lup:_Ce,lusolve:ACe,leafCount:bCe,polynomialRoot:ECe,resolve:CCe,simplify:NCe,simplifyConstant:DCe,simplifyCore:MCe,symbolicEqual:PCe,rationalize:TCe,slu:ICe,usolve:RCe,usolveAll:kCe,qr:SCe,abs:FCe,add:OCe,cbrt:BCe,ceil:LCe,cube:$Ce,divide:VCe,dotDivide:UCe,dotMultiply:zCe,dotPow:jCe,exp:qCe,expm:HCe,expm1:GCe,fix:WCe,floor:KCe,gcd:XCe,hypot:YCe,lcm:JCe,log:ZCe,log2:rNe,log1p:tNe,log10:eNe,mod:nNe,multiply:iNe,norm:sNe,nthRoot:aNe,nthRoots:oNe,pow:lNe,round:uNe,sign:cNe,sqrt:hNe,sqrtm:dNe,square:gNe,subtract:vNe,unaryMinus:yNe,unaryPlus:bNe,xgcd:wNe,invmod:QCe,bitAnd:xNe,bitNot:_Ne,bitOr:ANe,bitXor:ENe,leftShift:SNe,rightArithShift:TNe,rightLogShift:CNe,bellNumbers:NNe,catalan:DNe,composition:MNe,stirlingS2:INe,config:pCe,import:gCe,typed:vCe,arg:PNe,conj:RNe,re:FNe,im:kNe,evaluate:ONe,help:VNe,parse:LNe,parser:BNe,compile:$Ne,distance:UNe,intersect:zNe,and:jNe,not:qNe,nullish:HNe,or:GNe,xor:WNe,mapSlices:KNe,concat:YNe,count:QNe,cross:JNe,column:XNe,ctranspose:ZNe,det:eDe,diag:tDe,diff:rDe,dot:nDe,getMatrixDataType:lDe,identity:uDe,filter:sDe,flatten:aDe,forEach:oDe,inv:cDe,pinv:hDe,eigs:iDe,kron:dDe,matrixFromFunction:pDe,matrixFromRows:gDe,matrixFromColumns:mDe,map:fDe,ones:vDe,partitionSelect:yDe,range:bDe,resize:xDe,reshape:wDe,rotate:_De,rotationMatrix:ADe,row:EDe,size:SDe,sort:TDe,squeeze:CDe,subset:NDe,trace:DDe,transpose:MDe,zeros:IDe,fft:PDe,ifft:RDe,sylvester:fNe,schur:mNe,lyap:pNe,solveODE:xMe,bernoulli:kDe,combinations:FDe,combinationsWithRep:ODe,factorial:BDe,gamma:LDe,kldivergence:VDe,lgamma:$De,multinomial:UDe,permutations:zDe,pickRandom:jDe,random:qDe,randomInt:HDe,compare:GDe,compareNatural:WDe,compareText:KDe,deepEqual:XDe,equal:YDe,equalText:QDe,larger:JDe,largerEq:ZDe,smaller:e2e,smallerEq:t2e,unequal:r2e,setCartesian:n2e,setDifference:i2e,setDistinct:s2e,setIntersect:a2e,setIsSubset:o2e,setMultiplicity:l2e,setPowerset:u2e,setSize:c2e,setSymDifference:h2e,setUnion:d2e,zpk2tf:f2e,freqz:m2e,erf:p2e,zeta:g2e,cumsum:T2e,mad:v2e,max:y2e,mean:b2e,median:w2e,min:x2e,mode:_2e,prod:A2e,quantileSeq:E2e,std:S2e,sum:C2e,variance:N2e,corr:D2e,acos:M2e,acosh:I2e,acot:P2e,acoth:R2e,acsc:k2e,acsch:F2e,asec:O2e,asech:B2e,asin:L2e,asinh:$2e,atan:V2e,atanh:z2e,atan2:U2e,cos:j2e,cosh:q2e,cot:H2e,coth:G2e,csc:W2e,csch:K2e,sec:X2e,sech:Y2e,sin:Q2e,sinh:J2e,tan:Z2e,tanh:eMe,to:tMe,toBest:rMe,clone:iMe,format:sMe,bin:nMe,oct:yMe,hex:oMe,isNaN:uMe,isBounded:cMe,isFinite:hMe,isInteger:lMe,isNegative:dMe,isNumeric:fMe,hasNumericValue:aMe,isPositive:mMe,isPrime:pMe,isZero:gMe,print:bMe,typeOf:wMe,numeric:vMe},T8="help",AMe=["typed","mathWithTransform","Help"],EMe=Y(T8,AMe,r=>{var{typed:e,mathWithTransform:t,Help:n}=r;return e(T8,{any:function(s){var a,o=s;if(typeof s!="string"){for(a in t)if(Ze(t,a)&&s===t[a]){o=a;break}}var l=xs(_Me,o);if(!l){var u=typeof o=="function"?o.name:o;throw new Error('No documentation found on "'+u+'"')}return new n(l)}})}),C8="chain",SMe=["typed","Chain"],TMe=Y(C8,SMe,r=>{var{typed:e,Chain:t}=r;return e(C8,{"":function(){return new t},any:function(i){return new t(i)}})}),N8="det",CMe=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],NMe=Y(N8,CMe,r=>{var{typed:e,matrix:t,subtractScalar:n,multiply:i,divideScalar:s,isZero:a,unaryMinus:o}=r;return e(N8,{any:function(c){return gt(c)},"Array | Matrix":function(c){var h;switch(lt(c)?h=c.size():Array.isArray(c)?(c=t(c),h=c.size()):h=[],h.length){case 0:return gt(c);case 1:if(h[0]===1)return gt(c.valueOf()[0]);if(h[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+Pt(h)+")");case 2:{var d=h[0],f=h[1];if(d===f)return l(c.clone().valueOf(),d);if(f===0)return 1;throw new RangeError("Matrix must be square (size: "+Pt(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Pt(h)+")")}}});function l(u,c,h){if(c===1)return gt(u[0][0]);if(c===2)return n(i(u[0][0],u[1][1]),i(u[1][0],u[0][1]));for(var d=!1,f=new Array(c).fill(0).map((S,E)=>E),p=0;p<c;p++){var g=f[p];if(a(u[g][p])){var b=void 0;for(b=p+1;b<c;b++)if(!a(u[f[b]][p])){g=f[b],f[b]=f[p],f[p]=g,d=!d;break}if(b===c)return u[g][p]}for(var v=u[g][p],x=p===0?1:u[f[p-1]][p-1],y=p+1;y<c;y++)for(var A=f[y],w=p+1;w<c;w++)u[A][w]=s(n(i(u[A][w],v),i(u[A][p],u[g][w])),x)}var _=u[f[c-1]][c-1];return d?o(_):_}}),D8="inv",DMe=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],MMe=Y(D8,DMe,r=>{var{typed:e,matrix:t,divideScalar:n,addScalar:i,multiply:s,unaryMinus:a,det:o,identity:l,abs:u}=r;return e(D8,{"Array | Matrix":function(d){var f=lt(d)?d.size():vt(d);switch(f.length){case 1:if(f[0]===1)return lt(d)?t([n(1,d.valueOf()[0])]):[n(1,d[0])];throw new RangeError("Matrix must be square (size: "+Pt(f)+")");case 2:{var p=f[0],g=f[1];if(p===g)return lt(d)?t(c(d.valueOf(),p,g),d.storage()):c(d,p,g);throw new RangeError("Matrix must be square (size: "+Pt(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Pt(f)+")")}},any:function(d){return n(1,d)}});function c(h,d,f){var p,g,b,v,x;if(d===1){if(v=h[0][0],v===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,v)]]}else if(d===2){var y=o(h);if(y===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(h[1][1],y),n(a(h[0][1]),y)],[n(a(h[1][0]),y),n(h[0][0],y)]]}else{var A=h.concat();for(p=0;p<d;p++)A[p]=A[p].concat();for(var w=l(d).valueOf(),_=0;_<f;_++){var S=u(A[_][_]),E=_;for(p=_+1;p<d;)u(A[p][_])>S&&(S=u(A[p][_]),E=p),p++;if(S===0)throw Error("Cannot calculate inverse, determinant is zero");p=E,p!==_&&(x=A[_],A[_]=A[p],A[p]=x,x=w[_],w[_]=w[p],w[p]=x);var C=A[_],N=w[_];for(p=0;p<d;p++){var D=A[p],M=w[p];if(p!==_){if(D[_]!==0){for(b=n(a(D[_]),C[_]),g=_;g<f;g++)D[g]=i(D[g],s(b,C[g]));for(g=0;g<f;g++)M[g]=i(M[g],s(b,N[g]))}}else{for(b=C[_],g=_;g<f;g++)D[g]=n(D[g],b);for(g=0;g<f;g++)M[g]=n(M[g],b)}}}return w}}}),M8="pinv",IMe=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],PMe=Y(M8,IMe,r=>{var{typed:e,matrix:t,inv:n,deepEqual:i,equal:s,dotDivide:a,dot:o,ctranspose:l,divideScalar:u,multiply:c,add:h,Complex:d}=r;return e(M8,{"Array | Matrix":function(y){var A=lt(y)?y.size():vt(y);switch(A.length){case 1:return v(y)?l(y):A[0]===1?n(y):a(l(y),o(y,y));case 2:{if(v(y))return l(y);var w=A[0],_=A[1];if(w===_)try{return n(y)}catch(S){if(!(S instanceof Error&&S.message.match(/Cannot calculate inverse, determinant is zero/)))throw S}return lt(y)?t(f(y.valueOf(),w,_),y.storage()):f(y,w,_)}default:throw new RangeError("Matrix must be two dimensional (size: "+Pt(A)+")")}},any:function(y){return s(y,0)?gt(y):u(1,y)}});function f(x,y,A){var{C:w,F:_}=g(x,y,A),S=c(n(c(l(w),w)),l(w)),E=c(l(_),n(c(_,l(_))));return c(E,S)}function p(x,y,A){for(var w=gt(x),_=0,S=0;S<y;S++){if(A<=_)return w;for(var E=S;b(w[E][_]);)if(E++,y===E&&(E=S,_++,A===_))return w;[w[E],w[S]]=[w[S],w[E]];for(var C=w[S][_],N=0;N<A;N++)w[S][N]=a(w[S][N],C);for(var D=0;D<y;D++)if(D!==S){C=w[D][_];for(var M=0;M<A;M++)w[D][M]=h(w[D][M],c(-1,c(C,w[S][M])))}_++}return w}function g(x,y,A){var w=p(x,y,A),_=x.map((E,C)=>E.filter((N,D)=>D<y&&!b(o(w[D],w[D])))),S=w.filter((E,C)=>!b(o(w[C],w[C])));return{C:_,F:S}}function b(x){return s(h(x,d(1,1)),h(0,d(1,1)))}function v(x){return i(h(x,d(1,1)),h(c(x,0),d(1,1)))}});function RMe(r){var{addScalar:e,subtract:t,flatten:n,multiply:i,multiplyScalar:s,divideScalar:a,sqrt:o,abs:l,bignumber:u,diag:c,size:h,reshape:d,inv:f,qr:p,usolve:g,usolveAll:b,equal:v,complex:x,larger:y,smaller:A,matrixFromColumns:w,dot:_}=r;function S(re,O,ne,W){var pe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,me=E(re,O,ne,W,pe);C(re,O,ne,W,pe,me);var{values:ie,C:K}=N(re,O,ne,W,pe);if(pe){var ae=D(re,O,K,me,ie,ne,W);return{values:ie,eigenvectors:ae}}return{values:ie}}function E(re,O,ne,W,pe){var me=W==="BigNumber",ie=W==="Complex",K=me?u(0):0,ae=me?u(1):ie?x(1):1,ge=me?u(1):1,he=me?u(10):2,be=s(he,he),ve;pe&&(ve=Array(O).fill(ae));for(var Ie=!1;!Ie;){Ie=!0;for(var Ve=0;Ve<O;Ve++){for(var We=K,Be=K,$e=0;$e<O;$e++)Ve!==$e&&(We=e(We,l(re[$e][Ve])),Be=e(Be,l(re[Ve][$e])));if(!v(We,0)&&!v(Be,0)){for(var Ge=ge,Z=We,Q=a(Be,he),L=s(Be,he);A(Z,Q);)Z=s(Z,be),Ge=s(Ge,he);for(;y(Z,L);)Z=a(Z,be),Ge=a(Ge,he);var G=A(a(e(Z,Be),Ge),s(e(We,Be),.95));if(G){Ie=!1;for(var ee=a(1,Ge),oe=0;oe<O;oe++)Ve!==oe&&(re[Ve][oe]=s(re[Ve][oe],ee),re[oe][Ve]=s(re[oe][Ve],Ge));pe&&(ve[Ve]=s(ve[Ve],ee))}}}}return pe?c(ve):null}function C(re,O,ne,W,pe,me){var ie=W==="BigNumber",K=W==="Complex",ae=ie?u(0):K?x(0):0;ie&&(ne=u(ne));for(var ge=0;ge<O-2;ge++){for(var he=0,be=ae,ve=ge+1;ve<O;ve++){var Ie=re[ve][ge];A(l(be),l(Ie))&&(be=Ie,he=ve)}if(!A(l(be),ne)){if(he!==ge+1){var Ve=re[he];re[he]=re[ge+1],re[ge+1]=Ve;for(var We=0;We<O;We++){var Be=re[We][he];re[We][he]=re[We][ge+1],re[We][ge+1]=Be}if(pe){var $e=me[he];me[he]=me[ge+1],me[ge+1]=$e}}for(var Ge=ge+2;Ge<O;Ge++){var Z=a(re[Ge][ge],be);if(Z!==0){for(var Q=0;Q<O;Q++)re[Ge][Q]=t(re[Ge][Q],s(Z,re[ge+1][Q]));for(var L=0;L<O;L++)re[L][ge+1]=e(re[L][ge+1],s(Z,re[L][Ge]));if(pe)for(var G=0;G<O;G++)me[Ge][G]=t(me[Ge][G],s(Z,me[ge+1][G]))}}}}return me}function N(re,O,ne,W,pe){var me=W==="BigNumber",ie=W==="Complex",K=me?u(1):ie?x(1):1;me&&(ne=u(ne));for(var ae=gt(re),ge=[],he=O,be=[],ve=pe?c(Array(O).fill(K)):void 0,Ie=pe?c(Array(he).fill(K)):void 0,Ve=0;Ve<=100;){Ve+=1;for(var We=ae[he-1][he-1],Be=0;Be<he;Be++)ae[Be][Be]=t(ae[Be][Be],We);var{Q:$e,R:Ge}=p(ae);ae=i(Ge,$e);for(var Z=0;Z<he;Z++)ae[Z][Z]=e(ae[Z][Z],We);if(pe&&(Ie=i(Ie,$e)),he===1||A(l(ae[he-1][he-2]),ne)){Ve=0,ge.push(ae[he-1][he-1]),pe&&(be.unshift([[1]]),U(Ie,O),ve=i(ve,Ie),he>1&&(Ie=c(Array(he-1).fill(K)))),he-=1,ae.pop();for(var Q=0;Q<he;Q++)ae[Q].pop()}else if(he===2||A(l(ae[he-2][he-3]),ne)){Ve=0;var L=M(ae[he-2][he-2],ae[he-2][he-1],ae[he-1][he-2],ae[he-1][he-1]);ge.push(...L),pe&&(be.unshift(I(ae[he-2][he-2],ae[he-2][he-1],ae[he-1][he-2],ae[he-1][he-1],L[0],L[1],ne,W)),U(Ie,O),ve=i(ve,Ie),he>2&&(Ie=c(Array(he-2).fill(K)))),he-=2,ae.pop(),ae.pop();for(var G=0;G<he;G++)ae[G].pop(),ae[G].pop()}if(he===0)break}if(ge.sort((fe,de)=>+t(l(fe),l(de))),Ve>100){var ee=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+ge.join(", "));throw ee.values=ge,ee.vectors=[],ee}var oe=pe?i(ve,X(be,O)):void 0;return{values:ge,C:oe}}function D(re,O,ne,W,pe,me,ie){var K=f(ne),ae=i(K,re,ne),ge=ie==="BigNumber",he=ie==="Complex",be=ge?u(0):he?x(0):0,ve=ge?u(1):he?x(1):1,Ie=[],Ve=[];for(var We of pe){var Be=k(Ie,We,v);Be===-1?(Ie.push(We),Ve.push(1)):Ve[Be]+=1}for(var $e=[],Ge=Ie.length,Z=Array(O).fill(be),Q=c(Array(O).fill(ve)),L=function(){var oe=Ie[G],fe=t(ae,i(oe,Q)),de=b(fe,Z);for(de.shift();de.length<Ve[G];){var Se=z(fe,O,de,me,ie);if(Se===null)break;de.push(Se)}var _e=i(f(W),ne);de=de.map(Pe=>i(_e,Pe)),$e.push(...de.map(Pe=>({value:oe,vector:n(Pe)})))},G=0;G<Ge;G++)L();return $e}function M(re,O,ne,W){var pe=e(re,W),me=t(s(re,W),s(O,ne)),ie=s(pe,.5),K=s(o(t(s(pe,pe),s(4,me))),.5);return[e(ie,K),t(ie,K)]}function I(re,O,ne,W,pe,me,ie,K){var ae=K==="BigNumber",ge=K==="Complex",he=ae?u(0):ge?x(0):0,be=ae?u(1):ge?x(1):1;if(A(l(ne),ie))return[[be,he],[he,be]];if(y(l(t(pe,me)),ie))return[[t(pe,W),t(me,W)],[ne,ne]];var ve=t(re,pe),Ie=t(W,pe);return A(l(O),ie)&&A(l(Ie),ie)?[[ve,be],[ne,he]]:[[O,he],[Ie,be]]}function U(re,O){for(var ne=0;ne<re.length;ne++)re[ne].push(...Array(O-re[ne].length).fill(0));for(var W=re.length;W<O;W++)re.push(Array(O).fill(0)),re[W][W]=1;return re}function X(re,O){for(var ne=[],W=0;W<O;W++)ne[W]=Array(O).fill(0);var pe=0;for(var me of re){for(var ie=me.length,K=0;K<ie;K++)for(var ae=0;ae<ie;ae++)ne[pe+K][pe+ae]=me[K][ae];pe+=ie}return ne}function k(re,O,ne){for(var W=0;W<re.length;W++)if(ne(re[W],O))return W;return-1}function z(re,O,ne,W,pe){for(var me=pe==="BigNumber"?u(1e3):1e3,ie,K=0;K<5;++K){ie=q(O,ne,pe);try{ie=g(re,ie)}catch{continue}if(y(te(ie),me))break}if(K>=5)return null;for(K=0;;){var ae=g(re,ie);if(A(te(H(ie,[ae])),W))break;if(++K>=10)return null;ie=ce(ae)}return ie}function q(re,O,ne){var W=ne==="BigNumber",pe=ne==="Complex",me=Array(re).fill(0).map(ie=>2*Math.random()-1);return W&&(me=me.map(ie=>u(ie))),pe&&(me=me.map(ie=>x(ie))),me=H(me,O),ce(me,ne)}function H(re,O){var ne=h(re);for(var W of O)W=d(W,ne),re=t(re,i(a(_(W,re),_(W,W)),W));return re}function te(re){return l(o(_(re,re)))}function ce(re,O){var ne=O==="BigNumber",W=O==="Complex",pe=ne?u(1):W?x(1):1;return i(a(pe,te(re)),re)}return S}function kMe(r){var{config:e,addScalar:t,subtract:n,abs:i,atan:s,cos:a,sin:o,multiplyScalar:l,inv:u,bignumber:c,multiply:h,add:d}=r;function f(C,N){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.relTol,M=arguments.length>3?arguments[3]:void 0,I=arguments.length>4?arguments[4]:void 0;if(M==="number")return p(C,D,I);if(M==="BigNumber")return g(C,D,I);throw TypeError("Unsupported data type: "+M)}function p(C,N,D){var M=C.length,I=Math.abs(N/M),U,X;if(D){X=new Array(M);for(var k=0;k<M;k++)X[k]=Array(M).fill(0),X[k][k]=1}for(var z=_(C);Math.abs(z[1])>=Math.abs(I);){var q=z[0][0],H=z[0][1];U=b(C[q][q],C[H][H],C[q][H]),C=w(C,U,q,H),D&&(X=x(X,U,q,H)),z=_(C)}for(var te=Array(M).fill(0),ce=0;ce<M;ce++)te[ce]=C[ce][ce];return E(gt(te),X,D)}function g(C,N,D){var M=C.length,I=i(N/M),U,X;if(D){X=new Array(M);for(var k=0;k<M;k++)X[k]=Array(M).fill(0),X[k][k]=1}for(var z=S(C);i(z[1])>=i(I);){var q=z[0][0],H=z[0][1];U=v(C[q][q],C[H][H],C[q][H]),C=A(C,U,q,H),D&&(X=y(X,U,q,H)),z=S(C)}for(var te=Array(M).fill(0),ce=0;ce<M;ce++)te[ce]=C[ce][ce];return E(gt(te),X,D)}function b(C,N,D){var M=N-C;return Math.abs(M)<=e.relTol?Math.PI/4:.5*Math.atan(2*D/(N-C))}function v(C,N,D){var M=n(N,C);return i(M)<=e.relTol?c(-1).acos().div(4):l(.5,s(h(2,D,u(M))))}function x(C,N,D,M){for(var I=C.length,U=Math.cos(N),X=Math.sin(N),k=Array(I).fill(0),z=Array(I).fill(0),q=0;q<I;q++)k[q]=U*C[q][D]-X*C[q][M],z[q]=X*C[q][D]+U*C[q][M];for(var H=0;H<I;H++)C[H][D]=k[H],C[H][M]=z[H];return C}function y(C,N,D,M){for(var I=C.length,U=a(N),X=o(N),k=Array(I).fill(c(0)),z=Array(I).fill(c(0)),q=0;q<I;q++)k[q]=n(l(U,C[q][D]),l(X,C[q][M])),z[q]=t(l(X,C[q][D]),l(U,C[q][M]));for(var H=0;H<I;H++)C[H][D]=k[H],C[H][M]=z[H];return C}function A(C,N,D,M){for(var I=C.length,U=c(a(N)),X=c(o(N)),k=l(U,U),z=l(X,X),q=Array(I).fill(c(0)),H=Array(I).fill(c(0)),te=h(c(2),U,X,C[D][M]),ce=t(n(l(k,C[D][D]),te),l(z,C[M][M])),re=d(l(z,C[D][D]),te,l(k,C[M][M])),O=0;O<I;O++)q[O]=n(l(U,C[D][O]),l(X,C[M][O])),H[O]=t(l(X,C[D][O]),l(U,C[M][O]));C[D][D]=ce,C[M][M]=re,C[D][M]=c(0),C[M][D]=c(0);for(var ne=0;ne<I;ne++)ne!==D&&ne!==M&&(C[D][ne]=q[ne],C[ne][D]=q[ne],C[M][ne]=H[ne],C[ne][M]=H[ne]);return C}function w(C,N,D,M){for(var I=C.length,U=Math.cos(N),X=Math.sin(N),k=U*U,z=X*X,q=Array(I).fill(0),H=Array(I).fill(0),te=k*C[D][D]-2*U*X*C[D][M]+z*C[M][M],ce=z*C[D][D]+2*U*X*C[D][M]+k*C[M][M],re=0;re<I;re++)q[re]=U*C[D][re]-X*C[M][re],H[re]=X*C[D][re]+U*C[M][re];C[D][D]=te,C[M][M]=ce,C[D][M]=0,C[M][D]=0;for(var O=0;O<I;O++)O!==D&&O!==M&&(C[D][O]=q[O],C[O][D]=q[O],C[M][O]=H[O],C[O][M]=H[O]);return C}function _(C){for(var N=C.length,D=0,M=[0,1],I=0;I<N;I++)for(var U=I+1;U<N;U++)Math.abs(D)<Math.abs(C[I][U])&&(D=Math.abs(C[I][U]),M=[I,U]);return[M,D]}function S(C){for(var N=C.length,D=0,M=[0,1],I=0;I<N;I++)for(var U=I+1;U<N;U++)i(D)<i(C[I][U])&&(D=i(C[I][U]),M=[I,U]);return[M,D]}function E(C,N,D){var M=C.length,I=Array(M),U;if(D){U=Array(M);for(var X=0;X<M;X++)U[X]=Array(M)}for(var k=0;k<M;k++){for(var z=0,q=C[0],H=0;H<C.length;H++)i(C[H])<i(q)&&(z=H,q=C[z]);if(I[k]=C.splice(z,1)[0],D)for(var te=0;te<M;te++)U[k][te]=N[te][z],N[te].splice(z,1)}if(!D)return{values:I};var ce=U.map((re,O)=>({value:I[O],vector:re}));return{values:I,eigenvectors:ce}}return f}var FMe="eigs",OMe=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],BMe=Y(FMe,OMe,r=>{var{config:e,typed:t,matrix:n,addScalar:i,subtract:s,equal:a,abs:o,atan:l,cos:u,sin:c,multiplyScalar:h,divideScalar:d,inv:f,bignumber:p,multiply:g,add:b,larger:v,column:x,flatten:y,number:A,complex:w,sqrt:_,diag:S,size:E,reshape:C,qr:N,usolve:D,usolveAll:M,im:I,re:U,smaller:X,matrixFromColumns:k,dot:z}=r,q=kMe({config:e,addScalar:i,subtract:s,abs:o,atan:l,cos:u,sin:c,multiplyScalar:h,inv:f,bignumber:p,multiply:g,add:b}),H=RMe({addScalar:i,subtract:s,multiply:g,multiplyScalar:h,flatten:y,divideScalar:d,sqrt:_,abs:o,bignumber:p,diag:S,size:E,reshape:C,qr:N,inv:f,usolve:D,usolveAll:M,equal:a,complex:w,larger:v,smaller:X,matrixFromColumns:k,dot:z});return t("eigs",{Array:function(me){return te(n(me))},"Array, number|BigNumber":function(me,ie){return te(n(me),{precision:ie})},"Array, Object"(pe,me){return te(n(pe),me)},Matrix:function(me){return te(me,{matricize:!0})},"Matrix, number|BigNumber":function(me,ie){return te(me,{precision:ie,matricize:!0})},"Matrix, Object":function(me,ie){var K={matricize:!0};return An(K,ie),te(me,K)}});function te(pe){var me,ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K="eigenvectors"in ie?ie.eigenvectors:!0,ae=(me=ie.precision)!==null&&me!==void 0?me:e.relTol,ge=ce(pe,ae,K);return ie.matricize&&(ge.values=n(ge.values),K&&(ge.eigenvectors=ge.eigenvectors.map(he=>{var{value:be,vector:ve}=he;return{value:be,vector:n(ve)}}))),K&&Object.defineProperty(ge,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),ge}function ce(pe,me,ie){var K=pe.toArray(),ae=pe.size();if(ae.length!==2||ae[0]!==ae[1])throw new RangeError("Matrix must be square (size: ".concat(Pt(ae),")"));var ge=ae[0];if(O(K,ge,me)&&(ne(K,ge),re(K,ge,me))){var he=W(pe,K,ge);return q(K,ge,me,he,ie)}var be=W(pe,K,ge);return H(K,ge,me,be,ie)}function re(pe,me,ie){for(var K=0;K<me;K++)for(var ae=K;ae<me;ae++)if(v(p(o(s(pe[K][ae],pe[ae][K]))),ie))return!1;return!0}function O(pe,me,ie){for(var K=0;K<me;K++)for(var ae=0;ae<me;ae++)if(v(p(o(I(pe[K][ae]))),ie))return!1;return!0}function ne(pe,me){for(var ie=0;ie<me;ie++)for(var K=0;K<me;K++)pe[ie][K]=U(pe[ie][K])}function W(pe,me,ie){var K=pe.datatype();if(K==="number"||K==="BigNumber"||K==="Complex")return K;for(var ae=!1,ge=!1,he=!1,be=0;be<ie;be++)for(var ve=0;ve<ie;ve++){var Ie=me[be][ve];if(st(Ie)||h_(Ie))ae=!0;else if(_t(Ie))ge=!0;else if(cc(Ie))he=!0;else throw TypeError("Unsupported type in Matrix: "+dr(Ie))}if(ge&&he&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),he){for(var Ve=0;Ve<ie;Ve++)for(var We=0;We<ie;We++)me[Ve][We]=w(me[Ve][We]);return"Complex"}if(ge){for(var Be=0;Be<ie;Be++)for(var $e=0;$e<ie;$e++)me[Be][$e]=p(me[Be][$e]);return"BigNumber"}if(ae){for(var Ge=0;Ge<ie;Ge++)for(var Z=0;Z<ie;Z++)me[Ge][Z]=A(me[Ge][Z]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),I8="expm",LMe=["typed","abs","add","identity","inv","multiply"],$Me=Y(I8,LMe,r=>{var{typed:e,abs:t,add:n,identity:i,inv:s,multiply:a}=r;return e(I8,{Matrix:function(h){var d=h.size();if(d.length!==2||d[0]!==d[1])throw new RangeError("Matrix must be square (size: "+Pt(d)+")");for(var f=d[0],p=1e-15,g=o(h),b=l(g,p),v=b.q,x=b.j,y=a(h,Math.pow(2,-x)),A=i(f),w=i(f),_=1,S=y,E=-1,C=1;C<=v;C++)C>1&&(S=a(S,y),E=-E),_=_*(v-C+1)/((2*v-C+1)*C),A=n(A,a(_,S)),w=n(w,a(_*E,S));for(var N=a(s(w),A),D=0;D<x;D++)N=a(N,N);return Tf(h)?h.createSparseMatrix(N):N}});function o(c){for(var h=c.size()[0],d=0,f=0;f<h;f++){for(var p=0,g=0;g<h;g++)p+=t(c.get([f,g]));d=Math.max(p,d)}return d}function l(c,h){for(var d=30,f=0;f<d;f++)for(var p=0;p<=f;p++){var g=f-p;if(u(c,p,g)<h)return{q:p,j:g}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function u(c,h,d){for(var f=1,p=2;p<=h;p++)f*=p;for(var g=f,b=h+1;b<=2*h;b++)g*=b;var v=g*(2*h+1);return 8*Math.pow(c/Math.pow(2,d),2*h)*f*f/(g*v)}}),P8="sqrtm",VMe=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],UMe=Y(P8,VMe,r=>{var{typed:e,abs:t,add:n,multiply:i,map:s,sqrt:a,subtract:o,inv:l,size:u,max:c,identity:h}=r,d=1e3,f=1e-6;function p(g){var b,v=0,x=g,y=h(u(g));do{var A=x;if(x=i(.5,n(A,l(y))),y=i(.5,n(y,l(A))),b=c(t(o(x,A))),b>f&&++v>d)throw new Error("computing square root of matrix: iterative method could not converge")}while(b>f);return x}return e(P8,{"Array | Matrix":function(b){var v=lt(b)?b.size():vt(b);switch(v.length){case 1:if(v[0]===1)return s(b,a);throw new RangeError("Matrix must be square (size: "+Pt(v)+")");case 2:{var x=v[0],y=v[1];if(x===y)return p(b);throw new RangeError("Matrix must be square (size: "+Pt(v)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+Pt(v)+")")}}})}),R8="sylvester",zMe=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],jMe=Y(R8,zMe,r=>{var{typed:e,schur:t,matrixFromColumns:n,matrix:i,multiply:s,range:a,concat:o,transpose:l,index:u,subset:c,add:h,subtract:d,identity:f,lusolve:p,abs:g,config:b}=r;return e(R8,{"Matrix, Matrix, Matrix":v,"Array, Matrix, Matrix":function(y,A,w){return v(i(y),A,w)},"Array, Array, Matrix":function(y,A,w){return v(i(y),i(A),w)},"Array, Matrix, Array":function(y,A,w){return v(i(y),A,i(w))},"Matrix, Array, Matrix":function(y,A,w){return v(y,i(A),w)},"Matrix, Array, Array":function(y,A,w){return v(y,i(A),i(w))},"Matrix, Matrix, Array":function(y,A,w){return v(y,A,i(w))},"Array, Array, Array":function(y,A,w){return v(i(y),i(A),i(w)).toArray()}});function v(x,y,A){for(var w=y.size()[0],_=x.size()[0],S=t(x),E=S.T,C=S.U,N=t(s(-1,y)),D=N.T,M=N.U,I=s(s(l(C),A),M),U=a(0,_),X=[],k=(be,ve)=>o(be,ve,1),z=(be,ve)=>o(be,ve,0),q=0;q<w;q++)if(q<w-1&&g(c(D,u(q+1,q)))>1e-5){for(var H=z(c(I,u(U,[q])),c(I,u(U,[q+1]))),te=0;te<q;te++)H=h(H,z(s(X[te],c(D,u(te,q))),s(X[te],c(D,u(te,q+1)))));var ce=s(f(_),s(-1,c(D,u(q,q)))),re=s(f(_),s(-1,c(D,u(q+1,q)))),O=s(f(_),s(-1,c(D,u(q,q+1)))),ne=s(f(_),s(-1,c(D,u(q+1,q+1)))),W=z(k(h(E,ce),re),k(O,h(E,ne))),pe=p(W,H);X[q]=pe.subset(u(a(0,_),[0])),X[q+1]=pe.subset(u(a(_,2*_),[0])),q++}else{for(var me=c(I,u(U,[q])),ie=0;ie<q;ie++)me=h(me,s(X[ie],c(D,u(ie,q))));var K=c(D,u(q,q)),ae=d(E,s(K,f(_)));X[q]=p(ae,me)}var ge=i(n(...X)),he=s(C,s(ge,l(M)));return he}}),k8="schur",qMe=["typed","matrix","identity","multiply","qr","norm","subtract"],HMe=Y(k8,qMe,r=>{var{typed:e,matrix:t,identity:n,multiply:i,qr:s,norm:a,subtract:o}=r;return e(k8,{Array:function(c){var h=l(t(c));return{U:h.U.valueOf(),T:h.T.valueOf()}},Matrix:function(c){return l(c)}});function l(u){var c=u.size()[0],h=u,d=n(c),f=0,p;do{p=h;var g=s(h),b=g.Q,v=g.R;if(h=i(v,b),d=i(d,b),f++>100)break}while(a(o(h,p))>1e-4);return{U:d,T:h}}}),F8="lyap",GMe=["typed","matrix","sylvester","multiply","transpose"],WMe=Y(F8,GMe,r=>{var{typed:e,matrix:t,sylvester:n,multiply:i,transpose:s}=r;return e(F8,{"Matrix, Matrix":function(o,l){return n(o,s(o),i(-1,l))},"Array, Matrix":function(o,l){return n(t(o),s(t(o)),i(-1,l))},"Matrix, Array":function(o,l){return n(o,s(t(o)),t(i(-1,l)))},"Array, Array":function(o,l){return n(t(o),s(t(o)),t(i(-1,l))).toArray()}})}),KMe="divide",XMe=["typed","matrix","multiply","equalScalar","divideScalar","inv"],YMe=Y(KMe,XMe,r=>{var{typed:e,matrix:t,multiply:n,equalScalar:i,divideScalar:s,inv:a}=r,o=Bi({typed:e,equalScalar:i}),l=wo({typed:e});return e("divide",TK({"Array | Matrix, Array | Matrix":function(c,h){return n(c,a(h))},"DenseMatrix, any":function(c,h){return l(c,h,s,!1)},"SparseMatrix, any":function(c,h){return o(c,h,s,!1)},"Array, any":function(c,h){return l(t(c),h,s,!1).valueOf()},"any, Array | Matrix":function(c,h){return n(c,a(h))}},s.signatures))}),O8="distance",QMe=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],JMe=Y(O8,QMe,r=>{var{typed:e,addScalar:t,subtractScalar:n,multiplyScalar:i,divideScalar:s,deepEqual:a,sqrt:o,abs:l}=r;return e(O8,{"Array, Array, Array":function(w,_,S){if(w.length===2&&_.length===2&&S.length===2){if(!c(w))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(_))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(S))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(a(_,S))throw new TypeError("LinePoint1 should not be same with LinePoint2");var E=n(S[1],_[1]),C=n(_[0],S[0]),N=n(i(S[0],_[1]),i(_[0],S[1]));return b(w[0],w[1],E,C,N)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(w,_,S){if(Object.keys(w).length===2&&Object.keys(_).length===2&&Object.keys(S).length===2){if(!c(w))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(_))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(S))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(a(p(_),p(S)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in w&&"pointY"in w&&"lineOnePtX"in _&&"lineOnePtY"in _&&"lineTwoPtX"in S&&"lineTwoPtY"in S){var E=n(S.lineTwoPtY,_.lineOnePtY),C=n(_.lineOnePtX,S.lineTwoPtX),N=n(i(S.lineTwoPtX,_.lineOnePtY),i(_.lineOnePtX,S.lineTwoPtY));return b(w.pointX,w.pointY,E,C,N)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(w,_){if(w.length===2&&_.length===3){if(!c(w))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!h(_))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return b(w[0],w[1],_[0],_[1],_[2])}else if(w.length===3&&_.length===6){if(!h(w))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!f(_))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return v(w[0],w[1],w[2],_[0],_[1],_[2],_[3],_[4],_[5])}else if(w.length===_.length&&w.length>0){if(!d(w))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!d(_))throw new TypeError("All values of an array should be numbers or BigNumbers");return x(w,_)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(w,_){if(Object.keys(w).length===2&&Object.keys(_).length===3){if(!c(w))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!h(_))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in w&&"pointY"in w&&"xCoeffLine"in _&&"yCoeffLine"in _&&"constant"in _)return b(w.pointX,w.pointY,_.xCoeffLine,_.yCoeffLine,_.constant);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===3&&Object.keys(_).length===6){if(!h(w))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!f(_))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in w&&"pointY"in w&&"x0"in _&&"y0"in _&&"z0"in _&&"a"in _&&"b"in _&&"c"in _)return v(w.pointX,w.pointY,w.pointZ,_.x0,_.y0,_.z0,_.a,_.b,_.c);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===2&&Object.keys(_).length===2){if(!c(w))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(_))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in w&&"pointOneY"in w&&"pointTwoX"in _&&"pointTwoY"in _)return x([w.pointOneX,w.pointOneY],[_.pointTwoX,_.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(w).length===3&&Object.keys(_).length===3){if(!h(w))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!h(_))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in w&&"pointOneY"in w&&"pointOneZ"in w&&"pointTwoX"in _&&"pointTwoY"in _&&"pointTwoZ"in _)return x([w.pointOneX,w.pointOneY,w.pointOneZ],[_.pointTwoX,_.pointTwoY,_.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(w){if(!g(w))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return y(w)}});function u(A){return typeof A=="number"||_t(A)}function c(A){return A.constructor!==Array&&(A=p(A)),u(A[0])&&u(A[1])}function h(A){return A.constructor!==Array&&(A=p(A)),u(A[0])&&u(A[1])&&u(A[2])}function d(A){return Array.isArray(A)||(A=p(A)),A.every(u)}function f(A){return A.constructor!==Array&&(A=p(A)),u(A[0])&&u(A[1])&&u(A[2])&&u(A[3])&&u(A[4])&&u(A[5])}function p(A){for(var w=Object.keys(A),_=[],S=0;S<w.length;S++)_.push(A[w[S]]);return _}function g(A){if(A[0].length===2&&u(A[0][0])&&u(A[0][1])){if(A.some(w=>w.length!==2||!u(w[0])||!u(w[1])))return!1}else if(A[0].length===3&&u(A[0][0])&&u(A[0][1])&&u(A[0][2])){if(A.some(w=>w.length!==3||!u(w[0])||!u(w[1])||!u(w[2])))return!1}else return!1;return!0}function b(A,w,_,S,E){var C=l(t(t(i(_,A),i(S,w)),E)),N=o(t(i(_,_),i(S,S)));return s(C,N)}function v(A,w,_,S,E,C,N,D,M){var I=[n(i(n(E,w),M),i(n(C,_),D)),n(i(n(C,_),N),i(n(S,A),M)),n(i(n(S,A),D),i(n(E,w),N))];I=o(t(t(i(I[0],I[0]),i(I[1],I[1])),i(I[2],I[2])));var U=o(t(t(i(N,N),i(D,D)),i(M,M)));return s(I,U)}function x(A,w){for(var _=A.length,S=0,E=0,C=0;C<_;C++)E=n(A[C],w[C]),S=t(i(E,E),S);return o(S)}function y(A){for(var w=[],_=[],S=[],E=0;E<A.length-1;E++)for(var C=E+1;C<A.length;C++)A[0].length===2?(_=[A[E][0],A[E][1]],S=[A[C][0],A[C][1]]):A[0].length===3&&(_=[A[E][0],A[E][1],A[E][2]],S=[A[C][0],A[C][1],A[C][2]]),w.push(x(_,S));return w}}),ZMe="intersect",eIe=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],tIe=Y(ZMe,eIe,r=>{var{typed:e,config:t,abs:n,add:i,addScalar:s,matrix:a,multiply:o,multiplyScalar:l,divideScalar:u,subtract:c,smaller:h,equalScalar:d,flatten:f,isZero:p,isNumeric:g}=r;return e("intersect",{"Array, Array, Array":b,"Array, Array, Array, Array":v,"Matrix, Matrix, Matrix":function(D,M,I){var U=b(D.valueOf(),M.valueOf(),I.valueOf());return U===null?null:a(U)},"Matrix, Matrix, Matrix, Matrix":function(D,M,I,U){var X=v(D.valueOf(),M.valueOf(),I.valueOf(),U.valueOf());return X===null?null:a(X)}});function b(N,D,M){if(N=x(N),D=x(D),M=x(M),!A(N))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!A(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!w(M))throw new TypeError("Array with 4 numbers expected as third argument");return C(N[0],N[1],N[2],D[0],D[1],D[2],M[0],M[1],M[2],M[3])}function v(N,D,M,I){if(N=x(N),D=x(D),M=x(M),I=x(I),N.length===2){if(!y(N))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!y(D))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!y(M))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!y(I))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return _(N,D,M,I)}else if(N.length===3){if(!A(N))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!A(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!A(M))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!A(I))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return E(N[0],N[1],N[2],D[0],D[1],D[2],M[0],M[1],M[2],I[0],I[1],I[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function x(N){return N.length===1?N[0]:N.length>1&&Array.isArray(N[0])&&N.every(D=>Array.isArray(D)&&D.length===1)?f(N):N}function y(N){return N.length===2&&g(N[0])&&g(N[1])}function A(N){return N.length===3&&g(N[0])&&g(N[1])&&g(N[2])}function w(N){return N.length===4&&g(N[0])&&g(N[1])&&g(N[2])&&g(N[3])}function _(N,D,M,I){var U=N,X=M,k=c(U,D),z=c(X,I),q=c(l(k[0],z[1]),l(z[0],k[1]));if(p(q)||h(n(q),t.relTol))return null;var H=l(z[0],U[1]),te=l(z[1],U[0]),ce=l(z[0],X[1]),re=l(z[1],X[0]),O=u(s(c(c(H,te),ce),re),q);return i(o(k,O),U)}function S(N,D,M,I,U,X,k,z,q,H,te,ce){var re=l(c(N,D),c(M,I)),O=l(c(U,X),c(k,z)),ne=l(c(q,H),c(te,ce));return s(s(re,O),ne)}function E(N,D,M,I,U,X,k,z,q,H,te,ce){var re=S(N,k,H,k,D,z,te,z,M,q,ce,q),O=S(H,k,I,N,te,z,U,D,ce,q,X,M),ne=S(N,k,I,N,D,z,U,D,M,q,X,M),W=S(H,k,H,k,te,z,te,z,ce,q,ce,q),pe=S(I,N,I,N,U,D,U,D,X,M,X,M),me=c(l(re,O),l(ne,W)),ie=c(l(pe,W),l(O,O));if(p(ie))return null;var K=u(me,ie),ae=u(s(re,l(K,O)),W),ge=s(N,l(K,c(I,N))),he=s(D,l(K,c(U,D))),be=s(M,l(K,c(X,M))),ve=s(k,l(ae,c(H,k))),Ie=s(z,l(ae,c(te,z))),Ve=s(q,l(ae,c(ce,q)));return d(ge,ve)&&d(he,Ie)&&d(be,Ve)?[ge,he,be]:null}function C(N,D,M,I,U,X,k,z,q,H){var te=l(N,k),ce=l(I,k),re=l(D,z),O=l(U,z),ne=l(M,q),W=l(X,q),pe=c(c(c(H,te),re),ne),me=c(c(c(s(s(ce,O),W),te),re),ne),ie=u(pe,me),K=s(N,l(ie,c(I,N))),ae=s(D,l(ie,c(U,D))),ge=s(M,l(ie,c(X,M)));return[K,ae,ge]}}),B8="sum",rIe=["typed","config","add","numeric"],yY=Y(B8,rIe,r=>{var{typed:e,config:t,add:n,numeric:i}=r;return e(B8,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":a,"...":function(l){if(ny(l))throw new TypeError("Scalar values expected in function sum");return s(l)}});function s(o){var l;return Md(o,function(u){try{l=l===void 0?u:n(l,u)}catch(c){throw Ts(c,"sum",u)}}),l===void 0&&(l=i(0,t.number)),typeof l=="string"&&(l=i(l,Ud(l,t))),l}function a(o,l){try{var u=uN(o,l,n);return u}catch(c){throw Ts(c,"sum")}}}),zA="cumsum",nIe=["typed","add","unaryPlus"],bY=Y(zA,nIe,r=>{var{typed:e,add:t,unaryPlus:n}=r;return e(zA,{Array:i,Matrix:function(u){return u.create(i(u.valueOf(),u.datatype()))},"Array, number | BigNumber":a,"Matrix, number | BigNumber":function(u,c){return u.create(a(u.valueOf(),c),u.datatype())},"...":function(u){if(ny(u))throw new TypeError("All values expected to be scalar in function cumsum");return i(u)}});function i(l){try{return s(l)}catch(u){throw Ts(u,zA)}}function s(l){if(l.length===0)return[];for(var u=[n(l[0])],c=1;c<l.length;++c)u.push(t(u[c-1],l[c]));return u}function a(l,u){var c=vt(l);if(u<0||u>=c.length)throw new tl(u,c.length);try{return o(l,u)}catch(h){throw Ts(h,zA)}}function o(l,u){var c,h,d;if(u<=0){var f=l[0][0];if(Array.isArray(f)){for(d=eX(l),h=[],c=0;c<d.length;c++)h[c]=o(d[c],u-1);return h}else return s(l)}else{for(h=[],c=0;c<l.length;c++)h[c]=o(l[c],u-1);return h}}}),L8="mean",iIe=["typed","add","divide"],wY=Y(L8,iIe,r=>{var{typed:e,add:t,divide:n}=r;return e(L8,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":i,"...":function(o){if(ny(o))throw new TypeError("Scalar values expected in function mean");return s(o)}});function i(a,o){try{var l=uN(a,o,t),u=Array.isArray(a)?vt(a):a.size();return n(l,u[o])}catch(c){throw Ts(c,"mean")}}function s(a){var o,l=0;if(Md(a,function(u){try{o=o===void 0?u:t(o,u),l++}catch(c){throw Ts(c,"mean",u)}}),l===0)throw new Error("Cannot calculate the mean of an empty array");return n(o,l)}}),$8="median",sIe=["typed","add","divide","compare","partitionSelect"],aIe=Y($8,sIe,r=>{var{typed:e,add:t,divide:n,compare:i,partitionSelect:s}=r;function a(u){try{u=Yt(u.valueOf());var c=u.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var h=c/2-1,d=s(u,h+1),f=u[h],p=0;p<h;++p)i(u[p],f)>0&&(f=u[p]);return l(f,d)}else{var g=s(u,(c-1)/2);return o(g)}}catch(b){throw Ts(b,"median")}}var o=e({"number | BigNumber | Complex | Unit":function(c){return c}}),l=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(c,h){return n(t(c,h),2)}});return e($8,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(c,h){throw new Error("median(A, dim) is not yet supported")},"...":function(c){if(ny(c))throw new TypeError("Scalar values expected in function median");return a(c)}})}),V8="mad",oIe=["typed","abs","map","median","subtract"],lIe=Y(V8,oIe,r=>{var{typed:e,abs:t,map:n,median:i,subtract:s}=r;return e(V8,{"Array | Matrix":a,"...":function(l){return a(l)}});function a(o){if(o=Yt(o.valueOf()),o.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var l=i(o);return i(n(o,function(u){return t(s(u,l))}))}catch(u){throw u instanceof TypeError&&u.message.includes("median")?new TypeError(u.message.replace("median","mad")):Ts(u,"mad")}}}),n2="unbiased",U8="variance",uIe=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],xY=Y(U8,uIe,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:s,mapSlices:a,isNaN:o}=r;return e(U8,{"Array | Matrix":function(h){return l(h,n2)},"Array | Matrix, string":l,"Array | Matrix, number | BigNumber":function(h,d){return u(h,d,n2)},"Array | Matrix, number | BigNumber, string":u,"...":function(h){return l(h,n2)}});function l(c,h){var d,f=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(Md(c,function(b){try{d=d===void 0?b:t(d,b),f++}catch(v){throw Ts(v,"variance",b)}}),f===0)throw new Error("Cannot calculate variance of an empty array");var p=s(d,f);if(d=void 0,Md(c,function(b){var v=n(b,p);d=d===void 0?i(v,v):t(d,i(v,v))}),o(d))return d;switch(h){case"uncorrected":return s(d,f);case"biased":return s(d,f+1);case"unbiased":{var g=_t(d)?d.mul(0):0;return f===1?g:s(d,f-1)}default:throw new Error('Unknown normalization "'+h+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function u(c,h,d){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return a(c,h,f=>l(f,d))}catch(f){throw Ts(f,"variance")}}}),z8="quantileSeq",cIe=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],_Y=Y(z8,cIe,r=>{var{typed:e,bignumber:t,add:n,subtract:i,divide:s,multiply:a,partitionSelect:o,compare:l,isInteger:u,smaller:c,smallerEq:h,larger:d,mapSlices:f}=r;return e(z8,{"Array | Matrix, number | BigNumber":(x,y)=>g(x,y,!1),"Array | Matrix, number | BigNumber, number":(x,y,A)=>p(x,y,!1,A,g),"Array | Matrix, number | BigNumber, boolean":g,"Array | Matrix, number | BigNumber, boolean, number":(x,y,A,w)=>p(x,y,A,w,g),"Array | Matrix, Array | Matrix":(x,y)=>b(x,y,!1),"Array | Matrix, Array | Matrix, number":(x,y,A)=>p(x,y,!1,A,b),"Array | Matrix, Array | Matrix, boolean":b,"Array | Matrix, Array | Matrix, boolean, number":(x,y,A,w)=>p(x,y,A,w,b)});function p(x,y,A,w,_){return f(x,w,S=>_(S,y,A))}function g(x,y,A){var w,_=x.valueOf();if(c(y,0))throw new Error("N/prob must be non-negative");if(h(y,1))return st(y)?v(_,y,A):t(v(_,y,A));if(d(y,1)){if(!u(y))throw new Error("N must be a positive integer");if(d(y,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var S=n(y,1);w=[];for(var E=0;c(E,y);E++){var C=s(E+1,S);w.push(v(_,C,A))}return st(y)?w:t(w)}}function b(x,y,A){for(var w=x.valueOf(),_=y.valueOf(),S=[],E=0;E<_.length;++E)S.push(v(w,_[E],A));return S}function v(x,y,A){var w=Yt(x),_=w.length;if(_===0)throw new Error("Cannot calculate quantile of an empty sequence");var S=st(y)?y*(_-1):y.times(_-1),E=st(y)?Math.floor(S):S.floor().toNumber(),C=st(y)?S%1:S.minus(E);if(u(S))return A?w[S]:o(w,st(y)?S:S.valueOf());var N,D;if(A)N=w[E],D=w[E+1];else{D=o(w,E+1),N=w[E];for(var M=0;M<E;++M)l(w[M],N)>0&&(N=w[M])}return n(a(N,i(1,C)),a(D,C))}}),j8="std",hIe=["typed","map","sqrt","variance"],AY=Y(j8,hIe,r=>{var{typed:e,map:t,sqrt:n,variance:i}=r;return e(j8,{"Array | Matrix":s,"Array | Matrix, string":s,"Array | Matrix, number | BigNumber":s,"Array | Matrix, number | BigNumber, string":s,"...":function(o){return s(o)}});function s(a,o){if(a.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var l=i.apply(null,arguments);return Ma(l)?t(l,n):n(l)}catch(u){throw u instanceof TypeError&&u.message.includes(" variance")?new TypeError(u.message.replace(" variance"," std")):u}}}),q8="corr",dIe=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],fIe=Y(q8,dIe,r=>{var{typed:e,matrix:t,sqrt:n,sum:i,add:s,subtract:a,multiply:o,pow:l,divide:u}=r;return e(q8,{"Array, Array":function(f,p){return c(f,p)},"Matrix, Matrix":function(f,p){var g=c(f.toArray(),p.toArray());return Array.isArray(g)?t(g):g}});function c(d,f){var p=[];if(Array.isArray(d[0])&&Array.isArray(f[0])){if(d.length!==f.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var g=0;g<d.length;g++){if(d[g].length!==f[g].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");p.push(h(d[g],f[g]))}return p}else{if(d.length!==f.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return h(d,f)}}function h(d,f){var p=d.length,g=i(d),b=i(f),v=d.reduce((_,S,E)=>s(_,o(S,f[E])),0),x=i(d.map(_=>l(_,2))),y=i(f.map(_=>l(_,2))),A=a(o(p,v),o(g,b)),w=n(o(a(o(p,x),l(g,2)),a(o(p,y),l(b,2))));return u(A,w)}}),H8="bernoulli",mIe=["typed","config","isInteger","number","?BigNumber","?Fraction"],pIe=Y(H8,mIe,r=>{var{typed:e,config:t,number:n,BigNumber:i,Fraction:s}=r,a=[void 0],o=[void 0],l=[void 0],u=50;return e(H8,{number:c=>i2(c,h=>h,a,(h,d)=>h+d,(h,d)=>h*d,(h,d)=>h/d),"bigint | Fraction":c=>i2(n(c),h=>new s(h),o,(h,d)=>h.add(d),(h,d)=>h.mul(d),(h,d)=>h.div(d)),BigNumber:c=>(t.precision!==u&&(l=[void 0],u=t.precision),i2(n(c),h=>new i(h),l,(h,d)=>h.add(d),(h,d)=>h.mul(d),(h,d)=>h.div(d)))})});function i2(r,e,t,n,i,s){if(r<0||!tt(r))throw new RangeError("Bernoulli index must be nonnegative integer");if(r===0)return e(1);if(r===1)return s(e(-1),e(2));if(r%2===1)return e(0);var a=e(1);t.length===1&&t.push([s(a,e(-3)),s(a,e(-2)),s(a,e(6))]);for(var o=r/2,l=e(0),u=e(2);t.length<=o;){for(var c=t.length,h=Math.floor((c+1)/2),d=l,f=1;f<h;++f)d=n(d,i(t[f][0],t[c-f][0]));d=i(d,u),c%2===0&&(d=n(d,i(t[h][0],t[h][0]))),d=s(d,e(-(2*c+1)));var p=s(i(t[c-1][1],e(-c*(2*c-1))),u);t.push([d,p,i(p,d)])}return t[o][2]}var G8="combinations",gIe=["typed"],vIe=Y(G8,gIe,r=>{var{typed:e}=r;return e(G8,{"number, number":xX,"BigNumber, BigNumber":function(n,i){var s=n.constructor,a,o,l=n.minus(i),u=new s(1);if(!W8(n)||!W8(i))throw new TypeError("Positive integer value expected in function combinations");if(i.gt(n))throw new TypeError("k must be less than n in function combinations");if(a=u,i.lt(l))for(o=u;o.lte(l);o=o.plus(u))a=a.times(i.plus(o)).dividedBy(o);else for(o=u;o.lte(i);o=o.plus(u))a=a.times(l.plus(o)).dividedBy(o);return a}})});function W8(r){return r.isInteger()&&r.gte(0)}var K8="combinationsWithRep",yIe=["typed"],bIe=Y(K8,yIe,r=>{var{typed:e}=r;return e(K8,{"number, number":function(n,i){if(!tt(n)||n<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!tt(i)||i<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n<1)throw new TypeError("k must be less than or equal to n + k - 1");if(i<n-1){var s=ac(n,n+i-1);return s/ac(1,i)}var a=ac(i+1,n+i-1);return a/ac(1,n-1)},"BigNumber, BigNumber":function(n,i){var s=n.constructor,a,o,l=new s(1),u=n.minus(l);if(!X8(n)||!X8(i))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n.lt(l))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(a=l,i.lt(u))for(o=l;o.lte(u);o=o.plus(l))a=a.times(i.plus(o)).dividedBy(o);else for(o=l;o.lte(i);o=o.plus(l))a=a.times(u.plus(o)).dividedBy(o);return a}})});function X8(r){return r.isInteger()&&r.gte(0)}var Y8="gamma",wIe=["typed","config","multiplyScalar","pow","BigNumber","Complex"],xIe=Y(Y8,wIe,r=>{var{typed:e,config:t,multiplyScalar:n,pow:i,BigNumber:s,Complex:a}=r;function o(u){if(u.im===0)return ET(u.re);if(u.re<.5){var c=new a(1-u.re,-u.im),h=new a(Math.PI*u.re,Math.PI*u.im);return new a(Math.PI).div(h.sin()).div(o(c))}u=new a(u.re-1,u.im);for(var d=new a(qg[0],0),f=1;f<qg.length;++f){var p=new a(qg[f],0);d=d.add(p.div(u.add(f)))}var g=new a(u.re+AX+.5,u.im),b=Math.sqrt(2*Math.PI),v=g.pow(u.add(.5)),x=g.neg().exp();return d.mul(b).mul(v).mul(x)}return e(Y8,{number:ET,Complex:o,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new s(1/0):l(c.minus(1));if(!c.isFinite())return new s(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function l(u){if(u<8)return new s([1,1,2,6,24,120,720,5040][u]);var c=t.precision+(Math.log(u.toNumber())|0),h=s.clone({precision:c});if(u%2===1)return u.times(l(new s(u-1)));for(var d=u,f=new h(u),p=u.toNumber();d>2;)d-=2,p+=d,f=f.times(p);return new s(f.toPrecision(s.precision))}}),Q8="lgamma",_Ie=["Complex","typed"],AIe=Y(Q8,_Ie,r=>{var{Complex:e,typed:t}=r,n=7,i=7,s=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return t(Q8,{number:ST,Complex:a,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function a(u){var c=6.283185307179586,h=1.1447298858494002,d=.1;if(u.isNaN())return new e(NaN,NaN);if(u.im===0)return new e(ST(u.re),0);if(u.re>=n||Math.abs(u.im)>=i)return o(u);if(u.re<=d){var f=Kge(c,u.im)*Math.floor(.5*u.re+.25),p=u.mul(Math.PI).sin().log(),g=a(new e(1-u.re,-u.im));return new e(h,f).sub(p).sub(g)}else return u.im>=0?l(u):l(u.conjugate()).conjugate()}function o(u){for(var c=u.sub(.5).mul(u.log()).sub(u).add(EX),h=new e(1,0).div(u),d=h.div(u),f=s[0],p=s[1],g=2*d.re,b=d.re*d.re+d.im*d.im,v=2;v<8;v++){var x=p;p=-b*f+s[v],f=g*f+x}var y=h.mul(d.mul(f).add(p));return c.add(y)}function l(u){var c=0,h=0,d=u;for(u=u.add(1);u.re<=n;){d=d.mul(u);var f=d.im<0?1:0;f!==0&&h===0&&c++,h=f,u=u.add(1)}return o(u).sub(d.log()).sub(new e(0,c*2*Math.PI*1))}}),J8="factorial",EIe=["typed","gamma"],SIe=Y(J8,EIe,r=>{var{typed:e,gamma:t}=r;return e(J8,{number:function(i){if(i<0)throw new Error("Value must be non-negative");return t(i+1)},BigNumber:function(i){if(i.isNegative())throw new Error("Value must be non-negative");return t(i.plus(1))},"Array | Matrix":e.referToSelf(n=>i=>At(i,n))})}),Z8="kldivergence",TIe=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],CIe=Y(Z8,TIe,r=>{var{typed:e,matrix:t,divide:n,sum:i,multiply:s,map:a,dotDivide:o,log:l,isNumeric:u}=r;return e(Z8,{"Array, Array":function(d,f){return c(t(d),t(f))},"Matrix, Array":function(d,f){return c(d,t(f))},"Array, Matrix":function(d,f){return c(t(d),f)},"Matrix, Matrix":function(d,f){return c(d,f)}});function c(h,d){var f=d.size().length,p=h.size().length;if(f>1)throw new Error("first object must be one dimensional");if(p>1)throw new Error("second object must be one dimensional");if(f!==p)throw new Error("Length of two vectors must be equal");var g=i(h);if(g===0)throw new Error("Sum of elements in first object must be non zero");var b=i(d);if(b===0)throw new Error("Sum of elements in second object must be non zero");var v=n(h,i(h)),x=n(d,i(d)),y=i(s(v,a(o(v,x),A=>l(A))));return u(y)?y:Number.NaN}}),eU="multinomial",NIe=["typed","add","divide","multiply","factorial","isInteger","isPositive"],DIe=Y(eU,NIe,r=>{var{typed:e,add:t,divide:n,multiply:i,factorial:s,isInteger:a,isPositive:o}=r;return e(eU,{"Array | Matrix":function(u){var c=0,h=1;return Md(u,function(d){if(!a(d)||!o(d))throw new TypeError("Positive integer value expected in function multinomial");c=t(c,d),h=i(h,s(d))}),n(s(c),h)}})}),tU="permutations",MIe=["typed","factorial"],IIe=Y(tU,MIe,r=>{var{typed:e,factorial:t}=r;return e(tU,{"number | BigNumber":t,"number, number":function(i,s){if(!tt(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(!tt(s)||s<0)throw new TypeError("Positive integer value expected in function permutations");if(s>i)throw new TypeError("second argument k must be less than or equal to first argument n");return ac(i-s+1,i)},"BigNumber, BigNumber":function(i,s){var a,o;if(!rU(i)||!rU(s))throw new TypeError("Positive integer value expected in function permutations");if(s.gt(i))throw new TypeError("second argument k must be less than or equal to first argument n");var l=i.mul(0).add(1);for(a=l,o=i.minus(s).plus(1);o.lte(i);o=o.plus(1))a=a.times(o);return a}})});function rU(r){return r.isInteger()&&r.gte(0)}var eO={exports:{}};eO.exports;(function(r){(function(e,t,n){function i(l){var u=this,c=o();u.next=function(){var h=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=h-(u.c=h|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function s(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function a(l,u){var c=new i(l),h=u&&u.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,h&&(typeof h=="object"&&s(h,c),d.state=function(){return s(c,{})}),d}function o(){var l=4022871197,u=function(c){c=String(c);for(var h=0;h<c.length;h++){l+=c.charCodeAt(h);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return u}t&&t.exports?t.exports=a:this.alea=a})(dp,r)})(eO);var PIe=eO.exports,tO={exports:{}};tO.exports;(function(r){(function(e,t,n){function i(o){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var h=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^h^h>>>8},o===(o|0)?l.x=o:u+=o;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function s(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function a(o,l){var u=new i(o),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&s(c,u),h.state=function(){return s(u,{})}),h}t&&t.exports?t.exports=a:this.xor128=a})(dp,r)})(tO);var RIe=tO.exports,rO={exports:{}};rO.exports;(function(r){(function(e,t,n){function i(o){var l=this,u="";l.next=function(){var h=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(h^h<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:u+=o;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function a(o,l){var u=new i(o),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&s(c,u),h.state=function(){return s(u,{})}),h}t&&t.exports?t.exports=a:this.xorwow=a})(dp,r)})(rO);var kIe=rO.exports,nO={exports:{}};nO.exports;(function(r){(function(e,t,n){function i(o){var l=this;l.next=function(){var c=l.x,h=l.i,d,f;return d=c[h],d^=d>>>7,f=d^d<<24,d=c[h+1&7],f^=d^d>>>10,d=c[h+3&7],f^=d^d>>>3,d=c[h+4&7],f^=d^d<<7,d=c[h+7&7],d=d^d<<13,f^=d^d<<9,c[h]=f,l.i=h+1&7,f};function u(c,h){var d,f=[];if(h===(h|0))f[0]=h;else for(h=""+h,d=0;d<h.length;++d)f[d&7]=f[d&7]<<15^h.charCodeAt(d)+f[d+1&7]<<13;for(;f.length<8;)f.push(0);for(d=0;d<8&&f[d]===0;++d);for(d==8?f[7]=-1:f[d],c.x=f,c.i=0,d=256;d>0;--d)c.next()}u(l,o)}function s(o,l){return l.x=o.x.slice(),l.i=o.i,l}function a(o,l){o==null&&(o=+new Date);var u=new i(o),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(c.x&&s(c,u),h.state=function(){return s(u,{})}),h}t&&t.exports?t.exports=a:this.xorshift7=a})(dp,r)})(nO);var FIe=nO.exports,iO={exports:{}};iO.exports;(function(r){(function(e,t,n){function i(o){var l=this;l.next=function(){var c=l.w,h=l.X,d=l.i,f,p;return l.w=c=c+1640531527|0,p=h[d+34&127],f=h[d=d+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,p=h[d]=p^f,l.i=d,p+(c^c>>>16)|0};function u(c,h){var d,f,p,g,b,v=[],x=128;for(h===(h|0)?(f=h,h=null):(h=h+"\0",f=0,x=Math.max(x,h.length)),p=0,g=-32;g<x;++g)h&&(f^=h.charCodeAt((g+32)%h.length)),g===0&&(b=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,g>=0&&(b=b+1640531527|0,d=v[g&127]^=f+b,p=d==0?p+1:0);for(p>=128&&(v[(h&&h.length||0)&127]=-1),p=127,g=4*128;g>0;--g)f=v[p+34&127],d=v[p=p+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,v[p]=f^d;c.w=b,c.X=v,c.i=p}u(l,o)}function s(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function a(o,l){o==null&&(o=+new Date);var u=new i(o),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(c.X&&s(c,u),h.state=function(){return s(u,{})}),h}t&&t.exports?t.exports=a:this.xor4096=a})(dp,r)})(iO);var OIe=iO.exports,sO={exports:{}};sO.exports;(function(r){(function(e,t,n){function i(o){var l=this,u="";l.next=function(){var h=l.b,d=l.c,f=l.d,p=l.a;return h=h<<25^h>>>7^d,d=d-f|0,f=f<<24^f>>>8^p,p=p-h|0,l.b=h=h<<20^h>>>12^d,l.c=d=d-f|0,l.d=f<<16^d>>>16^p,l.a=p-h|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):u+=o;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function s(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function a(o,l){var u=new i(o),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&s(c,u),h.state=function(){return s(u,{})}),h}t&&t.exports?t.exports=a:this.tychei=a})(dp,r)})(sO);var BIe=sO.exports,EY={exports:{}};const LIe={},$Ie=Object.freeze(Object.defineProperty({__proto__:null,default:LIe},Symbol.toStringTag,{value:"Module"})),VIe=LQ($Ie);(function(r){(function(e,t,n){var i=256,s=6,a=52,o="random",l=n.pow(i,s),u=n.pow(2,a),c=u*2,h=i-1,d;function f(A,w,_){var S=[];w=w==!0?{entropy:!0}:w||{};var E=v(b(w.entropy?[A,y(t)]:A??x(),3),S),C=new p(S),N=function(){for(var D=C.g(s),M=l,I=0;D<u;)D=(D+I)*i,M*=i,I=C.g(1);for(;D>=c;)D/=2,M/=2,I>>>=1;return(D+I)/M};return N.int32=function(){return C.g(4)|0},N.quick=function(){return C.g(4)/4294967296},N.double=N,v(y(C.S),t),(w.pass||_||function(D,M,I,U){return U&&(U.S&&g(U,C),D.state=function(){return g(C,{})}),I?(n[o]=D,M):D})(N,E,"global"in w?w.global:this==n,w.state)}function p(A){var w,_=A.length,S=this,E=0,C=S.i=S.j=0,N=S.S=[];for(_||(A=[_++]);E<i;)N[E]=E++;for(E=0;E<i;E++)N[E]=N[C=h&C+A[E%_]+(w=N[E])],N[C]=w;(S.g=function(D){for(var M,I=0,U=S.i,X=S.j,k=S.S;D--;)M=k[U=h&U+1],I=I*i+k[h&(k[U]=k[X=h&X+M])+(k[X]=M)];return S.i=U,S.j=X,I})(i)}function g(A,w){return w.i=A.i,w.j=A.j,w.S=A.S.slice(),w}function b(A,w){var _=[],S=typeof A,E;if(w&&S=="object")for(E in A)try{_.push(b(A[E],w-1))}catch{}return _.length?_:S=="string"?A:A+"\0"}function v(A,w){for(var _=A+"",S,E=0;E<_.length;)w[h&E]=h&(S^=w[h&E]*19)+_.charCodeAt(E++);return y(w)}function x(){try{var A;return d&&(A=d.randomBytes)?A=A(i):(A=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(A)),y(A)}catch{var w=e.navigator,_=w&&w.plugins;return[+new Date,e,_,e.screen,y(t)]}}function y(A){return String.fromCharCode.apply(0,A)}if(v(n.random(),t),r.exports){r.exports=f;try{d=VIe}catch{}}else n["seed"+o]=f})(typeof self<"u"?self:dp,[],Math)})(EY);var UIe=EY.exports,zIe=PIe,jIe=RIe,qIe=kIe,HIe=FIe,GIe=OIe,WIe=BIe,Ep=UIe;Ep.alea=zIe;Ep.xor128=jIe;Ep.xorwow=qIe;Ep.xorshift7=HIe;Ep.xor4096=GIe;Ep.tychei=WIe;var KIe=Ep;const SY=nC(KIe);var XIe=SY(Date.now());function O0(r){var e;function t(i){e=i===null?XIe:SY(String(i))}t(r);function n(){return e()}return n}var nU="pickRandom",YIe=["typed","config","?on"],QIe=Y(nU,YIe,r=>{var{typed:e,config:t,on:n}=r,i=O0(t.randomSeed);return n&&n("config",function(a,o){a.randomSeed!==o.randomSeed&&(i=O0(a.randomSeed))}),e(nU,{"Array | Matrix":function(o){return s(o,{})},"Array | Matrix, Object":function(o,l){return s(o,l)},"Array | Matrix, number":function(o,l){return s(o,{number:l})},"Array | Matrix, Array | Matrix":function(o,l){return s(o,{weights:l})},"Array | Matrix, Array | Matrix, number":function(o,l,u){return s(o,{number:u,weights:l})},"Array | Matrix, number, Array | Matrix":function(o,l,u){return s(o,{number:l,weights:u})}});function s(a,o){var{number:l,weights:u,elementWise:c=!0}=o,h=typeof l>"u";h&&(l=1);var d=lt(a)?a.create:lt(u)?u.create:null;a=a.valueOf(),u&&(u=u.valueOf()),c===!0&&(a=Yt(a),u=Yt(u));var f=0;if(typeof u<"u"){if(u.length!==a.length)throw new Error("Weights must have the same length as possibles");for(var p=0,g=u.length;p<g;p++){if(!st(u[p])||u[p]<0)throw new Error("Weights must be an array of positive numbers");f+=u[p]}}for(var b=a.length,v=[],x;v.length<l;){if(typeof u>"u")x=a[Math.floor(i()*b)];else for(var y=i()*f,A=0,w=a.length;A<w;A++)if(y-=u[A],y<0){x=a[A];break}v.push(x)}return h?v[0]:d?d(v):v}});function aO(r,e){var t=[];if(r=r.slice(0),r.length>1)for(var n=0,i=r.shift();n<i;n++)t.push(aO(r,e));else for(var s=0,a=r.shift();s<a;s++)t.push(e());return t}var iU="random",JIe=["typed","config","?on"],ZIe=Y(iU,JIe,r=>{var{typed:e,config:t,on:n}=r,i=O0(t.randomSeed);return n&&n("config",function(o,l){o.randomSeed!==l.randomSeed&&(i=O0(o.randomSeed))}),e(iU,{"":()=>a(0,1),number:o=>a(0,o),"number, number":(o,l)=>a(o,l),"Array | Matrix":o=>s(o,0,1),"Array | Matrix, number":(o,l)=>s(o,0,l),"Array | Matrix, number, number":(o,l,u)=>s(o,l,u)});function s(o,l,u){var c=aO(o.valueOf(),()=>a(l,u));return lt(o)?o.create(c,"number"):c}function a(o,l){return o+i()*(l-o)}}),sU="randomInt",ePe=["typed","config","log2","?on"],tPe=Y(sU,ePe,r=>{var{typed:e,config:t,log2:n,on:i}=r,s=O0(t.randomSeed);return i&&i("config",function(u,c){u.randomSeed!==c.randomSeed&&(s=O0(u.randomSeed))}),e(sU,{"":()=>o(0,2),number:u=>o(0,u),"number, number":(u,c)=>o(u,c),bigint:u=>l(0n,u),"bigint, bigint":l,"Array | Matrix":u=>a(u,0,1),"Array | Matrix, number":(u,c)=>a(u,0,c),"Array | Matrix, number, number":(u,c,h)=>a(u,c,h)});function a(u,c,h){var d=aO(u.valueOf(),()=>o(c,h));return lt(u)?u.create(d,"number"):d}function o(u,c){return Math.floor(u+s()*(c-u))}function l(u,c){var h=2n**30n,d=c-u;if(d<=h)return u+BigInt(o(0,Number(d)));for(var f=n(d),p=d;p>=d;){p=0n;for(var g=0;g<f;++g)p=2n*p+(s()<.5?0n:1n)}return u+p}}),aU="stirlingS2",rPe=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],nPe=Y(aU,rPe,r=>{var{typed:e,addScalar:t,subtractScalar:n,multiplyScalar:i,divideScalar:s,pow:a,factorial:o,combinations:l,isNegative:u,isInteger:c,number:h,bignumber:d,larger:f}=r,p=[],g=[];return e(aU,{"number | BigNumber, number | BigNumber":function(v,x){if(!c(v)||u(v)||!c(x)||u(x))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(f(x,v))throw new TypeError("k must be less than or equal to n in function stirlingS2");var y=!(st(v)&&st(x)),A=y?g:p,w=y?d:h,_=h(v),S=h(x);if(A[_]&&A[_].length>S)return A[_][S];for(var E=0;E<=_;++E)if(A[E]||(A[E]=[w(E===0?1:0)]),E!==0)for(var C=A[E],N=A[E-1],D=C.length;D<=E&&D<=S;++D)D===E?C[D]=1:C[D]=t(i(w(D),N[D]),N[D-1]);return A[_][S]}})}),oU="bellNumbers",iPe=["typed","addScalar","isNegative","isInteger","stirlingS2"],sPe=Y(oU,iPe,r=>{var{typed:e,addScalar:t,isNegative:n,isInteger:i,stirlingS2:s}=r;return e(oU,{"number | BigNumber":function(o){if(!i(o)||n(o))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var l=0,u=0;u<=o;u++)l=t(l,s(o,u));return l}})}),lU="catalan",aPe=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],oPe=Y(lU,aPe,r=>{var{typed:e,addScalar:t,divideScalar:n,multiplyScalar:i,combinations:s,isNegative:a,isInteger:o}=r;return e(lU,{"number | BigNumber":function(u){if(!o(u)||a(u))throw new TypeError("Non-negative integer value expected in function catalan");return n(s(i(u,2),u),t(u,1))}})}),uU="composition",lPe=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],uPe=Y(uU,lPe,r=>{var{typed:e,addScalar:t,combinations:n,isPositive:i,isNegative:s,isInteger:a,larger:o}=r;return e(uU,{"number | BigNumber, number | BigNumber":function(u,c){if(!a(u)||!i(u)||!a(c)||!i(c))throw new TypeError("Positive integer value expected in function composition");if(o(c,u))throw new TypeError("k must be less than or equal to n in function composition");return n(t(u,-1),t(c,-1))}})}),cU="leafCount",cPe=["parse","typed"],hPe=Y(cU,cPe,r=>{var{parse:e,typed:t}=r;function n(i){var s=0;return i.forEach(a=>{s+=n(a)}),s||1}return t(cU,{Node:function(s){return n(s)}})});function hU(r){return Ut(r)||xn(r)&&r.isUnary()&&Ut(r.args[0])}function FT(r){return!!(Ut(r)||(Cd(r)||xn(r))&&r.args.every(FT)||Cc(r)&&FT(r.content))}function dU(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function s2(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?dU(Object(t),!0).forEach(function(n){On(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):dU(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var dPe="simplifyUtil",fPe=["FunctionNode","OperatorNode","SymbolNode"],oO=Y(dPe,fPe,r=>{var{FunctionNode:e,OperatorNode:t,SymbolNode:n}=r,i=!0,s=!1,a="defaultF",o={add:{trivial:i,total:i,commutative:i,associative:i},unaryPlus:{trivial:i,total:i,commutative:i,associative:i},subtract:{trivial:s,total:i,commutative:s,associative:s},multiply:{trivial:i,total:i,commutative:i,associative:i},divide:{trivial:s,total:i,commutative:s,associative:s},paren:{trivial:i,total:i,commutative:i,associative:s},defaultF:{trivial:s,total:i,commutative:s,associative:s}},l={divide:{total:s},log:{total:s}},u={subtract:{total:s},abs:{trivial:i},log:{total:i}};function c(y,A){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o,_=a;if(typeof y=="string"?_=y:xn(y)?_=y.fn.toString():Cd(y)?_=y.name:Cc(y)&&(_="paren"),Ze(w,_)){var S=w[_];if(Ze(S,A))return S[A];if(Ze(o,_))return o[_][A]}if(Ze(w,a)){var E=w[a];return Ze(E,A)?E[A]:o[a][A]}if(Ze(o,_)){var C=o[_];if(Ze(C,A))return C[A]}return o[a][A]}function h(y){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(y,"commutative",A)}function d(y){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(y,"associative",A)}function f(y,A){var w=s2({},y);for(var _ in A)Ze(y,_)?w[_]=s2(s2({},A[_]),y[_]):w[_]=A[_];return w}function p(y,A){if(!y.args||y.args.length===0)return y;y.args=g(y,A);for(var w=0;w<y.args.length;w++)p(y.args[w],A)}function g(y,A){var w,_=[],S=function(C){for(var N=0;N<C.args.length;N++){var D=C.args[N];xn(D)&&w===D.op?S(D):_.push(D)}};return d(y,A)?(w=y.op,S(y),_):y.args}function b(y,A){if(!(!y.args||y.args.length===0)){for(var w=x(y),_=y.args.length,S=0;S<_;S++)b(y.args[S],A);if(_>2&&d(y,A)){for(var E=y.args.pop();y.args.length>0;)E=w([y.args.pop(),E]);y.args=E.args}}}function v(y,A){if(!(!y.args||y.args.length===0)){for(var w=x(y),_=y.args.length,S=0;S<_;S++)v(y.args[S],A);if(_>2&&d(y,A)){for(var E=y.args.shift();y.args.length>0;)E=w([E,y.args.shift()]);y.args=E.args}}}function x(y){return xn(y)?function(A){try{return new t(y.op,y.fn,A,y.implicit)}catch(w){return console.error(w),[]}}:function(A){return new e(new n(y.name),A)}}return{createMakeNodeFunction:x,hasProperty:c,isCommutative:h,isAssociative:d,mergeContext:f,flatten:p,allChildren:g,unflattenr:b,unflattenl:v,defaultContext:o,realContext:l,positiveContext:u}}),mPe="simplify",pPe=["typed","parse","equal","resolve","simplifyConstant","simplifyCore","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode","replacer"],gPe=Y(mPe,pPe,r=>{var{typed:e,parse:t,equal:n,resolve:i,simplifyConstant:s,simplifyCore:a,AccessorNode:o,ArrayNode:l,ConstantNode:u,FunctionNode:c,IndexNode:h,ObjectNode:d,OperatorNode:f,ParenthesisNode:p,SymbolNode:g,replacer:b}=r,{hasProperty:v,isCommutative:x,isAssociative:y,mergeContext:A,flatten:w,unflattenr:_,unflattenl:S,createMakeNodeFunction:E,defaultContext:C,realContext:N,positiveContext:D}=oO({FunctionNode:c,OperatorNode:f,SymbolNode:g});e.addConversion({from:"Object",to:"Map",convert:zg});var M=e("simplify",{Node:H,"Node, Map":(ie,K)=>H(ie,!1,K),"Node, Map, Object":(ie,K,ae)=>H(ie,!1,K,ae),"Node, Array":H,"Node, Array, Map":H,"Node, Array, Map, Object":H});e.removeConversion({from:"Object",to:"Map",convert:zg}),M.defaultContext=C,M.realContext=N,M.positiveContext=D;function I(ie){return ie.transform(function(K){return Cc(K)?I(K.content):K})}var U={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};M.rules=[a,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},s,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},s,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function X(ie,K){var ae={};if(ie.s){var ge=ie.s.split("->");if(ge.length===2)ae.l=ge[0],ae.r=ge[1];else throw SyntaxError("Could not parse rule: "+ie.s)}else ae.l=ie.l,ae.r=ie.r;ae.l=I(t(ae.l)),ae.r=I(t(ae.r));for(var he of["imposeContext","repeat","assuming"])he in ie&&(ae[he]=ie[he]);if(ie.evaluate&&(ae.evaluate=t(ie.evaluate)),y(ae.l,K)){var be=!x(ae.l,K),ve;be&&(ve=q());var Ie=E(ae.l),Ve=q();ae.expanded={},ae.expanded.l=Ie([ae.l,Ve]),w(ae.expanded.l,K),_(ae.expanded.l,K),ae.expanded.r=Ie([ae.r,Ve]),be&&(ae.expandedNC1={},ae.expandedNC1.l=Ie([ve,ae.l]),ae.expandedNC1.r=Ie([ve,ae.r]),ae.expandedNC2={},ae.expandedNC2.l=Ie([ve,ae.expanded.l]),ae.expandedNC2.r=Ie([ve,ae.expanded.r]))}return ae}function k(ie,K){for(var ae=[],ge=0;ge<ie.length;ge++){var he=ie[ge],be=void 0,ve=typeof he;switch(ve){case"string":he={s:he};case"object":be=X(he,K);break;case"function":be=he;break;default:throw TypeError("Unsupported type of rule: "+ve)}ae.push(be)}return ae}var z=0;function q(){return new g("_p"+z++)}function H(ie,K){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:O1(),ge=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},he=ge.consoleDebug;K=k(K||M.rules,ge.context);var be=i(ie,ae);be=I(be);for(var ve={},Ie=be.toString({parenthesis:"all"});!ve[Ie];){ve[Ie]=!0,z=0;var Ve=Ie;he&&console.log("Working on: ",Ie);for(var We=0;We<K.length;We++){var Be="";if(typeof K[We]=="function"?(be=K[We](be,ge),he&&(Be=K[We].name)):(w(be,ge.context),be=ce(be,K[We],ge.context),he&&(Be="".concat(K[We].l.toString()," -> ").concat(K[We].r.toString()))),he){var $e=be.toString({parenthesis:"all"});$e!==Ve&&(console.log("Applying",Be,"produced",$e),Ve=$e)}S(be,ge.context)}Ie=be.toString({parenthesis:"all"})}return be}function te(ie,K,ae){var ge=ie;if(ie)for(var he=0;he<ie.length;++he){var be=ce(ie[he],K,ae);be!==ie[he]&&(ge===ie&&(ge=ie.slice()),ge[he]=be)}return ge}function ce(ie,K,ae){if(K.assuming){for(var ge in K.assuming)for(var he in K.assuming[ge])if(v(ge,he,ae)!==K.assuming[ge][he])return ie}var be=A(K.imposeContext,ae),ve=ie;if(ve instanceof f||ve instanceof c){var Ie=te(ve.args,K,ae);Ie!==ve.args&&(ve=ve.clone(),ve.args=Ie)}else if(ve instanceof p){if(ve.content){var Ve=ce(ve.content,K,ae);Ve!==ve.content&&(ve=new p(Ve))}}else if(ve instanceof l){var We=te(ve.items,K,ae);We!==ve.items&&(ve=new l(We))}else if(ve instanceof o){var Be=ve.object;ve.object&&(Be=ce(ve.object,K,ae));var $e=ve.index;ve.index&&($e=ce(ve.index,K,ae)),(Be!==ve.object||$e!==ve.index)&&(ve=new o(Be,$e))}else if(ve instanceof h){var Ge=te(ve.dimensions,K,ae);Ge!==ve.dimensions&&(ve=new h(Ge))}else if(ve instanceof d){var Z=!1,Q={};for(var L in ve.properties)Q[L]=ce(ve.properties[L],K,ae),Q[L]!==ve.properties[L]&&(Z=!0);Z&&(ve=new d(Q))}var G=K.r,ee=pe(K.l,ve,be)[0];if(!ee&&K.expanded&&(G=K.expanded.r,ee=pe(K.expanded.l,ve,be)[0]),!ee&&K.expandedNC1&&(G=K.expandedNC1.r,ee=pe(K.expandedNC1.l,ve,be)[0],ee||(G=K.expandedNC2.r,ee=pe(K.expandedNC2.l,ve,be)[0])),ee){var oe=ve.implicit;ve=G.clone(),oe&&"implicit"in G&&(ve.implicit=!0),ve=ve.transform(function(fe){return fe.isSymbolNode&&Ze(ee.placeholders,fe.name)?ee.placeholders[fe.name].clone():fe})}return K.repeat&&ve!==ie&&(ve=ce(ve,K,ae)),ve}function re(ie,K){var ae=[],ge,he,be=E(ie);if(x(ie,K))for(var ve=0;ve<ie.args.length;ve++)he=ie.args.slice(0),he.splice(ve,1),ge=he.length===1?he[0]:be(he),ae.push(be([ie.args[ve],ge]));else for(var Ie=1;Ie<ie.args.length;Ie++){var Ve=ie.args[0];Ie>1&&(Ve=be(ie.args.slice(0,Ie))),he=ie.args.slice(Ie),ge=he.length===1?he[0]:be(he),ae.push(be([Ve,ge]))}return ae}function O(ie,K){var ae={placeholders:{}};if(!ie.placeholders&&!K.placeholders)return ae;if(ie.placeholders){if(!K.placeholders)return ie}else return K;for(var ge in ie.placeholders)if(Ze(ie.placeholders,ge)&&(ae.placeholders[ge]=ie.placeholders[ge],Ze(K.placeholders,ge)&&!me(ie.placeholders[ge],K.placeholders[ge])))return null;for(var he in K.placeholders)Ze(K.placeholders,he)&&(ae.placeholders[he]=K.placeholders[he]);return ae}function ne(ie,K){var ae=[];if(ie.length===0||K.length===0)return ae;for(var ge,he=0;he<ie.length;he++)for(var be=0;be<K.length;be++)ge=O(ie[he],K[be]),ge&&ae.push(ge);return ae}function W(ie){if(ie.length===0)return ie;for(var K=ie.reduce(ne),ae=[],ge={},he=0;he<K.length;he++){var be=JSON.stringify(K[he],b);ge[be]||(ge[be]=!0,ae.push(K[he]))}return ae}function pe(ie,K,ae,ge){var he=[{placeholders:{}}];if(ie instanceof f&&K instanceof f||ie instanceof c&&K instanceof c){if(ie instanceof f){if(ie.op!==K.op||ie.fn!==K.fn)return[]}else if(ie instanceof c&&ie.name!==K.name)return[];if(K.args.length===1&&ie.args.length===1||!y(K,ae)&&K.args.length===ie.args.length||ge){for(var be=[],ve=0;ve<ie.args.length;ve++){var Ie=pe(ie.args[ve],K.args[ve],ae);if(Ie.length===0)break;be.push(Ie)}if(be.length!==ie.args.length){if(!x(K,ae)||ie.args.length===1)return[];if(ie.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var Ve=pe(ie.args[0],K.args[1],ae);if(Ve.length===0)return[];var We=pe(ie.args[1],K.args[0],ae);if(We.length===0)return[];be=[Ve,We]}he=W(be)}else if(K.args.length>=2&&ie.args.length===2){for(var Be=re(K,ae),$e=[],Ge=0;Ge<Be.length;Ge++){var Z=pe(ie,Be[Ge],ae,!0);$e=$e.concat(Z)}return $e}else{if(ie.args.length>2)throw Error("Unexpected non-binary associative function: "+ie.toString());return[]}}else if(ie instanceof g){if(ie.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(U[ie.name]){if(ie.name!==K.name)return[]}else switch(ie.name[1]>="a"&&ie.name[1]<="z"?ie.name.substring(0,2):ie.name[0]){case"n":case"_p":he[0].placeholders[ie.name]=K;break;case"c":case"cl":if(Ut(K))he[0].placeholders[ie.name]=K;else return[];break;case"v":if(!Ut(K))he[0].placeholders[ie.name]=K;else return[];break;case"vl":if(fi(K))he[0].placeholders[ie.name]=K;else return[];break;case"cd":if(hU(K))he[0].placeholders[ie.name]=K;else return[];break;case"vd":if(!hU(K))he[0].placeholders[ie.name]=K;else return[];break;case"ce":if(FT(K))he[0].placeholders[ie.name]=K;else return[];break;case"ve":if(!FT(K))he[0].placeholders[ie.name]=K;else return[];break;default:throw new Error("Invalid symbol in rule: "+ie.name)}}else if(ie instanceof u){if(!n(ie.value,K.value))return[]}else return[];return he}function me(ie,K){if(ie instanceof u&&K instanceof u){if(!n(ie.value,K.value))return!1}else if(ie instanceof g&&K instanceof g){if(ie.name!==K.name)return!1}else if(ie instanceof f&&K instanceof f||ie instanceof c&&K instanceof c){if(ie instanceof f){if(ie.op!==K.op||ie.fn!==K.fn)return!1}else if(ie instanceof c&&ie.name!==K.name)return!1;if(ie.args.length!==K.args.length)return!1;for(var ae=0;ae<ie.args.length;ae++)if(!me(ie.args[ae],K.args[ae]))return!1}else return!1;return!0}return M}),vPe="simplifyConstant",yPe=["typed","config","mathWithTransform","matrix","isBounded","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],bPe=Y(vPe,yPe,r=>{var{typed:e,config:t,mathWithTransform:n,matrix:i,isBounded:s,fraction:a,bignumber:o,AccessorNode:l,ArrayNode:u,ConstantNode:c,FunctionNode:h,IndexNode:d,ObjectNode:f,OperatorNode:p,SymbolNode:g}=r,{isCommutative:b,isAssociative:v,allChildren:x,createMakeNodeFunction:y}=oO({FunctionNode:h,OperatorNode:p,SymbolNode:g}),A=e("simplifyConstant",{Node:k=>E(X(k,{})),"Node, Object":function(z,q){return E(X(z,q))}});function w(k){return h_(k)?k.valueOf():k instanceof Array?k.map(w):lt(k)?i(w(k.valueOf())):k}function _(k,z,q){try{return n[k].apply(null,z)}catch{return z=z.map(w),N(n[k].apply(null,z),q)}}var S=e({Fraction:M,number:function(z){return z<0?D(new c(-z)):new c(z)},BigNumber:function(z){return z<0?D(new c(-z)):new c(z)},bigint:function(z){return z<0n?D(new c(-z)):new c(z)},Complex:function(z){throw new Error("Cannot convert Complex number to Node")},string:function(z){return new c(z)},Matrix:function(z){return new u(z.valueOf().map(q=>S(q)))}});function E(k){return sr(k)?k:S(k)}function C(k,z){var q=z&&z.exactFractions!==!1;if(q&&s(k)&&a){var H=a(k),te=z&&typeof z.fractionsLimit=="number"?z.fractionsLimit:1/0;if(H.valueOf()===k&&H.n<te&&H.d<te)return H}return k}var N=e({"string, Object":function(z,q){var H=Ud(z,t);if(H==="BigNumber")return o===void 0&&YF(),o(z);if(H==="bigint")return BigInt(z);if(H==="Fraction")return a===void 0&&iY(),a(z);var te=parseFloat(z);return C(te,q)},"Fraction, Object":function(z,q){return z},"BigNumber, Object":function(z,q){return z},"number, Object":function(z,q){return C(z,q)},"bigint, Object":function(z,q){return z},"Complex, Object":function(z,q){return z.im!==0?z:C(z.re,q)},"Matrix, Object":function(z,q){return i(C(z.valueOf()))},"Array, Object":function(z,q){return z.map(C)}});function D(k){return new p("-","unaryMinus",[k])}function M(k){var z=te=>t.number==="BigNumber"&&o?o(te):Number(te),q=k.s*k.n,H=q<0n?new p("-","unaryMinus",[new c(-z(q))]):new c(z(q));return k.d===1n?H:new p("/","divide",[H,new c(z(k.d))])}function I(k,z,q){if(!ry(z))return new l(E(k),E(z));if(ro(k)||lt(k)){for(var H=Array.from(z.dimensions);H.length>0;)if(Ut(H[0])&&typeof H[0].value!="string"){var te=N(H.shift().value,q);ro(k)?k=k.items[te-1]:(k=k.valueOf()[te-1],k instanceof Array&&(k=i(k)))}else if(H.length>1&&Ut(H[1])&&typeof H[1].value!="string"){var ce=N(H[1].value,q),re=[],O=ro(k)?k.items:k.valueOf();for(var ne of O)if(ro(ne))re.push(ne.items[ce-1]);else if(lt(k))re.push(ne[ce-1]);else break;if(re.length===O.length)ro(k)?k=new u(re):k=i(re),H.splice(1,1);else break}else break;return H.length===z.dimensions.length?new l(E(k),z):H.length>0?(z=new d(H),new l(E(k),z)):k}if(nN(k)&&z.dimensions.length===1&&Ut(z.dimensions[0])){var W=z.dimensions[0].value;return W in k.properties?k.properties[W]:new c}return new l(E(k),z)}function U(k,z,q,H){var te=z.shift(),ce=z.reduce((re,O)=>{if(!sr(O)){var ne=re.pop();if(sr(ne))return[ne,O];try{return re.push(_(k,[ne,O],H)),re}catch{re.push(ne)}}re.push(E(re.pop()));var W=re.length===1?re[0]:q(re);return[q([W,E(O)])]},[te]);return ce.length===1?ce[0]:q([ce[0],S(ce[1])])}function X(k,z){switch(k.type){case"SymbolNode":return k;case"ConstantNode":switch(typeof k.value){case"number":return N(k.value,z);case"bigint":return N(k.value,z);case"string":return k.value;default:if(!isNaN(k.value))return N(k.value,z)}return k;case"FunctionNode":if(n[k.name]&&n[k.name].rawArgs)return k;{var q=["add","multiply"];if(!q.includes(k.name)){var H=k.args.map(he=>X(he,z));if(!H.some(sr))try{return _(k.name,H,z)}catch{}if(k.name==="size"&&H.length===1&&ro(H[0])){for(var te=[],ce=H[0];ro(ce);)te.push(ce.items.length),ce=ce.items[0];return i(te)}return new h(k.name,H.map(E))}}case"OperatorNode":{var re=k.fn.toString(),O,ne,W=y(k);if(xn(k)&&k.isUnary())O=[X(k.args[0],z)],sr(O[0])?ne=W(O):ne=_(re,O,z);else if(v(k,z.context))if(O=x(k,z.context),O=O.map(he=>X(he,z)),b(re,z.context)){for(var pe=[],me=[],ie=0;ie<O.length;ie++)sr(O[ie])?me.push(O[ie]):pe.push(O[ie]);pe.length>1?(ne=U(re,pe,W,z),me.unshift(ne),ne=U(re,me,W,z)):ne=U(re,O,W,z)}else ne=U(re,O,W,z);else O=k.args.map(he=>X(he,z)),ne=U(re,O,W,z);return ne}case"ParenthesisNode":return X(k.content,z);case"AccessorNode":return I(X(k.object,z),X(k.index,z),z);case"ArrayNode":{var K=k.items.map(he=>X(he,z));return K.some(sr)?new u(K.map(E)):i(K)}case"IndexNode":return new d(k.dimensions.map(he=>A(he,z)));case"ObjectNode":{var ae={};for(var ge in k.properties)ae[ge]=A(k.properties[ge],z);return new f(ae)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(k.type))}}return A}),fU="simplifyCore",wPe=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],xPe=Y(fU,wPe,r=>{var{typed:e,parse:t,equal:n,isZero:i,add:s,subtract:a,multiply:o,divide:l,pow:u,AccessorNode:c,ArrayNode:h,ConstantNode:d,FunctionNode:f,IndexNode:p,ObjectNode:g,OperatorNode:b,ParenthesisNode:v,SymbolNode:x}=r,y=new d(0),A=new d(1),w=new d(!0),_=new d(!1);function S(D){return xn(D)&&["and","not","or"].includes(D.op)}var{hasProperty:E,isCommutative:C}=oO({FunctionNode:f,OperatorNode:b,SymbolNode:x});function N(D){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},I=M?M.context:void 0;if(E(D,"trivial",I)){if(Cd(D)&&D.args.length===1)return N(D.args[0],M);var U=!1,X=0;if(D.forEach(pe=>{++X,X===1&&(U=N(pe,M))}),X===1)return U}var k=D;if(Cd(k)){var z=hSe(k.name);if(z){if(k.args.length>2&&E(k,"associative",I))for(;k.args.length>2;){var q=k.args.pop(),H=k.args.pop();k.args.push(new b(z,k.name,[q,H]))}k=new b(z,k.name,k.args)}else return new f(N(k.fn),k.args.map(pe=>N(pe,M)))}if(xn(k)&&k.isUnary()){var te=N(k.args[0],M);if(k.op==="~"&&xn(te)&&te.isUnary()&&te.op==="~"||k.op==="not"&&xn(te)&&te.isUnary()&&te.op==="not"&&S(te.args[0]))return te.args[0];var ce=!0;if(k.op==="-"&&xn(te)&&(te.isBinary()&&te.fn==="subtract"&&(k=new b("-","subtract",[te.args[1],te.args[0]]),ce=!1),te.isUnary()&&te.op==="-"))return te.args[0];if(ce)return new b(k.op,k.fn,[te])}if(xn(k)&&k.isBinary()){var re=N(k.args[0],M),O=N(k.args[1],M);if(k.op==="+"){if(Ut(re)&&i(re.value))return O;if(Ut(O)&&i(O.value))return re;xn(O)&&O.isUnary()&&O.op==="-"&&(O=O.args[0],k=new b("-","subtract",[re,O]))}if(k.op==="-")return xn(O)&&O.isUnary()&&O.op==="-"?N(new b("+","add",[re,O.args[0]]),M):Ut(re)&&i(re.value)?N(new b("-","unaryMinus",[O])):Ut(O)&&i(O.value)?re:new b(k.op,k.fn,[re,O]);if(k.op==="*"){if(Ut(re)){if(i(re.value))return y;if(n(re.value,1))return O}if(Ut(O)){if(i(O.value))return y;if(n(O.value,1))return re;if(C(k,I))return new b(k.op,k.fn,[O,re],k.implicit)}return new b(k.op,k.fn,[re,O],k.implicit)}if(k.op==="/")return Ut(re)&&i(re.value)?y:Ut(O)&&n(O.value,1)?re:new b(k.op,k.fn,[re,O]);if(k.op==="^"&&Ut(O)){if(i(O.value))return A;if(n(O.value,1))return re}if(k.op==="and"){if(Ut(re))if(re.value){if(S(O))return O;if(Ut(O))return O.value?w:_}else return _;if(Ut(O))if(O.value){if(S(re))return re}else return _}if(k.op==="or"){if(Ut(re)){if(re.value)return w;if(S(O))return O}if(Ut(O)){if(O.value)return w;if(S(re))return re}}return new b(k.op,k.fn,[re,O])}if(xn(k))return new b(k.op,k.fn,k.args.map(pe=>N(pe,M)));if(ro(k))return new h(k.items.map(pe=>N(pe,M)));if(Tc(k))return new c(N(k.object,M),N(k.index,M));if(ry(k))return new p(k.dimensions.map(pe=>N(pe,M)));if(nN(k)){var ne={};for(var W in k.properties)ne[W]=N(k.properties[W],M);return new g(ne)}return k}return e(fU,{Node:N,"Node,Object":N})}),_Pe="resolve",APe=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],EPe=Y(_Pe,APe,r=>{var{typed:e,parse:t,ConstantNode:n,FunctionNode:i,OperatorNode:s,ParenthesisNode:a}=r;function o(l,u){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!u)return l;if(fi(l)){if(c.has(l.name)){var h=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(h,"}"))}var d=u.get(l.name);if(sr(d)){var f=new Set(c);return f.add(l.name),o(d,u,f)}else return typeof d=="number"?t(String(d)):d!==void 0?new n(d):l}else if(xn(l)){var p=l.args.map(function(b){return o(b,u,c)});return new s(l.op,l.fn,p,l.implicit)}else{if(Cc(l))return new a(o(l.content,u,c));if(Cd(l)){var g=l.args.map(function(b){return o(b,u,c)});return new i(l.name,g)}}return l.map(b=>o(b,u,c))}return e("resolve",{Node:o,"Node, Map | null | undefined":o,"Node, Object":(l,u)=>o(l,zg(u)),"Array | Matrix":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array | Matrix, null | undefined":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array, Object":e.referTo("Array,Map",l=>(u,c)=>l(u,zg(c))),"Matrix, Object":e.referTo("Matrix,Map",l=>(u,c)=>l(u,zg(c))),"Array | Matrix, Map":e.referToSelf(l=>(u,c)=>u.map(h=>l(h,c)))})}),mU="symbolicEqual",SPe=["parse","simplify","typed","OperatorNode"],TPe=Y(mU,SPe,r=>{var{parse:e,simplify:t,typed:n,OperatorNode:i}=r;function s(a,o){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=new i("-","subtract",[a,o]),c=t(u,{},l);return Ut(c)&&!c.value}return n(mU,{"Node, Node":s,"Node, Node, Object":s})}),pU="derivative",CPe=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],NPe=Y(pU,CPe,r=>{var{typed:e,config:t,parse:n,simplify:i,equal:s,isZero:a,numeric:o,ConstantNode:l,FunctionNode:u,OperatorNode:c,ParenthesisNode:h,SymbolNode:d}=r;function f(A,w){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},S=new Map,E=w.name;function C(D){var M=S.get(D);if(M!==void 0)return M;var I=v(C,D,E);return S.set(D,I),I}var N=x(A,C);return _.simplify?i(N):N}function p(A){var w=n(A);if(!w.isSymbolNode)throw new TypeError("Invalid variable. "+"Cannot parse ".concat(JSON.stringify(A)," into a variable in function derivative"));return w}var g=e(pU,{"Node, SymbolNode":f,"Node, SymbolNode, Object":f,"Node, string":(A,w)=>f(A,p(w)),"Node, string, Object":(A,w,_)=>f(A,p(w),_)});g._simplify=!0,g.toTex=function(A){return b.apply(null,A.args)};var b=e("_derivTex",{"Node, SymbolNode":function(w,_){return Ut(w)&&dr(w.value)==="string"?b(n(w.value).toString(),_.toString(),1):b(w.toTex(),_.toString(),1)},"Node, ConstantNode":function(w,_){if(dr(_.value)==="string")return b(w,n(_.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(w,_,S){return b(w.toString(),_.name,S.value)},"string, string, number":function(w,_,S){var E;return S===1?E="{d\\over d"+_+"}":E="{d^{"+S+"}\\over d"+_+"^{"+S+"}}",E+"\\left[".concat(w,"\\right]")}}),v=e("_isConst",{"function, ConstantNode, string":function(){return!0},"function, SymbolNode, string":function(w,_,S){return _.name!==S},"function, ParenthesisNode, string":function(w,_,S){return w(_.content,S)},"function, FunctionAssignmentNode, string":function(w,_,S){return _.params.includes(S)?w(_.expr,S):!0},"function, FunctionNode | OperatorNode, string":function(w,_,S){return _.args.every(E=>w(E,S))}}),x=e("_derivative",{"ConstantNode, function":function(){return y(0)},"SymbolNode, function":function(w,_){return _(w)?y(0):y(1)},"ParenthesisNode, function":function(w,_){return new h(x(w.content,_))},"FunctionAssignmentNode, function":function(w,_){return _(w)?y(0):x(w.expr,_)},"FunctionNode, function":function(w,_){if(_(w))return y(0);var S=w.args[0],E,C=!1,N=!1,D;switch(w.name){case"cbrt":C=!0,D=new c("*","multiply",[y(3),new c("^","pow",[S,new c("/","divide",[y(2),y(3)])])]);break;case"sqrt":case"nthRoot":if(w.args.length===1)C=!0,D=new c("*","multiply",[y(2),new u("sqrt",[S])]);else if(w.args.length===2)return E=new c("/","divide",[y(1),w.args[1]]),x(new c("^","pow",[S,E]),_);break;case"log10":E=y(10);case"log":if(!E&&w.args.length===1)D=S.clone(),C=!0;else if(w.args.length===1&&E||w.args.length===2&&_(w.args[1]))D=new c("*","multiply",[S.clone(),new u("log",[E||w.args[1]])]),C=!0;else if(w.args.length===2)return x(new c("/","divide",[new u("log",[S]),new u("log",[w.args[1]])]),_);break;case"pow":if(w.args.length===2)return x(new c("^","pow",[S,w.args[1]]),_);break;case"exp":D=new u("exp",[S.clone()]);break;case"sin":D=new u("cos",[S.clone()]);break;case"cos":D=new c("-","unaryMinus",[new u("sin",[S.clone()])]);break;case"tan":D=new c("^","pow",[new u("sec",[S.clone()]),y(2)]);break;case"sec":D=new c("*","multiply",[w,new u("tan",[S.clone()])]);break;case"csc":N=!0,D=new c("*","multiply",[w,new u("cot",[S.clone()])]);break;case"cot":N=!0,D=new c("^","pow",[new u("csc",[S.clone()]),y(2)]);break;case"asin":C=!0,D=new u("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[S.clone(),y(2)])])]);break;case"acos":C=!0,N=!0,D=new u("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[S.clone(),y(2)])])]);break;case"atan":C=!0,D=new c("+","add",[new c("^","pow",[S.clone(),y(2)]),y(1)]);break;case"asec":C=!0,D=new c("*","multiply",[new u("abs",[S.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[S.clone(),y(2)]),y(1)])])]);break;case"acsc":C=!0,N=!0,D=new c("*","multiply",[new u("abs",[S.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[S.clone(),y(2)]),y(1)])])]);break;case"acot":C=!0,N=!0,D=new c("+","add",[new c("^","pow",[S.clone(),y(2)]),y(1)]);break;case"sinh":D=new u("cosh",[S.clone()]);break;case"cosh":D=new u("sinh",[S.clone()]);break;case"tanh":D=new c("^","pow",[new u("sech",[S.clone()]),y(2)]);break;case"sech":N=!0,D=new c("*","multiply",[w,new u("tanh",[S.clone()])]);break;case"csch":N=!0,D=new c("*","multiply",[w,new u("coth",[S.clone()])]);break;case"coth":N=!0,D=new c("^","pow",[new u("csch",[S.clone()]),y(2)]);break;case"asinh":C=!0,D=new u("sqrt",[new c("+","add",[new c("^","pow",[S.clone(),y(2)]),y(1)])]);break;case"acosh":C=!0,D=new u("sqrt",[new c("-","subtract",[new c("^","pow",[S.clone(),y(2)]),y(1)])]);break;case"atanh":C=!0,D=new c("-","subtract",[y(1),new c("^","pow",[S.clone(),y(2)])]);break;case"asech":C=!0,N=!0,D=new c("*","multiply",[S.clone(),new u("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[S.clone(),y(2)])])])]);break;case"acsch":C=!0,N=!0,D=new c("*","multiply",[new u("abs",[S.clone()]),new u("sqrt",[new c("+","add",[new c("^","pow",[S.clone(),y(2)]),y(1)])])]);break;case"acoth":C=!0,N=!0,D=new c("-","subtract",[y(1),new c("^","pow",[S.clone(),y(2)])]);break;case"abs":D=new c("/","divide",[new u(new d("abs"),[S.clone()]),S.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+w.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var M,I;C?(M="/",I="divide"):(M="*",I="multiply");var U=x(S,_);return N&&(U=new c("-","unaryMinus",[U])),new c(M,I,[U,D])},"OperatorNode, function":function(w,_){if(_(w))return y(0);if(w.op==="+")return new c(w.op,w.fn,w.args.map(function(k){return x(k,_)}));if(w.op==="-"){if(w.isUnary())return new c(w.op,w.fn,[x(w.args[0],_)]);if(w.isBinary())return new c(w.op,w.fn,[x(w.args[0],_),x(w.args[1],_)])}if(w.op==="*"){var S=w.args.filter(function(k){return _(k)});if(S.length>0){var E=w.args.filter(function(k){return!_(k)}),C=E.length===1?E[0]:new c("*","multiply",E),N=S.concat(x(C,_));return new c("*","multiply",N)}return new c("+","add",w.args.map(function(k){return new c("*","multiply",w.args.map(function(z){return z===k?x(z,_):z.clone()}))}))}if(w.op==="/"&&w.isBinary()){var D=w.args[0],M=w.args[1];return _(M)?new c("/","divide",[x(D,_),M]):_(D)?new c("*","multiply",[new c("-","unaryMinus",[D]),new c("/","divide",[x(M,_),new c("^","pow",[M.clone(),y(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[x(D,_),M.clone()]),new c("*","multiply",[D.clone(),x(M,_)])]),new c("^","pow",[M.clone(),y(2)])])}if(w.op==="^"&&w.isBinary()){var I=w.args[0],U=w.args[1];if(_(I))return Ut(I)&&(a(I.value)||s(I.value,1))?y(0):new c("*","multiply",[w,new c("*","multiply",[new u("log",[I.clone()]),x(U.clone(),_)])]);if(_(U)){if(Ut(U)){if(a(U.value))return y(0);if(s(U.value,1))return x(I,_)}var X=new c("^","pow",[I.clone(),new c("-","subtract",[U,y(1)])]);return new c("*","multiply",[U.clone(),new c("*","multiply",[x(I,_),X])])}return new c("*","multiply",[new c("^","pow",[I.clone(),U.clone()]),new c("+","add",[new c("*","multiply",[x(I,_),new c("/","divide",[U.clone(),I.clone()])]),new c("*","multiply",[x(U,_),new u("log",[I.clone()])])])])}throw new Error('Cannot process operator "'+w.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function y(A,w){return new l(o(A,Ud(String(A),t)))}return g}),gU="rationalize",DPe=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],MPe=Y(gU,DPe,r=>{var{config:e,typed:t,equal:n,isZero:i,add:s,subtract:a,multiply:o,divide:l,pow:u,parse:c,simplifyConstant:h,simplifyCore:d,simplify:f,fraction:p,bignumber:g,mathWithTransform:b,matrix:v,AccessorNode:x,ArrayNode:y,ConstantNode:A,FunctionNode:w,IndexNode:_,ObjectNode:S,OperatorNode:E,SymbolNode:C,ParenthesisNode:N}=r;function D(k){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,H=I(),te=M(k,z,!0,H.firstRules),ce=te.variables.length,re={exactFractions:!1},O={exactFractions:!0};if(k=te.expression,ce>=1){k=U(k);var ne,W,pe=!0,me=!1;k=f(k,H.firstRules,{},re);for(var ie;W=pe?H.distrDivRules:H.sucDivRules,k=f(k,W,{},O),pe=!pe,ie=k.toString(),ie!==ne;)me=!0,ne=ie;me&&(k=f(k,H.firstRulesAgain,{},re)),k=f(k,H.finalRules,{},re)}var K=[],ae={};return k.type==="OperatorNode"&&k.isBinary()&&k.op==="/"?(ce===1&&(k.args[0]=X(k.args[0],K),k.args[1]=X(k.args[1])),q&&(ae.numerator=k.args[0],ae.denominator=k.args[1])):(ce===1&&(k=X(k,K)),q&&(ae.numerator=k,ae.denominator=null)),q?(ae.coefficients=K,ae.variables=te.variables,ae.expression=k,ae):k}return t(gU,{Node:D,"Node, boolean":(k,z)=>D(k,{},z),"Node, Object":D,"Node, Object, boolean":D});function M(k,z,q,H){var te=[],ce=f(k,H,z,{exactFractions:!1});q=!!q;var re="+-*"+(q?"/":"");ne(ce);var O={};return O.expression=ce,O.variables=te,O;function ne(W){var pe=W.type;if(pe==="FunctionNode")throw new Error("There is an unsolved function call");if(pe==="OperatorNode")if(W.op==="^"){if(W.args[1].type!=="ConstantNode"||!tt(parseFloat(W.args[1].value)))throw new Error("There is a non-integer exponent");ne(W.args[0])}else{if(!re.includes(W.op))throw new Error("Operator "+W.op+" invalid in polynomial expression");for(var me=0;me<W.args.length;me++)ne(W.args[me])}else if(pe==="SymbolNode"){var ie=W.name,K=te.indexOf(ie);K===-1&&te.push(ie)}else if(pe==="ParenthesisNode")ne(W.content);else if(pe!=="ConstantNode")throw new Error("type "+pe+" is not allowed in polynomial expression")}}function I(){var k=[d,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},h,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],z=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],q=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],H=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],te={};return te.firstRules=k.concat(z,H),te.distrDivRules=q,te.sucDivRules=H,te.firstRulesAgain=k.concat(z),te.finalRules=[d,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},h,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],te}function U(k,z,q){var H=k.type,te=arguments.length>1;if(H==="OperatorNode"&&k.isBinary()){var ce=!1,re;if(k.op==="^"&&(k.args[0].type==="ParenthesisNode"||k.args[0].type==="OperatorNode")&&k.args[1].type==="ConstantNode"&&(re=parseFloat(k.args[1].value),ce=re>=2&&tt(re)),ce){if(re>2){var O=k.args[0],ne=new E("^","pow",[k.args[0].cloneDeep(),new A(re-1)]);k=new E("*","multiply",[O,ne])}else k=new E("*","multiply",[k.args[0],k.args[0].cloneDeep()]);te&&(q==="content"?z.content=k:z.args[q]=k)}}if(H==="ParenthesisNode")U(k.content,k,"content");else if(H!=="ConstantNode"&&H!=="SymbolNode")for(var W=0;W<k.args.length;W++)U(k.args[W],k,W);if(!te)return k}function X(k,z){z===void 0&&(z=[]),z[0]=0;var q={};q.cte=1,q.oper="+",q.fire="";var H=0,te="";ie(k,null,q),H=z.length-1;for(var ce=!0,re,O=H;O>=0;O--)if(z[O]!==0){var ne=new A(ce?z[O]:Math.abs(z[O])),W=z[O]<0?"-":"+";if(O>0){var pe=new C(te);if(O>1){var me=new A(O);pe=new E("^","pow",[pe,me])}z[O]===-1&&ce?ne=new E("-","unaryMinus",[pe]):Math.abs(z[O])===1?ne=pe:ne=new E("*","multiply",[ne,pe])}ce?re=ne:W==="+"?re=new E("+","add",[re,ne]):re=new E("-","subtract",[re,ne]),ce=!1}if(ce)return new A(0);return re;function ie(K,ae,ge){var he=K.type;if(he==="FunctionNode")throw new Error("There is an unsolved function call");if(he==="OperatorNode"){if(!"+-*^".includes(K.op))throw new Error("Operator "+K.op+" invalid");if(ae!==null){if((K.fn==="unaryMinus"||K.fn==="pow")&&ae.fn!=="add"&&ae.fn!=="subtract"&&ae.fn!=="multiply")throw new Error("Invalid "+K.op+" placing");if((K.fn==="subtract"||K.fn==="add"||K.fn==="multiply")&&ae.fn!=="add"&&ae.fn!=="subtract")throw new Error("Invalid "+K.op+" placing");if((K.fn==="subtract"||K.fn==="add"||K.fn==="unaryMinus")&&ge.noFil!==0)throw new Error("Invalid "+K.op+" placing")}(K.op==="^"||K.op==="*")&&(ge.fire=K.op);for(var be=0;be<K.args.length;be++)K.fn==="unaryMinus"&&(ge.oper="-"),(K.op==="+"||K.fn==="subtract")&&(ge.fire="",ge.cte=1,ge.oper=be===0?"+":K.op),ge.noFil=be,ie(K.args[be],K,ge)}else if(he==="SymbolNode"){if(K.name!==te&&te!=="")throw new Error("There is more than one variable");if(te=K.name,ae===null){z[1]=1;return}if(ae.op==="^"&&ge.noFil!==0)throw new Error("In power the variable should be the first parameter");if(ae.op==="*"&&ge.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(ge.fire===""||ge.fire==="*")&&(H<1&&(z[1]=0),z[1]+=ge.cte*(ge.oper==="+"?1:-1),H=Math.max(1,H))}else if(he==="ConstantNode"){var ve=parseFloat(K.value);if(ae===null){z[0]=ve;return}if(ae.op==="^"){if(ge.noFil!==1)throw new Error("Constant cannot be powered");if(!tt(ve)||ve<=0)throw new Error("Non-integer exponent is not allowed");for(var Ie=H+1;Ie<ve;Ie++)z[Ie]=0;ve>H&&(z[ve]=0),z[ve]+=ge.cte*(ge.oper==="+"?1:-1),H=Math.max(ve,H);return}ge.cte=ve,ge.fire===""&&(z[0]+=ge.cte*(ge.oper==="+"?1:-1))}else throw new Error("Type "+he+" is not allowed")}}}),vU="zpk2tf",IPe=["typed","add","multiply","Complex","number"],PPe=Y(vU,IPe,r=>{var{typed:e,add:t,multiply:n,Complex:i,number:s}=r;return e(vU,{"Array,Array,number":function(u,c,h){return a(u,c,h)},"Array,Array":function(u,c){return a(u,c,1)},"Matrix,Matrix,number":function(u,c,h){return a(u.valueOf(),c.valueOf(),h)},"Matrix,Matrix":function(u,c){return a(u.valueOf(),c.valueOf(),1)}});function a(l,u,c){l.some(x=>x.type==="BigNumber")&&(l=l.map(x=>s(x))),u.some(x=>x.type==="BigNumber")&&(u=u.map(x=>s(x)));for(var h=[i(1,0)],d=[i(1,0)],f=0;f<l.length;f++){var p=l[f];typeof p=="number"&&(p=i(p,0)),h=o(h,[i(1,0),i(-p.re,-p.im)])}for(var g=0;g<u.length;g++){var b=u[g];typeof b=="number"&&(b=i(b,0)),d=o(d,[i(1,0),i(-b.re,-b.im)])}for(var v=0;v<h.length;v++)h[v]=n(h[v],c);return[h,d]}function o(l,u){for(var c=[],h=0;h<l.length+u.length-1;h++){c[h]=i(0,0);for(var d=0;d<l.length;d++)h-d>=0&&h-d<u.length&&(c[h]=t(c[h],n(l[d],u[h-d])))}return c}}),yU="freqz",RPe=["typed","add","multiply","Complex","divide","matrix"],kPe=Y(yU,RPe,r=>{var{typed:e,add:t,multiply:n,Complex:i,divide:s,matrix:a}=r;return e(yU,{"Array, Array":function(c,h){var d=l(512);return o(c,h,d)},"Array, Array, Array":function(c,h,d){return o(c,h,d)},"Array, Array, number":function(c,h,d){if(d<0)throw new Error("w must be a positive number");var f=l(d);return o(c,h,f)},"Matrix, Matrix":function(c,h){var d=l(512),{w:f,h:p}=o(c.valueOf(),h.valueOf(),d);return{w:a(f),h:a(p)}},"Matrix, Matrix, Matrix":function(c,h,d){var{h:f}=o(c.valueOf(),h.valueOf(),d.valueOf());return{h:a(f),w:a(d)}},"Matrix, Matrix, number":function(c,h,d){if(d<0)throw new Error("w must be a positive number");var f=l(d),{h:p}=o(c.valueOf(),h.valueOf(),f);return{h:a(p),w:a(f)}}});function o(u,c,h){for(var d=[],f=[],p=0;p<h.length;p++){for(var g=i(0,0),b=i(0,0),v=0;v<u.length;v++)g=t(g,n(u[v],i(Math.cos(-v*h[p]),Math.sin(-v*h[p]))));for(var x=0;x<c.length;x++)b=t(b,n(c[x],i(Math.cos(-x*h[p]),Math.sin(-x*h[p]))));d.push(g),f.push(b)}for(var y=[],A=0;A<d.length;A++)y.push(s(d[A],f[A]));return{h:y,w:h}}function l(u){for(var c=[],h=0;h<u;h++)c.push(h/u*Math.PI);return c}}),FPe="reviver",OPe=["classes"],BPe=Y(FPe,OPe,r=>{var{classes:e}=r;return function(n,i){var s=e[i&&i.mathjs];return s&&typeof s.fromJSON=="function"?s.fromJSON(i):i}}),LPe="replacer",$Pe=[],VPe=Y(LPe,$Pe,()=>function(e,t){return typeof t=="number"&&(!Number.isFinite(t)||isNaN(t))?{mathjs:"number",value:String(t)}:typeof t=="bigint"?{mathjs:"bigint",value:String(t)}:t}),UPe="15.1.0",zPe=Y("true",[],()=>!0),jPe=Y("false",[],()=>!1),qPe=Y("null",[],()=>null),HPe=Ra("Infinity",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1/0):1/0}),GPe=Ra("NaN",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(NaN):NaN}),WPe=Ra("pi",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?ZF(t):B0e}),KPe=Ra("tau",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?pAe(t):L0e}),XPe=Ra("e",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?fAe(t):$0e}),YPe=Ra("phi",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?mAe(t):V0e}),QPe=Ra("LN2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(2).ln():Math.LN2}),JPe=Ra("LN10",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(10).ln():Math.LN10}),ZPe=Ra("LOG2E",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1).div(new t(2).ln()):Math.LOG2E}),eRe=Ra("LOG10E",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1).div(new t(10).ln()):Math.LOG10E}),tRe=Ra("SQRT1_2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t("0.5").sqrt():Math.SQRT1_2}),rRe=Ra("SQRT2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(2).sqrt():Math.SQRT2}),nRe=Ra("i",["Complex"],r=>{var{Complex:e}=r;return e.I}),iRe=Y("version",[],()=>UPe);function Ra(r,e,t){return Y(r,e,t,{recreateOnConfigChange:!0})}var sRe=yt("speedOfLight","299792458","m s^-1"),aRe=yt("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),oRe=yt("planckConstant","6.62607015e-34","J s"),lRe=yt("reducedPlanckConstant","1.0545718176461565e-34","J s"),uRe=yt("magneticConstant","1.25663706212e-6","N A^-2"),cRe=yt("electricConstant","8.8541878128e-12","F m^-1"),hRe=yt("vacuumImpedance","376.730313667","ohm"),dRe=yt("coulomb","8.987551792261171e9","N m^2 C^-2"),fRe=yt("coulombConstant","8.987551792261171e9","N m^2 C^-2"),mRe=yt("elementaryCharge","1.602176634e-19","C"),pRe=yt("bohrMagneton","9.2740100783e-24","J T^-1"),gRe=yt("conductanceQuantum","7.748091729863649e-5","S"),vRe=yt("inverseConductanceQuantum","12906.403729652257","ohm"),yRe=yt("magneticFluxQuantum","2.0678338484619295e-15","Wb"),bRe=yt("nuclearMagneton","5.0507837461e-27","J T^-1"),wRe=yt("klitzing","25812.807459304513","ohm"),xRe=yt("bohrRadius","5.29177210903e-11","m"),_Re=yt("classicalElectronRadius","2.8179403262e-15","m"),ARe=yt("electronMass","9.1093837015e-31","kg"),ERe=yt("fermiCoupling","1.1663787e-5","GeV^-2"),SRe=fN("fineStructure",.0072973525693),TRe=yt("hartreeEnergy","4.3597447222071e-18","J"),CRe=yt("protonMass","1.67262192369e-27","kg"),NRe=yt("deuteronMass","3.3435830926e-27","kg"),DRe=yt("neutronMass","1.6749271613e-27","kg"),MRe=yt("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),IRe=yt("rydberg","10973731.568160","m^-1"),PRe=yt("thomsonCrossSection","6.6524587321e-29","m^2"),RRe=fN("weakMixingAngle",.2229),kRe=fN("efimovFactor",22.7),FRe=yt("atomicMass","1.66053906660e-27","kg"),ORe=yt("avogadro","6.02214076e23","mol^-1"),BRe=yt("boltzmann","1.380649e-23","J K^-1"),LRe=yt("faraday","96485.33212331001","C mol^-1"),$Re=yt("firstRadiation","3.7417718521927573e-16","W m^2"),VRe=yt("loschmidt","2.686780111798444e25","m^-3"),URe=yt("gasConstant","8.31446261815324","J K^-1 mol^-1"),zRe=yt("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),jRe=yt("molarVolume","0.022413969545014137","m^3 mol^-1"),qRe=fN("sackurTetrode",-1.16487052358),HRe=yt("secondRadiation","0.014387768775039337","m K"),GRe=yt("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),WRe=yt("wienDisplacement","2.897771955e-3","m K"),KRe=yt("molarMass","0.99999999965e-3","kg mol^-1"),XRe=yt("molarMassC12","11.9999999958e-3","kg mol^-1"),YRe=yt("gravity","9.80665","m s^-2"),QRe=yt("planckLength","1.616255e-35","m"),JRe=yt("planckMass","2.176435e-8","kg"),ZRe=yt("planckTime","5.391245e-44","s"),eke=yt("planckCharge","1.87554603778e-18","C"),tke=yt("planckTemperature","1.416785e+32","K");function yt(r,e,t){var n=["config","Unit","BigNumber"];return Y(r,n,i=>{var{config:s,Unit:a,BigNumber:o}=i,l=s.number==="BigNumber"?new o(e):parseFloat(e),u=new a(l,t);return u.fixPrefix=!0,u})}function fN(r,e){var t=["config","BigNumber"];return Y(r,t,n=>{var{config:i,BigNumber:s}=n;return i.number==="BigNumber"?new s(e):e})}function bU(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function rke(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bU(Object(t),!0).forEach(function(n){On(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):bU(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var nke="mapSlices",ike=["typed","isInteger"],ske=Y(nke,ike,r=>{var{typed:e,isInteger:t}=r,n=$P({typed:e,isInteger:t});return e("mapSlices",{"...any":function(s){var a=s[1];st(a)?s[1]=a-1:_t(a)&&(s[1]=a.minus(1));try{return n.apply(null,s)}catch(o){throw Ds(o)}}})},rke({isTransformFunction:!0},$P.meta)),ake="column",oke=["typed","Index","matrix","range"],lke=Y(ake,oke,r=>{var{typed:e,Index:t,matrix:n,range:i}=r,s=ZX({typed:e,Index:t,matrix:n,range:i});return e("column",{"...any":function(o){var l=o.length-1,u=o[l];st(u)&&(o[l]=u-1);try{return s.apply(null,o)}catch(c){throw Ds(c)}}})},{isTransformFunction:!0});function lO(r,e,t){var n=r.filter(function(l){return fi(l)&&!(l.name in e)&&!t.has(l.name)})[0];if(!n)throw new Error('No undefined variable found in inline expression "'+r+'"');var i=n.name,s=new Map,a=new wK(t,s,new Set([i])),o=r.compile();return function(u){return s.set(i,u),o.evaluate(a)}}var uke="transformCallback",cke=["typed"],uO=Y(uke,cke,r=>{var{typed:e}=r;return function(n,i){return e.isTypedFunction(n)?t(n,i):wU(n,n.length,i)};function t(n,i){var s=Object.fromEntries(Object.entries(n.signatures).map(a=>{var[o,l]=a,u=o.split(",").length;return e.isTypedFunction(l)?[o,t(l,i)]:[o,wU(l,u,i)]}));return typeof n.name=="string"?e(n.name,s):e(s)}});function wU(r,e,t){return e===t?r:e===t+1?function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var a=i.slice(0,t),o=xU(i[t]);return r(...a,o)}:e>t+1?function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var a=i.slice(0,t),o=xU(i[t]),l=i.slice(t+1);return r(...a,o,...l)}:r}function xU(r){return r.map(e=>e+1)}var hke="filter",dke=["typed"],fke=Y(hke,dke,r=>{var{typed:e}=r;function t(i,s,a){var o=eY({typed:e}),l=uO({typed:e});if(i.length===0)return o();var u=i[0];if(i.length===1)return o(u);var c=i.length-1,h=i[c];return u&&(u=n(u,a)),h&&(fi(h)||d_(h)?h=n(h,a):h=lO(h,s,a)),o(u,l(h,c))}t.rawArgs=!0;function n(i,s){return i.compile().evaluate(s)}return t},{isTransformFunction:!0}),mke="forEach",pke=["typed"],gke=Y(mke,pke,r=>{var{typed:e}=r,t=tY({typed:e}),n=uO({typed:e});function i(a,o,l){if(a.length===0)return t();var u=a[0];if(a.length===1)return t(u);var c=a.length-1,h=a[c];return u&&(u=s(u,l)),h&&(fi(h)||d_(h)?h=s(h,l):h=lO(h,o,l)),t(u,n(h,c))}i.rawArgs=!0;function s(a,o){return a.compile().evaluate(o)}return i},{isTransformFunction:!0}),vke="index",yke=["Index","getMatrixDataType"],bke=Y(vke,yke,r=>{var{Index:e,getMatrixDataType:t}=r;return function(){for(var i=[],s=0,a=arguments.length;s<a;s++){var o=arguments[s];if(VF(o))o.start--,o.end-=o.step>0?0:2;else if(o&&o.isSet===!0)o=o.map(function(u){return u-1});else if(cr(o)||lt(o))t(o)!=="boolean"&&(o=o.map(function(u){return u-1}));else if(st(o)||Gb(o))o--;else if(_t(o))o=o.toNumber()-1;else if(typeof o!="string")throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");i[s]=o}var l=new e;return e.apply(l,i),l}},{isTransformFunction:!0}),wke="map",xke=["typed"],_ke=Y(wke,xke,r=>{var{typed:e}=r,t=rY({typed:e}),n=uO({typed:e});function i(s,a,o){if(s.length===0)return t();if(s.length===1)return t(s[0]);var l=s.length-1,u=s.slice(0,l),c=s[l];return u=u.map(d=>h(d,o)),c&&(fi(c)||d_(c)?c=h(c,o):c=lO(c,a,o)),t(...u,n(c,l));function h(d,f){return d.compile().evaluate(f)}}return i.rawArgs=!0,i},{isTransformFunction:!0});function Ake(r){return st(r)?r-1:_t(r)?r.minus(1):r}function Eke(r){return st(r)||_t(r)}function qd(r){if(r.length===2&&Ma(r[0])){r=r.slice();var e=r[1];Eke(e)&&(r[1]=Ake(e))}return r}var Ske="max",Tke=["typed","config","numeric","larger","isNaN"],Cke=Y(Ske,Tke,r=>{var{typed:e,config:t,numeric:n,larger:i,isNaN:s}=r,a=hY({typed:e,config:t,numeric:n,larger:i,isNaN:s});return e("max",{"...any":function(l){l=qd(l);try{return a.apply(null,l)}catch(u){throw Ds(u)}}})},{isTransformFunction:!0}),Nke="mean",Dke=["typed","add","divide"],Mke=Y(Nke,Dke,r=>{var{typed:e,add:t,divide:n}=r,i=wY({typed:e,add:t,divide:n});return e("mean",{"...any":function(a){a=qd(a);try{return i.apply(null,a)}catch(o){throw Ds(o)}}})},{isTransformFunction:!0}),Ike="min",Pke=["typed","config","numeric","smaller","isNaN"],Rke=Y(Ike,Pke,r=>{var{typed:e,config:t,numeric:n,smaller:i,isNaN:s}=r,a=dY({typed:e,config:t,numeric:n,smaller:i,isNaN:s});return e("min",{"...any":function(l){l=qd(l);try{return a.apply(null,l)}catch(u){throw Ds(u)}}})},{isTransformFunction:!0}),kke="range",Fke=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],Oke=Y(kke,Fke,r=>{var{typed:e,config:t,matrix:n,bignumber:i,equal:s,smaller:a,smallerEq:o,larger:l,largerEq:u,add:c,isZero:h,isPositive:d}=r,f=sY({typed:e,config:t,matrix:n,bignumber:i,equal:s,smaller:a,smallerEq:o,larger:l,largerEq:u,add:c,isZero:h,isPositive:d});return e("range",{"...any":function(g){var b=g.length-1,v=g[b];return typeof v!="boolean"&&g.push(!0),f.apply(null,g)}})},{isTransformFunction:!0}),Bke="row",Lke=["typed","Index","matrix","range"],$ke=Y(Bke,Lke,r=>{var{typed:e,Index:t,matrix:n,range:i}=r,s=aY({typed:e,Index:t,matrix:n,range:i});return e("row",{"...any":function(o){var l=o.length-1,u=o[l];st(u)&&(o[l]=u-1);try{return s.apply(null,o)}catch(c){throw Ds(c)}}})},{isTransformFunction:!0}),Vke="subset",Uke=["typed","matrix","zeros","add"],zke=Y(Vke,Uke,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r,s=oY({typed:e,matrix:t,zeros:n,add:i});return e("subset",{"...any":function(o){try{return s.apply(null,o)}catch(l){throw Ds(l)}}})},{isTransformFunction:!0}),jke="concat",qke=["typed","matrix","isInteger"],Hke=Y(jke,qke,r=>{var{typed:e,matrix:t,isInteger:n}=r,i=JX({typed:e,matrix:t,isInteger:n});return e("concat",{"...any":function(a){var o=a.length-1,l=a[o];st(l)?a[o]=l-1:_t(l)&&(a[o]=l.minus(1));try{return i.apply(null,a)}catch(u){throw Ds(u)}}})},{isTransformFunction:!0}),_U="diff",Gke=["typed","matrix","subtract","number","bignumber"],Wke=Y(_U,Gke,r=>{var{typed:e,matrix:t,subtract:n,number:i,bignumber:s}=r,a=nY({typed:e,matrix:t,subtract:n,number:i,bignumber:s});return e(_U,{"...any":function(l){l=qd(l);try{return a.apply(null,l)}catch(u){throw Ds(u)}}})},{isTransformFunction:!0}),Kke="std",Xke=["typed","map","sqrt","variance"],Yke=Y(Kke,Xke,r=>{var{typed:e,map:t,sqrt:n,variance:i}=r,s=AY({typed:e,map:t,sqrt:n,variance:i});return e("std",{"...any":function(o){o=qd(o);try{return s.apply(null,o)}catch(l){throw Ds(l)}}})},{isTransformFunction:!0}),AU="sum",Qke=["typed","config","add","numeric"],Jke=Y(AU,Qke,r=>{var{typed:e,config:t,add:n,numeric:i}=r,s=yY({typed:e,config:t,add:n,numeric:i});return e(AU,{"...any":function(o){o=qd(o);try{return s.apply(null,o)}catch(l){throw Ds(l)}}})},{isTransformFunction:!0}),Zke="quantileSeq",eFe=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],tFe=Y(Zke,eFe,r=>{var{typed:e,bignumber:t,add:n,subtract:i,divide:s,multiply:a,partitionSelect:o,compare:l,isInteger:u,smaller:c,smallerEq:h,larger:d,mapSlices:f}=r,p=_Y({typed:e,bignumber:t,add:n,subtract:i,divide:s,multiply:a,partitionSelect:o,compare:l,isInteger:u,smaller:c,smallerEq:h,larger:d,mapSlices:f});return e("quantileSeq",{"Array | Matrix, number | BigNumber":p,"Array | Matrix, number | BigNumber, number":(b,v,x)=>p(b,v,g(x)),"Array | Matrix, number | BigNumber, boolean":p,"Array | Matrix, number | BigNumber, boolean, number":(b,v,x,y)=>p(b,v,x,g(y)),"Array | Matrix, Array | Matrix":p,"Array | Matrix, Array | Matrix, number":(b,v,x)=>p(b,v,g(x)),"Array | Matrix, Array | Matrix, boolean":p,"Array | Matrix, Array | Matrix, boolean, number":(b,v,x,y)=>p(b,v,x,g(y))});function g(b){return qd([[],b])[1]}},{isTransformFunction:!0}),EU="cumsum",rFe=["typed","add","unaryPlus"],nFe=Y(EU,rFe,r=>{var{typed:e,add:t,unaryPlus:n}=r,i=bY({typed:e,add:t,unaryPlus:n});return e(EU,{"...any":function(a){if(a.length===2&&Ma(a[0])){var o=a[1];st(o)?a[1]=o-1:_t(o)&&(a[1]=o.minus(1))}try{return i.apply(null,a)}catch(l){throw Ds(l)}}})},{isTransformFunction:!0}),SU="variance",iFe=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],sFe=Y(SU,iFe,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:s,mapSlices:a,isNaN:o}=r,l=xY({typed:e,add:t,subtract:n,multiply:i,divide:s,mapSlices:a,isNaN:o});return e(SU,{"...any":function(c){c=qd(c);try{return l.apply(null,c)}catch(h){throw Ds(h)}}})},{isTransformFunction:!0}),TU="print",aFe=["typed","matrix","zeros","add"],oFe=Y(TU,aFe,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r,s=uY({typed:e,matrix:t,zeros:n,add:i});return e(TU,{"string, Object | Array":function(l,u){return s(a(l),u)},"string, Object | Array, number | Object":function(l,u,c){return s(a(l),u,c)}});function a(o){return o.replace(lY,l=>{var u=l.slice(1).split("."),c=u.map(function(h){return!isNaN(h)&&h.length>0?parseInt(h)-1:h});return"$"+c.join(".")})}},{isTransformFunction:!0}),lFe="and",uFe=["typed","matrix","zeros","add","equalScalar","not","concat"],cFe=Y(lFe,uFe,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,not:s,concat:a}=r,o=cY({typed:e,matrix:t,equalScalar:n,zeros:i,not:s,concat:a});function l(u,c,h){var d=u[0].compile().evaluate(h);if(!Ma(d)&&!o(d,!0))return!1;var f=u[1].compile().evaluate(h);return o(d,f)}return l.rawArgs=!0,l},{isTransformFunction:!0}),hFe="or",dFe=["typed","matrix","equalScalar","DenseMatrix","concat"],fFe=Y(hFe,dFe,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:s}=r,a=QX({typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:s});function o(l,u,c){var h=l[0].compile().evaluate(c);if(!Ma(h)&&a(h,!1))return!0;var d=l[1].compile().evaluate(c);return a(h,d)}return o.rawArgs=!0,o},{isTransformFunction:!0}),mFe="nullish",pFe=["typed","matrix","size","flatten","deepEqual"],gFe=Y(mFe,pFe,r=>{var{typed:e,matrix:t,size:n,flatten:i,deepEqual:s}=r,a=YX({typed:e,matrix:t,size:n,flatten:i,deepEqual:s});function o(l,u,c){var h=l[0].compile().evaluate(c);if(!Ma(h)&&h!=null&&h!==void 0)return h;var d=l[1].compile().evaluate(c);return a(h,d)}return o.rawArgs=!0,o},{isTransformFunction:!0}),vFe="bitAnd",yFe=["typed","matrix","zeros","add","equalScalar","not","concat"],bFe=Y(vFe,yFe,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,not:s,concat:a}=r,o=KX({typed:e,matrix:t,equalScalar:n,zeros:i,not:s,concat:a});function l(u,c,h){var d=u[0].compile().evaluate(h);if(!Ma(d)){if(isNaN(d))return NaN;if(d===0||d===!1)return 0}var f=u[1].compile().evaluate(h);return o(d,f)}return l.rawArgs=!0,l},{isTransformFunction:!0}),wFe="bitOr",xFe=["typed","matrix","equalScalar","DenseMatrix","concat"],_Fe=Y(wFe,xFe,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:s}=r,a=XX({typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:s});function o(l,u,c){var h=l[0].compile().evaluate(c);if(!Ma(h)){if(isNaN(h))return NaN;if(h===-1)return-1;if(h===!0)return 1}var d=l[1].compile().evaluate(c);return a(h,d)}return o.rawArgs=!0,o},{isTransformFunction:!0}),Fe=Yve({config:Te}),mr=t0e({}),CU=XPe({BigNumber:Fe,config:Te}),AFe=jPe({}),EFe=SRe({BigNumber:Fe,config:Te}),Hd=u0e({}),TY=nRe({Complex:mr}),SFe=HPe({BigNumber:Fe,config:Te}),TFe=JPe({BigNumber:Fe,config:Te}),CFe=eRe({BigNumber:Fe,config:Te}),mN=p0e({}),NFe=GPe({BigNumber:Fe,config:Te}),DFe=qPe({}),MFe=YPe({BigNumber:Fe,config:Te}),IFe=d0e({}),CY=eve({}),PFe=tRe({BigNumber:Fe,config:Te}),RFe=qRe({BigNumber:Fe,config:Te}),NY=KPe({BigNumber:Fe,config:Te}),kFe=zPe({}),FFe=iRe({}),Ct=I0e({Matrix:mN,config:Te}),OFe=kRe({BigNumber:Fe,config:Te}),BFe=QPe({BigNumber:Fe,config:Te}),KP=WPe({BigNumber:Fe,config:Te}),DY=VPe({}),LFe=rRe({BigNumber:Fe,config:Te}),se=Yge({BigNumber:Fe,Complex:mr,DenseMatrix:Ct,Fraction:Hd}),$Fe=RRe({BigNumber:Fe,config:Te}),Oi=Yye({typed:se}),VFe=TAe({Complex:mr,config:Te,typed:se}),UFe=MAe({BigNumber:Fe,typed:se}),zFe=kAe({BigNumber:Fe,Complex:mr,config:Te,typed:se}),Qn=ebe({typed:se}),jFe=U1e({typed:se}),qFe=VAe({BigNumber:Fe,Complex:mr,config:Te,typed:se}),HFe=HAe({typed:se}),MY=KAe({typed:se}),GFe=JAe({Complex:mr,config:Te,typed:se}),WFe=xye({typed:se}),KFe=k1e({typed:se}),XFe=Sye({typed:se}),YFe=R0e({typed:se}),pN=vIe({typed:se}),Ym=Iye({Complex:mr,typed:se}),Sp=j1e({typed:se}),cO=eEe({typed:se}),QFe=iEe({BigNumber:Fe,typed:se}),JFe=lEe({BigNumber:Fe,typed:se}),ZFe=gbe({typed:se}),Rt=cye({config:Te,typed:se}),eOe=uxe({typed:se}),IY=ybe({typed:se}),tOe=wbe({Complex:mr,typed:se}),rOe=eY({typed:se}),Tp=hwe({typed:se}),nOe=tY({typed:se}),g_=wxe({typed:se}),hO=pwe({typed:se}),iOe=Txe({format:g_,typed:se}),dO=H1e({typed:se}),v_=nye({typed:se}),hc=tye({typed:se}),Cp=W0e({typed:se}),sOe=Rxe({typed:se}),aOe=ZPe({BigNumber:Fe,config:Te}),oOe=AIe({Complex:mr,typed:se}),lOe=e1e({Complex:mr,config:Te,typed:se}),fO=r1e({Complex:mr,config:Te,typed:se}),Gd=rY({typed:se}),uOe=gxe({isNaN:hc,isNumeric:Cp,typed:se}),gn=s1e({typed:se}),OT=X1e({typed:se}),lu=yye({typed:se}),cOe=Exe({format:g_,typed:se}),hOe=QIe({config:Te,typed:se}),dOe=uY({typed:se}),fOe=ZIe({config:Te,typed:se}),mO=W1e({typed:se}),mOe=dEe({BigNumber:Fe,typed:se}),PY=h1e({BigNumber:Fe,Fraction:Hd,complex:Ym,typed:se}),gN=gEe({typed:se}),Jn=Lwe({typed:se}),Zn=fye({Matrix:mN,equalScalar:Rt,typed:se}),pOe=qye({typed:se}),gOe=g1e({typed:se}),vOe=Aye({typed:se}),xo=rbe({typed:se}),yOe=wEe({typed:se}),bOe=Ixe({typed:se}),vN=oye({typed:se}),wOe=NAe({Complex:mr,config:Te,typed:se}),xOe=OAe({BigNumber:Fe,typed:se}),_Oe=LAe({BigNumber:Fe,Complex:mr,config:Te,typed:se}),Xs=Nye({BigNumber:Fe,typed:se}),AOe=bIe({typed:se}),EOe=rEe({typed:se}),SOe=cEe({BigNumber:Fe,typed:se}),yN=QEe({addScalar:Qn,conj:Sp,multiplyScalar:gn,size:Jn,typed:se}),TOe=X0e({isNumeric:Cp,typed:se}),COe=sye({isBounded:v_,map:Gd,typed:se}),Wd=H0e({config:Te,typed:se}),_o=Z0e({equalScalar:Rt,typed:se}),ke=Oye({DenseMatrix:Ct,Matrix:mN,SparseMatrix:Zn,typed:se}),NOe=Lye({isZero:_o,matrix:ke,typed:se}),nr=o1e({addScalar:Qn,dot:yN,equalScalar:Rt,matrix:ke,multiplyScalar:gn,typed:se}),DOe=Ewe({BigNumber:Fe,config:Te,matrix:ke,typed:se}),MOe=tPe({config:Te,log2:fO,typed:se}),IOe=Iwe({config:Te,matrix:ke}),POe=mEe({BigNumber:Fe,typed:se}),ROe=yEe({typed:se}),kOe=_Ae({SparseMatrix:Zn,typed:se}),il=m1e({Complex:mr,config:Te,typed:se}),FOe=Vwe({typed:se}),OOe=AEe({typed:se}),y_=Gwe({matrix:ke,typed:se}),RY=w1e({BigNumber:Fe,config:Te,matrix:ke,typed:se}),Ii=Ywe({BigNumber:Fe,config:Te,matrix:ke,typed:se}),BOe=PAe({BigNumber:Fe,Complex:mr,config:Te,typed:se}),LOe=zAe({Complex:mr,config:Te,typed:se}),$Oe=_xe({format:g_,typed:se}),VOe=aEe({BigNumber:Fe,typed:se}),pO=Kwe({conj:Sp,transpose:y_,typed:se}),kY=owe({DenseMatrix:Ct,SparseMatrix:Zn,matrix:ke,typed:se}),as=C_e({DenseMatrix:Ct,SparseMatrix:Zn,equalScalar:Rt,matrix:ke,typed:se}),b_=kye({Fraction:Hd,typed:se}),Kd=vwe({BigNumber:Fe,DenseMatrix:Ct,SparseMatrix:Zn,config:Te,matrix:ke,typed:se}),_s=F0e({equal:as,typed:se}),UOe=bwe({matrix:ke,multiplyScalar:gn,typed:se}),V1=$P({isInteger:_s,typed:se}),gO=zye({flatten:Tp,matrix:ke,size:Jn,typed:se}),fo=Oxe({bignumber:Xs,fraction:b_,number:lu}),FY=yxe({config:Te,multiplyScalar:gn,numeric:fo,typed:se}),OY=Nwe({isInteger:_s,matrix:ke,typed:se}),ly=zxe({BigNumber:Fe,DenseMatrix:Ct,config:Te,equalScalar:Rt,matrix:ke,typed:se,zeros:Ii}),uu=Gye({typed:se}),zOe=pIe({BigNumber:Fe,Fraction:Hd,config:Te,isInteger:_s,number:lu,typed:se}),BY=ibe({BigNumber:Fe,Complex:mr,Fraction:Hd,config:Te,isNegative:Wd,matrix:ke,typed:se,unaryMinus:uu}),Qt=JX({isInteger:_s,matrix:ke,typed:se}),jOe=nwe({prod:FY,size:Jn,typed:se}),w_=q_e({equal:as,typed:se}),Wr=Lxe({numeric:fo,typed:se}),qOe=T1e({concat:Qt,equalScalar:Rt,matrix:ke,multiplyScalar:gn,typed:se}),LY=qX({DenseMatrix:Ct,config:Te,equalScalar:Rt,matrix:ke,round:ly,typed:se,zeros:Ii}),HOe=Wbe({BigNumber:Fe,DenseMatrix:Ct,concat:Qt,config:Te,equalScalar:Rt,matrix:ke,round:ly,typed:se,zeros:Ii}),Np=Q0e({config:Te,typed:se}),As=L_e({DenseMatrix:Ct,SparseMatrix:Zn,bignumber:Xs,concat:Qt,config:Te,matrix:ke,typed:se}),GOe=Qbe({concat:Qt,equalScalar:Rt,matrix:ke,typed:se}),WOe=h_e({DenseMatrix:Ct,concat:Qt,equalScalar:Rt,matrix:ke,typed:se,zeros:Ii}),$Y=t_e({DenseMatrix:Ct,divideScalar:Wr,equalScalar:Rt,matrix:ke,multiplyScalar:gn,subtractScalar:xo,typed:se}),vO=hY({config:Te,isNaN:hc,larger:As,numeric:fo,typed:se}),VY=GX({DenseMatrix:Ct,concat:Qt,config:Te,equalScalar:Rt,matrix:ke,round:ly,typed:se,zeros:Ii}),KOe=u1e({BigNumber:Fe,concat:Qt,equalScalar:Rt,matrix:ke,typed:se}),XOe=YX({deepEqual:w_,flatten:Tp,matrix:ke,size:Jn,typed:se}),YOe=QX({DenseMatrix:Ct,concat:Qt,equalScalar:Rt,matrix:ke,typed:se}),yO=aTe({addScalar:Qn,complex:Ym,conj:Sp,divideScalar:Wr,equal:as,identity:Kd,isZero:_o,matrix:ke,multiplyScalar:gn,sign:PY,sqrt:il,subtractScalar:xo,typed:se,unaryMinus:uu,zeros:Ii}),QOe=f_e({DenseMatrix:Ct,concat:Qt,equalScalar:Rt,matrix:ke,typed:se,zeros:Ii}),Es=P_e({DenseMatrix:Ct,SparseMatrix:Zn,bignumber:Xs,concat:Qt,config:Te,matrix:ke,typed:se}),tn=y1e({DenseMatrix:Ct,concat:Qt,equalScalar:Rt,matrix:ke,subtractScalar:xo,typed:se,unaryMinus:uu}),JOe=Dxe({concat:Qt,matrix:ke,typed:se}),bO=Kye({config:Te,numeric:fo,typed:se}),wO=n_e({DenseMatrix:Ct,divideScalar:Wr,equalScalar:Rt,matrix:ke,multiplyScalar:gn,subtractScalar:xo,typed:se}),ZOe=Z1e({DenseMatrix:Ct,SparseMatrix:Zn,concat:Qt,matrix:ke,typed:se}),$t=HEe({DenseMatrix:Ct,SparseMatrix:Zn,addScalar:Qn,concat:Qt,equalScalar:Rt,matrix:ke,typed:se}),e3e=YAe({BigNumber:Fe,DenseMatrix:Ct,concat:Qt,equalScalar:Rt,matrix:ke,typed:se}),t3e=KX({concat:Qt,equalScalar:Rt,matrix:ke,typed:se}),r3e=XX({DenseMatrix:Ct,concat:Qt,equalScalar:Rt,matrix:ke,typed:se}),n3e=$1e({DenseMatrix:Ct,SparseMatrix:Zn,concat:Qt,matrix:ke,typed:se}),i3e=oPe({addScalar:Qn,combinations:pN,divideScalar:Wr,isInteger:_s,isNegative:Wd,multiplyScalar:gn,typed:se}),Dp=y_e({BigNumber:Fe,DenseMatrix:Ct,Fraction:Hd,concat:Qt,config:Te,equalScalar:Rt,matrix:ke,typed:se}),UY=S_e({concat:Qt,matrix:ke,typed:se}),s3e=uPe({addScalar:Qn,combinations:pN,isInteger:_s,isNegative:Wd,isPositive:Np,larger:As,typed:se}),a3e=swe({matrix:ke,multiply:nr,subtract:tn,typed:se}),zY=NMe({divideScalar:Wr,isZero:_o,matrix:ke,multiply:nr,subtractScalar:xo,typed:se,unaryMinus:uu}),o3e=nY({matrix:ke,number:lu,subtract:tn,typed:se}),l3e=JMe({abs:Oi,addScalar:Qn,deepEqual:w_,divideScalar:Wr,multiplyScalar:gn,sqrt:il,subtractScalar:xo,typed:se}),x_=Zxe({DenseMatrix:Ct,SparseMatrix:Zn,concat:Qt,divideScalar:Wr,equalScalar:Rt,matrix:ke,typed:se}),u3e=M_e({compareText:UY,isZero:_o,typed:se}),jY=lAe({larger:As,smaller:Es}),c3e=WEe({abs:Oi,addScalar:Qn,divideScalar:Wr,isPositive:Np,multiplyScalar:gn,smaller:Es,sqrt:il,typed:se}),qY=rAe({DenseMatrix:Ct,smaller:Es}),es=sAe({ImmutableDenseMatrix:qY,getMatrixDataType:hO}),h3e=tIe({abs:Oi,add:$t,addScalar:Qn,config:Te,divideScalar:Wr,equalScalar:Rt,flatten:Tp,isNumeric:Cp,isZero:_o,matrix:ke,multiply:nr,multiplyScalar:gn,smaller:Es,subtract:tn,typed:se}),d3e=_1e({BigNumber:Fe,add:$t,config:Te,equal:as,isInteger:_s,mod:VY,smaller:Es,typed:se,xgcd:RY}),bN=U_e({DenseMatrix:Ct,SparseMatrix:Zn,concat:Qt,config:Te,matrix:ke,typed:se}),xO=Hxe({Complex:mr,config:Te,divideScalar:Wr,typeOf:vN,typed:se}),f3e=s_e({DenseMatrix:Ct,divideScalar:Wr,equalScalar:Rt,matrix:ke,multiplyScalar:gn,subtractScalar:xo,typed:se}),m3e=Vye({flatten:Tp,matrix:ke,size:Jn,typed:se}),p3e=dY({config:Te,isNaN:hc,numeric:fo,smaller:Es,typed:se}),g3e=Xxe({Complex:mr,config:Te,divideScalar:Wr,typed:se}),wN=X_e({compare:Dp,isNaN:hc,isNumeric:Cp,typed:se}),v3e=p_e({DenseMatrix:Ct,concat:Qt,equalScalar:Rt,matrix:ke,typed:se,zeros:Ii}),HY=MTe({SparseMatrix:Zn,abs:Oi,add:$t,divideScalar:Wr,larger:As,largerEq:bN,multiply:nr,subtract:tn,transpose:y_,typed:se}),GY=hAe({FibonacciHeap:jY,addScalar:Qn,equalScalar:Rt}),ka=oY({add:$t,matrix:ke,typed:se,zeros:Ii}),_O=yY({add:$t,config:Te,numeric:fo,typed:se}),y3e=eSe({add:$t,matrix:ke,typed:se}),WY=o_e({DenseMatrix:Ct,divideScalar:Wr,equalScalar:Rt,matrix:ke,multiplyScalar:gn,subtractScalar:xo,typed:se}),b3e=PPe({Complex:mr,add:$t,multiply:nr,number:lu,typed:se}),AO=mbe({DenseMatrix:Ct,config:Te,equalScalar:Rt,matrix:ke,round:ly,typed:se,zeros:Ii}),cu=__e({compare:Dp,typed:se}),w3e=bY({add:$t,typed:se,unaryPlus:bO}),KY=Abe({Complex:mr,DenseMatrix:Ct,ceil:AO,equalScalar:Rt,floor:LY,matrix:ke,typed:se,zeros:Ii}),XY=rSe({Index:es,typed:se}),Mp=MMe({abs:Oi,addScalar:Qn,det:zY,divideScalar:Wr,identity:Kd,matrix:ke,multiply:nr,typed:se,unaryMinus:uu}),x3e=Wxe({Complex:mr,config:Te,divideScalar:Wr,log:xO,typed:se}),YY=iTe({DenseMatrix:Ct,Spa:GY,SparseMatrix:Zn,abs:Oi,addScalar:Qn,divideScalar:Wr,equalScalar:Rt,larger:As,matrix:ke,multiplyScalar:gn,subtractScalar:xo,typed:se,unaryMinus:uu}),_3e=PMe({Complex:mr,add:$t,ctranspose:pO,deepEqual:w_,divideScalar:Wr,dot:yN,dotDivide:x_,equal:as,inv:Mp,matrix:ke,multiply:nr,typed:se}),sl=Vxe({Complex:mr,config:Te,fraction:b_,identity:Kd,inv:Mp,matrix:ke,multiply:nr,number:lu,typed:se}),A3e=SEe({DenseMatrix:Ct,Index:es,compareNatural:cu,size:Jn,subset:ka,typed:se}),E3e=DEe({DenseMatrix:Ct,Index:es,compareNatural:cu,size:Jn,subset:ka,typed:se}),S3e=REe({Index:es,compareNatural:cu,size:Jn,subset:ka,typed:se}),T3e=BEe({Index:es,compareNatural:cu,size:Jn,subset:ka,typed:se}),B0=F_e({DenseMatrix:Ct,SparseMatrix:Zn,concat:Qt,config:Te,matrix:ke,typed:se}),C3e=Q_e({compare:Dp,compareNatural:cu,matrix:ke,typed:se}),N3e=UMe({abs:Oi,add:$t,identity:Kd,inv:Mp,map:Gd,max:vO,multiply:nr,size:Jn,sqrt:il,subtract:tn,typed:se}),D3e=G_e({DenseMatrix:Ct,SparseMatrix:Zn,concat:Qt,config:Te,equalScalar:Rt,matrix:ke,typed:se}),M3e=cY({concat:Qt,equalScalar:Rt,matrix:ke,not:OT,typed:se,zeros:Ii}),Xn=YMe({divideScalar:Wr,equalScalar:Rt,inv:Mp,matrix:ke,multiply:nr,typed:se}),I3e=$Me({abs:Oi,add:$t,identity:Kd,inv:Mp,multiply:nr,typed:se}),QY=Jwe({addScalar:Qn,ceil:AO,conj:Sp,divideScalar:Wr,dotDivide:x_,exp:IY,i:TY,log2:fO,matrix:ke,multiplyScalar:gn,pow:sl,tau:NY,typed:se}),P3e=kPe({Complex:mr,add:$t,divide:Xn,matrix:ke,multiply:nr,typed:se}),EO=xIe({BigNumber:Fe,Complex:mr,config:Te,multiplyScalar:gn,pow:sl,typed:se}),R3e=exe({conj:Sp,dotDivide:x_,fft:QY,typed:se}),k3e=CIe({divide:Xn,dotDivide:x_,isNumeric:Cp,log:xO,map:Gd,matrix:ke,multiply:nr,sum:_O,typed:se}),JY=PTe({DenseMatrix:Ct,lsolve:$Y,lup:YY,matrix:ke,slu:HY,typed:se,usolve:wO}),ZY=wY({add:$t,divide:Xn,typed:se}),eQ=aIe({add:$t,compare:Dp,divide:Xn,partitionSelect:wN,typed:se}),F3e=kTe({add:$t,cbrt:BY,divide:Xn,equalScalar:Rt,im:dO,isZero:_o,multiply:nr,re:mO,sqrt:il,subtract:tn,typeOf:vN,typed:se,unaryMinus:uu}),O3e=_Y({bignumber:Xs,add:$t,compare:Dp,divide:Xn,isInteger:_s,larger:As,mapSlices:V1,multiply:nr,partitionSelect:wN,smaller:Es,smallerEq:B0,subtract:tn,typed:se}),L0=sY({bignumber:Xs,matrix:ke,add:$t,config:Te,equal:as,isPositive:Np,isZero:_o,larger:As,largerEq:bN,smaller:Es,smallerEq:B0,typed:se}),B3e=aY({Index:es,matrix:ke,range:L0,typed:se}),tQ=CEe({DenseMatrix:Ct,Index:es,compareNatural:cu,size:Jn,subset:ka,typed:se}),L3e=FEe({Index:es,compareNatural:cu,size:Jn,subset:ka,typed:se}),rQ=UEe({Index:es,concat:Qt,setDifference:tQ,size:Jn,subset:ka,typed:se}),$3e=axe({abs:Oi,add:$t,bignumber:Xs,divide:Xn,isNegative:Wd,isPositive:Np,larger:As,map:Gd,matrix:ke,max:vO,multiply:nr,smaller:Es,subtract:tn,typed:se,unaryMinus:uu}),dt=yAe({BigNumber:Fe,Complex:mr,Fraction:Hd,abs:Oi,addScalar:Qn,config:Te,divideScalar:Wr,equal:as,fix:KY,format:g_,isNumeric:Cp,multiplyScalar:gn,number:lu,pow:sl,round:ly,subtractScalar:xo}),V3e=hRe({BigNumber:Fe,Unit:dt,config:Te}),U3e=FRe({BigNumber:Fe,Unit:dt,config:Te}),z3e=pRe({BigNumber:Fe,Unit:dt,config:Te}),j3e=BRe({BigNumber:Fe,Unit:dt,config:Te}),nQ=ZX({Index:es,matrix:ke,range:L0,typed:se}),q3e=gRe({BigNumber:Fe,Unit:dt,config:Te}),H3e=dRe({BigNumber:Fe,Unit:dt,config:Te}),G3e=EAe({Unit:dt,typed:se}),W3e=NRe({BigNumber:Fe,Unit:dt,config:Te}),iQ=BMe({abs:Oi,add:$t,addScalar:Qn,atan:MY,bignumber:Xs,column:nQ,complex:Ym,config:Te,cos:cO,diag:kY,divideScalar:Wr,dot:yN,equal:as,flatten:Tp,im:dO,inv:Mp,larger:As,matrix:ke,matrixFromColumns:gO,multiply:nr,multiplyScalar:gn,number:lu,qr:yO,re:mO,reshape:OY,sin:gN,size:Jn,smaller:Es,sqrt:il,subtract:tn,typed:se,usolve:wO,usolveAll:WY}),K3e=ARe({BigNumber:Fe,Unit:dt,config:Te}),__=SIe({gamma:EO,typed:se}),X3e=ERe({BigNumber:Fe,Unit:dt,config:Te}),Y3e=URe({BigNumber:Fe,Unit:dt,config:Te}),Q3e=YRe({BigNumber:Fe,Unit:dt,config:Te}),J3e=wRe({BigNumber:Fe,Unit:dt,config:Te}),Z3e=VRe({BigNumber:Fe,Unit:dt,config:Te}),eBe=lIe({abs:Oi,map:Gd,median:eQ,subtract:tn,typed:se}),tBe=yRe({BigNumber:Fe,Unit:dt,config:Te}),rBe=KRe({BigNumber:Fe,Unit:dt,config:Te}),nBe=zRe({BigNumber:Fe,Unit:dt,config:Te}),iBe=DIe({add:$t,divide:Xn,factorial:__,isInteger:_s,isPositive:Np,multiply:nr,typed:se}),SO=XEe({abs:Oi,add:$t,conj:Sp,ctranspose:pO,eigs:iQ,equalScalar:Rt,larger:As,matrix:ke,multiply:nr,pow:sl,smaller:Es,sqrt:il,typed:se}),sBe=IIe({factorial:__,typed:se}),aBe=oRe({BigNumber:Fe,Unit:dt,config:Te}),oBe=JRe({BigNumber:Fe,Unit:dt,config:Te}),lBe=ZRe({BigNumber:Fe,Unit:dt,config:Te}),uBe=lRe({BigNumber:Fe,Unit:dt,config:Te}),sQ=Fwe({BigNumber:Fe,DenseMatrix:Ct,SparseMatrix:Zn,addScalar:Qn,config:Te,cos:cO,matrix:ke,multiplyScalar:gn,norm:SO,sin:gN,typed:se,unaryMinus:uu}),cBe=IRe({BigNumber:Fe,Unit:dt,config:Te}),hBe=HRe({BigNumber:Fe,Unit:dt,config:Te}),dBe=$Ee({compareNatural:cu,typed:se}),fBe=sRe({BigNumber:Fe,Unit:dt,config:Te}),mBe=GRe({BigNumber:Fe,Unit:dt,config:Te}),pBe=PRe({BigNumber:Fe,Unit:dt,config:Te}),TO=xY({add:$t,divide:Xn,isNaN:hc,mapSlices:V1,multiply:nr,subtract:tn,typed:se}),gBe=mxe({BigNumber:Fe,Complex:mr,add:$t,config:Te,divide:Xn,equal:as,factorial:__,gamma:EO,isBounded:v_,isNegative:Wd,multiply:nr,pi:KP,pow:sl,sin:gN,smallerEq:B0,subtract:tn,typed:se}),vBe=ORe({BigNumber:Fe,Unit:dt,config:Te}),yBe=xRe({BigNumber:Fe,Unit:dt,config:Te}),bBe=fIe({add:$t,divide:Xn,matrix:ke,mean:ZY,multiply:nr,pow:sl,sqrt:il,subtract:tn,sum:_O,typed:se}),wBe=Qxe({DenseMatrix:Ct,SparseMatrix:Zn,concat:Qt,equalScalar:Rt,matrix:ke,pow:sl,typed:se}),xBe=mRe({BigNumber:Fe,Unit:dt,config:Te}),_Be=LRe({BigNumber:Fe,Unit:dt,config:Te}),ABe=TRe({BigNumber:Fe,Unit:dt,config:Te}),EBe=vRe({BigNumber:Fe,Unit:dt,config:Te}),SBe=uRe({BigNumber:Fe,Unit:dt,config:Te}),TBe=XRe({BigNumber:Fe,Unit:dt,config:Te}),CBe=DRe({BigNumber:Fe,Unit:dt,config:Te}),NBe=eke({BigNumber:Fe,Unit:dt,config:Te}),DBe=tke({BigNumber:Fe,Unit:dt,config:Te}),MBe=MRe({BigNumber:Fe,Unit:dt,config:Te}),aQ=IEe({DenseMatrix:Ct,Index:es,compareNatural:cu,size:Jn,subset:ka,typed:se}),IBe=AY({map:Gd,sqrt:il,typed:se,variance:TO}),oQ=nPe({bignumber:Xs,addScalar:Qn,combinations:pN,divideScalar:Wr,factorial:__,isInteger:_s,isNegative:Wd,larger:As,multiplyScalar:gn,number:lu,pow:sl,subtractScalar:xo,typed:se}),PBe=wAe({Unit:dt,typed:se}),RBe=sPe({addScalar:Qn,isInteger:_s,isNegative:Wd,stirlingS2:oQ,typed:se}),kBe=cRe({BigNumber:Fe,Unit:dt,config:Te}),FBe=$Re({BigNumber:Fe,Unit:dt,config:Te}),OBe=bRe({BigNumber:Fe,Unit:dt,config:Te}),BBe=QRe({BigNumber:Fe,Unit:dt,config:Te}),LBe=Rwe({multiply:nr,rotationMatrix:sQ,typed:se}),$Be=jEe({Index:es,concat:Qt,setIntersect:aQ,setSymDifference:rQ,size:Jn,subset:ka,typed:se}),VBe=WRe({BigNumber:Fe,Unit:dt,config:Te}),UBe=_Re({BigNumber:Fe,Unit:dt,config:Te}),zBe=jRe({BigNumber:Fe,Unit:dt,config:Te}),lQ=HMe({identity:Kd,matrix:ke,multiply:nr,norm:SO,qr:yO,subtract:tn,typed:se}),jBe=fRe({BigNumber:Fe,Unit:dt,config:Te}),qBe=aRe({BigNumber:Fe,Unit:dt,config:Te}),HBe=CRe({BigNumber:Fe,Unit:dt,config:Te}),uQ=jMe({abs:Oi,add:$t,concat:Qt,identity:Kd,index:XY,lusolve:JY,matrix:ke,matrixFromColumns:gO,multiply:nr,range:L0,schur:lQ,subset:ka,subtract:tn,transpose:y_,typed:se}),GBe=WMe({matrix:ke,multiply:nr,sylvester:uQ,transpose:y_,typed:se}),uy={},A_={},cQ={},os=sSe({mathWithTransform:A_}),cy=ISe({Node:os}),Rc=RSe({Node:os}),Ip=FSe({Node:os}),hQ=$Se({Node:os}),hy=uSe({Node:os}),dQ=pSe({Node:os,ResultSet:CY}),fQ=vSe({Node:os}),mQ=BSe({Node:os}),WBe=BPe({classes:cQ}),CO=VTe({math:uy,typed:se}),pQ=CSe({Node:os,typed:se}),KBe=TMe({Chain:CO,typed:se}),Xd=SSe({Node:os,isBounded:v_}),dy=DSe({Node:os,size:Jn}),fy=oSe({Node:os,subset:ka}),gQ=fSe({matrix:ke,Node:os,subset:ka}),Yd=zSe({Unit:dt,Node:os,math:uy}),Qd=qSe({Node:os,SymbolNode:Yd,math:uy}),al=GSe({AccessorNode:fy,ArrayNode:hy,AssignmentNode:gQ,BlockNode:dQ,ConditionalNode:fQ,ConstantNode:Xd,FunctionAssignmentNode:pQ,FunctionNode:Qd,IndexNode:dy,ObjectNode:cy,OperatorNode:Rc,ParenthesisNode:Ip,RangeNode:mQ,RelationalNode:hQ,SymbolNode:Yd,config:Te,numeric:fo,typed:se}),vQ=EPe({ConstantNode:Xd,FunctionNode:Qd,OperatorNode:Rc,ParenthesisNode:Ip,parse:al,typed:se}),NO=bPe({bignumber:Xs,fraction:b_,AccessorNode:fy,ArrayNode:hy,ConstantNode:Xd,FunctionNode:Qd,IndexNode:dy,ObjectNode:cy,OperatorNode:Rc,SymbolNode:Yd,config:Te,isBounded:v_,mathWithTransform:A_,matrix:ke,typed:se}),XBe=KSe({parse:al,typed:se}),YBe=hPe({parse:al,typed:se}),DO=xPe({AccessorNode:fy,ArrayNode:hy,ConstantNode:Xd,FunctionNode:Qd,IndexNode:dy,ObjectNode:cy,OperatorNode:Rc,ParenthesisNode:Ip,SymbolNode:Yd,add:$t,divide:Xn,equal:as,isZero:_o,multiply:nr,parse:al,pow:sl,subtract:tn,typed:se}),E_=YSe({parse:al,typed:se}),yQ=BTe({evaluate:E_}),bQ=ZSe({evaluate:E_,parse:al}),QBe=rTe({Parser:bQ,typed:se}),xN=gPe({AccessorNode:fy,ArrayNode:hy,ConstantNode:Xd,FunctionNode:Qd,IndexNode:dy,ObjectNode:cy,OperatorNode:Rc,ParenthesisNode:Ip,SymbolNode:Yd,equal:as,parse:al,replacer:DY,resolve:vQ,simplifyConstant:NO,simplifyCore:DO,typed:se}),JBe=TPe({OperatorNode:Rc,parse:al,simplify:xN,typed:se}),wQ=NPe({ConstantNode:Xd,FunctionNode:Qd,OperatorNode:Rc,ParenthesisNode:Ip,SymbolNode:Yd,config:Te,equal:as,isZero:_o,numeric:fo,parse:al,simplify:xN,typed:se}),ZBe=EMe({Help:yQ,mathWithTransform:A_,typed:se}),e4e=MPe({bignumber:Xs,fraction:b_,AccessorNode:fy,ArrayNode:hy,ConstantNode:Xd,FunctionNode:Qd,IndexNode:dy,ObjectNode:cy,OperatorNode:Rc,ParenthesisNode:Ip,SymbolNode:Yd,add:$t,config:Te,divide:Xn,equal:as,isZero:_o,mathWithTransform:A_,matrix:ke,multiply:nr,parse:al,pow:sl,simplify:xN,simplifyConstant:NO,simplifyCore:DO,subtract:tn,typed:se});An(uy,{e:CU,false:AFe,fineStructure:EFe,i:TY,Infinity:SFe,LN10:TFe,LOG10E:CFe,NaN:NFe,null:DFe,phi:MFe,SQRT1_2:PFe,sackurTetrode:RFe,tau:NY,true:kFe,E:CU,version:FFe,efimovFactor:OFe,LN2:BFe,pi:KP,replacer:DY,reviver:WBe,SQRT2:LFe,typed:se,PI:KP,weakMixingAngle:$Fe,abs:Oi,acos:VFe,acot:UFe,acsc:zFe,addScalar:Qn,arg:jFe,asech:qFe,asinh:HFe,atan:MY,atanh:GFe,bigint:WFe,bitNot:KFe,boolean:XFe,clone:YFe,combinations:pN,complex:Ym,conj:Sp,cos:cO,cot:QFe,csc:JFe,cube:ZFe,equalScalar:Rt,erf:eOe,exp:IY,expm1:tOe,filter:rOe,flatten:Tp,forEach:nOe,format:g_,getMatrixDataType:hO,hex:iOe,im:dO,isBounded:v_,isNaN:hc,isNumeric:Cp,isPrime:sOe,LOG2E:aOe,lgamma:oOe,log10:lOe,log2:fO,map:Gd,mode:uOe,multiplyScalar:gn,not:OT,number:lu,oct:cOe,pickRandom:hOe,print:dOe,random:fOe,re:mO,sec:mOe,sign:PY,sin:gN,size:Jn,splitUnit:pOe,square:gOe,string:vOe,subtractScalar:xo,tan:yOe,toBest:bOe,typeOf:vN,acosh:wOe,acsch:xOe,asec:_Oe,bignumber:Xs,chain:KBe,combinationsWithRep:AOe,cosh:EOe,csch:SOe,dot:yN,hasNumericValue:TOe,isFinite:COe,isNegative:Wd,isZero:_o,matrix:ke,matrixFromFunction:NOe,multiply:nr,ones:DOe,randomInt:MOe,resize:IOe,sech:POe,sinh:ROe,sparse:kOe,sqrt:il,squeeze:FOe,tanh:OOe,transpose:y_,xgcd:RY,zeros:Ii,acoth:BOe,asin:LOe,bin:$Oe,coth:VOe,ctranspose:pO,diag:kY,equal:as,fraction:b_,identity:Kd,isInteger:_s,kron:UOe,mapSlices:V1,matrixFromColumns:gO,numeric:fo,prod:FY,reshape:OY,round:ly,unaryMinus:uu,bernoulli:zOe,cbrt:BY,concat:Qt,count:jOe,deepEqual:w_,divideScalar:Wr,dotMultiply:qOe,floor:LY,gcd:HOe,isPositive:Np,larger:As,lcm:GOe,leftShift:WOe,lsolve:$Y,max:vO,mod:VY,nthRoot:KOe,nullish:XOe,or:YOe,qr:yO,rightArithShift:QOe,smaller:Es,subtract:tn,to:JOe,unaryPlus:bO,usolve:wO,xor:ZOe,add:$t,atan2:e3e,bitAnd:t3e,bitOr:r3e,bitXor:n3e,catalan:i3e,compare:Dp,compareText:UY,composition:s3e,cross:a3e,det:zY,diff:o3e,distance:l3e,dotDivide:x_,equalText:u3e,hypot:c3e,intersect:h3e,invmod:d3e,largerEq:bN,log:xO,lsolveAll:f3e,matrixFromRows:m3e,min:p3e,nthRoots:g3e,partitionSelect:wN,rightLogShift:v3e,slu:HY,subset:ka,sum:_O,trace:y3e,usolveAll:WY,zpk2tf:b3e,ceil:AO,compareNatural:cu,cumsum:w3e,fix:KY,index:XY,inv:Mp,log1p:x3e,lup:YY,pinv:_3e,pow:sl,setCartesian:A3e,setDistinct:E3e,setIsSubset:S3e,setPowerset:T3e,smallerEq:B0,sort:C3e,sqrtm:N3e,unequal:D3e,and:M3e,divide:Xn,expm:I3e,fft:QY,freqz:P3e,gamma:EO,ifft:R3e,kldivergence:k3e,lusolve:JY,mean:ZY,median:eQ,polynomialRoot:F3e,quantileSeq:O3e,range:L0,row:B3e,setDifference:tQ,setMultiplicity:L3e,setSymDifference:rQ,solveODE:$3e,vacuumImpedance:V3e,atomicMass:U3e,bohrMagneton:z3e,boltzmann:j3e,column:nQ,conductanceQuantum:q3e,coulomb:H3e,createUnit:G3e,deuteronMass:W3e,eigs:iQ,electronMass:K3e,factorial:__,fermiCoupling:X3e,gasConstant:Y3e,gravity:Q3e,klitzing:J3e,loschmidt:Z3e,mad:eBe,magneticFluxQuantum:tBe,molarMass:rBe,molarPlanckConstant:nBe,multinomial:iBe,norm:SO,permutations:sBe,planckConstant:aBe,planckMass:oBe,planckTime:lBe,reducedPlanckConstant:uBe,rotationMatrix:sQ,rydberg:cBe,secondRadiation:hBe,setSize:dBe,speedOfLight:fBe,stefanBoltzmann:mBe,thomsonCrossSection:pBe,variance:TO,zeta:gBe,avogadro:vBe,bohrRadius:yBe,corr:bBe,dotPow:wBe,elementaryCharge:xBe,faraday:_Be,hartreeEnergy:ABe,inverseConductanceQuantum:EBe,magneticConstant:SBe,molarMassC12:TBe,neutronMass:CBe,parse:al,planckCharge:NBe,planckTemperature:DBe,quantumOfCirculation:MBe,resolve:vQ,setIntersect:aQ,simplifyConstant:NO,std:IBe,stirlingS2:oQ,unit:PBe,bellNumbers:RBe,compile:XBe,electricConstant:kBe,firstRadiation:FBe,leafCount:YBe,nuclearMagneton:OBe,planckLength:BBe,rotate:LBe,setUnion:$Be,simplifyCore:DO,wienDisplacement:VBe,classicalElectronRadius:UBe,evaluate:E_,molarVolume:zBe,schur:lQ,coulombConstant:jBe,gravitationConstant:qBe,parser:QBe,simplify:xN,symbolicEqual:JBe,derivative:wQ,protonMass:HBe,sylvester:uQ,help:ZBe,rationalize:e4e,lyap:GBe,config:Te});An(A_,uy,{map:_ke({typed:se}),filter:fke({typed:se}),forEach:gke({typed:se}),mapSlices:ske({isInteger:_s,typed:se}),and:cFe({add:$t,concat:Qt,equalScalar:Rt,matrix:ke,not:OT,typed:se,zeros:Ii}),cumsum:nFe({add:$t,typed:se,unaryPlus:bO}),nullish:gFe({deepEqual:w_,flatten:Tp,matrix:ke,size:Jn,typed:se}),print:oFe({add:$t,matrix:ke,typed:se,zeros:Ii}),bitAnd:bFe({add:$t,concat:Qt,equalScalar:Rt,matrix:ke,not:OT,typed:se,zeros:Ii}),concat:Hke({isInteger:_s,matrix:ke,typed:se}),diff:Wke({bignumber:Xs,matrix:ke,number:lu,subtract:tn,typed:se}),max:Cke({config:Te,isNaN:hc,larger:As,numeric:fo,typed:se}),min:Rke({config:Te,isNaN:hc,numeric:fo,smaller:Es,typed:se}),or:fFe({DenseMatrix:Ct,concat:Qt,equalScalar:Rt,matrix:ke,typed:se}),subset:zke({add:$t,matrix:ke,typed:se,zeros:Ii}),bitOr:_Fe({DenseMatrix:Ct,concat:Qt,equalScalar:Rt,matrix:ke,typed:se}),sum:Jke({add:$t,config:Te,numeric:fo,typed:se}),variance:sFe({add:$t,divide:Xn,isNaN:hc,mapSlices:V1,multiply:nr,subtract:tn,typed:se}),index:bke({Index:es,getMatrixDataType:hO}),quantileSeq:tFe({add:$t,bignumber:Xs,compare:Dp,divide:Xn,isInteger:_s,larger:As,mapSlices:V1,multiply:nr,partitionSelect:wN,smaller:Es,smallerEq:B0,subtract:tn,typed:se}),range:Oke({bignumber:Xs,matrix:ke,add:$t,config:Te,equal:as,isPositive:Np,isZero:_o,larger:As,largerEq:bN,smaller:Es,smallerEq:B0,typed:se}),column:lke({Index:es,matrix:ke,range:L0,typed:se}),row:$ke({Index:es,matrix:ke,range:L0,typed:se}),mean:Mke({add:$t,divide:Xn,typed:se}),std:Yke({map:Gd,sqrt:il,typed:se,variance:TO})});An(cQ,{BigNumber:Fe,Complex:mr,Fraction:Hd,Matrix:mN,Node:os,ObjectNode:cy,OperatorNode:Rc,ParenthesisNode:Ip,Range:IFe,RelationalNode:hQ,ResultSet:CY,ArrayNode:hy,BlockNode:dQ,ConditionalNode:fQ,DenseMatrix:Ct,RangeNode:mQ,Chain:CO,FunctionAssignmentNode:pQ,SparseMatrix:Zn,ConstantNode:Xd,IndexNode:dy,FibonacciHeap:jY,ImmutableDenseMatrix:qY,Index:es,Spa:GY,AccessorNode:fy,AssignmentNode:gQ,Unit:dt,SymbolNode:Yd,FunctionNode:Qd,Help:yQ,Parser:bQ});CO.createProxy(uy);const t4e=[["7","8","9","/"],["4","5","6","*"],["1","2","3","-"],["0",".","=","+"],["(",")","ANS","DEL"]],r4e=[["sin(","cos(","tan(","asin(","acos("],["log(","ln(","exp(","sqrt(","^"],["pi","e","i","abs(","pow("]],n4e=[{label:"det 2x2",snippet:"det([[3,-1],[2,5]])"},{label:"dot ",snippet:"dot([1,2,3],[4,5,6])"},{label:"cross ",snippet:"cross([1,0,0],[0,1,0])"},{label:"|z|",snippet:"abs(3 + 4i)"},{label:"exp(-jw t)",snippet:"exp(-i*2*pi*60*t)"},{label:"sqrt(3)",snippet:"sqrt(3)"}],i4e=[{id:"standard",label:" ",description:"  + ",badge:"Standard"},{id:"roots",label:" ",description:"  ",badge:" "},{id:"derivative",label:" ",description:"/ ",badge:""},{id:"integral",label:" ",description:"Simpson Rule",badge:""},{id:"guide",label:" ",description:"  & ",badge:""}],s4e=(r,e)=>r.reduce((t,n)=>$t(nr(t,e),n)),NU=r=>{if(typeof r=="number")return r.toFixed(6).replace(/\.0+$/,"");const e=r.re||0,t=r.im||0,n=Math.abs(e)<1e-9?"0":e.toFixed(6).replace(/\.0+$/,""),i=Math.abs(t)<1e-9?"0":t.toFixed(6).replace(/\.0+$/,"");if(Math.abs(t)<1e-9)return n;const s=t>=0?"+":"-";return`${n} ${s} ${Math.abs(i)}i`},a4e=r=>{const e=r.map(o=>Ym(o,0)),t=e[0];if(as(t,0))throw new Error("  0   .");const n=e.map(o=>Xn(o,t)),i=n.length-1,s=1+Math.max(...n.slice(1).map(o=>Oi(o))),a=Array.from({length:i},(o,l)=>Ym({r:s,phi:2*Math.PI*l/i}));for(let o=0;o<80;o++){let l=0;for(let u=0;u<a.length;u++){let c=s4e(n,a[u]),h=Ym(1,0);for(let f=0;f<a.length;f++)u!==f&&(h=nr(h,tn(a[u],a[f])));const d=Xn(c,h);a[u]=tn(a[u],d),l=Math.max(l,Oi(d))}if(l<1e-9)break}return a},o4e=(r,e,t,n,i=600)=>{i%2!==0&&(i+=1);const s={},a=(n-t)/i;let o=0;for(let l=0;l<=i;l++){const u=t+l*a;s[e]=u;const c=E_(r,s);l===0||l===i?o+=c:l%2===0?o+=2*c:o+=4*c}return a/3*o};function l4e(){const{isDark:r}=bo(),[e,t]=ue.useState(""),[n,i]=ue.useState(""),[s,a]=ue.useState([]),[o,l]=ue.useState("1,-3,2"),[u,c]=ue.useState([]),[h,d]=ue.useState(""),[f,p]=ue.useState("x^3 + 2*x"),[g,b]=ue.useState("x"),[v,x]=ue.useState(""),[y,A]=ue.useState("sin(x)"),[w,_]=ue.useState("x"),[S,E]=ue.useState({from:"0",to:"3.14159"}),[C,N]=ue.useState(""),[D,M]=ue.useState(""),[I,U]=ue.useState("standard"),X=r?"bg-gray-900 border-gray-800 text-white":"bg-white border-gray-200 text-gray-900",k=r?"bg-gray-800 hover:bg-gray-700 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900",z=r?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white",q=O=>{if(O==="DEL"){t(ne=>ne.slice(0,-1));return}if(O==="="){H();return}if(O==="ANS"){s.length>0&&t(ne=>ne+s[s.length-1].result);return}t(ne=>ne+O)},H=()=>{if(e.trim())try{const O=e.replace(//g,"pi").replace(//g,"sqrt");let ne=E_(O);typeof ne=="number"?ne=ne.toPrecision(10).replace(/\.0+$/,""):vN(ne)==="Complex"&&(ne=NU(ne)),i(String(ne)),a(W=>[...W.slice(-9),{expression:e,result:String(ne)}])}catch(O){i(`: ${O.message}`)}},te=()=>{d("");try{const O=o.split(",").map(W=>W.trim()).filter(W=>W.length>0).map(W=>Number(W));if(O.length<2)throw new Error(" 2  . (: 1,-3,2)");if(O.some(W=>Number.isNaN(W)))throw new Error("   .");const ne=a4e(O);c(ne.map(W=>NU(W)))}catch(O){d(O.message),c([])}},ce=()=>{try{const O=wQ(f,g).toString();x(`d/d${g} = ${O}`)}catch(O){x(` : ${O.message}`)}},re=()=>{M("");try{const O=Number(S.from),ne=Number(S.to);if(Number.isNaN(O)||Number.isNaN(ne))throw new Error("  .");if(O===ne)throw new Error("  0.");const W=o4e(y,w,O,ne);N(` ${y} d${w} = ${Number(W).toPrecision(8)}`)}catch(O){M(O.message),N("")}};return P.jsxs("div",{className:"space-y-10",children:[P.jsxs(Qe.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.5},children:[P.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-indigo-500 to-blue-500 dark:from-indigo-300 dark:to-blue-300 bg-clip-text text-transparent",children:"  "}),P.jsx("p",{className:`text-sm sm:text-base ${r?"text-gray-300":"text-gray-600"}`,children:"  ,   , /      ."}),P.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4 mt-6",children:[{label:" ",value:"  + "},{label:" ",value:" 10 Durand-Kerner"},{label:"/ ",value:"math.js  + Simpson"},{label:"  ",value:"i, det, dot/cross "}].map(O=>P.jsxs("div",{className:`p-4 rounded-2xl border text-sm ${r?"bg-gray-900/70 border-gray-700 text-gray-200":"bg-white border-gray-200 text-gray-700"}`,children:[P.jsx("p",{className:"font-semibold text-xs uppercase tracking-wide text-blue-500",children:O.label}),P.jsx("p",{className:"mt-2 text-base font-medium",children:O.value})]},O.label))})]}),P.jsx("div",{className:"space-y-6",children:P.jsxs(Qe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},className:`p-6 rounded-3xl border shadow-sm ${X}`,children:[P.jsx("div",{className:"flex flex-wrap gap-3",children:i4e.map(O=>P.jsxs("button",{onClick:()=>U(O.id),className:`flex-1 min-w-[140px] p-4 rounded-2xl border text-left transition ${I===O.id?r?"bg-blue-900/40 border-blue-500 text-white":"bg-blue-50 border-blue-400 text-blue-900":r?"bg-gray-800 border-gray-700 text-gray-200":"bg-white border-gray-200 text-gray-700"}`,children:[P.jsx("p",{className:"text-xs uppercase tracking-wide text-blue-400",children:O.badge}),P.jsx("p",{className:"text-lg font-semibold mt-1",children:O.label}),P.jsx("p",{className:"text-sm mt-1 opacity-80",children:O.description})]},O.id))}),P.jsxs("div",{className:"mt-8",children:[I==="standard"&&P.jsxs("div",{className:"space-y-6",children:[P.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-6 ${r?"bg-gradient-to-br from-gray-900 via-slate-900 to-gray-800":"bg-gradient-to-br from-white via-blue-50 to-blue-100 border border-blue-100"}`,children:[P.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-blue-300",children:"Expression"}),P.jsx("input",{className:`w-full bg-transparent text-right text-3xl font-semibold mt-3 focus:outline-none ${r?"text-white placeholder:text-gray-500":"text-gray-900 placeholder:text-gray-500"}`,value:e,onChange:O=>t(O.target.value),placeholder:"  (: (3+4i)*(2-i) + sin(pi/3))"}),n&&P.jsxs("p",{className:`text-right text-lg font-mono mt-2 ${n.startsWith("")?"text-red-300":"text-emerald-300"}`,children:["= ",n]}),P.jsx("button",{onClick:H,className:`mt-4 px-4 py-2 rounded-full text-sm font-semibold ${z}`,children:" / ENTER"})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx("p",{className:`text-xs font-semibold tracking-wide ${r?"text-gray-400":"text-gray-500"}`,children:"   "}),P.jsx("div",{className:"flex flex-wrap gap-2",children:n4e.map(O=>P.jsx("button",{onClick:()=>q(O.snippet),className:`px-3 py-1.5 rounded-full text-xs font-medium border ${r?"border-gray-700 text-gray-200 hover:bg-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:O.label},O.label))})]}),P.jsxs("div",{className:"grid gap-5 md:grid-cols-2",children:[P.jsxs("div",{className:`p-4 rounded-2xl border ${r?"border-gray-700 bg-gray-900/40":"border-gray-200 bg-white"}`,children:[P.jsxs("div",{className:"flex items-center justify-between mb-3",children:[P.jsx("h3",{className:"text-lg font-semibold",children:" "}),P.jsx("span",{className:"text-xs text-blue-500",children:"   "})]}),P.jsx("div",{className:"grid grid-cols-4 gap-3",children:t4e.map((O,ne)=>P.jsx("div",{className:"contents",children:O.map(W=>P.jsx("button",{onClick:()=>q(W==="pi"?"":W),className:`py-3 rounded-xl font-semibold text-lg transition ${["/","*","-","+","=","ANS"].includes(W)?z:k}`,children:W},W))},`basic-${ne}`))})]}),P.jsxs("div",{className:`p-4 rounded-2xl border ${r?"border-gray-700 bg-gray-900/40":"border-gray-200 bg-white"}`,children:[P.jsxs("div",{className:"flex items-center justify-between mb-3",children:[P.jsx("h3",{className:"text-lg font-semibold",children:" "}),P.jsx("span",{className:"text-xs text-blue-500",children:"    "})]}),P.jsx("div",{className:"grid grid-cols-5 gap-3",children:r4e.map((O,ne)=>P.jsx("div",{className:"contents",children:O.map(W=>P.jsx("button",{onClick:()=>q(W==="pi"?"":W),className:`py-3 rounded-xl font-semibold text-sm transition ${z}`,children:W},W))},`sci-${ne}`))}),P.jsx("button",{onClick:H,className:`w-full mt-3 py-3 rounded-xl font-semibold text-lg ${z}`,children:" (=)"})]})]}),P.jsxs("div",{className:`p-5 rounded-2xl border ${r?"border-gray-700 bg-gray-900/40":"border-gray-200 bg-white"}`,children:[P.jsxs("div",{className:"flex items-center justify-between mb-2",children:[P.jsx("p",{className:"font-semibold",children:" 10 "}),P.jsx("button",{onClick:()=>a([]),className:`text-sm ${r?"text-red-300":"text-red-500"}`,children:" "})]}),P.jsxs("div",{className:"max-h-64 overflow-y-auto space-y-2",children:[s.length===0&&P.jsx("p",{className:"text-sm text-gray-500",children:" "}),s.map((O,ne)=>P.jsxs("button",{onClick:()=>{t(O.expression),i(O.result)},className:`w-full text-left p-3 rounded-xl ${r?"bg-gray-800 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"}`,children:[P.jsx("p",{className:"text-sm break-words",children:O.expression}),P.jsxs("p",{className:"text-sm font-semibold text-green-500",children:["= ",O.result]})]},`${O.expression}-${ne}`))]})]})]}),I==="roots"&&P.jsxs("div",{children:[P.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),P.jsxs("p",{className:`text-sm mb-3 ${r?"text-gray-300":"text-gray-600"}`,children:["   (: x - 3x + 2  ",P.jsx("span",{className:"font-mono",children:"1,-3,2"}),")"]}),P.jsx("input",{value:o,onChange:O=>l(O.target.value),className:`w-full mb-3 px-4 py-2 rounded-xl border ${r?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`}),P.jsx("button",{onClick:te,className:`w-full py-3 rounded-xl font-semibold ${z}`,children:" "}),h&&P.jsx("p",{className:"text-sm text-red-400 mt-3",children:h}),u.length>0&&P.jsx("ul",{className:"mt-4 space-y-1 text-sm font-mono",children:u.map((O,ne)=>P.jsxs("li",{children:["x",ne+1," = ",O]},ne))})]}),I==="derivative"&&P.jsxs("div",{children:[P.jsx("h2",{className:"text-xl font-bold mb-4",children:" "}),P.jsx("input",{value:f,onChange:O=>p(O.target.value),className:`w-full mb-3 px-4 py-2 rounded-xl border ${r?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"f(x) = "}),P.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[P.jsx("label",{className:"text-sm",children:""}),P.jsx("input",{value:g,onChange:O=>b(O.target.value),className:`w-20 text-center px-2 py-2 rounded-xl border ${r?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`}),P.jsxs("button",{onClick:ce,className:`flex-1 min-w-[140px] py-2 rounded-xl font-semibold ${z}`,children:["d/d",g]})]}),v&&P.jsx("p",{className:"text-sm font-mono text-green-400",children:v})]}),I==="integral"&&P.jsxs("div",{children:[P.jsx("h2",{className:"text-xl font-bold mb-4",children:" "}),P.jsx("input",{value:y,onChange:O=>A(O.target.value),className:`w-full mb-3 px-4 py-2 rounded-xl border ${r?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"f(x)"}),P.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[P.jsx("label",{className:"text-sm",children:""}),P.jsx("input",{value:w,onChange:O=>_(O.target.value),className:`w-24 text-center px-3 py-2 rounded-xl border ${r?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`}),P.jsx("input",{value:S.from,onChange:O=>E(ne=>({...ne,from:O.target.value})),className:`flex-1 min-w-[140px] px-3 py-2 rounded-xl border ${r?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:""}),P.jsx("input",{value:S.to,onChange:O=>E(ne=>({...ne,to:O.target.value})),className:`flex-1 min-w-[140px] px-3 py-2 rounded-xl border ${r?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:""})]}),P.jsx("button",{onClick:re,className:`w-full py-3 rounded-xl font-semibold ${z}`,children:" "}),D&&P.jsx("p",{className:"text-sm text-red-400 mt-3",children:D}),C&&P.jsx("p",{className:"text-sm font-mono text-green-400 mt-3",children:C})]}),I==="guide"&&P.jsxs("div",{children:[P.jsx("h2",{className:"text-xl font-bold mb-3",children:"  "}),P.jsxs("ul",{className:`text-sm space-y-2 ${r?"text-gray-300":"text-gray-600"}`,children:[P.jsx("li",{children:"   (: (3+4i)*(2-i))"}),P.jsx("li",{children:"   ( 10, Durand-Kerner )"}),P.jsx("li",{children:"   (math.js )"}),P.jsx("li",{children:"   (Simpson rule)"}),P.jsx("li",{children:"    : , e, i, trig/log, pow"})]})]})]})]})})]})}const BT=r=>{const e=r.code||r.message;return{"auth/email-already-in-use":"  .","auth/invalid-email":"   .","auth/weak-password":"  . ( 6)","auth/user-not-found":"  .","auth/wrong-password":" .","auth/too-many-requests":"   .    .","auth/network-request-failed":"  ."}[e]||r.message||"  ."},u4e=async(r,e,t)=>{try{const n=JSON.parse(localStorage.getItem("firebaseUsers")||"{}"),i=btoa(r);if(n[i])throw new Error("  .");await sK(cT,FF);let s=null,a=!1;try{s=(await Promise.race([tme(cT,r,e),new Promise((u,c)=>setTimeout(()=>c(new Error("Firebase timeout")),5e3))])).user}catch(l){if(console.warn("Firebase  :",BT(l)),l.code==="auth/email-already-in-use")throw l;a=!0}const o={uid:(s==null?void 0:s.uid)||"local-"+Date.now(),email:r,password:btoa(e),username:t.username,affiliation:t.affiliation||"",bio:"",created_at:new Date().toISOString(),isLocal:a||!s};return n[i]=o,localStorage.setItem("firebaseUsers",JSON.stringify(n)),{uid:o.uid,email:o.email,username:o.username,isLocal:o.isLocal}}catch(n){throw console.error(" :",n),new Error(BT(n))}},c4e=async(r,e)=>{try{await sK(cT,FF);let t=null,n=!1;try{t=(await Promise.race([rme(cT,r,e),new Promise((s,a)=>setTimeout(()=>a(new Error("Firebase timeout")),5e3))])).user}catch(i){console.warn("Firebase  ,   :",BT(i));const s=JSON.parse(localStorage.getItem("firebaseUsers")||"{}"),a=btoa(r);if(s[a]){const o=s[a];if(btoa(e)===o.password)n=!0,t={uid:o.uid,email:o.email,displayName:o.username};else throw new Error(" .")}else throw new Error("  .")}if(!t)throw new Error(" ");return{uid:t.uid,email:t.email,username:t.displayName||r.split("@")[0],isLocal:n}}catch(t){throw console.error(" :",t),new Error(BT(t))}},h4e=r=>{localStorage.setItem("currentUser",JSON.stringify(r)),localStorage.setItem("authToken",r.uid)};function d4e(){const r=H0(),{isDark:e}=bo(),[t,n]=ue.useState({email:"",password:""}),[i,s]=ue.useState(""),[a,o]=ue.useState(!1),l="auto",u=h=>{const{name:d,value:f}=h.target;n(p=>({...p,[d]:f})),s("")},c=async h=>{h.preventDefault(),o(!0),s("");try{if(!t.email||!t.password){s("  ."),o(!1);return}if(!t.email.includes("@")){s("   ."),o(!1);return}let d=null;if(l==="auto"||l==="firebase")try{d=await c4e(t.email,t.password);const f={uid:d.uid,email:d.email,username:d.username,role:"user",authProvider:d.isLocal?"firebase-local":"firebase"};h4e(f),localStorage.setItem("user",JSON.stringify(f)),localStorage.setItem("authToken",d.uid),localStorage.setItem("isAuthenticated","true"),console.log(`   (${d.isLocal?" ":"Firebase"}):`),window.dispatchEvent(new Event("auth-change")),setTimeout(()=>r("/"),500);return}catch(f){console.warn("Firebase  :",f.message)}s(" :     .")}catch(d){console.error(" :",d),s("   .")}finally{o(!1)}};return P.jsx("div",{className:`min-h-screen flex items-center justify-center px-4 sm:px-6 lg:px-8 transition-colors duration-200 ${e?"bg-gray-900":"bg-gray-50"}`,children:P.jsxs(Qe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:`w-full max-w-md space-y-8 rounded-lg shadow-lg p-8 transition-colors duration-200 ${e?"bg-gray-800":"bg-white"}`,children:[P.jsxs("div",{className:"text-center",children:[P.jsx(Qe.h1,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.1},className:`text-3xl font-bold mb-2 transition-colors duration-200 ${e?"text-white":"text-gray-900"}`,children:""}),P.jsx(Qe.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:"   "})]}),i&&P.jsx(Qe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`p-3 rounded-lg text-sm border-l-4 transition-colors duration-200 ${e?"bg-red-900/30 border-red-600 text-red-200":"bg-red-50 border-red-500 text-red-800"}`,children:i}),P.jsxs(Qe.form,{onSubmit:c,className:"space-y-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.3},children:[P.jsxs("div",{children:[P.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),P.jsx(Qe.input,{whileFocus:{scale:1.02},type:"email",id:"email",name:"email",value:t.email,onChange:u,placeholder:"your@example.com",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"}`})]}),P.jsxs("div",{children:[P.jsx("label",{htmlFor:"password",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),P.jsx(Qe.input,{whileFocus:{scale:1.02},type:"password",id:"password",name:"password",value:t.password,onChange:u,placeholder:"",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"}`})]}),P.jsx(Qe.button,{type:"submit",disabled:a,whileHover:{scale:1.02},whileTap:{scale:.98},className:`w-full py-2 px-4 rounded-lg font-medium text-white transition-all duration-200 ${a?"bg-blue-400 cursor-not-allowed opacity-50":"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800"}`,children:a?" ...":""})]}),P.jsxs(Qe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},className:`text-center text-sm transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:[" ?"," ",P.jsx(Cr,{to:"/signup",className:"text-blue-600 hover:text-blue-700 font-medium",children:""})]})]})})}function f4e(){const r=H0(),{isDark:e}=bo(),[t,n]=ue.useState({username:"",email:"",password:"",confirmPassword:"",affiliation:"",agreeTerms:!1}),[i,s]=ue.useState({}),[a,o]=ue.useState(!1),[l,u]=ue.useState(""),c="auto",h=p=>{const{name:g,value:b,type:v,checked:x}=p.target;n(y=>({...y,[g]:v==="checkbox"?x:b})),i[g]&&s(y=>({...y,[g]:""}))},d=()=>{const p={};return t.username.trim()?t.username.length<3&&(p.username=" 3  ."):p.username=" .",t.email?t.email.includes("@")||(p.email="   ."):p.email=" .",t.password?t.password.length<8?p.password=" 8  .":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(t.password)||(p.password=" , ,   ."):p.password=" .",t.password!==t.confirmPassword&&(p.confirmPassword="  ."),t.agreeTerms||(p.agreeTerms=" ."),p},f=async p=>{p.preventDefault();const g=d();if(Object.keys(g).length>0){s(g);return}o(!0),u("");try{let b=!1,v=null;if(c==="auto"||c==="firebase")try{const x=await u4e(t.email,t.password,{username:t.username,affiliation:t.affiliation});console.log("  :",x.username),b=!0}catch(x){console.warn("Firebase  :",x.message),v=x.message}if(!b&&(c==="auto"||c==="local")){const x=JSON.parse(localStorage.getItem("firebaseUsers")||"{}"),y=btoa(t.email);if(x[y]){s({submit:"  ."}),o(!1);return}const A={uid:"local-"+Date.now(),email:t.email,password:btoa(t.password),username:t.username,affiliation:t.affiliation||"",bio:"",created_at:new Date().toISOString(),isLocal:!0};x[y]=A,localStorage.setItem("firebaseUsers",JSON.stringify(x)),console.log("    "),b=!0}b&&(u(" .   ..."),setTimeout(()=>{r("/login")},2e3))}catch(b){console.error(" :",b),s({submit:"   .  ."})}finally{o(!1)}};return P.jsx("div",{className:`min-h-screen flex items-center justify-center px-4 sm:px-6 lg:px-8 transition-colors duration-200 ${e?"bg-gray-900":"bg-gray-50"}`,children:P.jsxs(Qe.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:`w-full max-w-md space-y-8 rounded-lg shadow-lg p-8 transition-colors duration-200 ${e?"bg-gray-800":"bg-white"}`,children:[P.jsxs("div",{className:"text-center",children:[P.jsx(Qe.h1,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.1},className:`text-3xl font-bold mb-2 transition-colors duration-200 ${e?"text-white":"text-gray-900"}`,children:""}),P.jsx(Qe.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:"   "})]}),l&&P.jsx(Qe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg dark:bg-green-900 dark:border-green-700 dark:text-green-200",children:l}),i.submit&&P.jsx(Qe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg dark:bg-red-900 dark:border-red-700 dark:text-red-200",children:i.submit}),P.jsxs(Qe.form,{onSubmit:f,className:"space-y-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.3},children:[P.jsxs("div",{children:[P.jsx("label",{htmlFor:"username",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),P.jsx(Qe.input,{whileFocus:{scale:1.02},type:"text",id:"username",name:"username",value:t.username,onChange:h,placeholder:"  ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.username?"border-red-500":""}`}),i.username&&P.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.username})]}),P.jsxs("div",{children:[P.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),P.jsx(Qe.input,{whileFocus:{scale:1.02},type:"email",id:"email",name:"email",value:t.email,onChange:h,placeholder:"your@institution.edu",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.email?"border-red-500":""}`}),i.email&&P.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.email})]}),P.jsxs("div",{children:[P.jsx("label",{htmlFor:"affiliation",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:"  ()"}),P.jsx(Qe.input,{whileFocus:{scale:1.02},type:"text",id:"affiliation",name:"affiliation",value:t.affiliation,onChange:h,placeholder:",  ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"}`})]}),P.jsxs("div",{children:[P.jsx("label",{htmlFor:"password",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),P.jsx(Qe.input,{whileFocus:{scale:1.02},type:"password",id:"password",name:"password",value:t.password,onChange:h,placeholder:"",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.password?"border-red-500":""}`}),P.jsx("p",{className:`text-xs mt-1 transition-colors duration-200 ${e?"text-gray-400":"text-gray-500"}`,children:" 8, // "}),i.password&&P.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.password})]}),P.jsxs("div",{children:[P.jsx("label",{htmlFor:"confirmPassword",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:" "}),P.jsx(Qe.input,{whileFocus:{scale:1.02},type:"password",id:"confirmPassword",name:"confirmPassword",value:t.confirmPassword,onChange:h,placeholder:"",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.confirmPassword?"border-red-500":""}`}),i.confirmPassword&&P.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.confirmPassword})]}),P.jsxs("div",{className:"flex items-center",children:[P.jsx("input",{type:"checkbox",id:"agreeTerms",name:"agreeTerms",checked:t.agreeTerms,onChange:h,className:"h-4 w-4 rounded"}),P.jsx("label",{htmlFor:"agreeTerms",className:`ml-3 text-sm transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:"   "})]}),i.agreeTerms&&P.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.agreeTerms}),P.jsx(Qe.button,{type:"submit",disabled:a,whileHover:{scale:1.02},whileTap:{scale:.98},className:`w-full py-2 px-4 rounded-lg font-medium text-white transition-all duration-200 ${a?"bg-blue-400 cursor-not-allowed opacity-50":"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800"}`,children:a?" ...":""})]}),P.jsxs(Qe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},className:`text-center text-sm transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:["  ?"," ",P.jsx(Cr,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-medium",children:""})]})]})})}const Hy=({children:r})=>rM()?r:P.jsx(ite,{to:"/login",replace:!0});function m4e(){return P.jsx(yte,{children:P.jsx(mte,{basename:"/1201-project/",children:P.jsxs(ote,{children:[P.jsx(gi,{path:"/login",element:P.jsx(d4e,{})}),P.jsx(gi,{path:"/signup",element:P.jsx(f4e,{})}),P.jsxs(gi,{element:P.jsx(Ste,{}),children:[P.jsx(gi,{path:"/",element:P.jsx(sae,{})}),P.jsx(gi,{path:"/concepts",element:P.jsx(aae,{})}),P.jsx(gi,{path:"/concepts/:slug",element:P.jsx(lae,{})}),P.jsx(gi,{path:"/papers",element:P.jsx(Kpe,{})}),P.jsx(gi,{path:"/whiteboard",element:P.jsx(uge,{})}),P.jsx(gi,{path:"/calculator",element:P.jsx(l4e,{})}),P.jsx(gi,{path:"/forum",element:P.jsx(Hy,{children:P.jsx(Xpe,{})})}),P.jsx(gi,{path:"/forum/:postId",element:P.jsx(Hy,{children:P.jsx(Ype,{})})}),P.jsx(gi,{path:"/profile",element:P.jsx(Hy,{children:P.jsx(Zpe,{})})}),P.jsx(gi,{path:"/bookmarks",element:P.jsx(Hy,{children:P.jsx(ege,{})})}),P.jsx(gi,{path:"/notes",element:P.jsx(Hy,{children:P.jsx(tge,{})})}),P.jsx(gi,{path:"/glossary",element:P.jsx(Qpe,{})}),P.jsx(gi,{path:"/references",element:P.jsx(Jpe,{})})]})]})})})}a2.createRoot(document.getElementById("root")).render(P.jsx(VU.StrictMode,{children:P.jsx(m4e,{})}));
