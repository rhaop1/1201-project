var FQ=Object.defineProperty;var c3=r=>{throw TypeError(r)};var OQ=(r,e,t)=>e in r?FQ(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Pe=(r,e,t)=>OQ(r,typeof e!="symbol"?e+"":e,t),kN=(r,e,t)=>e.has(r)||c3("Cannot "+t);var m=(r,e,t)=>(kN(r,e,"read from private field"),t?t.call(r):e.get(r)),L=(r,e,t)=>e.has(r)?c3("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),k=(r,e,t,n)=>(kN(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),z=(r,e,t)=>(kN(r,e,"access private method"),t);var Ln=(r,e,t,n)=>({set _(i){k(r,e,i,t)},get _(){return m(r,e,n)}});function BQ(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var up=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tC(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function LQ(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var DU={exports:{}},rC={},MU={exports:{}},Ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dx=Symbol.for("react.element"),$Q=Symbol.for("react.portal"),VQ=Symbol.for("react.fragment"),UQ=Symbol.for("react.strict_mode"),zQ=Symbol.for("react.profiler"),jQ=Symbol.for("react.provider"),qQ=Symbol.for("react.context"),HQ=Symbol.for("react.forward_ref"),GQ=Symbol.for("react.suspense"),WQ=Symbol.for("react.memo"),KQ=Symbol.for("react.lazy"),h3=Symbol.iterator;function XQ(r){return r===null||typeof r!="object"?null:(r=h3&&r[h3]||r["@@iterator"],typeof r=="function"?r:null)}var IU={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},PU=Object.assign,RU={};function B0(r,e,t){this.props=r,this.context=e,this.refs=RU,this.updater=t||IU}B0.prototype.isReactComponent={};B0.prototype.setState=function(r,e){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,e,"setState")};B0.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function kU(){}kU.prototype=B0.prototype;function WP(r,e,t){this.props=r,this.context=e,this.refs=RU,this.updater=t||IU}var KP=WP.prototype=new kU;KP.constructor=WP;PU(KP,B0.prototype);KP.isPureReactComponent=!0;var d3=Array.isArray,FU=Object.prototype.hasOwnProperty,XP={current:null},OU={key:!0,ref:!0,__self:!0,__source:!0};function BU(r,e,t){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)FU.call(e,n)&&!OU.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=t;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(r&&r.defaultProps)for(n in o=r.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:Dx,type:r,key:s,ref:a,props:i,_owner:XP.current}}function YQ(r,e){return{$$typeof:Dx,type:r.type,key:e,ref:r.ref,props:r.props,_owner:r._owner}}function YP(r){return typeof r=="object"&&r!==null&&r.$$typeof===Dx}function QQ(r){var e={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(t){return e[t]})}var f3=/\/+/g;function FN(r,e){return typeof r=="object"&&r!==null&&r.key!=null?QQ(""+r.key):e.toString(36)}function zA(r,e,t,n,i){var s=typeof r;(s==="undefined"||s==="boolean")&&(r=null);var a=!1;if(r===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(r.$$typeof){case Dx:case $Q:a=!0}}if(a)return a=r,i=i(a),r=n===""?"."+FN(a,0):n,d3(i)?(t="",r!=null&&(t=r.replace(f3,"$&/")+"/"),zA(i,e,t,"",function(u){return u})):i!=null&&(YP(i)&&(i=YQ(i,t+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(f3,"$&/")+"/")+r)),e.push(i)),1;if(a=0,n=n===""?".":n+":",d3(r))for(var o=0;o<r.length;o++){s=r[o];var l=n+FN(s,o);a+=zA(s,e,t,l,i)}else if(l=XQ(r),typeof l=="function")for(r=l.call(r),o=0;!(s=r.next()).done;)s=s.value,l=n+FN(s,o++),a+=zA(s,e,t,l,i);else if(s==="object")throw e=String(r),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function V_(r,e,t){if(r==null)return r;var n=[],i=0;return zA(r,n,"","",function(s){return e.call(t,s,i++)}),n}function JQ(r){if(r._status===-1){var e=r._result;e=e(),e.then(function(t){(r._status===0||r._status===-1)&&(r._status=1,r._result=t)},function(t){(r._status===0||r._status===-1)&&(r._status=2,r._result=t)}),r._status===-1&&(r._status=0,r._result=e)}if(r._status===1)return r._result.default;throw r._result}var Cs={current:null},jA={transition:null},ZQ={ReactCurrentDispatcher:Cs,ReactCurrentBatchConfig:jA,ReactCurrentOwner:XP};function LU(){throw Error("act(...) is not supported in production builds of React.")}Ut.Children={map:V_,forEach:function(r,e,t){V_(r,function(){e.apply(this,arguments)},t)},count:function(r){var e=0;return V_(r,function(){e++}),e},toArray:function(r){return V_(r,function(e){return e})||[]},only:function(r){if(!YP(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};Ut.Component=B0;Ut.Fragment=VQ;Ut.Profiler=zQ;Ut.PureComponent=WP;Ut.StrictMode=UQ;Ut.Suspense=GQ;Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZQ;Ut.act=LU;Ut.cloneElement=function(r,e,t){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var n=PU({},r.props),i=r.key,s=r.ref,a=r._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=XP.current),e.key!==void 0&&(i=""+e.key),r.type&&r.type.defaultProps)var o=r.type.defaultProps;for(l in e)FU.call(e,l)&&!OU.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=t;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Dx,type:r.type,key:i,ref:s,props:n,_owner:a}};Ut.createContext=function(r){return r={$$typeof:qQ,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:jQ,_context:r},r.Consumer=r};Ut.createElement=BU;Ut.createFactory=function(r){var e=BU.bind(null,r);return e.type=r,e};Ut.createRef=function(){return{current:null}};Ut.forwardRef=function(r){return{$$typeof:HQ,render:r}};Ut.isValidElement=YP;Ut.lazy=function(r){return{$$typeof:KQ,_payload:{_status:-1,_result:r},_init:JQ}};Ut.memo=function(r,e){return{$$typeof:WQ,type:r,compare:e===void 0?null:e}};Ut.startTransition=function(r){var e=jA.transition;jA.transition={};try{r()}finally{jA.transition=e}};Ut.unstable_act=LU;Ut.useCallback=function(r,e){return Cs.current.useCallback(r,e)};Ut.useContext=function(r){return Cs.current.useContext(r)};Ut.useDebugValue=function(){};Ut.useDeferredValue=function(r){return Cs.current.useDeferredValue(r)};Ut.useEffect=function(r,e){return Cs.current.useEffect(r,e)};Ut.useId=function(){return Cs.current.useId()};Ut.useImperativeHandle=function(r,e,t){return Cs.current.useImperativeHandle(r,e,t)};Ut.useInsertionEffect=function(r,e){return Cs.current.useInsertionEffect(r,e)};Ut.useLayoutEffect=function(r,e){return Cs.current.useLayoutEffect(r,e)};Ut.useMemo=function(r,e){return Cs.current.useMemo(r,e)};Ut.useReducer=function(r,e,t){return Cs.current.useReducer(r,e,t)};Ut.useRef=function(r){return Cs.current.useRef(r)};Ut.useState=function(r){return Cs.current.useState(r)};Ut.useSyncExternalStore=function(r,e,t){return Cs.current.useSyncExternalStore(r,e,t)};Ut.useTransition=function(){return Cs.current.useTransition()};Ut.version="18.3.1";MU.exports=Ut;var se=MU.exports;const $U=tC(se),eJ=BQ({__proto__:null,default:$U},[se]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tJ=se,rJ=Symbol.for("react.element"),nJ=Symbol.for("react.fragment"),iJ=Object.prototype.hasOwnProperty,sJ=tJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aJ={key:!0,ref:!0,__self:!0,__source:!0};function VU(r,e,t){var n,i={},s=null,a=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)iJ.call(e,n)&&!aJ.hasOwnProperty(n)&&(i[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:rJ,type:r,key:s,ref:a,props:i,_owner:sJ.current}}rC.Fragment=nJ;rC.jsx=VU;rC.jsxs=VU;DU.exports=rC;var P=DU.exports,iD={},UU={exports:{}},Pa={},zU={exports:{}},jU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function e(j,G){var ee=j.length;j.push(G);e:for(;0<ee;){var ue=ee-1>>>1,te=j[ue];if(0<i(te,G))j[ue]=G,j[ee]=te,ee=ue;else break e}}function t(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var G=j[0],ee=j.pop();if(ee!==G){j[0]=ee;e:for(var ue=0,te=j.length,R=te>>>1;ue<R;){var Y=2*(ue+1)-1,H=j[Y],he=Y+1,fe=j[he];if(0>i(H,ee))he<te&&0>i(fe,H)?(j[ue]=fe,j[he]=ee,ue=he):(j[ue]=H,j[Y]=ee,ue=Y);else if(he<te&&0>i(fe,ee))j[ue]=fe,j[he]=ee,ue=he;else break e}}return G}function i(j,G){var ee=j.sortIndex-G.sortIndex;return ee!==0?ee:j.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();r.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,h=null,d=3,f=!1,p=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(j){for(var G=t(u);G!==null;){if(G.callback===null)n(u);else if(G.startTime<=j)n(u),G.sortIndex=G.expirationTime,e(l,G);else break;G=t(u)}}function A(j){if(g=!1,y(j),!p)if(t(l)!==null)p=!0,F(x);else{var G=t(u);G!==null&&U(A,G.startTime-j)}}function x(j,G){p=!1,g&&(g=!1,v(E),E=-1),f=!0;var ee=d;try{for(y(G),h=t(l);h!==null&&(!(h.expirationTime>G)||j&&!D());){var ue=h.callback;if(typeof ue=="function"){h.callback=null,d=h.priorityLevel;var te=ue(h.expirationTime<=G);G=r.unstable_now(),typeof te=="function"?h.callback=te:h===t(l)&&n(l),y(G)}else n(l);h=t(l)}if(h!==null)var R=!0;else{var Y=t(u);Y!==null&&U(A,Y.startTime-G),R=!1}return R}finally{h=null,d=ee,f=!1}}var _=!1,S=null,E=-1,C=5,N=-1;function D(){return!(r.unstable_now()-N<C)}function M(){if(S!==null){var j=r.unstable_now();N=j;var G=!0;try{G=S(!0,j)}finally{G?I():(_=!1,S=null)}}else _=!1}var I;if(typeof w=="function")I=function(){w(M)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,K=V.port2;V.port1.onmessage=M,I=function(){K.postMessage(null)}}else I=function(){b(M,0)};function F(j){S=j,_||(_=!0,I())}function U(j,G){E=b(function(){j(r.unstable_now())},G)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(j){j.callback=null},r.unstable_continueExecution=function(){p||f||(p=!0,F(x))},r.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<j?Math.floor(1e3/j):5},r.unstable_getCurrentPriorityLevel=function(){return d},r.unstable_getFirstCallbackNode=function(){return t(l)},r.unstable_next=function(j){switch(d){case 1:case 2:case 3:var G=3;break;default:G=d}var ee=d;d=G;try{return j()}finally{d=ee}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(j,G){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ee=d;d=j;try{return G()}finally{d=ee}},r.unstable_scheduleCallback=function(j,G,ee){var ue=r.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ue+ee:ue):ee=ue,j){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=ee+te,j={id:c++,callback:G,priorityLevel:j,startTime:ee,expirationTime:te,sortIndex:-1},ee>ue?(j.sortIndex=ee,e(u,j),t(l)===null&&j===t(u)&&(g?(v(E),E=-1):g=!0,U(A,ee-ue))):(j.sortIndex=te,e(l,j),p||f||(p=!0,F(x))),j},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(j){var G=d;return function(){var ee=d;d=G;try{return j.apply(this,arguments)}finally{d=ee}}}})(jU);zU.exports=jU;var oJ=zU.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lJ=se,Ma=oJ;function Fe(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qU=new Set,Wb={};function cp(r,e){m0(r,e),m0(r+"Capture",e)}function m0(r,e){for(Wb[r]=e,r=0;r<e.length;r++)qU.add(e[r])}var mc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sD=Object.prototype.hasOwnProperty,uJ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m3={},p3={};function cJ(r){return sD.call(p3,r)?!0:sD.call(m3,r)?!1:uJ.test(r)?p3[r]=!0:(m3[r]=!0,!1)}function hJ(r,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function dJ(r,e,t,n){if(e===null||typeof e>"u"||hJ(r,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ns(r,e,t,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var ki={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){ki[r]=new Ns(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=r[0];ki[e]=new Ns(e,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){ki[r]=new Ns(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){ki[r]=new Ns(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){ki[r]=new Ns(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){ki[r]=new Ns(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){ki[r]=new Ns(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){ki[r]=new Ns(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){ki[r]=new Ns(r,5,!1,r.toLowerCase(),null,!1,!1)});var QP=/[\-:]([a-z])/g;function JP(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var e=r.replace(QP,JP);ki[e]=new Ns(e,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var e=r.replace(QP,JP);ki[e]=new Ns(e,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(QP,JP);ki[e]=new Ns(e,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){ki[r]=new Ns(r,1,!1,r.toLowerCase(),null,!1,!1)});ki.xlinkHref=new Ns("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){ki[r]=new Ns(r,1,!1,r.toLowerCase(),null,!0,!0)});function ZP(r,e,t,n){var i=ki.hasOwnProperty(e)?ki[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dJ(e,t,i,n)&&(t=null),n||i===null?cJ(e)&&(t===null?r.removeAttribute(e):r.setAttribute(e,""+t)):i.mustUseProperty?r[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,n=i.attributeNamespace,t===null?r.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,n?r.setAttributeNS(n,e,t):r.setAttribute(e,t))))}var Mc=lJ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U_=Symbol.for("react.element"),eg=Symbol.for("react.portal"),tg=Symbol.for("react.fragment"),eR=Symbol.for("react.strict_mode"),aD=Symbol.for("react.profiler"),HU=Symbol.for("react.provider"),GU=Symbol.for("react.context"),tR=Symbol.for("react.forward_ref"),oD=Symbol.for("react.suspense"),lD=Symbol.for("react.suspense_list"),rR=Symbol.for("react.memo"),Hc=Symbol.for("react.lazy"),WU=Symbol.for("react.offscreen"),g3=Symbol.iterator;function Cy(r){return r===null||typeof r!="object"?null:(r=g3&&r[g3]||r["@@iterator"],typeof r=="function"?r:null)}var tn=Object.assign,ON;function Hy(r){if(ON===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);ON=e&&e[1]||""}return`
`+ON+r}var BN=!1;function LN(r,e){if(!r||BN)return"";BN=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(r,[],e)}else{try{e.call()}catch(u){n=u}r.call(e.prototype)}else{try{throw Error()}catch(u){n=u}r()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return r.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",r.displayName)),l}while(1<=a&&0<=o);break}}}finally{BN=!1,Error.prepareStackTrace=t}return(r=r?r.displayName||r.name:"")?Hy(r):""}function fJ(r){switch(r.tag){case 5:return Hy(r.type);case 16:return Hy("Lazy");case 13:return Hy("Suspense");case 19:return Hy("SuspenseList");case 0:case 2:case 15:return r=LN(r.type,!1),r;case 11:return r=LN(r.type.render,!1),r;case 1:return r=LN(r.type,!0),r;default:return""}}function uD(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case tg:return"Fragment";case eg:return"Portal";case aD:return"Profiler";case eR:return"StrictMode";case oD:return"Suspense";case lD:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case GU:return(r.displayName||"Context")+".Consumer";case HU:return(r._context.displayName||"Context")+".Provider";case tR:var e=r.render;return r=r.displayName,r||(r=e.displayName||e.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case rR:return e=r.displayName||null,e!==null?e:uD(r.type)||"Memo";case Hc:e=r._payload,r=r._init;try{return uD(r(e))}catch{}}return null}function mJ(r){var e=r.type;switch(r.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=e.render,r=r.displayName||r.name||"",e.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uD(e);case 8:return e===eR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fd(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function KU(r){var e=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pJ(r){var e=KU(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),n=""+r[e];if(!r.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function z_(r){r._valueTracker||(r._valueTracker=pJ(r))}function XU(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return r&&(n=KU(r)?r.checked?"true":"false":r.value),r=n,r!==t?(e.setValue(r),!0):!1}function JE(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function cD(r,e){var t=e.checked;return tn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??r._wrapperState.initialChecked})}function v3(r,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=fd(e.value!=null?e.value:t),r._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function YU(r,e){e=e.checked,e!=null&&ZP(r,"checked",e,!1)}function hD(r,e){YU(r,e);var t=fd(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&r.value===""||r.value!=t)&&(r.value=""+t):r.value!==""+t&&(r.value=""+t);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}e.hasOwnProperty("value")?dD(r,e.type,t):e.hasOwnProperty("defaultValue")&&dD(r,e.type,fd(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(r.defaultChecked=!!e.defaultChecked)}function y3(r,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+r._wrapperState.initialValue,t||e===r.value||(r.value=e),r.defaultValue=e}t=r.name,t!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,t!==""&&(r.name=t)}function dD(r,e,t){(e!=="number"||JE(r.ownerDocument)!==r)&&(t==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+t&&(r.defaultValue=""+t))}var Gy=Array.isArray;function Ng(r,e,t,n){if(r=r.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<r.length;t++)i=e.hasOwnProperty("$"+r[t].value),r[t].selected!==i&&(r[t].selected=i),i&&n&&(r[t].defaultSelected=!0)}else{for(t=""+fd(t),e=null,i=0;i<r.length;i++){if(r[i].value===t){r[i].selected=!0,n&&(r[i].defaultSelected=!0);return}e!==null||r[i].disabled||(e=r[i])}e!==null&&(e.selected=!0)}}function fD(r,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return tn({},e,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function b3(r,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Fe(92));if(Gy(t)){if(1<t.length)throw Error(Fe(93));t=t[0]}e=t}e==null&&(e=""),t=e}r._wrapperState={initialValue:fd(t)}}function QU(r,e){var t=fd(e.value),n=fd(e.defaultValue);t!=null&&(t=""+t,t!==r.value&&(r.value=t),e.defaultValue==null&&r.defaultValue!==t&&(r.defaultValue=t)),n!=null&&(r.defaultValue=""+n)}function w3(r){var e=r.textContent;e===r._wrapperState.initialValue&&e!==""&&e!==null&&(r.value=e)}function JU(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mD(r,e){return r==null||r==="http://www.w3.org/1999/xhtml"?JU(e):r==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var j_,ZU=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return r(e,t,n,i)})}:r}(function(r,e){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=e;else{for(j_=j_||document.createElement("div"),j_.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=j_.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;e.firstChild;)r.appendChild(e.firstChild)}});function Kb(r,e){if(e){var t=r.firstChild;if(t&&t===r.lastChild&&t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var Sb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gJ=["Webkit","ms","Moz","O"];Object.keys(Sb).forEach(function(r){gJ.forEach(function(e){e=e+r.charAt(0).toUpperCase()+r.substring(1),Sb[e]=Sb[r]})});function e9(r,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Sb.hasOwnProperty(r)&&Sb[r]?(""+e).trim():e+"px"}function t9(r,e){r=r.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,i=e9(t,e[t],n);t==="float"&&(t="cssFloat"),n?r.setProperty(t,i):r[t]=i}}var vJ=tn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pD(r,e){if(e){if(vJ[r]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Fe(137,r));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Fe(62))}}function gD(r,e){if(r.indexOf("-")===-1)return typeof e.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vD=null;function nR(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var yD=null,Dg=null,Mg=null;function x3(r){if(r=Px(r)){if(typeof yD!="function")throw Error(Fe(280));var e=r.stateNode;e&&(e=oC(e),yD(r.stateNode,r.type,e))}}function r9(r){Dg?Mg?Mg.push(r):Mg=[r]:Dg=r}function n9(){if(Dg){var r=Dg,e=Mg;if(Mg=Dg=null,x3(r),e)for(r=0;r<e.length;r++)x3(e[r])}}function i9(r,e){return r(e)}function s9(){}var $N=!1;function a9(r,e,t){if($N)return r(e,t);$N=!0;try{return i9(r,e,t)}finally{$N=!1,(Dg!==null||Mg!==null)&&(s9(),n9())}}function Xb(r,e){var t=r.stateNode;if(t===null)return null;var n=oC(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(t&&typeof t!="function")throw Error(Fe(231,e,typeof t));return t}var bD=!1;if(mc)try{var Ny={};Object.defineProperty(Ny,"passive",{get:function(){bD=!0}}),window.addEventListener("test",Ny,Ny),window.removeEventListener("test",Ny,Ny)}catch{bD=!1}function yJ(r,e,t,n,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var Tb=!1,ZE=null,eS=!1,wD=null,bJ={onError:function(r){Tb=!0,ZE=r}};function wJ(r,e,t,n,i,s,a,o,l){Tb=!1,ZE=null,yJ.apply(bJ,arguments)}function xJ(r,e,t,n,i,s,a,o,l){if(wJ.apply(this,arguments),Tb){if(Tb){var u=ZE;Tb=!1,ZE=null}else throw Error(Fe(198));eS||(eS=!0,wD=u)}}function hp(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,e.flags&4098&&(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function o9(r){if(r.tag===13){var e=r.memoizedState;if(e===null&&(r=r.alternate,r!==null&&(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function _3(r){if(hp(r)!==r)throw Error(Fe(188))}function _J(r){var e=r.alternate;if(!e){if(e=hp(r),e===null)throw Error(Fe(188));return e!==r?null:r}for(var t=r,n=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){t=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return _3(i),r;if(s===n)return _3(i),e;s=s.sibling}throw Error(Fe(188))}if(t.return!==n.return)t=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===t){a=!0,t=i,n=s;break}if(o===n){a=!0,n=i,t=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===t){a=!0,t=s,n=i;break}if(o===n){a=!0,n=s,t=i;break}o=o.sibling}if(!a)throw Error(Fe(189))}}if(t.alternate!==n)throw Error(Fe(190))}if(t.tag!==3)throw Error(Fe(188));return t.stateNode.current===t?r:e}function l9(r){return r=_J(r),r!==null?u9(r):null}function u9(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var e=u9(r);if(e!==null)return e;r=r.sibling}return null}var c9=Ma.unstable_scheduleCallback,A3=Ma.unstable_cancelCallback,AJ=Ma.unstable_shouldYield,EJ=Ma.unstable_requestPaint,En=Ma.unstable_now,SJ=Ma.unstable_getCurrentPriorityLevel,iR=Ma.unstable_ImmediatePriority,h9=Ma.unstable_UserBlockingPriority,tS=Ma.unstable_NormalPriority,TJ=Ma.unstable_LowPriority,d9=Ma.unstable_IdlePriority,nC=null,$l=null;function CJ(r){if($l&&typeof $l.onCommitFiberRoot=="function")try{$l.onCommitFiberRoot(nC,r,void 0,(r.current.flags&128)===128)}catch{}}var Go=Math.clz32?Math.clz32:MJ,NJ=Math.log,DJ=Math.LN2;function MJ(r){return r>>>=0,r===0?32:31-(NJ(r)/DJ|0)|0}var q_=64,H_=4194304;function Wy(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function rS(r,e){var t=r.pendingLanes;if(t===0)return 0;var n=0,i=r.suspendedLanes,s=r.pingedLanes,a=t&268435455;if(a!==0){var o=a&~i;o!==0?n=Wy(o):(s&=a,s!==0&&(n=Wy(s)))}else a=t&~i,a!==0?n=Wy(a):s!==0&&(n=Wy(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=t&16),e=r.entangledLanes,e!==0)for(r=r.entanglements,e&=n;0<e;)t=31-Go(e),i=1<<t,n|=r[t],e&=~i;return n}function IJ(r,e){switch(r){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PJ(r,e){for(var t=r.suspendedLanes,n=r.pingedLanes,i=r.expirationTimes,s=r.pendingLanes;0<s;){var a=31-Go(s),o=1<<a,l=i[a];l===-1?(!(o&t)||o&n)&&(i[a]=IJ(o,e)):l<=e&&(r.expiredLanes|=o),s&=~o}}function xD(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function f9(){var r=q_;return q_<<=1,!(q_&4194240)&&(q_=64),r}function VN(r){for(var e=[],t=0;31>t;t++)e.push(r);return e}function Mx(r,e,t){r.pendingLanes|=e,e!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,e=31-Go(e),r[e]=t}function RJ(r,e){var t=r.pendingLanes&~e;r.pendingLanes=e,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=e,r.mutableReadLanes&=e,r.entangledLanes&=e,e=r.entanglements;var n=r.eventTimes;for(r=r.expirationTimes;0<t;){var i=31-Go(t),s=1<<i;e[i]=0,n[i]=-1,r[i]=-1,t&=~s}}function sR(r,e){var t=r.entangledLanes|=e;for(r=r.entanglements;t;){var n=31-Go(t),i=1<<n;i&e|r[n]&e&&(r[n]|=e),t&=~i}}var fr=0;function m9(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var p9,aR,g9,v9,y9,_D=!1,G_=[],Zh=null,ed=null,td=null,Yb=new Map,Qb=new Map,Xc=[],kJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function E3(r,e){switch(r){case"focusin":case"focusout":Zh=null;break;case"dragenter":case"dragleave":ed=null;break;case"mouseover":case"mouseout":td=null;break;case"pointerover":case"pointerout":Yb.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qb.delete(e.pointerId)}}function Dy(r,e,t,n,i,s){return r===null||r.nativeEvent!==s?(r={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Px(e),e!==null&&aR(e)),r):(r.eventSystemFlags|=n,e=r.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),r)}function FJ(r,e,t,n,i){switch(e){case"focusin":return Zh=Dy(Zh,r,e,t,n,i),!0;case"dragenter":return ed=Dy(ed,r,e,t,n,i),!0;case"mouseover":return td=Dy(td,r,e,t,n,i),!0;case"pointerover":var s=i.pointerId;return Yb.set(s,Dy(Yb.get(s)||null,r,e,t,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Qb.set(s,Dy(Qb.get(s)||null,r,e,t,n,i)),!0}return!1}function b9(r){var e=vf(r.target);if(e!==null){var t=hp(e);if(t!==null){if(e=t.tag,e===13){if(e=o9(t),e!==null){r.blockedOn=e,y9(r.priority,function(){g9(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function qA(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0<e.length;){var t=AD(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t===null){t=r.nativeEvent;var n=new t.constructor(t.type,t);vD=n,t.target.dispatchEvent(n),vD=null}else return e=Px(t),e!==null&&aR(e),r.blockedOn=t,!1;e.shift()}return!0}function S3(r,e,t){qA(r)&&t.delete(e)}function OJ(){_D=!1,Zh!==null&&qA(Zh)&&(Zh=null),ed!==null&&qA(ed)&&(ed=null),td!==null&&qA(td)&&(td=null),Yb.forEach(S3),Qb.forEach(S3)}function My(r,e){r.blockedOn===e&&(r.blockedOn=null,_D||(_D=!0,Ma.unstable_scheduleCallback(Ma.unstable_NormalPriority,OJ)))}function Jb(r){function e(i){return My(i,r)}if(0<G_.length){My(G_[0],r);for(var t=1;t<G_.length;t++){var n=G_[t];n.blockedOn===r&&(n.blockedOn=null)}}for(Zh!==null&&My(Zh,r),ed!==null&&My(ed,r),td!==null&&My(td,r),Yb.forEach(e),Qb.forEach(e),t=0;t<Xc.length;t++)n=Xc[t],n.blockedOn===r&&(n.blockedOn=null);for(;0<Xc.length&&(t=Xc[0],t.blockedOn===null);)b9(t),t.blockedOn===null&&Xc.shift()}var Ig=Mc.ReactCurrentBatchConfig,nS=!0;function BJ(r,e,t,n){var i=fr,s=Ig.transition;Ig.transition=null;try{fr=1,oR(r,e,t,n)}finally{fr=i,Ig.transition=s}}function LJ(r,e,t,n){var i=fr,s=Ig.transition;Ig.transition=null;try{fr=4,oR(r,e,t,n)}finally{fr=i,Ig.transition=s}}function oR(r,e,t,n){if(nS){var i=AD(r,e,t,n);if(i===null)YN(r,e,n,iS,t),E3(r,n);else if(FJ(i,r,e,t,n))n.stopPropagation();else if(E3(r,n),e&4&&-1<kJ.indexOf(r)){for(;i!==null;){var s=Px(i);if(s!==null&&p9(s),s=AD(r,e,t,n),s===null&&YN(r,e,n,iS,t),s===i)break;i=s}i!==null&&n.stopPropagation()}else YN(r,e,n,null,t)}}var iS=null;function AD(r,e,t,n){if(iS=null,r=nR(n),r=vf(r),r!==null)if(e=hp(r),e===null)r=null;else if(t=e.tag,t===13){if(r=o9(e),r!==null)return r;r=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;r=null}else e!==r&&(r=null);return iS=r,null}function w9(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SJ()){case iR:return 1;case h9:return 4;case tS:case TJ:return 16;case d9:return 536870912;default:return 16}default:return 16}}var Wh=null,lR=null,HA=null;function x9(){if(HA)return HA;var r,e=lR,t=e.length,n,i="value"in Wh?Wh.value:Wh.textContent,s=i.length;for(r=0;r<t&&e[r]===i[r];r++);var a=t-r;for(n=1;n<=a&&e[t-n]===i[s-n];n++);return HA=i.slice(r,1<n?1-n:void 0)}function GA(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}function W_(){return!0}function T3(){return!1}function Ra(r){function e(t,n,i,s,a){this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in r)r.hasOwnProperty(o)&&(t=r[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?W_:T3,this.isPropagationStopped=T3,this}return tn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=W_)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=W_)},persist:function(){},isPersistent:W_}),e}var L0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uR=Ra(L0),Ix=tn({},L0,{view:0,detail:0}),$J=Ra(Ix),UN,zN,Iy,iC=tn({},Ix,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cR,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Iy&&(Iy&&r.type==="mousemove"?(UN=r.screenX-Iy.screenX,zN=r.screenY-Iy.screenY):zN=UN=0,Iy=r),UN)},movementY:function(r){return"movementY"in r?r.movementY:zN}}),C3=Ra(iC),VJ=tn({},iC,{dataTransfer:0}),UJ=Ra(VJ),zJ=tn({},Ix,{relatedTarget:0}),jN=Ra(zJ),jJ=tn({},L0,{animationName:0,elapsedTime:0,pseudoElement:0}),qJ=Ra(jJ),HJ=tn({},L0,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),GJ=Ra(HJ),WJ=tn({},L0,{data:0}),N3=Ra(WJ),KJ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XJ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YJ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QJ(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=YJ[r])?!!e[r]:!1}function cR(){return QJ}var JJ=tn({},Ix,{key:function(r){if(r.key){var e=KJ[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=GA(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?XJ[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cR,charCode:function(r){return r.type==="keypress"?GA(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?GA(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),ZJ=Ra(JJ),eZ=tn({},iC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),D3=Ra(eZ),tZ=tn({},Ix,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cR}),rZ=Ra(tZ),nZ=tn({},L0,{propertyName:0,elapsedTime:0,pseudoElement:0}),iZ=Ra(nZ),sZ=tn({},iC,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),aZ=Ra(sZ),oZ=[9,13,27,32],hR=mc&&"CompositionEvent"in window,Cb=null;mc&&"documentMode"in document&&(Cb=document.documentMode);var lZ=mc&&"TextEvent"in window&&!Cb,_9=mc&&(!hR||Cb&&8<Cb&&11>=Cb),M3=" ",I3=!1;function A9(r,e){switch(r){case"keyup":return oZ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E9(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var rg=!1;function uZ(r,e){switch(r){case"compositionend":return E9(e);case"keypress":return e.which!==32?null:(I3=!0,M3);case"textInput":return r=e.data,r===M3&&I3?null:r;default:return null}}function cZ(r,e){if(rg)return r==="compositionend"||!hR&&A9(r,e)?(r=x9(),HA=lR=Wh=null,rg=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _9&&e.locale!=="ko"?null:e.data;default:return null}}var hZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function P3(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e==="input"?!!hZ[r.type]:e==="textarea"}function S9(r,e,t,n){r9(n),e=sS(e,"onChange"),0<e.length&&(t=new uR("onChange","change",null,t,n),r.push({event:t,listeners:e}))}var Nb=null,Zb=null;function dZ(r){O9(r,0)}function sC(r){var e=sg(r);if(XU(e))return r}function fZ(r,e){if(r==="change")return e}var T9=!1;if(mc){var qN;if(mc){var HN="oninput"in document;if(!HN){var R3=document.createElement("div");R3.setAttribute("oninput","return;"),HN=typeof R3.oninput=="function"}qN=HN}else qN=!1;T9=qN&&(!document.documentMode||9<document.documentMode)}function k3(){Nb&&(Nb.detachEvent("onpropertychange",C9),Zb=Nb=null)}function C9(r){if(r.propertyName==="value"&&sC(Zb)){var e=[];S9(e,Zb,r,nR(r)),a9(dZ,e)}}function mZ(r,e,t){r==="focusin"?(k3(),Nb=e,Zb=t,Nb.attachEvent("onpropertychange",C9)):r==="focusout"&&k3()}function pZ(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return sC(Zb)}function gZ(r,e){if(r==="click")return sC(e)}function vZ(r,e){if(r==="input"||r==="change")return sC(e)}function yZ(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Xo=typeof Object.is=="function"?Object.is:yZ;function e1(r,e){if(Xo(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var i=t[n];if(!sD.call(e,i)||!Xo(r[i],e[i]))return!1}return!0}function F3(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function O3(r,e){var t=F3(r);r=0;for(var n;t;){if(t.nodeType===3){if(n=r+t.textContent.length,r<=e&&n>=e)return{node:t,offset:e-r};r=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=F3(t)}}function N9(r,e){return r&&e?r===e?!0:r&&r.nodeType===3?!1:e&&e.nodeType===3?N9(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&16):!1:!1}function D9(){for(var r=window,e=JE();e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)r=e.contentWindow;else break;e=JE(r.document)}return e}function dR(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e&&(e==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}function bZ(r){var e=D9(),t=r.focusedElem,n=r.selectionRange;if(e!==t&&t&&t.ownerDocument&&N9(t.ownerDocument.documentElement,t)){if(n!==null&&dR(t)){if(e=n.start,r=n.end,r===void 0&&(r=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(r,t.value.length);else if(r=(e=t.ownerDocument||document)&&e.defaultView||window,r.getSelection){r=r.getSelection();var i=t.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!r.extend&&s>n&&(i=n,n=s,s=i),i=O3(t,s);var a=O3(t,n);i&&a&&(r.rangeCount!==1||r.anchorNode!==i.node||r.anchorOffset!==i.offset||r.focusNode!==a.node||r.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),r.removeAllRanges(),s>n?(r.addRange(e),r.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),r.addRange(e)))}}for(e=[],r=t;r=r.parentNode;)r.nodeType===1&&e.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)r=e[t],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var wZ=mc&&"documentMode"in document&&11>=document.documentMode,ng=null,ED=null,Db=null,SD=!1;function B3(r,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;SD||ng==null||ng!==JE(n)||(n=ng,"selectionStart"in n&&dR(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Db&&e1(Db,n)||(Db=n,n=sS(ED,"onSelect"),0<n.length&&(e=new uR("onSelect","select",null,e,t),r.push({event:e,listeners:n}),e.target=ng)))}function K_(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var ig={animationend:K_("Animation","AnimationEnd"),animationiteration:K_("Animation","AnimationIteration"),animationstart:K_("Animation","AnimationStart"),transitionend:K_("Transition","TransitionEnd")},GN={},M9={};mc&&(M9=document.createElement("div").style,"AnimationEvent"in window||(delete ig.animationend.animation,delete ig.animationiteration.animation,delete ig.animationstart.animation),"TransitionEvent"in window||delete ig.transitionend.transition);function aC(r){if(GN[r])return GN[r];if(!ig[r])return r;var e=ig[r],t;for(t in e)if(e.hasOwnProperty(t)&&t in M9)return GN[r]=e[t];return r}var I9=aC("animationend"),P9=aC("animationiteration"),R9=aC("animationstart"),k9=aC("transitionend"),F9=new Map,L3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Id(r,e){F9.set(r,e),cp(e,[r])}for(var WN=0;WN<L3.length;WN++){var KN=L3[WN],xZ=KN.toLowerCase(),_Z=KN[0].toUpperCase()+KN.slice(1);Id(xZ,"on"+_Z)}Id(I9,"onAnimationEnd");Id(P9,"onAnimationIteration");Id(R9,"onAnimationStart");Id("dblclick","onDoubleClick");Id("focusin","onFocus");Id("focusout","onBlur");Id(k9,"onTransitionEnd");m0("onMouseEnter",["mouseout","mouseover"]);m0("onMouseLeave",["mouseout","mouseover"]);m0("onPointerEnter",["pointerout","pointerover"]);m0("onPointerLeave",["pointerout","pointerover"]);cp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cp("onBeforeInput",["compositionend","keypress","textInput","paste"]);cp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ky="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AZ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ky));function $3(r,e,t){var n=r.type||"unknown-event";r.currentTarget=t,xJ(n,e,void 0,r),r.currentTarget=null}function O9(r,e){e=(e&4)!==0;for(var t=0;t<r.length;t++){var n=r[t],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;$3(i,o,u),s=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;$3(i,o,u),s=l}}}if(eS)throw r=wD,eS=!1,wD=null,r}function Br(r,e){var t=e[MD];t===void 0&&(t=e[MD]=new Set);var n=r+"__bubble";t.has(n)||(B9(e,r,2,!1),t.add(n))}function XN(r,e,t){var n=0;e&&(n|=4),B9(t,r,n,e)}var X_="_reactListening"+Math.random().toString(36).slice(2);function t1(r){if(!r[X_]){r[X_]=!0,qU.forEach(function(t){t!=="selectionchange"&&(AZ.has(t)||XN(t,!1,r),XN(t,!0,r))});var e=r.nodeType===9?r:r.ownerDocument;e===null||e[X_]||(e[X_]=!0,XN("selectionchange",!1,e))}}function B9(r,e,t,n){switch(w9(e)){case 1:var i=BJ;break;case 4:i=LJ;break;default:i=oR}t=i.bind(null,e,t,r),i=void 0,!bD||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?r.addEventListener(e,t,{capture:!0,passive:i}):r.addEventListener(e,t,!0):i!==void 0?r.addEventListener(e,t,{passive:i}):r.addEventListener(e,t,!1)}function YN(r,e,t,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=vf(o),a===null)return;if(l=a.tag,l===5||l===6){n=s=a;continue e}o=o.parentNode}}n=n.return}a9(function(){var u=s,c=nR(t),h=[];e:{var d=F9.get(r);if(d!==void 0){var f=uR,p=r;switch(r){case"keypress":if(GA(t)===0)break e;case"keydown":case"keyup":f=ZJ;break;case"focusin":p="focus",f=jN;break;case"focusout":p="blur",f=jN;break;case"beforeblur":case"afterblur":f=jN;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=C3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=UJ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=rZ;break;case I9:case P9:case R9:f=qJ;break;case k9:f=iZ;break;case"scroll":f=$J;break;case"wheel":f=aZ;break;case"copy":case"cut":case"paste":f=GJ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=D3}var g=(e&4)!==0,b=!g&&r==="scroll",v=g?d!==null?d+"Capture":null:d;g=[];for(var w=u,y;w!==null;){y=w;var A=y.stateNode;if(y.tag===5&&A!==null&&(y=A,v!==null&&(A=Xb(w,v),A!=null&&g.push(r1(w,A,y)))),b)break;w=w.return}0<g.length&&(d=new f(d,p,null,t,c),h.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=r==="mouseover"||r==="pointerover",f=r==="mouseout"||r==="pointerout",d&&t!==vD&&(p=t.relatedTarget||t.fromElement)&&(vf(p)||p[pc]))break e;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=t.relatedTarget||t.toElement,f=u,p=p?vf(p):null,p!==null&&(b=hp(p),p!==b||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(g=C3,A="onMouseLeave",v="onMouseEnter",w="mouse",(r==="pointerout"||r==="pointerover")&&(g=D3,A="onPointerLeave",v="onPointerEnter",w="pointer"),b=f==null?d:sg(f),y=p==null?d:sg(p),d=new g(A,w+"leave",f,t,c),d.target=b,d.relatedTarget=y,A=null,vf(c)===u&&(g=new g(v,w+"enter",p,t,c),g.target=y,g.relatedTarget=b,A=g),b=A,f&&p)t:{for(g=f,v=p,w=0,y=g;y;y=Rp(y))w++;for(y=0,A=v;A;A=Rp(A))y++;for(;0<w-y;)g=Rp(g),w--;for(;0<y-w;)v=Rp(v),y--;for(;w--;){if(g===v||v!==null&&g===v.alternate)break t;g=Rp(g),v=Rp(v)}g=null}else g=null;f!==null&&V3(h,d,f,g,!1),p!==null&&b!==null&&V3(h,b,p,g,!0)}}e:{if(d=u?sg(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var x=fZ;else if(P3(d))if(T9)x=vZ;else{x=pZ;var _=mZ}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(x=gZ);if(x&&(x=x(r,u))){S9(h,x,t,c);break e}_&&_(r,d,u),r==="focusout"&&(_=d._wrapperState)&&_.controlled&&d.type==="number"&&dD(d,"number",d.value)}switch(_=u?sg(u):window,r){case"focusin":(P3(_)||_.contentEditable==="true")&&(ng=_,ED=u,Db=null);break;case"focusout":Db=ED=ng=null;break;case"mousedown":SD=!0;break;case"contextmenu":case"mouseup":case"dragend":SD=!1,B3(h,t,c);break;case"selectionchange":if(wZ)break;case"keydown":case"keyup":B3(h,t,c)}var S;if(hR)e:{switch(r){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else rg?A9(r,t)&&(E="onCompositionEnd"):r==="keydown"&&t.keyCode===229&&(E="onCompositionStart");E&&(_9&&t.locale!=="ko"&&(rg||E!=="onCompositionStart"?E==="onCompositionEnd"&&rg&&(S=x9()):(Wh=c,lR="value"in Wh?Wh.value:Wh.textContent,rg=!0)),_=sS(u,E),0<_.length&&(E=new N3(E,r,null,t,c),h.push({event:E,listeners:_}),S?E.data=S:(S=E9(t),S!==null&&(E.data=S)))),(S=lZ?uZ(r,t):cZ(r,t))&&(u=sS(u,"onBeforeInput"),0<u.length&&(c=new N3("onBeforeInput","beforeinput",null,t,c),h.push({event:c,listeners:u}),c.data=S))}O9(h,e)})}function r1(r,e,t){return{instance:r,listener:e,currentTarget:t}}function sS(r,e){for(var t=e+"Capture",n=[];r!==null;){var i=r,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Xb(r,t),s!=null&&n.unshift(r1(r,s,i)),s=Xb(r,e),s!=null&&n.push(r1(r,s,i))),r=r.return}return n}function Rp(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function V3(r,e,t,n,i){for(var s=e._reactName,a=[];t!==null&&t!==n;){var o=t,l=o.alternate,u=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&u!==null&&(o=u,i?(l=Xb(t,s),l!=null&&a.unshift(r1(t,l,o))):i||(l=Xb(t,s),l!=null&&a.push(r1(t,l,o)))),t=t.return}a.length!==0&&r.push({event:e,listeners:a})}var EZ=/\r\n?/g,SZ=/\u0000|\uFFFD/g;function U3(r){return(typeof r=="string"?r:""+r).replace(EZ,`
`).replace(SZ,"")}function Y_(r,e,t){if(e=U3(e),U3(r)!==e&&t)throw Error(Fe(425))}function aS(){}var TD=null,CD=null;function ND(r,e){return r==="textarea"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var DD=typeof setTimeout=="function"?setTimeout:void 0,TZ=typeof clearTimeout=="function"?clearTimeout:void 0,z3=typeof Promise=="function"?Promise:void 0,CZ=typeof queueMicrotask=="function"?queueMicrotask:typeof z3<"u"?function(r){return z3.resolve(null).then(r).catch(NZ)}:DD;function NZ(r){setTimeout(function(){throw r})}function QN(r,e){var t=e,n=0;do{var i=t.nextSibling;if(r.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(n===0){r.removeChild(i),Jb(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=i}while(t);Jb(e)}function rd(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break;if(e===8){if(e=r.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return r}function j3(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&&e++}r=r.previousSibling}return null}var $0=Math.random().toString(36).slice(2),Ol="__reactFiber$"+$0,n1="__reactProps$"+$0,pc="__reactContainer$"+$0,MD="__reactEvents$"+$0,DZ="__reactListeners$"+$0,MZ="__reactHandles$"+$0;function vf(r){var e=r[Ol];if(e)return e;for(var t=r.parentNode;t;){if(e=t[pc]||t[Ol]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(r=j3(r);r!==null;){if(t=r[Ol])return t;r=j3(r)}return e}r=t,t=r.parentNode}return null}function Px(r){return r=r[Ol]||r[pc],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function sg(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(Fe(33))}function oC(r){return r[n1]||null}var ID=[],ag=-1;function Pd(r){return{current:r}}function Vr(r){0>ag||(r.current=ID[ag],ID[ag]=null,ag--)}function kr(r,e){ag++,ID[ag]=r.current,r.current=e}var md={},ts=Pd(md),Gs=Pd(!1),Km=md;function p0(r,e){var t=r.type.contextTypes;if(!t)return md;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=i),i}function Ws(r){return r=r.childContextTypes,r!=null}function oS(){Vr(Gs),Vr(ts)}function q3(r,e,t){if(ts.current!==md)throw Error(Fe(168));kr(ts,e),kr(Gs,t)}function L9(r,e,t){var n=r.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Fe(108,mJ(r)||"Unknown",i));return tn({},t,n)}function lS(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||md,Km=ts.current,kr(ts,r),kr(Gs,Gs.current),!0}function H3(r,e,t){var n=r.stateNode;if(!n)throw Error(Fe(169));t?(r=L9(r,e,Km),n.__reactInternalMemoizedMergedChildContext=r,Vr(Gs),Vr(ts),kr(ts,r)):Vr(Gs),kr(Gs,t)}var yu=null,lC=!1,JN=!1;function $9(r){yu===null?yu=[r]:yu.push(r)}function IZ(r){lC=!0,$9(r)}function Rd(){if(!JN&&yu!==null){JN=!0;var r=0,e=fr;try{var t=yu;for(fr=1;r<t.length;r++){var n=t[r];do n=n(!0);while(n!==null)}yu=null,lC=!1}catch(i){throw yu!==null&&(yu=yu.slice(r+1)),c9(iR,Rd),i}finally{fr=e,JN=!1}}return null}var og=[],lg=0,uS=null,cS=0,no=[],io=0,Xm=null,ec=1,tc="";function sf(r,e){og[lg++]=cS,og[lg++]=uS,uS=r,cS=e}function V9(r,e,t){no[io++]=ec,no[io++]=tc,no[io++]=Xm,Xm=r;var n=ec;r=tc;var i=32-Go(n)-1;n&=~(1<<i),t+=1;var s=32-Go(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,ec=1<<32-Go(e)+i|t<<i|n,tc=s+r}else ec=1<<s|t<<i|n,tc=r}function fR(r){r.return!==null&&(sf(r,1),V9(r,1,0))}function mR(r){for(;r===uS;)uS=og[--lg],og[lg]=null,cS=og[--lg],og[lg]=null;for(;r===Xm;)Xm=no[--io],no[io]=null,tc=no[--io],no[io]=null,ec=no[--io],no[io]=null}var Na=null,Sa=null,Hr=!1,Uo=null;function U9(r,e){var t=lo(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=r,e=r.deletions,e===null?(r.deletions=[t],r.flags|=16):e.push(t)}function G3(r,e){switch(r.tag){case 5:var t=r.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(r.stateNode=e,Na=r,Sa=rd(e.firstChild),!0):!1;case 6:return e=r.pendingProps===""||e.nodeType!==3?null:e,e!==null?(r.stateNode=e,Na=r,Sa=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Xm!==null?{id:ec,overflow:tc}:null,r.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=lo(18,null,null,0),t.stateNode=e,t.return=r,r.child=t,Na=r,Sa=null,!0):!1;default:return!1}}function PD(r){return(r.mode&1)!==0&&(r.flags&128)===0}function RD(r){if(Hr){var e=Sa;if(e){var t=e;if(!G3(r,e)){if(PD(r))throw Error(Fe(418));e=rd(t.nextSibling);var n=Na;e&&G3(r,e)?U9(n,t):(r.flags=r.flags&-4097|2,Hr=!1,Na=r)}}else{if(PD(r))throw Error(Fe(418));r.flags=r.flags&-4097|2,Hr=!1,Na=r}}}function W3(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Na=r}function Q_(r){if(r!==Na)return!1;if(!Hr)return W3(r),Hr=!0,!1;var e;if((e=r.tag!==3)&&!(e=r.tag!==5)&&(e=r.type,e=e!=="head"&&e!=="body"&&!ND(r.type,r.memoizedProps)),e&&(e=Sa)){if(PD(r))throw z9(),Error(Fe(418));for(;e;)U9(r,e),e=rd(e.nextSibling)}if(W3(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Fe(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="/$"){if(e===0){Sa=rd(r.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}r=r.nextSibling}Sa=null}}else Sa=Na?rd(r.stateNode.nextSibling):null;return!0}function z9(){for(var r=Sa;r;)r=rd(r.nextSibling)}function g0(){Sa=Na=null,Hr=!1}function pR(r){Uo===null?Uo=[r]:Uo.push(r)}var PZ=Mc.ReactCurrentBatchConfig;function Py(r,e,t){if(r=t.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Fe(309));var n=t.stateNode}if(!n)throw Error(Fe(147,r));var i=n,s=""+r;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof r!="string")throw Error(Fe(284));if(!t._owner)throw Error(Fe(290,r))}return r}function J_(r,e){throw r=Object.prototype.toString.call(e),Error(Fe(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r))}function K3(r){var e=r._init;return e(r._payload)}function j9(r){function e(v,w){if(r){var y=v.deletions;y===null?(v.deletions=[w],v.flags|=16):y.push(w)}}function t(v,w){if(!r)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function n(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function i(v,w){return v=ad(v,w),v.index=0,v.sibling=null,v}function s(v,w,y){return v.index=y,r?(y=v.alternate,y!==null?(y=y.index,y<w?(v.flags|=2,w):y):(v.flags|=2,w)):(v.flags|=1048576,w)}function a(v){return r&&v.alternate===null&&(v.flags|=2),v}function o(v,w,y,A){return w===null||w.tag!==6?(w=s2(y,v.mode,A),w.return=v,w):(w=i(w,y),w.return=v,w)}function l(v,w,y,A){var x=y.type;return x===tg?c(v,w,y.props.children,A,y.key):w!==null&&(w.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Hc&&K3(x)===w.type)?(A=i(w,y.props),A.ref=Py(v,w,y),A.return=v,A):(A=ZA(y.type,y.key,y.props,null,v.mode,A),A.ref=Py(v,w,y),A.return=v,A)}function u(v,w,y,A){return w===null||w.tag!==4||w.stateNode.containerInfo!==y.containerInfo||w.stateNode.implementation!==y.implementation?(w=a2(y,v.mode,A),w.return=v,w):(w=i(w,y.children||[]),w.return=v,w)}function c(v,w,y,A,x){return w===null||w.tag!==7?(w=Um(y,v.mode,A,x),w.return=v,w):(w=i(w,y),w.return=v,w)}function h(v,w,y){if(typeof w=="string"&&w!==""||typeof w=="number")return w=s2(""+w,v.mode,y),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case U_:return y=ZA(w.type,w.key,w.props,null,v.mode,y),y.ref=Py(v,null,w),y.return=v,y;case eg:return w=a2(w,v.mode,y),w.return=v,w;case Hc:var A=w._init;return h(v,A(w._payload),y)}if(Gy(w)||Cy(w))return w=Um(w,v.mode,y,null),w.return=v,w;J_(v,w)}return null}function d(v,w,y,A){var x=w!==null?w.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return x!==null?null:o(v,w,""+y,A);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case U_:return y.key===x?l(v,w,y,A):null;case eg:return y.key===x?u(v,w,y,A):null;case Hc:return x=y._init,d(v,w,x(y._payload),A)}if(Gy(y)||Cy(y))return x!==null?null:c(v,w,y,A,null);J_(v,y)}return null}function f(v,w,y,A,x){if(typeof A=="string"&&A!==""||typeof A=="number")return v=v.get(y)||null,o(w,v,""+A,x);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case U_:return v=v.get(A.key===null?y:A.key)||null,l(w,v,A,x);case eg:return v=v.get(A.key===null?y:A.key)||null,u(w,v,A,x);case Hc:var _=A._init;return f(v,w,y,_(A._payload),x)}if(Gy(A)||Cy(A))return v=v.get(y)||null,c(w,v,A,x,null);J_(w,A)}return null}function p(v,w,y,A){for(var x=null,_=null,S=w,E=w=0,C=null;S!==null&&E<y.length;E++){S.index>E?(C=S,S=null):C=S.sibling;var N=d(v,S,y[E],A);if(N===null){S===null&&(S=C);break}r&&S&&N.alternate===null&&e(v,S),w=s(N,w,E),_===null?x=N:_.sibling=N,_=N,S=C}if(E===y.length)return t(v,S),Hr&&sf(v,E),x;if(S===null){for(;E<y.length;E++)S=h(v,y[E],A),S!==null&&(w=s(S,w,E),_===null?x=S:_.sibling=S,_=S);return Hr&&sf(v,E),x}for(S=n(v,S);E<y.length;E++)C=f(S,v,E,y[E],A),C!==null&&(r&&C.alternate!==null&&S.delete(C.key===null?E:C.key),w=s(C,w,E),_===null?x=C:_.sibling=C,_=C);return r&&S.forEach(function(D){return e(v,D)}),Hr&&sf(v,E),x}function g(v,w,y,A){var x=Cy(y);if(typeof x!="function")throw Error(Fe(150));if(y=x.call(y),y==null)throw Error(Fe(151));for(var _=x=null,S=w,E=w=0,C=null,N=y.next();S!==null&&!N.done;E++,N=y.next()){S.index>E?(C=S,S=null):C=S.sibling;var D=d(v,S,N.value,A);if(D===null){S===null&&(S=C);break}r&&S&&D.alternate===null&&e(v,S),w=s(D,w,E),_===null?x=D:_.sibling=D,_=D,S=C}if(N.done)return t(v,S),Hr&&sf(v,E),x;if(S===null){for(;!N.done;E++,N=y.next())N=h(v,N.value,A),N!==null&&(w=s(N,w,E),_===null?x=N:_.sibling=N,_=N);return Hr&&sf(v,E),x}for(S=n(v,S);!N.done;E++,N=y.next())N=f(S,v,E,N.value,A),N!==null&&(r&&N.alternate!==null&&S.delete(N.key===null?E:N.key),w=s(N,w,E),_===null?x=N:_.sibling=N,_=N);return r&&S.forEach(function(M){return e(v,M)}),Hr&&sf(v,E),x}function b(v,w,y,A){if(typeof y=="object"&&y!==null&&y.type===tg&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case U_:e:{for(var x=y.key,_=w;_!==null;){if(_.key===x){if(x=y.type,x===tg){if(_.tag===7){t(v,_.sibling),w=i(_,y.props.children),w.return=v,v=w;break e}}else if(_.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Hc&&K3(x)===_.type){t(v,_.sibling),w=i(_,y.props),w.ref=Py(v,_,y),w.return=v,v=w;break e}t(v,_);break}else e(v,_);_=_.sibling}y.type===tg?(w=Um(y.props.children,v.mode,A,y.key),w.return=v,v=w):(A=ZA(y.type,y.key,y.props,null,v.mode,A),A.ref=Py(v,w,y),A.return=v,v=A)}return a(v);case eg:e:{for(_=y.key;w!==null;){if(w.key===_)if(w.tag===4&&w.stateNode.containerInfo===y.containerInfo&&w.stateNode.implementation===y.implementation){t(v,w.sibling),w=i(w,y.children||[]),w.return=v,v=w;break e}else{t(v,w);break}else e(v,w);w=w.sibling}w=a2(y,v.mode,A),w.return=v,v=w}return a(v);case Hc:return _=y._init,b(v,w,_(y._payload),A)}if(Gy(y))return p(v,w,y,A);if(Cy(y))return g(v,w,y,A);J_(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,w!==null&&w.tag===6?(t(v,w.sibling),w=i(w,y),w.return=v,v=w):(t(v,w),w=s2(y,v.mode,A),w.return=v,v=w),a(v)):t(v,w)}return b}var v0=j9(!0),q9=j9(!1),hS=Pd(null),dS=null,ug=null,gR=null;function vR(){gR=ug=dS=null}function yR(r){var e=hS.current;Vr(hS),r._currentValue=e}function kD(r,e,t){for(;r!==null;){var n=r.alternate;if((r.childLanes&e)!==e?(r.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),r===t)break;r=r.return}}function Pg(r,e){dS=r,gR=ug=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&e&&(qs=!0),r.firstContext=null)}function po(r){var e=r._currentValue;if(gR!==r)if(r={context:r,memoizedValue:e,next:null},ug===null){if(dS===null)throw Error(Fe(308));ug=r,dS.dependencies={lanes:0,firstContext:r}}else ug=ug.next=r;return e}var yf=null;function bR(r){yf===null?yf=[r]:yf.push(r)}function H9(r,e,t,n){var i=e.interleaved;return i===null?(t.next=t,bR(e)):(t.next=i.next,i.next=t),e.interleaved=t,gc(r,n)}function gc(r,e){r.lanes|=e;var t=r.alternate;for(t!==null&&(t.lanes|=e),t=r,r=r.return;r!==null;)r.childLanes|=e,t=r.alternate,t!==null&&(t.childLanes|=e),t=r,r=r.return;return t.tag===3?t.stateNode:null}var Gc=!1;function wR(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function G9(r,e){r=r.updateQueue,e.updateQueue===r&&(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function ac(r,e){return{eventTime:r,lane:e,tag:0,payload:null,callback:null,next:null}}function nd(r,e,t){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,er&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,gc(r,t)}return i=n.interleaved,i===null?(e.next=e,bR(n)):(e.next=i.next,i.next=e),n.interleaved=e,gc(r,t)}function WA(r,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,sR(r,t)}}function X3(r,e){var t=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=a:s=s.next=a,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}function fS(r,e,t,n){var i=r.updateQueue;Gc=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var c=r.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;a=0,c=u=l=null,o=s;do{var d=o.lane,f=o.eventTime;if((n&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=r,g=o;switch(d=e,f=t,g.tag){case 1:if(p=g.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=tn({},h,d);break e;case 2:Gc=!0}}o.callback!==null&&o.lane!==0&&(r.flags|=64,d=i.effects,d===null?i.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=f,l=h):c=c.next=f,a|=d;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;d=o,o=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Qm|=a,r.lanes=a,r.memoizedState=h}}function Y3(r,e,t){if(r=e.effects,e.effects=null,r!==null)for(e=0;e<r.length;e++){var n=r[e],i=n.callback;if(i!==null){if(n.callback=null,n=t,typeof i!="function")throw Error(Fe(191,i));i.call(n)}}}var Rx={},Vl=Pd(Rx),i1=Pd(Rx),s1=Pd(Rx);function bf(r){if(r===Rx)throw Error(Fe(174));return r}function xR(r,e){switch(kr(s1,e),kr(i1,r),kr(Vl,Rx),r=e.nodeType,r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mD(null,"");break;default:r=r===8?e.parentNode:e,e=r.namespaceURI||null,r=r.tagName,e=mD(e,r)}Vr(Vl),kr(Vl,e)}function y0(){Vr(Vl),Vr(i1),Vr(s1)}function W9(r){bf(s1.current);var e=bf(Vl.current),t=mD(e,r.type);e!==t&&(kr(i1,r),kr(Vl,t))}function _R(r){i1.current===r&&(Vr(Vl),Vr(i1))}var Yr=Pd(0);function mS(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ZN=[];function AR(){for(var r=0;r<ZN.length;r++)ZN[r]._workInProgressVersionPrimary=null;ZN.length=0}var KA=Mc.ReactCurrentDispatcher,e2=Mc.ReactCurrentBatchConfig,Ym=0,Jr=null,qn=null,fi=null,pS=!1,Mb=!1,a1=0,RZ=0;function $i(){throw Error(Fe(321))}function ER(r,e){if(e===null)return!1;for(var t=0;t<e.length&&t<r.length;t++)if(!Xo(r[t],e[t]))return!1;return!0}function SR(r,e,t,n,i,s){if(Ym=s,Jr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,KA.current=r===null||r.memoizedState===null?BZ:LZ,r=t(n,i),Mb){s=0;do{if(Mb=!1,a1=0,25<=s)throw Error(Fe(301));s+=1,fi=qn=null,e.updateQueue=null,KA.current=$Z,r=t(n,i)}while(Mb)}if(KA.current=gS,e=qn!==null&&qn.next!==null,Ym=0,fi=qn=Jr=null,pS=!1,e)throw Error(Fe(300));return r}function TR(){var r=a1!==0;return a1=0,r}function dl(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fi===null?Jr.memoizedState=fi=r:fi=fi.next=r,fi}function go(){if(qn===null){var r=Jr.alternate;r=r!==null?r.memoizedState:null}else r=qn.next;var e=fi===null?Jr.memoizedState:fi.next;if(e!==null)fi=e,qn=r;else{if(r===null)throw Error(Fe(310));qn=r,r={memoizedState:qn.memoizedState,baseState:qn.baseState,baseQueue:qn.baseQueue,queue:qn.queue,next:null},fi===null?Jr.memoizedState=fi=r:fi=fi.next=r}return fi}function o1(r,e){return typeof e=="function"?e(r):e}function t2(r){var e=go(),t=e.queue;if(t===null)throw Error(Fe(311));t.lastRenderedReducer=r;var n=qn,i=n.baseQueue,s=t.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,l=null,u=s;do{var c=u.lane;if((Ym&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:r(n,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=h,a=n):l=l.next=h,Jr.lanes|=c,Qm|=c}u=u.next}while(u!==null&&u!==s);l===null?a=n:l.next=o,Xo(n,e.memoizedState)||(qs=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,t.lastRenderedState=n}if(r=t.interleaved,r!==null){i=r;do s=i.lane,Jr.lanes|=s,Qm|=s,i=i.next;while(i!==r)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function r2(r){var e=go(),t=e.queue;if(t===null)throw Error(Fe(311));t.lastRenderedReducer=r;var n=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var a=i=i.next;do s=r(s,a.action),a=a.next;while(a!==i);Xo(s,e.memoizedState)||(qs=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,n]}function K9(){}function X9(r,e){var t=Jr,n=go(),i=e(),s=!Xo(n.memoizedState,i);if(s&&(n.memoizedState=i,qs=!0),n=n.queue,CR(J9.bind(null,t,n,r),[r]),n.getSnapshot!==e||s||fi!==null&&fi.memoizedState.tag&1){if(t.flags|=2048,l1(9,Q9.bind(null,t,n,i,e),void 0,null),pi===null)throw Error(Fe(349));Ym&30||Y9(t,e,i)}return i}function Y9(r,e,t){r.flags|=16384,r={getSnapshot:e,value:t},e=Jr.updateQueue,e===null?(e={lastEffect:null,stores:null},Jr.updateQueue=e,e.stores=[r]):(t=e.stores,t===null?e.stores=[r]:t.push(r))}function Q9(r,e,t,n){e.value=t,e.getSnapshot=n,Z9(e)&&ez(r)}function J9(r,e,t){return t(function(){Z9(e)&&ez(r)})}function Z9(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!Xo(r,t)}catch{return!0}}function ez(r){var e=gc(r,1);e!==null&&Wo(e,r,1,-1)}function Q3(r){var e=dl();return typeof r=="function"&&(r=r()),e.memoizedState=e.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o1,lastRenderedState:r},e.queue=r,r=r.dispatch=OZ.bind(null,Jr,r),[e.memoizedState,r]}function l1(r,e,t,n){return r={tag:r,create:e,destroy:t,deps:n,next:null},e=Jr.updateQueue,e===null?(e={lastEffect:null,stores:null},Jr.updateQueue=e,e.lastEffect=r.next=r):(t=e.lastEffect,t===null?e.lastEffect=r.next=r:(n=t.next,t.next=r,r.next=n,e.lastEffect=r)),r}function tz(){return go().memoizedState}function XA(r,e,t,n){var i=dl();Jr.flags|=r,i.memoizedState=l1(1|e,t,void 0,n===void 0?null:n)}function uC(r,e,t,n){var i=go();n=n===void 0?null:n;var s=void 0;if(qn!==null){var a=qn.memoizedState;if(s=a.destroy,n!==null&&ER(n,a.deps)){i.memoizedState=l1(e,t,s,n);return}}Jr.flags|=r,i.memoizedState=l1(1|e,t,s,n)}function J3(r,e){return XA(8390656,8,r,e)}function CR(r,e){return uC(2048,8,r,e)}function rz(r,e){return uC(4,2,r,e)}function nz(r,e){return uC(4,4,r,e)}function iz(r,e){if(typeof e=="function")return r=r(),e(r),function(){e(null)};if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function sz(r,e,t){return t=t!=null?t.concat([r]):null,uC(4,4,iz.bind(null,e,r),t)}function NR(){}function az(r,e){var t=go();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&ER(e,n[1])?n[0]:(t.memoizedState=[r,e],r)}function oz(r,e){var t=go();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&ER(e,n[1])?n[0]:(r=r(),t.memoizedState=[r,e],r)}function lz(r,e,t){return Ym&21?(Xo(t,e)||(t=f9(),Jr.lanes|=t,Qm|=t,r.baseState=!0),e):(r.baseState&&(r.baseState=!1,qs=!0),r.memoizedState=t)}function kZ(r,e){var t=fr;fr=t!==0&&4>t?t:4,r(!0);var n=e2.transition;e2.transition={};try{r(!1),e()}finally{fr=t,e2.transition=n}}function uz(){return go().memoizedState}function FZ(r,e,t){var n=sd(r);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},cz(r))hz(e,t);else if(t=H9(r,e,t,n),t!==null){var i=ys();Wo(t,r,n,i),dz(t,e,n)}}function OZ(r,e,t){var n=sd(r),i={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(cz(r))hz(e,i);else{var s=r.alternate;if(r.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,t);if(i.hasEagerState=!0,i.eagerState=o,Xo(o,a)){var l=e.interleaved;l===null?(i.next=i,bR(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=H9(r,e,i,n),t!==null&&(i=ys(),Wo(t,r,n,i),dz(t,e,n))}}function cz(r){var e=r.alternate;return r===Jr||e!==null&&e===Jr}function hz(r,e){Mb=pS=!0;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}function dz(r,e,t){if(t&4194240){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,sR(r,t)}}var gS={readContext:po,useCallback:$i,useContext:$i,useEffect:$i,useImperativeHandle:$i,useInsertionEffect:$i,useLayoutEffect:$i,useMemo:$i,useReducer:$i,useRef:$i,useState:$i,useDebugValue:$i,useDeferredValue:$i,useTransition:$i,useMutableSource:$i,useSyncExternalStore:$i,useId:$i,unstable_isNewReconciler:!1},BZ={readContext:po,useCallback:function(r,e){return dl().memoizedState=[r,e===void 0?null:e],r},useContext:po,useEffect:J3,useImperativeHandle:function(r,e,t){return t=t!=null?t.concat([r]):null,XA(4194308,4,iz.bind(null,e,r),t)},useLayoutEffect:function(r,e){return XA(4194308,4,r,e)},useInsertionEffect:function(r,e){return XA(4,2,r,e)},useMemo:function(r,e){var t=dl();return e=e===void 0?null:e,r=r(),t.memoizedState=[r,e],r},useReducer:function(r,e,t){var n=dl();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:e},n.queue=r,r=r.dispatch=FZ.bind(null,Jr,r),[n.memoizedState,r]},useRef:function(r){var e=dl();return r={current:r},e.memoizedState=r},useState:Q3,useDebugValue:NR,useDeferredValue:function(r){return dl().memoizedState=r},useTransition:function(){var r=Q3(!1),e=r[0];return r=kZ.bind(null,r[1]),dl().memoizedState=r,[e,r]},useMutableSource:function(){},useSyncExternalStore:function(r,e,t){var n=Jr,i=dl();if(Hr){if(t===void 0)throw Error(Fe(407));t=t()}else{if(t=e(),pi===null)throw Error(Fe(349));Ym&30||Y9(n,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,J3(J9.bind(null,n,s,r),[r]),n.flags|=2048,l1(9,Q9.bind(null,n,s,t,e),void 0,null),t},useId:function(){var r=dl(),e=pi.identifierPrefix;if(Hr){var t=tc,n=ec;t=(n&~(1<<32-Go(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=a1++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=RZ++,e=":"+e+"r"+t.toString(32)+":";return r.memoizedState=e},unstable_isNewReconciler:!1},LZ={readContext:po,useCallback:az,useContext:po,useEffect:CR,useImperativeHandle:sz,useInsertionEffect:rz,useLayoutEffect:nz,useMemo:oz,useReducer:t2,useRef:tz,useState:function(){return t2(o1)},useDebugValue:NR,useDeferredValue:function(r){var e=go();return lz(e,qn.memoizedState,r)},useTransition:function(){var r=t2(o1)[0],e=go().memoizedState;return[r,e]},useMutableSource:K9,useSyncExternalStore:X9,useId:uz,unstable_isNewReconciler:!1},$Z={readContext:po,useCallback:az,useContext:po,useEffect:CR,useImperativeHandle:sz,useInsertionEffect:rz,useLayoutEffect:nz,useMemo:oz,useReducer:r2,useRef:tz,useState:function(){return r2(o1)},useDebugValue:NR,useDeferredValue:function(r){var e=go();return qn===null?e.memoizedState=r:lz(e,qn.memoizedState,r)},useTransition:function(){var r=r2(o1)[0],e=go().memoizedState;return[r,e]},useMutableSource:K9,useSyncExternalStore:X9,useId:uz,unstable_isNewReconciler:!1};function Co(r,e){if(r&&r.defaultProps){e=tn({},e),r=r.defaultProps;for(var t in r)e[t]===void 0&&(e[t]=r[t]);return e}return e}function FD(r,e,t,n){e=r.memoizedState,t=t(n,e),t=t==null?e:tn({},e,t),r.memoizedState=t,r.lanes===0&&(r.updateQueue.baseState=t)}var cC={isMounted:function(r){return(r=r._reactInternals)?hp(r)===r:!1},enqueueSetState:function(r,e,t){r=r._reactInternals;var n=ys(),i=sd(r),s=ac(n,i);s.payload=e,t!=null&&(s.callback=t),e=nd(r,s,i),e!==null&&(Wo(e,r,i,n),WA(e,r,i))},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var n=ys(),i=sd(r),s=ac(n,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=nd(r,s,i),e!==null&&(Wo(e,r,i,n),WA(e,r,i))},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=ys(),n=sd(r),i=ac(t,n);i.tag=2,e!=null&&(i.callback=e),e=nd(r,i,n),e!==null&&(Wo(e,r,n,t),WA(e,r,n))}};function Z3(r,e,t,n,i,s,a){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!e1(t,n)||!e1(i,s):!0}function fz(r,e,t){var n=!1,i=md,s=e.contextType;return typeof s=="object"&&s!==null?s=po(s):(i=Ws(e)?Km:ts.current,n=e.contextTypes,s=(n=n!=null)?p0(r,i):md),e=new e(t,s),r.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cC,r.stateNode=e,e._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=s),e}function eB(r,e,t,n){r=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==r&&cC.enqueueReplaceState(e,e.state,null)}function OD(r,e,t,n){var i=r.stateNode;i.props=t,i.state=r.memoizedState,i.refs={},wR(r);var s=e.contextType;typeof s=="object"&&s!==null?i.context=po(s):(s=Ws(e)?Km:ts.current,i.context=p0(r,s)),i.state=r.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(FD(r,e,s,t),i.state=r.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&cC.enqueueReplaceState(i,i.state,null),fS(r,t,i,n),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4194308)}function b0(r,e){try{var t="",n=e;do t+=fJ(n),n=n.return;while(n);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:r,source:e,stack:i,digest:null}}function n2(r,e,t){return{value:r,source:null,stack:t??null,digest:e??null}}function BD(r,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var VZ=typeof WeakMap=="function"?WeakMap:Map;function mz(r,e,t){t=ac(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){yS||(yS=!0,WD=n),BD(r,e)},t}function pz(r,e,t){t=ac(-1,t),t.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;t.payload=function(){return n(i)},t.callback=function(){BD(r,e)}}var s=r.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){BD(r,e),typeof n!="function"&&(id===null?id=new Set([this]):id.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function tB(r,e,t){var n=r.pingCache;if(n===null){n=r.pingCache=new VZ;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(t)||(i.add(t),r=eee.bind(null,r,e,t),e.then(r,r))}function rB(r){do{var e;if((e=r.tag===13)&&(e=r.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return r;r=r.return}while(r!==null);return null}function nB(r,e,t,n,i){return r.mode&1?(r.flags|=65536,r.lanes=i,r):(r===e?r.flags|=65536:(r.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ac(-1,1),e.tag=2,nd(t,e,1))),t.lanes|=1),r)}var UZ=Mc.ReactCurrentOwner,qs=!1;function ps(r,e,t,n){e.child=r===null?q9(e,null,t,n):v0(e,r.child,t,n)}function iB(r,e,t,n,i){t=t.render;var s=e.ref;return Pg(e,i),n=SR(r,e,t,n,s,i),t=TR(),r!==null&&!qs?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,vc(r,e,i)):(Hr&&t&&fR(e),e.flags|=1,ps(r,e,n,i),e.child)}function sB(r,e,t,n,i){if(r===null){var s=t.type;return typeof s=="function"&&!OR(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,gz(r,e,s,n,i)):(r=ZA(t.type,null,n,e,e.mode,i),r.ref=e.ref,r.return=e,e.child=r)}if(s=r.child,!(r.lanes&i)){var a=s.memoizedProps;if(t=t.compare,t=t!==null?t:e1,t(a,n)&&r.ref===e.ref)return vc(r,e,i)}return e.flags|=1,r=ad(s,n),r.ref=e.ref,r.return=e,e.child=r}function gz(r,e,t,n,i){if(r!==null){var s=r.memoizedProps;if(e1(s,n)&&r.ref===e.ref)if(qs=!1,e.pendingProps=n=s,(r.lanes&i)!==0)r.flags&131072&&(qs=!0);else return e.lanes=r.lanes,vc(r,e,i)}return LD(r,e,t,n,i)}function vz(r,e,t){var n=e.pendingProps,i=n.children,s=r!==null?r.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kr(hg,wa),wa|=t;else{if(!(t&1073741824))return r=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:r,cachePool:null,transitions:null},e.updateQueue=null,kr(hg,wa),wa|=r,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:t,kr(hg,wa),wa|=n}else s!==null?(n=s.baseLanes|t,e.memoizedState=null):n=t,kr(hg,wa),wa|=n;return ps(r,e,i,t),e.child}function yz(r,e){var t=e.ref;(r===null&&t!==null||r!==null&&r.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function LD(r,e,t,n,i){var s=Ws(t)?Km:ts.current;return s=p0(e,s),Pg(e,i),t=SR(r,e,t,n,s,i),n=TR(),r!==null&&!qs?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,vc(r,e,i)):(Hr&&n&&fR(e),e.flags|=1,ps(r,e,t,i),e.child)}function aB(r,e,t,n,i){if(Ws(t)){var s=!0;lS(e)}else s=!1;if(Pg(e,i),e.stateNode===null)YA(r,e),fz(e,t,n),OD(e,t,n,i),n=!0;else if(r===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=t.contextType;typeof u=="object"&&u!==null?u=po(u):(u=Ws(t)?Km:ts.current,u=p0(e,u));var c=t.getDerivedStateFromProps,h=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==u)&&eB(e,a,n,u),Gc=!1;var d=e.memoizedState;a.state=d,fS(e,n,a,i),l=e.memoizedState,o!==n||d!==l||Gs.current||Gc?(typeof c=="function"&&(FD(e,t,c,n),l=e.memoizedState),(o=Gc||Z3(e,t,o,n,d,l,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,G9(r,e),o=e.memoizedProps,u=e.type===e.elementType?o:Co(e.type,o),a.props=u,h=e.pendingProps,d=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=po(l):(l=Ws(t)?Km:ts.current,l=p0(e,l));var f=t.getDerivedStateFromProps;(c=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||d!==l)&&eB(e,a,n,l),Gc=!1,d=e.memoizedState,a.state=d,fS(e,n,a,i);var p=e.memoizedState;o!==h||d!==p||Gs.current||Gc?(typeof f=="function"&&(FD(e,t,f,n),p=e.memoizedState),(u=Gc||Z3(e,t,u,n,d,p,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,p,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,p,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===r.memoizedProps&&d===r.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===r.memoizedProps&&d===r.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),a.props=n,a.state=p,a.context=l,n=u):(typeof a.componentDidUpdate!="function"||o===r.memoizedProps&&d===r.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===r.memoizedProps&&d===r.memoizedState||(e.flags|=1024),n=!1)}return $D(r,e,t,n,s,i)}function $D(r,e,t,n,i,s){yz(r,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&H3(e,t,!1),vc(r,e,s);n=e.stateNode,UZ.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,r!==null&&a?(e.child=v0(e,r.child,null,s),e.child=v0(e,null,o,s)):ps(r,e,o,s),e.memoizedState=n.state,i&&H3(e,t,!0),e.child}function bz(r){var e=r.stateNode;e.pendingContext?q3(r,e.pendingContext,e.pendingContext!==e.context):e.context&&q3(r,e.context,!1),xR(r,e.containerInfo)}function oB(r,e,t,n,i){return g0(),pR(i),e.flags|=256,ps(r,e,t,n),e.child}var VD={dehydrated:null,treeContext:null,retryLane:0};function UD(r){return{baseLanes:r,cachePool:null,transitions:null}}function wz(r,e,t){var n=e.pendingProps,i=Yr.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=r!==null&&r.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(r===null||r.memoizedState!==null)&&(i|=1),kr(Yr,i&1),r===null)return RD(e),r=e.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(e.mode&1?r.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,r=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=fC(a,n,0,null),r=Um(r,n,t,null),s.return=e,r.return=e,s.sibling=r,e.child=s,e.child.memoizedState=UD(t),e.memoizedState=VD,r):DR(e,a));if(i=r.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return zZ(r,e,a,n,o,i,t);if(s){s=n.fallback,a=e.mode,i=r.child,o=i.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=ad(i,l),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=ad(o,s):(s=Um(s,a,t,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=r.child.memoizedState,a=a===null?UD(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=r.childLanes&~t,e.memoizedState=VD,n}return s=r.child,r=s.sibling,n=ad(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,r!==null&&(t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)),e.child=n,e.memoizedState=null,n}function DR(r,e){return e=fC({mode:"visible",children:e},r.mode,0,null),e.return=r,r.child=e}function Z_(r,e,t,n){return n!==null&&pR(n),v0(e,r.child,null,t),r=DR(e,e.pendingProps.children),r.flags|=2,e.memoizedState=null,r}function zZ(r,e,t,n,i,s,a){if(t)return e.flags&256?(e.flags&=-257,n=n2(Error(Fe(422))),Z_(r,e,a,n)):e.memoizedState!==null?(e.child=r.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=fC({mode:"visible",children:n.children},i,0,null),s=Um(s,i,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&v0(e,r.child,null,a),e.child.memoizedState=UD(a),e.memoizedState=VD,s);if(!(e.mode&1))return Z_(r,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(Fe(419)),n=n2(s,n,void 0),Z_(r,e,a,n)}if(o=(a&r.childLanes)!==0,qs||o){if(n=pi,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,gc(r,i),Wo(n,r,i,-1))}return FR(),n=n2(Error(Fe(421))),Z_(r,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=r.child,e=tee.bind(null,r),i._reactRetry=e,null):(r=s.treeContext,Sa=rd(i.nextSibling),Na=e,Hr=!0,Uo=null,r!==null&&(no[io++]=ec,no[io++]=tc,no[io++]=Xm,ec=r.id,tc=r.overflow,Xm=e),e=DR(e,n.children),e.flags|=4096,e)}function lB(r,e,t){r.lanes|=e;var n=r.alternate;n!==null&&(n.lanes|=e),kD(r.return,e,t)}function i2(r,e,t,n,i){var s=r.memoizedState;s===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=t,s.tailMode=i)}function xz(r,e,t){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(ps(r,e,n.children,t),n=Yr.current,n&2)n=n&1|2,e.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&lB(r,t,e);else if(r.tag===19)lB(r,t,e);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(kr(Yr,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)r=t.alternate,r!==null&&mS(r)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),i2(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(r=i.alternate,r!==null&&mS(r)===null){e.child=i;break}r=i.sibling,i.sibling=t,t=i,i=r}i2(e,!0,t,null,s);break;case"together":i2(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function YA(r,e){!(e.mode&1)&&r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2)}function vc(r,e,t){if(r!==null&&(e.dependencies=r.dependencies),Qm|=e.lanes,!(t&e.childLanes))return null;if(r!==null&&e.child!==r.child)throw Error(Fe(153));if(e.child!==null){for(r=e.child,t=ad(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=ad(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}function jZ(r,e,t){switch(e.tag){case 3:bz(e),g0();break;case 5:W9(e);break;case 1:Ws(e.type)&&lS(e);break;case 4:xR(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;kr(hS,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(kr(Yr,Yr.current&1),e.flags|=128,null):t&e.child.childLanes?wz(r,e,t):(kr(Yr,Yr.current&1),r=vc(r,e,t),r!==null?r.sibling:null);kr(Yr,Yr.current&1);break;case 19:if(n=(t&e.childLanes)!==0,r.flags&128){if(n)return xz(r,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),kr(Yr,Yr.current),n)break;return null;case 22:case 23:return e.lanes=0,vz(r,e,t)}return vc(r,e,t)}var _z,zD,Az,Ez;_z=function(r,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)r.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};zD=function(){};Az=function(r,e,t,n){var i=r.memoizedProps;if(i!==n){r=e.stateNode,bf(Vl.current);var s=null;switch(t){case"input":i=cD(r,i),n=cD(r,n),s=[];break;case"select":i=tn({},i,{value:void 0}),n=tn({},n,{value:void 0}),s=[];break;case"textarea":i=fD(r,i),n=fD(r,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=aS)}pD(t,n);var a;t=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Wb.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(o=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Wb.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Br("scroll",r),s||o===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Ez=function(r,e,t,n){t!==n&&(e.flags|=4)};function Ry(r,e){if(!Hr)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function Vi(r){var e=r.alternate!==null&&r.alternate.child===r.child,t=0,n=0;if(e)for(var i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=r,i=i.sibling;else for(i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=r,i=i.sibling;return r.subtreeFlags|=n,r.childLanes=t,e}function qZ(r,e,t){var n=e.pendingProps;switch(mR(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vi(e),null;case 1:return Ws(e.type)&&oS(),Vi(e),null;case 3:return n=e.stateNode,y0(),Vr(Gs),Vr(ts),AR(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(Q_(e)?e.flags|=4:r===null||r.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Uo!==null&&(YD(Uo),Uo=null))),zD(r,e),Vi(e),null;case 5:_R(e);var i=bf(s1.current);if(t=e.type,r!==null&&e.stateNode!=null)Az(r,e,t,n,i),r.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Fe(166));return Vi(e),null}if(r=bf(Vl.current),Q_(e)){n=e.stateNode,t=e.type;var s=e.memoizedProps;switch(n[Ol]=e,n[n1]=s,r=(e.mode&1)!==0,t){case"dialog":Br("cancel",n),Br("close",n);break;case"iframe":case"object":case"embed":Br("load",n);break;case"video":case"audio":for(i=0;i<Ky.length;i++)Br(Ky[i],n);break;case"source":Br("error",n);break;case"img":case"image":case"link":Br("error",n),Br("load",n);break;case"details":Br("toggle",n);break;case"input":v3(n,s),Br("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Br("invalid",n);break;case"textarea":b3(n,s),Br("invalid",n)}pD(t,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&Y_(n.textContent,o,r),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Y_(n.textContent,o,r),i=["children",""+o]):Wb.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Br("scroll",n)}switch(t){case"input":z_(n),y3(n,s,!0);break;case"textarea":z_(n),w3(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=aS)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=JU(t)),r==="http://www.w3.org/1999/xhtml"?t==="script"?(r=a.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=a.createElement(t,{is:n.is}):(r=a.createElement(t),t==="select"&&(a=r,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):r=a.createElementNS(r,t),r[Ol]=e,r[n1]=n,_z(r,e,!1,!1),e.stateNode=r;e:{switch(a=gD(t,n),t){case"dialog":Br("cancel",r),Br("close",r),i=n;break;case"iframe":case"object":case"embed":Br("load",r),i=n;break;case"video":case"audio":for(i=0;i<Ky.length;i++)Br(Ky[i],r);i=n;break;case"source":Br("error",r),i=n;break;case"img":case"image":case"link":Br("error",r),Br("load",r),i=n;break;case"details":Br("toggle",r),i=n;break;case"input":v3(r,n),i=cD(r,n),Br("invalid",r);break;case"option":i=n;break;case"select":r._wrapperState={wasMultiple:!!n.multiple},i=tn({},n,{value:void 0}),Br("invalid",r);break;case"textarea":b3(r,n),i=fD(r,n),Br("invalid",r);break;default:i=n}pD(t,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?t9(r,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ZU(r,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Kb(r,l):typeof l=="number"&&Kb(r,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Wb.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Br("scroll",r):l!=null&&ZP(r,s,l,a))}switch(t){case"input":z_(r),y3(r,n,!1);break;case"textarea":z_(r),w3(r);break;case"option":n.value!=null&&r.setAttribute("value",""+fd(n.value));break;case"select":r.multiple=!!n.multiple,s=n.value,s!=null?Ng(r,!!n.multiple,s,!1):n.defaultValue!=null&&Ng(r,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=aS)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vi(e),null;case 6:if(r&&e.stateNode!=null)Ez(r,e,r.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Fe(166));if(t=bf(s1.current),bf(Vl.current),Q_(e)){if(n=e.stateNode,t=e.memoizedProps,n[Ol]=e,(s=n.nodeValue!==t)&&(r=Na,r!==null))switch(r.tag){case 3:Y_(n.nodeValue,t,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Y_(n.nodeValue,t,(r.mode&1)!==0)}s&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[Ol]=e,e.stateNode=n}return Vi(e),null;case 13:if(Vr(Yr),n=e.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Hr&&Sa!==null&&e.mode&1&&!(e.flags&128))z9(),g0(),e.flags|=98560,s=!1;else if(s=Q_(e),n!==null&&n.dehydrated!==null){if(r===null){if(!s)throw Error(Fe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Fe(317));s[Ol]=e}else g0(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vi(e),s=!1}else Uo!==null&&(YD(Uo),Uo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(r!==null&&r.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(r===null||Yr.current&1?Gn===0&&(Gn=3):FR())),e.updateQueue!==null&&(e.flags|=4),Vi(e),null);case 4:return y0(),zD(r,e),r===null&&t1(e.stateNode.containerInfo),Vi(e),null;case 10:return yR(e.type._context),Vi(e),null;case 17:return Ws(e.type)&&oS(),Vi(e),null;case 19:if(Vr(Yr),s=e.memoizedState,s===null)return Vi(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)Ry(s,!1);else{if(Gn!==0||r!==null&&r.flags&128)for(r=e.child;r!==null;){if(a=mS(r),a!==null){for(e.flags|=128,Ry(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)s=t,r=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,r=a.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t=t.sibling;return kr(Yr,Yr.current&1|2),e.child}r=r.sibling}s.tail!==null&&En()>w0&&(e.flags|=128,n=!0,Ry(s,!1),e.lanes=4194304)}else{if(!n)if(r=mS(a),r!==null){if(e.flags|=128,n=!0,t=r.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Ry(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Hr)return Vi(e),null}else 2*En()-s.renderingStartTime>w0&&t!==1073741824&&(e.flags|=128,n=!0,Ry(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(t=s.last,t!==null?t.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=En(),e.sibling=null,t=Yr.current,kr(Yr,n?t&1|2:t&1),e):(Vi(e),null);case 22:case 23:return kR(),n=e.memoizedState!==null,r!==null&&r.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?wa&1073741824&&(Vi(e),e.subtreeFlags&6&&(e.flags|=8192)):Vi(e),null;case 24:return null;case 25:return null}throw Error(Fe(156,e.tag))}function HZ(r,e){switch(mR(e),e.tag){case 1:return Ws(e.type)&&oS(),r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 3:return y0(),Vr(Gs),Vr(ts),AR(),r=e.flags,r&65536&&!(r&128)?(e.flags=r&-65537|128,e):null;case 5:return _R(e),null;case 13:if(Vr(Yr),r=e.memoizedState,r!==null&&r.dehydrated!==null){if(e.alternate===null)throw Error(Fe(340));g0()}return r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 19:return Vr(Yr),null;case 4:return y0(),null;case 10:return yR(e.type._context),null;case 22:case 23:return kR(),null;case 24:return null;default:return null}}var eA=!1,Qi=!1,GZ=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function cg(r,e){var t=r.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){hn(r,e,n)}else t.current=null}function jD(r,e,t){try{t()}catch(n){hn(r,e,n)}}var uB=!1;function WZ(r,e){if(TD=nS,r=D9(),dR(r)){if("selectionStart"in r)var t={start:r.selectionStart,end:r.selectionEnd};else e:{t=(t=r.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,u=0,c=0,h=r,d=null;t:for(;;){for(var f;h!==t||i!==0&&h.nodeType!==3||(o=a+i),h!==s||n!==0&&h.nodeType!==3||(l=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===r)break t;if(d===t&&++u===i&&(o=a),d===s&&++c===n&&(l=a),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(CD={focusedElem:r,selectionRange:t},nS=!1,Qe=e;Qe!==null;)if(e=Qe,r=e.child,(e.subtreeFlags&1028)!==0&&r!==null)r.return=e,Qe=r;else for(;Qe!==null;){e=Qe;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,b=p.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:Co(e.type,g),b);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(A){hn(e,e.return,A)}if(r=e.sibling,r!==null){r.return=e.return,Qe=r;break}Qe=e.return}return p=uB,uB=!1,p}function Ib(r,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&r)===r){var s=i.destroy;i.destroy=void 0,s!==void 0&&jD(e,t,s)}i=i.next}while(i!==n)}}function hC(r,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&r)===r){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function qD(r){var e=r.ref;if(e!==null){var t=r.stateNode;switch(r.tag){case 5:r=t;break;default:r=t}typeof e=="function"?e(r):e.current=r}}function Sz(r){var e=r.alternate;e!==null&&(r.alternate=null,Sz(e)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(e=r.stateNode,e!==null&&(delete e[Ol],delete e[n1],delete e[MD],delete e[DZ],delete e[MZ])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Tz(r){return r.tag===5||r.tag===3||r.tag===4}function cB(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Tz(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function HD(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(r,e):t.insertBefore(r,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(r,t)):(e=t,e.appendChild(r)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=aS));else if(n!==4&&(r=r.child,r!==null))for(HD(r,e,t),r=r.sibling;r!==null;)HD(r,e,t),r=r.sibling}function GD(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.insertBefore(r,e):t.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(GD(r,e,t),r=r.sibling;r!==null;)GD(r,e,t),r=r.sibling}var Ai=null,Vo=!1;function Vc(r,e,t){for(t=t.child;t!==null;)Cz(r,e,t),t=t.sibling}function Cz(r,e,t){if($l&&typeof $l.onCommitFiberUnmount=="function")try{$l.onCommitFiberUnmount(nC,t)}catch{}switch(t.tag){case 5:Qi||cg(t,e);case 6:var n=Ai,i=Vo;Ai=null,Vc(r,e,t),Ai=n,Vo=i,Ai!==null&&(Vo?(r=Ai,t=t.stateNode,r.nodeType===8?r.parentNode.removeChild(t):r.removeChild(t)):Ai.removeChild(t.stateNode));break;case 18:Ai!==null&&(Vo?(r=Ai,t=t.stateNode,r.nodeType===8?QN(r.parentNode,t):r.nodeType===1&&QN(r,t),Jb(r)):QN(Ai,t.stateNode));break;case 4:n=Ai,i=Vo,Ai=t.stateNode.containerInfo,Vo=!0,Vc(r,e,t),Ai=n,Vo=i;break;case 0:case 11:case 14:case 15:if(!Qi&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&jD(t,e,a),i=i.next}while(i!==n)}Vc(r,e,t);break;case 1:if(!Qi&&(cg(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(o){hn(t,e,o)}Vc(r,e,t);break;case 21:Vc(r,e,t);break;case 22:t.mode&1?(Qi=(n=Qi)||t.memoizedState!==null,Vc(r,e,t),Qi=n):Vc(r,e,t);break;default:Vc(r,e,t)}}function hB(r){var e=r.updateQueue;if(e!==null){r.updateQueue=null;var t=r.stateNode;t===null&&(t=r.stateNode=new GZ),e.forEach(function(n){var i=ree.bind(null,r,n);t.has(n)||(t.add(n),n.then(i,i))})}}function _o(r,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];try{var s=r,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Ai=o.stateNode,Vo=!1;break e;case 3:Ai=o.stateNode.containerInfo,Vo=!0;break e;case 4:Ai=o.stateNode.containerInfo,Vo=!0;break e}o=o.return}if(Ai===null)throw Error(Fe(160));Cz(s,a,i),Ai=null,Vo=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){hn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Nz(e,r),e=e.sibling}function Nz(r,e){var t=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(_o(e,r),ll(r),n&4){try{Ib(3,r,r.return),hC(3,r)}catch(g){hn(r,r.return,g)}try{Ib(5,r,r.return)}catch(g){hn(r,r.return,g)}}break;case 1:_o(e,r),ll(r),n&512&&t!==null&&cg(t,t.return);break;case 5:if(_o(e,r),ll(r),n&512&&t!==null&&cg(t,t.return),r.flags&32){var i=r.stateNode;try{Kb(i,"")}catch(g){hn(r,r.return,g)}}if(n&4&&(i=r.stateNode,i!=null)){var s=r.memoizedProps,a=t!==null?t.memoizedProps:s,o=r.type,l=r.updateQueue;if(r.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&YU(i,s),gD(o,a);var u=gD(o,s);for(a=0;a<l.length;a+=2){var c=l[a],h=l[a+1];c==="style"?t9(i,h):c==="dangerouslySetInnerHTML"?ZU(i,h):c==="children"?Kb(i,h):ZP(i,c,h,u)}switch(o){case"input":hD(i,s);break;case"textarea":QU(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Ng(i,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?Ng(i,!!s.multiple,s.defaultValue,!0):Ng(i,!!s.multiple,s.multiple?[]:"",!1))}i[n1]=s}catch(g){hn(r,r.return,g)}}break;case 6:if(_o(e,r),ll(r),n&4){if(r.stateNode===null)throw Error(Fe(162));i=r.stateNode,s=r.memoizedProps;try{i.nodeValue=s}catch(g){hn(r,r.return,g)}}break;case 3:if(_o(e,r),ll(r),n&4&&t!==null&&t.memoizedState.isDehydrated)try{Jb(e.containerInfo)}catch(g){hn(r,r.return,g)}break;case 4:_o(e,r),ll(r);break;case 13:_o(e,r),ll(r),i=r.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(PR=En())),n&4&&hB(r);break;case 22:if(c=t!==null&&t.memoizedState!==null,r.mode&1?(Qi=(u=Qi)||c,_o(e,r),Qi=u):_o(e,r),ll(r),n&8192){if(u=r.memoizedState!==null,(r.stateNode.isHidden=u)&&!c&&r.mode&1)for(Qe=r,c=r.child;c!==null;){for(h=Qe=c;Qe!==null;){switch(d=Qe,f=d.child,d.tag){case 0:case 11:case 14:case 15:Ib(4,d,d.return);break;case 1:cg(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){n=d,t=d.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){hn(n,t,g)}}break;case 5:cg(d,d.return);break;case 22:if(d.memoizedState!==null){fB(h);continue}}f!==null?(f.return=d,Qe=f):fB(h)}c=c.sibling}e:for(c=null,h=r;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=e9("display",a))}catch(g){hn(r,r.return,g)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){hn(r,r.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===r)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:_o(e,r),ll(r),n&4&&hB(r);break;case 21:break;default:_o(e,r),ll(r)}}function ll(r){var e=r.flags;if(e&2){try{e:{for(var t=r.return;t!==null;){if(Tz(t)){var n=t;break e}t=t.return}throw Error(Fe(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Kb(i,""),n.flags&=-33);var s=cB(r);GD(r,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=cB(r);HD(r,o,a);break;default:throw Error(Fe(161))}}catch(l){hn(r,r.return,l)}r.flags&=-3}e&4096&&(r.flags&=-4097)}function KZ(r,e,t){Qe=r,Dz(r)}function Dz(r,e,t){for(var n=(r.mode&1)!==0;Qe!==null;){var i=Qe,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||eA;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Qi;o=eA;var u=Qi;if(eA=a,(Qi=l)&&!u)for(Qe=i;Qe!==null;)a=Qe,l=a.child,a.tag===22&&a.memoizedState!==null?mB(i):l!==null?(l.return=a,Qe=l):mB(i);for(;s!==null;)Qe=s,Dz(s),s=s.sibling;Qe=i,eA=o,Qi=u}dB(r)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Qe=s):dB(r)}}function dB(r){for(;Qe!==null;){var e=Qe;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qi||hC(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Qi)if(t===null)n.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Co(e.type,t.memoizedProps);n.componentDidUpdate(i,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Y3(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Y3(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Jb(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}Qi||e.flags&512&&qD(e)}catch(d){hn(e,e.return,d)}}if(e===r){Qe=null;break}if(t=e.sibling,t!==null){t.return=e.return,Qe=t;break}Qe=e.return}}function fB(r){for(;Qe!==null;){var e=Qe;if(e===r){Qe=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Qe=t;break}Qe=e.return}}function mB(r){for(;Qe!==null;){var e=Qe;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{hC(4,e)}catch(l){hn(e,t,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){hn(e,i,l)}}var s=e.return;try{qD(e)}catch(l){hn(e,s,l)}break;case 5:var a=e.return;try{qD(e)}catch(l){hn(e,a,l)}}}catch(l){hn(e,e.return,l)}if(e===r){Qe=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Qe=o;break}Qe=e.return}}var XZ=Math.ceil,vS=Mc.ReactCurrentDispatcher,MR=Mc.ReactCurrentOwner,co=Mc.ReactCurrentBatchConfig,er=0,pi=null,Pn=null,Pi=0,wa=0,hg=Pd(0),Gn=0,u1=null,Qm=0,dC=0,IR=0,Pb=null,zs=null,PR=0,w0=1/0,pu=null,yS=!1,WD=null,id=null,tA=!1,Kh=null,bS=0,Rb=0,KD=null,QA=-1,JA=0;function ys(){return er&6?En():QA!==-1?QA:QA=En()}function sd(r){return r.mode&1?er&2&&Pi!==0?Pi&-Pi:PZ.transition!==null?(JA===0&&(JA=f9()),JA):(r=fr,r!==0||(r=window.event,r=r===void 0?16:w9(r.type)),r):1}function Wo(r,e,t,n){if(50<Rb)throw Rb=0,KD=null,Error(Fe(185));Mx(r,t,n),(!(er&2)||r!==pi)&&(r===pi&&(!(er&2)&&(dC|=t),Gn===4&&Yc(r,Pi)),Ks(r,n),t===1&&er===0&&!(e.mode&1)&&(w0=En()+500,lC&&Rd()))}function Ks(r,e){var t=r.callbackNode;PJ(r,e);var n=rS(r,r===pi?Pi:0);if(n===0)t!==null&&A3(t),r.callbackNode=null,r.callbackPriority=0;else if(e=n&-n,r.callbackPriority!==e){if(t!=null&&A3(t),e===1)r.tag===0?IZ(pB.bind(null,r)):$9(pB.bind(null,r)),CZ(function(){!(er&6)&&Rd()}),t=null;else{switch(m9(n)){case 1:t=iR;break;case 4:t=h9;break;case 16:t=tS;break;case 536870912:t=d9;break;default:t=tS}t=Bz(t,Mz.bind(null,r))}r.callbackPriority=e,r.callbackNode=t}}function Mz(r,e){if(QA=-1,JA=0,er&6)throw Error(Fe(327));var t=r.callbackNode;if(Rg()&&r.callbackNode!==t)return null;var n=rS(r,r===pi?Pi:0);if(n===0)return null;if(n&30||n&r.expiredLanes||e)e=wS(r,n);else{e=n;var i=er;er|=2;var s=Pz();(pi!==r||Pi!==e)&&(pu=null,w0=En()+500,Vm(r,e));do try{JZ();break}catch(o){Iz(r,o)}while(!0);vR(),vS.current=s,er=i,Pn!==null?e=0:(pi=null,Pi=0,e=Gn)}if(e!==0){if(e===2&&(i=xD(r),i!==0&&(n=i,e=XD(r,i))),e===1)throw t=u1,Vm(r,0),Yc(r,n),Ks(r,En()),t;if(e===6)Yc(r,n);else{if(i=r.current.alternate,!(n&30)&&!YZ(i)&&(e=wS(r,n),e===2&&(s=xD(r),s!==0&&(n=s,e=XD(r,s))),e===1))throw t=u1,Vm(r,0),Yc(r,n),Ks(r,En()),t;switch(r.finishedWork=i,r.finishedLanes=n,e){case 0:case 1:throw Error(Fe(345));case 2:af(r,zs,pu);break;case 3:if(Yc(r,n),(n&130023424)===n&&(e=PR+500-En(),10<e)){if(rS(r,0)!==0)break;if(i=r.suspendedLanes,(i&n)!==n){ys(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=DD(af.bind(null,r,zs,pu),e);break}af(r,zs,pu);break;case 4:if(Yc(r,n),(n&4194240)===n)break;for(e=r.eventTimes,i=-1;0<n;){var a=31-Go(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=En()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*XZ(n/1960))-n,10<n){r.timeoutHandle=DD(af.bind(null,r,zs,pu),n);break}af(r,zs,pu);break;case 5:af(r,zs,pu);break;default:throw Error(Fe(329))}}}return Ks(r,En()),r.callbackNode===t?Mz.bind(null,r):null}function XD(r,e){var t=Pb;return r.current.memoizedState.isDehydrated&&(Vm(r,e).flags|=256),r=wS(r,e),r!==2&&(e=zs,zs=t,e!==null&&YD(e)),r}function YD(r){zs===null?zs=r:zs.push.apply(zs,r)}function YZ(r){for(var e=r;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var i=t[n],s=i.getSnapshot;i=i.value;try{if(!Xo(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yc(r,e){for(e&=~IR,e&=~dC,r.suspendedLanes|=e,r.pingedLanes&=~e,r=r.expirationTimes;0<e;){var t=31-Go(e),n=1<<t;r[t]=-1,e&=~n}}function pB(r){if(er&6)throw Error(Fe(327));Rg();var e=rS(r,0);if(!(e&1))return Ks(r,En()),null;var t=wS(r,e);if(r.tag!==0&&t===2){var n=xD(r);n!==0&&(e=n,t=XD(r,n))}if(t===1)throw t=u1,Vm(r,0),Yc(r,e),Ks(r,En()),t;if(t===6)throw Error(Fe(345));return r.finishedWork=r.current.alternate,r.finishedLanes=e,af(r,zs,pu),Ks(r,En()),null}function RR(r,e){var t=er;er|=1;try{return r(e)}finally{er=t,er===0&&(w0=En()+500,lC&&Rd())}}function Jm(r){Kh!==null&&Kh.tag===0&&!(er&6)&&Rg();var e=er;er|=1;var t=co.transition,n=fr;try{if(co.transition=null,fr=1,r)return r()}finally{fr=n,co.transition=t,er=e,!(er&6)&&Rd()}}function kR(){wa=hg.current,Vr(hg)}function Vm(r,e){r.finishedWork=null,r.finishedLanes=0;var t=r.timeoutHandle;if(t!==-1&&(r.timeoutHandle=-1,TZ(t)),Pn!==null)for(t=Pn.return;t!==null;){var n=t;switch(mR(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&oS();break;case 3:y0(),Vr(Gs),Vr(ts),AR();break;case 5:_R(n);break;case 4:y0();break;case 13:Vr(Yr);break;case 19:Vr(Yr);break;case 10:yR(n.type._context);break;case 22:case 23:kR()}t=t.return}if(pi=r,Pn=r=ad(r.current,null),Pi=wa=e,Gn=0,u1=null,IR=dC=Qm=0,zs=Pb=null,yf!==null){for(e=0;e<yf.length;e++)if(t=yf[e],n=t.interleaved,n!==null){t.interleaved=null;var i=n.next,s=t.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}t.pending=n}yf=null}return r}function Iz(r,e){do{var t=Pn;try{if(vR(),KA.current=gS,pS){for(var n=Jr.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}pS=!1}if(Ym=0,fi=qn=Jr=null,Mb=!1,a1=0,MR.current=null,t===null||t.return===null){Gn=1,u1=e,Pn=null;break}e:{var s=r,a=t.return,o=t,l=e;if(e=Pi,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=rB(a);if(f!==null){f.flags&=-257,nB(f,a,o,s,e),f.mode&1&&tB(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){tB(s,u,e),FR();break e}l=Error(Fe(426))}}else if(Hr&&o.mode&1){var b=rB(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),nB(b,a,o,s,e),pR(b0(l,o));break e}}s=l=b0(l,o),Gn!==4&&(Gn=2),Pb===null?Pb=[s]:Pb.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=mz(s,l,e);X3(s,v);break e;case 1:o=l;var w=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(id===null||!id.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=pz(s,o,e);X3(s,A);break e}}s=s.return}while(s!==null)}kz(t)}catch(x){e=x,Pn===t&&t!==null&&(Pn=t=t.return);continue}break}while(!0)}function Pz(){var r=vS.current;return vS.current=gS,r===null?gS:r}function FR(){(Gn===0||Gn===3||Gn===2)&&(Gn=4),pi===null||!(Qm&268435455)&&!(dC&268435455)||Yc(pi,Pi)}function wS(r,e){var t=er;er|=2;var n=Pz();(pi!==r||Pi!==e)&&(pu=null,Vm(r,e));do try{QZ();break}catch(i){Iz(r,i)}while(!0);if(vR(),er=t,vS.current=n,Pn!==null)throw Error(Fe(261));return pi=null,Pi=0,Gn}function QZ(){for(;Pn!==null;)Rz(Pn)}function JZ(){for(;Pn!==null&&!AJ();)Rz(Pn)}function Rz(r){var e=Oz(r.alternate,r,wa);r.memoizedProps=r.pendingProps,e===null?kz(r):Pn=e,MR.current=null}function kz(r){var e=r;do{var t=e.alternate;if(r=e.return,e.flags&32768){if(t=HZ(t,e),t!==null){t.flags&=32767,Pn=t;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Gn=6,Pn=null;return}}else if(t=qZ(t,e,wa),t!==null){Pn=t;return}if(e=e.sibling,e!==null){Pn=e;return}Pn=e=r}while(e!==null);Gn===0&&(Gn=5)}function af(r,e,t){var n=fr,i=co.transition;try{co.transition=null,fr=1,ZZ(r,e,t,n)}finally{co.transition=i,fr=n}return null}function ZZ(r,e,t,n){do Rg();while(Kh!==null);if(er&6)throw Error(Fe(327));t=r.finishedWork;var i=r.finishedLanes;if(t===null)return null;if(r.finishedWork=null,r.finishedLanes=0,t===r.current)throw Error(Fe(177));r.callbackNode=null,r.callbackPriority=0;var s=t.lanes|t.childLanes;if(RJ(r,s),r===pi&&(Pn=pi=null,Pi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||tA||(tA=!0,Bz(tS,function(){return Rg(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=co.transition,co.transition=null;var a=fr;fr=1;var o=er;er|=4,MR.current=null,WZ(r,t),Nz(t,r),bZ(CD),nS=!!TD,CD=TD=null,r.current=t,KZ(t),EJ(),er=o,fr=a,co.transition=s}else r.current=t;if(tA&&(tA=!1,Kh=r,bS=i),s=r.pendingLanes,s===0&&(id=null),CJ(t.stateNode),Ks(r,En()),e!==null)for(n=r.onRecoverableError,t=0;t<e.length;t++)i=e[t],n(i.value,{componentStack:i.stack,digest:i.digest});if(yS)throw yS=!1,r=WD,WD=null,r;return bS&1&&r.tag!==0&&Rg(),s=r.pendingLanes,s&1?r===KD?Rb++:(Rb=0,KD=r):Rb=0,Rd(),null}function Rg(){if(Kh!==null){var r=m9(bS),e=co.transition,t=fr;try{if(co.transition=null,fr=16>r?16:r,Kh===null)var n=!1;else{if(r=Kh,Kh=null,bS=0,er&6)throw Error(Fe(331));var i=er;for(er|=4,Qe=r.current;Qe!==null;){var s=Qe,a=s.child;if(Qe.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(Qe=u;Qe!==null;){var c=Qe;switch(c.tag){case 0:case 11:case 15:Ib(8,c,s)}var h=c.child;if(h!==null)h.return=c,Qe=h;else for(;Qe!==null;){c=Qe;var d=c.sibling,f=c.return;if(Sz(c),c===u){Qe=null;break}if(d!==null){d.return=f,Qe=d;break}Qe=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}Qe=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Qe=a;else e:for(;Qe!==null;){if(s=Qe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ib(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Qe=v;break e}Qe=s.return}}var w=r.current;for(Qe=w;Qe!==null;){a=Qe;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,Qe=y;else e:for(a=w;Qe!==null;){if(o=Qe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:hC(9,o)}}catch(x){hn(o,o.return,x)}if(o===a){Qe=null;break e}var A=o.sibling;if(A!==null){A.return=o.return,Qe=A;break e}Qe=o.return}}if(er=i,Rd(),$l&&typeof $l.onPostCommitFiberRoot=="function")try{$l.onPostCommitFiberRoot(nC,r)}catch{}n=!0}return n}finally{fr=t,co.transition=e}}return!1}function gB(r,e,t){e=b0(t,e),e=mz(r,e,1),r=nd(r,e,1),e=ys(),r!==null&&(Mx(r,1,e),Ks(r,e))}function hn(r,e,t){if(r.tag===3)gB(r,r,t);else for(;e!==null;){if(e.tag===3){gB(e,r,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(id===null||!id.has(n))){r=b0(t,r),r=pz(e,r,1),e=nd(e,r,1),r=ys(),e!==null&&(Mx(e,1,r),Ks(e,r));break}}e=e.return}}function eee(r,e,t){var n=r.pingCache;n!==null&&n.delete(e),e=ys(),r.pingedLanes|=r.suspendedLanes&t,pi===r&&(Pi&t)===t&&(Gn===4||Gn===3&&(Pi&130023424)===Pi&&500>En()-PR?Vm(r,0):IR|=t),Ks(r,e)}function Fz(r,e){e===0&&(r.mode&1?(e=H_,H_<<=1,!(H_&130023424)&&(H_=4194304)):e=1);var t=ys();r=gc(r,e),r!==null&&(Mx(r,e,t),Ks(r,t))}function tee(r){var e=r.memoizedState,t=0;e!==null&&(t=e.retryLane),Fz(r,t)}function ree(r,e){var t=0;switch(r.tag){case 13:var n=r.stateNode,i=r.memoizedState;i!==null&&(t=i.retryLane);break;case 19:n=r.stateNode;break;default:throw Error(Fe(314))}n!==null&&n.delete(e),Fz(r,t)}var Oz;Oz=function(r,e,t){if(r!==null)if(r.memoizedProps!==e.pendingProps||Gs.current)qs=!0;else{if(!(r.lanes&t)&&!(e.flags&128))return qs=!1,jZ(r,e,t);qs=!!(r.flags&131072)}else qs=!1,Hr&&e.flags&1048576&&V9(e,cS,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;YA(r,e),r=e.pendingProps;var i=p0(e,ts.current);Pg(e,t),i=SR(null,e,n,r,i,t);var s=TR();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ws(n)?(s=!0,lS(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wR(e),i.updater=cC,e.stateNode=i,i._reactInternals=e,OD(e,n,r,t),e=$D(null,e,n,!0,s,t)):(e.tag=0,Hr&&s&&fR(e),ps(null,e,i,t),e=e.child),e;case 16:n=e.elementType;e:{switch(YA(r,e),r=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=iee(n),r=Co(n,r),i){case 0:e=LD(null,e,n,r,t);break e;case 1:e=aB(null,e,n,r,t);break e;case 11:e=iB(null,e,n,r,t);break e;case 14:e=sB(null,e,n,Co(n.type,r),t);break e}throw Error(Fe(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Co(n,i),LD(r,e,n,i,t);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Co(n,i),aB(r,e,n,i,t);case 3:e:{if(bz(e),r===null)throw Error(Fe(387));n=e.pendingProps,s=e.memoizedState,i=s.element,G9(r,e),fS(e,n,null,t);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=b0(Error(Fe(423)),e),e=oB(r,e,n,t,i);break e}else if(n!==i){i=b0(Error(Fe(424)),e),e=oB(r,e,n,t,i);break e}else for(Sa=rd(e.stateNode.containerInfo.firstChild),Na=e,Hr=!0,Uo=null,t=q9(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(g0(),n===i){e=vc(r,e,t);break e}ps(r,e,n,t)}e=e.child}return e;case 5:return W9(e),r===null&&RD(e),n=e.type,i=e.pendingProps,s=r!==null?r.memoizedProps:null,a=i.children,ND(n,i)?a=null:s!==null&&ND(n,s)&&(e.flags|=32),yz(r,e),ps(r,e,a,t),e.child;case 6:return r===null&&RD(e),null;case 13:return wz(r,e,t);case 4:return xR(e,e.stateNode.containerInfo),n=e.pendingProps,r===null?e.child=v0(e,null,n,t):ps(r,e,n,t),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Co(n,i),iB(r,e,n,i,t);case 7:return ps(r,e,e.pendingProps,t),e.child;case 8:return ps(r,e,e.pendingProps.children,t),e.child;case 12:return ps(r,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,kr(hS,n._currentValue),n._currentValue=a,s!==null)if(Xo(s.value,a)){if(s.children===i.children&&!Gs.current){e=vc(r,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=ac(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),kD(s.return,t,e),o.lanes|=t;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Fe(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),kD(a,t,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}ps(r,e,i.children,t),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Pg(e,t),i=po(i),n=n(i),e.flags|=1,ps(r,e,n,t),e.child;case 14:return n=e.type,i=Co(n,e.pendingProps),i=Co(n.type,i),sB(r,e,n,i,t);case 15:return gz(r,e,e.type,e.pendingProps,t);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Co(n,i),YA(r,e),e.tag=1,Ws(n)?(r=!0,lS(e)):r=!1,Pg(e,t),fz(e,n,i),OD(e,n,i,t),$D(null,e,n,!0,r,t);case 19:return xz(r,e,t);case 22:return vz(r,e,t)}throw Error(Fe(156,e.tag))};function Bz(r,e){return c9(r,e)}function nee(r,e,t,n){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lo(r,e,t,n){return new nee(r,e,t,n)}function OR(r){return r=r.prototype,!(!r||!r.isReactComponent)}function iee(r){if(typeof r=="function")return OR(r)?1:0;if(r!=null){if(r=r.$$typeof,r===tR)return 11;if(r===rR)return 14}return 2}function ad(r,e){var t=r.alternate;return t===null?(t=lo(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=r.flags&14680064,t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t}function ZA(r,e,t,n,i,s){var a=2;if(n=r,typeof r=="function")OR(r)&&(a=1);else if(typeof r=="string")a=5;else e:switch(r){case tg:return Um(t.children,i,s,e);case eR:a=8,i|=8;break;case aD:return r=lo(12,t,e,i|2),r.elementType=aD,r.lanes=s,r;case oD:return r=lo(13,t,e,i),r.elementType=oD,r.lanes=s,r;case lD:return r=lo(19,t,e,i),r.elementType=lD,r.lanes=s,r;case WU:return fC(t,i,s,e);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case HU:a=10;break e;case GU:a=9;break e;case tR:a=11;break e;case rR:a=14;break e;case Hc:a=16,n=null;break e}throw Error(Fe(130,r==null?r:typeof r,""))}return e=lo(a,t,e,i),e.elementType=r,e.type=n,e.lanes=s,e}function Um(r,e,t,n){return r=lo(7,r,n,e),r.lanes=t,r}function fC(r,e,t,n){return r=lo(22,r,n,e),r.elementType=WU,r.lanes=t,r.stateNode={isHidden:!1},r}function s2(r,e,t){return r=lo(6,r,null,e),r.lanes=t,r}function a2(r,e,t){return e=lo(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}function see(r,e,t,n,i){this.tag=e,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=VN(0),this.expirationTimes=VN(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=VN(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function BR(r,e,t,n,i,s,a,o,l){return r=new see(r,e,t,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=lo(3,null,null,e),r.current=s,s.stateNode=r,s.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},wR(s),r}function aee(r,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:eg,key:n==null?null:""+n,children:r,containerInfo:e,implementation:t}}function Lz(r){if(!r)return md;r=r._reactInternals;e:{if(hp(r)!==r||r.tag!==1)throw Error(Fe(170));var e=r;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ws(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Fe(171))}if(r.tag===1){var t=r.type;if(Ws(t))return L9(r,t,e)}return e}function $z(r,e,t,n,i,s,a,o,l){return r=BR(t,n,!0,r,i,s,a,o,l),r.context=Lz(null),t=r.current,n=ys(),i=sd(t),s=ac(n,i),s.callback=e??null,nd(t,s,i),r.current.lanes=i,Mx(r,i,n),Ks(r,n),r}function mC(r,e,t,n){var i=e.current,s=ys(),a=sd(i);return t=Lz(t),e.context===null?e.context=t:e.pendingContext=t,e=ac(s,a),e.payload={element:r},n=n===void 0?null:n,n!==null&&(e.callback=n),r=nd(i,e,a),r!==null&&(Wo(r,i,a,s),WA(r,i,a)),a}function xS(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function vB(r,e){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&&t<e?t:e}}function LR(r,e){vB(r,e),(r=r.alternate)&&vB(r,e)}function oee(){return null}var Vz=typeof reportError=="function"?reportError:function(r){console.error(r)};function $R(r){this._internalRoot=r}pC.prototype.render=$R.prototype.render=function(r){var e=this._internalRoot;if(e===null)throw Error(Fe(409));mC(r,e,null,null)};pC.prototype.unmount=$R.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var e=r.containerInfo;Jm(function(){mC(null,r,null,null)}),e[pc]=null}};function pC(r){this._internalRoot=r}pC.prototype.unstable_scheduleHydration=function(r){if(r){var e=v9();r={blockedOn:null,target:r,priority:e};for(var t=0;t<Xc.length&&e!==0&&e<Xc[t].priority;t++);Xc.splice(t,0,r),t===0&&b9(r)}};function VR(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function gC(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function yB(){}function lee(r,e,t,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=xS(a);s.call(u)}}var a=$z(e,n,r,0,null,!1,!1,"",yB);return r._reactRootContainer=a,r[pc]=a.current,t1(r.nodeType===8?r.parentNode:r),Jm(),a}for(;i=r.lastChild;)r.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=xS(l);o.call(u)}}var l=BR(r,0,!1,null,null,!1,!1,"",yB);return r._reactRootContainer=l,r[pc]=l.current,t1(r.nodeType===8?r.parentNode:r),Jm(function(){mC(e,l,t,n)}),l}function vC(r,e,t,n,i){var s=t._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=xS(a);o.call(l)}}mC(e,a,r,i)}else a=lee(t,e,r,i,n);return xS(a)}p9=function(r){switch(r.tag){case 3:var e=r.stateNode;if(e.current.memoizedState.isDehydrated){var t=Wy(e.pendingLanes);t!==0&&(sR(e,t|1),Ks(e,En()),!(er&6)&&(w0=En()+500,Rd()))}break;case 13:Jm(function(){var n=gc(r,1);if(n!==null){var i=ys();Wo(n,r,1,i)}}),LR(r,1)}};aR=function(r){if(r.tag===13){var e=gc(r,134217728);if(e!==null){var t=ys();Wo(e,r,134217728,t)}LR(r,134217728)}};g9=function(r){if(r.tag===13){var e=sd(r),t=gc(r,e);if(t!==null){var n=ys();Wo(t,r,e,n)}LR(r,e)}};v9=function(){return fr};y9=function(r,e){var t=fr;try{return fr=r,e()}finally{fr=t}};yD=function(r,e,t){switch(e){case"input":if(hD(r,t),e=t.name,t.type==="radio"&&e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==r&&n.form===r.form){var i=oC(n);if(!i)throw Error(Fe(90));XU(n),hD(n,i)}}}break;case"textarea":QU(r,t);break;case"select":e=t.value,e!=null&&Ng(r,!!t.multiple,e,!1)}};i9=RR;s9=Jm;var uee={usingClientEntryPoint:!1,Events:[Px,sg,oC,r9,n9,RR]},ky={findFiberByHostInstance:vf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cee={bundleType:ky.bundleType,version:ky.version,rendererPackageName:ky.rendererPackageName,rendererConfig:ky.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mc.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=l9(r),r===null?null:r.stateNode},findFiberByHostInstance:ky.findFiberByHostInstance||oee,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rA=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rA.isDisabled&&rA.supportsFiber)try{nC=rA.inject(cee),$l=rA}catch{}}Pa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uee;Pa.createPortal=function(r,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!VR(e))throw Error(Fe(200));return aee(r,e,null,t)};Pa.createRoot=function(r,e){if(!VR(r))throw Error(Fe(299));var t=!1,n="",i=Vz;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=BR(r,1,!1,null,null,t,!1,n,i),r[pc]=e.current,t1(r.nodeType===8?r.parentNode:r),new $R(e)};Pa.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(Fe(188)):(r=Object.keys(r).join(","),Error(Fe(268,r)));return r=l9(e),r=r===null?null:r.stateNode,r};Pa.flushSync=function(r){return Jm(r)};Pa.hydrate=function(r,e,t){if(!gC(e))throw Error(Fe(200));return vC(null,r,e,!0,t)};Pa.hydrateRoot=function(r,e,t){if(!VR(r))throw Error(Fe(405));var n=t!=null&&t.hydratedSources||null,i=!1,s="",a=Vz;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=$z(e,null,r,1,t??null,i,!1,s,a),r[pc]=e.current,t1(r),n)for(r=0;r<n.length;r++)t=n[r],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new pC(e)};Pa.render=function(r,e,t){if(!gC(e))throw Error(Fe(200));return vC(null,r,e,!1,t)};Pa.unmountComponentAtNode=function(r){if(!gC(r))throw Error(Fe(40));return r._reactRootContainer?(Jm(function(){vC(null,null,r,!1,function(){r._reactRootContainer=null,r[pc]=null})}),!0):!1};Pa.unstable_batchedUpdates=RR;Pa.unstable_renderSubtreeIntoContainer=function(r,e,t,n){if(!gC(t))throw Error(Fe(200));if(r==null||r._reactInternals===void 0)throw Error(Fe(38));return vC(r,e,t,!1,n)};Pa.version="18.3.1-next-f1338f8080-20240426";function Uz(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Uz)}catch(r){console.error(r)}}Uz(),UU.exports=Pa;var hee=UU.exports,bB=hee;iD.createRoot=bB.createRoot,iD.hydrateRoot=bB.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function c1(){return c1=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},c1.apply(this,arguments)}var Xh;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Xh||(Xh={}));const wB="popstate";function dee(r){r===void 0&&(r={});function e(n,i){let{pathname:s,search:a,hash:o}=n.location;return QD("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:_S(i)}return mee(e,t,null,r)}function Sn(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function UR(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fee(){return Math.random().toString(36).substr(2,8)}function xB(r,e){return{usr:r.state,key:r.key,idx:e}}function QD(r,e,t,n){return t===void 0&&(t=null),c1({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?V0(e):e,{state:t,key:e&&e.key||n||fee()})}function _S(r){let{pathname:e="/",search:t="",hash:n=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function V0(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substr(n),r=r.substr(0,n)),r&&(e.pathname=r)}return e}function mee(r,e,t,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,o=Xh.Pop,l=null,u=c();u==null&&(u=0,a.replaceState(c1({},a.state,{idx:u}),""));function c(){return(a.state||{idx:null}).idx}function h(){o=Xh.Pop;let b=c(),v=b==null?null:b-u;u=b,l&&l({action:o,location:g.location,delta:v})}function d(b,v){o=Xh.Push;let w=QD(g.location,b,v);u=c()+1;let y=xB(w,u),A=g.createHref(w);try{a.pushState(y,"",A)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(A)}s&&l&&l({action:o,location:g.location,delta:1})}function f(b,v){o=Xh.Replace;let w=QD(g.location,b,v);u=c();let y=xB(w,u),A=g.createHref(w);a.replaceState(y,"",A),s&&l&&l({action:o,location:g.location,delta:0})}function p(b){let v=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof b=="string"?b:_S(b);return w=w.replace(/ $/,"%20"),Sn(v,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,v)}let g={get action(){return o},get location(){return r(i,a)},listen(b){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(wB,h),l=b,()=>{i.removeEventListener(wB,h),l=null}},createHref(b){return e(i,b)},createURL:p,encodeLocation(b){let v=p(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:f,go(b){return a.go(b)}};return g}var _B;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(_B||(_B={}));function pee(r,e,t){return t===void 0&&(t="/"),gee(r,e,t)}function gee(r,e,t,n){let i=typeof e=="string"?V0(e):e,s=zR(i.pathname||"/",t);if(s==null)return null;let a=zz(r);vee(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=Dee(s);o=Tee(a[l],u)}return o}function zz(r,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let i=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(Sn(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=od([n,l.relativePath]),c=t.concat(l);s.children&&s.children.length>0&&(Sn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),zz(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:Eee(u,s.index),routesMeta:c})};return r.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))i(s,a);else for(let l of jz(s.path))i(s,a,l)}),e}function jz(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=jz(n.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),i&&o.push(...a),o.map(l=>r.startsWith("/")&&l===""?"/":l)}function vee(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:See(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const yee=/^:[\w-]+$/,bee=3,wee=2,xee=1,_ee=10,Aee=-2,AB=r=>r==="*";function Eee(r,e){let t=r.split("/"),n=t.length;return t.some(AB)&&(n+=Aee),e&&(n+=wee),t.filter(i=>!AB(i)).reduce((i,s)=>i+(yee.test(s)?bee:s===""?xee:_ee),n)}function See(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function Tee(r,e,t){let{routesMeta:n}=r,i={},s="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",h=Cee({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),d=l.route;if(!h)return null;Object.assign(i,h.params),a.push({params:i,pathname:od([s,h.pathname]),pathnameBase:kee(od([s,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(s=od([s,h.pathnameBase]))}return a}function Cee(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=Nee(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((u,c,h)=>{let{paramName:d,isOptional:f}=c;if(d==="*"){let g=o[h]||"";a=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const p=o[h];return f&&!p?u[d]=void 0:u[d]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:r}}function Nee(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),UR(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Dee(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return UR(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function zR(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}const Mee=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Iee=r=>Mee.test(r);function Pee(r,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?V0(r):r,s;if(t)if(Iee(t))s=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),UR(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+t))}t.startsWith("/")?s=EB(t.substring(1),"/"):s=EB(t,e)}else s=e;return{pathname:s,search:Fee(n),hash:Oee(i)}}function EB(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function o2(r,e,t,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ree(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function jR(r,e){let t=Ree(r);return e?t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function qR(r,e,t,n){n===void 0&&(n=!1);let i;typeof r=="string"?i=V0(r):(i=c1({},r),Sn(!i.pathname||!i.pathname.includes("?"),o2("?","pathname","search",i)),Sn(!i.pathname||!i.pathname.includes("#"),o2("#","pathname","hash",i)),Sn(!i.search||!i.search.includes("#"),o2("#","search","hash",i)));let s=r===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=t;else{let h=e.length-1;if(!n&&a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),h-=1;i.pathname=d.join("/")}o=h>=0?e[h]:"/"}let l=Pee(i,o),u=a&&a!=="/"&&a.endsWith("/"),c=(s||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const od=r=>r.join("/").replace(/\/\/+/g,"/"),kee=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Fee=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Oee=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Bee(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const qz=["post","put","patch","delete"];new Set(qz);const Lee=["get",...qz];new Set(Lee);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function h1(){return h1=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},h1.apply(this,arguments)}const HR=se.createContext(null),$ee=se.createContext(null),kd=se.createContext(null),yC=se.createContext(null),nu=se.createContext({outlet:null,matches:[],isDataRoute:!1}),Hz=se.createContext(null);function Vee(r,e){let{relative:t}=e===void 0?{}:e;U0()||Sn(!1);let{basename:n,navigator:i}=se.useContext(kd),{hash:s,pathname:a,search:o}=Kz(r,{relative:t}),l=a;return n!=="/"&&(l=a==="/"?n:od([n,a])),i.createHref({pathname:l,search:o,hash:s})}function U0(){return se.useContext(yC)!=null}function z0(){return U0()||Sn(!1),se.useContext(yC).location}function Gz(r){se.useContext(kd).static||se.useLayoutEffect(r)}function j0(){let{isDataRoute:r}=se.useContext(nu);return r?tte():Uee()}function Uee(){U0()||Sn(!1);let r=se.useContext(HR),{basename:e,future:t,navigator:n}=se.useContext(kd),{matches:i}=se.useContext(nu),{pathname:s}=z0(),a=JSON.stringify(jR(i,t.v7_relativeSplatPath)),o=se.useRef(!1);return Gz(()=>{o.current=!0}),se.useCallback(function(u,c){if(c===void 0&&(c={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=qR(u,JSON.parse(a),s,c.relative==="path");r==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:od([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,a,s,r])}const zee=se.createContext(null);function jee(r){let e=se.useContext(nu).outlet;return e&&se.createElement(zee.Provider,{value:r},e)}function Wz(){let{matches:r}=se.useContext(nu),e=r[r.length-1];return e?e.params:{}}function Kz(r,e){let{relative:t}=e===void 0?{}:e,{future:n}=se.useContext(kd),{matches:i}=se.useContext(nu),{pathname:s}=z0(),a=JSON.stringify(jR(i,n.v7_relativeSplatPath));return se.useMemo(()=>qR(r,JSON.parse(a),s,t==="path"),[r,a,s,t])}function qee(r,e){return Hee(r,e)}function Hee(r,e,t,n){U0()||Sn(!1);let{navigator:i}=se.useContext(kd),{matches:s}=se.useContext(nu),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=z0(),c;if(e){var h;let b=typeof e=="string"?V0(e):e;l==="/"||(h=b.pathname)!=null&&h.startsWith(l)||Sn(!1),c=b}else c=u;let d=c.pathname||"/",f=d;if(l!=="/"){let b=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(b.length).join("/")}let p=pee(r,{pathname:f}),g=Yee(p&&p.map(b=>Object.assign({},b,{params:Object.assign({},o,b.params),pathname:od([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:od([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,t,n);return e&&g?se.createElement(yC.Provider,{value:{location:h1({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Xh.Pop}},g):g}function Gee(){let r=ete(),e=Bee(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return se.createElement(se.Fragment,null,se.createElement("h2",null,"Unexpected Application Error!"),se.createElement("h3",{style:{fontStyle:"italic"}},e),t?se.createElement("pre",{style:i},t):null,null)}const Wee=se.createElement(Gee,null);class Kee extends se.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?se.createElement(nu.Provider,{value:this.props.routeContext},se.createElement(Hz.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Xee(r){let{routeContext:e,match:t,children:n}=r,i=se.useContext(HR);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),se.createElement(nu.Provider,{value:e},n)}function Yee(r,e,t,n){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),r==null){var s;if(!t)return null;if(t.errors)r=t.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let a=r,o=(i=t)==null?void 0:i.errors;if(o!=null){let c=a.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);c>=0||Sn(!1),a=a.slice(0,Math.min(a.length,c+1))}let l=!1,u=-1;if(t&&n&&n.v7_partialHydration)for(let c=0;c<a.length;c++){let h=a[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:d,errors:f}=t,p=h.route.loader&&d[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||p){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,h,d)=>{let f,p=!1,g=null,b=null;t&&(f=o&&h.route.id?o[h.route.id]:void 0,g=h.route.errorElement||Wee,l&&(u<0&&d===0?(rte("route-fallback"),p=!0,b=null):u===d&&(p=!0,b=h.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,d+1)),w=()=>{let y;return f?y=g:p?y=b:h.route.Component?y=se.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=c,se.createElement(Xee,{match:h,routeContext:{outlet:c,matches:v,isDataRoute:t!=null},children:y})};return t&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?se.createElement(Kee,{location:t.location,revalidation:t.revalidation,component:g,error:f,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}var Xz=function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r}(Xz||{}),Yz=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(Yz||{});function Qee(r){let e=se.useContext(HR);return e||Sn(!1),e}function Jee(r){let e=se.useContext($ee);return e||Sn(!1),e}function Zee(r){let e=se.useContext(nu);return e||Sn(!1),e}function Qz(r){let e=Zee(),t=e.matches[e.matches.length-1];return t.route.id||Sn(!1),t.route.id}function ete(){var r;let e=se.useContext(Hz),t=Jee(),n=Qz();return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function tte(){let{router:r}=Qee(Xz.UseNavigateStable),e=Qz(Yz.UseNavigateStable),t=se.useRef(!1);return Gz(()=>{t.current=!0}),se.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?r.navigate(i):r.navigate(i,h1({fromRouteId:e},s)))},[r,e])}const SB={};function rte(r,e,t){SB[r]||(SB[r]=!0)}function nte(r,e){r==null||r.v7_startTransition,r==null||r.v7_relativeSplatPath}function ite(r){let{to:e,replace:t,state:n,relative:i}=r;U0()||Sn(!1);let{future:s,static:a}=se.useContext(kd),{matches:o}=se.useContext(nu),{pathname:l}=z0(),u=j0(),c=qR(e,jR(o,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(c);return se.useEffect(()=>u(JSON.parse(h),{replace:t,state:n,relative:i}),[u,h,i,t,n]),null}function ste(r){return jee(r.context)}function ri(r){Sn(!1)}function ate(r){let{basename:e="/",children:t=null,location:n,navigationType:i=Xh.Pop,navigator:s,static:a=!1,future:o}=r;U0()&&Sn(!1);let l=e.replace(/^\/*/,"/"),u=se.useMemo(()=>({basename:l,navigator:s,static:a,future:h1({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof n=="string"&&(n=V0(n));let{pathname:c="/",search:h="",hash:d="",state:f=null,key:p="default"}=n,g=se.useMemo(()=>{let b=zR(c,l);return b==null?null:{location:{pathname:b,search:h,hash:d,state:f,key:p},navigationType:i}},[l,c,h,d,f,p,i]);return g==null?null:se.createElement(kd.Provider,{value:u},se.createElement(yC.Provider,{children:t,value:g}))}function ote(r){let{children:e,location:t}=r;return qee(JD(e),t)}new Promise(()=>{});function JD(r,e){e===void 0&&(e=[]);let t=[];return se.Children.forEach(r,(n,i)=>{if(!se.isValidElement(n))return;let s=[...e,i];if(n.type===se.Fragment){t.push.apply(t,JD(n.props.children,s));return}n.type!==ri&&Sn(!1),!n.props.index||!n.props.children||Sn(!1);let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=JD(n.props.children,s)),t.push(a)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ZD(){return ZD=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},ZD.apply(this,arguments)}function lte(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function ute(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function cte(r,e){return r.button===0&&(!e||e==="_self")&&!ute(r)}const hte=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],dte="6";try{window.__reactRouterVersion=dte}catch{}const fte="startTransition",TB=eJ[fte];function mte(r){let{basename:e,children:t,future:n,window:i}=r,s=se.useRef();s.current==null&&(s.current=dee({window:i,v5Compat:!0}));let a=s.current,[o,l]=se.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},c=se.useCallback(h=>{u&&TB?TB(()=>l(h)):l(h)},[l,u]);return se.useLayoutEffect(()=>a.listen(c),[a,c]),se.useEffect(()=>nte(n),[n]),se.createElement(ate,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,future:n})}const pte=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gte=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cr=se.forwardRef(function(e,t){let{onClick:n,relative:i,reloadDocument:s,replace:a,state:o,target:l,to:u,preventScrollReset:c,viewTransition:h}=e,d=lte(e,hte),{basename:f}=se.useContext(kd),p,g=!1;if(typeof u=="string"&&gte.test(u)&&(p=u,pte))try{let y=new URL(window.location.href),A=u.startsWith("//")?new URL(y.protocol+u):new URL(u),x=zR(A.pathname,f);A.origin===y.origin&&x!=null?u=x+A.search+A.hash:g=!0}catch{}let b=Vee(u,{relative:i}),v=vte(u,{replace:a,state:o,target:l,preventScrollReset:c,relative:i,viewTransition:h});function w(y){n&&n(y),y.defaultPrevented||v(y)}return se.createElement("a",ZD({},d,{href:p||b,onClick:g||s?n:w,ref:t,target:l}))});var CB;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(CB||(CB={}));var NB;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(NB||(NB={}));function vte(r,e){let{target:t,replace:n,state:i,preventScrollReset:s,relative:a,viewTransition:o}=e===void 0?{}:e,l=j0(),u=z0(),c=Kz(r,{relative:a});return se.useCallback(h=>{if(cte(h,t)){h.preventDefault();let d=n!==void 0?n:_S(u)===_S(c);l(r,{replace:d,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[u,l,c,n,i,t,r,s,a,o])}const Jz=se.createContext(),Qs=()=>{const r=se.useContext(Jz);if(!r)throw new Error("useTheme must be used within ThemeProvider");return r},yte=({children:r})=>{const[e,t]=se.useState(()=>{const i=localStorage.getItem("theme");return i?i==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});se.useEffect(()=>{const i=document.documentElement;e?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",e?"dark":"light")},[e]);const n=()=>{t(i=>!i)};return P.jsx(Jz.Provider,{value:{isDark:e,toggleTheme:n},children:r})},Zz="authToken",e7="user",bte=()=>localStorage.getItem(Zz),wte=()=>{localStorage.removeItem(Zz)},yc=()=>{const r=localStorage.getItem(e7);return r?JSON.parse(r):null},xte=()=>{localStorage.removeItem(e7)},eM=()=>!!bte(),_te=()=>{wte(),xte()};function Ate(){const{isDark:r,toggleTheme:e}=Qs(),t=j0(),[n,i]=se.useState(!1),[s,a]=se.useState(!1),[o,l]=se.useState(null),[u,c]=se.useState(!1);se.useEffect(()=>{eM()&&(l(yc()),c(!0));const f=()=>{eM()?(l(yc()),c(!0)):(l(null),c(!1))};return window.addEventListener("auth-change",f),()=>window.removeEventListener("auth-change",f)},[]);const h=()=>{_te(),localStorage.removeItem("user"),localStorage.removeItem("authToken"),l(null),c(!1),a(!1),i(!1),window.dispatchEvent(new Event("auth-change")),t("/")},d=[{to:"/",label:""},{to:"/concepts",label:""},{to:"/papers",label:" "},{to:"/whiteboard",label:" "},{to:"/virtual-lab",label:" "},{to:"/calculator",label:""},{to:"/forum",label:""},{to:"/glossary",label:" "},{to:"/references",label:" "},...u&&o?[{to:"/notes",label:""}]:[]];return P.jsx("header",{className:`sticky top-0 z-40 transition-colors duration-300 ${r?"bg-gray-900 border-gray-800":"bg-white border-gray-200"} border-b backdrop-blur`,children:P.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[P.jsxs("div",{className:"flex items-center justify-between",children:[P.jsx(Cr,{to:"/",className:"text-xl sm:text-2xl font-bold text-blue-500 dark:text-blue-400 whitespace-nowrap",children:"Astro Hub"}),P.jsxs("nav",{className:"hidden md:flex items-center gap-3 lg:gap-6",children:[d.map(f=>P.jsx(Cr,{to:f.to,className:`transition text-sm lg:text-base ${r?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,children:f.label},f.to)),P.jsx("button",{onClick:e,className:`p-2 rounded-lg border transition text-lg ${r?"border-gray-700 hover:bg-gray-800":"border-gray-300 hover:bg-gray-100"}`,"aria-label":" ",children:r?"":""}),u&&o?P.jsxs("div",{className:"relative",children:[P.jsxs("button",{onClick:()=>a(!s),className:`p-2 rounded-lg border transition ${r?"border-gray-700 hover:bg-gray-800":"border-gray-300 hover:bg-gray-100"}`,children:[" ",o.username]}),s&&P.jsxs("div",{className:`absolute right-0 mt-2 w-48 rounded-lg shadow-lg ${r?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} border`,children:[P.jsx(Cr,{to:"/profile",className:`block px-4 py-2 first:rounded-t-lg ${r?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>a(!1),children:""}),P.jsx(Cr,{to:"/bookmarks",className:`block px-4 py-2 ${r?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>a(!1),children:""}),P.jsx(Cr,{to:"/notes",className:`block px-4 py-2 ${r?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>a(!1),children:""}),P.jsx("button",{onClick:h,className:`w-full text-left px-4 py-2 last:rounded-b-lg ${r?"text-red-400 hover:bg-gray-700":"text-red-600 hover:bg-gray-100"}`,children:""})]})]}):P.jsxs("div",{className:"flex gap-2",children:[P.jsx(Cr,{to:"/login",className:`px-4 py-2 rounded-lg border transition ${r?"border-blue-400 text-blue-400 hover:bg-blue-400 hover:text-gray-900":"border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white"}`,children:""}),P.jsx(Cr,{to:"/signup",className:`px-4 py-2 rounded-lg transition text-white ${r?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"}`,children:""})]})]}),P.jsxs("div",{className:"md:hidden flex items-center gap-3",children:[P.jsx("button",{onClick:e,className:`p-2 rounded-lg border transition text-lg ${r?"border-gray-700 hover:bg-gray-800":"border-gray-300 hover:bg-gray-100"}`,"aria-label":" ",children:r?"":""}),P.jsx("button",{onClick:()=>i(!n),className:`p-2 transition ${r?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,"aria-label":"",children:n?"":""})]})]}),n&&P.jsxs("nav",{className:`md:hidden mt-4 space-y-2 pb-4 border-t transition-colors duration-300 pt-4 ${r?"border-gray-800":"border-gray-200"}`,children:[d.map(f=>P.jsx(Cr,{to:f.to,className:`block py-2 transition ${r?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:f.label},f.to)),u&&o?P.jsx(P.Fragment,{children:P.jsxs("div",{className:`py-2 border-t transition-colors duration-300 ${r?"border-gray-800":"border-gray-200"} mt-2 pt-2`,children:[P.jsx("div",{className:`px-2 py-1 text-sm ${r?"text-gray-400":"text-gray-500"}`,children:o.username}),P.jsx(Cr,{to:"/profile",className:`block py-2 transition ${r?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:""}),P.jsx(Cr,{to:"/bookmarks",className:`block py-2 transition ${r?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:""}),P.jsx(Cr,{to:"/notes",className:`block py-2 transition ${r?"text-gray-300 hover:text-blue-400":"text-gray-600 hover:text-blue-600"}`,onClick:()=>i(!1),children:""}),P.jsx("button",{onClick:h,className:`w-full text-left py-2 transition ${r?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-700"}`,children:""})]})}):P.jsxs("div",{className:`py-2 border-t transition-colors duration-300 mt-2 pt-2 ${r?"border-gray-800":"border-gray-200"}`,children:[P.jsx(Cr,{to:"/login",className:`block py-2 transition ${r?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"}`,onClick:()=>i(!1),children:""}),P.jsx(Cr,{to:"/signup",className:`block py-2 transition ${r?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"}`,onClick:()=>i(!1),children:""})]})]})]})})}function Ete(){const[r,e]=se.useState(0);return se.useEffect(()=>{const t=()=>{const n=window.scrollY,i=document.documentElement.scrollHeight-window.innerHeight,s=i>0?n/i*100:0;e(Math.min(100,Math.max(0,s)))};return window.addEventListener("scroll",t,{passive:!0}),()=>window.removeEventListener("scroll",t)},[]),P.jsx("div",{className:"scroll-progress",children:P.jsx("div",{className:"scroll-progress__bar",style:{transform:`scaleX(${r/100})`}})})}function Ste(){const{isDark:r}=Qs();return P.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${r?"bg-gray-950 text-gray-100":"bg-white text-gray-900"}`,children:[P.jsx(Ete,{}),P.jsx(Ate,{}),P.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:P.jsx(ste,{})}),P.jsx("footer",{className:`border-t py-6 text-center text-sm transition-colors duration-300 ${r?"bg-gray-900 border-gray-800 text-gray-400":"bg-gray-50 border-gray-200 text-gray-600"}`,children:P.jsx("p",{children:" 2025 Astrophysics Hub    "})})]})}const t7=se.createContext({});function Tte(r){const e=se.useRef(null);return e.current===null&&(e.current=r()),e.current}const GR=typeof window<"u",Cte=GR?se.useLayoutEffect:se.useEffect,WR=se.createContext(null);function KR(r,e){r.indexOf(e)===-1&&r.push(e)}function XR(r,e){const t=r.indexOf(e);t>-1&&r.splice(t,1)}const bc=(r,e,t)=>t>e?e:t<r?r:t;let YR=()=>{};const wc={},r7=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r);function n7(r){return typeof r=="object"&&r!==null}const i7=r=>/^0[^.\s]+$/u.test(r);function QR(r){let e;return()=>(e===void 0&&(e=r()),e)}const ho=r=>r,Nte=(r,e)=>t=>e(r(t)),kx=(...r)=>r.reduce(Nte),d1=(r,e,t)=>{const n=e-r;return n===0?1:(t-r)/n};class JR{constructor(){this.subscriptions=[]}add(e){return KR(this.subscriptions,e),()=>XR(this.subscriptions,e)}notify(e,t,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,n);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ul=r=>r*1e3,uo=r=>r/1e3;function s7(r,e){return e?r*(1e3/e):0}const a7=(r,e,t)=>(((1-3*t+3*e)*r+(3*t-6*e))*r+3*e)*r,Dte=1e-7,Mte=12;function Ite(r,e,t,n,i){let s,a,o=0;do a=e+(t-e)/2,s=a7(a,n,i)-r,s>0?t=a:e=a;while(Math.abs(s)>Dte&&++o<Mte);return a}function Fx(r,e,t,n){if(r===e&&t===n)return ho;const i=s=>Ite(s,0,1,r,t);return s=>s===0||s===1?s:a7(i(s),e,n)}const o7=r=>e=>e<=.5?r(2*e)/2:(2-r(2*(1-e)))/2,l7=r=>e=>1-r(1-e),u7=Fx(.33,1.53,.69,.99),ZR=l7(u7),c7=o7(ZR),h7=r=>(r*=2)<1?.5*ZR(r):.5*(2-Math.pow(2,-10*(r-1))),ek=r=>1-Math.sin(Math.acos(r)),d7=l7(ek),f7=o7(ek),Pte=Fx(.42,0,1,1),Rte=Fx(0,0,.58,1),m7=Fx(.42,0,.58,1),kte=r=>Array.isArray(r)&&typeof r[0]!="number",p7=r=>Array.isArray(r)&&typeof r[0]=="number",Fte={linear:ho,easeIn:Pte,easeInOut:m7,easeOut:Rte,circIn:ek,circInOut:f7,circOut:d7,backIn:ZR,backInOut:c7,backOut:u7,anticipate:h7},Ote=r=>typeof r=="string",DB=r=>{if(p7(r)){YR(r.length===4);const[e,t,n,i]=r;return Fx(e,t,n,i)}else if(Ote(r))return Fte[r];return r},nA=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Bte(r,e){let t=new Set,n=new Set,i=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(c){a.has(c)&&(u.schedule(c),r()),c(o)}const u={schedule:(c,h=!1,d=!1)=>{const p=d&&i?t:n;return h&&a.add(c),p.has(c)||p.add(c),c},cancel:c=>{n.delete(c),a.delete(c)},process:c=>{if(o=c,i){s=!0;return}i=!0,[t,n]=[n,t],t.forEach(l),t.clear(),i=!1,s&&(s=!1,u.process(c))}};return u}const Lte=40;function g7(r,e){let t=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,a=nA.reduce((y,A)=>(y[A]=Bte(s),y),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:c,update:h,preRender:d,render:f,postRender:p}=a,g=()=>{const y=wc.useManualTiming?i.timestamp:performance.now();t=!1,wc.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(y-i.timestamp,Lte),1)),i.timestamp=y,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),c.process(i),h.process(i),d.process(i),f.process(i),p.process(i),i.isProcessing=!1,t&&e&&(n=!1,r(g))},b=()=>{t=!0,n=!0,i.isProcessing||r(g)};return{schedule:nA.reduce((y,A)=>{const x=a[A];return y[A]=(_,S=!1,E=!1)=>(t||b(),x.schedule(_,S,E)),y},{}),cancel:y=>{for(let A=0;A<nA.length;A++)a[nA[A]].cancel(y)},state:i,steps:a}}const{schedule:Gr,cancel:pd,state:Ei,steps:l2}=g7(typeof requestAnimationFrame<"u"?requestAnimationFrame:ho,!0);let eE;function $te(){eE=void 0}const Hs={now:()=>(eE===void 0&&Hs.set(Ei.isProcessing||wc.useManualTiming?Ei.timestamp:performance.now()),eE),set:r=>{eE=r,queueMicrotask($te)}},v7=r=>e=>typeof e=="string"&&e.startsWith(r),tk=v7("--"),Vte=v7("var(--"),rk=r=>Vte(r)?Ute.test(r.split("/*")[0].trim()):!1,Ute=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,q0={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},f1={...q0,transform:r=>bc(0,1,r)},iA={...q0,default:1},kb=r=>Math.round(r*1e5)/1e5,nk=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function zte(r){return r==null}const jte=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ik=(r,e)=>t=>!!(typeof t=="string"&&jte.test(t)&&t.startsWith(r)||e&&!zte(t)&&Object.prototype.hasOwnProperty.call(t,e)),y7=(r,e,t)=>n=>{if(typeof n!="string")return n;const[i,s,a,o]=n.match(nk);return{[r]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},qte=r=>bc(0,255,r),u2={...q0,transform:r=>Math.round(qte(r))},wf={test:ik("rgb","red"),parse:y7("red","green","blue"),transform:({red:r,green:e,blue:t,alpha:n=1})=>"rgba("+u2.transform(r)+", "+u2.transform(e)+", "+u2.transform(t)+", "+kb(f1.transform(n))+")"};function Hte(r){let e="",t="",n="",i="";return r.length>5?(e=r.substring(1,3),t=r.substring(3,5),n=r.substring(5,7),i=r.substring(7,9)):(e=r.substring(1,2),t=r.substring(2,3),n=r.substring(3,4),i=r.substring(4,5),e+=e,t+=t,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const tM={test:ik("#"),parse:Hte,transform:wf.transform},Ox=r=>({test:e=>typeof e=="string"&&e.endsWith(r)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${r}`}),zc=Ox("deg"),zl=Ox("%"),pt=Ox("px"),Gte=Ox("vh"),Wte=Ox("vw"),MB={...zl,parse:r=>zl.parse(r)/100,transform:r=>zl.transform(r*100)},dg={test:ik("hsl","hue"),parse:y7("hue","saturation","lightness"),transform:({hue:r,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(r)+", "+zl.transform(kb(e))+", "+zl.transform(kb(t))+", "+kb(f1.transform(n))+")"},In={test:r=>wf.test(r)||tM.test(r)||dg.test(r),parse:r=>wf.test(r)?wf.parse(r):dg.test(r)?dg.parse(r):tM.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?wf.transform(r):dg.transform(r),getAnimatableNone:r=>{const e=In.parse(r);return e.alpha=0,In.transform(e)}},Kte=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Xte(r){var e,t;return isNaN(r)&&typeof r=="string"&&(((e=r.match(nk))==null?void 0:e.length)||0)+(((t=r.match(Kte))==null?void 0:t.length)||0)>0}const b7="number",w7="color",Yte="var",Qte="var(",IB="${}",Jte=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function m1(r){const e=r.toString(),t=[],n={color:[],number:[],var:[]},i=[];let s=0;const o=e.replace(Jte,l=>(In.test(l)?(n.color.push(s),i.push(w7),t.push(In.parse(l))):l.startsWith(Qte)?(n.var.push(s),i.push(Yte),t.push(l)):(n.number.push(s),i.push(b7),t.push(parseFloat(l))),++s,IB)).split(IB);return{values:t,split:o,indexes:n,types:i}}function x7(r){return m1(r).values}function _7(r){const{split:e,types:t}=m1(r),n=e.length;return i=>{let s="";for(let a=0;a<n;a++)if(s+=e[a],i[a]!==void 0){const o=t[a];o===b7?s+=kb(i[a]):o===w7?s+=In.transform(i[a]):s+=i[a]}return s}}const Zte=r=>typeof r=="number"?0:In.test(r)?In.getAnimatableNone(r):r;function ere(r){const e=x7(r);return _7(r)(e.map(Zte))}const gd={test:Xte,parse:x7,createTransformer:_7,getAnimatableNone:ere};function c2(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function tre({hue:r,saturation:e,lightness:t,alpha:n}){r/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;i=c2(l,o,r+1/3),s=c2(l,o,r),a=c2(l,o,r-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:n}}function AS(r,e){return t=>t>0?e:r}const Qr=(r,e,t)=>r+(e-r)*t,h2=(r,e,t)=>{const n=r*r,i=t*(e*e-n)+n;return i<0?0:Math.sqrt(i)},rre=[tM,wf,dg],nre=r=>rre.find(e=>e.test(r));function PB(r){const e=nre(r);if(!e)return!1;let t=e.parse(r);return e===dg&&(t=tre(t)),t}const RB=(r,e)=>{const t=PB(r),n=PB(e);if(!t||!n)return AS(r,e);const i={...t};return s=>(i.red=h2(t.red,n.red,s),i.green=h2(t.green,n.green,s),i.blue=h2(t.blue,n.blue,s),i.alpha=Qr(t.alpha,n.alpha,s),wf.transform(i))},rM=new Set(["none","hidden"]);function ire(r,e){return rM.has(r)?t=>t<=0?r:e:t=>t>=1?e:r}function sre(r,e){return t=>Qr(r,e,t)}function sk(r){return typeof r=="number"?sre:typeof r=="string"?rk(r)?AS:In.test(r)?RB:lre:Array.isArray(r)?A7:typeof r=="object"?In.test(r)?RB:are:AS}function A7(r,e){const t=[...r],n=t.length,i=r.map((s,a)=>sk(s)(s,e[a]));return s=>{for(let a=0;a<n;a++)t[a]=i[a](s);return t}}function are(r,e){const t={...r,...e},n={};for(const i in t)r[i]!==void 0&&e[i]!==void 0&&(n[i]=sk(r[i])(r[i],e[i]));return i=>{for(const s in n)t[s]=n[s](i);return t}}function ore(r,e){const t=[],n={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],a=r.indexes[s][n[s]],o=r.values[a]??0;t[i]=o,n[s]++}return t}const lre=(r,e)=>{const t=gd.createTransformer(e),n=m1(r),i=m1(e);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?rM.has(r)&&!i.values.length||rM.has(e)&&!n.values.length?ire(r,e):kx(A7(ore(n,i),i.values),t):AS(r,e)};function E7(r,e,t){return typeof r=="number"&&typeof e=="number"&&typeof t=="number"?Qr(r,e,t):sk(r)(r,e)}const ure=r=>{const e=({timestamp:t})=>r(t);return{start:(t=!0)=>Gr.update(e,t),stop:()=>pd(e),now:()=>Ei.isProcessing?Ei.timestamp:Hs.now()}},S7=(r,e,t=10)=>{let n="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)n+=Math.round(r(s/(i-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},ES=2e4;function ak(r){let e=0;const t=50;let n=r.next(e);for(;!n.done&&e<ES;)e+=t,n=r.next(e);return e>=ES?1/0:e}function cre(r,e=100,t){const n=t({...r,keyframes:[0,e]}),i=Math.min(ak(n),ES);return{type:"keyframes",ease:s=>n.next(i*s).value/e,duration:uo(i)}}const hre=5;function T7(r,e,t){const n=Math.max(e-hre,0);return s7(t-r(n),e-n)}const un={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},d2=.001;function dre({duration:r=un.duration,bounce:e=un.bounce,velocity:t=un.velocity,mass:n=un.mass}){let i,s,a=1-e;a=bc(un.minDamping,un.maxDamping,a),r=bc(un.minDuration,un.maxDuration,uo(r)),a<1?(i=u=>{const c=u*a,h=c*r,d=c-t,f=nM(u,a),p=Math.exp(-h);return d2-d/f*p},s=u=>{const h=u*a*r,d=h*t+t,f=Math.pow(a,2)*Math.pow(u,2)*r,p=Math.exp(-h),g=nM(Math.pow(u,2),a);return(-i(u)+d2>0?-1:1)*((d-f)*p)/g}):(i=u=>{const c=Math.exp(-u*r),h=(u-t)*r+1;return-d2+c*h},s=u=>{const c=Math.exp(-u*r),h=(t-u)*(r*r);return c*h});const o=5/r,l=mre(i,s,o);if(r=Ul(r),isNaN(l))return{stiffness:un.stiffness,damping:un.damping,duration:r};{const u=Math.pow(l,2)*n;return{stiffness:u,damping:a*2*Math.sqrt(n*u),duration:r}}}const fre=12;function mre(r,e,t){let n=t;for(let i=1;i<fre;i++)n=n-r(n)/e(n);return n}function nM(r,e){return r*Math.sqrt(1-e*e)}const pre=["duration","bounce"],gre=["stiffness","damping","mass"];function kB(r,e){return e.some(t=>r[t]!==void 0)}function vre(r){let e={velocity:un.velocity,stiffness:un.stiffness,damping:un.damping,mass:un.mass,isResolvedFromDuration:!1,...r};if(!kB(r,gre)&&kB(r,pre))if(r.visualDuration){const t=r.visualDuration,n=2*Math.PI/(t*1.2),i=n*n,s=2*bc(.05,1,1-(r.bounce||0))*Math.sqrt(i);e={...e,mass:un.mass,stiffness:i,damping:s}}else{const t=dre(r);e={...e,...t,mass:un.mass},e.isResolvedFromDuration=!0}return e}function SS(r=un.visualDuration,e=un.bounce){const t=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:e}:r;let{restSpeed:n,restDelta:i}=t;const s=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:h,velocity:d,isResolvedFromDuration:f}=vre({...t,velocity:-uo(t.velocity||0)}),p=d||0,g=u/(2*Math.sqrt(l*c)),b=a-s,v=uo(Math.sqrt(l/c)),w=Math.abs(b)<5;n||(n=w?un.restSpeed.granular:un.restSpeed.default),i||(i=w?un.restDelta.granular:un.restDelta.default);let y;if(g<1){const x=nM(v,g);y=_=>{const S=Math.exp(-g*v*_);return a-S*((p+g*v*b)/x*Math.sin(x*_)+b*Math.cos(x*_))}}else if(g===1)y=x=>a-Math.exp(-v*x)*(b+(p+v*b)*x);else{const x=v*Math.sqrt(g*g-1);y=_=>{const S=Math.exp(-g*v*_),E=Math.min(x*_,300);return a-S*((p+g*v*b)*Math.sinh(E)+x*b*Math.cosh(E))/x}}const A={calculatedDuration:f&&h||null,next:x=>{const _=y(x);if(f)o.done=x>=h;else{let S=x===0?p:0;g<1&&(S=x===0?Ul(p):T7(y,x,_));const E=Math.abs(S)<=n,C=Math.abs(a-_)<=i;o.done=E&&C}return o.value=o.done?a:_,o},toString:()=>{const x=Math.min(ak(A),ES),_=S7(S=>A.next(x*S).value,x,30);return x+"ms "+_},toTransition:()=>{}};return A}SS.applyToOptions=r=>{const e=cre(r,100,SS);return r.ease=e.ease,r.duration=Ul(e.duration),r.type="keyframes",r};function iM({keyframes:r,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:c}){const h=r[0],d={done:!1,value:h},f=E=>o!==void 0&&E<o||l!==void 0&&E>l,p=E=>o===void 0?l:l===void 0||Math.abs(o-E)<Math.abs(l-E)?o:l;let g=t*e;const b=h+g,v=a===void 0?b:a(b);v!==b&&(g=v-h);const w=E=>-g*Math.exp(-E/n),y=E=>v+w(E),A=E=>{const C=w(E),N=y(E);d.done=Math.abs(C)<=u,d.value=d.done?v:N};let x,_;const S=E=>{f(d.value)&&(x=E,_=SS({keyframes:[d.value,p(d.value)],velocity:T7(y,E,d.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return S(0),{calculatedDuration:null,next:E=>{let C=!1;return!_&&x===void 0&&(C=!0,A(E),S(E)),x!==void 0&&E>=x?_.next(E-x):(!C&&A(E),d)}}}function yre(r,e,t){const n=[],i=t||wc.mix||E7,s=r.length-1;for(let a=0;a<s;a++){let o=i(r[a],r[a+1]);if(e){const l=Array.isArray(e)?e[a]||ho:e;o=kx(l,o)}n.push(o)}return n}function bre(r,e,{clamp:t=!0,ease:n,mixer:i}={}){const s=r.length;if(YR(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=r[0]===r[1];r[0]>r[s-1]&&(r=[...r].reverse(),e=[...e].reverse());const o=yre(e,n,i),l=o.length,u=c=>{if(a&&c<r[0])return e[0];let h=0;if(l>1)for(;h<r.length-2&&!(c<r[h+1]);h++);const d=d1(r[h],r[h+1],c);return o[h](d)};return t?c=>u(bc(r[0],r[s-1],c)):u}function wre(r,e){const t=r[r.length-1];for(let n=1;n<=e;n++){const i=d1(0,e,n);r.push(Qr(t,1,i))}}function xre(r){const e=[0];return wre(e,r.length-1),e}function _re(r,e){return r.map(t=>t*e)}function Are(r,e){return r.map(()=>e||m7).splice(0,r.length-1)}function Fb({duration:r=300,keyframes:e,times:t,ease:n="easeInOut"}){const i=kte(n)?n.map(DB):DB(n),s={done:!1,value:e[0]},a=_re(t&&t.length===e.length?t:xre(e),r),o=bre(a,e,{ease:Array.isArray(i)?i:Are(e,i)});return{calculatedDuration:r,next:l=>(s.value=o(l),s.done=l>=r,s)}}const Ere=r=>r!==null;function ok(r,{repeat:e,repeatType:t="loop"},n,i=1){const s=r.filter(Ere),o=i<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!o||n===void 0?s[o]:n}const Sre={decay:iM,inertia:iM,tween:Fb,keyframes:Fb,spring:SS};function C7(r){typeof r.type=="string"&&(r.type=Sre[r.type])}class lk{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Tre=r=>r/100;class uk extends lk{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,i;const{motionValue:t}=this.options;t&&t.updatedAt!==Hs.now()&&this.tick(Hs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(n=this.options).onStop)==null||i.call(n))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;C7(e);const{type:t=Fb,repeat:n=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=e;let{keyframes:o}=e;const l=t||Fb;l!==Fb&&typeof o[0]!="number"&&(this.mixKeyframes=kx(Tre,E7(o[0],o[1])),o=[0,100]);const u=l({...e,keyframes:o});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=ak(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=u}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:c,repeat:h,repeatType:d,repeatDelay:f,type:p,onUpdate:g,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const v=this.currentTime-u*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?v<0:v>i;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let y=this.currentTime,A=n;if(h){const E=Math.min(this.currentTime,i)/o;let C=Math.floor(E),N=E%1;!N&&E>=1&&(N=1),N===1&&C--,C=Math.min(C,h+1),!!(C%2)&&(d==="reverse"?(N=1-N,f&&(N-=f/o)):d==="mirror"&&(A=a)),y=bc(0,1,N)*o}const x=w?{done:!1,value:c[0]}:A.next(y);s&&(x.value=s(x.value));let{done:_}=x;!w&&l!==null&&(_=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return S&&p!==iM&&(x.value=ok(c,this.options,b,this.speed)),g&&g(x.value),S&&this.finish(),x}then(e,t){return this.finished.then(e,t)}get duration(){return uo(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+uo(e)}get time(){return uo(this.currentTime)}set time(e){var t;e=Ul(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Hs.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=uo(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=ure,startTime:t}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(s=(i=this.options).onPlay)==null||s.call(i);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=t??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Hs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function Cre(r){for(let e=1;e<r.length;e++)r[e]??(r[e]=r[e-1])}const xf=r=>r*180/Math.PI,sM=r=>{const e=xf(Math.atan2(r[1],r[0]));return aM(e)},Nre={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:r=>(Math.abs(r[0])+Math.abs(r[3]))/2,rotate:sM,rotateZ:sM,skewX:r=>xf(Math.atan(r[1])),skewY:r=>xf(Math.atan(r[2])),skew:r=>(Math.abs(r[1])+Math.abs(r[2]))/2},aM=r=>(r=r%360,r<0&&(r+=360),r),FB=sM,OB=r=>Math.sqrt(r[0]*r[0]+r[1]*r[1]),BB=r=>Math.sqrt(r[4]*r[4]+r[5]*r[5]),Dre={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:OB,scaleY:BB,scale:r=>(OB(r)+BB(r))/2,rotateX:r=>aM(xf(Math.atan2(r[6],r[5]))),rotateY:r=>aM(xf(Math.atan2(-r[2],r[0]))),rotateZ:FB,rotate:FB,skewX:r=>xf(Math.atan(r[4])),skewY:r=>xf(Math.atan(r[1])),skew:r=>(Math.abs(r[1])+Math.abs(r[4]))/2};function oM(r){return r.includes("scale")?1:0}function lM(r,e){if(!r||r==="none")return oM(e);const t=r.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(t)n=Dre,i=t;else{const o=r.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=Nre,i=o}if(!i)return oM(e);const s=n[e],a=i[1].split(",").map(Ire);return typeof s=="function"?s(a):a[s]}const Mre=(r,e)=>{const{transform:t="none"}=getComputedStyle(r);return lM(t,e)};function Ire(r){return parseFloat(r.trim())}const H0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],G0=new Set(H0),LB=r=>r===q0||r===pt,Pre=new Set(["x","y","z"]),Rre=H0.filter(r=>!Pre.has(r));function kre(r){const e=[];return Rre.forEach(t=>{const n=r.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e}const zm={width:({x:r},{paddingLeft:e="0",paddingRight:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),height:({y:r},{paddingTop:e="0",paddingBottom:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),top:(r,{top:e})=>parseFloat(e),left:(r,{left:e})=>parseFloat(e),bottom:({y:r},{top:e})=>parseFloat(e)+(r.max-r.min),right:({x:r},{left:e})=>parseFloat(e)+(r.max-r.min),x:(r,{transform:e})=>lM(e,"x"),y:(r,{transform:e})=>lM(e,"y")};zm.translateX=zm.x;zm.translateY=zm.y;const jm=new Set;let uM=!1,cM=!1,hM=!1;function N7(){if(cM){const r=Array.from(jm).filter(n=>n.needsMeasurement),e=new Set(r.map(n=>n.element)),t=new Map;e.forEach(n=>{const i=kre(n);i.length&&(t.set(n,i),n.render())}),r.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const i=t.get(n);i&&i.forEach(([s,a])=>{var o;(o=n.getValue(s))==null||o.set(a)})}),r.forEach(n=>n.measureEndState()),r.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}cM=!1,uM=!1,jm.forEach(r=>r.complete(hM)),jm.clear()}function D7(){jm.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(cM=!0)})}function Fre(){hM=!0,D7(),N7(),hM=!1}class ck{constructor(e,t,n,i,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(jm.add(this),uM||(uM=!0,Gr.read(D7),Gr.resolveKeyframes(N7))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(n&&t){const o=n.readValue(t,a);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=a),i&&s===void 0&&i.set(e[0])}Cre(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),jm.delete(this)}cancel(){this.state==="scheduled"&&(jm.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Ore=r=>r.startsWith("--");function Bre(r,e,t){Ore(e)?r.style.setProperty(e,t):r.style[e]=t}const Lre=QR(()=>window.ScrollTimeline!==void 0),$re={};function Vre(r,e){const t=QR(r);return()=>$re[e]??t()}const M7=Vre(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Xy=([r,e,t,n])=>`cubic-bezier(${r}, ${e}, ${t}, ${n})`,$B={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xy([0,.65,.55,1]),circOut:Xy([.55,0,1,.45]),backIn:Xy([.31,.01,.66,-.59]),backOut:Xy([.33,1.53,.69,.99])};function I7(r,e){if(r)return typeof r=="function"?M7()?S7(r,e):"ease-out":p7(r)?Xy(r):Array.isArray(r)?r.map(t=>I7(t,e)||$B.easeOut):$B[r]}function Ure(r,e,t,{delay:n=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:l}={},u=void 0){const c={[e]:t};l&&(c.offset=l);const h=I7(o,i);Array.isArray(h)&&(c.easing=h);const d={delay:n,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return u&&(d.pseudoElement=u),r.animate(c,d)}function P7(r){return typeof r=="function"&&"applyToOptions"in r}function zre({type:r,...e}){return P7(r)&&M7()?r.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class jre extends lk{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=e,YR(typeof e.type!="string");const u=zre(e);this.animation=Ure(t,n,i,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const c=ok(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(c):Bre(t,n,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,n;const e=((n=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:n.call(t).duration)||0;return uo(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+uo(e)}get time(){return uo(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ul(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Lre()?(this.animation.timeline=e,ho):t(this)}}const R7={anticipate:h7,backInOut:c7,circInOut:f7};function qre(r){return r in R7}function Hre(r){typeof r.ease=="string"&&qre(r.ease)&&(r.ease=R7[r.ease])}const VB=10;class Gre extends jre{constructor(e){Hre(e),C7(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:i,element:s,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const o=new uk({...a,autoplay:!1}),l=Ul(this.finishedTime??this.time);t.setWithVelocity(o.sample(l-VB).value,o.sample(l).value,VB),o.stop()}}const UB=(r,e)=>e==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(gd.test(r)||r==="0")&&!r.startsWith("url("));function Wre(r){const e=r[0];if(r.length===1)return!0;for(let t=0;t<r.length;t++)if(r[t]!==e)return!0}function Kre(r,e,t,n){const i=r[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=r[r.length-1],a=UB(i,e),o=UB(s,e);return!a||!o?!1:Wre(r)||(t==="spring"||P7(t))&&n}function dM(r){r.duration=0,r.type="keyframes"}const Xre=new Set(["opacity","clipPath","filter","transform"]),Yre=QR(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Qre(r){var c;const{motionValue:e,name:t,repeatDelay:n,repeatType:i,damping:s,type:a}=r;if(!(((c=e==null?void 0:e.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return Yre()&&t&&Xre.has(t)&&(t!=="transform"||!u)&&!l&&!n&&i!=="mirror"&&s!==0&&a!=="inertia"}const Jre=40;class Zre extends lk{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:o,name:l,motionValue:u,element:c,...h}){var p;super(),this.stop=()=>{var g,b;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=Hs.now();const d={autoplay:e,delay:t,type:n,repeat:i,repeatDelay:s,repeatType:a,name:l,motionValue:u,element:c,...h},f=(c==null?void 0:c.KeyframeResolver)||ck;this.keyframeResolver=new f(o,(g,b,v)=>this.onKeyframesResolved(g,b,d,!v),l,u,c),(p=this.keyframeResolver)==null||p.scheduleResolve()}onKeyframesResolved(e,t,n,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:o,delay:l,isHandoff:u,onUpdate:c}=n;this.resolvedAt=Hs.now(),Kre(e,s,a,o)||((wc.instantAnimations||!l)&&(c==null||c(ok(e,n,t))),e[0]=e[e.length-1],dM(n),n.repeat=0);const d={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Jre?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},f=!u&&Qre(d)?new Gre({...d,element:d.motionValue.owner.current}):new uk(d);f.finished.then(()=>this.notifyFinished()).catch(ho),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Fre()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const ene=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function tne(r){const e=ene.exec(r);if(!e)return[,];const[,t,n,i]=e;return[`--${t??n}`,i]}function k7(r,e,t=1){const[n,i]=tne(r);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const a=s.trim();return r7(a)?parseFloat(a):a}return rk(i)?k7(i,e,t+1):i}function hk(r,e){return(r==null?void 0:r[e])??(r==null?void 0:r.default)??r}const F7=new Set(["width","height","top","left","right","bottom",...H0]),rne={test:r=>r==="auto",parse:r=>r},O7=r=>e=>e.test(r),B7=[q0,pt,zl,zc,Wte,Gte,rne],zB=r=>B7.find(O7(r));function nne(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||i7(r):!0}const ine=new Set(["brightness","contrast","saturate","opacity"]);function sne(r){const[e,t]=r.slice(0,-1).split("(");if(e==="drop-shadow")return r;const[n]=t.match(nk)||[];if(!n)return r;const i=t.replace(n,"");let s=ine.has(e)?1:0;return n!==t&&(s*=100),e+"("+s+i+")"}const ane=/\b([a-z-]*)\(.*?\)/gu,fM={...gd,getAnimatableNone:r=>{const e=r.match(ane);return e?e.map(sne).join(" "):r}},jB={...q0,transform:Math.round},one={rotate:zc,rotateX:zc,rotateY:zc,rotateZ:zc,scale:iA,scaleX:iA,scaleY:iA,scaleZ:iA,skew:zc,skewX:zc,skewY:zc,distance:pt,translateX:pt,translateY:pt,translateZ:pt,x:pt,y:pt,z:pt,perspective:pt,transformPerspective:pt,opacity:f1,originX:MB,originY:MB,originZ:pt},dk={borderWidth:pt,borderTopWidth:pt,borderRightWidth:pt,borderBottomWidth:pt,borderLeftWidth:pt,borderRadius:pt,radius:pt,borderTopLeftRadius:pt,borderTopRightRadius:pt,borderBottomRightRadius:pt,borderBottomLeftRadius:pt,width:pt,maxWidth:pt,height:pt,maxHeight:pt,top:pt,right:pt,bottom:pt,left:pt,padding:pt,paddingTop:pt,paddingRight:pt,paddingBottom:pt,paddingLeft:pt,margin:pt,marginTop:pt,marginRight:pt,marginBottom:pt,marginLeft:pt,backgroundPositionX:pt,backgroundPositionY:pt,...one,zIndex:jB,fillOpacity:f1,strokeOpacity:f1,numOctaves:jB},lne={...dk,color:In,backgroundColor:In,outlineColor:In,fill:In,stroke:In,borderColor:In,borderTopColor:In,borderRightColor:In,borderBottomColor:In,borderLeftColor:In,filter:fM,WebkitFilter:fM},L7=r=>lne[r];function $7(r,e){let t=L7(r);return t!==fM&&(t=gd),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const une=new Set(["auto","none","0"]);function cne(r,e,t){let n=0,i;for(;n<r.length&&!i;){const s=r[n];typeof s=="string"&&!une.has(s)&&m1(s).values.length&&(i=r[n]),n++}if(i&&t)for(const s of e)r[s]=$7(t,i)}class hne extends ck{constructor(e,t,n,i,s){super(e,t,n,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),rk(u))){const c=k7(u,t.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!F7.has(n)||e.length!==2)return;const[i,s]=e,a=zB(i),o=zB(s);if(a!==o)if(LB(a)&&LB(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else zm[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let i=0;i<e.length;i++)(e[i]===null||nne(e[i]))&&n.push(i);n.length&&cne(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=zm[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(n,i).jump(i,!1)}measureEndState(){var o;const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const s=n.length-1,a=n[s];n[s]=zm[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function dne(r,e,t){if(r instanceof EventTarget)return[r];if(typeof r=="string"){let n=document;const i=(t==null?void 0:t[r])??n.querySelectorAll(r);return i?Array.from(i):[]}return Array.from(r)}const V7=(r,e)=>e&&typeof r=="number"?e.transform(r):r;function fne(r){return n7(r)&&"offsetHeight"in r}const qB=30,mne=r=>!isNaN(parseFloat(r));class pne{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var s;const i=Hs.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Hs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=mne(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new JR);const n=this.events[e].add(t);return e==="change"?()=>{n(),Gr.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Hs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>qB)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,qB);return s7(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function x0(r,e){return new pne(r,e)}const{schedule:fk}=g7(queueMicrotask,!1),So={x:!1,y:!1};function U7(){return So.x||So.y}function gne(r){return r==="x"||r==="y"?So[r]?null:(So[r]=!0,()=>{So[r]=!1}):So.x||So.y?null:(So.x=So.y=!0,()=>{So.x=So.y=!1})}function z7(r,e){const t=dne(r),n=new AbortController,i={passive:!0,...e,signal:n.signal};return[t,i,()=>n.abort()]}function HB(r){return!(r.pointerType==="touch"||U7())}function vne(r,e,t={}){const[n,i,s]=z7(r,t),a=o=>{if(!HB(o))return;const{target:l}=o,u=e(l,o);if(typeof u!="function"||!l)return;const c=h=>{HB(h)&&(u(h),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,i)};return n.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const j7=(r,e)=>e?r===e?!0:j7(r,e.parentElement):!1,mk=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,yne=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function bne(r){return yne.has(r.tagName)||r.tabIndex!==-1}const tE=new WeakSet;function GB(r){return e=>{e.key==="Enter"&&r(e)}}function f2(r,e){r.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const wne=(r,e)=>{const t=r.currentTarget;if(!t)return;const n=GB(()=>{if(tE.has(t))return;f2(t,"down");const i=GB(()=>{f2(t,"up")}),s=()=>f2(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",n,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",n),e)};function WB(r){return mk(r)&&!U7()}function xne(r,e,t={}){const[n,i,s]=z7(r,t),a=o=>{const l=o.currentTarget;if(!WB(o))return;tE.add(l);const u=e(l,o),c=(f,p)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",d),tE.has(l)&&tE.delete(l),WB(f)&&typeof u=="function"&&u(f,{success:p})},h=f=>{c(f,l===window||l===document||t.useGlobalTarget||j7(l,f.target))},d=f=>{c(f,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",d,i)};return n.forEach(o=>{(t.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),fne(o)&&(o.addEventListener("focus",u=>wne(u,i)),!bne(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),s}function q7(r){return n7(r)&&"ownerSVGElement"in r}function _ne(r){return q7(r)&&r.tagName==="svg"}const Zi=r=>!!(r&&r.getVelocity),Ane=[...B7,In,gd],Ene=r=>Ane.find(O7(r)),H7=se.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});function Sne(r=!0){const e=se.useContext(WR);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,s=se.useId();se.useEffect(()=>{if(r)return i(s)},[r]);const a=se.useCallback(()=>r&&n&&n(s),[s,n,r]);return!t&&n?[!1,a]:[!0]}const G7=se.createContext({strict:!1}),KB={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_0={};for(const r in KB)_0[r]={isEnabled:e=>KB[r].some(t=>!!e[t])};function Tne(r){for(const e in r)_0[e]={..._0[e],...r[e]}}const Cne=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function TS(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||Cne.has(r)}let W7=r=>!TS(r);function Nne(r){typeof r=="function"&&(W7=e=>e.startsWith("on")?!TS(e):r(e))}try{Nne(require("@emotion/is-prop-valid").default)}catch{}function Dne(r,e,t){const n={};for(const i in r)i==="values"&&typeof r.values=="object"||(W7(i)||t===!0&&TS(i)||!e&&!TS(i)||r.draggable&&i.startsWith("onDrag"))&&(n[i]=r[i]);return n}const bC=se.createContext({});function wC(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}function p1(r){return typeof r=="string"||Array.isArray(r)}const pk=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],gk=["initial",...pk];function xC(r){return wC(r.animate)||gk.some(e=>p1(r[e]))}function K7(r){return!!(xC(r)||r.variants)}function Mne(r,e){if(xC(r)){const{initial:t,animate:n}=r;return{initial:t===!1||p1(t)?t:void 0,animate:p1(n)?n:void 0}}return r.inherit!==!1?e:{}}function Ine(r){const{initial:e,animate:t}=Mne(r,se.useContext(bC));return se.useMemo(()=>({initial:e,animate:t}),[XB(e),XB(t)])}function XB(r){return Array.isArray(r)?r.join(" "):r}const g1={};function Pne(r){for(const e in r)g1[e]=r[e],tk(e)&&(g1[e].isCSSVariable=!0)}function X7(r,{layout:e,layoutId:t}){return G0.has(r)||r.startsWith("origin")||(e||t!==void 0)&&(!!g1[r]||r==="opacity")}const Rne={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},kne=H0.length;function Fne(r,e,t){let n="",i=!0;for(let s=0;s<kne;s++){const a=H0[s],o=r[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||t){const u=V7(o,dk[a]);if(!l){i=!1;const c=Rne[a]||a;n+=`${c}(${u}) `}t&&(e[a]=u)}}return n=n.trim(),t?n=t(e,i?"":n):i&&(n="none"),n}function vk(r,e,t){const{style:n,vars:i,transformOrigin:s}=r;let a=!1,o=!1;for(const l in e){const u=e[l];if(G0.has(l)){a=!0;continue}else if(tk(l)){i[l]=u;continue}else{const c=V7(u,dk[l]);l.startsWith("origin")?(o=!0,s[l]=c):n[l]=c}}if(e.transform||(a||t?n.transform=Fne(e,r.transform,t):n.transform&&(n.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;n.transformOrigin=`${l} ${u} ${c}`}}const yk=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Y7(r,e,t){for(const n in e)!Zi(e[n])&&!X7(n,t)&&(r[n]=e[n])}function One({transformTemplate:r},e){return se.useMemo(()=>{const t=yk();return vk(t,e,r),Object.assign({},t.vars,t.style)},[e])}function Bne(r,e){const t=r.style||{},n={};return Y7(n,t,r),Object.assign(n,One(r,e)),n}function Lne(r,e){const t={},n=Bne(r,e);return r.drag&&r.dragListener!==!1&&(t.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(t.tabIndex=0),t.style=n,t}const $ne={offset:"stroke-dashoffset",array:"stroke-dasharray"},Vne={offset:"strokeDashoffset",array:"strokeDasharray"};function Une(r,e,t=1,n=0,i=!0){r.pathLength=1;const s=i?$ne:Vne;r[s.offset]=pt.transform(-n);const a=pt.transform(e),o=pt.transform(t);r[s.array]=`${a} ${o}`}function Q7(r,{attrX:e,attrY:t,attrScale:n,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...o},l,u,c){if(vk(r,o,u),l){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:h,style:d}=r;h.transform&&(d.transform=h.transform,delete h.transform),(d.transform||h.transformOrigin)&&(d.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),d.transform&&(d.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),t!==void 0&&(h.y=t),n!==void 0&&(h.scale=n),i!==void 0&&Une(h,i,s,a,!1)}const J7=()=>({...yk(),attrs:{}}),Z7=r=>typeof r=="string"&&r.toLowerCase()==="svg";function zne(r,e,t,n){const i=se.useMemo(()=>{const s=J7();return Q7(s,e,Z7(n),r.transformTemplate,r.style),{...s.attrs,style:{...s.style}}},[e]);if(r.style){const s={};Y7(s,r.style,r),i.style={...s,...i.style}}return i}const jne=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function bk(r){return typeof r!="string"||r.includes("-")?!1:!!(jne.indexOf(r)>-1||/[A-Z]/u.test(r))}function qne(r,e,t,{latestValues:n},i,s=!1){const o=(bk(r)?zne:Lne)(e,n,i,r),l=Dne(e,typeof r=="string",s),u=r!==se.Fragment?{...l,...o,ref:t}:{},{children:c}=e,h=se.useMemo(()=>Zi(c)?c.get():c,[c]);return se.createElement(r,{...u,children:h})}function YB(r){const e=[{},{}];return r==null||r.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function wk(r,e,t,n){if(typeof e=="function"){const[i,s]=YB(n);e=e(t!==void 0?t:r.custom,i,s)}if(typeof e=="string"&&(e=r.variants&&r.variants[e]),typeof e=="function"){const[i,s]=YB(n);e=e(t!==void 0?t:r.custom,i,s)}return e}function rE(r){return Zi(r)?r.get():r}function Hne({scrapeMotionValuesFromProps:r,createRenderState:e},t,n,i){return{latestValues:Gne(t,n,i,r),renderState:e()}}function Gne(r,e,t,n){const i={},s=n(r,{});for(const d in s)i[d]=rE(s[d]);let{initial:a,animate:o}=r;const l=xC(r),u=K7(r);e&&u&&!l&&r.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let c=t?t.initial===!1:!1;c=c||a===!1;const h=c?o:a;if(h&&typeof h!="boolean"&&!wC(h)){const d=Array.isArray(h)?h:[h];for(let f=0;f<d.length;f++){const p=wk(r,d[f]);if(p){const{transitionEnd:g,transition:b,...v}=p;for(const w in v){let y=v[w];if(Array.isArray(y)){const A=c?y.length-1:0;y=y[A]}y!==null&&(i[w]=y)}for(const w in g)i[w]=g[w]}}}return i}const ej=r=>(e,t)=>{const n=se.useContext(bC),i=se.useContext(WR),s=()=>Hne(r,e,n,i);return t?s():Tte(s)};function xk(r,e,t){var s;const{style:n}=r,i={};for(const a in n)(Zi(n[a])||e.style&&Zi(e.style[a])||X7(a,r)||((s=t==null?void 0:t.getValue(a))==null?void 0:s.liveStyle)!==void 0)&&(i[a]=n[a]);return i}const Wne=ej({scrapeMotionValuesFromProps:xk,createRenderState:yk});function tj(r,e,t){const n=xk(r,e,t);for(const i in r)if(Zi(r[i])||Zi(e[i])){const s=H0.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[s]=r[i]}return n}const Kne=ej({scrapeMotionValuesFromProps:tj,createRenderState:J7}),Xne=Symbol.for("motionComponentSymbol");function fg(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function Yne(r,e,t){return se.useCallback(n=>{n&&r.onMount&&r.onMount(n),e&&(n?e.mount(n):e.unmount()),t&&(typeof t=="function"?t(n):fg(t)&&(t.current=n))},[e])}const _k=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Qne="framerAppearId",rj="data-"+_k(Qne),nj=se.createContext({});function Jne(r,e,t,n,i){var g,b;const{visualElement:s}=se.useContext(bC),a=se.useContext(G7),o=se.useContext(WR),l=se.useContext(H7).reducedMotion,u=se.useRef(null);n=n||a.renderer,!u.current&&n&&(u.current=n(r,{visualState:e,parent:s,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,h=se.useContext(nj);c&&!c.projection&&i&&(c.type==="html"||c.type==="svg")&&Zne(u.current,t,i,h);const d=se.useRef(!1);se.useInsertionEffect(()=>{c&&d.current&&c.update(t,o)});const f=t[rj],p=se.useRef(!!f&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,f))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,f)));return Cte(()=>{c&&(d.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),p.current&&c.animationState&&c.animationState.animateChanges())}),se.useEffect(()=>{c&&(!p.current&&c.animationState&&c.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,f)}),p.current=!1),c.enteringChildren=void 0)}),c}function Zne(r,e,t,n){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=e;r.projection=new t(r.latestValues,e["data-framer-portal-id"]?void 0:ij(r.parent)),r.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&fg(o),visualElement:r,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,crossfade:c,layoutScroll:l,layoutRoot:u})}function ij(r){if(r)return r.options.allowProjection!==!1?r.projection:ij(r.parent)}function m2(r,{forwardMotionProps:e=!1}={},t,n){t&&Tne(t);const i=bk(r)?Kne:Wne;function s(o,l){let u;const c={...se.useContext(H7),...o,layoutId:eie(o)},{isStatic:h}=c,d=Ine(o),f=i(o,h);if(!h&&GR){tie();const p=rie(c);u=p.MeasureLayout,d.visualElement=Jne(r,f,c,n,p.ProjectionNode)}return P.jsxs(bC.Provider,{value:d,children:[u&&d.visualElement?P.jsx(u,{visualElement:d.visualElement,...c}):null,qne(r,o,Yne(f,d.visualElement,l),f,h,e)]})}s.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const a=se.forwardRef(s);return a[Xne]=r,a}function eie({layoutId:r}){const e=se.useContext(t7).id;return e&&r!==void 0?e+"-"+r:r}function tie(r,e){se.useContext(G7).strict}function rie(r){const{drag:e,layout:t}=_0;if(!e&&!t)return{};const n={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(r)||t!=null&&t.isEnabled(r)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function nie(r,e){if(typeof Proxy>"u")return m2;const t=new Map,n=(s,a)=>m2(s,a,r,e),i=(s,a)=>n(s,a);return new Proxy(i,{get:(s,a)=>a==="create"?n:(t.has(a)||t.set(a,m2(a,void 0,r,e)),t.get(a))})}function sj({top:r,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:r,max:n}}}function iie({x:r,y:e}){return{top:e.min,right:r.max,bottom:e.max,left:r.min}}function sie(r,e){if(!e)return r;const t=e({x:r.left,y:r.top}),n=e({x:r.right,y:r.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}function p2(r){return r===void 0||r===1}function mM({scale:r,scaleX:e,scaleY:t}){return!p2(r)||!p2(e)||!p2(t)}function of(r){return mM(r)||aj(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function aj(r){return QB(r.x)||QB(r.y)}function QB(r){return r&&r!=="0%"}function CS(r,e,t){const n=r-t,i=e*n;return t+i}function JB(r,e,t,n,i){return i!==void 0&&(r=CS(r,i,n)),CS(r,t,n)+e}function pM(r,e=0,t=1,n,i){r.min=JB(r.min,e,t,n,i),r.max=JB(r.max,e,t,n,i)}function oj(r,{x:e,y:t}){pM(r.x,e.translate,e.scale,e.originPoint),pM(r.y,t.translate,t.scale,t.originPoint)}const ZB=.999999999999,e4=1.0000000000001;function aie(r,e,t,n=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let o=0;o<i;o++){s=t[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&pg(r,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,oj(r,a)),n&&of(s.latestValues)&&pg(r,s.latestValues))}e.x<e4&&e.x>ZB&&(e.x=1),e.y<e4&&e.y>ZB&&(e.y=1)}function mg(r,e){r.min=r.min+e,r.max=r.max+e}function t4(r,e,t,n,i=.5){const s=Qr(r.min,r.max,i);pM(r,e,t,s,n)}function pg(r,e){t4(r.x,e.x,e.scaleX,e.scale,e.originX),t4(r.y,e.y,e.scaleY,e.scale,e.originY)}function lj(r,e){return sj(sie(r.getBoundingClientRect(),e))}function oie(r,e,t){const n=lj(r,t),{scroll:i}=e;return i&&(mg(n.x,i.offset.x),mg(n.y,i.offset.y)),n}const r4=()=>({translate:0,scale:1,origin:0,originPoint:0}),gg=()=>({x:r4(),y:r4()}),n4=()=>({min:0,max:0}),wn=()=>({x:n4(),y:n4()}),gM={current:null},uj={current:!1};function lie(){if(uj.current=!0,!!GR)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),e=()=>gM.current=r.matches;r.addEventListener("change",e),e()}else gM.current=!1}const uie=new WeakMap;function cie(r,e,t){for(const n in e){const i=e[n],s=t[n];if(Zi(i))r.addValue(n,i);else if(Zi(s))r.addValue(n,x0(i,{owner:r}));else if(s!==i)if(r.hasValue(n)){const a=r.getValue(n);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=r.getStaticValue(n);r.addValue(n,x0(a!==void 0?a:i,{owner:r}))}}for(const n in t)e[n]===void 0&&r.removeValue(n);return e}const i4=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class hie{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ck,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const d=Hs.now();this.renderScheduledAt<d&&(this.renderScheduledAt=d,Gr.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=xC(t),this.isVariantNode=K7(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(t,{},this);for(const d in h){const f=h[d];l[d]!==void 0&&Zi(f)&&f.set(l[d])}}mount(e){var t;this.current=e,uie.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),uj.current||lie(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:gM.current,(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),pd(this.notifyUpdate),pd(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=G0.has(e);n&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Gr.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in _0){const t=_0[e];if(!t)continue;const{isEnabled:n,Feature:i}=t;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<i4.length;n++){const i=i4[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=cie(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=x0(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(r7(n)||i7(n))?n=parseFloat(n):!Ene(n)&&gd.test(t)&&(n=$7(e,t)),this.setBaseTarget(e,Zi(n)?n.get():n)),Zi(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var s;const{initial:t}=this.props;let n;if(typeof t=="string"||typeof t=="object"){const a=wk(this.props,t,(s=this.presenceContext)==null?void 0:s.custom);a&&(n=a[e])}if(t&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Zi(i)?i:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new JR),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){fk.render(this.render)}}class cj extends hie{constructor(){super(...arguments),this.KeyframeResolver=hne}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Zi(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function hj(r,{style:e,vars:t},n,i){const s=r.style;let a;for(a in e)s[a]=e[a];i==null||i.applyProjectionStyles(s,n);for(a in t)s.setProperty(a,t[a])}function die(r){return window.getComputedStyle(r)}class fie extends cj{constructor(){super(...arguments),this.type="html",this.renderInstance=hj}readValueFromInstance(e,t){var n;if(G0.has(t))return(n=this.projection)!=null&&n.isProjecting?oM(t):Mre(e,t);{const i=die(e),s=(tk(t)?i.getPropertyValue(t):i[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return lj(e,t)}build(e,t,n){vk(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return xk(e,t,n)}}const dj=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function mie(r,e,t,n){hj(r,e,void 0,n);for(const i in e.attrs)r.setAttribute(dj.has(i)?i:_k(i),e.attrs[i])}class pie extends cj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=wn}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(G0.has(t)){const n=L7(t);return n&&n.default||0}return t=dj.has(t)?t:_k(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return tj(e,t,n)}build(e,t,n){Q7(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,i){mie(e,t,n,i)}mount(e){this.isSVGTag=Z7(e.tagName),super.mount(e)}}const gie=(r,e)=>bk(r)?new pie(e):new fie(e,{allowProjection:r!==se.Fragment});function kg(r,e,t){const n=r.getProps();return wk(n,e,t!==void 0?t:n.custom,r)}const vM=r=>Array.isArray(r);function vie(r,e,t){r.hasValue(e)?r.getValue(e).set(t):r.addValue(e,x0(t))}function yie(r){return vM(r)?r[r.length-1]||0:r}function bie(r,e){const t=kg(r,e);let{transitionEnd:n={},transition:i={},...s}=t||{};s={...s,...n};for(const a in s){const o=yie(s[a]);vie(r,a,o)}}function wie(r){return!!(Zi(r)&&r.add)}function yM(r,e){const t=r.getValue("willChange");if(wie(t))return t.add(e);if(!t&&wc.WillChange){const n=new wc.WillChange("auto");r.addValue("willChange",n),n.add(e)}}function fj(r){return r.props[rj]}const xie=r=>r!==null;function _ie(r,{repeat:e,repeatType:t="loop"},n){const i=r.filter(xie),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[s]}const Aie={type:"spring",stiffness:500,damping:25,restSpeed:10},Eie=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),Sie={type:"keyframes",duration:.8},Tie={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Cie=(r,{keyframes:e})=>e.length>2?Sie:G0.has(r)?r.startsWith("scale")?Eie(e[1]):Aie:Tie;function Nie({when:r,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const Ak=(r,e,t,n={},i,s)=>a=>{const o=hk(n,r)||{},l=o.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Ul(l);const c={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:d=>{e.set(d),o.onUpdate&&o.onUpdate(d)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:r,motionValue:e,element:s?void 0:i};Nie(o)||Object.assign(c,Cie(r,c)),c.duration&&(c.duration=Ul(c.duration)),c.repeatDelay&&(c.repeatDelay=Ul(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let h=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(dM(c),c.delay===0&&(h=!0)),(wc.instantAnimations||wc.skipAnimations)&&(h=!0,dM(c),c.delay=0),c.allowFlatten=!o.type&&!o.ease,h&&!s&&e.get()!==void 0){const d=_ie(c.keyframes,o);if(d!==void 0){Gr.update(()=>{c.onUpdate(d),c.onComplete()});return}}return o.isSync?new uk(c):new Zre(c)};function Die({protectedKeys:r,needsAnimating:e},t){const n=r.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function mj(r,e,{delay:t=0,transitionOverride:n,type:i}={}){let{transition:s=r.getDefaultTransition(),transitionEnd:a,...o}=e;n&&(s=n);const l=[],u=i&&r.animationState&&r.animationState.getState()[i];for(const c in o){const h=r.getValue(c,r.latestValues[c]??null),d=o[c];if(d===void 0||u&&Die(u,c))continue;const f={delay:t,...hk(s||{},c)},p=h.get();if(p!==void 0&&!h.isAnimating&&!Array.isArray(d)&&d===p&&!f.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const v=fj(r);if(v){const w=window.MotionHandoffAnimation(v,c,Gr);w!==null&&(f.startTime=w,g=!0)}}yM(r,c),h.start(Ak(c,h,d,r.shouldReduceMotion&&F7.has(c)?{type:!1}:f,r,g));const b=h.animation;b&&l.push(b)}return a&&Promise.all(l).then(()=>{Gr.update(()=>{a&&bie(r,a)})}),l}function pj(r,e,t,n=0,i=1){const s=Array.from(r).sort((u,c)=>u.sortNodePosition(c)).indexOf(e),a=r.size,o=(a-1)*n;return typeof t=="function"?t(s,a):i===1?s*n:o-s*n}function bM(r,e,t={}){var l;const n=kg(r,e,t.type==="exit"?(l=r.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=r.getDefaultTransition()||{}}=n||{};t.transitionOverride&&(i=t.transitionOverride);const s=n?()=>Promise.all(mj(r,n,t)):()=>Promise.resolve(),a=r.variantChildren&&r.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:d}=i;return Mie(r,e,u,c,h,d,t)}:()=>Promise.resolve(),{when:o}=i;if(o){const[u,c]=o==="beforeChildren"?[s,a]:[a,s];return u().then(()=>c())}else return Promise.all([s(),a(t.delay)])}function Mie(r,e,t=0,n=0,i=0,s=1,a){const o=[];for(const l of r.variantChildren)l.notify("AnimationStart",e),o.push(bM(l,e,{...a,delay:t+(typeof n=="function"?0:n)+pj(r.variantChildren,l,n,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(o)}function Iie(r,e,t={}){r.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(s=>bM(r,s,t));n=Promise.all(i)}else if(typeof e=="string")n=bM(r,e,t);else{const i=typeof e=="function"?kg(r,e,t.custom):e;n=Promise.all(mj(r,i,t))}return n.then(()=>{r.notify("AnimationComplete",e)})}function gj(r,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==r.length)return!1;for(let n=0;n<t;n++)if(e[n]!==r[n])return!1;return!0}const Pie=gk.length;function vj(r){if(!r)return;if(!r.isControllingVariants){const t=r.parent?vj(r.parent)||{}:{};return r.props.initial!==void 0&&(t.initial=r.props.initial),t}const e={};for(let t=0;t<Pie;t++){const n=gk[t],i=r.props[n];(p1(i)||i===!1)&&(e[n]=i)}return e}const Rie=[...pk].reverse(),kie=pk.length;function Fie(r){return e=>Promise.all(e.map(({animation:t,options:n})=>Iie(r,t,n)))}function Oie(r){let e=Fie(r),t=s4(),n=!0;const i=l=>(u,c)=>{var d;const h=kg(r,c,l==="exit"?(d=r.presenceContext)==null?void 0:d.custom:void 0);if(h){const{transition:f,transitionEnd:p,...g}=h;u={...u,...g,...p}}return u};function s(l){e=l(r)}function a(l){const{props:u}=r,c=vj(r.parent)||{},h=[],d=new Set;let f={},p=1/0;for(let b=0;b<kie;b++){const v=Rie[b],w=t[v],y=u[v]!==void 0?u[v]:c[v],A=p1(y),x=v===l?w.isActive:null;x===!1&&(p=b);let _=y===c[v]&&y!==u[v]&&A;if(_&&n&&r.manuallyAnimateOnMount&&(_=!1),w.protectedKeys={...f},!w.isActive&&x===null||!y&&!w.prevProp||wC(y)||typeof y=="boolean")continue;const S=Bie(w.prevProp,y);let E=S||v===l&&w.isActive&&!_&&A||b>p&&A,C=!1;const N=Array.isArray(y)?y:[y];let D=N.reduce(i(v),{});x===!1&&(D={});const{prevResolvedValues:M={}}=w,I={...M,...D},V=U=>{E=!0,d.has(U)&&(C=!0,d.delete(U)),w.needsAnimating[U]=!0;const j=r.getValue(U);j&&(j.liveStyle=!1)};for(const U in I){const j=D[U],G=M[U];if(f.hasOwnProperty(U))continue;let ee=!1;vM(j)&&vM(G)?ee=!gj(j,G):ee=j!==G,ee?j!=null?V(U):d.add(U):j!==void 0&&d.has(U)?V(U):w.protectedKeys[U]=!0}w.prevProp=y,w.prevResolvedValues=D,w.isActive&&(f={...f,...D}),n&&r.blockInitialAnimation&&(E=!1);const K=_&&S;E&&(!K||C)&&h.push(...N.map(U=>{const j={type:v};if(typeof U=="string"&&n&&!K&&r.manuallyAnimateOnMount&&r.parent){const{parent:G}=r,ee=kg(G,U);if(G.enteringChildren&&ee){const{delayChildren:ue}=ee.transition||{};j.delay=pj(G.enteringChildren,r,ue)}}return{animation:U,options:j}}))}if(d.size){const b={};if(typeof u.initial!="boolean"){const v=kg(r,Array.isArray(u.initial)?u.initial[0]:u.initial);v&&v.transition&&(b.transition=v.transition)}d.forEach(v=>{const w=r.getBaseTarget(v),y=r.getValue(v);y&&(y.liveStyle=!0),b[v]=w??null}),h.push({animation:b})}let g=!!h.length;return n&&(u.initial===!1||u.initial===u.animate)&&!r.manuallyAnimateOnMount&&(g=!1),n=!1,g?e(h):Promise.resolve()}function o(l,u){var h;if(t[l].isActive===u)return Promise.resolve();(h=r.variantChildren)==null||h.forEach(d=>{var f;return(f=d.animationState)==null?void 0:f.setActive(l,u)}),t[l].isActive=u;const c=a(l);for(const d in t)t[d].protectedKeys={};return c}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>t,reset:()=>{t=s4()}}}function Bie(r,e){return typeof e=="string"?e!==r:Array.isArray(e)?!gj(e,r):!1}function nf(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function s4(){return{animate:nf(!0),whileInView:nf(),whileHover:nf(),whileTap:nf(),whileDrag:nf(),whileFocus:nf(),exit:nf()}}class Fd{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Lie extends Fd{constructor(e){super(e),e.animationState||(e.animationState=Oie(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();wC(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let $ie=0;class Vie extends Fd{constructor(){super(...arguments),this.id=$ie++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Uie={animation:{Feature:Lie},exit:{Feature:Vie}};function v1(r,e,t,n={passive:!0}){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t)}function Bx(r){return{point:{x:r.pageX,y:r.pageY}}}const zie=r=>e=>mk(e)&&r(e,Bx(e));function Ob(r,e,t,n){return v1(r,e,zie(t),n)}const yj=1e-4,jie=1-yj,qie=1+yj,bj=.01,Hie=0-bj,Gie=0+bj;function gs(r){return r.max-r.min}function Wie(r,e,t){return Math.abs(r-e)<=t}function a4(r,e,t,n=.5){r.origin=n,r.originPoint=Qr(e.min,e.max,r.origin),r.scale=gs(t)/gs(e),r.translate=Qr(t.min,t.max,r.origin)-r.originPoint,(r.scale>=jie&&r.scale<=qie||isNaN(r.scale))&&(r.scale=1),(r.translate>=Hie&&r.translate<=Gie||isNaN(r.translate))&&(r.translate=0)}function Bb(r,e,t,n){a4(r.x,e.x,t.x,n?n.originX:void 0),a4(r.y,e.y,t.y,n?n.originY:void 0)}function o4(r,e,t){r.min=t.min+e.min,r.max=r.min+gs(e)}function Kie(r,e,t){o4(r.x,e.x,t.x),o4(r.y,e.y,t.y)}function l4(r,e,t){r.min=e.min-t.min,r.max=r.min+gs(e)}function Lb(r,e,t){l4(r.x,e.x,t.x),l4(r.y,e.y,t.y)}function za(r){return[r("x"),r("y")]}const wj=({current:r})=>r?r.ownerDocument.defaultView:null,u4=(r,e)=>Math.abs(r-e);function Xie(r,e){const t=u4(r.x,e.x),n=u4(r.y,e.y);return Math.sqrt(t**2+n**2)}class xj{constructor(e,t,{transformPagePoint:n,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=v2(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=Xie(d.offset,{x:0,y:0})>=this.distanceThreshold;if(!f&&!p)return;const{point:g}=d,{timestamp:b}=Ei;this.history.push({...g,timestamp:b});const{onStart:v,onMove:w}=this.handlers;f||(v&&v(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=g2(f,this.transformPagePoint),Gr.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:p,onSessionEnd:g,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=v2(d.type==="pointercancel"?this.lastMoveEventInfo:g2(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,v),g&&g(d,v)},!mk(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=a,this.contextWindow=i||window;const o=Bx(e),l=g2(o,this.transformPagePoint),{point:u}=l,{timestamp:c}=Ei;this.history=[{...u,timestamp:c}];const{onSessionStart:h}=t;h&&h(e,v2(l,this.history)),this.removeListeners=kx(Ob(this.contextWindow,"pointermove",this.handlePointerMove),Ob(this.contextWindow,"pointerup",this.handlePointerUp),Ob(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),pd(this.updatePoint)}}function g2(r,e){return e?{point:e(r.point)}:r}function c4(r,e){return{x:r.x-e.x,y:r.y-e.y}}function v2({point:r},e){return{point:r,delta:c4(r,_j(e)),offset:c4(r,Yie(e)),velocity:Qie(e,.1)}}function Yie(r){return r[0]}function _j(r){return r[r.length-1]}function Qie(r,e){if(r.length<2)return{x:0,y:0};let t=r.length-1,n=null;const i=_j(r);for(;t>=0&&(n=r[t],!(i.timestamp-n.timestamp>Ul(e)));)t--;if(!n)return{x:0,y:0};const s=uo(i.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Jie(r,{min:e,max:t},n){return e!==void 0&&r<e?r=n?Qr(e,r,n.min):Math.max(r,e):t!==void 0&&r>t&&(r=n?Qr(t,r,n.max):Math.min(r,t)),r}function h4(r,e,t){return{min:e!==void 0?r.min+e:void 0,max:t!==void 0?r.max+t-(r.max-r.min):void 0}}function Zie(r,{top:e,left:t,bottom:n,right:i}){return{x:h4(r.x,t,i),y:h4(r.y,e,n)}}function d4(r,e){let t=e.min-r.min,n=e.max-r.max;return e.max-e.min<r.max-r.min&&([t,n]=[n,t]),{min:t,max:n}}function ese(r,e){return{x:d4(r.x,e.x),y:d4(r.y,e.y)}}function tse(r,e){let t=.5;const n=gs(r),i=gs(e);return i>n?t=d1(e.min,e.max-n,r.min):n>i&&(t=d1(r.min,r.max-i,e.min)),bc(0,1,t)}function rse(r,e){const t={};return e.min!==void 0&&(t.min=e.min-r.min),e.max!==void 0&&(t.max=e.max-r.min),t}const wM=.35;function nse(r=wM){return r===!1?r=0:r===!0&&(r=wM),{x:f4(r,"left","right"),y:f4(r,"top","bottom")}}function f4(r,e,t){return{min:m4(r,e),max:m4(r,t)}}function m4(r,e){return typeof r=="number"?r:r[e]||0}const ise=new WeakMap;class sse{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:n}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Bx(h).point)},a=(h,d)=>{const{drag:f,dragPropagation:p,onDragStart:g}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=gne(f),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=d,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),za(v=>{let w=this.getAxisMotionValue(v).get()||0;if(zl.test(w)){const{projection:y}=this.visualElement;if(y&&y.layout){const A=y.layout.layoutBox[v];A&&(w=gs(A)*(parseFloat(w)/100))}}this.originPoint[v]=w}),g&&Gr.postRender(()=>g(h,d)),yM(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},o=(h,d)=>{this.latestPointerEvent=h,this.latestPanInfo=d;const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:g,onDrag:b}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:v}=d;if(p&&this.currentDirection===null){this.currentDirection=ase(v),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",d.point,v),this.updateAxis("y",d.point,v),this.visualElement.render(),b&&b(h,d)},l=(h,d)=>{this.latestPointerEvent=h,this.latestPanInfo=d,this.stop(h,d),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>za(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)==null?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new xj(e,{onSessionStart:s,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:n,contextWindow:wj(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,i=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!n)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&Gr.postRender(()=>o(n,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:i}=this.getProps();if(!n||!sA(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=Jie(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&fg(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=Zie(n.layoutBox,e):this.constraints=!1,this.elastic=nse(t),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&za(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=rse(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!fg(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=oie(n,i.root,this.visualElement.getTransformPagePoint());let a=ese(i.layout.layoutBox,s);if(t){const o=t(iie(a));this.hasMutatedConstraints=!!o,o&&(a=sj(o))}return a}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=za(c=>{if(!sA(c,t,this.currentDirection))return;let h=l&&l[c]||{};a&&(h={min:0,max:0});const d=i?200:1e6,f=i?40:1e7,p={type:"inertia",velocity:n?e[c]:0,bounceStiffness:d,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(c,p)});return Promise.all(u).then(o)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return yM(this.visualElement,e),n.start(Ak(e,n,0,t,this.visualElement,!1))}stopAnimation(){za(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){za(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[t];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){za(t=>{const{drag:n}=this.getProps();if(!sA(t,n,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[t];s.set(e[t]-Qr(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!fg(t)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};za(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=tse({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),za(a=>{if(!sA(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(Qr(l,u,i[a]))})}addListeners(){if(!this.visualElement.current)return;ise.set(this.visualElement,this);const e=this.visualElement.current,t=Ob(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();fg(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Gr.read(n);const a=v1(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(za(c=>{const h=this.getAxisMotionValue(c);h&&(this.originPoint[c]+=l[c].translate,h.set(h.get()+l[c].translate))}),this.visualElement.render())});return()=>{a(),t(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=wM,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function sA(r,e,t){return(e===!0||e===r)&&(t===null||t===r)}function ase(r,e=10){let t=null;return Math.abs(r.y)>e?t="y":Math.abs(r.x)>e&&(t="x"),t}class ose extends Fd{constructor(e){super(e),this.removeGroupControls=ho,this.removeListeners=ho,this.controls=new sse(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ho}unmount(){this.removeGroupControls(),this.removeListeners()}}const p4=r=>(e,t)=>{r&&Gr.postRender(()=>r(e,t))};class lse extends Fd{constructor(){super(...arguments),this.removePointerDownListener=ho}onPointerDown(e){this.session=new xj(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:wj(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:p4(e),onStart:p4(t),onMove:n,onEnd:(s,a)=>{delete this.session,i&&Gr.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=Ob(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const nE={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function g4(r,e){return e.max===e.min?0:r/(e.max-e.min)*100}const Fy={correct:(r,e)=>{if(!e.target)return r;if(typeof r=="string")if(pt.test(r))r=parseFloat(r);else return r;const t=g4(r,e.target.x),n=g4(r,e.target.y);return`${t}% ${n}%`}},use={correct:(r,{treeScale:e,projectionDelta:t})=>{const n=r,i=gd.parse(r);if(i.length>5)return n;const s=gd.createTransformer(r),a=typeof i[0]!="number"?1:0,o=t.x.scale*e.x,l=t.y.scale*e.y;i[0+a]/=o,i[1+a]/=l;const u=Qr(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=u),typeof i[3+a]=="number"&&(i[3+a]/=u),s(i)}};let y2=!1;class cse extends se.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:i}=this.props,{projection:s}=e;Pne(hse),s&&(t.group&&t.group.add(s),n&&n.register&&i&&n.register(s),y2&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),nE.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:i,isPresent:s}=this.props,{projection:a}=n;return a&&(a.isPresent=s,y2=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||Gr.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),fk.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:i}=e;y2=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Aj(r){const[e,t]=Sne(),n=se.useContext(t7);return P.jsx(cse,{...r,layoutGroup:n,switchLayoutGroup:se.useContext(nj),isPresent:e,safeToRemove:t})}const hse={borderRadius:{...Fy,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fy,borderTopRightRadius:Fy,borderBottomLeftRadius:Fy,borderBottomRightRadius:Fy,boxShadow:use};function dse(r,e,t){const n=Zi(r)?r:x0(r);return n.start(Ak("",n,e,t)),n.animation}const fse=(r,e)=>r.depth-e.depth;class mse{constructor(){this.children=[],this.isDirty=!1}add(e){KR(this.children,e),this.isDirty=!0}remove(e){XR(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(fse),this.isDirty=!1,this.children.forEach(e)}}function pse(r,e){const t=Hs.now(),n=({timestamp:i})=>{const s=i-t;s>=e&&(pd(n),r(s-e))};return Gr.setup(n,!0),()=>pd(n)}const Ej=["TopLeft","TopRight","BottomLeft","BottomRight"],gse=Ej.length,v4=r=>typeof r=="string"?parseFloat(r):r,y4=r=>typeof r=="number"||pt.test(r);function vse(r,e,t,n,i,s){i?(r.opacity=Qr(0,t.opacity??1,yse(n)),r.opacityExit=Qr(e.opacity??1,0,bse(n))):s&&(r.opacity=Qr(e.opacity??1,t.opacity??1,n));for(let a=0;a<gse;a++){const o=`border${Ej[a]}Radius`;let l=b4(e,o),u=b4(t,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||y4(l)===y4(u)?(r[o]=Math.max(Qr(v4(l),v4(u),n),0),(zl.test(u)||zl.test(l))&&(r[o]+="%")):r[o]=u}(e.rotate||t.rotate)&&(r.rotate=Qr(e.rotate||0,t.rotate||0,n))}function b4(r,e){return r[e]!==void 0?r[e]:r.borderRadius}const yse=Sj(0,.5,d7),bse=Sj(.5,.95,ho);function Sj(r,e,t){return n=>n<r?0:n>e?1:t(d1(r,e,n))}function w4(r,e){r.min=e.min,r.max=e.max}function Ba(r,e){w4(r.x,e.x),w4(r.y,e.y)}function x4(r,e){r.translate=e.translate,r.scale=e.scale,r.originPoint=e.originPoint,r.origin=e.origin}function _4(r,e,t,n,i){return r-=e,r=CS(r,1/t,n),i!==void 0&&(r=CS(r,1/i,n)),r}function wse(r,e=0,t=1,n=.5,i,s=r,a=r){if(zl.test(e)&&(e=parseFloat(e),e=Qr(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=Qr(s.min,s.max,n);r===s&&(o-=e),r.min=_4(r.min,e,t,o,i),r.max=_4(r.max,e,t,o,i)}function A4(r,e,[t,n,i],s,a){wse(r,e[t],e[n],e[i],e.scale,s,a)}const xse=["x","scaleX","originX"],_se=["y","scaleY","originY"];function E4(r,e,t,n){A4(r.x,e,xse,t?t.x:void 0,n?n.x:void 0),A4(r.y,e,_se,t?t.y:void 0,n?n.y:void 0)}function S4(r){return r.translate===0&&r.scale===1}function Tj(r){return S4(r.x)&&S4(r.y)}function T4(r,e){return r.min===e.min&&r.max===e.max}function Ase(r,e){return T4(r.x,e.x)&&T4(r.y,e.y)}function C4(r,e){return Math.round(r.min)===Math.round(e.min)&&Math.round(r.max)===Math.round(e.max)}function Cj(r,e){return C4(r.x,e.x)&&C4(r.y,e.y)}function N4(r){return gs(r.x)/gs(r.y)}function D4(r,e){return r.translate===e.translate&&r.scale===e.scale&&r.originPoint===e.originPoint}class Ese{constructor(){this.members=[]}add(e){KR(this.members,e),e.scheduleRender()}remove(e){if(XR(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let n;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Sse(r,e,t){let n="";const i=r.x.translate/e.x,s=r.y.translate/e.y,a=(t==null?void 0:t.z)||0;if((i||s||a)&&(n=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:u,rotate:c,rotateX:h,rotateY:d,skewX:f,skewY:p}=t;u&&(n=`perspective(${u}px) ${n}`),c&&(n+=`rotate(${c}deg) `),h&&(n+=`rotateX(${h}deg) `),d&&(n+=`rotateY(${d}deg) `),f&&(n+=`skewX(${f}deg) `),p&&(n+=`skewY(${p}deg) `)}const o=r.x.scale*e.x,l=r.y.scale*e.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const b2=["","X","Y","Z"],Tse=1e3;let Cse=0;function w2(r,e,t,n){const{latestValues:i}=e;i[r]&&(t[r]=i[r],e.setStaticValue(r,0),n&&(n[r]=0))}function Nj(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:e}=r.options;if(!e)return;const t=fj(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=r.options;window.MotionCancelOptimisedAnimation(t,"transform",Gr,!(i||s))}const{parent:n}=r;n&&!n.hasCheckedOptimisedAppear&&Nj(n)}function Dj({attachResizeListener:r,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(a={},o=e==null?void 0:e()){this.id=Cse++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Mse),this.nodes.forEach(kse),this.nodes.forEach(Fse),this.nodes.forEach(Ise)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new mse)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new JR),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=q7(a)&&!_ne(a),this.instance=a;const{layoutId:o,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),r){let c,h=0;const d=()=>this.root.updateBlockedByResize=!1;Gr.read(()=>{h=window.innerWidth}),r(a,()=>{const f=window.innerWidth;f!==h&&(h=f,this.root.updateBlockedByResize=!0,c&&c(),c=pse(d,250),nE.hasAnimatedSinceResize&&(nE.hasAnimatedSinceResize=!1,this.nodes.forEach(P4)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:d,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||u.getDefaultTransition()||Vse,{onLayoutAnimationStart:g,onLayoutAnimationComplete:b}=u.getProps(),v=!this.targetLayout||!Cj(this.targetLayout,f),w=!h&&d;if(this.options.layoutRoot||this.resumeFrom||w||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const y={...hk(p,"layout"),onPlay:g,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(y.delay=0,y.type=!1),this.startAnimation(y),this.setAnimationOrigin(c,w)}else h||P4(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),pd(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ose),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Nj(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const h=this.path[c];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(M4);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(I4);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Rse),this.nodes.forEach(Nse),this.nodes.forEach(Dse)):this.nodes.forEach(I4),this.clearAllSnapshots();const o=Hs.now();Ei.delta=bc(0,1e3/60,o-Ei.timestamp),Ei.timestamp=o,Ei.isProcessing=!0,l2.update.process(Ei),l2.preRender.process(Ei),l2.render.process(Ei),Ei.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,fk.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Pse),this.sharedNodes.forEach(Bse)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Gr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Gr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!gs(this.snapshot.measuredBox.x)&&!gs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=wn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!Tj(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;a&&this.instance&&(o||of(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),Use(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:a}=this.options;if(!a)return wn();const o=a.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(zse))){const{scroll:c}=this.root;c&&(mg(o.x,c.offset.x),mg(o.y,c.offset.y))}return o}removeElementScroll(a){var l;const o=wn();if(Ba(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:h,options:d}=c;c!==this.root&&h&&d.layoutScroll&&(h.wasRoot&&Ba(o,a),mg(o.x,h.offset.x),mg(o.y,h.offset.y))}return o}applyTransform(a,o=!1){const l=wn();Ba(l,a);for(let u=0;u<this.path.length;u++){const c=this.path[u];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&pg(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),of(c.latestValues)&&pg(l,c.latestValues)}return of(this.latestValues)&&pg(l,this.latestValues),l}removeTransform(a){const o=wn();Ba(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!of(u.latestValues))continue;mM(u.latestValues)&&u.updateSnapshot();const c=wn(),h=u.measurePageBox();Ba(c,h),E4(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return of(this.latestValues)&&E4(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ei.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var d;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(d=this.parent)!=null&&d.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:h}=this.options;if(!(!this.layout||!(c||h))){if(this.resolvedRelativeTargetAt=Ei.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wn(),this.relativeTargetOrigin=wn(),Lb(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),Ba(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=wn(),this.targetWithTransforms=wn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Kie(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ba(this.target,this.layout.layoutBox),oj(this.target,this.targetDelta)):Ba(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wn(),this.relativeTargetOrigin=wn(),Lb(this.relativeTargetOrigin,this.target,f.target),Ba(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||mM(this.parent.latestValues)||aj(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var p;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Ei.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;Ba(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,d=this.treeScale.y;aie(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=wn());const{target:f}=a;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(x4(this.prevProjectionDelta.x,this.projectionDelta.x),x4(this.prevProjectionDelta.y,this.projectionDelta.y)),Bb(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==d||!D4(this.projectionDelta.x,this.prevProjectionDelta.x)||!D4(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=gg(),this.projectionDelta=gg(),this.projectionDeltaWithTransform=gg()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},h=gg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const d=wn(),f=l?l.source:void 0,p=this.layout?this.layout.source:void 0,g=f!==p,b=this.getStack(),v=!b||b.members.length<=1,w=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some($se));this.animationProgress=0;let y;this.mixTargetDelta=A=>{const x=A/1e3;R4(h.x,a.x,x),R4(h.y,a.y,x),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Lb(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Lse(this.relativeTarget,this.relativeTargetOrigin,d,x),y&&Ase(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=wn()),Ba(y,this.relativeTarget)),g&&(this.animationValues=c,vse(c,u,this.latestValues,x,w,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=x},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var o,l,u;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(pd(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Gr.update(()=>{nE.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=x0(0)),this.currentAnimation=dse(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),a.onUpdate&&a.onUpdate(c)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Tse),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:c}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&Mj(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||wn();const h=gs(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+h;const d=gs(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+d}Ba(o,l),pg(o,c),Bb(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Ese),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&w2("z",a,u,this.animationValues);for(let c=0;c<b2.length;c++)w2(`rotate${b2[c]}`,a,u,this.animationValues),w2(`skew${b2[c]}`,a,u,this.animationValues);a.render();for(const c in u)a.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=rE(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=rE(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!of(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=Sse(this.projectionDeltaWithTransform,this.treeScale,c);l&&(h=l(c,h)),a.transform=h;const{x:d,y:f}=this.projectionDelta;a.transformOrigin=`${d.origin*100}% ${f.origin*100}% 0`,u.animationValues?a.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:a.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const p in g1){if(c[p]===void 0)continue;const{correct:g,applyTo:b,isCSSVariable:v}=g1[p],w=h==="none"?c[p]:g(c[p],u);if(b){const y=b.length;for(let A=0;A<y;A++)a[b[A]]=w}else v?this.options.visualElement.renderState.vars[p]=w:a[p]=w}this.options.layoutId&&(a.pointerEvents=u===this?rE(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(M4),this.root.sharedNodes.clear()}}}function Nse(r){r.updateLayout()}function Dse(r){var t;const e=((t=r.resumeFrom)==null?void 0:t.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&e&&r.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=r.layout,{animationType:s}=r.options,a=e.source!==r.layout.source;s==="size"?za(h=>{const d=a?e.measuredBox[h]:e.layoutBox[h],f=gs(d);d.min=n[h].min,d.max=d.min+f}):Mj(s,e.layoutBox,n)&&za(h=>{const d=a?e.measuredBox[h]:e.layoutBox[h],f=gs(n[h]);d.max=d.min+f,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[h].max=r.relativeTarget[h].min+f)});const o=gg();Bb(o,n,e.layoutBox);const l=gg();a?Bb(l,r.applyTransform(i,!0),e.measuredBox):Bb(l,n,e.layoutBox);const u=!Tj(o);let c=!1;if(!r.resumeFrom){const h=r.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:d,layout:f}=h;if(d&&f){const p=wn();Lb(p,e.layoutBox,d.layoutBox);const g=wn();Lb(g,n,f.layoutBox),Cj(p,g)||(c=!0),h.options.layoutRoot&&(r.relativeTarget=g,r.relativeTargetOrigin=p,r.relativeParent=h)}}}r.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(r.isLead()){const{onExitComplete:n}=r.options;n&&n()}r.options.transition=void 0}function Mse(r){r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function Ise(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function Pse(r){r.clearSnapshot()}function M4(r){r.clearMeasurements()}function I4(r){r.isLayoutDirty=!1}function Rse(r){const{visualElement:e}=r.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),r.resetTransform()}function P4(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function kse(r){r.resolveTargetDelta()}function Fse(r){r.calcProjection()}function Ose(r){r.resetSkewAndRotation()}function Bse(r){r.removeLeadSnapshot()}function R4(r,e,t){r.translate=Qr(e.translate,0,t),r.scale=Qr(e.scale,1,t),r.origin=e.origin,r.originPoint=e.originPoint}function k4(r,e,t,n){r.min=Qr(e.min,t.min,n),r.max=Qr(e.max,t.max,n)}function Lse(r,e,t,n){k4(r.x,e.x,t.x,n),k4(r.y,e.y,t.y,n)}function $se(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const Vse={duration:.45,ease:[.4,0,.1,1]},F4=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),O4=F4("applewebkit/")&&!F4("chrome/")?Math.round:ho;function B4(r){r.min=O4(r.min),r.max=O4(r.max)}function Use(r){B4(r.x),B4(r.y)}function Mj(r,e,t){return r==="position"||r==="preserve-aspect"&&!Wie(N4(e),N4(t),.2)}function zse(r){var e;return r!==r.root&&((e=r.scroll)==null?void 0:e.wasRoot)}const jse=Dj({attachResizeListener:(r,e)=>v1(r,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),x2={current:void 0},Ij=Dj({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!x2.current){const r=new jse({});r.mount(window),r.setOptions({layoutScroll:!0}),x2.current=r}return x2.current},resetTransform:(r,e)=>{r.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),qse={pan:{Feature:lse},drag:{Feature:ose,ProjectionNode:Ij,MeasureLayout:Aj}};function L4(r,e,t){const{props:n}=r;r.animationState&&n.whileHover&&r.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=n[i];s&&Gr.postRender(()=>s(e,Bx(e)))}class Hse extends Fd{mount(){const{current:e}=this.node;e&&(this.unmount=vne(e,(t,n)=>(L4(this.node,n,"Start"),i=>L4(this.node,i,"End"))))}unmount(){}}class Gse extends Fd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=kx(v1(this.node.current,"focus",()=>this.onFocus()),v1(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function $4(r,e,t){const{props:n}=r;if(r.current instanceof HTMLButtonElement&&r.current.disabled)return;r.animationState&&n.whileTap&&r.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=n[i];s&&Gr.postRender(()=>s(e,Bx(e)))}class Wse extends Fd{mount(){const{current:e}=this.node;e&&(this.unmount=xne(e,(t,n)=>($4(this.node,n,"Start"),(i,{success:s})=>$4(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const xM=new WeakMap,_2=new WeakMap,Kse=r=>{const e=xM.get(r.target);e&&e(r)},Xse=r=>{r.forEach(Kse)};function Yse({root:r,...e}){const t=r||document;_2.has(t)||_2.set(t,{});const n=_2.get(t),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(Xse,{root:r,...e})),n[i]}function Qse(r,e,t){const n=Yse(e);return xM.set(r,t),n.observe(r),()=>{xM.delete(r),n.unobserve(r)}}const Jse={some:0,all:1};class Zse extends Fd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:Jse[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:h}=this.node.getProps(),d=u?c:h;d&&d(l)};return Qse(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(eae(e,t))&&this.startObserver()}unmount(){}}function eae({viewport:r={}},{viewport:e={}}={}){return t=>r[t]!==e[t]}const tae={inView:{Feature:Zse},tap:{Feature:Wse},focus:{Feature:Gse},hover:{Feature:Hse}},rae={layout:{ProjectionNode:Ij,MeasureLayout:Aj}},nae={...Uie,...tae,...qse,...rae},Ye=nie(nae,gie),Ek=[{slug:"general-relativity",title:"   ",category:"relativity",description:"Einstein Field Equation, Schwarzschild/Kerr ,  ",content:{overview:"    . Schwarzschild Kerr        (vacuum solution).",keyPoints:["Einstein Field Equation: G = 8GT","Schwarzschild :  ,   ","Kerr :  , ergosphere "," :  / ","Shapiro delay:    ",": f = f0(1-2GM/rc)"],keyFormulas:[{tex:"G_{\\mu\\nu} = R_{\\mu\\nu} - \\frac{1}{2}g_{\\mu\\nu}R = \\frac{8\\pi G}{c^4}T_{\\mu\\nu}",desc:"Einstein Field Equation"},{tex:"ds^2 = -\\left(1 - \\frac{2GM}{c^2r}\\right)c^2dt^2 + \\left(1 - \\frac{2GM}{c^2r}\\right)^{-1}dr^2 + r^2(d\\theta^2 + \\sin^2\\theta\\,d\\phi^2)",desc:"Schwarzschild "},{tex:"r_s = \\frac{2GM}{c^2}",desc:"Schwarzschild "},{tex:"\\frac{d^2x^\\lambda}{d\\tau^2} + \\Gamma^\\lambda_{\\mu\\nu}\\frac{dx^\\mu}{d\\tau}\\frac{dx^\\nu}{d\\tau} = 0",desc:" "}],observations:'   (42.98"/century),  ,  ',relatedPapers:["The Mathematical Theory of Black Holes (Chandrasekhar, 1983)","General Relativity (Carroll, 2004)","Gravitational Waves from Coalescing Compact Binaries (Abbott et al. LIGO, 2016)"]}},{slug:"stellar-structure",title:"   ",category:"stars",description:"  , Lane-Emden ,   ",content:{overview:"         .         .",keyPoints:[" : dP/dr = -GM/r","  : radiative flux  opacity ","Lane-Emden  :   "," : PP chain (), CNO cycle ()"," : convection instability criterion (adiabatic gradient vs. radiative gradient)",": photosphere  "],keyFormulas:[{tex:"\\frac{dP}{dr} = -\\rho \\frac{GM(<r)}{r^2}",desc:"  "},{tex:"F_\\mathrm{rad} = -\\frac{c}{3\\kappa\\rho}\\frac{dT^4}{dr}",desc:" "},{tex:"\\frac{d^2u}{d\\xi^2} + \\frac{2}{\\xi}\\frac{du}{d\\xi} + u^n = 0",desc:"Lane-Emden "},{tex:"PP\\,\\mathrm{chain}: {}^1H + {}^1H \\to {}^2H + e^+ + \\nu",desc:"-  "}],observations:"  L=3.82810W,  R=6.9610m,   T_c~1.5710K,  _c~150 g/cm",relatedPapers:["Stellar Interiors: Physical Principles, Structure and Evolution (Hansen, Kawaler & Trimble, 2004)","The Theory of Stellar Structure and Evolution (Kippenhahn, Weigert & Weiss, 2012)"]}},{slug:"black-hole-astrophysics",title:" : Kerr  ",category:"relativity",description:"Kerr ergosphere, ISCO , Hawking ,  ",content:{overview:" (Kerr )   .  (Hawking )   ,       .",keyPoints:["Kerr :   a = J/M ","Ergosphere:   g_tt=0 ","ISCO (Innermost Stable Circular Orbit): a=0  r_ISCO = 6GM/c","Hawking :  T_H = c/(8kGM)","Penrose process:    ","Accretion disk: viscosity   "],keyFormulas:[{tex:"ds^2 = -\\frac{\\Delta}{\\rho^2}(c\\,dt - a\\sin^2\\theta\\,d\\phi)^2 + \\frac{\\rho^2}{\\Delta}dr^2 + \\rho^2 d\\theta^2 + \\frac{\\sin^2\\theta}{\\rho^2}(a c\\,dt - (r^2+a^2)d\\phi)^2",desc:"Kerr  (Boyer-Lindquist )"},{tex:"r_{\\mathrm{ISCO}} = \\frac{GM}{c^2}\\left(3 + Z_2 - \\sqrt{(3-Z_1)(3+Z_1+2Z_2)}\\right)",desc:"ISCO  (Kerr )"},{tex:"T_H = \\frac{\\hbar c^3}{8\\pi k_B G M}",desc:"Hawking "},{tex:"\\eta = 1 - \\sqrt{1 - \\frac{2GM}{c^2 r_{\\mathrm{ISCO}}}}",desc:" "}],observations:"M87   M=(6.50.7)10M (EHT 2019), Sagittarius A*  M=(4.2970.013)10M",relatedPapers:["Black Hole Accretion in Supermassive and Stellar Mass Regimes (Done et al. 2007)","The Event Horizon Telescope Collaboration (2019, ApJ Letters)","Information and the Nature of Reality (Wheeler & Ford, 1998)"]}},{slug:"galaxy-dynamics",title:"  ",category:"galaxies",description:"Jeans ,   , CDM,  ",content:{overview:"  , ,    . Jeans        .",keyPoints:["Jeans :    "," :   NFW  ","Virial theorem: 2K + U = 0 ( )"," :   ~85%","CDM : M0.3, 0.7"," : N-body + hydrodynamics"],keyFormulas:[{tex:"\\frac{d\\sigma_r^2}{dr} + 2\\frac{\\beta}{r}\\sigma_r^2 = -\\frac{GM(<r)}{r^2}",desc:"Jeans "},{tex:"v_{\\mathrm{c}}(r) = \\sqrt{\\frac{GM(<r)}{r}}",desc:"  "},{tex:"\\rho_{\\mathrm{NFW}}(r) = \\frac{\\rho_s}{(r/r_s)(1+r/r_s)^2}",desc:"Navarro-Frenk-White  "},{tex:"2\\langle K \\rangle + \\langle U \\rangle = 0",desc:" Virial "}],observations:"    (220 km/s at 8 kpc),    ( )",relatedPapers:["Galactic Dynamics (Binney & Tremaine, 2008)","The Concentration of Dark Matter Halos (Navarro, Frenk & White, 1997)","Simulations of the formation, evolution and clustering of galaxies and quasars (Springel et al. 2005)"]}},{slug:"cosmology",title:"  ",category:"cosmology",description:"Friedmann , CMB  ,  ",content:{overview:"      . Friedmann     , CMB    CDM  .",keyPoints:["Friedmann : a(t)  "," : t = 13.7870.020 Gyr (Planck 2018)"," : _   120 ","CMB :   T/T ~ 10","  : C_     "," : w(z) = p/(c)"],keyFormulas:[{tex:"\\left(\\frac{\\dot{a}}{a}\\right)^2 + \\frac{k}{a^2} = \\frac{8\\pi G}{3}\\rho",desc:"1 Friedmann "},{tex:"\\frac{\\ddot{a}}{a} = -\\frac{4\\pi G}{3}(\\rho + 3p) + \\frac{\\Lambda}{3}",desc:"2 Friedmann "},{tex:"T(z) = T_0 (1+z)",desc:"  "},{tex:"w = \\frac{p}{\\rho c^2}",desc:"  "}],observations:"CMB: b=0.049, cdm=0.264, =0.684, H0=67.4 km/s/Mpc (Planck 2018)",relatedPapers:["Planck 2018 results (Planck Collaboration, 2018)","A High-Resolution Cosmic Microwave Background Map (WMAP, 2003-2013)","Observational Evidence from Supernovae for an Accelerating Universe (Perlmutter et al. 1999)"]}},{slug:"observational-astronomy",title:" : , , ",category:"observations",description:"Equivalent Width, Voigt profile, CCD photometry,  ",content:{overview:"    .   (Equivalent Width, Doppler shift), CCD ,      .",keyPoints:["Equivalent Width (EW):    ","Voigt profile:  +   ","CCD : -(S/N), (dynamic range)",'X-ray : Chandra  0.5",   100 eV',"IR  (JWST): NIRCam  0.6-5m,  /~1600"," (VLBI): baseline ~10000 km,  ~as"],keyFormulas:[{tex:"EW = \\int_{\\lambda_1}^{\\lambda_2} \\left(1 - \\frac{F_\\lambda}{F_c}\\right)d\\lambda",desc:""},{tex:"f(\\nu) = \\frac{I(\\nu_0)}{\\sqrt{\\pi}}\\int_{-\\infty}^{\\infty}\\frac{e^{-t^2}}{1+(a(\\nu-\\nu_0+t\\Delta\\nu_D)/\\Delta\\nu_D)^2}dt",desc:"Voigt "},{tex:"(S/N)_{\\mathrm{CCD}} = \\frac{Ne}{\\sqrt{Ne + n_r^2 + n_d^2}}",desc:"CCD -"},{tex:"\\theta_{\\mathrm{res}} \\approx 1.22\\frac{\\lambda}{D}",desc:"  (Rayleigh criterion)"}],observations:"JWST NIRCam z~11   (_obs~2m), Chandra    , EHT   (48as)",relatedPapers:["Observational Astrophysics (Birney, Gonzalez & Oesper, 2006)","Modern Observational Astronomy: the Principles, Science and Techniques (Filippenko, 2006)"]}},{slug:"mass-luminosity",title:"- ",category:"stars",description:"    ",content:{overview:"       .       .",keyPoints:[": L  M^3.5 ()","     (2.5~4.5)","     "],keyFormulas:[{tex:"L \\approx M^{3.5}",desc:"-  ()"},{tex:"t_{\\mathrm{lifetime}} \\approx \\frac{M}{L} \\propto M^{-2.5}",desc:"  "}],observations:"  1   1, 10   ~3000",relatedPapers:["Mass-Luminosity Relations (1970)","Stellar Evolution Theory (1995)"]}},{slug:"dark-matter-rotation",title:"  ",category:"galaxies",description:"      ",content:{overview:"            ,    .",keyPoints:["   :    "," :  v  1/r ( )",": v   (100~300 km/s)"," :   ~85%"],keyFormulas:[{tex:"v(r) = \\sqrt{\\frac{GM(<r)}{r}}",desc:"   "},{tex:"M(<r) \\propto r",desc:" r  "}],observations:"M31 ,     ",relatedPapers:["The Rotation of Spiral Nebulae (1975)","Dark Matter and Galaxy Formation (2010)"]}},{slug:"cosmic-microwave-background",title:"  (CMB)",category:"cosmology",description:"    , ,  ",content:{overview:"CMB   38       .      .",keyPoints:[": 1965 Penzias & Wilson",": 2.725 K ( )",":   T/T ~ 10",":   "],keyFormulas:[{tex:"T(z) = T_0 (1 + z)",desc:"  CMB "},{tex:"T_0 = 2.725 \\, \\mathrm{K}",desc:"CMB  "}],observations:"WMAP, Planck   m=0.315, =0.685, H0=67 km/s/Mpc ",relatedPapers:["A Measurement of the Fluctuations in the Cosmic Microwave Background (1992)","Planck 2018 results (2018)"]}},{slug:"gravitational-waves",title:"   ",category:"observations",description:"LIGO/Virgo ,  ,  ,   ",content:{overview:"     . 2015  (GW150914) ,   (BBH),  (BNS),  (NSBH)    . /          .",keyPoints:["LIGO/Virgo :    h ~ 10  "," :  (inspection)  (merger)  (ringdown) 3"," :  , , ,   Bayesian "," : r-process     ",": GW + GRB() + kilonova()  "," :   H0  ,   "],keyFormulas:[{tex:"h_+(t) = \\frac{2G}{c^4}\\frac{M_c^{5/3}}{D_L}\\left(\\pi f(t)\\right)^{2/3}\\cos(\\Phi(t))",desc:"  +  ( )"},{tex:"\\frac{df}{dt} = \\frac{96}{5}\\pi^{8/3}\\frac{G^{5/3}}{c^5}M_c^{5/3}f^{11/3}",desc:"   (chirp)"},{tex:"M_c = \\frac{(m_1 m_2)^{3/5}}{(m_1 + m_2)^{1/5}}",desc:" (chirp mass)"},{tex:"T_{\\mathrm{merge}} = \\frac{5}{256}\\frac{c^5}{G^3}\\frac{1}{M_c^{5/3}\\pi^{8/3}f_0^{8/3}}",desc:"   (f)"},{tex:"Q = \\frac{M \\omega}{c} \\quad (\\text{ISCO})\\, Q_{\\text{Kerr}} \\sim \\frac{c^3}{G M} \\left(1 + \\sqrt{1-a^*/a}\\right)",desc:"  "}],observations:"GW150914:  36+29 M, GW170817:  1.36-1.60 M, GW190814: -  (  9:1)",relatedPapers:["Observation of Gravitational Waves from a Binary Black Hole Merger (Abbott et al., PRL 2016)","GW170817: Observation of Gravitational Waves from a Binary Neutron Star Inspiral (Abbott et al., PRL 2017)","Tests of General Relativity with GW150914 (Abbott et al., PRL 2016)"]}},{slug:"high-energy-astrophysics",title:"  X ",category:"observations",description:"X-ray binary, AGN  , Compton , Synchrotron ",content:{overview:"  X(0.1~100 keV), (>100 keV)   . X , (AGN),      .      Compton  Synchrotron     .",keyPoints:["X-ray binary: / +   ( )","Low-mass X-ray binary (LMXB):   < 1 M,  X ","High-mass X-ray binary (HMXB):   > 10 M,  ","Compton :   +    ,  ","Inverse Compton:   +     X/","Synchrotron :     ","AGN  :   Seyfert 1/2  (  )"],keyFormulas:[{tex:"E_\\gamma \\approx 4\\gamma k_B T_e",desc:"Compton   (Thomson regime)"},{tex:"\\nu_{\\mathrm{sync}} = \\frac{e B}{2\\pi m_e c} \\gamma^2",desc:"Synchrotron  "},{tex:"L_\\mathrm{Edd} = \\frac{4\\pi G M m_p c}{\\sigma_T} \\approx 1.3 \\times 10^{38} \\left(\\frac{M}{M_\\odot}\\right) \\, \\mathrm{erg~s^{-1}}",desc:"Eddington  "},{tex:"\\tau_T = n_e \\sigma_T L",desc:"Thomson "}],observations:"Cygnus X-1 ( HMXB), Sco X-1 ( LMXB), M87  AGN ( ), NGC 4151 ()",relatedPapers:["Physics of Compact Objects (Wheeler et al., 1996)","X-ray Binaries (Lewin & van der Klis, 2006)","AGN Unification Model (Antonucci, 1993)"]}},{slug:"cosmic-ray-physics",title:"   ",category:"observations",description:"Fermi ,  ,   , - ",content:{overview:"    ( ).  ,  ,    . Fermi          .   ,  ,     .",keyPoints:["Fermi 1 :  / ,   (E/E  %)","Fermi 2 :  (magnetic mirror)    ","  : SNe Ia  SNe II  "," : E^(-2.7) power law (  10~10 eV)"," : CR      (  )"," : ~90% , ~10% , ~1%  "," (UHECR): E > 10 eV,  (GZK cutoff)"],keyFormulas:[{tex:"\\frac{dE}{dt} \\propto E",desc:"Fermi 1  (  )"},{tex:"N(E) \\propto E^{-\\alpha}",desc:"  power law (  2.7)"},{tex:"E_c = \\frac{3eB\\,r_L^2}{2\\Delta t}",desc:"Fermi    (  r_L,   t)"},{tex:"E_{\\mathrm{GZK}} \\approx 5 \\times 10^{19} \\, \\mathrm{eV}",desc:"GZK cutoff  (CMB )"}],observations:"  :    , IceCube   ( CR  )",relatedPapers:["The Origin of Cosmic Rays (Jokipii, 1987)","Cosmic Ray Propagation and Solar Modulation (Potgieter, 2013)","Supernova Remnants as Cosmic Ray Accelerators (Berezhko & Vlk, 2007)"]}},{slug:"adaptive-optics-interferometry",title:"  ",category:"observations",description:"  , VLBI,  ,  ",content:{overview:"    . (AO)          . VLBI( )         .",keyPoints:[" seeing:      (typical ~0.5~2 arcsec)"," :  = /(2D), D  ",": (wavefront sensor) +  (deformable mirror)  ","Strehl ratio: AO  . Strehl  1 (), 0 (  )","VLBI (Very Long Baseline Interferometry):   ,   "," : Keck I&II, VLTI (  ~ 1 )"," (phase closure):     "],keyFormulas:[{tex:"\\theta_{\\mathrm{diff}} = 1.22 \\frac{\\lambda}{D}",desc:"Rayleigh  "},{tex:"B_{\\mathrm{eff}} = \\lambda D / d",desc:"   ( , D baseline, d  )"},{tex:"S = \\exp\\left(-\\frac{\\pi^2}{2\\ln 2} \\sigma_\\phi^2\\right)",desc:"Strehl ratio (_: RMS  )"}],observations:"Event Horizon Telescope (EHT): 10  VLBI M87, Sgr A*   (2019, 2022)",relatedPapers:["Adaptive Optics for Astronomy (Roddier, 1999)","VLBI Astrometry (Porcas et al., 2003)","First M87 Event Horizon Telescope Results (EHT Collaboration, 2019)"]}},{slug:"modified-gravity",title:" : MOND TeVeS",category:"relativity",description:"  ,   , CDM ",content:{overview:"           . MOND (  )      , TeVeS  .",keyPoints:["MOND : a < a  F = m(a/a)  (a ~ 1.210 m/s)","  :   MOND   ( )","Deep MOND (Deep Modified Newtonian Dynamics): a << a F  (GMm/r)","TeVeS (Tensor-Vector-Scalar):  MOND,    ","Bullet Cluster :     , MOND  ","  (UV completion): MOND   "],keyFormulas:[{tex:"F = m \\frac{a^2}{a_0}\\,\\, (a << a_0)",desc:"Deep MOND "},{tex:"a_0 = \\frac{cH_0}{6}\\approx 1.2 \\times 10^{-10}\\,\\mathrm{m/s^2}",desc:"MOND "},{tex:"v_\\mathrm{rot} \\approx \\sqrt[4]{GMa_0}\\,\\, (a << a_0)",desc:"MOND   ( )"}],observations:"  ,   , CMB , BBN  ",relatedPapers:["MOND and the Dark Matter Problem (Milgrom, 2015)","Relativistic MOND via TeVeS (Bekenstein, 2004)","The Bullet Cluster Evidence against Dark Matter (Clowe et al., 2006)"]}},{slug:"dark-matter-detection",title:" : WIMPs, Axions,  ",category:"galaxies",description:" ,  ,  ,  ",content:{overview:"    85%   . WIMPs (   ) axions  ,     .",keyPoints:["WIMPs (Weakly Interacting Massive Particles):  10~1000 GeV/c,   ","Axions:    (eV ), QCD  "," : XENON, LUX, SuperCDMS       "," :      ,  "," : LHC      "," :    "],keyFormulas:[{tex:"\\sigma_{\\mathrm{WIMP-nucleon}} \\sim 10^{-45}\\,\\mathrm{cm}^2\\,\\, (\\mathrm{spin\\text{-}independent})",desc:"WIMP-  "},{tex:"m_a \\sim 10^{-6}\\,\\mathrm{eV} \\sim 10^{-2}\\,\\mathrm{eV}",desc:"  "},{tex:"F_a = \\frac{m_e v^2}{g_{a\\gamma\\gamma} m_a}",desc:"  "}],observations:"Planck 2018: _cdm h = 0.1200.001, LHC Run 2: WIMP   , AMS:   ",relatedPapers:["Dark Matter Candidates: From Theory to Direct Detection (Hooper & Kolb, 2010)","Axion Dark Matter Searches (Irastorza & Redondo, 2018)","XENON1T Results on Light Dark Matter Particles (XENON Collaboration, 2019)"]}},{slug:"exoplanet-systems",title:": , ,  ",category:"stars",description:"  ,  ,   , TRAPPIST-1 ",content:{overview:"5500   (2024).   (protoplanetary disk)    , /     .",keyPoints:[" :          (  )"," :        (m sin i)"," (transit photometry):        ( 0.01%)"," :      (HO, CO, CH)","  :         ","TESS/JWST:   ,    "],keyFormulas:[{tex:"\\frac{\\Delta F}{F} = \\frac{R_p^2}{R_*^2}",desc:"   (R_p: , R_*:  )"},{tex:"a_\\mathrm{HZ} = \\sqrt{\\frac{L_*}{L_\\odot}}",desc:"   "},{tex:"K = \\frac{(m \\sin i)}{\\sqrt{1-e^2}} \\sqrt{\\frac{GM_*}{a^3}}",desc:"RV  ( )"}],observations:"Kepler  2662, TESS  600+ (), TRAPPIST-1: 7   (3   )",relatedPapers:["Exoplanet Atmospheres (Seager, 2010)","Planet Formation in Protoplanetary Disks (Nakano et al., 2015)","JWST Transiting Exoplanet Community Early Release Science Program (Louie et al., 2023)"]}},{slug:"supernova-cosmology",title:" :  Ia  ",category:"cosmology",description:"  Ia ,   ,  , w ",content:{overview:'1998,   Type Ia  "  "   (Nobel 2011). SNe Ia      .',keyPoints:["Type Ia SN:       ",":    M_V  -19.3 (0.3)","Phillips :       (  )","Dust extinction:     (E(B-V) )","Hubble diagram:   vs  _ _m  "," :  ()  , w = -1 "],keyFormulas:[{tex:"m = M + 5\\log_{10}(d_L) + 25",desc:"  (m:  , M:  )"},{tex:"d_L = \\frac{1+z}{H_0} \\int_0^z \\frac{dz^\\prime}{E(z^\\prime)}",desc:"  (CDM)"},{tex:"M_V^\\mathrm{corr} = M_V - 2.5\\alpha(s-1)",desc:"Phillips  (s:  )"}],observations:"Riess et al. 1998 42 SNe Ia, Perlmutter et al. 1999 52 SNe Ia,  1000+  , H = 73.041.04 km/s/Mpc (SH0ES 2022)",relatedPapers:["Observational Evidence from Supernovae for an Accelerating Universe (Riess et al., 1998)","Measurements of  and  from 42 High-Redshift Supernovae (Perlmutter et al., 1999)","Local Void is Consistent with CDM (Kenworthy et al., 2021)"]}},{slug:"agn-unified-model",title:"   : , ,  ",category:"galaxies",description:" ,  , Fanaroff-Riley , Eddington ",content:{overview:"AGN (Active Galactic Nuclei)  (SMBH)  .  ( ,  )    ,   .",keyPoints:["SMBH:    10~10 M",":   (inner disk) +   (outer disk)","(Torus):    ,    >> 1","(Jet):   ,    ~ 0.99","Fanaroff-Riley : FR I (,  ) vs FR II (,  )","Eddington : L_Edd = 4GMm_p c/_T  1.410(M/M) W"," (BLR/NLR):    "],keyFormulas:[{tex:"L_\\mathrm{Edd} = \\frac{4\\pi GMm_p c}{\\sigma_T} = 1.4 \\times 10^{31}\\left(\\frac{M}{M_\\odot}\\right)\\,\\mathrm{W}",desc:"Eddington "},{tex:"\\lambda_\\mathrm{Edd} = \\frac{L_\\mathrm{bol}}{L_\\mathrm{Edd}}",desc:"Eddington "},{tex:"\\dot{M} = \\frac{L}{\\eta c^2}",desc:" (: radiative efficiency)"}],observations:"M87 SMBH M=(6.50.7)10M, Centaurus A   >4 Mpc, NGC 1068   (ALMA)",relatedPapers:["AGN Unification: The Quest Continues (Krolik, 2007)","Accretion in Supermassive Black Holes (Narayan & Quataert, 2005)","First M87 Event Horizon Telescope Results (EHT Collaboration, 2019)"]}}],V4=[{term:"Absolute Magnitude ()",definition:"  10 pc    .    ."},{term:"Accretion Disk ( )",definition:",        .  40%   ."},{term:"Adiabatic Gradient ( )",definition:"        . dT/dP = T/(P)."},{term:"Blackbody Radiation ()",definition:"   ,      . Planck  ."},{term:"Blue Shift ()",definition:"      .  < 0."},{term:"CCD Photometry (CCD )",definition:"Charge-Coupled Device    . -  100  ."},{term:"CMB Power Spectrum (CMB )",definition:"CMB      C_ .  ,    ."},{term:"CNO Cycle (CNO )",definition:"   : C  N  C  N  O  N  C + He."},{term:"Doppler Shift ( )",definition:"    . v << c  / = v/c."},{term:"Dynamical Mass ( )",definition:"Jeans     .      ."},{term:"EOS Parameter ( )",definition:" w = p/(c). CDM w = -1.  ."},{term:"Equivalent Width (, EW)",definition:"     .  column density  ."},{term:"Ergosphere ()",definition:"Kerr   g_tt > 0 .       ."},{term:"Friedmann Equation ( )",definition:"    . (/a) + k/a = 8G/3."},{term:"Geodesic ()",definition:'    . Riemannian  "" .'},{term:"Gravitational Redshift ()",definition:"     . / = -GM/cr."},{term:"Gravitational Waves ()",definition:"   .  h ~ 10 (LIGO).  ,   ."},{term:"Gravitational Wave Strain ( )",definition:"LIGO     : h = L/L ~ 10.   ."},{term:"Gravitational Wave Detector ( )",definition:"LIGO, Virgo, KAGRA    .      ."},{term:"MOND (Modified Newtonian Dynamics)",definition:"      . a < a ~ 10 m/s   ."},{term:"TeVeS (Tensor-Vector-Scalar Gravity)",definition:"MOND  .   = ."},{term:"Bullet Cluster ( )",definition:"    . X-        ."},{term:"WIMPs (Weakly Interacting Massive Particles)",definition:" .  10~1000 GeV/c,     ."},{term:"Axion ()",definition:"     (eV~meV ). QCD  Peccei-Quinn  ."},{term:"Exoplanet ()",definition:"    . 5500+  (2024).  ,   ."},{term:"Habitable Zone (  )",definition:"          .    ."},{term:"Type Ia Supernova (Ia )",definition:"      .      ."},{term:"Phillips Relation (Phillips )",definition:"Type Ia SN     .      ."},{term:"AGN (Active Galactic Nuclei)",definition:" .       ."},{term:"SMBH (Supermassive Black Hole)",definition:"   .  10~10 M.     ."},{term:"AGN Torus (AGN )",definition:"AGN     .    >> 1.     ."},{term:"Eddington Luminosity (Eddington )",definition:"    . L_Edd = 4GMm_p c/_T  1.410(M/M) W."},{term:"Fanaroff-Riley Classification",definition:"Radio galaxy  . FR I:    . FR II:    ."},{term:"Hawking Radiation ( )",definition:"   .  T_H = c/(8kGM)."},{term:"Hubble Constant ( )",definition:"   . H  67-73 km/s/Mpc (   )."},{term:"Hubble Distance ( )",definition:"     . d_H = c/H  4400 Mpc."},{term:"ISCO (  )",definition:"Innermost Stable Circular Orbit.     . r_ISCO = 6GM/c (Schwarzschild)."},{term:"Jeans Equation ( )",definition:"   . d_r/dr + 2_r/r = -GM/r."},{term:"Jeans Mass ( )",definition:"    . M_J = (kT/G)^(3/2)(5T/G)^(1/2)."},{term:"Kerr Metric ( )",definition:"   .   a = J/Mc .    ."},{term:"Lane-Emden Equation (- )",definition:"     . du/d + 2/du/d + u^n = 0."},{term:"Luminosity Distance ( )",definition:"      . d_L = (1+z)d_c (CDM)."},{term:"LIGO (Laser Interferometer Gravitational-Wave Observatory)",definition:"  . Hanford & Livingston   .   4 km,   125 W."},{term:"Mass-Luminosity Relation (- )",definition:"L  M^,    3.5.    ."},{term:"MHD Simulations ( )",definition:"     .  , ,   ."},{term:"Matched Filtering ( )",definition:"   .   (cross-correlation) S/N ."},{term:"Merger ()",definition:"   . /     ."},{term:"NFW Profile (NFW  )",definition:"Navarro-Frenk-White   :   1/(r/r_s(1+r/r_s))."},{term:"Neutron Star ()",definition:"     .  ~10 km,  ~10^17 kg/cm,  ."},{term:"Opacity ()",definition:"    .  = /().     ."},{term:"Photometric Redshift ( )",definition:"     .     ."},{term:"Planck Function ( )",definition:"   . B_ = 2h/c1/(e^(h/kT)-1)."},{term:"QFT in Curved Spacetime (  )",definition:" . Hawking   ."},{term:"Radiative Transfer ( )",definition:"    . F_rad = -c/(3)dT/dr."},{term:"Redshift ()",definition:"    . z = (_obs - _emit)/_emit."},{term:"Rotation Curve ()",definition:"   vs  .     ."},{term:"Schwarzschild Metric ( )",definition:"   .   . r_s = 2GM/c ."},{term:"Shapiro Delay ( )",definition:"   . t = (2GM/c)ln(4rr/b)."},{term:"Spectral Classification ( )",definition:"   : O B A F G K M.   100 K ."},{term:"Starburst Galaxy ( )",definition:"     . SFR > 1 M/yr.    ."},{term:"Stefan-Boltzmann Law (- )",definition:"  : L = 4RT,  = 5.6710 W m K."},{term:"Tully-Fisher Relation (- )",definition:"     .    ."},{term:"Tidal Deformability ( )",definition:"    .  .    ."},{term:"Time Delay ( )",definition:"     .  (sky localization) ."},{term:"Virial Theorem ( )",definition:"  : 2K + U = 0 ( )."},{term:"Virgo (  )",definition:" Cascina  .   3 km,   200 W. LIGO 3  ."},{term:"Voigt Profile ( )",definition:" ( + )   .    ."},{term:"White Dwarf ()",definition:"   .    .   (Hubble time > age)."},{term:"X-ray Spectroscopy (X )",definition:"Chandra, XMM-Newton     .  K (6.4 keV)    ."},{term:"Zero-Age Main Sequence (ZAMS)",definition:"      . Hertzsprung-Russell  ."}],iae=[{id:1,title:"Observation of Gravitational Waves from a Binary Black Hole Merger",authors:"Abbott, B. P. et al. (LIGO/Virgo Collaboration)",year:2016,arxivId:"1602.03837",journal:"Physical Review Letters 116, 061102",doi:"10.1103/PhysRevLett.116.061102",abstract:"On 14 September 2015 at 09:50:45 UTC the two detectors of the Laser Interferometer Gravitational-Wave Observatory observed a transient gravitational-wave signal. The signal sweeps upward in frequency from 35 to 250 Hz, with peak gravitational-wave strain of 1.0  10.",summary:{background:"  100     .        .",methodology:"Matched filtering :     . S/N > 24 . Bayesian parameter estimation , , ,  .",theory:"   : dE/dt = -32/5G/(c)(mm)(m+m)/(a).    Kerr  .",data_analysis:"Advanced LIGO (2 ): N = 510/Hz @ 100Hz. 4 km arm interferometer, Fabry-Prot cavity resonator .  :   , /  subtraction.",results:"  () q = 1.20.1,   M = 65 M,    M_f = 62 M,  E = 3.0 Mc (   ).",limiting_factors:" shot noise  thermal noise ,   0.2  parameter inference  ."}},{id:2,title:"First M87 Event Horizon Telescope Results. I. The Shadow of the Supermassive Black Hole",authors:"Event Horizon Telescope Collaboration",year:2019,arxivId:"1906.11238",journal:"The Astrophysical Journal Letters 875, L1",doi:"10.3847/2041-8213/ab0ec7",abstract:"We present the first Event Horizon Telescope (EHT) observations at 1.3 mm wavelength of the supermassive black hole candidate in the galactic center of the radio galaxy M87. We have resolved the central compact radio source on angular scales of ~5 microarcseconds.",summary:{background:"         . VLBI    10,000 km .",methodology:"Very Long Baseline Interferometry (VLBI): 8    .    . Phase calibration, self-calibration  . Imaging: CLEAN ,   .",theory:"General relativistic magnetohydrodynamics (GRMHD)    . Kerr     (null geodesics).   : r_shadow  5.2 GM/c (M87  r_shadow  42 as).",data_analysis:"Visibility :   . u-v plane   .     . Uncertainty quantification:    .",results:"  M = (6.50.7)10 M.     d = 42.03.0 as.   10%  .    .",limiting_factors:"  ,    ,  (intraday variability) ,    ."}},{id:3,title:"A Universe of Black Holes and Bulges Revealed by JWST",authors:"Labb, I. et al.",year:2023,arxivId:"2306.02465",journal:"Nature ( )",doi:"10.1038/nature25755",abstract:"The James Webb Space Telescope (JWST) has revealed a population of surprisingly massive galaxies at z > 10, indicating accelerated galaxy assembly in the early universe.",summary:{background:"JWST     (z > 6)    .        .",methodology:"NIRCam : 0.6-5 m ,   SED fitting.  : NIRSpec   (R ~ 1000). (PSF) ,  .",theory:"SED modeling: Stellar population synthesis (FSPS, BAGPIPES). Dust attenuation curve . Photometric redshift vs spectroscopic redshift . Virial mass : M_vir = r/G ( ).",data_analysis:": P(z, params | data)  L(data | z, params)  Prior(z, params). Bayesian inference , , SFR .     (confidence interval) .",results:" z = 13.2  JADES-GS-z13-0:  M* = (3.21.9)10 M.  ~500 Myr.    330 Myr   (   a = 0.07).",limiting_factors:"  ,      degeneracy,  -    ,   ."}},{id:4,title:"The Weak Gravitational Lensing Signal and the Clustering of GAMA Galaxies",authors:"Leauthaud, A. et al.",year:2017,arxivId:"1511.06428",journal:"Monthly Notices of the Royal Astronomical Society",doi:"10.1093/mnras/stw2897",abstract:"We present joint measurements of the weak gravitational lensing signal around GAMA galaxies and their clustering. These measurements allow direct constraints on galaxy assembly bias and the dark matter halo profiles.",summary:{background:"          .     .",methodology:"Weak lensing shear : background     (typical  ~ 0.01).  :  = _cr  _tan. 2-point correlation   clustering .",theory:"NFW : (r) = _s / [(r/r_s)(1+r/r_s)].  c  r    M = (4/3)_crit200r. Halo mass function  .",data_analysis:"Forward modeling:   shear     .  galaxy-halo  (P(halo mass | galaxy properties)). Likelihood: L = _i P(data_i | model, params).",results:"  M* = 10 M     M_DM ~ 10 M.   c = 5.01.5.      .",limiting_factors:"    S/N,    (shape noise), systematic lensing , photometric redshift ."}},{id:5,title:"GW170817: Observation of Gravitational Waves from a Binary Neutron Star Inspiral",authors:"Abbott, B. P. et al. (LIGO/Virgo Collaboration)",year:2017,arxivId:"1710.05832",journal:"Physical Review Letters 119, 161101",doi:"10.1103/PhysRevLett.119.161101",abstract:"On August 17, 2017 at 12:41:04 UTC the Advanced LIGO and Advanced Virgo gravitational-wave detectors made their first observation of a binary neutron star inspiral. A loud gravitational-wave signal was detected with a duration of approximately 100 seconds.",summary:{background:"   r-process (  )  .  +  (kilonova)     .",methodology:"Bayesian parameter estimation: 9  ~ , , ,  . Matched filtering  . 3 (LIGO Hanford, LIGO Livingston, Virgo)  source localization (sky position ).",theory:"  :   M_max . Tidal deformability   (compressibility) .    5 (  ).",data_analysis:"  ~100 sec     . Nested sampling    (marginalized probability) . Model comparison: BNS vs NSBH vs BBH.",results:"  : m = 1.36-1.60 M, m = 1.17-1.36 M. Tidal deformability  = 560. r-process    0.03-0.05 M.  kilonova AT2017gfo   .",limiting_factors:"Virgo    source localization  (~600 sq deg),   (gap),  merger   ."}}],Up=[{id:1,name:"  ",description:", ,    "},{id:2,name:" ",description:" , , CCD, , VLBI  "},{id:3,name:" ",description:"LIGO, EHT, JWST     "},{id:4,name:" ",description:"N-body, MHD, hydrodynamics   "},{id:5,name:" ",description:", Bayesian ,   "},{id:6,name:" ",description:", ,  ,   "}],A2={textbooks:[{title:"Gravitational Waves Volume 1: Theory and Experiments",authors:"Maggiore, M.",year:2007},{title:"The Theory of Stellar Structure and Evolution",authors:"Kippenhahn, R., Weigert, A. & Weiss, A.",year:2012},{title:"Galactic Dynamics",authors:"Binney, J. & Tremaine, S.",year:2008},{title:"General Relativity",authors:"Carroll, S. M.",year:2004},{title:"Black Hole Thermodynamics",authors:"Wald, R. M.",year:2001},{title:"Observational Astrophysics",authors:"Birney, D. S., Gonzalez, G. & Oesper, D. A.",year:2006},{title:"The Early Universe",authors:"Kolb, E. W. & Turner, M. S.",year:1990},{title:"Modern Astrophysics",authors:"Carroll, B. W., Ostlie, D. A. & et al.",year:2007}],databases:[{name:"NASA ADS (Astrophysics Data System)",url:"https://ui.adsabs.harvard.edu/",desc:"    . 240+  ."},{name:"arXiv Astro-ph",url:"https://arxiv.org/archive/astro-ph",desc:" .  ~50  .   ."},{name:"Simbad",url:"https://simbad.u-strasbg.fr/",desc:", ,      , ."},{name:"NED (NASA Extragalactic Database)",url:"https://ned.ipac.caltech.edu/",desc:"   . , ,    ."},{name:"VizieR",url:"https://vizier.cds.unistra.fr/",desc:"700+      ."},{name:"Gravitational Wave Open Science Center (GWOSC)",url:"https://gwosc.readthedocs.io/",desc:"LIGO/Virgo  ,  , ."}],tools:[{name:"GIZMO",url:"https://www.tapir.caltech.edu/~phopkins/Site/GIZMO.html",desc:"N-body +  +  +    ."},{name:"ATHENA++",url:"https://www.athena-code.org/",desc:"  (GRMHD) .    ."},{name:"Planck 2018 Legacy Release",url:"https://irsa.ipac.caltech.edu/data/Planck/",desc:"CMB  ,  ,   ."},{name:"FSPS (Flexible Stellar Population Synthesis)",url:"https://github.com/bd-j/fsps",desc:"   . SED ."},{name:"dynesty (Dynamic Nested Sampling)",url:"https://github.com/joshspeagle/dynesty",desc:"   Bayesian .   ."},{name:"SIMBAD Sky Map",url:"http://simbad.u-strasbg.fr/simbad/sim-fcoo",desc:"      ."},{name:"JWST Exposure Time Calculator",url:"https://jwst.etc.stsci.edu/",desc:"JWST     S/N ."}]},iE={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},sE={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4}}};function sae(){const{isDark:r}=Qs(),e=Ek.slice(0,3);return se.useEffect(()=>{if(!localStorage.getItem("registeredUsers")){const n={[btoa("test@example.com")]:{email:"test@example.com",password:btoa("Test1234"),username:"",affiliation:" ",createdAt:new Date().toISOString()}};localStorage.setItem("registeredUsers",JSON.stringify(n)),console.log("   : test@example.com / Test1234")}},[]),P.jsxs("div",{className:"space-y-8 sm:space-y-12",children:[P.jsxs("section",{className:"py-8 sm:py-12 md:py-20 text-center",children:[P.jsx(Ye.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},children:P.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-bold mb-4 bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-400 dark:to-purple-500 bg-clip-text text-transparent",children:" "})}),P.jsx(Ye.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-base sm:text-lg md:text-xl text-gray-600 dark:text-gray-300 mb-8 px-4",children:" ,  ,   "}),P.jsxs(Ye.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"flex flex-col sm:flex-row gap-4 justify-center px-4",children:[P.jsx(Ye.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:P.jsx(Cr,{to:"/concepts",className:"block px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition font-medium shadow-lg hover:shadow-xl",children:" "})}),P.jsx(Ye.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:P.jsx(Cr,{to:"/papers",className:"block px-8 py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg hover:from-orange-700 hover:to-orange-800 transition font-medium shadow-lg hover:shadow-xl",children:" "})})]})]}),P.jsx(Ye.section,{variants:iE,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.2},className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6",children:[{title:" ",description:", ,        ",icon:""},{title:" ",description:"    .    ",icon:""},{title:"",description:", ,    .    ",icon:""}].map((t,n)=>P.jsxs(Ye.div,{variants:sE,whileHover:{y:-8,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},className:`p-6 rounded-lg border transition ${r?"bg-gray-800 border-gray-700 hover:border-blue-500":"bg-white border-gray-200 hover:border-blue-500"}`,children:[P.jsx("div",{className:"text-4xl mb-3",children:t.icon}),P.jsx("h3",{className:`text-lg sm:text-xl font-bold mb-2 ${r?"text-white":"text-gray-900"}`,children:t.title}),P.jsx("p",{className:`text-sm sm:text-base ${r?"text-gray-300":"text-gray-600"}`,children:t.description})]},n))}),P.jsxs(Ye.section,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6},viewport:{once:!0,amount:.2},children:[P.jsx(Ye.h2,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-6 text-gray-900 dark:text-white",children:" "}),P.jsx(Ye.div,{variants:iE,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:e.map(t=>P.jsx(Ye.div,{variants:sE,whileHover:{y:-8},className:`p-6 rounded-lg border transition cursor-pointer ${r?"bg-gray-800 border-gray-700 hover:border-blue-500":"bg-white border-gray-200 hover:border-blue-500"}`,children:P.jsxs(Cr,{to:`/concepts/${t.slug}`,children:[P.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 mb-2",children:t.title}),P.jsx("p",{className:`text-sm sm:text-base ${r?"text-gray-300":"text-gray-600"}`,children:t.description})]})},t.slug))})]}),P.jsxs(Ye.section,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6},viewport:{once:!0,amount:.2},children:[P.jsx(Ye.h2,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-6 text-gray-900 dark:text-white",children:"  "}),P.jsx(Ye.div,{variants:iE,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},className:"space-y-4",children:iae.map(t=>P.jsxs(Ye.div,{variants:sE,whileHover:{x:8},className:`p-4 sm:p-6 rounded-lg border transition ${r?"bg-gray-800 border-gray-700 hover:border-orange-500":"bg-white border-gray-200 hover:border-orange-500"}`,children:[P.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2",children:[P.jsxs("div",{className:"flex-1",children:[P.jsx("h3",{className:"font-bold text-blue-600 dark:text-blue-400 text-sm sm:text-base",children:t.title}),P.jsxs("p",{className:`text-xs sm:text-sm ${r?"text-gray-400":"text-gray-500"}`,children:[t.authors," (",t.year,")"]})]}),P.jsx("span",{className:`text-xs px-3 py-1 rounded whitespace-nowrap ${r?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:t.year})]}),P.jsx("p",{className:`text-xs sm:text-sm mt-3 ${r?"text-gray-300":"text-gray-600"}`,children:t.abstract})]},t.id))}),P.jsx(Ye.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"mt-8 text-center",children:P.jsx(Ye.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:P.jsx(Cr,{to:"/papers",className:"inline-block px-8 py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg hover:from-orange-700 hover:to-orange-800 transition font-medium shadow-lg hover:shadow-xl",children:"   "})})})]})]})}function aae(){const{isDark:r}=Qs(),e={relativity:"",stars:"",galaxies:"",cosmology:"",observations:""},t={relativity:"from-red-500 to-pink-500",stars:"from-yellow-500 to-orange-500",galaxies:"from-purple-500 to-indigo-500",cosmology:"from-blue-500 to-cyan-500",observations:"from-green-500 to-emerald-500"};return P.jsxs("div",{className:"space-y-12 sm:space-y-16",children:[P.jsxs(Ye.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6},children:[P.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent",children:" "}),P.jsx(Ye.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`text-sm sm:text-base ${r?"text-gray-300":"text-gray-600"}`,children:"  5  , 14     ."})]}),Object.entries(e).map(([n,i],s)=>{const a=Ek.filter(o=>o.category===n);return a.length===0?null:P.jsxs(Ye.section,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6},viewport:{once:!0,amount:.1},children:[P.jsx(Ye.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6},viewport:{once:!0},className:"mb-6",children:P.jsx("div",{className:`inline-block bg-gradient-to-r ${t[n]} p-0.5 rounded-lg`,children:P.jsx("div",{className:`px-4 py-2 rounded-md ${r?"bg-gray-900":"bg-white"}`,children:P.jsx("h2",{className:`text-lg sm:text-xl font-bold bg-gradient-to-r ${t[n]} bg-clip-text text-transparent`,children:i})})})}),P.jsx(Ye.div,{variants:iE,initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.1},className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:a.map((o,l)=>P.jsxs(Ye.div,{variants:sE,whileHover:{y:-12,boxShadow:"0 20px 40px -10px rgba(0, 0, 0, 0.15)"},className:`group relative overflow-hidden rounded-xl border-2 transition cursor-pointer ${r?"bg-gradient-to-br from-gray-800 to-gray-900 border-gray-700 hover:border-blue-500":"bg-gradient-to-br from-white to-gray-50 border-gray-200 hover:border-blue-500"}`,children:[P.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${t[n]} opacity-0 group-hover:opacity-5 transition-opacity duration-300`}),P.jsxs(Cr,{to:`/concepts/${o.slug}`,className:"relative block p-6",children:[P.jsx("div",{className:"mb-4",children:P.jsx("span",{className:`inline-block px-3 py-1 text-xs font-semibold rounded-full ${r?"bg-gray-700 text-blue-300":"bg-blue-100 text-blue-700"}`,children:i})}),P.jsx("h3",{className:"text-base sm:text-lg font-bold mb-2 text-blue-600 dark:text-blue-400 group-hover:translate-x-1 transition-transform",children:o.title}),P.jsx("p",{className:`text-sm sm:text-base line-clamp-2 mb-4 ${r?"text-gray-300":"text-gray-600"}`,children:o.description}),P.jsxs("div",{className:`text-xs space-y-1 ${r?"text-gray-400":"text-gray-500"}`,children:[o.content.keyPoints.slice(0,2).map((u,c)=>P.jsxs("div",{className:"flex items-start gap-2",children:[P.jsx("span",{className:"text-blue-400",children:""}),P.jsx("span",{className:"line-clamp-1",children:u})]},c)),o.content.keyPoints.length>2&&P.jsxs("div",{className:"text-blue-500 font-medium",children:["+ ",o.content.keyPoints.length-2," ..."]})]})]})]},o.slug))})]},n)})]})}function oae({tex:r,display:e=!1}){return se.useEffect(()=>{if(window.katex)try{window.katex.render(r,document.getElementById(`math-${r}`),{displayMode:e,throwOnError:!1})}catch(t){console.error("KaTeX error:",t)}},[r,e]),P.jsx("div",{id:`math-${r}`,className:"inline-block"})}function lae(){const{slug:r}=Wz(),e=Ek.find(n=>n.slug===r);if(!e)return P.jsx("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:"   ."});const{content:t}=e;return P.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 sm:space-y-8",children:[P.jsxs("div",{children:[P.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-2 text-gray-900 dark:text-white",children:e.title}),P.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm sm:text-base",children:e.description})]}),P.jsxs("section",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg",children:[P.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:""}),P.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed text-sm sm:text-base",children:t.overview})]}),P.jsxs("section",{className:"px-4 sm:px-0",children:[P.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),P.jsx("ul",{className:"space-y-2",children:t.keyPoints.map((n,i)=>P.jsxs("li",{className:"flex gap-3 text-sm sm:text-base",children:[P.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-bold flex-shrink-0",children:""}),P.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:n})]},i))})]}),t.keyFormulas&&t.keyFormulas.length>0&&P.jsxs("section",{className:"px-4 sm:px-0",children:[P.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),P.jsx("div",{className:"space-y-4",children:t.keyFormulas.map((n,i)=>P.jsxs("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg overflow-x-auto",children:[P.jsx(oae,{tex:n.tex}),P.jsx("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-2",children:n.desc})]},i))})]}),P.jsxs("section",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg",children:[P.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),P.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm sm:text-base",children:t.observations})]}),t.relatedPapers&&t.relatedPapers.length>0&&P.jsxs("section",{className:"px-4 sm:px-0",children:[P.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),P.jsx("ul",{className:"space-y-2",children:t.relatedPapers.map((n,i)=>P.jsx("li",{className:"text-gray-700 dark:text-gray-300 border-l-2 border-blue-600 dark:border-blue-400 pl-4 text-sm sm:text-base",children:n},i))})]})]})}const uae=()=>{};var U4={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},cae=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=r[t++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=r[t++],a=r[t++],o=r[t++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const s=r[t++],a=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Rj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const s=r[i],a=i+1<r.length,o=a?r[i+1]:0,l=i+2<r.length,u=l?r[i+2]:0,c=s>>2,h=(s&3)<<4|o>>4;let d=(o&15)<<2|u>>6,f=u&63;l||(f=64,a||(d=64)),n.push(t[c],t[h],t[d],t[f])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Pj(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):cae(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const s=t[r.charAt(i++)],o=i<r.length?t[r.charAt(i)]:0;++i;const u=i<r.length?t[r.charAt(i)]:64;++i;const h=i<r.length?t[r.charAt(i)]:64;if(++i,s==null||o==null||u==null||h==null)throw new hae;const d=s<<2|o>>4;if(n.push(d),u!==64){const f=o<<4&240|u>>2;if(n.push(f),h!==64){const p=u<<6&192|h;n.push(p)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class hae extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dae=function(r){const e=Pj(r);return Rj.encodeByteArray(e,!0)},NS=function(r){return dae(r).replace(/\./g,"")},kj=function(r){try{return Rj.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fae(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mae=()=>fae().__FIREBASE_DEFAULTS__,pae=()=>{if(typeof process>"u"||typeof U4>"u")return;const r=U4.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},gae=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&kj(r[1]);return e&&JSON.parse(e)},_C=()=>{try{return uae()||mae()||pae()||gae()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Fj=r=>{var e,t;return(t=(e=_C())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},Oj=r=>{const e=Fj(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},Bj=()=>{var r;return(r=_C())==null?void 0:r.config},Lj=r=>{var e;return(e=_C())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Sk(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $j(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,s=r.sub||r.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...r};return[NS(JSON.stringify(t)),NS(JSON.stringify(a)),""].join(".")}const $b={};function yae(){const r={prod:[],emulator:[]};for(const e of Object.keys($b))$b[e]?r.emulator.push(e):r.prod.push(e);return r}function bae(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let z4=!1;function Tk(r,e){if(typeof window>"u"||typeof document>"u"||!dp(window.location.host)||$b[r]===e||$b[r]||z4)return;$b[r]=e;function t(d){return`__firebase__banner__${d}`}const n="__firebase__banner",s=yae().prod.length>0;function a(){const d=document.getElementById(n);d&&d.remove()}function o(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function l(d,f){d.setAttribute("width","24"),d.setAttribute("id",f),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function u(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{z4=!0,a()},d}function c(d,f){d.setAttribute("id",f),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function h(){const d=bae(n),f=t("text"),p=document.getElementById(f)||document.createElement("span"),g=t("learnmore"),b=document.getElementById(g)||document.createElement("a"),v=t("preprendIcon"),w=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const y=d.element;o(y),c(b,g);const A=u();l(w,v),y.append(w,p,b,A),document.body.appendChild(y)}s?(p.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",f)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wae(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rs())}function xae(){var e;const r=(e=_C())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _ae(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Aae(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Eae(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Sae(){const r=rs();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Tae(){return!xae()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Cae(){try{return typeof indexedDB=="object"}catch{return!1}}function Nae(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dae="FirebaseError";class iu extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=Dae,Object.setPrototypeOf(this,iu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lx.prototype.create)}}class Lx{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?Mae(s,n):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new iu(i,o,n)}}function Mae(r,e){return r.replace(Iae,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const Iae=/\{\$([^}]+)}/g;function Pae(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Zm(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const s=r[i],a=e[i];if(j4(s)&&j4(a)){if(!Zm(s,a))return!1}else if(s!==a)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function j4(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Yy(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,s]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Qy(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function Rae(r,e){const t=new kae(r,e);return t.subscribe.bind(t)}class kae{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");Fae(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=E2),i.error===void 0&&(i.error=E2),i.complete===void 0&&(i.complete=E2);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Fae(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function E2(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(r){return r&&r._delegate?r._delegate:r}class vd{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oae{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new vae;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Lae(e))try{this.getOrInitializeService({instanceIdentifier:lf})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=lf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=lf){return this.instances.has(e)}getOptions(e=lf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&a.resolve(i)}return i}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Bae(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=lf){return this.component?this.component.multipleInstances?e:lf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Bae(r){return r===lf?void 0:r}function Lae(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ae{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Oae(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(qt||(qt={}));const Vae={debug:qt.DEBUG,verbose:qt.VERBOSE,info:qt.INFO,warn:qt.WARN,error:qt.ERROR,silent:qt.SILENT},Uae=qt.INFO,zae={[qt.DEBUG]:"log",[qt.VERBOSE]:"log",[qt.INFO]:"info",[qt.WARN]:"warn",[qt.ERROR]:"error"},jae=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=zae[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ck{constructor(e){this.name=e,this._logLevel=Uae,this._logHandler=jae,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Vae[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qt.DEBUG,...e),this._logHandler(this,qt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qt.VERBOSE,...e),this._logHandler(this,qt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qt.INFO,...e),this._logHandler(this,qt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qt.WARN,...e),this._logHandler(this,qt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qt.ERROR,...e),this._logHandler(this,qt.ERROR,...e)}}const qae=(r,e)=>e.some(t=>r instanceof t);let q4,H4;function Hae(){return q4||(q4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Gae(){return H4||(H4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vj=new WeakMap,_M=new WeakMap,Uj=new WeakMap,S2=new WeakMap,Nk=new WeakMap;function Wae(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",s),r.removeEventListener("error",a)},s=()=>{t(ld(r.result)),i()},a=()=>{n(r.error),i()};r.addEventListener("success",s),r.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Vj.set(t,r)}).catch(()=>{}),Nk.set(e,r),e}function Kae(r){if(_M.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",s),r.removeEventListener("error",a),r.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",s),r.addEventListener("error",a),r.addEventListener("abort",a)});_M.set(r,e)}let AM={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return _M.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Uj.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ld(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Xae(r){AM=r(AM)}function Yae(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(T2(this),e,...t);return Uj.set(n,e.sort?e.sort():[e]),ld(n)}:Gae().includes(r)?function(...e){return r.apply(T2(this),e),ld(Vj.get(this))}:function(...e){return ld(r.apply(T2(this),e))}}function Qae(r){return typeof r=="function"?Yae(r):(r instanceof IDBTransaction&&Kae(r),qae(r,Hae())?new Proxy(r,AM):r)}function ld(r){if(r instanceof IDBRequest)return Wae(r);if(S2.has(r))return S2.get(r);const e=Qae(r);return e!==r&&(S2.set(r,e),Nk.set(e,r)),e}const T2=r=>Nk.get(r);function Jae(r,e,{blocked:t,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(r,e),o=ld(a);return n&&a.addEventListener("upgradeneeded",l=>{n(ld(a.result),l.oldVersion,l.newVersion,ld(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const Zae=["get","getKey","getAll","getAllKeys","count"],eoe=["put","add","delete","clear"],C2=new Map;function G4(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(C2.get(e))return C2.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=eoe.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||Zae.includes(t)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let u=l.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[t](...o),i&&l.done]))[0]};return C2.set(e,s),s}Xae(r=>({...r,get:(e,t,n)=>G4(e,t)||r.get(e,t,n),has:(e,t)=>!!G4(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class toe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(roe(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function roe(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const EM="@firebase/app",W4="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=new Ck("@firebase/app"),noe="@firebase/app-compat",ioe="@firebase/analytics-compat",soe="@firebase/analytics",aoe="@firebase/app-check-compat",ooe="@firebase/app-check",loe="@firebase/auth",uoe="@firebase/auth-compat",coe="@firebase/database",hoe="@firebase/data-connect",doe="@firebase/database-compat",foe="@firebase/functions",moe="@firebase/functions-compat",poe="@firebase/installations",goe="@firebase/installations-compat",voe="@firebase/messaging",yoe="@firebase/messaging-compat",boe="@firebase/performance",woe="@firebase/performance-compat",xoe="@firebase/remote-config",_oe="@firebase/remote-config-compat",Aoe="@firebase/storage",Eoe="@firebase/storage-compat",Soe="@firebase/firestore",Toe="@firebase/ai",Coe="@firebase/firestore-compat",Noe="firebase",Doe="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM="[DEFAULT]",Moe={[EM]:"fire-core",[noe]:"fire-core-compat",[soe]:"fire-analytics",[ioe]:"fire-analytics-compat",[ooe]:"fire-app-check",[aoe]:"fire-app-check-compat",[loe]:"fire-auth",[uoe]:"fire-auth-compat",[coe]:"fire-rtdb",[hoe]:"fire-data-connect",[doe]:"fire-rtdb-compat",[foe]:"fire-fn",[moe]:"fire-fn-compat",[poe]:"fire-iid",[goe]:"fire-iid-compat",[voe]:"fire-fcm",[yoe]:"fire-fcm-compat",[boe]:"fire-perf",[woe]:"fire-perf-compat",[xoe]:"fire-rc",[_oe]:"fire-rc-compat",[Aoe]:"fire-gcs",[Eoe]:"fire-gcs-compat",[Soe]:"fire-fst",[Coe]:"fire-fst-compat",[Toe]:"fire-vertex","fire-js":"fire-js",[Noe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=new Map,Ioe=new Map,TM=new Map;function K4(r,e){try{r.container.addComponent(e)}catch(t){xc.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function ep(r){const e=r.name;if(TM.has(e))return xc.debug(`There were multiple attempts to register component ${e}.`),!1;TM.set(e,r);for(const t of DS.values())K4(t,r);for(const t of Ioe.values())K4(t,r);return!0}function AC(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Ea(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Poe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ud=new Lx("app","Firebase",Poe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Roe{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new vd("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ud.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp=Doe;function zj(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:SM,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw ud.create("bad-app-name",{appName:String(i)});if(t||(t=Bj()),!t)throw ud.create("no-options");const s=DS.get(i);if(s){if(Zm(t,s.options)&&Zm(n,s.config))return s;throw ud.create("duplicate-app",{appName:i})}const a=new $ae(i);for(const l of TM.values())a.addComponent(l);const o=new Roe(t,n,a);return DS.set(i,o),o}function Dk(r=SM){const e=DS.get(r);if(!e&&r===SM&&Bj())return zj();if(!e)throw ud.create("no-app",{appName:r});return e}function jl(r,e,t){let n=Moe[r]??r;t&&(n+=`-${t}`);const i=n.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${n}" with version "${e}":`];i&&a.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xc.warn(a.join(" "));return}ep(new vd(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const koe="firebase-heartbeat-database",Foe=1,y1="firebase-heartbeat-store";let N2=null;function jj(){return N2||(N2=Jae(koe,Foe,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(y1)}catch(t){console.warn(t)}}}}).catch(r=>{throw ud.create("idb-open",{originalErrorMessage:r.message})})),N2}async function Ooe(r){try{const t=(await jj()).transaction(y1),n=await t.objectStore(y1).get(qj(r));return await t.done,n}catch(e){if(e instanceof iu)xc.warn(e.message);else{const t=ud.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xc.warn(t.message)}}}async function X4(r,e){try{const n=(await jj()).transaction(y1,"readwrite");await n.objectStore(y1).put(e,qj(r)),await n.done}catch(t){if(t instanceof iu)xc.warn(t.message);else{const n=ud.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});xc.warn(n.message)}}}function qj(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Boe=1024,Loe=30;class $oe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Uoe(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Y4();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Loe){const a=zoe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){xc.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Y4(),{heartbeatsToSend:n,unsentEntries:i}=Voe(this._heartbeatsCache.heartbeats),s=NS(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return xc.warn(t),""}}}function Y4(){return new Date().toISOString().substring(0,10)}function Voe(r,e=Boe){const t=[];let n=r.slice();for(const i of r){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Q4(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Q4(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class Uoe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Cae()?Nae().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Ooe(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return X4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return X4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Q4(r){return NS(JSON.stringify({version:2,heartbeats:r})).length}function zoe(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function joe(r){ep(new vd("platform-logger",e=>new toe(e),"PRIVATE")),ep(new vd("heartbeat",e=>new $oe(e),"PRIVATE")),jl(EM,W4,r),jl(EM,W4,"esm2020"),jl("fire-js","")}joe("");var J4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cd,Hj;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,E){function C(){}C.prototype=E.prototype,S.F=E.prototype,S.prototype=new C,S.prototype.constructor=S,S.D=function(N,D,M){for(var I=Array(arguments.length-2),V=2;V<arguments.length;V++)I[V-2]=arguments[V];return E.prototype[D].apply(N,I)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,E,C){C||(C=0);const N=Array(16);if(typeof E=="string")for(var D=0;D<16;++D)N[D]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(D=0;D<16;++D)N[D]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=S.g[0],C=S.g[1],D=S.g[2];let M=S.g[3],I;I=E+(M^C&(D^M))+N[0]+3614090360&4294967295,E=C+(I<<7&4294967295|I>>>25),I=M+(D^E&(C^D))+N[1]+3905402710&4294967295,M=E+(I<<12&4294967295|I>>>20),I=D+(C^M&(E^C))+N[2]+606105819&4294967295,D=M+(I<<17&4294967295|I>>>15),I=C+(E^D&(M^E))+N[3]+3250441966&4294967295,C=D+(I<<22&4294967295|I>>>10),I=E+(M^C&(D^M))+N[4]+4118548399&4294967295,E=C+(I<<7&4294967295|I>>>25),I=M+(D^E&(C^D))+N[5]+1200080426&4294967295,M=E+(I<<12&4294967295|I>>>20),I=D+(C^M&(E^C))+N[6]+2821735955&4294967295,D=M+(I<<17&4294967295|I>>>15),I=C+(E^D&(M^E))+N[7]+4249261313&4294967295,C=D+(I<<22&4294967295|I>>>10),I=E+(M^C&(D^M))+N[8]+1770035416&4294967295,E=C+(I<<7&4294967295|I>>>25),I=M+(D^E&(C^D))+N[9]+2336552879&4294967295,M=E+(I<<12&4294967295|I>>>20),I=D+(C^M&(E^C))+N[10]+4294925233&4294967295,D=M+(I<<17&4294967295|I>>>15),I=C+(E^D&(M^E))+N[11]+2304563134&4294967295,C=D+(I<<22&4294967295|I>>>10),I=E+(M^C&(D^M))+N[12]+1804603682&4294967295,E=C+(I<<7&4294967295|I>>>25),I=M+(D^E&(C^D))+N[13]+4254626195&4294967295,M=E+(I<<12&4294967295|I>>>20),I=D+(C^M&(E^C))+N[14]+2792965006&4294967295,D=M+(I<<17&4294967295|I>>>15),I=C+(E^D&(M^E))+N[15]+1236535329&4294967295,C=D+(I<<22&4294967295|I>>>10),I=E+(D^M&(C^D))+N[1]+4129170786&4294967295,E=C+(I<<5&4294967295|I>>>27),I=M+(C^D&(E^C))+N[6]+3225465664&4294967295,M=E+(I<<9&4294967295|I>>>23),I=D+(E^C&(M^E))+N[11]+643717713&4294967295,D=M+(I<<14&4294967295|I>>>18),I=C+(M^E&(D^M))+N[0]+3921069994&4294967295,C=D+(I<<20&4294967295|I>>>12),I=E+(D^M&(C^D))+N[5]+3593408605&4294967295,E=C+(I<<5&4294967295|I>>>27),I=M+(C^D&(E^C))+N[10]+38016083&4294967295,M=E+(I<<9&4294967295|I>>>23),I=D+(E^C&(M^E))+N[15]+3634488961&4294967295,D=M+(I<<14&4294967295|I>>>18),I=C+(M^E&(D^M))+N[4]+3889429448&4294967295,C=D+(I<<20&4294967295|I>>>12),I=E+(D^M&(C^D))+N[9]+568446438&4294967295,E=C+(I<<5&4294967295|I>>>27),I=M+(C^D&(E^C))+N[14]+3275163606&4294967295,M=E+(I<<9&4294967295|I>>>23),I=D+(E^C&(M^E))+N[3]+4107603335&4294967295,D=M+(I<<14&4294967295|I>>>18),I=C+(M^E&(D^M))+N[8]+1163531501&4294967295,C=D+(I<<20&4294967295|I>>>12),I=E+(D^M&(C^D))+N[13]+2850285829&4294967295,E=C+(I<<5&4294967295|I>>>27),I=M+(C^D&(E^C))+N[2]+4243563512&4294967295,M=E+(I<<9&4294967295|I>>>23),I=D+(E^C&(M^E))+N[7]+1735328473&4294967295,D=M+(I<<14&4294967295|I>>>18),I=C+(M^E&(D^M))+N[12]+2368359562&4294967295,C=D+(I<<20&4294967295|I>>>12),I=E+(C^D^M)+N[5]+4294588738&4294967295,E=C+(I<<4&4294967295|I>>>28),I=M+(E^C^D)+N[8]+2272392833&4294967295,M=E+(I<<11&4294967295|I>>>21),I=D+(M^E^C)+N[11]+1839030562&4294967295,D=M+(I<<16&4294967295|I>>>16),I=C+(D^M^E)+N[14]+4259657740&4294967295,C=D+(I<<23&4294967295|I>>>9),I=E+(C^D^M)+N[1]+2763975236&4294967295,E=C+(I<<4&4294967295|I>>>28),I=M+(E^C^D)+N[4]+1272893353&4294967295,M=E+(I<<11&4294967295|I>>>21),I=D+(M^E^C)+N[7]+4139469664&4294967295,D=M+(I<<16&4294967295|I>>>16),I=C+(D^M^E)+N[10]+3200236656&4294967295,C=D+(I<<23&4294967295|I>>>9),I=E+(C^D^M)+N[13]+681279174&4294967295,E=C+(I<<4&4294967295|I>>>28),I=M+(E^C^D)+N[0]+3936430074&4294967295,M=E+(I<<11&4294967295|I>>>21),I=D+(M^E^C)+N[3]+3572445317&4294967295,D=M+(I<<16&4294967295|I>>>16),I=C+(D^M^E)+N[6]+76029189&4294967295,C=D+(I<<23&4294967295|I>>>9),I=E+(C^D^M)+N[9]+3654602809&4294967295,E=C+(I<<4&4294967295|I>>>28),I=M+(E^C^D)+N[12]+3873151461&4294967295,M=E+(I<<11&4294967295|I>>>21),I=D+(M^E^C)+N[15]+530742520&4294967295,D=M+(I<<16&4294967295|I>>>16),I=C+(D^M^E)+N[2]+3299628645&4294967295,C=D+(I<<23&4294967295|I>>>9),I=E+(D^(C|~M))+N[0]+4096336452&4294967295,E=C+(I<<6&4294967295|I>>>26),I=M+(C^(E|~D))+N[7]+1126891415&4294967295,M=E+(I<<10&4294967295|I>>>22),I=D+(E^(M|~C))+N[14]+2878612391&4294967295,D=M+(I<<15&4294967295|I>>>17),I=C+(M^(D|~E))+N[5]+4237533241&4294967295,C=D+(I<<21&4294967295|I>>>11),I=E+(D^(C|~M))+N[12]+1700485571&4294967295,E=C+(I<<6&4294967295|I>>>26),I=M+(C^(E|~D))+N[3]+2399980690&4294967295,M=E+(I<<10&4294967295|I>>>22),I=D+(E^(M|~C))+N[10]+4293915773&4294967295,D=M+(I<<15&4294967295|I>>>17),I=C+(M^(D|~E))+N[1]+2240044497&4294967295,C=D+(I<<21&4294967295|I>>>11),I=E+(D^(C|~M))+N[8]+1873313359&4294967295,E=C+(I<<6&4294967295|I>>>26),I=M+(C^(E|~D))+N[15]+4264355552&4294967295,M=E+(I<<10&4294967295|I>>>22),I=D+(E^(M|~C))+N[6]+2734768916&4294967295,D=M+(I<<15&4294967295|I>>>17),I=C+(M^(D|~E))+N[13]+1309151649&4294967295,C=D+(I<<21&4294967295|I>>>11),I=E+(D^(C|~M))+N[4]+4149444226&4294967295,E=C+(I<<6&4294967295|I>>>26),I=M+(C^(E|~D))+N[11]+3174756917&4294967295,M=E+(I<<10&4294967295|I>>>22),I=D+(E^(M|~C))+N[2]+718787259&4294967295,D=M+(I<<15&4294967295|I>>>17),I=C+(M^(D|~E))+N[9]+3951481745&4294967295,S.g[0]=S.g[0]+E&4294967295,S.g[1]=S.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,S.g[2]=S.g[2]+D&4294967295,S.g[3]=S.g[3]+M&4294967295}n.prototype.v=function(S,E){E===void 0&&(E=S.length);const C=E-this.blockSize,N=this.C;let D=this.h,M=0;for(;M<E;){if(D==0)for(;M<=C;)i(this,S,M),M+=this.blockSize;if(typeof S=="string"){for(;M<E;)if(N[D++]=S.charCodeAt(M++),D==this.blockSize){i(this,N),D=0;break}}else for(;M<E;)if(N[D++]=S[M++],D==this.blockSize){i(this,N),D=0;break}}this.h=D,this.o+=E},n.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var E=1;E<S.length-8;++E)S[E]=0;E=this.o*8;for(var C=S.length-8;C<S.length;++C)S[C]=E&255,E/=256;for(this.v(S),S=Array(16),E=0,C=0;C<4;++C)for(let N=0;N<32;N+=8)S[E++]=this.g[C]>>>N&255;return S};function s(S,E){var C=o;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=E(S)}function a(S,E){this.h=E;const C=[];let N=!0;for(let D=S.length-1;D>=0;D--){const M=S[D]|0;N&&M==E||(C[D]=M,N=!1)}this.g=C}var o={};function l(S){return-128<=S&&S<128?s(S,function(E){return new a([E|0],E<0?-1:0)}):new a([S|0],S<0?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return h;if(S<0)return b(u(-S));const E=[];let C=1;for(let N=0;S>=C;N++)E[N]=S/C|0,C*=4294967296;return new a(E,0)}function c(S,E){if(S.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(S.charAt(0)=="-")return b(c(S.substring(1),E));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=u(Math.pow(E,8));let N=h;for(let M=0;M<S.length;M+=8){var D=Math.min(8,S.length-M);const I=parseInt(S.substring(M,M+D),E);D<8?(D=u(Math.pow(E,D)),N=N.j(D).add(u(I))):(N=N.j(C),N=N.add(u(I)))}return N}var h=l(0),d=l(1),f=l(16777216);r=a.prototype,r.m=function(){if(g(this))return-b(this).m();let S=0,E=1;for(let C=0;C<this.g.length;C++){const N=this.i(C);S+=(N>=0?N:4294967296+N)*E,E*=4294967296}return S},r.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(p(this))return"0";if(g(this))return"-"+b(this).toString(S);const E=u(Math.pow(S,6));var C=this;let N="";for(;;){const D=A(C,E).g;C=v(C,D.j(E));let M=((C.g.length>0?C.g[0]:C.h)>>>0).toString(S);if(C=D,p(C))return M+N;for(;M.length<6;)M="0"+M;N=M+N}},r.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function p(S){if(S.h!=0)return!1;for(let E=0;E<S.g.length;E++)if(S.g[E]!=0)return!1;return!0}function g(S){return S.h==-1}r.l=function(S){return S=v(this,S),g(S)?-1:p(S)?0:1};function b(S){const E=S.g.length,C=[];for(let N=0;N<E;N++)C[N]=~S.g[N];return new a(C,~S.h).add(d)}r.abs=function(){return g(this)?b(this):this},r.add=function(S){const E=Math.max(this.g.length,S.g.length),C=[];let N=0;for(let D=0;D<=E;D++){let M=N+(this.i(D)&65535)+(S.i(D)&65535),I=(M>>>16)+(this.i(D)>>>16)+(S.i(D)>>>16);N=I>>>16,M&=65535,I&=65535,C[D]=I<<16|M}return new a(C,C[C.length-1]&-2147483648?-1:0)};function v(S,E){return S.add(b(E))}r.j=function(S){if(p(this)||p(S))return h;if(g(this))return g(S)?b(this).j(b(S)):b(b(this).j(S));if(g(S))return b(this.j(b(S)));if(this.l(f)<0&&S.l(f)<0)return u(this.m()*S.m());const E=this.g.length+S.g.length,C=[];for(var N=0;N<2*E;N++)C[N]=0;for(N=0;N<this.g.length;N++)for(let D=0;D<S.g.length;D++){const M=this.i(N)>>>16,I=this.i(N)&65535,V=S.i(D)>>>16,K=S.i(D)&65535;C[2*N+2*D]+=I*K,w(C,2*N+2*D),C[2*N+2*D+1]+=M*K,w(C,2*N+2*D+1),C[2*N+2*D+1]+=I*V,w(C,2*N+2*D+1),C[2*N+2*D+2]+=M*V,w(C,2*N+2*D+2)}for(S=0;S<E;S++)C[S]=C[2*S+1]<<16|C[2*S];for(S=E;S<2*E;S++)C[S]=0;return new a(C,0)};function w(S,E){for(;(S[E]&65535)!=S[E];)S[E+1]+=S[E]>>>16,S[E]&=65535,E++}function y(S,E){this.g=S,this.h=E}function A(S,E){if(p(E))throw Error("division by zero");if(p(S))return new y(h,h);if(g(S))return E=A(b(S),E),new y(b(E.g),b(E.h));if(g(E))return E=A(S,b(E)),new y(b(E.g),E.h);if(S.g.length>30){if(g(S)||g(E))throw Error("slowDivide_ only works with positive integers.");for(var C=d,N=E;N.l(S)<=0;)C=x(C),N=x(N);var D=_(C,1),M=_(N,1);for(N=_(N,2),C=_(C,2);!p(N);){var I=M.add(N);I.l(S)<=0&&(D=D.add(C),M=I),N=_(N,1),C=_(C,1)}return E=v(S,D.j(E)),new y(D,E)}for(D=h;S.l(E)>=0;){for(C=Math.max(1,Math.floor(S.m()/E.m())),N=Math.ceil(Math.log(C)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),M=u(C),I=M.j(E);g(I)||I.l(S)>0;)C-=N,M=u(C),I=M.j(E);p(M)&&(M=d),D=D.add(M),S=v(S,I)}return new y(D,S)}r.B=function(S){return A(this,S).h},r.and=function(S){const E=Math.max(this.g.length,S.g.length),C=[];for(let N=0;N<E;N++)C[N]=this.i(N)&S.i(N);return new a(C,this.h&S.h)},r.or=function(S){const E=Math.max(this.g.length,S.g.length),C=[];for(let N=0;N<E;N++)C[N]=this.i(N)|S.i(N);return new a(C,this.h|S.h)},r.xor=function(S){const E=Math.max(this.g.length,S.g.length),C=[];for(let N=0;N<E;N++)C[N]=this.i(N)^S.i(N);return new a(C,this.h^S.h)};function x(S){const E=S.g.length+1,C=[];for(let N=0;N<E;N++)C[N]=S.i(N)<<1|S.i(N-1)>>>31;return new a(C,S.h)}function _(S,E){const C=E>>5;E%=32;const N=S.g.length-C,D=[];for(let M=0;M<N;M++)D[M]=E>0?S.i(M+C)>>>E|S.i(M+C+1)<<32-E:S.i(M+C);return new a(D,S.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,Hj=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=c,cd=a}).apply(typeof J4<"u"?J4:typeof self<"u"?self:typeof window<"u"?window:{});var aA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gj,Jy,Wj,aE,CM,Kj,Xj,Yj;(function(){var r,e=Object.defineProperty;function t(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof aA=="object"&&aA];for(var O=0;O<T.length;++O){var $=T[O];if($&&$.Math==Math)return $}throw Error("Cannot find global object")}var n=t(this);function i(T,O){if(O)e:{var $=n;T=T.split(".");for(var J=0;J<T.length-1;J++){var be=T[J];if(!(be in $))break e;$=$[be]}T=T[T.length-1],J=$[T],O=O(J),O!=J&&O!=null&&e($,T,{configurable:!0,writable:!0,value:O})}}i("Symbol.dispose",function(T){return T||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(T){return T||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(T){return T||function(O){var $=[],J;for(J in O)Object.prototype.hasOwnProperty.call(O,J)&&$.push([J,O[J]]);return $}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function o(T){var O=typeof T;return O=="object"&&T!=null||O=="function"}function l(T,O,$){return T.call.apply(T.bind,arguments)}function u(T,O,$){return u=l,u.apply(null,arguments)}function c(T,O){var $=Array.prototype.slice.call(arguments,1);return function(){var J=$.slice();return J.push.apply(J,arguments),T.apply(this,J)}}function h(T,O){function $(){}$.prototype=O.prototype,T.Z=O.prototype,T.prototype=new $,T.prototype.constructor=T,T.Ob=function(J,be,_e){for(var Le=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)Le[Ot-2]=arguments[Ot];return O.prototype[be].apply(J,Le)}}var d=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?T=>T&&AsyncContext.Snapshot.wrap(T):T=>T;function f(T){const O=T.length;if(O>0){const $=Array(O);for(let J=0;J<O;J++)$[J]=T[J];return $}return[]}function p(T,O){for(let J=1;J<arguments.length;J++){const be=arguments[J];var $=typeof be;if($=$!="object"?$:be?Array.isArray(be)?"array":$:"null",$=="array"||$=="object"&&typeof be.length=="number"){$=T.length||0;const _e=be.length||0;T.length=$+_e;for(let Le=0;Le<_e;Le++)T[$+Le]=be[Le]}else T.push(be)}}class g{constructor(O,$){this.i=O,this.j=$,this.h=0,this.g=null}get(){let O;return this.h>0?(this.h--,O=this.g,this.g=O.next,O.next=null):O=this.i(),O}}function b(T){a.setTimeout(()=>{throw T},0)}function v(){var T=S;let O=null;return T.g&&(O=T.g,T.g=T.g.next,T.g||(T.h=null),O.next=null),O}class w{constructor(){this.h=this.g=null}add(O,$){const J=y.get();J.set(O,$),this.h?this.h.next=J:this.g=J,this.h=J}}var y=new g(()=>new A,T=>T.reset());class A{constructor(){this.next=this.g=this.h=null}set(O,$){this.h=O,this.g=$,this.next=null}reset(){this.next=this.g=this.h=null}}let x,_=!1,S=new w,E=()=>{const T=Promise.resolve(void 0);x=()=>{T.then(C)}};function C(){for(var T;T=v();){try{T.h.call(T.g)}catch($){b($)}var O=y;O.j(T),O.h<100&&(O.h++,T.next=O.g,O.g=T)}_=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(T,O){this.type=T,this.g=this.target=O,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var T=!1,O=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const $=()=>{};a.addEventListener("test",$,O),a.removeEventListener("test",$,O)}catch{}return T}();function I(T){return/^[\s\xa0]*$/.test(T)}function V(T,O){D.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T&&this.init(T,O)}h(V,D),V.prototype.init=function(T,O){const $=this.type=T.type,J=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;this.target=T.target||T.srcElement,this.g=O,O=T.relatedTarget,O||($=="mouseover"?O=T.fromElement:$=="mouseout"&&(O=T.toElement)),this.relatedTarget=O,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=T.pointerType,this.state=T.state,this.i=T,T.defaultPrevented&&V.Z.h.call(this)},V.prototype.h=function(){V.Z.h.call(this);const T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var K="closure_listenable_"+(Math.random()*1e6|0),F=0;function U(T,O,$,J,be){this.listener=T,this.proxy=null,this.src=O,this.type=$,this.capture=!!J,this.ha=be,this.key=++F,this.da=this.fa=!1}function j(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function G(T,O,$){for(const J in T)O.call($,T[J],J,T)}function ee(T,O){for(const $ in T)O.call(void 0,T[$],$,T)}function ue(T){const O={};for(const $ in T)O[$]=T[$];return O}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(T,O){let $,J;for(let be=1;be<arguments.length;be++){J=arguments[be];for($ in J)T[$]=J[$];for(let _e=0;_e<te.length;_e++)$=te[_e],Object.prototype.hasOwnProperty.call(J,$)&&(T[$]=J[$])}}function Y(T){this.src=T,this.g={},this.h=0}Y.prototype.add=function(T,O,$,J,be){const _e=T.toString();T=this.g[_e],T||(T=this.g[_e]=[],this.h++);const Le=he(T,O,J,be);return Le>-1?(O=T[Le],$||(O.fa=!1)):(O=new U(O,this.src,_e,!!J,be),O.fa=$,T.push(O)),O};function H(T,O){const $=O.type;if($ in T.g){var J=T.g[$],be=Array.prototype.indexOf.call(J,O,void 0),_e;(_e=be>=0)&&Array.prototype.splice.call(J,be,1),_e&&(j(O),T.g[$].length==0&&(delete T.g[$],T.h--))}}function he(T,O,$,J){for(let be=0;be<T.length;++be){const _e=T[be];if(!_e.da&&_e.listener==O&&_e.capture==!!$&&_e.ha==J)return be}return-1}var fe="closure_lm_"+(Math.random()*1e6|0),re={};function W(T,O,$,J,be){if(Array.isArray(O)){for(let _e=0;_e<O.length;_e++)W(T,O[_e],$,J,be);return null}return $=Be($),T&&T[K]?T.J(O,$,o(J)?!!J.capture:!1,be):ie(T,O,$,!1,J,be)}function ie(T,O,$,J,be,_e){if(!O)throw Error("Invalid event type");const Le=o(be)?!!be.capture:!!be;let Ot=Ue(T);if(Ot||(T[fe]=Ot=new Y(T)),$=Ot.add(O,$,J,Le,_e),$.proxy)return $;if(J=me(),$.proxy=J,J.src=T,J.listener=$,T.addEventListener)M||(be=Le),be===void 0&&(be=!1),T.addEventListener(O.toString(),J,be);else if(T.attachEvent)T.attachEvent(ye(O.toString()),J);else if(T.addListener&&T.removeListener)T.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return $}function me(){function T($){return O.call(T.src,T.listener,$)}const O=Ie;return T}function le(T,O,$,J,be){if(Array.isArray(O))for(var _e=0;_e<O.length;_e++)le(T,O[_e],$,J,be);else J=o(J)?!!J.capture:!!J,$=Be($),T&&T[K]?(T=T.i,_e=String(O).toString(),_e in T.g&&(O=T.g[_e],$=he(O,$,J,be),$>-1&&(j(O[$]),Array.prototype.splice.call(O,$,1),O.length==0&&(delete T.g[_e],T.h--)))):T&&(T=Ue(T))&&(O=T.g[O.toString()],T=-1,O&&(T=he(O,$,J,be)),($=T>-1?O[T]:null)&&ve($))}function ve(T){if(typeof T!="number"&&T&&!T.da){var O=T.src;if(O&&O[K])H(O.i,T);else{var $=T.type,J=T.proxy;O.removeEventListener?O.removeEventListener($,J,T.capture):O.detachEvent?O.detachEvent(ye($),J):O.addListener&&O.removeListener&&O.removeListener(J),($=Ue(O))?(H($,T),$.h==0&&($.src=null,O[fe]=null)):j(T)}}}function ye(T){return T in re?re[T]:re[T]="on"+T}function Ie(T,O){if(T.da)T=!0;else{O=new V(O,this);const $=T.listener,J=T.ha||T.src;T.fa&&ve(T),T=$.call(J,O)}return T}function Ue(T){return T=T[fe],T instanceof Y?T:null}var Ge="__closure_events_fn_"+(Math.random()*1e9>>>0);function Be(T){return typeof T=="function"?T:(T[Ge]||(T[Ge]=function(O){return T.handleEvent(O)}),T[Ge])}function $e(){N.call(this),this.i=new Y(this),this.M=this,this.G=null}h($e,N),$e.prototype[K]=!0,$e.prototype.removeEventListener=function(T,O,$,J){le(this,T,O,$,J)};function He(T,O){var $,J=T.G;if(J)for($=[];J;J=J.G)$.push(J);if(T=T.M,J=O.type||O,typeof O=="string")O=new D(O,T);else if(O instanceof D)O.target=O.target||T;else{var be=O;O=new D(J,T),R(O,be)}be=!0;let _e,Le;if($)for(Le=$.length-1;Le>=0;Le--)_e=O.g=$[Le],be=Z(_e,J,!0,O)&&be;if(_e=O.g=T,be=Z(_e,J,!0,O)&&be,be=Z(_e,J,!1,O)&&be,$)for(Le=0;Le<$.length;Le++)_e=O.g=$[Le],be=Z(_e,J,!1,O)&&be}$e.prototype.N=function(){if($e.Z.N.call(this),this.i){var T=this.i;for(const O in T.g){const $=T.g[O];for(let J=0;J<$.length;J++)j($[J]);delete T.g[O],T.h--}}this.G=null},$e.prototype.J=function(T,O,$,J){return this.i.add(String(T),O,!1,$,J)},$e.prototype.K=function(T,O,$,J){return this.i.add(String(T),O,!0,$,J)};function Z(T,O,$,J){if(O=T.i.g[String(O)],!O)return!0;O=O.concat();let be=!0;for(let _e=0;_e<O.length;++_e){const Le=O[_e];if(Le&&!Le.da&&Le.capture==$){const Ot=Le.listener,Bn=Le.ha||Le.src;Le.fa&&H(T.i,Le),be=Ot.call(Bn,J)!==!1&&be}}return be&&!J.defaultPrevented}function ce(T,O){if(typeof T!="function")if(T&&typeof T.handleEvent=="function")T=u(T.handleEvent,T);else throw Error("Invalid listener argument");return Number(O)>2147483647?-1:a.setTimeout(T,O||0)}function q(T){T.g=ce(()=>{T.g=null,T.i&&(T.i=!1,q(T))},T.l);const O=T.h;T.h=null,T.m.apply(null,O)}class Q extends N{constructor(O,$){super(),this.m=O,this.l=$,this.h=null,this.i=!1,this.g=null}j(O){this.h=arguments,this.g?this.i=!0:q(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ae(T){N.call(this),this.h=T,this.g={}}h(ae,N);var de=[];function ge(T){G(T.g,function(O,$){this.g.hasOwnProperty($)&&ve(O)},T),T.g={}}ae.prototype.N=function(){ae.Z.N.call(this),ge(this)},ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pe=a.JSON.stringify,Ne=a.JSON.parse,Ee=class{stringify(T){return a.JSON.stringify(T,void 0)}parse(T){return a.JSON.parse(T,void 0)}};function Oe(){}function Se(){}var et={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ct(){D.call(this,"d")}h(Ct,D);function zt(){D.call(this,"c")}h(zt,D);var lt={},pr=null;function B(){return pr=pr||new $e}lt.Ia="serverreachability";function oe(T){D.call(this,lt.Ia,T)}h(oe,D);function we(T){const O=B();He(O,new oe(O))}lt.STAT_EVENT="statevent";function Me(T,O){D.call(this,lt.STAT_EVENT,T),this.stat=O}h(Me,D);function ze(T){const O=B();He(O,new Me(O,T))}lt.Ja="timingevent";function ut(T,O){D.call(this,lt.Ja,T),this.size=O}h(ut,D);function vn(T,O){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){T()},O)}function Oa(){this.g=!0}Oa.prototype.ua=function(){this.g=!1};function dy(T,O,$,J,be,_e){T.info(function(){if(T.g)if(_e){var Le="",Ot=_e.split("&");for(let Er=0;Er<Ot.length;Er++){var Bn=Ot[Er].split("=");if(Bn.length>1){const ei=Bn[0];Bn=Bn[1];const ol=ei.split("_");Le=ol.length>=2&&ol[1]=="type"?Le+(ei+"="+Bn+"&"):Le+(ei+"=redacted&")}}}else Le=null;else Le=_e;return"XMLHTTP REQ ("+J+") [attempt "+be+"]: "+O+`
`+$+`
`+Le})}function wN(T,O,$,J,be,_e,Le){T.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+be+"]: "+O+`
`+$+`
`+_e+" "+Le})}function Rc(T,O,$,J){T.info(function(){return"XMLHTTP TEXT ("+O+"): "+_N(T,$)+(J?" "+J:"")})}function xN(T,O){T.info(function(){return"TIMEOUT: "+O})}Oa.prototype.info=function(){};function _N(T,O){if(!T.g)return O;if(!O)return null;try{const _e=JSON.parse(O);if(_e){for(T=0;T<_e.length;T++)if(Array.isArray(_e[T])){var $=_e[T];if(!($.length<2)){var J=$[1];if(Array.isArray(J)&&!(J.length<1)){var be=J[0];if(be!="noop"&&be!="stop"&&be!="close")for(let Le=1;Le<J.length;Le++)J[Le]=""}}}}return pe(_e)}catch{return O}}var Dp={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},E_={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},S_;function fy(){}h(fy,Oe),fy.prototype.g=function(){return new XMLHttpRequest},S_=new fy;function Qd(T){return encodeURIComponent(String(T))}function AN(T){var O=1;T=T.split(":");const $=[];for(;O>0&&T.length;)$.push(T.shift()),O--;return T.length&&$.push(T.join(":")),$}function sl(T,O,$,J){this.j=T,this.i=O,this.l=$,this.S=J||1,this.V=new ae(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new T_}function T_(){this.i=null,this.g="",this.h=!1}var C_={},my={};function py(T,O,$){T.M=1,T.A=P_(al(O)),T.u=$,T.R=!0,N_(T,null)}function N_(T,O){T.F=Date.now(),Mp(T),T.B=al(T.A);var $=T.B,J=T.S;Array.isArray(J)||(J=[String(J)]),zO($.i,"t",J),T.C=0,$=T.j.L,T.h=new T_,T.g=a3(T.j,$?O:null,!T.u),T.P>0&&(T.O=new Q(u(T.Y,T,T.g),T.P)),O=T.V,$=T.g,J=T.ba;var be="readystatechange";Array.isArray(be)||(be&&(de[0]=be.toString()),be=de);for(let _e=0;_e<be.length;_e++){const Le=W($,be[_e],J||O.handleEvent,!1,O.h||O);if(!Le)break;O.g[Le.key]=Le}O=T.J?ue(T.J):{},T.u?(T.v||(T.v="POST"),O["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.B,T.v,T.u,O)):(T.v="GET",T.g.ea(T.B,T.v,null,O)),we(),dy(T.i,T.v,T.B,T.l,T.S,T.u)}sl.prototype.ba=function(T){T=T.target;const O=this.O;O&&Bc(T)==3?O.j():this.Y(T)},sl.prototype.Y=function(T){try{if(T==this.g)e:{const Ot=Bc(this.g),Bn=this.g.ya(),Er=this.g.ca();if(!(Ot<3)&&(Ot!=3||this.g&&(this.h.h||this.g.la()||XO(this.g)))){this.K||Ot!=4||Bn==7||(Bn==8||Er<=0?we(3):we(2)),gy(this);var O=this.g.ca();this.X=O;var $=EN(this);if(this.o=O==200,wN(this.i,this.v,this.B,this.l,this.S,Ot,O),this.o){if(this.U&&!this.L){t:{if(this.g){var J,be=this.g;if((J=be.g?be.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(J)){var _e=J;break t}}_e=null}if(T=_e)Rc(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Zt(this,T);else{this.o=!1,this.m=3,ze(12),Js(this),Jd(this);break e}}if(this.R){T=!0;let ei;for(;!this.K&&this.C<$.length;)if(ei=SN(this,$),ei==my){Ot==4&&(this.m=4,ze(14),T=!1),Rc(this.i,this.l,null,"[Incomplete Response]");break}else if(ei==C_){this.m=4,ze(15),Rc(this.i,this.l,$,"[Invalid Chunk]"),T=!1;break}else Rc(this.i,this.l,ei,null),Zt(this,ei);if(D_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||$.length!=0||this.h.h||(this.m=1,ze(16),T=!1),this.o=this.o&&T,!T)Rc(this.i,this.l,$,"[Invalid Chunked Response]"),Js(this),Jd(this);else if($.length>0&&!this.W){this.W=!0;var Le=this.j;Le.g==this&&Le.aa&&!Le.P&&(Le.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),PN(Le),Le.P=!0,ze(11))}}else Rc(this.i,this.l,$,null),Zt(this,$);Ot==4&&Js(this),this.o&&!this.K&&(Ot==4?r3(this.j,this):(this.o=!1,Mp(this)))}else RQ(this.g),O==400&&$.indexOf("Unknown SID")>0?(this.m=3,ze(12)):(this.m=0,ze(13)),Js(this),Jd(this)}}}catch{}finally{}};function EN(T){if(!D_(T))return T.g.la();const O=XO(T.g);if(O==="")return"";let $="";const J=O.length,be=Bc(T.g)==4;if(!T.h.i){if(typeof TextDecoder>"u")return Js(T),Jd(T),"";T.h.i=new a.TextDecoder}for(let _e=0;_e<J;_e++)T.h.h=!0,$+=T.h.i.decode(O[_e],{stream:!(be&&_e==J-1)});return O.length=0,T.h.g+=$,T.C=0,T.h.g}function D_(T){return T.g?T.v=="GET"&&T.M!=2&&T.j.Aa:!1}function SN(T,O){var $=T.C,J=O.indexOf(`
`,$);return J==-1?my:($=Number(O.substring($,J)),isNaN($)?C_:(J+=1,J+$>O.length?my:(O=O.slice(J,J+$),T.C=J+$,O)))}sl.prototype.cancel=function(){this.K=!0,Js(this)};function Mp(T){T.T=Date.now()+T.H,M_(T,T.H)}function M_(T,O){if(T.D!=null)throw Error("WatchDog timer not null");T.D=vn(u(T.aa,T),O)}function gy(T){T.D&&(a.clearTimeout(T.D),T.D=null)}sl.prototype.aa=function(){this.D=null;const T=Date.now();T-this.T>=0?(xN(this.i,this.B),this.M!=2&&(we(),ze(17)),Js(this),this.m=2,Jd(this)):M_(this,this.T-T)};function Jd(T){T.j.I==0||T.K||r3(T.j,T)}function Js(T){gy(T);var O=T.O;O&&typeof O.dispose=="function"&&O.dispose(),T.O=null,ge(T.V),T.g&&(O=T.g,T.g=null,O.abort(),O.dispose())}function Zt(T,O){try{var $=T.j;if($.I!=0&&($.g==T||vy($.h,T))){if(!T.L&&vy($.h,T)&&$.I==3){try{var J=$.Ba.g.parse(O)}catch{J=null}if(Array.isArray(J)&&J.length==3){var be=J;if(be[0]==0){e:if(!$.v){if($.g)if($.g.F+3e3<T.F)B_($),F_($);else break e;IN($),ze(18)}}else $.xa=be[1],0<$.xa-$.K&&be[2]<37500&&$.F&&$.A==0&&!$.C&&($.C=vn(u($.Va,$),6e3));kc($.h)<=1&&$.ta&&($.ta=void 0)}else tf($,11)}else if((T.L||$.g==T)&&B_($),!I(O))for(be=$.Ba.g.parse(O),O=0;O<be.length;O++){let Er=be[O];const ei=Er[0];if(!(ei<=$.K))if($.K=ei,Er=Er[1],$.I==2)if(Er[0]=="c"){$.M=Er[1],$.ba=Er[2];const ol=Er[3];ol!=null&&($.ka=ol,$.j.info("VER="+$.ka));const rf=Er[4];rf!=null&&($.za=rf,$.j.info("SVER="+$.za));const Lc=Er[5];Lc!=null&&typeof Lc=="number"&&Lc>0&&(J=1.5*Lc,$.O=J,$.j.info("backChannelRequestTimeoutMs_="+J)),J=$;const $c=T.g;if($c){const $_=$c.g?$c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($_){var _e=J.h;_e.g||$_.indexOf("spdy")==-1&&$_.indexOf("quic")==-1&&$_.indexOf("h2")==-1||(_e.j=_e.l,_e.g=new Set,_e.h&&(TN(_e,_e.h),_e.h=null))}if(J.G){const RN=$c.g?$c.g.getResponseHeader("X-HTTP-Session-Id"):null;RN&&(J.wa=RN,Or(J.J,J.G,RN))}}$.I=3,$.l&&$.l.ra(),$.aa&&($.T=Date.now()-T.F,$.j.info("Handshake RTT: "+$.T+"ms")),J=$;var Le=T;if(J.na=s3(J,J.L?J.ba:null,J.W),Le.L){FO(J.h,Le);var Ot=Le,Bn=J.O;Bn&&(Ot.H=Bn),Ot.D&&(gy(Ot),Mp(Ot)),J.g=Le}else e3(J);$.i.length>0&&O_($)}else Er[0]!="stop"&&Er[0]!="close"||tf($,7);else $.I==3&&(Er[0]=="stop"||Er[0]=="close"?Er[0]=="stop"?tf($,7):MN($):Er[0]!="noop"&&$.l&&$.l.qa(Er),$.A=0)}}we(4)}catch{}}var Li=class{constructor(T,O){this.g=T,this.map=O}};function I_(T){this.l=T||10,a.PerformanceNavigationTiming?(T=a.performance.getEntriesByType("navigation"),T=T.length>0&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Zd(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function kc(T){return T.h?1:T.g?T.g.size:0}function vy(T,O){return T.h?T.h==O:T.g?T.g.has(O):!1}function TN(T,O){T.g?T.g.add(O):T.h=O}function FO(T,O){T.h&&T.h==O?T.h=null:T.g&&T.g.has(O)&&T.g.delete(O)}I_.prototype.cancel=function(){if(this.i=OO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function OO(T){if(T.h!=null)return T.i.concat(T.h.G);if(T.g!=null&&T.g.size!==0){let O=T.i;for(const $ of T.g.values())O=O.concat($.G);return O}return f(T.i)}var BO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xQ(T,O){if(T){T=T.split("&");for(let $=0;$<T.length;$++){const J=T[$].indexOf("=");let be,_e=null;J>=0?(be=T[$].substring(0,J),_e=T[$].substring(J+1)):be=T[$],O(be,_e?decodeURIComponent(_e.replace(/\+/g," ")):"")}}}function Fc(T){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let O;T instanceof Fc?(this.l=T.l,yy(this,T.j),this.o=T.o,this.g=T.g,by(this,T.u),this.h=T.h,CN(this,jO(T.i)),this.m=T.m):T&&(O=String(T).match(BO))?(this.l=!1,yy(this,O[1]||"",!0),this.o=wy(O[2]||""),this.g=wy(O[3]||"",!0),by(this,O[4]),this.h=wy(O[5]||"",!0),CN(this,O[6]||"",!0),this.m=wy(O[7]||"")):(this.l=!1,this.i=new _y(null,this.l))}Fc.prototype.toString=function(){const T=[];var O=this.j;O&&T.push(xy(O,LO,!0),":");var $=this.g;return($||O=="file")&&(T.push("//"),(O=this.o)&&T.push(xy(O,LO,!0),"@"),T.push(Qd($).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),$=this.u,$!=null&&T.push(":",String($))),($=this.h)&&(this.g&&$.charAt(0)!="/"&&T.push("/"),T.push(xy($,$.charAt(0)=="/"?EQ:AQ,!0))),($=this.i.toString())&&T.push("?",$),($=this.m)&&T.push("#",xy($,TQ)),T.join("")},Fc.prototype.resolve=function(T){const O=al(this);let $=!!T.j;$?yy(O,T.j):$=!!T.o,$?O.o=T.o:$=!!T.g,$?O.g=T.g:$=T.u!=null;var J=T.h;if($)by(O,T.u);else if($=!!T.h){if(J.charAt(0)!="/")if(this.g&&!this.h)J="/"+J;else{var be=O.h.lastIndexOf("/");be!=-1&&(J=O.h.slice(0,be+1)+J)}if(be=J,be==".."||be==".")J="";else if(be.indexOf("./")!=-1||be.indexOf("/.")!=-1){J=be.lastIndexOf("/",0)==0,be=be.split("/");const _e=[];for(let Le=0;Le<be.length;){const Ot=be[Le++];Ot=="."?J&&Le==be.length&&_e.push(""):Ot==".."?((_e.length>1||_e.length==1&&_e[0]!="")&&_e.pop(),J&&Le==be.length&&_e.push("")):(_e.push(Ot),J=!0)}J=_e.join("/")}else J=be}return $?O.h=J:$=T.i.toString()!=="",$?CN(O,jO(T.i)):$=!!T.m,$&&(O.m=T.m),O};function al(T){return new Fc(T)}function yy(T,O,$){T.j=$?wy(O,!0):O,T.j&&(T.j=T.j.replace(/:$/,""))}function by(T,O){if(O){if(O=Number(O),isNaN(O)||O<0)throw Error("Bad port number "+O);T.u=O}else T.u=null}function CN(T,O,$){O instanceof _y?(T.i=O,CQ(T.i,T.l)):($||(O=xy(O,SQ)),T.i=new _y(O,T.l))}function Or(T,O,$){T.i.set(O,$)}function P_(T){return Or(T,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),T}function wy(T,O){return T?O?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function xy(T,O,$){return typeof T=="string"?(T=encodeURI(T).replace(O,_Q),$&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function _Q(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var LO=/[#\/\?@]/g,AQ=/[#\?:]/g,EQ=/[#\?]/g,SQ=/[#\?@]/g,TQ=/#/g;function _y(T,O){this.h=this.g=null,this.i=T||null,this.j=!!O}function ef(T){T.g||(T.g=new Map,T.h=0,T.i&&xQ(T.i,function(O,$){T.add(decodeURIComponent(O.replace(/\+/g," ")),$)}))}r=_y.prototype,r.add=function(T,O){ef(this),this.i=null,T=Ip(this,T);let $=this.g.get(T);return $||this.g.set(T,$=[]),$.push(O),this.h+=1,this};function $O(T,O){ef(T),O=Ip(T,O),T.g.has(O)&&(T.i=null,T.h-=T.g.get(O).length,T.g.delete(O))}function VO(T,O){return ef(T),O=Ip(T,O),T.g.has(O)}r.forEach=function(T,O){ef(this),this.g.forEach(function($,J){$.forEach(function(be){T.call(O,be,J,this)},this)},this)};function UO(T,O){ef(T);let $=[];if(typeof O=="string")VO(T,O)&&($=$.concat(T.g.get(Ip(T,O))));else for(T=Array.from(T.g.values()),O=0;O<T.length;O++)$=$.concat(T[O]);return $}r.set=function(T,O){return ef(this),this.i=null,T=Ip(this,T),VO(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[O]),this.h+=1,this},r.get=function(T,O){return T?(T=UO(this,T),T.length>0?String(T[0]):O):O};function zO(T,O,$){$O(T,O),$.length>0&&(T.i=null,T.g.set(Ip(T,O),f($)),T.h+=$.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],O=Array.from(this.g.keys());for(let J=0;J<O.length;J++){var $=O[J];const be=Qd($);$=UO(this,$);for(let _e=0;_e<$.length;_e++){let Le=be;$[_e]!==""&&(Le+="="+Qd($[_e])),T.push(Le)}}return this.i=T.join("&")};function jO(T){const O=new _y;return O.i=T.i,T.g&&(O.g=new Map(T.g),O.h=T.h),O}function Ip(T,O){return O=String(O),T.j&&(O=O.toLowerCase()),O}function CQ(T,O){O&&!T.j&&(ef(T),T.i=null,T.g.forEach(function($,J){const be=J.toLowerCase();J!=be&&($O(this,J),zO(this,be,$))},T)),T.j=O}function NQ(T,O){const $=new Oa;if(a.Image){const J=new Image;J.onload=c(Oc,$,"TestLoadImage: loaded",!0,O,J),J.onerror=c(Oc,$,"TestLoadImage: error",!1,O,J),J.onabort=c(Oc,$,"TestLoadImage: abort",!1,O,J),J.ontimeout=c(Oc,$,"TestLoadImage: timeout",!1,O,J),a.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=T}else O(!1)}function DQ(T,O){const $=new Oa,J=new AbortController,be=setTimeout(()=>{J.abort(),Oc($,"TestPingServer: timeout",!1,O)},1e4);fetch(T,{signal:J.signal}).then(_e=>{clearTimeout(be),_e.ok?Oc($,"TestPingServer: ok",!0,O):Oc($,"TestPingServer: server error",!1,O)}).catch(()=>{clearTimeout(be),Oc($,"TestPingServer: error",!1,O)})}function Oc(T,O,$,J,be){try{be&&(be.onload=null,be.onerror=null,be.onabort=null,be.ontimeout=null),J($)}catch{}}function MQ(){this.g=new Ee}function NN(T){this.i=T.Sb||null,this.h=T.ab||!1}h(NN,Oe),NN.prototype.g=function(){return new R_(this.i,this.h)};function R_(T,O){$e.call(this),this.H=T,this.o=O,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(R_,$e),r=R_.prototype,r.open=function(T,O){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=T,this.D=O,this.readyState=1,Ey(this)},r.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const O={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};T&&(O.body=T),(this.H||a).fetch(new Request(this.D,O)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ay(this)),this.readyState=0},r.Pa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,Ey(this)),this.g&&(this.readyState=3,Ey(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;qO(this)}else T.text().then(this.Oa.bind(this),this.ga.bind(this))};function qO(T){T.j.read().then(T.Ma.bind(T)).catch(T.ga.bind(T))}r.Ma=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var O=T.value?T.value:new Uint8Array(0);(O=this.B.decode(O,{stream:!T.done}))&&(this.response=this.responseText+=O)}T.done?Ay(this):Ey(this),this.readyState==3&&qO(this)}},r.Oa=function(T){this.g&&(this.response=this.responseText=T,Ay(this))},r.Na=function(T){this.g&&(this.response=T,Ay(this))},r.ga=function(){this.g&&Ay(this)};function Ay(T){T.readyState=4,T.l=null,T.j=null,T.B=null,Ey(T)}r.setRequestHeader=function(T,O){this.A.append(T,O)},r.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],O=this.h.entries();for(var $=O.next();!$.done;)$=$.value,T.push($[0]+": "+$[1]),$=O.next();return T.join(`\r
`)};function Ey(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(R_.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function HO(T){let O="";return G(T,function($,J){O+=J,O+=":",O+=$,O+=`\r
`}),O}function DN(T,O,$){e:{for(J in $){var J=!1;break e}J=!0}J||($=HO($),typeof T=="string"?$!=null&&Qd($):Or(T,O,$))}function nn(T){$e.call(this),this.headers=new Map,this.L=T||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(nn,$e);var IQ=/^https?$/i,PQ=["POST","PUT"];r=nn.prototype,r.Fa=function(T){this.H=T},r.ea=function(T,O,$,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);O=O?O.toUpperCase():"GET",this.D=T,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():S_.g(),this.g.onreadystatechange=d(u(this.Ca,this));try{this.B=!0,this.g.open(O,String(T),!0),this.B=!1}catch(_e){GO(this,_e);return}if(T=$||"",$=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var be in J)$.set(be,J[be]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const _e of J.keys())$.set(_e,J.get(_e));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from($.keys()).find(_e=>_e.toLowerCase()=="content-type"),be=a.FormData&&T instanceof a.FormData,!(Array.prototype.indexOf.call(PQ,O,void 0)>=0)||J||be||$.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[_e,Le]of $)this.g.setRequestHeader(_e,Le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(T),this.v=!1}catch(_e){GO(this,_e)}};function GO(T,O){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=O,T.o=5,WO(T),k_(T)}function WO(T){T.A||(T.A=!0,He(T,"complete"),He(T,"error"))}r.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=T||7,He(this,"complete"),He(this,"abort"),k_(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),k_(this,!0)),nn.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?KO(this):this.Xa())},r.Xa=function(){KO(this)};function KO(T){if(T.h&&typeof s<"u"){if(T.v&&Bc(T)==4)setTimeout(T.Ca.bind(T),0);else if(He(T,"readystatechange"),Bc(T)==4){T.h=!1;try{const _e=T.ca();e:switch(_e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var O=!0;break e;default:O=!1}var $;if(!($=O)){var J;if(J=_e===0){let Le=String(T.D).match(BO)[1]||null;!Le&&a.self&&a.self.location&&(Le=a.self.location.protocol.slice(0,-1)),J=!IQ.test(Le?Le.toLowerCase():"")}$=J}if($)He(T,"complete"),He(T,"success");else{T.o=6;try{var be=Bc(T)>2?T.g.statusText:""}catch{be=""}T.l=be+" ["+T.ca()+"]",WO(T)}}finally{k_(T)}}}}function k_(T,O){if(T.g){T.m&&(clearTimeout(T.m),T.m=null);const $=T.g;T.g=null,O||He(T,"ready");try{$.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Bc(T){return T.g?T.g.readyState:0}r.ca=function(){try{return Bc(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(T){if(this.g){var O=this.g.responseText;return T&&O.indexOf(T)==0&&(O=O.substring(T.length)),Ne(O)}};function XO(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.F){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function RQ(T){const O={};T=(T.g&&Bc(T)>=2&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<T.length;J++){if(I(T[J]))continue;var $=AN(T[J]);const be=$[0];if($=$[1],typeof $!="string")continue;$=$.trim();const _e=O[be]||[];O[be]=_e,_e.push($)}ee(O,function(J){return J.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sy(T,O,$){return $&&$.internalChannelParams&&$.internalChannelParams[T]||O}function YO(T){this.za=0,this.i=[],this.j=new Oa,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Sy("failFast",!1,T),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Sy("baseRetryDelayMs",5e3,T),this.Za=Sy("retryDelaySeedMs",1e4,T),this.Ta=Sy("forwardChannelMaxRetries",2,T),this.va=Sy("forwardChannelRequestTimeoutMs",2e4,T),this.ma=T&&T.xmlHttpFactory||void 0,this.Ua=T&&T.Rb||void 0,this.Aa=T&&T.useFetchStreams||!1,this.O=void 0,this.L=T&&T.supportsCrossDomainXhr||!1,this.M="",this.h=new I_(T&&T.concurrentRequestLimit),this.Ba=new MQ,this.S=T&&T.fastHandshake||!1,this.R=T&&T.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=T&&T.Pb||!1,T&&T.ua&&this.j.ua(),T&&T.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&T&&T.detectBufferingProxy||!1,this.ia=void 0,T&&T.longPollingTimeout&&T.longPollingTimeout>0&&(this.ia=T.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=YO.prototype,r.ka=8,r.I=1,r.connect=function(T,O,$,J){ze(0),this.W=T,this.H=O||{},$&&J!==void 0&&(this.H.OSID=$,this.H.OAID=J),this.F=this.X,this.J=s3(this,null,this.W),O_(this)};function MN(T){if(QO(T),T.I==3){var O=T.V++,$=al(T.J);if(Or($,"SID",T.M),Or($,"RID",O),Or($,"TYPE","terminate"),Ty(T,$),O=new sl(T,T.j,O),O.M=2,O.A=P_(al($)),$=!1,a.navigator&&a.navigator.sendBeacon)try{$=a.navigator.sendBeacon(O.A.toString(),"")}catch{}!$&&a.Image&&(new Image().src=O.A,$=!0),$||(O.g=a3(O.j,null),O.g.ea(O.A)),O.F=Date.now(),Mp(O)}i3(T)}function F_(T){T.g&&(PN(T),T.g.cancel(),T.g=null)}function QO(T){F_(T),T.v&&(a.clearTimeout(T.v),T.v=null),B_(T),T.h.cancel(),T.m&&(typeof T.m=="number"&&a.clearTimeout(T.m),T.m=null)}function O_(T){if(!Zd(T.h)&&!T.m){T.m=!0;var O=T.Ea;x||E(),_||(x(),_=!0),S.add(O,T),T.D=0}}function kQ(T,O){return kc(T.h)>=T.h.j-(T.m?1:0)?!1:T.m?(T.i=O.G.concat(T.i),!0):T.I==1||T.I==2||T.D>=(T.Sa?0:T.Ta)?!1:(T.m=vn(u(T.Ea,T,O),n3(T,T.D)),T.D++,!0)}r.Ea=function(T){if(this.m)if(this.m=null,this.I==1){if(!T){this.V=Math.floor(Math.random()*1e5),T=this.V++;const be=new sl(this,this.j,T);let _e=this.o;if(this.U&&(_e?(_e=ue(_e),R(_e,this.U)):_e=this.U),this.u!==null||this.R||(be.J=_e,_e=null),this.S)e:{for(var O=0,$=0;$<this.i.length;$++){t:{var J=this.i[$];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break t}J=void 0}if(J===void 0)break;if(O+=J,O>4096){O=$;break e}if(O===4096||$===this.i.length-1){O=$+1;break e}}O=1e3}else O=1e3;O=ZO(this,be,O),$=al(this.J),Or($,"RID",T),Or($,"CVER",22),this.G&&Or($,"X-HTTP-Session-Id",this.G),Ty(this,$),_e&&(this.R?O="headers="+Qd(HO(_e))+"&"+O:this.u&&DN($,this.u,_e)),TN(this.h,be),this.Ra&&Or($,"TYPE","init"),this.S?(Or($,"$req",O),Or($,"SID","null"),be.U=!0,py(be,$,null)):py(be,$,O),this.I=2}}else this.I==3&&(T?JO(this,T):this.i.length==0||Zd(this.h)||JO(this))};function JO(T,O){var $;O?$=O.l:$=T.V++;const J=al(T.J);Or(J,"SID",T.M),Or(J,"RID",$),Or(J,"AID",T.K),Ty(T,J),T.u&&T.o&&DN(J,T.u,T.o),$=new sl(T,T.j,$,T.D+1),T.u===null&&($.J=T.o),O&&(T.i=O.G.concat(T.i)),O=ZO(T,$,1e3),$.H=Math.round(T.va*.5)+Math.round(T.va*.5*Math.random()),TN(T.h,$),py($,J,O)}function Ty(T,O){T.H&&G(T.H,function($,J){Or(O,J,$)}),T.l&&G({},function($,J){Or(O,J,$)})}function ZO(T,O,$){$=Math.min(T.i.length,$);const J=T.l?u(T.l.Ka,T.l,T):null;e:{var be=T.i;let Ot=-1;for(;;){const Bn=["count="+$];Ot==-1?$>0?(Ot=be[0].g,Bn.push("ofs="+Ot)):Ot=0:Bn.push("ofs="+Ot);let Er=!0;for(let ei=0;ei<$;ei++){var _e=be[ei].g;const ol=be[ei].map;if(_e-=Ot,_e<0)Ot=Math.max(0,be[ei].g-100),Er=!1;else try{_e="req"+_e+"_"||"";try{var Le=ol instanceof Map?ol:Object.entries(ol);for(const[rf,Lc]of Le){let $c=Lc;o(Lc)&&($c=pe(Lc)),Bn.push(_e+rf+"="+encodeURIComponent($c))}}catch(rf){throw Bn.push(_e+"type="+encodeURIComponent("_badmap")),rf}}catch{J&&J(ol)}}if(Er){Le=Bn.join("&");break e}}Le=void 0}return T=T.i.splice(0,$),O.G=T,Le}function e3(T){if(!T.g&&!T.v){T.Y=1;var O=T.Da;x||E(),_||(x(),_=!0),S.add(O,T),T.A=0}}function IN(T){return T.g||T.v||T.A>=3?!1:(T.Y++,T.v=vn(u(T.Da,T),n3(T,T.A)),T.A++,!0)}r.Da=function(){if(this.v=null,t3(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var T=4*this.T;this.j.info("BP detection timer enabled: "+T),this.B=vn(u(this.Wa,this),T)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ze(10),F_(this),t3(this))};function PN(T){T.B!=null&&(a.clearTimeout(T.B),T.B=null)}function t3(T){T.g=new sl(T,T.j,"rpc",T.Y),T.u===null&&(T.g.J=T.o),T.g.P=0;var O=al(T.na);Or(O,"RID","rpc"),Or(O,"SID",T.M),Or(O,"AID",T.K),Or(O,"CI",T.F?"0":"1"),!T.F&&T.ia&&Or(O,"TO",T.ia),Or(O,"TYPE","xmlhttp"),Ty(T,O),T.u&&T.o&&DN(O,T.u,T.o),T.O&&(T.g.H=T.O);var $=T.g;T=T.ba,$.M=1,$.A=P_(al(O)),$.u=null,$.R=!0,N_($,T)}r.Va=function(){this.C!=null&&(this.C=null,F_(this),IN(this),ze(19))};function B_(T){T.C!=null&&(a.clearTimeout(T.C),T.C=null)}function r3(T,O){var $=null;if(T.g==O){B_(T),PN(T),T.g=null;var J=2}else if(vy(T.h,O))$=O.G,FO(T.h,O),J=1;else return;if(T.I!=0){if(O.o)if(J==1){$=O.u?O.u.length:0,O=Date.now()-O.F;var be=T.D;J=B(),He(J,new ut(J,$)),O_(T)}else e3(T);else if(be=O.m,be==3||be==0&&O.X>0||!(J==1&&kQ(T,O)||J==2&&IN(T)))switch($&&$.length>0&&(O=T.h,O.i=O.i.concat($)),be){case 1:tf(T,5);break;case 4:tf(T,10);break;case 3:tf(T,6);break;default:tf(T,2)}}}function n3(T,O){let $=T.Qa+Math.floor(Math.random()*T.Za);return T.isActive()||($*=2),$*O}function tf(T,O){if(T.j.info("Error code "+O),O==2){var $=u(T.bb,T),J=T.Ua;const be=!J;J=new Fc(J||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||yy(J,"https"),P_(J),be?NQ(J.toString(),$):DQ(J.toString(),$)}else ze(2);T.I=0,T.l&&T.l.pa(O),i3(T),QO(T)}r.bb=function(T){T?(this.j.info("Successfully pinged google.com"),ze(2)):(this.j.info("Failed to ping google.com"),ze(1))};function i3(T){if(T.I=0,T.ja=[],T.l){const O=OO(T.h);(O.length!=0||T.i.length!=0)&&(p(T.ja,O),p(T.ja,T.i),T.h.i.length=0,f(T.i),T.i.length=0),T.l.oa()}}function s3(T,O,$){var J=$ instanceof Fc?al($):new Fc($);if(J.g!="")O&&(J.g=O+"."+J.g),by(J,J.u);else{var be=a.location;J=be.protocol,O=O?O+"."+be.hostname:be.hostname,be=+be.port;const _e=new Fc(null);J&&yy(_e,J),O&&(_e.g=O),be&&by(_e,be),$&&(_e.h=$),J=_e}return $=T.G,O=T.wa,$&&O&&Or(J,$,O),Or(J,"VER",T.ka),Ty(T,J),J}function a3(T,O,$){if(O&&!T.L)throw Error("Can't create secondary domain capable XhrIo object.");return O=T.Aa&&!T.ma?new nn(new NN({ab:$})):new nn(T.ma),O.Fa(T.L),O}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function o3(){}r=o3.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function L_(){}L_.prototype.g=function(T,O){return new Zs(T,O)};function Zs(T,O){$e.call(this),this.g=new YO(O),this.l=T,this.h=O&&O.messageUrlParams||null,T=O&&O.messageHeaders||null,O&&O.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=O&&O.initMessageHeaders||null,O&&O.messageContentType&&(T?T["X-WebChannel-Content-Type"]=O.messageContentType:T={"X-WebChannel-Content-Type":O.messageContentType}),O&&O.sa&&(T?T["X-WebChannel-Client-Profile"]=O.sa:T={"X-WebChannel-Client-Profile":O.sa}),this.g.U=T,(T=O&&O.Qb)&&!I(T)&&(this.g.u=T),this.A=O&&O.supportsCrossDomainXhr||!1,this.v=O&&O.sendRawJson||!1,(O=O&&O.httpSessionIdParam)&&!I(O)&&(this.g.G=O,T=this.h,T!==null&&O in T&&(T=this.h,O in T&&delete T[O])),this.j=new Pp(this)}h(Zs,$e),Zs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Zs.prototype.close=function(){MN(this.g)},Zs.prototype.o=function(T){var O=this.g;if(typeof T=="string"){var $={};$.__data__=T,T=$}else this.v&&($={},$.__data__=pe(T),T=$);O.i.push(new Li(O.Ya++,T)),O.I==3&&O_(O)},Zs.prototype.N=function(){this.g.l=null,delete this.j,MN(this.g),delete this.g,Zs.Z.N.call(this)};function l3(T){Ct.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var O=T.__sm__;if(O){e:{for(const $ in O){T=$;break e}T=void 0}(this.i=T)&&(T=this.i,O=O!==null&&T in O?O[T]:void 0),this.data=O}else this.data=T}h(l3,Ct);function u3(){zt.call(this),this.status=1}h(u3,zt);function Pp(T){this.g=T}h(Pp,o3),Pp.prototype.ra=function(){He(this.g,"a")},Pp.prototype.qa=function(T){He(this.g,new l3(T))},Pp.prototype.pa=function(T){He(this.g,new u3)},Pp.prototype.oa=function(){He(this.g,"b")},L_.prototype.createWebChannel=L_.prototype.g,Zs.prototype.send=Zs.prototype.o,Zs.prototype.open=Zs.prototype.m,Zs.prototype.close=Zs.prototype.close,Yj=function(){return new L_},Xj=function(){return B()},Kj=lt,CM={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Dp.NO_ERROR=0,Dp.TIMEOUT=8,Dp.HTTP_ERROR=6,aE=Dp,E_.COMPLETE="complete",Wj=E_,Se.EventType=et,et.OPEN="a",et.CLOSE="b",et.ERROR="c",et.MESSAGE="d",$e.prototype.listen=$e.prototype.J,Jy=Se,nn.prototype.listenOnce=nn.prototype.K,nn.prototype.getLastError=nn.prototype.Ha,nn.prototype.getLastErrorCode=nn.prototype.ya,nn.prototype.getStatus=nn.prototype.ca,nn.prototype.getResponseJson=nn.prototype.La,nn.prototype.getResponseText=nn.prototype.la,nn.prototype.send=nn.prototype.ea,nn.prototype.setWithCredentials=nn.prototype.Fa,Gj=nn}).apply(typeof aA<"u"?aA:typeof self<"u"?self:typeof window<"u"?window:{});const Z4="@firebase/firestore",eL="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yi.UNAUTHENTICATED=new Yi(null),Yi.GOOGLE_CREDENTIALS=new Yi("google-credentials-uid"),Yi.FIRST_PARTY=new Yi("first-party-uid"),Yi.MOCK_USER=new Yi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let W0="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp=new Ck("@firebase/firestore");function zp(){return tp.logLevel}function We(r,...e){if(tp.logLevel<=qt.DEBUG){const t=e.map(Mk);tp.debug(`Firestore (${W0}): ${r}`,...t)}}function _c(r,...e){if(tp.logLevel<=qt.ERROR){const t=e.map(Mk);tp.error(`Firestore (${W0}): ${r}`,...t)}}function A0(r,...e){if(tp.logLevel<=qt.WARN){const t=e.map(Mk);tp.warn(`Firestore (${W0}): ${r}`,...t)}}function Mk(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,Qj(r,n,t)}function Qj(r,e,t){let n=`FIRESTORE (${W0}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw _c(n),new Error(n)}function ar(r,e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,r||Qj(e,i,n)}function St(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends iu{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qoe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Yi.UNAUTHENTICATED))}shutdown(){}}class Hoe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Goe{constructor(e){this.t=e,this.currentUser=Yi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ar(this.o===void 0,42304);let n=this.i;const i=l=>this.i!==n?(n=this.i,t(l)):Promise.resolve();let s=new oc;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new oc,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{We("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(We("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new oc)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(We("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ar(typeof n.accessToken=="string",31837,{l:n}),new Jj(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ar(e===null||typeof e=="string",2055,{h:e}),new Yi(e)}}class Woe{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Yi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Koe{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Woe(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Yi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Xoe{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ea(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ar(this.o===void 0,3512);const n=s=>{s.error!=null&&We("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,We("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const i=s=>{We("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):We("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new tL(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ar(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new tL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yoe(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=Yoe(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<t&&(n+=e.charAt(i[s]%62))}return n}}function Ht(r,e){return r<e?-1:r>e?1:0}function NM(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const i=r.charAt(n),s=e.charAt(n);if(i!==s)return D2(i)===D2(s)?Ht(i,s):D2(i)?1:-1}return Ht(r.length,e.length)}const Qoe=55296,Joe=57343;function D2(r){const e=r.charCodeAt(0);return e>=Qoe&&e<=Joe}function E0(r,e,t){return r.length===e.length&&r.every((n,i)=>t(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL="__name__";class fl{constructor(e,t,n){t===void 0?t=0:t>e.length&&mt(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&mt(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return fl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fl?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=fl.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Ht(e.length,t.length)}static compareSegments(e,t){const n=fl.isNumericId(e),i=fl.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?fl.extractNumericId(e).compare(fl.extractNumericId(t)):NM(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cd.fromString(e.substring(4,e.length-2))}}class Rr extends fl{construct(e,t,n){return new Rr(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new qe(Te.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(i=>i.length>0))}return new Rr(t)}static emptyPath(){return new Rr([])}}const Zoe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ni extends fl{construct(e,t,n){return new Ni(e,t,n)}static isValidIdentifier(e){return Zoe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ni.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rL}static keyField(){return new Ni([rL])}static fromServerFormat(e){const t=[];let n="",i=0;const s=()=>{if(n.length===0)throw new qe(Te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new qe(Te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new qe(Te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(n+=o,i++):(s(),i++)}if(s(),a)throw new qe(Te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ni(t)}static emptyPath(){return new Ni([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.path=e}static fromPath(e){return new at(Rr.fromString(e))}static fromName(e){return new at(Rr.fromString(e).popFirst(5))}static empty(){return new at(Rr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Rr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Rr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new at(new Rr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(r,e,t){if(!t)throw new qe(Te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function ele(r,e,t,n){if(e===!0&&n===!0)throw new qe(Te.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function nL(r){if(!at.isDocumentKey(r))throw new qe(Te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function iL(r){if(at.isDocumentKey(r))throw new qe(Te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function eq(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function EC(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":mt(12329,{type:typeof r})}function bs(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new qe(Te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=EC(r);throw new qe(Te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(r,e){const t={typeString:r};return e&&(t.value=e),t}function Vx(r,e){if(!eq(r))throw new qe(Te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const i=e[n].typeString,s="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const a=r[n];if(i&&typeof a!==i){t=`JSON field '${n}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${n}' field to equal '${s.value}'`;break}}if(t)throw new qe(Te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=-62135596800,aL=1e6;class $r{static now(){return $r.fromMillis(Date.now())}static fromDate(e){return $r.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*aL);return new $r(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new qe(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new qe(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<sL)throw new qe(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/aL}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$r._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vx(e,$r._jsonSchema))return new $r(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-sL;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$r._jsonSchemaVersion="firestore/timestamp/1.0",$r._jsonSchema={type:kn("string",$r._jsonSchemaVersion),seconds:kn("number"),nanoseconds:kn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{static fromTimestamp(e){return new wt(e)}static min(){return new wt(new $r(0,0))}static max(){return new wt(new $r(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=-1;function tle(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=wt.fromTimestamp(n===1e9?new $r(t+1,0):new $r(t,n));return new yd(i,at.empty(),e)}function rle(r){return new yd(r.readTime,r.key,b1)}class yd{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new yd(wt.min(),at.empty(),b1)}static max(){return new yd(wt.max(),at.empty(),b1)}}function nle(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=at.comparator(r.documentKey,e.documentKey),t!==0?t:Ht(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ile="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sle{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K0(r){if(r.code!==Te.FAILED_PRECONDITION||r.message!==ile)throw r;We("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&mt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ce((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ce?t:Ce.resolve(t)}catch(t){return Ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ce.reject(t)}static resolve(e){return new Ce((t,n)=>{t(e)})}static reject(e){return new Ce((t,n)=>{n(e)})}static waitFor(e){return new Ce((t,n)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&t()},l=>n(l))}),a=!0,s===i&&t()})}static or(e){let t=Ce.resolve(!1);for(const n of e)t=t.next(i=>i?Ce.resolve(i):n());return t}static forEach(e,t){const n=[];return e.forEach((i,s)=>{n.push(t.call(this,i,s))}),this.waitFor(n)}static mapArray(e,t){return new Ce((n,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const u=l;t(e[u]).next(c=>{a[u]=c,++o,o===s&&n(a)},c=>i(c))}})}static doWhile(e,t){return new Ce((n,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):n()};s()})}}function ale(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function X0(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}SC.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=-1;function TC(r){return r==null}function MS(r){return r===0&&1/r==-1/0}function ole(r){return typeof r=="number"&&Number.isInteger(r)&&!MS(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tq="";function lle(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=oL(e)),e=ule(r.get(t),e);return oL(e)}function ule(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const s=r.charAt(i);switch(s){case"\0":t+="";break;case tq:t+="";break;default:t+=s}}return t}function oL(r){return r+tq+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Od(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function rq(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,t){this.comparator=e,this.root=t||Si.EMPTY}insert(e,t){return new rn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Si.BLACK,null,null))}remove(e){return new rn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Si.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oA(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oA(this.root,e,this.comparator,!1)}getReverseIterator(){return new oA(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oA(this.root,e,this.comparator,!0)}}class oA{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Si{constructor(e,t,n,i,s){this.key=e,this.value=t,this.color=n??Si.RED,this.left=i??Si.EMPTY,this.right=s??Si.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,s){return new Si(e??this.key,t??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,n),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Si.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Si.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Si.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Si.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw mt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw mt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw mt(27949);return e+(this.isRed()?0:1)}}Si.EMPTY=null,Si.RED=!0,Si.BLACK=!1;Si.EMPTY=new class{constructor(){this.size=0}get key(){throw mt(57766)}get value(){throw mt(16141)}get color(){throw mt(16727)}get left(){throw mt(29726)}get right(){throw mt(36894)}copy(e,t,n,i,s){return this}insert(e,t,n){return new Si(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.comparator=e,this.data=new rn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new uL(this.data.getIterator())}getIteratorFrom(e){return new uL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof Kn)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Kn(this.comparator);return t.data=e,t}}class uL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.fields=e,e.sort(Ni.comparator)}static empty(){return new Ta([])}unionWith(e){let t=new Kn(Ni.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ta(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return E0(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nq extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new nq("Invalid base64 string: "+s):s}}(e);return new Fi(t)}static fromUint8Array(e){const t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new Fi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fi.EMPTY_BYTE_STRING=new Fi("");const cle=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bd(r){if(ar(!!r,39018),typeof r=="string"){let e=0;const t=cle.exec(r);if(ar(!!t,46558,{timestamp:r}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:_n(r.seconds),nanos:_n(r.nanos)}}function _n(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function wd(r){return typeof r=="string"?Fi.fromBase64String(r):Fi.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iq="server_timestamp",sq="__type__",aq="__previous_value__",oq="__local_write_time__";function Rk(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[sq])==null?void 0:n.stringValue)===iq}function CC(r){const e=r.mapValue.fields[aq];return Rk(e)?CC(e):e}function w1(r){const e=bd(r.mapValue.fields[oq].timestampValue);return new $r(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hle{constructor(e,t,n,i,s,a,o,l,u,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=c}}const IS="(default)";class x1{constructor(e,t){this.projectId=e,this.database=t||IS}static empty(){return new x1("","")}get isDefaultDatabase(){return this.database===IS}isEqual(e){return e instanceof x1&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lq="__type__",dle="__max__",lA={mapValue:{}},uq="__vector__",PS="value";function xd(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Rk(r)?4:mle(r)?9007199254740991:fle(r)?10:11:mt(28295,{value:r})}function Yl(r,e){if(r===e)return!0;const t=xd(r);if(t!==xd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return w1(r).isEqual(w1(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=bd(i.timestampValue),o=bd(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(i,s){return wd(i.bytesValue).isEqual(wd(s.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(i,s){return _n(i.geoPointValue.latitude)===_n(s.geoPointValue.latitude)&&_n(i.geoPointValue.longitude)===_n(s.geoPointValue.longitude)}(r,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _n(i.integerValue)===_n(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=_n(i.doubleValue),o=_n(s.doubleValue);return a===o?MS(a)===MS(o):isNaN(a)&&isNaN(o)}return!1}(r,e);case 9:return E0(r.arrayValue.values||[],e.arrayValue.values||[],Yl);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(lL(a)!==lL(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Yl(a[l],o[l])))return!1;return!0}(r,e);default:return mt(52216,{left:r})}}function _1(r,e){return(r.values||[]).find(t=>Yl(t,e))!==void 0}function S0(r,e){if(r===e)return 0;const t=xd(r),n=xd(e);if(t!==n)return Ht(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ht(r.booleanValue,e.booleanValue);case 2:return function(s,a){const o=_n(s.integerValue||s.doubleValue),l=_n(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(r,e);case 3:return cL(r.timestampValue,e.timestampValue);case 4:return cL(w1(r),w1(e));case 5:return NM(r.stringValue,e.stringValue);case 6:return function(s,a){const o=wd(s),l=wd(a);return o.compareTo(l)}(r.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),l=a.split("/");for(let u=0;u<o.length&&u<l.length;u++){const c=Ht(o[u],l[u]);if(c!==0)return c}return Ht(o.length,l.length)}(r.referenceValue,e.referenceValue);case 8:return function(s,a){const o=Ht(_n(s.latitude),_n(a.latitude));return o!==0?o:Ht(_n(s.longitude),_n(a.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return hL(r.arrayValue,e.arrayValue);case 10:return function(s,a){var d,f,p,g;const o=s.fields||{},l=a.fields||{},u=(d=o[PS])==null?void 0:d.arrayValue,c=(f=l[PS])==null?void 0:f.arrayValue,h=Ht(((p=u==null?void 0:u.values)==null?void 0:p.length)||0,((g=c==null?void 0:c.values)==null?void 0:g.length)||0);return h!==0?h:hL(u,c)}(r.mapValue,e.mapValue);case 11:return function(s,a){if(s===lA.mapValue&&a===lA.mapValue)return 0;if(s===lA.mapValue)return 1;if(a===lA.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),u=a.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let h=0;h<l.length&&h<c.length;++h){const d=NM(l[h],c[h]);if(d!==0)return d;const f=S0(o[l[h]],u[c[h]]);if(f!==0)return f}return Ht(l.length,c.length)}(r.mapValue,e.mapValue);default:throw mt(23264,{he:t})}}function cL(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ht(r,e);const t=bd(r),n=bd(e),i=Ht(t.seconds,n.seconds);return i!==0?i:Ht(t.nanos,n.nanos)}function hL(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const s=S0(t[i],n[i]);if(s)return s}return Ht(t.length,n.length)}function T0(r){return DM(r)}function DM(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const n=bd(t);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return wd(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return at.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let n="[",i=!0;for(const s of t.values||[])i?i=!1:n+=",",n+=DM(s);return n+"]"}(r.arrayValue):"mapValue"in r?function(t){const n=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of n)s?s=!1:i+=",",i+=`${a}:${DM(t.fields[a])}`;return i+"}"}(r.mapValue):mt(61005,{value:r})}function oE(r){switch(xd(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=CC(r);return e?16+oE(e):16;case 5:return 2*r.stringValue.length;case 6:return wd(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,s)=>i+oE(s),0)}(r.arrayValue);case 10:case 11:return function(n){let i=0;return Od(n.fields,(s,a)=>{i+=s.length+oE(a)}),i}(r.mapValue);default:throw mt(13486,{value:r})}}function dL(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function MM(r){return!!r&&"integerValue"in r}function kk(r){return!!r&&"arrayValue"in r}function fL(r){return!!r&&"nullValue"in r}function mL(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function lE(r){return!!r&&"mapValue"in r}function fle(r){var t,n;return((n=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[lq])==null?void 0:n.stringValue)===uq}function Vb(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Od(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=Vb(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vb(r.arrayValue.values[t]);return e}return{...r}}function mle(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===dle}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this.value=e}static empty(){return new js({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!lE(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vb(t)}setAll(e){let t=Ni.emptyPath(),n={},i=[];e.forEach((a,o)=>{if(!t.isImmediateParentOf(o)){const l=this.getFieldsMap(t);this.applyChanges(l,n,i),n={},i=[],t=o.popLast()}a?n[o.lastSegment()]=Vb(a):i.push(o.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,i)}delete(e){const t=this.field(e.popLast());lE(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];lE(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Od(t,(i,s)=>e[i]=s);for(const i of n)delete e[i]}clone(){return new js(Vb(this.value))}}function cq(r){const e=[];return Od(r.fields,(t,n)=>{const i=new Ni([t]);if(lE(n)){const s=cq(n.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Ta(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,t,n,i,s,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Ji(e,0,wt.min(),wt.min(),wt.min(),js.empty(),0)}static newFoundDocument(e,t,n,i){return new Ji(e,1,t,wt.min(),n,i,0)}static newNoDocument(e,t){return new Ji(e,2,t,wt.min(),wt.min(),js.empty(),0)}static newUnknownDocument(e,t){return new Ji(e,3,t,wt.min(),wt.min(),js.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=js.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=js.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ji&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ji(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,t){this.position=e,this.inclusive=t}}function pL(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const s=e[i],a=r.position[i];if(s.field.isKeyField()?n=at.comparator(at.fromName(a.referenceValue),t.key):n=S0(a,t.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function gL(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Yl(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,t="asc"){this.field=e,this.dir=t}}function ple(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hq{}class Rn extends hq{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new vle(e,t,n):t==="array-contains"?new wle(e,n):t==="in"?new xle(e,n):t==="not-in"?new _le(e,n):t==="array-contains-any"?new Ale(e,n):new Rn(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new yle(e,n):new ble(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(S0(t,this.value)):t!==null&&xd(this.value)===xd(t)&&this.matchesComparison(S0(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return mt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yo extends hq{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Yo(e,t)}matches(e){return dq(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dq(r){return r.op==="and"}function fq(r){return gle(r)&&dq(r)}function gle(r){for(const e of r.filters)if(e instanceof Yo)return!1;return!0}function IM(r){if(r instanceof Rn)return r.field.canonicalString()+r.op.toString()+T0(r.value);if(fq(r))return r.filters.map(e=>IM(e)).join(",");{const e=r.filters.map(t=>IM(t)).join(",");return`${r.op}(${e})`}}function mq(r,e){return r instanceof Rn?function(n,i){return i instanceof Rn&&n.op===i.op&&n.field.isEqual(i.field)&&Yl(n.value,i.value)}(r,e):r instanceof Yo?function(n,i){return i instanceof Yo&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((s,a,o)=>s&&mq(a,i.filters[o]),!0):!1}(r,e):void mt(19439)}function pq(r){return r instanceof Rn?function(t){return`${t.field.canonicalString()} ${t.op} ${T0(t.value)}`}(r):r instanceof Yo?function(t){return t.op.toString()+" {"+t.getFilters().map(pq).join(" ,")+"}"}(r):"Filter"}class vle extends Rn{constructor(e,t,n){super(e,t,n),this.key=at.fromName(n.referenceValue)}matches(e){const t=at.comparator(e.key,this.key);return this.matchesComparison(t)}}class yle extends Rn{constructor(e,t){super(e,"in",t),this.keys=gq("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ble extends Rn{constructor(e,t){super(e,"not-in",t),this.keys=gq("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function gq(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(n=>at.fromName(n.referenceValue))}class wle extends Rn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return kk(t)&&_1(t.arrayValue,this.value)}}class xle extends Rn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&_1(this.value.arrayValue,t)}}class _le extends Rn{constructor(e,t){super(e,"not-in",t)}matches(e){if(_1(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!_1(this.value.arrayValue,t)}}class Ale extends Rn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!kk(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>_1(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ele{constructor(e,t=null,n=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function vL(r,e=null,t=[],n=[],i=null,s=null,a=null){return new Ele(r,e,t,n,i,s,a)}function Fk(r){const e=St(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>IM(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),TC(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>T0(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>T0(n)).join(",")),e.Te=t}return e.Te}function Ok(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!ple(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!mq(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!gL(r.startAt,e.startAt)&&gL(r.endAt,e.endAt)}function PM(r){return at.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e,t=null,n=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Sle(r,e,t,n,i,s,a,o){return new Y0(r,e,t,n,i,s,a,o)}function NC(r){return new Y0(r)}function yL(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function vq(r){return r.collectionGroup!==null}function Ub(r){const e=St(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Kn(Ni.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new A1(s,n))}),t.has(Ni.keyField().canonicalString())||e.Ie.push(new A1(Ni.keyField(),n))}return e.Ie}function ql(r){const e=St(r);return e.Ee||(e.Ee=Tle(e,Ub(r))),e.Ee}function Tle(r,e){if(r.limitType==="F")return vL(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new A1(i.field,s)});const t=r.endAt?new RS(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new RS(r.startAt.position,r.startAt.inclusive):null;return vL(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function RM(r,e){const t=r.filters.concat([e]);return new Y0(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function kS(r,e,t){return new Y0(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function DC(r,e){return Ok(ql(r),ql(e))&&r.limitType===e.limitType}function yq(r){return`${Fk(ql(r))}|lt:${r.limitType}`}function jp(r){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(i=>pq(i)).join(", ")}]`),TC(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>T0(i)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>T0(i)).join(",")),`Target(${n})`}(ql(r))}; limitType=${r.limitType})`}function MC(r,e){return e.isFoundDocument()&&function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):at.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(r,e)&&function(n,i){for(const s of Ub(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(r,e)&&function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0}(r,e)&&function(n,i){return!(n.startAt&&!function(a,o,l){const u=pL(a,o,l);return a.inclusive?u<=0:u<0}(n.startAt,Ub(n),i)||n.endAt&&!function(a,o,l){const u=pL(a,o,l);return a.inclusive?u>=0:u>0}(n.endAt,Ub(n),i))}(r,e)}function Cle(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function bq(r){return(e,t)=>{let n=!1;for(const i of Ub(r)){const s=Nle(i,e,t);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function Nle(r,e,t){const n=r.field.isKeyField()?at.comparator(e.key,t.key):function(s,a,o){const l=a.data.field(s),u=o.data.field(s);return l!==null&&u!==null?S0(l,u):mt(42886)}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return mt(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Od(this.inner,(t,n)=>{for(const[i,s]of n)e(i,s)})}isEmpty(){return rq(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dle=new rn(at.comparator);function Ac(){return Dle}const wq=new rn(at.comparator);function Zy(...r){let e=wq;for(const t of r)e=e.insert(t.key,t);return e}function xq(r){let e=wq;return r.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function _f(){return zb()}function _q(){return zb()}function zb(){return new mp(r=>r.toString(),(r,e)=>r.isEqual(e))}const Mle=new rn(at.comparator),Ile=new Kn(at.comparator);function Gt(...r){let e=Ile;for(const t of r)e=e.add(t);return e}const Ple=new Kn(Ht);function Rle(){return Ple}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:MS(e)?"-0":e}}function Aq(r){return{integerValue:""+r}}function Eq(r,e){return ole(e)?Aq(e):Bk(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this._=void 0}}function kle(r,e,t){return r instanceof E1?function(i,s){const a={fields:{[sq]:{stringValue:iq},[oq]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Rk(s)&&(s=CC(s)),s&&(a.fields[aq]=s),{mapValue:a}}(t,e):r instanceof S1?Tq(r,e):r instanceof T1?Cq(r,e):function(i,s){const a=Sq(i,s),o=bL(a)+bL(i.Ae);return MM(a)&&MM(i.Ae)?Aq(o):Bk(i.serializer,o)}(r,e)}function Fle(r,e,t){return r instanceof S1?Tq(r,e):r instanceof T1?Cq(r,e):t}function Sq(r,e){return r instanceof C1?function(n){return MM(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class E1 extends IC{}class S1 extends IC{constructor(e){super(),this.elements=e}}function Tq(r,e){const t=Nq(e);for(const n of r.elements)t.some(i=>Yl(i,n))||t.push(n);return{arrayValue:{values:t}}}class T1 extends IC{constructor(e){super(),this.elements=e}}function Cq(r,e){let t=Nq(e);for(const n of r.elements)t=t.filter(i=>!Yl(i,n));return{arrayValue:{values:t}}}class C1 extends IC{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function bL(r){return _n(r.integerValue||r.doubleValue)}function Nq(r){return kk(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dq{constructor(e,t){this.field=e,this.transform=t}}function Ole(r,e){return r.field.isEqual(e.field)&&function(n,i){return n instanceof S1&&i instanceof S1||n instanceof T1&&i instanceof T1?E0(n.elements,i.elements,Yl):n instanceof C1&&i instanceof C1?Yl(n.Ae,i.Ae):n instanceof E1&&i instanceof E1}(r.transform,e.transform)}class Ble{constructor(e,t){this.version=e,this.transformResults=t}}class ws{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ws}static exists(e){return new ws(void 0,e)}static updateTime(e){return new ws(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uE(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class PC{}function Mq(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new RC(r.key,ws.none()):new Ux(r.key,r.data,ws.none());{const t=r.data,n=js.empty();let i=new Kn(Ni.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?n.delete(s):n.set(s,a),i=i.add(s)}return new Bd(r.key,n,new Ta(i.toArray()),ws.none())}}function Lle(r,e,t){r instanceof Ux?function(i,s,a){const o=i.value.clone(),l=xL(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(r,e,t):r instanceof Bd?function(i,s,a){if(!uE(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=xL(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(Iq(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(r,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function jb(r,e,t,n){return r instanceof Ux?function(s,a,o,l){if(!uE(s.precondition,a))return o;const u=s.value.clone(),c=_L(s.fieldTransforms,l,a);return u.setAll(c),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(r,e,t,n):r instanceof Bd?function(s,a,o,l){if(!uE(s.precondition,a))return o;const u=_L(s.fieldTransforms,l,a),c=a.data;return c.setAll(Iq(s)),c.setAll(u),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(r,e,t,n):function(s,a,o){return uE(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(r,e,t)}function $le(r,e){let t=null;for(const n of r.fieldTransforms){const i=e.data.field(n.field),s=Sq(n.transform,i||null);s!=null&&(t===null&&(t=js.empty()),t.set(n.field,s))}return t||null}function wL(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&E0(n,i,(s,a)=>Ole(s,a))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ux extends PC{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Bd extends PC{constructor(e,t,n,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Iq(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function xL(r,e,t){const n=new Map;ar(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let i=0;i<t.length;i++){const s=r[i],a=s.transform,o=e.data.field(s.field);n.set(s.field,Fle(a,o,t[i]))}return n}function _L(r,e,t){const n=new Map;for(const i of r){const s=i.transform,a=t.data.field(i.field);n.set(i.field,kle(s,a,e))}return n}class RC extends PC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vle extends PC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ule{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Lle(s,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=jb(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=jb(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=_q();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=t.has(i.key)?null:o;const l=Mq(a,o);l!==null&&n.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(wt.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gt())}isEqual(e){return this.batchId===e.batchId&&E0(this.mutations,e.mutations,(t,n)=>wL(t,n))&&E0(this.baseMutations,e.baseMutations,(t,n)=>wL(t,n))}}class Lk{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){ar(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=function(){return Mle}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,n[a].version);return new Lk(e,t,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zle{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jle{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dn,Jt;function qle(r){switch(r){case Te.OK:return mt(64938);case Te.CANCELLED:case Te.UNKNOWN:case Te.DEADLINE_EXCEEDED:case Te.RESOURCE_EXHAUSTED:case Te.INTERNAL:case Te.UNAVAILABLE:case Te.UNAUTHENTICATED:return!1;case Te.INVALID_ARGUMENT:case Te.NOT_FOUND:case Te.ALREADY_EXISTS:case Te.PERMISSION_DENIED:case Te.FAILED_PRECONDITION:case Te.ABORTED:case Te.OUT_OF_RANGE:case Te.UNIMPLEMENTED:case Te.DATA_LOSS:return!0;default:return mt(15467,{code:r})}}function Pq(r){if(r===void 0)return _c("GRPC error has no .code"),Te.UNKNOWN;switch(r){case Dn.OK:return Te.OK;case Dn.CANCELLED:return Te.CANCELLED;case Dn.UNKNOWN:return Te.UNKNOWN;case Dn.DEADLINE_EXCEEDED:return Te.DEADLINE_EXCEEDED;case Dn.RESOURCE_EXHAUSTED:return Te.RESOURCE_EXHAUSTED;case Dn.INTERNAL:return Te.INTERNAL;case Dn.UNAVAILABLE:return Te.UNAVAILABLE;case Dn.UNAUTHENTICATED:return Te.UNAUTHENTICATED;case Dn.INVALID_ARGUMENT:return Te.INVALID_ARGUMENT;case Dn.NOT_FOUND:return Te.NOT_FOUND;case Dn.ALREADY_EXISTS:return Te.ALREADY_EXISTS;case Dn.PERMISSION_DENIED:return Te.PERMISSION_DENIED;case Dn.FAILED_PRECONDITION:return Te.FAILED_PRECONDITION;case Dn.ABORTED:return Te.ABORTED;case Dn.OUT_OF_RANGE:return Te.OUT_OF_RANGE;case Dn.UNIMPLEMENTED:return Te.UNIMPLEMENTED;case Dn.DATA_LOSS:return Te.DATA_LOSS;default:return mt(39323,{code:r})}}(Jt=Dn||(Dn={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hle(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gle=new cd([4294967295,4294967295],0);function AL(r){const e=Hle().encode(r),t=new Hj;return t.update(e),new Uint8Array(t.digest())}function EL(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new cd([t,n],0),new cd([i,s],0)]}class $k{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new eb(`Invalid padding: ${t}`);if(n<0)throw new eb(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new eb(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new eb(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=cd.fromNumber(this.ge)}ye(e,t,n){let i=e.add(t.multiply(cd.fromNumber(n)));return i.compare(Gle)===1&&(i=new cd([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=AL(e),[n,i]=EL(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(n,i,s);if(!this.we(a))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new $k(s,i,t);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.ge===0)return;const t=AL(e),[n,i]=EL(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(n,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class eb extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,t,n,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,zx.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new kC(wt.min(),i,new rn(Ht),Ac(),Gt())}}class zx{constructor(e,t,n,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new zx(n,t,Gt(),Gt(),Gt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,t,n,i){this.be=e,this.removedTargetIds=t,this.key=n,this.De=i}}class Rq{constructor(e,t){this.targetId=e,this.Ce=t}}class kq{constructor(e,t,n=Fi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class SL{constructor(){this.ve=0,this.Fe=TL(),this.Me=Fi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Gt(),t=Gt(),n=Gt();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:mt(38017,{changeType:s})}}),new zx(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=TL()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ar(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Wle{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ac(),this.Je=uA(),this.He=uA(),this.Ye=new rn(Ht)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:mt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((n,i)=>{this.rt(i)&&t(i)})}st(e){const t=e.targetId,n=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(PM(s))if(n===0){const a=new at(s.path);this.et(t,a,Ji.newNoDocument(a,wt.min()))}else ar(n===1,20013,{expectedCount:n});else{const a=this._t(t);if(a!==n){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=t;let a,o;try{a=wd(n).toUint8Array()}catch(l){if(l instanceof nq)return A0("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new $k(a,i,s)}catch(l){return A0(l instanceof eb?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let i=0;return n.forEach(s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(t,s,null),i++)}),i}Tt(e){const t=new Map;this.ze.forEach((s,a)=>{const o=this.ot(a);if(o){if(s.current&&PM(o.target)){const l=new at(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,Ji.newNoDocument(l,e))}s.Be&&(t.set(a,s.ke()),s.qe())}});let n=Gt();this.He.forEach((s,a)=>{let o=!0;a.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const i=new kC(e,t,this.Ye,this.je,n);return this.je=Ac(),this.Je=uA(),this.He=uA(),this.Ye=new rn(Ht),i}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new SL,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Kn(Ht),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Kn(Ht),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||We("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new SL),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function uA(){return new rn(at.comparator)}function TL(){return new rn(at.comparator)}const Kle={asc:"ASCENDING",desc:"DESCENDING"},Xle={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Yle={and:"AND",or:"OR"};class Qle{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function kM(r,e){return r.useProto3Json||TC(e)?e:{value:e}}function FS(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fq(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function Jle(r,e){return FS(r,e.toTimestamp())}function Hl(r){return ar(!!r,49232),wt.fromTimestamp(function(t){const n=bd(t);return new $r(n.seconds,n.nanos)}(r))}function Vk(r,e){return FM(r,e).canonicalString()}function FM(r,e){const t=function(i){return new Rr(["projects",i.projectId,"databases",i.database])}(r).child("documents");return e===void 0?t:t.child(e)}function Oq(r){const e=Rr.fromString(r);return ar(Uq(e),10190,{key:e.toString()}),e}function OM(r,e){return Vk(r.databaseId,e.path)}function M2(r,e){const t=Oq(e);if(t.get(1)!==r.databaseId.projectId)throw new qe(Te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new qe(Te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new at(Lq(t))}function Bq(r,e){return Vk(r.databaseId,e)}function Zle(r){const e=Oq(r);return e.length===4?Rr.emptyPath():Lq(e)}function BM(r){return new Rr(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Lq(r){return ar(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function CL(r,e,t){return{name:OM(r,e),fields:t.value.mapValue.fields}}function eue(r,e){let t;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:mt(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(ar(c===void 0||typeof c=="string",58123),Fi.fromBase64String(c||"")):(ar(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),Fi.fromUint8Array(c||new Uint8Array))}(r,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(u){const c=u.code===void 0?Te.UNKNOWN:Pq(u.code);return new qe(c,u.message||"")}(a);t=new kq(n,i,s,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=M2(r,n.document.name),s=Hl(n.document.updateTime),a=n.document.createTime?Hl(n.document.createTime):wt.min(),o=new js({mapValue:{fields:n.document.fields}}),l=Ji.newFoundDocument(i,s,a,o),u=n.targetIds||[],c=n.removedTargetIds||[];t=new cE(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=M2(r,n.document),s=n.readTime?Hl(n.readTime):wt.min(),a=Ji.newNoDocument(i,s),o=n.removedTargetIds||[];t=new cE([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=M2(r,n.document),s=n.removedTargetIds||[];t=new cE([],s,i,null)}else{if(!("filter"in e))return mt(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,a=new jle(i,s),o=n.targetId;t=new Rq(o,a)}}return t}function tue(r,e){let t;if(e instanceof Ux)t={update:CL(r,e.key,e.value)};else if(e instanceof RC)t={delete:OM(r,e.key)};else if(e instanceof Bd)t={update:CL(r,e.key,e.data),updateMask:cue(e.fieldMask)};else{if(!(e instanceof Vle))return mt(16599,{Vt:e.type});t={verify:OM(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(s,a){const o=a.transform;if(o instanceof E1)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof S1)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof T1)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof C1)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw mt(20930,{transform:a.transform})}(0,n))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Jle(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:mt(27497)}(r,e.precondition)),t}function rue(r,e){return r&&r.length>0?(ar(e!==void 0,14353),r.map(t=>function(i,s){let a=i.updateTime?Hl(i.updateTime):Hl(s);return a.isEqual(wt.min())&&(a=Hl(s)),new Ble(a,i.transformResults||[])}(t,e))):[]}function nue(r,e){return{documents:[Bq(r,e.path)]}}function iue(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=Bq(r,i);const s=function(u){if(u.length!==0)return Vq(Yo.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const a=function(u){if(u.length!==0)return u.map(c=>function(d){return{field:qp(d.field),direction:oue(d.dir)}}(c))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const o=kM(r,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:t,parent:i}}function sue(r){let e=Zle(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){ar(n===1,65062);const c=t.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];t.where&&(s=function(h){const d=$q(h);return d instanceof Yo&&fq(d)?d.getFilters():[d]}(t.where));let a=[];t.orderBy&&(a=function(h){return h.map(d=>function(p){return new A1(Hp(p.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(t.orderBy));let o=null;t.limit&&(o=function(h){let d;return d=typeof h=="object"?h.value:h,TC(d)?null:d}(t.limit));let l=null;t.startAt&&(l=function(h){const d=!!h.before,f=h.values||[];return new RS(f,d)}(t.startAt));let u=null;return t.endAt&&(u=function(h){const d=!h.before,f=h.values||[];return new RS(f,d)}(t.endAt)),Sle(e,i,a,s,o,"F",l,u)}function aue(r,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mt(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $q(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Hp(t.unaryFilter.field);return Rn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Hp(t.unaryFilter.field);return Rn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Hp(t.unaryFilter.field);return Rn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Hp(t.unaryFilter.field);return Rn.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return mt(61313);default:return mt(60726)}}(r):r.fieldFilter!==void 0?function(t){return Rn.create(Hp(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return mt(58110);default:return mt(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Yo.create(t.compositeFilter.filters.map(n=>$q(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return mt(1026)}}(t.compositeFilter.op))}(r):mt(30097,{filter:r})}function oue(r){return Kle[r]}function lue(r){return Xle[r]}function uue(r){return Yle[r]}function qp(r){return{fieldPath:r.canonicalString()}}function Hp(r){return Ni.fromServerFormat(r.fieldPath)}function Vq(r){return r instanceof Rn?function(t){if(t.op==="=="){if(mL(t.value))return{unaryFilter:{field:qp(t.field),op:"IS_NAN"}};if(fL(t.value))return{unaryFilter:{field:qp(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(mL(t.value))return{unaryFilter:{field:qp(t.field),op:"IS_NOT_NAN"}};if(fL(t.value))return{unaryFilter:{field:qp(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qp(t.field),op:lue(t.op),value:t.value}}}(r):r instanceof Yo?function(t){const n=t.getFilters().map(i=>Vq(i));return n.length===1?n[0]:{compositeFilter:{op:uue(t.op),filters:n}}}(r):mt(54877,{filter:r})}function cue(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Uq(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,t,n,i,s=wt.min(),a=wt.min(),o=Fi.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Yh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Yh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hue{constructor(e){this.yt=e}}function due(r){const e=sue({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?kS(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fue{constructor(){this.Cn=new mue}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ce.resolve()}getCollectionParents(e,t){return Ce.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ce.resolve()}deleteFieldIndex(e,t){return Ce.resolve()}deleteAllFieldIndexes(e){return Ce.resolve()}createTargetIndexes(e,t){return Ce.resolve()}getDocumentsMatchingTarget(e,t){return Ce.resolve(null)}getIndexType(e,t){return Ce.resolve(0)}getFieldIndexes(e,t){return Ce.resolve([])}getNextCollectionGroupToUpdate(e){return Ce.resolve(null)}getMinOffset(e,t){return Ce.resolve(yd.min())}getMinOffsetFromCollectionGroup(e,t){return Ce.resolve(yd.min())}updateCollectionGroup(e,t,n){return Ce.resolve()}updateIndexEntries(e,t){return Ce.resolve()}}class mue{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Kn(Rr.comparator),s=!i.has(n);return this.index[t]=i.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Kn(Rr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zq=41943040;class Vs{static withCacheSize(e){return new Vs(e,Vs.DEFAULT_COLLECTION_PERCENTILE,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vs.DEFAULT_COLLECTION_PERCENTILE=10,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vs.DEFAULT=new Vs(zq,Vs.DEFAULT_COLLECTION_PERCENTILE,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vs.DISABLED=new Vs(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new C0(0)}static cr(){return new C0(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL="LruGarbageCollector",pue=1048576;function ML([r,e],[t,n]){const i=Ht(r,t);return i===0?Ht(e,n):i}class gue{constructor(e){this.Ir=e,this.buffer=new Kn(ML),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();ML(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vue{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){We(DL,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){X0(t)?We(DL,"Ignoring IndexedDB error during garbage collection: ",t):await K0(t)}await this.Vr(3e5)})}}class yue{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return Ce.resolve(SC.ce);const n=new gue(t);return this.mr.forEachTarget(e,i=>n.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>n.Ar(i))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(We("LruGarbageCollector","Garbage collection skipped; disabled"),Ce.resolve(NL)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(We("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),NL):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,i,s,a,o,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(We("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,a=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(n=h,o=Date.now(),this.removeTargets(e,n,t))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(u=Date.now(),zp()<=qt.DEBUG&&We("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-c}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),Ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function bue(r,e){return new yue(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wue{constructor(){this.changes=new mp(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ji.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?Ce.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xue{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ue{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(n!==null&&jb(n.mutation,i,Ta.empty(),$r.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,Gt()).next(()=>n))}getLocalViewOfDocuments(e,t,n=Gt()){const i=_f();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,n).next(s=>{let a=Zy();return s.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const n=_f();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Gt()))}populateOverlays(e,t,n){const i=[];return n.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{t.set(a,o)})})}computeViews(e,t,n,i){let s=Ac();const a=zb(),o=function(){return zb()}();return t.forEach((l,u)=>{const c=n.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof Bd)?s=s.insert(u.key,u):c!==void 0?(a.set(u.key,c.mutation.getFieldMask()),jb(c.mutation,u,c.mutation.getFieldMask(),$r.now())):a.set(u.key,Ta.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>a.set(u,c)),t.forEach((u,c)=>o.set(u,new xue(c,a.get(u)??null))),o))}recalculateAndSaveOverlays(e,t){const n=zb();let i=new rn((a,o)=>a-o),s=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const o of a)o.keys().forEach(l=>{const u=t.get(l);if(u===null)return;let c=n.get(l)||Ta.empty();c=o.applyToLocalView(u,c),n.set(l,c);const h=(i.get(o.batchId)||Gt()).add(l);i=i.insert(o.batchId,h)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,c=l.value,h=_q();c.forEach(d=>{if(!s.has(d)){const f=Mq(t.get(d),n.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,h))}return Ce.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,i){return function(a){return at.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vq(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-s.size):Ce.resolve(_f());let o=b1,l=s;return a.next(u=>Ce.forEach(u,(c,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),s.get(c)?Ce.resolve():this.remoteDocumentCache.getEntry(e,c).next(d=>{l=l.insert(c,d)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Gt())).next(c=>({batchId:o,changes:xq(c)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new at(t)).next(n=>{let i=Zy();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const s=t.collectionGroup;let a=Zy();return this.indexManager.getCollectionParents(e,s).next(o=>Ce.forEach(o,l=>{const u=function(h,d){return new Y0(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,i).next(c=>{c.forEach((h,d)=>{a=a.insert(h,d)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,i))).next(a=>{s.forEach((l,u)=>{const c=u.getKey();a.get(c)===null&&(a=a.insert(c,Ji.newInvalidDocument(c)))});let o=Zy();return a.forEach((l,u)=>{const c=s.get(l);c!==void 0&&jb(c.mutation,u,Ta.empty(),$r.now()),MC(t,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aue{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ce.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Hl(i.createTime)}}(t)),Ce.resolve()}getNamedQuery(e,t){return Ce.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:due(i.bundledQuery),readTime:Hl(i.readTime)}}(t)),Ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eue{constructor(){this.overlays=new rn(at.comparator),this.qr=new Map}getOverlay(e,t){return Ce.resolve(this.overlays.get(t))}getOverlays(e,t){const n=_f();return Ce.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&n.set(i,s)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((i,s)=>{this.St(e,t,s)}),Ce.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),Ce.resolve()}getOverlaysForCollection(e,t,n){const i=_f(),s=t.length+1,a=new at(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>n&&i.set(l.getKey(),l)}return Ce.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let s=new rn((u,c)=>u-c);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>n){let c=s.get(u.largestBatchId);c===null&&(c=_f(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const o=_f(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>o.set(u,c)),!(o.size()>=i)););return Ce.resolve(o)}St(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new zle(t,n));let s=this.qr.get(t);s===void 0&&(s=Gt(),this.qr.set(t,s)),this.qr.set(t,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sue{constructor(){this.sessionToken=Fi.EMPTY_BYTE_STRING}getSessionToken(e){return Ce.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(){this.Qr=new Kn(di.$r),this.Ur=new Kn(di.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new di(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.Gr(new di(e,t))}zr(e,t){e.forEach(n=>this.removeReference(n,t))}jr(e){const t=new at(new Rr([])),n=new di(t,e),i=new di(t,e+1),s=[];return this.Ur.forEachInRange([n,i],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new at(new Rr([])),n=new di(t,e),i=new di(t,e+1);let s=Gt();return this.Ur.forEachInRange([n,i],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new di(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class di{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return at.comparator(e.key,t.key)||Ht(e.Yr,t.Yr)}static Kr(e,t){return Ht(e.Yr,t.Yr)||at.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tue{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Kn(di.$r)}checkEmpty(e){return Ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Ule(s,t,n,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new di(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ce.resolve(a)}lookupMutationBatch(e,t){return Ce.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.ei(n),s=i<0?0:i;return Ce.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ce.resolve(this.mutationQueue.length===0?Pk:this.tr-1)}getAllMutationBatches(e){return Ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new di(t,0),i=new di(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,i],a=>{const o=this.Xr(a.Yr);s.push(o)}),Ce.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Kn(Ht);return t.forEach(i=>{const s=new di(i,0),a=new di(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],o=>{n=n.add(o.Yr)})}),Ce.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let s=n;at.isDocumentKey(s)||(s=s.child(""));const a=new di(new at(s),0);let o=new Kn(Ht);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!n.isPrefixOf(u)&&(u.length===i&&(o=o.add(l.Yr)),!0)},a),Ce.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(n=>{const i=this.Xr(n);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ar(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Ce.forEach(t.mutations,i=>{const s=new di(i.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new di(t,0),i=this.Zr.firstAfterOrEqual(n);return Ce.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ce.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cue{constructor(e){this.ri=e,this.docs=function(){return new rn(at.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),s=i?i.size:0,a=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ce.resolve(n?n.document.mutableCopy():Ji.newInvalidDocument(t))}getEntries(e,t){let n=Ac();return t.forEach(i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():Ji.newInvalidDocument(i))}),Ce.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let s=Ac();const a=t.path,o=new at(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||nle(rle(c),n)<=0||(i.has(c.key)||MC(t,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Ce.resolve(s)}getAllFromCollectionGroup(e,t,n,i){mt(9500)}ii(e,t){return Ce.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new Nue(this)}getSize(e){return Ce.resolve(this.size)}}class Nue extends wue{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)}),Ce.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Due{constructor(e){this.persistence=e,this.si=new mp(t=>Fk(t),Ok),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.oi=0,this._i=new Uk,this.targetCount=0,this.ai=C0.ur()}forEachTarget(e,t){return this.si.forEach((n,i)=>t(i)),Ce.resolve()}getLastRemoteSnapshotVersion(e){return Ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ce.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Ce.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new C0(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ce.resolve()}updateTargetData(e,t){return this.Pr(t),Ce.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ce.resolve()}removeTargets(e,t,n){let i=0;const s=[];return this.si.forEach((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),Ce.waitFor(s).next(()=>i)}getTargetCount(e){return Ce.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Ce.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Ce.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),Ce.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ce.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Ce.resolve(n)}containsKey(e,t){return Ce.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jq{constructor(e,t){this.ui={},this.overlays={},this.ci=new SC(0),this.li=!1,this.li=!0,this.hi=new Sue,this.referenceDelegate=e(this),this.Pi=new Due(this),this.indexManager=new fue,this.remoteDocumentCache=function(i){return new Cue(i)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new hue(t),this.Ii=new Aue(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Eue,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Tue(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){We("MemoryPersistence","Starting transaction:",e);const i=new Mue(this.ci.next());return this.referenceDelegate.Ei(),n(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return Ce.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Mue extends sle{constructor(e){super(),this.currentSequenceNumber=e}}class zk{constructor(e){this.persistence=e,this.Ri=new Uk,this.Vi=null}static mi(e){return new zk(e)}get fi(){if(this.Vi)return this.Vi;throw mt(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Ce.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Ce.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ce.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ce.forEach(this.fi,n=>{const i=at.fromPath(n);return this.gi(e,i).next(s=>{s||t.removeEntry(i,wt.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Ce.or([()=>Ce.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class OS{constructor(e,t){this.persistence=e,this.pi=new mp(n=>lle(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=bue(this,t)}static mi(e,t){return new OS(e,t)}Ei(){}di(e){return Ce.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(i=>n+i))}wr(e){let t=0;return this.pr(e,n=>{t++}).next(()=>t)}pr(e,t){return Ce.forEach(this.pi,(n,i)=>this.br(e,n,i).next(s=>s?Ce.resolve():t(i)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,a=>this.br(e,a,t).next(o=>{o||(n++,s.removeEntry(a,wt.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ce.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ce.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ce.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ce.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=oE(e.data.value)),t}br(e,t,n){return Ce.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return Ce.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=i}static As(e,t){let n=Gt(),i=Gt();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new jk(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iue{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pue{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Tae()?8:ale(rs())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,i){const s={result:null};return this.ys(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(e,t,i,n).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new Iue;return this.Ss(e,t,a).next(o=>{if(s.result=o,this.Vs)return this.bs(e,t,a,o.size)})}).next(()=>s.result)}bs(e,t,n,i){return n.documentReadCount<this.fs?(zp()<=qt.DEBUG&&We("QueryEngine","SDK will not create cache indexes for query:",jp(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ce.resolve()):(zp()<=qt.DEBUG&&We("QueryEngine","Query:",jp(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(zp()<=qt.DEBUG&&We("QueryEngine","The SDK decides to create cache indexes for query:",jp(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ql(t))):Ce.resolve())}ys(e,t){if(yL(t))return Ce.resolve(null);let n=ql(t);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=kS(t,null,"F"),n=ql(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const a=Gt(...s);return this.ps.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const u=this.Ds(t,o);return this.Cs(t,u,a,l.readTime)?this.ys(e,kS(t,null,"F")):this.vs(e,u,t,l)}))})))}ws(e,t,n,i){return yL(t)||i.isEqual(wt.min())?Ce.resolve(null):this.ps.getDocuments(e,n).next(s=>{const a=this.Ds(t,s);return this.Cs(t,a,n,i)?Ce.resolve(null):(zp()<=qt.DEBUG&&We("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),jp(t)),this.vs(e,a,t,tle(i,b1)).next(o=>o))})}Ds(e,t){let n=new Kn(bq(e));return t.forEach((i,s)=>{MC(e,s)&&(n=n.add(s))}),n}Cs(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,n){return zp()<=qt.DEBUG&&We("QueryEngine","Using full collection scan to execute query:",jp(t)),this.ps.getDocumentsMatchingQuery(e,t,yd.min(),n)}vs(e,t,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk="LocalStore",Rue=3e8;class kue{constructor(e,t,n,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new rn(Ht),this.xs=new mp(s=>Fk(s),Ok),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _ue(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Fue(r,e,t,n){return new kue(r,e,t,n)}async function qq(r,e){const t=St(r);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next(s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(n))).next(s=>{const a=[],o=[];let l=Gt();for(const u of i){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return t.localDocuments.getDocuments(n,l).next(u=>({Ls:u,removedBatchIds:a,addedBatchIds:o}))})})}function Oue(r,e){const t=St(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,u,c){const h=u.batch,d=h.keys();let f=Ce.resolve();return d.forEach(p=>{f=f.next(()=>c.getEntry(l,p)).next(g=>{const b=u.docVersions.get(p);ar(b!==null,48541),g.version.compareTo(b)<0&&(h.applyToRemoteDocument(g,u),g.isValidDocument()&&(g.setReadTime(u.commitVersion),c.addEntry(g)))})}),f.next(()=>o.mutationQueue.removeMutationBatch(l,h))}(t,n,e,s).next(()=>s.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=Gt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(n,i))})}function Hq(r){const e=St(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function Bue(r,e){const t=St(r),n=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const o=[];e.targetChanges.forEach((c,h)=>{const d=i.get(h);if(!d)return;o.push(t.Pi.removeMatchingKeys(s,c.removedDocuments,h).next(()=>t.Pi.addMatchingKeys(s,c.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(Fi.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,n)),i=i.insert(h,f),function(g,b,v){return g.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=Rue?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(d,f,c)&&o.push(t.Pi.updateTargetData(s,f))});let l=Ac(),u=Gt();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(s,c))}),o.push(Lue(s,a,e.documentUpdates).next(c=>{l=c.ks,u=c.qs})),!n.isEqual(wt.min())){const c=t.Pi.getLastRemoteSnapshotVersion(s).next(h=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(c)}return Ce.waitFor(o).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(t.Ms=i,s))}function Lue(r,e,t){let n=Gt(),i=Gt();return t.forEach(s=>n=n.add(s)),e.getEntries(r,n).next(s=>{let a=Ac();return t.forEach((o,l)=>{const u=s.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(wt.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):We(qk,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{ks:a,qs:i}})}function $ue(r,e){const t=St(r);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=Pk),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Vue(r,e){const t=St(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return t.Pi.getTargetData(n,e).next(s=>s?(i=s,Ce.resolve(i)):t.Pi.allocateTargetId(n).next(a=>(i=new Yh(e,a,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=t.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n})}async function LM(r,e,t){const n=St(r),i=n.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",s,a=>n.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!X0(a))throw a;We(qk,`Failed to update sequence numbers for target ${e}: ${a}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function IL(r,e,t){const n=St(r);let i=wt.min(),s=Gt();return n.persistence.runTransaction("Execute query","readwrite",a=>function(l,u,c){const h=St(l),d=h.xs.get(c);return d!==void 0?Ce.resolve(h.Ms.get(d)):h.Pi.getTargetData(u,c)}(n,a,ql(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{s=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(a,e,t?i:wt.min(),t?s:Gt())).next(o=>(Uue(n,Cle(e),o),{documents:o,Qs:s})))}function Uue(r,e,t){let n=r.Os.get(e)||wt.min();t.forEach((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),r.Os.set(e,n)}class PL{constructor(){this.activeTargetIds=Rle()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zue{constructor(){this.Mo=new PL,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new PL,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jue{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL="ConnectivityMonitor";class kL{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){We(RL,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){We(RL,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cA=null;function $M(){return cA===null?cA=function(){return 268435456+Math.round(2147483648*Math.random())}():cA++,"0x"+cA.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="RestConnection",que={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Hue{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===IS?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,t,n,i,s){const a=$M(),o=this.zo(e,t.toUriEncodedString());We(I2,`Sending RPC '${e}' ${a}:`,o,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(o),c=dp(u);return this.Jo(e,o,l,n,c).then(h=>(We(I2,`Received RPC '${e}' ${a}: `,h),h),h=>{throw A0(I2,`RPC '${e}' ${a} failed with error: `,h,"url: ",o,"request:",n),h})}Ho(e,t,n,i,s,a){return this.Go(e,t,n,i,s)}jo(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+W0}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),n&&n.headers.forEach((i,s)=>e[s]=i)}zo(e,t){const n=que[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gue{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui="WebChannelConnection";class Wue extends Hue{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,i,s){const a=$M();return new Promise((o,l)=>{const u=new Gj;u.setWithCredentials(!0),u.listenOnce(Wj.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case aE.NO_ERROR:const h=u.getResponseJson();We(Ui,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),o(h);break;case aE.TIMEOUT:We(Ui,`RPC '${e}' ${a} timed out`),l(new qe(Te.DEADLINE_EXCEEDED,"Request time out"));break;case aE.HTTP_ERROR:const d=u.getStatus();if(We(Ui,`RPC '${e}' ${a} failed with status:`,d,"response text:",u.getResponseText()),d>0){let f=u.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f==null?void 0:f.error;if(p&&p.status&&p.message){const g=function(v){const w=v.toLowerCase().replace(/_/g,"-");return Object.values(Te).indexOf(w)>=0?w:Te.UNKNOWN}(p.status);l(new qe(g,p.message))}else l(new qe(Te.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new qe(Te.UNAVAILABLE,"Connection failed."));break;default:mt(9055,{l_:e,streamId:a,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{We(Ui,`RPC '${e}' ${a} completed.`)}});const c=JSON.stringify(i);We(Ui,`RPC '${e}' ${a} sending request:`,i),u.send(t,"POST",c,n,15)})}T_(e,t,n){const i=$M(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Yj(),o=Xj(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,n),l.encodeInitMessageHeaders=!0;const c=s.join("");We(Ui,`Creating RPC '${e}' stream ${i}: ${c}`,l);const h=a.createWebChannel(c,l);this.I_(h);let d=!1,f=!1;const p=new Gue({Yo:b=>{f?We(Ui,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(d||(We(Ui,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),We(Ui,`RPC '${e}' stream ${i} sending:`,b),h.send(b))},Zo:()=>h.close()}),g=(b,v,w)=>{b.listen(v,y=>{try{w(y)}catch(A){setTimeout(()=>{throw A},0)}})};return g(h,Jy.EventType.OPEN,()=>{f||(We(Ui,`RPC '${e}' stream ${i} transport opened.`),p.o_())}),g(h,Jy.EventType.CLOSE,()=>{f||(f=!0,We(Ui,`RPC '${e}' stream ${i} transport closed`),p.a_(),this.E_(h))}),g(h,Jy.EventType.ERROR,b=>{f||(f=!0,A0(Ui,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),p.a_(new qe(Te.UNAVAILABLE,"The operation could not be completed")))}),g(h,Jy.EventType.MESSAGE,b=>{var v;if(!f){const w=b.data[0];ar(!!w,16349);const y=w,A=(y==null?void 0:y.error)||((v=y[0])==null?void 0:v.error);if(A){We(Ui,`RPC '${e}' stream ${i} received error:`,A);const x=A.status;let _=function(C){const N=Dn[C];if(N!==void 0)return Pq(N)}(x),S=A.message;_===void 0&&(_=Te.INTERNAL,S="Unknown error status: "+x+" with message "+A.message),f=!0,p.a_(new qe(_,S)),h.close()}else We(Ui,`RPC '${e}' stream ${i} received:`,w),p.u_(w)}}),g(o,Kj.STAT_EVENT,b=>{b.stat===CM.PROXY?We(Ui,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===CM.NOPROXY&&We(Ui,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.__()},0),p}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function P2(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(r){return new Qle(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gq{constructor(e,t,n=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-n);i>0&&We("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL="PersistentStream";class Wq{constructor(e,t,n,i,s,a,o,l){this.Mi=e,this.S_=n,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Gq(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Te.RESOURCE_EXHAUSTED?(_c(t.toString()),_c("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.D_===t&&this.G_(n,i)},n=>{e(()=>{const i=new qe(Te.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{n(()=>this.z_(i))}),this.stream.onMessage(i=>{n(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return We(FL,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(We(FL,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Kue extends Wq{constructor(e,t,n,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=eue(this.serializer,e),n=function(s){if(!("targetChange"in s))return wt.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?wt.min():a.readTime?Hl(a.readTime):wt.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=BM(this.serializer),t.addTarget=function(s,a){let o;const l=a.target;if(o=PM(l)?{documents:nue(s,l)}:{query:iue(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=Fq(s,a.resumeToken);const u=kM(s,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(wt.min())>0){o.readTime=FS(s,a.snapshotVersion.toTimestamp());const u=kM(s,a.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const n=aue(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=BM(this.serializer),t.removeTarget=e,this.q_(t)}}class Xue extends Wq{constructor(e,t,n,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ar(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ar(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ar(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=rue(e.writeResults,e.commitTime),n=Hl(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=BM(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>tue(this.serializer,n))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yue{}class Que extends Yue{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new qe(Te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(e,FM(t,n),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new qe(Te.UNKNOWN,s.toString())})}Ho(e,t,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Ho(e,FM(t,n),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new qe(Te.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Jue{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_c(t),this.aa=!1):We("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="RemoteStore";class Zue{constructor(e,t,n,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{n.enqueueAndForget(async()=>{pp(this)&&(We(rp,"Restarting streams for network reachability change."),await async function(l){const u=St(l);u.Ea.add(4),await jx(u),u.Ra.set("Unknown"),u.Ea.delete(4),await OC(u)}(this))})}),this.Ra=new Jue(n,i)}}async function OC(r){if(pp(r))for(const e of r.da)await e(!0)}async function jx(r){for(const e of r.da)await e(!1)}function Kq(r,e){const t=St(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Kk(t)?Wk(t):Q0(t).O_()&&Gk(t,e))}function Hk(r,e){const t=St(r),n=Q0(t);t.Ia.delete(e),n.O_()&&Xq(t,e),t.Ia.size===0&&(n.O_()?n.L_():pp(t)&&t.Ra.set("Unknown"))}function Gk(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(wt.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Q0(r).Y_(e)}function Xq(r,e){r.Va.Ue(e),Q0(r).Z_(e)}function Wk(r){r.Va=new Wle({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Q0(r).start(),r.Ra.ua()}function Kk(r){return pp(r)&&!Q0(r).x_()&&r.Ia.size>0}function pp(r){return St(r).Ea.size===0}function Yq(r){r.Va=void 0}async function ece(r){r.Ra.set("Online")}async function tce(r){r.Ia.forEach((e,t)=>{Gk(r,e)})}async function rce(r,e){Yq(r),Kk(r)?(r.Ra.ha(e),Wk(r)):r.Ra.set("Unknown")}async function nce(r,e,t){if(r.Ra.set("Online"),e instanceof kq&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))}(r,e)}catch(n){We(rp,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await BS(r,n)}else if(e instanceof cE?r.Va.Ze(e):e instanceof Rq?r.Va.st(e):r.Va.tt(e),!t.isEqual(wt.min()))try{const n=await Hq(r.localStore);t.compareTo(n)>=0&&await function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.Ia.get(u);c&&s.Ia.set(u,c.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,u)=>{const c=s.Ia.get(l);if(!c)return;s.Ia.set(l,c.withResumeToken(Fi.EMPTY_BYTE_STRING,c.snapshotVersion)),Xq(s,l);const h=new Yh(c.target,l,u,c.sequenceNumber);Gk(s,h)}),s.remoteSyncer.applyRemoteEvent(o)}(r,t)}catch(n){We(rp,"Failed to raise snapshot:",n),await BS(r,n)}}async function BS(r,e,t){if(!X0(e))throw e;r.Ea.add(1),await jx(r),r.Ra.set("Offline"),t||(t=()=>Hq(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{We(rp,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await OC(r)})}function Qq(r,e){return e().catch(t=>BS(r,t,e))}async function BC(r){const e=St(r),t=_d(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Pk;for(;ice(e);)try{const i=await $ue(e.localStore,n);if(i===null){e.Ta.length===0&&t.L_();break}n=i.batchId,sce(e,i)}catch(i){await BS(e,i)}Jq(e)&&Zq(e)}function ice(r){return pp(r)&&r.Ta.length<10}function sce(r,e){r.Ta.push(e);const t=_d(r);t.O_()&&t.X_&&t.ea(e.mutations)}function Jq(r){return pp(r)&&!_d(r).x_()&&r.Ta.length>0}function Zq(r){_d(r).start()}async function ace(r){_d(r).ra()}async function oce(r){const e=_d(r);for(const t of r.Ta)e.ea(t.mutations)}async function lce(r,e,t){const n=r.Ta.shift(),i=Lk.from(n,e,t);await Qq(r,()=>r.remoteSyncer.applySuccessfulWrite(i)),await BC(r)}async function uce(r,e){e&&_d(r).X_&&await async function(n,i){if(function(a){return qle(a)&&a!==Te.ABORTED}(i.code)){const s=n.Ta.shift();_d(n).B_(),await Qq(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i)),await BC(n)}}(r,e),Jq(r)&&Zq(r)}async function OL(r,e){const t=St(r);t.asyncQueue.verifyOperationInProgress(),We(rp,"RemoteStore received new credentials");const n=pp(t);t.Ea.add(3),await jx(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await OC(t)}async function cce(r,e){const t=St(r);e?(t.Ea.delete(2),await OC(t)):e||(t.Ea.add(2),await jx(t),t.Ra.set("Unknown"))}function Q0(r){return r.ma||(r.ma=function(t,n,i){const s=St(t);return s.sa(),new Kue(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(r.datastore,r.asyncQueue,{Xo:ece.bind(null,r),t_:tce.bind(null,r),r_:rce.bind(null,r),H_:nce.bind(null,r)}),r.da.push(async e=>{e?(r.ma.B_(),Kk(r)?Wk(r):r.Ra.set("Unknown")):(await r.ma.stop(),Yq(r))})),r.ma}function _d(r){return r.fa||(r.fa=function(t,n,i){const s=St(t);return s.sa(),new Xue(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:ace.bind(null,r),r_:uce.bind(null,r),ta:oce.bind(null,r),na:lce.bind(null,r)}),r.da.push(async e=>{e?(r.fa.B_(),await BC(r)):(await r.fa.stop(),r.Ta.length>0&&(We(rp,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))})),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,t,n,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new oc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,s){const a=Date.now()+n,o=new Xk(e,t,a,i,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(Te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yk(r,e){if(_c("AsyncQueue",`${e}: ${r}`),X0(r))return new qe(Te.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{static emptySet(e){return new Fg(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||at.comparator(t.key,n.key):(t,n)=>at.comparator(t.key,n.key),this.keyedMap=Zy(),this.sortedSet=new rn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Fg;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(){this.ga=new rn(at.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):mt(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class N0{constructor(e,t,n,i,s,a,o,l,u){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,n,i,s){const a=[];return t.forEach(o=>{a.push({type:0,doc:o})}),new N0(e,t,Fg.emptySet(t),a,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&DC(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hce{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class dce{constructor(){this.queries=LL(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const i=St(t),s=i.queries;i.queries=LL(),s.forEach((a,o)=>{for(const l of o.Sa)l.onError(n)})})(this,new qe(Te.ABORTED,"Firestore shutting down"))}}function LL(){return new mp(r=>yq(r),DC)}async function Qk(r,e){const t=St(r);let n=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(n=2):(s=new hce,n=e.Da()?0:1);try{switch(n){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const o=Yk(a,`Initialization of query '${jp(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&Zk(t)}async function Jk(r,e){const t=St(r),n=e.query;let i=3;const s=t.queries.get(n);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function fce(r,e){const t=St(r);let n=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(n=!0);a.wa=i}}n&&Zk(t)}function mce(r,e,t){const n=St(r),i=n.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);n.queries.delete(e)}function Zk(r){r.Ca.forEach(e=>{e.next()})}var VM,$L;($L=VM||(VM={})).Ma="default",$L.Cache="cache";class eF{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new N0(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=N0.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==VM.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH{constructor(e){this.key=e}}class tH{constructor(e){this.key=e}}class pce{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Gt(),this.mutatedKeys=Gt(),this.eu=bq(e),this.tu=new Fg(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new BL,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,h)=>{const d=i.get(c),f=MC(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let b=!1;d&&f?d.data.isEqual(f.data)?p!==g&&(n.track({type:3,doc:f}),b=!0):this.su(d,f)||(n.track({type:2,doc:f}),b=!0,(l&&this.eu(f,l)>0||u&&this.eu(f,u)<0)&&(o=!0)):!d&&f?(n.track({type:0,doc:f}),b=!0):d&&!f&&(n.track({type:1,doc:d}),b=!0,(l||u)&&(o=!0)),b&&(f?(a=a.add(f),s=g?s.add(c):s.delete(c)):(a=a.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const c=this.query.limitType==="F"?a.last():a.first();a=a.delete(c.key),s=s.delete(c.key),n.track({type:1,doc:c})}return{tu:a,iu:n,Cs:o,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((c,h)=>function(f,p){const g=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt(20277,{Rt:b})}};return g(f)-g(p)}(c.type,h.type)||this.eu(c.doc,h.doc)),this.ou(n),i=i??!1;const o=t&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,a.length!==0||u?{snapshot:new N0(this.query,e.tu,s,a,e.mutatedKeys,l===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new BL,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Gt(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const t=[];return e.forEach(n=>{this.Xa.has(n)||t.push(new tH(n))}),this.Xa.forEach(n=>{e.has(n)||t.push(new eH(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=Gt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return N0.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const tF="SyncEngine";class gce{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class vce{constructor(e){this.key=e,this.hu=!1}}class yce{constructor(e,t,n,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new mp(o=>yq(o),DC),this.Iu=new Map,this.Eu=new Set,this.du=new rn(at.comparator),this.Au=new Map,this.Ru=new Uk,this.Vu={},this.mu=new Map,this.fu=C0.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function bce(r,e,t=!0){const n=oH(r);let i;const s=n.Tu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await rH(n,e,t,!0),i}async function wce(r,e){const t=oH(r);await rH(t,e,!0,!1)}async function rH(r,e,t,n){const i=await Vue(r.localStore,ql(e)),s=i.targetId,a=r.sharedClientState.addLocalQueryTarget(s,t);let o;return n&&(o=await xce(r,e,s,a==="current",i.resumeToken)),r.isPrimaryClient&&t&&Kq(r.remoteStore,i),o}async function xce(r,e,t,n,i){r.pu=(h,d,f)=>async function(g,b,v,w){let y=b.view.ru(v);y.Cs&&(y=await IL(g.localStore,b.query,!1).then(({documents:S})=>b.view.ru(S,y)));const A=w&&w.targetChanges.get(b.targetId),x=w&&w.targetMismatches.get(b.targetId)!=null,_=b.view.applyChanges(y,g.isPrimaryClient,A,x);return UL(g,b.targetId,_.au),_.snapshot}(r,h,d,f);const s=await IL(r.localStore,e,!0),a=new pce(e,s.Qs),o=a.ru(s.documents),l=zx.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),u=a.applyChanges(o,r.isPrimaryClient,l);UL(r,t,u.au);const c=new gce(e,t,a);return r.Tu.set(e,c),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),u.snapshot}async function _ce(r,e,t){const n=St(r),i=n.Tu.get(e),s=n.Iu.get(i.targetId);if(s.length>1)return n.Iu.set(i.targetId,s.filter(a=>!DC(a,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await LM(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),t&&Hk(n.remoteStore,i.targetId),UM(n,i.targetId)}).catch(K0)):(UM(n,i.targetId),await LM(n.localStore,i.targetId,!0))}async function Ace(r,e){const t=St(r),n=t.Tu.get(e),i=t.Iu.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),Hk(t.remoteStore,n.targetId))}async function Ece(r,e,t){const n=Ice(r);try{const i=await function(a,o){const l=St(a),u=$r.now(),c=o.reduce((f,p)=>f.add(p.key),Gt());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=Ac(),g=Gt();return l.Ns.getEntries(f,c).next(b=>{p=b,p.forEach((v,w)=>{w.isValidDocument()||(g=g.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,p)).next(b=>{h=b;const v=[];for(const w of o){const y=$le(w,h.get(w.key).overlayedDocument);y!=null&&v.push(new Bd(w.key,y,cq(y.value.mapValue),ws.exists(!0)))}return l.mutationQueue.addMutationBatch(f,u,v,o)}).next(b=>{d=b;const v=b.applyToLocalDocumentSet(h,g);return l.documentOverlayCache.saveOverlays(f,b.batchId,v)})}).then(()=>({batchId:d.batchId,changes:xq(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(a,o,l){let u=a.Vu[a.currentUser.toKey()];u||(u=new rn(Ht)),u=u.insert(o,l),a.Vu[a.currentUser.toKey()]=u}(n,i.batchId,t),await qx(n,i.changes),await BC(n.remoteStore)}catch(i){const s=Yk(i,"Failed to persist write");t.reject(s)}}async function nH(r,e){const t=St(r);try{const n=await Bue(t.localStore,e);e.targetChanges.forEach((i,s)=>{const a=t.Au.get(s);a&&(ar(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?ar(a.hu,14607):i.removedDocuments.size>0&&(ar(a.hu,42227),a.hu=!1))}),await qx(t,n,e)}catch(n){await K0(n)}}function VL(r,e,t){const n=St(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.Tu.forEach((s,a)=>{const o=a.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const l=St(a);l.onlineState=o;let u=!1;l.queries.forEach((c,h)=>{for(const d of h.Sa)d.va(o)&&(u=!0)}),u&&Zk(l)}(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Sce(r,e,t){const n=St(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.Au.get(e),s=i&&i.key;if(s){let a=new rn(at.comparator);a=a.insert(s,Ji.newNoDocument(s,wt.min()));const o=Gt().add(s),l=new kC(wt.min(),new Map,new rn(Ht),a,o);await nH(n,l),n.du=n.du.remove(s),n.Au.delete(e),rF(n)}else await LM(n.localStore,e,!1).then(()=>UM(n,e,t)).catch(K0)}async function Tce(r,e){const t=St(r),n=e.batch.batchId;try{const i=await Oue(t.localStore,e);sH(t,n,null),iH(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await qx(t,i)}catch(i){await K0(i)}}async function Cce(r,e,t){const n=St(r);try{const i=await function(a,o){const l=St(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,o).next(h=>(ar(h!==null,37113),c=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(n.localStore,e);sH(n,e,t),iH(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await qx(n,i)}catch(i){await K0(i)}}function iH(r,e){(r.mu.get(e)||[]).forEach(t=>{t.resolve()}),r.mu.delete(e)}function sH(r,e,t){const n=St(r);let i=n.Vu[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function UM(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach(n=>{r.Ru.containsKey(n)||aH(r,n)})}function aH(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Hk(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),rF(r))}function UL(r,e,t){for(const n of t)n instanceof eH?(r.Ru.addReference(n.key,e),Nce(r,n)):n instanceof tH?(We(tF,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||aH(r,n.key)):mt(19791,{wu:n})}function Nce(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(We(tF,"New document in limbo: "+t),r.Eu.add(n),rF(r))}function rF(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new at(Rr.fromString(e)),n=r.fu.next();r.Au.set(n,new vce(t)),r.du=r.du.insert(t,n),Kq(r.remoteStore,new Yh(ql(NC(t.path)),n,"TargetPurposeLimboResolution",SC.ce))}}async function qx(r,e,t){const n=St(r),i=[],s=[],a=[];n.Tu.isEmpty()||(n.Tu.forEach((o,l)=>{a.push(n.pu(l,e,t).then(u=>{var c;if((u||t)&&n.isPrimaryClient){const h=u?!u.fromCache:(c=t==null?void 0:t.targetChanges.get(l.targetId))==null?void 0:c.current;n.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=jk.As(l.targetId,u);s.push(h)}}))}),await Promise.all(a),n.Pu.H_(i),await async function(l,u){const c=St(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Ce.forEach(u,d=>Ce.forEach(d.Es,f=>c.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>Ce.forEach(d.ds,f=>c.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!X0(h))throw h;We(qk,"Failed to update sequence numbers: "+h)}for(const h of u){const d=h.targetId;if(!h.fromCache){const f=c.Ms.get(d),p=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(p);c.Ms=c.Ms.insert(d,g)}}}(n.localStore,s))}async function Dce(r,e){const t=St(r);if(!t.currentUser.isEqual(e)){We(tF,"User change. New user:",e.toKey());const n=await qq(t.localStore,e);t.currentUser=e,function(s,a){s.mu.forEach(o=>{o.forEach(l=>{l.reject(new qe(Te.CANCELLED,a))})}),s.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await qx(t,n.Ls)}}function Mce(r,e){const t=St(r),n=t.Au.get(e);if(n&&n.hu)return Gt().add(n.key);{let i=Gt();const s=t.Iu.get(e);if(!s)return i;for(const a of s){const o=t.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}function oH(r){const e=St(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=nH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mce.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Sce.bind(null,e),e.Pu.H_=fce.bind(null,e.eventManager),e.Pu.yu=mce.bind(null,e.eventManager),e}function Ice(r){const e=St(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Tce.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Cce.bind(null,e),e}class LS{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=FC(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Fue(this.persistence,new Pue,e.initialUser,this.serializer)}Cu(e){return new jq(zk.mi,this.serializer)}Du(e){return new zue}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}LS.provider={build:()=>new LS};class Pce extends LS{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ar(this.persistence.referenceDelegate instanceof OS,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new vue(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Vs.withCacheSize(this.cacheSizeBytes):Vs.DEFAULT;return new jq(n=>OS.mi(n,t),this.serializer)}}class zM{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>VL(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Dce.bind(null,this.syncEngine),await cce(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new dce}()}createDatastore(e){const t=FC(e.databaseInfo.databaseId),n=function(s){return new Wue(s)}(e.databaseInfo);return function(s,a,o,l){return new Que(s,a,o,l)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,i,s,a,o){return new Zue(n,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,t=>VL(this.syncEngine,t,0),function(){return kL.v()?new kL:new jue}())}createSyncEngine(e,t){return function(i,s,a,o,l,u,c){const h=new yce(i,s,a,o,l,u);return c&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=St(i);We(rp,"RemoteStore shutting down."),s.Ea.add(5),await jx(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}zM.provider={build:()=>new zM};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):_c("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="FirestoreClient";class Rce{constructor(e,t,n,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Yi.UNAUTHENTICATED,this.clientId=Ik.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async a=>{We(Ad,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(We(Ad,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new oc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Yk(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function R2(r,e){r.asyncQueue.verifyOperationInProgress(),We(Ad,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(async i=>{n.isEqual(i)||(await qq(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function zL(r,e){r.asyncQueue.verifyOperationInProgress();const t=await kce(r);We(Ad,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(n=>OL(e.remoteStore,n)),r.setAppCheckTokenChangeListener((n,i)=>OL(e.remoteStore,i)),r._onlineComponents=e}async function kce(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){We(Ad,"Using user provided OfflineComponentProvider");try{await R2(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Te.FAILED_PRECONDITION||i.code===Te.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;A0("Error using user provided cache. Falling back to memory cache: "+t),await R2(r,new LS)}}else We(Ad,"Using default OfflineComponentProvider"),await R2(r,new Pce(void 0));return r._offlineComponents}async function lH(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(We(Ad,"Using user provided OnlineComponentProvider"),await zL(r,r._uninitializedComponentsProvider._online)):(We(Ad,"Using default OnlineComponentProvider"),await zL(r,new zM))),r._onlineComponents}function Fce(r){return lH(r).then(e=>e.syncEngine)}async function $S(r){const e=await lH(r),t=e.eventManager;return t.onListen=bce.bind(null,e.syncEngine),t.onUnlisten=_ce.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=wce.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Ace.bind(null,e.syncEngine),t}function Oce(r,e,t={}){const n=new oc;return r.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,u){const c=new nF({next:d=>{c.Nu(),a.enqueueAndForget(()=>Jk(s,h));const f=d.docs.has(o);!f&&d.fromCache?u.reject(new qe(Te.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&l&&l.source==="server"?u.reject(new qe(Te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new eF(NC(o.path),c,{includeMetadataChanges:!0,qa:!0});return Qk(s,h)}(await $S(r),r.asyncQueue,e,t,n)),n.promise}function Bce(r,e,t={}){const n=new oc;return r.asyncQueue.enqueueAndForget(async()=>function(s,a,o,l,u){const c=new nF({next:d=>{c.Nu(),a.enqueueAndForget(()=>Jk(s,h)),d.fromCache&&l.source==="server"?u.reject(new qe(Te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new eF(o,c,{includeMetadataChanges:!0,qa:!0});return Qk(s,h)}(await $S(r),r.asyncQueue,e,t,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uH(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cH="firestore.googleapis.com",qL=!0;class HL{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new qe(Te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cH,this.ssl=qL}else this.host=e.host,this.ssl=e.ssl??qL;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zq;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pue)throw new qe(Te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ele("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uH(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new qe(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new qe(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new qe(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class LC{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new HL({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(Te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new qe(Te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new HL(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new qoe;switch(n.type){case"firstParty":return new Koe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new qe(Te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=jL.get(t);n&&(We("ComponentProvider","Removing Datastore"),jL.delete(t),n.terminate())}(this),Promise.resolve()}}function Lce(r,e,t,n={}){var u;r=bs(r,LC);const i=dp(e),s=r._getSettings(),a={...s,emulatorOptions:r._getEmulatorOptions()},o=`${e}:${t}`;i&&(Sk(`https://${o}`),Tk("Firestore",!0)),s.host!==cH&&s.host!==o&&A0("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:i,emulatorOptions:n};if(!Zm(l,a)&&(r._setSettings(l),n.mockUserToken)){let c,h;if(typeof n.mockUserToken=="string")c=n.mockUserToken,h=Yi.MOCK_USER;else{c=$j(n.mockUserToken,(u=r._app)==null?void 0:u.options.projectId);const d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new qe(Te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Yi(d)}r._authCredentials=new Hoe(new Jj(c,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ic(this.firestore,e,this._query)}}class pn{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}toJSON(){return{type:pn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Vx(t,pn._jsonSchema))return new pn(e,n||null,new at(Rr.fromString(t.referencePath)))}}pn._jsonSchemaVersion="firestore/documentReference/1.0",pn._jsonSchema={type:kn("string",pn._jsonSchemaVersion),referencePath:kn("string")};class hd extends Ic{constructor(e,t,n){super(e,t,NC(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new at(e))}withConverter(e){return new hd(this.firestore,e,this._path)}}function Ca(r,e,...t){if(r=Tn(r),Zj("collection","path",e),r instanceof LC){const n=Rr.fromString(e,...t);return iL(n),new hd(r,null,n)}{if(!(r instanceof pn||r instanceof hd))throw new qe(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Rr.fromString(e,...t));return iL(n),new hd(r.firestore,null,n)}}function Ql(r,e,...t){if(r=Tn(r),arguments.length===1&&(e=Ik.newId()),Zj("doc","path",e),r instanceof LC){const n=Rr.fromString(e,...t);return nL(n),new pn(r,null,new at(n))}{if(!(r instanceof pn||r instanceof hd))throw new qe(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Rr.fromString(e,...t));return nL(n),new pn(r.firestore,r instanceof hd?r.converter:null,new at(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL="AsyncQueue";class WL{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Gq(this,"async_queue_retry"),this._c=()=>{const n=P2();n&&We(GL,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=P2();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=P2();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new oc;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!X0(e))throw e;We(GL,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,_c("INTERNAL UNHANDLED ERROR: ",KL(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Xk.createAndSchedule(this,e,t,n,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&mt(47125,{Pc:KL(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function KL(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(r){return function(t,n){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1}(r,["next","error","complete"])}class Jl extends LC{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new WL,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new WL(e),this._firestoreClient=void 0,await e}}}function $ce(r,e){const t=typeof r=="object"?r:Dk(),n=typeof r=="string"?r:IS,i=AC(t,"firestore").getImmediate({identifier:n});if(!i._initialized){const s=Oj("firestore");s&&Lce(i,...s)}return i}function Hx(r){if(r._terminated)throw new qe(Te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Vce(r),r._firestoreClient}function Vce(r){var n,i,s;const e=r._freezeSettings(),t=function(o,l,u,c){return new hle(o,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,uH(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(r._databaseId,((n=r._app)==null?void 0:n.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new Rce(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this._byteString=e}static fromBase64String(e){try{return new so(Fi.fromBase64String(e))}catch(t){throw new qe(Te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new so(Fi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:so._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vx(e,so._jsonSchema))return so.fromBase64String(e.bytes)}}so._jsonSchemaVersion="firestore/bytes/1.0",so._jsonSchema={type:kn("string",so._jsonSchemaVersion),bytes:kn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new qe(Te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ni(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new qe(Te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new qe(Te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gl._jsonSchemaVersion}}static fromJSON(e){if(Vx(e,Gl._jsonSchema))return new Gl(e.latitude,e.longitude)}}Gl._jsonSchemaVersion="firestore/geoPoint/1.0",Gl._jsonSchema={type:kn("string",Gl._jsonSchemaVersion),latitude:kn("number"),longitude:kn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Wl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vx(e,Wl._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Wl(e.vectorValues);throw new qe(Te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Wl._jsonSchemaVersion="firestore/vectorValue/1.0",Wl._jsonSchema={type:kn("string",Wl._jsonSchemaVersion),vectorValues:kn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uce=/^__.*__$/;class zce{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Bd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ux(e,this.data,t,this.fieldTransforms)}}class hH{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Bd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dH(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt(40011,{Ac:r})}}class iF{constructor(e,t,n,i,s,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new iF({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return VS(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(dH(this.Ac)&&Uce.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class jce{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||FC(e)}Cc(e,t,n,i=!1){return new iF({Ac:e,methodName:t,Dc:n,path:Ni.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kx(r){const e=r._freezeSettings(),t=FC(r._databaseId);return new jce(r._databaseId,!!e.ignoreUndefinedProperties,t)}function sF(r,e,t,n,i,s={}){const a=r.Cc(s.merge||s.mergeFields?2:0,e,t,i);lF("Data must be an object, but it was:",a,n);const o=pH(n,a);let l,u;if(s.merge)l=new Ta(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const c=[];for(const h of s.mergeFields){const d=jM(e,h,t);if(!a.contains(d))throw new qe(Te.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);vH(c,d)||c.push(d)}l=new Ta(c),u=a.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=a.fieldTransforms;return new zce(new js(o),l,u)}class $C extends Wx{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $C}}class aF extends Wx{_toFieldTransform(e){return new Dq(e.path,new E1)}isEqual(e){return e instanceof aF}}class oF extends Wx{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new C1(e.serializer,Eq(e.serializer,this.Fc));return new Dq(e.path,t)}isEqual(e){return e instanceof oF&&this.Fc===e.Fc}}function fH(r,e,t,n){const i=r.Cc(1,e,t);lF("Data must be an object, but it was:",i,n);const s=[],a=js.empty();Od(n,(l,u)=>{const c=uF(e,l,t);u=Tn(u);const h=i.yc(c);if(u instanceof $C)s.push(c);else{const d=Xx(u,h);d!=null&&(s.push(c),a.set(c,d))}});const o=new Ta(s);return new hH(a,o,i.fieldTransforms)}function mH(r,e,t,n,i,s){const a=r.Cc(1,e,t),o=[jM(e,n,t)],l=[i];if(s.length%2!=0)throw new qe(Te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)o.push(jM(e,s[d])),l.push(s[d+1]);const u=[],c=js.empty();for(let d=o.length-1;d>=0;--d)if(!vH(u,o[d])){const f=o[d];let p=l[d];p=Tn(p);const g=a.yc(f);if(p instanceof $C)u.push(f);else{const b=Xx(p,g);b!=null&&(u.push(f),c.set(f,b))}}const h=new Ta(u);return new hH(c,h,a.fieldTransforms)}function qce(r,e,t,n=!1){return Xx(t,r.Cc(n?4:3,e))}function Xx(r,e){if(gH(r=Tn(r)))return lF("Unsupported field value:",e,r),pH(r,e);if(r instanceof Wx)return function(n,i){if(!dH(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,i){const s=[];let a=0;for(const o of n){let l=Xx(o,i.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(r,e)}return function(n,i){if((n=Tn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Eq(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=$r.fromDate(n);return{timestampValue:FS(i.serializer,s)}}if(n instanceof $r){const s=new $r(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:FS(i.serializer,s)}}if(n instanceof Gl)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof so)return{bytesValue:Fq(i.serializer,n._byteString)};if(n instanceof pn){const s=i.databaseId,a=n.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Vk(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Wl)return function(a,o){return{mapValue:{fields:{[lq]:{stringValue:uq},[PS]:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return Bk(o.serializer,u)})}}}}}}(n,i);throw i.Sc(`Unsupported field value: ${EC(n)}`)}(r,e)}function pH(r,e){const t={};return rq(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Od(r,(n,i)=>{const s=Xx(i,e.mc(n));s!=null&&(t[n]=s)}),{mapValue:{fields:t}}}function gH(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof $r||r instanceof Gl||r instanceof so||r instanceof pn||r instanceof Wx||r instanceof Wl)}function lF(r,e,t){if(!gH(t)||!eq(t)){const n=EC(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function jM(r,e,t){if((e=Tn(e))instanceof Gx)return e._internalPath;if(typeof e=="string")return uF(r,e);throw VS("Field path arguments must be of type string or ",r,!1,void 0,t)}const Hce=new RegExp("[~\\*/\\[\\]]");function uF(r,e,t){if(e.search(Hce)>=0)throw VS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Gx(...e.split("."))._internalPath}catch{throw VS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function VS(r,e,t,n,i){const s=n&&!n.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${n}`),a&&(l+=` in document ${i}`),l+=")"),new qe(Te.INVALID_ARGUMENT,o+r+l)}function vH(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yH{constructor(e,t,n,i,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Gce(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(VC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Gce extends yH{data(){return super.data()}}function VC(r,e){return typeof e=="string"?uF(r,e):e instanceof Gx?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bH(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new qe(Te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cF{}class hF extends cF{}function J0(r,e,...t){let n=[];e instanceof cF&&n.push(e),n=n.concat(t),function(s){const a=s.filter(l=>l instanceof dF).length,o=s.filter(l=>l instanceof UC).length;if(a>1||a>0&&o>0)throw new qe(Te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)r=i._apply(r);return r}class UC extends hF{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new UC(e,t,n)}_apply(e){const t=this._parse(e);return xH(e._query,t),new Ic(e.firestore,e.converter,RM(e._query,t))}_parse(e){const t=Kx(e.firestore);return function(s,a,o,l,u,c,h){let d;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new qe(Te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){QL(h,c);const p=[];for(const g of h)p.push(YL(l,s,g));d={arrayValue:{values:p}}}else d=YL(l,s,h)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||QL(h,c),d=qce(o,a,h,c==="in"||c==="not-in");return Rn.create(u,c,d)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function wH(r,e,t){const n=e,i=VC("where",r);return UC._create(i,n,t)}class dF extends cF{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new dF(e,t)}_parse(e){const t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:Yo.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)xH(a,l),a=RM(a,l)}(e._query,t),new Ic(e.firestore,e.converter,RM(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fF extends hF{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fF(e,t)}_apply(e){const t=function(i,s,a){if(i.startAt!==null)throw new qe(Te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new qe(Te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new A1(s,a)}(e._query,this._field,this._direction);return new Ic(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new Y0(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function zC(r,e="asc"){const t=e,n=VC("orderBy",r);return fF._create(n,t)}class mF extends hF{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new mF(e,t,n)}_apply(e){return new Ic(e.firestore,e.converter,kS(e._query,this._limit,this._limitType))}}function Wce(r){return mF._create("limit",r,"F")}function YL(r,e,t){if(typeof(t=Tn(t))=="string"){if(t==="")throw new qe(Te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vq(e)&&t.indexOf("/")!==-1)throw new qe(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Rr.fromString(t));if(!at.isDocumentKey(n))throw new qe(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return dL(r,new at(n))}if(t instanceof pn)return dL(r,t._key);throw new qe(Te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${EC(t)}.`)}function QL(r,e){if(!Array.isArray(r)||r.length===0)throw new qe(Te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xH(r,e){const t=function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(r.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new qe(Te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new qe(Te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Kce{convertValue(e,t="none"){switch(xd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _n(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw mt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Od(e,(i,s)=>{n[i]=this.convertValue(s,t)}),n}convertVectorValue(e){var n,i,s;const t=(s=(i=(n=e.fields)==null?void 0:n[PS].arrayValue)==null?void 0:i.values)==null?void 0:s.map(a=>_n(a.doubleValue));return new Wl(t)}convertGeoPoint(e){return new Gl(_n(e.latitude),_n(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=CC(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(w1(e));default:return null}}convertTimestamp(e){const t=bd(e);return new $r(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Rr.fromString(e);ar(Uq(n),9688,{name:e});const i=new x1(n.get(1),n.get(3)),s=new at(n.popFirst(5));return i.isEqual(t)||_c(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class tb{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qm extends yH{constructor(e,t,n,i,s,a){super(e,t,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(VC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(Te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=qm._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}qm._jsonSchemaVersion="firestore/documentSnapshot/1.0",qm._jsonSchema={type:kn("string",qm._jsonSchemaVersion),bundleSource:kn("string","DocumentSnapshot"),bundleName:kn("string"),bundle:kn("string")};class hE extends qm{data(e={}){return super.data(e)}}class Hm{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new tb(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new hE(this._firestore,this._userDataWriter,n.key,n,new tb(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new qe(Te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const l=new hE(i._firestore,i._userDataWriter,o.doc.key,o.doc,new tb(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const l=new hE(i._firestore,i._userDataWriter,o.doc.key,o.doc,new tb(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),c=a.indexOf(o.doc.key)),{type:Xce(o.type),doc:l,oldIndex:u,newIndex:c}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(Te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Hm._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ik.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Xce(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gF(r){r=bs(r,pn);const e=bs(r.firestore,Jl);return Oce(Hx(e),r._key).then(t=>_H(e,r,t))}Hm._jsonSchemaVersion="firestore/querySnapshot/1.0",Hm._jsonSchema={type:kn("string",Hm._jsonSchemaVersion),bundleSource:kn("string","QuerySnapshot"),bundleName:kn("string"),bundle:kn("string")};class vF extends Kce{constructor(e){super(),this.firestore=e}convertBytes(e){return new so(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,t)}}function Yx(r){r=bs(r,Ic);const e=bs(r.firestore,Jl),t=Hx(e),n=new vF(e);return bH(r._query),Bce(t,r._query).then(i=>new Hm(e,n,r,i))}function qM(r,e,t){r=bs(r,pn);const n=bs(r.firestore,Jl),i=pF(r.converter,e,t);return Jx(n,[sF(Kx(n),"setDoc",r._key,i,r.converter!==null,t).toMutation(r._key,ws.none())])}function vg(r,e,t,...n){r=bs(r,pn);const i=bs(r.firestore,Jl),s=Kx(i);let a;return a=typeof(e=Tn(e))=="string"||e instanceof Gx?mH(s,"updateDoc",r._key,e,t,n):fH(s,"updateDoc",r._key,e),Jx(i,[a.toMutation(r._key,ws.exists(!0))])}function yF(r){return Jx(bs(r.firestore,Jl),[new RC(r._key,ws.none())])}function Qx(r,e){const t=bs(r.firestore,Jl),n=Ql(r),i=pF(r.converter,e);return Jx(t,[sF(Kx(r.firestore),"addDoc",n._key,i,r.converter!==null,{}).toMutation(n._key,ws.exists(!1))]).then(()=>n)}function HM(r,...e){var l,u,c;r=Tn(r);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||XL(e[n])||(t=e[n++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(XL(e[n])){const h=e[n];e[n]=(l=h.next)==null?void 0:l.bind(h),e[n+1]=(u=h.error)==null?void 0:u.bind(h),e[n+2]=(c=h.complete)==null?void 0:c.bind(h)}let s,a,o;if(r instanceof pn)a=bs(r.firestore,Jl),o=NC(r._key.path),s={next:h=>{e[n]&&e[n](_H(a,r,h))},error:e[n+1],complete:e[n+2]};else{const h=bs(r,Ic);a=bs(h.firestore,Jl),o=h._query;const d=new vF(a);s={next:f=>{e[n]&&e[n](new Hm(a,d,h,f))},error:e[n+1],complete:e[n+2]},bH(r._query)}return function(d,f,p,g){const b=new nF(g),v=new eF(f,b,p);return d.asyncQueue.enqueueAndForget(async()=>Qk(await $S(d),v)),()=>{b.Nu(),d.asyncQueue.enqueueAndForget(async()=>Jk(await $S(d),v))}}(Hx(a),o,i,s)}function Jx(r,e){return function(n,i){const s=new oc;return n.asyncQueue.enqueueAndForget(async()=>Ece(await Fce(n),i,s)),s.promise}(Hx(r),e)}function _H(r,e,t){const n=t.docs.get(e._key),i=new vF(r);return new qm(r,i,e._key,n,new tb(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yce{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Kx(e)}set(e,t,n){this._verifyNotCommitted();const i=k2(e,this._firestore),s=pF(i.converter,t,n),a=sF(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,n);return this._mutations.push(a.toMutation(i._key,ws.none())),this}update(e,t,n,...i){this._verifyNotCommitted();const s=k2(e,this._firestore);let a;return a=typeof(t=Tn(t))=="string"||t instanceof Gx?mH(this._dataReader,"WriteBatch.update",s._key,t,n,i):fH(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,ws.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=k2(e,this._firestore);return this._mutations=this._mutations.concat(new RC(t._key,ws.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new qe(Te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function k2(r,e){if((r=Tn(r)).firestore!==e)throw new qe(Te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function jn(){return new aF("serverTimestamp")}function Qce(r){return new oF("increment",r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jce(r){return Hx(r=bs(r,Jl)),new Yce(r,e=>Jx(r,e))}(function(e,t=!0){(function(i){W0=i})(fp),ep(new vd("firestore",(n,{instanceIdentifier:i,options:s})=>{const a=n.getProvider("app").getImmediate(),o=new Jl(new Goe(n.getProvider("auth-internal")),new Xoe(a,n.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new qe(Te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new x1(u.options.projectId,c)}(a,i),a);return s={useFetchStreams:t,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),jl(Z4,eL,e),jl(Z4,eL,"esm2020")})();const fs=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),GM=[.001,0,0,.001,0,0],F2=1.35,ba={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Qc={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},N1="pdfjs_internal_editor_",Dt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Kt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Zce={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},WM={TRIANGLES:1,LATTICE:2},vi={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},dE={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Nn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Gp={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},jC={ERRORS:0,WARNINGS:1,INFOS:5},D1={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Oy={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},ehe={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let qC=jC.WARNINGS;function the(r){Number.isInteger(r)&&(qC=r)}function rhe(){return qC}function HC(r){qC>=jC.INFOS&&console.info(`Info: ${r}`)}function At(r){qC>=jC.WARNINGS&&console.warn(`Warning: ${r}`)}function Dr(r){throw new Error(r)}function Xt(r,e){r||Dr(e)}function nhe(r){switch(r==null?void 0:r.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function AH(r,e=null,t=null){if(!r)return null;if(t&&typeof r=="string"){if(t.addDefaultProtocol&&r.startsWith("www.")){const i=r.match(/\./g);(i==null?void 0:i.length)>=2&&(r=`http://${r}`)}if(t.tryConvertEncoding)try{r=lhe(r)}catch{}}const n=e?URL.parse(r,e):URL.parse(r);return nhe(n)?n:null}function EH(r,e,t=!1){const n=URL.parse(r);return n?(n.hash=e,n.href):t&&AH(r,"http://example.com")?r.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Et(r,e,t,n=!1){return Object.defineProperty(r,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const gp=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class JL extends gp{constructor(e,t){super(e,"PasswordException"),this.code=t}}class O2 extends gp{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class KM extends gp{constructor(e){super(e,"InvalidPDFException")}}class US extends gp{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class ihe extends gp{constructor(e){super(e,"FormatError")}}class Ed extends gp{constructor(e){super(e,"AbortException")}}function SH(r){(typeof r!="object"||(r==null?void 0:r.length)===void 0)&&Dr("Invalid argument for bytesToString");const e=r.length,t=8192;if(e<t)return String.fromCharCode.apply(null,r);const n=[];for(let i=0;i<e;i+=t){const s=Math.min(i+t,e),a=r.subarray(i,s);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function Zx(r){typeof r!="string"&&Dr("Invalid argument for stringToBytes");const e=r.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=r.charCodeAt(n)&255;return t}function she(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function ahe(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function ohe(){try{return new Function(""),!0}catch{return!1}}class Ri{static get isLittleEndian(){return Et(this,"isLittleEndian",ahe())}static get isEvalSupported(){return Et(this,"isEvalSupported",ohe())}static get isOffscreenCanvasSupported(){return Et(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Et(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Et(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Et(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Et(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Et(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const B2=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));var hc,fE,XM;class Ze{static makeHexColor(e,t,n){return`#${B2[e]}${B2[t]}${B2[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const i=e[n],s=e[n+1];e[n]=i*t[0]+s*t[2]+t[4],e[n+1]=i*t[1]+s*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const i=t[0],s=t[1],a=t[2],o=t[3],l=t[4],u=t[5];for(let c=0;c<6;c+=2){const h=e[n+c],d=e[n+c+1];e[n+c]=h*i+d*a+l,e[n+c+1]=h*s+d*o+u}}static applyInverseTransform(e,t){const n=e[0],i=e[1],s=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/s,e[1]=(-n*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/s}static axialAlignedBoundingBox(e,t,n){const i=t[0],s=t[1],a=t[2],o=t[3],l=t[4],u=t[5],c=e[0],h=e[1],d=e[2],f=e[3];let p=i*c+l,g=p,b=i*d+l,v=b,w=o*h+u,y=w,A=o*f+u,x=A;if(s!==0||a!==0){const _=s*c,S=s*d,E=a*h,C=a*f;p+=E,v+=E,b+=C,g+=C,w+=_,x+=_,A+=S,y+=S}n[0]=Math.min(n[0],p,b,g,v),n[1]=Math.min(n[1],w,A,y,x),n[2]=Math.max(n[2],p,b,g,v),n[3]=Math.max(n[3],w,A,y,x)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],i=e[1],s=e[2],a=e[3],o=n**2+i**2,l=n*s+i*a,u=s**2+a**2,c=(o+u)/2,h=Math.sqrt(c**2-(o*u-l**2));t[0]=Math.sqrt(c+h||1),t[1]=Math.sqrt(c-h||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>a?null:[n,s,i,a]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,i,s){s[0]=Math.min(s[0],e,n),s[1]=Math.min(s[1],t,i),s[2]=Math.max(s[2],e,n),s[3]=Math.max(s[3],t,i)}static bezierBoundingBox(e,t,n,i,s,a,o,l,u){u[0]=Math.min(u[0],e,o),u[1]=Math.min(u[1],t,l),u[2]=Math.max(u[2],e,o),u[3]=Math.max(u[3],t,l),z(this,hc,XM).call(this,e,n,s,o,t,i,a,l,3*(-e+3*(n-s)+o),6*(e-2*n+s),3*(n-e),u),z(this,hc,XM).call(this,e,n,s,o,t,i,a,l,3*(-t+3*(i-a)+l),6*(t-2*i+a),3*(i-t),u)}}hc=new WeakSet,fE=function(e,t,n,i,s,a,o,l,u,c){if(u<=0||u>=1)return;const h=1-u,d=u*u,f=d*u,p=h*(h*(h*e+3*u*t)+3*d*n)+f*i,g=h*(h*(h*s+3*u*a)+3*d*o)+f*l;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],g),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],g)},XM=function(e,t,n,i,s,a,o,l,u,c,h,d){if(Math.abs(u)<1e-12){Math.abs(c)>=1e-12&&z(this,hc,fE).call(this,e,t,n,i,s,a,o,l,-h/c,d);return}const f=c**2-4*h*u;if(f<0)return;const p=Math.sqrt(f),g=2*u;z(this,hc,fE).call(this,e,t,n,i,s,a,o,l,(-c+p)/g,d),z(this,hc,fE).call(this,e,t,n,i,s,a,o,l,(-c-p)/g,d)},L(Ze,hc);function lhe(r){return decodeURIComponent(escape(r))}let L2=null,ZL=null;function uhe(r){return L2||(L2=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ZL=new Map([["","t"]])),r.replaceAll(L2,(e,t,n)=>t?t.normalize("NFKC"):ZL.get(n))}function TH(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),SH(r)}const yg="pdfjs_internal_id_";function che(r,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,i,...s]=t;if(!r(n)&&!Number.isInteger(n)||!e(i))return!1;const a=s.length;let o=!0;switch(i.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;o=!1;break;default:return!1}for(const l of s)if(!(typeof l=="number"||o&&l===null))return!1;return!0}function ms(r,e,t){return Math.min(Math.max(r,e),t)}function CH(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(SH(r))}function hhe(r){return Uint8Array.fromBase64?Uint8Array.fromBase64(r):Zx(atob(r))}typeof Promise.try!="function"&&(Promise.try=function(r,...e){return new Promise(t=>{t(r(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((e,t)=>e+t,0)});class M1{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function i(s){var l;if(!s)return;let a=null;const o=s.name;if(o==="#text")a=s.value;else if(M1.shouldBuildText(o))(l=s==null?void 0:s.attributes)!=null&&l.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&t.push({str:a}),!!s.children)for(const u of s.children)i(u)}return i(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class NH{static setupStorage(e,t,n,i,s){const a=i.getValue(t,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),s==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",o=>{i.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),s==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of n.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:i,linkService:s}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${i}`);for(const[l,u]of Object.entries(a))if(u!=null)switch(l){case"class":u.length&&e.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,u)}o&&s.addLinkAttributes(e,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(e,a.dataId,t,n)}static render(e){var h,d;const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,s=e.intent||"display",a=document.createElement(i.name);i.attributes&&this.setAttributes({html:a,element:i,intent:s,linkService:n});const o=s!=="richText",l=e.div;if(l.append(a),e.viewport){const f=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=f}o&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const f=document.createTextNode(i.value);a.append(f),o&&M1.shouldBuildText(i.name)&&u.push(f)}return{textDivs:u}}const c=[[i,-1,a]];for(;c.length>0;){const[f,p,g]=c.at(-1);if(p+1===f.children.length){c.pop();continue}const b=f.children[++c.at(-1)[1]];if(b===null)continue;const{name:v}=b;if(v==="#text"){const y=document.createTextNode(b.value);u.push(y),g.append(y);continue}const w=(h=b==null?void 0:b.attributes)!=null&&h.xmlns?document.createElementNS(b.attributes.xmlns,v):document.createElement(v);if(g.append(w),b.attributes&&this.setAttributes({html:w,element:b,storage:t,intent:s,linkService:n}),((d=b.children)==null?void 0:d.length)>0)c.push([b,-1,w]);else if(b.value){const y=document.createTextNode(b.value);o&&M1.shouldBuildText(v)&&u.push(y),w.append(y)}}for(const f of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const du="http://www.w3.org/2000/svg",mf=class mf{};Pe(mf,"CSS",96),Pe(mf,"PDF",72),Pe(mf,"PDF_TO_CSS_UNITS",mf.CSS/mf.PDF);let Sd=mf;async function e_(r,e="text"){if(rb(r,document.baseURI)){const t=await fetch(r);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const i=new XMLHttpRequest;i.open("GET",r,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class t_{constructor({viewBox:e,userUnit:t,scale:n,rotation:i,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=i,this.offsetX=s,this.offsetY=a,n*=t;const l=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let c,h,d,f;switch(i%=360,i<0&&(i+=360),i){case 180:c=-1,h=0,d=0,f=1;break;case 90:c=0,h=1,d=1,f=0;break;case 270:c=0,h=-1,d=-1,f=0;break;case 0:c=1,h=0,d=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,f=-f);let p,g,b,v;c===0?(p=Math.abs(u-e[1])*n+s,g=Math.abs(l-e[0])*n+a,b=(e[3]-e[1])*n,v=(e[2]-e[0])*n):(p=Math.abs(l-e[0])*n+s,g=Math.abs(u-e[1])*n+a,b=(e[2]-e[0])*n,v=(e[3]-e[1])*n),this.transform=[c*n,h*n,d*n,f*n,p-c*n*l-d*n*u,g-h*n*l-f*n*u],this.width=b,this.height=v}get rawDims(){const e=this.viewBox;return Et(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new t_({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:s})}convertToViewportPoint(e,t){const n=[e,t];return Ze.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];Ze.applyTransform(t,this.transform);const n=[e[2],e[3]];return Ze.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return Ze.applyInverseTransform(n,this.transform),n}}class bF extends gp{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function GC(r){const e=r.length;let t=0;for(;t<e&&r[t].trim()==="";)t++;return r.substring(t,t+5).toLowerCase()==="data:"}function wF(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function dhe(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function fhe(r,e="document.pdf"){if(typeof r!="string")return e;if(GC(r))return At('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(r);if(!n)return e;const i=o=>{try{let l=decodeURIComponent(o);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:o):l}catch{return o}},s=/\.pdf$/i,a=n.pathname.split("/").at(-1);if(s.test(a))return i(a);if(n.searchParams.size>0){const o=Array.from(n.searchParams.values()).reverse();for(const u of o)if(s.test(u))return i(u);const l=Array.from(n.searchParams.keys()).reverse();for(const u of l)if(s.test(u))return i(u)}if(n.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(l)return i(l[0])}return e}class e5{constructor(){Pe(this,"started",Object.create(null));Pe(this,"times",[])}time(e){e in this.started&&At(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||At(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:s}of this.times)e.push(`${n.padEnd(t)} ${s-i}ms
`);return e.join("")}}function rb(r,e){const t=e?URL.parse(r,e):URL.parse(r);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function vo(r){r.preventDefault()}function dn(r){r.preventDefault(),r.stopPropagation()}function mhe(r){console.log("Deprecated API usage: "+r)}var V1;class zS{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;m(this,V1)||k(this,V1,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=m(this,V1).exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const u=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,u==="-"?(a+=c,o+=h):u==="+"&&(a-=c,o-=h),new Date(Date.UTC(n,i,s,a,o,l))}}V1=new WeakMap,L(zS,V1);function phe(r,{scale:e=1,rotation:t=0}){const{width:n,height:i}=r.attributes.style,s=[0,0,parseInt(n),parseInt(i)];return new t_({viewBox:s,userUnit:1,scale:e,rotation:t})}function r_(r){if(r.startsWith("#")){const e=parseInt(r.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(e=>parseInt(e)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(At(`Not a valid color format: "${r}"`),[0,0,0])}function ghe(r){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of r.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;r.set(t,r_(n))}e.remove()}function Xr(r){const{a:e,b:t,c:n,d:i,e:s,f:a}=r.getTransform();return[e,t,n,i,s,a]}function ul(r){const{a:e,b:t,c:n,d:i,e:s,f:a}=r.getTransform().invertSelf();return[e,t,n,i,s,a]}function np(r,e,t=!1,n=!0){if(e instanceof t_){const{pageWidth:i,pageHeight:s}=e.rawDims,{style:a}=r,o=Ri.isCSSRoundSupported,l=`var(--total-scale-factor) * ${i}px`,u=`var(--total-scale-factor) * ${s}px`,c=o?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,h=o?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!t||e.rotation%180===0?(a.width=c,a.height=h):(a.width=h,a.height=c)}n&&r.setAttribute("data-main-rotation",e.rotation)}class Zl{constructor(){const{pixelRatio:e}=Zl;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,i,s=-1){let a=1/0,o=1/0,l=1/0;n=Zl.capPixels(n,s),n>0&&(a=Math.sqrt(n/(e*t))),i!==-1&&(o=i/e,l=i/t);const u=Math.min(a,o,l);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const YM=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class vhe{static get isDarkMode(){var e;return Et(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class yhe{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),Et(this,"commentForegroundColor",r_(n))}}function bhe(r,e,t,n){n=Math.min(Math.max(n??1,0),1);const i=255*(1-n);return r=Math.round(r*n+i),e=Math.round(e*n+i),t=Math.round(t*n+i),[r,e,t]}function t5(r,e){const t=r[0]/255,n=r[1]/255,i=r[2]/255,s=Math.max(t,n,i),a=Math.min(t,n,i),o=(s+a)/2;if(s===a)e[0]=e[1]=0;else{const l=s-a;switch(e[1]=o<.5?l/(s+a):l/(2-s-a),s){case t:e[0]=((n-i)/l+(n<i?6:0))*60;break;case n:e[0]=((i-t)/l+2)*60;break;case i:e[0]=((t-n)/l+4)*60;break}}e[2]=o}function QM(r,e){const t=r[0],n=r[1],i=r[2],s=(1-Math.abs(2*i-1))*n,a=s*(1-Math.abs(t/60%2-1)),o=i-s/2;switch(Math.floor(t/60)){case 0:e[0]=s+o,e[1]=a+o,e[2]=o;break;case 1:e[0]=a+o,e[1]=s+o,e[2]=o;break;case 2:e[0]=o,e[1]=s+o,e[2]=a+o;break;case 3:e[0]=o,e[1]=a+o,e[2]=s+o;break;case 4:e[0]=a+o,e[1]=o,e[2]=s+o;break;case 5:case 6:e[0]=s+o,e[1]=o,e[2]=a+o;break}}function r5(r){return r<=.03928?r/12.92:((r+.055)/1.055)**2.4}function n5(r,e,t){QM(r,t),t.map(r5);const n=.2126*t[0]+.7152*t[1]+.0722*t[2];QM(e,t),t.map(r5);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)}const i5=new Map;function whe(r,e){const t=r[0]+r[1]*256+r[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=i5.get(t);if(n)return n;const i=new Float32Array(9),s=i.subarray(0,3),a=i.subarray(3,6);t5(r,a);const o=i.subarray(6,9);t5(e,o);const l=o[2]<.5,u=l?12:4.5;if(a[2]=l?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),n5(a,o,s)<u){let c,h;l?(c=a[2],h=1):(c=0,h=a[2]);const d=.005;for(;h-c>d;){const f=a[2]=(c+h)/2;l===n5(a,o,s)<u?c=f:h=f}a[2]=l?h:c}return QM(a,s),n=Ze.makeHexColor(Math.round(s[0]*255),Math.round(s[1]*255),Math.round(s[2]*255)),i5.set(t,n),n}function DH({html:r,dir:e,className:t},n){const i=document.createDocumentFragment();if(typeof r=="string"){const s=document.createElement("p");s.dir=e||"auto";const a=r.split(/(?:\r\n?|\n)/);for(let o=0,l=a.length;o<l;++o){const u=a[o];s.append(document.createTextNode(u)),o<l-1&&s.append(document.createElement("br"))}i.append(s)}else NH.render({xfaHtml:r,div:i,intent:"richText"});i.firstElementChild.classList.add("richText",t),n.append(i)}function MH(r){const e=new Path2D;if(!r)return e;for(let t=0,n=r.length;t<n;)switch(r[t++]){case Oy.moveTo:e.moveTo(r[t++],r[t++]);break;case Oy.lineTo:e.lineTo(r[t++],r[t++]);break;case Oy.curveTo:e.bezierCurveTo(r[t++],r[t++],r[t++],r[t++],r[t++],r[t++]);break;case Oy.quadraticCurveTo:e.quadraticCurveTo(r[t++],r[t++],r[t++],r[t++]);break;case Oy.closePath:e.closePath();break;default:At(`Unrecognized drawing path operator: ${r[t-1]}`);break}return e}var rh,nh,qa,Ha,U1,ih,jg,qg,z1,OT,IH,Di,PH,RH,Wp,nb;const gu=class gu{constructor(e){L(this,Di);L(this,rh,null);L(this,nh,null);L(this,qa);L(this,Ha,null);L(this,U1,null);L(this,ih,null);L(this,jg,null);L(this,qg,null);k(this,qa,e),m(gu,z1)||k(gu,z1,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=k(this,rh,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=m(this,qa)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",vo,{signal:t}),e.addEventListener("pointerdown",z(gu,OT,IH),{signal:t}));const n=k(this,Ha,document.createElement("div"));n.className="buttons",e.append(n);const i=m(this,qa).toolbarPosition;if(i){const{style:s}=e,a=m(this,qa)._uiManager.direction==="ltr"?1-i[0]:i[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return m(this,rh)}hide(){var e;m(this,rh).classList.add("hidden"),(e=m(this,nh))==null||e.hideDropdown()}show(){var e,t;m(this,rh).classList.remove("hidden"),(e=m(this,U1))==null||e.shown(),(t=m(this,ih))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=m(this,qa),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",m(gu,z1)[e]),z(this,Di,Wp).call(this,n)&&n.addEventListener("click",i=>{t.delete()},{signal:t._signal}),m(this,Ha).append(n)}async addAltText(e){const t=await e.render();z(this,Di,Wp).call(this,t),m(this,Ha).append(t,m(this,Di,nb)),k(this,U1,e)}addComment(e,t=null){if(m(this,ih))return;const n=e.renderForToolbar();if(!n)return;z(this,Di,Wp).call(this,n);const i=k(this,jg,m(this,Di,nb));t?(m(this,Ha).insertBefore(n,t),m(this,Ha).insertBefore(i,t)):m(this,Ha).append(n,i),k(this,ih,e),e.toolbar=this}addColorPicker(e){if(m(this,nh))return;k(this,nh,e);const t=e.renderButton();z(this,Di,Wp).call(this,t),m(this,Ha).append(t,m(this,Di,nb))}async addEditSignatureButton(e){const t=k(this,qg,await e.renderEditButton(m(this,qa)));z(this,Di,Wp).call(this,t),m(this,Ha).append(t,m(this,Di,nb))}removeButton(e){var t,n;switch(e){case"comment":(t=m(this,ih))==null||t.removeToolbarCommentButton(),k(this,ih,null),(n=m(this,jg))==null||n.remove(),k(this,jg,null);break}}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,n){if(!t&&e==="comment")return;const i=m(this,Ha).querySelector(n);i&&e==="comment"&&this.addComment(t,i)}updateEditSignatureButton(e){m(this,qg)&&(m(this,qg).title=e)}remove(){var e;m(this,rh).remove(),(e=m(this,nh))==null||e.destroy(),k(this,nh,null)}};rh=new WeakMap,nh=new WeakMap,qa=new WeakMap,Ha=new WeakMap,U1=new WeakMap,ih=new WeakMap,jg=new WeakMap,qg=new WeakMap,z1=new WeakMap,OT=new WeakSet,IH=function(e){e.stopPropagation()},Di=new WeakSet,PH=function(e){m(this,qa)._focusEventsAllowed=!1,dn(e)},RH=function(e){m(this,qa)._focusEventsAllowed=!0,dn(e)},Wp=function(e){const t=m(this,qa)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",z(this,Di,PH).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",z(this,Di,RH).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",vo,{signal:t}),!0)},nb=function(){const e=document.createElement("div");return e.className="divider",e},L(gu,OT),L(gu,z1,null);let JM=gu;var j1,Sf,bu,Nc,kH,FH,ZM;class xhe{constructor(e){L(this,Nc);L(this,j1,null);L(this,Sf,null);L(this,bu);k(this,bu,e)}show(e,t,n){const[i,s]=z(this,Nc,FH).call(this,t,n),{style:a}=m(this,Sf)||k(this,Sf,z(this,Nc,kH).call(this));e.append(m(this,Sf)),a.insetInlineEnd=`${100*i}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){m(this,Sf).remove()}}j1=new WeakMap,Sf=new WeakMap,bu=new WeakMap,Nc=new WeakSet,kH=function(){const e=k(this,Sf,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=m(this,bu)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",vo,{signal:t});const n=k(this,j1,document.createElement("div"));return n.className="buttons",e.append(n),m(this,bu).hasCommentManager()&&z(this,Nc,ZM).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{m(this,bu).commentSelection("floating_button")}),z(this,Nc,ZM).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{m(this,bu).highlightSelection("floating_button")}),e},FH=function(e,t){let n=0,i=0;for(const s of e){const a=s.y+s.height;if(a<n)continue;const o=s.x+(t?s.width:0);if(a>n){i=o,n=a;continue}t?o>i&&(i=o):o<i&&(i=o)}return[t?1-i:i,n]},ZM=function(e,t,n,i){const s=document.createElement("button");s.classList.add("basic",e),s.tabIndex=0,s.setAttribute("data-l10n-id",t);const a=document.createElement("span");s.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",n);const o=m(this,bu)._signal;o instanceof AbortSignal&&!o.aborted&&(s.addEventListener("contextmenu",vo,{signal:o}),s.addEventListener("click",i,{signal:o})),m(this,j1).append(s)};function OH(r,e,t){for(const n of t)e.addEventListener(n,r[n].bind(r))}var Tf,Cf,Hg,Nf;const gr=class gr{static initializeAndAddPointerId(e){(m(gr,Cf)||k(gr,Cf,new Set)).add(e)}static setPointer(e,t){m(gr,Tf)||k(gr,Tf,t),m(gr,Nf)??k(gr,Nf,e)}static setTimeStamp(e){k(gr,Hg,e)}static isSamePointerId(e){return m(gr,Tf)===e}static isSamePointerIdOrRemove(e){var t;return m(gr,Tf)===e?!0:((t=m(gr,Cf))==null||t.delete(e),!1)}static isSamePointerType(e){return m(gr,Nf)===e}static isInitializedAndDifferentPointerType(e){return m(gr,Nf)!==null&&!gr.isSamePointerType(e)}static isSameTimeStamp(e){return m(gr,Hg)===e}static isUsingMultiplePointers(){var e;return((e=m(gr,Cf))==null?void 0:e.size)>=1}static clearPointerType(){k(gr,Nf,null)}static clearPointerIds(){k(gr,Tf,NaN),k(gr,Cf,null)}static clearTimeStamp(){k(gr,Hg,NaN)}};Tf=new WeakMap,Cf=new WeakMap,Hg=new WeakMap,Nf=new WeakMap,L(gr,Tf,NaN),L(gr,Cf,null),L(gr,Hg,NaN),L(gr,Nf,null);let qi=gr;var BT;class _he{constructor(){L(this,BT,0)}get id(){return`${N1}${Ln(this,BT)._++}`}}BT=new WeakMap;var Gg,q1,Hi,Wg,mE;const DO=class DO{constructor(){L(this,Wg);L(this,Gg,TH());L(this,q1,0);L(this,Hi,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const s=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Et(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:t,name:n,size:i,type:s}=e;return z(this,Wg,mE).call(this,`${t}_${n}_${i}_${s}`,e)}async getFromUrl(e){return z(this,Wg,mE).call(this,e,e)}async getFromBlob(e,t){const n=await t;return z(this,Wg,mE).call(this,e,n)}async getFromId(e){m(this,Hi)||k(this,Hi,new Map);const t=m(this,Hi).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){m(this,Hi)||k(this,Hi,new Map);let n=m(this,Hi).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${m(this,Gg)}_${Ln(this,q1)._++}`,refCounter:1,isSvg:!1},m(this,Hi).set(e,n),m(this,Hi).set(n.id,n),n}getSvgUrl(e){const t=m(this,Hi).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;m(this,Hi)||k(this,Hi,new Map);const t=m(this,Hi).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(n.width,n.height);s.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=s.convertToBlob()}(i=n.close)==null||i.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${m(this,Gg)}_`)}};Gg=new WeakMap,q1=new WeakMap,Hi=new WeakMap,Wg=new WeakSet,mE=async function(e,t){m(this,Hi)||k(this,Hi,new Map);let n=m(this,Hi).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${m(this,Gg)}_${Ln(this,q1)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(n.url=t,i=await e_(t,"blob")):t instanceof File?i=n.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const s=DO._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((u,c)=>{o.onload=()=>{n.bitmap=o,n.isSvg=!0,u()},a.onload=async()=>{const h=n.svgUrl=a.result;o.src=await s?`${h}#svgView(preserveAspectRatio(none))`:h},o.onerror=a.onerror=c});a.readAsDataURL(i),await l}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){At(i),n=null}return m(this,Hi).set(e,n),n&&m(this,Hi).set(n.id,n),n};let eI=DO;var yn,sh,H1,Kr;class Ahe{constructor(e=128){L(this,yn,[]);L(this,sh,!1);L(this,H1);L(this,Kr,-1);k(this,H1,e)}add({cmd:e,undo:t,post:n,mustExec:i,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(i&&e(),m(this,sh))return;const l={cmd:e,undo:t,post:n,type:s};if(m(this,Kr)===-1){m(this,yn).length>0&&(m(this,yn).length=0),k(this,Kr,0),m(this,yn).push(l);return}if(a&&m(this,yn)[m(this,Kr)].type===s){o&&(l.undo=m(this,yn)[m(this,Kr)].undo),m(this,yn)[m(this,Kr)]=l;return}const u=m(this,Kr)+1;u===m(this,H1)?m(this,yn).splice(0,1):(k(this,Kr,u),u<m(this,yn).length&&m(this,yn).splice(u)),m(this,yn).push(l)}undo(){if(m(this,Kr)===-1)return;k(this,sh,!0);const{undo:e,post:t}=m(this,yn)[m(this,Kr)];e(),t==null||t(),k(this,sh,!1),k(this,Kr,m(this,Kr)-1)}redo(){if(m(this,Kr)<m(this,yn).length-1){k(this,Kr,m(this,Kr)+1),k(this,sh,!0);const{cmd:e,post:t}=m(this,yn)[m(this,Kr)];e(),t==null||t(),k(this,sh,!1)}}hasSomethingToUndo(){return m(this,Kr)!==-1}hasSomethingToRedo(){return m(this,Kr)<m(this,yn).length-1}cleanType(e){if(m(this,Kr)!==-1){for(let t=m(this,Kr);t>=0;t--)if(m(this,yn)[t].type!==e){m(this,yn).splice(t+1,m(this,Kr)-t),k(this,Kr,t);return}m(this,yn).length=0,k(this,Kr,-1)}}destroy(){k(this,yn,null)}}yn=new WeakMap,sh=new WeakMap,H1=new WeakMap,Kr=new WeakMap;var LT,BH;class n_{constructor(e){L(this,LT);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Ri.platform;for(const[n,i,s={}]of e)for(const a of n){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:i,options:s}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:i,options:s}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(z(this,LT,BH).call(this,t));if(!n)return;const{callback:i,options:{bubbles:s=!1,args:a=[],checker:o=null}}=n;o&&!o(e,t)||(i.bind(e,...a,t)(),s||dn(t))}}LT=new WeakSet,BH=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const $T=class $T{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return ghe(e),Et(this,"_colors",e)}convert(e){const t=r_(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every((s,a)=>s===t[a]))return $T._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?Ze.makeHexColor(...t):e}};Pe($T,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let tI=$T;var Kg,ta,Xg,sn,Un,Yg,Ga,Qg,Wa,Gi,ah,oh,Jg,lh,ml,Ka,Df,G1,W1,Zg,K1,pl,uh,ev,ch,gl,VT,hh,tv,X1,dh,Mf,rv,fh,Y1,Mn,lr,wu,mh,ph,Q1,nv,J1,gh,vl,xu,Z1,ew,Xa,je,pE,rI,LH,$H,ib,VH,UH,zH,nI,jH,qH,HH,GH,ls,fu,WH,KH,iI,XH,sb,sI;const Eg=class Eg{constructor(e,t,n,i,s,a,o,l,u,c,h,d,f,p,g,b){L(this,je);L(this,Kg,new AbortController);L(this,ta,null);L(this,Xg,null);L(this,sn,new Map);L(this,Un,new Map);L(this,Yg,null);L(this,Ga,null);L(this,Qg,null);L(this,Wa,new Ahe);L(this,Gi,null);L(this,ah,null);L(this,oh,null);L(this,Jg,0);L(this,lh,new Set);L(this,ml,null);L(this,Ka,null);L(this,Df,new Set);Pe(this,"_editorUndoBar",null);L(this,G1,!1);L(this,W1,!1);L(this,Zg,!1);L(this,K1,null);L(this,pl,null);L(this,uh,null);L(this,ev,null);L(this,ch,!1);L(this,gl,null);L(this,VT,new _he);L(this,hh,!1);L(this,tv,!1);L(this,X1,!1);L(this,dh,null);L(this,Mf,null);L(this,rv,null);L(this,fh,null);L(this,Y1,null);L(this,Mn,Dt.NONE);L(this,lr,new Set);L(this,wu,null);L(this,mh,null);L(this,ph,null);L(this,Q1,null);L(this,nv,null);L(this,J1,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});L(this,gh,[0,0]);L(this,vl,null);L(this,xu,null);L(this,Z1,null);L(this,ew,null);L(this,Xa,null);const v=this._signal=m(this,Kg).signal;k(this,xu,e),k(this,Z1,t),k(this,ew,n),k(this,Yg,i),k(this,Gi,s),k(this,mh,a),k(this,nv,l),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:v}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),o._on("setpreference",this.onSetPreference.bind(this),{signal:v}),o._on("switchannotationeditorparams",w=>this.updateParams(w.type,w.value),{signal:v}),window.addEventListener("pointerdown",()=>{k(this,tv,!0)},{capture:!0,signal:v}),window.addEventListener("pointerup",()=>{k(this,tv,!1)},{capture:!0,signal:v}),z(this,je,VH).call(this),z(this,je,GH).call(this),z(this,je,nI).call(this),k(this,Ga,l.annotationStorage),k(this,K1,l.filterFactory),k(this,ph,u),k(this,ev,c||null),k(this,G1,h),k(this,W1,d),k(this,Zg,f),k(this,Y1,p||null),this.viewParameters={realScale:Sd.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=b!==!1,s==null||s.setSidebarUiManager(this)}static get _keyboardManager(){const e=Eg.prototype,t=a=>m(a,xu).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return Et(this,"_keyboardManager",new n_([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&m(a,xu).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&m(a,xu).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}destroy(){var e,t,n,i,s,a,o,l,u;(e=m(this,Xa))==null||e.resolve(),k(this,Xa,null),(t=m(this,Kg))==null||t.abort(),k(this,Kg,null),this._signal=null;for(const c of m(this,Un).values())c.destroy();m(this,Un).clear(),m(this,sn).clear(),m(this,Df).clear(),(n=m(this,fh))==null||n.clear(),k(this,ta,null),m(this,lr).clear(),m(this,Wa).destroy(),(i=m(this,Yg))==null||i.destroy(),(s=m(this,Gi))==null||s.destroy(),(a=m(this,mh))==null||a.destroy(),(o=m(this,gl))==null||o.hide(),k(this,gl,null),(l=m(this,rv))==null||l.destroy(),k(this,rv,null),k(this,Xg,null),m(this,pl)&&(clearTimeout(m(this,pl)),k(this,pl,null)),m(this,vl)&&(clearTimeout(m(this,vl)),k(this,vl,null)),(u=this._editorUndoBar)==null||u.destroy(),k(this,nv,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return m(this,Y1)}get useNewAltTextFlow(){return m(this,W1)}get useNewAltTextWhenAddingImage(){return m(this,Zg)}get hcmFilter(){return Et(this,"hcmFilter",m(this,ph)?m(this,K1).addHCMFilter(m(this,ph).foreground,m(this,ph).background):"none")}get direction(){return Et(this,"direction",getComputedStyle(m(this,xu)).direction)}get _highlightColors(){return Et(this,"_highlightColors",m(this,ev)?new Map(m(this,ev).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Et(this,"highlightColors",null);const t=new Map,n=!!m(this,ph);for(const[i,s]of e){const a=i.endsWith("_HCM");if(n&&a){t.set(i.replace("_HCM",""),s);continue}!n&&!a&&t.set(i,s)}return Et(this,"highlightColors",t)}get highlightColorNames(){return Et(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),k(this,oh,e)}setMainHighlightColorPicker(e){k(this,rv,e)}editAltText(e,t=!1){var n;(n=m(this,Yg))==null||n.editAltText(this,e,t)}hasCommentManager(){return!!m(this,Gi)}editComment(e,t,n,i){var s;(s=m(this,Gi))==null||s.showDialog(this,e,t,n,i)}selectComment(e,t){const n=m(this,Un).get(e),i=n==null?void 0:n.getEditorByUID(t);i==null||i.toggleComment(!0,!0)}updateComment(e){var t;(t=m(this,Gi))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=m(this,Gi))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=m(this,Gi))==null||t.removeComments([e.uid])}toggleComment(e,t,n=void 0){var i;(i=m(this,Gi))==null||i.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){var n;return e&&((n=m(this,Gi))==null?void 0:n.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=m(this,Gi))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(m(this,Un).has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),i=s=>{s.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await n}getSignature(e){var t;(t=m(this,mh))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return m(this,mh)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":k(this,Zg,t);break}}onPageChanging({pageNumber:e}){k(this,Jg,e-1)}focusMainContainer(){m(this,xu).focus()}findParent(e,t){for(const n of m(this,Un).values()){const{x:i,y:s,width:a,height:o}=n.div.getBoundingClientRect();if(e>=i&&e<=i+a&&t>=s&&t<=s+o)return n}return null}disableUserSelect(e=!1){m(this,Z1).classList.toggle("noUserSelect",e)}addShouldRescale(e){m(this,Df).add(e)}removeShouldRescale(e){m(this,Df).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Sd.PDF_TO_CSS_UNITS;for(const n of m(this,Df))n.onScaleChanging();(t=m(this,oh))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:a,focusOffset:o}=n,l=n.toString(),c=z(this,je,pE).call(this,n).closest(".textLayer"),h=this.getSelectionBoxes(c);if(!h)return;n.empty();const d=z(this,je,rI).call(this,c),f=m(this,Mn)===Dt.NONE,p=()=>{const g=d==null?void 0:d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:i,anchorOffset:s,focusNode:a,focusOffset:o,text:l});f&&this.showAllEditors("highlight",!0,!0),t&&(g==null||g.editComment())};if(f){this.switchToMode(Dt.HIGHLIGHT,p);return}p()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!m(this,Ga))return null;const t=`${N1}${e}`,n=m(this,Ga).getRawValue(t);return n&&m(this,Ga).remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&m(this,Ga)&&!m(this,Ga).has(e.id)&&m(this,Ga).setValue(e.id,e)}a11yAlert(e,t=null){const n=m(this,ew);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,m(this,ch)&&(k(this,ch,!1),z(this,je,ib).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of m(this,lr))if(t.div.contains(e)){k(this,Mf,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!m(this,Mf))return;const[e,t]=m(this,Mf);k(this,Mf,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){z(this,je,nI).call(this),this.setEditingState(!0)}removeEditListeners(){z(this,je,jH).call(this),this.setEditingState(!1)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of m(this,Ka))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of m(this,Ka))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=m(this,ta))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of m(this,lr)){const s=i.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const a of m(this,Ka))if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(s){At(`paste: "${s.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const s=[];for(const l of n){const u=await i.deserialize(l);if(!u)return;s.push(u)}const a=()=>{for(const l of s)z(this,je,iI).call(this,l);z(this,je,sI).call(this,s)},o=()=>{for(const l of s)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(s){At(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),m(this,Mn)!==Dt.NONE&&!this.isEditorHandlingKeyboard&&Eg._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,m(this,ch)&&(k(this,ch,!1),z(this,je,ib).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(z(this,je,UH).call(this),z(this,je,qH).call(this),z(this,je,ls).call(this,{isEditing:m(this,Mn)!==Dt.NONE,isEmpty:z(this,je,sb).call(this),hasSomethingToUndo:m(this,Wa).hasSomethingToUndo(),hasSomethingToRedo:m(this,Wa).hasSomethingToRedo(),hasSelectedEditor:!1})):(z(this,je,zH).call(this),z(this,je,HH).call(this),z(this,je,ls).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!m(this,Ka)){k(this,Ka,e);for(const t of m(this,Ka))z(this,je,fu).call(this,t.defaultPropertiesToUpdate)}}getId(){return m(this,VT).id}get currentLayer(){return m(this,Un).get(m(this,Jg))}getLayer(e){return m(this,Un).get(e)}get currentPageIndex(){return m(this,Jg)}addLayer(e){m(this,Un).set(e.pageIndex,e),m(this,hh)?e.enable():e.disable()}removeLayer(e){m(this,Un).delete(e.pageIndex)}async updateMode(e,t=null,n=!1,i=!1,s=!1){var a,o,l,u,c,h;if(m(this,Mn)!==e&&!(m(this,Xa)&&(await m(this,Xa).promise,!m(this,Xa)))){if(k(this,Xa,Promise.withResolvers()),(a=m(this,oh))==null||a.commitOrRemove(),m(this,Mn)===Dt.POPUP&&((o=m(this,Gi))==null||o.hideSidebar()),(l=m(this,Gi))==null||l.destroyPopup(),k(this,Mn,e),e===Dt.NONE){this.setEditingState(!1),z(this,je,KH).call(this);for(const d of m(this,sn).values())d.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),m(this,Xa).resolve();return}for(const d of m(this,sn).values())d.addStandaloneCommentButton();e===Dt.SIGNATURE&&await((c=m(this,mh))==null?void 0:c.loadSignatures()),this.setEditingState(!0),await z(this,je,WH).call(this),this.unselectAll();for(const d of m(this,Un).values())d.updateMode(e);if(e===Dt.POPUP){m(this,Xg)||k(this,Xg,await m(this,nv).getAnnotationsByType(new Set(m(this,Ka).map(p=>p._editorType))));const d=new Set,f=[];for(const p of m(this,sn).values()){const{annotationElementId:g,hasComment:b,deleted:v}=p;g&&d.add(g),b&&!v&&f.push(p.getData())}for(const p of m(this,Xg)){const{id:g,popupRef:b,contentsObj:v}=p;b&&(v!=null&&v.str)&&!d.has(g)&&!m(this,lh).has(g)&&f.push(p)}(h=m(this,Gi))==null||h.showSidebar(f)}if(!t){n&&this.addNewEditorFromKeyboard(),m(this,Xa).resolve();return}for(const d of m(this,sn).values())d.uid===t?(this.setSelected(d),s?d.editComment():i?d.enterInEditMode():d.focus()):d.unselect();m(this,Xa).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==m(this,Mn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(m(this,Ka)){switch(e){case Kt.CREATE:this.currentLayer.addNewEditor(t);return;case Kt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(m(this,Q1)||k(this,Q1,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of m(this,lr))n.updateParams(e,t);else for(const n of m(this,Ka))n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var s;for(const a of m(this,sn).values())a.editorType===e&&a.show(t);(((s=m(this,Q1))==null?void 0:s.get(Kt.HIGHLIGHT_SHOW_ALL))??!0)!==t&&z(this,je,fu).call(this,[[Kt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(m(this,X1)!==e){k(this,X1,e);for(const t of m(this,Un).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of m(this,sn).values())t.pageIndex===e&&(yield t)}getEditor(e){return m(this,sn).get(e)}addEditor(e){m(this,sn).set(e.id,e)}removeEditor(e){var t,n;e.div.contains(document.activeElement)&&(m(this,pl)&&clearTimeout(m(this,pl)),k(this,pl,setTimeout(()=>{this.focusMainContainer(),k(this,pl,null)},0))),m(this,sn).delete(e.id),e.annotationElementId&&((t=m(this,fh))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!m(this,lh).has(e.annotationElementId))&&((n=m(this,Ga))==null||n.remove(e.id))}addDeletedAnnotationElement(e){m(this,lh).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return m(this,lh).has(e)}removeDeletedAnnotationElement(e){m(this,lh).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){m(this,ta)!==e&&(k(this,ta,e),e&&z(this,je,fu).call(this,e.propertiesToUpdate))}updateUI(e){m(this,je,XH)===e&&z(this,je,fu).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){z(this,je,fu).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(m(this,lr).has(e)){m(this,lr).delete(e),e.unselect(),z(this,je,ls).call(this,{hasSelectedEditor:this.hasSelection});return}m(this,lr).add(e),e.select(),z(this,je,fu).call(this,e.propertiesToUpdate),z(this,je,ls).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.uid}),(t=m(this,oh))==null||t.commitOrRemove();for(const n of m(this,lr))n!==e&&n.unselect();m(this,lr).clear(),m(this,lr).add(e),e.select(),z(this,je,fu).call(this,e.propertiesToUpdate),z(this,je,ls).call(this,{hasSelectedEditor:!0})}isSelected(e){return m(this,lr).has(e)}get firstSelectedEditor(){return m(this,lr).values().next().value}unselect(e){e.unselect(),m(this,lr).delete(e),z(this,je,ls).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return m(this,lr).size!==0}get isEnterHandled(){return m(this,lr).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;m(this,Wa).undo(),z(this,je,ls).call(this,{hasSomethingToUndo:m(this,Wa).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:z(this,je,sb).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){m(this,Wa).redo(),z(this,je,ls).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:m(this,Wa).hasSomethingToRedo(),isEmpty:z(this,je,sb).call(this)})}addCommands(e){m(this,Wa).add(e),z(this,je,ls).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:z(this,je,sb).call(this)})}cleanUndoStack(e){m(this,Wa).cleanType(e)}delete(){var s;this.commitOrRemove();const e=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...m(this,lr)],n=()=>{var a;(a=this._editorUndoBar)==null||a.show(i,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},i=()=>{for(const a of t)z(this,je,iI).call(this,a)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=m(this,ta))==null||e.commitOrRemove()}hasSomethingToControl(){return m(this,ta)||this.hasSelection}selectAll(){for(const e of m(this,lr))e.commit();z(this,je,sI).call(this,m(this,sn).values())}unselectAll(){var e;if(!(m(this,ta)&&(m(this,ta).commitOrRemove(),m(this,Mn)!==Dt.NONE))&&!((e=m(this,oh))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of m(this,lr))t.unselect();m(this,lr).clear(),z(this,je,ls).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;m(this,gh)[0]+=e,m(this,gh)[1]+=t;const[i,s]=m(this,gh),a=[...m(this,lr)],o=1e3;m(this,vl)&&clearTimeout(m(this,vl)),k(this,vl,setTimeout(()=>{k(this,vl,null),m(this,gh)[0]=m(this,gh)[1]=0,this.addCommands({cmd:()=>{for(const l of a)m(this,sn).has(l.id)&&(l.translateInPage(i,s),l.translationDone())},undo:()=>{for(const l of a)m(this,sn).has(l.id)&&(l.translateInPage(-i,-s),l.translationDone())},mustExec:!1})},o));for(const l of a)l.translateInPage(e,t),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),k(this,ml,new Map);for(const e of m(this,lr))m(this,ml).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!m(this,ml))return!1;this.disableUserSelect(!1);const e=m(this,ml);k(this,ml,null);let t=!1;for(const[{x:i,y:s,pageIndex:a},o]of e)o.newX=i,o.newY=s,o.newPageIndex=a,t||(t=i!==o.savedX||s!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const n=(i,s,a,o)=>{if(m(this,sn).has(i.id)){const l=m(this,Un).get(o);l?i._setParentAndPosition(l,s,a):(i.pageIndex=o,i.x=s,i.y=a)}};return this.addCommands({cmd:()=>{for(const[i,{newX:s,newY:a,newPageIndex:o}]of e)n(i,s,a,o)},undo:()=>{for(const[i,{savedX:s,savedY:a,savedPageIndex:o}]of e)n(i,s,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(m(this,ml))for(const n of m(this,ml).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||m(this,lr).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return m(this,ta)===e}getActive(){return m(this,ta)}getMode(){return m(this,Mn)}isEditingMode(){return m(this,Mn)!==Dt.NONE}get imageManager(){return Et(this,"imageManager",new eI)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,c=t.rangeCount;u<c;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:n,y:i,width:s,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(u,c,h,d)=>({x:(c-i)/a,y:1-(u+h-n)/s,width:d/a,height:h/s});break;case"180":o=(u,c,h,d)=>({x:1-(u+h-n)/s,y:1-(c+d-i)/a,width:h/s,height:d/a});break;case"270":o=(u,c,h,d)=>({x:1-(c+d-i)/a,y:(u-n)/s,width:d/a,height:h/s});break;default:o=(u,c,h,d)=>({x:(u-n)/s,y:(c-i)/a,width:h/s,height:d/a});break}const l=[];for(let u=0,c=t.rangeCount;u<c;u++){const h=t.getRangeAt(u);if(!h.collapsed)for(const{x:d,y:f,width:p,height:g}of h.getClientRects())p===0||g===0||l.push(o(d,f,p,g))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(m(this,Qg)||k(this,Qg,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=m(this,Qg))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=m(this,Qg))==null?void 0:i.get(e.data.id);if(!t)return;const n=m(this,Ga).getRawValue(t);n&&(m(this,Mn)===Dt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){var s;const i=(s=m(this,fh))==null?void 0:s.get(e);i&&(i.setCanvas(t,n),m(this,fh).delete(e))}addMissingCanvas(e,t){(m(this,fh)||k(this,fh,new Map)).set(e,t)}};Kg=new WeakMap,ta=new WeakMap,Xg=new WeakMap,sn=new WeakMap,Un=new WeakMap,Yg=new WeakMap,Ga=new WeakMap,Qg=new WeakMap,Wa=new WeakMap,Gi=new WeakMap,ah=new WeakMap,oh=new WeakMap,Jg=new WeakMap,lh=new WeakMap,ml=new WeakMap,Ka=new WeakMap,Df=new WeakMap,G1=new WeakMap,W1=new WeakMap,Zg=new WeakMap,K1=new WeakMap,pl=new WeakMap,uh=new WeakMap,ev=new WeakMap,ch=new WeakMap,gl=new WeakMap,VT=new WeakMap,hh=new WeakMap,tv=new WeakMap,X1=new WeakMap,dh=new WeakMap,Mf=new WeakMap,rv=new WeakMap,fh=new WeakMap,Y1=new WeakMap,Mn=new WeakMap,lr=new WeakMap,wu=new WeakMap,mh=new WeakMap,ph=new WeakMap,Q1=new WeakMap,nv=new WeakMap,J1=new WeakMap,gh=new WeakMap,vl=new WeakMap,xu=new WeakMap,Z1=new WeakMap,ew=new WeakMap,Xa=new WeakMap,je=new WeakSet,pE=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},rI=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of m(this,Un).values())if(n.hasTextLayer(e))return n;return null},LH=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=z(this,je,pE).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(m(this,gl)||k(this,gl,new xhe(this)),m(this,gl).show(n,i,this.direction==="ltr"))},$H=function(){var s,a,o;const e=document.getSelection();if(!e||e.isCollapsed){m(this,wu)&&((s=m(this,gl))==null||s.hide(),k(this,wu,null),z(this,je,ls).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===m(this,wu))return;const i=z(this,je,pE).call(this,e).closest(".textLayer");if(!i){m(this,wu)&&((a=m(this,gl))==null||a.hide(),k(this,wu,null),z(this,je,ls).call(this,{hasSelectedText:!1}));return}if((o=m(this,gl))==null||o.hide(),k(this,wu,t),z(this,je,ls).call(this,{hasSelectedText:!0}),!(m(this,Mn)!==Dt.HIGHLIGHT&&m(this,Mn)!==Dt.NONE)&&(m(this,Mn)===Dt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),k(this,ch,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=m(this,Mn)===Dt.HIGHLIGHT?z(this,je,rI).call(this,i):null;if(l==null||l.toggleDrawing(),m(this,tv)){const u=new AbortController,c=this.combinedSignal(u),h=d=>{d.type==="pointerup"&&d.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),d.type==="pointerup"&&z(this,je,ib).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:c}),window.addEventListener("blur",h,{signal:c})}else l==null||l.toggleDrawing(!0),z(this,je,ib).call(this,"main_toolbar")}},ib=function(e=""){m(this,Mn)===Dt.HIGHLIGHT?this.highlightSelection(e):m(this,G1)&&z(this,je,LH).call(this)},VH=function(){document.addEventListener("selectionchange",z(this,je,$H).bind(this),{signal:this._signal})},UH=function(){if(m(this,uh))return;k(this,uh,new AbortController);const e=this.combinedSignal(m(this,uh));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},zH=function(){var e;(e=m(this,uh))==null||e.abort(),k(this,uh,null)},nI=function(){if(m(this,dh))return;k(this,dh,new AbortController);const e=this.combinedSignal(m(this,dh));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},jH=function(){var e;(e=m(this,dh))==null||e.abort(),k(this,dh,null)},qH=function(){if(m(this,ah))return;k(this,ah,new AbortController);const e=this.combinedSignal(m(this,ah));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},HH=function(){var e;(e=m(this,ah))==null||e.abort(),k(this,ah,null)},GH=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},ls=function(e){Object.entries(e).some(([n,i])=>m(this,J1)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(m(this,J1),e)}),m(this,Mn)===Dt.HIGHLIGHT&&e.hasSelectedEditor===!1&&z(this,je,fu).call(this,[[Kt.HIGHLIGHT_FREE,!0]]))},fu=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},WH=async function(){if(!m(this,hh)){k(this,hh,!0);const e=[];for(const t of m(this,Un).values())e.push(t.enable());await Promise.all(e);for(const t of m(this,sn).values())t.enable()}},KH=function(){if(this.unselectAll(),m(this,hh)){k(this,hh,!1);for(const e of m(this,Un).values())e.disable();for(const e of m(this,sn).values())e.disable()}},iI=function(e){const t=m(this,Un).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},XH=function(){let e=null;for(e of m(this,lr));return e},sb=function(){if(m(this,sn).size===0)return!0;if(m(this,sn).size===1)for(const e of m(this,sn).values())return e.isEmpty();return!1},sI=function(e){for(const t of m(this,lr))t.unselect();m(this,lr).clear();for(const t of e)t.isEmpty()||(m(this,lr).add(t),t.select());z(this,je,ls).call(this,{hasSelectedEditor:this.hasSelection})},Pe(Eg,"TRANSLATE_SMALL",1),Pe(Eg,"TRANSLATE_BIG",10);let ip=Eg;var ii,yl,No,iv,bl,ra,sv,wl,Ps,_u,If,xl,vh,Ho,ab,gE;const us=class us{constructor(e){L(this,Ho);L(this,ii,null);L(this,yl,!1);L(this,No,null);L(this,iv,null);L(this,bl,null);L(this,ra,null);L(this,sv,!1);L(this,wl,null);L(this,Ps,null);L(this,_u,null);L(this,If,null);L(this,xl,!1);k(this,Ps,e),k(this,xl,e._uiManager.useNewAltTextFlow),m(us,vh)||k(us,vh,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){us._l10n??(us._l10n=e)}async render(){const e=k(this,No,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=k(this,iv,document.createElement("span"));e.append(t),m(this,xl)?(e.classList.add("new"),e.setAttribute("data-l10n-id",m(us,vh).missing),t.setAttribute("data-l10n-id",m(us,vh)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=m(this,Ps)._uiManager._signal;e.addEventListener("contextmenu",vo,{signal:n}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:n});const i=s=>{s.preventDefault(),m(this,Ps)._uiManager.editAltText(m(this,Ps)),m(this,xl)&&m(this,Ps)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:m(this,Ho,ab)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(k(this,sv,!0),i(s))},{signal:n}),await z(this,Ho,gE).call(this),e}finish(){m(this,No)&&(m(this,No).focus({focusVisible:m(this,sv)}),k(this,sv,!1))}isEmpty(){return m(this,xl)?m(this,ii)===null:!m(this,ii)&&!m(this,yl)}hasData(){return m(this,xl)?m(this,ii)!==null||!!m(this,_u):this.isEmpty()}get guessedText(){return m(this,_u)}async setGuessedText(e){m(this,ii)===null&&(k(this,_u,e),k(this,If,await us._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),z(this,Ho,gE).call(this))}toggleAltTextBadge(e=!1){var t;if(!m(this,xl)||m(this,ii)){(t=m(this,wl))==null||t.remove(),k(this,wl,null);return}if(!m(this,wl)){const n=k(this,wl,document.createElement("div"));n.className="noAltTextBadge",m(this,Ps).div.append(n)}m(this,wl).classList.toggle("hidden",!e)}serialize(e){let t=m(this,ii);return!e&&m(this,_u)===t&&(t=m(this,If)),{altText:t,decorative:m(this,yl),guessedText:m(this,_u),textWithDisclaimer:m(this,If)}}get data(){return{altText:m(this,ii),decorative:m(this,yl)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:i,cancel:s=!1}){n&&(k(this,_u,n),k(this,If,i)),!(m(this,ii)===e&&m(this,yl)===t)&&(s||(k(this,ii,e),k(this,yl,t)),z(this,Ho,gE).call(this))}toggle(e=!1){m(this,No)&&(!e&&m(this,ra)&&(clearTimeout(m(this,ra)),k(this,ra,null)),m(this,No).disabled=!e)}shown(){m(this,Ps)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:m(this,Ho,ab)}})}destroy(){var e,t;(e=m(this,No))==null||e.remove(),k(this,No,null),k(this,iv,null),k(this,bl,null),(t=m(this,wl))==null||t.remove(),k(this,wl,null)}};ii=new WeakMap,yl=new WeakMap,No=new WeakMap,iv=new WeakMap,bl=new WeakMap,ra=new WeakMap,sv=new WeakMap,wl=new WeakMap,Ps=new WeakMap,_u=new WeakMap,If=new WeakMap,xl=new WeakMap,vh=new WeakMap,Ho=new WeakSet,ab=function(){return m(this,ii)&&"added"||m(this,ii)===null&&this.guessedText&&"review"||"missing"},gE=async function(){var i,s,a;const e=m(this,No);if(!e)return;if(m(this,xl)){if(e.classList.toggle("done",!!m(this,ii)),e.setAttribute("data-l10n-id",m(us,vh)[m(this,Ho,ab)]),(i=m(this,iv))==null||i.setAttribute("data-l10n-id",m(us,vh)[`${m(this,Ho,ab)}-label`]),!m(this,ii)){(s=m(this,bl))==null||s.remove();return}}else{if(!m(this,ii)&&!m(this,yl)){e.classList.remove("done"),(a=m(this,bl))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=m(this,bl);if(!t){k(this,bl,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${m(this,Ps).id}`;const o=100,l=m(this,Ps)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(m(this,ra)),k(this,ra,null)},{once:!0}),e.addEventListener("mouseenter",()=>{k(this,ra,setTimeout(()=>{k(this,ra,null),m(this,bl).classList.add("show"),m(this,Ps)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:l}),e.addEventListener("mouseleave",()=>{var u;m(this,ra)&&(clearTimeout(m(this,ra)),k(this,ra,null)),(u=m(this,bl))==null||u.classList.remove("show")},{signal:l})}m(this,yl)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=m(this,ii)),t.parentNode||e.append(t);const n=m(this,Ps).getElementForAltText();n==null||n.setAttribute("aria-describedby",t.id)},L(us,vh,null),Pe(us,"_l10n",null);let jS=us;var yi,Ya,Pf,Pr,tw,Rf,Do,kf,Ff,Of,rw,aI;class hA{constructor(e){L(this,rw);L(this,yi,null);L(this,Ya,null);L(this,Pf,!1);L(this,Pr,null);L(this,tw,null);L(this,Rf,null);L(this,Do,null);L(this,kf,null);L(this,Ff,!1);L(this,Of,null);k(this,Pr,e)}renderForToolbar(){const e=k(this,Ya,document.createElement("button"));return e.className="comment",z(this,rw,aI).call(this,e,!1)}renderForStandalone(){const e=k(this,yi,document.createElement("button"));e.className="annotationCommentButton";const t=m(this,Pr).commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd=`calc(${100*(m(this,Pr)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const i=m(this,Pr).commentButtonColor;i&&(n.backgroundColor=i)}return z(this,rw,aI).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=m(this,yi)??m(this,Ya))==null||e.focus()},0)}onUpdatedColor(){if(!m(this,yi))return;const e=m(this,Pr).commentButtonColor;e&&(m(this,yi).style.backgroundColor=e),m(this,Pr)._uiManager.updatePopupColor(m(this,Pr))}get commentButtonWidth(){var e;return(((e=m(this,yi))==null?void 0:e.getBoundingClientRect().width)??0)/m(this,Pr).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(m(this,Of))return m(this,Of);if(!m(this,yi))return null;const{x:e,y:t,height:n}=m(this,yi).getBoundingClientRect(),{x:i,y:s,width:a,height:o}=m(this,Pr).parent.boundingClientRect;return[(e-i)/a,(t+n-s)/o]}set commentPopupPositionInLayer(e){k(this,Of,e)}hasDefaultPopupPosition(){return m(this,Of)===null}removeStandaloneCommentButton(){var e;(e=m(this,yi))==null||e.remove(),k(this,yi,null)}removeToolbarCommentButton(){var e;(e=m(this,Ya))==null||e.remove(),k(this,Ya,null)}setCommentButtonStates({selected:e,hasPopup:t}){m(this,yi)&&(m(this,yi).classList.toggle("selected",e),m(this,yi).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let n,i;if(t)[n,i]=t;else{[n,i]=m(this,Pr).commentButtonPosition;const{width:c,height:h,x:d,y:f}=m(this,Pr);n=d+n*c,i=f+i*h}const s=m(this,Pr).parent.boundingClientRect,{x:a,y:o,width:l,height:u}=s;m(this,Pr)._uiManager.editComment(m(this,Pr),a+n*l,o+i*u,{...e,parentDimensions:s})}finish(){m(this,Ya)&&(m(this,Ya).focus({focusVisible:m(this,Pf)}),k(this,Pf,!1))}isDeleted(){return m(this,Ff)||m(this,Do)===""}isEmpty(){return m(this,Do)===null}hasBeenEdited(){return this.isDeleted()||m(this,Do)!==m(this,tw)}serialize(){return this.data}get data(){return{text:m(this,Do),richText:m(this,Rf),date:m(this,kf),deleted:this.isDeleted()}}set data(e){if(e!==m(this,Do)&&k(this,Rf,null),e===null){k(this,Do,""),k(this,Ff,!0);return}k(this,Do,e),k(this,kf,new Date),k(this,Ff,!1)}setInitialText(e,t=null){k(this,tw,e),this.data=e,k(this,kf,null),k(this,Rf,t)}shown(){}destroy(){var e,t;(e=m(this,Ya))==null||e.remove(),k(this,Ya,null),(t=m(this,yi))==null||t.remove(),k(this,yi,null),k(this,Do,""),k(this,Rf,null),k(this,kf,null),k(this,Pr,null),k(this,Pf,!1),k(this,Ff,!1)}}yi=new WeakMap,Ya=new WeakMap,Pf=new WeakMap,Pr=new WeakMap,tw=new WeakMap,Rf=new WeakMap,Do=new WeakMap,kf=new WeakMap,Ff=new WeakMap,Of=new WeakMap,rw=new WeakSet,aI=function(e,t){if(!m(this,Pr)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[m(this,Pr)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=m(this,Pr)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",vo,{signal:n}),t&&(e.addEventListener("focusin",s=>{m(this,Pr)._focusEventsAllowed=!1,dn(s)},{capture:!0,signal:n}),e.addEventListener("focusout",s=>{m(this,Pr)._focusEventsAllowed=!0,dn(s)},{capture:!0,signal:n})),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:n});const i=s=>{s.preventDefault(),e===m(this,Ya)?this.edit():m(this,Pr).toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(k(this,Pf,!0),i(s))},{signal:n}),e.addEventListener("pointerenter",()=>{m(this,Pr).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{m(this,Pr).toggleComment(!1,!1)},{signal:n}),e};var av,Bf,nw,iw,sw,aw,ow,Au,Lf,Eu,$f,Su,Md,YH,QH,JH;const MO=class MO{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:s=null,onPinchEnd:a=null,signal:o}){L(this,Md);L(this,av);L(this,Bf,!1);L(this,nw,null);L(this,iw);L(this,sw);L(this,aw);L(this,ow);L(this,Au,null);L(this,Lf);L(this,Eu,null);L(this,$f);L(this,Su,null);k(this,av,e),k(this,nw,n),k(this,iw,t),k(this,sw,i),k(this,aw,s),k(this,ow,a),k(this,$f,new AbortController),k(this,Lf,AbortSignal.any([o,m(this,$f).signal])),e.addEventListener("touchstart",z(this,Md,YH).bind(this),{passive:!1,signal:m(this,Lf)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Zl.pixelRatio}destroy(){var e,t;(e=m(this,$f))==null||e.abort(),k(this,$f,null),(t=m(this,Au))==null||t.abort(),k(this,Au,null)}};av=new WeakMap,Bf=new WeakMap,nw=new WeakMap,iw=new WeakMap,sw=new WeakMap,aw=new WeakMap,ow=new WeakMap,Au=new WeakMap,Lf=new WeakMap,Eu=new WeakMap,$f=new WeakMap,Su=new WeakMap,Md=new WeakSet,YH=function(e){var i,s,a;if((i=m(this,iw))!=null&&i.call(this))return;if(e.touches.length===1){if(m(this,Au))return;const o=k(this,Au,new AbortController),l=AbortSignal.any([m(this,Lf),o.signal]),u=m(this,av),c={capture:!0,signal:l,passive:!1},h=d=>{var f;d.pointerType==="touch"&&((f=m(this,Au))==null||f.abort(),k(this,Au,null))};u.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(dn(d),h(d))},c),u.addEventListener("pointerup",h,c),u.addEventListener("pointercancel",h,c);return}if(!m(this,Su)){k(this,Su,new AbortController);const o=AbortSignal.any([m(this,Lf),m(this,Su).signal]),l=m(this,av),u={signal:o,capture:!1,passive:!1};l.addEventListener("touchmove",z(this,Md,QH).bind(this),u);const c=z(this,Md,JH).bind(this);l.addEventListener("touchend",c,u),l.addEventListener("touchcancel",c,u),u.capture=!0,l.addEventListener("pointerdown",dn,u),l.addEventListener("pointermove",dn,u),l.addEventListener("pointercancel",dn,u),l.addEventListener("pointerup",dn,u),(s=m(this,sw))==null||s.call(this)}if(dn(e),e.touches.length!==2||(a=m(this,nw))!=null&&a.call(this)){k(this,Eu,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),k(this,Eu,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},QH=function(e){var A;if(!m(this,Eu)||e.touches.length!==2)return;dn(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:i,screenY:s}=t,{screenX:a,screenY:o}=n,l=m(this,Eu),{touch0X:u,touch0Y:c,touch1X:h,touch1Y:d}=l,f=h-u,p=d-c,g=a-i,b=o-s,v=Math.hypot(g,b)||1,w=Math.hypot(f,p)||1;if(!m(this,Bf)&&Math.abs(w-v)<=MO.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=s,l.touch1X=a,l.touch1Y=o,!m(this,Bf)){k(this,Bf,!0);return}const y=[(i+a)/2,(s+o)/2];(A=m(this,aw))==null||A.call(this,y,w,v)},JH=function(e){var t;e.touches.length>=2||(m(this,Su)&&(m(this,Su).abort(),k(this,Su,null),(t=m(this,ow))==null||t.call(this)),m(this,Eu)&&(dn(e),k(this,Eu,null),k(this,Bf,!1)))};let qS=MO;var Vf,Mo,jr,Sr,Tu,ov,yh,lw,bi,Uf,Cu,Qa,bh,uw,zf,na,cw,jf,Nu,_l,lv,uv,Ja,qf,hw,UT,ht,oI,dw,lI,vE,ZH,eG,uI,yE,cI,tG,rG,nG,hI,iG,dI,sG,aG,oG,fI,ob;const Nt=class Nt{constructor(e){L(this,ht);L(this,Vf,null);L(this,Mo,null);L(this,jr,null);L(this,Sr,null);L(this,Tu,null);L(this,ov,!1);L(this,yh,null);L(this,lw,"");L(this,bi,null);L(this,Uf,null);L(this,Cu,null);L(this,Qa,null);L(this,bh,null);L(this,uw,"");L(this,zf,!1);L(this,na,null);L(this,cw,!1);L(this,jf,!1);L(this,Nu,!1);L(this,_l,null);L(this,lv,0);L(this,uv,0);L(this,Ja,null);L(this,qf,null);Pe(this,"isSelected",!1);Pe(this,"_isCopy",!1);Pe(this,"_editToolbar",null);Pe(this,"_initialOptions",Object.create(null));Pe(this,"_initialData",null);Pe(this,"_isVisible",!0);Pe(this,"_uiManager",null);Pe(this,"_focusEventsAllowed",!0);L(this,hw,!1);L(this,UT,Nt._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[s,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Nt.prototype._resizeWithKeyboard,t=ip.TRANSLATE_SMALL,n=ip.TRANSLATE_BIG;return Et(this,"_resizerKeyboardManager",new n_([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Nt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Et(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Ehe({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Nt._l10n??(Nt._l10n=e),Nt._l10nResizer||(Nt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Nt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Nt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Dr("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return m(this,hw)}set _isDraggable(e){var t;k(this,hw,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=m(this,UT)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(z(this,ht,ob).call(this),(t=m(this,Qa))==null||t.remove(),k(this,Qa,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(m(this,zf)?k(this,zf,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[s,a]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/s,this.y=(t+i)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,i]=this.parentDimensions;this.setAt(e*n,t*i,this.width*n,this.height*i),this._onTranslated()}translate(e,t){z(this,ht,oI).call(this,this.parentDimensions,e,t)}translateInPage(e,t){m(this,na)||k(this,na,[this.x,this.y,this.width,this.height]),z(this,ht,oI).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){m(this,na)||k(this,na,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,s]}=this;if(this.x+=e/i,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[l,u]=this.getBaseTranslation();a+=l,o+=u;const{style:c}=n;c.left=`${(100*a).toFixed(2)}%`,c.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!m(this,na)&&(m(this,na)[0]!==this.x||m(this,na)[1]!==this.y)}get _hasBeenResized(){return!!m(this,na)&&(m(this,na)[2]!==this.width||m(this,na)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Nt,i=n/e,s=n/t;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,i]}=this;let{x:s,y:a,width:o,height:l}=this;if(o*=n,l*=i,s*=n,a*=i,this._mustFixPosition)switch(e){case 0:s=ms(s,0,n-o),a=ms(a,0,i-l);break;case 90:s=ms(s,0,n-l),a=ms(a,o,i);break;case 180:s=ms(s,o,n),a=ms(a,l,i);break;case 270:s=ms(s,l,n),a=ms(a,0,i-o);break}this.x=s/=n,this.y=a/=i;const[u,c]=this.getBaseTranslation();s+=u,a+=c,t.left=`${(100*s).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return z(n=Nt,dw,lI).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return z(n=Nt,dw,lI).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=m(this,jr))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||m(this,jf))return this._editToolbar;this._editToolbar=new JM(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=m(this,jr))==null||t.destroy()}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return m(this,jr)||(jS.initialize(Nt._l10n),k(this,jr,new jS(this)),m(this,Vf)&&(m(this,jr).data=m(this,Vf),k(this,Vf,null))),m(this,jr)}get altTextData(){var e;return(e=m(this,jr))==null?void 0:e.data}set altTextData(e){m(this,jr)&&(m(this,jr).data=e)}get guessedAltText(){var e;return(e=m(this,jr))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=m(this,jr))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=m(this,jr))==null?void 0:t.serialize(e)}hasAltText(){return!!m(this,jr)&&!m(this,jr).isEmpty()}hasAltTextData(){var e;return((e=m(this,jr))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=m(this,Sr))==null||e.focusButton()}addCommentButton(){return this.canAddComment?m(this,Sr)||k(this,Sr,new hA(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(m(this,Tu)){this._uiManager.isEditingMode()&&m(this,Tu).classList.remove("hidden");return}this.hasComment&&(k(this,Tu,m(this,Sr).renderForStandalone()),this.div.append(m(this,Tu)))}}removeStandaloneCommentButton(){m(this,Sr).removeStandaloneCommentButton(),k(this,Tu,null)}hideStandaloneCommentButton(){var e;(e=m(this,Tu))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:n,deleted:i}}=m(this,Sr);return{text:t,richText:e,date:n,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){m(this,Sr)||k(this,Sr,new hA(this)),m(this,Sr).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(m(this,Sr)||k(this,Sr,new hA(this)),m(this,Sr).setInitialText(e,n),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){var e;return(e=m(this,Sr))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=m(this,Sr))==null?void 0:e.isDeleted()}get hasComment(){return!!m(this,Sr)&&!m(this,Sr).isEmpty()&&!m(this,Sr).isDeleted()}async editComment(e){m(this,Sr)||k(this,Sr,new hA(this)),m(this,Sr).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){m(this,Sr).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[s]=this.pageDimensions,[a]=this.pageTranslation,o=a+s+1,l=i-100,u=o+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[o,l,u,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){m(this,Sr).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var a;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=m(this,ov)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),z(this,ht,dI).call(this);const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),OH(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(m(this,qf)||k(this,qf,new qS({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:z(this,ht,tG).bind(this),onPinching:z(this,ht,rG).bind(this),onPinchEnd:z(this,ht,nG).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(a=this._uiManager._editorUndoBar)==null||a.hide(),e}pointerdown(e){const{isMac:t}=Ri.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(k(this,zf,!0),this._isDraggable){z(this,ht,iG).call(this,e);return}z(this,ht,hI).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){m(this,_l)&&clearTimeout(m(this,_l)),k(this,_l,setTimeout(()=>{var e;k(this,_l,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const i=this.parentScale,[s,a]=this.pageDimensions,[o,l]=this.pageTranslation,u=e/i,c=t/i,h=this.x*s,d=this.y*a,f=this.width*s,p=this.height*a;switch(n){case 0:return[h+u+o,a-d-c-p+l,h+u+f+o,a-d-c+l];case 90:return[h+c+o,a-d+u+l,h+c+p+o,a-d+u+f+l];case 180:return[h-u-f+o,a-d+c+l,h-u+o,a-d+c+p+l];case 270:return[h-c-p+o,a-d-u-f+l,h-c+o,a-d-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,s,a]=e,o=s-n,l=a-i;switch(this.rotation){case 0:return[n,t-a,o,l];case 90:return[n,t-i,l,o];case 180:return[s,t-i,o,l];case 270:return[s,t-a,l,o];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Nt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=m(this,Sr))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:i,deleted:s,richText:a},uid:o,pageIndex:l,creationDate:u,modificationDate:c}=this;return{id:o,pageIndex:l,rect:this.getPDFRect(),richText:a,contentsObj:{str:e},creationDate:u,modificationDate:n||c,popupRef:!s,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),k(this,jf,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),k(this,jf,!1),!0):!1}isInEditMode(){return m(this,jf)}shouldGetKeyboardEvents(){return m(this,Nu)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return t<a&&i>0&&e<s&&n>0}rebuild(){z(this,ht,dI).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,k(i,Vf,e.accessibilityData),i._isCopy=e.isCopy||!1;const[s,a]=i.pageDimensions,[o,l,u,c]=i.getRectInCurrentCoords(e.rect,a);return i.x=o/s,i.y=l/a,i.width=u/s,i.height=c/a,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t,n;if((e=m(this,bh))==null||e.abort(),k(this,bh,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),m(this,_l)&&(clearTimeout(m(this,_l)),k(this,_l,null)),z(this,ht,ob).call(this),this.removeEditToolbar(),m(this,Ja)){for(const i of m(this,Ja).values())clearTimeout(i);k(this,Ja,null)}this.parent=null,(t=m(this,qf))==null||t.destroy(),k(this,qf,null),(n=m(this,Qa))==null||n.remove(),k(this,Qa,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(z(this,ht,ZH).call(this),m(this,bi).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,i,s,a]=this.getPDFRect();return[Nt._round(n+(s-n)*e),Nt._round(i+(a-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return m(this,Sr).commentPopupPositionInLayer}set commentPopupPosition(e){m(this,Sr).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return m(this,Sr).hasDefaultPopupPosition()}get commentButtonWidth(){return m(this,Sr).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){var t;(t=m(this,Sr))==null||t.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),k(this,Cu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=m(this,bi).children;if(!m(this,Mo)){k(this,Mo,Array.from(t));const a=z(this,ht,sG).bind(this),o=z(this,ht,aG).bind(this),l=this._uiManager._signal;for(const u of m(this,Mo)){const c=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",a,{signal:l}),u.addEventListener("blur",o,{signal:l}),u.addEventListener("focus",z(this,ht,oG).bind(this,c),{signal:l}),u.setAttribute("data-l10n-id",Nt._l10nResizer[c])}}const n=m(this,Mo)[0];let i=0;for(const a of t){if(a===n)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(m(this,Mo).length/4);if(s!==i){if(s<i)for(let o=0;o<i-s;o++)m(this,bi).append(m(this,bi).firstElementChild);else if(s>i)for(let o=0;o<s-i;o++)m(this,bi).firstElementChild.before(m(this,bi).lastElementChild);let a=0;for(const o of t){const u=m(this,Mo)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",Nt._l10nResizer[u])}}z(this,ht,fI).call(this,0),k(this,Nu,!0),m(this,bi).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){m(this,Nu)&&z(this,ht,cI).call(this,m(this,uw),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){z(this,ht,ob).call(this),this.div.focus()}select(){var e,t,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,s;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(t=this._editToolbar)==null||t.show(),(n=m(this,jr))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,n,i,s;this.isSelected&&(this.isSelected=!1,(e=m(this,bi))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(s=m(this,jr))==null||s.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return m(this,cw)}set isEditing(e){k(this,cw,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){m(this,Ja)||k(this,Ja,new Map);const{action:n}=e;let i=m(this,Ja).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),m(this,Ja).delete(n),m(this,Ja).size===0&&k(this,Ja,null)},Nt._telemetryTimeout),m(this,Ja).set(n,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),k(this,ov,!1)}disable(){this.div&&(this.div.tabIndex=-1),k(this,ov,!0)}updateFakeAnnotationElement(e){if(!m(this,Qa)&&!this.deleted){k(this,Qa,e.addFakeAnnotation(this));return}if(this.deleted){m(this,Qa).remove(),k(this,Qa,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&m(this,Qa).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstElementChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Vf=new WeakMap,Mo=new WeakMap,jr=new WeakMap,Sr=new WeakMap,Tu=new WeakMap,ov=new WeakMap,yh=new WeakMap,lw=new WeakMap,bi=new WeakMap,Uf=new WeakMap,Cu=new WeakMap,Qa=new WeakMap,bh=new WeakMap,uw=new WeakMap,zf=new WeakMap,na=new WeakMap,cw=new WeakMap,jf=new WeakMap,Nu=new WeakMap,_l=new WeakMap,lv=new WeakMap,uv=new WeakMap,Ja=new WeakMap,qf=new WeakMap,hw=new WeakMap,UT=new WeakMap,ht=new WeakSet,oI=function([e,t],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},dw=new WeakSet,lI=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},vE=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},ZH=function(){if(m(this,bi))return;k(this,bi,document.createElement("div")),m(this,bi).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const i=document.createElement("div");m(this,bi).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",z(this,ht,eG).bind(this,n),{signal:t}),i.addEventListener("contextmenu",vo,{signal:t}),i.tabIndex=-1}this.div.prepend(m(this,bi))},eG=function(e,t){var c;t.preventDefault();const{isMac:n}=Ri.platform;if(t.button!==0||t.ctrlKey&&n)return;(c=m(this,jr))==null||c.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,k(this,Uf,[t.screenX,t.screenY]);const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",z(this,ht,cI).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",dn,{passive:!1,signal:a}),window.addEventListener("contextmenu",vo,{signal:a}),k(this,Cu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var h;s.abort(),this.parent.togglePointerEvents(!0),(h=m(this,jr))==null||h.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=o,this.div.style.cursor=l,z(this,ht,yE).call(this)};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})},uI=function(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},yE=function(){if(!m(this,Cu))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=m(this,Cu);k(this,Cu,null);const s=this.x,a=this.y,o=this.width,l=this.height;s===e&&a===t&&o===n&&l===i||this.addCommands({cmd:z(this,ht,uI).bind(this,s,a,o,l),undo:z(this,ht,uI).bind(this,e,t,n,i),mustExec:!0})},cI=function(e,t){const[n,i]=this.parentDimensions,s=this.x,a=this.y,o=this.width,l=this.height,u=Nt.MIN_SIZE/n,c=Nt.MIN_SIZE/i,h=z(this,ht,vE).call(this,this.rotation),d=(F,U)=>[h[0]*F+h[2]*U,h[1]*F+h[3]*U],f=z(this,ht,vE).call(this,360-this.rotation),p=(F,U)=>[f[0]*F+f[2]*U,f[1]*F+f[3]*U];let g,b,v=!1,w=!1;switch(e){case"topLeft":v=!0,g=(F,U)=>[0,0],b=(F,U)=>[F,U];break;case"topMiddle":g=(F,U)=>[F/2,0],b=(F,U)=>[F/2,U];break;case"topRight":v=!0,g=(F,U)=>[F,0],b=(F,U)=>[0,U];break;case"middleRight":w=!0,g=(F,U)=>[F,U/2],b=(F,U)=>[0,U/2];break;case"bottomRight":v=!0,g=(F,U)=>[F,U],b=(F,U)=>[0,0];break;case"bottomMiddle":g=(F,U)=>[F/2,U],b=(F,U)=>[F/2,0];break;case"bottomLeft":v=!0,g=(F,U)=>[0,U],b=(F,U)=>[F,0];break;case"middleLeft":w=!0,g=(F,U)=>[0,U/2],b=(F,U)=>[F,U/2];break}const y=g(o,l),A=b(o,l);let x=d(...A);const _=Nt._round(s+x[0]),S=Nt._round(a+x[1]);let E=1,C=1,N,D;if(t.fromKeyboard)({deltaX:N,deltaY:D}=t);else{const{screenX:F,screenY:U}=t,[j,G]=m(this,Uf);[N,D]=this.screenToPageTranslation(F-j,U-G),m(this,Uf)[0]=F,m(this,Uf)[1]=U}if([N,D]=p(N/n,D/i),v){const F=Math.hypot(o,l);E=C=Math.max(Math.min(Math.hypot(A[0]-y[0]-N,A[1]-y[1]-D)/F,1/o,1/l),u/o,c/l)}else w?E=ms(Math.abs(A[0]-y[0]-N),u,1)/o:C=ms(Math.abs(A[1]-y[1]-D),c,1)/l;const M=Nt._round(o*E),I=Nt._round(l*C);x=d(...b(M,I));const V=_-x[0],K=S-x[1];m(this,na)||k(this,na,[this.x,this.y,this.width,this.height]),this.width=M,this.height=I,this.x=V,this.y=K,this.setDims(),this.fixAndSetPosition(),this._onResizing()},tG=function(){var e;k(this,Cu,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=m(this,jr))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},rG=function(e,t,n){let s=.7*(n/t)+1-.7;if(s===1)return;const a=z(this,ht,vE).call(this,this.rotation),o=(_,S)=>[a[0]*_+a[2]*S,a[1]*_+a[3]*S],[l,u]=this.parentDimensions,c=this.x,h=this.y,d=this.width,f=this.height,p=Nt.MIN_SIZE/l,g=Nt.MIN_SIZE/u;s=Math.max(Math.min(s,1/d,1/f),p/d,g/f);const b=Nt._round(d*s),v=Nt._round(f*s);if(b===d&&v===f)return;m(this,na)||k(this,na,[c,h,d,f]);const w=o(d/2,f/2),y=Nt._round(c+w[0]),A=Nt._round(h+w[1]),x=o(b/2,v/2);this.x=y-x[0],this.y=A-x[1],this.width=b,this.height=v,this.setDims(),this.fixAndSetPosition(),this._onResizing()},nG=function(){var e;(e=m(this,jr))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),z(this,ht,yE).call(this)},hI=function(e){const{isMac:t}=Ri.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},iG=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,s=this._uiManager.combinedSignal(i),a={capture:!0,passive:!1,signal:s},o=u=>{i.abort(),k(this,yh,null),k(this,zf,!1),this._uiManager.endDragSession()||z(this,ht,hI).call(this,u),n&&this._onStopDragging()};t&&(k(this,lv,e.clientX),k(this,uv,e.clientY),k(this,yh,e.pointerId),k(this,lw,e.pointerType),window.addEventListener("pointermove",u=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:c,clientY:h,pointerId:d}=u;if(d!==m(this,yh)){dn(u);return}const[f,p]=this.screenToPageTranslation(c-m(this,lv),h-m(this,uv));k(this,lv,c),k(this,uv,h),this._uiManager.dragSelectedEditors(f,p)},a),window.addEventListener("touchmove",dn,a),window.addEventListener("pointerdown",u=>{u.pointerType===m(this,lw)&&(m(this,qf)||u.isPrimary)&&o(u),dn(u)},a));const l=u=>{if(!m(this,yh)||m(this,yh)===u.pointerId){o(u);return}dn(u)};window.addEventListener("pointerup",l,{signal:s}),window.addEventListener("blur",l,{signal:s})},dI=function(){if(m(this,bh)||!this.div)return;k(this,bh,new AbortController);const e=this._uiManager.combinedSignal(m(this,bh));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},sG=function(e){Nt._resizerKeyboardManager.exec(this,e)},aG=function(e){var t;m(this,Nu)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==m(this,bi)&&z(this,ht,ob).call(this)},oG=function(e){k(this,uw,m(this,Nu)?e:"")},fI=function(e){if(m(this,Mo))for(const t of m(this,Mo))t.tabIndex=e},ob=function(){k(this,Nu,!1),z(this,ht,fI).call(this,-1),z(this,ht,yE).call(this)},L(Nt,dw),Pe(Nt,"_l10n",null),Pe(Nt,"_l10nResizer",null),Pe(Nt,"_borderLineWidth",-1),Pe(Nt,"_colorManager",new tI),Pe(Nt,"_zIndex",1),Pe(Nt,"_telemetryTimeout",1e3);let Fr=Nt;class Ehe extends Fr{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const s5=3285377520,La=4294901760,cl=65535;class lG{constructor(e){this.h1=e?e&4294967295:s5,this.h2=e?e&4294967295:s5}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let g=0,b=e.length;g<b;g++){const v=e.charCodeAt(g);v<=255?t[n++]=v:(t[n++]=v>>>8,t[n++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,s=n-i*4,a=new Uint32Array(t.buffer,0,i);let o=0,l=0,u=this.h1,c=this.h2;const h=3432918353,d=461845907,f=h&cl,p=d&cl;for(let g=0;g<i;g++)g&1?(o=a[g],o=o*h&La|o*f&cl,o=o<<15|o>>>17,o=o*d&La|o*p&cl,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(l=a[g],l=l*h&La|l*f&cl,l=l<<15|l>>>17,l=l*d&La|l*p&cl,c^=l,c=c<<13|c>>>19,c=c*5+3864292196);switch(o=0,s){case 3:o^=t[i*4+2]<<16;case 2:o^=t[i*4+1]<<8;case 1:o^=t[i*4],o=o*h&La|o*f&cl,o=o<<15|o>>>17,o=o*d&La|o*p&cl,i&1?u^=o:c^=o}this.h1=u,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&La|e*36045&cl,t=t*4283543511&La|((t<<16|e>>>16)*2950163797&La)>>>16,e^=t>>>1,e=e*444984403&La|e*60499&cl,t=t*3301882366&La|((t<<16|e>>>16)*3120437893&La)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const mI=Object.freeze({map:null,hash:"",transfer:void 0});var Hf,Gf,Du,wi,zT,uG;class xF{constructor(){L(this,zT);L(this,Hf,!1);L(this,Gf,null);L(this,Du,null);L(this,wi,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=m(this,wi).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return m(this,wi).get(e)}remove(e){const t=m(this,wi).get(e);if(t!==void 0&&(t instanceof Fr&&m(this,Du).delete(t.annotationElementId),m(this,wi).delete(e),m(this,wi).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of m(this,wi).values())if(n instanceof Fr)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=m(this,wi).get(e);let i=!1;if(n!==void 0)for(const[s,a]of Object.entries(t))n[s]!==a&&(i=!0,n[s]=a);else i=!0,m(this,wi).set(e,t);i&&z(this,zT,uG).call(this),t instanceof Fr&&((m(this,Du)||k(this,Du,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return m(this,wi).has(e)}get size(){return m(this,wi).size}resetModified(){m(this,Hf)&&(k(this,Hf,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new cG(this)}get serializable(){if(m(this,wi).size===0)return mI;const e=new Map,t=new lG,n=[],i=Object.create(null);let s=!1;for(const[a,o]of m(this,wi)){const l=o instanceof Fr?o.serialize(!1,i):o;l&&(e.set(a,l),t.update(`${a}:${JSON.stringify(l)}`),s||(s=!!l.bitmap))}if(s)for(const a of e.values())a.bitmap&&n.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:mI}get editorStats(){let e=null;const t=new Map;let n=0,i=0;for(const s of m(this,wi).values()){if(!(s instanceof Fr)){s.popup&&(s.popup.deleted?i+=1:n+=1);continue}s.isCommentDeleted?i+=1:s.hasEditedComment&&(n+=1);const a=s.telemetryFinalData;if(!a)continue;const{type:o}=a;t.has(o)||t.set(o,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const l=e[o]||(e[o]=new Map);for(const[u,c]of Object.entries(a)){if(u==="type")continue;let h=l.get(u);h||(h=new Map,l.set(u,h));const d=h.get(c)??0;h.set(c,d+1)}}if((i>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:i,edited:n}),!e)return null;for(const[s,a]of t)e[s]=a.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){k(this,Gf,null)}updateEditor(e,t){var i;const n=(i=m(this,Du))==null?void 0:i.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=m(this,Du))==null?void 0:t.get(e))||null}get modifiedIds(){if(m(this,Gf))return m(this,Gf);const e=[];if(m(this,Du))for(const t of m(this,Du).values())t.serialize()&&e.push(t.annotationElementId);return k(this,Gf,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return m(this,wi).entries()}}Hf=new WeakMap,Gf=new WeakMap,Du=new WeakMap,wi=new WeakMap,zT=new WeakSet,uG=function(){m(this,Hf)||(k(this,Hf,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var fw;class cG extends xF{constructor(t){super();L(this,fw);const{map:n,hash:i,transfer:s}=t.serializable,a=structuredClone(n,s?{transfer:s}:null);k(this,fw,{map:a,hash:i,transfer:s})}get print(){Dr("Should not call PrintAnnotationStorage.print")}get serializable(){return m(this,fw)}get modifiedIds(){return Et(this,"modifiedIds",{ids:new Set,hash:""})}}fw=new WeakMap;var cv;class She{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){L(this,cv,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),m(this,cv).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||m(this,cv).has(e.loadedName))){if(Xt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:a}=e,o=new FontFace(i,s,a);this.addNativeFontFace(o);try{await o.load(),m(this,cv).add(i),n==null||n(e)}catch{At(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Dr("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw At(`Failed to load font '${n.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Et(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Et(this,"isSyncFontLoadingSupported",fs||Ri.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Xt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const s=n.shift();setTimeout(s.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:t,callback:e};return n.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Et(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(A,x){return A.charCodeAt(x)<<24|A.charCodeAt(x+1)<<16|A.charCodeAt(x+2)<<8|A.charCodeAt(x+3)&255}function i(A,x,_,S){const E=A.substring(0,x),C=A.substring(x+_);return E+S+C}let s,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let u=0;function c(A,x){if(++u>30){At("Load test font never loaded."),x();return}if(l.font="30px "+A,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){x();return}setTimeout(c.bind(null,A,x))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=i(d,976,h.length,h);const p=16,g=1482184792;let b=n(d,p);for(s=0,a=h.length-3;s<a;s+=4)b=b-g+n(h,s)|0;s<h.length&&(b=b-g+n(h+"XXX",s)|0),d=i(d,p,4,she(b));const v=`url(data:font/opentype;base64,${btoa(d)});`,w=`@font-face {font-family:"${h}";src:${v}}`;this.insertRule(w);const y=this._document.createElement("div");y.style.visibility="hidden",y.style.width=y.style.height="10px",y.style.position="absolute",y.style.top=y.style.left="0px";for(const A of[e.loadedName,h]){const x=this._document.createElement("span");x.textContent="Hi",x.style.fontFamily=A,y.append(x)}this._document.body.append(y),c(h,()=>{y.remove(),t.complete()})}}cv=new WeakMap;var vr;class The{constructor(e,t=null,n,i){L(this,vr);this.compiledGlyphs=Object.create(null),k(this,vr,e),this._inspectFont=t,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${CH(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let i;try{i=e.get(n)}catch(a){At(`getPathGenerator - ignoring character: "${a}".`)}const s=MH(i);return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=s}get black(){return m(this,vr).black}get bold(){return m(this,vr).bold}get disableFontFace(){return m(this,vr).disableFontFace??!1}set disableFontFace(e){Et(this,"disableFontFace",!!e)}get fontExtraProperties(){return m(this,vr).fontExtraProperties??!1}get isInvalidPDFjsFont(){return m(this,vr).isInvalidPDFjsFont}get isType3Font(){return m(this,vr).isType3Font}get italic(){return m(this,vr).italic}get missingFile(){return m(this,vr).missingFile}get remeasure(){return m(this,vr).remeasure}get vertical(){return m(this,vr).vertical}get ascent(){return m(this,vr).ascent}get defaultWidth(){return m(this,vr).defaultWidth}get descent(){return m(this,vr).descent}get bbox(){return m(this,vr).bbox}set bbox(e){Et(this,"bbox",e)}get fontMatrix(){return m(this,vr).fontMatrix}get fallbackName(){return m(this,vr).fallbackName}get loadedName(){return m(this,vr).loadedName}get mimetype(){return m(this,vr).mimetype}get name(){return m(this,vr).name}get data(){return m(this,vr).data}clearData(){m(this,vr).clearData()}get cssFontInfo(){return m(this,vr).cssFontInfo}get systemFontInfo(){return m(this,vr).systemFontInfo}get defaultVMetrics(){return m(this,vr).defaultVMetrics}}vr=new WeakMap;var hv,dv,mw,fv,bE;const Sg=class Sg{constructor(e){L(this,fv);L(this,hv);L(this,dv);L(this,mw);k(this,hv,e),k(this,dv,new DataView(m(this,hv))),k(this,mw,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let i=0;for(const u of Sg.strings){const c=t.encode(e[u]);n[u]=c,i+=4+c.length}const s=new ArrayBuffer(i),a=new Uint8Array(s),o=new DataView(s);let l=0;for(const u of Sg.strings){const c=n[u],h=c.length;o.setUint32(l,h),a.set(c,l+4),l+=4+h}return Xt(l===s.byteLength,"CssFontInfo.write: Buffer overflow"),s}get fontFamily(){return z(this,fv,bE).call(this,0)}get fontWeight(){return z(this,fv,bE).call(this,1)}get italicAngle(){return z(this,fv,bE).call(this,2)}};hv=new WeakMap,dv=new WeakMap,mw=new WeakMap,fv=new WeakSet,bE=function(e){Xt(e<Sg.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=m(this,dv).getUint32(t)+4;const n=m(this,dv).getUint32(t);return m(this,mw).decode(new Uint8Array(m(this,hv),t+4,n))},Pe(Sg,"strings",["fontFamily","fontWeight","italicAngle"]);let HS=Sg;var wh,Al,Wf,Kf,lb;const Tg=class Tg{constructor(e){L(this,Kf);L(this,wh);L(this,Al);L(this,Wf);k(this,wh,e),k(this,Al,new DataView(m(this,wh))),k(this,Wf,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let i=0;for(const d of Tg.strings){const f=t.encode(e[d]);n[d]=f,i+=4+f.length}i+=4;let s,a,o=1+i;e.style&&(s=t.encode(e.style.style),a=t.encode(e.style.weight),o+=4+s.length+4+a.length);const l=new ArrayBuffer(o),u=new Uint8Array(l),c=new DataView(l);let h=0;c.setUint8(h++,e.guessFallback?1:0),c.setUint32(h,0),h+=4,i=0;for(const d of Tg.strings){const f=n[d],p=f.length;i+=4+p,c.setUint32(h,p),u.set(f,h+4),h+=4+p}return c.setUint32(h-i-4,i),e.style&&(c.setUint32(h,s.length),u.set(s,h+4),h+=4+s.length,c.setUint32(h,a.length),u.set(a,h+4),h+=4+a.length),Xt(h<=l.byteLength,"SubstitionInfo.write: Buffer overflow"),l.transferToFixedLength(h)}get guessFallback(){return m(this,Al).getUint8(0)!==0}get css(){return z(this,Kf,lb).call(this,0)}get loadedName(){return z(this,Kf,lb).call(this,1)}get baseFontName(){return z(this,Kf,lb).call(this,2)}get src(){return z(this,Kf,lb).call(this,3)}get style(){let e=1;e+=4+m(this,Al).getUint32(e);const t=m(this,Al).getUint32(e),n=m(this,Wf).decode(new Uint8Array(m(this,wh),e+4,t));e+=4+t;const i=m(this,Al).getUint32(e),s=m(this,Wf).decode(new Uint8Array(m(this,wh),e+4,i));return{style:n,weight:s}}};wh=new WeakMap,Al=new WeakMap,Wf=new WeakMap,Kf=new WeakSet,lb=function(e){Xt(e<Tg.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=m(this,Al).getUint32(t)+4;const n=m(this,Al).getUint32(t);return m(this,Wf).decode(new Uint8Array(m(this,wh),t+4,n))},Pe(Tg,"strings",["css","loadedName","baseFontName","src"]);let GS=Tg;var mv,pv,gv,vv,ia,El,pw,yr,cn,Eo,wE,ub;const It=class It{constructor({data:e,extra:t}){L(this,cn);L(this,El);L(this,pw);L(this,yr);k(this,El,e),k(this,pw,new TextDecoder),k(this,yr,new DataView(m(this,El))),t&&Object.assign(this,t)}get black(){return z(this,cn,Eo).call(this,0)}get bold(){return z(this,cn,Eo).call(this,1)}get disableFontFace(){return z(this,cn,Eo).call(this,2)}get fontExtraProperties(){return z(this,cn,Eo).call(this,3)}get isInvalidPDFjsFont(){return z(this,cn,Eo).call(this,4)}get isType3Font(){return z(this,cn,Eo).call(this,5)}get italic(){return z(this,cn,Eo).call(this,6)}get missingFile(){return z(this,cn,Eo).call(this,7)}get remeasure(){return z(this,cn,Eo).call(this,8)}get vertical(){return z(this,cn,Eo).call(this,9)}get ascent(){return z(this,cn,wE).call(this,0)}get defaultWidth(){return z(this,cn,wE).call(this,1)}get descent(){return z(this,cn,wE).call(this,2)}get bbox(){let e=m(It,pv);if(m(this,yr).getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<4;i++)n.push(m(this,yr).getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=m(It,gv);if(m(this,yr).getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<6;i++)n.push(m(this,yr).getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=m(It,vv);if(m(this,yr).getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<3;i++)n.push(m(this,yr).getInt16(e,!0)),e+=2;return n}get fallbackName(){return z(this,cn,ub).call(this,0)}get loadedName(){return z(this,cn,ub).call(this,1)}get mimetype(){return z(this,cn,ub).call(this,2)}get name(){return z(this,cn,ub).call(this,3)}get data(){let e=m(It,ia);const t=m(this,yr).getUint32(e);e+=4+t;const n=m(this,yr).getUint32(e);e+=4+n;const i=m(this,yr).getUint32(e);e+=4+i;const s=m(this,yr).getUint32(e);if(s!==0)return new Uint8Array(m(this,El),e+4,s)}clearData(){let e=m(It,ia);const t=m(this,yr).getUint32(e);e+=4+t;const n=m(this,yr).getUint32(e);e+=4+n;const i=m(this,yr).getUint32(e);e+=4+i;const s=m(this,yr).getUint32(e);new Uint8Array(m(this,El),e+4,s).fill(0),m(this,yr).setUint32(e,0)}get cssFontInfo(){let e=m(It,ia);const t=m(this,yr).getUint32(e);e+=4+t;const n=m(this,yr).getUint32(e);e+=4+n;const i=m(this,yr).getUint32(e);if(i===0)return null;const s=new Uint8Array(i);return s.set(new Uint8Array(m(this,El),e+4,i)),new HS(s.buffer)}get systemFontInfo(){let e=m(It,ia);const t=m(this,yr).getUint32(e);e+=4+t;const n=m(this,yr).getUint32(e);if(n===0)return null;const i=new Uint8Array(n);return i.set(new Uint8Array(m(this,El),e+4,n)),new GS(i.buffer)}static write(e){const t=e.systemFontInfo?GS.write(e.systemFontInfo):null,n=e.cssFontInfo?HS.write(e.cssFontInfo):null,i=new TextEncoder,s={};let a=0;for(const g of It.strings)s[g]=i.encode(e[g]),a+=4+s[g].length;const o=m(It,ia)+4+a+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),l=new ArrayBuffer(o),u=new Uint8Array(l),c=new DataView(l);let h=0;const d=It.bools.length;let f=0,p=0;for(let g=0;g<d;g++){const b=e[It.bools[g]];f|=(b===void 0?0:b?2:1)<<p,p+=2,(p===8||g===d-1)&&(c.setUint8(h++,f),f=0,p=0)}Xt(h===m(It,mv),"FontInfo.write: Boolean properties offset mismatch");for(const g of It.numbers)c.setFloat64(h,e[g]),h+=8;if(Xt(h===m(It,pv),"FontInfo.write: Number properties offset mismatch"),e.bbox){c.setUint8(h++,4);for(const g of e.bbox)c.setInt16(h,g,!0),h+=2}else c.setUint8(h++,0),h+=2*4;if(Xt(h===m(It,gv),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){c.setUint8(h++,6);for(const g of e.fontMatrix)c.setFloat64(h,g,!0),h+=8}else c.setUint8(h++,0),h+=8*6;if(Xt(h===m(It,vv),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){c.setUint8(h++,1);for(const g of e.defaultVMetrics)c.setInt16(h,g,!0),h+=2}else c.setUint8(h++,0),h+=3*2;Xt(h===m(It,ia),"FontInfo.write: DefaultVMetrics properties offset mismatch"),c.setUint32(m(It,ia),0),h+=4;for(const g of It.strings){const b=s[g],v=b.length;c.setUint32(h,v),u.set(b,h+4),h+=4+v}if(c.setUint32(m(It,ia),h-m(It,ia)-4),!t)c.setUint32(h,0),h+=4;else{const g=t.byteLength;c.setUint32(h,g),Xt(h+4+g<=l.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(t),h+4),h+=4+g}if(!n)c.setUint32(h,0),h+=4;else{const g=n.byteLength;c.setUint32(h,g),Xt(h+4+g<=l.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(n),h+4),h+=4+g}return e.data===void 0?(c.setUint32(h,0),h+=4):(c.setUint32(h,e.data.length),u.set(e.data,h+4),h+=4+e.data.length),Xt(h<=l.byteLength,"FontInfo.write: Buffer overflow"),l.transferToFixedLength(h)}};mv=new WeakMap,pv=new WeakMap,gv=new WeakMap,vv=new WeakMap,ia=new WeakMap,El=new WeakMap,pw=new WeakMap,yr=new WeakMap,cn=new WeakSet,Eo=function(e){Xt(e<It.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=e*2%8,i=m(this,yr).getUint8(t)>>n&3;return i===0?void 0:i===2},wE=function(e){return Xt(e<It.numbers.length,"Invalid number index"),m(this,yr).getFloat64(m(It,mv)+e*8)},ub=function(e){Xt(e<It.strings.length,"Invalid string index");let t=m(It,ia)+4;for(let s=0;s<e;s++)t+=m(this,yr).getUint32(t)+4;const n=m(this,yr).getUint32(t),i=new Uint8Array(n);return i.set(new Uint8Array(m(this,El),t+4,n)),m(this,pw).decode(i)},Pe(It,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),Pe(It,"numbers",["ascent","defaultWidth","descent"]),Pe(It,"strings",["fallbackName","loadedName","mimetype","name"]),L(It,mv,Math.ceil(It.bools.length*2/8)),L(It,pv,m(It,mv)+It.numbers.length*8),L(It,gv,m(It,pv)+1+2*4),L(It,vv,m(It,gv)+1+8*6),L(It,ia,m(It,vv)+1+2*3);let pI=It;var gw,vw,yw,bw,ww,xw,_w,Aw;const Ir=class Ir{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,n=null,i=[],s=[],a=[],o=[],l=null,u=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,n=e[2],a=e[3],t===1?i.push(...e[4],...e[5]):i.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,l=e[1],i=e[2],s=e[3],o=e[4]||[],n=e[6],u=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const c=Math.floor(i.length/2),h=Math.floor(s.length/3),d=a.length,f=o.length;let p=0;for(const x of o)p+=1,p=Math.ceil(p/4)*4,p+=4+x.coords.length*4,p+=4+x.colors.length*4,x.verticesPerRow!==void 0&&(p+=4);const g=20+c*8+h*3+d*8+(n?16:0)+(u?3:0)+p,b=new ArrayBuffer(g),v=new DataView(b),w=new Uint8Array(b);v.setUint8(m(Ir,gw),t),v.setUint8(m(Ir,vw),n?1:0),v.setUint8(m(Ir,yw),u?1:0),v.setUint8(m(Ir,bw),l),v.setUint32(m(Ir,ww),c,!0),v.setUint32(m(Ir,xw),h,!0),v.setUint32(m(Ir,_w),d,!0),v.setUint32(m(Ir,Aw),f,!0);let y=20;new Float32Array(b,y,c*2).set(i),y+=c*8,w.set(s,y),y+=h*3;for(const[x,_]of a)v.setFloat32(y,x,!0),y+=4,v.setUint32(y,parseInt(_.slice(1),16),!0),y+=4;if(n)for(const x of n)v.setFloat32(y,x,!0),y+=4;u&&(w.set(u,y),y+=3);for(let x=0;x<o.length;x++){const _=o[x];v.setUint8(y,_.type),y+=1,y=Math.ceil(y/4)*4,v.setUint32(y,_.coords.length,!0),y+=4,new Int32Array(b,y,_.coords.length).set(_.coords),y+=_.coords.length*4,v.setUint32(y,_.colors.length,!0),y+=4,new Int32Array(b,y,_.colors.length).set(_.colors),y+=_.colors.length*4,_.verticesPerRow!==void 0&&(v.setUint32(y,_.verticesPerRow,!0),y+=4)}return b}getIR(){const e=this.view,t=this.data[m(Ir,gw)],n=!!this.data[m(Ir,vw)],i=!!this.data[m(Ir,yw)],s=e.getUint32(m(Ir,ww),!0),a=e.getUint32(m(Ir,xw),!0),o=e.getUint32(m(Ir,_w),!0),l=e.getUint32(m(Ir,Aw),!0);let u=20;const c=new Float32Array(this.buffer,u,s*2);u+=s*8;const h=new Uint8Array(this.buffer,u,a*3);u+=a*3;const d=[];for(let b=0;b<o;++b){const v=e.getFloat32(u,!0);u+=4;const w=e.getUint32(u,!0);u+=4,d.push([v,`#${w.toString(16).padStart(6,"0")}`])}let f=null;if(n){f=[];for(let b=0;b<4;++b)f.push(e.getFloat32(u,!0)),u+=4}let p=null;i&&(p=new Uint8Array(this.buffer,u,3),u+=3);const g=[];for(let b=0;b<l;++b){const v=e.getUint8(u);u+=1,u=Math.ceil(u/4)*4;const w=e.getUint32(u,!0);u+=4;const y=new Int32Array(this.buffer,u,w);u+=w*4;const A=e.getUint32(u,!0);u+=4;const x=new Int32Array(this.buffer,u,A);u+=A*4;const _={type:v,coords:y,colors:x};v===WM.LATTICE&&(_.verticesPerRow=e.getUint32(u,!0),u+=4),g.push(_)}if(t===1)return["RadialAxial","axial",f,d,Array.from(c.slice(0,2)),Array.from(c.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",f,d,[c[0],c[1]],[c[3],c[4]],c[2],c[5]];if(t===3){const b=this.data[m(Ir,bw)];let v=null;if(c.length>0){let w=c[0],y=c[0],A=c[1],x=c[1];for(let _=0;_<c.length;_+=2){const S=c[_],E=c[_+1];w=w>S?S:w,A=A>E?E:A,y=y<S?S:y,x=x<E?E:x}v=[w,A,y,x]}return["Mesh",b,c,h,g,v,f,p]}throw new Error(`Unsupported pattern kind: ${t}`)}};gw=new WeakMap,vw=new WeakMap,yw=new WeakMap,bw=new WeakMap,ww=new WeakMap,xw=new WeakMap,_w=new WeakMap,Aw=new WeakMap,L(Ir,gw,0),L(Ir,vw,1),L(Ir,yw,2),L(Ir,bw,3),L(Ir,ww,4),L(Ir,xw,8),L(Ir,_w,12),L(Ir,Aw,16);let gI=Ir;function Che(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(fs)return r;const e=URL.parse(r,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Nhe(r){if(fs&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return Zx(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r==null?void 0:r.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function dA(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const vI=r=>typeof r=="object"&&Number.isInteger(r==null?void 0:r.num)&&r.num>=0&&Number.isInteger(r==null?void 0:r.gen)&&r.gen>=0,Dhe=r=>typeof r=="object"&&typeof(r==null?void 0:r.name)=="string",Mhe=che.bind(null,vI,Dhe);var Mu,jT;class Ihe{constructor(){L(this,Mu,new Map);L(this,jT,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};m(this,jT).then(()=>{for(const[i]of m(this,Mu))i.call(this,n)})}addEventListener(e,t,n=null){let i=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:s}=n;if(s.aborted){At("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);i=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}m(this,Mu).set(t,i)}removeEventListener(e,t){const n=m(this,Mu).get(t);n==null||n(),m(this,Mu).delete(t)}terminate(){for(const[,e]of m(this,Mu))e==null||e();m(this,Mu).clear()}}Mu=new WeakMap,jT=new WeakMap;const fA={DATA:1,ERROR:2},Cn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function a5(){}function Ms(r){if(r instanceof Ed||r instanceof KM||r instanceof JL||r instanceof US||r instanceof O2)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||Dr('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new Ed(r.message);case"InvalidPDFException":return new KM(r.message);case"PasswordException":return new JL(r.message,r.code);case"ResponseException":return new US(r.message,r.status,r.missing);case"UnknownErrorException":return new O2(r.message,r.details)}return new O2(r.message,r.toString())}var yv,mo,hG,dG,fG,xE;class cb{constructor(e,t,n){L(this,mo);L(this,yv,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",z(this,mo,hG).bind(this),{signal:m(this,yv).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,t,n,i){const s=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const c=Promise.withResolvers();return this.streamControllers[s]={controller:u,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:e,streamId:s,data:t,desiredSize:u.desiredSize},i),c.promise},pull:u=>{const c=Promise.withResolvers();return this.streamControllers[s].pullCall=c,l.postMessage({sourceName:a,targetName:o,stream:Cn.PULL,streamId:s,desiredSize:u.desiredSize}),c.promise},cancel:u=>{Xt(u instanceof Error,"cancel must have a valid reason");const c=Promise.withResolvers();return this.streamControllers[s].cancelCall=c,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:Cn.CANCEL,streamId:s,reason:Ms(u)}),c.promise}},n)}destroy(){var e;(e=m(this,yv))==null||e.abort(),k(this,yv,null)}}yv=new WeakMap,mo=new WeakSet,hG=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){z(this,mo,fG).call(this,e);return}if(e.callback){const n=e.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===fA.DATA)i.resolve(e.data);else if(e.callback===fA.ERROR)i.reject(Ms(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,i=e.sourceName,s=this.comObj;Promise.try(t,e.data).then(function(a){s.postMessage({sourceName:n,targetName:i,callback:fA.DATA,callbackId:e.callbackId,data:a})},function(a){s.postMessage({sourceName:n,targetName:i,callback:fA.ERROR,callbackId:e.callbackId,reason:Ms(a)})});return}if(e.streamId){z(this,mo,dG).call(this,e);return}t(e.data)},dG=function(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,s=this.comObj,a=this,o=this.actionHandler[e.action],l={enqueue(u,c=1,h){if(this.isCancelled)return;const d=this.desiredSize;this.desiredSize-=c,d>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:i,stream:Cn.ENQUEUE,streamId:t,chunk:u},h)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:Cn.CLOSE,streamId:t}),delete a.streamSinks[t])},error(u){Xt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:i,stream:Cn.ERROR,streamId:t,reason:Ms(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(o,e.data,l).then(function(){s.postMessage({sourceName:n,targetName:i,stream:Cn.START_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:n,targetName:i,stream:Cn.START_COMPLETE,streamId:t,reason:Ms(u)})})},fG=function(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,s=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case Cn.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Ms(e.reason));break;case Cn.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Ms(e.reason));break;case Cn.PULL:if(!o){s.postMessage({sourceName:n,targetName:i,stream:Cn.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||a5).then(function(){s.postMessage({sourceName:n,targetName:i,stream:Cn.PULL_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:n,targetName:i,stream:Cn.PULL_COMPLETE,streamId:t,reason:Ms(u)})});break;case Cn.ENQUEUE:if(Xt(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Cn.CLOSE:if(Xt(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),z(this,mo,xE).call(this,a,t);break;case Cn.ERROR:Xt(a,"error should have stream controller"),a.controller.error(Ms(e.reason)),z(this,mo,xE).call(this,a,t);break;case Cn.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Ms(e.reason)),z(this,mo,xE).call(this,a,t);break;case Cn.CANCEL:if(!o)break;const l=Ms(e.reason);Promise.try(o.onCancel||a5,l).then(function(){s.postMessage({sourceName:n,targetName:i,stream:Cn.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:n,targetName:i,stream:Cn.CANCEL_COMPLETE,streamId:t,reason:Ms(u)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},xE=async function(e,t){var n,i,s;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(i=e.pullCall)==null?void 0:i.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[t]};var Ew;class mG{constructor({enableHWA:e=!1}){L(this,Ew,!1);k(this,Ew,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!m(this,Ew)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Dr("Abstract method `_createCanvas` called.")}}Ew=new WeakMap;class Phe extends mG{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class pG{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Dr("Abstract method `_fetch` called.")}}class o5 extends pG{async _fetch(e){const t=await e_(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Zx(t)}}class gG{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,s){return"none"}destroy(e=!1){}}var Xf,bv,Iu,Pu,Wi,Yf,Qf,Ke,ji,hb,Kp,_E,Xp,vG,yI,Yp,db,fb,bI,mb;class Rhe extends gG{constructor({docId:t,ownerDocument:n=globalThis.document}){super();L(this,Ke);L(this,Xf);L(this,bv);L(this,Iu);L(this,Pu);L(this,Wi);L(this,Yf);L(this,Qf,0);k(this,Pu,t),k(this,Wi,n)}addFilter(t){if(!t)return"none";let n=m(this,Ke,ji).get(t);if(n)return n;const[i,s,a]=z(this,Ke,_E).call(this,t),o=t.length===1?i:`${i}${s}${a}`;if(n=m(this,Ke,ji).get(o),n)return m(this,Ke,ji).set(t,n),n;const l=`g_${m(this,Pu)}_transfer_map_${Ln(this,Qf)._++}`,u=z(this,Ke,Xp).call(this,l);m(this,Ke,ji).set(t,u),m(this,Ke,ji).set(o,u);const c=z(this,Ke,Yp).call(this,l);return z(this,Ke,fb).call(this,i,s,a,c),u}addHCMFilter(t,n){var p;const i=`${t}-${n}`,s="base";let a=m(this,Ke,hb).get(s);if((a==null?void 0:a.key)===i||(a?((p=a.filter)==null||p.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},m(this,Ke,hb).set(s,a)),!t||!n))return a.url;const o=z(this,Ke,mb).call(this,t);t=Ze.makeHexColor(...o);const l=z(this,Ke,mb).call(this,n);if(n=Ze.makeHexColor(...l),m(this,Ke,Kp).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return a.url;const u=new Array(256);for(let g=0;g<=255;g++){const b=g/255;u[g]=b<=.03928?b/12.92:((b+.055)/1.055)**2.4}const c=u.join(","),h=`g_${m(this,Pu)}_hcm_filter`,d=a.filter=z(this,Ke,Yp).call(this,h);z(this,Ke,fb).call(this,c,c,c,d),z(this,Ke,yI).call(this,d);const f=(g,b)=>{const v=o[g]/255,w=l[g]/255,y=new Array(b+1);for(let A=0;A<=b;A++)y[A]=v+A/b*(w-v);return y.join(",")};return z(this,Ke,fb).call(this,f(0,5),f(1,5),f(2,5),d),a.url=z(this,Ke,Xp).call(this,h),a.url}addAlphaFilter(t){let n=m(this,Ke,ji).get(t);if(n)return n;const[i]=z(this,Ke,_E).call(this,[t]),s=`alpha_${i}`;if(n=m(this,Ke,ji).get(s),n)return m(this,Ke,ji).set(t,n),n;const a=`g_${m(this,Pu)}_alpha_map_${Ln(this,Qf)._++}`,o=z(this,Ke,Xp).call(this,a);m(this,Ke,ji).set(t,o),m(this,Ke,ji).set(s,o);const l=z(this,Ke,Yp).call(this,a);return z(this,Ke,bI).call(this,i,l),o}addLuminosityFilter(t){let n=m(this,Ke,ji).get(t||"luminosity");if(n)return n;let i,s;if(t?([i]=z(this,Ke,_E).call(this,[t]),s=`luminosity_${i}`):s="luminosity",n=m(this,Ke,ji).get(s),n)return m(this,Ke,ji).set(t,n),n;const a=`g_${m(this,Pu)}_luminosity_map_${Ln(this,Qf)._++}`,o=z(this,Ke,Xp).call(this,a);m(this,Ke,ji).set(t,o),m(this,Ke,ji).set(s,o);const l=z(this,Ke,Yp).call(this,a);return z(this,Ke,vG).call(this,l),t&&z(this,Ke,bI).call(this,i,l),o}addHighlightHCMFilter(t,n,i,s,a){var w;const o=`${n}-${i}-${s}-${a}`;let l=m(this,Ke,hb).get(t);if((l==null?void 0:l.key)===o||(l?((w=l.filter)==null||w.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},m(this,Ke,hb).set(t,l)),!n||!i))return l.url;const[u,c]=[n,i].map(z(this,Ke,mb).bind(this));let h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[f,p]=[s,a].map(z(this,Ke,mb).bind(this));d<h&&([h,d,f,p]=[d,h,p,f]),m(this,Ke,Kp).style.color="";const g=(y,A,x)=>{const _=new Array(256),S=(d-h)/x,E=y/255,C=(A-y)/(255*x);let N=0;for(let D=0;D<=x;D++){const M=Math.round(h+D*S),I=E+D*C;for(let V=N;V<=M;V++)_[V]=I;N=M+1}for(let D=N;D<256;D++)_[D]=_[N-1];return _.join(",")},b=`g_${m(this,Pu)}_hcm_${t}_filter`,v=l.filter=z(this,Ke,Yp).call(this,b);return z(this,Ke,yI).call(this,v),z(this,Ke,fb).call(this,g(f[0],p[0],5),g(f[1],p[1],5),g(f[2],p[2],5),v),l.url=z(this,Ke,Xp).call(this,b),l.url}destroy(t=!1){var n,i,s,a;t&&((n=m(this,Yf))!=null&&n.size)||((i=m(this,Iu))==null||i.parentNode.parentNode.remove(),k(this,Iu,null),(s=m(this,bv))==null||s.clear(),k(this,bv,null),(a=m(this,Yf))==null||a.clear(),k(this,Yf,null),k(this,Qf,0))}}Xf=new WeakMap,bv=new WeakMap,Iu=new WeakMap,Pu=new WeakMap,Wi=new WeakMap,Yf=new WeakMap,Qf=new WeakMap,Ke=new WeakSet,ji=function(){return m(this,bv)||k(this,bv,new Map)},hb=function(){return m(this,Yf)||k(this,Yf,new Map)},Kp=function(){if(!m(this,Iu)){const t=m(this,Wi).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=m(this,Wi).createElementNS(du,"svg");i.setAttribute("width",0),i.setAttribute("height",0),k(this,Iu,m(this,Wi).createElementNS(du,"defs")),t.append(i),i.append(m(this,Iu)),m(this,Wi).body.append(t)}return m(this,Iu)},_E=function(t){if(t.length===1){const u=t[0],c=new Array(256);for(let d=0;d<256;d++)c[d]=u[d]/255;const h=c.join(",");return[h,h,h]}const[n,i,s]=t,a=new Array(256),o=new Array(256),l=new Array(256);for(let u=0;u<256;u++)a[u]=n[u]/255,o[u]=i[u]/255,l[u]=s[u]/255;return[a.join(","),o.join(","),l.join(",")]},Xp=function(t){if(m(this,Xf)===void 0){k(this,Xf,"");const n=m(this,Wi).URL;n!==m(this,Wi).baseURI&&(GC(n)?At('#createUrl: ignore "data:"-URL for performance reasons.'):k(this,Xf,EH(n,"")))}return`url(${m(this,Xf)}#${t})`},vG=function(t){const n=m(this,Wi).createElementNS(du,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},yI=function(t){const n=m(this,Wi).createElementNS(du,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},Yp=function(t){const n=m(this,Wi).createElementNS(du,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),m(this,Ke,Kp).append(n),n},db=function(t,n,i){const s=m(this,Wi).createElementNS(du,n);s.setAttribute("type","discrete"),s.setAttribute("tableValues",i),t.append(s)},fb=function(t,n,i,s){const a=m(this,Wi).createElementNS(du,"feComponentTransfer");s.append(a),z(this,Ke,db).call(this,a,"feFuncR",t),z(this,Ke,db).call(this,a,"feFuncG",n),z(this,Ke,db).call(this,a,"feFuncB",i)},bI=function(t,n){const i=m(this,Wi).createElementNS(du,"feComponentTransfer");n.append(i),z(this,Ke,db).call(this,i,"feFuncA",t)},mb=function(t){return m(this,Ke,Kp).style.color=t,r_(getComputedStyle(m(this,Ke,Kp)).getPropertyValue("color"))};class yG{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Dr("Abstract method `_fetch` called.")}}class l5 extends yG{async _fetch(e){const t=await e_(e,"arraybuffer");return new Uint8Array(t)}}class bG{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Dr("Abstract method `_fetch` called.")}}class u5 extends bG{async _fetch(e){const t=await e_(e,"arraybuffer");return new Uint8Array(t)}}fs&&At("Please use the `legacy` build in Node.js environments.");async function _F(r){const t=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(t)}class khe extends gG{}class Fhe extends mG{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class Ohe extends pG{async _fetch(e){return _F(e)}}class Bhe extends yG{async _fetch(e){return _F(e)}}class Lhe extends bG{async _fetch(e){return _F(e)}}const kp="__forcedDependency",{floor:c5,ceil:h5}=Math;function mA(r,e,t,n,i,s){r[e*4+0]=Math.min(r[e*4+0],t),r[e*4+1]=Math.min(r[e*4+1],n),r[e*4+2]=Math.max(r[e*4+2],i),r[e*4+3]=Math.max(r[e*4+3],s)}const wI=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var wv,xh;class $he{constructor(e,t){L(this,wv);L(this,xh);k(this,wv,e),k(this,xh,t)}get length(){return m(this,wv).length}isEmpty(e){return m(this,wv)[e]===wI}minX(e){return m(this,xh)[e*4+0]/256}minY(e){return m(this,xh)[e*4+1]/256}maxX(e){return(m(this,xh)[e*4+2]+1)/256}maxY(e){return(m(this,xh)[e*4+3]+1)/256}}wv=new WeakMap,xh=new WeakMap;const pA=(r,e)=>{if(!r)return;let t=r.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},r.set(e,t)),t};var Rs,ks,Jf,Io,Zf,Ru,ur,br,ku,Fs,Sw,xv,em,tm,Fu,Ki,Sl,Tw,xI;class Vhe{constructor(e,t,n=!1){L(this,Tw);L(this,Rs,{__proto__:null});L(this,ks,{__proto__:null,transform:[],moveText:[],sameLineText:[],[kp]:[]});L(this,Jf,new Map);L(this,Io,[]);L(this,Zf,[]);L(this,Ru,[[1,0,0,1,0,0]]);L(this,ur,[-1/0,-1/0,1/0,1/0]);L(this,br,new Float64Array([1/0,1/0,-1/0,-1/0]));L(this,ku,-1);L(this,Fs,new Set);L(this,Sw,new Map);L(this,xv,new Map);L(this,em);L(this,tm);L(this,Fu);L(this,Ki);L(this,Sl);k(this,em,e.width),k(this,tm,e.height),z(this,Tw,xI).call(this,t),n&&k(this,Sl,new Map)}growOperationsCount(e){e>=m(this,Ki).length&&z(this,Tw,xI).call(this,e,m(this,Ki))}save(e){return k(this,Rs,{__proto__:m(this,Rs)}),k(this,ks,{__proto__:m(this,ks),transform:{__proto__:m(this,ks).transform},moveText:{__proto__:m(this,ks).moveText},sameLineText:{__proto__:m(this,ks).sameLineText},[kp]:{__proto__:m(this,ks)[kp]}}),k(this,ur,{__proto__:m(this,ur)}),m(this,Io).push(e),this}restore(e){var i;const t=Object.getPrototypeOf(m(this,Rs));if(t===null)return this;k(this,Rs,t),k(this,ks,Object.getPrototypeOf(m(this,ks))),k(this,ur,Object.getPrototypeOf(m(this,ur)));const n=m(this,Io).pop();return n!==void 0&&((i=pA(m(this,Sl),e))==null||i.dependencies.add(n),m(this,Ki)[e]=m(this,Ki)[n]),this}recordOpenMarker(e){return m(this,Io).push(e),this}getOpenMarker(){return m(this,Io).length===0?null:m(this,Io).at(-1)}recordCloseMarker(e){var n;const t=m(this,Io).pop();return t!==void 0&&((n=pA(m(this,Sl),e))==null||n.dependencies.add(t),m(this,Ki)[e]=m(this,Ki)[t]),this}beginMarkedContent(e){return m(this,Zf).push(e),this}endMarkedContent(e){var n;const t=m(this,Zf).pop();return t!==void 0&&((n=pA(m(this,Sl),e))==null||n.dependencies.add(t),m(this,Ki)[e]=m(this,Ki)[t]),this}pushBaseTransform(e){return m(this,Ru).push(Ze.multiplyByDOMMatrix(m(this,Ru).at(-1),e.getTransform())),this}popBaseTransform(){return m(this,Ru).length>1&&m(this,Ru).pop(),this}recordSimpleData(e,t){return m(this,Rs)[e]=t,this}recordIncrementalData(e,t){return m(this,ks)[e].push(t),this}resetIncrementalData(e,t){return m(this,ks)[e].length=0,this}recordNamedData(e,t){return m(this,Jf).set(e,t),this}recordSimpleDataFromNamed(e,t,n){m(this,Rs)[e]=m(this,Jf).get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(kp,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in m(this,Rs)&&this.recordFutureForcedDependency(t,m(this,Rs)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of m(this,Fs))this.recordFutureForcedDependency(kp,e);return this}resetBBox(e){return m(this,ku)!==e&&(k(this,ku,e),m(this,br)[0]=1/0,m(this,br)[1]=1/0,m(this,br)[2]=-1/0,m(this,br)[3]=-1/0),this}recordClipBox(e,t,n,i,s,a){const o=Ze.multiplyByDOMMatrix(m(this,Ru).at(-1),t.getTransform()),l=[1/0,1/0,-1/0,-1/0];Ze.axialAlignedBoundingBox([n,s,i,a],o,l);const u=Ze.intersect(m(this,ur),l);return u?(m(this,ur)[0]=u[0],m(this,ur)[1]=u[1],m(this,ur)[2]=u[2],m(this,ur)[3]=u[3]):(m(this,ur)[0]=m(this,ur)[1]=1/0,m(this,ur)[2]=m(this,ur)[3]=-1/0),this}recordBBox(e,t,n,i,s,a){const o=m(this,ur);if(o[0]===1/0)return this;const l=Ze.multiplyByDOMMatrix(m(this,Ru).at(-1),t.getTransform());if(o[0]===-1/0)return Ze.axialAlignedBoundingBox([n,s,i,a],l,m(this,br)),this;const u=[1/0,1/0,-1/0,-1/0];return Ze.axialAlignedBoundingBox([n,s,i,a],l,u),m(this,br)[0]=Math.min(m(this,br)[0],Math.max(u[0],o[0])),m(this,br)[1]=Math.min(m(this,br)[1],Math.max(u[1],o[1])),m(this,br)[2]=Math.max(m(this,br)[2],Math.min(u[2],o[2])),m(this,br)[3]=Math.max(m(this,br)[3],Math.min(u[3],o[3])),this}recordCharacterBBox(e,t,n,i=1,s=0,a=0,o){const l=n.bbox;let u,c;if(l&&(u=l[2]!==l[0]&&l[3]!==l[1]&&m(this,xv).get(n),u!==!1&&(c=[0,0,0,0],Ze.axialAlignedBoundingBox(l,n.fontMatrix,c),(i!==1||s!==0||a!==0)&&Ze.scaleMinMax([i,0,0,-i,s,a],c),u)))return this.recordBBox(e,t,c[0],c[2],c[1],c[3]);if(!o)return this.recordFullPageBBox(e);const h=o();return l&&c&&u===void 0&&(u=c[0]<=s-h.actualBoundingBoxLeft&&c[2]>=s+h.actualBoundingBoxRight&&c[1]<=a-h.actualBoundingBoxAscent&&c[3]>=a+h.actualBoundingBoxDescent,m(this,xv).set(n,u),u)?this.recordBBox(e,t,c[0],c[2],c[1],c[3]):this.recordBBox(e,t,s-h.actualBoundingBoxLeft,s+h.actualBoundingBoxRight,a-h.actualBoundingBoxAscent,a+h.actualBoundingBoxDescent)}recordFullPageBBox(e){return m(this,br)[0]=Math.max(0,m(this,ur)[0]),m(this,br)[1]=Math.max(0,m(this,ur)[1]),m(this,br)[2]=Math.min(m(this,em),m(this,ur)[2]),m(this,br)[3]=Math.min(m(this,tm),m(this,ur)[3]),this}getSimpleIndex(e){return m(this,Rs)[e]}recordDependencies(e,t){const n=m(this,Fs),i=m(this,Rs),s=m(this,ks);for(const a of t)a in m(this,Rs)?n.add(i[a]):a in s&&s[a].forEach(n.add,n);return this}recordNamedDependency(e,t){return m(this,Jf).has(t)&&m(this,Fs).add(m(this,Jf).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[kp]),m(this,Sl)){const n=pA(m(this,Sl),e),{dependencies:i}=n;m(this,Fs).forEach(i.add,i),m(this,Io).forEach(i.add,i),m(this,Zf).forEach(i.add,i),i.delete(e),n.isRenderingOperation=!0}if(m(this,ku)===e){const n=c5(m(this,br)[0]*256/m(this,em)),i=c5(m(this,br)[1]*256/m(this,tm)),s=h5(m(this,br)[2]*256/m(this,em)),a=h5(m(this,br)[3]*256/m(this,tm));mA(m(this,Fu),e,n,i,s,a);for(const o of m(this,Fs))o!==e&&mA(m(this,Fu),o,n,i,s,a);for(const o of m(this,Io))o!==e&&mA(m(this,Fu),o,n,i,s,a);for(const o of m(this,Zf))o!==e&&mA(m(this,Fu),o,n,i,s,a);t||(m(this,Fs).clear(),k(this,ku,-1))}return this}recordShowTextOperation(e,t=!1){const n=Array.from(m(this,Fs));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return m(this,ku)===e&&(k(this,ku,-1),m(this,ur)[0]=Math.max(m(this,ur)[0],m(this,br)[0]),m(this,ur)[1]=Math.max(m(this,ur)[1],m(this,br)[1]),m(this,ur)[2]=Math.min(m(this,ur)[2],m(this,br)[2]),m(this,ur)[3]=Math.min(m(this,ur)[3],m(this,br)[3]),t||m(this,Fs).clear()),this}_takePendingDependencies(){const e=m(this,Fs);return k(this,Fs,new Set),e}_extractOperation(e){const t=m(this,Sw).get(e);return m(this,Sw).delete(e),t}_pushPendingDependencies(e){for(const t of e)m(this,Fs).add(t)}take(){return m(this,xv).clear(),new $he(m(this,Ki),m(this,Fu))}takeDebugMetadata(){return m(this,Sl)}}Rs=new WeakMap,ks=new WeakMap,Jf=new WeakMap,Io=new WeakMap,Zf=new WeakMap,Ru=new WeakMap,ur=new WeakMap,br=new WeakMap,ku=new WeakMap,Fs=new WeakMap,Sw=new WeakMap,xv=new WeakMap,em=new WeakMap,tm=new WeakMap,Fu=new WeakMap,Ki=new WeakMap,Sl=new WeakMap,Tw=new WeakSet,xI=function(e,t){const n=new ArrayBuffer(e*4);k(this,Fu,new Uint8ClampedArray(n)),k(this,Ki,new Uint32Array(n)),t&&t.length>0?(m(this,Ki).set(t),m(this,Ki).fill(wI,t.length)):m(this,Ki).fill(wI)};var Tr,an,Po,_v,Av;const IO=class IO{constructor(e,t,n){L(this,Tr);L(this,an);L(this,Po);L(this,_v,0);L(this,Av,0);if(e instanceof IO&&m(e,Po)===!!n)return e;k(this,Tr,e),k(this,an,t),k(this,Po,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(e){return Ln(this,Av)._++,m(this,Tr).save(m(this,an)),this}restore(e){return m(this,Av)>0&&(m(this,Tr).restore(m(this,an)),Ln(this,Av)._--),this}recordOpenMarker(e){return Ln(this,_v)._++,this}getOpenMarker(){return m(this,_v)>0?m(this,an):m(this,Tr).getOpenMarker()}recordCloseMarker(e){return Ln(this,_v)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return m(this,Tr).pushBaseTransform(e),this}popBaseTransform(){return m(this,Tr).popBaseTransform(),this}recordSimpleData(e,t){return m(this,Tr).recordSimpleData(e,m(this,an)),this}recordIncrementalData(e,t){return m(this,Tr).recordIncrementalData(e,m(this,an)),this}resetIncrementalData(e,t){return m(this,Tr).resetIncrementalData(e,m(this,an)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return m(this,Tr).recordSimpleDataFromNamed(e,t,m(this,an)),this}recordFutureForcedDependency(e,t){return m(this,Tr).recordFutureForcedDependency(e,m(this,an)),this}inheritSimpleDataAsFutureForcedDependencies(e){return m(this,Tr).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return m(this,Tr).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return m(this,Po)||m(this,Tr).resetBBox(m(this,an)),this}recordClipBox(e,t,n,i,s,a){return m(this,Po)||m(this,Tr).recordClipBox(m(this,an),t,n,i,s,a),this}recordBBox(e,t,n,i,s,a){return m(this,Po)||m(this,Tr).recordBBox(m(this,an),t,n,i,s,a),this}recordCharacterBBox(e,t,n,i,s,a,o){return m(this,Po)||m(this,Tr).recordCharacterBBox(m(this,an),t,n,i,s,a,o),this}recordFullPageBBox(e){return m(this,Po)||m(this,Tr).recordFullPageBBox(m(this,an)),this}getSimpleIndex(e){return m(this,Tr).getSimpleIndex(e)}recordDependencies(e,t){return m(this,Tr).recordDependencies(m(this,an),t),this}recordNamedDependency(e,t){return m(this,Tr).recordNamedDependency(m(this,an),t),this}recordOperation(e){return m(this,Tr).recordOperation(m(this,an),!0),this}recordShowTextOperation(e){return m(this,Tr).recordShowTextOperation(m(this,an),!0),this}bboxToClipBoxDropOperation(e){return m(this,Po)||m(this,Tr).bboxToClipBoxDropOperation(m(this,an),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Tr=new WeakMap,an=new WeakMap,Po=new WeakMap,_v=new WeakMap,Av=new WeakMap;let WS=IO;const $a={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Ti={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function _I(r,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,n),r.clip(i)}class AF{isModifyingCurrentTransform(){return!1}getPattern(){Dr("Abstract method `getPattern` called.")}}class Uhe extends AF{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,i){let s;if(i===Ti.STROKE||i===Ti.FILL){const a=t.current.getClippedPathBoundingBox(i,Xr(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,u=t.cachedCanvases.getCanvas("pattern",o,l),c=u.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-a[0],-a[1]),n=Ze.transform(n,[1,0,0,1,a[0],a[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),_I(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),s=e.createPattern(u.canvas,"no-repeat");const h=new DOMMatrix(n);s.setTransform(h)}else _I(e,this._bbox),s=this._createGradient(e);return s}}function $2(r,e,t,n,i,s,a,o){const l=e.coords,u=e.colors,c=r.data,h=r.width*4;let d;l[t+1]>l[n+1]&&(d=t,t=n,n=d,d=s,s=a,a=d),l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=a,a=o,o=d),l[t+1]>l[n+1]&&(d=t,t=n,n=d,d=s,s=a,a=d);const f=(l[t]+e.offsetX)*e.scaleX,p=(l[t+1]+e.offsetY)*e.scaleY,g=(l[n]+e.offsetX)*e.scaleX,b=(l[n+1]+e.offsetY)*e.scaleY,v=(l[i]+e.offsetX)*e.scaleX,w=(l[i+1]+e.offsetY)*e.scaleY;if(p>=w)return;const y=u[s],A=u[s+1],x=u[s+2],_=u[a],S=u[a+1],E=u[a+2],C=u[o],N=u[o+1],D=u[o+2],M=Math.round(p),I=Math.round(w);let V,K,F,U,j,G,ee,ue;for(let te=M;te<=I;te++){if(te<b){const fe=te<p?0:(p-te)/(p-b);V=f-(f-g)*fe,K=y-(y-_)*fe,F=A-(A-S)*fe,U=x-(x-E)*fe}else{let fe;te>w?fe=1:b===w?fe=0:fe=(b-te)/(b-w),V=g-(g-v)*fe,K=_-(_-C)*fe,F=S-(S-N)*fe,U=E-(E-D)*fe}let R;te<p?R=0:te>w?R=1:R=(p-te)/(p-w),j=f-(f-v)*R,G=y-(y-C)*R,ee=A-(A-N)*R,ue=x-(x-D)*R;const Y=Math.round(Math.min(V,j)),H=Math.round(Math.max(V,j));let he=h*te+Y*4;for(let fe=Y;fe<=H;fe++)R=(V-fe)/(V-j),R<0?R=0:R>1&&(R=1),c[he++]=K-(K-G)*R|0,c[he++]=F-(F-ee)*R|0,c[he++]=U-(U-ue)*R|0,c[he++]=255}}function zhe(r,e,t){const n=e.coords,i=e.colors;let s,a;switch(e.type){case WM.LATTICE:const o=e.verticesPerRow,l=Math.floor(n.length/o)-1,u=o-1;for(s=0;s<l;s++){let c=s*o;for(let h=0;h<u;h++,c++)$2(r,t,n[c],n[c+1],n[c+o],i[c],i[c+1],i[c+o]),$2(r,t,n[c+o+1],n[c+1],n[c+o],i[c+o+1],i[c+1],i[c+o])}break;case WM.TRIANGLES:for(s=0,a=n.length;s<a;s+=3)$2(r,t,n[s],n[s+1],n[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class jhe extends AF{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,c=Math.ceil(this._bounds[3])-l,h=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),d=Math.min(Math.ceil(Math.abs(c*e[1]*1.1)),3e3),f=u/h,p=c/d,g={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/f,scaleY:1/p},b=h+2*2,v=d+2*2,w=n.getCanvas("mesh",b,v),y=w.context,A=y.createImageData(h,d);if(t){const _=A.data;for(let S=0,E=_.length;S<E;S+=4)_[S]=t[0],_[S+1]=t[1],_[S+2]=t[2],_[S+3]=255}for(const _ of this._figures)zhe(A,_,g);return y.putImageData(A,2,2),{canvas:w.canvas,offsetX:o-2*f,offsetY:l-2*p,scaleX:f,scaleY:p}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,i){_I(e,this._bbox);const s=new Float32Array(2);if(i===Ti.SHADING)Ze.singularValueDecompose2dScale(Xr(e),s);else if(this.matrix){Ze.singularValueDecompose2dScale(this.matrix,s);const[o,l]=s;Ze.singularValueDecompose2dScale(t.baseTransform,s),s[0]*=o,s[1]*=l}else Ze.singularValueDecompose2dScale(t.baseTransform,s);const a=this._createMeshCanvas(s,i===Ti.SHADING?null:this._background,t.cachedCanvases);return i!==Ti.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class qhe extends AF{getPattern(){return"hotpink"}}function Hhe(r){switch(r[0]){case"RadialAxial":return new Uhe(r);case"Mesh":return new jhe(r);case"Dummy":return new qhe}throw new Error(`Unknown IR type: ${r[0]}`)}const d5={COLORED:1,UNCOLORED:2},qT=class qT{constructor(e,t,n,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e,t){var G,ee;const{bbox:n,operatorList:i,paintType:s,tilingType:a,color:o,canvasGraphicsFactory:l}=this;let{xstep:u,ystep:c}=this;u=Math.abs(u),c=Math.abs(c),HC("TilingType: "+a);const h=n[0],d=n[1],f=n[2],p=n[3],g=f-h,b=p-d,v=new Float32Array(2);Ze.singularValueDecompose2dScale(this.matrix,v);const[w,y]=v;Ze.singularValueDecompose2dScale(this.baseTransform,v);const A=w*v[0],x=y*v[1];let _=g,S=b,E=!1,C=!1;const N=Math.ceil(u*A),D=Math.ceil(c*x),M=Math.ceil(g*A),I=Math.ceil(b*x);N>=M?_=u:E=!0,D>=I?S=c:C=!0;const V=this.getSizeAndScale(_,this.ctx.canvas.width,A),K=this.getSizeAndScale(S,this.ctx.canvas.height,x),F=e.cachedCanvases.getCanvas("pattern",V.size,K.size),U=F.context,j=l.createCanvasGraphics(U,t);if(j.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(j,s,o),U.translate(-V.scale*h,-K.scale*d),j.transform(0,V.scale,0,0,K.scale,0,0),U.save(),(G=j.dependencyTracker)==null||G.save(),this.clipBbox(j,h,d,f,p),j.baseTransform=Xr(j.ctx),j.executeOperatorList(i),j.endDrawing(),(ee=j.dependencyTracker)==null||ee.restore(),U.restore(),E||C){const ue=F.canvas;E&&(_=u),C&&(S=c);const te=this.getSizeAndScale(_,this.ctx.canvas.width,A),R=this.getSizeAndScale(S,this.ctx.canvas.height,x),Y=te.size,H=R.size,he=e.cachedCanvases.getCanvas("pattern-workaround",Y,H),fe=he.context,re=E?Math.floor(g/u):0,W=C?Math.floor(b/c):0;for(let ie=0;ie<=re;ie++)for(let me=0;me<=W;me++)fe.drawImage(ue,Y*ie,H*me,Y,H,0,0,Y,H);return{canvas:he.canvas,scaleX:te.scale,scaleY:R.scale,offsetX:h,offsetY:d}}return{canvas:F.canvas,scaleX:V.scale,scaleY:K.scale,offsetX:h,offsetY:d}}getSizeAndScale(e,t,n){const i=Math.max(qT.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*n);return s>=i?s=i:n=s/e,{scale:n,size:s}}clipBbox(e,t,n,i,s){const a=i-t,o=s-n;e.ctx.rect(t,n,a,o),Ze.axialAlignedBoundingBox([t,n,i,s],Xr(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,s=e.current;switch(t){case d5.COLORED:const{fillStyle:a,strokeStyle:o}=this.ctx;i.fillStyle=s.fillColor=a,i.strokeStyle=s.strokeColor=o;break;case d5.UNCOLORED:i.fillStyle=i.strokeStyle=n,s.fillColor=s.strokeColor=n;break;default:throw new ihe(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,i,s){let a=n;i!==Ti.SHADING&&(a=Ze.transform(a,t.baseTransform),this.matrix&&(a=Ze.transform(a,this.matrix)));const o=this.createPatternCanvas(t,s);let l=new DOMMatrix(a);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const u=e.createPattern(o.canvas,"repeat");return u.setTransform(l),u}};Pe(qT,"MAX_PATTERN_SIZE",3e3);let AI=qT;function Ghe({src:r,srcPos:e=0,dest:t,width:n,height:i,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const o=Ri.isLittleEndian?4278190080:255,[l,u]=a?[s,o]:[o,s],c=n>>3,h=n&7,d=r.length;t=new Uint32Array(t.buffer);let f=0;for(let p=0;p<i;p++){for(const b=e+c;e<b;e++){const v=e<d?r[e]:255;t[f++]=v&128?u:l,t[f++]=v&64?u:l,t[f++]=v&32?u:l,t[f++]=v&16?u:l,t[f++]=v&8?u:l,t[f++]=v&4?u:l,t[f++]=v&2?u:l,t[f++]=v&1?u:l}if(h===0)continue;const g=e<d?r[e++]:255;for(let b=0;b<h;b++)t[f++]=g&1<<7-b?u:l}return{srcPos:e,destPos:f}}const f5=16,m5=100,Whe=15,p5=10,$s=16,V2=new DOMMatrix,xa=new Float32Array(2),bg=new Float32Array([1/0,1/0,-1/0,-1/0]);function Khe(r,e){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){e.save(),this.__originalSave()},r.restore=function(){e.restore(),this.__originalRestore()},r.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},r.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},r.transform=function(t,n,i,s,a,o){e.transform(t,n,i,s,a,o),this.__originalTransform(t,n,i,s,a,o)},r.setTransform=function(t,n,i,s,a,o){e.setTransform(t,n,i,s,a,o),this.__originalSetTransform(t,n,i,s,a,o)},r.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},r.rotate=function(t){e.rotate(t),this.__originalRotate(t)},r.clip=function(t){e.clip(t),this.__originalClip(t)},r.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},r.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},r.bezierCurveTo=function(t,n,i,s,a,o){e.bezierCurveTo(t,n,i,s,a,o),this.__originalBezierCurveTo(t,n,i,s,a,o)},r.rect=function(t,n,i,s){e.rect(t,n,i,s),this.__originalRect(t,n,i,s)},r.closePath=function(){e.closePath(),this.__originalClosePath()},r.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class Xhe{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function gA(r,e,t,n,i,s,a,o,l,u){const[c,h,d,f,p,g]=Xr(r);if(h===0&&d===0){const w=a*c+p,y=Math.round(w),A=o*f+g,x=Math.round(A),_=(a+l)*c+p,S=Math.abs(Math.round(_)-y)||1,E=(o+u)*f+g,C=Math.abs(Math.round(E)-x)||1;return r.setTransform(Math.sign(c),0,0,Math.sign(f),y,x),r.drawImage(e,t,n,i,s,0,0,S,C),r.setTransform(c,h,d,f,p,g),[S,C]}if(c===0&&f===0){const w=o*d+p,y=Math.round(w),A=a*h+g,x=Math.round(A),_=(o+u)*d+p,S=Math.abs(Math.round(_)-y)||1,E=(a+l)*h+g,C=Math.abs(Math.round(E)-x)||1;return r.setTransform(0,Math.sign(h),Math.sign(d),0,y,x),r.drawImage(e,t,n,i,s,0,0,C,S),r.setTransform(c,h,d,f,p,g),[C,S]}r.drawImage(e,t,n,i,s,a,o,l,u);const b=Math.hypot(c,h),v=Math.hypot(d,f);return[b*l,v*u]}class g5{constructor(e,t,n){Pe(this,"alphaIsShape",!1);Pe(this,"fontSize",0);Pe(this,"fontSizeScale",1);Pe(this,"textMatrix",null);Pe(this,"textMatrixScale",1);Pe(this,"fontMatrix",GM);Pe(this,"leading",0);Pe(this,"x",0);Pe(this,"y",0);Pe(this,"lineX",0);Pe(this,"lineY",0);Pe(this,"charSpacing",0);Pe(this,"wordSpacing",0);Pe(this,"textHScale",1);Pe(this,"textRenderingMode",vi.FILL);Pe(this,"textRise",0);Pe(this,"fillColor","#000000");Pe(this,"strokeColor","#000000");Pe(this,"patternFill",!1);Pe(this,"patternStroke",!1);Pe(this,"fillAlpha",1);Pe(this,"strokeAlpha",1);Pe(this,"lineWidth",1);Pe(this,"activeSMask",null);Pe(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=bg.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Ti.FILL,t=null){const n=this.minMax.slice();if(e===Ti.STROKE){t||Dr("Stroke bounding box must include transform."),Ze.singularValueDecompose2dScale(t,xa);const i=xa[0]*this.lineWidth/2,s=xa[1]*this.lineWidth/2;n[0]-=i,n[1]-=s,n[2]+=i,n[3]+=s}return n}updateClipFromPath(){const e=Ze.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(bg,0)}getClippedPathBoundingBox(e=Ti.FILL,t=null){return Ze.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function v5(r,e){if(e instanceof ImageData){r.putImageData(e,0,0);return}const t=e.height,n=e.width,i=t%$s,s=(t-i)/$s,a=i===0?s:s+1,o=r.createImageData(n,$s);let l=0,u;const c=e.data,h=o.data;let d,f,p,g;if(e.kind===dE.GRAYSCALE_1BPP){const b=c.byteLength,v=new Uint32Array(h.buffer,0,h.byteLength>>2),w=v.length,y=n+7>>3,A=4294967295,x=Ri.isLittleEndian?4278190080:255;for(d=0;d<a;d++){for(p=d<s?$s:i,u=0,f=0;f<p;f++){const _=b-l;let S=0;const E=_>y?n:_*8-7,C=E&-8;let N=0,D=0;for(;S<C;S+=8)D=c[l++],v[u++]=D&128?A:x,v[u++]=D&64?A:x,v[u++]=D&32?A:x,v[u++]=D&16?A:x,v[u++]=D&8?A:x,v[u++]=D&4?A:x,v[u++]=D&2?A:x,v[u++]=D&1?A:x;for(;S<E;S++)N===0&&(D=c[l++],N=128),v[u++]=D&N?A:x,N>>=1}for(;u<w;)v[u++]=0;r.putImageData(o,0,d*$s)}}else if(e.kind===dE.RGBA_32BPP){for(f=0,g=n*$s*4,d=0;d<s;d++)h.set(c.subarray(l,l+g)),l+=g,r.putImageData(o,0,f),f+=$s;d<a&&(g=n*i*4,h.set(c.subarray(l,l+g)),r.putImageData(o,0,f))}else if(e.kind===dE.RGB_24BPP)for(p=$s,g=n*p,d=0;d<a;d++){for(d>=s&&(p=i,g=n*p),u=0,f=g;f--;)h[u++]=c[l++],h[u++]=c[l++],h[u++]=c[l++],h[u++]=255;r.putImageData(o,0,d*$s)}else throw new Error(`bad image kind: ${e.kind}`)}function y5(r,e){if(e.bitmap){r.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,i=t%$s,s=(t-i)/$s,a=i===0?s:s+1,o=r.createImageData(n,$s);let l=0;const u=e.data,c=o.data;for(let h=0;h<a;h++){const d=h<s?$s:i;({srcPos:l}=Ghe({src:u,srcPos:l,dest:c,width:n,height:d,nonBlackColor:0})),r.putImageData(o,0,h*$s)}}function By(r,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)r[n]!==void 0&&(e[n]=r[n]);r.setLineDash!==void 0&&(e.setLineDash(r.getLineDash()),e.lineDashOffset=r.lineDashOffset)}function vA(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:e}=r;e!=="none"&&e!==""&&(r.filter="none")}function b5(r,e){if(e)return!0;Ze.singularValueDecompose2dScale(r,xa);const t=Math.fround(Zl.pixelRatio*Sd.PDF_TO_CSS_UNITS);return xa[0]<=t&&xa[1]<=t}const Yhe=["butt","round","square"],Qhe=["miter","round","bevel"],Jhe={},w5={};var Jo,EI,SI,TI;const PO=class PO{constructor(e,t,n,i,s,{optionalContentConfig:a,markedContentStack:o=null},l,u,c){L(this,Jo);this.ctx=e,this.current=new g5(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new Xhe(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=c??null}getObject(e,t,n=null){var i;return typeof t=="string"?((i=this.dependencyTracker)==null||i.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:i=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,n){const l=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Xr(this.compositeCtx))}this.ctx.save(),vA(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Xr(this.ctx)}executeOperatorList(e,t,n,i,s){var v;const a=e.argsArray,o=e.fnArray;let l=t||0;const u=a.length;if(u===l)return l;const c=u-l>p5&&typeof n=="function",h=c?Date.now()+Whe:0;let d=0;const f=this.commonObjs,p=this.objs;let g,b;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,n),l;if(!s||s(l))if(g=o[l],b=a[l]??null,g!==D1.dependency)b===null?this[g](l):this[g](l,...b);else for(const w of b){(v=this.dependencyTracker)==null||v.recordNamedData(w,l);const y=w.startsWith("g_")?f:p;if(!y.has(w))return y.get(w,n),l}if(l++,l===u)return l;if(c&&++d>p5){if(Date.now()>h)return n(),l;d=0}}}endDrawing(){z(this,Jo,EI).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),z(this,Jo,SI).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,i=e.height??e.displayHeight;let s=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=n,l=i,u="prescale1",c,h;for(;s>2&&o>1||a>2&&l>1;){let d=o,f=l;s>2&&o>1&&(d=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),s/=o/d),a>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/f),c=this.cachedCanvases.getCanvas(u,d,f),h=c.context,h.clearRect(0,0,d,f),h.drawImage(e,0,0,o,l,0,0,d,f),e=c.canvas,o=d,l=f,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e,t){var N,D;const n=this.ctx,{width:i,height:s}=t,a=this.current.fillColor,o=this.current.patternFill,l=Xr(n);let u,c,h,d;if((t.bitmap||t.data)&&t.count>1){const M=t.bitmap||t.data.buffer;c=JSON.stringify(o?l:[l.slice(0,4),a]),u=this._cachedBitmapsMap.get(M),u||(u=new Map,this._cachedBitmapsMap.set(M,u));const I=u.get(c);if(I&&!o){const V=Math.round(Math.min(l[0],l[2])+l[4]),K=Math.round(Math.min(l[1],l[3])+l[5]);return(N=this.dependencyTracker)==null||N.recordDependencies(e,$a.transformAndFill),{canvas:I,offsetX:V,offsetY:K}}h=I}h||(d=this.cachedCanvases.getCanvas("maskCanvas",i,s),y5(d.context,t));let f=Ze.transform(l,[1/i,0,0,-1/s,0,0]);f=Ze.transform(f,[1,0,0,1,0,-s]);const p=bg.slice();Ze.axialAlignedBoundingBox([0,0,i,s],f,p);const[g,b,v,w]=p,y=Math.round(v-g)||1,A=Math.round(w-b)||1,x=this.cachedCanvases.getCanvas("fillCanvas",y,A),_=x.context,S=g,E=b;_.translate(-S,-E),_.transform(...f),h||(h=this._scaleImage(d.canvas,ul(_)),h=h.img,u&&o&&u.set(c,h)),_.imageSmoothingEnabled=b5(Xr(_),t.interpolate),gA(_,h,0,0,h.width,h.height,0,0,i,s),_.globalCompositeOperation="source-in";const C=Ze.transform(ul(_),[1,0,0,1,-S,-E]);return _.fillStyle=o?a.getPattern(n,this,C,Ti.FILL,e):a,_.fillRect(0,0,i,s),u&&!o&&(this.cachedCanvases.delete("fillCanvas"),u.set(c,x.canvas)),(D=this.dependencyTracker)==null||D.recordDependencies(e,$a.transformAndFill),{canvas:x.canvas,offsetX:Math.round(S),offsetY:Math.round(E)}}setLineWidth(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",e),this.ctx.lineCap=Yhe[t]}setLineJoin(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=Qhe[t]}setMiterLimit(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var n,i,s,a,o;for(const[l,u]of t)switch(l){case"LW":this.setLineWidth(e,u);break;case"LC":this.setLineCap(e,u);break;case"LJ":this.setLineJoin(e,u);break;case"ML":this.setMiterLimit(e,u);break;case"D":this.setDash(e,u[0],u[1]);break;case"RI":this.setRenderingIntent(e,u);break;case"FL":this.setFlatness(e,u);break;case"Font":this.setFont(e,u[0],u[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=u;break;case"ca":(i=this.dependencyTracker)==null||i.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(s=this.dependencyTracker)==null||s.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=u;break;case"SMask":(a=this.dependencyTracker)==null||a.recordSimpleData("SMask",e),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(o=this.dependencyTracker)==null||o.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,t,n);this.suspendedCtx=this.ctx;const a=this.ctx=s.context;a.setTransform(this.suspendedCtx.getTransform()),By(this.suspendedCtx,a),Khe(a,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),By(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const s=i[0],a=i[1],o=i[2]-s,l=i[3]-a;o===0||l===0||(this.genericComposeSMask(t.context,n,o,l,t.subtype,t.backdrop,t.transferMap,s,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,s,a,o,l,u,c,h){let d=e.canvas,f=l-c,p=u-h;if(a)if(f<0||p<0||f+n>d.width||p+i>d.height){const b=this.cachedCanvases.getCanvas("maskExtension",n,i),v=b.context;v.drawImage(d,-f,-p),v.globalCompositeOperation="destination-atop",v.fillStyle=a,v.fillRect(0,0,n,i),v.globalCompositeOperation="source-over",d=b.canvas,f=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const b=new Path2D;b.rect(f,p,n,i),e.clip(b),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(f,p,n,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const g=new Path2D;g.rect(l,u,n,i),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(d,f,p,n,i,l,u,n,i),t.restore()}save(e){var n;this.inSMaskMode&&By(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(n=this.dependencyTracker)==null||n.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&By(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,i,s,a,o){var l;(l=this.dependencyTracker)==null||l.recordIncrementalData("transform",e),this.ctx.transform(t,n,i,s,a,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,i){let[s]=n;if(!i){s||(s=n[0]=new Path2D),this[t](e,s);return}if(this.dependencyTracker!==null){const a=t===D1.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-a,i[2]+a,i[1]-a,i[3]+a).recordDependencies(e,["transform"])}s instanceof Path2D||(s=n[0]=MH(s)),Ze.axialAlignedBoundingBox(i,Xr(this.ctx),this.current.minMax),this[t](e,s),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){var a;const i=this.ctx,s=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const o=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=s.getPattern(i,this,ul(i),Ti.STROKE,e),o){const l=new Path2D;l.addPath(t,i.getTransform().invertSelf().multiplySelf(o)),t=l}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);(a=this.dependencyTracker)==null||a.recordDependencies(e,$a.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Ti.STROKE,Xr(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){var u,c,h;const i=this.ctx,s=this.current.fillColor,a=this.current.patternFill;let o=!1;if(a){const d=s.isModifyingCurrentTransform()?i.getTransform():null;if((u=this.dependencyTracker)==null||u.save(e),i.save(),i.fillStyle=s.getPattern(i,this,ul(i),Ti.FILL,e),d){const f=new Path2D;f.addPath(t,i.getTransform().invertSelf().multiplySelf(d)),t=f}o=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),(c=this.dependencyTracker)==null||c.recordDependencies(e,$a.fill),o&&(i.restore(),(h=this.dependencyTracker)==null||h.restore(e)),n&&this.consumePath(e,t,l)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var n;this.ctx.fill(t),(n=this.dependencyTracker)==null||n.recordDependencies(e,$a.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=Jhe}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=w5}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){const i=new Path2D,s=n.getTransform().invertSelf();for(const{transform:a,x:o,y:l,fontSize:u,path:c}of t)c&&i.addPath(c,new DOMMatrix(a).preMultiplySelf(s).translate(o,l).scale(u,-u));n.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){var h,d;(h=this.dependencyTracker)==null||h.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const i=this.commonObjs.get(t),s=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=i.fontMatrix||GM,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&At("Invalid font matrix for font "+t),n<0?(n=-n,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;const a=i.loadedName||"sans-serif",o=((d=i.systemFontInfo)==null?void 0:d.css)||`"${a}", ${i.fallbackName}`;let l="normal";i.black?l="900":i.bold&&(l="bold");const u=i.italic?"italic":"normal";let c=n;n<f5?c=f5:n>m5&&(c=m5),this.current.fontSizeScale=n/c,this.ctx.font=`${u} ${l} ${c}px ${o}`}setTextRenderingMode(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,n,i,s,a){var v,w,y,A;const o=this.ctx,l=this.current,u=l.font,c=l.textRenderingMode,h=l.fontSize/l.fontSizeScale,d=c&vi.FILL_STROKE_MASK,f=!!(c&vi.ADD_TO_PATH_FLAG),p=l.patternFill&&!u.missingFile,g=l.patternStroke&&!u.missingFile;let b;if((u.disableFontFace||f||p||g)&&!u.missingFile&&(b=u.getPathGenerator(this.commonObjs,t)),b&&(u.disableFontFace||p||g)){o.save(),o.translate(n,i),o.scale(h,-h),(v=this.dependencyTracker)==null||v.recordCharacterBBox(e,o,u);let x;if(d===vi.FILL||d===vi.FILL_STROKE)if(s){x=o.getTransform(),o.setTransform(...s);const _=z(this,Jo,TI).call(this,b,x,s);o.fill(_)}else o.fill(b);if(d===vi.STROKE||d===vi.FILL_STROKE)if(a){x||(x=o.getTransform()),o.setTransform(...a);const{a:_,b:S,c:E,d:C}=x,N=Ze.inverseTransform(a),D=Ze.transform([_,S,E,C,0,0],N);Ze.singularValueDecompose2dScale(D,xa),o.lineWidth*=Math.max(xa[0],xa[1])/h,o.stroke(z(this,Jo,TI).call(this,b,x,a))}else o.lineWidth/=h,o.stroke(b);o.restore()}else(d===vi.FILL||d===vi.FILL_STROKE)&&(o.fillText(t,n,i),(w=this.dependencyTracker)==null||w.recordCharacterBBox(e,o,u,h,n,i,()=>o.measureText(t))),(d===vi.STROKE||d===vi.FILL_STROKE)&&(this.dependencyTracker&&((y=this.dependencyTracker)==null||y.recordCharacterBBox(e,o,u,h,n,i,()=>o.measureText(t)).recordDependencies(e,$a.stroke)),o.strokeText(t,n,i));f&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Xr(o),x:n,y:i,fontSize:h,path:b}),(A=this.dependencyTracker)==null||A.recordCharacterBBox(e,o,u,h,n,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return Et(this,"isFontSubpixelAAEnabled",n)}showText(e,t){var E,C,N,D;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,$a.showText).resetBBox(e),this.current.textRenderingMode&vi.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,i=n.font;if(i.isType3Font){this.showType3Text(e,t),(E=this.dependencyTracker)==null||E.recordShowTextOperation(e);return}const s=n.fontSize;if(s===0){(C=this.dependencyTracker)==null||C.recordOperation(e);return}const a=this.ctx,o=n.fontSizeScale,l=n.charSpacing,u=n.wordSpacing,c=n.fontDirection,h=n.textHScale*c,d=t.length,f=i.vertical,p=f?1:-1,g=i.defaultVMetrics,b=s*n.fontMatrix[0],v=n.textRenderingMode===vi.FILL&&!i.disableFontFace&&!n.patternFill;a.save(),n.textMatrix&&a.transform(...n.textMatrix),a.translate(n.x,n.y+n.textRise),c>0?a.scale(h,-1):a.scale(h,1);let w,y;if(n.patternFill){a.save();const M=n.fillColor.getPattern(a,this,ul(a),Ti.FILL,e);w=Xr(a),a.restore(),a.fillStyle=M}if(n.patternStroke){a.save();const M=n.strokeColor.getPattern(a,this,ul(a),Ti.STROKE,e);y=Xr(a),a.restore(),a.strokeStyle=M}let A=n.lineWidth;const x=n.textMatrixScale;if(x===0||A===0){const M=n.textRenderingMode&vi.FILL_STROKE_MASK;(M===vi.STROKE||M===vi.FILL_STROKE)&&(A=this.getSinglePixelWidth())}else A/=x;if(o!==1&&(a.scale(o,o),A/=o),a.lineWidth=A,i.isInvalidPDFjsFont){const M=[];let I=0;for(const K of t)M.push(K.unicode),I+=K.width;const V=M.join("");if(a.fillText(V,0,0),this.dependencyTracker!==null){const K=a.measureText(V);this.dependencyTracker.recordBBox(e,this.ctx,-K.actualBoundingBoxLeft,K.actualBoundingBoxRight,-K.actualBoundingBoxAscent,K.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=I*b*h,a.restore(),this.compose();return}let _=0,S;for(S=0;S<d;++S){const M=t[S];if(typeof M=="number"){_+=p*M*s/1e3;continue}let I=!1;const V=(M.isSpace?u:0)+l,K=M.fontChar,F=M.accent;let U,j,G=M.width;if(f){const te=M.vmetric||g,R=-(M.vmetric?te[1]:G*.5)*b,Y=te[2]*b;G=te?-te[0]:G,U=R/o,j=(_+Y)/o}else U=_/o,j=0;let ee;if(i.remeasure&&G>0){ee=a.measureText(K);const te=ee.width*1e3/s*o;if(G<te&&this.isFontSubpixelAAEnabled){const R=G/te;I=!0,a.save(),a.scale(R,1),U/=R}else G!==te&&(U+=(G-te)/2e3*s/o)}if(this.contentVisible&&(M.isInFont||i.missingFile)){if(v&&!F)a.fillText(K,U,j),(N=this.dependencyTracker)==null||N.recordCharacterBBox(e,a,ee?{bbox:null}:i,s/o,U,j,()=>ee??a.measureText(K));else if(this.paintChar(e,K,U,j,w,y),F){const te=U+s*F.offset.x/o,R=j-s*F.offset.y/o;this.paintChar(e,F.fontChar,te,R,w,y)}}const ue=f?G*b-V*c:G*b+V*c;_+=ue,I&&a.restore()}f?n.y-=_:n.x+=_*h,a.restore(),this.compose(),(D=this.dependencyTracker)==null||D.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,i=this.current,s=i.font,a=i.fontSize,o=i.fontDirection,l=s.vertical?1:-1,u=i.charSpacing,c=i.wordSpacing,h=i.textHScale*o,d=i.fontMatrix||GM,f=t.length,p=i.textRenderingMode===vi.INVISIBLE;let g,b,v,w;if(p||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(h,o);const y=this.dependencyTracker;for(this.dependencyTracker=y?new WS(y,e):null,g=0;g<f;++g){if(b=t[g],typeof b=="number"){w=l*b*a/1e3,this.ctx.translate(w,0),i.x+=w*h;continue}const A=(b.isSpace?c:0)+u,x=s.charProcOperatorList[b.operatorListId];x?this.contentVisible&&(this.save(),n.scale(a,a),n.transform(...d),this.executeOperatorList(x),this.restore()):At(`Type3 character "${b.operatorListId}" is not available.`);const _=[b.width,0];Ze.applyTransform(_,d),v=_[0]*a+A,n.translate(v,0),i.x+=v*h}n.restore(),y&&(this.dependencyTracker=y)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,i,s,a,o){var u;const l=new Path2D;l.rect(i,s,a-i,o-s),this.ctx.clip(l),(u=this.dependencyTracker)==null||u.recordBBox(e,this.ctx,i,a,s,o).recordClipBox(e,this.ctx,i,a,s,o),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const i=this.baseTransform||Xr(this.ctx),s={createCanvasGraphics:(a,o)=>new PO(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new WS(this.dependencyTracker,o,!0):null)};n=new AI(t,this.ctx,s,i)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=Hhe(this.getObject(e,t)),this.cachedPatterns.set(t,i)),n&&(i.matrix=n),i}shadingFill(e,t){var a;if(!this.contentVisible)return;const n=this.ctx;this.save(e);const i=this._getPattern(e,t);n.fillStyle=i.getPattern(n,this,ul(n),Ti.SHADING,e);const s=ul(n);if(s){const{width:o,height:l}=n.canvas,u=bg.slice();Ze.axialAlignedBoundingBox([0,0,o,l],s,u);const[c,h,d,f]=u;this.ctx.fillRect(c,h,d-c,f-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(a=this.dependencyTracker)==null||a.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,$a.transform).recordDependencies(e,$a.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Dr("Should not call beginInlineImage")}beginImageData(){Dr("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){var i;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Xr(this.ctx),n)){Ze.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[s,a,o,l]=n,u=new Path2D;u.rect(s,a,o-s,l-a),this.ctx.clip(u),(i=this.dependencyTracker)==null||i.recordClipBox(e,this.ctx,s,o,a,l),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var y;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||HC("TODO: Support non-isolated groups."),t.knockout&&At("Knockout groups not supported.");const i=Xr(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=bg.slice();Ze.axialAlignedBoundingBox(t.bbox,Xr(n),s);const a=[0,0,n.canvas.width,n.canvas.height];s=Ze.intersect(s,a)||[0,0,0,0];const o=Math.floor(s[0]),l=Math.floor(s[1]),u=Math.max(Math.ceil(s[2])-o,1),c=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,u,c]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,u,c),f=d.context;f.translate(-o,-l),f.transform(...i);let p=new Path2D;const[g,b,v,w]=t.bbox;if(p.rect(g,b,v-g,w-b),t.matrix){const A=new Path2D;A.addPath(p,new DOMMatrix(t.matrix)),p=A}f.clip(p),t.smask&&this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(o,l),n.save()),By(n,f),this.ctx=f,(y=this.dependencyTracker)==null||y.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){var s;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,(s=this.dependencyTracker)==null||s.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=Xr(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...a);const o=bg.slice();Ze.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],a,o),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,n,i,s,a){if(z(this,Jo,EI).call(this),vA(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const o=n[2]-n[0],l=n[3]-n[1];if(a&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=o,n[3]=l,Ze.singularValueDecompose2dScale(Xr(this.ctx),xa);const{viewportScale:u}=this,c=Math.ceil(o*this.outputScaleX*u),h=Math.ceil(l*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(c,h);const{canvas:d,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(t,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(xa[0],0,0,-xa[1],0,l*xa[1]),vA(this.ctx)}else{vA(this.ctx),this.endPath(e);const u=new Path2D;u.rect(n[0],n[1],o,l),this.ctx.clip(u)}}this.current=new g5(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...s)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),z(this,Jo,SI).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var o;if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const i=this.ctx,s=this._createMaskCanvas(e,t),a=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,s.offsetX,s.offsetY),(o=this.dependencyTracker)==null||o.resetBBox(e).recordBBox(e,this.ctx,s.offsetX,s.offsetX+a.width,s.offsetY,s.offsetY+a.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,i=0,s=0,a,o){var h,d,f;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const l=this.ctx;l.save();const u=Xr(l);l.transform(n,i,s,a,0,0);const c=this._createMaskCanvas(e,t);l.setTransform(1,0,0,1,c.offsetX-u[4],c.offsetY-u[5]),(h=this.dependencyTracker)==null||h.resetBBox(e);for(let p=0,g=o.length;p<g;p+=2){const b=Ze.transform(u,[n,i,s,a,o[p],o[p+1]]);l.drawImage(c.canvas,b[4],b[5]),(d=this.dependencyTracker)==null||d.recordBBox(e,this.ctx,b[4],b[4]+c.canvas.width,b[5],b[5]+c.canvas.height)}l.restore(),this.compose(),(f=this.dependencyTracker)==null||f.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var a,o,l;if(!this.contentVisible)return;const n=this.ctx,i=this.current.fillColor,s=this.current.patternFill;(a=this.dependencyTracker)==null||a.resetBBox(e).recordDependencies(e,$a.transformAndFill);for(const u of t){const{data:c,width:h,height:d,transform:f}=u,p=this.cachedCanvases.getCanvas("maskCanvas",h,d),g=p.context;g.save();const b=this.getObject(e,c,u);y5(g,b),g.globalCompositeOperation="source-in",g.fillStyle=s?i.getPattern(g,this,ul(n),Ti.FILL,e):i,g.fillRect(0,0,h,d),g.restore(),n.save(),n.transform(...f),n.scale(1,-1),gA(n,p.canvas,0,0,h,d,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,n,0,h,0,d),n.restore()}this.compose(),(l=this.dependencyTracker)==null||l.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){At("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,i,s){if(!this.contentVisible)return;const a=this.getObject(e,t);if(!a){At("Dependent image isn't ready yet");return}const o=a.width,l=a.height,u=[];for(let c=0,h=s.length;c<h;c+=2)u.push({transform:[n,0,0,i,s[c],s[c+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(e,a,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:i}=e,s=this.cachedCanvases.getCanvas("inlineImage",n,i),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",s.canvas}paintInlineImageXObject(e,t){var u;if(!this.contentVisible)return;const n=t.width,i=t.height,s=this.ctx;this.save(e);const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none"),s.scale(1/n,-1/i);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",n,i).context;v5(h,t),o=this.applyTransferMapsToCanvas(h)}const l=this._scaleImage(o,ul(s));s.imageSmoothingEnabled=b5(Xr(s),t.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,s,0,n,-i,0).recordDependencies(e,$a.imageXObject).recordOperation(e),gA(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-i,n,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){var a,o,l;if(!this.contentVisible)return;const i=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const u=t.width,c=t.height,d=this.cachedCanvases.getCanvas("inlineImage",u,c).context;v5(d,t),s=this.applyTransferMapsToCanvas(d)}(a=this.dependencyTracker)==null||a.resetBBox(e);for(const u of n)i.save(),i.transform(...u.transform),i.scale(1,-1),gA(i,s,u.x,u.y,u.w,u.h,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,i,0,1,-1,0),i.restore();(l=this.dependencyTracker)==null||l.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,$a.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){var a,o;const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const s=this.ctx;this.pendingClip?(i||(this.pendingClip===w5?s.clip(t,"evenodd"):s.clip(t)),this.pendingClip=null,(a=this.dependencyTracker)==null||a.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(o=this.dependencyTracker)==null||o.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Xr(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:s}=this.ctx.getTransform();let a,o;if(n===0&&i===0){const l=Math.abs(t),u=Math.abs(s);if(l===u)if(e===0)a=o=1/l;else{const c=l*e;a=o=c<1?1/c:1}else if(e===0)a=1/l,o=1/u;else{const c=l*e,h=u*e;a=c<1?1/c:1,o=h<1?1/h:1}}else{const l=Math.abs(t*s-n*i),u=Math.hypot(t,n),c=Math.hypot(i,s);if(e===0)a=c/l,o=u/l;else{const h=e*l;a=c>h?c/h:1,o=u>h?u/h:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:i}}=this,[s,a]=this.getScaleForStroking();if(s===a){n.lineWidth=(i||1)*s,n.stroke(e);return}const o=n.getLineDash();t&&n.save(),n.scale(s,a),V2.a=1/s,V2.d=1/a;const l=new Path2D;if(l.addPath(e,V2),o.length>0){const u=Math.max(s,a);n.setLineDash(o.map(c=>c/u)),n.lineDashOffset/=u}n.lineWidth=i||1,n.stroke(l),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Jo=new WeakSet,EI=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},SI=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},TI=function(e,t,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i};let Og=PO;for(const r in D1)Og.prototype[r]!==void 0&&(Og.prototype[D1[r]]=Og.prototype[r]);var Cw,Nw;class Bl{static get workerPort(){return m(this,Cw)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");k(this,Cw,e)}static get workerSrc(){return m(this,Nw)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");k(this,Nw,e)}}Cw=new WeakMap,Nw=new WeakMap,L(Bl,Cw,null),L(Bl,Nw,"");var Ev,Dw;class Zhe{constructor({parsedData:e,rawData:t}){L(this,Ev);L(this,Dw);k(this,Ev,e),k(this,Dw,t)}getRaw(){return m(this,Dw)}get(e){return m(this,Ev).get(e)??null}[Symbol.iterator](){return m(this,Ev).entries()}}Ev=new WeakMap,Dw=new WeakMap;const Qp=Symbol("INTERNAL");var Mw,Iw,Pw,Sv;class ede{constructor(e,{name:t,intent:n,usage:i,rbGroups:s}){L(this,Mw,!1);L(this,Iw,!1);L(this,Pw,!1);L(this,Sv,!0);k(this,Mw,!!(e&ba.DISPLAY)),k(this,Iw,!!(e&ba.PRINT)),this.name=t,this.intent=n,this.usage=i,this.rbGroups=s}get visible(){if(m(this,Pw))return m(this,Sv);if(!m(this,Sv))return!1;const{print:e,view:t}=this.usage;return m(this,Mw)?(t==null?void 0:t.viewState)!=="OFF":m(this,Iw)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==Qp&&Dr("Internal method `_setVisible` called."),k(this,Pw,n),k(this,Sv,t)}}Mw=new WeakMap,Iw=new WeakMap,Pw=new WeakMap,Sv=new WeakMap;var _h,wr,Tv,Cv,Rw,CI;class tde{constructor(e,t=ba.DISPLAY){L(this,Rw);L(this,_h,null);L(this,wr,new Map);L(this,Tv,null);L(this,Cv,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,k(this,Cv,e.order);for(const n of e.groups)m(this,wr).set(n.id,new ede(t,n));if(e.baseState==="OFF")for(const n of m(this,wr).values())n._setVisible(Qp,!1);for(const n of e.on)m(this,wr).get(n)._setVisible(Qp,!0);for(const n of e.off)m(this,wr).get(n)._setVisible(Qp,!1);k(this,Tv,this.getHash())}}isVisible(e){if(m(this,wr).size===0)return!0;if(!e)return HC("Optional content group not defined."),!0;if(e.type==="OCG")return m(this,wr).has(e.id)?m(this,wr).get(e.id).visible:(At(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return z(this,Rw,CI).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!m(this,wr).has(t))return At(`Optional content group not found: ${t}`),!0;if(m(this,wr).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!m(this,wr).has(t))return At(`Optional content group not found: ${t}`),!0;if(!m(this,wr).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!m(this,wr).has(t))return At(`Optional content group not found: ${t}`),!0;if(!m(this,wr).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!m(this,wr).has(t))return At(`Optional content group not found: ${t}`),!0;if(m(this,wr).get(t).visible)return!1}return!0}return At(`Unknown optional content policy ${e.policy}.`),!0}return At(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var s;const i=m(this,wr).get(e);if(!i){At(`Optional content group not found: ${e}`);return}if(n&&t&&i.rbGroups.length)for(const a of i.rbGroups)for(const o of a)o!==e&&((s=m(this,wr).get(o))==null||s._setVisible(Qp,!1,!0));i._setVisible(Qp,!!t,!0),k(this,_h,null)}setOCGState({state:e,preserveRB:t}){let n;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const s=m(this,wr).get(i);if(s)switch(n){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!s.visible,t);break}}k(this,_h,null)}get hasInitialVisibility(){return m(this,Tv)===null||this.getHash()===m(this,Tv)}getOrder(){return m(this,wr).size?m(this,Cv)?m(this,Cv).slice():[...m(this,wr).keys()]:null}getGroup(e){return m(this,wr).get(e)||null}getHash(){if(m(this,_h)!==null)return m(this,_h);const e=new lG;for(const[t,n]of m(this,wr))e.update(`${t}:${n.visible}`);return k(this,_h,e.hexdigest())}[Symbol.iterator](){return m(this,wr).entries()}}_h=new WeakMap,wr=new WeakMap,Tv=new WeakMap,Cv=new WeakMap,Rw=new WeakSet,CI=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const s=e[i];let a;if(Array.isArray(s))a=z(this,Rw,CI).call(this,s);else if(m(this,wr).has(s))a=m(this,wr).get(s).visible;else return At(`Optional content group not found: ${s}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};class rde{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Xt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:s,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(s==null?void 0:s.length)>0){const l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),e.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(n),!0)});Xt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,i,s;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(s=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||s.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Xt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new nde(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new ide(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class nde{constructor(e,t,n=!1,i=null){this._stream=e,this._done=n||!1,this._filename=wF(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ide{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function sde(r){let e=!0,t=n("filename\\*","i").exec(r);if(t){t=t[1];let c=o(t);return c=unescape(c),c=l(c),c=u(c),s(c)}if(t=a(r),t){const c=u(t);return s(c)}if(t=n("filename","i").exec(r),t){t=t[1];let c=o(t);return c=u(c),s(c)}function n(c,h){return new RegExp("(?:^|;)\\s*"+c+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function i(c,h){if(c){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const d=new TextDecoder(c,{fatal:!0}),f=Zx(h);h=d.decode(f),e=!1}catch{}}return h}function s(c){return e&&/[\x80-\xff]/.test(c)&&(c=i("utf-8",c),e&&(c=i("iso-8859-1",c))),c}function a(c){const h=[];let d;const f=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(d=f.exec(c))!==null;){let[,g,b,v]=d;if(g=parseInt(g,10),g in h){if(g===0)break;continue}h[g]=[b,v]}const p=[];for(let g=0;g<h.length&&g in h;++g){let[b,v]=h[g];v=o(v),b&&(v=unescape(v),g===0&&(v=l(v))),p.push(v)}return p.join("")}function o(c){if(c.startsWith('"')){const h=c.slice(1).split('\\"');for(let d=0;d<h.length;++d){const f=h[d].indexOf('"');f!==-1&&(h[d]=h[d].slice(0,f),h.length=d+1),h[d]=h[d].replaceAll(/\\(.)/g,"$1")}c=h.join('"')}return c}function l(c){const h=c.indexOf("'");if(h===-1)return c;const d=c.slice(0,h),p=c.slice(h+1).replace(/^[^']*'/,"");return i(d,p)}function u(c){return!c.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(c)?c:c.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,d,f,p){if(f==="q"||f==="Q")return p=p.replaceAll("_"," "),p=p.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,b){return String.fromCharCode(parseInt(b,16))}),i(d,p);try{p=atob(p)}catch{}return i(d,p)})}return""}function wG(r,e){const t=new Headers;if(!r||!e||typeof e!="object")return t;for(const n in e){const i=e[n];i!==void 0&&t.append(n,i)}return t}function WC(r){var e;return((e=URL.parse(r))==null?void 0:e.origin)??null}function xG({responseHeaders:r,isHttp:e,rangeChunkSize:t,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(r.get("Content-Length"),10);return!Number.isInteger(s)||(i.suggestedLength=s,s<=2*t)||n||!e||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function _G(r){const e=r.get("Content-Disposition");if(e){let t=sde(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(wF(t))return t}return null}function i_(r,e){return new US(`Unexpected server response (${r}) while retrieving PDF "${e}".`,r,r===404||r===0&&e.startsWith("file:"))}function AG(r){return r===200||r===206}function EG(r,e,t){return{method:"GET",headers:r,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function SG(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(At(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class ade{constructor(e){Pe(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=wG(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Xt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new ode(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new lde(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class ode{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),i=t.url;fetch(i,EG(n,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=WC(s.url),!AG(s.status))throw i_(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();const a=s.headers,{allowRangeRequests:o,suggestedLength:l}=xG({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=_G(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ed("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:SG(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class lde{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${n-1}`);const a=i.url;fetch(a,EG(s,this._withCredentials,this._abortController)).then(o=>{const l=WC(o.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!AG(o.status))throw i_(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:SG(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const U2=200,z2=206;function ude(r){const e=r.response;return typeof e!="string"?e:Zx(e).buffer}class cde{constructor({url:e,httpHeaders:t,withCredentials:n}){Pe(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=wG(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,a]of this.headers)t.setRequestHeader(s,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=z2):i.expectedStatus=U2,t.responseType="arraybuffer",Xt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var i;const n=this.pendingRequests[e];n&&((i=n.onProgress)==null||i.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){n.onError(i.status);return}const s=i.status||U2;if(!(s===U2&&n.expectedStatus===z2)&&s!==n.expectedStatus){n.onError(i.status);return}const o=ude(i);if(s===z2){const l=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);u?n.onDone({begin:parseInt(u[1],10),chunk:o}):(At('Missing or invalid "Content-Range" header.'),n.onError(0))}else o?n.onDone({begin:0,chunk:o}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class hde{constructor(e){this._source=e,this._manager=new cde(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Xt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new dde(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new fde(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class dde{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=WC(t.responseURL);const n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[l,...u]=o.split(": ");return[l,u.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:a}=xG({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=_G(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=i_(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class fde{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=WC((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=i_(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const mde=/^[a-z][a-z0-9\-+.]+:/i;function pde(r){if(mde.test(r))return new URL(r);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(r))}class gde{constructor(e){this.source=e,this.url=pde(e.url),Xt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Xt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new vde(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new yde(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class vde{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=i_(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ed("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class yde{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Ly=Symbol("INITIAL_DATA");var sa,kw,NI;class TG{constructor(){L(this,kw);L(this,sa,Object.create(null))}get(e,t=null){if(t){const i=z(this,kw,NI).call(this,e);return i.promise.then(()=>t(i.data)),null}const n=m(this,sa)[e];if(!n||n.data===Ly)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=m(this,sa)[e];return!!t&&t.data!==Ly}delete(e){const t=m(this,sa)[e];return!t||t.data===Ly?!1:(delete m(this,sa)[e],!0)}resolve(e,t=null){const n=z(this,kw,NI).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in m(this,sa)){const{data:n}=m(this,sa)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}k(this,sa,Object.create(null))}*[Symbol.iterator](){for(const e in m(this,sa)){const{data:t}=m(this,sa)[e];t!==Ly&&(yield[e,t])}}}sa=new WeakMap,kw=new WeakSet,NI=function(e){var t;return(t=m(this,sa))[e]||(t[e]={...Promise.withResolvers(),data:Ly})};const bde=1e5,x5=30;var NU,Ah,Os,Fw,Ow,rm,Ou,Bw,Lw,nm,Nv,Dv,Eh,Mv,$w,Iv,im,Vw,Uw,Pv,sm,zw,Sh,Rv,Dc,CG,NG,DI,Da,AE,MI,DG,MG;const $n=class $n{constructor({textContentSource:e,container:t,viewport:n}){L(this,Dc);L(this,Ah,Promise.withResolvers());L(this,Os,null);L(this,Fw,!1);L(this,Ow,!!((NU=globalThis.FontInspector)!=null&&NU.enabled));L(this,rm,null);L(this,Ou,null);L(this,Bw,0);L(this,Lw,0);L(this,nm,null);L(this,Nv,null);L(this,Dv,0);L(this,Eh,0);L(this,Mv,Object.create(null));L(this,$w,[]);L(this,Iv,null);L(this,im,[]);L(this,Vw,new WeakMap);L(this,Uw,null);var l;if(e instanceof ReadableStream)k(this,Iv,e);else if(typeof e=="object")k(this,Iv,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');k(this,Os,k(this,Nv,t)),k(this,Eh,n.scale*Zl.pixelRatio),k(this,Dv,n.rotation),k(this,Ou,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:s,pageX:a,pageY:o}=n.rawDims;k(this,Uw,[1,0,0,-1,-a,o+s]),k(this,Lw,i),k(this,Bw,s),z(l=$n,Da,DG).call(l),np(t,n),m(this,Ah).promise.finally(()=>{m($n,Rv).delete(this),k(this,Ou,null),k(this,Mv,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Ri.platform;return Et(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{m(this,nm).read().then(({value:t,done:n})=>{if(n){m(this,Ah).resolve();return}m(this,rm)??k(this,rm,t.lang),Object.assign(m(this,Mv),t.styles),z(this,Dc,CG).call(this,t.items),e()},m(this,Ah).reject)};return k(this,nm,m(this,Iv).getReader()),m($n,Rv).add(this),e(),m(this,Ah).promise}update({viewport:e,onBefore:t=null}){var s;const n=e.scale*Zl.pixelRatio,i=e.rotation;if(i!==m(this,Dv)&&(t==null||t(),k(this,Dv,i),np(m(this,Nv),{rotation:i})),n!==m(this,Eh)){t==null||t(),k(this,Eh,n);const a={div:null,properties:null,ctx:z(s=$n,Da,AE).call(s,m(this,rm))};for(const o of m(this,im))a.properties=m(this,Vw).get(o),a.div=o,z(this,Dc,DI).call(this,a)}}cancel(){var t;const e=new Ed("TextLayer task cancelled.");(t=m(this,nm))==null||t.cancel(e).catch(()=>{}),k(this,nm,null),m(this,Ah).reject(e)}get textDivs(){return m(this,im)}get textContentItemsStr(){return m(this,$w)}static cleanup(){if(!(m(this,Rv).size>0)){m(this,Pv).clear();for(const{canvas:e}of m(this,sm).values())e.remove();m(this,sm).clear()}}};Ah=new WeakMap,Os=new WeakMap,Fw=new WeakMap,Ow=new WeakMap,rm=new WeakMap,Ou=new WeakMap,Bw=new WeakMap,Lw=new WeakMap,nm=new WeakMap,Nv=new WeakMap,Dv=new WeakMap,Eh=new WeakMap,Mv=new WeakMap,$w=new WeakMap,Iv=new WeakMap,im=new WeakMap,Vw=new WeakMap,Uw=new WeakMap,Pv=new WeakMap,sm=new WeakMap,zw=new WeakMap,Sh=new WeakMap,Rv=new WeakMap,Dc=new WeakSet,CG=function(e){var i,s;if(m(this,Fw))return;(s=m(this,Ou)).ctx??(s.ctx=z(i=$n,Da,AE).call(i,m(this,rm)));const t=m(this,im),n=m(this,$w);for(const a of e){if(t.length>bde){At("Ignoring additional textDivs for performance reasons."),k(this,Fw,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=m(this,Os);k(this,Os,document.createElement("span")),m(this,Os).classList.add("markedContent"),a.id&&m(this,Os).setAttribute("id",`${a.id}`),o.append(m(this,Os))}else a.type==="endMarkedContent"&&k(this,Os,m(this,Os).parentNode);continue}n.push(a.str),z(this,Dc,NG).call(this,a)}},NG=function(e){var g;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};m(this,im).push(t);const i=Ze.transform(m(this,Uw),e.transform);let s=Math.atan2(i[1],i[0]);const a=m(this,Mv)[e.fontName];a.vertical&&(s+=Math.PI/2);let o=m(this,Ow)&&a.fontSubstitution||a.fontFamily;o=$n.fontFamilyMap.get(o)||o;const l=Math.hypot(i[2],i[3]),u=l*z(g=$n,Da,MG).call(g,o,a,m(this,rm));let c,h;s===0?(c=i[4],h=i[5]-u):(c=i[4]+u*Math.sin(s),h=i[5]-u*Math.cos(s));const d="calc(var(--total-scale-factor) *",f=t.style;m(this,Os)===m(this,Nv)?(f.left=`${(100*c/m(this,Lw)).toFixed(2)}%`,f.top=`${(100*h/m(this,Bw)).toFixed(2)}%`):(f.left=`${d}${c.toFixed(2)}px)`,f.top=`${d}${h.toFixed(2)}px)`),f.fontSize=`${d}${(m($n,Sh)*l).toFixed(2)}px)`,f.fontFamily=o,n.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,m(this,Ow)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),s!==0&&(n.angle=s*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const b=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);b!==v&&Math.max(b,v)/Math.min(b,v)>1.5&&(p=!0)}if(p&&(n.canvasWidth=a.vertical?e.height:e.width),m(this,Vw).set(t,n),m(this,Ou).div=t,m(this,Ou).properties=n,z(this,Dc,DI).call(this,m(this,Ou)),n.hasText&&m(this,Os).append(t),n.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),m(this,Os).append(b)}},DI=function(e){var o;const{div:t,properties:n,ctx:i}=e,{style:s}=t;let a="";if(m($n,Sh)>1&&(a=`scale(${1/m($n,Sh)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:l}=s,{canvasWidth:u,fontSize:c}=n;z(o=$n,Da,MI).call(o,i,c*m(this,Eh),l);const{width:h}=i.measureText(t.textContent);h>0&&(a=`scaleX(${u*m(this,Eh)/h}) ${a}`)}n.angle!==0&&(a=`rotate(${n.angle}deg) ${a}`),a.length>0&&(s.transform=a)},Da=new WeakSet,AE=function(e=null){let t=m(this,sm).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),m(this,sm).set(e,t),m(this,zw).set(t,{size:0,family:""})}return t},MI=function(e,t,n){const i=m(this,zw).get(e);t===i.size&&n===i.family||(e.font=`${t}px ${n}`,i.size=t,i.family=n)},DG=function(){if(m(this,Sh)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),k(this,Sh,e.getBoundingClientRect().height),e.remove()},MG=function(e,t,n){const i=m(this,Pv).get(e);if(i)return i;const s=z(this,Da,AE).call(this,n);s.canvas.width=s.canvas.height=x5,z(this,Da,MI).call(this,s,x5,e);const a=s.measureText(""),o=a.fontBoundingBoxAscent,l=Math.abs(a.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let u=.8;return o?u=o/(o+l):(Ri.platform.isFirefox&&At("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?u=t.ascent:t.descent&&(u=1+t.descent)),m(this,Pv).set(e,u),u},L($n,Da),L($n,Pv,new Map),L($n,sm,new Map),L($n,zw,new WeakMap),L($n,Sh,null),L($n,Rv,new Set);let I1=$n;const wde=100;function IG(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const e=new II,{docId:t}=e,n=r.url?Che(r.url):null,i=r.data?Nhe(r.data):null,s=r.httpHeaders||null,a=r.withCredentials===!0,o=r.password??null,l=r.range instanceof PG?r.range:null,u=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let c=r.worker instanceof P1?r.worker:null;const h=r.verbosity,d=typeof r.docBaseUrl=="string"&&!GC(r.docBaseUrl)?r.docBaseUrl:null,f=dA(r.cMapUrl),p=r.cMapPacked!==!1,g=r.CMapReaderFactory||(fs?Ohe:o5),b=dA(r.iccUrl),v=dA(r.standardFontDataUrl),w=r.StandardFontDataFactory||(fs?Bhe:l5),y=dA(r.wasmUrl),A=r.WasmFactory||(fs?Lhe:u5),x=r.stopAtErrors!==!0,_=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,S=r.isEvalSupported!==!1,E=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!fs,C=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!fs&&(Ri.platform.isFirefox||!globalThis.chrome),N=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,D=typeof r.disableFontFace=="boolean"?r.disableFontFace:fs,M=r.fontExtraProperties===!0,I=r.enableXfa===!0,V=r.ownerDocument||globalThis.document,K=r.disableRange===!0,F=r.disableStream===!0,U=r.disableAutoFetch===!0,j=r.pdfBug===!0,G=r.CanvasFactory||(fs?Fhe:Phe),ee=r.FilterFactory||(fs?khe:Rhe),ue=r.enableHWA===!0,te=r.useWasm!==!1,R=l?l.length:r.length??NaN,Y=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!fs&&!D,H=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(g===o5&&w===l5&&A===u5&&f&&v&&y&&rb(f,document.baseURI)&&rb(v,document.baseURI)&&rb(y,document.baseURI)),he=null;the(h);const fe={canvasFactory:new G({ownerDocument:V,enableHWA:ue}),filterFactory:new ee({docId:t,ownerDocument:V}),cMapReaderFactory:H?null:new g({baseUrl:f,isCompressed:p}),standardFontDataFactory:H?null:new w({baseUrl:v}),wasmFactory:H?null:new A({baseUrl:y})};c||(c=P1.create({verbosity:h,port:Bl.workerPort}),e._worker=c);const re={docId:t,apiVersion:"5.4.449",data:i,password:o,disableAutoFetch:U,rangeChunkSize:u,length:R,docBaseUrl:d,enableXfa:I,evaluatorOptions:{maxImageSize:_,disableFontFace:D,ignoreErrors:x,isEvalSupported:S,isOffscreenCanvasSupported:E,isImageDecoderSupported:C,canvasMaxAreaInBytes:N,fontExtraProperties:M,useSystemFonts:Y,useWasm:te,useWorkerFetch:H,cMapUrl:f,iccUrl:b,standardFontDataUrl:v,wasmUrl:y}},W={ownerDocument:V,pdfBug:j,styleElement:he,loadingParams:{disableAutoFetch:U,enableXfa:I}};return c.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const ie=c.messageHandler.sendWithPromise("GetDocRequest",re,i?[i.buffer]:null);let me;if(l)me=new rde(l,{disableRange:K,disableStream:F});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");const le=rb(n)?ade:fs?gde:hde;me=new le({url:n,length:R,httpHeaders:s,withCredentials:a,rangeChunkSize:u,disableRange:K,disableStream:F})}return ie.then(le=>{if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const ve=new cb(t,le,c.port),ye=new Ade(ve,e,me,W,fe,ue);e._transport=ye,ve.send("Ready",null)})}).catch(e._capability.reject),e}var HT;const GT=class GT{constructor(){Pe(this,"_capability",Promise.withResolvers());Pe(this,"_transport",null);Pe(this,"_worker",null);Pe(this,"docId",`d${Ln(GT,HT)._++}`);Pe(this,"destroyed",!1);Pe(this,"onPassword",null);Pe(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,n,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,s}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};HT=new WeakMap,L(GT,HT,0);let II=GT;var am,jw,qw,Hw,Gw;class PG{constructor(e,t,n=!1,i=null){L(this,am,Promise.withResolvers());L(this,jw,[]);L(this,qw,[]);L(this,Hw,[]);L(this,Gw,[]);this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(e){m(this,Gw).push(e)}addProgressListener(e){m(this,Hw).push(e)}addProgressiveReadListener(e){m(this,qw).push(e)}addProgressiveDoneListener(e){m(this,jw).push(e)}onDataRange(e,t){for(const n of m(this,Gw))n(e,t)}onDataProgress(e,t){m(this,am).promise.then(()=>{for(const n of m(this,Hw))n(e,t)})}onDataProgressiveRead(e){m(this,am).promise.then(()=>{for(const t of m(this,qw))t(e)})}onDataProgressiveDone(){m(this,am).promise.then(()=>{for(const e of m(this,jw))e()})}transportReady(){m(this,am).resolve()}requestDataRange(e,t){Dr("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}am=new WeakMap,jw=new WeakMap,qw=new WeakMap,Hw=new WeakMap,Gw=new WeakMap;class xde{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Et(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Bu,om,pb;class _de{constructor(e,t,n,i=!1){L(this,om);L(this,Bu,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new e5:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new TG,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:s=!1}={}){return new t_({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Et(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:i="display",annotationMode:s=Qc.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:u=null,pageColors:c=null,printAnnotationStorage:h=null,isEditing:d=!1,recordOperations:f=!1,operationsFilter:p=null}){var C,N,D;(C=this._stats)==null||C.time("Overall");const g=this._transport.getRenderingIntent(i,s,h,d),{renderingIntent:b,cacheKey:v}=g;k(this,Bu,!1),l||(l=this._transport.getOptionalContentConfig(b));let w=this._intentStates.get(v);w||(w=Object.create(null),this._intentStates.set(v,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const y=!!(b&ba.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(N=this._stats)==null||N.time("Page Request"),this._pumpOperatorList(g));const A=!!(this._pdfBug&&((D=globalThis.StepperManager)!=null&&D.enabled)),x=!this.recordedBBoxes&&(f||A),_=M=>{var I,V;if(w.renderTasks.delete(S),x){const K=(I=S.gfx)==null?void 0:I.dependencyTracker.take();K&&(S.stepper&&S.stepper.setOperatorBBoxes(K,S.gfx.dependencyTracker.takeDebugMetadata()),f&&(this.recordedBBoxes=K))}y&&k(this,Bu,!0),z(this,om,pb).call(this),M?(S.capability.reject(M),this._abortOperatorList({intentState:w,reason:M instanceof Error?M:new Error(M)})):S.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(V=globalThis.Stats)!=null&&V.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},S=new PI({callback:_,params:{canvas:t,canvasContext:e,dependencyTracker:x?new Vhe(t,w.operatorList.length,A):null,viewport:n,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!y,pdfBug:this._pdfBug,pageColors:c,enableHWA:this._transport.enableHWA,operationsFilter:p});(w.renderTasks||(w.renderTasks=new Set)).add(S);const E=S.task;return Promise.all([w.displayReadyCapability.promise,l]).then(([M,I])=>{var V;if(this.destroyed){_();return}if((V=this._stats)==null||V.time("Rendering"),!(I.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");S.initializeGraphics({transparency:M,optionalContentConfig:I}),S.operatorListChanged()}).catch(_),E}getOperatorList({intent:e="display",annotationMode:t=Qc.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){var u;function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(e,t,n,i,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>M1.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,i){function s(){a.read().then(function({value:l,done:u}){if(u){n(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),s()},i)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),k(this,Bu,!1),Promise.all(e)}cleanup(e=!1){k(this,Bu,!0);const t=z(this,om,pb).call(this);return e&&t&&this._stats&&(this._stats=new e5),t}_startRenderPage(e,t){var i,s;const n=this._intentStates.get(t);n&&((i=this._stats)==null||i.timeEnd("Page Request"),(s=n.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&z(this,om,pb).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:i}){const{map:s,transfer:a}=n,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:i},a).getReader(),u=this._intentStates.get(t);u.streamReader=l;const c=()=>{l.read().then(({value:h,done:d})=>{if(d){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,u),c())},h=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const d of u.renderTasks)d.operatorListChanged();z(this,om,pb).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(h);else if(u.opListReadCapability)u.opListReadCapability.reject(h);else throw h}})};c()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof bF){let i=wde;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new Ed(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,s]of this._intentStates)if(s===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}Bu=new WeakMap,om=new WeakSet,pb=function(){if(!m(this,Bu)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),k(this,Bu,!1),!0};var Th,Ro,Lu,lm,WT,um,cm,vs,EE,RG,kG,gb,kv,SE;const zr=class zr{constructor({name:e=null,port:t=null,verbosity:n=rhe()}={}){L(this,vs);L(this,Th,Promise.withResolvers());L(this,Ro,null);L(this,Lu,null);L(this,lm,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(m(zr,cm).has(t))throw new Error("Cannot use more than one PDFWorker per port.");m(zr,cm).set(t,this),z(this,vs,RG).call(this,t)}else z(this,vs,kG).call(this)}get promise(){return m(this,Th).promise}get port(){return m(this,Lu)}get messageHandler(){return m(this,Ro)}destroy(){var e,t;this.destroyed=!0,(e=m(this,lm))==null||e.terminate(),k(this,lm,null),m(zr,cm).delete(m(this,Lu)),k(this,Lu,null),(t=m(this,Ro))==null||t.destroy(),k(this,Ro,null)}static create(e){const t=m(this,cm).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new zr(e)}static get workerSrc(){if(Bl.workerSrc)return Bl.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Et(this,"_setupFakeWorkerGlobal",(async()=>m(this,kv,SE)?m(this,kv,SE):(await import(this.workerSrc)).WorkerMessageHandler)())}};Th=new WeakMap,Ro=new WeakMap,Lu=new WeakMap,lm=new WeakMap,WT=new WeakMap,um=new WeakMap,cm=new WeakMap,vs=new WeakSet,EE=function(){m(this,Th).resolve(),m(this,Ro).send("configure",{verbosity:this.verbosity})},RG=function(e){k(this,Lu,e),k(this,Ro,new cb("main","worker",e)),m(this,Ro).on("ready",()=>{}),z(this,vs,EE).call(this)},kG=function(){if(m(zr,um)||m(zr,kv,SE)){z(this,vs,gb).call(this);return}let{workerSrc:e}=zr;try{zr._isSameOrigin(window.location,e)||(e=zr._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new cb("main","worker",t),i=()=>{s.abort(),n.destroy(),t.terminate(),this.destroyed?m(this,Th).reject(new Error("Worker was destroyed")):z(this,vs,gb).call(this)},s=new AbortController;t.addEventListener("error",()=>{m(this,lm)||i()},{signal:s.signal}),n.on("test",o=>{if(s.abort(),this.destroyed||!o){i();return}k(this,Ro,n),k(this,Lu,t),k(this,lm,t),z(this,vs,EE).call(this)}),n.on("ready",o=>{if(s.abort(),this.destroyed){i();return}try{a()}catch{z(this,vs,gb).call(this)}});const a=()=>{const o=new Uint8Array;n.send("test",o,[o.buffer])};a();return}catch{HC("The worker has been disabled.")}z(this,vs,gb).call(this)},gb=function(){m(zr,um)||(At("Setting up fake worker."),k(zr,um,!0)),zr._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){m(this,Th).reject(new Error("Worker was destroyed"));return}const t=new Ihe;k(this,Lu,t);const n=`fake${Ln(zr,WT)._++}`,i=new cb(n+"_worker",n,t);e.setup(i,t),k(this,Ro,new cb(n,n+"_worker",t)),z(this,vs,EE).call(this)}).catch(e=>{m(this,Th).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},kv=new WeakSet,SE=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},L(zr,kv),L(zr,WT,0),L(zr,um,!1),L(zr,cm,new WeakMap),fs&&(k(zr,um,!0),Bl.workerSrc||(Bl.workerSrc="./pdf.worker.mjs")),zr._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const i=new URL(t,n);return n.origin===i.origin},zr._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},zr.fromPort=e=>{if(mhe("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return zr.create(e)};let P1=zr;var $u,Tl,Fv,Ov,Vu,hm,vb;class Ade{constructor(e,t,n,i,s,a){L(this,hm);L(this,$u,new Map);L(this,Tl,new Map);L(this,Fv,new Map);L(this,Ov,new Map);L(this,Vu,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new TG,this.fontLoader=new She({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}get annotationStorage(){return Et(this,"annotationStorage",new xF)}getRenderingIntent(e,t=Qc.ENABLE,n=null,i=!1,s=!1){let a=ba.DISPLAY,o=mI;switch(e){case"any":a=ba.ANY;break;case"display":break;case"print":a=ba.PRINT;break;default:At(`getRenderingIntent - invalid intent: ${e}`)}const l=a&ba.PRINT&&n instanceof cG?n:this.annotationStorage;switch(t){case Qc.DISABLE:a+=ba.ANNOTATIONS_DISABLE;break;case Qc.ENABLE:break;case Qc.ENABLE_FORMS:a+=ba.ANNOTATIONS_FORMS;break;case Qc.ENABLE_STORAGE:a+=ba.ANNOTATIONS_STORAGE,o=l.serializable;break;default:At(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(a+=ba.IS_EDITING),s&&(a+=ba.OPLIST);const{ids:u,hash:c}=l.modifiedIds,h=[a,o.hash,c];return{renderingIntent:a,cacheKey:h.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=m(this,Vu))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of m(this,Tl).values())e.push(i._destroy());m(this,Tl).clear(),m(this,Fv).clear(),m(this,Ov).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,s;this.commonObjs.clear(),this.fontLoader.clear(),m(this,$u).clear(),this.filterFactory.destroy(),I1.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new Ed("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,i)=>{Xt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},i.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){i.close();return}Xt(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this._fullReader.cancel(s),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async n=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:s,contentLength:a}=this._fullReader;return(!i||!s)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:s,contentLength:a}}),e.on("GetRangeReader",(n,i)=>{Xt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(n.begin,n.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:a,done:o}){if(o){i.close();return}Xt(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{s.cancel(a),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new xde(n,this))}),e.on("DocException",n=>{t._capability.reject(Ms(n))}),e.on("PasswordRequest",n=>{k(this,Vu,Promise.withResolvers());try{if(!t.onPassword)throw Ms(n);const i=s=>{s instanceof Error?m(this,Vu).reject(s):m(this,Vu).resolve({password:s})};t.onPassword(i,n.code)}catch(i){m(this,Vu).reject(i)}return m(this,Vu).promise}),e.on("DataLoaded",n=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;m(this,Tl).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,i,s])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in s){const d=s.error;At(`Error during font loading: ${d}`),this.commonObjs.resolve(n,d);break}const o=new pI(s),l=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(d,f)=>globalThis.FontInspector.fontAdded(d,f):null,u=new The(o,l,s.extra,s.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(n,u)});break;case"CopyLocalImage":const{imageRef:c}=s;Xt(c,"The imageRef must be defined.");for(const d of m(this,Tl).values())for(const[,f]of d.objs)if((f==null?void 0:f.ref)===c)return f.dataLen?(this.commonObjs.resolve(n,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":this.commonObjs.resolve(n,s);break;case"Pattern":const h=new gI(s);this.commonObjs.resolve(n,h.getIR());break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([n,i,s,a])=>{var l;if(this.destroyed)return;const o=m(this,Tl).get(i);if(!o.objs.has(n)){if(o._intentStates.size===0){(l=a==null?void 0:a.bitmap)==null||l.close();return}switch(s){case"Image":case"Pattern":o.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",n=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&At("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=m(this,Fv).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&m(this,Ov).set(s.refStr,e);const a=new _de(t,s,this,this._params.pdfBug);return m(this,Tl).set(t,a),a});return m(this,Fv).set(t,i),i}getPageIndex(e){return vI(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return z(this,hm,vb).call(this,"GetFieldObjects")}hasJSActions(){return z(this,hm,vb).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return z(this,hm,vb).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return z(this,hm,vb).call(this,"GetOptionalContentConfig").then(t=>new tde(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=m(this,$u).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(i=>{var s,a;return{info:i[0],metadata:i[1]?new Zhe(i[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null,hasStructTree:i[2]}});return m(this,$u).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of m(this,Tl).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),m(this,$u).clear(),this.filterFactory.destroy(!0),I1.cleanup()}}cachedPageNumber(e){if(!vI(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return m(this,Ov).get(t)??null}}$u=new WeakMap,Tl=new WeakMap,Fv=new WeakMap,Ov=new WeakMap,Vu=new WeakMap,hm=new WeakSet,vb=function(e,t=null){const n=m(this,$u).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return m(this,$u).set(e,i),i};var Ch;class Ede{constructor(e){L(this,Ch,null);Pe(this,"onContinue",null);Pe(this,"onError",null);k(this,Ch,e)}get promise(){return m(this,Ch).capability.promise}cancel(e=0){m(this,Ch).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=m(this,Ch).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=m(this,Ch);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Ch=new WeakMap;var Nh,dm;const pf=class pf{constructor({callback:e,params:t,objs:n,commonObjs:i,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:c=!1,pdfBug:h=!1,pageColors:d=null,enableHWA:f=!1,operationsFilter:p=null}){L(this,Nh,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=h,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=c===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Ede(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=f,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=p}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var l,u;if(this.cancelled)return;if(this._canvas){if(m(pf,dm).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");m(pf,dm).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:i,background:s,dependencyTracker:a}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Og(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:i,viewport:n,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,t=0){var n,i,s;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),m(this,Nh)&&(window.cancelAnimationFrame(m(this,Nh)),k(this,Nh,null)),m(pf,dm).delete(this._canvas),e||(e=new bF(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(s=(i=this.task).onError)==null||s.call(i,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?k(this,Nh,window.requestAnimationFrame(()=>{k(this,Nh,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),m(pf,dm).delete(this._canvas),this.callback())))}};Nh=new WeakMap,dm=new WeakMap,L(pf,dm,new WeakSet);let PI=pf;const Sde="5.4.449",Tde="f44e5f0e6";var aa,fm,Bv,zn,Ww,Lv,Uu,Kw,Dh,ko,Xw,_r,RI,kI,FI,uf,FG,jc;const Is=class Is{constructor({editor:e=null,uiManager:t=null}){L(this,_r);L(this,aa,null);L(this,fm,null);L(this,Bv);L(this,zn,null);L(this,Ww,!1);L(this,Lv,!1);L(this,Uu,null);L(this,Kw);L(this,Dh,null);L(this,ko,null);var n,i;e?(k(this,Lv,!1),k(this,Uu,e)):k(this,Lv,!0),k(this,ko,(e==null?void 0:e._uiManager)||t),k(this,Kw,m(this,ko)._eventBus),k(this,Bv,((n=e==null?void 0:e.color)==null?void 0:n.toUpperCase())||((i=m(this,ko))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),m(Is,Xw)||k(Is,Xw,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Et(this,"_keyboardManager",new n_([[["Escape","mac+Escape"],Is.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Is.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Is.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Is.prototype._moveToPrevious],[["Home","mac+Home"],Is.prototype._moveToBeginning],[["End","mac+End"],Is.prototype._moveToEnd]]))}renderButton(){const e=k(this,aa,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",m(this,Uu)&&(e.ariaControls=`${m(this,Uu).id}_colorpicker_dropdown`);const t=m(this,ko)._signal;e.addEventListener("click",z(this,_r,uf).bind(this),{signal:t}),e.addEventListener("keydown",z(this,_r,FI).bind(this),{signal:t});const n=k(this,fm,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=m(this,Bv),e.append(n),e}renderMainDropdown(){const e=k(this,zn,z(this,_r,RI).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===m(this,aa)){z(this,_r,uf).call(this,e);return}const t=e.target.getAttribute("data-color");t&&z(this,_r,kI).call(this,t,e)}_moveToNext(e){var t,n;if(!m(this,_r,jc)){z(this,_r,uf).call(this,e);return}if(e.target===m(this,aa)){(t=m(this,zn).firstElementChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=m(this,zn))==null?void 0:t.firstElementChild)||e.target===m(this,aa)){m(this,_r,jc)&&this._hideDropdownFromKeyboard();return}m(this,_r,jc)||z(this,_r,uf).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!m(this,_r,jc)){z(this,_r,uf).call(this,e);return}(t=m(this,zn).firstElementChild)==null||t.focus()}_moveToEnd(e){var t;if(!m(this,_r,jc)){z(this,_r,uf).call(this,e);return}(t=m(this,zn).lastElementChild)==null||t.focus()}hideDropdown(){var e,t;(e=m(this,zn))==null||e.classList.add("hidden"),m(this,aa).ariaExpanded="false",(t=m(this,Dh))==null||t.abort(),k(this,Dh,null)}_hideDropdownFromKeyboard(){var e;if(!m(this,Lv)){if(!m(this,_r,jc)){(e=m(this,Uu))==null||e.unselect();return}this.hideDropdown(),m(this,aa).focus({preventScroll:!0,focusVisible:m(this,Ww)})}}updateColor(e){if(m(this,fm)&&(m(this,fm).style.backgroundColor=e),!m(this,zn))return;const t=m(this,ko).highlightColors.values();for(const n of m(this,zn).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=m(this,aa))==null||e.remove(),k(this,aa,null),k(this,fm,null),(t=m(this,zn))==null||t.remove(),k(this,zn,null)}};aa=new WeakMap,fm=new WeakMap,Bv=new WeakMap,zn=new WeakMap,Ww=new WeakMap,Lv=new WeakMap,Uu=new WeakMap,Kw=new WeakMap,Dh=new WeakMap,ko=new WeakMap,Xw=new WeakMap,_r=new WeakSet,RI=function(){const e=document.createElement("div"),t=m(this,ko)._signal;e.addEventListener("contextmenu",vo,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),m(this,Uu)&&(e.id=`${m(this,Uu).id}_colorpicker_dropdown`);for(const[n,i]of m(this,ko).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=n,s.setAttribute("data-l10n-id",m(Is,Xw)[n]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=i,s.ariaSelected=i===m(this,Bv),s.addEventListener("click",z(this,_r,kI).bind(this,i),{signal:t}),e.append(s)}return e.addEventListener("keydown",z(this,_r,FI).bind(this),{signal:t}),e},kI=function(e,t){t.stopPropagation(),m(this,Kw).dispatch("switchannotationeditorparams",{source:this,type:Kt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},FI=function(e){Is._keyboardManager.exec(this,e)},uf=function(e){if(m(this,_r,jc)){this.hideDropdown();return}if(k(this,Ww,e.detail===0),m(this,Dh)||(k(this,Dh,new AbortController),window.addEventListener("pointerdown",z(this,_r,FG).bind(this),{signal:m(this,ko).combinedSignal(m(this,Dh))})),m(this,aa).ariaExpanded="true",m(this,zn)){m(this,zn).classList.remove("hidden");return}const t=k(this,zn,z(this,_r,RI).call(this));m(this,aa).append(t)},FG=function(e){var t;(t=m(this,zn))!=null&&t.contains(e.target)||this.hideDropdown()},jc=function(){return m(this,zn)&&!m(this,zn).classList.contains("hidden")},L(Is,Xw,null);let KS=Is;var Cl,Yw,$v,Qw;const gf=class gf{constructor(e){L(this,Cl,null);L(this,Yw,null);L(this,$v,null);k(this,Yw,e),k(this,$v,e._uiManager),m(gf,Qw)||k(gf,Qw,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(m(this,Cl))return m(this,Cl);const{editorType:e,colorType:t,color:n}=m(this,Yw),i=k(this,Cl,document.createElement("input"));return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",m(gf,Qw)[e]),i.addEventListener("input",()=>{m(this,$v).updateParams(t,i.value)},{signal:m(this,$v)._signal}),i}update(e){m(this,Cl)&&(m(this,Cl).value=e)}destroy(){var e;(e=m(this,Cl))==null||e.remove(),k(this,Cl,null)}hideDropdown(){}};Cl=new WeakMap,Yw=new WeakMap,$v=new WeakMap,Qw=new WeakMap,L(gf,Qw,null);let XS=gf;function _5(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function $y(r){return Math.max(0,Math.min(255,255*r))}class A5{static CMYK_G([e,t,n,i]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=$y(e),[e,e,e]}static G_HTML([e]){const t=_5(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map($y)}static RGB_HTML(e){return`#${e.map(_5).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,n+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,n,i]){return[$y(1-Math.min(1,e+i)),$y(1-Math.min(1,n+i)),$y(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const i=1-e,s=1-t,a=1-n,o=Math.min(i,s,a);return["CMYK",i,s,a,o]}}class Cde{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Dr("Abstract method `_createSVG` called.")}}class YS extends Cde{_createSVG(e){return document.createElementNS(du,e)}}const Nde=9,sp=new WeakSet,Dde=new Date().getTimezoneOffset()*60*1e3;class j2{static create(e){switch(e.data.annotationType){case Nn.LINK:return new EF(e);case Nn.TEXT:return new Ide(e);case Nn.WIDGET:switch(e.data.fieldType){case"Tx":return new Pde(e);case"Btn":return e.data.radioButton?new LG(e):e.data.checkBox?new kde(e):new Fde(e);case"Ch":return new Ode(e);case"Sig":return new Rde(e)}return new vp(e);case Nn.POPUP:return new BI(e);case Nn.FREETEXT:return new jG(e);case Nn.LINE:return new Lde(e);case Nn.SQUARE:return new $de(e);case Nn.CIRCLE:return new Vde(e);case Nn.POLYLINE:return new qG(e);case Nn.CARET:return new zde(e);case Nn.INK:return new SF(e);case Nn.POLYGON:return new Ude(e);case Nn.HIGHLIGHT:return new HG(e);case Nn.UNDERLINE:return new jde(e);case Nn.SQUIGGLY:return new qde(e);case Nn.STRIKEOUT:return new Hde(e);case Nn.STAMP:return new GG(e);case Nn.FILEATTACHMENT:return new Gde(e);default:return new Zr(e)}}}var mm,Vv,Za,Jw,OI;const RO=class RO{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){L(this,Jw);L(this,mm,null);L(this,Vv,!1);L(this,Za,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return RO._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:e}=this,t=(n=this.annotationStorage)==null?void 0:n.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var o;const e=(o=this.annotationStorage)==null?void 0:o.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:n,rect:i}=this.data;let s=-1/0,a=-1/0;if((t==null?void 0:t.length)>=8){for(let l=0;l<t.length;l+=8)t[l+1]>a?(a=t[l+1],s=t[l+2]):t[l+1]===a&&(s=Math.max(s,t[l+2]));return[s,a]}if((n==null?void 0:n.length)>=1){for(const l of n)for(let u=0,c=l.length;u<c;u+=2)l[u+1]>a?(a=l[u+1],s=l[u]):l[u+1]===a&&(s=Math.max(s,l[u]));if(s!==1/0)return[s,a]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:s,pageY:a}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-s)/n,e[1]=100*(e[1]-a)/i,e}get commentText(){var t,n,i;const{data:e}=this;return((n=(t=this.annotationStorage.getRawValue(`${N1}${e.id}`))==null?void 0:t.popup)==null?void 0:n.contents)||((i=e.contentsObj)==null?void 0:i.str)||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${N1}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=m(this,Za))==null?void 0:e.popup)||this.popup)==null||t.remove(),k(this,Za,this.popup=null)}updateEdited(e){var s;if(!this.container)return;e.rect&&(m(this,mm)||k(this,mm,{rect:this.data.rect.slice(0)}));const{rect:t,popup:n}=e;t&&z(this,Jw,OI).call(this,t);let i=((s=m(this,Za))==null?void 0:s.popup)||this.popup;!i&&(n!=null&&n.text)&&(this._createPopup(n),i=m(this,Za).popup),i&&(i.updateEdited(e),n!=null&&n.deleted&&(i.remove(),k(this,Za,null),this.popup=null))}resetEdited(){var e;m(this,mm)&&(z(this,Jw,OI).call(this,m(this,mm).rect),(e=m(this,Za))==null||e.popup.resetEdited(),k(this,mm,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),!(this instanceof vp)&&!(this instanceof EF)&&(s.tabIndex=0);const{style:a}=s;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof BI){const{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,s),s}const{width:o,height:l}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,b=t.borderStyle.verticalCornerRadius;if(g>0||b>0){const w=`calc(${g}px * var(--total-scale-factor)) / calc(${b}px * var(--total-scale-factor))`;a.borderRadius=w}else if(this instanceof LG){const w=`calc(${o}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;a.borderRadius=w}switch(t.borderStyle.style){case Gp.SOLID:a.borderStyle="solid";break;case Gp.DASHED:a.borderStyle="dashed";break;case Gp.BEVELED:At("Unimplemented border style: beveled");break;case Gp.INSET:At("Unimplemented border style: inset");break;case Gp.UNDERLINE:a.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(k(this,Vv,!0),a.borderColor=Ze.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):a.borderWidth=0}const u=Ze.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:h,pageX:d,pageY:f}=i.rawDims;a.left=`${100*(u[0]-d)/c}%`,a.top=`${100*(u[1]-f)/h}%`;const{rotation:p}=t;return t.hasOwnCanvas||p===0?(a.width=`${100*o/c}%`,a.height=`${100*l/h}%`):this.setRotation(p,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:s,height:a}=this;e%180!==0&&([s,a]=[a,s]),t.style.width=`${100*s/n}%`,t.style.height=`${100*a/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,i)=>{const s=i.detail[t],a=s[0],o=s.slice(1);i.target.style[n]=A5[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[n]:A5[`${a}_rgb`](o)})};return Et(this,"_commonActions",{display:t=>{const{display:n}=t.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail)){const s=e[i]||n[i];s==null||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,s]of Object.entries(t)){const a=n[i];if(a){const o={detail:{[i]:s},target:e};a(o),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,s]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){const[g,b,v,w]=e.subarray(2,6);if(i===g&&s===b&&t===v&&n===w)return}const{style:a}=this.container;let o;if(m(this,Vv)){const{borderColor:g,borderWidth:b}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${b}">`],this.container.classList.add("hasBorder")}const l=i-t,u=s-n,{svgFactory:c}=this,h=c.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const d=c.createElement("defs");h.append(d);const f=c.createElement("clipPath"),p=`clippath_${this.data.id}`;f.setAttribute("id",p),f.setAttribute("clipPathUnits","objectBoundingBox"),d.append(f);for(let g=2,b=e.length;g<b;g+=8){const v=e[g],w=e[g+1],y=e[g+2],A=e[g+3],x=c.createElement("rect"),_=(y-t)/l,S=(s-w)/u,E=(v-y)/l,C=(w-A)/u;x.setAttribute("x",_),x.setAttribute("y",S),x.setAttribute("width",E),x.setAttribute("height",C),f.append(x),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${_}" y="${S}" width="${E}" height="${C}"/>`)}m(this,Vv)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(h),this.container.style.clipPath=`url(#${p})`}_createPopup(e=null){const{data:t}=this;let n,i;e?(n={str:e.text},i=e.date):(n=t.contentsObj,i=t.modificationDate),k(this,Za,new BI({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(m(this,Za)||this.popup||this.data.popupRef)}get extraPopupElement(){return m(this,Za)}render(){Dr("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:s,id:a,exportValues:o}of i){if(s===-1||a===t)continue;const l=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!sp.has(u)){At(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:l,domElement:u})}return n}for(const i of document.getElementsByName(e)){const{exportValue:s}=i,a=i.getAttribute("data-element-id");a!==t&&sp.has(i)&&n.push({id:a,exportValue:s,domElement:i})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};mm=new WeakMap,Vv=new WeakMap,Za=new WeakMap,Jw=new WeakSet,OI=function(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}}}=this;n==null||n.splice(0,4,...e),t.left=`${100*(e[0]-o)/s}%`,t.top=`${100*(a-e[3]+l)/a}%`,i===0?(t.width=`${100*(e[2]-e[0])/s}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(i)};let Zr=RO;class Mde extends Zr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var Aa,cf,OG,BG;class EF extends Zr{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});L(this,Aa);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let s=!1;return t.url?(n.addLinkAttributes(i,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),s=!0):t.attachment?(z(this,Aa,OG).call(this,i,t.attachment,t.overlaidText,t.attachmentDest),s=!0):t.setOCGState?(z(this,Aa,BG).call(this,i,t.setOCGState,t.overlaidText),s=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),s=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&(this.contentElement=i,this.container.append(i)),this.container}_bindLink(t,n,i=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&z(this,Aa,cf).call(this),i&&(t.title=i)}_bindNamedAction(t,n,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),i&&(t.title=i),z(this,Aa,cf).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(n.actions)){const a=i.get(s);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:s}}),!1})}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),z(this,Aa,cf).call(this)}_bindResetFormAction(t,n){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),z(this,Aa,cf).call(this),!this._fieldObjects){At('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var h;i==null||i();const{fields:s,refs:a,include:o}=n,l=[];if(s.length!==0||a.length!==0){const d=new Set(a);for(const f of s){const p=this._fieldObjects[f]||[];for(const{id:g}of p)d.add(g)}for(const f of Object.values(this._fieldObjects))for(const p of f)d.has(p.id)===o&&l.push(p)}else for(const d of Object.values(this._fieldObjects))l.push(...d);const u=this.annotationStorage,c=[];for(const d of l){const{id:f}=d;switch(c.push(f),d.type){case"text":{const g=d.defaultValue||"";u.setValue(f,{value:g});break}case"checkbox":case"radiobutton":{const g=d.defaultValue===d.exportValues;u.setValue(f,{value:g});break}case"combobox":case"listbox":{const g=d.defaultValue||"";u.setValue(f,{value:g});break}default:continue}const p=document.querySelector(`[data-element-id="${f}"]`);if(p){if(!sp.has(p)){At(`_bindResetFormAction - element not allowed: ${f}`);continue}}else continue;p.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}})),!1}}}Aa=new WeakSet,cf=function(){this.container.setAttribute("data-internal-link","")},OG=function(t,n,i="",s=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:i&&(t.title=i),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(n.content,n.filename,s),!1},z(this,Aa,cf).call(this)},BG=function(t,n,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),i&&(t.title=i),z(this,Aa,cf).call(this)};class Ide extends Zr{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class vp extends Zr{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Ri.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,s){n.includes("mouse")?e.addEventListener(n,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(n,a=>{var o;if(n==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}s&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(a)}}))})}_setEventListeners(e,t,n,i){var s,a,o;for(const[l,u]of n)(u==="Action"||(s=this.data.actions)!=null&&s[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,u,i),u==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Ze.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||Nde,s=e.style;let a;const o=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),c=Math.round(u/(F2*i))||1,h=u/c;a=Math.min(i,l(h/F2))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(i,l(u/F2))}s.fontSize=`calc(${a}px * var(--total-scale-factor))`,s.color=Ze.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Pde extends vp{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,i){const s=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),s.setValue(a.id,{[i]:n})}render(){var i,s;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=a.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const c={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=u??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",u??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),sp.add(n),this.contentElement=n,n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:h,datetimeType:d,timeStep:f}=this.data,p=!!d&&this.enableScripting;h&&(n.title=h),this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",b=>{e.setValue(t,{value:b.target.value}),this.setPropertyOnSiblings(n,"value",b.target.value,"value"),c.formattedValue=null}),n.addEventListener("resetform",b=>{const v=this.data.defaultFieldValue??"";n.value=c.userValue=v,c.formattedValue=null});let g=b=>{const{formattedValue:v}=c;v!=null&&(b.target.value=v),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",v=>{var y;if(c.focused)return;const{target:w}=v;if(p&&(w.type=d,f&&(w.step=f)),c.userValue){const A=c.userValue;if(p)if(d==="time"){const x=new Date(A),_=[x.getHours(),x.getMinutes(),x.getSeconds()];w.value=_.map(S=>S.toString().padStart(2,"0")).join(":")}else w.value=new Date(A-Dde).toISOString().split(d==="date"?"T":".",1)[0];else w.value=A}c.lastCommittedValue=w.value,c.commitKey=1,(y=this.data.actions)!=null&&y.Focus||(c.focused=!0)}),n.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const w={value(y){c.userValue=y.detail.value??"",p||e.setValue(t,{value:c.userValue.toString()}),y.target.value=c.userValue},formattedValue(y){const{formattedValue:A}=y.detail;c.formattedValue=A,A!=null&&y.target!==document.activeElement&&(y.target.value=A);const x={formattedValue:A};p&&(x.value=A),e.setValue(t,x)},selRange(y){y.target.setSelectionRange(...y.detail.selRange)},charLimit:y=>{var S;const{charLimit:A}=y.detail,{target:x}=y;if(A===0){x.removeAttribute("maxLength");return}x.setAttribute("maxLength",A);let _=c.userValue;!_||_.length<=A||(_=_.slice(0,A),x.value=c.userValue=_,e.setValue(t,{value:_}),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:1,selStart:x.selectionStart,selEnd:x.selectionEnd}}))}};this._dispatchEventFromSandbox(w,v)}),n.addEventListener("keydown",v=>{var A;c.commitKey=1;let w=-1;if(v.key==="Escape"?w=0:v.key==="Enter"&&!this.data.multiLine?w=2:v.key==="Tab"&&(c.commitKey=3),w===-1)return;const{value:y}=v.target;c.lastCommittedValue!==y&&(c.lastCommittedValue=y,c.userValue=y,(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:w,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const b=g;g=null,n.addEventListener("blur",v=>{var A,x;if(!c.focused||!v.relatedTarget)return;(A=this.data.actions)!=null&&A.Blur||(c.focused=!1);const{target:w}=v;let{value:y}=w;if(p){if(y&&d==="time"){const _=y.split(":").map(S=>parseInt(S,10));y=new Date(2e3,0,1,_[0],_[1],_[2]||0).valueOf(),w.step=""}else y.includes("T")||(y=`${y}T00:00`),y=new Date(y).valueOf();w.type="text"}c.userValue=y,c.lastCommittedValue!==y&&((x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:c.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),b(v)}),(s=this.data.actions)!=null&&s.Keystroke&&n.addEventListener("beforeinput",v=>{var C;c.lastCommittedValue=null;const{data:w,target:y}=v,{value:A,selectionStart:x,selectionEnd:_}=y;let S=x,E=_;switch(v.inputType){case"deleteWordBackward":{const N=A.substring(0,x).match(/\w*[^\w]*$/);N&&(S-=N[0].length);break}case"deleteWordForward":{const N=A.substring(x).match(/^[^\w]*\w*/);N&&(E+=N[0].length);break}case"deleteContentBackward":x===_&&(S-=1);break;case"deleteContentForward":x===_&&(E+=1);break}v.preventDefault(),(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,change:w||"",willCommit:!1,selStart:S,selEnd:E}})}),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(g&&n.addEventListener("blur",g),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Rde extends vp{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class kde extends vp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return sp.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=0,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const u of this._getElementsByName(o,n)){const c=l&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=c),e.setValue(u.id,{value:c})}e.setValue(n,{value:l})}),s.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(n,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class LG extends vp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const a of this._getElementsByName(t.fieldName,n))e.setValue(a.id,{value:!1});const s=document.createElement("input");if(sp.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const u of this._getElementsByName(o,n))e.setValue(u.id,{value:!1});e.setValue(n,{value:l})}),s.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;s.addEventListener("updatefromsandbox",o=>{const l={value:u=>{const c=a===u.detail.value;for(const h of this._getElementsByName(u.target.name)){const d=c&&h.id===n;h.domElement&&(h.domElement.checked=d),e.setValue(h.id,{value:d})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Fde extends EF{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class Ode extends vp{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");sp.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",c=>{const h=this.data.defaultFieldValue;for(const d of i.options)d.selected=d.value===h});for(const c of this.data.options){const h=document.createElement("option");h.textContent=c.displayValue,h.value=c.exportValue,n.value.includes(c.exportValue)&&(h.setAttribute("selected",!0),s=!1),i.append(h)}let a=null;if(s){const c=document.createElement("option");c.value=" ",c.setAttribute("hidden",!0),c.setAttribute("selected",!0),i.prepend(c),a=()=>{c.remove(),i.removeEventListener("input",a),a=null},i.addEventListener("input",a)}const o=c=>{const h=c?"value":"textContent",{options:d,multiple:f}=i;return f?Array.prototype.filter.call(d,p=>p.selected).map(p=>p[h]):d.selectedIndex===-1?null:d[d.selectedIndex][h]};let l=o(!1);const u=c=>{const h=c.target.options;return Array.prototype.map.call(h,d=>({displayValue:d.textContent,exportValue:d.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",c=>{const h={value(d){a==null||a();const f=d.detail.value,p=new Set(Array.isArray(f)?f:[f]);for(const g of i.options)g.selected=p.has(g.value);e.setValue(t,{value:o(!0)}),l=o(!1)},multipleSelection(d){i.multiple=!0},remove(d){const f=i.options,p=d.detail.remove;f[p].selected=!1,i.remove(p),f.length>0&&Array.prototype.findIndex.call(f,b=>b.selected)===-1&&(f[0].selected=!0),e.setValue(t,{value:o(!0),items:u(d)}),l=o(!1)},clear(d){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),l=o(!1)},insert(d){const{index:f,displayValue:p,exportValue:g}=d.detail.insert,b=i.children[f],v=document.createElement("option");v.textContent=p,v.value=g,b?b.before(v):i.append(v),e.setValue(t,{value:o(!0),items:u(d)}),l=o(!1)},items(d){const{items:f}=d.detail;for(;i.length!==0;)i.remove(0);for(const p of f){const{displayValue:g,exportValue:b}=p,v=document.createElement("option");v.textContent=g,v.value=b,i.append(v)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:o(!0),items:u(d)}),l=o(!1)},indices(d){const f=new Set(d.detail.indices);for(const p of d.target.options)p.selected=f.has(p.index);e.setValue(t,{value:o(!0)}),l=o(!1)},editable(d){d.target.disabled=!d.detail.editable}};this._dispatchEventFromSandbox(h,c)}),i.addEventListener("input",c=>{var f;const h=o(!0),d=o(!1);e.setValue(t,{value:h}),c.preventDefault(),(f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:d,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],c=>c.target.value)):i.addEventListener("input",function(c){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var Zw,LI;class BI extends Zr{constructor(t){const{data:n,elements:i,parent:s}=t,a=!!s._commentManager;super(t,{isRenderable:!a&&Zr._hasPopupData(n)});L(this,Zw);if(this.elements=i,a&&Zr._hasPopupData(n)){const o=this.popup=z(this,Zw,LI).call(this);for(const l of i)l.popup=o}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const n=this.popup=z(this,Zw,LI).call(this),i=[];for(const s of this.elements)s.popup=n,s.container.ariaHasPopup="dialog",i.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(s=>`${yg}${s}`).join(",")),this.container}}Zw=new WeakSet,LI=function(){return new Bde({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var oa,Mh,KT,XT,Uv,zv,on,Nl,Ih,pm,jv,qv,Dl,la,zu,ju,ln,qu,Ph,ex,Hu,Hv,gm,Rh,si,kh,Ft,TE,$I,VI,UI,CE,zI,$G,VG,UG,zG,NE,DE,jI;class Bde{constructor({container:e,color:t,elements:n,titleObj:i,modificationDate:s,contentsObj:a,richText:o,parent:l,rect:u,parentRect:c,open:h,commentManager:d=null}){L(this,Ft);L(this,oa,null);L(this,Mh,z(this,Ft,UG).bind(this));L(this,KT,z(this,Ft,jI).bind(this));L(this,XT,z(this,Ft,DE).bind(this));L(this,Uv,z(this,Ft,NE).bind(this));L(this,zv,null);L(this,on,null);L(this,Nl,null);L(this,Ih,null);L(this,pm,null);L(this,jv,null);L(this,qv,null);L(this,Dl,!1);L(this,la,null);L(this,zu,null);L(this,ju,null);L(this,ln,null);L(this,qu,null);L(this,Ph,null);L(this,ex,null);L(this,Hu,null);L(this,Hv,null);L(this,gm,null);L(this,Rh,!1);L(this,si,null);L(this,kh,null);k(this,on,e),k(this,Hv,i),k(this,Nl,a),k(this,Hu,o),k(this,jv,l),k(this,zv,t),k(this,ex,u),k(this,qv,c),k(this,pm,n),k(this,oa,d),k(this,si,n[0]),k(this,Ih,zS.toDateObject(s)),this.trigger=n.flatMap(f=>f.getElementsToTriggerPopup()),d||(z(this,Ft,TE).call(this),m(this,on).hidden=!0,h&&z(this,Ft,NE).call(this))}renderCommentButton(){if(m(this,ln)){m(this,ln).parentNode||m(this,si).container.after(m(this,ln));return}if(m(this,qu)||z(this,Ft,$I).call(this),!m(this,qu))return;const{signal:e}=k(this,zu,new AbortController),t=m(this,si).hasOwnCommentButton,n=()=>{m(this,oa).toggleCommentPopup(this,!0,void 0,!t)},i=()=>{m(this,oa).toggleCommentPopup(this,!1,!0,!t)},s=()=>{m(this,oa).toggleCommentPopup(this,!1,!1)};if(t){k(this,ln,m(this,si).container);for(const a of this.trigger)a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.addEventListener("keydown",m(this,Mh),{signal:e}),a.addEventListener("click",n,{signal:e}),a.addEventListener("pointerenter",i,{signal:e}),a.addEventListener("pointerleave",s,{signal:e}),a.classList.add("popupTriggerArea")}else{const a=k(this,ln,document.createElement("button"));a.className="annotationCommentButton";const o=m(this,si).container;a.style.zIndex=o.style.zIndex+1,a.tabIndex=0,a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.setAttribute("data-l10n-id","pdfjs-show-comment-button"),z(this,Ft,UI).call(this),z(this,Ft,VI).call(this),a.addEventListener("keydown",m(this,Mh),{signal:e}),a.addEventListener("click",n,{signal:e}),a.addEventListener("pointerenter",i,{signal:e}),a.addEventListener("pointerleave",s,{signal:e}),o.after(a)}}get commentButtonColor(){const{color:e,opacity:t}=m(this,si).commentData;return e?m(this,jv)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=m(this,ln))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:i,modificationDate:s}=m(this,si).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:i,modificationDate:s}}get elementBeforePopup(){return m(this,ln)}get comment(){return m(this,kh)||k(this,kh,m(this,si).commentText),m(this,kh)}set comment(e){e!==this.comment&&(m(this,si).commentText=k(this,kh,e))}focus(){var e;(e=m(this,si).container)==null||e.focus()}get parentBoundingClientRect(){return m(this,si).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){m(this,ln)&&(m(this,ln).classList.toggle("selected",e),m(this,ln).ariaExpanded=t)}setSelectedCommentButton(e){m(this,ln).classList.toggle("selected",e)}get commentPopupPosition(){if(m(this,Ph))return m(this,Ph);const{x:e,y:t,height:n}=m(this,ln).getBoundingClientRect(),{x:i,y:s,width:a,height:o}=m(this,si).layer.getBoundingClientRect();return[(e-i)/a,(t+n-s)/o]}set commentPopupPosition(e){k(this,Ph,e)}hasDefaultPopupPosition(){return m(this,Ph)===null}get commentButtonPosition(){return m(this,qu)}get commentButtonWidth(){return m(this,ln).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=m(this,Ph)||this.commentButtonPosition.map(u=>u/100),i=this.parentBoundingClientRect,{x:s,y:a,width:o,height:l}=i;m(this,oa).showDialog(null,this,s+t*o,a+n*l,{...e,parentDimensions:i})}render(){var n,i;if(m(this,la))return;const e=k(this,la,document.createElement("div"));if(e.className="popup",m(this,zv)){const s=e.style.outlineColor=Ze.makeHexColor(...m(this,zv));e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const t=document.createElement("span");if(t.className="header",(n=m(this,Hv))!=null&&n.str){const s=document.createElement("span");s.className="title",t.append(s),{dir:s.dir,str:s.textContent}=m(this,Hv)}if(e.append(t),m(this,Ih)){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:m(this,Ih).valueOf()})),s.dateTime=m(this,Ih).toISOString(),t.append(s)}DH({html:m(this,Ft,CE)||m(this,Nl).str,dir:(i=m(this,Nl))==null?void 0:i.dir,className:"popupContent"},e),m(this,on).append(e)}updateEdited({rect:e,popup:t,deleted:n}){var i;if(m(this,oa)){n?(this.remove(),k(this,kh,null)):t&&(t.deleted?this.remove():(z(this,Ft,UI).call(this),k(this,kh,t.text))),e&&(k(this,qu,null),z(this,Ft,$I).call(this),z(this,Ft,VI).call(this));return}if(n||t!=null&&t.deleted){this.remove();return}z(this,Ft,TE).call(this),m(this,gm)||k(this,gm,{contentsObj:m(this,Nl),richText:m(this,Hu)}),e&&k(this,ju,null),t&&t.text&&(k(this,Hu,z(this,Ft,VG).call(this,t.text)),k(this,Ih,zS.toDateObject(t.date)),k(this,Nl,null)),(i=m(this,la))==null||i.remove(),k(this,la,null)}resetEdited(){var e;m(this,gm)&&({contentsObj:Ln(this,Nl)._,richText:Ln(this,Hu)._}=m(this,gm),k(this,gm,null),(e=m(this,la))==null||e.remove(),k(this,la,null),k(this,ju,null))}remove(){var e,t,n;if((e=m(this,zu))==null||e.abort(),k(this,zu,null),(t=m(this,la))==null||t.remove(),k(this,la,null),k(this,Rh,!1),k(this,Dl,!1),(n=m(this,ln))==null||n.remove(),k(this,ln,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){k(this,Rh,this.isVisible),m(this,Rh)&&(m(this,on).hidden=!0)}maybeShow(){m(this,oa)||(z(this,Ft,TE).call(this),m(this,Rh)&&(m(this,la)||z(this,Ft,DE).call(this),k(this,Rh,!1),m(this,on).hidden=!1))}get isVisible(){return m(this,oa)?!1:m(this,on).hidden===!1}}oa=new WeakMap,Mh=new WeakMap,KT=new WeakMap,XT=new WeakMap,Uv=new WeakMap,zv=new WeakMap,on=new WeakMap,Nl=new WeakMap,Ih=new WeakMap,pm=new WeakMap,jv=new WeakMap,qv=new WeakMap,Dl=new WeakMap,la=new WeakMap,zu=new WeakMap,ju=new WeakMap,ln=new WeakMap,qu=new WeakMap,Ph=new WeakMap,ex=new WeakMap,Hu=new WeakMap,Hv=new WeakMap,gm=new WeakMap,Rh=new WeakMap,si=new WeakMap,kh=new WeakMap,Ft=new WeakSet,TE=function(){var t;if(m(this,zu))return;k(this,zu,new AbortController);const{signal:e}=m(this,zu);for(const n of this.trigger)n.addEventListener("click",m(this,Uv),{signal:e}),n.addEventListener("pointerenter",m(this,XT),{signal:e}),n.addEventListener("pointerleave",m(this,KT),{signal:e}),n.classList.add("popupTriggerArea");for(const n of m(this,pm))(t=n.container)==null||t.addEventListener("keydown",m(this,Mh),{signal:e})},$I=function(){const e=m(this,pm).find(t=>t.hasCommentButton);e&&k(this,qu,e._normalizePoint(e.commentButtonPosition))},VI=function(){if(m(this,si).extraPopupElement&&!m(this,si).editor)return;m(this,ln)||this.renderCommentButton();const[e,t]=m(this,qu),{style:n}=m(this,ln);n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`},UI=function(){m(this,si).extraPopupElement||(m(this,ln)||this.renderCommentButton(),m(this,ln).style.backgroundColor=this.commentButtonColor||"")},CE=function(){const e=m(this,Hu),t=m(this,Nl);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&m(this,Hu).html||null},zI=function(){var e,t,n;return((n=(t=(e=m(this,Ft,CE))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},$G=function(){var e,t,n;return((n=(t=(e=m(this,Ft,CE))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},VG=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:m(this,Ft,$G),fontSize:m(this,Ft,zI)?`calc(${m(this,Ft,zI)}px * var(--total-scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:i});return n},UG=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&m(this,Dl))&&z(this,Ft,NE).call(this)},zG=function(){if(m(this,ju)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:s}}}=m(this,jv);let a=!!m(this,qv),o=a?m(this,qv):m(this,ex);for(const p of m(this,pm))if(!o||Ze.intersect(p.data.rect,o)!==null){o=p.data.rect,a=!0;break}const l=Ze.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),c=a?o[2]-o[0]+5:0,h=l[0]+c,d=l[1];k(this,ju,[100*(h-i)/t,100*(d-s)/n]);const{style:f}=m(this,on);f.left=`${m(this,ju)[0]}%`,f.top=`${m(this,ju)[1]}%`},NE=function(){if(m(this,oa)){m(this,oa).toggleCommentPopup(this,!1);return}k(this,Dl,!m(this,Dl)),m(this,Dl)?(z(this,Ft,DE).call(this),m(this,on).addEventListener("click",m(this,Uv)),m(this,on).addEventListener("keydown",m(this,Mh))):(z(this,Ft,jI).call(this),m(this,on).removeEventListener("click",m(this,Uv)),m(this,on).removeEventListener("keydown",m(this,Mh)))},DE=function(){m(this,la)||this.render(),this.isVisible?m(this,Dl)&&m(this,on).classList.add("focused"):(z(this,Ft,zG).call(this),m(this,on).hidden=!1,m(this,on).style.zIndex=parseInt(m(this,on).style.zIndex)+1e3)},jI=function(){m(this,on).classList.remove("focused"),!(m(this,Dl)||!this.isVisible)&&(m(this,on).hidden=!0,m(this,on).style.zIndex=parseInt(m(this,on).style.zIndex)-1e3)};class jG extends Zr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Dt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var tx;class Lde extends Zr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});L(this,tx,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:i}=this,s=this.svgFactory.create(n,i,!0),a=k(this,tx,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return m(this,tx)}addHighlightArea(){this.container.classList.add("highlightArea")}}tx=new WeakMap;var rx;class $de extends Zr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});L(this,rx,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:i}=this,s=this.svgFactory.create(n,i,!0),a=t.borderStyle.width,o=k(this,rx,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",n-a),o.setAttribute("height",i-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return m(this,rx)}addHighlightArea(){this.container.classList.add("highlightArea")}}rx=new WeakMap;var nx;class Vde extends Zr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});L(this,nx,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:i}=this,s=this.svgFactory.create(n,i,!0),a=t.borderStyle.width,o=k(this,nx,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",n/2),o.setAttribute("cy",i/2),o.setAttribute("rx",n/2-a/2),o.setAttribute("ry",i/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return m(this,nx)}addHighlightArea(){this.container.classList.add("highlightArea")}}nx=new WeakMap;var ix;class qG extends Zr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});L(this,ix,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:i,popupRef:s},width:a,height:o}=this;if(!n)return this.container;const l=this.svgFactory.create(a,o,!0);let u=[];for(let h=0,d=n.length;h<d;h+=2){const f=n[h]-t[0],p=t[3]-n[h+1];u.push(`${f},${p}`)}u=u.join(" ");const c=k(this,ix,this.svgFactory.createElement(this.svgElementName));return c.setAttribute("points",u),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),l.append(c),this.container.append(l),!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return m(this,ix)}addHighlightArea(){this.container.classList.add("highlightArea")}}ix=new WeakMap;class Ude extends qG{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class zde extends Zr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var sx,vm,ax,qI;class SF extends Zr{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});L(this,ax);L(this,sx,null);L(this,vm,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Dt.HIGHLIGHT:Dt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:i,borderStyle:s,popupRef:a}}=this,{transform:o,width:l,height:u}=z(this,ax,qI).call(this,n,t),c=this.svgFactory.create(l,u,!0),h=k(this,sx,this.svgFactory.createElement("svg:g"));c.append(h),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",o);for(let d=0,f=i.length;d<f;d++){const p=this.svgFactory.createElement(this.svgElementName);m(this,vm).push(p),p.setAttribute("points",i[d].join(",")),h.append(p)}return!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:i,rect:s}=t,a=m(this,sx);if(n>=0&&a.setAttribute("stroke-width",n||1),i)for(let o=0,l=m(this,vm).length;o<l;o++)m(this,vm)[o].setAttribute("points",i[o].join(","));if(s){const{transform:o,width:l,height:u}=z(this,ax,qI).call(this,this.data.rotation,s);a.parentElement.setAttribute("viewBox",`0 0 ${l} ${u}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return m(this,vm)}addHighlightArea(){this.container.classList.add("highlightArea")}}sx=new WeakMap,vm=new WeakMap,ax=new WeakSet,qI=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class HG extends Zr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Dt.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class jde extends Zr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class qde extends Zr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class Hde extends Zr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class GG extends Zr{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Dt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var ox,lx,HI;class Gde extends Zr{constructor(t){var i;super(t,{isRenderable:!0});L(this,lx);L(this,ox,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",z(this,lx,HI).bind(this)),k(this,ox,i);const{isMac:s}=Ri.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(s?a.metaKey:a.ctrlKey)&&z(this,lx,HI).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return m(this,ox)}addHighlightArea(){this.container.classList.add("highlightArea")}}ox=new WeakMap,lx=new WeakSet,HI=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var ym,bm,Gv,Fh,ux,wm,ua,cx,dc,ME,WI;const kO=class kO{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:i,page:s,viewport:a,structTreeLayer:o,commentManager:l,linkService:u,annotationStorage:c}){L(this,dc);L(this,ym,null);L(this,bm,null);L(this,Gv,null);L(this,Fh,new Map);L(this,ux,null);L(this,wm,null);L(this,ua,[]);L(this,cx,!1);this.div=e,k(this,ym,t),k(this,bm,n),k(this,ux,o||null),k(this,wm,u||null),k(this,Gv,c||new xF),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=l||null}hasEditableAnnotations(){return m(this,Fh).size>0}async render(e){var o;const{annotations:t}=e,n=this.div;np(n,this.viewport);const i=new Map,s=[],a={data:null,layer:n,linkService:m(this,wm),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new YS,annotationStorage:m(this,Gv),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const u=l.annotationType===Nn.POPUP;if(u){const d=i.get(l.id);if(!d)continue;if(!this._commentManager){s.push(l);continue}a.elements=d}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;a.data=l;const c=j2.create(a);if(!c.isRenderable)continue;if(!u&&(m(this,ua).push(c),l.popupRef)){const d=i.get(l.popupRef);d?d.push(c):i.set(l.popupRef,[c])}const h=c.render();l.hidden&&(h.style.visibility="hidden"),c._isEditable&&(m(this,Fh).set(c.data.id,c),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(c))}await z(this,dc,ME).call(this);for(const l of s){const u=a.elements=i.get(l.id);a.data=l;const c=j2.create(a);if(!c.isRenderable)continue;const h=c.render();c.contentElement.id=`${yg}${l.id}`,l.hidden&&(h.style.visibility="hidden"),u.at(-1).container.after(h)}z(this,dc,WI).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:m(this,wm),svgFactory:new YS,parent:this};for(const n of e){n.borderStyle||(n.borderStyle=kO._defaultBorderStyle),t.data=n;const i=j2.create(t);i.isRenderable&&(i.render(),i.contentElement.id=`${yg}${n.id}`,m(this,ua).push(i))}await z(this,dc,ME).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,np(t,{rotation:e.rotation}),z(this,dc,WI).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(m(this,Fh).values())}getEditableAnnotation(e){return m(this,Fh).get(e)}addFakeAnnotation(e){const{div:t}=this,{id:n,rotation:i}=e,s=new Mde({data:{id:n,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:m(this,wm),annotationStorage:m(this,Gv)});return s.render(),s.contentElement.id=`${yg}${n}`,s.createOrUpdatePopup(),m(this,ua).push(s),s}removeAnnotation(e){var i;const t=m(this,ua).findIndex(s=>s.data.id===e);if(t<0)return;const[n]=m(this,ua).splice(t,1);(i=m(this,ym))==null||i.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const t of e)t.updateFakeAnnotationElement(this);z(this,dc,ME).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return Et(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Gp.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};ym=new WeakMap,bm=new WeakMap,Gv=new WeakMap,Fh=new WeakMap,ux=new WeakMap,wm=new WeakMap,ua=new WeakMap,cx=new WeakMap,dc=new WeakSet,ME=async function(){var n,i,s;if(m(this,ua).length===0)return;this.div.replaceChildren();const e=[];if(!m(this,cx)){k(this,cx,!0);for(const{contentElement:a,data:{id:o}}of m(this,ua)){const l=a.id=`${yg}${o}`;e.push((n=m(this,ux))==null?void 0:n.getAriaAttributes(l).then(u=>{if(u)for(const[c,h]of u)a.setAttribute(c,h)}))}}m(this,ua).sort(({data:{rect:[a,o,l,u]}},{data:{rect:[c,h,d,f]}})=>{if(a===l&&o===u)return 1;if(c===d&&h===f)return-1;const p=u,g=o,b=(o+u)/2,v=f,w=h,y=(h+f)/2;if(b>=v&&y<=g)return-1;if(y>=p&&b<=w)return 1;const A=(a+l)/2,x=(c+d)/2;return A-x});const t=document.createDocumentFragment();for(const a of m(this,ua))t.append(a.container),this._commentManager?(s=((i=a.extraPopupElement)==null?void 0:i.popup)||a.popup)==null||s.renderCommentButton():a.extraPopupElement&&t.append(a.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),m(this,ym))for(const a of m(this,ua))m(this,ym).addPointerInTextLayer(a.contentElement,!1)},WI=function(){var t;if(!m(this,bm))return;const e=this.div;for(const[n,i]of m(this,bm)){const s=e.querySelector(`[data-annotation-id="${n}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:a}=s;a?a.nodeName==="CANVAS"?a.replaceWith(i):a.classList.contains("annotationContent")?a.after(i):a.before(i):s.append(i);const o=m(this,Fh).get(n);o&&(o._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(n,s.id,i),o._hasNoCanvas=!1):o.canvas=i)}m(this,bm).clear()};let GI=kO;const yA=/\r\n?|\n/g;var ca,hx,xm,ha,On,WG,KG,XG,IE,fc,PE,RE,YG,XI,QG;const Lr=class Lr extends Fr{constructor(t){super({...t,name:"freeTextEditor"});L(this,On);L(this,ca,"");L(this,hx,`${this.id}-editor`);L(this,xm,null);L(this,ha);Pe(this,"_colorPicker",null);this.color=t.color||Lr._defaultColor||Fr._defaultLineColor,k(this,ha,t.fontSize||Lr._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const t=Lr.prototype,n=a=>a.isEmpty(),i=ip.TRANSLATE_SMALL,s=ip.TRANSLATE_BIG;return Et(this,"_keyboardManager",new n_([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}]]))}static initialize(t,n){Fr.initialize(t,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Kt.FREETEXT_SIZE:Lr._defaultFontSize=n;break;case Kt.FREETEXT_COLOR:Lr._defaultColor=n;break}}updateParams(t,n){switch(t){case Kt.FREETEXT_SIZE:z(this,On,WG).call(this,n);break;case Kt.FREETEXT_COLOR:z(this,On,KG).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Kt.FREETEXT_SIZE,Lr._defaultFontSize],[Kt.FREETEXT_COLOR,Lr._defaultColor||Fr._defaultLineColor]]}get propertiesToUpdate(){return[[Kt.FREETEXT_SIZE,m(this,ha)],[Kt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new XS(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Kt.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-Lr._internalPadding*t,-(Lr._internalPadding+m(this,ha))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),k(this,xm,new AbortController);const t=this._uiManager.combinedSignal(m(this,xm));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",m(this,hx)),this._isDraggable=!0,(t=m(this,xm))==null||t.abort(),k(this,xm,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=m(this,ca),n=k(this,ca,z(this,On,XG).call(this).trimEnd());if(t===n)return;const i=s=>{if(k(this,ca,s),!s){this.remove();return}z(this,On,RE).call(this),this._uiManager.rebuild(this),z(this,On,IE).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(t)},mustExec:!1}),z(this,On,IE).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Lr._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",m(this,hx)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${m(this,ha)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[c,h]=this.pageDimensions,[d,f]=this.pageTranslation;let p,g;switch(this.rotation){case 0:p=t+(o[0]-d)/c,g=n+this.height-(o[1]-f)/h;break;case 90:p=t+(o[0]-d)/c,g=n-(o[1]-f)/h,[l,u]=[u,-l];break;case 180:p=t-this.width+(o[0]-d)/c,g=n-(o[1]-f)/h,[l,u]=[-l,-u];break;case 270:p=t+(o[0]-d-this.height*h)/c,g=n+(o[1]-f-this.width*c)/h,[l,u]=[-u,l];break}this.setAt(p*s,g*a,l,u)}else this._moveAfterPaste(t,n);z(this,On,RE).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var p,g,b;const n=t.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const s=z(p=Lr,fc,XI).call(p,n.getData("text")||"").replaceAll(yA,`
`);if(!s)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!s.includes(`
`)){o.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:u}=o,c=[],h=[];if(l.nodeType===Node.TEXT_NODE){const v=l.parentElement;if(h.push(l.nodeValue.slice(u).replaceAll(yA,"")),v!==this.editorDiv){let w=c;for(const y of this.editorDiv.childNodes){if(y===v){w=h;continue}w.push(z(g=Lr,fc,PE).call(g,y))}}c.push(l.nodeValue.slice(0,u).replaceAll(yA,""))}else if(l===this.editorDiv){let v=c,w=0;for(const y of this.editorDiv.childNodes)w++===u&&(v=h),v.push(z(b=Lr,fc,PE).call(b,y))}k(this,ca,`${c.join(`
`)}${s}${h.join(`
`)}`),z(this,On,RE).call(this);const d=new Range;let f=Math.sumPrecise(c.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const w=v.nodeValue.length;if(f<=w){d.setStart(v,f),d.setEnd(v,f);break}f-=w}a.removeAllRanges(),a.addRange(d)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Lr._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,i){var o;let s=null;if(t instanceof jG){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:c,rotation:h,id:d,popupRef:f,richText:p,contentsObj:g,creationDate:b,modificationDate:v},textContent:w,textPosition:y,parent:{page:{pageNumber:A}}}=t;if(!w||w.length===0)return null;s=t={annotationType:Dt.FREETEXT,color:Array.from(u),fontSize:l,value:w.join(`
`),position:y,pageIndex:A-1,rect:c.slice(0),rotation:h,annotationElementId:d,id:d,deleted:!1,popupRef:f,comment:(g==null?void 0:g.str)||null,richText:p,creationDate:b,modificationDate:v}}const a=await super.deserialize(t,n,i);return k(a,ha,t.fontSize),a.color=Ze.makeHexColor(...t.color),k(a,ca,z(o=Lr,fc,XI).call(o,t.value)),a._initialData=s,t.comment&&a.setCommentData(t),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Fr._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:n,fontSize:m(this,ha),value:z(this,On,YG).call(this)});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!z(this,On,QG).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(!n)return null;const{style:i}=n;i.fontSize=`calc(${m(this,ha)}px * var(--total-scale-factor))`,i.color=this.color,n.replaceChildren();for(const s of m(this,ca).split(`
`)){const a=document.createElement("div");a.append(s?document.createTextNode(s):document.createElement("br")),n.append(a)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:m(this,ca)}}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};ca=new WeakMap,hx=new WeakMap,xm=new WeakMap,ha=new WeakMap,On=new WeakSet,WG=function(t){const n=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-m(this,ha))*this.parentScale),k(this,ha,s),z(this,On,IE).call(this)},i=m(this,ha);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Kt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},KG=function(t){const n=s=>{this.color=s,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Kt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},XG=function(){var i;const t=[];this.editorDiv.normalize();let n=null;for(const s of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(z(i=Lr,fc,PE).call(i,s)),n=s);return t.join(`
`)},IE=function(){const[t,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:s,div:a}=this,o=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",s.div.append(this.div),i=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/n):(this.width=i.height/t,this.height=i.width/n),this.fixAndSetPosition()},fc=new WeakSet,PE=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(yA,"")},RE=function(){if(this.editorDiv.replaceChildren(),!!m(this,ca))for(const t of m(this,ca).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},YG=function(){return m(this,ca).replaceAll(""," ")},XI=function(t){return t.replaceAll(" ","")},QG=function(t){const{value:n,fontSize:i,color:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==i||t.color.some((o,l)=>o!==s[l])||t.pageIndex!==a},L(Lr,fc),Pe(Lr,"_freeTextDefaultContent",""),Pe(Lr,"_internalPadding",0),Pe(Lr,"_defaultColor",null),Pe(Lr,"_defaultFontSize",10),Pe(Lr,"_type","freetext"),Pe(Lr,"_editorType",Dt.FREETEXT);let KI=Lr;class Xe{toSVGPath(){Dr("Abstract method `toSVGPath` must be implemented.")}get box(){Dr("Abstract getter `box` must be implemented.")}serialize(e,t){Dr("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,s,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o]*i,a[o+1]=n+e[o+1]*s;return a}static _rescaleAndSwap(e,t,n,i,s,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o+1]*i,a[o+1]=n+e[o]*s;return a}static _translate(e,t,n,i){i||(i=new Float32Array(e.length));for(let s=0,a=e.length;s<a;s+=2)i[s]=t+e[s],i[s+1]=n+e[s+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,i,s){switch(s){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,s,a){return[(e+5*n)/6,(t+5*i)/6,(5*n+s)/6,(5*i+a)/6,(n+s)/2,(i+a)/2]}}Pe(Xe,"PRECISION",1e-4);var da,Fo,Wv,Kv,Ml,$t,_m,Am,dx,fx,Xv,Yv,Oh,mx,YT,QT,Wn,yb,JG,ZG,eW,tW,rW,nW;const vu=class vu{constructor({x:e,y:t},n,i,s,a,o=0){L(this,Wn);L(this,da);L(this,Fo,[]);L(this,Wv);L(this,Kv);L(this,Ml,[]);L(this,$t,new Float32Array(18));L(this,_m);L(this,Am);L(this,dx);L(this,fx);L(this,Xv);L(this,Yv);L(this,Oh,[]);k(this,da,n),k(this,Yv,s*i),k(this,Kv,a),m(this,$t).set([NaN,NaN,NaN,NaN,e,t],6),k(this,Wv,o),k(this,fx,m(vu,mx)*i),k(this,dx,m(vu,QT)*i),k(this,Xv,i),m(this,Oh).push(e,t)}isEmpty(){return isNaN(m(this,$t)[8])}add({x:e,y:t}){var C;k(this,_m,e),k(this,Am,t);const[n,i,s,a]=m(this,da);let[o,l,u,c]=m(this,$t).subarray(8,12);const h=e-u,d=t-c,f=Math.hypot(h,d);if(f<m(this,dx))return!1;const p=f-m(this,fx),g=p/f,b=g*h,v=g*d;let w=o,y=l;o=u,l=c,u+=b,c+=v,(C=m(this,Oh))==null||C.push(e,t);const A=-v/p,x=b/p,_=A*m(this,Yv),S=x*m(this,Yv);return m(this,$t).set(m(this,$t).subarray(2,8),0),m(this,$t).set([u+_,c+S],4),m(this,$t).set(m(this,$t).subarray(14,18),12),m(this,$t).set([u-_,c-S],16),isNaN(m(this,$t)[6])?(m(this,Ml).length===0&&(m(this,$t).set([o+_,l+S],2),m(this,Ml).push(NaN,NaN,NaN,NaN,(o+_-n)/s,(l+S-i)/a),m(this,$t).set([o-_,l-S],14),m(this,Fo).push(NaN,NaN,NaN,NaN,(o-_-n)/s,(l-S-i)/a)),m(this,$t).set([w,y,o,l,u,c],6),!this.isEmpty()):(m(this,$t).set([w,y,o,l,u,c],6),Math.abs(Math.atan2(y-l,w-o)-Math.atan2(v,b))<Math.PI/2?([o,l,u,c]=m(this,$t).subarray(2,6),m(this,Ml).push(NaN,NaN,NaN,NaN,((o+u)/2-n)/s,((l+c)/2-i)/a),[o,l,w,y]=m(this,$t).subarray(14,18),m(this,Fo).push(NaN,NaN,NaN,NaN,((w+o)/2-n)/s,((y+l)/2-i)/a),!0):([w,y,o,l,u,c]=m(this,$t).subarray(0,6),m(this,Ml).push(((w+5*o)/6-n)/s,((y+5*l)/6-i)/a,((5*o+u)/6-n)/s,((5*l+c)/6-i)/a,((o+u)/2-n)/s,((l+c)/2-i)/a),[u,c,o,l,w,y]=m(this,$t).subarray(12,18),m(this,Fo).push(((w+5*o)/6-n)/s,((y+5*l)/6-i)/a,((5*o+u)/6-n)/s,((5*l+c)/6-i)/a,((o+u)/2-n)/s,((l+c)/2-i)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=m(this,Ml),t=m(this,Fo);if(isNaN(m(this,$t)[6])&&!this.isEmpty())return z(this,Wn,JG).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);z(this,Wn,eW).call(this,n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return z(this,Wn,ZG).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,i,s,a){return new iW(e,t,n,i,s,a)}getOutlines(){var h;const e=m(this,Ml),t=m(this,Fo),n=m(this,$t),[i,s,a,o]=m(this,da),l=new Float32Array((((h=m(this,Oh))==null?void 0:h.length)??0)+2);for(let d=0,f=l.length-2;d<f;d+=2)l[d]=(m(this,Oh)[d]-i)/a,l[d+1]=(m(this,Oh)[d+1]-s)/o;if(l[l.length-2]=(m(this,_m)-i)/a,l[l.length-1]=(m(this,Am)-s)/o,isNaN(n[6])&&!this.isEmpty())return z(this,Wn,tW).call(this,l);const u=new Float32Array(m(this,Ml).length+24+m(this,Fo).length);let c=e.length;for(let d=0;d<c;d+=2){if(isNaN(e[d])){u[d]=u[d+1]=NaN;continue}u[d]=e[d],u[d+1]=e[d+1]}c=z(this,Wn,nW).call(this,u,c);for(let d=t.length-6;d>=6;d-=6)for(let f=0;f<6;f+=2){if(isNaN(t[d+f])){u[c]=u[c+1]=NaN,c+=2;continue}u[c]=t[d+f],u[c+1]=t[d+f+1],c+=2}return z(this,Wn,rW).call(this,u,c),this.newFreeDrawOutline(u,l,m(this,da),m(this,Xv),m(this,Wv),m(this,Kv))}};da=new WeakMap,Fo=new WeakMap,Wv=new WeakMap,Kv=new WeakMap,Ml=new WeakMap,$t=new WeakMap,_m=new WeakMap,Am=new WeakMap,dx=new WeakMap,fx=new WeakMap,Xv=new WeakMap,Yv=new WeakMap,Oh=new WeakMap,mx=new WeakMap,YT=new WeakMap,QT=new WeakMap,Wn=new WeakSet,yb=function(){const e=m(this,$t).subarray(4,6),t=m(this,$t).subarray(16,18),[n,i,s,a]=m(this,da);return[(m(this,_m)+(e[0]-t[0])/2-n)/s,(m(this,Am)+(e[1]-t[1])/2-i)/a,(m(this,_m)+(t[0]-e[0])/2-n)/s,(m(this,Am)+(t[1]-e[1])/2-i)/a]},JG=function(){const[e,t,n,i]=m(this,da),[s,a,o,l]=z(this,Wn,yb).call(this);return`M${(m(this,$t)[2]-e)/n} ${(m(this,$t)[3]-t)/i} L${(m(this,$t)[4]-e)/n} ${(m(this,$t)[5]-t)/i} L${s} ${a} L${o} ${l} L${(m(this,$t)[16]-e)/n} ${(m(this,$t)[17]-t)/i} L${(m(this,$t)[14]-e)/n} ${(m(this,$t)[15]-t)/i} Z`},ZG=function(e){const t=m(this,Fo);e.push(`L${t[4]} ${t[5]} Z`)},eW=function(e){const[t,n,i,s]=m(this,da),a=m(this,$t).subarray(4,6),o=m(this,$t).subarray(16,18),[l,u,c,h]=z(this,Wn,yb).call(this);e.push(`L${(a[0]-t)/i} ${(a[1]-n)/s} L${l} ${u} L${c} ${h} L${(o[0]-t)/i} ${(o[1]-n)/s}`)},tW=function(e){const t=m(this,$t),[n,i,s,a]=m(this,da),[o,l,u,c]=z(this,Wn,yb).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-n)/s,(t[3]-i)/a,NaN,NaN,NaN,NaN,(t[4]-n)/s,(t[5]-i)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,u,c,NaN,NaN,NaN,NaN,(t[16]-n)/s,(t[17]-i)/a,NaN,NaN,NaN,NaN,(t[14]-n)/s,(t[15]-i)/a],0),this.newFreeDrawOutline(h,e,m(this,da),m(this,Xv),m(this,Wv),m(this,Kv))},rW=function(e,t){const n=m(this,Fo);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},nW=function(e,t){const n=m(this,$t).subarray(4,6),i=m(this,$t).subarray(16,18),[s,a,o,l]=m(this,da),[u,c,h,d]=z(this,Wn,yb).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-s)/o,(n[1]-a)/l,NaN,NaN,NaN,NaN,u,c,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,(i[0]-s)/o,(i[1]-a)/l],t),t+=24},L(vu,mx,8),L(vu,YT,2),L(vu,QT,m(vu,mx)+m(vu,YT));let QS=vu;var Qv,Em,Gu,px,fa,gx,bn,JT,sW;class iW extends Xe{constructor(t,n,i,s,a,o){super();L(this,JT);L(this,Qv);L(this,Em,new Float32Array(4));L(this,Gu);L(this,px);L(this,fa);L(this,gx);L(this,bn);k(this,bn,t),k(this,fa,n),k(this,Qv,i),k(this,gx,s),k(this,Gu,a),k(this,px,o),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],z(this,JT,sW).call(this,o);const[l,u,c,h]=m(this,Em);for(let d=0,f=t.length;d<f;d+=2)t[d]=(t[d]-l)/c,t[d+1]=(t[d+1]-u)/h;for(let d=0,f=n.length;d<f;d+=2)n[d]=(n[d]-l)/c,n[d+1]=(n[d+1]-u)/h}toSVGPath(){const t=[`M${m(this,bn)[4]} ${m(this,bn)[5]}`];for(let n=6,i=m(this,bn).length;n<i;n+=6){if(isNaN(m(this,bn)[n])){t.push(`L${m(this,bn)[n+4]} ${m(this,bn)[n+5]}`);continue}t.push(`C${m(this,bn)[n]} ${m(this,bn)[n+1]} ${m(this,bn)[n+2]} ${m(this,bn)[n+3]} ${m(this,bn)[n+4]} ${m(this,bn)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,i,s],a){const o=i-t,l=s-n;let u,c;switch(a){case 0:u=Xe._rescale(m(this,bn),t,s,o,-l),c=Xe._rescale(m(this,fa),t,s,o,-l);break;case 90:u=Xe._rescaleAndSwap(m(this,bn),t,n,o,l),c=Xe._rescaleAndSwap(m(this,fa),t,n,o,l);break;case 180:u=Xe._rescale(m(this,bn),i,n,-o,l),c=Xe._rescale(m(this,fa),i,n,-o,l);break;case 270:u=Xe._rescaleAndSwap(m(this,bn),i,s,-o,-l),c=Xe._rescaleAndSwap(m(this,fa),i,s,-o,-l);break}return{outline:Array.from(u),points:[Array.from(c)]}}get box(){return m(this,Em)}newOutliner(t,n,i,s,a,o=0){return new QS(t,n,i,s,a,o)}getNewOutline(t,n){const[i,s,a,o]=m(this,Em),[l,u,c,h]=m(this,Qv),d=a*c,f=o*h,p=i*c+l,g=s*h+u,b=this.newOutliner({x:m(this,fa)[0]*d+p,y:m(this,fa)[1]*f+g},m(this,Qv),m(this,gx),t,m(this,px),n??m(this,Gu));for(let v=2;v<m(this,fa).length;v+=2)b.add({x:m(this,fa)[v]*d+p,y:m(this,fa)[v+1]*f+g});return b.getOutlines()}}Qv=new WeakMap,Em=new WeakMap,Gu=new WeakMap,px=new WeakMap,fa=new WeakMap,gx=new WeakMap,bn=new WeakMap,JT=new WeakSet,sW=function(t){const n=m(this,bn);let i=n[4],s=n[5];const a=[i,s,i,s];let o=i,l=s,u=i,c=s;const h=t?Math.max:Math.min,d=new Float32Array(4);for(let p=6,g=n.length;p<g;p+=6){const b=n[p+4],v=n[p+5];isNaN(n[p])?(Ze.pointBoundingBox(b,v,a),l>v?(o=b,l=v):l===v&&(o=h(o,b)),c<v?(u=b,c=v):c===v&&(u=h(u,b))):(d[0]=d[1]=1/0,d[2]=d[3]=-1/0,Ze.bezierBoundingBox(i,s,...n.slice(p,p+6),d),Ze.rectBoundingBox(d[0],d[1],d[2],d[3],a),l>d[1]?(o=d[0],l=d[1]):l===d[1]&&(o=h(o,d[0])),c<d[3]?(u=d[2],c=d[3]):c===d[3]&&(u=h(u,d[2]))),i=b,s=v}const f=m(this,Em);f[0]=a[0]-m(this,Gu),f[1]=a[1]-m(this,Gu),f[2]=a[2]-a[0]+2*m(this,Gu),f[3]=a[3]-a[1]+2*m(this,Gu),this.firstPoint=[o,l],this.lastPoint=[u,c]};var vx,yx,bx,Bh,Oo,Ss,aW,kE,oW,lW,QI;class YI{constructor(e,t=0,n=0,i=!0){L(this,Ss);L(this,vx);L(this,yx);L(this,bx);L(this,Bh,[]);L(this,Oo,[]);const s=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:g,y:b,width:v,height:w}of e){const y=Math.floor((g-t)/a)*a,A=Math.ceil((g+v+t)/a)*a,x=Math.floor((b-t)/a)*a,_=Math.ceil((b+w+t)/a)*a,S=[y,x,_,!0],E=[A,x,_,!1];m(this,Bh).push(S,E),Ze.rectBoundingBox(y,x,A,_,s)}const o=s[2]-s[0]+2*n,l=s[3]-s[1]+2*n,u=s[0]-n,c=s[1]-n;let h=i?-1/0:1/0,d=1/0;const f=m(this,Bh).at(i?-1:-2),p=[f[0],f[2]];for(const g of m(this,Bh)){const[b,v,w,y]=g;!y&&i?v<d?(d=v,h=b):v===d&&(h=Math.max(h,b)):y&&!i&&(v<d?(d=v,h=b):v===d&&(h=Math.min(h,b))),g[0]=(b-u)/o,g[1]=(v-c)/l,g[2]=(w-c)/l}k(this,vx,new Float32Array([u,c,o,l])),k(this,yx,[h,d]),k(this,bx,p)}getOutlines(){m(this,Bh).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of m(this,Bh))t[3]?(e.push(...z(this,Ss,QI).call(this,t)),z(this,Ss,oW).call(this,t)):(z(this,Ss,lW).call(this,t),e.push(...z(this,Ss,QI).call(this,t)));return z(this,Ss,aW).call(this,e)}}vx=new WeakMap,yx=new WeakMap,bx=new WeakMap,Bh=new WeakMap,Oo=new WeakMap,Ss=new WeakSet,aW=function(e){const t=[],n=new Set;for(const a of e){const[o,l,u]=a;t.push([o,l,a],[o,u,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const l=t[a][2],u=t[a+1][2];l.push(u),u.push(l),n.add(l),n.add(u)}const i=[];let s;for(;n.size>0;){const a=n.values().next().value;let[o,l,u,c,h]=a;n.delete(a);let d=o,f=l;for(s=[o,u],i.push(s);;){let p;if(n.has(c))p=c;else if(n.has(h))p=h;else break;n.delete(p),[o,l,u,c,h]=p,d!==o&&(s.push(d,f,o,f===l?l:u),d=o),f=f===l?u:l}s.push(d,f)}return new Wde(i,m(this,vx),m(this,yx),m(this,bx))},kE=function(e){const t=m(this,Oo);let n=0,i=t.length-1;for(;n<=i;){const s=n+i>>1,a=t[s][0];if(a===e)return s;a<e?n=s+1:i=s-1}return i+1},oW=function([,e,t]){const n=z(this,Ss,kE).call(this,e);m(this,Oo).splice(n,0,[e,t])},lW=function([,e,t]){const n=z(this,Ss,kE).call(this,e);for(let i=n;i<m(this,Oo).length;i++){const[s,a]=m(this,Oo)[i];if(s!==e)break;if(s===e&&a===t){m(this,Oo).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[s,a]=m(this,Oo)[i];if(s!==e)break;if(s===e&&a===t){m(this,Oo).splice(i,1);return}}},QI=function(e){const[t,n,i]=e,s=[[t,n,i]],a=z(this,Ss,kE).call(this,i);for(let o=0;o<a;o++){const[l,u]=m(this,Oo)[o];for(let c=0,h=s.length;c<h;c++){const[,d,f]=s[c];if(!(u<=d||f<=l)){if(d>=l){if(f>u)s[c][1]=u;else{if(h===1)return[];s.splice(c,1),c--,h--}continue}s[c][2]=l,f>u&&s.push([t,u,f])}}}return s};var wx,Jv;class Wde extends Xe{constructor(t,n,i,s){super();L(this,wx);L(this,Jv);k(this,Jv,t),k(this,wx,n),this.firstPoint=i,this.lastPoint=s}toSVGPath(){const t=[];for(const n of m(this,Jv)){let[i,s]=n;t.push(`M${i} ${s}`);for(let a=2;a<n.length;a+=2){const o=n[a],l=n[a+1];o===i?(t.push(`V${l}`),s=l):l===s&&(t.push(`H${o}`),i=o)}t.push("Z")}return t.join(" ")}serialize([t,n,i,s],a){const o=[],l=i-t,u=s-n;for(const c of m(this,Jv)){const h=new Array(c.length);for(let d=0;d<c.length;d+=2)h[d]=t+c[d]*l,h[d+1]=s-c[d+1]*u;o.push(h)}return o}get box(){return m(this,wx)}get classNamesForOutlining(){return["highlightOutline"]}}wx=new WeakMap,Jv=new WeakMap;class JI extends QS{newFreeDrawOutline(e,t,n,i,s,a){return new Kde(e,t,n,i,s,a)}}class Kde extends iW{newOutliner(e,t,n,i,s,a=0){return new JI(e,t,n,i,s,a)}}var Zv,xx,Wu,Sm,_x,Bs,Ax,Ex,Tm,ma,pa,xi,e0,t0,Xi,r0,eo,Sx,kt,ZI,FE,uW,cW,hW,eP,hf,oo,Jp,dW,OE,BE,fW,mW,pW,gW,vW;const ir=class ir extends Fr{constructor(t){super({...t,name:"highlightEditor"});L(this,kt);L(this,Zv,null);L(this,xx,0);L(this,Wu);L(this,Sm,null);L(this,_x,null);L(this,Bs,null);L(this,Ax,null);L(this,Ex,0);L(this,Tm,null);L(this,ma,null);L(this,pa,null);L(this,xi,!1);L(this,e0,null);L(this,t0,null);L(this,Xi,null);L(this,r0,"");L(this,eo);L(this,Sx,"");this.color=t.color||ir._defaultColor,k(this,eo,t.thickness||ir._defaultThickness),this.opacity=t.opacity||ir._defaultOpacity,k(this,Wu,t.boxes||null),k(this,Sx,t.methodOfCreation||""),k(this,r0,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(k(this,xi,!0),z(this,kt,FE).call(this,t),z(this,kt,hf).call(this)):m(this,Wu)&&(k(this,Zv,t.anchorNode),k(this,xx,t.anchorOffset),k(this,Ax,t.focusNode),k(this,Ex,t.focusOffset),z(this,kt,ZI).call(this),z(this,kt,hf).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=ir.prototype;return Et(this,"_keyboardManager",new n_([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:m(this,xi)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:m(this,eo),methodOfCreation:m(this,Sx)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var i;Fr.initialize(t,n),ir._defaultColor||(ir._defaultColor=((i=n.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case Kt.HIGHLIGHT_COLOR:ir._defaultColor=n;break;case Kt.HIGHLIGHT_THICKNESS:ir._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return m(this,t0)}get commentButtonPosition(){return m(this,e0)}updateParams(t,n){switch(t){case Kt.HIGHLIGHT_COLOR:z(this,kt,uW).call(this,n);break;case Kt.HIGHLIGHT_THICKNESS:z(this,kt,cW).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Kt.HIGHLIGHT_COLOR,ir._defaultColor],[Kt.HIGHLIGHT_THICKNESS,ir._defaultThickness]]}get propertiesToUpdate(){return[[Kt.HIGHLIGHT_COLOR,this.color||ir._defaultColor],[Kt.HIGHLIGHT_THICKNESS,m(this,eo)||ir._defaultThickness],[Kt.HIGHLIGHT_FREE,m(this,xi)]]}onUpdatedColor(){var t,n;(t=this.parent)==null||t.drawLayer.updateProperties(m(this,pa),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=m(this,_x))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",k(this,_x,new KS({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(z(this,kt,BE).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,z(this,kt,BE).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){z(this,kt,eP).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(z(this,kt,hf).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let n=!1;this.parent&&!t?z(this,kt,eP).call(this):t&&(z(this,kt,hf).call(this,t),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var s,a,o;const{drawLayer:n}=this.parent;let i;m(this,xi)?(t=(t-this.rotation+360)%360,i=z(s=ir,oo,Jp).call(s,m(this,ma).box,t)):i=z(a=ir,oo,Jp).call(a,[this.x,this.y,this.width,this.height],t),n.updateProperties(m(this,pa),{bbox:i,root:{"data-main-rotation":t}}),n.updateProperties(m(this,Xi),{bbox:z(o=ir,oo,Jp).call(o,m(this,Bs).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();m(this,r0)&&(t.setAttribute("aria-label",m(this,r0)),t.setAttribute("role","mark")),m(this,xi)?t.classList.add("free"):this.div.addEventListener("keydown",z(this,kt,dW).bind(this),{signal:this._uiManager._signal});const n=k(this,Tm,document.createElement("div"));return t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=m(this,Sm),this.setDims(),OH(this,m(this,Tm),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(m(this,Xi),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(m(this,Xi),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:z(this,kt,OE).call(this,!0);break;case 1:case 3:z(this,kt,OE).call(this,!1);break}}select(){var t;super.select(),m(this,Xi)&&((t=this.parent)==null||t.drawLayer.updateProperties(m(this,Xi),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),m(this,Xi)&&((t=this.parent)==null||t.drawLayer.updateProperties(m(this,Xi),{rootClass:{selected:!1}}),m(this,xi)||z(this,kt,OE).call(this,!1))}get _mustFixPosition(){return!m(this,xi)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(m(this,pa),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(m(this,Xi),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:i,x:s,y:a}){const{x:o,y:l,width:u,height:c}=i.getBoundingClientRect(),h=new AbortController,d=t.combinedSignal(h),f=p=>{h.abort(),z(this,oo,gW).call(this,t,p)};window.addEventListener("blur",f,{signal:d}),window.addEventListener("pointerup",f,{signal:d}),window.addEventListener("pointerdown",dn,{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",vo,{signal:d}),i.addEventListener("pointermove",z(this,oo,pW).bind(this,t),{signal:d}),this._freeHighlight=new JI({x:s,y:a},[o,l,u,c],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,i){var g,b,v,w;let s=null;if(t instanceof HG){const{data:{quadPoints:y,rect:A,rotation:x,id:_,color:S,opacity:E,popupRef:C,richText:N,contentsObj:D,creationDate:M,modificationDate:I},parent:{page:{pageNumber:V}}}=t;s=t={annotationType:Dt.HIGHLIGHT,color:Array.from(S),opacity:E,quadPoints:y,boxes:null,pageIndex:V-1,rect:A.slice(0),rotation:x,annotationElementId:_,id:_,deleted:!1,popupRef:C,richText:N,comment:(D==null?void 0:D.str)||null,creationDate:M,modificationDate:I}}else if(t instanceof SF){const{data:{inkLists:y,rect:A,rotation:x,id:_,color:S,borderStyle:{rawWidth:E},popupRef:C,richText:N,contentsObj:D,creationDate:M,modificationDate:I},parent:{page:{pageNumber:V}}}=t;s=t={annotationType:Dt.HIGHLIGHT,color:Array.from(S),thickness:E,inkLists:y,boxes:null,pageIndex:V-1,rect:A.slice(0),rotation:x,annotationElementId:_,id:_,deleted:!1,popupRef:C,richText:N,comment:(D==null?void 0:D.str)||null,creationDate:M,modificationDate:I}}const{color:a,quadPoints:o,inkLists:l,opacity:u}=t,c=await super.deserialize(t,n,i);c.color=Ze.makeHexColor(...a),c.opacity=u||1,l&&k(c,eo,t.thickness),c._initialData=s,t.comment&&c.setCommentData(t);const[h,d]=c.pageDimensions,[f,p]=c.pageTranslation;if(o){const y=k(c,Wu,[]);for(let A=0;A<o.length;A+=8)y.push({x:(o[A]-f)/h,y:1-(o[A+1]-p)/d,width:(o[A+2]-o[A])/h,height:(o[A+1]-o[A+5])/d});z(g=c,kt,ZI).call(g),z(b=c,kt,hf).call(b),c.rotate(c.rotation)}else if(l){k(c,xi,!0);const y=l[0],A={x:y[0]-f,y:d-(y[1]-p)},x=new JI(A,[0,0,h,d],1,m(c,eo)/2,!0,.001);for(let E=0,C=y.length;E<C;E+=2)A.x=y[E]-f,A.y=d-(y[E+1]-p),x.add(A);const{id:_,clipPathId:S}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:c.color,"fill-opacity":c._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:x.toSVGPath()}},!0,!0);z(v=c,kt,FE).call(v,{highlightOutlines:x.getOutlines(),highlightId:_,clipPathId:S}),z(w=c,kt,hf).call(w),c.rotate(c.parentRotation)}return c}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=Fr._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:n,opacity:this.opacity,thickness:m(this,eo),quadPoints:z(this,kt,fW).call(this),outlines:z(this,kt,mW).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!z(this,kt,vW).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Zv=new WeakMap,xx=new WeakMap,Wu=new WeakMap,Sm=new WeakMap,_x=new WeakMap,Bs=new WeakMap,Ax=new WeakMap,Ex=new WeakMap,Tm=new WeakMap,ma=new WeakMap,pa=new WeakMap,xi=new WeakMap,e0=new WeakMap,t0=new WeakMap,Xi=new WeakMap,r0=new WeakMap,eo=new WeakMap,Sx=new WeakMap,kt=new WeakSet,ZI=function(){const t=new YI(m(this,Wu),.001);k(this,ma,t.getOutlines()),[this.x,this.y,this.width,this.height]=m(this,ma).box;const n=new YI(m(this,Wu),.0025,.001,this._uiManager.direction==="ltr");k(this,Bs,n.getOutlines());const{firstPoint:i}=m(this,ma);k(this,e0,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);const{lastPoint:s}=m(this,Bs);k(this,t0,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},FE=function({highlightOutlines:t,highlightId:n,clipPathId:i}){var d,f;if(k(this,ma,t),k(this,Bs,t.getNewOutline(m(this,eo)/2+1.5,.0025)),n>=0)k(this,pa,n),k(this,Sm,i),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),k(this,Xi,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:m(this,Bs).box,path:{d:m(this,Bs).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(m(this,pa),{bbox:z(d=ir,oo,Jp).call(d,m(this,ma).box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(m(this,Xi),{bbox:z(f=ir,oo,Jp).call(f,m(this,Bs).box,p),path:{d:m(this,Bs).toSVGPath()}})}const[a,o,l,u]=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=l,this.height=u;break;case 90:{const[p,g]=this.parentDimensions;this.x=o,this.y=1-a,this.width=l*g/p,this.height=u*p/g;break}case 180:this.x=1-a,this.y=1-o,this.width=l,this.height=u;break;case 270:{const[p,g]=this.parentDimensions;this.x=1-o,this.y=a,this.width=l*g/p,this.height=u*p/g;break}}const{firstPoint:c}=t;k(this,e0,[(c[0]-a)/l,(c[1]-o)/u]);const{lastPoint:h}=m(this,Bs);k(this,t0,[(h[0]-a)/l,(h[1]-o)/u])},uW=function(t){const n=(a,o)=>{this.color=a,this.opacity=o,this.onUpdatedColor()},i=this.color,s=this.opacity;this.addCommands({cmd:n.bind(this,t,ir._defaultOpacity),undo:n.bind(this,i,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Kt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},cW=function(t){const n=m(this,eo),i=s=>{k(this,eo,s),z(this,kt,hW).call(this,s)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Kt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},hW=function(t){m(this,xi)&&(z(this,kt,FE).call(this,{highlightOutlines:m(this,ma).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())},eP=function(){m(this,pa)===null||!this.parent||(this.parent.drawLayer.remove(m(this,pa)),k(this,pa,null),this.parent.drawLayer.remove(m(this,Xi)),k(this,Xi,null))},hf=function(t=this.parent){m(this,pa)===null&&({id:Ln(this,pa)._,clipPathId:Ln(this,Sm)._}=t.drawLayer.draw({bbox:m(this,ma).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:m(this,xi)},path:{d:m(this,ma).toSVGPath()}},!1,!0),k(this,Xi,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:m(this,xi)},bbox:m(this,Bs).box,path:{d:m(this,Bs).toSVGPath()}},m(this,xi))),m(this,Tm)&&(m(this,Tm).style.clipPath=m(this,Sm)))},oo=new WeakSet,Jp=function([t,n,i,s],a){switch(a){case 90:return[1-n-s,t,s,i];case 180:return[1-t-i,1-n-s,i,s];case 270:return[n,1-t-i,s,i]}return[t,n,i,s]},dW=function(t){ir._keyboardManager.exec(this,t)},OE=function(t){if(!m(this,Zv))return;const n=window.getSelection();t?n.setPosition(m(this,Zv),m(this,xx)):n.setPosition(m(this,Ax),m(this,Ex))},BE=function(){return m(this,xi)?this.rotation:0},fW=function(){if(m(this,xi))return null;const[t,n]=this.pageDimensions,[i,s]=this.pageTranslation,a=m(this,Wu),o=new Float32Array(a.length*8);let l=0;for(const{x:u,y:c,width:h,height:d}of a){const f=u*t+i,p=(1-c)*n+s;o[l]=o[l+4]=f,o[l+1]=o[l+3]=p,o[l+2]=o[l+6]=f+h*t,o[l+5]=o[l+7]=p-d*n,l+=8}return o},mW=function(t){return m(this,ma).serialize(t,z(this,kt,BE).call(this))},pW=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},gW=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},vW=function(t){const{color:n}=this._initialData;return this.hasEditedComment||t.color.some((i,s)=>i!==n[s])},L(ir,oo),Pe(ir,"_defaultColor",null),Pe(ir,"_defaultOpacity",1),Pe(ir,"_defaultThickness",12),Pe(ir,"_type","highlight"),Pe(ir,"_editorType",Dt.HIGHLIGHT),Pe(ir,"_freeHighlightId",-1),Pe(ir,"_freeHighlight",null),Pe(ir,"_freeHighlightClipId","");let JS=ir;var Cm;class yW{constructor(){L(this,Cm,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){m(this,Cm)[e]=t}toSVGProperties(){const e=m(this,Cm);return k(this,Cm,Object.create(null)),{root:e}}reset(){k(this,Cm,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Dr("Not implemented")}}Cm=new WeakMap;var ga,n0,ai,Nm,Dm,tr,tP,rP,nP,bb,bW,LE,wb,Zp;const jt=class jt extends Fr{constructor(t){super(t);L(this,tr);L(this,ga,null);L(this,n0);Pe(this,"_colorPicker",null);Pe(this,"_drawId",null);k(this,n0,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(z(this,tr,tP).call(this,t),z(this,tr,bb).call(this))}static _mergeSVGProperties(t,n){const i=new Set(Object.keys(t));for(const[s,a]of Object.entries(n))i.has(s)?Object.assign(t[s],a):t[s]=a;return t}static getDefaultDrawingOptions(t){Dr("Not implemented")}static get typesMap(){Dr("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(m(jt,ai).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[i,s]of this.typesMap)t.push([i,n[s]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[i,s]of this.constructor.typesMap)t.push([i,n[s]]);return t}_updateProperty(t,n,i){const s=this._drawingOptions,a=s[n],o=l=>{var c;s.updateProperty(n,l);const u=m(this,ga).updateProperty(n,l);u&&z(this,tr,wb).call(this,u),(c=this.parent)==null||c.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,i),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,jt._mergeSVGProperties(m(this,ga).getPathResizingSVGProperties(z(this,tr,LE).call(this)),{bbox:z(this,tr,Zp).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,jt._mergeSVGProperties(m(this,ga).getPathResizedSVGProperties(z(this,tr,LE).call(this)),{bbox:z(this,tr,Zp).call(this)}))}_onTranslating(t,n){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:z(this,tr,Zp).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,jt._mergeSVGProperties(m(this,ga).getPathTranslatedSVGProperties(z(this,tr,LE).call(this),this.parentDimensions),{bbox:z(this,tr,Zp).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,m(this,n0)&&(k(this,n0,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){z(this,tr,nP).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(z(this,tr,bb).call(this),z(this,tr,wb).call(this,m(this,ga).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),z(this,tr,nP).call(this)):t&&(this._uiManager.addShouldRescale(this),z(this,tr,bb).call(this,t),n=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,jt._mergeSVGProperties({bbox:z(this,tr,Zp).call(this)},m(this,ga).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&z(this,tr,wb).call(this,m(this,ga).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const i=super.render();i.classList.add("draw");const s=document.createElement("div");return i.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),i}static createDrawerInstance(t,n,i,s,a){Dr("Not implemented")}static startDrawing(t,n,i,s){var b;const{target:a,offsetX:o,offsetY:l,pointerId:u,pointerType:c}=s;if(qi.isInitializedAndDifferentPointerType(c))return;const{viewport:{rotation:h}}=t,{width:d,height:f}=a.getBoundingClientRect(),p=k(jt,Nm,new AbortController),g=t.combinedSignal(p);if(qi.setPointer(c,u),window.addEventListener("pointerup",v=>{qi.isSamePointerIdOrRemove(v.pointerId)&&this._endDraw(v)},{signal:g}),window.addEventListener("pointercancel",v=>{qi.isSamePointerIdOrRemove(v.pointerId)&&this._currentParent.endDrawingSession()},{signal:g}),window.addEventListener("pointerdown",v=>{qi.isSamePointerType(v.pointerType)&&(qi.initializeAndAddPointerId(v.pointerId),m(jt,ai).isCancellable()&&(m(jt,ai).removeLastElement(),m(jt,ai).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",vo,{signal:g}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),a.addEventListener("touchmove",v=>{qi.isSameTimeStamp(v.timeStamp)&&dn(v)},{signal:g}),t.toggleDrawing(),(b=n._editorUndoBar)==null||b.hide(),m(jt,ai)){t.drawLayer.updateProperties(this._currentDrawId,m(jt,ai).startNew(o,l,d,f,h));return}n.updateUIForDefaultProperties(this),k(jt,ai,this.createDrawerInstance(o,l,d,f,h)),k(jt,Dm,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(m(jt,Dm).toSVGProperties(),m(jt,ai).defaultSVGProperties),!0,!1)}static _drawMove(t){if(qi.isSameTimeStamp(t.timeStamp),!m(jt,ai))return;const{offsetX:n,offsetY:i,pointerId:s}=t;if(qi.isSamePointerId(s)){if(qi.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,m(jt,ai).add(n,i)),qi.setTimeStamp(t.timeStamp),dn(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,k(jt,ai,null),k(jt,Dm,null),qi.clearPointerType(),qi.clearTimeStamp()),m(jt,Nm)&&(m(jt,Nm).abort(),k(jt,Nm,null),qi.clearPointerIds())}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,m(jt,ai).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=m(jt,ai),s=this._currentDrawId,a=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(s,i.setLastElement(a))},undo:()=>{n.drawLayer.updateProperties(s,i.removeLastElement())},mustExec:!1,type:Kt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Kt.DRAW_STEP),!m(jt,ai).isEmpty()){const{pageDimensions:[i,s],scale:a}=n,o=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:m(jt,ai).getOutlines(i*a,s*a,a,this._INNER_MARGIN),drawingOptions:m(jt,Dm),mustBeCommitted:!t});return this._cleanup(!0),o}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,i,s,a,o){Dr("Not implemented")}static async deserialize(t,n,i){var h,d;const{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}=n.viewport,u=this.deserializeDraw(o,l,s,a,this._INNER_MARGIN,t),c=await super.deserialize(t,n,i);return c.createDrawingOptions(t),z(h=c,tr,tP).call(h,{drawOutlines:u}),z(d=c,tr,bb).call(d),c.onScaleChanging(),c.rotate(),c}serializeDraw(t){const[n,i]=this.pageTranslation,[s,a]=this.pageDimensions;return m(this,ga).serialize([n,i,s,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};ga=new WeakMap,n0=new WeakMap,ai=new WeakMap,Nm=new WeakMap,Dm=new WeakMap,tr=new WeakSet,tP=function({drawOutlines:t,drawId:n,drawingOptions:i}){k(this,ga,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=z(this,tr,rP).call(this,t,this.parent),z(this,tr,wb).call(this,t.box)},rP=function(t,n){const{id:i}=n.drawLayer.draw(jt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},nP=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},bb=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=z(this,tr,rP).call(this,m(this,ga),t)}},bW=function([t,n,i,s]){const{parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[n,1-t,i*(o/a),s*(a/o)];case 180:return[1-t,1-n,i,s];case 270:return[1-n,t,i*(o/a),s*(a/o)];default:return[t,n,i,s]}},LE=function(){const{x:t,y:n,width:i,height:s,parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[1-n,t,i*(a/o),s*(o/a)];case 180:return[1-t,1-n,i,s];case 270:return[n,1-t,i*(a/o),s*(o/a)];default:return[t,n,i,s]}},wb=function(t){[this.x,this.y,this.width,this.height]=z(this,tr,bW).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Zp=function(){const{x:t,y:n,width:i,height:s,rotation:a,parentRotation:o,parentDimensions:[l,u]}=this;switch((a*4+o)/90){case 1:return[1-n-s,t,s,i];case 2:return[1-t-i,1-n-s,i,s];case 3:return[n,1-t-i,s,i];case 4:return[t,n-i*(l/u),s*(u/l),i*(l/u)];case 5:return[1-n,t,i*(l/u),s*(u/l)];case 6:return[1-t-s*(u/l),1-n,s*(u/l),i*(l/u)];case 7:return[n-i*(l/u),1-t-s*(u/l),i*(l/u),s*(u/l)];case 8:return[t-i,n-s,i,s];case 9:return[1-n,t-i,s,i];case 10:return[1-t,1-n,i,s];case 11:return[n-s,1-t,s,i];case 12:return[t-s*(u/l),n,s*(u/l),i*(l/u)];case 13:return[1-n-i*(l/u),t-s*(u/l),i*(l/u),s*(u/l)];case 14:return[1-t,1-n-i*(l/u),s*(u/l),i*(l/u)];case 15:return[n,1-t,i*(l/u),s*(u/l)];default:return[t,n,i,s]}},Pe(jt,"_currentDrawId",-1),Pe(jt,"_currentParent",null),L(jt,ai,null),L(jt,Nm,null),L(jt,Dm,null),Pe(jt,"_INNER_MARGIN",3);let ZS=jt;var Il,oi,li,Mm,i0,cs,_i,to,Im,Pm,Rm,s0,$E;class Xde{constructor(e,t,n,i,s,a){L(this,s0);L(this,Il,new Float64Array(6));L(this,oi);L(this,li);L(this,Mm);L(this,i0);L(this,cs);L(this,_i,"");L(this,to,0);L(this,Im,new s_);L(this,Pm);L(this,Rm);k(this,Pm,n),k(this,Rm,i),k(this,Mm,s),k(this,i0,a),[e,t]=z(this,s0,$E).call(this,e,t);const o=k(this,oi,[NaN,NaN,NaN,NaN,e,t]);k(this,cs,[e,t]),k(this,li,[{line:o,points:m(this,cs)}]),m(this,Il).set(o,0)}updateProperty(e,t){e==="stroke-width"&&k(this,i0,t)}isEmpty(){return!m(this,li)||m(this,li).length===0}isCancellable(){return m(this,cs).length<=10}add(e,t){[e,t]=z(this,s0,$E).call(this,e,t);const[n,i,s,a]=m(this,Il).subarray(2,6),o=e-s,l=t-a;return Math.hypot(m(this,Pm)*o,m(this,Rm)*l)<=2?null:(m(this,cs).push(e,t),isNaN(n)?(m(this,Il).set([s,a,e,t],2),m(this,oi).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(m(this,Il)[0])&&m(this,oi).splice(6,6),m(this,Il).set([n,i,s,a,e,t],0),m(this,oi).push(...Xe.createBezierPoints(n,i,s,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(m(this,cs).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,s){k(this,Pm,n),k(this,Rm,i),k(this,Mm,s),[e,t]=z(this,s0,$E).call(this,e,t);const a=k(this,oi,[NaN,NaN,NaN,NaN,e,t]);k(this,cs,[e,t]);const o=m(this,li).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),m(this,li).push({line:a,points:m(this,cs)}),m(this,Il).set(a,0),k(this,to,0),this.toSVGPath(),null}getLastElement(){return m(this,li).at(-1)}setLastElement(e){return m(this,li)?(m(this,li).push(e),k(this,oi,e.line),k(this,cs,e.points),k(this,to,0),{path:{d:this.toSVGPath()}}):m(this,Im).setLastElement(e)}removeLastElement(){if(!m(this,li))return m(this,Im).removeLastElement();m(this,li).pop(),k(this,_i,"");for(let e=0,t=m(this,li).length;e<t;e++){const{line:n,points:i}=m(this,li)[e];k(this,oi,n),k(this,cs,i),k(this,to,0),this.toSVGPath()}return{path:{d:m(this,_i)}}}toSVGPath(){const e=Xe.svgRound(m(this,oi)[4]),t=Xe.svgRound(m(this,oi)[5]);if(m(this,cs).length===2)return k(this,_i,`${m(this,_i)} M ${e} ${t} Z`),m(this,_i);if(m(this,cs).length<=6){const i=m(this,_i).lastIndexOf("M");k(this,_i,`${m(this,_i).slice(0,i)} M ${e} ${t}`),k(this,to,6)}if(m(this,cs).length===4){const i=Xe.svgRound(m(this,oi)[10]),s=Xe.svgRound(m(this,oi)[11]);return k(this,_i,`${m(this,_i)} L ${i} ${s}`),k(this,to,12),m(this,_i)}const n=[];m(this,to)===0&&(n.push(`M ${e} ${t}`),k(this,to,6));for(let i=m(this,to),s=m(this,oi).length;i<s;i+=6){const[a,o,l,u,c,h]=m(this,oi).slice(i,i+6).map(Xe.svgRound);n.push(`C${a} ${o} ${l} ${u} ${c} ${h}`)}return k(this,_i,m(this,_i)+n.join(" ")),k(this,to,m(this,oi).length),m(this,_i)}getOutlines(e,t,n,i){const s=m(this,li).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),m(this,Im).build(m(this,li),e,t,n,m(this,Mm),m(this,i0),i),k(this,Il,null),k(this,oi,null),k(this,li,null),k(this,_i,null),m(this,Im)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Il=new WeakMap,oi=new WeakMap,li=new WeakMap,Mm=new WeakMap,i0=new WeakMap,cs=new WeakMap,_i=new WeakMap,to=new WeakMap,Im=new WeakMap,Pm=new WeakMap,Rm=new WeakMap,s0=new WeakSet,$E=function(e,t){return Xe._normalizePoint(e,t,m(this,Pm),m(this,Rm),m(this,Mm))};var hs,Tx,Cx,va,Pl,Rl,a0,o0,km,Ci,mu,wW,xW,_W;class s_ extends Xe{constructor(){super(...arguments);L(this,Ci);L(this,hs);L(this,Tx,0);L(this,Cx);L(this,va);L(this,Pl);L(this,Rl);L(this,a0);L(this,o0);L(this,km)}build(t,n,i,s,a,o,l){k(this,Pl,n),k(this,Rl,i),k(this,a0,s),k(this,o0,a),k(this,km,o),k(this,Cx,l??0),k(this,va,t),z(this,Ci,xW).call(this)}get thickness(){return m(this,km)}setLastElement(t){return m(this,va).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return m(this,va).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of m(this,va)){if(t.push(`M${Xe.svgRound(n[4])} ${Xe.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${Xe.svgRound(n[10])} ${Xe.svgRound(n[11])}`);continue}for(let i=6,s=n.length;i<s;i+=6){const[a,o,l,u,c,h]=n.subarray(i,i+6).map(Xe.svgRound);t.push(`C${a} ${o} ${l} ${u} ${c} ${h}`)}}return t.join("")}serialize([t,n,i,s],a){const o=[],l=[],[u,c,h,d]=z(this,Ci,wW).call(this);let f,p,g,b,v,w,y,A,x;switch(m(this,o0)){case 0:x=Xe._rescale,f=t,p=n+s,g=i,b=-s,v=t+u*i,w=n+(1-c-d)*s,y=t+(u+h)*i,A=n+(1-c)*s;break;case 90:x=Xe._rescaleAndSwap,f=t,p=n,g=i,b=s,v=t+c*i,w=n+u*s,y=t+(c+d)*i,A=n+(u+h)*s;break;case 180:x=Xe._rescale,f=t+i,p=n,g=-i,b=s,v=t+(1-u-h)*i,w=n+c*s,y=t+(1-u)*i,A=n+(c+d)*s;break;case 270:x=Xe._rescaleAndSwap,f=t+i,p=n+s,g=-i,b=-s,v=t+(1-c-d)*i,w=n+(1-u-h)*s,y=t+(1-c)*i,A=n+(1-u)*s;break}for(const{line:_,points:S}of m(this,va))o.push(x(_,f,p,g,b,a?new Array(_.length):null)),l.push(x(S,f,p,g,b,a?new Array(S.length):null));return{lines:o,points:l,rect:[v,w,y,A]}}static deserialize(t,n,i,s,a,{paths:{lines:o,points:l},rotation:u,thickness:c}){const h=[];let d,f,p,g,b;switch(u){case 0:b=Xe._rescale,d=-t/i,f=n/s+1,p=1/i,g=-1/s;break;case 90:b=Xe._rescaleAndSwap,d=-n/s,f=-t/i,p=1/s,g=1/i;break;case 180:b=Xe._rescale,d=t/i+1,f=-n/s,p=-1/i,g=1/s;break;case 270:b=Xe._rescaleAndSwap,d=n/s+1,f=t/i+1,p=-1/s,g=-1/i;break}if(!o){o=[];for(const w of l){const y=w.length;if(y===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(y===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const A=new Float32Array(3*(y-2));o.push(A);let[x,_,S,E]=w.subarray(0,4);A.set([NaN,NaN,NaN,NaN,x,_],0);for(let C=4;C<y;C+=2){const N=w[C],D=w[C+1];A.set(Xe.createBezierPoints(x,_,S,E,N,D),(C-2)*3),[x,_,S,E]=[S,E,N,D]}}}for(let w=0,y=o.length;w<y;w++)h.push({line:b(o[w].map(A=>A??NaN),d,f,p,g),points:b(l[w].map(A=>A??NaN),d,f,p,g)});const v=new this.prototype.constructor;return v.build(h,i,s,1,u,c,a),v}get box(){return m(this,hs)}updateProperty(t,n){return t==="stroke-width"?z(this,Ci,_W).call(this,n):null}updateParentDimensions([t,n],i){const[s,a]=z(this,Ci,mu).call(this);k(this,Pl,t),k(this,Rl,n),k(this,a0,i);const[o,l]=z(this,Ci,mu).call(this),u=o-s,c=l-a,h=m(this,hs);return h[0]-=u,h[1]-=c,h[2]+=2*u,h[3]+=2*c,h}updateRotation(t){return k(this,Tx,t),{path:{transform:this.rotationTransform}}}get viewBox(){return m(this,hs).map(Xe.svgRound).join(" ")}get defaultProperties(){const[t,n]=m(this,hs);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Xe.svgRound(t)} ${Xe.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=m(this,hs);let i=0,s=0,a=0,o=0,l=0,u=0;switch(m(this,Tx)){case 90:s=n/t,a=-t/n,l=t;break;case 180:i=-1,o=-1,l=t,u=n;break;case 270:s=-n/t,a=t/n,u=n;break;default:return""}return`matrix(${i} ${s} ${a} ${o} ${Xe.svgRound(l)} ${Xe.svgRound(u)})`}getPathResizingSVGProperties([t,n,i,s]){const[a,o]=z(this,Ci,mu).call(this),[l,u,c,h]=m(this,hs);if(Math.abs(c-a)<=Xe.PRECISION||Math.abs(h-o)<=Xe.PRECISION){const b=t+i/2-(l+c/2),v=n+s/2-(u+h/2);return{path:{"transform-origin":`${Xe.svgRound(t)} ${Xe.svgRound(n)}`,transform:`${this.rotationTransform} translate(${b} ${v})`}}}const d=(i-2*a)/(c-2*a),f=(s-2*o)/(h-2*o),p=c/i,g=h/s;return{path:{"transform-origin":`${Xe.svgRound(l)} ${Xe.svgRound(u)}`,transform:`${this.rotationTransform} scale(${p} ${g}) translate(${Xe.svgRound(a)} ${Xe.svgRound(o)}) scale(${d} ${f}) translate(${Xe.svgRound(-a)} ${Xe.svgRound(-o)})`}}}getPathResizedSVGProperties([t,n,i,s]){const[a,o]=z(this,Ci,mu).call(this),l=m(this,hs),[u,c,h,d]=l;if(l[0]=t,l[1]=n,l[2]=i,l[3]=s,Math.abs(h-a)<=Xe.PRECISION||Math.abs(d-o)<=Xe.PRECISION){const v=t+i/2-(u+h/2),w=n+s/2-(c+d/2);for(const{line:y,points:A}of m(this,va))Xe._translate(y,v,w,y),Xe._translate(A,v,w,A);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Xe.svgRound(t)} ${Xe.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const f=(i-2*a)/(h-2*a),p=(s-2*o)/(d-2*o),g=-f*(u+a)+t+a,b=-p*(c+o)+n+o;if(f!==1||p!==1||g!==0||b!==0)for(const{line:v,points:w}of m(this,va))Xe._rescale(v,g,b,f,p,v),Xe._rescale(w,g,b,f,p,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Xe.svgRound(t)} ${Xe.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],i){const[s,a]=i,o=m(this,hs),l=t-o[0],u=n-o[1];if(m(this,Pl)===s&&m(this,Rl)===a)for(const{line:c,points:h}of m(this,va))Xe._translate(c,l,u,c),Xe._translate(h,l,u,h);else{const c=m(this,Pl)/s,h=m(this,Rl)/a;k(this,Pl,s),k(this,Rl,a);for(const{line:d,points:f}of m(this,va))Xe._rescale(d,l,u,c,h,d),Xe._rescale(f,l,u,c,h,f);o[2]*=c,o[3]*=h}return o[0]=t,o[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Xe.svgRound(t)} ${Xe.svgRound(n)}`}}}get defaultSVGProperties(){const t=m(this,hs);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Xe.svgRound(t[0])} ${Xe.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}hs=new WeakMap,Tx=new WeakMap,Cx=new WeakMap,va=new WeakMap,Pl=new WeakMap,Rl=new WeakMap,a0=new WeakMap,o0=new WeakMap,km=new WeakMap,Ci=new WeakSet,mu=function(t=m(this,km)){const n=m(this,Cx)+t/2*m(this,a0);return m(this,o0)%180===0?[n/m(this,Pl),n/m(this,Rl)]:[n/m(this,Rl),n/m(this,Pl)]},wW=function(){const[t,n,i,s]=m(this,hs),[a,o]=z(this,Ci,mu).call(this,0);return[t+a,n+o,i-2*a,s-2*o]},xW=function(){const t=k(this,hs,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of m(this,va)){if(s.length<=12){for(let l=4,u=s.length;l<u;l+=6)Ze.pointBoundingBox(s[l],s[l+1],t);continue}let a=s[4],o=s[5];for(let l=6,u=s.length;l<u;l+=6){const[c,h,d,f,p,g]=s.subarray(l,l+6);Ze.bezierBoundingBox(a,o,c,h,d,f,p,g,t),a=p,o=g}}const[n,i]=z(this,Ci,mu).call(this);t[0]=ms(t[0]-n,0,1),t[1]=ms(t[1]-i,0,1),t[2]=ms(t[2]+n,0,1),t[3]=ms(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]},_W=function(t){const[n,i]=z(this,Ci,mu).call(this);k(this,km,t);const[s,a]=z(this,Ci,mu).call(this),[o,l]=[s-n,a-i],u=m(this,hs);return u[0]-=o,u[1]-=l,u[2]+=2*o,u[3]+=2*l,u};class KC extends yW{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Fr._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new KC(this._viewParameters);return e.updateAll(this),e}}var ZT,AW;const Cg=class Cg extends ZS{constructor(t){super({...t,name:"inkEditor"});L(this,ZT);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){Fr.initialize(t,n),this._defaultDrawingOptions=new KC(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Et(this,"typesMap",new Map([[Kt.INK_THICKNESS,"stroke-width"],[Kt.INK_COLOR,"stroke"],[Kt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,i,s,a){return new Xde(t,n,i,s,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,i,s,a,o){return s_.deserialize(t,n,i,s,a,o)}static async deserialize(t,n,i){let s=null;if(t instanceof SF){const{data:{inkLists:o,rect:l,rotation:u,id:c,color:h,opacity:d,borderStyle:{rawWidth:f},popupRef:p,richText:g,contentsObj:b,creationDate:v,modificationDate:w},parent:{page:{pageNumber:y}}}=t;s=t={annotationType:Dt.INK,color:Array.from(h),thickness:f,opacity:d,paths:{points:o},boxes:null,pageIndex:y-1,rect:l.slice(0),rotation:u,annotationElementId:c,id:c,deleted:!1,popupRef:p,richText:g,comment:(b==null?void 0:b.str)||null,creationDate:v,modificationDate:w}}const a=await super.deserialize(t,n,i);return a._initialData=s,t.comment&&a.setCommentData(t),a}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new XS(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Kt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:i}){this._drawingOptions=Cg.getDefaultDrawingOptions({stroke:Ze.makeHexColor(...t),"stroke-width":n,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:s,"stroke-opacity":a,"stroke-width":o}}=this,l=Object.assign(super.serialize(t),{color:Fr._colorManager.convert(s),opacity:a,thickness:o,paths:{lines:n,points:i}});return this.addComment(l),t?(l.isCopy=!0,l):this.annotationElementId&&!z(this,ZT,AW).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:n,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};ZT=new WeakSet,AW=function(t){const{color:n,thickness:i,opacity:s,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((o,l)=>o!==n[l])||t.thickness!==i||t.opacity!==s||t.pageIndex!==a},Pe(Cg,"_type","ink"),Pe(Cg,"_editorType",Dt.INK),Pe(Cg,"_defaultDrawingOptions",null);let iP=Cg;class sP extends s_{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const bA=8,Vy=3;var Fm,or,aP,Bo,EW,SW,oP,VE,TW,CW,NW,lP,uP,DW;class Zu{static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:i},s,a,o,l){let u=new OffscreenCanvas(1,1),c=u.getContext("2d",{alpha:!1});const h=200,d=c.font=`${n} ${i} ${h}px ${t}`,{actualBoundingBoxLeft:f,actualBoundingBoxRight:p,actualBoundingBoxAscent:g,actualBoundingBoxDescent:b,fontBoundingBoxAscent:v,fontBoundingBoxDescent:w,width:y}=c.measureText(e),A=1.5,x=Math.ceil(Math.max(Math.abs(f)+Math.abs(p)||0,y)*A),_=Math.ceil(Math.max(Math.abs(g)+Math.abs(b)||h,Math.abs(v)+Math.abs(w)||h)*A);u=new OffscreenCanvas(x,_),c=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),c.font=d,c.filter="grayscale(1)",c.fillStyle="white",c.fillRect(0,0,x,_),c.fillStyle="black",c.fillText(e,x*(A-1)/2,_*(3-A)/2);const S=z(this,or,lP).call(this,c.getImageData(0,0,x,_).data),E=z(this,or,NW).call(this,S),C=z(this,or,uP).call(this,E),N=z(this,or,oP).call(this,S,x,_,C);return this.processDrawnLines({lines:{curves:N,width:x,height:_},pageWidth:s,pageHeight:a,rotation:o,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,n,i,s){const[a,o,l]=z(this,or,DW).call(this,e),[u,c]=z(this,or,CW).call(this,a,o,l,Math.hypot(o,l)*m(this,Fm).sigmaSFactor,m(this,Fm).sigmaR,m(this,Fm).kernelSize),h=z(this,or,uP).call(this,c),d=z(this,or,oP).call(this,u,o,l,h);return this.processDrawnLines({lines:{curves:d,width:o,height:l},pageWidth:t,pageHeight:n,rotation:i,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:s,mustSmooth:a,areContours:o}){i%180!==0&&([t,n]=[n,t]);const{curves:l,width:u,height:c}=e,h=e.thickness??0,d=[],f=Math.min(t/u,n/c),p=f/t,g=f/n,b=[];for(const{points:w}of l){const y=a?z(this,or,TW).call(this,w):w;if(!y)continue;b.push(y);const A=y.length,x=new Float32Array(A),_=new Float32Array(3*(A===2?2:A-2));if(d.push({line:_,points:x}),A===2){x[0]=y[0]*p,x[1]=y[1]*g,_.set([NaN,NaN,NaN,NaN,x[0],x[1]],0);continue}let[S,E,C,N]=y;S*=p,E*=g,C*=p,N*=g,x.set([S,E,C,N],0),_.set([NaN,NaN,NaN,NaN,S,E],0);for(let D=4;D<A;D+=2){const M=x[D]=y[D]*p,I=x[D+1]=y[D+1]*g;_.set(Xe.createBezierPoints(S,E,C,N,M,I),(D-2)*3),[S,E,C,N]=[C,N,M,I]}}if(d.length===0)return null;const v=o?new sP:new s_;return v.build(d,t,n,1,i,o?0:h,s),{outline:v,newCurves:b,areContours:o,thickness:h,width:u,height:c}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:i,height:s}){let a=1/0,o=-1/0,l=0;for(const y of e){l+=y.length;for(let A=2,x=y.length;A<x;A++){const _=y[A]-y[A-2];a=Math.min(a,_),o=Math.max(o,_)}}let u;a>=-128&&o<=127?u=Int8Array:a>=-32768&&o<=32767?u=Int16Array:u=Int32Array;const c=e.length,h=bA+Vy*c,d=new Uint32Array(h);let f=0;d[f++]=h*Uint32Array.BYTES_PER_ELEMENT+(l-2*c)*u.BYTES_PER_ELEMENT,d[f++]=0,d[f++]=i,d[f++]=s,d[f++]=t?0:1,d[f++]=Math.max(0,Math.floor(n??0)),d[f++]=c,d[f++]=u.BYTES_PER_ELEMENT;for(const y of e)d[f++]=y.length-2,d[f++]=y[0],d[f++]=y[1];const p=new CompressionStream("deflate-raw"),g=p.writable.getWriter();await g.ready,g.write(d);const b=u.prototype.constructor;for(const y of e){const A=new b(y.length-2);for(let x=2,_=y.length;x<_;x++)A[x-2]=y[x]-y[x-2];g.write(A)}g.close();const v=await new Response(p.readable).arrayBuffer(),w=new Uint8Array(v);return CH(w)}static async decompressSignature(e){try{const t=hhe(e),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),s=i.getWriter();await s.ready,s.write(t).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let a=null,o=0;for await(const y of n)a||(a=new Uint8Array(new Uint32Array(y.buffer,0,4)[0])),a.set(y,o),o+=y.length;const l=new Uint32Array(a.buffer,0,a.length>>2),u=l[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const c=l[2],h=l[3],d=l[4]===0,f=l[5],p=l[6],g=l[7],b=[],v=(bA+Vy*p)*Uint32Array.BYTES_PER_ELEMENT;let w;switch(g){case Int8Array.BYTES_PER_ELEMENT:w=new Int8Array(a.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:w=new Int16Array(a.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:w=new Int32Array(a.buffer,v);break}o=0;for(let y=0;y<p;y++){const A=l[Vy*y+bA],x=new Float32Array(A+2);b.push(x);for(let _=0;_<Vy-1;_++)x[_]=l[Vy*y+bA+_+1];for(let _=0;_<A;_++)x[_+2]=x[_]+w[o++]}return{areContours:d,thickness:f,outlines:b,width:c,height:h}}catch(t){return At(`decompressSignature: ${t}`),null}}}Fm=new WeakMap,or=new WeakSet,aP=function(e,t,n,i){return n-=e,i-=t,n===0?i>0?0:4:n===1?i+6:2-i},Bo=new WeakMap,EW=function(e,t,n,i,s,a,o){const l=z(this,or,aP).call(this,n,i,s,a);for(let u=0;u<8;u++){const c=(-u+l-o+16)%8,h=m(this,Bo)[2*c],d=m(this,Bo)[2*c+1];if(e[(n+h)*t+(i+d)]!==0)return c}return-1},SW=function(e,t,n,i,s,a,o){const l=z(this,or,aP).call(this,n,i,s,a);for(let u=0;u<8;u++){const c=(u+l+o+16)%8,h=m(this,Bo)[2*c],d=m(this,Bo)[2*c+1];if(e[(n+h)*t+(i+d)]!==0)return c}return-1},oP=function(e,t,n,i){const s=e.length,a=new Int32Array(s);for(let c=0;c<s;c++)a[c]=e[c]<=i?1:0;for(let c=1;c<n-1;c++)a[c*t]=a[c*t+t-1]=0;for(let c=0;c<t;c++)a[c]=a[t*n-1-c]=0;let o=1,l;const u=[];for(let c=1;c<n-1;c++){l=1;for(let h=1;h<t-1;h++){const d=c*t+h,f=a[d];if(f===0)continue;let p=c,g=h;if(f===1&&a[d-1]===0)o+=1,g-=1;else if(f>=1&&a[d+1]===0)o+=1,g+=1,f>1&&(l=f);else{f!==1&&(l=Math.abs(f));continue}const b=[h,c],v=g===h+1,w={isHole:v,points:b,id:o,parent:0};u.push(w);let y;for(const D of u)if(D.id===l){y=D;break}y?y.isHole?w.parent=v?y.parent:l:w.parent=v?l:y.parent:w.parent=v?l:0;const A=z(this,or,EW).call(this,a,t,c,h,p,g,0);if(A===-1){a[d]=-o,a[d]!==1&&(l=Math.abs(a[d]));continue}let x=m(this,Bo)[2*A],_=m(this,Bo)[2*A+1];const S=c+x,E=h+_;p=S,g=E;let C=c,N=h;for(;;){const D=z(this,or,SW).call(this,a,t,C,N,p,g,1);x=m(this,Bo)[2*D],_=m(this,Bo)[2*D+1];const M=C+x,I=N+_;b.push(I,M);const V=C*t+N;if(a[V+1]===0?a[V]=-o:a[V]===1&&(a[V]=o),M===c&&I===h&&C===S&&N===E){a[d]!==1&&(l=Math.abs(a[d]));break}else p=C,g=N,C=M,N=I}}}return u},VE=function(e,t,n,i){if(n-t<=4){for(let S=t;S<n-2;S+=2)i.push(e[S],e[S+1]);return}const s=e[t],a=e[t+1],o=e[n-4]-s,l=e[n-3]-a,u=Math.hypot(o,l),c=o/u,h=l/u,d=c*a-h*s,f=l/o,p=1/u,g=Math.atan(f),b=Math.cos(g),v=Math.sin(g),w=p*(Math.abs(b)+Math.abs(v)),y=p*(1-w+w**2),A=Math.max(Math.atan(Math.abs(v+b)*y),Math.atan(Math.abs(v-b)*y));let x=0,_=t;for(let S=t+2;S<n-2;S+=2){const E=Math.abs(d-c*e[S+1]+h*e[S]);E>x&&(_=S,x=E)}x>(u*A)**2?(z(this,or,VE).call(this,e,t,_+2,i),z(this,or,VE).call(this,e,_,n,i)):i.push(s,a)},TW=function(e){const t=[],n=e.length;return z(this,or,VE).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t},CW=function(e,t,n,i,s,a){const o=new Float32Array(a**2),l=-2*i**2,u=a>>1;for(let g=0;g<a;g++){const b=(g-u)**2;for(let v=0;v<a;v++)o[g*a+v]=Math.exp((b+(v-u)**2)/l)}const c=new Float32Array(256),h=-2*s**2;for(let g=0;g<256;g++)c[g]=Math.exp(g**2/h);const d=e.length,f=new Uint8Array(d),p=new Uint32Array(256);for(let g=0;g<n;g++)for(let b=0;b<t;b++){const v=g*t+b,w=e[v];let y=0,A=0;for(let _=0;_<a;_++){const S=g+_-u;if(!(S<0||S>=n))for(let E=0;E<a;E++){const C=b+E-u;if(C<0||C>=t)continue;const N=e[S*t+C],D=o[_*a+E]*c[Math.abs(N-w)];y+=N*D,A+=D}}const x=f[v]=Math.round(y/A);p[x]++}return[f,p]},NW=function(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t},lP=function(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let i=-1/0,s=1/0;for(let o=0,l=n.length;o<l;o++){const u=n[o]=e[o<<2];i=Math.max(i,u),s=Math.min(s,u)}const a=255/(i-s);for(let o=0,l=n.length;o<l;o++)n[o]=(n[o]-s)*a;return n},uP=function(e){let t,n=-1/0,i=-1/0;const s=e.findIndex(l=>l!==0);let a=s,o=s;for(t=s;t<256;t++){const l=e[t];l>n&&(t-a>i&&(i=t-a,o=t-1),n=l,a=t)}for(t=o-1;t>=0&&!(e[t]>e[t+1]);t--);return t},DW=function(e){const t=e,{width:n,height:i}=e,{maxDim:s}=m(this,Fm);let a=n,o=i;if(n>s||i>s){let d=n,f=i,p=Math.log2(Math.max(n,i)/s);const g=Math.floor(p);p=p===g?g-1:g;for(let v=0;v<p;v++){a=Math.ceil(d/2),o=Math.ceil(f/2);const w=new OffscreenCanvas(a,o);w.getContext("2d").drawImage(e,0,0,d,f,0,0,a,o),d=a,f=o,e!==t&&e.close(),e=w.transferToImageBitmap()}const b=Math.min(s/a,s/o);a=Math.round(a*b),o=Math.round(o*b)}const u=new OffscreenCanvas(a,o).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,a,o),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,a,o);const c=u.getImageData(0,0,a,o).data;return[z(this,or,lP).call(this,c),a,o]},L(Zu,or),L(Zu,Fm,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),L(Zu,Bo,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class TF extends yW{constructor(){super(),super.updateProperties({fill:Fr._defaultLineColor,"stroke-width":0})}clone(){const e=new TF;return e.updateAll(this),e}}class CF extends KC{constructor(e){super(e),super.updateProperties({stroke:Fr._defaultLineColor,"stroke-width":1})}clone(){const e=new CF(this._viewParameters);return e.updateAll(this),e}}var Lh,kl,$h,Om;const ea=class ea extends ZS{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});L(this,Lh,!1);L(this,kl,null);L(this,$h,null);L(this,Om,null);this._willKeepAspectRatio=!0,k(this,$h,t.signatureData||null),k(this,kl,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){Fr.initialize(t,n),this._defaultDrawingOptions=new TF,this._defaultDrawnSignatureOptions=new CF(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Et(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!m(this,kl)}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(m(this,$h)){const{lines:s,mustSmooth:a,areContours:o,description:l,uuid:u,heightInPage:c}=m(this,$h),{rawDims:{pageWidth:h,pageHeight:d},rotation:f}=this.parent.viewport,p=Zu.processDrawnLines({lines:s,pageWidth:h,pageHeight:d,rotation:f,innerMargin:ea._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(p,c,l,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:m(this,kl)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){k(this,Om,t),this.addEditToolbar()}getUuid(){return m(this,Om)}get description(){return m(this,kl)}set description(t){k(this,kl,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:i,width:s,height:a}=m(this,$h),o=Math.max(s,a),l=Zu.processDrawnLines({lines:{curves:t.map(u=>({points:u})),thickness:i,width:s,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,i,s){const{x:a,y:o}=this,{outline:l}=k(this,$h,t);k(this,Lh,l instanceof sP),this.description=i;let u;m(this,Lh)?u=ea.getDefaultDrawingOptions():(u=ea._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:u});const[,c]=this.pageDimensions;let h=n/c;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:s}=this.parent.viewport;return Zu.process(t,n,i,s,ea._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:i,pageHeight:s},rotation:a}=this.parent.viewport;return Zu.extractContoursFromText(t,n,i,s,a,ea._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:s}=this.parent.viewport;return Zu.processDrawnLines({lines:t,pageWidth:n,pageHeight:i,rotation:s,innerMargin:ea._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=ea.getDefaultDrawingOptions():(this._drawingOptions=ea._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":s}}=this,a=Object.assign(super.serialize(t),{isSignature:!0,areContours:m(this,Lh),color:[0,0,0],thickness:m(this,Lh)?0:s});return this.addComment(a),t?(a.paths={lines:n,points:i},a.uuid=m(this,Om),a.isCopy=!0):a.lines=n,m(this,kl)&&(a.accessibilityData={type:"Figure",alt:m(this,kl)}),a}static deserializeDraw(t,n,i,s,a,o){return o.areContours?sP.deserialize(t,n,i,s,a,o):s_.deserialize(t,n,i,s,a,o)}static async deserialize(t,n,i){var a;const s=await super.deserialize(t,n,i);return k(s,Lh,t.areContours),s.description=((a=t.accessibilityData)==null?void 0:a.alt)||"",k(s,Om,t.uuid),s}};Lh=new WeakMap,kl=new WeakMap,$h=new WeakMap,Om=new WeakMap,Pe(ea,"_type","signature"),Pe(ea,"_editorType",Dt.SIGNATURE),Pe(ea,"_defaultDrawingOptions",null);let cP=ea;var qr,ui,Vh,Ku,Uh,l0,Xu,Bm,Fl,ya,u0,rr,xb,_b,UE,zE,jE,dP,qE,MW;class hP extends Fr{constructor(t){super({...t,name:"stampEditor"});L(this,rr);L(this,qr,null);L(this,ui,null);L(this,Vh,null);L(this,Ku,null);L(this,Uh,null);L(this,l0,"");L(this,Xu,null);L(this,Bm,!1);L(this,Fl,null);L(this,ya,!1);L(this,u0,!1);k(this,Ku,t.bitmapUrl),k(this,Uh,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){Fr.initialize(t,n)}static isHandlingMimeForPasting(t){return YM.includes(t)}static paste(t,n){n.pasteEditor({mode:Dt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,l=await i.guess({name:"altText",request:{data:s,width:a,height:o,channels:s.length/(a*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),n&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;m(this,ui)&&(k(this,qr,null),this._uiManager.imageManager.deleteId(m(this,ui)),(t=m(this,Xu))==null||t.remove(),k(this,Xu,null),m(this,Fl)&&(clearTimeout(m(this,Fl)),k(this,Fl,null))),super.remove()}rebuild(){if(!this.parent){m(this,ui)&&z(this,rr,UE).call(this);return}super.rebuild(),this.div!==null&&(m(this,ui)&&m(this,Xu)===null&&z(this,rr,UE).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(m(this,Vh)||m(this,qr)||m(this,Ku)||m(this,Uh)||m(this,ui)||m(this,Bm))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),m(this,Bm)||(m(this,qr)?z(this,rr,zE).call(this):z(this,rr,UE).call(this)),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:i,bitmap:s}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(k(this,ui,i),s&&k(this,qr,s),k(this,Bm,!1),z(this,rr,zE).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;m(this,Fl)!==null&&clearTimeout(m(this,Fl)),k(this,Fl,setTimeout(()=>{k(this,Fl,null),z(this,rr,dP).call(this)},200))}copyCanvas(t,n,i=!1){t||(t=224);const{width:s,height:a}=m(this,qr),o=new Zl;let l=m(this,qr),u=s,c=a,h=null;if(n){if(s>n||a>n){const S=Math.min(n/s,n/a);u=Math.floor(s*S),c=Math.floor(a*S)}h=document.createElement("canvas");const f=h.width=Math.ceil(u*o.sx),p=h.height=Math.ceil(c*o.sy);m(this,ya)||(l=z(this,rr,jE).call(this,f,p));const g=h.getContext("2d");g.filter=this._uiManager.hcmFilter;let b="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":vhe.isDarkMode&&(b="#8f8f9d",v="#42414d");const w=15,y=w*o.sx,A=w*o.sy,x=new OffscreenCanvas(y*2,A*2),_=x.getContext("2d");_.fillStyle=b,_.fillRect(0,0,y*2,A*2),_.fillStyle=v,_.fillRect(0,0,y,A),_.fillRect(y,A,y,A),g.fillStyle=g.createPattern(x,"repeat"),g.fillRect(0,0,f,p),g.drawImage(l,0,0,l.width,l.height,0,0,f,p)}let d=null;if(i){let f,p;if(o.symmetric&&l.width<t&&l.height<t)f=l.width,p=l.height;else if(l=m(this,qr),s>t||a>t){const v=Math.min(t/s,t/a);f=Math.floor(s*v),p=Math.floor(a*v),m(this,ya)||(l=z(this,rr,jE).call(this,f,p))}const b=new OffscreenCanvas(f,p).getContext("2d",{willReadFrequently:!0});b.drawImage(l,0,0,l.width,l.height,0,0,f,p),d={width:f,height:p,data:b.getImageData(0,0,f,p).data}}return{canvas:h,width:u,height:c,imageData:d}}static async deserialize(t,n,i){var b;let s=null,a=!1;if(t instanceof GG){const{data:{rect:v,rotation:w,id:y,structParent:A,popupRef:x,richText:_,contentsObj:S,creationDate:E,modificationDate:C},container:N,parent:{page:{pageNumber:D}},canvas:M}=t;let I,V;M?(delete t.canvas,{id:I,bitmap:V}=i.imageManager.getFromCanvas(N.id,M),M.remove()):(a=!0,t._hasNoCanvas=!0);const K=((b=await n._structTree.getAriaAttributes(`${yg}${y}`))==null?void 0:b.get("aria-label"))||"";s=t={annotationType:Dt.STAMP,bitmapId:I,bitmap:V,pageIndex:D-1,rect:v.slice(0),rotation:w,annotationElementId:y,id:y,deleted:!1,accessibilityData:{decorative:!1,altText:K},isSvg:!1,structParent:A,popupRef:x,richText:_,comment:(S==null?void 0:S.str)||null,creationDate:E,modificationDate:C}}const o=await super.deserialize(t,n,i),{rect:l,bitmap:u,bitmapUrl:c,bitmapId:h,isSvg:d,accessibilityData:f}=t;a?(i.addMissingCanvas(t.id,o),k(o,Bm,!0)):h&&i.imageManager.isValidId(h)?(k(o,ui,h),u&&k(o,qr,u)):k(o,Ku,c),k(o,ya,d);const[p,g]=o.pageDimensions;return o.width=(l[2]-l[0])/p,o.height=(l[3]-l[1])/g,f&&(o.altTextData=f),o._initialData=s,t.comment&&o.setCommentData(t),k(o,u0,!!s),o}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(t),{bitmapId:m(this,ui),isSvg:m(this,ya)});if(this.addComment(i),t)return i.bitmapUrl=z(this,rr,qE).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:s,altText:a}=this.serializeAltText(!1);if(!s&&a&&(i.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const l=z(this,rr,MW).call(this,i);return l.isSame?null:(l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(n===null)return i;n.stamps||(n.stamps=new Map);const o=m(this,ya)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(m(this,ui)))n.stamps.set(m(this,ui),{area:o,serialized:i}),i.bitmap=z(this,rr,qE).call(this,!1);else if(m(this,ya)){const l=n.stamps.get(m(this,ui));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=z(this,rr,qE).call(this,!1))}return i}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}qr=new WeakMap,ui=new WeakMap,Vh=new WeakMap,Ku=new WeakMap,Uh=new WeakMap,l0=new WeakMap,Xu=new WeakMap,Bm=new WeakMap,Fl=new WeakMap,ya=new WeakMap,u0=new WeakMap,rr=new WeakSet,xb=function(t,n=!1){if(!t){this.remove();return}k(this,qr,t.bitmap),n||(k(this,ui,t.id),k(this,ya,t.isSvg)),t.file&&k(this,l0,t.file.name),z(this,rr,zE).call(this)},_b=function(){if(k(this,Vh,null),this._uiManager.enableWaiting(!1),!!m(this,Xu)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&m(this,qr)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&m(this,qr)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},UE=function(){if(m(this,ui)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(m(this,ui)).then(i=>z(this,rr,xb).call(this,i,!0)).finally(()=>z(this,rr,_b).call(this));return}if(m(this,Ku)){const i=m(this,Ku);k(this,Ku,null),this._uiManager.enableWaiting(!0),k(this,Vh,this._uiManager.imageManager.getFromUrl(i).then(s=>z(this,rr,xb).call(this,s)).finally(()=>z(this,rr,_b).call(this)));return}if(m(this,Uh)){const i=m(this,Uh);k(this,Uh,null),this._uiManager.enableWaiting(!0),k(this,Vh,this._uiManager.imageManager.getFromFile(i).then(s=>z(this,rr,xb).call(this,s)).finally(()=>z(this,rr,_b).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=YM.join(",");const n=this._uiManager._signal;k(this,Vh,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),z(this,rr,xb).call(this,s)}i()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>z(this,rr,_b).call(this))),t.click()},zE=function(){var u;const{div:t}=this;let{width:n,height:i}=m(this,qr);const[s,a]=this.pageDimensions,o=.75;if(this.width)n=this.width*s,i=this.height*a;else if(n>o*s||i>o*a){const c=Math.min(o*s/n,o*a/i);n*=c,i*=c}this._uiManager.enableWaiting(!1);const l=k(this,Xu,document.createElement("canvas"));l.setAttribute("role","img"),this.addContainer(l),this.width=n/s,this.height=i/a,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),z(this,rr,dP).call(this),m(this,u0)||(this.parent.addUndoableEditor(this),k(this,u0,!0)),this._reportTelemetry({action:"inserted_image"}),m(this,l0)&&this.div.setAttribute("aria-description",m(this,l0)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},jE=function(t,n){const{width:i,height:s}=m(this,qr);let a=i,o=s,l=m(this,qr);for(;a>2*t||o>2*n;){const u=a,c=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*n&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const h=new OffscreenCanvas(a,o);h.getContext("2d").drawImage(l,0,0,u,c,0,0,a,o),l=h.transferToImageBitmap()}return l},dP=function(){const[t,n]=this.parentDimensions,{width:i,height:s}=this,a=new Zl,o=Math.ceil(i*t*a.sx),l=Math.ceil(s*n*a.sy),u=m(this,Xu);if(!u||u.width===o&&u.height===l)return;u.width=o,u.height=l;const c=m(this,ya)?m(this,qr):z(this,rr,jE).call(this,o,l),h=u.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(c,0,0,c.width,c.height,0,0,o,l)},qE=function(t){if(t){if(m(this,ya)){const s=this._uiManager.imageManager.getSvgUrl(m(this,ui));if(s)return s}const n=document.createElement("canvas");return{width:n.width,height:n.height}=m(this,qr),n.getContext("2d").drawImage(m(this,qr),0,0),n.toDataURL()}if(m(this,ya)){const[n,i]=this.pageDimensions,s=Math.round(this.width*n*Sd.PDF_TO_CSS_UNITS),a=Math.round(this.height*i*Sd.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(s,a);return o.getContext("2d").drawImage(m(this,qr),0,0,m(this,qr).width,m(this,qr).height,0,0,s,a),o.transferToImageBitmap()}return structuredClone(m(this,qr))},MW=function(t){var o;const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,s=t.pageIndex===n,a=(((o=t.accessibilityData)==null?void 0:o.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}},Pe(hP,"_type","stamp"),Pe(hP,"_editorType",Dt.STAMP);var Lm,c0,zh,jh,Yu,Ls,qh,h0,d0,Lo,Qu,ci,Ju,Hh,f0,rt,Gh,Nr,mP,IW,hl,pP,gP,HE;const To=class To{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:i,accessibilityManager:s,annotationLayer:a,drawLayer:o,textLayer:l,viewport:u,l10n:c}){L(this,Nr);L(this,Lm);L(this,c0,!1);L(this,zh,null);L(this,jh,null);L(this,Yu,null);L(this,Ls,new Map);L(this,qh,!1);L(this,h0,!1);L(this,d0,!1);L(this,Lo,null);L(this,Qu,null);L(this,ci,null);L(this,Ju,null);L(this,Hh,null);L(this,f0,-1);L(this,rt);const h=[...m(To,Gh).values()];if(!To._initialized){To._initialized=!0;for(const d of h)d.initialize(c,e)}e.registerEditorTypes(h),k(this,rt,e),this.pageIndex=t,this.div=n,k(this,Lm,s),k(this,zh,a),this.viewport=u,k(this,ci,l),this.drawLayer=o,this._structTree=i,m(this,rt).addLayer(this)}get isEmpty(){return m(this,Ls).size===0}get isInvisible(){return this.isEmpty&&m(this,rt).getMode()===Dt.NONE}updateToolbar(e){m(this,rt).updateToolbar(e)}updateMode(e=m(this,rt).getMode()){switch(z(this,Nr,HE).call(this),e){case Dt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Dt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Dt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Dt.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of m(To,Gh).values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=m(this,ci))==null?void 0:t.div)}setEditingState(e){m(this,rt).setEditingState(e)}addCommands(e){m(this,rt).addCommands(e)}cleanUndoStack(e){m(this,rt).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=m(this,zh))==null||t.togglePointerEvents(e)}async enable(){var n;k(this,d0,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=m(this,Hh))==null||n.abort(),k(this,Hh,null);const e=new Set;for(const i of m(this,Nr,mP))i.enableEditing(),i.show(!0),i.annotationElementId&&(m(this,rt).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const t=m(this,zh);if(t)for(const i of t.getEditableAnnotations()){if(i.hide(),m(this,rt).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}k(this,d0,!1),m(this,rt)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var i;if(k(this,h0,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),m(this,ci)&&!m(this,Hh)){k(this,Hh,new AbortController);const s=m(this,rt).combinedSignal(m(this,Hh));m(this,ci).div.addEventListener("pointerdown",a=>{const{clientX:l,clientY:u,timeStamp:c}=a,h=m(this,f0);if(c-h>500){k(this,f0,c);return}k(this,f0,-1);const{classList:d}=this.div;d.toggle("getElements",!0);const f=document.elementsFromPoint(l,u);if(d.toggle("getElements",!1),!this.div.contains(f[0]))return;let p;const g=new RegExp(`^${N1}[0-9]+$`);for(const v of f)if(g.test(v.id)){p=v.id;break}if(!p)return;const b=m(this,Ls).get(p);(b==null?void 0:b.annotationElementId)===null&&(a.stopPropagation(),a.preventDefault(),b.dblclick(a))},{signal:s,capture:!0})}const e=m(this,zh),t=[];if(e){const s=new Map,a=new Map;for(const l of m(this,Nr,mP)){if(l.disableEditing(),!l.annotationElementId){t.push(l);continue}if(l.serialize()!==null){s.set(l.annotationElementId,l);continue}else a.set(l.annotationElementId,l);(i=this.getEditableAnnotation(l.annotationElementId))==null||i.show(),l.remove()}const o=e.getEditableAnnotations();for(const l of o){const{id:u}=l.data;if(m(this,rt).isDeletedAnnotationElement(u)){l.updateEdited({deleted:!0});continue}let c=a.get(u);if(c){c.resetAnnotationElement(l),c.show(!1),l.show();continue}c=s.get(u),c&&(m(this,rt).addChangedExistingAnnotation(c),c.renderAnnotationElement(l)&&c.show(!1)),l.show()}}z(this,Nr,HE).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const s of m(To,Gh).values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e==null||e.updateFakeAnnotations(t),k(this,h0,!1)}getEditableAnnotation(e){var t;return((t=m(this,zh))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){m(this,rt).getActive()!==e&&m(this,rt).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=m(this,ci))!=null&&e.div&&!m(this,Ju)){k(this,Ju,new AbortController);const t=m(this,rt).combinedSignal(m(this,Ju));m(this,ci).div.addEventListener("pointerdown",z(this,Nr,IW).bind(this),{signal:t}),m(this,ci).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=m(this,ci))!=null&&e.div&&m(this,Ju)&&(m(this,Ju).abort(),k(this,Ju,null),m(this,ci).div.classList.remove("highlighting"))}enableClick(){if(m(this,jh))return;k(this,jh,new AbortController);const e=m(this,rt).combinedSignal(m(this,jh));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=m(this,jh))==null||e.abort(),k(this,jh,null)}attach(e){m(this,Ls).set(e.id,e);const{annotationElementId:t}=e;t&&m(this,rt).isDeletedAnnotationElement(t)&&m(this,rt).removeDeletedAnnotationElement(e)}detach(e){var t;m(this,Ls).delete(e.id),(t=m(this,Lm))==null||t.removePointerInTextLayer(e.contentDiv),!m(this,h0)&&e.annotationElementId&&m(this,rt).addDeletedAnnotationElement(e)}remove(e){this.detach(e),m(this,rt).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(m(this,rt).addDeletedAnnotationElement(e),Fr.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),m(this,rt).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!m(this,d0)),m(this,rt).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!m(this,Yu)&&(e._focusEventsAllowed=!1,k(this,Yu,setTimeout(()=>{k(this,Yu,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:m(this,rt)._signal}),t.focus())},0))),e._structTreeParentId=(n=m(this,Lm))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(const t of m(this,Ls).values())if(t.uid===e)return t;return null}getNextId(){return m(this,rt).getId()}combinedSignal(e){return m(this,rt).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=m(this,Nr,hl))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await m(this,rt).updateMode(e.mode);const{offsetX:n,offsetY:i}=z(this,Nr,gP).call(this),s=this.getNextId(),a=z(this,Nr,pP).call(this,{parent:this,id:s,x:n,y:i,uiManager:m(this,rt),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=m(To,Gh).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,m(this,rt)))||null}createAndAddNewEditor(e,t,n={}){const i=this.getNextId(),s=z(this,Nr,pP).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:m(this,rt),isCentered:t,...n});return s&&this.add(s),s}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(z(this,Nr,gP).call(this),!0,e)}setSelected(e){m(this,rt).setSelected(e)}toggleSelected(e){m(this,rt).toggleSelected(e)}unselect(e){m(this,rt).unselect(e)}pointerup(e){var i;const{isMac:t}=Ri.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!m(this,qh)||(k(this,qh,!1),(i=m(this,Nr,hl))!=null&&i.isDrawer&&m(this,Nr,hl).supportMultipleDrawings))return;if(!m(this,c0)){k(this,c0,!0);return}const n=m(this,rt).getMode();if(n===Dt.STAMP||n===Dt.SIGNATURE){m(this,rt).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(m(this,rt).getMode()===Dt.HIGHLIGHT&&this.enableTextSelection(),m(this,qh)){k(this,qh,!1);return}const{isMac:t}=Ri.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(k(this,qh,!0),(i=m(this,Nr,hl))!=null&&i.isDrawer){this.startDrawingSession(e);return}const n=m(this,rt).getActive();k(this,c0,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),m(this,Lo)){m(this,Nr,hl).startDrawing(this,m(this,rt),!1,e);return}m(this,rt).setCurrentDrawingSession(this),k(this,Lo,new AbortController);const t=m(this,rt).combinedSignal(m(this,Lo));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(k(this,Qu,null),this.commitOrRemove())},{signal:t}),m(this,Nr,hl).startDrawing(this,m(this,rt),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&k(this,Qu,t);return}m(this,Qu)&&setTimeout(()=>{var t;(t=m(this,Qu))==null||t.focus(),k(this,Qu,null)},0)}endDrawingSession(e=!1){return m(this,Lo)?(m(this,rt).setCurrentDrawingSession(null),m(this,Lo).abort(),k(this,Lo,null),k(this,Qu,null),m(this,Nr,hl).endDrawing(e)):null}findNewParent(e,t,n){const i=m(this,rt).findParent(t,n);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return m(this,Lo)?(this.endDrawingSession(),!0):!1}onScaleChanging(){m(this,Lo)&&m(this,Nr,hl).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=m(this,rt).getActive())==null?void 0:e.parent)===this&&(m(this,rt).commitOrRemove(),m(this,rt).setActiveEditor(null)),m(this,Yu)&&(clearTimeout(m(this,Yu)),k(this,Yu,null));for(const n of m(this,Ls).values())(t=m(this,Lm))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,m(this,Ls).clear(),m(this,rt).removeLayer(this)}render({viewport:e}){this.viewport=e,np(this.div,e);for(const t of m(this,rt).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){m(this,rt).commitOrRemove(),z(this,Nr,HE).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,np(this.div,{rotation:n}),t!==n)for(const i of m(this,Ls).values())i.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return m(this,rt).viewParameters.realScale}};Lm=new WeakMap,c0=new WeakMap,zh=new WeakMap,jh=new WeakMap,Yu=new WeakMap,Ls=new WeakMap,qh=new WeakMap,h0=new WeakMap,d0=new WeakMap,Lo=new WeakMap,Qu=new WeakMap,ci=new WeakMap,Ju=new WeakMap,Hh=new WeakMap,f0=new WeakMap,rt=new WeakMap,Gh=new WeakMap,Nr=new WeakSet,mP=function(){return m(this,Ls).size!==0?m(this,Ls).values():m(this,rt).getEditors(this.pageIndex)},IW=function(e){m(this,rt).unselectAll();const{target:t}=e;if(t===m(this,ci).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&m(this,ci).div.contains(t)){const{isMac:n}=Ri.platform;if(e.button!==0||e.ctrlKey&&n)return;m(this,rt).showAllEditors("highlight",!0,!0),m(this,ci).div.classList.add("free"),this.toggleDrawing(),JS.startHighlighting(this,m(this,rt).direction==="ltr",{target:m(this,ci).div,x:e.x,y:e.y}),m(this,ci).div.addEventListener("pointerup",()=>{m(this,ci).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:m(this,rt)._signal}),e.preventDefault()}},hl=function(){return m(To,Gh).get(m(this,rt).getMode())},pP=function(e){const t=m(this,Nr,hl);return t?new t.prototype.constructor(e):null},gP=function(){const{x:e,y:t,width:n,height:i}=this.boundingClientRect,s=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+n),l=Math.min(window.innerHeight,t+i),u=(s+o)/2-e,c=(a+l)/2-t,[h,d]=this.viewport.rotation%180===0?[u,c]:[c,u];return{offsetX:h,offsetY:d}},HE=function(){for(const e of m(this,Ls).values())e.isEmpty()&&e.remove()},Pe(To,"_initialized",!1),L(To,Gh,new Map([KI,iP,hP,JS,cP].map(e=>[e._editorType,e])));let fP=To;var $o,ds,$m,Nx,eC,PW,ru,yP,RW,bP;const Vn=class Vn{constructor({pageIndex:e}){L(this,ru);L(this,$o,null);L(this,ds,new Map);L(this,$m,new Map);this.pageIndex=e}setParent(e){if(!m(this,$o)){k(this,$o,e);return}if(m(this,$o)!==e){if(m(this,ds).size>0)for(const t of m(this,ds).values())t.remove(),e.append(t);k(this,$o,e)}}static get _svgFactory(){return Et(this,"_svgFactory",new YS)}draw(e,t=!1,n=!1){const i=Ln(Vn,Nx)._++,s=z(this,ru,yP).call(this),a=Vn._svgFactory.createElement("defs");s.append(a);const o=Vn._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t&&m(this,$m).set(i,o);const u=n?z(this,ru,RW).call(this,a,l):null,c=Vn._svgFactory.createElement("use");return s.append(c),c.setAttribute("href",`#${l}`),this.updateProperties(s,e),m(this,ds).set(i,s),{id:i,clipPathId:`url(#${u})`}}drawOutline(e,t){const n=Ln(Vn,Nx)._++,i=z(this,ru,yP).call(this),s=Vn._svgFactory.createElement("defs");i.append(s);const a=Vn._svgFactory.createElement("path");s.append(a);const o=`path_p${this.pageIndex}_${n}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const h=Vn._svgFactory.createElement("mask");s.append(h),l=`mask_p${this.pageIndex}_${n}`,h.setAttribute("id",l),h.setAttribute("maskUnits","objectBoundingBox");const d=Vn._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const f=Vn._svgFactory.createElement("use");h.append(f),f.setAttribute("href",`#${o}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const u=Vn._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${o}`),l&&u.setAttribute("mask",`url(#${l})`);const c=u.cloneNode();return i.append(c),u.classList.add("mainOutline"),c.classList.add("secondaryOutline"),this.updateProperties(i,e),m(this,ds).set(n,i),n}finalizeDraw(e,t){m(this,$m).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:n,bbox:i,rootClass:s,path:a}=t,o=typeof e=="number"?m(this,ds).get(e):e;if(o){if(n&&z(this,ru,bP).call(this,o,n),i&&z(l=Vn,eC,PW).call(l,o,i),s){const{classList:u}=o;for(const[c,h]of Object.entries(s))u.toggle(c,h)}if(a){const c=o.firstElementChild.firstElementChild;z(this,ru,bP).call(this,c,a)}}}updateParent(e,t){if(t===this)return;const n=m(this,ds).get(e);n&&(m(t,$o).append(n),m(this,ds).delete(e),m(t,ds).set(e,n))}remove(e){m(this,$m).delete(e),m(this,$o)!==null&&(m(this,ds).get(e).remove(),m(this,ds).delete(e))}destroy(){k(this,$o,null);for(const e of m(this,ds).values())e.remove();m(this,ds).clear(),m(this,$m).clear()}};$o=new WeakMap,ds=new WeakMap,$m=new WeakMap,Nx=new WeakMap,eC=new WeakSet,PW=function(e,[t,n,i,s]){const{style:a}=e;a.top=`${100*n}%`,a.left=`${100*t}%`,a.width=`${100*i}%`,a.height=`${100*s}%`},ru=new WeakSet,yP=function(){const e=Vn._svgFactory.create(1,1,!0);return m(this,$o).append(e),e.setAttribute("aria-hidden",!0),e},RW=function(e,t){const n=Vn._svgFactory.createElement("clipPath");e.append(n);const i=`clip_${t}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const s=Vn._svgFactory.createElement("use");return n.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),i},bP=function(e,t){for(const[n,i]of Object.entries(t))i===null?e.removeAttribute(n):e.setAttribute(n,i)},L(Vn,eC),L(Vn,Nx,0);let vP=Vn;globalThis._pdfjsTestingUtils={HighlightOutliner:YI};globalThis.pdfjsLib={AbortException:Ed,AnnotationEditorLayer:fP,AnnotationEditorParamsType:Kt,AnnotationEditorType:Dt,AnnotationEditorUIManager:ip,AnnotationLayer:GI,AnnotationMode:Qc,AnnotationType:Nn,applyOpacity:bhe,build:Tde,ColorPicker:KS,createValidAbsoluteUrl:AH,CSSConstants:yhe,DOMSVGFactory:YS,DrawLayer:vP,FeatureTest:Ri,fetchData:e_,findContrastColor:whe,getDocument:IG,getFilenameFromUrl:dhe,getPdfFilenameFromUrl:fhe,getRGB:r_,getUuid:TH,getXfaPageViewport:phe,GlobalWorkerOptions:Bl,ImageKind:dE,InvalidPDFException:KM,isDataScheme:GC,isPdfFile:wF,isValidExplicitDest:Mhe,MathClamp:ms,noContextMenu:vo,normalizeUnicode:uhe,OPS:D1,OutputScale:Zl,PasswordResponses:ehe,PDFDataRangeTransport:PG,PDFDateString:zS,PDFWorker:P1,PermissionFlag:Zce,PixelsPerInch:Sd,RenderingCancelledException:bF,renderRichText:DH,ResponseException:US,setLayerDimensions:np,shadow:Et,SignatureExtractor:Zu,stopEvent:dn,SupportedImageMimeTypes:YM,TextLayer:I1,TouchManager:qS,updateUrlHash:EH,Util:Ze,VerbosityLevel:jC,version:Sde,XfaLayer:NH};Bl.workerSrc="/1201-project/pdf.worker.min.js";const Yde="",Qde="https://api-inference.huggingface.co/models/facebook/bart-large-cnn";async function Jde(r){try{const e=await r.arrayBuffer(),t=await IG({data:e}).promise;let n="";const i=Math.min(t.numPages,15);console.log(`PDF  : ${t.numPages},  : ${i}`);for(let s=1;s<=i;s++)try{const o=await(await t.getPage(s)).getTextContent();let l="";for(const u of o.items)u.str&&u.str.trim()&&(l+=u.str+" ");l.trim()&&(n+=l+`
`,console.log(` ${s}   (${l.length})`))}catch(a){console.warn(` ${s}  :`,a);continue}if(!n.trim())throw new Error("PDF    .   PDF  .");return console.log(`  : ${n.length}`),n}catch(e){throw console.error("PDF   :",e),new Error("PDF   : "+e.message)}}async function Zde(r){var e;try{const n=r.substring(0,1024),i=await fetch(Qde,{headers:{Authorization:`Bearer ${Yde}`},method:"POST",body:JSON.stringify({inputs:n})});if(!i.ok)throw new Error(`API : ${i.status}`);const s=await i.json();if(Array.isArray(s)&&((e=s[0])!=null&&e.summary_text))return s[0].summary_text;throw new Error("  ")}catch(t){throw console.error("AI  :",t),t}}function efe(r){const e=r.match(/[^.!?]+[.!?]+/g)||[],t=["","","","","","",""];return e.map((s,a)=>{let o=t.reduce((l,u)=>l+(s.toLowerCase().includes(u)?1:0),0);return o+=1/(a+1),{sentence:s.trim(),score:o}}).sort((s,a)=>a.score-s.score).slice(0,3).map(s=>s.sentence).join(" ")||"  "}async function tfe(r){try{return{summary:await Zde(r),method:"AI"}}catch(e){return console.warn("AI  ,    :",e),{summary:efe(r),method:"Rule-based"}}}var rfe="firebase",nfe="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jl(rfe,nfe,"app");function kW(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ife=kW,FW=new Lx("auth","Firebase",kW());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT=new Ck("@firebase/auth");function sfe(r,...e){eT.logLevel<=qt.WARN&&eT.warn(`Auth (${fp}): ${r}`,...e)}function GE(r,...e){eT.logLevel<=qt.ERROR&&eT.error(`Auth (${fp}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(r,...e){throw NF(r,...e)}function Kl(r,...e){return NF(r,...e)}function OW(r,e,t){const n={...ife(),[e]:t};return new Lx("auth","Firebase",n).create(e,{appName:r.name})}function lc(r){return OW(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function NF(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return FW.create(r,...e)}function ft(r,e,...t){if(!r)throw NF(e,...t)}function rc(r){const e="INTERNAL ASSERTION FAILED: "+r;throw GE(e),new Error(e)}function Ec(r,e){r||rc(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function afe(){return E5()==="http:"||E5()==="https:"}function E5(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ofe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(afe()||Aae()||"connection"in navigator)?navigator.onLine:!0}function lfe(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ec(t>e,"Short delay should be less than long delay!"),this.isMobile=wae()||Eae()}get(){return ofe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DF(r,e){Ec(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ufe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cfe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hfe=new a_(3e4,6e4);function Ld(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function $d(r,e,t,n,i={}){return LW(r,i,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const o=$x({key:r.config.apiKey,...a}).slice(1),l=await r._getAdditionalHeaders();l["Content-Type"]="application/json",r.languageCode&&(l["X-Firebase-Locale"]=r.languageCode);const u={method:e,headers:l,...s};return _ae()||(u.referrerPolicy="no-referrer"),r.emulatorConfig&&dp(r.emulatorConfig.host)&&(u.credentials="include"),BW.fetch()(await $W(r,r.config.apiHost,t,o),u)})}async function LW(r,e,t){r._canInitEmulator=!1;const n={...ufe,...e};try{const i=new ffe(r),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw wA(r,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw wA(r,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw wA(r,"email-already-in-use",a);if(l==="USER_DISABLED")throw wA(r,"user-disabled",a);const c=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw OW(r,c,u);Qo(r,c)}}catch(i){if(i instanceof iu)throw i;Qo(r,"network-request-failed",{message:String(i)})}}async function o_(r,e,t,n,i={}){const s=await $d(r,e,t,n,i);return"mfaPendingCredential"in s&&Qo(r,"multi-factor-auth-required",{_serverResponse:s}),s}async function $W(r,e,t,n){const i=`${e}${t}?${n}`,s=r,a=s.config.emulator?DF(r.config,i):`${r.config.apiScheme}://${i}`;return cfe.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function dfe(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ffe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Kl(this.auth,"network-request-failed")),hfe.get())})}}function wA(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const i=Kl(r,e,n);return i.customData._tokenResponse=t,i}function S5(r){return r!==void 0&&r.enterprise!==void 0}class mfe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return dfe(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function pfe(r,e){return $d(r,"GET","/v2/recaptchaConfig",Ld(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gfe(r,e){return $d(r,"POST","/v1/accounts:delete",e)}async function tT(r,e){return $d(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vfe(r,e=!1){const t=Tn(r),n=await t.getIdToken(e),i=MF(n);ft(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:n,authTime:qb(q2(i.auth_time)),issuedAtTime:qb(q2(i.iat)),expirationTime:qb(q2(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function q2(r){return Number(r)*1e3}function MF(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return GE("JWT malformed, contained fewer than 3 sections"),null;try{const i=kj(t);return i?JSON.parse(i):(GE("Failed to decode base64 JWT payload"),null)}catch(i){return GE("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function T5(r){const e=MF(r);return ft(e,"internal-error"),ft(typeof e.exp<"u","internal-error"),ft(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R1(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof iu&&yfe(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function yfe({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bfe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qb(this.lastLoginAt),this.creationTime=qb(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rT(r){var h;const e=r.auth,t=await r.getIdToken(),n=await R1(r,tT(e,{idToken:t}));ft(n==null?void 0:n.users.length,e,"internal-error");const i=n.users[0];r._notifyReloadListener(i);const s=(h=i.providerUserInfo)!=null&&h.length?VW(i.providerUserInfo):[],a=xfe(r.providerData,s),o=r.isAnonymous,l=!(r.email&&i.passwordHash)&&!(a!=null&&a.length),u=o?l:!1,c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new xP(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(r,c)}async function wfe(r){const e=Tn(r);await rT(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xfe(r,e){return[...r.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function VW(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _fe(r,e){const t=await LW(r,{},async()=>{const n=$x({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=r.config,a=await $W(r,i,"/v1/token",`key=${s}`),o=await r._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return r.emulatorConfig&&dp(r.emulatorConfig.host)&&(l.credentials="include"),BW.fetch()(a,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Afe(r,e){return $d(r,"POST","/v2/accounts:revokeToken",Ld(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ft(e.idToken,"internal-error"),ft(typeof e.idToken<"u","internal-error"),ft(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):T5(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ft(e.length!==0,"internal-error");const t=T5(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ft(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await _fe(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:s}=t,a=new Bg;return n&&(ft(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(ft(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(ft(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bg,this.toJSON())}_performRefresh(){return rc("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(r,e){ft(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class jo{constructor({uid:e,auth:t,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new bfe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new xP(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await R1(this,this.stsTokenManager.getToken(this.auth,e));return ft(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return vfe(this,e)}reload(){return wfe(this)}_assign(e){this!==e&&(ft(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new jo({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ft(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await rT(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ea(this.auth.app))return Promise.reject(lc(this.auth));const e=await this.getIdToken();return await R1(this,gfe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,o=t.tenantId??void 0,l=t._redirectEventId??void 0,u=t.createdAt??void 0,c=t.lastLoginAt??void 0,{uid:h,emailVerified:d,isAnonymous:f,providerData:p,stsTokenManager:g}=t;ft(h&&g,e,"internal-error");const b=Bg.fromJSON(this.name,g);ft(typeof h=="string",e,"internal-error"),Uc(n,e.name),Uc(i,e.name),ft(typeof d=="boolean",e,"internal-error"),ft(typeof f=="boolean",e,"internal-error"),Uc(s,e.name),Uc(a,e.name),Uc(o,e.name),Uc(l,e.name),Uc(u,e.name),Uc(c,e.name);const v=new jo({uid:h,auth:e,email:i,emailVerified:d,displayName:n,isAnonymous:f,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:b,createdAt:u,lastLoginAt:c});return p&&Array.isArray(p)&&(v.providerData=p.map(w=>({...w}))),l&&(v._redirectEventId=l),v}static async _fromIdTokenResponse(e,t,n=!1){const i=new Bg;i.updateFromServerResponse(t);const s=new jo({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await rT(s),s}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];ft(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?VW(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new Bg;o.updateFromIdToken(n);const l=new jo({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new xP(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5=new Map;function nc(r){Ec(r instanceof Function,"Expected a class definition");let e=C5.get(r);return e?(Ec(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,C5.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UW{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}UW.type="NONE";const N5=UW;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(r,e,t){return`firebase:${r}:${e}:${t}`}class Lg{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=WE(this.userKey,i.apiKey,s),this.fullPersistenceKey=WE("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await tT(this.auth,{idToken:e}).catch(()=>{});return t?jo._fromGetAccountInfoResponse(this.auth,t,e):null}return jo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Lg(nc(N5),e,n);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||nc(N5);const a=WE(n,e.config.apiKey,e.name);let o=null;for(const u of t)try{const c=await u._get(a);if(c){let h;if(typeof c=="string"){const d=await tT(e,{idToken:c}).catch(()=>{});if(!d)break;h=await jo._fromGetAccountInfoResponse(e,d,c)}else h=jo._fromJSON(e,c);u!==s&&(o=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Lg(s,e,n):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new Lg(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D5(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HW(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zW(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(WW(e))return"Blackberry";if(KW(e))return"Webos";if(jW(e))return"Safari";if((e.includes("chrome/")||qW(e))&&!e.includes("edge/"))return"Chrome";if(GW(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function zW(r=rs()){return/firefox\//i.test(r)}function jW(r=rs()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qW(r=rs()){return/crios\//i.test(r)}function HW(r=rs()){return/iemobile/i.test(r)}function GW(r=rs()){return/android/i.test(r)}function WW(r=rs()){return/blackberry/i.test(r)}function KW(r=rs()){return/webos/i.test(r)}function IF(r=rs()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Efe(r=rs()){var e;return IF(r)&&!!((e=window.navigator)!=null&&e.standalone)}function Sfe(){return Sae()&&document.documentMode===10}function XW(r=rs()){return IF(r)||GW(r)||KW(r)||WW(r)||/windows phone/i.test(r)||HW(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YW(r,e=[]){let t;switch(r){case"Browser":t=D5(rs());break;case"Worker":t=`${D5(rs())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fp}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tfe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cfe(r,e={}){return $d(r,"GET","/v2/passwordPolicy",Ld(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nfe=6;class Dfe{constructor(e){var n;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Nfe,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mfe{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new M5(this),this.idTokenSubscription=new M5(this),this.beforeStateQueue=new Tfe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FW,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=nc(t)),this._initializationPromise=this.queue(async()=>{var n,i,s;if(!this._deleted&&(this.persistenceManager=await Lg.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await tT(this,{idToken:e}),n=await jo._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Ea(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=n==null?void 0:n._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(n=l.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return ft(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await rT(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lfe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ea(this.app))return Promise.reject(lc(this));const t=e?Tn(e):null;return t&&ft(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ft(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ea(this.app)?Promise.reject(lc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ea(this.app)?Promise.reject(lc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(nc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Cfe(this),t=new Dfe(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Lx("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await Afe(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&nc(e)||this._popupRedirectResolver;ft(t,this,"argument-error"),this.redirectPersistenceManager=await Lg.create(this,[nc(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ft(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,n,i);return()=>{a=!0,l()}}else{const l=e.addObserver(t);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ft(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YW(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var t;if(Ea(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&sfe(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function yp(r){return Tn(r)}class M5{constructor(e){this.auth=e,this.observer=null,this.addObserver=Rae(t=>this.observer=t)}get next(){return ft(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let XC={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ife(r){XC=r}function QW(r){return XC.loadJS(r)}function Pfe(){return XC.recaptchaEnterpriseScript}function Rfe(){return XC.gapiScript}function kfe(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Ffe{constructor(){this.enterprise=new Ofe}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ofe{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Bfe="recaptcha-enterprise",JW="NO_RECAPTCHA";class Lfe{constructor(e){this.type=Bfe,this.auth=yp(e)}async verify(e="verify",t=!1){async function n(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{pfe(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new mfe(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,a(u.siteKey)}}).catch(l=>{o(l)})})}function i(s,a,o){const l=window.grecaptcha;S5(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{a(u)}).catch(()=>{a(JW)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Ffe().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{n(this.auth).then(o=>{if(!t&&S5(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Pfe();l.length!==0&&(l+=o),QW(l).then(()=>{i(o,s,a)}).catch(u=>{a(u)})}}).catch(o=>{a(o)})})}}async function I5(r,e,t,n=!1,i=!1){const s=new Lfe(r);let a;if(i)a=JW;else try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const o={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function _P(r,e,t,n,i){var s;if((s=r._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await I5(r,e,t,t==="getOobCode");return n(r,a)}else return n(r,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await I5(r,e,t,t==="getOobCode");return n(r,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $fe(r,e){const t=AC(r,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Zm(s,e??{}))return i;Qo(i,"already-initialized")}return t.initialize({options:e})}function Vfe(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(nc);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function Ufe(r,e,t){const n=yp(r);ft(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,s=ZW(e),{host:a,port:o}=zfe(e),l=o===null?"":`:${o}`,u={url:`${s}//${a}${l}/`},c=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){ft(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),ft(Zm(u,n.config.emulator)&&Zm(c,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=c,n.settings.appVerificationDisabledForTesting=!0,dp(a)?(Sk(`${s}//${a}${l}`),Tk("Auth",!0)):jfe()}function ZW(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function zfe(r){const e=ZW(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:P5(n.substr(s.length+1))}}else{const[s,a]=n.split(":");return{host:s,port:P5(a)}}}function P5(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function jfe(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return rc("not implemented")}_getIdTokenResponse(e){return rc("not implemented")}_linkToIdToken(e,t){return rc("not implemented")}_getReauthenticationResolver(e){return rc("not implemented")}}async function qfe(r,e){return $d(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hfe(r,e){return o_(r,"POST","/v1/accounts:signInWithPassword",Ld(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gfe(r,e){return o_(r,"POST","/v1/accounts:signInWithEmailLink",Ld(r,e))}async function Wfe(r,e){return o_(r,"POST","/v1/accounts:signInWithEmailLink",Ld(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1 extends PF{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new k1(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new k1(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _P(e,t,"signInWithPassword",Hfe);case"emailLink":return Gfe(e,{email:this._email,oobCode:this._password});default:Qo(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _P(e,n,"signUpPassword",qfe);case"emailLink":return Wfe(e,{idToken:t,email:this._email,oobCode:this._password});default:Qo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $g(r,e){return o_(r,"POST","/v1/accounts:signInWithIdp",Ld(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kfe="http://localhost";class ap extends PF{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ap(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...s}=t;if(!n||!i)return null;const a=new ap(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return $g(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,$g(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,$g(e,t)}buildRequest(){const e={requestUri:Kfe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$x(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xfe(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Yfe(r){const e=Yy(Qy(r)).link,t=e?Yy(Qy(e)).deep_link_id:null,n=Yy(Qy(r)).deep_link_id;return(n?Yy(Qy(n)).link:null)||n||t||e||r}class RF{constructor(e){const t=Yy(Qy(e)),n=t.apiKey??null,i=t.oobCode??null,s=Xfe(t.mode??null);ft(n&&i&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Yfe(e);try{return new RF(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(){this.providerId=Z0.PROVIDER_ID}static credential(e,t){return k1._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=RF.parseLink(t);return ft(n,"argument-error"),k1._fromEmailAndCode(e,n.code,n.tenantId)}}Z0.PROVIDER_ID="password";Z0.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Z0.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_ extends eK{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc extends l_{constructor(){super("facebook.com")}static credential(e){return ap._fromParams({providerId:Jc.PROVIDER_ID,signInMethod:Jc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jc.credentialFromTaggedObject(e)}static credentialFromError(e){return Jc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jc.credential(e.oauthAccessToken)}catch{return null}}}Jc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc extends l_{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ap._fromParams({providerId:Zc.PROVIDER_ID,signInMethod:Zc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Zc.credentialFromTaggedObject(e)}static credentialFromError(e){return Zc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Zc.credential(t,n)}catch{return null}}}Zc.GOOGLE_SIGN_IN_METHOD="google.com";Zc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh extends l_{constructor(){super("github.com")}static credential(e){return ap._fromParams({providerId:eh.PROVIDER_ID,signInMethod:eh.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eh.credentialFromTaggedObject(e)}static credentialFromError(e){return eh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eh.credential(e.oauthAccessToken)}catch{return null}}}eh.GITHUB_SIGN_IN_METHOD="github.com";eh.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th extends l_{constructor(){super("twitter.com")}static credential(e,t){return ap._fromParams({providerId:th.PROVIDER_ID,signInMethod:th.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return th.credentialFromTaggedObject(e)}static credentialFromError(e){return th.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return th.credential(t,n)}catch{return null}}}th.TWITTER_SIGN_IN_METHOD="twitter.com";th.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qfe(r,e){return o_(r,"POST","/v1/accounts:signUp",Ld(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const s=await jo._fromIdTokenResponse(e,n,i),a=R5(n);return new op({user:s,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=R5(n);return new op({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function R5(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT extends iu{constructor(e,t,n,i){super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,nT.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new nT(e,t,n,i)}}function tK(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?nT._fromErrorAndOperation(r,s,e,n):s})}async function Jfe(r,e,t=!1){const n=await R1(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return op._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zfe(r,e,t=!1){const{auth:n}=r;if(Ea(n.app))return Promise.reject(lc(n));const i="reauthenticate";try{const s=await R1(r,tK(n,i,e,r),t);ft(s.idToken,n,"internal-error");const a=MF(s.idToken);ft(a,n,"internal-error");const{sub:o}=a;return ft(r.uid===o,n,"user-mismatch"),op._forOperation(r,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Qo(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rK(r,e,t=!1){if(Ea(r.app))return Promise.reject(lc(r));const n="signIn",i=await tK(r,n,e),s=await op._fromIdTokenResponse(r,n,i);return t||await r._updateCurrentUser(s.user),s}async function eme(r,e){return rK(yp(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nK(r){const e=yp(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function tme(r,e,t){if(Ea(r.app))return Promise.reject(lc(r));const n=yp(r),a=await _P(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Qfe).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&nK(r),l}),o=await op._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(o.user),o}function rme(r,e,t){return Ea(r.app)?Promise.reject(lc(r)):eme(Tn(r),Z0.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&nK(r),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iK(r,e){return Tn(r).setPersistence(e)}function nme(r,e,t,n){return Tn(r).onIdTokenChanged(e,t,n)}function ime(r,e,t){return Tn(r).beforeAuthStateChanged(e,t)}const iT="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sK{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(iT,"1"),this.storage.removeItem(iT),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sme=1e3,ame=10;class aK extends sK{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XW(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(n);!t&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);Sfe()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,ame):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},sme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}aK.type="LOCAL";const kF=aK;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oK extends sK{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}oK.type="SESSION";const lK=oK;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ome(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const n=new YC(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(a).map(async u=>u(t.origin,s)),l=await ome(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}YC.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lme{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const u=FF("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(d.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(){return window}function ume(r){Xl().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uK(){return typeof Xl().WorkerGlobalScope<"u"&&typeof Xl().importScripts=="function"}async function cme(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hme(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function dme(){return uK()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cK="firebaseLocalStorageDb",fme=1,sT="firebaseLocalStorage",hK="fbase_key";class u_{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function QC(r,e){return r.transaction([sT],e?"readwrite":"readonly").objectStore(sT)}function mme(){const r=indexedDB.deleteDatabase(cK);return new u_(r).toPromise()}function AP(){const r=indexedDB.open(cK,fme);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(sT,{keyPath:hK})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(sT)?e(n):(n.close(),await mme(),e(await AP()))})})}async function k5(r,e,t){const n=QC(r,!0).put({[hK]:e,value:t});return new u_(n).toPromise()}async function pme(r,e){const t=QC(r,!1).get(e),n=await new u_(t).toPromise();return n===void 0?null:n.value}function F5(r,e){const t=QC(r,!0).delete(e);return new u_(t).toPromise()}const gme=800,vme=3;class dK{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await AP(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>vme)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uK()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=YC._getInstance(dme()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await cme(),!this.activeServiceWorker)return;this.sender=new lme(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hme()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await AP();return await k5(e,iT,"1"),await F5(e,iT),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>k5(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>pme(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>F5(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=QC(i,!1).getAll();return new u_(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dK.type="LOCAL";const yme=dK;new a_(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bme(r,e){return e?nc(e):(ft(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF extends PF{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $g(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $g(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $g(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wme(r){return rK(r.auth,new OF(r),r.bypassAuthState)}function xme(r){const{auth:e,user:t}=r;return ft(t,e,"internal-error"),Zfe(t,new OF(r),r.bypassAuthState)}async function _me(r){const{auth:e,user:t}=r;return ft(t,e,"internal-error"),Jfe(t,new OF(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fK{constructor(e,t,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wme;case"linkViaPopup":case"linkViaRedirect":return _me;case"reauthViaPopup":case"reauthViaRedirect":return xme;default:Qo(this.auth,"internal-error")}}resolve(e){Ec(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ec(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ame=new a_(2e3,1e4);class wg extends fK{constructor(e,t,n,i,s){super(e,t,i,s),this.provider=n,this.authWindow=null,this.pollId=null,wg.currentPopupAction&&wg.currentPopupAction.cancel(),wg.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ft(e,this.auth,"internal-error"),e}async onExecution(){Ec(this.filter.length===1,"Popup operations only handle one event");const e=FF();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Kl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Kl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wg.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if((n=(t=this.authWindow)==null?void 0:t.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ame.get())};e()}}wg.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eme="pendingRedirect",KE=new Map;class Sme extends fK{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=KE.get(this.auth._key());if(!e){try{const n=await Tme(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}KE.set(this.auth._key(),e)}return this.bypassAuthState||KE.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Tme(r,e){const t=Dme(e),n=Nme(r);if(!await n._isAvailable())return!1;const i=await n._get(t)==="true";return await n._remove(t),i}function Cme(r,e){KE.set(r._key(),e)}function Nme(r){return nc(r._redirectPersistence)}function Dme(r){return WE(Eme,r.config.apiKey,r.name)}async function Mme(r,e,t=!1){if(Ea(r.app))return Promise.reject(lc(r));const n=yp(r),i=bme(n,e),a=await new Sme(n,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ime=10*60*1e3;class Pme{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Rme(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!mK(e)){const i=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";t.onError(Kl(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ime&&this.cachedEventUids.clear(),this.cachedEventUids.has(O5(e))}saveEventToCache(e){this.cachedEventUids.add(O5(e)),this.lastProcessedEventTime=Date.now()}}function O5(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function mK({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Rme(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mK(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kme(r,e={}){return $d(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fme=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ome=/^https?/;async function Bme(r){if(r.config.emulator)return;const{authorizedDomains:e}=await kme(r);for(const t of e)try{if(Lme(t))return}catch{}Qo(r,"unauthorized-domain")}function Lme(r){const e=wP(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const a=new URL(r);return a.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===n}if(!Ome.test(t))return!1;if(Fme.test(r))return n===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $me=new a_(3e4,6e4);function B5(){const r=Xl().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function Vme(r){return new Promise((e,t)=>{var i,s,a;function n(){B5(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{B5(),t(Kl(r,"network-request-failed"))},timeout:$me.get()})}if((s=(i=Xl().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((a=Xl().gapi)!=null&&a.load)n();else{const o=kfe("iframefcb");return Xl()[o]=()=>{gapi.load?n():t(Kl(r,"network-request-failed"))},QW(`${Rfe()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw XE=null,e})}let XE=null;function Ume(r){return XE=XE||Vme(r),XE}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zme=new a_(5e3,15e3),jme="__/auth/iframe",qme="emulator/auth/iframe",Hme={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gme=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wme(r){const e=r.config;ft(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?DF(e,qme):`https://${r.config.authDomain}/${jme}`,n={apiKey:e.apiKey,appName:r.name,v:fp},i=Gme.get(r.config.apiHost);i&&(n.eid=i);const s=r._getFrameworks();return s.length&&(n.fw=s.join(",")),`${t}?${$x(n).slice(1)}`}async function Kme(r){const e=await Ume(r),t=Xl().gapi;return ft(t,r,"internal-error"),e.open({where:document.body,url:Wme(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hme,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const a=Kl(r,"network-request-failed"),o=Xl().setTimeout(()=>{s(a)},zme.get());function l(){Xl().clearTimeout(o),i(n)}n.ping(l).then(l,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xme={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Yme=500,Qme=600,Jme="_blank",Zme="http://localhost";class L5{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function epe(r,e,t,n=Yme,i=Qme){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l={...Xme,width:n.toString(),height:i.toString(),top:s,left:a},u=rs().toLowerCase();t&&(o=qW(u)?Jme:t),zW(u)&&(e=e||Zme,l.scrollbars="yes");const c=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(Efe(u)&&o!=="_self")return tpe(e||"",o),new L5(null);const h=window.open(e||"",o,c);ft(h,r,"popup-blocked");try{h.focus()}catch{}return new L5(h)}function tpe(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rpe="__/auth/handler",npe="emulator/auth/handler",ipe=encodeURIComponent("fac");async function $5(r,e,t,n,i,s){ft(r.config.authDomain,r,"auth-domain-config-required"),ft(r.config.apiKey,r,"invalid-api-key");const a={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:fp,eventId:i};if(e instanceof eK){e.setDefaultLanguage(r.languageCode),a.providerId=e.providerId||"",Pae(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,h]of Object.entries({}))a[c]=h}if(e instanceof l_){const c=e.getScopes().filter(h=>h!=="");c.length>0&&(a.scopes=c.join(","))}r.tenantId&&(a.tid=r.tenantId);const o=a;for(const c of Object.keys(o))o[c]===void 0&&delete o[c];const l=await r._getAppCheckToken(),u=l?`#${ipe}=${encodeURIComponent(l)}`:"";return`${spe(r)}?${$x(o).slice(1)}${u}`}function spe({config:r}){return r.emulator?DF(r,npe):`https://${r.authDomain}/${rpe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="webStorageSupport";class ape{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lK,this._completeRedirectFn=Mme,this._overrideRedirectResult=Cme}async _openPopup(e,t,n,i){var a;Ec((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await $5(e,t,n,wP(),i);return epe(e,s,FF())}async _openRedirect(e,t,n,i){await this._originValidation(e);const s=await $5(e,t,n,wP(),i);return ume(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ec(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Kme(e),n=new Pme(e);return t.register("authEvent",i=>(ft(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(H2,{type:H2},i=>{var a;const s=(a=i==null?void 0:i[0])==null?void 0:a[H2];s!==void 0&&t(!!s),Qo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Bme(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return XW()||jW()||IF()}}const ope=ape;var V5="@firebase/auth",U5="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lpe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ft(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function upe(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cpe(r){ep(new vd("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;ft(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:a,authDomain:o,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YW(r)},u=new Mfe(n,i,s,l);return Vfe(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),ep(new vd("auth-internal",e=>{const t=yp(e.getProvider("auth").getImmediate());return(n=>new lpe(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),jl(V5,U5,upe(r)),jl(V5,U5,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hpe=5*60,dpe=Lj("authIdTokenMaxAge")||hpe;let z5=null;const fpe=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>dpe)return;const i=t==null?void 0:t.token;z5!==i&&(z5=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function mpe(r=Dk()){const e=AC(r,"auth");if(e.isInitialized())return e.getImmediate();const t=$fe(r,{popupRedirectResolver:ope,persistence:[yme,kF,lK]}),n=Lj("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const a=fpe(s.toString());ime(t,a,()=>a(t.currentUser)),nme(t,o=>a(o))}}const i=Fj("auth");return i&&Ufe(t,`http://${i}`),t}function ppe(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}Ife({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=i=>{const s=Kl("internal-error");s.customData=i,t(s)},n.type="text/javascript",n.charset="UTF-8",ppe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cpe("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pK="firebasestorage.googleapis.com",gpe="storageBucket",vpe=2*60*1e3,ype=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends iu{constructor(e,t,n=0){super(G2(e),`Firebase Storage: ${t} (${G2(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,su.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return G2(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var eu;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(eu||(eu={}));function G2(r){return"storage/"+r}function bpe(){const r="An unknown error occurred, please check the error payload for server response.";return new su(eu.UNKNOWN,r)}function wpe(){return new su(eu.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xpe(){return new su(eu.CANCELED,"User canceled the upload/download.")}function _pe(r){return new su(eu.INVALID_URL,"Invalid URL '"+r+"'.")}function Ape(r){return new su(eu.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function j5(r){return new su(eu.INVALID_ARGUMENT,r)}function gK(){return new su(eu.APP_DELETED,"The Firebase app was deleted.")}function Epe(r){return new su(eu.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=qo.makeFromUrl(e,t)}catch{return new qo(e,"")}if(n.path==="")return n;throw Ape(e)}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";function s(A){A.path.charAt(A.path.length-1)==="/"&&(A.path_=A.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function u(A){A.path_=decodeURIComponent(A.path)}const c="v[A-Za-z0-9_]+",h=t.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},g=t===pK?"(?:storage.googleapis.com|storage.cloud.google.com)":t,b="([^?#]*)",v=new RegExp(`^https?://${g}/${i}/${b}`,"i"),y=[{regex:o,indices:l,postModify:s},{regex:f,indices:p,postModify:u},{regex:v,indices:{bucket:1,path:2},postModify:u}];for(let A=0;A<y.length;A++){const x=y[A],_=x.regex.exec(e);if(_){const S=_[x.indices.bucket];let E=_[x.indices.path];E||(E=""),n=new qo(S,E),x.postModify(n);break}}if(n==null)throw _pe(e);return n}}class Spe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tpe(r,e,t){let n=1,i=null,s=null,a=!1,o=0;function l(){return o===2}let u=!1;function c(...b){u||(u=!0,e.apply(null,b))}function h(b){i=setTimeout(()=>{i=null,r(f,l())},b)}function d(){s&&clearTimeout(s)}function f(b,...v){if(u){d();return}if(b){d(),c.call(null,b,...v);return}if(l()||a){d(),c.call(null,b,...v);return}n<64&&(n*=2);let y;o===1?(o=2,y=0):y=(n+Math.random())*1e3,h(y)}let p=!1;function g(b){p||(p=!0,d(),!u&&(i!==null?(b||(o=2),clearTimeout(i),h(0)):b||(o=1)))}return h(0),s=setTimeout(()=>{a=!0,g(!0)},t),g}function Cpe(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Npe(r){return r!==void 0}function q5(r,e,t,n){if(n<e)throw j5(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw j5(`Invalid value for '${r}'. Expected ${t} or less.`)}function Dpe(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const i=e(n)+"="+e(r[n]);t=t+i+"&"}return t=t.slice(0,-1),t}var aT;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(aT||(aT={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mpe(r,e){const t=r>=500&&r<600,i=[408,429].indexOf(r)!==-1,s=e.indexOf(r)!==-1;return t||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ipe{constructor(e,t,n,i,s,a,o,l,u,c,h,d=!0,f=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=h,this.retry=d,this.isUsingEmulator=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,g)=>{this.resolve_=p,this.reject_=g,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new xA(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===aT.NO_ERROR,l=s.getStatus();if(!o||Mpe(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===aT.ABORT;n(!1,new xA(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;n(!0,new xA(u,s))})},t=(n,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());Npe(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=bpe();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(i.canceled){const l=this.appDelete_?gK():xpe();a(l)}else{const l=wpe();a(l)}};this.canceled_?t(!1,new xA(!1,null,!0)):this.backoffId_=Tpe(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Cpe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xA{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Ppe(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function Rpe(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function kpe(r,e){e&&(r["X-Firebase-GMPID"]=e)}function Fpe(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function Ope(r,e,t,n,i,s,a=!0,o=!1){const l=Dpe(r.urlParams),u=r.url+l,c=Object.assign({},r.headers);return kpe(c,e),Ppe(c,t),Rpe(c,s),Fpe(c,n),new Ipe(u,r.method,c,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,i,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bpe(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function Lpe(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,t){this._service=e,t instanceof qo?this._location=t:this._location=qo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new oT(e,t)}get root(){const e=new qo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Lpe(this._location.path)}get storage(){return this._service}get parent(){const e=Bpe(this._location.path);if(e===null)return null;const t=new qo(this._location.bucket,e);return new oT(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Epe(e)}}function H5(r,e){const t=e==null?void 0:e[gpe];return t==null?null:qo.makeFromBucketSpec(t,r)}function $pe(r,e,t,n={}){r.host=`${e}:${t}`;const i=dp(e);i&&(Sk(`https://${r.host}/b`),Tk("Storage",!0)),r._isUsingEmulator=!0,r._protocol=i?"https":"http";const{mockUserToken:s}=n;s&&(r._overrideAuthToken=typeof s=="string"?s:$j(s,r.app.options.projectId))}class Vpe{constructor(e,t,n,i,s,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=pK,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vpe,this._maxUploadRetryTime=ype,this._requests=new Set,i!=null?this._bucket=qo.makeFromBucketSpec(i,this._host):this._bucket=H5(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qo.makeFromBucketSpec(this._url,e):this._bucket=H5(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){q5("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){q5("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Ea(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new oT(this,e)}_makeRequest(e,t,n,i,s=!0){if(this._deleted)return new Spe(gK());{const a=Ope(e,this._appId,n,i,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const G5="@firebase/storage",W5="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vK="storage";function Upe(r=Dk(),e){r=Tn(r);const n=AC(r,vK).getImmediate({identifier:e}),i=Oj("storage");return i&&zpe(n,...i),n}function zpe(r,e,t,n={}){$pe(r,e,t,n)}function jpe(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),i=r.getProvider("app-check-internal");return new Vpe(t,n,i,e,fp)}function qpe(){ep(new vd(vK,jpe,"PUBLIC").setMultipleInstances(!0)),jl(G5,W5,""),jl(G5,W5,"esm2020")}qpe();const Hpe={apiKey:"AIzaSyCuCYH38ZqKbtPYPR2ED1nMdD6yBuo1ReA",authDomain:"shop-d542c.firebaseapp.com",projectId:"shop-d542c",storageBucket:"shop-d542c.firebasestorage.app",messagingSenderId:"592347281413",appId:"1:592347281413:web:ed7c8752b195dcbb02846c",measurementId:"G-DFV2PBV8X2"},BF=zj(Hpe),lT=mpe(BF),fn=$ce(BF);Upe(BF);const Gpe={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},Wpe=15;function Kpe(){const[r,e]=se.useState(null),[t,n]=se.useState(!1),[i,s]=se.useState(null),[a,o]=se.useState(null),[l,u]=se.useState(""),[c,h]=se.useState(""),[d,f]=se.useState("idle"),[p,g]=se.useState([]),[b,v]=se.useState(!0),w=yc();se.useEffect(()=>{const S=Ca(fn,"paperSummaries"),E=J0(S,zC("createdAt","desc"),Wce(15)),C=HM(E,N=>{const D=N.docs.map(M=>({id:M.id,...M.data()}));g(D),v(!1)},N=>{console.error("   :",N),v(!1)});return()=>C()},[]);const y=S=>S?S.toDate?S.toDate().toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):new Date(S).toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):" ",A=S=>{var C;const E=(C=S.target.files)==null?void 0:C[0];E&&(E.type==="application/pdf"?(e(E),u(E.name.replace(".pdf","")),o(null)):(o("PDF   ."),e(null)))},x=async()=>{if(!r){o("PDF  .");return}n(!0),o(null),s(null);try{const S=await Jde(r);if(!S||S.trim().length<100)throw new Error("   .  PDF .");const E=await tfe(S);s(E.summary),h(E.method)}catch(S){o(S.message||"    ."),console.error(" :",S)}finally{n(!1)}},_=async()=>{if(!i){o("  .");return}if(!(w!=null&&w.email)){o("  .");return}try{f("loading"),await Qx(Ca(fn,"paperSummaries"),{title:l||"  ",summary:i,method:c,authorEmail:w.email,authorName:w.username||w.email.split("@")[0],createdAt:jn(),publishedAt:new Date().toISOString()}),f("success"),setTimeout(()=>f("idle"),2500)}catch(S){console.error("  :",S),o("    ."),f("error"),setTimeout(()=>f("idle"),3e3)}};return P.jsx("div",{className:"min-h-screen bg-white dark:bg-dark-50 pt-24 pb-12",children:P.jsxs(Ye.div,{className:"max-w-4xl mx-auto px-4",variants:Gpe,initial:"hidden",animate:"visible",children:[P.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"   AI"}),P.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"PDF   AI   ."}),P.jsxs(Ye.div,{className:"bg-gray-50 dark:bg-dark-100 rounded-lg p-8 mb-8 border-2 border-dashed border-blue-400",whileHover:{scale:1.02},children:[P.jsxs("div",{className:"text-center",children:[P.jsx("input",{type:"file",accept:".pdf",onChange:A,className:"hidden",id:"pdf-upload"}),P.jsxs("label",{htmlFor:"pdf-upload",className:"cursor-pointer block",children:[P.jsx("div",{className:"text-6xl mb-4",children:""}),P.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"PDF    "}),P.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["( ",Wpe," )"]})]})]}),r&&P.jsx("div",{className:"mt-6 p-4 bg-blue-100 dark:bg-blue-900/30 rounded-lg border border-blue-400",children:P.jsxs("p",{className:"text-blue-900 dark:text-blue-100",children:[" : ",P.jsx("strong",{children:r.name})]})})]}),P.jsxs("div",{className:"flex gap-4 mb-8",children:[P.jsx(Ye.button,{onClick:x,disabled:!r||t,whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-bold py-3 px-6 rounded-lg transition",children:t?"   ...":" AI "}),P.jsx(Ye.button,{onClick:()=>{e(null),u(""),s(null),o(null)},whileHover:{scale:1.05},className:"bg-gray-400 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition",children:" "})]}),a&&P.jsxs(Ye.div,{className:"bg-red-100 dark:bg-red-900/30 border border-red-400 text-red-700 dark:text-red-200 px-6 py-4 rounded-lg mb-8",initial:{opacity:0},animate:{opacity:1},children:[P.jsx("strong",{children:":"})," ",a]}),i&&P.jsxs(Ye.div,{className:"bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500 p-6 rounded-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[P.jsxs("div",{className:"flex items-center mb-4",children:[P.jsx("span",{className:"text-2xl mr-3",children:""}),P.jsxs("div",{children:[P.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:l}),P.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[": ",c==="AI"?" AI  (Hugging Face)":"   "]})]})]}),P.jsx("div",{className:"bg-white dark:bg-dark-100 p-4 rounded-lg",children:P.jsx("p",{className:"text-gray-800 dark:text-gray-200 leading-relaxed",children:i})}),P.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[P.jsx(Ye.button,{onClick:()=>{const S=document.createElement("a");S.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(i)),S.setAttribute("download",`${l}_summary.txt`),S.style.display="none",document.body.appendChild(S),S.click(),document.body.removeChild(S)},whileHover:{scale:1.05},className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded transition text-sm",children:"  "}),P.jsx(Ye.button,{onClick:()=>{navigator.clipboard.writeText(i),alert(" !")},whileHover:{scale:1.05},className:"bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded transition text-sm",children:" "}),P.jsx(Ye.button,{onClick:_,disabled:d==="loading"||!i,whileHover:{scale:i?1.05:1},className:`py-2 px-4 rounded transition text-sm font-semibold ${d==="success"?"bg-emerald-600 text-white":d==="loading"?"bg-gray-400 text-gray-100":"bg-purple-600 hover:bg-purple-700 text-white"}`,children:d==="success"?"  ":d==="loading"?" ...":"  "})]}),!w&&P.jsx("p",{className:"text-xs text-yellow-600 mt-2",children:"     ."})]}),P.jsxs(Ye.div,{className:"mt-12 bg-gray-50 dark:bg-dark-100 rounded-lg p-6 border border-gray-200 dark:border-gray-800",initial:{opacity:0},animate:{opacity:1},children:[P.jsxs("div",{className:"flex items-center justify-between mb-4",children:[P.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"   "}),P.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:" 15 "})]}),b?P.jsx("p",{className:"text-sm text-gray-500",children:"  ..."}):p.length===0?P.jsx("p",{className:"text-sm text-gray-500",children:"   .   !"}):P.jsx("div",{className:"space-y-4",children:p.map(S=>P.jsxs("div",{className:"p-4 rounded-2xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-dark-200",children:[P.jsxs("div",{className:"flex items-start justify-between gap-4",children:[P.jsxs("div",{children:[P.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:S.title}),P.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[S.authorName||" ","  ",y(S.createdAt||S.publishedAt)]})]}),P.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-200",children:S.method==="AI"?"AI ":"Rule "})]}),P.jsx("p",{className:"mt-3 text-sm text-gray-700 dark:text-gray-200 leading-relaxed whitespace-pre-wrap",children:S.summary})]},S.id))})]}),P.jsxs(Ye.div,{className:"mt-12 bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg border border-blue-200 dark:border-blue-800",initial:{opacity:0},whileInView:{opacity:1},children:[P.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"  "}),P.jsxs("ol",{className:"space-y-2 text-gray-700 dark:text-gray-300",children:[P.jsxs("li",{children:[P.jsx("strong",{children:"1."}),"   PDF  "]}),P.jsxs("li",{children:[P.jsx("strong",{children:"2."}),' "AI "  ']}),P.jsxs("li",{children:[P.jsx("strong",{children:"3."})," AI    "]}),P.jsxs("li",{children:[P.jsx("strong",{children:"4."}),"      "]})]}),P.jsx("div",{className:"mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/30 rounded border border-yellow-200 dark:border-yellow-800",children:P.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[" ",P.jsx("strong",{children:":"})," PDF   5 .       ."]})})]})]})})}function Xpe(){var y;const[r,e]=se.useState([]),[t,n]=se.useState(!0),[i,s]=se.useState(""),[a,o]=se.useState(null),[l,u]=se.useState({title:"",category:((y=Up[0])==null?void 0:y.id)??1,content:""}),[c,h]=se.useState(!1),[d,f]=se.useState(!1),p=yc(),g=A=>A?typeof A=="string"?A:A.toDate?A.toDate().toLocaleDateString("ko-KR"):A instanceof Date?A.toLocaleDateString("ko-KR"):new Date(A).toLocaleDateString("ko-KR"):"",b=se.useCallback(async()=>{n(!0),s("");try{const A=J0(Ca(fn,"forumPosts"),zC("createdAt","desc")),_=(await Yx(A)).docs.map(S=>{var C;const E=S.data();return{id:S.id,...E,createdAt:(C=E.createdAt)!=null&&C.toDate?E.createdAt.toDate():E.createdAt||new Date,replies:E.replies??0}});e(_)}catch(A){console.error("  :",A),s("  .    .")}finally{n(!1)}},[]);se.useEffect(()=>{b()},[b]);const v=async A=>{var x;if(A.preventDefault(),!l.title.trim()||!l.content.trim()){alert("  .");return}f(!0);try{const _=(p==null?void 0:p.username)||(p==null?void 0:p.email)||" ",S={title:l.title.trim(),content:l.content.trim(),category:Number(l.category),author:_,authorEmail:(p==null?void 0:p.email)||null,replies:0,createdAt:jn(),updatedAt:jn()},E=await Qx(Ca(fn,"forumPosts"),S);console.log("   :",E.id);const C={id:E.id,...S,createdAt:new Date};e(N=>[C,...N]),u({title:"",category:((x=Up[0])==null?void 0:x.id)??1,content:""}),h(!1),alert(" .")}catch(_){console.error("   :",_),console.error(" :",_.code),console.error(" :",_.message),alert("  : "+_.message)}finally{f(!1)}},w=a?r.filter(A=>A.category===a):r;return P.jsxs("div",{className:"space-y-8 sm:space-y-12",children:[P.jsxs("div",{children:[P.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),P.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base",children:" ,  ,  ,        ."})]}),P.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[P.jsx("button",{onClick:()=>h(!c),className:"w-full sm:w-auto px-6 py-3 bg-blue-600 dark:bg-blue-600 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-700 transition font-medium text-sm sm:text-base",children:c?"":"  "}),P.jsx("button",{onClick:b,className:"w-full sm:w-auto px-6 py-3 border border-gray-300 dark:border-gray-600 rounded-lg text-sm sm:text-base font-medium hover:bg-gray-100 dark:hover:bg-gray-800",children:""})]}),c&&P.jsxs("form",{onSubmit:v,className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg space-y-4",children:[P.jsxs("div",{children:[P.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:""}),P.jsx("input",{type:"text",value:l.title,onChange:A=>u({...l,title:A.target.value}),className:"w-full bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400",placeholder:" "})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:""}),P.jsx("select",{value:l.category,onChange:A=>u({...l,category:parseInt(A.target.value)}),className:"w-full bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white",children:Up.map(A=>P.jsx("option",{value:A.id,children:A.name},A.id))})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:""}),P.jsx("textarea",{rows:"6",value:l.content,onChange:A=>u({...l,content:A.target.value}),className:"w-full bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 resize-none",placeholder:" "})]}),P.jsx("button",{type:"submit",disabled:d,className:"w-full bg-green-600 dark:bg-green-600 hover:bg-green-700 dark:hover:bg-green-700 disabled:bg-gray-500 text-white px-6 py-2 rounded font-bold transition text-sm sm:text-base",children:d?" ...":""})]}),P.jsxs("div",{className:"flex flex-wrap gap-2",children:[P.jsx("button",{onClick:()=>o(null),className:`px-3 sm:px-4 py-2 rounded transition text-sm sm:text-base ${a===null?"bg-blue-600 text-white":"bg-gray-200 dark:bg-dark-300 text-gray-900 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-dark-200"}`,children:""}),Up.map(A=>P.jsx("button",{onClick:()=>o(A.id),className:`px-3 sm:px-4 py-2 rounded transition text-sm sm:text-base ${a===A.id?"bg-blue-600 text-white":"bg-gray-200 dark:bg-dark-300 text-gray-900 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-dark-200"}`,children:A.name},A.id))]}),P.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[t&&P.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"  ..."}),!t&&w.length===0&&P.jsx("div",{className:"text-center py-10 text-gray-500 dark:text-gray-400 border border-dashed rounded-lg",children:"   ."}),!t&&w.map(A=>{var x;return P.jsx(Cr,{to:`/forum/${A.id}`,state:{post:A},children:P.jsx("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md transition cursor-pointer",children:P.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2",children:[P.jsxs("div",{className:"flex-1 min-w-0",children:[P.jsx("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:P.jsx("span",{className:"text-xs bg-gray-200 dark:bg-dark-300 text-gray-700 dark:text-gray-300 px-2 py-1 rounded",children:((x=Up.find(_=>_.id===A.category))==null?void 0:x.name)||""})}),P.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 break-words",children:A.title}),P.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-2 line-clamp-2",children:A.content}),P.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-2",children:[A.author,"  ",g(A.createdAt)]})]}),P.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 whitespace-nowrap",children:[" ",A.replies??0]})]})})},A.id)})]}),i&&P.jsx("p",{className:"text-sm text-red-500",children:i})]})}function Ype(){var y,A,x;const{postId:r}=Wz();j0();const e=z0(),{isDark:t}=Qs(),n=yc(),[i,s]=se.useState(((y=e.state)==null?void 0:y.post)||null),[a,o]=se.useState(!((A=e.state)!=null&&A.post)),[l,u]=se.useState([]),[c,h]=se.useState(""),[d,f]=se.useState(""),p=_=>_?typeof _=="string"?_:_.toDate?_.toDate().toLocaleDateString("ko-KR"):_ instanceof Date?_.toLocaleDateString("ko-KR"):new Date(_).toLocaleDateString("ko-KR"):"",g=se.useCallback(async()=>{var _;o(!0);try{const S=Ql(fn,"forumPosts",r),E=await gF(S);if(E.exists()){const C=E.data();s({id:E.id,...C,createdAt:(_=C.createdAt)!=null&&_.toDate?C.createdAt.toDate():C.createdAt||new Date})}else s(null)}catch(S){console.error("  :",S),s(null)}finally{o(!1)}},[r]),b=se.useCallback(async()=>{try{const _=Ca(fn,"forumPosts",r,"replies"),S=J0(_,zC("createdAt","asc")),C=(await Yx(S)).docs.map(N=>{var M;const D=N.data();return{id:N.id,...D,createdAt:(M=D.createdAt)!=null&&M.toDate?D.createdAt.toDate():D.createdAt||new Date}});u(C)}catch(_){console.error("  :",_)}},[r]);se.useEffect(()=>{var _;(_=e.state)!=null&&_.post||g()},[g,(x=e.state)==null?void 0:x.post]),se.useEffect(()=>{b()},[b]);const v=async _=>{if(_.preventDefault(),f(""),!c.trim()){f(" .");return}try{const S=Ca(fn,"forumPosts",r,"replies"),C={author:(n==null?void 0:n.username)||(n==null?void 0:n.email)||" ",authorEmail:(n==null?void 0:n.email)||null,content:c.trim(),likes:0,createdAt:jn()},D={id:(await Qx(S,C)).id,...C,createdAt:new Date};u(I=>[...I,D]),h("");const M=Ql(fn,"forumPosts",r);await vg(M,{replies:Qce(1),updatedAt:jn()}),s(I=>I&&{...I,replies:(I.replies||0)+1})}catch(S){console.error("  :",S),f("  .    .")}};if(a)return P.jsx("div",{className:`text-center py-12 ${t?"text-gray-300":"text-gray-700"}`,children:"  ..."});if(!i)return P.jsxs("div",{className:"text-center py-12",children:[P.jsx("h1",{className:`text-2xl font-bold mb-4 ${t?"text-white":"text-gray-900"}`,children:"   ."}),P.jsx(Cr,{to:"/forum",className:"text-blue-600 hover:text-blue-700 font-medium",children:" "})]});const w=Up.find(_=>_.id===(i==null?void 0:i.category));return P.jsxs("div",{className:"space-y-8",children:[P.jsxs(Ye.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[P.jsx(Cr,{to:"/forum",className:`inline-flex items-center gap-2 mb-4 transition ${t?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"}`,children:"  "}),P.jsxs("div",{className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[P.jsx("div",{className:"mb-3",children:P.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${t?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-700"}`,children:w==null?void 0:w.name})}),P.jsx("h1",{className:`text-3xl sm:text-4xl font-bold mb-4 ${t?"text-white":"text-gray-900"}`,children:i.title}),P.jsxs("div",{className:`flex flex-wrap gap-4 mb-6 pb-6 border-b ${t?"border-gray-700 text-gray-300":"border-gray-200 text-gray-600"} text-sm`,children:[P.jsxs("div",{children:[P.jsx("span",{className:"font-medium",children:":"})," ",i.author]}),P.jsxs("div",{children:[P.jsx("span",{className:"font-medium",children:":"})," ",p(i.createdAt)]}),P.jsxs("div",{children:[P.jsx("span",{className:"font-medium",children:":"})," ",i.replies||l.length,""]}),P.jsxs("div",{children:[P.jsx("span",{className:"font-medium",children:":"})," ",i.views||0,""]})]}),P.jsx("div",{className:`prose prose-sm ${t?"prose-invert":""} max-w-none mb-8`,children:P.jsx("div",{className:`${t?"text-gray-200":"text-gray-700"} leading-7 whitespace-pre-wrap`,children:i.content})})]})]}),P.jsxs(Ye.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[P.jsx("h2",{className:`text-xl font-bold mb-4 ${t?"text-white":"text-gray-900"}`,children:" "}),P.jsxs("form",{onSubmit:v,className:"space-y-4",children:[P.jsx("textarea",{value:c,onChange:_=>h(_.target.value),placeholder:" ...",rows:"4",className:`w-full px-4 py-3 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500 ${t?"bg-gray-700 border-gray-600 text-white placeholder-gray-400":"bg-white border-gray-300 text-gray-900 placeholder-gray-500"}`}),d&&P.jsx("p",{className:"text-sm text-red-400",children:d}),P.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:" "})]})]}),P.jsxs(Ye.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:"space-y-4",children:[P.jsxs("h2",{className:`text-2xl font-bold ${t?"text-white":"text-gray-900"}`,children:[" ",l.length,""]}),l.map(_=>P.jsxs(Ye.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`p-4 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[P.jsxs("div",{className:`flex justify-between items-start mb-2 ${t?"text-gray-300":"text-gray-600"} text-sm`,children:[P.jsxs("div",{children:[P.jsx("span",{className:"font-medium",children:_.author}),P.jsx("span",{className:"ml-4",children:p(_.createdAt)})]}),P.jsxs("button",{className:`transition ${t?"text-gray-400 hover:text-gray-200":"text-gray-400 hover:text-gray-600"}`,children:[" ",_.likes]})]}),P.jsx("p",{className:`${t?"text-gray-200":"text-gray-700"} leading-6`,children:_.content})]},_.id))]})]})}function Qpe(){const[r,e]=se.useState(""),t=V4.filter(n=>n.term.toLowerCase().includes(r.toLowerCase())||n.definition.toLowerCase().includes(r.toLowerCase()));return P.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[P.jsxs("div",{children:[P.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),P.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base mb-6",children:"      ."}),P.jsx("input",{type:"search",placeholder:"   ...",value:r,onChange:n=>e(n.target.value),className:"w-full max-w-md bg-gray-50 dark:bg-dark-200 border border-gray-300 dark:border-dark-300 px-4 py-2 rounded text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 text-sm sm:text-base"})]}),P.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[t.map((n,i)=>P.jsxs("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:shadow-md transition",children:[P.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 mb-2",children:n.term}),P.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm sm:text-base",children:n.definition})]},i)),t.length===0&&P.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8 text-sm sm:text-base",children:"  ."})]}),P.jsxs("div",{className:"bg-gray-100 dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 rounded-lg text-center text-gray-600 dark:text-gray-400 text-sm sm:text-base",children:[" ",V4.length,"   ",t.length,"  "]})]})}function Jpe(){return P.jsxs("div",{className:"space-y-8 sm:space-y-12",children:[P.jsxs("div",{children:[P.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-4 text-gray-900 dark:text-white",children:" "}),P.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-base",children:"    , ,  ."})]}),P.jsxs("section",{children:[P.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:" "}),P.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:A2.textbooks.map((r,e)=>P.jsxs("div",{className:"bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:shadow-md transition",children:[P.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400 mb-1",children:r.title}),P.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:[r.authors," (",r.year,")"]})]},e))})]}),P.jsxs("section",{children:[P.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"  "}),P.jsx("div",{className:"space-y-3 sm:space-y-4",children:A2.databases.map((r,e)=>P.jsxs("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"block bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md transition",children:[P.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400",children:r.name}),P.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:r.desc}),P.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2 break-all",children:r.url})]},e))})]}),P.jsxs("section",{children:[P.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"   "}),P.jsx("div",{className:"space-y-3 sm:space-y-4",children:A2.tools.map((r,e)=>P.jsxs("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"block bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-300 p-4 sm:p-6 rounded-lg hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-md transition",children:[P.jsx("h3",{className:"text-base sm:text-lg font-bold text-blue-600 dark:text-blue-400",children:r.name}),P.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:r.desc}),P.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2 break-all",children:r.url})]},e))})]})]})}function Zpe(){const{isDark:r}=Qs(),e=yc(),[t,n]=se.useState({username:"",email:"",affiliation:"",bio:""}),[i,s]=se.useState(!1),[a,o]=se.useState(!0),[l,u]=se.useState(!1),[c,h]=se.useState("");se.useEffect(()=>{if(!(e!=null&&e.email)){o(!1);return}(async()=>{try{const g=Ql(fn,"profiles",e.email),b=await gF(g),v={username:e.username||"",email:e.email,affiliation:"",bio:""};b.exists()?(n({...v,...b.data()}),console.log(" Firestore  :",e.email)):(n(v),console.log("   (Firestore )"))}catch(g){console.error(" Firestore  :",g),n({username:e.username,email:e.email||"",affiliation:"",bio:""})}finally{o(!1)}})()},[e==null?void 0:e.email,e==null?void 0:e.username]);const d=p=>{const{name:g,value:b}=p.target;n(v=>({...v,[g]:b}))},f=async p=>{p.preventDefault(),u(!0);try{await qM(Ql(fn,"profiles",e.email),{username:t.username,email:t.email,affiliation:t.affiliation,bio:t.bio,updatedAt:jn()}),console.log(" Firestore :",e.email),h("  ."),s(!1),setTimeout(()=>h(""),3e3)}catch(g){console.error("  :",g.code,g.message),h("  : "+g.message)}finally{u(!1)}};return e?a?P.jsx("div",{className:`text-center py-12 ${r?"text-gray-400":"text-gray-600"}`,children:"   ..."}):P.jsxs("div",{className:"max-w-2xl mx-auto",children:[P.jsx("h1",{className:`text-3xl font-bold mb-8 ${r?"text-white":"text-gray-900"}`,children:""}),c&&P.jsx("div",{className:`mb-4 p-4 rounded-lg ${c.includes("")?"bg-red-50 text-red-700 dark:bg-red-900 dark:text-red-200":"bg-green-50 text-green-700 dark:bg-green-900 dark:text-green-200"}`,children:c}),P.jsxs("div",{className:`rounded-lg p-8 ${r?"bg-gray-800":"bg-white"} border ${r?"border-gray-700":"border-gray-200"}`,children:[P.jsxs("div",{className:"flex justify-between items-center mb-6",children:[P.jsx("h2",{className:`text-xl font-bold ${r?"text-white":"text-gray-900"}`,children:" "}),P.jsx("button",{onClick:()=>s(!i),className:`px-4 py-2 rounded-lg transition ${r?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white`,children:i?"":""})]}),i?P.jsxs("form",{onSubmit:f,className:"space-y-4",children:[P.jsxs("div",{children:[P.jsx("label",{className:`block text-sm font-medium mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:""}),P.jsx("input",{type:"text",name:"username",value:t.username,onChange:d,className:`w-full px-4 py-2 border rounded-lg ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),P.jsxs("div",{children:[P.jsx("label",{className:`block text-sm font-medium mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:""}),P.jsx("input",{type:"email",name:"email",value:t.email,onChange:d,disabled:!0,className:`w-full px-4 py-2 border rounded-lg opacity-50 cursor-not-allowed ${r?"bg-gray-700 border-gray-600 text-gray-400":"bg-gray-100 border-gray-300 text-gray-600"}`})]}),P.jsxs("div",{children:[P.jsx("label",{className:`block text-sm font-medium mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:" "}),P.jsx("input",{type:"text",name:"affiliation",value:t.affiliation,onChange:d,placeholder:",  ",className:`w-full px-4 py-2 border rounded-lg ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),P.jsxs("div",{children:[P.jsx("label",{className:`block text-sm font-medium mb-2 ${r?"text-gray-300":"text-gray-700"}`,children:""}),P.jsx("textarea",{name:"bio",value:t.bio,onChange:d,placeholder:" ...",rows:"4",className:`w-full px-4 py-2 border rounded-lg ${r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-gray-900"}`})]}),P.jsx("button",{type:"submit",disabled:l,className:`w-full py-2 px-4 rounded-lg font-medium text-white transition ${l?"bg-blue-400 cursor-not-allowed opacity-50":"bg-blue-600 hover:bg-blue-700"}`,children:l?" ...":""})]}):P.jsxs("div",{className:"space-y-4",children:[P.jsxs("div",{children:[P.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:""}),P.jsx("p",{className:`text-lg font-medium ${r?"text-white":"text-gray-900"}`,children:t.username})]}),P.jsxs("div",{children:[P.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:""}),P.jsx("p",{className:`text-lg font-medium ${r?"text-white":"text-gray-900"}`,children:t.email})]}),P.jsxs("div",{children:[P.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:" "}),P.jsx("p",{className:`text-lg font-medium ${r?"text-white":"text-gray-900"}`,children:t.affiliation||""})]}),P.jsxs("div",{children:[P.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:""}),P.jsx("p",{className:`text-lg font-medium ${r?"text-white":"text-gray-900"}`,children:t.bio||""})]}),P.jsx("hr",{className:r?"border-gray-700":"border-gray-200"}),P.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[P.jsxs(Cr,{to:"/bookmarks",className:`p-4 rounded-lg border text-center transition hover:shadow-md ${r?"bg-gray-700 border-gray-600 text-gray-200 hover:bg-gray-600":"bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100"}`,children:[P.jsx("p",{className:"text-2xl mb-1",children:""}),P.jsx("p",{className:"font-semibold",children:""})]}),P.jsxs(Cr,{to:"/notes",className:`p-4 rounded-lg border text-center transition hover:shadow-md ${r?"bg-gray-700 border-gray-600 text-gray-200 hover:bg-gray-600":"bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100"}`,children:[P.jsx("p",{className:"text-2xl mb-1",children:""}),P.jsx("p",{className:"font-semibold",children:""})]})]})]})]})]}):P.jsx("div",{className:`text-center py-12 ${r?"text-gray-400":"text-gray-600"}`,children:"   ."})}function ege(){const{isDark:r}=Qs(),e=yc(),[t,n]=se.useState([]),[i,s]=se.useState(!0),[a,o]=se.useState("");se.useEffect(()=>{if(!(e!=null&&e.email)){s(!1);return}l()},[e==null?void 0:e.email]);const l=async()=>{try{const c=J0(Ca(fn,"bookmarks"),wH("userEmail","==",e.email)),d=(await Yx(c)).docs.map(f=>({id:f.id,...f.data()}));n(d),console.log("  :",e.email,":",d.length)}catch(c){console.error("   :",c),o("   .")}finally{s(!1)}},u=async c=>{try{const h=Ql(fn,"bookmarks",c);await yF(h),n(d=>d.filter(f=>f.id!==c)),console.log("  :",c)}catch(h){o(h.message)}};return P.jsxs("div",{className:"max-w-4xl mx-auto",children:[P.jsx("h1",{className:`text-3xl font-bold mb-8 ${r?"text-white":"text-gray-900"}`,children:""}),a&&P.jsx("div",{className:`mb-4 p-4 rounded-lg ${r?"bg-red-900 text-red-200 border border-red-700":"bg-red-50 text-red-700 border border-red-200"}`,children:a}),i?P.jsx("div",{className:`text-center py-12 ${r?"text-gray-400":"text-gray-600"}`,children:" ..."}):t.length===0?P.jsxs("div",{className:`text-center py-12 ${r?"text-gray-400":"text-gray-600"}`,children:[P.jsx("p",{className:"mb-4",children:"  ."}),P.jsx(Cr,{to:"/concepts",className:`px-4 py-2 rounded-lg inline-block transition ${r?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white`,children:" "})]}):P.jsx("div",{className:"space-y-4",children:t.map(c=>P.jsxs("div",{className:`p-6 rounded-lg border transition ${r?"bg-gray-800 border-gray-700 hover:border-gray-600":"bg-white border-gray-200 hover:border-gray-300"}`,children:[P.jsxs("div",{className:"flex justify-between items-start gap-4",children:[P.jsxs("div",{className:"flex-1 min-w-0",children:[P.jsx("h2",{className:`text-xl font-bold mb-2 ${r?"text-white":"text-gray-900"}`,children:c.title}),P.jsxs("p",{className:`text-sm mb-3 ${r?"text-gray-400":"text-gray-600"}`,children:[": ",P.jsx("span",{className:"font-medium",children:c.type==="paper"?"":""})]}),P.jsx("p",{className:`line-clamp-2 ${r?"text-gray-300":"text-gray-700"}`,children:c.description})]}),P.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[P.jsx(Cr,{to:c.type==="paper"?`/papers/${c.slug}`:`/concepts/${c.slug}`,className:`px-4 py-2 rounded-lg transition ${r?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white text-sm`,children:""}),P.jsx("button",{onClick:()=>u(c.id),className:`px-4 py-2 rounded-lg transition ${r?"bg-red-600 hover:bg-red-700":"bg-red-500 hover:bg-red-600"} text-white text-sm`,children:""})]})]}),P.jsxs("p",{className:`text-xs mt-4 ${r?"text-gray-500":"text-gray-400"}`,children:[" : ",new Date(c.created_at).toLocaleDateString("ko-KR")]})]},c.id))})]})}function tge(){const{isDark:r}=Qs(),e=yc(),[t,n]=se.useState([]),[i,s]=se.useState(null),[a,o]=se.useState(!1),[l,u]=se.useState(""),[c,h]=se.useState(""),[d,f]=se.useState(""),[p,g]=se.useState(!0),[b,v]=se.useState("");se.useEffect(()=>{if(!(e!=null&&e.email)){g(!1);return}(async()=>{try{const D=J0(Ca(fn,"notes"),wH("userEmail","==",e.email)),I=(await Yx(D)).docs.map(V=>({id:V.id,...V.data()}));n(I),console.log("   :",e.email,":",I.length)}catch(D){console.log(" Firestore  :",D)}finally{g(!1)}})()},[e==null?void 0:e.email]);const w=()=>{o(!0),s(null),u(""),h(""),f("")},y=N=>{s(N.id),o(!1),u(N.title),h(N.content),f(N.tags.join(", "))},A=async()=>{if(!l.trim()){alert(" .");return}try{if(a){const D={id:(await Qx(Ca(fn,"notes"),{title:l,content:c,tags:d.split(",").map(I=>I.trim()).filter(I=>I),userEmail:e.email,createdAt:jn(),updatedAt:jn()})).id,title:l,content:c,tags:d.split(",").map(I=>I.trim()).filter(I=>I),userEmail:e.email,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},M=[D,...t];n(M),o(!1),s(D.id),v("  !"),setTimeout(()=>v(""),2e3),console.log("  :",e.email,l)}else if(i){const N=Ql(fn,"notes",i);await vg(N,{title:l,content:c,tags:d.split(",").map(M=>M.trim()).filter(M=>M),userEmail:e.email,updatedAt:jn()});const D=t.map(M=>M.id===i?{...M,title:l,content:c,tags:d.split(",").map(I=>I.trim()).filter(I=>I),updatedAt:new Date().toISOString()}:M);n(D),v("  !"),setTimeout(()=>v(""),2e3)}}catch(N){console.error("  :",N),v("  ."),setTimeout(()=>v(""),2e3)}},x=async N=>{if(confirm("  ?"))try{await yF(Ql(fn,"notes",N));const D=t.filter(M=>M.id!==N);n(D),i===N&&(s(null),o(!1))}catch(D){console.error("  :",D),alert("  .")}},_=N=>new Date(N).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric"}),S=r?"bg-gray-800 border-gray-700":"bg-white border-gray-200",E=r?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300",C=r?"text-gray-300":"text-gray-700";return P.jsxs("div",{className:"min-h-screen space-y-8",children:[b&&P.jsx(Ye.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`fixed top-20 right-4 px-6 py-3 rounded-lg shadow-lg font-semibold text-white z-50 ${b.includes("")?"bg-red-600":"bg-green-600"}`,children:b}),P.jsxs(Ye.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6},children:[P.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-indigo-600 to-blue-600 dark:from-indigo-400 dark:to-blue-400 bg-clip-text text-transparent",children:" "}),P.jsx("p",{className:`text-sm sm:text-base ${r?"text-gray-300":"text-gray-600"}`,children:", ,    "})]}),P.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[P.jsxs(Ye.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.6},className:`p-6 rounded-lg border ${S}`,children:[P.jsxs("div",{className:"flex justify-between items-center mb-4",children:[P.jsx("h2",{className:"text-xl font-bold",children:" "}),P.jsx("button",{onClick:w,className:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium",children:"+  "})]}),P.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:t.length===0?P.jsx("p",{className:`text-sm ${r?"text-gray-400":"text-gray-500"}`,children:" ."}):t.map(N=>P.jsxs("div",{onClick:()=>y(N),className:`p-3 rounded-lg cursor-pointer transition-all ${i===N.id?r?"bg-blue-900 border-blue-500":"bg-blue-100 border-blue-400":r?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"} border`,children:[P.jsx("p",{className:"font-semibold text-sm truncate",children:N.title}),P.jsx("p",{className:`text-xs ${r?"text-gray-400":"text-gray-500"}`,children:_(N.updatedAt)})]},N.id))})]}),P.jsx(Ye.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:`p-6 rounded-lg border lg:col-span-2 ${S}`,children:a||i?P.jsxs("div",{className:"space-y-4",children:[P.jsxs("div",{children:[P.jsx("label",{className:`block text-sm font-semibold mb-2 ${C}`,children:""}),P.jsx("input",{type:"text",value:l,onChange:N=>u(N.target.value),placeholder:"  ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${E}`})]}),P.jsxs("div",{children:[P.jsx("label",{className:`block text-sm font-semibold mb-2 ${C}`,children:" ( )"}),P.jsx("input",{type:"text",value:d,onChange:N=>f(N.target.value),placeholder:": , Kerr metric, ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${E}`})]}),P.jsxs("div",{children:[P.jsx("label",{className:`block text-sm font-semibold mb-2 ${C}`,children:""}),P.jsx("textarea",{value:c,onChange:N=>h(N.target.value),placeholder:"  ",rows:"12",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none ${E}`})]}),P.jsxs("div",{className:"flex gap-2 justify-end",children:[P.jsx("button",{onClick:()=>{o(!1),s(null)},className:`px-4 py-2 rounded-lg font-medium ${r?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-900"}`,children:""}),i&&P.jsx("button",{onClick:()=>x(i),className:"px-4 py-2 rounded-lg font-medium bg-red-600 hover:bg-red-700 text-white",children:""}),P.jsx("button",{onClick:A,className:"px-4 py-2 rounded-lg font-medium bg-blue-600 hover:bg-blue-700 text-white",children:""})]})]}):P.jsxs("div",{className:`text-center py-12 ${r?"text-gray-400":"text-gray-500"}`,children:[P.jsx("p",{className:"text-lg",children:"     "}),P.jsx("p",{className:"text-sm mt-2",children:" : ,  ,      !"})]})})]}),t.length>0&&P.jsxs(Ye.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`p-6 rounded-lg border ${S}`,children:[P.jsx("h3",{className:"text-lg font-bold mb-3",children:""}),P.jsx("div",{className:"flex flex-wrap gap-2",children:[...new Set(t.flatMap(N=>N.tags).sort())].map(N=>P.jsxs("button",{onClick:()=>{const D=t.filter(M=>M.tags.includes(N));D.length>0&&y(D[0])},className:`px-3 py-1 rounded-full text-sm font-medium transition-all ${r?"bg-gray-700 text-gray-200 hover:bg-blue-600":"bg-gray-200 text-gray-800 hover:bg-blue-500 hover:text-white"}`,children:["#",N]},N))})]})]})}const Uy="global-whiteboard",rge=15e3,nge=45e3,ige=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(16).slice(2)}`;function sge(){const r=se.useRef(null),e=se.useRef(null),t=se.useRef(null),[n,i]=se.useState([]),[s,a]=se.useState(null),[o,l]=se.useState(!1),[u,c]=se.useState("#0ea5e9"),[h,d]=se.useState(4),[f,p]=se.useState([]),[g,b]=se.useState(!0),[v,w]=se.useState("  ..."),[y,A]=se.useState(null),{isDark:x}=Qs(),_=se.useMemo(()=>yc(),[]),S=se.useMemo(ige,[]),E=se.useMemo(()=>Ql(fn,"whiteboardSessions",Uy),[]),C=se.useMemo(()=>J0(Ca(fn,"whiteboardSessions",Uy,"strokes"),zC("createdAt")),[]),N=se.useMemo(()=>Ca(fn,"whiteboardSessions",Uy,"presence"),[]),D=se.useCallback(async()=>{try{(await gF(E)).exists()||await qM(E,{createdAt:jn(),lastActivity:jn(),title:"Research Collaboration Whiteboard"})}catch(R){A("   .   ."),console.error(R)}},[E]),M=se.useCallback(()=>{const R=r.current,Y=e.current;if(!R||!Y)return;const{width:H,height:he}=Y.getBoundingClientRect(),fe=window.devicePixelRatio||1;R.width=Math.floor(H*fe),R.height=Math.floor(he*fe),R.style.width=`${H}px`,R.style.height=`${he}px`,R.getContext("2d").setTransform(1,0,0,1,0,0)},[]),I=se.useCallback((R,Y)=>{var H;if((H=Y==null?void 0:Y.points)!=null&&H.length){R.lineCap="round",R.lineJoin="round",R.strokeStyle=Y.color,R.lineWidth=Y.size,R.globalAlpha=Y.opacity??1,R.beginPath(),R.moveTo(Y.points[0].x,Y.points[0].y);for(let he=1;he<Y.points.length;he+=1){const fe=Y.points[he];R.lineTo(fe.x,fe.y)}R.stroke(),R.globalAlpha=1}},[]),V=se.useCallback((R=null)=>{const Y=r.current;if(!Y)return;const H=Y.getContext("2d"),he=x?"#020617":"#f8fafc";H.save(),H.clearRect(0,0,Y.width,Y.height),H.fillStyle=he,H.fillRect(0,0,Y.width,Y.height),n.forEach(fe=>I(H,fe)),R&&I(H,R),H.restore()},[I,x,n]);se.useEffect(()=>{M(),V(s)},[s,V,M]),se.useEffect(()=>{const R=()=>{M(),V(s)};return window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)},[s,V,M]),se.useEffect(()=>{D()},[D]),se.useEffect(()=>{const R=HM(C,Y=>{const H=Y.docs.map(he=>({id:he.id,color:he.data().color,size:he.data().size,opacity:he.data().opacity??1,points:he.data().points??[]}));i(H),w(" "),b(!1)},Y=>{console.error(Y),A("   ."),b(!1)});return()=>R()},[C]),se.useEffect(()=>{const R=Ql(N,S),Y=async()=>{try{await qM(R,{userId:(_==null?void 0:_.uid)??S,displayName:(_==null?void 0:_.username)??" ",affiliation:(_==null?void 0:_.affiliation)??"",updatedAt:jn(),joinedAt:jn()},{merge:!0})}catch(he){console.error(he)}},H=async()=>{try{await vg(R,{updatedAt:jn()})}catch(he){console.error(he)}};return Y(),t.current=setInterval(H,rge),()=>{clearInterval(t.current),vg(R,{updatedAt:jn(),leftAt:jn()}).catch(()=>{}).finally(()=>yF(R).catch(()=>{}))}},[N,S,_]),se.useEffect(()=>{const R=HM(N,Y=>{const H=Date.now(),he=Y.docs.map(fe=>({id:fe.id,...fe.data()})).filter(fe=>{var re;return(re=fe.updatedAt)!=null&&re.toMillis?H-fe.updatedAt.toMillis()<nge:!1}).sort((fe,re)=>{var me,le,ve,ye;const W=((le=(me=fe.updatedAt)==null?void 0:me.toMillis)==null?void 0:le.call(me))??0;return(((ye=(ve=re.updatedAt)==null?void 0:ve.toMillis)==null?void 0:ye.call(ve))??0)-W});p(he)},Y=>console.error(Y));return()=>R()},[N]);const K=se.useCallback(R=>{const Y=r.current;if(!Y)return null;const H=Y.getBoundingClientRect(),{clientX:he,clientY:fe}=R,re=Y.width/H.width,W=Y.height/H.height;return{x:(he-H.left)*re,y:(fe-H.top)*W}},[]),F=R=>{R.preventDefault();const Y=K(R);if(!Y)return;a({color:u,size:h,points:[Y]}),l(!0);const he=r.current;he&&he.setPointerCapture(R.pointerId)},U=R=>{if(!o)return;R.preventDefault();const Y=K(R);Y&&a(H=>H&&{...H,points:[...H.points,Y]})},j=se.useCallback(async R=>{try{w("   ..."),await Qx(Ca(fn,"whiteboardSessions",Uy,"strokes"),{color:R.color,size:R.size,opacity:R.opacity??1,points:R.points,userId:(_==null?void 0:_.uid)??"guest",createdAt:jn()}),await vg(E,{lastActivity:jn()}),w(" ")}catch(Y){console.error(Y),A("  .   ."),w(" ")}},[E,_]),G=R=>{if(!o)return;R.preventDefault();const Y=r.current;if(Y)try{Y.releasePointerCapture(R.pointerId)}catch{}l(!1),a(H=>(H&&H.points.length&&j(H),null))},ee=R=>{o&&G(R)},ue=async()=>{try{w("  ...");const R=await Yx(Ca(fn,"whiteboardSessions",Uy,"strokes")),Y=Jce(fn);R.forEach(H=>Y.delete(H.ref)),await Y.commit(),await vg(E,{lastActivity:jn()}),w(" ")}catch(R){console.error(R),A("  ."),w(" ")}},te=()=>{const R=r.current;if(!R)return;const Y=R.toDataURL("image/png"),H=document.createElement("a");H.href=Y,H.download=`whiteboard-export-${Date.now()}.png`,H.click()};return se.useEffect(()=>{A(null)},[u,h]),P.jsx("div",{className:"px-4 py-10 sm:px-6 lg:px-8",children:P.jsxs("div",{className:"mx-auto flex max-w-6xl flex-col gap-6 lg:flex-row",children:[P.jsxs("section",{className:"flex-1 space-y-6",children:[P.jsxs("header",{className:"space-y-2",children:[P.jsx("h1",{className:"text-3xl font-semibold text-slate-900 dark:text-slate-100",children:"  "}),P.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"   ,  ,         .   Firestore   ,         ."})]}),P.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white shadow-sm dark:border-slate-700 dark:bg-slate-900",children:[P.jsxs("div",{className:"flex flex-wrap items-center gap-3 border-b border-slate-200 px-4 py-3 dark:border-slate-700",children:[P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("label",{htmlFor:"brush-color",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:" "}),P.jsx("input",{id:"brush-color",type:"color",value:u,onChange:R=>c(R.target.value),className:"h-9 w-14 cursor-pointer rounded border border-slate-200 dark:border-slate-600"})]}),P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("label",{htmlFor:"brush-size",className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:" "}),P.jsx("input",{id:"brush-size",type:"range",min:"2",max:"16",value:h,onChange:R=>d(Number(R.target.value)),className:"h-9 w-32"}),P.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[h,"px"]})]}),P.jsx("button",{type:"button",onClick:ue,className:"ml-auto inline-flex items-center gap-1 rounded-md bg-rose-500 px-3 py-2 text-xs font-semibold text-white shadow-sm transition hover:bg-rose-600",children:" "}),P.jsx("button",{type:"button",onClick:te,className:"inline-flex items-center gap-1 rounded-md bg-slate-800 px-3 py-2 text-xs font-semibold text-white shadow-sm transition hover:bg-slate-900 dark:bg-slate-100 dark:text-slate-900",children:"PNG "})]}),P.jsxs("div",{className:"relative overflow-hidden rounded-b-xl",ref:e,children:[g&&P.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center bg-white/80 text-sm font-medium text-slate-600 dark:bg-slate-900/80 dark:text-slate-200",children:"  ..."}),P.jsx("canvas",{ref:r,className:"h-[540px] w-full touch-none",onPointerDown:F,onPointerMove:U,onPointerUp:G,onPointerCancel:G,onPointerLeave:ee})]})]}),P.jsxs("footer",{className:"space-y-1 text-sm",children:[P.jsxs("p",{className:"font-medium text-slate-700 dark:text-slate-200",children:[": ",P.jsx("span",{className:"font-normal text-slate-600 dark:text-slate-300",children:v})]}),y&&P.jsx("p",{className:"text-sm text-rose-500",children:y})]})]}),P.jsxs("aside",{className:"w-full max-w-md space-y-4 rounded-xl border border-slate-200 bg-white p-5 shadow-sm dark:border-slate-700 dark:bg-slate-900",children:[P.jsxs("div",{children:[P.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"  "}),P.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:f.length>0?` ${f.length}  .`:"  .    ."})]}),P.jsx("ul",{className:"space-y-3",children:f.map(R=>{var Y,H,he,fe;return P.jsxs("li",{className:"flex items-start gap-3 rounded-lg border border-slate-200 px-3 py-2 text-sm dark:border-slate-700",children:[P.jsx("span",{className:"mt-1 inline-flex h-2.5 w-2.5 flex-shrink-0 rounded-full bg-emerald-500"}),P.jsxs("div",{children:[P.jsx("p",{className:"font-medium text-slate-700 dark:text-slate-200",children:R.displayName}),R.affiliation&&P.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:R.affiliation}),P.jsxs("p",{className:"text-xs text-slate-400",children:[" : ",((fe=(H=(Y=R.updatedAt)==null?void 0:Y.toDate)==null?void 0:(he=H.call(Y)).toLocaleTimeString)==null?void 0:fe.call(he,[],{hour:"2-digit",minute:"2-digit"}))??" "]})]})]},R.id)})}),P.jsx("div",{className:"rounded-lg bg-slate-50 p-3 text-xs text-slate-600 dark:bg-slate-800 dark:text-slate-300",children:"  Firestore ,           ."})]})]})})}const yK=(r,e,t)=>Math.min(Math.max(r,e),t);function age(){const r=se.useRef(null),e=se.useRef(null),t=se.useRef(null),n=se.useRef(0),[i,s]=se.useState(.25),[a,o]=se.useState(1.2),[l,u]=se.useState(.6),[c,h]=se.useState(1),[d,f]=se.useState(!0),{isDark:p}=Qs(),g=se.useCallback(()=>{const v=r.current;if(!v)return;const{width:w,height:y}=v.getBoundingClientRect(),A=window.devicePixelRatio||1;v.width=Math.floor(w*A),v.height=Math.floor(y*A),v.style.width=`${w}px`,v.style.height=`${y}px`},[]),b=se.useCallback(()=>{const v=r.current;if(!v)return;const w=v.getContext("2d"),y=v.width,A=v.height;w.setTransform(1,0,0,1,0,0),w.clearRect(0,0,y,A);const x=p?"#020617":"#f8fafc";w.fillStyle=x,w.fillRect(0,0,y,A);const _=1,S=yK(l,.1,5),E=_+S,C=a*(1+i),D=(Math.min(y,A)/2-48)/C,M=y/2,I=A/2;w.strokeStyle="#334155",w.lineWidth=1,w.setLineDash([4,4]),w.beginPath();for(let ie=0;ie<=360;ie+=2){const me=ie*Math.PI/180,le=a*(1-i**2)/(1+i*Math.cos(me)),ve=M+le*Math.cos(me)*D,ye=I+le*Math.sin(me)*D;ie===0?w.moveTo(ve,ye):w.lineTo(ve,ye)}w.closePath(),w.stroke(),w.setLineDash([]);const V=4*Math.PI**2,K=Math.sqrt(a**3/E),F=2*Math.PI/K,U=n.current*c*F%(2*Math.PI),G=((ie,me)=>{let le=ie;for(let ve=0;ve<6;ve+=1)le-=(le-me*Math.sin(le)-ie)/(1-me*Math.cos(le));return le})(U,i),ee=a*(1-i*Math.cos(G)),ue=2*Math.atan2(Math.sqrt(1+i)*Math.sin(G/2),Math.sqrt(1-i)*Math.cos(G/2)),te=Math.sqrt(V*E*(2/ee-1/a)),R=S/E,Y=M-R*ee*Math.cos(ue)*D,H=I-R*ee*Math.sin(ue)*D,he=_/E,fe=M+he*ee*Math.cos(ue)*D,re=I+he*ee*Math.sin(ue)*D;w.fillStyle="#f59e0b",w.beginPath(),w.arc(Y,H,12,0,Math.PI*2),w.fill(),w.fillStyle="#38bdf8",w.beginPath(),w.arc(fe,re,7,0,Math.PI*2),w.fill();const W=30;w.strokeStyle="#38bdf8",w.lineWidth=2,w.beginPath(),w.moveTo(fe,re),w.lineTo(fe-Math.sin(ue)*te*W,re+Math.cos(ue)*te*W),w.stroke(),w.fillStyle=p?"#e2e8f0":"#0f172a",w.font='14px "Fira Sans", system-ui',w.textAlign="left",w.fillText(`P = ${(K*365.25).toFixed(1)} `,20,30),w.fillText(`v = ${te.toFixed(2)} AU/`,20,52),w.fillText(`e = ${i.toFixed(2)}`,20,74)},[i,p,l,a,c]);return se.useEffect(()=>{g(),b()},[b,g]),se.useEffect(()=>{if(!r.current)return()=>{};const w=()=>{g(),b()};window.addEventListener("resize",w);const y=A=>{t.current==null&&(t.current=A);const x=(A-t.current)/1e3;t.current=A,d&&(n.current+=x,b()),e.current=requestAnimationFrame(y)};return e.current=requestAnimationFrame(y),()=>{window.removeEventListener("resize",w),e.current&&cancelAnimationFrame(e.current)}},[b,d,g]),P.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm dark:border-slate-700 dark:bg-slate-900",children:[P.jsxs("div",{className:"flex flex-col gap-4 border-b border-slate-200 p-6 dark:border-slate-700",children:[P.jsxs("div",{children:[P.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"  "}),P.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:"        . eccentricity   vis-viva   ."})]}),P.jsxs("div",{className:"flex flex-wrap gap-4",children:[P.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200",children:["",P.jsx("input",{type:"range",min:"0.0",max:"0.9",step:"0.01",value:i,onChange:v=>s(Number(v.target.value))}),P.jsx("span",{className:"w-10 text-right text-xs text-slate-500",children:i.toFixed(2)})]}),P.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200",children:["(AU)",P.jsx("input",{type:"range",min:"0.5",max:"3",step:"0.1",value:a,onChange:v=>o(Number(v.target.value))}),P.jsx("span",{className:"w-10 text-right text-xs text-slate-500",children:a.toFixed(1)})]}),P.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200",children:["(M2/M1)",P.jsx("input",{type:"range",min:"0.1",max:"3",step:"0.1",value:l,onChange:v=>u(Number(v.target.value))}),P.jsx("span",{className:"w-10 text-right text-xs text-slate-500",children:l.toFixed(1)})]}),P.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200",children:["",P.jsx("input",{type:"range",min:"0.2",max:"8",step:"0.2",value:c,onChange:v=>h(Number(v.target.value))}),P.jsxs("span",{className:"w-10 text-right text-xs text-slate-500",children:[c.toFixed(1),"x"]})]}),P.jsx("button",{type:"button",onClick:()=>f(v=>!v),className:"ml-auto inline-flex items-center rounded-md bg-slate-900 px-4 py-2 text-xs font-semibold text-white shadow-sm transition hover:bg-slate-700 dark:bg-slate-100 dark:text-slate-900",children:d?" ":""})]})]}),P.jsx("div",{className:"relative h-80 w-full overflow-hidden",children:P.jsx("canvas",{ref:r,className:"h-full w-full"})})]})}function oge(){const[r,e]=se.useState(8500),[t,n]=se.useState(12),[i,s]=se.useState(120),[a,o]=se.useState(.55),{isDark:l}=Qs(),u=se.useMemo(()=>{const d=[],p=1380649e-29,g=16735575e-34,b=299792458,v=r,w=Math.sqrt(2*p*v/g),y=t*1e3,A=i*1e3,_=656.28*1e-9*Math.sqrt((w**2+y**2)/b**2)*1e9,S=A/b*656.28,E=yK(a,.1,.95);for(let C=0;C<=320;C+=1){const N=(C/320-.5)*1.6,D=656.28+N,M=Math.exp(-(N**2)/(2*_**2)),I=S>0?Math.max(0,1-N**2/S**2):1,V=S>0?Math.sqrt(I):1,K=1-E*M*V;d.push({lambda:D,intensity:K})}return d},[r,t,i,a]),c=se.useMemo(()=>{if(!u.length)return"";const d=u[0].lambda,p=u[u.length-1].lambda-d;return u.map((g,b)=>{const v=(g.lambda-d)/p*100,w=(1-g.intensity)*100;return`${b===0?"M":"L"}${v.toFixed(3)},${w.toFixed(3)}`}).join(" ")},[u]),h=se.useMemo(()=>{if(!u.length)return 0;let d=0;for(let f=1;f<u.length;f+=1){const p=u[f-1],g=u[f],b=(p.intensity+g.intensity)/2,v=g.lambda-p.lambda;d+=(1-b)*v}return d},[u]);return P.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm dark:border-slate-700 dark:bg-slate-900",children:[P.jsxs("div",{className:"grid gap-6 border-b border-slate-200 p-6 lg:grid-cols-[auto,1fr] dark:border-slate-700",children:[P.jsxs("div",{children:[P.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"    "}),P.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:" ,    H  Voigt  . Equivalent Width    ."}),P.jsxs("dl",{className:"mt-4 space-y-2 text-xs text-slate-600 dark:text-slate-300",children:[P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("dt",{className:"w-24 font-medium",children:"Equivalent Width"}),P.jsxs("dd",{children:[h.toFixed(3)," nm"]})]}),P.jsxs("div",{className:"flex items-center gap-2",children:[P.jsx("dt",{className:"w-24 font-medium",children:" "}),P.jsx("dd",{children:Math.min(...u.map(d=>d.intensity)).toFixed(3)})]})]})]}),P.jsxs("div",{className:"flex flex-wrap gap-4",children:[P.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200",children:["(K)",P.jsx("input",{type:"range",min:"3500",max:"22000",step:"100",value:r,onChange:d=>e(Number(d.target.value))}),P.jsxs("span",{className:"w-16 text-right text-xs text-slate-500",children:[r,"K"]})]}),P.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200",children:["(km/s)",P.jsx("input",{type:"range",min:"1",max:"80",step:"1",value:t,onChange:d=>n(Number(d.target.value))}),P.jsxs("span",{className:"w-16 text-right text-xs text-slate-500",children:[t," km/s"]})]}),P.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200",children:["(km/s)",P.jsx("input",{type:"range",min:"0",max:"250",step:"5",value:i,onChange:d=>s(Number(d.target.value))}),P.jsxs("span",{className:"w-16 text-right text-xs text-slate-500",children:[i," km/s"]})]}),P.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200",children:["",P.jsx("input",{type:"range",min:"0.1",max:"0.9",step:"0.05",value:a,onChange:d=>o(Number(d.target.value))}),P.jsx("span",{className:"w-16 text-right text-xs text-slate-500",children:a.toFixed(2)})]})]})]}),P.jsx("div",{className:"relative h-72 w-full",children:P.jsxs("svg",{viewBox:"0 0 100 100",className:"absolute inset-0 h-full w-full",children:[P.jsx("defs",{children:P.jsxs("linearGradient",{id:"profileGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[P.jsx("stop",{offset:"0%",stopColor:l?"#38bdf8":"#0ea5e9",stopOpacity:"0.85"}),P.jsx("stop",{offset:"100%",stopColor:l?"#1d4ed8":"#2563eb",stopOpacity:"0.4"})]})}),P.jsx("rect",{x:"0",y:"0",width:"100",height:"100",fill:l?"#0f172a":"#f8fafc"}),P.jsx("path",{d:c,fill:"none",stroke:"url(#profileGradient)",strokeWidth:"1.75"}),P.jsx("line",{x1:"0",y1:"75",x2:"100",y2:"75",stroke:l?"#334155":"#cbd5f5",strokeDasharray:"2 3",strokeWidth:"0.4"}),P.jsx("text",{x:"50",y:"96",textAnchor:"middle",fontSize:"4",fill:l?"#cbd5f5":"#475569",children:"Wavelength (nm)"}),P.jsx("text",{x:"4",y:"8",fontSize:"4",fill:l?"#cbd5f5":"#475569",children:"Normalized Intensity"})]})})]})}function lge(){const[r,e]=se.useState(85),[t,n]=se.useState(2.2),[i,s]=se.useState(45),a=se.useMemo(()=>1.22*(t*1e-6)/(r||1)*(180/Math.PI)*3600*1e3,[r,t]),o=se.useMemo(()=>{const l=7.5+Math.log10(r)*.8,u=Math.log10(Math.max(i,1))*1.1;return(l+u).toFixed(2)},[r,i]);return P.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white shadow-sm dark:border-slate-700 dark:bg-slate-900",children:[P.jsxs("div",{className:"border-b border-slate-200 p-6 dark:border-slate-700",children:[P.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"  "}),P.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:" ,  , S/N  VLTi, CHARA        ."})]}),P.jsxs("div",{className:"grid gap-6 p-6 lg:grid-cols-2",children:[P.jsxs("div",{className:"space-y-4",children:[P.jsxs("label",{className:"flex items-center gap-3 text-sm text-slate-700 dark:text-slate-200",children:["  (m)",P.jsx("input",{type:"range",min:"10",max:"330",step:"5",value:r,onChange:l=>e(Number(l.target.value)),className:"flex-1"}),P.jsxs("span",{className:"w-16 text-right text-xs text-slate-500",children:[r.toFixed(0)," m"]})]}),P.jsxs("label",{className:"flex items-center gap-3 text-sm text-slate-700 dark:text-slate-200",children:[" (m)",P.jsx("input",{type:"range",min:"0.4",max:"13",step:"0.1",value:t,onChange:l=>n(Number(l.target.value)),className:"flex-1"}),P.jsxs("span",{className:"w-16 text-right text-xs text-slate-500",children:[t.toFixed(1)," m"]})]}),P.jsxs("label",{className:"flex items-center gap-3 text-sm text-slate-700 dark:text-slate-200",children:["S/N ",P.jsx("input",{type:"range",min:"5",max:"120",step:"1",value:i,onChange:l=>s(Number(l.target.value)),className:"flex-1"}),P.jsx("span",{className:"w-16 text-right text-xs text-slate-500",children:i.toFixed(0)})]})]}),P.jsxs("div",{className:"space-y-3 rounded-xl border border-slate-200 p-4 text-sm dark:border-slate-700",children:[P.jsxs("div",{className:"flex items-center justify-between",children:[P.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:""}),P.jsxs("span",{className:"text-slate-900 dark:text-slate-100",children:[a.toFixed(3)," mas"]})]}),P.jsxs("div",{className:"flex items-center justify-between",children:[P.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:"  "}),P.jsxs("span",{className:"text-slate-900 dark:text-slate-100",children:[o," "]})]}),P.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:" = 1.22  / B   .    ,     -  ."})]})]})]})}function uge(){return P.jsx("div",{className:"px-4 py-10 sm:px-6 lg:px-8",children:P.jsxs("div",{className:"mx-auto flex max-w-6xl flex-col gap-8",children:[P.jsxs("header",{className:"space-y-2",children:[P.jsx("h1",{className:"text-3xl font-semibold text-slate-900 dark:text-slate-100",children:" "}),P.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:", ,           .         ."})]}),P.jsx(age,{}),P.jsx(oge,{}),P.jsx(lge,{})]})})}function An(){return An=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},An.apply(null,arguments)}var bK={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null,legacySubset:!1};function xs(r,e){if(uT(r,e))return r[e];throw typeof r[e]=="function"&&LF(r,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function D0(r,e,t){if(uT(r,e))return r[e]=t,t;throw new Error('No access to property "'+e+'"')}function uT(r,e){return!hge(r)&&!Array.isArray(r)?!1:Je(dge,e)?!0:!(e in Object.prototype||e in Function.prototype)}function cge(r,e){if(!LF(r,e))throw new Error('No access to method "'+e+'"');return r[e]}function LF(r,e){return r==null||typeof r[e]!="function"||Je(r,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(r)?!1:Je(fge,e)?!0:!(e in Object.prototype||e in Function.prototype)}function hge(r){return typeof r=="object"&&r&&r.constructor===Object}var dge={length:!0,name:!0},fge={toString:!0,valueOf:!0,toLocaleString:!0};class JC{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return xs(this.wrappedObject,e)}set(e,t){return D0(this.wrappedObject,e,t),this}has(e){return uT(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return xK(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){uT(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class wK{constructor(e,t,n){this.a=e,this.b=t,this.bKeys=n,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,t){return this.bKeys.has(e)?this.b.set(e,t):this.a.set(e,t),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return xK(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function xK(r,e){return{next:()=>{var t=r.next();return t.done?t:{value:e(t.value),done:!1}}}}function F1(){return new Map}function Vg(r){if(!r)return F1();if(EK(r))return r;if(eN(r))return new JC(r);throw new Error("createMap can create maps from objects or Maps")}function mge(r){if(r instanceof JC)return r.wrappedObject;var e={};for(var t of r.keys()){var n=r.get(t);D0(e,t,n)}return e}function it(r){return typeof r=="number"}function xt(r){return!r||typeof r!="object"||typeof r.constructor!="function"?!1:r.isBigNumber===!0&&typeof r.constructor.prototype=="object"&&r.constructor.prototype.isBigNumber===!0||typeof r.constructor.isDecimal=="function"&&r.constructor.isDecimal(r)===!0}function Hb(r){return typeof r=="bigint"}function uc(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isComplex===!0||!1}function c_(r){return r&&typeof r=="object"&&Object.getPrototypeOf(r).isFraction===!0||!1}function _a(r){return r&&r.constructor.prototype.isUnit===!0||!1}function mn(r){return typeof r=="string"}var cr=Array.isArray;function ot(r){return r&&r.constructor.prototype.isMatrix===!0||!1}function Ia(r){return Array.isArray(r)||ot(r)}function cT(r){return r&&r.isDenseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function Af(r){return r&&r.isSparseMatrix&&r.constructor.prototype.isMatrix===!0||!1}function $F(r){return r&&r.constructor.prototype.isRange===!0||!1}function ZC(r){return r&&r.constructor.prototype.isIndex===!0||!1}function pge(r){return typeof r=="boolean"}function gge(r){return r&&r.constructor.prototype.isResultSet===!0||!1}function _K(r){return r&&r.constructor.prototype.isHelp===!0||!1}function AK(r){return typeof r=="function"}function vge(r){return r instanceof Date}function yge(r){return r instanceof RegExp}function eN(r){return!!(r&&typeof r=="object"&&r.constructor===Object&&!uc(r)&&!c_(r))}function EK(r){return r?r instanceof Map||r instanceof JC||typeof r.set=="function"&&typeof r.get=="function"&&typeof r.keys=="function"&&typeof r.has=="function":!1}function bge(r){return r===null}function wge(r){return r===void 0}function Sc(r){return r&&r.isAccessorNode===!0&&r.constructor.prototype.isNode===!0||!1}function ro(r){return r&&r.isArrayNode===!0&&r.constructor.prototype.isNode===!0||!1}function xge(r){return r&&r.isAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function _ge(r){return r&&r.isBlockNode===!0&&r.constructor.prototype.isNode===!0||!1}function Age(r){return r&&r.isConditionalNode===!0&&r.constructor.prototype.isNode===!0||!1}function Vt(r){return r&&r.isConstantNode===!0&&r.constructor.prototype.isNode===!0||!1}function EP(r){return Vt(r)||xn(r)&&r.args.length===1&&Vt(r.args[0])&&"-+~".includes(r.op)}function h_(r){return r&&r.isFunctionAssignmentNode===!0&&r.constructor.prototype.isNode===!0||!1}function Td(r){return r&&r.isFunctionNode===!0&&r.constructor.prototype.isNode===!0||!1}function ey(r){return r&&r.isIndexNode===!0&&r.constructor.prototype.isNode===!0||!1}function sr(r){return r&&r.isNode===!0&&r.constructor.prototype.isNode===!0||!1}function tN(r){return r&&r.isObjectNode===!0&&r.constructor.prototype.isNode===!0||!1}function xn(r){return r&&r.isOperatorNode===!0&&r.constructor.prototype.isNode===!0||!1}function Tc(r){return r&&r.isParenthesisNode===!0&&r.constructor.prototype.isNode===!0||!1}function Ege(r){return r&&r.isRangeNode===!0&&r.constructor.prototype.isNode===!0||!1}function Sge(r){return r&&r.isRelationalNode===!0&&r.constructor.prototype.isNode===!0||!1}function mi(r){return r&&r.isSymbolNode===!0&&r.constructor.prototype.isNode===!0||!1}function SK(r){return r&&r.constructor.prototype.isChain===!0||!1}function dr(r){var e=typeof r;return e==="object"?r===null?"null":xt(r)?"BigNumber":r.constructor&&r.constructor.name?r.constructor.name:"Object":e}function gt(r){var e=typeof r;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||r===null||r===void 0)return r;if(typeof r.clone=="function")return r.clone();if(Array.isArray(r))return r.map(function(t){return gt(t)});if(r instanceof Date)return new Date(r.valueOf());if(xt(r))return r;if(eN(r))return Tge(r,gt);if(e==="function")return r;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(r,")"))}function Tge(r,e){var t={};for(var n in r)Je(r,n)&&(t[n]=e(r[n]));return t}function TK(r,e){for(var t in e)Je(e,t)&&(r[t]=e[t]);return r}function Cc(r,e){var t,n,i;if(Array.isArray(r)){if(!Array.isArray(e)||r.length!==e.length)return!1;for(n=0,i=r.length;n<i;n++)if(!Cc(r[n],e[n]))return!1;return!0}else{if(typeof r=="function")return r===e;if(r instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(t in r)if(!(t in e)||!Cc(r[t],e[t]))return!1;for(t in e)if(!(t in r))return!1;return!0}else return r===e}}function Cge(r,e,t){var n=!0,i;Object.defineProperty(r,e,{get:function(){return n&&(i=t(),n=!1),i},set:function(a){i=a,n=!1},configurable:!0,enumerable:!0})}function Je(r,e){return r&&Object.hasOwnProperty.call(r,e)}function Nge(r,e){for(var t={},n=0;n<e.length;n++){var i=e[n],s=r[i];s!==void 0&&(t[i]=s)}return t}var Dge=["Matrix","Array"],Mge=["number","BigNumber","bigint","Fraction"],Ae=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(bK)};An(Ae,bK,{MATRIX_OPTIONS:Dge,NUMBER_OPTIONS:Mge});function K5(){return!0}function Va(){return!1}function Fp(){}const X5="Argument is not a typed-function.";function CK(){function r(q){return typeof q=="object"&&q!==null&&q.constructor===Object}const e=[{name:"number",test:function(q){return typeof q=="number"}},{name:"string",test:function(q){return typeof q=="string"}},{name:"boolean",test:function(q){return typeof q=="boolean"}},{name:"Function",test:function(q){return typeof q=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(q){return q instanceof Date}},{name:"RegExp",test:function(q){return q instanceof RegExp}},{name:"Object",test:r},{name:"null",test:function(q){return q===null}},{name:"undefined",test:function(q){return q===void 0}}],t={name:"any",test:K5,isAny:!0};let n,i,s=0,a={createCount:0};function o(q){const Q=n.get(q);if(Q)return Q;let ae='Unknown type "'+q+'"';const de=q.toLowerCase();let ge;for(ge of i)if(ge.toLowerCase()===de){ae+='. Did you mean "'+ge+'" ?';break}throw new TypeError(ae)}function l(q){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const ae=Q?o(Q).index:i.length,de=[];for(let pe=0;pe<q.length;++pe){if(!q[pe]||typeof q[pe].name!="string"||typeof q[pe].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Ne=q[pe].name;if(n.has(Ne))throw new TypeError('Duplicate type name "'+Ne+'"');de.push(Ne),n.set(Ne,{name:Ne,test:q[pe].test,isAny:q[pe].isAny,index:ae+pe,conversionsTo:[]})}const ge=i.slice(ae);i=i.slice(0,ae).concat(de).concat(ge);for(let pe=ae+de.length;pe<i.length;++pe)n.get(i[pe]).index=pe}function u(){n=new Map,i=[],s=0,l([t],!1)}u(),l(e);function c(){let q;for(q of i)n.get(q).conversionsTo=[];s=0}function h(q){const Q=i.filter(ae=>{const de=n.get(ae);return!de.isAny&&de.test(q)});return Q.length?Q:["any"]}function d(q){return q&&typeof q=="function"&&"_typedFunctionData"in q}function f(q,Q,ae){if(!d(q))throw new TypeError(X5);const de=ae&&ae.exact,ge=Array.isArray(Q)?Q.join(","):Q,pe=A(ge),Ne=b(pe);if(!de||Ne in q.signatures){const et=q._typedFunctionData.signatureMap.get(Ne);if(et)return et}const Ee=pe.length;let Oe;if(de){Oe=[];let et;for(et in q.signatures)Oe.push(q._typedFunctionData.signatureMap.get(et))}else Oe=q._typedFunctionData.signatures;for(let et=0;et<Ee;++et){const Ct=pe[et],zt=[];let lt;for(lt of Oe){const pr=E(lt.params,et);if(!(!pr||Ct.restParam&&!pr.restParam)){if(!pr.hasAny){const B=y(pr);if(Ct.types.some(oe=>!B.has(oe.name)))continue}zt.push(lt)}}if(Oe=zt,Oe.length===0)break}let Se;for(Se of Oe)if(Se.params.length<=Ee)return Se;throw new TypeError("Signature not found (signature: "+(q.name||"unnamed")+"("+b(pe,", ")+"))")}function p(q,Q,ae){return f(q,Q,ae).implementation}function g(q,Q){const ae=o(Q);if(ae.test(q))return q;const de=ae.conversionsTo;if(de.length===0)throw new Error("There are no conversions to "+Q+" defined.");for(let ge=0;ge<de.length;ge++)if(o(de[ge].from).test(q))return de[ge].convert(q);throw new Error("Cannot convert "+q+" to "+Q)}function b(q){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return q.map(ae=>ae.name).join(Q)}function v(q){const Q=q.indexOf("...")===0,de=(Q?q.length>3?q.slice(3):"any":q).split("|").map(Ee=>o(Ee.trim()));let ge=!1,pe=Q?"...":"";return{types:de.map(function(Ee){return ge=Ee.isAny||ge,pe+=Ee.name+"|",{name:Ee.name,typeIndex:Ee.index,test:Ee.test,isAny:Ee.isAny,conversion:null,conversionIndex:-1}}),name:pe.slice(0,-1),hasAny:ge,hasConversion:!1,restParam:Q}}function w(q){const Q=q.types.map(Ne=>Ne.name),ae=U(Q);let de=q.hasAny,ge=q.name;const pe=ae.map(function(Ne){const Ee=o(Ne.from);return de=Ee.isAny||de,ge+="|"+Ne.from,{name:Ne.from,typeIndex:Ee.index,test:Ee.test,isAny:Ee.isAny,conversion:Ne,conversionIndex:Ne.index}});return{types:q.types.concat(pe),name:ge,hasAny:de,hasConversion:pe.length>0,restParam:q.restParam}}function y(q){return q.typeSet||(q.typeSet=new Set,q.types.forEach(Q=>q.typeSet.add(Q.name))),q.typeSet}function A(q){const Q=[];if(typeof q!="string")throw new TypeError("Signatures must be strings");const ae=q.trim();if(ae==="")return Q;const de=ae.split(",");for(let ge=0;ge<de.length;++ge){const pe=v(de[ge].trim());if(pe.restParam&&ge!==de.length-1)throw new SyntaxError('Unexpected rest parameter "'+de[ge]+'": only allowed for the last parameter');if(pe.types.length===0)return null;Q.push(pe)}return Q}function x(q){const Q=W(q);return Q?Q.restParam:!1}function _(q){if(!q||q.types.length===0)return K5;if(q.types.length===1)return o(q.types[0].name).test;if(q.types.length===2){const Q=o(q.types[0].name).test,ae=o(q.types[1].name).test;return function(ge){return Q(ge)||ae(ge)}}else{const Q=q.types.map(function(ae){return o(ae.name).test});return function(de){for(let ge=0;ge<Q.length;ge++)if(Q[ge](de))return!0;return!1}}}function S(q){let Q,ae,de;if(x(q)){Q=re(q).map(_);const ge=Q.length,pe=_(W(q)),Ne=function(Ee){for(let Oe=ge;Oe<Ee.length;Oe++)if(!pe(Ee[Oe]))return!1;return!0};return function(Oe){for(let Se=0;Se<Q.length;Se++)if(!Q[Se](Oe[Se]))return!1;return Ne(Oe)&&Oe.length>=ge+1}}else return q.length===0?function(pe){return pe.length===0}:q.length===1?(ae=_(q[0]),function(pe){return ae(pe[0])&&pe.length===1}):q.length===2?(ae=_(q[0]),de=_(q[1]),function(pe){return ae(pe[0])&&de(pe[1])&&pe.length===2}):(Q=q.map(_),function(pe){for(let Ne=0;Ne<Q.length;Ne++)if(!Q[Ne](pe[Ne]))return!1;return pe.length===Q.length})}function E(q,Q){return Q<q.length?q[Q]:x(q)?W(q):null}function C(q,Q){const ae=E(q,Q);return ae?y(ae):new Set}function N(q){return q.conversion===null||q.conversion===void 0}function D(q,Q){const ae=new Set;return q.forEach(de=>{const ge=C(de.params,Q);let pe;for(pe of ge)ae.add(pe)}),ae.has("any")?["any"]:Array.from(ae)}function M(q,Q,ae){let de,ge;const pe=q||"unnamed";let Ne=ae,Ee;for(Ee=0;Ee<Q.length;Ee++){const Ct=[];if(Ne.forEach(zt=>{const lt=E(zt.params,Ee),pr=_(lt);(Ee<zt.params.length||x(zt.params))&&pr(Q[Ee])&&Ct.push(zt)}),Ct.length===0){if(ge=D(Ne,Ee),ge.length>0){const zt=h(Q[Ee]);return de=new TypeError("Unexpected type of argument in function "+pe+" (expected: "+ge.join(" or ")+", actual: "+zt.join(" | ")+", index: "+Ee+")"),de.data={category:"wrongType",fn:pe,index:Ee,actual:zt,expected:ge},de}}else Ne=Ct}const Oe=Ne.map(function(Ct){return x(Ct.params)?1/0:Ct.params.length});if(Q.length<Math.min.apply(null,Oe))return ge=D(Ne,Ee),de=new TypeError("Too few arguments in function "+pe+" (expected: "+ge.join(" or ")+", index: "+Q.length+")"),de.data={category:"tooFewArgs",fn:pe,index:Q.length,expected:ge},de;const Se=Math.max.apply(null,Oe);if(Q.length>Se)return de=new TypeError("Too many arguments in function "+pe+" (expected: "+Se+", actual: "+Q.length+")"),de.data={category:"tooManyArgs",fn:pe,index:Q.length,expectedLength:Se},de;const et=[];for(let Ct=0;Ct<Q.length;++Ct)et.push(h(Q[Ct]).join("|"));return de=new TypeError('Arguments of type "'+et.join(", ")+'" do not match any of the defined signatures of function '+pe+"."),de.data={category:"mismatch",actual:et},de}function I(q){let Q=i.length+1;for(let ae=0;ae<q.types.length;ae++)Q=Math.min(Q,q.types[ae].typeIndex);return Q}function V(q){let Q=s+1;for(let ae=0;ae<q.types.length;ae++)N(q.types[ae])||(Q=Math.min(Q,q.types[ae].conversionIndex));return Q}function K(q,Q){if(q.hasAny){if(!Q.hasAny)return .1}else if(Q.hasAny)return-.1;if(q.restParam){if(!Q.restParam)return .01}else if(Q.restParam)return-.01;const ae=I(q)-I(Q);if(ae<0)return-.001;if(ae>0)return .001;const de=V(q),ge=V(Q);if(q.hasConversion){if(!Q.hasConversion)return(1+de)*1e-6}else if(Q.hasConversion)return-(1+ge)*1e-6;const pe=de-ge;return pe<0?-1e-7:pe>0?1e-7:0}function F(q,Q){const ae=q.params,de=Q.params,ge=W(ae),pe=W(de),Ne=x(ae),Ee=x(de);if(Ne&&ge.hasAny){if(!Ee||!pe.hasAny)return 1e7}else if(Ee&&pe.hasAny)return-1e7;let Oe=0,Se=0,et;for(et of ae)et.hasAny&&++Oe,et.hasConversion&&++Se;let Ct=0,zt=0;for(et of de)et.hasAny&&++Ct,et.hasConversion&&++zt;if(Oe!==Ct)return(Oe-Ct)*1e6;if(Ne&&ge.hasConversion){if(!Ee||!pe.hasConversion)return 1e5}else if(Ee&&pe.hasConversion)return-1e5;if(Se!==zt)return(Se-zt)*1e4;if(Ne){if(!Ee)return 1e3}else if(Ee)return-1e3;const lt=(ae.length-de.length)*(Ne?-100:100);if(lt!==0)return lt;const pr=[];let B=0;for(let ze=0;ze<ae.length;++ze){const ut=K(ae[ze],de[ze]);pr.push(ut),B+=ut}if(B!==0)return(B<0?-10:10)+B;let oe,we=9;const Me=we/(pr.length+1);for(oe of pr){if(oe!==0)return(oe<0?-we:we)+oe;we-=Me}return 0}function U(q){if(q.length===0)return[];const Q=q.map(o);if(q.length===1)return Q[0].conversionsTo;const ae=new Set(q),de=new Set;for(let pe=0;pe<Q.length;++pe)for(const Ne of Q[pe].conversionsTo)ae.has(Ne.from)||de.add(Ne.from);const ge=[];for(const pe of de){let Ne=s+1,Ee=null;for(let Oe=0;Oe<Q.length;++Oe)for(const Se of Q[Oe].conversionsTo)Se.from===pe&&Se.index<Ne&&(Ne=Se.index,Ee=Se);ge.push(Ee)}return ge}function j(q,Q){let ae=Q,de="";if(q.some(pe=>pe.hasConversion)){const pe=x(q),Ne=q.map(G);de=Ne.map(Ee=>Ee.name).join(";"),ae=function(){const Oe=[],Se=pe?arguments.length-1:arguments.length;for(let et=0;et<Se;et++)Oe[et]=Ne[et](arguments[et]);return pe&&(Oe[Se]=arguments[Se].map(Ne[Se])),Q.apply(this,Oe)}}let ge=ae;if(x(q)){const pe=q.length-1;ge=function(){return ae.apply(this,ie(arguments,0,pe).concat([ie(arguments,pe)]))}}return de&&Object.defineProperty(ge,"name",{value:de}),ge}function G(q){let Q,ae,de,ge;const pe=[],Ne=[];let Ee="";q.types.forEach(function(Se){Se.conversion&&(Ee+=Se.conversion.from+"~>"+Se.conversion.to+",",pe.push(o(Se.conversion.from).test),Ne.push(Se.conversion.convert))}),Ee?Ee=Ee.slice(0,-1):Ee="pass";let Oe=Se=>Se;switch(Ne.length){case 0:break;case 1:Q=pe[0],de=Ne[0],Oe=function(et){return Q(et)?de(et):et};break;case 2:Q=pe[0],ae=pe[1],de=Ne[0],ge=Ne[1],Oe=function(et){return Q(et)?de(et):ae(et)?ge(et):et};break;default:Oe=function(et){for(let Ct=0;Ct<Ne.length;Ct++)if(pe[Ct](et))return Ne[Ct](et);return et}}return Object.defineProperty(Oe,"name",{value:Ee}),Oe}function ee(q){function Q(ae,de,ge){if(de<ae.length){const pe=ae[de];let Ne=[];if(pe.restParam){const Ee=pe.types.filter(N);Ee.length<pe.types.length&&Ne.push({types:Ee,name:"..."+Ee.map(Oe=>Oe.name).join("|"),hasAny:Ee.some(Oe=>Oe.isAny),hasConversion:!1,restParam:!0}),Ne.push(pe)}else Ne=pe.types.map(function(Ee){return{types:[Ee],name:Ee.name,hasAny:Ee.isAny,hasConversion:Ee.conversion,restParam:!1}});return le(Ne,function(Ee){return Q(ae,de+1,ge.concat([Ee]))})}else return[ge]}return Q(q,0,[])}function ue(q,Q){const ae=Math.max(q.length,Q.length);for(let Ee=0;Ee<ae;Ee++){const Oe=C(q,Ee),Se=C(Q,Ee);let et=!1,Ct;for(Ct of Se)if(Oe.has(Ct)){et=!0;break}if(!et)return!1}const de=q.length,ge=Q.length,pe=x(q),Ne=x(Q);return pe?Ne?de===ge:ge>=de:Ne?de>=ge:de===ge}function te(q){return q.map(Q=>Ge(Q)?Ie(Q.referToSelf.callback):Ue(Q)?ye(Q.referTo.references,Q.referTo.callback):Q)}function R(q,Q,ae){const de=[];let ge;for(ge of q){let pe=ae[ge];if(typeof pe!="number")throw new TypeError('No definition for referenced signature "'+ge+'"');if(pe=Q[pe],typeof pe!="function")return!1;de.push(pe)}return de}function Y(q,Q,ae){const de=te(q),ge=new Array(de.length).fill(!1);let pe=!0;for(;pe;){pe=!1;let Ne=!0;for(let Ee=0;Ee<de.length;++Ee){if(ge[Ee])continue;const Oe=de[Ee];if(Ge(Oe))de[Ee]=Oe.referToSelf.callback(ae),de[Ee].referToSelf=Oe.referToSelf,ge[Ee]=!0,Ne=!1;else if(Ue(Oe)){const Se=R(Oe.referTo.references,de,Q);Se?(de[Ee]=Oe.referTo.callback.apply(this,Se),de[Ee].referTo=Oe.referTo,ge[Ee]=!0,Ne=!1):pe=!0}}if(Ne&&pe)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return de}function H(q){const Q=/\bthis(\(|\.signatures\b)/;Object.keys(q).forEach(ae=>{const de=q[ae];if(Q.test(de.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function he(q,Q){if(a.createCount++,Object.keys(Q).length===0)throw new SyntaxError("No signatures provided");a.warnAgainstDeprecatedThis&&H(Q);const ae=[],de=[],ge={},pe=[];let Ne;for(Ne in Q){if(!Object.prototype.hasOwnProperty.call(Q,Ne))continue;const Zt=A(Ne);if(!Zt)continue;ae.forEach(function(kc){if(ue(kc,Zt))throw new TypeError('Conflicting signatures "'+b(kc)+'" and "'+b(Zt)+'".')}),ae.push(Zt);const Li=de.length;de.push(Q[Ne]);const I_=Zt.map(w);let Zd;for(Zd of ee(I_)){const kc=b(Zd);pe.push({params:Zd,name:kc,fn:Li}),Zd.every(vy=>!vy.hasConversion)&&(ge[kc]=Li)}}pe.sort(F);const Ee=Y(de,ge,Js);let Oe;for(Oe in ge)Object.prototype.hasOwnProperty.call(ge,Oe)&&(ge[Oe]=Ee[ge[Oe]]);const Se=[],et=new Map;for(Oe of pe)et.has(Oe.name)||(Oe.fn=Ee[Oe.fn],Se.push(Oe),et.set(Oe.name,Oe));const Ct=Se[0]&&Se[0].params.length<=2&&!x(Se[0].params),zt=Se[1]&&Se[1].params.length<=2&&!x(Se[1].params),lt=Se[2]&&Se[2].params.length<=2&&!x(Se[2].params),pr=Se[3]&&Se[3].params.length<=2&&!x(Se[3].params),B=Se[4]&&Se[4].params.length<=2&&!x(Se[4].params),oe=Se[5]&&Se[5].params.length<=2&&!x(Se[5].params),we=Ct&&zt&&lt&&pr&&B&&oe;for(let Zt=0;Zt<Se.length;++Zt)Se[Zt].test=S(Se[Zt].params);const Me=Ct?_(Se[0].params[0]):Va,ze=zt?_(Se[1].params[0]):Va,ut=lt?_(Se[2].params[0]):Va,vn=pr?_(Se[3].params[0]):Va,Oa=B?_(Se[4].params[0]):Va,dy=oe?_(Se[5].params[0]):Va,wN=Ct?_(Se[0].params[1]):Va,Rc=zt?_(Se[1].params[1]):Va,xN=lt?_(Se[2].params[1]):Va,_N=pr?_(Se[3].params[1]):Va,Dp=B?_(Se[4].params[1]):Va,E_=oe?_(Se[5].params[1]):Va;for(let Zt=0;Zt<Se.length;++Zt)Se[Zt].implementation=j(Se[Zt].params,Se[Zt].fn);const S_=Ct?Se[0].implementation:Fp,fy=zt?Se[1].implementation:Fp,Qd=lt?Se[2].implementation:Fp,AN=pr?Se[3].implementation:Fp,sl=B?Se[4].implementation:Fp,T_=oe?Se[5].implementation:Fp,C_=Ct?Se[0].params.length:-1,my=zt?Se[1].params.length:-1,py=lt?Se[2].params.length:-1,N_=pr?Se[3].params.length:-1,EN=B?Se[4].params.length:-1,D_=oe?Se[5].params.length:-1,SN=we?6:0,Mp=Se.length,M_=Se.map(Zt=>Zt.test),gy=Se.map(Zt=>Zt.implementation),Jd=function(){for(let Li=SN;Li<Mp;Li++)if(M_[Li](arguments))return gy[Li].apply(this,arguments);return a.onMismatch(q,arguments,Se)};function Js(Zt,Li){return arguments.length===C_&&Me(Zt)&&wN(Li)?S_.apply(this,arguments):arguments.length===my&&ze(Zt)&&Rc(Li)?fy.apply(this,arguments):arguments.length===py&&ut(Zt)&&xN(Li)?Qd.apply(this,arguments):arguments.length===N_&&vn(Zt)&&_N(Li)?AN.apply(this,arguments):arguments.length===EN&&Oa(Zt)&&Dp(Li)?sl.apply(this,arguments):arguments.length===D_&&dy(Zt)&&E_(Li)?T_.apply(this,arguments):Jd.apply(this,arguments)}try{Object.defineProperty(Js,"name",{value:q})}catch{}return Js.signatures=ge,Js._typedFunctionData={signatures:Se,signatureMap:et},Js}function fe(q,Q,ae){throw M(q,Q,ae)}function re(q){return ie(q,0,q.length-1)}function W(q){return q[q.length-1]}function ie(q,Q,ae){return Array.prototype.slice.call(q,Q,ae)}function me(q,Q){for(let ae=0;ae<q.length;ae++)if(Q(q[ae]))return q[ae]}function le(q,Q){return Array.prototype.concat.apply([],q.map(Q))}function ve(){const q=re(arguments).map(ae=>b(A(ae))),Q=W(arguments);if(typeof Q!="function")throw new TypeError("Callback function expected as last argument");return ye(q,Q)}function ye(q,Q){return{referTo:{references:q,callback:Q}}}function Ie(q){if(typeof q!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:q}}}function Ue(q){return q&&typeof q.referTo=="object"&&Array.isArray(q.referTo.references)&&typeof q.referTo.callback=="function"}function Ge(q){return q&&typeof q.referToSelf=="object"&&typeof q.referToSelf.callback=="function"}function Be(q,Q){if(!q)return Q;if(Q&&Q!==q){const ae=new Error("Function names do not match (expected: "+q+", actual: "+Q+")");throw ae.data={actual:Q,expected:q},ae}return q}function $e(q){let Q;for(const ae in q)Object.prototype.hasOwnProperty.call(q,ae)&&(d(q[ae])||typeof q[ae].signature=="string")&&(Q=Be(Q,q[ae].name));return Q}function He(q,Q){let ae;for(ae in Q)if(Object.prototype.hasOwnProperty.call(Q,ae)){if(ae in q&&Q[ae]!==q[ae]){const de=new Error('Signature "'+ae+'" is defined twice');throw de.data={signature:ae,sourceFunction:Q[ae],destFunction:q[ae]},de}q[ae]=Q[ae]}}const Z=a;a=function(q){const Q=typeof q=="string",ae=Q?1:0;let de=Q?q:"";const ge={};for(let pe=ae;pe<arguments.length;++pe){const Ne=arguments[pe];let Ee={},Oe;if(typeof Ne=="function"?(Oe=Ne.name,typeof Ne.signature=="string"?Ee[Ne.signature]=Ne:d(Ne)&&(Ee=Ne.signatures)):r(Ne)&&(Ee=Ne,Q||(Oe=$e(Ne))),Object.keys(Ee).length===0){const Se=new TypeError("Argument to 'typed' at index "+pe+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Se.data={index:pe,argument:Ne},Se}Q||(de=Be(de,Oe)),He(ge,Ee)}return he(de||"",ge)},a.create=CK,a.createCount=Z.createCount,a.onMismatch=fe,a.throwMismatchError=fe,a.createError=M,a.clear=u,a.clearConversions=c,a.addTypes=l,a._findType=o,a.referTo=ve,a.referToSelf=Ie,a.convert=g,a.findSignature=f,a.find=p,a.isTypedFunction=d,a.warnAgainstDeprecatedThis=!0,a.addType=function(q,Q){let ae="any";Q!==!1&&n.has("Object")&&(ae="Object"),a.addTypes([q],ae)};function ce(q){if(!q||typeof q.from!="string"||typeof q.to!="string"||typeof q.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(q.to===q.from)throw new SyntaxError('Illegal to define conversion from "'+q.from+'" to itself.')}return a.addConversion=function(q){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};ce(q);const ae=o(q.to),de=ae.conversionsTo.find(ge=>ge.from===q.from);if(de)if(Q&&Q.override)a.removeConversion({from:de.from,to:q.to,convert:de.convert});else throw new Error('There is already a conversion from "'+q.from+'" to "'+ae.name+'"');ae.conversionsTo.push({from:q.from,to:ae.name,convert:q.convert,index:s++})},a.addConversions=function(q,Q){q.forEach(ae=>a.addConversion(ae,Q))},a.removeConversion=function(q){ce(q);const Q=o(q.to),ae=me(Q.conversionsTo,ge=>ge.from===q.from);if(!ae)throw new Error("Attempt to remove nonexistent conversion from "+q.from+" to "+q.to);if(ae.convert!==q.convert)throw new Error("Conversion to remove does not match existing conversion");const de=Q.conversionsTo.indexOf(ae);Q.conversionsTo.splice(de,1)},a.resolve=function(q,Q){if(!d(q))throw new TypeError(X5);const ae=q._typedFunctionData.signatures;for(let de=0;de<ae.length;++de)if(ae[de].test(Q))return ae[de];return null},a}const hT=CK();function X(r,e,t,n){function i(s){var a=Nge(s,e.map(Rge));return Ige(r,e,s),t(a)}return i.isFactory=!0,i.fn=r,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function Ige(r,e,t){var n=e.filter(s=>!Pge(s)).every(s=>t[s]!==void 0);if(!n){var i=e.filter(s=>t[s]===void 0);throw new Error('Cannot create function "'.concat(r,'", ')+"some dependencies are missing: ".concat(i.map(s=>'"'.concat(s,'"')).join(", "),"."))}}function Pge(r){return r&&r[0]==="?"}function Rge(r){return r&&r[0]==="?"?r.slice(1):r}function tt(r){return typeof r=="boolean"?!0:Number.isFinite(r)?r===Math.round(r):!1}function Vd(r,e){if(e.number==="bigint")try{BigInt(r)}catch{return e.numberFallback}return e.number}var Qh=Math.sign||function(r){return r>0?1:r<0?-1:0},kge=Math.log2||function(e){return Math.log(e)/Math.LN2},Fge=Math.log10||function(e){return Math.log(e)/Math.LN10},Oge=Math.log1p||function(r){return Math.log(r+1)},Bge=Math.cbrt||function(e){if(e===0)return e;var t=e<0,n;return t&&(e=-e),Number.isFinite(e)?(n=Math.exp(Math.log(e)/3),n=(e/(n*n)+2*n)/3):n=e,t?-n:n},Lge=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function W2(r,e,t){var n={2:"0b",8:"0o",16:"0x"},i=n[e],s="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!tt(t))throw new Error("size must be an integer");if(r>2**(t-1)-1||r<-(2**(t-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!tt(r))throw new Error("Value must be an integer");r<0&&(r=r+2**t),s="i".concat(t)}var a="";return r<0&&(r=-r,a="-"),"".concat(a).concat(i).concat(r.toString(e)).concat(s)}function Gm(r,e){if(typeof e=="function")return e(r);if(r===1/0)return"Infinity";if(r===-1/0)return"-Infinity";if(isNaN(r))return"NaN";var{notation:t,precision:n,wordSize:i}=NK(e);switch(t){case"fixed":return DK(r,n);case"exponential":return MK(r,n);case"engineering":return $ge(r,n);case"bin":return W2(r,2,i);case"oct":return W2(r,8,i);case"hex":return W2(r,16,i);case"auto":return Vge(r,n,e).replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],a=arguments[4];return s!=="."?s+a:a});default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function NK(r){var e="auto",t,n;if(r!==void 0)if(it(r))t=r;else if(xt(r))t=r.toNumber();else if(eN(r))r.precision!==void 0&&(t=Y5(r.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),r.wordSize!==void 0&&(n=Y5(r.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),r.notation&&(e=r.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:t,wordSize:n}}function d_(r){var e=String(r).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+r);var t=e[1],n=e[2],i=parseFloat(e[4]||"0"),s=n.indexOf(".");i+=s!==-1?s-1:n.length-1;var a=n.replace(".","").replace(/^0*/,function(o){return i-=o.length,""}).replace(/0*$/,"").split("").map(function(o){return parseInt(o)});return a.length===0&&(a.push(0),i++),{sign:t,coefficients:a,exponent:i}}function $ge(r,e){if(isNaN(r)||!Number.isFinite(r))return String(r);var t=d_(r),n=rN(t,e),i=n.exponent,s=n.coefficients,a=i%3===0?i:i<0?i-3-i%3:i-i%3;if(it(e))for(;e>s.length||i-a+1>s.length;)s.push(0);else for(var o=Math.abs(i-a)-(s.length-1),l=0;l<o;l++)s.push(0);for(var u=Math.abs(i-a),c=1;u>0;)c++,u--;var h=s.slice(c).join(""),d=it(e)&&h.length||h.match(/[1-9]/)?"."+h:"",f=s.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+a.toString();return n.sign+f}function DK(r,e){if(isNaN(r)||!Number.isFinite(r))return String(r);var t=d_(r),n=typeof e=="number"?rN(t,t.exponent+1+e):t,i=n.coefficients,s=n.exponent+1,a=s+(e||0);return i.length<a&&(i=i.concat(Ug(a-i.length))),s<0&&(i=Ug(-s+1).concat(i),s=1),s<i.length&&i.splice(s,0,s===0?"0.":"."),n.sign+i.join("")}function MK(r,e){if(isNaN(r)||!Number.isFinite(Number(r)))return String(r);var t=d_(r),n=e?rN(t,e):t,i=n.coefficients,s=n.exponent;i.length<e&&(i=i.concat(Ug(e-i.length)));var a=i.shift();return n.sign+a+(i.length>0?"."+i.join(""):"")+"e"+(s>=0?"+":"")+s}function Vge(r,e,t){if(isNaN(r)||!Number.isFinite(r))return String(r);var n=Q5(t==null?void 0:t.lowerExp,-3),i=Q5(t==null?void 0:t.upperExp,5),s=d_(r),a=e?rN(s,e):s;if(a.exponent<n||a.exponent>=i)return MK(r,e);var o=a.coefficients,l=a.exponent;o.length<e&&(o=o.concat(Ug(e-o.length))),o=o.concat(Ug(l-o.length+1+(o.length<e?e-o.length:0))),o=Ug(-l).concat(o);var u=l>0?l:0;return u<o.length-1&&o.splice(u+1,0,"."),a.sign+o.join("")}function rN(r,e){for(var t={sign:r.sign,coefficients:r.coefficients,exponent:r.exponent},n=t.coefficients;e<=0;)n.unshift(0),t.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var s=e-1;for(n[s]++;n[s]===10;)n.pop(),s===0&&(n.unshift(0),t.exponent++,s++),s--,n[s]++}}return t}function Ug(r){for(var e=[],t=0;t<r;t++)e.push(0);return e}function Uge(r){return r.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function gi(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(t<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(r)||isNaN(e)?!1:!Number.isFinite(r)||!Number.isFinite(e)?r===e:r===e?!0:Math.abs(r-e)<=Math.max(t*Math.max(Math.abs(r),Math.abs(e)),n)}var zge=Math.acosh||function(r){return Math.log(Math.sqrt(r*r-1)+r)},jge=Math.asinh||function(r){return Math.log(Math.sqrt(r*r+1)+r)},qge=Math.atanh||function(r){return Math.log((1+r)/(1-r))/2},Hge=Math.cosh||function(r){return(Math.exp(r)+Math.exp(-r))/2},Gge=Math.sinh||function(r){return(Math.exp(r)-Math.exp(-r))/2},Wge=Math.tanh||function(r){var e=Math.exp(2*r);return(e-1)/(e+1)};function Kge(r,e){var t=!0,n=e>0?!0:e<0?!1:1/e===1/0;return t^n?-r:r}function Y5(r,e){if(it(r))return r;if(xt(r))return r.toNumber();e()}function Q5(r,e){return it(r)?r:xt(r)?r.toNumber():e}var IK=function(){return IK=hT.create,hT},Xge=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Yge=X("typed",Xge,function(e){var{BigNumber:t,Complex:n,DenseMatrix:i,Fraction:s}=e,a=IK();return a.clear(),a.addTypes([{name:"number",test:it},{name:"Complex",test:uc},{name:"BigNumber",test:xt},{name:"bigint",test:Hb},{name:"Fraction",test:c_},{name:"Unit",test:_a},{name:"identifier",test:o=>mn&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(o)},{name:"string",test:mn},{name:"Chain",test:SK},{name:"Array",test:cr},{name:"Matrix",test:ot},{name:"DenseMatrix",test:cT},{name:"SparseMatrix",test:Af},{name:"Range",test:$F},{name:"Index",test:ZC},{name:"boolean",test:pge},{name:"ResultSet",test:gge},{name:"Help",test:_K},{name:"function",test:AK},{name:"Date",test:vge},{name:"RegExp",test:yge},{name:"null",test:bge},{name:"undefined",test:wge},{name:"AccessorNode",test:Sc},{name:"ArrayNode",test:ro},{name:"AssignmentNode",test:xge},{name:"BlockNode",test:_ge},{name:"ConditionalNode",test:Age},{name:"ConstantNode",test:Vt},{name:"FunctionNode",test:Td},{name:"FunctionAssignmentNode",test:h_},{name:"IndexNode",test:ey},{name:"Node",test:sr},{name:"ObjectNode",test:tN},{name:"OperatorNode",test:xn},{name:"ParenthesisNode",test:Tc},{name:"RangeNode",test:Ege},{name:"RelationalNode",test:Sge},{name:"SymbolNode",test:mi},{name:"Map",test:EK},{name:"Object",test:eN}]),a.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(t||_A(l),Uge(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new t(l)}},{from:"number",to:"Complex",convert:function(l){return n||AA(l),new n(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return n||AA(l),new n(l.toNumber(),0)}},{from:"bigint",to:"number",convert:function(l){if(l>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+l+")");return Number(l)}},{from:"bigint",to:"BigNumber",convert:function(l){return t||_A(l),new t(l.toString())}},{from:"bigint",to:"Fraction",convert:function(l){return s||EA(l),new s(l)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return n||AA(l),new n(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){s||EA(l);var u=new s(l);if(u.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return u}},{from:"string",to:"number",convert:function(l){var u=Number(l);if(isNaN(u))throw new Error('Cannot convert "'+l+'" to a number');return u}},{from:"string",to:"BigNumber",convert:function(l){t||_A(l);try{return new t(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(l){try{return BigInt(l)}catch{throw new Error('Cannot convert "'+l+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(l){s||EA(l);try{return new s(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){n||AA(l);try{return new n(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return t||_A(l),new t(+l)}},{from:"boolean",to:"bigint",convert:function(l){return BigInt(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return s||EA(l),new s(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return i||Qge(),new i(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),a.onMismatch=(o,l,u)=>{var c=a.createError(o,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Ia(l[0])&&u.some(d=>!d.params.includes(","))){var h=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw h.data=c.data,h}throw c},a.onMismatch=(o,l,u)=>{var c=a.createError(o,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Ia(l[0])&&u.some(d=>!d.params.includes(","))){var h=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw h.data=c.data,h}throw c},a});function _A(r){throw new Error("Cannot convert value ".concat(r," into a BigNumber: no class 'BigNumber' provided"))}function AA(r){throw new Error("Cannot convert value ".concat(r," into a Complex number: no class 'Complex' provided"))}function Qge(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function EA(r){throw new Error("Cannot convert value ".concat(r," into a Fraction, no class 'Fraction' provided."))}var Jge="ResultSet",Zge=[],eve=X(Jge,Zge,()=>{function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.entries=e||[]}return r.prototype.type="ResultSet",r.prototype.isResultSet=!0,r.prototype.valueOf=function(){return this.entries},r.prototype.toString=function(){return"["+this.entries.map(String).join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},r.fromJSON=function(e){return new r(e.entries)},r},{isClass:!0});/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var xg=9e15,Ud=1e9,SP="0123456789abcdef",dT="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",fT="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",TP={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-xg,maxE:xg,crypto:!1},PK,ic,bt=!0,nN="[DecimalError] ",Cd=nN+"Invalid argument: ",RK=nN+"Precision limit exceeded",kK=nN+"crypto unavailable",FK="[object Decimal]",ns=Math.floor,Hn=Math.pow,tve=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,rve=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,nve=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,OK=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ko=1e7,ct=7,ive=9007199254740991,sve=dT.length-1,CP=fT.length-1,De={toStringTag:FK};De.absoluteValue=De.abs=function(){var r=new this.constructor(this);return r.s<0&&(r.s=1),st(r)};De.ceil=function(){return st(new this.constructor(this),this.e+1,2)};De.clampedTo=De.clamp=function(r,e){var t,n=this,i=n.constructor;if(r=new i(r),e=new i(e),!r.s||!e.s)return new i(NaN);if(r.gt(e))throw Error(Cd+e);return t=n.cmp(r),t<0?r:n.cmp(e)>0?e:new i(n)};De.comparedTo=De.cmp=function(r){var e,t,n,i,s=this,a=s.d,o=(r=new s.constructor(r)).d,l=s.s,u=r.s;if(!a||!o)return!l||!u?NaN:l!==u?l:a===o?0:!a^l<0?1:-1;if(!a[0]||!o[0])return a[0]?l:o[0]?-u:0;if(l!==u)return l;if(s.e!==r.e)return s.e>r.e^l<0?1:-1;for(n=a.length,i=o.length,e=0,t=n<i?n:i;e<t;++e)if(a[e]!==o[e])return a[e]>o[e]^l<0?1:-1;return n===i?0:n>i^l<0?1:-1};De.cosine=De.cos=function(){var r,e,t=this,n=t.constructor;return t.d?t.d[0]?(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+ct,n.rounding=1,t=ave(n,UK(n,t)),n.precision=r,n.rounding=e,st(ic==2||ic==3?t.neg():t,r,e,!0)):new n(1):new n(NaN)};De.cubeRoot=De.cbrt=function(){var r,e,t,n,i,s,a,o,l,u,c=this,h=c.constructor;if(!c.isFinite()||c.isZero())return new h(c);for(bt=!1,s=c.s*Hn(c.s*c,1/3),!s||Math.abs(s)==1/0?(t=Mi(c.d),r=c.e,(s=(r-t.length+1)%3)&&(t+=s==1||s==-2?"0":"00"),s=Hn(t,1/3),r=ns((r+1)/3)-(r%3==(r<0?-1:2)),s==1/0?t="5e"+r:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+r),n=new h(t),n.s=c.s):n=new h(s.toString()),a=(r=h.precision)+3;;)if(o=n,l=o.times(o).times(o),u=l.plus(c),n=Mr(u.plus(c).times(o),u.plus(l),a+2,1),Mi(o.d).slice(0,a)===(t=Mi(n.d)).slice(0,a))if(t=t.slice(a-3,a+1),t=="9999"||!i&&t=="4999"){if(!i&&(st(o,r+1,0),o.times(o).times(o).eq(c))){n=o;break}a+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(st(n,r+1,1),e=!n.times(n).times(n).eq(c));break}return bt=!0,st(n,r,h.rounding,e)};De.decimalPlaces=De.dp=function(){var r,e=this.d,t=NaN;if(e){if(r=e.length-1,t=(r-ns(this.e/ct))*ct,r=e[r],r)for(;r%10==0;r/=10)t--;t<0&&(t=0)}return t};De.dividedBy=De.div=function(r){return Mr(this,new this.constructor(r))};De.dividedToIntegerBy=De.divToInt=function(r){var e=this,t=e.constructor;return st(Mr(e,new t(r),0,1,1),t.precision,t.rounding)};De.equals=De.eq=function(r){return this.cmp(r)===0};De.floor=function(){return st(new this.constructor(this),this.e+1,3)};De.greaterThan=De.gt=function(r){return this.cmp(r)>0};De.greaterThanOrEqualTo=De.gte=function(r){var e=this.cmp(r);return e==1||e===0};De.hyperbolicCosine=De.cosh=function(){var r,e,t,n,i,s=this,a=s.constructor,o=new a(1);if(!s.isFinite())return new a(s.s?1/0:NaN);if(s.isZero())return o;t=a.precision,n=a.rounding,a.precision=t+Math.max(s.e,s.sd())+4,a.rounding=1,i=s.d.length,i<32?(r=Math.ceil(i/3),e=(1/sN(4,r)).toString()):(r=16,e="2.3283064365386962890625e-10"),s=M0(a,1,s.times(e),new a(1),!0);for(var l,u=r,c=new a(8);u--;)l=s.times(s),s=o.minus(l.times(c.minus(l.times(c))));return st(s,a.precision=t,a.rounding=n,!0)};De.hyperbolicSine=De.sinh=function(){var r,e,t,n,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(e=s.precision,t=s.rounding,s.precision=e+Math.max(i.e,i.sd())+4,s.rounding=1,n=i.d.length,n<3)i=M0(s,2,i,i,!0);else{r=1.4*Math.sqrt(n),r=r>16?16:r|0,i=i.times(1/sN(5,r)),i=M0(s,2,i,i,!0);for(var a,o=new s(5),l=new s(16),u=new s(20);r--;)a=i.times(i),i=i.times(o.plus(a.times(l.times(a).plus(u))))}return s.precision=e,s.rounding=t,st(i,e,t,!0)};De.hyperbolicTangent=De.tanh=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+7,n.rounding=1,Mr(t.sinh(),t.cosh(),n.precision=r,n.rounding=e)):new n(t.s)};De.inverseCosine=De.acos=function(){var r=this,e=r.constructor,t=r.abs().cmp(1),n=e.precision,i=e.rounding;return t!==-1?t===0?r.isNeg()?Ll(e,n,i):new e(0):new e(NaN):r.isZero()?Ll(e,n+4,i).times(.5):(e.precision=n+6,e.rounding=1,r=new e(1).minus(r).div(r.plus(1)).sqrt().atan(),e.precision=n,e.rounding=i,r.times(2))};De.inverseHyperbolicCosine=De.acosh=function(){var r,e,t=this,n=t.constructor;return t.lte(1)?new n(t.eq(1)?0:NaN):t.isFinite()?(r=n.precision,e=n.rounding,n.precision=r+Math.max(Math.abs(t.e),t.sd())+4,n.rounding=1,bt=!1,t=t.times(t).minus(1).sqrt().plus(t),bt=!0,n.precision=r,n.rounding=e,t.ln()):new n(t)};De.inverseHyperbolicSine=De.asinh=function(){var r,e,t=this,n=t.constructor;return!t.isFinite()||t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+2*Math.max(Math.abs(t.e),t.sd())+6,n.rounding=1,bt=!1,t=t.times(t).plus(1).sqrt().plus(t),bt=!0,n.precision=r,n.rounding=e,t.ln())};De.inverseHyperbolicTangent=De.atanh=function(){var r,e,t,n,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(r=s.precision,e=s.rounding,n=i.sd(),Math.max(n,r)<2*-i.e-1?st(new s(i),r,e,!0):(s.precision=t=n-i.e,i=Mr(i.plus(1),new s(1).minus(i),t+r,1),s.precision=r+4,s.rounding=1,i=i.ln(),s.precision=r,s.rounding=e,i.times(.5))):new s(NaN)};De.inverseSine=De.asin=function(){var r,e,t,n,i=this,s=i.constructor;return i.isZero()?new s(i):(e=i.abs().cmp(1),t=s.precision,n=s.rounding,e!==-1?e===0?(r=Ll(s,t+4,n).times(.5),r.s=i.s,r):new s(NaN):(s.precision=t+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=t,s.rounding=n,i.times(2)))};De.inverseTangent=De.atan=function(){var r,e,t,n,i,s,a,o,l,u=this,c=u.constructor,h=c.precision,d=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&h+4<=CP)return a=Ll(c,h+4,d).times(.25),a.s=u.s,a}else{if(!u.s)return new c(NaN);if(h+4<=CP)return a=Ll(c,h+4,d).times(.5),a.s=u.s,a}for(c.precision=o=h+10,c.rounding=1,t=Math.min(28,o/ct+2|0),r=t;r;--r)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(bt=!1,e=Math.ceil(o/ct),n=1,l=u.times(u),a=new c(u),i=u;r!==-1;)if(i=i.times(l),s=a.minus(i.div(n+=2)),i=i.times(l),a=s.plus(i.div(n+=2)),a.d[e]!==void 0)for(r=e;a.d[r]===s.d[r]&&r--;);return t&&(a=a.times(2<<t-1)),bt=!0,st(a,c.precision=h,c.rounding=d,!0)};De.isFinite=function(){return!!this.d};De.isInteger=De.isInt=function(){return!!this.d&&ns(this.e/ct)>this.d.length-2};De.isNaN=function(){return!this.s};De.isNegative=De.isNeg=function(){return this.s<0};De.isPositive=De.isPos=function(){return this.s>0};De.isZero=function(){return!!this.d&&this.d[0]===0};De.lessThan=De.lt=function(r){return this.cmp(r)<0};De.lessThanOrEqualTo=De.lte=function(r){return this.cmp(r)<1};De.logarithm=De.log=function(r){var e,t,n,i,s,a,o,l,u=this,c=u.constructor,h=c.precision,d=c.rounding,f=5;if(r==null)r=new c(10),e=!0;else{if(r=new c(r),t=r.d,r.s<0||!t||!t[0]||r.eq(1))return new c(NaN);e=r.eq(10)}if(t=u.d,u.s<0||!t||!t[0]||u.eq(1))return new c(t&&!t[0]?-1/0:u.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)s=!0;else{for(i=t[0];i%10===0;)i/=10;s=i!==1}if(bt=!1,o=h+f,a=Jh(u,o),n=e?mT(c,o+10):Jh(r,o),l=Mr(a,n,o,1),O1(l.d,i=h,d))do if(o+=10,a=Jh(u,o),n=e?mT(c,o+10):Jh(r,o),l=Mr(a,n,o,1),!s){+Mi(l.d).slice(i+1,i+15)+1==1e14&&(l=st(l,h+1,0));break}while(O1(l.d,i+=10,d));return bt=!0,st(l,h,d)};De.minus=De.sub=function(r){var e,t,n,i,s,a,o,l,u,c,h,d,f=this,p=f.constructor;if(r=new p(r),!f.d||!r.d)return!f.s||!r.s?r=new p(NaN):f.d?r.s=-r.s:r=new p(r.d||f.s!==r.s?f:NaN),r;if(f.s!=r.s)return r.s=-r.s,f.plus(r);if(u=f.d,d=r.d,o=p.precision,l=p.rounding,!u[0]||!d[0]){if(d[0])r.s=-r.s;else if(u[0])r=new p(f);else return new p(l===3?-0:0);return bt?st(r,o,l):r}if(t=ns(r.e/ct),c=ns(f.e/ct),u=u.slice(),s=c-t,s){for(h=s<0,h?(e=u,s=-s,a=d.length):(e=d,t=c,a=u.length),n=Math.max(Math.ceil(o/ct),a)+2,s>n&&(s=n,e.length=1),e.reverse(),n=s;n--;)e.push(0);e.reverse()}else{for(n=u.length,a=d.length,h=n<a,h&&(a=n),n=0;n<a;n++)if(u[n]!=d[n]){h=u[n]<d[n];break}s=0}for(h&&(e=u,u=d,d=e,r.s=-r.s),a=u.length,n=d.length-a;n>0;--n)u[a++]=0;for(n=d.length;n>s;){if(u[--n]<d[n]){for(i=n;i&&u[--i]===0;)u[i]=Ko-1;--u[i],u[n]+=Ko}u[n]-=d[n]}for(;u[--a]===0;)u.pop();for(;u[0]===0;u.shift())--t;return u[0]?(r.d=u,r.e=iN(u,t),bt?st(r,o,l):r):new p(l===3?-0:0)};De.modulo=De.mod=function(r){var e,t=this,n=t.constructor;return r=new n(r),!t.d||!r.s||r.d&&!r.d[0]?new n(NaN):!r.d||t.d&&!t.d[0]?st(new n(t),n.precision,n.rounding):(bt=!1,n.modulo==9?(e=Mr(t,r.abs(),0,3,1),e.s*=r.s):e=Mr(t,r,0,n.modulo,1),e=e.times(r),bt=!0,t.minus(e))};De.naturalExponential=De.exp=function(){return NP(this)};De.naturalLogarithm=De.ln=function(){return Jh(this)};De.negated=De.neg=function(){var r=new this.constructor(this);return r.s=-r.s,st(r)};De.plus=De.add=function(r){var e,t,n,i,s,a,o,l,u,c,h=this,d=h.constructor;if(r=new d(r),!h.d||!r.d)return!h.s||!r.s?r=new d(NaN):h.d||(r=new d(r.d||h.s===r.s?h:NaN)),r;if(h.s!=r.s)return r.s=-r.s,h.minus(r);if(u=h.d,c=r.d,o=d.precision,l=d.rounding,!u[0]||!c[0])return c[0]||(r=new d(h)),bt?st(r,o,l):r;if(s=ns(h.e/ct),n=ns(r.e/ct),u=u.slice(),i=s-n,i){for(i<0?(t=u,i=-i,a=c.length):(t=c,n=s,a=u.length),s=Math.ceil(o/ct),a=s>a?s+1:a+1,i>a&&(i=a,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(a=u.length,i=c.length,a-i<0&&(i=a,t=c,c=u,u=t),e=0;i;)e=(u[--i]=u[i]+c[i]+e)/Ko|0,u[i]%=Ko;for(e&&(u.unshift(e),++n),a=u.length;u[--a]==0;)u.pop();return r.d=u,r.e=iN(u,n),bt?st(r,o,l):r};De.precision=De.sd=function(r){var e,t=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(Cd+r);return t.d?(e=BK(t.d),r&&t.e+1>e&&(e=t.e+1)):e=NaN,e};De.round=function(){var r=this,e=r.constructor;return st(new e(r),r.e+1,e.rounding)};De.sine=De.sin=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+ct,n.rounding=1,t=lve(n,UK(n,t)),n.precision=r,n.rounding=e,st(ic>2?t.neg():t,r,e,!0)):new n(NaN)};De.squareRoot=De.sqrt=function(){var r,e,t,n,i,s,a=this,o=a.d,l=a.e,u=a.s,c=a.constructor;if(u!==1||!o||!o[0])return new c(!u||u<0&&(!o||o[0])?NaN:o?a:1/0);for(bt=!1,u=Math.sqrt(+a),u==0||u==1/0?(e=Mi(o),(e.length+l)%2==0&&(e+="0"),u=Math.sqrt(e),l=ns((l+1)/2)-(l<0||l%2),u==1/0?e="5e"+l:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),n=new c(e)):n=new c(u.toString()),t=(l=c.precision)+3;;)if(s=n,n=s.plus(Mr(a,s,t+2,1)).times(.5),Mi(s.d).slice(0,t)===(e=Mi(n.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!i&&e=="4999"){if(!i&&(st(s,l+1,0),s.times(s).eq(a))){n=s;break}t+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(st(n,l+1,1),r=!n.times(n).eq(a));break}return bt=!0,st(n,l,c.rounding,r)};De.tangent=De.tan=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+10,n.rounding=1,t=t.sin(),t.s=1,t=Mr(t,new n(1).minus(t.times(t)).sqrt(),r+10,0),n.precision=r,n.rounding=e,st(ic==2||ic==4?t.neg():t,r,e,!0)):new n(NaN)};De.times=De.mul=function(r){var e,t,n,i,s,a,o,l,u,c=this,h=c.constructor,d=c.d,f=(r=new h(r)).d;if(r.s*=c.s,!d||!d[0]||!f||!f[0])return new h(!r.s||d&&!d[0]&&!f||f&&!f[0]&&!d?NaN:!d||!f?r.s/0:r.s*0);for(t=ns(c.e/ct)+ns(r.e/ct),l=d.length,u=f.length,l<u&&(s=d,d=f,f=s,a=l,l=u,u=a),s=[],a=l+u,n=a;n--;)s.push(0);for(n=u;--n>=0;){for(e=0,i=l+n;i>n;)o=s[i]+f[n]*d[i-n-1]+e,s[i--]=o%Ko|0,e=o/Ko|0;s[i]=(s[i]+e)%Ko|0}for(;!s[--a];)s.pop();return e?++t:s.shift(),r.d=s,r.e=iN(s,t),bt?st(r,h.precision,h.rounding):r};De.toBinary=function(r,e){return VF(this,2,r,e)};De.toDecimalPlaces=De.toDP=function(r,e){var t=this,n=t.constructor;return t=new n(t),r===void 0?t:(Ys(r,0,Ud),e===void 0?e=n.rounding:Ys(e,0,8),st(t,r+t.e+1,e))};De.toExponential=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=tu(n,!0):(Ys(r,0,Ud),e===void 0?e=i.rounding:Ys(e,0,8),n=st(new i(n),r+1,e),t=tu(n,!0,r+1)),n.isNeg()&&!n.isZero()?"-"+t:t};De.toFixed=function(r,e){var t,n,i=this,s=i.constructor;return r===void 0?t=tu(i):(Ys(r,0,Ud),e===void 0?e=s.rounding:Ys(e,0,8),n=st(new s(i),r+i.e+1,e),t=tu(n,!1,r+n.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};De.toFraction=function(r){var e,t,n,i,s,a,o,l,u,c,h,d,f=this,p=f.d,g=f.constructor;if(!p)return new g(f);if(u=t=new g(1),n=l=new g(0),e=new g(n),s=e.e=BK(p)-f.e-1,a=s%ct,e.d[0]=Hn(10,a<0?ct+a:a),r==null)r=s>0?e:u;else{if(o=new g(r),!o.isInt()||o.lt(u))throw Error(Cd+o);r=o.gt(e)?s>0?e:u:o}for(bt=!1,o=new g(Mi(p)),c=g.precision,g.precision=s=p.length*ct*2;h=Mr(o,e,0,1,1),i=t.plus(h.times(n)),i.cmp(r)!=1;)t=n,n=i,i=u,u=l.plus(h.times(i)),l=i,i=e,e=o.minus(h.times(i)),o=i;return i=Mr(r.minus(t),n,0,1,1),l=l.plus(i.times(u)),t=t.plus(i.times(n)),l.s=u.s=f.s,d=Mr(u,n,s,1).minus(f).abs().cmp(Mr(l,t,s,1).minus(f).abs())<1?[u,n]:[l,t],g.precision=c,bt=!0,d};De.toHexadecimal=De.toHex=function(r,e){return VF(this,16,r,e)};De.toNearest=function(r,e){var t=this,n=t.constructor;if(t=new n(t),r==null){if(!t.d)return t;r=new n(1),e=n.rounding}else{if(r=new n(r),e===void 0?e=n.rounding:Ys(e,0,8),!t.d)return r.s?t:r;if(!r.d)return r.s&&(r.s=t.s),r}return r.d[0]?(bt=!1,t=Mr(t,r,0,e,1).times(r),bt=!0,st(t)):(r.s=t.s,t=r),t};De.toNumber=function(){return+this};De.toOctal=function(r,e){return VF(this,8,r,e)};De.toPower=De.pow=function(r){var e,t,n,i,s,a,o=this,l=o.constructor,u=+(r=new l(r));if(!o.d||!r.d||!o.d[0]||!r.d[0])return new l(Hn(+o,u));if(o=new l(o),o.eq(1))return o;if(n=l.precision,s=l.rounding,r.eq(1))return st(o,n,s);if(e=ns(r.e/ct),e>=r.d.length-1&&(t=u<0?-u:u)<=ive)return i=LK(l,o,t,n),r.s<0?new l(1).div(i):st(i,n,s);if(a=o.s,a<0){if(e<r.d.length-1)return new l(NaN);if(r.d[e]&1||(a=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=a,o}return t=Hn(+o,u),e=t==0||!isFinite(t)?ns(u*(Math.log("0."+Mi(o.d))/Math.LN10+o.e+1)):new l(t+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?a/0:0):(bt=!1,l.rounding=o.s=1,t=Math.min(12,(e+"").length),i=NP(r.times(Jh(o,n+t)),n),i.d&&(i=st(i,n+5,1),O1(i.d,n,s)&&(e=n+10,i=st(NP(r.times(Jh(o,e+t)),e),e+5,1),+Mi(i.d).slice(n+1,n+15)+1==1e14&&(i=st(i,n+1,0)))),i.s=a,bt=!0,l.rounding=s,st(i,n,s))};De.toPrecision=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=tu(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(Ys(r,1,Ud),e===void 0?e=i.rounding:Ys(e,0,8),n=st(new i(n),r,e),t=tu(n,r<=n.e||n.e<=i.toExpNeg,r)),n.isNeg()&&!n.isZero()?"-"+t:t};De.toSignificantDigits=De.toSD=function(r,e){var t=this,n=t.constructor;return r===void 0?(r=n.precision,e=n.rounding):(Ys(r,1,Ud),e===void 0?e=n.rounding:Ys(e,0,8)),st(new n(t),r,e)};De.toString=function(){var r=this,e=r.constructor,t=tu(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()&&!r.isZero()?"-"+t:t};De.truncated=De.trunc=function(){return st(new this.constructor(this),this.e+1,1)};De.valueOf=De.toJSON=function(){var r=this,e=r.constructor,t=tu(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()?"-"+t:t};function Mi(r){var e,t,n,i=r.length-1,s="",a=r[0];if(i>0){for(s+=a,e=1;e<i;e++)n=r[e]+"",t=ct-n.length,t&&(s+=Wc(t)),s+=n;a=r[e],n=a+"",t=ct-n.length,t&&(s+=Wc(t))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}function Ys(r,e,t){if(r!==~~r||r<e||r>t)throw Error(Cd+r)}function O1(r,e,t,n){var i,s,a,o;for(s=r[0];s>=10;s/=10)--e;return--e<0?(e+=ct,i=0):(i=Math.ceil((e+1)/ct),e%=ct),s=Hn(10,ct-e),o=r[i]%s|0,n==null?e<3?(e==0?o=o/100|0:e==1&&(o=o/10|0),a=t<4&&o==99999||t>3&&o==49999||o==5e4||o==0):a=(t<4&&o+1==s||t>3&&o+1==s/2)&&(r[i+1]/s/100|0)==Hn(10,e-2)-1||(o==s/2||o==0)&&(r[i+1]/s/100|0)==0:e<4?(e==0?o=o/1e3|0:e==1?o=o/100|0:e==2&&(o=o/10|0),a=(n||t<4)&&o==9999||!n&&t>3&&o==4999):a=((n||t<4)&&o+1==s||!n&&t>3&&o+1==s/2)&&(r[i+1]/s/1e3|0)==Hn(10,e-3)-1,a}function YE(r,e,t){for(var n,i=[0],s,a=0,o=r.length;a<o;){for(s=i.length;s--;)i[s]*=e;for(i[0]+=SP.indexOf(r.charAt(a++)),n=0;n<i.length;n++)i[n]>t-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/t|0,i[n]%=t)}return i.reverse()}function ave(r,e){var t,n,i;if(e.isZero())return e;n=e.d.length,n<32?(t=Math.ceil(n/3),i=(1/sN(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),r.precision+=t,e=M0(r,1,e.times(i),new r(1));for(var s=t;s--;){var a=e.times(e);e=a.times(a).minus(a).times(8).plus(1)}return r.precision-=t,e}var Mr=function(){function r(n,i,s){var a,o=0,l=n.length;for(n=n.slice();l--;)a=n[l]*i+o,n[l]=a%s|0,o=a/s|0;return o&&n.unshift(o),n}function e(n,i,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(n[o]!=i[o]){l=n[o]>i[o]?1:-1;break}return l}function t(n,i,s,a){for(var o=0;s--;)n[s]-=o,o=n[s]<i[s]?1:0,n[s]=o*a+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,a,o,l){var u,c,h,d,f,p,g,b,v,w,y,A,x,_,S,E,C,N,D,M,I=n.constructor,V=n.s==i.s?1:-1,K=n.d,F=i.d;if(!K||!K[0]||!F||!F[0])return new I(!n.s||!i.s||(K?F&&K[0]==F[0]:!F)?NaN:K&&K[0]==0||!F?V*0:V/0);for(l?(f=1,c=n.e-i.e):(l=Ko,f=ct,c=ns(n.e/f)-ns(i.e/f)),D=F.length,C=K.length,v=new I(V),w=v.d=[],h=0;F[h]==(K[h]||0);h++);if(F[h]>(K[h]||0)&&c--,s==null?(_=s=I.precision,a=I.rounding):o?_=s+(n.e-i.e)+1:_=s,_<0)w.push(1),p=!0;else{if(_=_/f+2|0,h=0,D==1){for(d=0,F=F[0],_++;(h<C||d)&&_--;h++)S=d*l+(K[h]||0),w[h]=S/F|0,d=S%F|0;p=d||h<C}else{for(d=l/(F[0]+1)|0,d>1&&(F=r(F,d,l),K=r(K,d,l),D=F.length,C=K.length),E=D,y=K.slice(0,D),A=y.length;A<D;)y[A++]=0;M=F.slice(),M.unshift(0),N=F[0],F[1]>=l/2&&++N;do d=0,u=e(F,y,D,A),u<0?(x=y[0],D!=A&&(x=x*l+(y[1]||0)),d=x/N|0,d>1?(d>=l&&(d=l-1),g=r(F,d,l),b=g.length,A=y.length,u=e(g,y,b,A),u==1&&(d--,t(g,D<b?M:F,b,l))):(d==0&&(u=d=1),g=F.slice()),b=g.length,b<A&&g.unshift(0),t(y,g,A,l),u==-1&&(A=y.length,u=e(F,y,D,A),u<1&&(d++,t(y,D<A?M:F,A,l))),A=y.length):u===0&&(d++,y=[0]),w[h++]=d,u&&y[0]?y[A++]=K[E]||0:(y=[K[E]],A=1);while((E++<C||y[0]!==void 0)&&_--);p=y[0]!==void 0}w[0]||w.shift()}if(f==1)v.e=c,PK=p;else{for(h=1,d=w[0];d>=10;d/=10)h++;v.e=h+c*f-1,st(v,o?s+v.e+1:s,a,p)}return v}}();function st(r,e,t,n){var i,s,a,o,l,u,c,h,d,f=r.constructor;e:if(e!=null){if(h=r.d,!h)return r;for(i=1,o=h[0];o>=10;o/=10)i++;if(s=e-i,s<0)s+=ct,a=e,c=h[d=0],l=c/Hn(10,i-a-1)%10|0;else if(d=Math.ceil((s+1)/ct),o=h.length,d>=o)if(n){for(;o++<=d;)h.push(0);c=l=0,i=1,s%=ct,a=s-ct+1}else break e;else{for(c=o=h[d],i=1;o>=10;o/=10)i++;s%=ct,a=s-ct+i,l=a<0?0:c/Hn(10,i-a-1)%10|0}if(n=n||e<0||h[d+1]!==void 0||(a<0?c:c%Hn(10,i-a-1)),u=t<4?(l||n)&&(t==0||t==(r.s<0?3:2)):l>5||l==5&&(t==4||n||t==6&&(s>0?a>0?c/Hn(10,i-a):0:h[d-1])%10&1||t==(r.s<0?8:7)),e<1||!h[0])return h.length=0,u?(e-=r.e+1,h[0]=Hn(10,(ct-e%ct)%ct),r.e=-e||0):h[0]=r.e=0,r;if(s==0?(h.length=d,o=1,d--):(h.length=d+1,o=Hn(10,ct-s),h[d]=a>0?(c/Hn(10,i-a)%Hn(10,a)|0)*o:0),u)for(;;)if(d==0){for(s=1,a=h[0];a>=10;a/=10)s++;for(a=h[0]+=o,o=1;a>=10;a/=10)o++;s!=o&&(r.e++,h[0]==Ko&&(h[0]=1));break}else{if(h[d]+=o,h[d]!=Ko)break;h[d--]=0,o=1}for(s=h.length;h[--s]===0;)h.pop()}return bt&&(r.e>f.maxE?(r.d=null,r.e=NaN):r.e<f.minE&&(r.e=0,r.d=[0])),r}function tu(r,e,t){if(!r.isFinite())return VK(r);var n,i=r.e,s=Mi(r.d),a=s.length;return e?(t&&(n=t-a)>0?s=s.charAt(0)+"."+s.slice(1)+Wc(n):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(r.e<0?"e":"e+")+r.e):i<0?(s="0."+Wc(-i-1)+s,t&&(n=t-a)>0&&(s+=Wc(n))):i>=a?(s+=Wc(i+1-a),t&&(n=t-i-1)>0&&(s=s+"."+Wc(n))):((n=i+1)<a&&(s=s.slice(0,n)+"."+s.slice(n)),t&&(n=t-a)>0&&(i+1===a&&(s+="."),s+=Wc(n))),s}function iN(r,e){var t=r[0];for(e*=ct;t>=10;t/=10)e++;return e}function mT(r,e,t){if(e>sve)throw bt=!0,t&&(r.precision=t),Error(RK);return st(new r(dT),e,1,!0)}function Ll(r,e,t){if(e>CP)throw Error(RK);return st(new r(fT),e,t,!0)}function BK(r){var e=r.length-1,t=e*ct+1;if(e=r[e],e){for(;e%10==0;e/=10)t--;for(e=r[0];e>=10;e/=10)t++}return t}function Wc(r){for(var e="";r--;)e+="0";return e}function LK(r,e,t,n){var i,s=new r(1),a=Math.ceil(n/ct+4);for(bt=!1;;){if(t%2&&(s=s.times(e),Z5(s.d,a)&&(i=!0)),t=ns(t/2),t===0){t=s.d.length-1,i&&s.d[t]===0&&++s.d[t];break}e=e.times(e),Z5(e.d,a)}return bt=!0,s}function J5(r){return r.d[r.d.length-1]&1}function $K(r,e,t){for(var n,i,s=new r(e[0]),a=0;++a<e.length;){if(i=new r(e[a]),!i.s){s=i;break}n=s.cmp(i),(n===t||n===0&&s.s===t)&&(s=i)}return s}function NP(r,e){var t,n,i,s,a,o,l,u=0,c=0,h=0,d=r.constructor,f=d.rounding,p=d.precision;if(!r.d||!r.d[0]||r.e>17)return new d(r.d?r.d[0]?r.s<0?0:1/0:1:r.s?r.s<0?0:r:NaN);for(e==null?(bt=!1,l=p):l=e,o=new d(.03125);r.e>-2;)r=r.times(o),h+=5;for(n=Math.log(Hn(2,h))/Math.LN10*2+5|0,l+=n,t=s=a=new d(1),d.precision=l;;){if(s=st(s.times(r),l,1),t=t.times(++c),o=a.plus(Mr(s,t,l,1)),Mi(o.d).slice(0,l)===Mi(a.d).slice(0,l)){for(i=h;i--;)a=st(a.times(a),l,1);if(e==null)if(u<3&&O1(a.d,l-n,f,u))d.precision=l+=10,t=s=o=new d(1),c=0,u++;else return st(a,d.precision=p,f,bt=!0);else return d.precision=p,a}a=o}}function Jh(r,e){var t,n,i,s,a,o,l,u,c,h,d,f=1,p=10,g=r,b=g.d,v=g.constructor,w=v.rounding,y=v.precision;if(g.s<0||!b||!b[0]||!g.e&&b[0]==1&&b.length==1)return new v(b&&!b[0]?-1/0:g.s!=1?NaN:b?0:g);if(e==null?(bt=!1,c=y):c=e,v.precision=c+=p,t=Mi(b),n=t.charAt(0),Math.abs(s=g.e)<15e14){for(;n<7&&n!=1||n==1&&t.charAt(1)>3;)g=g.times(r),t=Mi(g.d),n=t.charAt(0),f++;s=g.e,n>1?(g=new v("0."+t),s++):g=new v(n+"."+t.slice(1))}else return u=mT(v,c+2,y).times(s+""),g=Jh(new v(n+"."+t.slice(1)),c-p).plus(u),v.precision=y,e==null?st(g,y,w,bt=!0):g;for(h=g,l=a=g=Mr(g.minus(1),g.plus(1),c,1),d=st(g.times(g),c,1),i=3;;){if(a=st(a.times(d),c,1),u=l.plus(Mr(a,new v(i),c,1)),Mi(u.d).slice(0,c)===Mi(l.d).slice(0,c))if(l=l.times(2),s!==0&&(l=l.plus(mT(v,c+2,y).times(s+""))),l=Mr(l,new v(f),c,1),e==null)if(O1(l.d,c-p,w,o))v.precision=c+=p,u=a=g=Mr(h.minus(1),h.plus(1),c,1),d=st(g.times(g),c,1),i=o=1;else return st(l,v.precision=y,w,bt=!0);else return v.precision=y,l;l=u,i+=2}}function VK(r){return String(r.s*r.s/0)}function QE(r,e){var t,n,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(t<0&&(t=n),t+=+e.slice(n+1),e=e.substring(0,n)):t<0&&(t=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,r.e=t=t-n-1,r.d=[],n=(t+1)%ct,t<0&&(n+=ct),n<i){for(n&&r.d.push(+e.slice(0,n)),i-=ct;n<i;)r.d.push(+e.slice(n,n+=ct));e=e.slice(n),n=ct-e.length}else n-=i;for(;n--;)e+="0";r.d.push(+e),bt&&(r.e>r.constructor.maxE?(r.d=null,r.e=NaN):r.e<r.constructor.minE&&(r.e=0,r.d=[0]))}else r.e=0,r.d=[0];return r}function ove(r,e){var t,n,i,s,a,o,l,u,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),OK.test(e))return QE(r,e)}else if(e==="Infinity"||e==="NaN")return+e||(r.s=NaN),r.e=NaN,r.d=null,r;if(rve.test(e))t=16,e=e.toLowerCase();else if(tve.test(e))t=2;else if(nve.test(e))t=8;else throw Error(Cd+e);for(s=e.search(/p/i),s>0?(l=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),a=s>=0,n=r.constructor,a&&(e=e.replace(".",""),o=e.length,s=o-s,i=LK(n,new n(t),s,s*2)),u=YE(e,t,Ko),c=u.length-1,s=c;u[s]===0;--s)u.pop();return s<0?new n(r.s*0):(r.e=iN(u,c),r.d=u,bt=!1,a&&(r=Mr(r,i,o*4)),l&&(r=r.times(Math.abs(l)<54?Hn(2,l):Nd.pow(2,l))),bt=!0,r)}function lve(r,e){var t,n=e.d.length;if(n<3)return e.isZero()?e:M0(r,2,e,e);t=1.4*Math.sqrt(n),t=t>16?16:t|0,e=e.times(1/sN(5,t)),e=M0(r,2,e,e);for(var i,s=new r(5),a=new r(16),o=new r(20);t--;)i=e.times(e),e=e.times(s.plus(i.times(a.times(i).minus(o))));return e}function M0(r,e,t,n,i){var s,a,o,l,u=r.precision,c=Math.ceil(u/ct);for(bt=!1,l=t.times(t),o=new r(n);;){if(a=Mr(o.times(l),new r(e++*e++),u,1),o=i?n.plus(a):n.minus(a),n=Mr(a.times(l),new r(e++*e++),u,1),a=o.plus(n),a.d[c]!==void 0){for(s=c;a.d[s]===o.d[s]&&s--;);if(s==-1)break}s=o,o=n,n=a,a=s}return bt=!0,a.d.length=c+1,a}function sN(r,e){for(var t=r;--e;)t*=r;return t}function UK(r,e){var t,n=e.s<0,i=Ll(r,r.precision,1),s=i.times(.5);if(e=e.abs(),e.lte(s))return ic=n?4:1,e;if(t=e.divToInt(i),t.isZero())ic=n?3:2;else{if(e=e.minus(t.times(i)),e.lte(s))return ic=J5(t)?n?2:3:n?4:1,e;ic=J5(t)?n?1:4:n?3:2}return e.minus(i).abs()}function VF(r,e,t,n){var i,s,a,o,l,u,c,h,d,f=r.constructor,p=t!==void 0;if(p?(Ys(t,1,Ud),n===void 0?n=f.rounding:Ys(n,0,8)):(t=f.precision,n=f.rounding),!r.isFinite())c=VK(r);else{for(c=tu(r),a=c.indexOf("."),p?(i=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):i=e,a>=0&&(c=c.replace(".",""),d=new f(1),d.e=c.length-a,d.d=YE(tu(d),10,i),d.e=d.d.length),h=YE(c,10,i),s=l=h.length;h[--l]==0;)h.pop();if(!h[0])c=p?"0p+0":"0";else{if(a<0?s--:(r=new f(r),r.d=h,r.e=s,r=Mr(r,d,t,n,0,i),h=r.d,s=r.e,u=PK),a=h[t],o=i/2,u=u||h[t+1]!==void 0,u=n<4?(a!==void 0||u)&&(n===0||n===(r.s<0?3:2)):a>o||a===o&&(n===4||u||n===6&&h[t-1]&1||n===(r.s<0?8:7)),h.length=t,u)for(;++h[--t]>i-1;)h[t]=0,t||(++s,h.unshift(1));for(l=h.length;!h[l-1];--l);for(a=0,c="";a<l;a++)c+=SP.charAt(h[a]);if(p){if(l>1)if(e==16||e==8){for(a=e==16?4:3,--l;l%a;l++)c+="0";for(h=YE(c,i,e),l=h.length;!h[l-1];--l);for(a=1,c="1.";a<l;a++)c+=SP.charAt(h[a])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>l)for(s-=l;s--;)c+="0";else s<l&&(c=c.slice(0,s)+"."+c.slice(s))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return r.s<0?"-"+c:c}function Z5(r,e){if(r.length>e)return r.length=e,!0}function uve(r){return new this(r).abs()}function cve(r){return new this(r).acos()}function hve(r){return new this(r).acosh()}function dve(r,e){return new this(r).plus(e)}function fve(r){return new this(r).asin()}function mve(r){return new this(r).asinh()}function pve(r){return new this(r).atan()}function gve(r){return new this(r).atanh()}function vve(r,e){r=new this(r),e=new this(e);var t,n=this.precision,i=this.rounding,s=n+4;return!r.s||!e.s?t=new this(NaN):!r.d&&!e.d?(t=Ll(this,s,1).times(e.s>0?.25:.75),t.s=r.s):!e.d||r.isZero()?(t=e.s<0?Ll(this,n,i):new this(0),t.s=r.s):!r.d||e.isZero()?(t=Ll(this,s,1).times(.5),t.s=r.s):e.s<0?(this.precision=s,this.rounding=1,t=this.atan(Mr(r,e,s,1)),e=Ll(this,s,1),this.precision=n,this.rounding=i,t=r.s<0?t.minus(e):t.plus(e)):t=this.atan(Mr(r,e,s,1)),t}function yve(r){return new this(r).cbrt()}function bve(r){return st(r=new this(r),r.e+1,2)}function wve(r,e,t){return new this(r).clamp(e,t)}function xve(r){if(!r||typeof r!="object")throw Error(nN+"Object expected");var e,t,n,i=r.defaults===!0,s=["precision",1,Ud,"rounding",0,8,"toExpNeg",-xg,0,"toExpPos",0,xg,"maxE",0,xg,"minE",-xg,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(t=s[e],i&&(this[t]=TP[t]),(n=r[t])!==void 0)if(ns(n)===n&&n>=s[e+1]&&n<=s[e+2])this[t]=n;else throw Error(Cd+t+": "+n);if(t="crypto",i&&(this[t]=TP[t]),(n=r[t])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(kK);else this[t]=!1;else throw Error(Cd+t+": "+n);return this}function _ve(r){return new this(r).cos()}function Ave(r){return new this(r).cosh()}function zK(r){var e,t,n;function i(s){var a,o,l,u=this;if(!(u instanceof i))return new i(s);if(u.constructor=i,e6(s)){u.s=s.s,bt?!s.d||s.e>i.maxE?(u.e=NaN,u.d=null):s.e<i.minE?(u.e=0,u.d=[0]):(u.e=s.e,u.d=s.d.slice()):(u.e=s.e,u.d=s.d?s.d.slice():s.d);return}if(l=typeof s,l==="number"){if(s===0){u.s=1/s<0?-1:1,u.e=0,u.d=[0];return}if(s<0?(s=-s,u.s=-1):u.s=1,s===~~s&&s<1e7){for(a=0,o=s;o>=10;o/=10)a++;bt?a>i.maxE?(u.e=NaN,u.d=null):a<i.minE?(u.e=0,u.d=[0]):(u.e=a,u.d=[s]):(u.e=a,u.d=[s]);return}if(s*0!==0){s||(u.s=NaN),u.e=NaN,u.d=null;return}return QE(u,s.toString())}if(l==="string")return(o=s.charCodeAt(0))===45?(s=s.slice(1),u.s=-1):(o===43&&(s=s.slice(1)),u.s=1),OK.test(s)?QE(u,s):ove(u,s);if(l==="bigint")return s<0?(s=-s,u.s=-1):u.s=1,QE(u,s.toString());throw Error(Cd+s)}if(i.prototype=De,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=xve,i.clone=zK,i.isDecimal=e6,i.abs=uve,i.acos=cve,i.acosh=hve,i.add=dve,i.asin=fve,i.asinh=mve,i.atan=pve,i.atanh=gve,i.atan2=vve,i.cbrt=yve,i.ceil=bve,i.clamp=wve,i.cos=_ve,i.cosh=Ave,i.div=Eve,i.exp=Sve,i.floor=Tve,i.hypot=Cve,i.ln=Nve,i.log=Dve,i.log10=Ive,i.log2=Mve,i.max=Pve,i.min=Rve,i.mod=kve,i.mul=Fve,i.pow=Ove,i.random=Bve,i.round=Lve,i.sign=$ve,i.sin=Vve,i.sinh=Uve,i.sqrt=zve,i.sub=jve,i.sum=qve,i.tan=Hve,i.tanh=Gve,i.trunc=Wve,r===void 0&&(r={}),r&&r.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)r.hasOwnProperty(t=n[e++])||(r[t]=this[t]);return i.config(r),i}function Eve(r,e){return new this(r).div(e)}function Sve(r){return new this(r).exp()}function Tve(r){return st(r=new this(r),r.e+1,3)}function Cve(){var r,e,t=new this(0);for(bt=!1,r=0;r<arguments.length;)if(e=new this(arguments[r++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return bt=!0,new this(1/0);t=e}return bt=!0,t.sqrt()}function e6(r){return r instanceof Nd||r&&r.toStringTag===FK||!1}function Nve(r){return new this(r).ln()}function Dve(r,e){return new this(r).log(e)}function Mve(r){return new this(r).log(2)}function Ive(r){return new this(r).log(10)}function Pve(){return $K(this,arguments,-1)}function Rve(){return $K(this,arguments,1)}function kve(r,e){return new this(r).mod(e)}function Fve(r,e){return new this(r).mul(e)}function Ove(r,e){return new this(r).pow(e)}function Bve(r){var e,t,n,i,s=0,a=new this(1),o=[];if(r===void 0?r=this.precision:Ys(r,1,Ud),n=Math.ceil(r/ct),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));s<n;)i=e[s],i>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:o[s++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);s<n;)i=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,s):(o.push(i%1e7),s+=4);s=n/4}else throw Error(kK);else for(;s<n;)o[s++]=Math.random()*1e7|0;for(n=o[--s],r%=ct,n&&r&&(i=Hn(10,ct-r),o[s]=(n/i|0)*i);o[s]===0;s--)o.pop();if(s<0)t=0,o=[0];else{for(t=-1;o[0]===0;t-=ct)o.shift();for(n=1,i=o[0];i>=10;i/=10)n++;n<ct&&(t-=ct-n)}return a.e=t,a.d=o,a}function Lve(r){return st(r=new this(r),r.e+1,this.rounding)}function $ve(r){return r=new this(r),r.d?r.d[0]?r.s:0*r.s:r.s||NaN}function Vve(r){return new this(r).sin()}function Uve(r){return new this(r).sinh()}function zve(r){return new this(r).sqrt()}function jve(r,e){return new this(r).sub(e)}function qve(){var r=0,e=arguments,t=new this(e[r]);for(bt=!1;t.s&&++r<e.length;)t=t.plus(e[r]);return bt=!0,st(t,this.precision,this.rounding)}function Hve(r){return new this(r).tan()}function Gve(r){return new this(r).tanh()}function Wve(r){return st(r=new this(r),r.e+1,1)}De[Symbol.for("nodejs.util.inspect.custom")]=De.toString;De[Symbol.toStringTag]="Decimal";var Nd=De.constructor=zK(TP);dT=new Nd(dT);fT=new Nd(fT);var Kve="BigNumber",Xve=["?on","config"],Yve=X(Kve,Xve,r=>{var{on:e,config:t}=r,n=Nd.clone({precision:t.precision,modulo:Nd.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,s){i.precision!==s.precision&&n.config({precision:i.precision})}),n},{isClass:!0});const zi=Math.cosh||function(r){return Math.abs(r)<1e-9?1-r:(Math.exp(r)+Math.exp(-r))*.5},Ua=Math.sinh||function(r){return Math.abs(r)<1e-9?r:(Math.exp(r)-Math.exp(-r))*.5},Qve=r=>{const e=Math.sin(.5*r);return-2*e*e},K2=function(r,e){return r=Math.abs(r),e=Math.abs(e),r<e&&([r,e]=[e,r]),r<1e8?Math.sqrt(r*r+e*e):(e/=r,r*Math.sqrt(1+e*e))},Op=function(){throw SyntaxError("Invalid Param")};function X2(r,e){const t=Math.abs(r),n=Math.abs(e);return r===0?Math.log(n):e===0?Math.log(t):t<3e3&&n<3e3?Math.log(r*r+e*e)*.5:(r=r*.5,e=e*.5,.5*Math.log(r*r+e*e)+Math.LN2)}const Jve={re:0,im:0},df=function(r,e){const t=Jve;if(r==null)t.re=t.im=0;else if(e!==void 0)t.re=r,t.im=e;else switch(typeof r){case"object":if("im"in r&&"re"in r)t.re=r.re,t.im=r.im;else if("abs"in r&&"arg"in r){if(!isFinite(r.abs)&&isFinite(r.arg))return xe.INFINITY;t.re=r.abs*Math.cos(r.arg),t.im=r.abs*Math.sin(r.arg)}else if("r"in r&&"phi"in r){if(!isFinite(r.r)&&isFinite(r.phi))return xe.INFINITY;t.re=r.r*Math.cos(r.phi),t.im=r.r*Math.sin(r.phi)}else r.length===2?(t.re=r[0],t.im=r[1]):Op();break;case"string":t.im=t.re=0;const n=r.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,s=0;n===null&&Op();for(let a=0;a<n.length;a++){const o=n[a];o===" "||o==="	"||o===`
`||(o==="+"?i++:o==="-"?s++:o==="i"||o==="I"?(i+s===0&&Op(),n[a+1]!==" "&&!isNaN(n[a+1])?(t.im+=parseFloat((s%2?"-":"")+n[a+1]),a++):t.im+=parseFloat((s%2?"-":"")+"1"),i=s=0):((i+s===0||isNaN(o))&&Op(),n[a+1]==="i"||n[a+1]==="I"?(t.im+=parseFloat((s%2?"-":"")+o),a++):t.re+=parseFloat((s%2?"-":"")+o),i=s=0))}i+s>0&&Op();break;case"number":t.im=0,t.re=r;break;default:Op()}return isNaN(t.re)||isNaN(t.im),t};function xe(r,e){if(!(this instanceof xe))return new xe(r,e);const t=df(r,e);this.re=t.re,this.im=t.im}xe.prototype={re:0,im:0,sign:function(){const r=K2(this.re,this.im);return new xe(this.re/r,this.im/r)},add:function(r,e){const t=df(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im));return n||i?n&&i?xe.NAN:xe.INFINITY:new xe(this.re+t.re,this.im+t.im)},sub:function(r,e){const t=df(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im));return n||i?n&&i?xe.NAN:xe.INFINITY:new xe(this.re-t.re,this.im-t.im)},mul:function(r,e){const t=df(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im)),s=this.re===0&&this.im===0,a=t.re===0&&t.im===0;return n&&a||i&&s?xe.NAN:n||i?xe.INFINITY:t.im===0&&this.im===0?new xe(this.re*t.re,0):new xe(this.re*t.re-this.im*t.im,this.re*t.im+this.im*t.re)},div:function(r,e){const t=df(r,e),n=this.isInfinite(),i=!(isFinite(t.re)&&isFinite(t.im)),s=this.re===0&&this.im===0,a=t.re===0&&t.im===0;if(s&&a||n&&i)return xe.NAN;if(a||n)return xe.INFINITY;if(s||i)return xe.ZERO;if(t.im===0)return new xe(this.re/t.re,this.im/t.re);if(Math.abs(t.re)<Math.abs(t.im)){const o=t.re/t.im,l=t.re*o+t.im;return new xe((this.re*o+this.im)/l,(this.im*o-this.re)/l)}else{const o=t.im/t.re,l=t.im*o+t.re;return new xe((this.re+this.im*o)/l,(this.im-this.re*o)/l)}},pow:function(r,e){const t=df(r,e),n=this.re===0&&this.im===0;if(t.re===0&&t.im===0)return xe.ONE;if(t.im===0){if(this.im===0&&this.re>0)return new xe(Math.pow(this.re,t.re),0);if(this.re===0)switch((t.re%4+4)%4){case 0:return new xe(Math.pow(this.im,t.re),0);case 1:return new xe(0,Math.pow(this.im,t.re));case 2:return new xe(-Math.pow(this.im,t.re),0);case 3:return new xe(0,-Math.pow(this.im,t.re))}}if(n&&t.re>0)return xe.ZERO;const s=Math.atan2(this.im,this.re),a=X2(this.re,this.im);let o=Math.exp(t.re*a-t.im*s),l=t.im*a+t.re*s;return new xe(o*Math.cos(l),o*Math.sin(l))},sqrt:function(){const r=this.re,e=this.im;if(e===0)return r>=0?new xe(Math.sqrt(r),0):new xe(0,Math.sqrt(-r));const t=K2(r,e);let n=Math.sqrt(.5*(t+Math.abs(r))),i=Math.abs(e)/(2*n);return r>=0?new xe(n,e<0?-i:i):new xe(i,e<0?-n:n)},exp:function(){const r=Math.exp(this.re);return this.im===0?new xe(r,0):new xe(r*Math.cos(this.im),r*Math.sin(this.im))},expm1:function(){const r=this.re,e=this.im;return new xe(Math.expm1(r)*Math.cos(e)+Qve(e),Math.exp(r)*Math.sin(e))},log:function(){const r=this.re,e=this.im;return e===0&&r>0?new xe(Math.log(r),0):new xe(X2(r,e),Math.atan2(e,r))},abs:function(){return K2(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const r=this.re,e=this.im;return new xe(Math.sin(r)*zi(e),Math.cos(r)*Ua(e))},cos:function(){const r=this.re,e=this.im;return new xe(Math.cos(r)*zi(e),-Math.sin(r)*Ua(e))},tan:function(){const r=2*this.re,e=2*this.im,t=Math.cos(r)+zi(e);return new xe(Math.sin(r)/t,Ua(e)/t)},cot:function(){const r=2*this.re,e=2*this.im,t=Math.cos(r)-zi(e);return new xe(-Math.sin(r)/t,Ua(e)/t)},sec:function(){const r=this.re,e=this.im,t=.5*zi(2*e)+.5*Math.cos(2*r);return new xe(Math.cos(r)*zi(e)/t,Math.sin(r)*Ua(e)/t)},csc:function(){const r=this.re,e=this.im,t=.5*zi(2*e)-.5*Math.cos(2*r);return new xe(Math.sin(r)*zi(e)/t,-Math.cos(r)*Ua(e)/t)},asin:function(){const r=this.re,e=this.im,t=new xe(e*e-r*r+1,-2*r*e).sqrt(),n=new xe(t.re-e,t.im+r).log();return new xe(n.im,-n.re)},acos:function(){const r=this.re,e=this.im,t=new xe(e*e-r*r+1,-2*r*e).sqrt(),n=new xe(t.re-e,t.im+r).log();return new xe(Math.PI/2-n.im,n.re)},atan:function(){const r=this.re,e=this.im;if(r===0){if(e===1)return new xe(0,1/0);if(e===-1)return new xe(0,-1/0)}const t=r*r+(1-e)*(1-e),n=new xe((1-e*e-r*r)/t,-2*r/t).log();return new xe(-.5*n.im,.5*n.re)},acot:function(){const r=this.re,e=this.im;if(e===0)return new xe(Math.atan2(1,r),0);const t=r*r+e*e;return t!==0?new xe(r/t,-e/t).atan():new xe(r!==0?r/0:0,e!==0?-e/0:0).atan()},asec:function(){const r=this.re,e=this.im;if(r===0&&e===0)return new xe(0,1/0);const t=r*r+e*e;return t!==0?new xe(r/t,-e/t).acos():new xe(r!==0?r/0:0,e!==0?-e/0:0).acos()},acsc:function(){const r=this.re,e=this.im;if(r===0&&e===0)return new xe(Math.PI/2,1/0);const t=r*r+e*e;return t!==0?new xe(r/t,-e/t).asin():new xe(r!==0?r/0:0,e!==0?-e/0:0).asin()},sinh:function(){const r=this.re,e=this.im;return new xe(Ua(r)*Math.cos(e),zi(r)*Math.sin(e))},cosh:function(){const r=this.re,e=this.im;return new xe(zi(r)*Math.cos(e),Ua(r)*Math.sin(e))},tanh:function(){const r=2*this.re,e=2*this.im,t=zi(r)+Math.cos(e);return new xe(Ua(r)/t,Math.sin(e)/t)},coth:function(){const r=2*this.re,e=2*this.im,t=zi(r)-Math.cos(e);return new xe(Ua(r)/t,-Math.sin(e)/t)},csch:function(){const r=this.re,e=this.im,t=Math.cos(2*e)-zi(2*r);return new xe(-2*Ua(r)*Math.cos(e)/t,2*zi(r)*Math.sin(e)/t)},sech:function(){const r=this.re,e=this.im,t=Math.cos(2*e)+zi(2*r);return new xe(2*zi(r)*Math.cos(e)/t,-2*Ua(r)*Math.sin(e)/t)},asinh:function(){const r=this.re,e=this.im;if(e===0){if(r===0)return new xe(0,0);const s=Math.abs(r),a=Math.log(s+Math.sqrt(s*s+1));return new xe(r<0?-a:a,0)}const t=r*r-e*e+1,n=2*r*e,i=new xe(t,n).sqrt();return new xe(r+i.re,e+i.im).log()},acosh:function(){const r=this.re,e=this.im;if(e===0){if(r>1)return new xe(Math.log(r+Math.sqrt(r-1)*Math.sqrt(r+1)),0);if(r<-1){const i=Math.sqrt(r*r-1);return new xe(Math.log(-r+i),Math.PI)}return new xe(0,Math.acos(r))}const t=new xe(r-1,e).sqrt(),n=new xe(r+1,e).sqrt();return new xe(r+t.re*n.re-t.im*n.im,e+t.re*n.im+t.im*n.re).log()},atanh:function(){const r=this.re,e=this.im;if(e===0){if(r===0)return new xe(0,0);if(r===1)return new xe(1/0,0);if(r===-1)return new xe(-1/0,0);if(-1<r&&r<1)return new xe(.5*Math.log((1+r)/(1-r)),0);if(r>1){const l=(r+1)/(r-1);return new xe(.5*Math.log(l),-Math.PI/2)}const o=(1+r)/(1-r);return new xe(.5*Math.log(-o),Math.PI/2)}const t=1-r,n=1+r,i=t*t+e*e;if(i===0)return new xe(r!==-1?r/0:0,e!==0?e/0:0);const s=(n*t-e*e)/i,a=(e*t+n*e)/i;return new xe(X2(s,a)/2,Math.atan2(a,s)/2)},acoth:function(){const r=this.re,e=this.im;if(r===0&&e===0)return new xe(0,Math.PI/2);const t=r*r+e*e;return t!==0?new xe(r/t,-e/t).atanh():new xe(r!==0?r/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const r=this.re,e=this.im;if(e===0){if(r===0)return new xe(1/0,0);const n=1/r;return new xe(Math.log(n+Math.sqrt(n*n+1)),0)}const t=r*r+e*e;return t!==0?new xe(r/t,-e/t).asinh():new xe(r!==0?r/0:0,e!==0?-e/0:0).asinh()},asech:function(){const r=this.re,e=this.im;if(this.isZero())return xe.INFINITY;const t=r*r+e*e;return t!==0?new xe(r/t,-e/t).acosh():new xe(r!==0?r/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return xe.INFINITY;if(this.isInfinite())return xe.ZERO;const r=this.re,e=this.im,t=r*r+e*e;return new xe(r/t,-e/t)},conjugate:function(){return new xe(this.re,-this.im)},neg:function(){return new xe(-this.re,-this.im)},ceil:function(r){return r=Math.pow(10,r||0),new xe(Math.ceil(this.re*r)/r,Math.ceil(this.im*r)/r)},floor:function(r){return r=Math.pow(10,r||0),new xe(Math.floor(this.re*r)/r,Math.floor(this.im*r)/r)},round:function(r){return r=Math.pow(10,r||0),new xe(Math.round(this.re*r)/r,Math.round(this.im*r)/r)},equals:function(r,e){const t=df(r,e);return Math.abs(t.re-this.re)<=xe.EPSILON&&Math.abs(t.im-this.im)<=xe.EPSILON},clone:function(){return new xe(this.re,this.im)},toString:function(){let r=this.re,e=this.im,t="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(r)<xe.EPSILON&&(r=0),Math.abs(e)<xe.EPSILON&&(e=0),e===0?t+r:(r!==0?(t+=r,t+=" ",e<0?(e=-e,t+="-"):t+="+",t+=" "):e<0&&(e=-e,t+="-"),e!==1&&(t+=e),t+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};xe.ZERO=new xe(0,0);xe.ONE=new xe(1,0);xe.I=new xe(0,1);xe.PI=new xe(Math.PI,0);xe.E=new xe(Math.E,0);xe.INFINITY=new xe(1/0,1/0);xe.NAN=new xe(NaN,NaN);xe.EPSILON=1e-15;var Zve="Complex",e0e=[],t0e=X(Zve,e0e,()=>(Object.defineProperty(xe,"name",{value:"Complex"}),xe.prototype.constructor=xe,xe.prototype.type="Complex",xe.prototype.isComplex=!0,xe.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},xe.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},xe.prototype.format=function(r){var e="",t=this.im,n=this.re,i=Gm(this.re,r),s=Gm(this.im,r),a=it(r)?r:r?r.precision:null;if(a!==null){var o=Math.pow(10,-a);Math.abs(n/t)<o&&(n=0),Math.abs(t/n)<o&&(t=0)}return t===0?e=i:n===0?t===1?e="i":t===-1?e="-i":e=s+"i":t<0?t===-1?e=i+" - i":e=i+" - "+s.substring(1)+"i":t===1?e=i+" + i":e=i+" + "+s+"i",e},xe.fromPolar=function(r){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return xe(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var t=arguments[0],n=arguments[1];if(it(t)){if(_a(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),it(n))return new xe({r:t,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},xe.prototype.valueOf=xe.prototype.toString,xe.fromJSON=function(r){return new xe(r)},xe.compare=function(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0},xe),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(r){if(isNaN(r))throw new Error("");return r});const nt=BigInt(0),Bt=BigInt(1),hi=BigInt(2),Gb=BigInt(3),_g=BigInt(5),Us=BigInt(10);BigInt(Number.MAX_SAFE_INTEGER);const r0e=2e3,Ve={s:Bt,n:nt,d:Bt};function cu(r,e){try{r=BigInt(r)}catch{throw qc()}return r*e}function Ao(r){return typeof r=="bigint"?r:Math.floor(r)}function Ur(r,e){if(e===nt)throw UF();const t=Object.create(ja.prototype);t.s=r<nt?-Bt:Bt,r=r<nt?-r:r;const n=ff(r,e);return t.n=r/n,t.d=e/n,t}const n0e=[hi*hi,hi,hi*hi,hi,hi*hi,hi*Gb,hi,hi*Gb];function Bp(r){const e=Object.create(null);if(r<=Bt)return e[r]=Bt,e;const t=n=>{e[n]=(e[n]||nt)+Bt};for(;r%hi===nt;)t(hi),r/=hi;for(;r%Gb===nt;)t(Gb),r/=Gb;for(;r%_g===nt;)t(_g),r/=_g;for(let n=0,i=hi+_g;i*i<=r;){for(;r%i===nt;)t(i),r/=i;i+=n0e[n],n=n+1&7}return r>Bt&&t(r),e}const ni=function(r,e){let t=nt,n=Bt,i=Bt;if(r!=null)if(e!==void 0){if(typeof r=="bigint")t=r;else{if(isNaN(r))throw qc();if(r%1!==0)throw t6();t=BigInt(r)}if(typeof e=="bigint")n=e;else{if(isNaN(e))throw qc();if(e%1!==0)throw t6();n=BigInt(e)}i=t*n}else if(typeof r=="object"){if("d"in r&&"n"in r)t=BigInt(r.n),n=BigInt(r.d),"s"in r&&(t*=BigInt(r.s));else if(0 in r)t=BigInt(r[0]),1 in r&&(n=BigInt(r[1]));else if(typeof r=="bigint")t=r;else throw qc();i=t*n}else if(typeof r=="number"){if(isNaN(r))throw qc();if(r<0&&(i=-Bt,r=-r),r%1===0)t=BigInt(r);else{let s=1,a=0,o=1,l=1,u=1,c=1e7;for(r>=1&&(s=10**Math.floor(1+Math.log10(r)),r/=s);o<=c&&u<=c;){let h=(a+l)/(o+u);if(r===h){o+u<=c?(t=a+l,n=o+u):u>o?(t=l,n=u):(t=a,n=o);break}else r>h?(a+=l,o+=u):(l+=a,u+=o),o>c?(t=l,n=u):(t=a,n=o)}t=BigInt(t)*BigInt(s),n=BigInt(n)}}else if(typeof r=="string"){let s=0,a=nt,o=nt,l=nt,u=Bt,c=Bt,h=r.replace(/_/g,"").match(/\d+|./g);if(h===null)throw qc();if(h[s]==="-"?(i=-Bt,s++):h[s]==="+"&&s++,h.length===s+1?o=cu(h[s++],i):h[s+1]==="."||h[s]==="."?(h[s]!=="."&&(a=cu(h[s++],i)),s++,(s+1===h.length||h[s+1]==="("&&h[s+3]===")"||h[s+1]==="'"&&h[s+3]==="'")&&(o=cu(h[s],i),u=Us**BigInt(h[s].length),s++),(h[s]==="("&&h[s+2]===")"||h[s]==="'"&&h[s+2]==="'")&&(l=cu(h[s+1],i),c=Us**BigInt(h[s+1].length)-Bt,s+=3)):h[s+1]==="/"||h[s+1]===":"?(o=cu(h[s],i),u=cu(h[s+2],Bt),s+=3):h[s+3]==="/"&&h[s+1]===" "&&(a=cu(h[s],i),o=cu(h[s+2],i),u=cu(h[s+4],Bt),s+=5),h.length<=s)n=u*c,i=t=l+n*a+c*o;else throw qc()}else if(typeof r=="bigint")t=r,i=r,n=Bt;else throw qc();if(n===nt)throw UF();Ve.s=i<nt?-Bt:Bt,Ve.n=t<nt?-t:t,Ve.d=n<nt?-n:n};function i0e(r,e,t){let n=Bt;for(;e>nt;r=r*r%t,e>>=Bt)e&Bt&&(n=n*r%t);return n}function s0e(r,e){for(;e%hi===nt;e/=hi);for(;e%_g===nt;e/=_g);if(e===Bt)return nt;let t=Us%e,n=1;for(;t!==Bt;n++)if(t=t*Us%e,n>r0e)return nt;return BigInt(n)}function a0e(r,e,t){let n=Bt,i=i0e(Us,t,e);for(let s=0;s<300;s++){if(n===i)return BigInt(s);n=n*Us%e,i=i*Us%e}return 0}function ff(r,e){if(!r)return e;if(!e)return r;for(;;){if(r%=e,!r)return e;if(e%=r,!e)return r}}function ja(r,e){if(ni(r,e),this instanceof ja)r=ff(Ve.d,Ve.n),this.s=Ve.s,this.n=Ve.n/r,this.d=Ve.d/r;else return Ur(Ve.s*Ve.n,Ve.d)}const UF=function(){return new Error("Division by Zero")},qc=function(){return new Error("Invalid argument")},t6=function(){return new Error("Parameters must be integer")};ja.prototype={s:Bt,n:nt,d:Bt,abs:function(){return Ur(this.n,this.d)},neg:function(){return Ur(-this.s*this.n,this.d)},add:function(r,e){return ni(r,e),Ur(this.s*this.n*Ve.d+Ve.s*this.d*Ve.n,this.d*Ve.d)},sub:function(r,e){return ni(r,e),Ur(this.s*this.n*Ve.d-Ve.s*this.d*Ve.n,this.d*Ve.d)},mul:function(r,e){return ni(r,e),Ur(this.s*Ve.s*this.n*Ve.n,this.d*Ve.d)},div:function(r,e){return ni(r,e),Ur(this.s*Ve.s*this.n*Ve.d,this.d*Ve.n)},clone:function(){return Ur(this.s*this.n,this.d)},mod:function(r,e){if(r===void 0)return Ur(this.s*this.n%this.d,Bt);if(ni(r,e),nt===Ve.n*this.d)throw UF();return Ur(this.s*(Ve.d*this.n)%(Ve.n*this.d),Ve.d*this.d)},gcd:function(r,e){return ni(r,e),Ur(ff(Ve.n,this.n)*ff(Ve.d,this.d),Ve.d*this.d)},lcm:function(r,e){return ni(r,e),Ve.n===nt&&this.n===nt?Ur(nt,Bt):Ur(Ve.n*this.n,ff(Ve.n,this.n)*ff(Ve.d,this.d))},inverse:function(){return Ur(this.s*this.d,this.n)},pow:function(r,e){if(ni(r,e),Ve.d===Bt)return Ve.s<nt?Ur((this.s*this.d)**Ve.n,this.n**Ve.n):Ur((this.s*this.n)**Ve.n,this.d**Ve.n);if(this.s<nt)return null;let t=Bp(this.n),n=Bp(this.d),i=Bt,s=Bt;for(let a in t)if(a!=="1"){if(a==="0"){i=nt;break}if(t[a]*=Ve.n,t[a]%Ve.d===nt)t[a]/=Ve.d;else return null;i*=BigInt(a)**t[a]}for(let a in n)if(a!=="1"){if(n[a]*=Ve.n,n[a]%Ve.d===nt)n[a]/=Ve.d;else return null;s*=BigInt(a)**n[a]}return Ve.s<nt?Ur(s,i):Ur(i,s)},log:function(r,e){if(ni(r,e),this.s<=nt||Ve.s<=nt)return null;const t=Object.create(null),n=Bp(Ve.n),i=Bp(Ve.d),s=Bp(this.n),a=Bp(this.d);for(const u in i)n[u]=(n[u]||nt)-i[u];for(const u in a)s[u]=(s[u]||nt)-a[u];for(const u in n)u!=="1"&&(t[u]=!0);for(const u in s)u!=="1"&&(t[u]=!0);let o=null,l=null;for(const u in t){const c=n[u]||nt,h=s[u]||nt;if(c===nt){if(h!==nt)return null;continue}let d=h,f=c;const p=ff(d,f);if(d/=p,f/=p,o===null&&l===null)o=d,l=f;else if(d*l!==o*f)return null}return o!==null&&l!==null?Ur(o,l):null},equals:function(r,e){return ni(r,e),this.s*this.n*Ve.d===Ve.s*Ve.n*this.d},lt:function(r,e){return ni(r,e),this.s*this.n*Ve.d<Ve.s*Ve.n*this.d},lte:function(r,e){return ni(r,e),this.s*this.n*Ve.d<=Ve.s*Ve.n*this.d},gt:function(r,e){return ni(r,e),this.s*this.n*Ve.d>Ve.s*Ve.n*this.d},gte:function(r,e){return ni(r,e),this.s*this.n*Ve.d>=Ve.s*Ve.n*this.d},compare:function(r,e){ni(r,e);let t=this.s*this.n*Ve.d-Ve.s*Ve.n*this.d;return(nt<t)-(t<nt)},ceil:function(r){return r=Us**BigInt(r||0),Ur(Ao(this.s*r*this.n/this.d)+(r*this.n%this.d>nt&&this.s>=nt?Bt:nt),r)},floor:function(r){return r=Us**BigInt(r||0),Ur(Ao(this.s*r*this.n/this.d)-(r*this.n%this.d>nt&&this.s<nt?Bt:nt),r)},round:function(r){return r=Us**BigInt(r||0),Ur(Ao(this.s*r*this.n/this.d)+this.s*((this.s>=nt?Bt:nt)+hi*(r*this.n%this.d)>this.d?Bt:nt),r)},roundTo:function(r,e){ni(r,e);const t=this.n*Ve.d,n=this.d*Ve.n,i=t%n;let s=Ao(t/n);return i+i>=n&&s++,Ur(this.s*s*Ve.n,Ve.d)},divisible:function(r,e){return ni(r,e),Ve.n===nt?!1:this.n*Ve.d%(Ve.n*this.d)===nt},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(r=15){let e=this.n,t=this.d,n=s0e(e,t),i=a0e(e,t,n),s=this.s<nt?"-":"";if(s+=Ao(e/t),e%=t,e*=Us,e&&(s+="."),n){for(let a=i;a--;)s+=Ao(e/t),e%=t,e*=Us;s+="(";for(let a=n;a--;)s+=Ao(e/t),e%=t,e*=Us;s+=")"}else for(let a=r;e&&a--;)s+=Ao(e/t),e%=t,e*=Us;return s},toFraction:function(r=!1){let e=this.n,t=this.d,n=this.s<nt?"-":"";if(t===Bt)n+=e;else{const i=Ao(e/t);r&&i>nt&&(n+=i,n+=" ",e%=t),n+=e,n+="/",n+=t}return n},toLatex:function(r=!1){let e=this.n,t=this.d,n=this.s<nt?"-":"";if(t===Bt)n+=e;else{const i=Ao(e/t);r&&i>nt&&(n+=i,e%=t),n+="\\frac{",n+=e,n+="}{",n+=t,n+="}"}return n},toContinued:function(){let r=this.n,e=this.d;const t=[];for(;e;){t.push(Ao(r/e));const n=r%e;r=e,e=n}return t},simplify:function(r=.001){const e=BigInt(Math.ceil(1/r)),t=this.abs(),n=t.toContinued();for(let i=1;i<n.length;i++){let s=Ur(n[i-1],Bt);for(let o=i-2;o>=0;o--)s=s.inverse().add(n[o]);let a=s.sub(t);if(a.n*e<a.d)return s.mul(this.s)}return this}};var o0e="Fraction",l0e=[],u0e=X(o0e,l0e,()=>(Object.defineProperty(ja,"name",{value:"Fraction"}),ja.prototype.constructor=ja,ja.prototype.type="Fraction",ja.prototype.isFraction=!0,ja.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},ja.fromJSON=function(r){return new ja(r)},ja),{isClass:!0}),c0e="Range",h0e=[],d0e=X(c0e,h0e,()=>{function r(e,t,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");var i=e!=null,s=t!=null,a=n!=null;if(i){if(xt(e))e=e.toNumber();else if(typeof e!="number"&&!Hb(e))throw new TypeError("Parameter start must be a number or bigint")}if(s){if(xt(t))t=t.toNumber();else if(typeof t!="number"&&!Hb(t))throw new TypeError("Parameter end must be a number or bigint")}if(a){if(xt(n))n=n.toNumber();else if(typeof n!="number"&&!Hb(n))throw new TypeError("Parameter step must be a number or bigint")}if(this.start=i?parseFloat(e):0,this.end=s?parseFloat(t):0,this.step=a?parseFloat(n):1,a&&gi(this.step,0))throw new Error("Step must not be zero")}return r.prototype.type="Range",r.prototype.isRange=!0,r.parse=function(e){if(typeof e!="string")return null;var t=e.split(":"),n=t.map(function(s){return parseFloat(s)}),i=n.some(function(s){return isNaN(s)});if(i)return null;switch(n.length){case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[2],n[1]);default:return null}},r.prototype.clone=function(){return new r(this.start,this.end,this.step)},r.prototype.size=function(){var e=0,t=this.start,n=this.step,i=this.end,s=i-t;return Qh(n)===Qh(s)?e=Math.ceil(s/n):s===0&&(e=0),isNaN(e)&&(e=0),[e]},r.prototype.min=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start:this.start+(e-1)*this.step},r.prototype.max=function(){var e=this.size()[0];if(e>0)return this.step>0?this.start+(e-1)*this.step:this.start},r.prototype.forEach=function(e){var t=this.start,n=this.step,i=this.end,s=0;if(n>0)for(;t<i;)e(t,[s],this),t+=n,s++;else if(n<0)for(;t>i;)e(t,[s],this),t+=n,s++},r.prototype.map=function(e){var t=[];return this.forEach(function(n,i,s){t[i[0]]=e(n,i,s)}),t},r.prototype.toArray=function(){var e=[];return this.forEach(function(t,n){e[n[0]]=t}),e},r.prototype.valueOf=function(){return this.toArray()},r.prototype.format=function(e){var t=Gm(this.start,e);return this.step!==1&&(t+=":"+Gm(this.step,e)),t+=":"+Gm(this.end,e),t},r.prototype.toString=function(){return this.format()},r.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},r.fromJSON=function(e){return new r(e.start,e.end,e.step)},r},{isClass:!0}),f0e="Matrix",m0e=[],p0e=X(f0e,m0e,()=>{function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator")}return r.prototype.type="Matrix",r.prototype.isMatrix=!0,r.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},r.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},r.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},r.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},r.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},r.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},r.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},r.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},r.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},r.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},r.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},r.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},r.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},r.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},r.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},r.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},r.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},r},{isClass:!0});function Y2(r,e,t){var n=r.constructor,i=new n(2),s="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!tt(t))throw new Error("size must be an integer");if(r.greaterThan(i.pow(t-1).sub(1))||r.lessThan(i.pow(t-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!r.isInteger())throw new Error("Value must be an integer");r.lessThan(0)&&(r=r.add(i.pow(t))),s="i".concat(t)}switch(e){case 2:return"".concat(r.toBinary()).concat(s);case 8:return"".concat(r.toOctal()).concat(s);case 16:return"".concat(r.toHexadecimal()).concat(s);default:throw new Error("Base ".concat(e," not supported "))}}function g0e(r,e){if(typeof e=="function")return e(r);if(!r.isFinite())return r.isNaN()?"NaN":r.gt(0)?"Infinity":"-Infinity";var{notation:t,precision:n,wordSize:i}=NK(e);switch(t){case"fixed":return y0e(r,n);case"exponential":return r6(r,n);case"engineering":return v0e(r,n);case"bin":return Y2(r,2,i);case"oct":return Y2(r,8,i);case"hex":return Y2(r,16,i);case"auto":{var s=n6(e==null?void 0:e.lowerExp,-3),a=n6(e==null?void 0:e.upperExp,5);if(r.isZero())return"0";var o,l=r.toSignificantDigits(n),u=l.e;return u>=s&&u<a?o=l.toFixed():o=r6(r,n),o.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],h=arguments[4];return c!=="."?c+h:h})}default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function v0e(r,e){var t=r.e,n=t%3===0?t:t<0?t-3-t%3:t-t%3,i=r.mul(Math.pow(10,-n)),s=i.toPrecision(e);if(s.includes("e")){var a=r.constructor;s=new a(s).toFixed()}return s+"e"+(t>=0?"+":"")+n.toString()}function r6(r,e){return e!==void 0?r.toExponential(e-1):r.toExponential()}function y0e(r,e){return r.toFixed(e)}function n6(r,e){return it(r)?r:xt(r)?r.toNumber():e}function b0e(r,e){var t=r.length-e.length,n=r.length;return r.substring(t,n)===e}function Pt(r,e){var t=w0e(r,e);return e&&typeof e=="object"&&"truncate"in e&&t.length>e.truncate?t.substring(0,e.truncate-3)+"...":t}function w0e(r,e){if(typeof r=="number")return Gm(r,e);if(xt(r))return g0e(r,e);if(x0e(r))return!e||e.fraction!=="decimal"?"".concat(r.s*r.n,"/").concat(r.d):r.toString();if(Array.isArray(r))return jK(r,e);if(mn(r))return Ag(r);if(typeof r=="function")return r.syntax?String(r.syntax):"function";if(r&&typeof r=="object"){if(typeof r.format=="function")return r.format(e);if(r&&r.toString(e)!=={}.toString())return r.toString(e);var t=Object.keys(r).map(n=>Ag(n)+": "+Pt(r[n],e));return"{"+t.join(", ")+"}"}return String(r)}function Ag(r){for(var e=String(r),t="",n=0;n<e.length;){var i=e.charAt(n);t+=i in i6?i6[i]:i,n++}return'"'+t+'"'}var i6={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function ao(r){var e=String(r);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function jK(r,e){if(Array.isArray(r)){for(var t="[",n=r.length,i=0;i<n;i++)i!==0&&(t+=", "),t+=jK(r[i],e);return t+="]",t}else return Pt(r,e)}function x0e(r){return r&&typeof r=="object"&&typeof r.s=="bigint"&&typeof r.n=="bigint"&&typeof r.d=="bigint"||!1}function DP(r,e){if(!mn(r))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+dr(r)+", index: 0)");if(!mn(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+dr(e)+", index: 1)");return r===e?0:r>e?1:-1}function Mt(r,e,t){if(!(this instanceof Mt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=r,this.expected=e,this.relation=t,this.message="Dimension mismatch ("+(Array.isArray(r)?"["+r.join(", ")+"]":r)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}Mt.prototype=new RangeError;Mt.prototype.constructor=RangeError;Mt.prototype.name="DimensionError";Mt.prototype.isDimensionError=!0;function Zo(r,e,t){if(!(this instanceof Zo))throw new SyntaxError("Constructor must be called with the new operator");this.index=r,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=t),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Zo.prototype=new RangeError;Zo.prototype.constructor=RangeError;Zo.prototype.name="IndexError";Zo.prototype.isIndexError=!0;function vt(r){for(var e=[];Array.isArray(r);)e.push(r.length),r=r[0];return e}function qK(r,e,t){var n,i=r.length;if(i!==e[t])throw new Mt(i,e[t]);if(t<e.length-1){var s=t+1;for(n=0;n<i;n++){var a=r[n];if(!Array.isArray(a))throw new Mt(e.length-1,e.length,"<");qK(r[n],e,s)}}else for(n=0;n<i;n++)if(Array.isArray(r[n]))throw new Mt(e.length+1,e.length,">")}function s6(r,e){var t=e.length===0;if(t){if(Array.isArray(r))throw new Mt(r.length,0)}else qK(r,e,0)}function pT(r,e){var t=r.isMatrix?r._size:vt(r),n=e._sourceSize;n.forEach((i,s)=>{if(i!==null&&i!==t[s])throw new Mt(i,t[s])})}function xr(r,e){if(r!==void 0){if(!it(r)||!tt(r))throw new TypeError("Index must be an integer (value: "+r+")");if(r<0||typeof e=="number"&&r>=e)throw new Zo(r,e)}}function I0(r){for(var e=0;e<r._dimensions.length;++e){var t=r._dimensions[e];if(t._data&&cr(t._data)){if(t._size[0]===0)return!0}else if(t.isRange){if(t.start===t.end)return!0}else if(mn(t)&&t.length===0)return!0}return!1}function P0(r,e,t){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!it(i)||!tt(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Pt(e)+")")}),(it(r)||xt(r))&&(r=[r]);var n=t!==void 0?t:0;return MP(r,e,0,n),r}function MP(r,e,t,n){var i,s,a=r.length,o=e[t],l=Math.min(a,o);if(r.length=o,t<e.length-1){var u=t+1;for(i=0;i<l;i++)s=r[i],Array.isArray(s)||(s=[s],r[i]=s),MP(s,e,u,n);for(i=l;i<o;i++)s=[],r[i]=s,MP(s,e,u,n)}else{for(i=0;i<l;i++)for(;Array.isArray(r[i]);)r[i]=r[i][0];for(i=l;i<o;i++)r[i]=n}}function zF(r,e){var t=Yt(r,!0),n=t.length;if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Mt(0,n,"!=");e=jF(e,n);var i=HK(e);if(n!==i)throw new Mt(i,n,"!=");try{return _0e(t,e)}catch(s){throw s instanceof Mt?new Mt(i,n,"!="):s}}function jF(r,e){var t=HK(r),n=r.slice(),i=-1,s=r.indexOf(i),a=r.indexOf(i,s+1)>=0;if(a)throw new Error("More than one wildcard in sizes");var o=s>=0,l=e%t===0;if(o)if(l)n[s]=-e/t;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-t);return n}function HK(r){return r.reduce((e,t)=>e*t,1)}function _0e(r,e){for(var t=r,n,i=e.length-1;i>0;i--){var s=e[i];n=[];for(var a=t.length/s,o=0;o<a;o++)n.push(t.slice(o*s,(o+1)*s));t=n}return t}function gT(r,e){for(var t=vt(r);Array.isArray(r)&&r.length===1;)r=r[0],t.shift();for(var n=t.length;t[n-1]===1;)n--;return n<t.length&&(r=GK(r,n,0),t.length=n),r}function GK(r,e,t){var n,i;if(t<e){var s=t+1;for(n=0,i=r.length;n<i;n++)r[n]=GK(r[n],e,s)}else for(;Array.isArray(r);)r=r[0];return r}function WK(r,e,t,n){var i=n||vt(r);if(t)for(var s=0;s<t;s++)r=[r],i.unshift(1);for(r=KK(r,e,0);i.length<e;)i.push(1);return r}function KK(r,e,t){var n,i;if(Array.isArray(r)){var s=t+1;for(n=0,i=r.length;n<i;n++)r[n]=KK(r[n],e,s)}else for(var a=t;a<e;a++)r=[r];return r}function Yt(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(r))return r;if(typeof e!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var t=[];return e?i(r):n(r),t;function n(s){for(var a=0;a<s.length;a++){var o=s[a];Array.isArray(o)?n(o):t.push(o)}}function i(s){if(Array.isArray(s[0]))for(var a=0;a<s.length;a++)i(s[a]);else for(var o=0;o<s.length;o++)t.push(s[o])}}function dd(r,e){return Array.prototype.map.call(r,e)}function XK(r,e){Array.prototype.forEach.call(r,e)}function a6(r,e){if(vt(r).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(r,e)}function o6(r,e){if(vt(r).length!==1)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(r,t=>e.test(t))}function l6(r,e){return Array.prototype.join.call(r,e)}function R0(r){if(!Array.isArray(r))throw new TypeError("Array input expected");if(r.length===0)return r;var e=[],t=0;e[0]={value:r[0],identifier:0};for(var n=1;n<r.length;n++)r[n]===r[n-1]?t++:t=0,e.push({value:r[n],identifier:t});return e}function vT(r){if(!Array.isArray(r))throw new TypeError("Array input expected");if(r.length===0)return r;for(var e=[],t=0;t<r.length;t++)e.push(r[t].value);return e}function aN(r,e){for(var t,n=0,i=0;i<r.length;i++){var s=r[i],a=Array.isArray(s);if(i===0&&a&&(n=s.length),a&&s.length!==n)return;var o=a?aN(s,e):e(s);if(t===void 0)t=o;else if(t!==o)return"mixed"}return t}function YK(r,e,t,n){if(n<t){if(r.length!==e.length)throw new Mt(r.length,e.length);for(var i=[],s=0;s<r.length;s++)i[s]=YK(r[s],e[s],t,n+1);return i}else return r.concat(e)}function QK(){var r=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(r.length===1)return r[0];if(r.length>1)return r.slice(1).reduce(function(t,n){return YK(t,n,e,0)},r[0]);throw new Error("Wrong number of arguments in function concat")}function yT(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];for(var n=e.map(d=>d.length),i=Math.max(...n),s=new Array(i).fill(null),a=0;a<e.length;a++)for(var o=e[a],l=n[a],u=0;u<l;u++){var c=i-l+u;o[u]>s[c]&&(s[c]=o[u])}for(var h=0;h<e.length;h++)JK(e[h],s);return s}function JK(r,e){for(var t=e.length,n=r.length,i=0;i<n;i++){var s=t-n+i;if(r[i]<e[s]&&r[i]>1||r[i]>e[s])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(r,") not possible to broadcast dimension ").concat(n," with size ").concat(r[i]," to size ").concat(e[s]))}}function Ef(r,e){var t=vt(r);if(Cc(t,e))return r;JK(t,e);var n=yT(t,e),i=n.length,s=[...Array(i-t.length).fill(1),...t],a=E0e(r);t.length<i&&(a=zF(a,s),t=vt(a));for(var o=0;o<i;o++)t[o]<n[o]&&(a=A0e(a,n[o],o),t=vt(a));return a}function A0e(r,e,t){return QK(...Array(e).fill(r),t)}function bT(r,e){if(!Array.isArray(r))throw new Error("Array expected");var t=vt(r);if(e.length!==t.length)throw new Mt(e.length,t.length);for(var n=0;n<e.length;n++)xr(e[n],t[n]);return e.reduce((i,s)=>i[s],r)}function IP(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(r.length===0)return[];if(t)return s(r);var n=[];return i(r,0);function i(a,o){if(Array.isArray(a)){for(var l=a.length,u=Array(l),c=0;c<l;c++)n[o]=c,u[c]=i(a[c],o+1);return u}else return e(a,n.slice(0,o),r)}function s(a){if(Array.isArray(a)){for(var o=a.length,l=Array(o),u=0;u<o;u++)l[u]=s(a[u]);return l}else return e(a)}}function ZK(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(r.length===0)return;if(t){s(r);return}var n=[];i(r,0);function i(a,o){if(Array.isArray(a))for(var l=a.length,u=0;u<l;u++)n[o]=u,i(a[u],o+1);else e(a,n.slice(0,o),r)}function s(a){if(Array.isArray(a))for(var o=a.length,l=0;l<o;l++)s(a[l]);else e(a)}}function E0e(r){return An([],r)}function lp(r,e,t,n){if(hT.isTypedFunction(r)){var i;if(n)i=1;else{var s=e.isMatrix?e.size():vt(e),a=s.length?s[s.length-1]===0:!0;if(a)return{isUnary:n,fn:r};var o=s.map(()=>0),l=e.isMatrix?e.get(o):bT(e,o);i=C0e(r,l,o,e)}var u;if(e.isMatrix&&e.dataType!=="mixed"&&e.dataType!==void 0){var c=S0e(r,i);u=c!==void 0?c:r}else u=r;return i>=1&&i<=3?{isUnary:i===1,fn:function(){for(var d=arguments.length,f=new Array(d),p=0;p<d;p++)f[p]=arguments[p];return u6(u,f.slice(0,i),t,r.name)}}:{isUnary:!1,fn:function(){for(var d=arguments.length,f=new Array(d),p=0;p<d;p++)f[p]=arguments[p];return u6(u,f,t,r.name)}}}return n===void 0?{isUnary:T0e(r),fn:r}:{isUnary:n,fn:r}}function S0e(r,e){var t=[];if(Object.entries(r.signatures).forEach(n=>{var[i,s]=n;i.split(",").length===e&&t.push(s)}),t.length===1)return t[0]}function T0e(r){if(r.length!==1)return!1;var e=r.toString();if(/arguments/.test(e))return!1;var t=e.match(/\(.*?\)/);return!/\.\.\./.test(t)}function C0e(r,e,t,n){for(var i=[e,t,n],s=3;s>0;s--){var a=i.slice(0,s);if(hT.resolve(r,a)!==null)return s}}function u6(r,e,t,n){try{return r(...e)}catch(i){N0e(i,e,t,n)}}function N0e(r,e,t,n){var i;if(r instanceof TypeError&&((i=r.data)===null||i===void 0?void 0:i.category)==="wrongType"){var s=[];throw s.push("value: ".concat(dr(e[0]))),e.length>=2&&s.push("index: ".concat(dr(e[1]))),e.length>=3&&s.push("array: ".concat(dr(e[2]))),new TypeError("Function ".concat(t," cannot apply callback arguments ")+"".concat(n,"(").concat(s.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(t," cannot apply callback arguments ")+"to function ".concat(n,": ").concat(r.message))}var D0e="DenseMatrix",M0e=["Matrix","config"],I0e=X(D0e,M0e,r=>{var{Matrix:e,config:t}=r;function n(h,d){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(d&&!mn(d))throw new Error("Invalid datatype: "+d);if(ot(h))h.type==="DenseMatrix"?(this._data=gt(h._data),this._size=gt(h._size),this._datatype=d||h._datatype):(this._data=h.toArray(),this._size=h.size(),this._datatype=d||h._datatype);else if(h&&cr(h.data)&&cr(h.size))this._data=h.data,this._size=h.size,s6(this._data,this._size),this._datatype=d||h.datatype;else if(cr(h))this._data=c(h),this._size=vt(this._data),s6(this._data,this._size),this._datatype=d;else{if(h)throw new TypeError("Unsupported type of data ("+dr(h)+")");this._data=[],this._size=[0],this._datatype=d}}n.prototype=new e,n.prototype.createDenseMatrix=function(h,d){return new n(h,d)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return aN(this._data,dr)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(h,d){return new n(h,d)},n.prototype.subset=function(h,d,f){switch(arguments.length){case 1:return i(this,h);case 2:case 3:return a(this,h,d,f);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(h){return bT(this._data,h)},n.prototype.set=function(h,d,f){if(!cr(h))throw new TypeError("Array expected");if(h.length<this._size.length)throw new Mt(h.length,this._size.length,"<");var p,g,b,v=h.map(function(y){return y+1});u(this,v,f);var w=this._data;for(p=0,g=h.length-1;p<g;p++)b=h[p],xr(b,w.length),w=w[b];return b=h[h.length-1],xr(b,w.length),w[b]=d,this};function i(h,d){if(!ZC(d))throw new TypeError("Invalid index");var f=t.legacySubset?d.size().every(x=>x===1):d.isScalar();if(f)return h.get(d.min());var p=d.size();if(p.length!==h._size.length)throw new Mt(p.length,h._size.length);for(var g=d.min(),b=d.max(),v=0,w=h._size.length;v<w;v++)xr(g[v],h._size[v]),xr(b[v],h._size[v]);var y=new n,A=s(h._data,d);return y._size=A.size,y._datatype=h._datatype,y._data=A.data,t.legacySubset?y.reshape(d.size()):y}function s(h,d){var f=d.size().length-1,p=Array(f);return{data:g(h),size:p.filter(b=>b!==null)};function g(b){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,w=d.dimension(v);function y(A,x){return it(A)?x(A):A.map(x).valueOf()}return it(w)?p[v]=null:p[v]=w.size()[0],v<f?y(w,A=>(xr(A,b.length),g(b[A],v+1))):y(w,A=>(xr(A,b.length),b[A]))}}function a(h,d,f,p){if(!d||d.isIndex!==!0)throw new TypeError("Invalid index");var g=d.size(),b=d.isScalar(),v;if(ot(f)?(v=f.size(),f=f.valueOf()):v=vt(f),b){if(v.length!==0)throw new TypeError("Scalar expected");h.set(d.min(),f,p)}else{if(!Cc(v,g)){if(v.length===0)f=Ef([f],g);else try{f=Ef(f,g)}catch{}v=vt(f)}if(g.length<h._size.length)throw new Mt(g.length,h._size.length,"<");if(v.length<g.length){for(var w=0,y=0;g[w]===1&&v[w]===1;)w++;for(;g[w]===1;)y++,w++;f=WK(f,g.length,y,v)}if(!Cc(g,v))throw new Mt(g,v,">");var A=d.max().map(function(x){return x+1});u(h,A,p),o(h._data,d,f)}return h}function o(h,d,f){var p=d.size().length-1;g(h,f);function g(b,v){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,y=d.dimension(w),A=(_,S)=>{xr(_,b.length),g(b[_],v[S[0]],w+1)},x=(_,S)=>{xr(_,b.length),b[_]=v[S[0]]};w<p?it(y)?A(y,[0]):y.forEach(A):it(y)?x(y,[0]):y.forEach(x)}}n.prototype.resize=function(h,d,f){if(!Ia(h))throw new TypeError("Array or Matrix expected");var p=h.valueOf().map(b=>Array.isArray(b)&&b.length===1?b[0]:b),g=f?this.clone():this;return l(g,p,d)};function l(h,d,f){if(d.length===0){for(var p=h._data;cr(p);)p=p[0];return p}return h._size=d.slice(0),h._data=P0(h._data,h._size,f),h}n.prototype.reshape=function(h,d){var f=d?this.clone():this;f._data=zF(f._data,h);var p=f._size.reduce((g,b)=>g*b);return f._size=jF(h,p),f};function u(h,d,f){for(var p=h._size.slice(0),g=!1;p.length<d.length;)p.push(0),g=!0;for(var b=0,v=d.length;b<v;b++)d[b]>p[b]&&(p[b]=d[b],g=!0);g&&l(h,p,f)}n.prototype.clone=function(){var h=new n({data:gt(this._data),size:gt(this._size),datatype:this._datatype});return h},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(h){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=this,p=f._size.length-1;if(p<0)return f.clone();var g=lp(h,f,"map",d),b=g.fn,v=f.create(void 0,f._datatype);if(v._size=f._size,d||g.isUnary)return v._data=S(f._data),v;if(p===0){for(var w=f.valueOf(),y=Array(w.length),A=0;A<w.length;A++)y[A]=b(w[A],[A],f);return v._data=y,v}var x=[];return v._data=_(f._data),v;function _(E){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,N=Array(E.length);if(C<p)for(var D=0;D<E.length;D++)x[C]=D,N[D]=_(E[D],C+1);else for(var M=0;M<E.length;M++)x[C]=M,N[M]=b(E[M],x.slice(),f);return N}function S(E){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,N=Array(E.length);if(C<p)for(var D=0;D<E.length;D++)N[D]=S(E[D],C+1);else for(var M=0;M<E.length;M++)N[M]=b(E[M]);return N}},n.prototype.forEach=function(h){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=this,p=f._size.length-1;if(p<0)return;var g=lp(h,f,"map",d),b=g.fn;if(d||g.isUnary){A(f._data);return}if(p===0){for(var v=0;v<f._data.length;v++)b(f._data[v],[v],f);return}var w=[];y(f._data);function y(x){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(_<p)for(var S=0;S<x.length;S++)w[_]=S,y(x[S],_+1);else for(var E=0;E<x.length;E++)w[_]=E,b(x[E],w.slice(),f)}function A(x){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(_<p)for(var S=0;S<x.length;S++)A(x[S],_+1);else for(var E=0;E<x.length;E++)b(x[E])}},n.prototype[Symbol.iterator]=function*(){var h=this._size.length-1;if(!(h<0)){if(h===0){for(var d=0;d<this._data.length;d++)yield{value:this._data[d],index:[d]};return}for(var f=Array(h+1).fill(0),p=this._size.reduce((y,A)=>y*A,1),g=0;g<p;g++){for(var b=this._data,v=0;v<h;v++)b=b[f[v]];yield{value:b[f[h]],index:f.slice()};for(var w=h;w>=0&&(f[w]++,!(f[w]<this._size[w]));w--)f[w]=0}}},n.prototype.rows=function(){var h=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var f=this._data;for(var p of f)h.push(new n([p],this._datatype));return h},n.prototype.columns=function(){var h=this,d=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var p=this._data,g=function(w){var y=p.map(A=>[A[w]]);d.push(new n(y,h._datatype))},b=0;b<f[1];b++)g(b);return d},n.prototype.toArray=function(){return gt(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(h){return Pt(this._data,h)},n.prototype.toString=function(){return Pt(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(h){if(h){if(xt(h)&&(h=h.toNumber()),!it(h)||!tt(h))throw new TypeError("The parameter k must be an integer number")}else h=0;for(var d=h>0?h:0,f=h<0?-h:0,p=this._size[0],g=this._size[1],b=Math.min(p-f,g-d),v=[],w=0;w<b;w++)v[w]=this._data[w+f][w+d];return new n({data:v,size:[b],datatype:this._datatype})},n.diagonal=function(h,d,f,p){if(!cr(h))throw new TypeError("Array expected, size parameter");if(h.length!==2)throw new Error("Only two dimensions matrix are supported");if(h=h.map(function(E){if(xt(E)&&(E=E.toNumber()),!it(E)||!tt(E)||E<1)throw new Error("Size values must be positive integers");return E}),f){if(xt(f)&&(f=f.toNumber()),!it(f)||!tt(f))throw new TypeError("The parameter k must be an integer number")}else f=0;var g=f>0?f:0,b=f<0?-f:0,v=h[0],w=h[1],y=Math.min(v-b,w-g),A;if(cr(d)){if(d.length!==y)throw new Error("Invalid value array length");A=function(C){return d[C]}}else if(ot(d)){var x=d.size();if(x.length!==1||x[0]!==y)throw new Error("Invalid matrix length");A=function(C){return d.get([C])}}else A=function(){return d};p||(p=xt(A(0))?A(0).mul(0):0);var _=[];if(h.length>0){_=P0(_,h,p);for(var S=0;S<y;S++)_[S+b][S+g]=A(S)}return new n({data:_,size:[v,w]})},n.fromJSON=function(h){return new n(h)},n.prototype.swapRows=function(h,d){if(!it(h)||!tt(h)||!it(d)||!tt(d))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return xr(h,this._size[0]),xr(d,this._size[0]),n._swapRows(h,d,this._data),this},n._swapRows=function(h,d,f){var p=f[h];f[h]=f[d],f[d]=p};function c(h){return ot(h)?c(h.valueOf()):cr(h)?h.map(c):h}return n},{isClass:!0}),c6="clone",P0e=["typed"],R0e=X(c6,P0e,r=>{var{typed:e}=r;return e(c6,{any:gt})});function eX(r){var e=r.length,t=r[0].length,n,i,s=[];for(i=0;i<t;i++){var a=[];for(n=0;n<e;n++)a.push(r[n][i]);s.push(a)}return s}function ty(r){for(var e=0;e<r.length;e++)if(Ia(r[e]))return!0;return!1}function Dd(r,e){ot(r)?r.forEach(t=>e(t),!1,!0):ZK(r,e,!0)}function _t(r,e,t){if(!t)return ot(r)?r.map(i=>e(i),!1,!0):IP(r,e,!0);var n=i=>i===0?i:e(i);return ot(r)?r.map(i=>n(i),!1,!0):IP(r,n,!0)}function oN(r,e,t){var n=Array.isArray(r)?vt(r):r.size();if(e<0||e>=n.length)throw new Zo(e,n.length);return ot(r)?r.create(wT(r.valueOf(),e,t),r.datatype()):wT(r,e,t)}function wT(r,e,t){var n,i,s,a;if(e<=0)if(Array.isArray(r[0])){for(a=eX(r),i=[],n=0;n<a.length;n++)i[n]=wT(a[n],e-1,t);return i}else{for(s=r[0],n=1;n<r.length;n++)s=t(s,r[n]);return s}else{for(i=[],n=0;n<r.length;n++)i[n]=wT(r[n],e-1,t);return i}}function h6(r,e,t,n,i,s,a,o,l,u,c){var h=r._values,d=r._index,f=r._ptr,p,g,b,v;if(n)for(g=f[e],b=f[e+1],p=g;p<b;p++)v=d[p],t[v]!==s?(t[v]=s,a.push(v),n[v]=h[p]):(n[v]=o(n[v],h[p]),i[v]=s);else for(g=f[e],b=f[e+1],p=g;p<b;p++)v=d[p],t[v]!==s?(t[v]=s,a.push(v)):i[v]=s}var d6="isInteger",k0e=["typed","equal"],F0e=X(d6,k0e,r=>{var{typed:e,equal:t}=r;return e(d6,{number:n=>Number.isFinite(n)?t(n,Math.round(n)):!1,BigNumber:n=>n.isFinite()?t(n.round(),n):!1,bigint:n=>!0,Fraction:n=>n.d===1n,"Array | Matrix":e.referToSelf(n=>i=>_t(i,n))})}),el="number",ry="number, number";function tX(r){return Math.abs(r)}tX.signature=el;function rX(r,e){return r+e}rX.signature=ry;function nX(r,e){return r-e}nX.signature=ry;function iX(r,e){return r*e}iX.signature=ry;function sX(r){return-r}sX.signature=el;function aX(r){return r}aX.signature=el;function Ab(r){return Bge(r)}Ab.signature=el;function oX(r){return r*r*r}oX.signature=el;function lX(r){return Math.exp(r)}lX.signature=el;function uX(r){return Lge(r)}uX.signature=el;function cX(r,e){if(!tt(r)||!tt(e))throw new Error("Parameters in function lcm must be integer numbers");if(r===0||e===0)return 0;for(var t,n=r*e;e!==0;)t=e,e=r%t,r=t;return Math.abs(n/r)}cX.signature=ry;function f6(r,e){return e?Math.log(r)/Math.log(e):Math.log(r)}function xT(r){return Fge(r)}xT.signature=el;function PP(r){return kge(r)}PP.signature=el;function m6(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,t=e<0;if(t&&(e=-e),e===0)throw new Error("Root must be non-zero");if(r<0&&Math.abs(e)%2!==1)throw new Error("Root must be odd when a is negative.");if(r===0)return t?1/0:0;if(!isFinite(r))return t?0:r;var n=Math.pow(Math.abs(r),1/e);return n=r<0?-n:n,t?1/n:n}function RP(r){return Qh(r)}RP.signature=el;function hX(r){return r*r}hX.signature=el;function dX(r,e){var t,n,i,s=0,a=1,o=1,l=0;if(!tt(r)||!tt(e))throw new Error("Parameters in function xgcd must be integer numbers");for(;e;)n=Math.floor(r/e),i=r-n*e,t=s,s=a-n*s,a=t,t=o,o=l-n*o,l=t,r=e,e=i;var u;return r<0?u=[-r,-a,-l]:u=[r,r?a:0,l],u}dX.signature=ry;function fX(r,e){return r*r<1&&e===1/0||r*r>1&&e===-1/0?0:Math.pow(r,e)}fX.signature=ry;function zy(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!tt(e)||e<0||e>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(DK(r,e))}var O0e="number",ny="number, number";function mX(r,e){if(!tt(r)||!tt(e))throw new Error("Integers expected in function bitAnd");return r&e}mX.signature=ny;function pX(r){if(!tt(r))throw new Error("Integer expected in function bitNot");return~r}pX.signature=O0e;function gX(r,e){if(!tt(r)||!tt(e))throw new Error("Integers expected in function bitOr");return r|e}gX.signature=ny;function vX(r,e){if(!tt(r)||!tt(e))throw new Error("Integers expected in function bitXor");return r^e}vX.signature=ny;function yX(r,e){if(!tt(r)||!tt(e))throw new Error("Integers expected in function leftShift");return r<<e}yX.signature=ny;function bX(r,e){if(!tt(r)||!tt(e))throw new Error("Integers expected in function rightArithShift");return r>>e}bX.signature=ny;function wX(r,e){if(!tt(r)||!tt(e))throw new Error("Integers expected in function rightLogShift");return r>>>e}wX.signature=ny;function sc(r,e){if(e<r)return 1;if(e===r)return e;var t=e+r>>1;return sc(r,t)*sc(t+1,e)}function xX(r,e){if(!tt(r)||r<0)throw new TypeError("Positive integer value expected in function combinations");if(!tt(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(e>r)throw new TypeError("k must be less than or equal to n");for(var t=r-e,n=1,i=e<t?t+1:e+1,s=2,a=e<t?e:t,o=i;o<=r;++o)for(n*=o;s<=a&&n%s===0;)n/=s,++s;return s<=a&&(n/=sc(s,a)),n}xX.signature="number, number";var B0e=Math.PI,L0e=2*Math.PI,$0e=Math.E,V0e=1.618033988749895,U0e="number",qF="number, number";function _X(r){return!r}_X.signature=U0e;function kP(r,e){return!!(r||e)}kP.signature=qF;function FP(r,e){return!!r!=!!e}FP.signature=qF;function OP(r,e){return!!(r&&e)}OP.signature=qF;function _T(r){var e;if(tt(r))return r<=0?Number.isFinite(r)?1/0:NaN:r>171?1/0:sc(1,r-1);if(r<.5)return Math.PI/(Math.sin(Math.PI*r)*_T(1-r));if(r>=171.35)return 1/0;if(r>85){var t=r*r,n=t*r,i=n*r,s=i*r;return Math.sqrt(2*Math.PI/r)*Math.pow(r/Math.E,r)*(1+1/(12*r)+1/(288*t)-139/(51840*n)-571/(2488320*i)+163879/(209018880*s)+5246819/(75246796800*s*r))}--r,e=zg[0];for(var a=1;a<zg.length;++a)e+=zg[a]/(r+a);var o=r+AX+.5;return Math.sqrt(2*Math.PI)*Math.pow(o,r+.5)*Math.exp(-o)*e}_T.signature="number";var AX=4.7421875,zg=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],EX=.9189385332046728,z0e=5,j0e=7,p6=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function AT(r){if(r<0)return NaN;if(r===0)return 1/0;if(!Number.isFinite(r))return r;if(r<.5)return Math.log(Math.PI/Math.sin(Math.PI*r))-AT(1-r);r=r-1;for(var e=r+z0e+.5,t=p6[0],n=j0e-1;n>=1;n--)t+=p6[n]/(r+n);return EX+(r+.5)*Math.log(e)-e+Math.log(t)}AT.signature="number";var is="number";function SX(r){return zge(r)}SX.signature=is;function TX(r){return Math.atan(1/r)}TX.signature=is;function CX(r){return Number.isFinite(r)?(Math.log((r+1)/r)+Math.log(r/(r-1)))/2:0}CX.signature=is;function NX(r){return Math.asin(1/r)}NX.signature=is;function DX(r){var e=1/r;return Math.log(e+Math.sqrt(e*e+1))}DX.signature=is;function MX(r){return Math.acos(1/r)}MX.signature=is;function IX(r){var e=1/r,t=Math.sqrt(e*e-1);return Math.log(t+e)}IX.signature=is;function PX(r){return jge(r)}PX.signature=is;function RX(r){return qge(r)}RX.signature=is;function kX(r){return 1/Math.tan(r)}kX.signature=is;function FX(r){var e=Math.exp(2*r);return(e+1)/(e-1)}FX.signature=is;function OX(r){return 1/Math.sin(r)}OX.signature=is;function BX(r){return r===0?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(r)-Math.exp(-r)))*Qh(r)}BX.signature=is;function LX(r){return 1/Math.cos(r)}LX.signature=is;function $X(r){return 2/(Math.exp(r)+Math.exp(-r))}$X.signature=is;function VX(r){return Gge(r)}VX.signature=is;var HF="number";function UX(r){return r<0}UX.signature=HF;function zX(r){return r>0}zX.signature=HF;function jX(r){return Number.isNaN(r)}jX.signature=HF;function yo(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(t<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return r.isNaN()||e.isNaN()?!1:!r.isFinite()||!e.isFinite()?r.eq(e):r.eq(e)?!0:r.minus(e).abs().lte(r.constructor.max(r.constructor.max(r.abs(),e.abs()).mul(t),n))}var g6="isNegative",q0e=["typed","config"],H0e=X(g6,q0e,r=>{var{typed:e,config:t}=r;return e(g6,{number:n=>gi(n,0,t.relTol,t.absTol)?!1:UX(n),BigNumber:n=>yo(n,new n.constructor(0),t.relTol,t.absTol)?!1:n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n<0n,Fraction:n=>n.s<0n,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>_t(i,n))})}),v6="isNumeric",G0e=["typed"],W0e=X(v6,G0e,r=>{var{typed:e}=r;return e(v6,{"number | BigNumber | bigint | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(t=>n=>_t(n,t))})}),y6="hasNumericValue",K0e=["typed","isNumeric"],X0e=X(y6,K0e,r=>{var{typed:e,isNumeric:t}=r;return e(y6,{boolean:()=>!0,string:function(i){return i.trim().length>0&&!isNaN(Number(i))},any:function(i){return t(i)}})}),b6="isPositive",Y0e=["typed","config"],Q0e=X(b6,Y0e,r=>{var{typed:e,config:t}=r;return e(b6,{number:n=>gi(n,0,t.relTol,t.absTol)?!1:zX(n),BigNumber:n=>yo(n,new n.constructor(0),t.relTol,t.absTol)?!1:!n.isNeg()&&!n.isZero()&&!n.isNaN(),bigint:n=>n>0n,Fraction:n=>n.s>0n&&n.n>0n,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>_t(i,n))})}),w6="isZero",J0e=["typed","equalScalar"],Z0e=X(w6,J0e,r=>{var{typed:e,equalScalar:t}=r;return e(w6,{"number | BigNumber | Complex | Fraction":n=>t(n,0),bigint:n=>n===0n,Unit:e.referToSelf(n=>i=>e.find(n,i.valueType())(i.value)),"Array | Matrix":e.referToSelf(n=>i=>_t(i,n))})}),x6="isNaN",eye=["typed"],tye=X(x6,eye,r=>{var{typed:e}=r;return e(x6,{number:jX,BigNumber:function(n){return n.isNaN()},bigint:function(n){return!1},Fraction:function(n){return!1},Complex:function(n){return n.isNaN()},Unit:function(n){return Number.isNaN(n.value)},"Array | Matrix":e.referToSelf(t=>n=>_t(n,t))})}),_6="isBounded",rye=["typed"],nye=X(_6,rye,r=>{var{typed:e}=r;return e(_6,{number:t=>Number.isFinite(t),"BigNumber | Complex":t=>t.isFinite(),"bigint | Fraction":()=>!0,"null | undefined":()=>!1,Unit:e.referToSelf(t=>n=>t(n.value)),"Array | Matrix":e.referToSelf(t=>n=>(Array.isArray(n)||(n=n.valueOf()),n.every(i=>t(i))))})}),A6="isFinite",iye=["typed","isBounded","map"],sye=X(A6,iye,r=>{var{typed:e,isBounded:t,map:n}=r;return e(A6,{"Array | Matrix":i=>n(i,t),any:i=>t(i)})}),E6="typeOf",aye=["typed"],oye=X(E6,aye,r=>{var{typed:e}=r;return e(E6,{any:dr})});function lye(r,e,t,n){return gi(r.re,e.re,t,n)&&gi(r.im,e.im,t,n)}var iy=X("compareUnits",["typed"],r=>{var{typed:e}=r;return{"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(t,[n.valueType(),i.valueType()])(n.value,i.value)})}}),ET="equalScalar",uye=["typed","config"],cye=X(ET,uye,r=>{var{typed:e,config:t}=r,n=iy({typed:e});return e(ET,{"boolean, boolean":function(s,a){return s===a},"number, number":function(s,a){return gi(s,a,t.relTol,t.absTol)},"BigNumber, BigNumber":function(s,a){return s.eq(a)||yo(s,a,t.relTol,t.absTol)},"bigint, bigint":function(s,a){return s===a},"Fraction, Fraction":function(s,a){return s.equals(a)},"Complex, Complex":function(s,a){return lye(s,a,t.relTol,t.absTol)}},n)});X(ET,["typed","config"],r=>{var{typed:e,config:t}=r;return e(ET,{"number, number":function(i,s){return gi(i,s,t.relTol,t.absTol)}})});var hye="SparseMatrix",dye=["typed","equalScalar","Matrix"],fye=X(hye,dye,r=>{var{typed:e,equalScalar:t,Matrix:n}=r;function i(g,b){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(b&&!mn(b))throw new Error("Invalid datatype: "+b);if(ot(g))s(this,g,b);else if(g&&cr(g.index)&&cr(g.ptr)&&cr(g.size))this._values=g.values,this._index=g.index,this._ptr=g.ptr,this._size=g.size,this._datatype=b||g.datatype;else if(cr(g))a(this,g,b);else{if(g)throw new TypeError("Unsupported type of data ("+dr(g)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=b}}function s(g,b,v){b.type==="SparseMatrix"?(g._values=b._values?gt(b._values):void 0,g._index=gt(b._index),g._ptr=gt(b._ptr),g._size=gt(b._size),g._datatype=v||b._datatype):a(g,b.valueOf(),v||b._datatype)}function a(g,b,v){g._values=[],g._index=[],g._ptr=[],g._datatype=v;var w=b.length,y=0,A=t,x=0;if(mn(v)&&(A=e.find(t,[v,v])||t,x=e.convert(0,v)),w>0){var _=0;do{g._ptr.push(g._index.length);for(var S=0;S<w;S++){var E=b[S];if(cr(E)){if(_===0&&y<E.length&&(y=E.length),_<E.length){var C=E[_];A(C,x)||(g._values.push(C),g._index.push(S))}}else _===0&&y<1&&(y=1),A(E,x)||(g._values.push(E),g._index.push(S))}_++}while(_<y)}for(;g._ptr.length<=y;)g._ptr.push(g._index.length);g._size=[w,y]}i.prototype=new n,i.prototype.createSparseMatrix=function(g,b){return new i(g,b)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return aN(this._values,dr)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(g,b){return new i(g,b)},i.prototype.density=function(){var g=this._size[0],b=this._size[1];return g!==0&&b!==0?this._index.length/(g*b):0},i.prototype.subset=function(g,b,v){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,g);case 2:case 3:return l(this,g,b,v);default:throw new SyntaxError("Wrong number of arguments")}};function o(g,b){if(!ZC(b))throw new TypeError("Invalid index");var v=b.isScalar();if(v)return g.get(b.min());var w=b.size();if(w.length!==g._size.length)throw new Mt(w.length,g._size.length);var y,A,x,_,S=b.min(),E=b.max();for(y=0,A=g._size.length;y<A;y++)xr(S[y],g._size[y]),xr(E[y],g._size[y]);var C=g._values,N=g._index,D=g._ptr,M=b.dimension(0),I=b.dimension(1),V=[],K=[];function F(ue,te){K[ue]=te[0],V[ue]=!0}Number.isInteger(M)?F(M,[0]):M.forEach(F);var U=C?[]:void 0,j=[],G=[];function ee(ue){for(G.push(j.length),x=D[ue],_=D[ue+1];x<_;x++)y=N[x],V[y]===!0&&(j.push(K[y]),U&&U.push(C[x]))}return Number.isInteger(I)?ee(I):I.forEach(ee),G.push(j.length),new i({values:U,index:j,ptr:G,size:w,datatype:g._datatype})}function l(g,b,v,w){if(!b||b.isIndex!==!0)throw new TypeError("Invalid index");var y=b.size(),A=b.isScalar(),x;if(ot(v)?(x=v.size(),v=v.toArray()):x=vt(v),A){if(x.length!==0)throw new TypeError("Scalar expected");g.set(b.min(),v,w)}else{if(y.length!==1&&y.length!==2)throw new Mt(y.length,g._size.length,"<");if(x.length<y.length){for(var _=0,S=0;y[_]===1&&x[_]===1;)_++;for(;y[_]===1;)S++,_++;v=WK(v,y.length,S,x)}if(!Cc(y,x))throw new Mt(y,x,">");if(y.length===1){var E=b.dimension(0);D(E,(M,I)=>{xr(M),g.set([M,0],v[I[0]],w)})}else{var C=b.dimension(0),N=b.dimension(1);D(C,(M,I)=>{xr(M),D(N,(V,K)=>{xr(V),g.set([M,V],v[I[0]][K[0]],w)})})}}return g;function D(M,I){it(M)?I(M,[0]):M.forEach(I)}}i.prototype.get=function(g){if(!cr(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new Mt(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var b=g[0],v=g[1];xr(b,this._size[0]),xr(v,this._size[1]);var w=u(b,this._ptr[v],this._ptr[v+1],this._index);return w<this._ptr[v+1]&&this._index[w]===b?this._values[w]:0},i.prototype.set=function(g,b,v){if(!cr(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new Mt(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var w=g[0],y=g[1],A=this._size[0],x=this._size[1],_=t,S=0;mn(this._datatype)&&(_=e.find(t,[this._datatype,this._datatype])||t,S=e.convert(0,this._datatype)),(w>A-1||y>x-1)&&(d(this,Math.max(w+1,A),Math.max(y+1,x),v),A=this._size[0],x=this._size[1]),xr(w,A),xr(y,x);var E=u(w,this._ptr[y],this._ptr[y+1],this._index);return E<this._ptr[y+1]&&this._index[E]===w?_(b,S)?c(E,y,this._values,this._index,this._ptr):this._values[E]=b:_(b,S)||h(E,w,y,b,this._values,this._index,this._ptr),this};function u(g,b,v,w){if(v-b===0)return v;for(var y=b;y<v;y++)if(w[y]===g)return y;return b}function c(g,b,v,w,y){v.splice(g,1),w.splice(g,1);for(var A=b+1;A<y.length;A++)y[A]--}function h(g,b,v,w,y,A,x){y.splice(g,0,w),A.splice(g,0,b);for(var _=v+1;_<x.length;_++)x[_]++}i.prototype.resize=function(g,b,v){if(!Ia(g))throw new TypeError("Array or Matrix expected");var w=g.valueOf().map(A=>Array.isArray(A)&&A.length===1?A[0]:A);if(w.length!==2)throw new Error("Only two dimensions matrix are supported");w.forEach(function(A){if(!it(A)||!tt(A)||A<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Pt(w)+")")});var y=v?this.clone():this;return d(y,w[0],w[1],b)};function d(g,b,v,w){var y=w||0,A=t,x=0;mn(g._datatype)&&(A=e.find(t,[g._datatype,g._datatype])||t,x=e.convert(0,g._datatype),y=e.convert(y,g._datatype));var _=!A(y,x),S=g._size[0],E=g._size[1],C,N,D;if(v>E){for(N=E;N<v;N++)if(g._ptr[N]=g._values.length,_)for(C=0;C<S;C++)g._values.push(y),g._index.push(C);g._ptr[v]=g._values.length}else v<E&&(g._ptr.splice(v+1,E-v),g._values.splice(g._ptr[v],g._values.length),g._index.splice(g._ptr[v],g._index.length));if(E=v,b>S){if(_){var M=0;for(N=0;N<E;N++){g._ptr[N]=g._ptr[N]+M,D=g._ptr[N+1]+M;var I=0;for(C=S;C<b;C++,I++)g._values.splice(D+I,0,y),g._index.splice(D+I,0,C),M++}g._ptr[E]=g._values.length}}else if(b<S){var V=0;for(N=0;N<E;N++){g._ptr[N]=g._ptr[N]-V;var K=g._ptr[N],F=g._ptr[N+1]-V;for(D=K;D<F;D++)C=g._index[D],C>b-1&&(g._values.splice(D,1),g._index.splice(D,1),V++)}g._ptr[N]=g._values.length}return g._size[0]=b,g._size[1]=v,g}i.prototype.reshape=function(g,b){if(!cr(g))throw new TypeError("Array expected");if(g.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");g.forEach(function(G){if(!it(G)||!tt(G)||G<=-2||G===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Pt(g)+")")});var v=this._size[0]*this._size[1];g=jF(g,v);var w=g[0]*g[1];if(v!==w)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var y=b?this.clone():this;if(this._size[0]===g[0]&&this._size[1]===g[1])return y;for(var A=[],x=0;x<y._ptr.length;x++)for(var _=0;_<y._ptr[x+1]-y._ptr[x];_++)A.push(x);for(var S=y._values.slice(),E=y._index.slice(),C=0;C<y._index.length;C++){var N=E[C],D=A[C],M=N*y._size[1]+D;A[C]=M%g[1],E[C]=Math.floor(M/g[1])}y._values.length=0,y._index.length=0,y._ptr.length=g[1]+1,y._size=g.slice();for(var I=0;I<y._ptr.length;I++)y._ptr[I]=0;for(var V=0;V<S.length;V++){var K=E[V],F=A[V],U=S[V],j=u(K,y._ptr[F],y._ptr[F+1],y._index);h(j,K,F,U,y._values,y._index,y._ptr)}return y},i.prototype.clone=function(){var g=new i({values:this._values?gt(this._values):void 0,index:gt(this._index),ptr:gt(this._ptr),size:gt(this._size),datatype:this._datatype});return g},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(g,b){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var v=this,w=this._size[0],y=this._size[1],A=lp(g,v,"map"),x=function(S,E,C){return A.fn(S,[E,C],v)};return f(this,0,w-1,0,y-1,x,b)};function f(g,b,v,w,y,A,x){var _=[],S=[],E=[],C=t,N=0;mn(g._datatype)&&(C=e.find(t,[g._datatype,g._datatype])||t,N=e.convert(0,g._datatype));for(var D=function(R,Y,H){var he=A(R,Y,H);C(he,N)||(_.push(he),S.push(Y))},M=w;M<=y;M++){E.push(_.length);var I=g._ptr[M],V=g._ptr[M+1];if(x)for(var K=I;K<V;K++){var F=g._index[K];F>=b&&F<=v&&D(g._values[K],F-b,M-w)}else{for(var U={},j=I;j<V;j++){var G=g._index[j];U[G]=g._values[j]}for(var ee=b;ee<=v;ee++){var ue=ee in U?U[ee]:0;D(ue,ee-b,M-w)}}}return E.push(_.length),new i({values:_,index:S,ptr:E,size:[v-b+1,y-w+1]})}i.prototype.forEach=function(g,b){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var v=this,w=this._size[0],y=this._size[1],A=lp(g,v,"forEach"),x=0;x<y;x++){var _=this._ptr[x],S=this._ptr[x+1];if(b)for(var E=_;E<S;E++){var C=this._index[E];A.fn(this._values[E],[C,x],v)}else{for(var N={},D=_;D<S;D++){var M=this._index[D];N[M]=this._values[D]}for(var I=0;I<w;I++){var V=I in N?N[I]:0;A.fn(V,[I,x],v)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var g=this._size[1],b=0;b<g;b++)for(var v=this._ptr[b],w=this._ptr[b+1],y=v;y<w;y++){var A=this._index[y];yield{value:this._values[y],index:[A,b]}}},i.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)};function p(g,b,v,w,y){var A=w[0],x=w[1],_=[],S,E;for(S=0;S<A;S++)for(_[S]=[],E=0;E<x;E++)_[S][E]=0;for(E=0;E<x;E++)for(var C=v[E],N=v[E+1],D=C;D<N;D++)S=b[D],_[S][E]=g?y?gt(g[D]):g[D]:1;return _}return i.prototype.format=function(g){for(var b=this._size[0],v=this._size[1],w=this.density(),y="Sparse Matrix ["+Pt(b,g)+" x "+Pt(v,g)+"] density: "+Pt(w,g)+`
`,A=0;A<v;A++)for(var x=this._ptr[A],_=this._ptr[A+1],S=x;S<_;S++){var E=this._index[S];y+=`
    (`+Pt(E,g)+", "+Pt(A,g)+") ==> "+(this._values?Pt(this._values[S],g):"X")}return y},i.prototype.toString=function(){return Pt(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(g){if(g){if(xt(g)&&(g=g.toNumber()),!it(g)||!tt(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var b=g>0?g:0,v=g<0?-g:0,w=this._size[0],y=this._size[1],A=Math.min(w-v,y-b),x=[],_=[],S=[];S[0]=0;for(var E=b;E<y&&x.length<A;E++)for(var C=this._ptr[E],N=this._ptr[E+1],D=C;D<N;D++){var M=this._index[D];if(M===E-b+v){x.push(this._values[D]),_[x.length-1]=M-v;break}}return S.push(x.length),new i({values:x,index:_,ptr:S,size:[A,1]})},i.fromJSON=function(g){return new i(g)},i.diagonal=function(g,b,v,w,y){if(!cr(g))throw new TypeError("Array expected, size parameter");if(g.length!==2)throw new Error("Only two dimensions matrix are supported");if(g=g.map(function(G){if(xt(G)&&(G=G.toNumber()),!it(G)||!tt(G)||G<1)throw new Error("Size values must be positive integers");return G}),v){if(xt(v)&&(v=v.toNumber()),!it(v)||!tt(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var A=t,x=0;mn(y)&&(A=e.find(t,[y,y])||t,x=e.convert(0,y));var _=v>0?v:0,S=v<0?-v:0,E=g[0],C=g[1],N=Math.min(E-S,C-_),D;if(cr(b)){if(b.length!==N)throw new Error("Invalid value array length");D=function(ee){return b[ee]}}else if(ot(b)){var M=b.size();if(M.length!==1||M[0]!==N)throw new Error("Invalid matrix length");D=function(ee){return b.get([ee])}}else D=function(){return b};for(var I=[],V=[],K=[],F=0;F<C;F++){K.push(I.length);var U=F-_;if(U>=0&&U<N){var j=D(U);A(j,x)||(V.push(U+S),I.push(j))}}return K.push(I.length),new i({values:I,index:V,ptr:K,size:[E,C]})},i.prototype.swapRows=function(g,b){if(!it(g)||!tt(g)||!it(b)||!tt(b))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return xr(g,this._size[0]),xr(b,this._size[0]),i._swapRows(g,b,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(g,b,v,w,y){for(var A=w[g],x=w[g+1],_=A;_<x;_++)y(v[_],b[_])},i._swapRows=function(g,b,v,w,y,A){for(var x=0;x<v;x++){var _=A[x],S=A[x+1],E=u(g,_,S,y),C=u(b,_,S,y);if(E<S&&C<S&&y[E]===g&&y[C]===b){if(w){var N=w[E];w[E]=w[C],w[C]=N}continue}if(E<S&&y[E]===g&&(C>=S||y[C]!==b)){var D=w?w[E]:void 0;y.splice(C,0,b),w&&w.splice(C,0,D),y.splice(C<=E?E+1:E,1),w&&w.splice(C<=E?E+1:E,1);continue}if(C<S&&y[C]===b&&(E>=S||y[E]!==g)){var M=w?w[C]:void 0;y.splice(E,0,g),w&&w.splice(E,0,M),y.splice(E<=C?C+1:C,1),w&&w.splice(E<=C?C+1:C,1)}}},i},{isClass:!0}),mye="number",pye=["typed"];function gye(r){var e=r.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var t={"0b":2,"0o":8,"0x":16}[e[1]],n=e[2],i=e[3];return{input:r,radix:t,integerPart:n,fractionalPart:i}}else return null}function vye(r){for(var e=parseInt(r.integerPart,r.radix),t=0,n=0;n<r.fractionalPart.length;n++){var i=parseInt(r.fractionalPart[n],r.radix);t+=i/Math.pow(r.radix,n+1)}var s=e+t;if(isNaN(s))throw new SyntaxError('String "'+r.input+'" is not a valid number');return s}var yye=X(mye,pye,r=>{var{typed:e}=r,t=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var s=gye(i);if(s)return vye(s);var a=0,o=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);o&&(a=Number(o[2]),i=o[1]);var l=Number(i);if(isNaN(l))throw new SyntaxError('String "'+i+'" is not a valid number');if(o){if(l>2**a-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));l>=2**(a-1)&&(l=l-2**a)}return l},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:e.referToSelf(n=>i=>{var s=i.clone();return s.value=n(i.value),s}),null:function(i){return 0},"Unit, string | Unit":function(i,s){return i.toNumber(s)},"Array | Matrix":e.referToSelf(n=>i=>_t(i,n))});return t.fromJSON=function(n){return parseFloat(n.value)},t}),bye="bigint",wye=["typed"],xye=X(bye,wye,r=>{var{typed:e}=r,t=e("bigint",{"":function(){return 0n},bigint:function(i){return i},number:function(i){return BigInt(i.toFixed())},BigNumber:function(i){return BigInt(i.round().toString())},Fraction:function(i){return BigInt(i.valueOf().toFixed())},"string | boolean":function(i){return BigInt(i)},null:function(i){return 0n},"Array | Matrix":e.referToSelf(n=>i=>_t(i,n))});return t.fromJSON=function(n){return BigInt(n.value)},t}),S6="string",_ye=["typed"],Aye=X(S6,_ye,r=>{var{typed:e}=r;return e(S6,{"":function(){return""},number:Gm,null:function(n){return"null"},boolean:function(n){return n+""},string:function(n){return n},"Array | Matrix":e.referToSelf(t=>n=>_t(n,t)),any:function(n){return String(n)}})}),T6="boolean",Eye=["typed"],Sye=X(T6,Eye,r=>{var{typed:e}=r;return e(T6,{"":function(){return!1},boolean:function(n){return n},number:function(n){return!!n},null:function(n){return!1},BigNumber:function(n){return!n.isZero()},string:function(n){var i=n.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;var s=Number(n);if(n!==""&&!isNaN(s))return!!s;throw new Error('Cannot convert "'+n+'" to a boolean')},"Array | Matrix":e.referToSelf(t=>n=>_t(n,t))})}),Tye="bignumber",Cye=["typed","BigNumber"],Nye=X(Tye,Cye,r=>{var{typed:e,BigNumber:t}=r;return e("bignumber",{"":function(){return new t(0)},number:function(i){return new t(i+"")},string:function(i){var s=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(s){var a=s[2],o=t(s[1]),l=new t(2).pow(Number(a));if(o.gt(l.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var u=new t(2).pow(Number(a)-1);return o.gte(u)?o.sub(l):o}return new t(i)},BigNumber:function(i){return i},bigint:function(i){return new t(i.toString())},Unit:e.referToSelf(n=>i=>{var s=i.clone();return s.value=n(i.value),s}),Fraction:function(i){return new t(String(i.n)).div(String(i.d)).times(String(i.s))},null:function(i){return new t(0)},"Array | Matrix":e.referToSelf(n=>i=>_t(i,n))})}),Dye="complex",Mye=["typed","Complex"],Iye=X(Dye,Mye,r=>{var{typed:e,Complex:t}=r;return e("complex",{"":function(){return t.ZERO},number:function(i){return new t(i,0)},"number, number":function(i,s){return new t(i,s)},"BigNumber, BigNumber":function(i,s){return new t(i.toNumber(),s.toNumber())},Fraction:function(i){return new t(i.valueOf(),0)},Complex:function(i){return i.clone()},string:function(i){return t(i)},null:function(i){return t(0)},Object:function(i){if("re"in i&&"im"in i)return new t(i.re,i.im);if("r"in i&&"phi"in i||"abs"in i&&"arg"in i)return new t(i);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(n=>i=>_t(i,n))})}),Pye="fraction",Rye=["typed","Fraction"],kye=X(Pye,Rye,r=>{var{typed:e,Fraction:t}=r;return e("fraction",{number:function(i){if(!Number.isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new t(i)},string:function(i){return new t(i)},"number, number":function(i,s){return new t(i,s)},"bigint, bigint":function(i,s){return new t(i,s)},null:function(i){return new t(0)},BigNumber:function(i){return new t(i.toString())},bigint:function(i){return new t(i.toString())},Fraction:function(i){return i},Unit:e.referToSelf(n=>i=>{var s=i.clone();return s.value=n(i.value),s}),Object:function(i){return new t(i)},"Array | Matrix":e.referToSelf(n=>i=>_t(i,n))})}),C6="matrix",Fye=["typed","Matrix","DenseMatrix","SparseMatrix"],Oye=X(C6,Fye,r=>{var{typed:e,Matrix:t,DenseMatrix:n,SparseMatrix:i}=r;return e(C6,{"":function(){return s([])},string:function(o){return s([],o)},"string, string":function(o,l){return s([],o,l)},Array:function(o){return s(o)},Matrix:function(o){return s(o,o.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(a,o,l){if(o==="dense"||o==="default"||o===void 0)return new n(a,l);if(o==="sparse")return new i(a,l);throw new TypeError("Unknown matrix type "+JSON.stringify(o)+".")}}),N6="matrixFromFunction",Bye=["typed","matrix","isZero"],Lye=X(N6,Bye,r=>{var{typed:e,matrix:t,isZero:n}=r;return e(N6,{"Array | Matrix, function, string, string":function(a,o,l,u){return i(a,o,l,u)},"Array | Matrix, function, string":function(a,o,l){return i(a,o,l)},"Matrix, function":function(a,o){return i(a,o,"dense")},"Array, function":function(a,o){return i(a,o,"dense").toArray()},"Array | Matrix, string, function":function(a,o,l){return i(a,l,o)},"Array | Matrix, string, string, function":function(a,o,l,u){return i(a,u,o,l)}});function i(s,a,o,l){var u;return l!==void 0?u=t(o,l):u=t(o),u.resize(s),u.forEach(function(c,h){var d=a(h);n(d)||u.set(h,d)}),u}}),D6="matrixFromRows",$ye=["typed","matrix","flatten","size"],Vye=X(D6,$ye,r=>{var{typed:e,matrix:t,flatten:n,size:i}=r;return e(D6,{"...Array":function(l){return s(l)},"...Matrix":function(l){return t(s(l.map(u=>u.toArray())))}});function s(o){if(o.length===0)throw new TypeError("At least one row is needed to construct a matrix.");var l=a(o[0]),u=[];for(var c of o){var h=a(c);if(h!==l)throw new TypeError("The vectors had different length: "+(l|0)+"  "+(h|0));u.push(n(c))}return u}function a(o){var l=i(o);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),M6="matrixFromColumns",Uye=["typed","matrix","flatten","size"],zye=X(M6,Uye,r=>{var{typed:e,matrix:t,flatten:n,size:i}=r;return e(M6,{"...Array":function(l){return s(l)},"...Matrix":function(l){return t(s(l.map(u=>u.toArray())))}});function s(o){if(o.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var l=a(o[0]),u=[],c=0;c<l;c++)u[c]=[];for(var h of o){var d=a(h);if(d!==l)throw new TypeError("The vectors had different length: "+(l|0)+"  "+(d|0));for(var f=n(h),p=0;p<l;p++)u[p].push(f[p])}return u}function a(o){var l=i(o);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),I6="splitUnit",jye=["typed"],qye=X(I6,jye,r=>{var{typed:e}=r;return e(I6,{"Unit, Array":function(n,i){return n.splitUnit(i)}})}),P6="unaryMinus",Hye=["typed"],Gye=X(P6,Hye,r=>{var{typed:e}=r;return e(P6,{number:sX,"Complex | BigNumber | Fraction":t=>t.neg(),bigint:t=>-t,Unit:e.referToSelf(t=>n=>{var i=n.clone();return i.value=e.find(t,i.valueType())(n.value),i}),"Array | Matrix":e.referToSelf(t=>n=>_t(n,t,!0))})}),R6="unaryPlus",Wye=["typed","config","numeric"],Kye=X(R6,Wye,r=>{var{typed:e,config:t,numeric:n}=r;return e(R6,{number:aX,Complex:function(s){return s},BigNumber:function(s){return s},bigint:function(s){return s},Fraction:function(s){return s},Unit:function(s){return s.clone()},"Array | Matrix":e.referToSelf(i=>s=>_t(s,i,!0)),boolean:function(s){return n(s?1:0,t.number)},string:function(s){return n(s,Vd(s,t))}})}),k6="abs",Xye=["typed"],Yye=X(k6,Xye,r=>{var{typed:e}=r;return e(k6,{number:tX,"Complex | BigNumber | Fraction | Unit":t=>t.abs(),bigint:t=>t<0n?-t:t,"Array | Matrix":e.referToSelf(t=>n=>_t(n,t,!0))})}),F6="mapSlices",Qye=["typed","isInteger"],BP=X(F6,Qye,r=>{var{typed:e,isInteger:t}=r;return e(F6,{"Array | Matrix, number | BigNumber, function":function(i,s,a){if(!t(s))throw new TypeError("Integer number expected for dimension");var o=Array.isArray(i)?vt(i):i.size();if(s<0||s>=o.length)throw new Zo(s,o.length);return ot(i)?i.create(ST(i.valueOf(),s,a),i.datatype()):ST(i,s,a)}})},{formerly:"apply"});function ST(r,e,t){var n,i,s;if(e<=0)if(Array.isArray(r[0])){for(s=Jye(r),i=[],n=0;n<s.length;n++)i[n]=ST(s[n],e-1,t);return i}else return t(r);else{for(i=[],n=0;n<r.length;n++)i[n]=ST(r[n],e-1,t);return i}}function Jye(r){var e=r.length,t=r[0].length,n,i,s=[];for(i=0;i<t;i++){var a=[];for(n=0;n<e;n++)a.push(r[n][i]);s.push(a)}return s}var O6="addScalar",Zye=["typed"],ebe=X(O6,Zye,r=>{var{typed:e}=r;return e(O6,{"number, number":rX,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"bigint, bigint":function(n,i){return n+i},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var s=n.clone();return s.value=e.find(t,[s.valueType(),i.valueType()])(s.value,i.value),s.fixPrefix=!1,s})})}),B6="subtractScalar",tbe=["typed"],rbe=X(B6,tbe,r=>{var{typed:e}=r;return e(B6,{"number, number":nX,"Complex, Complex":function(n,i){return n.sub(i)},"BigNumber, BigNumber":function(n,i){return n.minus(i)},"bigint, bigint":function(n,i){return n-i},"Fraction, Fraction":function(n,i){return n.sub(i)},"Unit, Unit":e.referToSelf(t=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var s=n.clone();return s.value=e.find(t,[s.valueType(),i.valueType()])(s.value,i.value),s.fixPrefix=!1,s})})}),L6="cbrt",nbe=["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],ibe=X(L6,nbe,r=>{var{config:e,typed:t,isNegative:n,unaryMinus:i,matrix:s,Complex:a,BigNumber:o,Fraction:l}=r;return t(L6,{number:Ab,Complex:u,"Complex, boolean":u,BigNumber:function(d){return d.cbrt()},Unit:c});function u(h,d){var f=h.arg()/3,p=h.abs(),g=new a(Ab(p),0).mul(new a(0,f).exp());if(d){var b=[g,new a(Ab(p),0).mul(new a(0,f+Math.PI*2/3).exp()),new a(Ab(p),0).mul(new a(0,f-Math.PI*2/3).exp())];return e.matrix==="Array"?b:s(b)}else return g}function c(h){if(h.value&&uc(h.value)){var d=h.clone();return d.value=1,d=d.pow(1/3),d.value=u(h.value),d}else{var f=n(h.value);f&&(h.value=i(h.value));var p;xt(h.value)?p=new o(1).div(3):c_(h.value)?p=new l(1,3):p=1/3;var g=h.pow(p);return f&&(g.value=i(g.value)),g}}}),sbe="matAlgo11xS0s",abe=["typed","equalScalar"],Bi=X(sbe,abe,r=>{var{typed:e,equalScalar:t}=r;return function(i,s,a,o){var l=i._values,u=i._index,c=i._ptr,h=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f=h[0],p=h[1],g,b=t,v=0,w=a;typeof d=="string"&&(g=d,b=e.find(t,[g,g]),v=e.convert(0,g),s=e.convert(s,g),w=e.find(a,[g,g]));for(var y=[],A=[],x=[],_=0;_<p;_++){x[_]=A.length;for(var S=c[_],E=c[_+1],C=S;C<E;C++){var N=u[C],D=o?w(s,l[C]):w(l[C],s);b(D,v)||(A.push(N),y.push(D))}}return x[p]=A.length,i.createSparseMatrix({values:y,index:A,ptr:x,size:[f,p],datatype:g})}}),obe="matAlgo12xSfs",lbe=["typed","DenseMatrix"],Yn=X(obe,lbe,r=>{var{typed:e,DenseMatrix:t}=r;return function(i,s,a,o){var l=i._values,u=i._index,c=i._ptr,h=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f=h[0],p=h[1],g,b=a;typeof d=="string"&&(g=d,s=e.convert(s,g),b=e.find(a,[g,g]));for(var v=[],w=[],y=[],A=0;A<p;A++){for(var x=A+1,_=c[A],S=c[A+1],E=_;E<S;E++){var C=u[E];w[C]=l[E],y[C]=x}for(var N=0;N<f;N++)A===0&&(v[N]=[]),y[N]===x?v[N][A]=o?b(s,w[N]):b(w[N],s):v[N][A]=o?b(s,0):b(0,s)}return new t({data:v,size:[f,p],datatype:g})}}),ube="matAlgo14xDs",cbe=["typed"],bo=X(ube,cbe,r=>{var{typed:e}=r;return function(i,s,a,o){var l=i._data,u=i._size,c=i._datatype,h,d=a;typeof c=="string"&&(h=c,s=e.convert(s,h),d=e.find(a,[h,h]));var f=u.length>0?t(d,0,u,u[0],l,s,o):[];return i.createDenseMatrix({data:f,size:gt(u),datatype:h})};function t(n,i,s,a,o,l,u){var c=[];if(i===s.length-1)for(var h=0;h<a;h++)c[h]=u?n(l,o[h]):n(o[h],l);else for(var d=0;d<a;d++)c[d]=t(n,i+1,s,s[i+1],o[d],l,u);return c}}),LP="ceil",hbe=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],dbe=new Nd(10),fbe=X(LP,["typed","config","round"],r=>{var{typed:e,config:t,round:n}=r;function i(s){var a=Math.ceil(s),o=n(s);return a===o?a:gi(s,o,t.relTol,t.absTol)&&!gi(s,a,t.relTol,t.absTol)?o:a}return e(LP,{number:i,"number, number":function(a,o){if(!tt(o))throw new RangeError("number of decimals in function ceil must be an integer");if(o<0||o>15)throw new RangeError("number of decimals in ceil number must be in range 0-15");var l=10**o;return i(a*l)/l}})}),mbe=X(LP,hbe,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:s,zeros:a,DenseMatrix:o}=r,l=Bi({typed:e,equalScalar:s}),u=Yn({typed:e,DenseMatrix:o}),c=bo({typed:e}),h=fbe({typed:e,config:t,round:n});function d(f){var p=(v,w)=>yo(v,w,t.relTol,t.absTol),g=f.ceil(),b=n(f);return g.eq(b)?g:p(f,b)&&!p(f,g)?b:g}return e("ceil",{number:h.signatures.number,"number,number":h.signatures["number,number"],Complex:function(p){return p.ceil()},"Complex, number":function(p,g){return p.ceil(g)},"Complex, BigNumber":function(p,g){return p.ceil(g.toNumber())},BigNumber:d,"BigNumber, BigNumber":function(p,g){var b=dbe.pow(g);return d(p.mul(b)).div(b)},bigint:f=>f,"bigint, number":(f,p)=>f,"bigint, BigNumber":(f,p)=>f,Fraction:function(p){return p.ceil()},"Fraction, number":function(p,g){return p.ceil(g)},"Fraction, BigNumber":function(p,g){return p.ceil(g.toNumber())},"Unit, number, Unit":e.referToSelf(f=>function(p,g,b){var v=p.toNumeric(b);return b.multiply(f(v,g))}),"Unit, BigNumber, Unit":e.referToSelf(f=>(p,g,b)=>f(p,g.toNumber(),b)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(f=>(p,g,b)=>_t(p,v=>f(v,g,b),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(f=>(p,g)=>f(p,0,g)),"Array | Matrix":e.referToSelf(f=>p=>_t(p,f,!0)),"Array, number | BigNumber":e.referToSelf(f=>(p,g)=>_t(p,b=>f(b,g),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(f=>(p,g)=>l(p,g,f,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(f=>(p,g)=>c(p,g,f,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(f=>(p,g)=>c(i(g),p,f,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(f=>(p,g)=>s(p,0)?a(g.size(),g.storage()):g.storage()==="dense"?c(g,p,f,!0):u(g,p,f,!0))})}),$6="cube",pbe=["typed"],gbe=X($6,pbe,r=>{var{typed:e}=r;return e($6,{number:oX,Complex:function(n){return n.mul(n).mul(n)},BigNumber:function(n){return n.times(n).times(n)},bigint:function(n){return n*n*n},Fraction:function(n){return n.pow(3)},Unit:function(n){return n.pow(3)}})}),V6="exp",vbe=["typed"],ybe=X(V6,vbe,r=>{var{typed:e}=r;return e(V6,{number:lX,Complex:function(n){return n.exp()},BigNumber:function(n){return n.exp()}})}),U6="expm1",bbe=["typed","Complex"],wbe=X(U6,bbe,r=>{var{typed:e,Complex:t}=r;return e(U6,{number:uX,Complex:function(i){var s=Math.exp(i.re);return new t(s*Math.cos(i.im)-1,s*Math.sin(i.im))},BigNumber:function(i){return i.exp().minus(1)}})}),$P="fix",xbe=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],_be=X($P,["typed","ceil","floor"],r=>{var{typed:e,ceil:t,floor:n}=r;return e($P,{number:function(s){return s>0?n(s):t(s)},"number, number":function(s,a){return s>0?n(s,a):t(s,a)}})}),Abe=X($P,xbe,r=>{var{typed:e,Complex:t,matrix:n,ceil:i,floor:s,equalScalar:a,zeros:o,DenseMatrix:l}=r,u=Yn({typed:e,DenseMatrix:l}),c=bo({typed:e}),h=_be({typed:e,ceil:i,floor:s});return e("fix",{number:h.signatures.number,"number, number | BigNumber":h.signatures["number,number"],Complex:function(f){return new t(f.re>0?Math.floor(f.re):Math.ceil(f.re),f.im>0?Math.floor(f.im):Math.ceil(f.im))},"Complex, number":function(f,p){return new t(f.re>0?s(f.re,p):i(f.re,p),f.im>0?s(f.im,p):i(f.im,p))},"Complex, BigNumber":function(f,p){var g=p.toNumber();return new t(f.re>0?s(f.re,g):i(f.re,g),f.im>0?s(f.im,g):i(f.im,g))},BigNumber:function(f){return f.isNegative()?i(f):s(f)},"BigNumber, number | BigNumber":function(f,p){return f.isNegative()?i(f,p):s(f,p)},bigint:d=>d,"bigint, number":(d,f)=>d,"bigint, BigNumber":(d,f)=>d,Fraction:function(f){return f.s<0n?f.ceil():f.floor()},"Fraction, number | BigNumber":function(f,p){return f.s<0n?i(f,p):s(f,p)},"Unit, number, Unit":e.referToSelf(d=>function(f,p,g){var b=f.toNumeric(g);return g.multiply(d(b,p))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(f,p,g)=>d(f,p.toNumber(),g)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(f,p,g)=>_t(f,b=>d(b,p,g),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(f,p)=>d(f,0,p)),"Array | Matrix":e.referToSelf(d=>f=>_t(f,d,!0)),"Array | Matrix, number | BigNumber":e.referToSelf(d=>(f,p)=>_t(f,g=>d(g,p),!0)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(d=>(f,p)=>c(n(p),f,d,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(d=>(f,p)=>a(f,0)?o(p.size(),p.storage()):p.storage()==="dense"?c(p,f,d,!0):u(p,f,d,!0))})}),VP="floor",Ebe=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],Sbe=new Nd(10),Tbe=X(VP,["typed","config","round"],r=>{var{typed:e,config:t,round:n}=r;function i(s){var a=Math.floor(s),o=n(s);return a===o?a:gi(s,o,t.relTol,t.absTol)&&!gi(s,a,t.relTol,t.absTol)?o:a}return e(VP,{number:i,"number, number":function(a,o){if(!tt(o))throw new RangeError("number of decimals in function floor must be an integer");if(o<0||o>15)throw new RangeError("number of decimals in floor number must be in range 0 - 15");var l=10**o;return i(a*l)/l}})}),qX=X(VP,Ebe,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:s,zeros:a,DenseMatrix:o}=r,l=Bi({typed:e,equalScalar:s}),u=Yn({typed:e,DenseMatrix:o}),c=bo({typed:e}),h=Tbe({typed:e,config:t,round:n});function d(f){var p=(v,w)=>yo(v,w,t.relTol,t.absTol),g=f.floor(),b=n(f);return g.eq(b)?g:p(f,b)&&!p(f,g)?b:g}return e("floor",{number:h.signatures.number,"number,number":h.signatures["number,number"],Complex:function(p){return p.floor()},"Complex, number":function(p,g){return p.floor(g)},"Complex, BigNumber":function(p,g){return p.floor(g.toNumber())},BigNumber:d,"BigNumber, BigNumber":function(p,g){var b=Sbe.pow(g);return d(p.mul(b)).div(b)},bigint:f=>f,"bigint, number":(f,p)=>f,"bigint, BigNumber":(f,p)=>f,Fraction:function(p){return p.floor()},"Fraction, number":function(p,g){return p.floor(g)},"Fraction, BigNumber":function(p,g){return p.floor(g.toNumber())},"Unit, number, Unit":e.referToSelf(f=>function(p,g,b){var v=p.toNumeric(b);return b.multiply(f(v,g))}),"Unit, BigNumber, Unit":e.referToSelf(f=>(p,g,b)=>f(p,g.toNumber(),b)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(f=>(p,g,b)=>_t(p,v=>f(v,g,b),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(f=>(p,g)=>f(p,0,g)),"Array | Matrix":e.referToSelf(f=>p=>_t(p,f,!0)),"Array, number | BigNumber":e.referToSelf(f=>(p,g)=>_t(p,b=>f(b,g),!0)),"SparseMatrix, number | BigNumber":e.referToSelf(f=>(p,g)=>l(p,g,f,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(f=>(p,g)=>c(p,g,f,!1)),"number | Complex | Fraction | BigNumber, Array":e.referToSelf(f=>(p,g)=>c(i(g),p,f,!0).valueOf()),"number | Complex | Fraction | BigNumber, Matrix":e.referToSelf(f=>(p,g)=>s(p,0)?a(g.size(),g.storage()):g.storage()==="dense"?c(g,p,f,!0):u(g,p,f,!0))})}),Cbe="matAlgo02xDS0",Nbe=["typed","equalScalar"],tl=X(Cbe,Nbe,r=>{var{typed:e,equalScalar:t}=r;return function(i,s,a,o){var l=i._data,u=i._size,c=i._datatype||i.getDataType(),h=s._values,d=s._index,f=s._ptr,p=s._size,g=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(u.length!==p.length)throw new Mt(u.length,p.length);if(u[0]!==p[0]||u[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+p+")");if(!h)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var b=u[0],v=u[1],w,y=t,A=0,x=a;typeof c=="string"&&c===g&&c!=="mixed"&&(w=c,y=e.find(t,[w,w]),A=e.convert(0,w),x=e.find(a,[w,w]));for(var _=[],S=[],E=[],C=0;C<v;C++){E[C]=S.length;for(var N=f[C],D=f[C+1],M=N;M<D;M++){var I=d[M],V=o?x(h[M],l[I][C]):x(l[I][C],h[M]);y(V,A)||(S.push(I),_.push(V))}}return E[v]=S.length,s.createSparseMatrix({values:_,index:S,ptr:E,size:[b,v],datatype:c===i._datatype&&g===s._datatype?w:void 0})}}),Dbe="matAlgo03xDSf",Mbe=["typed"],ss=X(Dbe,Mbe,r=>{var{typed:e}=r;return function(n,i,s,a){var o=n._data,l=n._size,u=n._datatype||n.getDataType(),c=i._values,h=i._index,d=i._ptr,f=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==f.length)throw new Mt(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g=l[0],b=l[1],v,w=0,y=s;typeof u=="string"&&u===p&&u!=="mixed"&&(v=u,w=e.convert(0,v),y=e.find(s,[v,v]));for(var A=[],x=0;x<g;x++)A[x]=[];for(var _=[],S=[],E=0;E<b;E++){for(var C=E+1,N=d[E],D=d[E+1],M=N;M<D;M++){var I=h[M];_[I]=a?y(c[M],o[I][E]):y(o[I][E],c[M]),S[I]=C}for(var V=0;V<g;V++)S[V]===C?A[V][E]=_[V]:A[V][E]=a?y(w,o[V][E]):y(o[V][E],w)}return n.createDenseMatrix({data:A,size:[g,b],datatype:u===n._datatype&&p===i._datatype?v:void 0})}}),Ibe="matAlgo05xSfSf",Pbe=["typed","equalScalar"],lN=X(Ibe,Pbe,r=>{var{typed:e,equalScalar:t}=r;return function(i,s,a){var o=i._values,l=i._index,u=i._ptr,c=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,f=s._index,p=s._ptr,g=s._size,b=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==g.length)throw new Mt(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");var v=c[0],w=c[1],y,A=t,x=0,_=a;typeof h=="string"&&h===b&&h!=="mixed"&&(y=h,A=e.find(t,[y,y]),x=e.convert(0,y),_=e.find(a,[y,y]));var S=o&&d?[]:void 0,E=[],C=[],N=S?[]:void 0,D=S?[]:void 0,M=[],I=[],V,K,F,U;for(K=0;K<w;K++){C[K]=E.length;var j=K+1;for(F=u[K],U=u[K+1];F<U;F++)V=l[F],E.push(V),M[V]=j,N&&(N[V]=o[F]);for(F=p[K],U=p[K+1];F<U;F++)V=f[F],M[V]!==j&&E.push(V),I[V]=j,D&&(D[V]=d[F]);if(S)for(F=C[K];F<E.length;){V=E[F];var G=M[V],ee=I[V];if(G===j||ee===j){var ue=G===j?N[V]:x,te=ee===j?D[V]:x,R=_(ue,te);A(R,x)?E.splice(F,1):(S.push(R),F++)}}}return C[w]=E.length,i.createSparseMatrix({values:S,index:E,ptr:C,size:[v,w],datatype:h===i._datatype&&b===s._datatype?y:void 0})}}),Rbe="matAlgo13xDD",kbe=["typed"],HX=X(Rbe,kbe,r=>{var{typed:e}=r;return function(i,s,a){var o=i._data,l=i._size,u=i._datatype,c=s._data,h=s._size,d=s._datatype,f=[];if(l.length!==h.length)throw new Mt(l.length,h.length);for(var p=0;p<l.length;p++){if(l[p]!==h[p])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");f[p]=l[p]}var g,b=a;typeof u=="string"&&u===d&&(g=u,b=e.find(a,[g,g]));var v=f.length>0?t(b,0,f,f[0],o,c):[];return i.createDenseMatrix({data:v,size:f,datatype:g})};function t(n,i,s,a,o,l){var u=[];if(i===s.length-1)for(var c=0;c<a;c++)u[c]=n(o[c],l[c]);else for(var h=0;h<a;h++)u[h]=t(n,i+1,s,s[i+1],o[h],l[h]);return u}});function ti(r,e){if(Cc(r.size(),e.size()))return[r,e];var t=yT(r.size(),e.size());return[r,e].map(n=>Fbe(n,t))}function Fbe(r,e){return Cc(r.size(),e)?r:r.create(Ef(r.valueOf(),e),r.datatype())}var Obe="matrixAlgorithmSuite",Bbe=["typed","matrix"],Ar=X(Obe,Bbe,r=>{var{typed:e,matrix:t}=r,n=HX({typed:e}),i=bo({typed:e});return function(a){var o=a.elop,l=a.SD||a.DS,u;o?(u={"DenseMatrix, DenseMatrix":(f,p)=>n(...ti(f,p),o),"Array, Array":(f,p)=>n(...ti(t(f),t(p)),o).valueOf(),"Array, DenseMatrix":(f,p)=>n(...ti(t(f),p),o),"DenseMatrix, Array":(f,p)=>n(...ti(f,t(p)),o)},a.SS&&(u["SparseMatrix, SparseMatrix"]=(f,p)=>a.SS(...ti(f,p),o,!1)),a.DS&&(u["DenseMatrix, SparseMatrix"]=(f,p)=>a.DS(...ti(f,p),o,!1),u["Array, SparseMatrix"]=(f,p)=>a.DS(...ti(t(f),p),o,!1)),l&&(u["SparseMatrix, DenseMatrix"]=(f,p)=>l(...ti(p,f),o,!0),u["SparseMatrix, Array"]=(f,p)=>l(...ti(t(p),f),o,!0))):(u={"DenseMatrix, DenseMatrix":e.referToSelf(f=>(p,g)=>n(...ti(p,g),f)),"Array, Array":e.referToSelf(f=>(p,g)=>n(...ti(t(p),t(g)),f).valueOf()),"Array, DenseMatrix":e.referToSelf(f=>(p,g)=>n(...ti(t(p),g),f)),"DenseMatrix, Array":e.referToSelf(f=>(p,g)=>n(...ti(p,t(g)),f))},a.SS&&(u["SparseMatrix, SparseMatrix"]=e.referToSelf(f=>(p,g)=>a.SS(...ti(p,g),f,!1))),a.DS&&(u["DenseMatrix, SparseMatrix"]=e.referToSelf(f=>(p,g)=>a.DS(...ti(p,g),f,!1)),u["Array, SparseMatrix"]=e.referToSelf(f=>(p,g)=>a.DS(...ti(t(p),g),f,!1))),l&&(u["SparseMatrix, DenseMatrix"]=e.referToSelf(f=>(p,g)=>l(...ti(g,p),f,!0)),u["SparseMatrix, Array"]=e.referToSelf(f=>(p,g)=>l(...ti(t(g),p),f,!0))));var c=a.scalar||"any",h=a.Ds||a.Ss;h&&(o?(u["DenseMatrix,"+c]=(f,p)=>i(f,p,o,!1),u[c+", DenseMatrix"]=(f,p)=>i(p,f,o,!0),u["Array,"+c]=(f,p)=>i(t(f),p,o,!1).valueOf(),u[c+", Array"]=(f,p)=>i(t(p),f,o,!0).valueOf()):(u["DenseMatrix,"+c]=e.referToSelf(f=>(p,g)=>i(p,g,f,!1)),u[c+", DenseMatrix"]=e.referToSelf(f=>(p,g)=>i(g,p,f,!0)),u["Array,"+c]=e.referToSelf(f=>(p,g)=>i(t(p),g,f,!1).valueOf()),u[c+", Array"]=e.referToSelf(f=>(p,g)=>i(t(g),p,f,!0).valueOf())));var d=a.sS!==void 0?a.sS:a.Ss;return o?(a.Ss&&(u["SparseMatrix,"+c]=(f,p)=>a.Ss(f,p,o,!1)),d&&(u[c+", SparseMatrix"]=(f,p)=>d(p,f,o,!0))):(a.Ss&&(u["SparseMatrix,"+c]=e.referToSelf(f=>(p,g)=>a.Ss(p,g,f,!1))),d&&(u[c+", SparseMatrix"]=e.referToSelf(f=>(p,g)=>d(g,p,f,!0)))),o&&o.signatures&&TK(u,o.signatures),u}}),z6="mod",Lbe=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],GX=X(z6,Lbe,r=>{var{typed:e,config:t,round:n,matrix:i,equalScalar:s,zeros:a,DenseMatrix:o,concat:l}=r,u=qX({typed:e,config:t,round:n,matrix:i,equalScalar:s,zeros:a,DenseMatrix:o}),c=tl({typed:e,equalScalar:s}),h=ss({typed:e}),d=lN({typed:e,equalScalar:s}),f=Bi({typed:e,equalScalar:s}),p=Yn({typed:e,DenseMatrix:o}),g=Ar({typed:e,matrix:i,concat:l});return e(z6,{"number, number":b,"BigNumber, BigNumber":function(w,y){return y.isZero()?w:w.sub(y.mul(u(w.div(y))))},"bigint, bigint":function(w,y){if(y===0n)return w;if(w<0){var A=w%y;return A===0n?A:A+y}return w%y},"Fraction, Fraction":function(w,y){return y.equals(0)?w:w.sub(y.mul(u(w.div(y))))}},g({SS:d,DS:h,SD:c,Ss:f,sS:p}));function b(v,w){return w===0?v:v-w*u(v/w)}}),$be="matAlgo01xDSid",Vbe=["typed"],zd=X($be,Vbe,r=>{var{typed:e}=r;return function(n,i,s,a){var o=n._data,l=n._size,u=n._datatype||n.getDataType(),c=i._values,h=i._index,d=i._ptr,f=i._size,p=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(l.length!==f.length)throw new Mt(l.length,f.length);if(l[0]!==f[0]||l[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g=l[0],b=l[1],v=typeof u=="string"&&u!=="mixed"&&u===p?u:void 0,w=v?e.find(s,[v,v]):s,y,A,x=[];for(y=0;y<g;y++)x[y]=[];var _=[],S=[];for(A=0;A<b;A++){for(var E=A+1,C=d[A],N=d[A+1],D=C;D<N;D++)y=h[D],_[y]=a?w(c[D],o[y][A]):w(o[y][A],c[D]),S[y]=E;for(y=0;y<g;y++)S[y]===E?x[y][A]=_[y]:x[y][A]=o[y][A]}return n.createDenseMatrix({data:x,size:[g,b],datatype:u===n._datatype&&p===i._datatype?v:void 0})}}),Ube="matAlgo04xSidSid",zbe=["typed","equalScalar"],GF=X(Ube,zbe,r=>{var{typed:e,equalScalar:t}=r;return function(i,s,a){var o=i._values,l=i._index,u=i._ptr,c=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,f=s._index,p=s._ptr,g=s._size,b=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==g.length)throw new Mt(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");var v=c[0],w=c[1],y,A=t,x=0,_=a;typeof h=="string"&&h===b&&h!=="mixed"&&(y=h,A=e.find(t,[y,y]),x=e.convert(0,y),_=e.find(a,[y,y]));var S=o&&d?[]:void 0,E=[],C=[],N=o&&d?[]:void 0,D=o&&d?[]:void 0,M=[],I=[],V,K,F,U,j;for(K=0;K<w;K++){C[K]=E.length;var G=K+1;for(U=u[K],j=u[K+1],F=U;F<j;F++)V=l[F],E.push(V),M[V]=G,N&&(N[V]=o[F]);for(U=p[K],j=p[K+1],F=U;F<j;F++)if(V=f[F],M[V]===G){if(N){var ee=_(N[V],d[F]);A(ee,x)?M[V]=null:N[V]=ee}}else E.push(V),I[V]=G,D&&(D[V]=d[F]);if(N&&D)for(F=C[K];F<E.length;)V=E[F],M[V]===G?(S[F]=N[V],F++):I[V]===G?(S[F]=D[V],F++):E.splice(F,1)}return C[w]=E.length,i.createSparseMatrix({values:S,index:E,ptr:C,size:[v,w],datatype:h===i._datatype&&b===s._datatype?y:void 0})}}),jbe="matAlgo10xSids",qbe=["typed","DenseMatrix"],bp=X(jbe,qbe,r=>{var{typed:e,DenseMatrix:t}=r;return function(i,s,a,o){var l=i._values,u=i._index,c=i._ptr,h=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f=h[0],p=h[1],g,b=a;typeof d=="string"&&(g=d,s=e.convert(s,g),b=e.find(a,[g,g]));for(var v=[],w=[],y=[],A=0;A<p;A++){for(var x=A+1,_=c[A],S=c[A+1],E=_;E<S;E++){var C=u[E];w[C]=l[E],y[C]=x}for(var N=0;N<f;N++)A===0&&(v[N]=[]),y[N]===x?v[N][A]=o?b(s,w[N]):b(w[N],s):v[N][A]=s}return new t({data:v,size:[f,p],datatype:g})}});function wp(r,e,t,n){if(!(this instanceof wp))throw new SyntaxError("Constructor must be called with the new operator");this.fn=r,this.count=e,this.min=t,this.max=n,this.message="Wrong number of arguments in function "+r+" ("+e+" provided, "+t+(n!=null?"-"+n:"")+" expected)",this.stack=new Error().stack}wp.prototype=new Error;wp.prototype.constructor=Error;wp.prototype.name="ArgumentsError";wp.prototype.isArgumentsError=!0;var j6="gcd",Hbe=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],Q2="number | BigNumber | Fraction | Matrix | Array",Gbe="".concat(Q2,", ").concat(Q2,", ...").concat(Q2);function q6(r){return!r.some(e=>Array.isArray(e))}var Wbe=X(j6,Hbe,r=>{var{typed:e,matrix:t,config:n,round:i,equalScalar:s,zeros:a,BigNumber:o,DenseMatrix:l,concat:u}=r,c=GX({typed:e,config:n,round:i,matrix:t,equalScalar:s,zeros:a,DenseMatrix:l,concat:u}),h=zd({typed:e}),d=GF({typed:e,equalScalar:s}),f=bp({typed:e,DenseMatrix:l}),p=Ar({typed:e,matrix:t,concat:u});return e(j6,{"number, number":g,"BigNumber, BigNumber":b,"Fraction, Fraction":(v,w)=>v.gcd(w)},p({SS:d,DS:h,Ss:f}),{[Gbe]:e.referToSelf(v=>(w,y,A)=>{for(var x=v(w,y),_=0;_<A.length;_++)x=v(x,A[_]);return x}),Array:e.referToSelf(v=>w=>{if(w.length===1&&Array.isArray(w[0])&&q6(w[0]))return v(...w[0]);if(q6(w))return v(...w);throw new wp("gcd() supports only 1d matrices!")}),Matrix:e.referToSelf(v=>w=>v(w.toArray()))});function g(v,w){if(!tt(v)||!tt(w))throw new Error("Parameters in function gcd must be integer numbers");for(var y;w!==0;)y=c(v,w),v=w,w=y;return v<0?-v:v}function b(v,w){if(!v.isInt()||!w.isInt())throw new Error("Parameters in function gcd must be integer numbers");for(var y=new o(0);!w.isZero();){var A=c(v,w);v=w,w=A}return v.lt(y)?v.neg():v}}),Kbe="matAlgo06xS0S0",Xbe=["typed","equalScalar"],uN=X(Kbe,Xbe,r=>{var{typed:e,equalScalar:t}=r;return function(i,s,a){var o=i._values,l=i._size,u=i._datatype||i._data===void 0?i._datatype:i.getDataType(),c=s._values,h=s._size,d=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(l.length!==h.length)throw new Mt(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");var f=l[0],p=l[1],g,b=t,v=0,w=a;typeof u=="string"&&u===d&&u!=="mixed"&&(g=u,b=e.find(t,[g,g]),v=e.convert(0,g),w=e.find(a,[g,g]));for(var y=o&&c?[]:void 0,A=[],x=[],_=y?[]:void 0,S=[],E=[],C=0;C<p;C++){x[C]=A.length;var N=C+1;if(h6(i,C,S,_,E,N,A,w),h6(s,C,S,_,E,N,A,w),_)for(var D=x[C];D<A.length;){var M=A[D];if(E[M]===N){var I=_[M];b(I,v)?A.splice(D,1):(y.push(I),D++)}else A.splice(D,1)}else for(var V=x[C];V<A.length;){var K=A[V];E[K]!==N?A.splice(V,1):V++}}return x[p]=A.length,i.createSparseMatrix({values:y,index:A,ptr:x,size:[f,p],datatype:u===i._datatype&&d===s._datatype?g:void 0})}}),H6="lcm",Ybe=["typed","matrix","equalScalar","concat"],Qbe=X(H6,Ybe,r=>{var{typed:e,matrix:t,equalScalar:n,concat:i}=r,s=tl({typed:e,equalScalar:n}),a=uN({typed:e,equalScalar:n}),o=Bi({typed:e,equalScalar:n}),l=Ar({typed:e,matrix:t,concat:i}),u="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(u,", ").concat(u,", ...").concat(u)]=e.referToSelf(d=>(f,p,g)=>{for(var b=d(f,p),v=0;v<g.length;v++)b=d(b,g[v]);return b}),e(H6,{"number, number":cX,"BigNumber, BigNumber":h,"Fraction, Fraction":(d,f)=>d.lcm(f)},l({SS:a,DS:s,Ss:o}),c);function h(d,f){if(!d.isInt()||!f.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(d.isZero())return d;if(f.isZero())return f;for(var p=d.times(f);!f.isZero();){var g=f;f=d.mod(g),d=g}return p.div(d).abs()}});function WF(r,e,t,n){return function(i){if(i>0||t.predictable){if(i<=0)return NaN;var s=i.toString(16),a=s.substring(0,15);return r*(s.length-a.length)+e(+("0x"+a))}return n(i.toNumber())}}var G6="log10",Jbe=["typed","config","Complex"],Zbe=xT(16),e1e=X(G6,Jbe,r=>{var{typed:e,config:t,Complex:n}=r;function i(a){return a.log().div(Math.LN10)}function s(a){return i(new n(a,0))}return e(G6,{number:function(o){return o>=0||t.predictable?xT(o):s(o)},bigint:WF(Zbe,xT,t,s),Complex:i,BigNumber:function(o){return!o.isNegative()||t.predictable?o.log():s(o.toNumber())},"Array | Matrix":e.referToSelf(a=>o=>_t(o,a))})}),W6="log2",t1e=["typed","config","Complex"],r1e=X(W6,t1e,r=>{var{typed:e,config:t,Complex:n}=r;function i(a){return s(new n(a,0))}return e(W6,{number:function(o){return o>=0||t.predictable?PP(o):i(o)},bigint:WF(4,PP,t,i),Complex:s,BigNumber:function(o){return!o.isNegative()||t.predictable?o.log(2):i(o.toNumber())},"Array | Matrix":e.referToSelf(a=>o=>_t(o,a))});function s(a){var o=Math.sqrt(a.re*a.re+a.im*a.im);return new n(Math.log2?Math.log2(o):Math.log(o)/Math.LN2,Math.atan2(a.im,a.re)/Math.LN2)}}),n1e="multiplyScalar",i1e=["typed"],s1e=X(n1e,i1e,r=>{var{typed:e}=r;return e("multiplyScalar",{"number, number":iX,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"bigint, bigint":function(n,i){return n*i},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(t,n)=>n.multiply(t),"Unit, number | Fraction | BigNumber | Complex | Unit":(t,n)=>t.multiply(n)})}),K6="multiply",a1e=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],o1e=X(K6,a1e,r=>{var{typed:e,matrix:t,addScalar:n,multiplyScalar:i,equalScalar:s,dot:a}=r,o=Bi({typed:e,equalScalar:s}),l=bo({typed:e});function u(x,_){switch(x.length){case 1:switch(_.length){case 1:if(x[0]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(x[0]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+x[0]+") must match Matrix rows ("+_[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+_.length+" dimensions)")}break;case 2:switch(_.length){case 1:if(x[1]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+x[1]+") must match Vector length ("+_[0]+")");break;case 2:if(x[1]!==_[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+x[1]+") must match Matrix B rows ("+_[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+_.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+x.length+" dimensions)")}}function c(x,_,S){if(S===0)throw new Error("Cannot multiply two empty vectors");return a(x,_)}function h(x,_){if(_.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(x,_)}function d(x,_){var S=x._data,E=x._size,C=x._datatype||x.getDataType(),N=_._data,D=_._size,M=_._datatype||_.getDataType(),I=E[0],V=D[1],K,F=n,U=i;C&&M&&C===M&&typeof C=="string"&&C!=="mixed"&&(K=C,F=e.find(n,[K,K]),U=e.find(i,[K,K]));for(var j=[],G=0;G<V;G++){for(var ee=U(S[0],N[0][G]),ue=1;ue<I;ue++)ee=F(ee,U(S[ue],N[ue][G]));j[G]=ee}return x.createDenseMatrix({data:j,size:[V],datatype:C===x._datatype&&M===_._datatype?K:void 0})}var f=e("_multiplyMatrixVector",{"DenseMatrix, any":g,"SparseMatrix, any":w}),p=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":b,"DenseMatrix, SparseMatrix":v,"SparseMatrix, DenseMatrix":y,"SparseMatrix, SparseMatrix":A});function g(x,_){var S=x._data,E=x._size,C=x._datatype||x.getDataType(),N=_._data,D=_._datatype||_.getDataType(),M=E[0],I=E[1],V,K=n,F=i;C&&D&&C===D&&typeof C=="string"&&C!=="mixed"&&(V=C,K=e.find(n,[V,V]),F=e.find(i,[V,V]));for(var U=[],j=0;j<M;j++){for(var G=S[j],ee=F(G[0],N[0]),ue=1;ue<I;ue++)ee=K(ee,F(G[ue],N[ue]));U[j]=ee}return x.createDenseMatrix({data:U,size:[M],datatype:C===x._datatype&&D===_._datatype?V:void 0})}function b(x,_){var S=x._data,E=x._size,C=x._datatype||x.getDataType(),N=_._data,D=_._size,M=_._datatype||_.getDataType(),I=E[0],V=E[1],K=D[1],F,U=n,j=i;C&&M&&C===M&&typeof C=="string"&&C!=="mixed"&&C!=="mixed"&&(F=C,U=e.find(n,[F,F]),j=e.find(i,[F,F]));for(var G=[],ee=0;ee<I;ee++){var ue=S[ee];G[ee]=[];for(var te=0;te<K;te++){for(var R=j(ue[0],N[0][te]),Y=1;Y<V;Y++)R=U(R,j(ue[Y],N[Y][te]));G[ee][te]=R}}return x.createDenseMatrix({data:G,size:[I,K],datatype:C===x._datatype&&M===_._datatype?F:void 0})}function v(x,_){var S=x._data,E=x._size,C=x._datatype||x.getDataType(),N=_._values,D=_._index,M=_._ptr,I=_._size,V=_._datatype||_._data===void 0?_._datatype:_.getDataType();if(!N)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var K=E[0],F=I[1],U,j=n,G=i,ee=s,ue=0;C&&V&&C===V&&typeof C=="string"&&C!=="mixed"&&(U=C,j=e.find(n,[U,U]),G=e.find(i,[U,U]),ee=e.find(s,[U,U]),ue=e.convert(0,U));for(var te=[],R=[],Y=[],H=_.createSparseMatrix({values:te,index:R,ptr:Y,size:[K,F],datatype:C===x._datatype&&V===_._datatype?U:void 0}),he=0;he<F;he++){Y[he]=R.length;var fe=M[he],re=M[he+1];if(re>fe)for(var W=0,ie=0;ie<K;ie++){for(var me=ie+1,le=void 0,ve=fe;ve<re;ve++){var ye=D[ve];W!==me?(le=G(S[ie][ye],N[ve]),W=me):le=j(le,G(S[ie][ye],N[ve]))}W===me&&!ee(le,ue)&&(R.push(ie),te.push(le))}}return Y[F]=R.length,H}function w(x,_){var S=x._values,E=x._index,C=x._ptr,N=x._datatype||x._data===void 0?x._datatype:x.getDataType();if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var D=_._data,M=_._datatype||_.getDataType(),I=x._size[0],V=_._size[0],K=[],F=[],U=[],j,G=n,ee=i,ue=s,te=0;N&&M&&N===M&&typeof N=="string"&&N!=="mixed"&&(j=N,G=e.find(n,[j,j]),ee=e.find(i,[j,j]),ue=e.find(s,[j,j]),te=e.convert(0,j));var R=[],Y=[];U[0]=0;for(var H=0;H<V;H++){var he=D[H];if(!ue(he,te))for(var fe=C[H],re=C[H+1],W=fe;W<re;W++){var ie=E[W];Y[ie]?R[ie]=G(R[ie],ee(he,S[W])):(Y[ie]=!0,F.push(ie),R[ie]=ee(he,S[W]))}}for(var me=F.length,le=0;le<me;le++){var ve=F[le];K[le]=R[ve]}return U[1]=F.length,x.createSparseMatrix({values:K,index:F,ptr:U,size:[I,1],datatype:N===x._datatype&&M===_._datatype?j:void 0})}function y(x,_){var S=x._values,E=x._index,C=x._ptr,N=x._datatype||x._data===void 0?x._datatype:x.getDataType();if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var D=_._data,M=_._datatype||_.getDataType(),I=x._size[0],V=_._size[0],K=_._size[1],F,U=n,j=i,G=s,ee=0;N&&M&&N===M&&typeof N=="string"&&N!=="mixed"&&(F=N,U=e.find(n,[F,F]),j=e.find(i,[F,F]),G=e.find(s,[F,F]),ee=e.convert(0,F));for(var ue=[],te=[],R=[],Y=x.createSparseMatrix({values:ue,index:te,ptr:R,size:[I,K],datatype:N===x._datatype&&M===_._datatype?F:void 0}),H=[],he=[],fe=0;fe<K;fe++){R[fe]=te.length;for(var re=fe+1,W=0;W<V;W++){var ie=D[W][fe];if(!G(ie,ee))for(var me=C[W],le=C[W+1],ve=me;ve<le;ve++){var ye=E[ve];he[ye]!==re?(he[ye]=re,te.push(ye),H[ye]=j(ie,S[ve])):H[ye]=U(H[ye],j(ie,S[ve]))}}for(var Ie=R[fe],Ue=te.length,Ge=Ie;Ge<Ue;Ge++){var Be=te[Ge];ue[Ge]=H[Be]}}return R[K]=te.length,Y}function A(x,_){var S=x._values,E=x._index,C=x._ptr,N=x._datatype||x._data===void 0?x._datatype:x.getDataType(),D=_._values,M=_._index,I=_._ptr,V=_._datatype||_._data===void 0?_._datatype:_.getDataType(),K=x._size[0],F=_._size[1],U=S&&D,j,G=n,ee=i;N&&V&&N===V&&typeof N=="string"&&N!=="mixed"&&(j=N,G=e.find(n,[j,j]),ee=e.find(i,[j,j]));for(var ue=U?[]:void 0,te=[],R=[],Y=x.createSparseMatrix({values:ue,index:te,ptr:R,size:[K,F],datatype:N===x._datatype&&V===_._datatype?j:void 0}),H=U?[]:void 0,he=[],fe,re,W,ie,me,le,ve,ye,Ie=0;Ie<F;Ie++){R[Ie]=te.length;var Ue=Ie+1;for(me=I[Ie],le=I[Ie+1],ie=me;ie<le;ie++)if(ye=M[ie],U)for(re=C[ye],W=C[ye+1],fe=re;fe<W;fe++)ve=E[fe],he[ve]!==Ue?(he[ve]=Ue,te.push(ve),H[ve]=ee(D[ie],S[fe])):H[ve]=G(H[ve],ee(D[ie],S[fe]));else for(re=C[ye],W=C[ye+1],fe=re;fe<W;fe++)ve=E[fe],he[ve]!==Ue&&(he[ve]=Ue,te.push(ve));if(U)for(var Ge=R[Ie],Be=te.length,$e=Ge;$e<Be;$e++){var He=te[$e];ue[$e]=H[He]}}return R[F]=te.length,Y}return e(K6,i,{"Array, Array":e.referTo("Matrix, Matrix",x=>(_,S)=>{u(vt(_),vt(S));var E=x(t(_),t(S));return ot(E)?E.valueOf():E}),"Matrix, Matrix":function(_,S){var E=_.size(),C=S.size();return u(E,C),E.length===1?C.length===1?c(_,S,E[0]):h(_,S):C.length===1?f(_,S):p(_,S)},"Matrix, Array":e.referTo("Matrix,Matrix",x=>(_,S)=>x(_,t(S))),"Array, Matrix":e.referToSelf(x=>(_,S)=>x(t(_,S.storage()),S)),"SparseMatrix, any":function(_,S){return o(_,S,i,!1)},"DenseMatrix, any":function(_,S){return l(_,S,i,!1)},"any, SparseMatrix":function(_,S){return o(S,_,i,!0)},"any, DenseMatrix":function(_,S){return l(S,_,i,!0)},"Array, any":function(_,S){return l(t(_),S,i,!1).valueOf()},"any, Array":function(_,S){return l(t(S),_,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(x=>(_,S,E)=>{for(var C=x(_,S),N=0;N<E.length;N++)C=x(C,E[N]);return C})})}),X6="nthRoot",l1e=["typed","matrix","equalScalar","BigNumber","concat"],u1e=X(X6,l1e,r=>{var{typed:e,matrix:t,equalScalar:n,BigNumber:i,concat:s}=r,a=zd({typed:e}),o=tl({typed:e,equalScalar:n}),l=uN({typed:e,equalScalar:n}),u=Bi({typed:e,equalScalar:n}),c=Ar({typed:e,matrix:t,concat:s});function h(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return e(X6,{number:m6,"number, number":m6,BigNumber:f=>d(f,new i(2)),"BigNumber, BigNumber":d,Complex:h,"Complex, number":h,Array:e.referTo("DenseMatrix,number",f=>p=>f(t(p),2).valueOf()),DenseMatrix:e.referTo("DenseMatrix,number",f=>p=>f(p,2)),SparseMatrix:e.referTo("SparseMatrix,number",f=>p=>f(p,2)),"SparseMatrix, SparseMatrix":e.referToSelf(f=>(p,g)=>{if(g.density()===1)return l(p,g,f);throw new Error("Root must be non-zero")}),"DenseMatrix, SparseMatrix":e.referToSelf(f=>(p,g)=>{if(g.density()===1)return a(p,g,f,!1);throw new Error("Root must be non-zero")}),"Array, SparseMatrix":e.referTo("DenseMatrix,SparseMatrix",f=>(p,g)=>f(t(p),g)),"number | BigNumber, SparseMatrix":e.referToSelf(f=>(p,g)=>{if(g.density()===1)return u(g,p,f,!0);throw new Error("Root must be non-zero")})},c({scalar:"number | BigNumber",SD:o,Ss:u,sS:!1}));function d(f,p){var g=i.precision,b=i.clone({precision:g+2}),v=new i(0),w=new b(1),y=p.isNegative();if(y&&(p=p.neg()),p.isZero())throw new Error("Root must be non-zero");if(f.isNegative()&&!p.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(f.isZero())return y?new b(1/0):0;if(!f.isFinite())return y?v:f;var A=f.abs().pow(w.div(p));return A=f.isNeg()?A.neg():A,new i((y?w.div(A):A).toPrecision(g))}}),Y6="sign",c1e=["typed","BigNumber","Fraction","complex"],h1e=X(Y6,c1e,r=>{var{typed:e,BigNumber:t,complex:n,Fraction:i}=r;return e(Y6,{number:RP,Complex:function(a){return a.im===0?n(RP(a.re)):a.sign()},BigNumber:function(a){return new t(a.cmp(0))},bigint:function(a){return a>0n?1n:a<0n?-1n:0n},Fraction:function(a){return a.n===0n?new i(0):new i(a.s)},"Array | Matrix":e.referToSelf(s=>a=>_t(a,s,!0)),Unit:e.referToSelf(s=>a=>{if(!a._isDerived()&&a.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(s,a.valueType())(a.value)})})}),d1e="sqrt",f1e=["config","typed","Complex"],m1e=X(d1e,f1e,r=>{var{config:e,typed:t,Complex:n}=r;return t("sqrt",{number:i,Complex:function(a){return a.sqrt()},BigNumber:function(a){return!a.isNegative()||e.predictable?a.sqrt():i(a.toNumber())},Unit:function(a){return a.pow(.5)}});function i(s){return isNaN(s)?NaN:s>=0||e.predictable?Math.sqrt(s):new n(s,0).sqrt()}}),Q6="square",p1e=["typed"],g1e=X(Q6,p1e,r=>{var{typed:e}=r;return e(Q6,{number:hX,Complex:function(n){return n.mul(n)},BigNumber:function(n){return n.times(n)},bigint:function(n){return n*n},Fraction:function(n){return n.mul(n)},Unit:function(n){return n.pow(2)}})}),J6="subtract",v1e=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],y1e=X(J6,v1e,r=>{var{typed:e,matrix:t,equalScalar:n,subtractScalar:i,unaryMinus:s,DenseMatrix:a,concat:o}=r,l=zd({typed:e}),u=ss({typed:e}),c=lN({typed:e,equalScalar:n}),h=bp({typed:e,DenseMatrix:a}),d=Yn({typed:e,DenseMatrix:a}),f=Ar({typed:e,matrix:t,concat:o});return e(J6,{"any, any":i},f({elop:i,SS:c,DS:l,SD:u,Ss:d,sS:h}))}),Z6="xgcd",b1e=["typed","config","matrix","BigNumber"],w1e=X(Z6,b1e,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e(Z6,{"number, number":function(o,l){var u=dX(o,l);return t.matrix==="Array"?u:n(u)},"BigNumber, BigNumber":s});function s(a,o){var l,u,c,h=new i(0),d=new i(1),f=h,p=d,g=d,b=h;if(!a.isInt()||!o.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!o.isZero();)u=a.div(o).floor(),c=a.mod(o),l=f,f=p.minus(u.times(f)),p=l,l=g,g=b.minus(u.times(g)),b=l,a=o,o=c;var v;return a.lt(h)?v=[a.neg(),p.neg(),b.neg()]:v=[a,a.isZero()?0:p,b],t.matrix==="Array"?v:n(v)}}),e$="invmod",x1e=["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],_1e=X(e$,x1e,r=>{var{typed:e,config:t,BigNumber:n,xgcd:i,equal:s,smaller:a,mod:o,add:l,isInteger:u}=r;return e(e$,{"number, number":c,"BigNumber, BigNumber":c});function c(h,d){if(!u(h)||!u(d))throw new Error("Parameters in function invmod must be integer numbers");if(h=o(h,d),s(d,0))throw new Error("Divisor must be non zero");var f=i(h,d);f=f.valueOf();var[p,g]=f;return s(p,n(1))?(g=o(g,d),a(g,n(0))&&(g=l(g,d)),g):NaN}}),A1e="matAlgo09xS0Sf",E1e=["typed","equalScalar"],WX=X(A1e,E1e,r=>{var{typed:e,equalScalar:t}=r;return function(i,s,a){var o=i._values,l=i._index,u=i._ptr,c=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,f=s._index,p=s._ptr,g=s._size,b=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==g.length)throw new Mt(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");var v=c[0],w=c[1],y,A=t,x=0,_=a;typeof h=="string"&&h===b&&h!=="mixed"&&(y=h,A=e.find(t,[y,y]),x=e.convert(0,y),_=e.find(a,[y,y]));var S=o&&d?[]:void 0,E=[],C=[],N=S?[]:void 0,D=[],M,I,V,K,F;for(I=0;I<w;I++){C[I]=E.length;var U=I+1;if(N)for(K=p[I],F=p[I+1],V=K;V<F;V++)M=f[V],D[M]=U,N[M]=d[V];for(K=u[I],F=u[I+1],V=K;V<F;V++)if(M=l[V],N){var j=D[M]===U?N[M]:x,G=_(o[V],j);A(G,x)||(E.push(M),S.push(G))}else E.push(M)}return C[w]=E.length,i.createSparseMatrix({values:S,index:E,ptr:C,size:[v,w],datatype:h===i._datatype&&b===s._datatype?y:void 0})}}),t$="dotMultiply",S1e=["typed","matrix","equalScalar","multiplyScalar","concat"],T1e=X(t$,S1e,r=>{var{typed:e,matrix:t,equalScalar:n,multiplyScalar:i,concat:s}=r,a=tl({typed:e,equalScalar:n}),o=WX({typed:e,equalScalar:n}),l=Bi({typed:e,equalScalar:n}),u=Ar({typed:e,matrix:t,concat:s});return e(t$,u({elop:i,SS:o,DS:a,Ss:l}))});function C1e(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitAnd");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);if(r.isZero()||e.eq(-1)||r.eq(e))return r;if(e.isZero()||r.eq(-1))return e;if(!r.isFinite()||!e.isFinite()){if(!r.isFinite()&&!e.isFinite())return r.isNegative()===e.isNegative()?r:new t(0);if(!r.isFinite())return e.isNegative()?r:r.isNegative()?new t(0):e;if(!e.isFinite())return r.isNegative()?e:e.isNegative()?new t(0):r}return KF(r,e,function(n,i){return n&i})}function B1(r){if(r.isFinite()&&!r.isInteger())throw new Error("Integer expected in function bitNot");var e=r.constructor,t=e.precision;e.config({precision:1e9});var n=r.plus(new e(1));return n.s=-n.s||null,e.config({precision:t}),n}function N1e(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitOr");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);var n=new t(-1);return r.isZero()||e.eq(n)||r.eq(e)?e:e.isZero()||r.eq(n)?r:!r.isFinite()||!e.isFinite()?!r.isFinite()&&!r.isNegative()&&e.isNegative()||r.isNegative()&&!e.isNegative()&&!e.isFinite()?n:r.isNegative()&&e.isNegative()?r.isFinite()?r:e:r.isFinite()?e:r:KF(r,e,function(i,s){return i|s})}function KF(r,e,t){var n=r.constructor,i,s,a=+(r.s<0),o=+(e.s<0);if(a){i=SA(B1(r));for(var l=0;l<i.length;++l)i[l]^=1}else i=SA(r);if(o){s=SA(B1(e));for(var u=0;u<s.length;++u)s[u]^=1}else s=SA(e);var c,h,d;i.length<=s.length?(c=i,h=s,d=a):(c=s,h=i,d=o);var f=c.length,p=h.length,g=t(a,o)^1,b=new n(g^1),v=new n(1),w=new n(2),y=n.precision;for(n.config({precision:1e9});f>0;)t(c[--f],h[--p])===g&&(b=b.plus(v)),v=v.times(w);for(;p>0;)t(d,h[--p])===g&&(b=b.plus(v)),v=v.times(w);return n.config({precision:y}),g===0&&(b.s=-b.s),b}function SA(r){for(var e=r.d,t=e[0]+"",n=1;n<e.length;++n){for(var i=e[n]+"",s=7-i.length;s--;)i="0"+i;t+=i}for(var a=t.length;t.charAt(a)==="0";)a--;var o=r.e,l=t.slice(0,a+1||1),u=l.length;if(o>0)if(++o>u)for(o-=u;o--;)l+="0";else o<u&&(l=l.slice(0,o)+"."+l.slice(o));for(var c=[0],h=0;h<l.length;){for(var d=c.length;d--;)c[d]*=10;c[0]+=parseInt(l.charAt(h++));for(var f=0;f<c.length;++f)c[f]>1&&((c[f+1]===null||c[f+1]===void 0)&&(c[f+1]=0),c[f+1]+=c[f]>>1,c[f]&=1)}return c.reverse()}function D1e(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function bitXor");var t=r.constructor;if(r.isNaN()||e.isNaN())return new t(NaN);if(r.isZero())return e;if(e.isZero())return r;if(r.eq(e))return new t(0);var n=new t(-1);return r.eq(n)?B1(e):e.eq(n)?B1(r):!r.isFinite()||!e.isFinite()?!r.isFinite()&&!e.isFinite()?n:new t(r.isNegative()===e.isNegative()?1/0:-1/0):KF(r,e,function(i,s){return i^s})}function M1e(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function leftShift");var t=r.constructor;return r.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):r.isZero()||e.isZero()?r:!r.isFinite()&&!e.isFinite()?new t(NaN):e.lt(55)?r.times(Math.pow(2,e.toNumber())+""):r.times(new t(2).pow(e))}function I1e(r,e){if(r.isFinite()&&!r.isInteger()||e.isFinite()&&!e.isInteger())throw new Error("Integers expected in function rightArithShift");var t=r.constructor;return r.isNaN()||e.isNaN()||e.isNegative()&&!e.isZero()?new t(NaN):r.isZero()||e.isZero()?r:e.isFinite()?e.lt(55)?r.div(Math.pow(2,e.toNumber())+"").floor():r.div(new t(2).pow(e)).floor():r.isNegative()?new t(-1):r.isFinite()?new t(0):new t(NaN)}var r$="bitAnd",P1e=["typed","matrix","equalScalar","concat"],KX=X(r$,P1e,r=>{var{typed:e,matrix:t,equalScalar:n,concat:i}=r,s=tl({typed:e,equalScalar:n}),a=uN({typed:e,equalScalar:n}),o=Bi({typed:e,equalScalar:n}),l=Ar({typed:e,matrix:t,concat:i});return e(r$,{"number, number":mX,"BigNumber, BigNumber":C1e,"bigint, bigint":(u,c)=>u&c},l({SS:a,DS:s,Ss:o}))}),n$="bitNot",R1e=["typed"],k1e=X(n$,R1e,r=>{var{typed:e}=r;return e(n$,{number:pX,BigNumber:B1,bigint:t=>~t,"Array | Matrix":e.referToSelf(t=>n=>_t(n,t))})}),i$="bitOr",F1e=["typed","matrix","equalScalar","DenseMatrix","concat"],XX=X(i$,F1e,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:s}=r,a=zd({typed:e}),o=GF({typed:e,equalScalar:n}),l=bp({typed:e,DenseMatrix:i}),u=Ar({typed:e,matrix:t,concat:s});return e(i$,{"number, number":gX,"BigNumber, BigNumber":N1e,"bigint, bigint":(c,h)=>c|h},u({SS:o,DS:a,Ss:l}))}),O1e="matAlgo07xSSf",B1e=["typed","SparseMatrix"],au=X(O1e,B1e,r=>{var{typed:e,SparseMatrix:t}=r;return function(s,a,o){var l=s._size,u=s._datatype||s._data===void 0?s._datatype:s.getDataType(),c=a._size,h=a._datatype||a._data===void 0?a._datatype:a.getDataType();if(l.length!==c.length)throw new Mt(l.length,c.length);if(l[0]!==c[0]||l[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+c+")");var d=l[0],f=l[1],p,g=0,b=o;typeof u=="string"&&u===h&&u!=="mixed"&&(p=u,g=e.convert(0,p),b=e.find(o,[p,p]));for(var v=[],w=[],y=new Array(f+1).fill(0),A=[],x=[],_=[],S=[],E=0;E<f;E++){var C=E+1,N=0;n(s,E,_,A,C),n(a,E,S,x,C);for(var D=0;D<d;D++){var M=_[D]===C?A[D]:g,I=S[D]===C?x[D]:g,V=b(M,I);V!==0&&V!==!1&&(w.push(D),v.push(V),N++)}y[E+1]=y[E]+N}return new t({values:v,index:w,ptr:y,size:[d,f],datatype:u===s._datatype&&h===a._datatype?p:void 0})};function n(i,s,a,o,l){for(var u=i._values,c=i._index,h=i._ptr,d=h[s],f=h[s+1];d<f;d++){var p=c[d];a[p]=l,o[p]=u[d]}}}),s$="bitXor",L1e=["typed","matrix","DenseMatrix","concat","SparseMatrix"],$1e=X(s$,L1e,r=>{var{typed:e,matrix:t,DenseMatrix:n,concat:i,SparseMatrix:s}=r,a=ss({typed:e}),o=au({typed:e,SparseMatrix:s}),l=Yn({typed:e,DenseMatrix:n}),u=Ar({typed:e,matrix:t,concat:i});return e(s$,{"number, number":vX,"BigNumber, BigNumber":D1e,"bigint, bigint":(c,h)=>c^h},u({SS:o,DS:a,Ss:l}))}),a$="arg",V1e=["typed"],U1e=X(a$,V1e,r=>{var{typed:e}=r;return e(a$,{number:function(n){return Math.atan2(0,n)},BigNumber:function(n){return n.constructor.atan2(0,n)},Complex:function(n){return n.arg()},"Array | Matrix":e.referToSelf(t=>n=>_t(n,t))})}),o$="conj",z1e=["typed"],j1e=X(o$,z1e,r=>{var{typed:e}=r;return e(o$,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.conjugate(),Unit:e.referToSelf(t=>n=>new n.constructor(t(n.toNumeric()),n.formatUnits())),"Array | Matrix":e.referToSelf(t=>n=>_t(n,t))})}),l$="im",q1e=["typed"],H1e=X(l$,q1e,r=>{var{typed:e}=r;return e(l$,{number:()=>0,"BigNumber | Fraction":t=>t.mul(0),Complex:t=>t.im,"Array | Matrix":e.referToSelf(t=>n=>_t(n,t))})}),u$="re",G1e=["typed"],W1e=X(u$,G1e,r=>{var{typed:e}=r;return e(u$,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.re,"Array | Matrix":e.referToSelf(t=>n=>_t(n,t))})}),c$="not",K1e=["typed"],X1e=X(c$,K1e,r=>{var{typed:e}=r;return e(c$,{"null | undefined":()=>!0,number:_X,Complex:function(n){return n.re===0&&n.im===0},BigNumber:function(n){return n.isZero()||n.isNaN()},bigint:t=>!t,Unit:e.referToSelf(t=>n=>e.find(t,n.valueType())(n.value)),"Array | Matrix":e.referToSelf(t=>n=>_t(n,t))})}),h$="nullish",Y1e=["typed","matrix","size","flatten","deepEqual"],YX=X(h$,Y1e,r=>{var{typed:e,matrix:t,size:n,flatten:i,deepEqual:s}=r,a=ss({typed:e}),o=bo({typed:e}),l=HX({typed:e});return e(h$,{"number|bigint|Complex|BigNumber|Fraction|Unit|string|boolean|SparseMatrix, any":(u,c)=>u,"null, any":(u,c)=>c,"undefined, any":(u,c)=>c,"SparseMatrix, Array | Matrix":(u,c)=>{var h=n(u),d=n(c);if(s(h,d))return u;throw new Mt(h,d)},"DenseMatrix, DenseMatrix":e.referToSelf(u=>(c,h)=>l(c,h,u)),"DenseMatrix, SparseMatrix":e.referToSelf(u=>(c,h)=>a(c,h,u,!1)),"DenseMatrix, Array":e.referToSelf(u=>(c,h)=>l(c,t(h),u)),"DenseMatrix, any":e.referToSelf(u=>(c,h)=>o(c,h,u,!1)),"Array, Array":e.referToSelf(u=>(c,h)=>l(t(c),t(h),u).valueOf()),"Array, DenseMatrix":e.referToSelf(u=>(c,h)=>l(t(c),h,u)),"Array, SparseMatrix":e.referToSelf(u=>(c,h)=>a(t(c),h,u,!1)),"Array, any":e.referToSelf(u=>(c,h)=>o(t(c),h,u,!1).valueOf())})}),d$="or",Q1e=["typed","matrix","equalScalar","DenseMatrix","concat"],QX=X(d$,Q1e,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:s}=r,a=ss({typed:e}),o=lN({typed:e,equalScalar:n}),l=Yn({typed:e,DenseMatrix:i}),u=Ar({typed:e,matrix:t,concat:s});return e(d$,{"number, number":kP,"Complex, Complex":function(h,d){return h.re!==0||h.im!==0||d.re!==0||d.im!==0},"BigNumber, BigNumber":function(h,d){return!h.isZero()&&!h.isNaN()||!d.isZero()&&!d.isNaN()},"bigint, bigint":kP,"Unit, Unit":e.referToSelf(c=>(h,d)=>c(h.value||0,d.value||0))},u({SS:o,DS:a,Ss:l}))}),f$="xor",J1e=["typed","matrix","DenseMatrix","concat","SparseMatrix"],Z1e=X(f$,J1e,r=>{var{typed:e,matrix:t,DenseMatrix:n,concat:i,SparseMatrix:s}=r,a=ss({typed:e}),o=au({typed:e,SparseMatrix:s}),l=Yn({typed:e,DenseMatrix:n}),u=Ar({typed:e,matrix:t,concat:i});return e(f$,{"number, number":FP,"Complex, Complex":function(h,d){return(h.re!==0||h.im!==0)!=(d.re!==0||d.im!==0)},"bigint, bigint":FP,"BigNumber, BigNumber":function(h,d){return(!h.isZero()&&!h.isNaN())!=(!d.isZero()&&!d.isNaN())},"Unit, Unit":e.referToSelf(c=>(h,d)=>c(h.value||0,d.value||0))},u({SS:o,DS:a,Ss:l}))}),m$="concat",ewe=["typed","matrix","isInteger"],JX=X(m$,ewe,r=>{var{typed:e,matrix:t,isInteger:n}=r;return e(m$,{"...Array | Matrix | number | BigNumber":function(s){var a,o=s.length,l=-1,u,c=!1,h=[];for(a=0;a<o;a++){var d=s[a];if(ot(d)&&(c=!0),it(d)||xt(d)){if(a!==o-1)throw new Error("Dimension must be specified as last argument");if(u=l,l=d.valueOf(),!n(l))throw new TypeError("Integer number expected for dimension");if(l<0||a>0&&l>u)throw new Zo(l,u+1)}else{var f=gt(d).valueOf(),p=vt(f);if(h[a]=f,u=l,l=p.length-1,a>0&&l!==u)throw new Mt(u+1,l+1)}}if(h.length===0)throw new SyntaxError("At least one matrix expected");for(var g=h.shift();h.length;)g=QK(g,h.shift(),l);return c?t(g):g},"...string":function(s){return s.join("")}})}),p$="column",twe=["typed","Index","matrix","range"],ZX=X(p$,twe,r=>{var{typed:e,Index:t,matrix:n,range:i}=r;return e(p$,{"Matrix, number":s,"Array, number":function(o,l){return s(n(gt(o)),l).valueOf()}});function s(a,o){if(a.size().length!==2)throw new Error("Only two dimensional matrix is supported");xr(o,a.size()[1]);var l=i(0,a.size()[0]),u=new t(l,[o]),c=a.subset(u);return ot(c)?c:n([[c]])}}),g$="count",rwe=["typed","size","prod"],nwe=X(g$,rwe,r=>{var{typed:e,size:t,prod:n}=r;return e(g$,{string:function(s){return s.length},"Matrix | Array":function(s){return n(t(s))}})}),v$="cross",iwe=["typed","matrix","subtract","multiply"],swe=X(v$,iwe,r=>{var{typed:e,matrix:t,subtract:n,multiply:i}=r;return e(v$,{"Matrix, Matrix":function(o,l){return t(s(o.toArray(),l.toArray()))},"Matrix, Array":function(o,l){return t(s(o.toArray(),l))},"Array, Matrix":function(o,l){return t(s(o,l.toArray()))},"Array, Array":s});function s(a,o){var l=Math.max(vt(a).length,vt(o).length);a=gT(a),o=gT(o);var u=vt(a),c=vt(o);if(u.length!==1||c.length!==1||u[0]!==3||c[0]!==3)throw new RangeError("Vectors with length 3 expected (Size A = ["+u.join(", ")+"], B = ["+c.join(", ")+"])");var h=[n(i(a[1],o[2]),i(a[2],o[1])),n(i(a[2],o[0]),i(a[0],o[2])),n(i(a[0],o[1]),i(a[1],o[0]))];return l>1?[h]:h}}),y$="diag",awe=["typed","matrix","DenseMatrix","SparseMatrix"],owe=X(y$,awe,r=>{var{typed:e,matrix:t,DenseMatrix:n,SparseMatrix:i}=r;return e(y$,{Array:function(u){return s(u,0,vt(u),null)},"Array, number":function(u,c){return s(u,c,vt(u),null)},"Array, BigNumber":function(u,c){return s(u,c.toNumber(),vt(u),null)},"Array, string":function(u,c){return s(u,0,vt(u),c)},"Array, number, string":function(u,c,h){return s(u,c,vt(u),h)},"Array, BigNumber, string":function(u,c,h){return s(u,c.toNumber(),vt(u),h)},Matrix:function(u){return s(u,0,u.size(),u.storage())},"Matrix, number":function(u,c){return s(u,c,u.size(),u.storage())},"Matrix, BigNumber":function(u,c){return s(u,c.toNumber(),u.size(),u.storage())},"Matrix, string":function(u,c){return s(u,0,u.size(),c)},"Matrix, number, string":function(u,c,h){return s(u,c,u.size(),h)},"Matrix, BigNumber, string":function(u,c,h){return s(u,c.toNumber(),u.size(),h)}});function s(l,u,c,h){if(!tt(u))throw new TypeError("Second parameter in function diag must be an integer");var d=u>0?u:0,f=u<0?-u:0;switch(c.length){case 1:return a(l,u,h,c[0],f,d);case 2:return o(l,u,h,c,f,d)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function a(l,u,c,h,d,f){var p=[h+d,h+f];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var g=c==="sparse"?i.diagonal(p,l,u):n.diagonal(p,l,u);return c!==null?g:g.valueOf()}function o(l,u,c,h,d,f){if(ot(l)){var p=l.diagonal(u);return c!==null?c!==p.storage()?t(p,c):p:p.valueOf()}for(var g=Math.min(h[0]-d,h[1]-f),b=[],v=0;v<g;v++)b[v]=l[v+d][v+f];return c!==null?t(b):b}}),lwe="filter",uwe=["typed"],eY=X(lwe,uwe,r=>{var{typed:e}=r;return e("filter",{"Array, function":b$,"Matrix, function":function(n,i){return n.create(b$(n.valueOf(),i),n.datatype())},"Array, RegExp":o6,"Matrix, RegExp":function(n,i){return n.create(o6(n.valueOf(),i),n.datatype())}})});function b$(r,e){var t=lp(e,r,"filter");return t.isUnary?a6(r,t.fn):a6(r,function(n,i,s){return t.fn(n,[i],s)})}var w$="flatten",cwe=["typed"],hwe=X(w$,cwe,r=>{var{typed:e}=r;return e(w$,{Array:function(n){return Yt(n)},DenseMatrix:function(n){return n.create(Yt(n.valueOf(),!0),n.datatype())},SparseMatrix:function(n){throw new TypeError("SparseMatrix is not supported by function flatten because it does not support 1D vectors. Convert to a DenseMatrix or Array first. Example: flatten(x.toArray())")}})}),UP="forEach",dwe=["typed"],tY=X(UP,dwe,r=>{var{typed:e}=r;return e(UP,{"Array, function":fwe,"Matrix, function":function(n,i){n.forEach(i)}})});function fwe(r,e){var t=lp(e,r,UP);ZK(r,t.fn,t.isUnary)}var x$="getMatrixDataType",mwe=["typed"],pwe=X(x$,mwe,r=>{var{typed:e}=r;return e(x$,{Array:function(n){return aN(n,dr)},Matrix:function(n){return n.getDataType()}})}),_$="identity",gwe=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],vwe=X(_$,gwe,r=>{var{typed:e,config:t,matrix:n,BigNumber:i,DenseMatrix:s,SparseMatrix:a}=r;return e(_$,{"":function(){return t.matrix==="Matrix"?n([]):[]},string:function(c){return n(c)},"number | BigNumber":function(c){return l(c,c,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,h){return l(c,c,h)},"number | BigNumber, number | BigNumber":function(c,h){return l(c,h,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,h,d){return l(c,h,d)},Array:function(c){return o(c)},"Array, string":function(c,h){return o(c,h)},Matrix:function(c){return o(c.valueOf(),c.storage())},"Matrix, string":function(c,h){return o(c.valueOf(),h)}});function o(u,c){switch(u.length){case 0:return c?n(c):[];case 1:return l(u[0],u[0],c);case 2:return l(u[0],u[1],c);default:throw new Error("Vector containing two values expected")}}function l(u,c,h){var d=xt(u)||xt(c)?i:null;if(xt(u)&&(u=u.toNumber()),xt(c)&&(c=c.toNumber()),!tt(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!tt(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var f=d?new i(1):1,p=d?new d(0):0,g=[u,c];if(h){if(h==="sparse")return a.diagonal(g,f,0,p);if(h==="dense")return s.diagonal(g,f,0,p);throw new TypeError('Unknown matrix type "'.concat(h,'"'))}for(var b=P0([],g,p),v=u<c?u:c,w=0;w<v;w++)b[w][w]=f;return b}}),A$="kron",ywe=["typed","matrix","multiplyScalar"],bwe=X(A$,ywe,r=>{var{typed:e,matrix:t,multiplyScalar:n}=r;return e(A$,{"Matrix, Matrix":function(o,l){return t(s(o.toArray(),l.toArray()))},"Matrix, Array":function(o,l){return t(s(o.toArray(),l))},"Array, Matrix":function(o,l){return t(s(o,l.toArray()))},"Array, Array":s});function i(a,o){return a.flatMap(l=>o.map(u=>n(l,u)))}function s(a,o){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(l<0){var u=vt(a).length,c=vt(o).length;for(l=Math.max(u,c);u++<l;)a=[a];for(;c++<l;)o=[o]}return l===1?i(a,o):a.flatMap(h=>o.map(d=>s(h,d,l-1)))}}),J2="map",wwe=["typed"],rY=X(J2,wwe,r=>{var{typed:e}=r;return e(J2,{"Array, function":o,"Matrix, function":function(u,c){return u.map(c)},"Array|Matrix, Array|Matrix, ...Array|Matrix|function":(l,u,c)=>t([l,u,...c.slice(0,c.length-1)],c[c.length-1])});function t(l,u){if(typeof u!="function")throw new Error("Last argument must be a callback function");var c=l[0].isMatrix,h=l.map(x=>x.isMatrix?x.size():vt(x)),d=yT(...h),f=l.length,p=c?(x,_)=>x.get(_):bT,g=l.map((x,_)=>{var S=h[_].map(()=>0);return x.isMatrix?x.get(S):bT(x,S)}),b=e.isTypedFunction(u)?a(u,g,d.map(()=>0),l):s(u,f);if(b<2){var v=i(b,u,null);return n(l,v)}var w=c?l.map(x=>x.isMatrix?x.create(Ef(x.toArray(),d),x.datatype()):l[0].create(Ef(x.valueOf(),d))):l.map(x=>x.isMatrix?Ef(x.toArray(),d):Ef(x,d)),y=i(b,u,w),A=(x,_)=>y([x,...w.slice(1).map(S=>p(S,_))],_);return c?w[0].map(A):o(w[0],A)}function n(l,u){var c=l[0],h=l.map(x=>x.isMatrix?x.valueOf():x),d=l.map(x=>x.isMatrix?x.size():vt(x)),f=yT(...d),p=d.map(x=>f.length-x.length),g=f.length-1,b=u.length>1,v=b?[]:null,w=A(h,0);if(c.isMatrix){var y=c.create();return y._data=w,y._size=f,y}else return w;function A(x){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,S=f[_],E=Array(S);if(_<g)for(var C=function(V){v&&(v[_]=V),E[V]=A(x.map((K,F)=>p[F]>_?K:K.length===1?K[0]:K[V]),_+1)},N=0;N<S;N++)C(N);else for(var D=function(V){v&&(v[_]=V),E[V]=u(x.map(K=>K.length===1?K[0]:K[V]),v?v.slice():void 0)},M=0;M<S;M++)D(M);return E}}function i(l,u,c){switch(l){case 0:return h=>u(...h);case 1:return(h,d)=>u(...h,d);case 2:return(h,d)=>u(...h,d,...c)}}function s(l,u){var c=l.toString();if(/arguments/.test(c))return 2;var h=c.match(/\(.*?\)/);return/\.\.\./.test(h)||l.length>u+1?2:l.length===u+1?1:0}function a(l,u,c,h){return e.resolve(l,[...u,c,...h])!==null?2:e.resolve(l,[...u,c])!==null?1:(e.resolve(l,u)!==null,0)}function o(l,u){var c=lp(u,l,J2);return IP(l,c.fn,c.isUnary)}}),E$="diff",xwe=["typed","matrix","subtract","number"],nY=X(E$,xwe,r=>{var{typed:e,matrix:t,subtract:n,number:i}=r;return e(E$,{"Array | Matrix":function(c){return ot(c)?t(a(c.toArray())):a(c)},"Array | Matrix, number":function(c,h){if(!tt(h))throw new RangeError("Dimension must be a whole number");return ot(c)?t(s(c.toArray(),h)):s(c,h)},"Array, BigNumber":e.referTo("Array,number",u=>(c,h)=>u(c,i(h))),"Matrix, BigNumber":e.referTo("Matrix,number",u=>(c,h)=>u(c,i(h)))});function s(u,c){if(ot(u)&&(u=u.toArray()),!Array.isArray(u))throw RangeError("Array/Matrix does not have that many dimensions");if(c>0){var h=[];return u.forEach(d=>{h.push(s(d,c-1))}),h}else{if(c===0)return a(u);throw RangeError("Cannot have negative dimension")}}function a(u){for(var c=[],h=u.length,d=1;d<h;d++)c.push(o(u[d-1],u[d]));return c}function o(u,c){ot(u)&&(u=u.toArray()),ot(c)&&(c=c.toArray());var h=Array.isArray(u),d=Array.isArray(c);if(h&&d)return l(u,c);if(!h&&!d)return n(c,u);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}function l(u,c){if(u.length!==c.length)throw RangeError("Not all sub-arrays have the same length");for(var h=[],d=u.length,f=0;f<d;f++)h.push(o(u[f],c[f]));return h}}),_we="ones",Awe=["typed","config","matrix","BigNumber"],Ewe=X(_we,Awe,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e("ones",{"":function(){return t.matrix==="Array"?s([]):s([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var h=u.pop();return s(u,h)}else return t.matrix==="Array"?s(u):s(u,"default")},Array:s,Matrix:function(u){var c=u.storage();return s(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return s(u.valueOf(),c)}});function s(l,u){var c=a(l),h=c?new i(1):1;if(o(l),u){var d=n(u);return l.length>0?d.resize(l,h):d}else{var f=[];return l.length>0?P0(f,l,h):f}}function a(l){var u=!1;return l.forEach(function(c,h,d){xt(c)&&(u=!0,d[h]=c.toNumber())}),u}function o(l){l.forEach(function(u){if(typeof u!="number"||!tt(u)||u<0)throw new Error("Parameters in function ones must be positive integers")})}});function XF(){throw new Error('No "bignumber" implementation available')}function iY(){throw new Error('No "fraction" implementation available')}function Swe(){throw new Error('No "matrix" implementation available')}var S$="range",Twe=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],sY=X(S$,Twe,r=>{var{typed:e,config:t,matrix:n,bignumber:i,smaller:s,smallerEq:a,larger:o,largerEq:l,add:u,isZero:c,isPositive:h}=r;return e(S$,{string:f,"string, boolean":f,number:function(v){throw new TypeError("Too few arguments to function range(): ".concat(v))},boolean:function(v){throw new TypeError("Unexpected type of argument 1 to function range(): ".concat(v,", number|bigint|BigNumber|Fraction"))},"number, number":function(v,w){return d(p(v,w,1,!1))},"number, number, number":function(v,w,y){return d(p(v,w,y,!1))},"number, number, boolean":function(v,w,y){return d(p(v,w,1,y))},"number, number, number, boolean":function(v,w,y,A){return d(p(v,w,y,A))},"bigint, bigint|number":function(v,w){return d(p(v,w,1n,!1))},"number, bigint":function(v,w){return d(p(BigInt(v),w,1n,!1))},"bigint, bigint|number, bigint|number":function(v,w,y){return d(p(v,w,BigInt(y),!1))},"number, bigint, bigint|number":function(v,w,y){return d(p(BigInt(v),w,BigInt(y),!1))},"bigint, bigint|number, boolean":function(v,w,y){return d(p(v,w,1n,y))},"number, bigint, boolean":function(v,w,y){return d(p(BigInt(v),w,1n,y))},"bigint, bigint|number, bigint|number, boolean":function(v,w,y,A){return d(p(v,w,BigInt(y),A))},"number, bigint, bigint|number, boolean":function(v,w,y,A){return d(p(BigInt(v),w,BigInt(y),A))},"BigNumber, BigNumber":function(v,w){var y=v.constructor;return d(p(v,w,new y(1),!1))},"BigNumber, BigNumber, BigNumber":function(v,w,y){return d(p(v,w,y,!1))},"BigNumber, BigNumber, boolean":function(v,w,y){var A=v.constructor;return d(p(v,w,new A(1),y))},"BigNumber, BigNumber, BigNumber, boolean":function(v,w,y,A){return d(p(v,w,y,A))},"Fraction, Fraction":function(v,w){return d(p(v,w,1,!1))},"Fraction, Fraction, Fraction":function(v,w,y){return d(p(v,w,y,!1))},"Fraction, Fraction, boolean":function(v,w,y){return d(p(v,w,1,y))},"Fraction, Fraction, Fraction, boolean":function(v,w,y,A){return d(p(v,w,y,A))},"Unit, Unit, Unit":function(v,w,y){return d(p(v,w,y,!1))},"Unit, Unit, Unit, boolean":function(v,w,y,A){return d(p(v,w,y,A))}});function d(b){return t.matrix==="Matrix"?n?n(b):Swe():b}function f(b,v){var w=g(b);if(!w)throw new SyntaxError('String "'+b+'" is no valid range');return t.number==="BigNumber"?(i===void 0&&XF(),d(p(i(w.start),i(w.end),i(w.step)))):d(p(w.start,w.end,w.step,v))}function p(b,v,w,y){var A=[];if(c(w))throw new Error("Step must be non-zero");for(var x=h(w)?y?a:s:y?l:o,_=b;x(_,v);)A.push(_),_=u(_,w);return A}function g(b){var v=b.split(":"),w=v.map(function(A){return Number(A)}),y=w.some(function(A){return isNaN(A)});if(y)return null;switch(w.length){case 2:return{start:w[0],end:w[1],step:1};case 3:return{start:w[0],end:w[2],step:w[1]};default:return null}}}),T$="reshape",Cwe=["typed","isInteger","matrix"],Nwe=X(T$,Cwe,r=>{var{typed:e,isInteger:t}=r;return e(T$,{"Matrix, Array":function(i,s){return i.reshape(s,!0)},"Array, Array":function(i,s){return s.forEach(function(a){if(!t(a))throw new TypeError("Invalid size for dimension: "+a)}),zF(i,s)}})}),Dwe="resize",Mwe=["config","matrix"],Iwe=X(Dwe,Mwe,r=>{var{config:e,matrix:t}=r;return function(s,a,o){if(arguments.length!==2&&arguments.length!==3)throw new wp("resize",arguments.length,2,3);if(ot(a)&&(a=a.valueOf()),xt(a[0])&&(a=a.map(function(c){return xt(c)?c.toNumber():c})),ot(s))return s.resize(a,o,!0);if(typeof s=="string")return n(s,a,o);var l=Array.isArray(s)?!1:e.matrix!=="Array";if(a.length===0){for(;Array.isArray(s);)s=s[0];return gt(s)}else{Array.isArray(s)||(s=[s]),s=gt(s);var u=P0(s,a,o);return l?t(u):u}};function n(i,s,a){if(a!==void 0){if(typeof a!="string"||a.length!==1)throw new TypeError("Single character expected as defaultValue")}else a=" ";if(s.length!==1)throw new Mt(s.length,1);var o=s[0];if(typeof o!="number"||!tt(o))throw new TypeError("Invalid size, must contain positive integers (size: "+Pt(s)+")");if(i.length>o)return i.substring(0,o);if(i.length<o){for(var l=i,u=0,c=o-i.length;u<c;u++)l+=a;return l}else return i}}),C$="rotate",Pwe=["typed","multiply","rotationMatrix"],Rwe=X(C$,Pwe,r=>{var{typed:e,multiply:t,rotationMatrix:n}=r;return e(C$,{"Array , number | BigNumber | Complex | Unit":function(a,o){i(a,2);var l=t(n(o),a);return l.toArray()},"Matrix , number | BigNumber | Complex | Unit":function(a,o){return i(a,2),t(n(o),a)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(a,o,l){i(a,3);var u=t(n(o,l),a);return u},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(a,o,l){return i(a,3),t(n(o,l),a)}});function i(s,a){var o=Array.isArray(s)?vt(s):s.size();if(o.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(a));if(o.length===2&&o[1]!==1)throw new RangeError("Vector must be of dimensions 1x".concat(a));if(o[0]!==a)throw new RangeError("Vector must be of dimensions 1x".concat(a))}}),N$="rotationMatrix",kwe=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],Fwe=X(N$,kwe,r=>{var{typed:e,config:t,multiplyScalar:n,addScalar:i,unaryMinus:s,norm:a,BigNumber:o,matrix:l,DenseMatrix:u,SparseMatrix:c,cos:h,sin:d}=r;return e(N$,{"":function(){return t.matrix==="Matrix"?l([]):[]},string:function(y){return l(y)},"number | BigNumber | Complex | Unit":function(y){return f(y,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(y,A){return f(y,A)},"number | BigNumber | Complex | Unit, Array":function(y,A){var x=l(A);return p(x),v(y,x,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(y,A){p(A);var x=A.storage()||(t.matrix==="Matrix"?"dense":void 0);return v(y,A,x)},"number | BigNumber | Complex | Unit, Array, string":function(y,A,x){var _=l(A);return p(_),v(y,_,x)},"number | BigNumber | Complex | Unit, Matrix, string":function(y,A,x){return p(A),v(y,A,x)}});function f(w,y){var A=xt(w),x=A?new o(-1):-1,_=h(w),S=d(w),E=[[_,n(x,S)],[S,_]];return b(E,y)}function p(w){var y=w.size();if(y.length<1||y[0]!==3)throw new RangeError("Vector must be of dimensions 1x3")}function g(w){return w.reduce((y,A)=>n(y,A))}function b(w,y){if(y){if(y==="sparse")return new c(w);if(y==="dense")return new u(w);throw new TypeError('Unknown matrix type "'.concat(y,'"'))}return w}function v(w,y,A){var x=a(y);if(x===0)throw new RangeError("Rotation around zero vector");var _=xt(w)?o:null,S=_?new _(1):1,E=_?new _(-1):-1,C=_?new _(y.get([0])/x):y.get([0])/x,N=_?new _(y.get([1])/x):y.get([1])/x,D=_?new _(y.get([2])/x):y.get([2])/x,M=h(w),I=i(S,s(M)),V=d(w),K=i(M,g([C,C,I])),F=i(g([C,N,I]),g([E,D,V])),U=i(g([C,D,I]),g([N,V])),j=i(g([C,N,I]),g([D,V])),G=i(M,g([N,N,I])),ee=i(g([N,D,I]),g([E,C,V])),ue=i(g([C,D,I]),g([E,N,V])),te=i(g([N,D,I]),g([C,V])),R=i(M,g([D,D,I])),Y=[[K,F,U],[j,G,ee],[ue,te,R]];return b(Y,A)}}),D$="row",Owe=["typed","Index","matrix","range"],aY=X(D$,Owe,r=>{var{typed:e,Index:t,matrix:n,range:i}=r;return e(D$,{"Matrix, number":s,"Array, number":function(o,l){return s(n(gt(o)),l).valueOf()}});function s(a,o){if(a.size().length!==2)throw new Error("Only two dimensional matrix is supported");xr(o,a.size()[0]);var l=i(0,a.size()[1]),u=new t([o],l),c=a.subset(u);return ot(c)?c:n([[c]])}}),M$="size",Bwe=["typed"],Lwe=X(M$,Bwe,r=>{var{typed:e}=r;return e(M$,{Matrix:t=>t.size(),Array:vt,string:t=>[t.length],"number | Complex | BigNumber | Unit | boolean | null":t=>[]})}),I$="squeeze",$we=["typed"],Vwe=X(I$,$we,r=>{var{typed:e}=r;return e(I$,{Array:function(n){return gT(gt(n))},Matrix:function(n){var i=gT(n.toArray());return Array.isArray(i)?n.create(i,n.datatype()):i},any:function(n){return gt(n)}})}),P$="subset",Uwe=["typed","matrix","zeros","add"],oY=X(P$,Uwe,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r;return e(P$,{"Matrix, Index":function(o,l){return I0(l)?t():(pT(o,l),o.subset(l))},"Array, Index":e.referTo("Matrix, Index",function(a){return function(o,l){var u=a(t(o),l);return l.isScalar()?u:u.valueOf()}}),"Object, Index":jwe,"string, Index":zwe,"Matrix, Index, any, any":function(o,l,u,c){return I0(l)?o:(pT(o,l),o.clone().subset(l,s(u,l),c))},"Array, Index, any, any":e.referTo("Matrix, Index, any, any",function(a){return function(o,l,u,c){var h=a(t(o),l,u,c);return h.isMatrix?h.valueOf():h}}),"Array, Index, any":e.referTo("Matrix, Index, any, any",function(a){return function(o,l,u){return a(t(o),l,u,void 0).valueOf()}}),"Matrix, Index, any":e.referTo("Matrix, Index, any, any",function(a){return function(o,l,u){return a(o,l,u,void 0)}}),"string, Index, string":R$,"string, Index, string, string":R$,"Object, Index, any":qwe});function s(a,o){if(typeof a=="string")throw new Error("can't boradcast a string");if(o.isScalar())return a;var l=o.size();if(l.every(u=>u>0))try{return i(a,n(l))}catch{return a}else return a}});function zwe(r,e){if(!ZC(e))throw new TypeError("Index expected");if(I0(e))return"";if(pT(Array.from(r),e),e.size().length!==1)throw new Mt(e.size().length,1);var t=r.length;xr(e.min()[0],t),xr(e.max()[0],t);var n=e.dimension(0),i="";function s(a){i+=r.charAt(a)}return Number.isInteger(n)?s(n):n.forEach(s),i}function R$(r,e,t,n){if(!e||e.isIndex!==!0)throw new TypeError("Index expected");if(I0(e))return r;if(pT(Array.from(r),e),e.size().length!==1)throw new Mt(e.size().length,1);if(n!==void 0){if(typeof n!="string"||n.length!==1)throw new TypeError("Single character expected as defaultValue")}else n=" ";var i=e.dimension(0),s=Number.isInteger(i)?1:i.size()[0];if(s!==t.length)throw new Mt(i.size()[0],t.length);var a=r.length;xr(e.min()[0]),xr(e.max()[0]);for(var o=[],l=0;l<a;l++)o[l]=r.charAt(l);function u(d,f){o[d]=t.charAt(f[0])}if(Number.isInteger(i)?u(i,[0]):i.forEach(u),o.length>a)for(var c=a-1,h=o.length;c<h;c++)o[c]||(o[c]=n);return o.join("")}function jwe(r,e){if(!I0(e)){if(e.size().length!==1)throw new Mt(e.size(),1);var t=e.dimension(0);if(typeof t!="string")throw new TypeError("String expected as index to retrieve an object property");return xs(r,t)}}function qwe(r,e,t){if(I0(e))return r;if(e.size().length!==1)throw new Mt(e.size(),1);var n=e.dimension(0);if(typeof n!="string")throw new TypeError("String expected as index to retrieve an object property");var i=gt(r);return D0(i,n,t),i}var k$="transpose",Hwe=["typed","matrix"],Gwe=X(k$,Hwe,r=>{var{typed:e,matrix:t}=r;return e(k$,{Array:a=>n(t(a)).valueOf(),Matrix:n,any:gt});function n(a){var o=a.size(),l;switch(o.length){case 1:l=a.clone();break;case 2:{var u=o[0],c=o[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+Pt(o)+")");switch(a.storage()){case"dense":l=i(a,u,c);break;case"sparse":l=s(a,u,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+Pt(o)+")")}return l}function i(a,o,l){for(var u=a._data,c=[],h,d=0;d<l;d++){h=c[d]=[];for(var f=0;f<o;f++)h[f]=gt(u[f][d])}return a.createDenseMatrix({data:c,size:[l,o],datatype:a._datatype})}function s(a,o,l){for(var u=a._values,c=a._index,h=a._ptr,d=u?[]:void 0,f=[],p=[],g=[],b=0;b<o;b++)g[b]=0;var v,w,y;for(v=0,w=c.length;v<w;v++)g[c[v]]++;for(var A=0,x=0;x<o;x++)p.push(A),A+=g[x],g[x]=p[x];for(p.push(A),y=0;y<l;y++)for(var _=h[y],S=h[y+1],E=_;E<S;E++){var C=g[c[E]]++;f[C]=y,u&&(d[C]=gt(u[E]))}return a.createSparseMatrix({values:d,index:f,ptr:p,size:[l,o],datatype:a._datatype})}}),F$="ctranspose",Wwe=["typed","transpose","conj"],Kwe=X(F$,Wwe,r=>{var{typed:e,transpose:t,conj:n}=r;return e(F$,{any:function(s){return n(t(s))}})}),O$="zeros",Xwe=["typed","config","matrix","BigNumber"],Ywe=X(O$,Xwe,r=>{var{typed:e,config:t,matrix:n,BigNumber:i}=r;return e(O$,{"":function(){return t.matrix==="Array"?s([]):s([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var h=u.pop();return s(u,h)}else return t.matrix==="Array"?s(u):s(u,"default")},Array:s,Matrix:function(u){var c=u.storage();return s(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return s(u.valueOf(),c)}});function s(l,u){var c=a(l),h=c?new i(0):0;if(o(l),u){var d=n(u);return l.length>0?d.resize(l,h):d}else{var f=[];return l.length>0?P0(f,l,h):f}}function a(l){var u=!1;return l.forEach(function(c,h,d){xt(c)&&(u=!0,d[h]=c.toNumber())}),u}function o(l){l.forEach(function(u){if(typeof u!="number"||!tt(u)||u<0)throw new Error("Parameters in function zeros must be positive integers")})}}),B$="fft",Qwe=["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],Jwe=X(B$,Qwe,r=>{var{typed:e,matrix:t,addScalar:n,multiplyScalar:i,divideScalar:s,exp:a,tau:o,i:l,dotDivide:u,conj:c,pow:h,ceil:d,log2:f}=r;return e(B$,{Array:p,Matrix:function(y){return y.create(p(y.valueOf()),y.datatype())}});function p(w){var y=vt(w);return y.length===1?v(w,y[0]):g(w.map(A=>p(A,y.slice(1))),0)}function g(w,y){var A=vt(w);if(y!==0)return new Array(A[0]).fill(0).map((_,S)=>g(w[S],y-1));if(A.length===1)return v(w);function x(_){var S=vt(_);return new Array(S[1]).fill(0).map((E,C)=>new Array(S[0]).fill(0).map((N,D)=>_[D][C]))}return x(g(x(w),1))}function b(w){for(var y=w.length,A=a(s(i(-1,i(l,o)),y)),x=[],_=1-y;_<y;_++)x.push(h(A,s(h(_,2),2)));for(var S=h(2,d(f(y+y-1))),E=[...new Array(y).fill(0).map((F,U)=>i(w[U],x[y-1+U])),...new Array(S-y).fill(0)],C=[...new Array(y+y-1).fill(0).map((F,U)=>s(1,x[U])),...new Array(S-(y+y-1)).fill(0)],N=v(E),D=v(C),M=new Array(S).fill(0).map((F,U)=>i(N[U],D[U])),I=u(c(p(c(M))),S),V=[],K=y-1;K<y+y-1;K++)V.push(i(I[K],x[K]));return V}function v(w){var y=w.length;if(y===1)return[w[0]];if(y%2===0){for(var A=[...v(w.filter((E,C)=>C%2===0)),...v(w.filter((E,C)=>C%2===1))],x=0;x<y/2;x++){var _=A[x],S=i(A[x+y/2],a(i(i(o,l),s(-x,y))));A[x]=n(_,S),A[x+y/2]=n(_,i(-1,S))}return A}else return b(w)}}),L$="ifft",Zwe=["typed","fft","dotDivide","conj"],exe=X(L$,Zwe,r=>{var{typed:e,fft:t,dotDivide:n,conj:i}=r;return e(L$,{"Array | Matrix":function(a){var o=ot(a)?a.size():vt(a);return n(i(t(i(a))),o.reduce((l,u)=>l*u,1))}})});function L1(r){"@babel/helpers - typeof";return L1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L1(r)}function txe(r,e){if(L1(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(L1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function rxe(r){var e=txe(r,"string");return L1(e)=="symbol"?e:e+""}function Fn(r,e,t){return(e=rxe(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function $$(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function nxe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$$(Object(t),!0).forEach(function(n){Fn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):$$(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var ixe="solveODE",sxe=["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],axe=X(ixe,sxe,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:s,max:a,map:o,abs:l,isPositive:u,isNegative:c,larger:h,smaller:d,matrix:f,bignumber:p,unaryMinus:g}=r;function b(E){return function(C,N,D,M){var I=!(N.length===2&&(N.every(_)||N.every(_a)));if(I)throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var V=N[0],K=N[1],F=h(K,V),U=M.firstStep;if(U!==void 0&&!u(U))throw new Error('"firstStep" must be positive');var j=M.maxStep;if(j!==void 0&&!u(j))throw new Error('"maxStep" must be positive');var G=M.minStep;if(G&&c(G))throw new Error('"minStep" must be positive or zero');var ee=[V,K,U,G,j].filter(q=>q!==void 0);if(!(ee.every(_)||ee.every(_a)))throw new Error('Inconsistent type of "t" dependant variables');for(var ue=1,te=M.tol?M.tol:1e-4,R=M.minDelta?M.minDelta:.2,Y=M.maxDelta?M.maxDelta:5,H=M.maxIter?M.maxIter:1e4,he=[V,K,...D,j,G].some(xt),[fe,re,W,ie]=he?[p(E.a),p(E.c),p(E.b),p(E.bp)]:[E.a,E.c,E.b,E.bp],me=U?F?U:g(U):s(n(K,V),ue),le=[V],ve=[D],ye=n(W,ie),Ie=0,Ue=0,Ge=A(F),Be=x(F);Ge(le[Ie],K);){var $e=[];me=Be(le[Ie],K,me),$e.push(C(le[Ie],ve[Ie]));for(var He=1;He<re.length;++He)$e.push(C(t(le[Ie],i(re[He],me)),t(ve[Ie],i(me,fe[He],$e))));var Z=a(l(o(i(ye,$e),q=>_a(q)?q.value:q)));Z<te&&te/Z>1/4&&(le.push(t(le[Ie],me)),ve.push(t(ve[Ie],i(me,W,$e))),Ie++);var ce=.84*(te/Z)**(1/5);if(d(ce,R)?ce=R:h(ce,Y)&&(ce=Y),ce=he?p(ce):ce,me=i(me,ce),j&&h(l(me),j)?me=F?j:g(j):G&&d(l(me),G)&&(me=F?G:g(G)),Ue++,Ue>H)throw new Error("Maximum number of iterations reached, try changing options")}return{t:le,y:ve}}}function v(E,C,N,D){var M=[[],[.5],[0,.75],[.2222222222222222,.3333333333333333,.4444444444444444]],I=[null,1/2,3/4,1],V=[2/9,1/3,4/9,0],K=[7/24,1/4,1/3,1/8],F={a:M,c:I,b:V,bp:K};return b(F)(E,C,N,D)}function w(E,C,N,D){var M=[[],[.2],[.075,.225],[.9777777777777777,-3.7333333333333334,3.5555555555555554],[2.9525986892242035,-11.595793324188385,9.822892851699436,-.2908093278463649],[2.8462752525252526,-10.757575757575758,8.906422717743473,.2784090909090909,-.2735313036020583],[.09114583333333333,0,.44923629829290207,.6510416666666666,-.322376179245283,.13095238095238096]],I=[null,1/5,3/10,4/5,8/9,1,1],V=[35/384,0,500/1113,125/192,-2187/6784,11/84,0],K=[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40],F={a:M,c:I,b:V,bp:K};return b(F)(E,C,N,D)}function y(E,C,N,D){var M=D.method?D.method:"RK45",I={RK23:v,RK45:w};if(M.toUpperCase()in I){var V=nxe({},D);return delete V.method,I[M.toUpperCase()](E,C,N,V)}else{var K=Object.keys(I).map(U=>'"'.concat(U,'"')),F="".concat(K.slice(0,-1).join(", ")," and ").concat(K.slice(-1));throw new Error('Unavailable method "'.concat(M,'". Available methods are ').concat(F))}}function A(E){return E?d:h}function x(E){var C=E?h:d;return function(N,D,M){var I=t(N,M);return C(I,D)?n(D,N):M}}function _(E){return xt(E)||it(E)}function S(E,C,N,D){var M=y(E,C.toArray(),N.toArray(),D);return{t:f(M.t),y:f(M.y)}}return e("solveODE",{"function, Array, Array, Object":y,"function, Matrix, Matrix, Object":S,"function, Array, Array":(E,C,N)=>y(E,C,N,{}),"function, Matrix, Matrix":(E,C,N)=>S(E,C,N,{}),"function, Array, number | BigNumber | Unit":(E,C,N)=>{var D=y(E,C,[N],{});return{t:D.t,y:D.y.map(M=>M[0])}},"function, Matrix, number | BigNumber | Unit":(E,C,N)=>{var D=y(E,C.toArray(),[N],{});return{t:f(D.t),y:f(D.y.map(M=>M[0]))}},"function, Array, number | BigNumber | Unit, Object":(E,C,N,D)=>{var M=y(E,C,[N],D);return{t:M.t,y:M.y.map(I=>I[0])}},"function, Matrix, number | BigNumber | Unit, Object":(E,C,N,D)=>{var M=y(E,C.toArray(),[N],D);return{t:f(M.t),y:f(M.y.map(I=>I[0]))}}})}),oxe="erf",lxe=["typed"],uxe=X(oxe,lxe,r=>{var{typed:e}=r;return e("name",{number:function(a){var o=Math.abs(a);return o>=dxe?Qh(a):o<=cxe?Qh(a)*t(o):o<=4?Qh(a)*(1-n(o)):Qh(a)*(1-i(o))},"Array | Matrix":e.referToSelf(s=>a=>_t(a,s))});function t(s){var a=s*s,o=hu[0][4]*a,l=a,u;for(u=0;u<3;u+=1)o=(o+hu[0][u])*a,l=(l+Lp[0][u])*a;return s*(o+hu[0][3])/(l+Lp[0][3])}function n(s){var a=hu[1][8]*s,o=s,l;for(l=0;l<7;l+=1)a=(a+hu[1][l])*s,o=(o+Lp[1][l])*s;var u=(a+hu[1][7])/(o+Lp[1][7]),c=parseInt(s*16)/16,h=(s-c)*(s+c);return Math.exp(-c*c)*Math.exp(-h)*u}function i(s){var a=1/(s*s),o=hu[2][5]*a,l=a,u;for(u=0;u<4;u+=1)o=(o+hu[2][u])*a,l=(l+Lp[2][u])*a;var c=a*(o+hu[2][4])/(l+Lp[2][4]);c=(hxe-c)/s,a=parseInt(s*16)/16;var h=(s-a)*(s+a);return Math.exp(-a*a)*Math.exp(-h)*c}}),cxe=.46875,hxe=.5641895835477563,hu=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,21531153547440383e-24],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],Lp=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],dxe=Math.pow(2,53),V$="zeta",fxe=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isBounded","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],mxe=X(V$,fxe,r=>{var{typed:e,config:t,multiply:n,pow:i,divide:s,factorial:a,equal:o,smallerEq:l,isBounded:u,isNegative:c,gamma:h,sin:d,subtract:f,add:p,Complex:g,BigNumber:b,pi:v}=r;return e(V$,{number:S=>w(S,E=>E,()=>20),BigNumber:S=>w(S,E=>new b(E),()=>Math.abs(Math.log10(t.relTol))),Complex:y});function w(S,E,C){return o(S,0)?E(-.5):o(S,1)?E(NaN):u(S)?A(S,E,C,N=>N):c(S)?E(NaN):E(1)}function y(S){return S.re===0&&S.im===0?new g(-.5):S.re===1?new g(NaN,NaN):S.re===1/0&&S.im===0?new g(1):S.im===1/0||S.re===-1/0?new g(NaN,NaN):A(S,E=>E,E=>Math.round(1.3*15+.9*Math.abs(E.im)),E=>E.re)}function A(S,E,C,N){var D=C(S);if(N(S)>-(D-1)/2)return _(S,E(D),E);var M=n(i(2,S),i(E(v),f(S,1)));return M=n(M,d(n(s(E(v),2),S))),M=n(M,h(f(1,S))),n(M,A(f(1,S),E,C,N))}function x(S,E){for(var C=S,N=S;l(N,E);N=p(N,1)){var D=s(n(a(p(E,f(N,1))),i(4,N)),n(a(f(E,N)),a(n(2,N))));C=p(C,D)}return n(E,C)}function _(S,E,C){for(var N=s(1,n(x(C(0),E),f(1,i(2,f(1,S))))),D=C(0),M=C(1);l(M,E);M=p(M,1))D=p(D,s(n((-1)**(M-1),x(M,E)),i(M,S)));return n(N,D)}}),U$="mode",pxe=["typed","isNaN","isNumeric"],gxe=X(U$,pxe,r=>{var{typed:e,isNaN:t,isNumeric:n}=r;return e(U$,{"Array | Matrix":i,"...":function(a){return i(a)}});function i(s){s=Yt(s.valueOf());var a=s.length;if(a===0)throw new Error("Cannot calculate mode of an empty array");for(var o={},l=[],u=0,c=0;c<s.length;c++){var h=s[c];if(n(h)&&t(h))throw new Error("Cannot calculate mode of an array containing NaN values");h in o||(o[h]=0),o[h]++,o[h]===u?l.push(h):o[h]>u&&(u=o[h],l=[h])}return l}});function Ts(r,e,t){var n;return String(r).includes("Unexpected type")?(n=arguments.length>2?" (type: "+dr(t)+", value: "+JSON.stringify(t)+")":" (type: "+r.data.actual+")",new TypeError("Cannot calculate "+e+", unexpected type of argument"+n)):String(r).includes("complex numbers")?(n=arguments.length>2?" (type: "+dr(t)+", value: "+JSON.stringify(t)+")":"",new TypeError("Cannot calculate "+e+", no ordering relation is defined for complex numbers"+n)):r}var z$="prod",vxe=["typed","config","multiplyScalar","numeric"],yxe=X(z$,vxe,r=>{var{typed:e,config:t,multiplyScalar:n,numeric:i}=r;return e(z$,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":function(o,l){throw new Error("prod(A, dim) is not yet supported")},"...":function(o){return s(o)}});function s(a){var o;if(Dd(a,function(l){try{o=o===void 0?l:n(o,l)}catch(u){throw Ts(u,"prod",l)}}),typeof o=="string"&&(o=i(o,Vd(o,t))),o===void 0)throw new Error("Cannot calculate prod of an empty array");return o}}),j$="format",bxe=["typed"],wxe=X(j$,bxe,r=>{var{typed:e}=r;return e(j$,{any:Pt,"any, Object | function | number | BigNumber":Pt})}),q$="bin",xxe=["typed","format"],_xe=X(q$,xxe,r=>{var{typed:e,format:t}=r;return e(q$,{"number | BigNumber":function(i){return t(i,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(i,s){return t(i,{notation:"bin",wordSize:s})}})}),H$="oct",Axe=["typed","format"],Exe=X(H$,Axe,r=>{var{typed:e,format:t}=r;return e(H$,{"number | BigNumber":function(i){return t(i,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(i,s){return t(i,{notation:"oct",wordSize:s})}})}),G$="hex",Sxe=["typed","format"],Txe=X(G$,Sxe,r=>{var{typed:e,format:t}=r;return e(G$,{"number | BigNumber":function(i){return t(i,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(i,s){return t(i,{notation:"hex",wordSize:s})}})}),lY=/\$([\w.]+)/g,W$="print",Cxe=["typed"],uY=X(W$,Cxe,r=>{var{typed:e}=r;return e(W$,{"string, Object | Array":K$,"string, Object | Array, number | Object":K$})});function K$(r,e,t){return r.replace(lY,function(n,i){var s=i.split("."),a=e[s.shift()];for(a!==void 0&&a.isMatrix&&(a=a.toArray());s.length&&a!==void 0;){var o=s.shift();a=o?a[o]:a+"."}return a!==void 0?mn(a)?a:Pt(a,t):n})}var X$="to",Nxe=["typed","matrix","concat"],Dxe=X(X$,Nxe,r=>{var{typed:e,matrix:t,concat:n}=r,i=Ar({typed:e,matrix:t,concat:n});return e(X$,{"Unit, Unit | string":(s,a)=>s.to(a)},i({Ds:!0}))}),Y$="toBest",Mxe=["typed"],Ixe=X(Y$,Mxe,r=>{var{typed:e}=r;return e(Y$,{Unit:t=>t.toBest(),"Unit, string":(t,n)=>t.toBest(n.split(",")),"Unit, string, Object":(t,n,i)=>t.toBest(n.split(","),i),"Unit, Array":(t,n)=>t.toBest(n),"Unit, Array, Object":(t,n,i)=>t.toBest(n,i)})}),Q$="isPrime",Pxe=["typed"],Rxe=X(Q$,Pxe,r=>{var{typed:e}=r;return e(Q$,{number:function(n){if(n<=3)return n>1;if(n%2===0||n%3===0)return!1;for(var i=5;i*i<=n;i+=6)if(n%i===0||n%(i+2)===0)return!1;return!0},bigint:function(n){if(n<=3n)return n>1n;if(n%2n===0n||n%3n===0n)return!1;for(var i=5n;i*i<=n;i+=6n)if(n%i===0n||n%(i+2n)===0n)return!1;return!0},BigNumber:function(n){if(n.lte(3))return n.gt(1);if(n.mod(2).eq(0)||n.mod(3).eq(0))return!1;if(n.lt(Math.pow(2,32))){for(var i=n.toNumber(),s=5;s*s<=i;s+=6)if(i%s===0||i%(s+2)===0)return!1;return!0}function a(w,y,A){for(var x=1;!y.eq(0);)y.mod(2).eq(0)?(y=y.div(2),w=w.mul(w).mod(A)):(y=y.sub(1),x=w.mul(x).mod(A));return x}var o=n.constructor.clone({precision:n.toFixed(0).length*2});n=new o(n);for(var l=0,u=n.sub(1);u.mod(2).eq(0);)u=u.div(2),l+=1;var c=null;if(n.lt("3317044064679887385961981"))c=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter(w=>w<n);else{var h=Math.min(n.toNumber()-2,Math.floor(2*Math.pow(n.toFixed(0).length*Math.log(10),2)));c=[];for(var d=2;d<=h;d+=1)c.push(h)}for(var f=0;f<c.length;f+=1){var p=c[f],g=a(n.sub(n).add(p),u,n);if(!g.eq(1)){for(var b=0,v=g;!v.eq(n.sub(1));b+=1,v=v.mul(v).mod(n))if(b===l-1)return!1}}return!0},"Array | Matrix":e.referToSelf(t=>n=>_t(n,t))})}),kxe="numeric",Fxe=["number","?bignumber","?fraction"],Oxe=X(kxe,Fxe,r=>{var{number:e,bignumber:t,fraction:n}=r,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},s={number:a=>e(a),BigNumber:t?a=>t(a):XF,bigint:a=>BigInt(a),Fraction:n?a=>n(a):iY};return function(o){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",u=arguments.length>2?arguments[2]:void 0;if(u!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=dr(o);if(!(c in i))throw new TypeError("Cannot convert "+o+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(l in s))throw new TypeError("Cannot convert "+o+' to type "'+l+'"; valid output types are '+Object.keys(s).join(", "));return l===c?o:s[l](o)}}),J$="divideScalar",Bxe=["typed","numeric"],Lxe=X(J$,Bxe,r=>{var{typed:e,numeric:t}=r;return e(J$,{"number, number":function(i,s){return i/s},"Complex, Complex":function(i,s){return i.div(s)},"BigNumber, BigNumber":function(i,s){return i.div(s)},"bigint, bigint":function(i,s){return i/s},"Fraction, Fraction":function(i,s){return i.div(s)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,i)=>n.divide(i),"number | Fraction | Complex | BigNumber, Unit":(n,i)=>i.divideInto(n)})}),Z$="pow",$xe=["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],Vxe=X(Z$,$xe,r=>{var{typed:e,config:t,identity:n,multiply:i,matrix:s,inv:a,number:o,fraction:l,Complex:u}=r;return e(Z$,{"number, number":c,"Complex, Complex":function(p,g){return p.pow(g)},"BigNumber, BigNumber":function(p,g){return g.isInteger()||p>=0||t.predictable?p.pow(g):new u(p.toNumber(),0).pow(g.toNumber(),0)},"bigint, bigint":(f,p)=>f**p,"Fraction, Fraction":function(p,g){var b=p.pow(g);if(b!=null)return b;if(t.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(p.valueOf(),g.valueOf())},"Array, number":h,"Array, BigNumber":function(p,g){return h(p,g.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(p,g){return d(p,g.toNumber())},"Unit, number | BigNumber":function(p,g){return p.pow(g)}});function c(f,p){if(t.predictable&&!tt(p)&&f<0)try{var g=l(p),b=o(g);if((p===b||Math.abs((p-b)/p)<1e-14)&&g.d%2n===1n)return(g.n%2n===0n?1:-1)*Math.pow(-f,p)}catch{}return t.predictable&&(f<-1&&p===1/0||f>-1&&f<0&&p===-1/0)?NaN:tt(p)||f>=0||t.predictable?fX(f,p):f*f<1&&p===1/0||f*f>1&&p===-1/0?0:new u(f,0).pow(p,0)}function h(f,p){if(!tt(p))throw new TypeError("For A^b, b must be an integer (value is "+p+")");var g=vt(f);if(g.length!==2)throw new Error("For A^b, A must be 2 dimensional (A has "+g.length+" dimensions)");if(g[0]!==g[1])throw new Error("For A^b, A must be square (size is "+g[0]+"x"+g[1]+")");if(p<0)try{return h(a(f),-p)}catch(w){throw w.message==="Cannot calculate inverse, determinant is zero"?new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+p+")"):w}for(var b=n(g[0]).valueOf(),v=f;p>=1;)(p&1)===1&&(b=i(v,b)),p>>=1,v=i(v,v);return b}function d(f,p){return s(h(f.valueOf(),p))}}),$p="Number of decimals in function round must be an integer",eV="round",Uxe=["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],zxe=X(eV,Uxe,r=>{var{typed:e,config:t,matrix:n,equalScalar:i,zeros:s,BigNumber:a,DenseMatrix:o}=r,l=Bi({typed:e,equalScalar:i}),u=Yn({typed:e,DenseMatrix:o}),c=bo({typed:e});function h(d){return Math.abs(d_(d).exponent)}return e(eV,{number:function(f){var p=zy(f,h(t.relTol)),g=gi(f,p,t.relTol,t.absTol)?p:f;return zy(g)},"number, number":function(f,p){var g=h(t.relTol);if(p>=g)return zy(f,p);var b=zy(f,g),v=gi(f,b,t.relTol,t.absTol)?b:f;return zy(v,p)},"number, BigNumber":function(f,p){if(!p.isInteger())throw new TypeError($p);return new a(f).toDecimalPlaces(p.toNumber())},Complex:function(f){return f.round()},"Complex, number":function(f,p){if(p%1)throw new TypeError($p);return f.round(p)},"Complex, BigNumber":function(f,p){if(!p.isInteger())throw new TypeError($p);var g=p.toNumber();return f.round(g)},BigNumber:function(f){var p=new a(f).toDecimalPlaces(h(t.relTol)),g=yo(f,p,t.relTol,t.absTol)?p:f;return g.toDecimalPlaces(0)},"BigNumber, BigNumber":function(f,p){if(!p.isInteger())throw new TypeError($p);var g=h(t.relTol);if(p>=g)return f.toDecimalPlaces(p.toNumber());var b=f.toDecimalPlaces(g),v=yo(f,b,t.relTol,t.absTol)?b:f;return v.toDecimalPlaces(p.toNumber())},bigint:d=>d,"bigint, number":(d,f)=>d,"bigint, BigNumber":(d,f)=>d,Fraction:function(f){return f.round()},"Fraction, number":function(f,p){if(p%1)throw new TypeError($p);return f.round(p)},"Fraction, BigNumber":function(f,p){if(!p.isInteger())throw new TypeError($p);return f.round(p.toNumber())},"Unit, number, Unit":e.referToSelf(d=>function(f,p,g){var b=f.toNumeric(g);return g.multiply(d(b,p))}),"Unit, BigNumber, Unit":e.referToSelf(d=>(f,p,g)=>d(f,p.toNumber(),g)),"Array | Matrix, number | BigNumber, Unit":e.referToSelf(d=>(f,p,g)=>_t(f,b=>d(b,p,g),!0)),"Array | Matrix | Unit, Unit":e.referToSelf(d=>(f,p)=>d(f,0,p)),"Array | Matrix":e.referToSelf(d=>f=>_t(f,d,!0)),"SparseMatrix, number | BigNumber":e.referToSelf(d=>(f,p)=>l(f,p,d,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(d=>(f,p)=>c(f,p,d,!1)),"Array, number | BigNumber":e.referToSelf(d=>(f,p)=>c(n(f),p,d,!1).valueOf()),"number | Complex | BigNumber | Fraction, SparseMatrix":e.referToSelf(d=>(f,p)=>i(f,0)?s(p.size(),p.storage()):u(p,f,d,!0)),"number | Complex | BigNumber | Fraction, DenseMatrix":e.referToSelf(d=>(f,p)=>i(f,0)?s(p.size(),p.storage()):c(p,f,d,!0)),"number | Complex | BigNumber | Fraction, Array":e.referToSelf(d=>(f,p)=>c(n(p),f,d,!0).valueOf())})}),tV="log",jxe=["config","typed","typeOf","divideScalar","Complex"],qxe=Math.log(16),Hxe=X(tV,jxe,r=>{var{typed:e,typeOf:t,config:n,divideScalar:i,Complex:s}=r;function a(l){return l.log()}function o(l){return a(new s(l,0))}return e(tV,{number:function(u){return u>=0||n.predictable?f6(u):o(u)},bigint:WF(qxe,f6,n,o),Complex:a,BigNumber:function(u){return!u.isNegative()||n.predictable?u.ln():o(u.toNumber())},"any, any":e.referToSelf(l=>(u,c)=>{if(t(u)==="Fraction"&&t(c)==="Fraction"){var h=u.log(c);if(h!==null)return h}return i(l(u),l(c))})})}),rV="log1p",Gxe=["typed","config","divideScalar","log","Complex"],Wxe=X(rV,Gxe,r=>{var{typed:e,config:t,divideScalar:n,log:i,Complex:s}=r;return e(rV,{number:function(l){return l>=-1||t.predictable?Oge(l):a(new s(l,0))},Complex:a,BigNumber:function(l){var u=l.plus(1);return!u.isNegative()||t.predictable?u.ln():a(new s(l.toNumber(),0))},"Array | Matrix":e.referToSelf(o=>l=>_t(l,o)),"any, any":e.referToSelf(o=>(l,u)=>n(o(l),i(u)))});function a(o){var l=o.re+1;return new s(Math.log(Math.sqrt(l*l+o.im*o.im)),Math.atan2(o.im,l))}}),nV="nthRoots",Kxe=["config","typed","divideScalar","Complex"],Xxe=X(nV,Kxe,r=>{var{typed:e,config:t,divideScalar:n,Complex:i}=r,s=[function(l){return new i(l,0)},function(l){return new i(0,l)},function(l){return new i(-l,0)},function(l){return new i(0,-l)}];function a(o,l){if(l<0)throw new Error("Root must be greater than zero");if(l===0)throw new Error("Root must be non-zero");if(l%1!==0)throw new Error("Root must be an integer");if(o===0||o.abs()===0)return[new i(0,0)];var u=typeof o=="number",c;(u||o.re===0||o.im===0)&&(u?c=2*+(o<0):o.im===0?c=2*+(o.re<0):c=2*+(o.im<0)+1);for(var h=o.arg(),d=o.abs(),f=[],p=Math.pow(d,1/l),g=0;g<l;g++){var b=(c+4*g)/l;if(b===Math.round(b)){f.push(s[b%4](p));continue}f.push(new i({r:p,phi:(h+2*Math.PI*g)/l}))}return f}return e(nV,{Complex:function(l){return a(l,2)},"Complex, number":a})}),iV="dotPow",Yxe=["typed","equalScalar","matrix","pow","DenseMatrix","concat","SparseMatrix"],Qxe=X(iV,Yxe,r=>{var{typed:e,equalScalar:t,matrix:n,pow:i,DenseMatrix:s,concat:a,SparseMatrix:o}=r,l=ss({typed:e}),u=au({typed:e,SparseMatrix:o}),c=Bi({typed:e,equalScalar:t}),h=Yn({typed:e,DenseMatrix:s}),d=Ar({typed:e,matrix:n,concat:a}),f={};for(var p in i.signatures)Object.prototype.hasOwnProperty.call(i.signatures,p)&&!p.includes("Matrix")&&!p.includes("Array")&&(f[p]=i.signatures[p]);var g=e(f);return e(iV,d({elop:g,SS:u,DS:l,Ss:c,sS:h}))}),sV="dotDivide",Jxe=["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat","SparseMatrix"],Zxe=X(sV,Jxe,r=>{var{typed:e,matrix:t,equalScalar:n,divideScalar:i,DenseMatrix:s,concat:a,SparseMatrix:o}=r,l=tl({typed:e,equalScalar:n}),u=ss({typed:e}),c=au({typed:e,SparseMatrix:o}),h=Bi({typed:e,equalScalar:n}),d=Yn({typed:e,DenseMatrix:s}),f=Ar({typed:e,matrix:t,concat:a});return e(sV,f({elop:i,SS:c,DS:u,SD:l,Ss:h,sS:d}))});function f_(r){var{DenseMatrix:e}=r;return function(n,i,s){var a=n.size();if(a.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+Pt(a)+")");var o=a[0],l=a[1];if(o!==l)throw new RangeError("Matrix must be square (size: "+Pt(a)+")");var u=[];if(ot(i)){var c=i.size(),h=i._data;if(c.length===1){if(c[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var d=0;d<o;d++)u[d]=[h[d]];return new e({data:u,size:[o,1],datatype:i._datatype})}if(c.length===2){if(c[0]!==o||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(cT(i)){if(s){u=[];for(var f=0;f<o;f++)u[f]=[h[f][0]];return new e({data:u,size:[o,1],datatype:i._datatype})}return i}if(Af(i)){for(var p=0;p<o;p++)u[p]=[0];for(var g=i._values,b=i._index,v=i._ptr,w=v[1],y=v[0];y<w;y++){var A=b[y];u[A][0]=g[y]}return new e({data:u,size:[o,1],datatype:i._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(cr(i)){var x=vt(i);if(x.length===1){if(x[0]!==o)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var _=0;_<o;_++)u[_]=[i[_]];return new e({data:u,size:[o,1]})}if(x.length===2){if(x[0]!==o||x[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var S=0;S<o;S++)u[S]=[i[S][0]];return new e({data:u,size:[o,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var aV="lsolve",e_e=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],t_e=X(aV,e_e,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:s,equalScalar:a,DenseMatrix:o}=r,l=f_({DenseMatrix:o});return e(aV,{"SparseMatrix, Array | Matrix":function(d,f){return c(d,f)},"DenseMatrix, Array | Matrix":function(d,f){return u(d,f)},"Array, Array | Matrix":function(d,f){var p=t(d),g=u(p,f);return g.valueOf()}});function u(h,d){d=l(h,d,!0);for(var f=d._data,p=h._size[0],g=h._size[1],b=[],v=h._data,w=0;w<g;w++){var y=f[w][0]||0,A=void 0;if(a(y,0))A=0;else{var x=v[w][w];if(a(x,0))throw new Error("Linear system cannot be solved since matrix is singular");A=n(y,x);for(var _=w+1;_<p;_++)f[_]=[s(f[_][0]||0,i(A,v[_][w]))]}b[w]=[A]}return new o({data:b,size:[p,1]})}function c(h,d){d=l(h,d,!0);for(var f=d._data,p=h._size[0],g=h._size[1],b=h._values,v=h._index,w=h._ptr,y=[],A=0;A<g;A++){var x=f[A][0]||0;if(a(x,0))y[A]=[0];else{for(var _=0,S=[],E=[],C=w[A],N=w[A+1],D=C;D<N;D++){var M=v[D];M===A?_=b[D]:M>A&&(S.push(b[D]),E.push(M))}if(a(_,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var I=n(x,_),V=0,K=E.length;V<K;V++){var F=E[V];f[F]=[s(f[F][0]||0,i(I,S[V]))]}y[A]=[I]}}return new o({data:y,size:[p,1]})}}),oV="usolve",r_e=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],n_e=X(oV,r_e,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:s,equalScalar:a,DenseMatrix:o}=r,l=f_({DenseMatrix:o});return e(oV,{"SparseMatrix, Array | Matrix":function(d,f){return c(d,f)},"DenseMatrix, Array | Matrix":function(d,f){return u(d,f)},"Array, Array | Matrix":function(d,f){var p=t(d),g=u(p,f);return g.valueOf()}});function u(h,d){d=l(h,d,!0);for(var f=d._data,p=h._size[0],g=h._size[1],b=[],v=h._data,w=g-1;w>=0;w--){var y=f[w][0]||0,A=void 0;if(a(y,0))A=0;else{var x=v[w][w];if(a(x,0))throw new Error("Linear system cannot be solved since matrix is singular");A=n(y,x);for(var _=w-1;_>=0;_--)f[_]=[s(f[_][0]||0,i(A,v[_][w]))]}b[w]=[A]}return new o({data:b,size:[p,1]})}function c(h,d){d=l(h,d,!0);for(var f=d._data,p=h._size[0],g=h._size[1],b=h._values,v=h._index,w=h._ptr,y=[],A=g-1;A>=0;A--){var x=f[A][0]||0;if(a(x,0))y[A]=[0];else{for(var _=0,S=[],E=[],C=w[A],N=w[A+1],D=N-1;D>=C;D--){var M=v[D];M===A?_=b[D]:M<A&&(S.push(b[D]),E.push(M))}if(a(_,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var I=n(x,_),V=0,K=E.length;V<K;V++){var F=E[V];f[F]=[s(f[F][0],i(I,S[V]))]}y[A]=[I]}}return new o({data:y,size:[p,1]})}}),lV="lsolveAll",i_e=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],s_e=X(lV,i_e,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:s,equalScalar:a,DenseMatrix:o}=r,l=f_({DenseMatrix:o});return e(lV,{"SparseMatrix, Array | Matrix":function(d,f){return c(d,f)},"DenseMatrix, Array | Matrix":function(d,f){return u(d,f)},"Array, Array | Matrix":function(d,f){var p=t(d),g=u(p,f);return g.map(b=>b.valueOf())}});function u(h,d){for(var f=[l(h,d,!0)._data.map(E=>E[0])],p=h._data,g=h._size[0],b=h._size[1],v=0;v<b;v++)for(var w=f.length,y=0;y<w;y++){var A=f[y];if(a(p[v][v],0))if(a(A[v],0)){if(y===0){var _=[...A];_[v]=1;for(var S=v+1;S<b;S++)_[S]=s(_[S],p[S][v]);f.push(_)}}else{if(y===0)return[];f.splice(y,1),y-=1,w-=1}else{A[v]=n(A[v],p[v][v]);for(var x=v+1;x<b;x++)A[x]=s(A[x],i(A[v],p[x][v]))}}return f.map(E=>new o({data:E.map(C=>[C]),size:[g,1]}))}function c(h,d){for(var f=[l(h,d,!0)._data.map(ue=>ue[0])],p=h._size[0],g=h._size[1],b=h._values,v=h._index,w=h._ptr,y=0;y<g;y++)for(var A=f.length,x=0;x<A;x++){for(var _=f[x],S=[],E=[],C=w[y],N=w[y+1],D=0,M=C;M<N;M++){var I=v[M];I===y?D=b[M]:I>y&&(S.push(b[M]),E.push(I))}if(a(D,0))if(a(_[y],0)){if(x===0){var U=[..._];U[y]=1;for(var j=0,G=E.length;j<G;j++){var ee=E[j];U[ee]=s(U[ee],S[j])}f.push(U)}}else{if(x===0)return[];f.splice(x,1),x-=1,A-=1}else{_[y]=n(_[y],D);for(var V=0,K=E.length;V<K;V++){var F=E[V];_[F]=s(_[F],i(_[y],S[V]))}}}return f.map(ue=>new o({data:ue.map(te=>[te]),size:[p,1]}))}}),uV="usolveAll",a_e=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],o_e=X(uV,a_e,r=>{var{typed:e,matrix:t,divideScalar:n,multiplyScalar:i,subtractScalar:s,equalScalar:a,DenseMatrix:o}=r,l=f_({DenseMatrix:o});return e(uV,{"SparseMatrix, Array | Matrix":function(d,f){return c(d,f)},"DenseMatrix, Array | Matrix":function(d,f){return u(d,f)},"Array, Array | Matrix":function(d,f){var p=t(d),g=u(p,f);return g.map(b=>b.valueOf())}});function u(h,d){for(var f=[l(h,d,!0)._data.map(E=>E[0])],p=h._data,g=h._size[0],b=h._size[1],v=b-1;v>=0;v--)for(var w=f.length,y=0;y<w;y++){var A=f[y];if(a(p[v][v],0))if(a(A[v],0)){if(y===0){var _=[...A];_[v]=1;for(var S=v-1;S>=0;S--)_[S]=s(_[S],p[S][v]);f.push(_)}}else{if(y===0)return[];f.splice(y,1),y-=1,w-=1}else{A[v]=n(A[v],p[v][v]);for(var x=v-1;x>=0;x--)A[x]=s(A[x],i(A[v],p[x][v]))}}return f.map(E=>new o({data:E.map(C=>[C]),size:[g,1]}))}function c(h,d){for(var f=[l(h,d,!0)._data.map(ue=>ue[0])],p=h._size[0],g=h._size[1],b=h._values,v=h._index,w=h._ptr,y=g-1;y>=0;y--)for(var A=f.length,x=0;x<A;x++){for(var _=f[x],S=[],E=[],C=w[y],N=w[y+1],D=0,M=N-1;M>=C;M--){var I=v[M];I===y?D=b[M]:I<y&&(S.push(b[M]),E.push(I))}if(a(D,0))if(a(_[y],0)){if(x===0){var U=[..._];U[y]=1;for(var j=0,G=E.length;j<G;j++){var ee=E[j];U[ee]=s(U[ee],S[j])}f.push(U)}}else{if(x===0)return[];f.splice(x,1),x-=1,A-=1}else{_[y]=n(_[y],D);for(var V=0,K=E.length;V<K;V++){var F=E[V];_[F]=s(_[F],i(_[y],S[V]))}}}return f.map(ue=>new o({data:ue.map(te=>[te]),size:[p,1]}))}}),l_e="matAlgo08xS0Sid",u_e=["typed","equalScalar"],YF=X(l_e,u_e,r=>{var{typed:e,equalScalar:t}=r;return function(i,s,a){var o=i._values,l=i._index,u=i._ptr,c=i._size,h=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=s._values,f=s._index,p=s._ptr,g=s._size,b=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==g.length)throw new Mt(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");if(!o||!d)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var v=c[0],w=c[1],y,A=t,x=0,_=a;typeof h=="string"&&h===b&&h!=="mixed"&&(y=h,A=e.find(t,[y,y]),x=e.convert(0,y),_=e.find(a,[y,y]));for(var S=[],E=[],C=[],N=[],D=[],M,I,V,K,F=0;F<w;F++){C[F]=E.length;var U=F+1;for(I=u[F],V=u[F+1],M=I;M<V;M++)K=l[M],D[K]=U,N[K]=o[M],E.push(K);for(I=p[F],V=p[F+1],M=I;M<V;M++)K=f[M],D[K]===U&&(N[K]=_(N[K],d[M]));for(M=C[F];M<E.length;){K=E[M];var j=N[K];A(j,x)?E.splice(M,1):(S.push(j),M++)}}return C[w]=E.length,i.createSparseMatrix({values:S,index:E,ptr:C,size:[v,w],datatype:h===i._datatype&&b===s._datatype?y:void 0})}}),QF=X("useMatrixForArrayScalar",["typed","matrix"],r=>{var{typed:e,matrix:t}=r;return{"Array, number":e.referTo("DenseMatrix, number",n=>(i,s)=>n(t(i),s).valueOf()),"Array, BigNumber":e.referTo("DenseMatrix, BigNumber",n=>(i,s)=>n(t(i),s).valueOf()),"number, Array":e.referTo("number, DenseMatrix",n=>(i,s)=>n(i,t(s)).valueOf()),"BigNumber, Array":e.referTo("BigNumber, DenseMatrix",n=>(i,s)=>n(i,t(s)).valueOf())}}),cV="leftShift",c_e=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],h_e=X(cV,c_e,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:s,concat:a}=r,o=zd({typed:e}),l=tl({typed:e,equalScalar:n}),u=YF({typed:e,equalScalar:n}),c=bp({typed:e,DenseMatrix:s}),h=Bi({typed:e,equalScalar:n}),d=bo({typed:e}),f=Ar({typed:e,matrix:t,concat:a}),p=QF({typed:e,matrix:t});return e(cV,{"number, number":yX,"BigNumber, BigNumber":M1e,"bigint, bigint":(g,b)=>g<<b,"SparseMatrix, number | BigNumber":e.referToSelf(g=>(b,v)=>n(v,0)?b.clone():h(b,v,g,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(g=>(b,v)=>n(v,0)?b.clone():d(b,v,g,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(g=>(b,v)=>n(b,0)?i(v.size(),v.storage()):c(v,b,g,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(g=>(b,v)=>n(b,0)?i(v.size(),v.storage()):d(v,b,g,!0))},p,f({SS:u,DS:o,SD:l}))}),hV="rightArithShift",d_e=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],f_e=X(hV,d_e,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:s,concat:a}=r,o=zd({typed:e}),l=tl({typed:e,equalScalar:n}),u=YF({typed:e,equalScalar:n}),c=bp({typed:e,DenseMatrix:s}),h=Bi({typed:e,equalScalar:n}),d=bo({typed:e}),f=Ar({typed:e,matrix:t,concat:a}),p=QF({typed:e,matrix:t});return e(hV,{"number, number":bX,"BigNumber, BigNumber":I1e,"bigint, bigint":(g,b)=>g>>b,"SparseMatrix, number | BigNumber":e.referToSelf(g=>(b,v)=>n(v,0)?b.clone():h(b,v,g,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(g=>(b,v)=>n(v,0)?b.clone():d(b,v,g,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(g=>(b,v)=>n(b,0)?i(v.size(),v.storage()):c(v,b,g,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(g=>(b,v)=>n(b,0)?i(v.size(),v.storage()):d(v,b,g,!0))},p,f({SS:u,DS:o,SD:l}))}),dV="rightLogShift",m_e=["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],p_e=X(dV,m_e,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,DenseMatrix:s,concat:a}=r,o=zd({typed:e}),l=tl({typed:e,equalScalar:n}),u=YF({typed:e,equalScalar:n}),c=bp({typed:e,DenseMatrix:s}),h=Bi({typed:e,equalScalar:n}),d=bo({typed:e}),f=Ar({typed:e,matrix:t,concat:a}),p=QF({typed:e,matrix:t});return e(dV,{"number, number":wX,"SparseMatrix, number | BigNumber":e.referToSelf(g=>(b,v)=>n(v,0)?b.clone():h(b,v,g,!1)),"DenseMatrix, number | BigNumber":e.referToSelf(g=>(b,v)=>n(v,0)?b.clone():d(b,v,g,!1)),"number | BigNumber, SparseMatrix":e.referToSelf(g=>(b,v)=>n(b,0)?i(v.size(),v.storage()):c(v,b,g,!0)),"number | BigNumber, DenseMatrix":e.referToSelf(g=>(b,v)=>n(b,0)?i(v.size(),v.storage()):d(v,b,g,!0))},p,f({SS:u,DS:o,SD:l}))}),fV="and",g_e=["typed","matrix","equalScalar","zeros","not","concat"],cY=X(fV,g_e,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,not:s,concat:a}=r,o=tl({typed:e,equalScalar:n}),l=uN({typed:e,equalScalar:n}),u=Bi({typed:e,equalScalar:n}),c=bo({typed:e}),h=Ar({typed:e,matrix:t,concat:a});return e(fV,{"number, number":OP,"Complex, Complex":function(f,p){return(f.re!==0||f.im!==0)&&(p.re!==0||p.im!==0)},"BigNumber, BigNumber":function(f,p){return!f.isZero()&&!p.isZero()&&!f.isNaN()&&!p.isNaN()},"bigint, bigint":OP,"Unit, Unit":e.referToSelf(d=>(f,p)=>d(f.value||0,p.value||0)),"SparseMatrix, any":e.referToSelf(d=>(f,p)=>s(p)?i(f.size(),f.storage()):u(f,p,d,!1)),"DenseMatrix, any":e.referToSelf(d=>(f,p)=>s(p)?i(f.size(),f.storage()):c(f,p,d,!1)),"any, SparseMatrix":e.referToSelf(d=>(f,p)=>s(f)?i(f.size(),f.storage()):u(p,f,d,!0)),"any, DenseMatrix":e.referToSelf(d=>(f,p)=>s(f)?i(f.size(),f.storage()):c(p,f,d,!0)),"Array, any":e.referToSelf(d=>(f,p)=>d(t(f),p).valueOf()),"any, Array":e.referToSelf(d=>(f,p)=>d(f,t(p)).valueOf())},h({SS:l,DS:o}))}),TT="compare",v_e=["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],y_e=X(TT,v_e,r=>{var{typed:e,config:t,equalScalar:n,matrix:i,BigNumber:s,Fraction:a,DenseMatrix:o,concat:l}=r,u=ss({typed:e}),c=lN({typed:e,equalScalar:n}),h=Yn({typed:e,DenseMatrix:o}),d=Ar({typed:e,matrix:i,concat:l}),f=iy({typed:e});return e(TT,b_e({typed:e,config:t}),{"boolean, boolean":function(g,b){return g===b?0:g>b?1:-1},"BigNumber, BigNumber":function(g,b){return yo(g,b,t.relTol,t.absTol)?new s(0):new s(g.cmp(b))},"bigint, bigint":function(g,b){return g===b?0n:g>b?1n:-1n},"Fraction, Fraction":function(g,b){return new a(g.compare(b))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},f,d({SS:c,DS:u,Ss:h}))}),b_e=X(TT,["typed","config"],r=>{var{typed:e,config:t}=r;return e(TT,{"number, number":function(i,s){return gi(i,s,t.relTol,t.absTol)?0:i>s?1:-1}})}),w_e=function r(e,t){var n=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,i=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,a=/^0x[0-9a-f]+$/i,o=/^0/,l=function(y){return r.insensitive&&(""+y).toLowerCase()||""+y},u=l(e).replace(i,"")||"",c=l(t).replace(i,"")||"",h=u.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=c.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=parseInt(u.match(a),16)||h.length!==1&&u.match(s)&&Date.parse(u),p=parseInt(c.match(a),16)||f&&c.match(s)&&Date.parse(c)||null,g,b;if(p){if(f<p)return-1;if(f>p)return 1}for(var v=0,w=Math.max(h.length,d.length);v<w;v++){if(g=!(h[v]||"").match(o)&&parseFloat(h[v])||h[v]||0,b=!(d[v]||"").match(o)&&parseFloat(d[v])||d[v]||0,isNaN(g)!==isNaN(b))return isNaN(g)?1:-1;if(typeof g!=typeof b&&(g+="",b+=""),g<b)return-1;if(g>b)return 1}return 0};const Vp=tC(w_e);var mV="compareNatural",x_e=["typed","compare"],__e=X(mV,x_e,r=>{var{typed:e,compare:t}=r,n=t.signatures["boolean,boolean"];return e(mV,{"any, any":i});function i(l,u){var c=dr(l),h=dr(u),d;if((c==="number"||c==="BigNumber"||c==="Fraction")&&(h==="number"||h==="BigNumber"||h==="Fraction"))return d=t(l,u),d.toString()!=="0"?d>0?1:-1:Vp(c,h);var f=["Array","DenseMatrix","SparseMatrix"];if(f.includes(c)||f.includes(h))return d=s(i,l,u),d!==0?d:Vp(c,h);if(c!==h)return Vp(c,h);if(c==="Complex")return A_e(l,u);if(c==="Unit")return l.equalBase(u)?i(l.value,u.value):a(i,l.formatUnits(),u.formatUnits());if(c==="boolean")return n(l,u);if(c==="string")return Vp(l,u);if(c==="Object")return o(i,l,u);if(c==="null"||c==="undefined")return 0;throw new TypeError('Unsupported type of value "'+c+'"')}function s(l,u,c){return Af(u)&&Af(c)?a(l,u.toJSON().values,c.toJSON().values):Af(u)?s(l,u.toArray(),c):Af(c)?s(l,u,c.toArray()):cT(u)?s(l,u.toJSON().data,c):cT(c)?s(l,u,c.toJSON().data):Array.isArray(u)?Array.isArray(c)?a(l,u,c):s(l,u,[c]):s(l,[u],c)}function a(l,u,c){for(var h=0,d=Math.min(u.length,c.length);h<d;h++){var f=l(u[h],c[h]);if(f!==0)return f}return u.length>c.length?1:u.length<c.length?-1:0}function o(l,u,c){var h=Object.keys(u),d=Object.keys(c);h.sort(Vp),d.sort(Vp);var f=a(l,h,d);if(f!==0)return f;for(var p=0;p<h.length;p++){var g=l(u[h[p]],c[d[p]]);if(g!==0)return g}return 0}});function A_e(r,e){return r.re>e.re?1:r.re<e.re?-1:r.im>e.im?1:r.im<e.im?-1:0}var pV="compareText",E_e=["typed","matrix","concat"];DP.signature="any, any";var S_e=X(pV,E_e,r=>{var{typed:e,matrix:t,concat:n}=r,i=Ar({typed:e,matrix:t,concat:n});return e(pV,DP,i({elop:DP,Ds:!0}))}),CT="equal",T_e=["typed","matrix","equalScalar","DenseMatrix","SparseMatrix"],C_e=X(CT,T_e,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:s,SparseMatrix:a}=r,o=ss({typed:e}),l=au({typed:e,SparseMatrix:a}),u=Yn({typed:e,DenseMatrix:i}),c=Ar({typed:e,matrix:t});return e(CT,N_e({typed:e,equalScalar:n}),c({elop:n,SS:l,DS:o,Ss:u}))}),N_e=X(CT,["typed","equalScalar"],r=>{var{typed:e,equalScalar:t}=r;return e(CT,{"any, any":function(i,s){return i===null?s===null:s===null?i===null:i===void 0?s===void 0:s===void 0?i===void 0:t(i,s)}})}),gV="equalText",D_e=["typed","compareText","isZero"],M_e=X(gV,D_e,r=>{var{typed:e,compareText:t,isZero:n}=r;return e(gV,{"any, any":function(s,a){return n(t(s,a))}})}),NT="smaller",I_e=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],P_e=X(NT,I_e,r=>{var{typed:e,config:t,bignumber:n,matrix:i,DenseMatrix:s,concat:a,SparseMatrix:o}=r,l=ss({typed:e}),u=au({typed:e,SparseMatrix:o}),c=Yn({typed:e,DenseMatrix:s}),h=Ar({typed:e,matrix:i,concat:a}),d=iy({typed:e});function f(p,g){return p.lt(g)&&!yo(p,g,t.relTol,t.absTol)}return e(NT,R_e({typed:e,config:t}),{"boolean, boolean":(p,g)=>p<g,"BigNumber, BigNumber":f,"bigint, bigint":(p,g)=>p<g,"Fraction, Fraction":(p,g)=>p.compare(g)===-1,"Fraction, BigNumber":function(g,b){return f(n(g),b)},"BigNumber, Fraction":function(g,b){return f(g,n(b))},"Complex, Complex":function(g,b){throw new TypeError("No ordering relation is defined for complex numbers")}},d,h({SS:u,DS:l,Ss:c}))}),R_e=X(NT,["typed","config"],r=>{var{typed:e,config:t}=r;return e(NT,{"number, number":function(i,s){return i<s&&!gi(i,s,t.relTol,t.absTol)}})}),DT="smallerEq",k_e=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],F_e=X(DT,k_e,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:s,SparseMatrix:a}=r,o=ss({typed:e}),l=au({typed:e,SparseMatrix:a}),u=Yn({typed:e,DenseMatrix:i}),c=Ar({typed:e,matrix:n,concat:s}),h=iy({typed:e});return e(DT,O_e({typed:e,config:t}),{"boolean, boolean":(d,f)=>d<=f,"BigNumber, BigNumber":function(f,p){return f.lte(p)||yo(f,p,t.relTol,t.absTol)},"bigint, bigint":(d,f)=>d<=f,"Fraction, Fraction":(d,f)=>d.compare(f)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,c({SS:l,DS:o,Ss:u}))}),O_e=X(DT,["typed","config"],r=>{var{typed:e,config:t}=r;return e(DT,{"number, number":function(i,s){return i<=s||gi(i,s,t.relTol,t.absTol)}})}),MT="larger",B_e=["typed","config","bignumber","matrix","DenseMatrix","concat","SparseMatrix"],L_e=X(MT,B_e,r=>{var{typed:e,config:t,bignumber:n,matrix:i,DenseMatrix:s,concat:a,SparseMatrix:o}=r,l=ss({typed:e}),u=au({typed:e,SparseMatrix:o}),c=Yn({typed:e,DenseMatrix:s}),h=Ar({typed:e,matrix:i,concat:a}),d=iy({typed:e});function f(p,g){return p.gt(g)&&!yo(p,g,t.relTol,t.absTol)}return e(MT,$_e({typed:e,config:t}),{"boolean, boolean":(p,g)=>p>g,"BigNumber, BigNumber":f,"bigint, bigint":(p,g)=>p>g,"Fraction, Fraction":(p,g)=>p.compare(g)===1,"Fraction, BigNumber":function(g,b){return f(n(g),b)},"BigNumber, Fraction":function(g,b){return f(g,n(b))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},d,h({SS:u,DS:l,Ss:c}))}),$_e=X(MT,["typed","config"],r=>{var{typed:e,config:t}=r;return e(MT,{"number, number":function(i,s){return i>s&&!gi(i,s,t.relTol,t.absTol)}})}),IT="largerEq",V_e=["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],U_e=X(IT,V_e,r=>{var{typed:e,config:t,matrix:n,DenseMatrix:i,concat:s,SparseMatrix:a}=r,o=ss({typed:e}),l=au({typed:e,SparseMatrix:a}),u=Yn({typed:e,DenseMatrix:i}),c=Ar({typed:e,matrix:n,concat:s}),h=iy({typed:e});return e(IT,z_e({typed:e,config:t}),{"boolean, boolean":(d,f)=>d>=f,"BigNumber, BigNumber":function(f,p){return f.gte(p)||yo(f,p,t.relTol,t.absTol)},"bigint, bigint":function(f,p){return f>=p},"Fraction, Fraction":(d,f)=>d.compare(f)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,c({SS:l,DS:o,Ss:u}))}),z_e=X(IT,["typed","config"],r=>{var{typed:e,config:t}=r;return e(IT,{"number, number":function(i,s){return i>=s||gi(i,s,t.relTol,t.absTol)}})}),vV="deepEqual",j_e=["typed","equal"],q_e=X(vV,j_e,r=>{var{typed:e,equal:t}=r;return e(vV,{"any, any":function(s,a){return n(s.valueOf(),a.valueOf())}});function n(i,s){if(Array.isArray(i))if(Array.isArray(s)){var a=i.length;if(a!==s.length)return!1;for(var o=0;o<a;o++)if(!n(i[o],s[o]))return!1;return!0}else return!1;else return Array.isArray(s)?!1:t(i,s)}}),PT="unequal",H_e=["typed","config","equalScalar","matrix","DenseMatrix","concat","SparseMatrix"],G_e=X(PT,H_e,r=>{var{typed:e,config:t,equalScalar:n,matrix:i,DenseMatrix:s,concat:a,SparseMatrix:o}=r,l=ss({typed:e}),u=au({typed:e,SparseMatrix:o}),c=Yn({typed:e,DenseMatrix:s}),h=Ar({typed:e,matrix:i,concat:a});return e(PT,W_e({typed:e,equalScalar:n}),h({elop:d,SS:u,DS:l,Ss:c}));function d(f,p){return!n(f,p)}}),W_e=X(PT,["typed","equalScalar"],r=>{var{typed:e,equalScalar:t}=r;return e(PT,{"any, any":function(i,s){return i===null?s!==null:s===null?i!==null:i===void 0?s!==void 0:s===void 0?i!==void 0:!t(i,s)}})}),yV="partitionSelect",K_e=["typed","isNumeric","isNaN","compare"],X_e=X(yV,K_e,r=>{var{typed:e,isNumeric:t,isNaN:n,compare:i}=r,s=i,a=(u,c)=>-i(u,c);return e(yV,{"Array | Matrix, number":function(c,h){return o(c,h,s)},"Array | Matrix, number, string":function(c,h,d){if(d==="asc")return o(c,h,s);if(d==="desc")return o(c,h,a);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":o});function o(u,c,h){if(!tt(c)||c<0)throw new Error("k must be a non-negative integer");if(ot(u)){var d=u.size();if(d.length>1)throw new Error("Only one dimensional matrices supported");return l(u.valueOf(),c,h)}if(Array.isArray(u))return l(u,c,h)}function l(u,c,h){if(c>=u.length)throw new Error("k out of bounds");for(var d=0;d<u.length;d++)if(t(u[d])&&n(u[d]))return u[d];for(var f=0,p=u.length-1;f<p;){for(var g=f,b=p,v=u[Math.floor(Math.random()*(p-f+1))+f];g<b;)if(h(u[g],v)>=0){var w=u[b];u[b]=u[g],u[g]=w,--b}else++g;h(u[g],v)>0&&--g,c<=g?p=g:f=g+1}return u[c]}}),bV="sort",Y_e=["typed","matrix","compare","compareNatural"],Q_e=X(bV,Y_e,r=>{var{typed:e,matrix:t,compare:n,compareNatural:i}=r,s=n,a=(c,h)=>-n(c,h);return e(bV,{Array:function(h){return l(h),h.sort(s)},Matrix:function(h){return u(h),t(h.toArray().sort(s),h.storage())},"Array, function":function(h,d){return l(h),h.sort(d)},"Matrix, function":function(h,d){return u(h),t(h.toArray().sort(d),h.storage())},"Array, string":function(h,d){return l(h),h.sort(o(d))},"Matrix, string":function(h,d){return u(h),t(h.toArray().sort(o(d)),h.storage())}});function o(c){if(c==="asc")return s;if(c==="desc")return a;if(c==="natural")return i;throw new Error('String "asc", "desc", or "natural" expected')}function l(c){if(vt(c).length!==1)throw new Error("One dimensional array expected")}function u(c){if(c.size().length!==1)throw new Error("One dimensional matrix expected")}}),wV="max",J_e=["typed","config","numeric","larger","isNaN"],hY=X(wV,J_e,r=>{var{typed:e,config:t,numeric:n,larger:i,isNaN:s}=r;return e(wV,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(u,c){return oN(u,c.valueOf(),a)},"...":function(u){if(ty(u))throw new TypeError("Scalar values expected in function max");return o(u)}});function a(l,u){try{return i(l,u)?l:u}catch(c){throw Ts(c,"max",u)}}function o(l){var u;if(Dd(l,function(c){try{(s(c)||u===void 0||i(c,u))&&(u=c)}catch(h){throw Ts(h,"max",c)}}),u===void 0)throw new Error("Cannot calculate max of an empty array");return typeof u=="string"&&(u=n(u,Vd(u,t))),u}}),xV="min",Z_e=["typed","config","numeric","smaller","isNaN"],dY=X(xV,Z_e,r=>{var{typed:e,config:t,numeric:n,smaller:i,isNaN:s}=r;return e(xV,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(u,c){return oN(u,c.valueOf(),a)},"...":function(u){if(ty(u))throw new TypeError("Scalar values expected in function min");return o(u)}});function a(l,u){try{return i(l,u)?l:u}catch(c){throw Ts(c,"min",u)}}function o(l){var u;if(Dd(l,function(c){try{(s(c)||u===void 0||i(c,u))&&(u=c)}catch(h){throw Ts(h,"min",c)}}),u===void 0)throw new Error("Cannot calculate min of an empty array");return typeof u=="string"&&(u=n(u,Vd(u,t))),u}}),eAe="ImmutableDenseMatrix",tAe=["smaller","DenseMatrix"],rAe=X(eAe,tAe,r=>{var{smaller:e,DenseMatrix:t}=r;function n(i,s){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(s&&!mn(s))throw new Error("Invalid datatype: "+s);if(ot(i)||cr(i)){var a=new t(i,s);this._data=a._data,this._size=a._size,this._datatype=a._datatype,this._min=null,this._max=null}else if(i&&cr(i.data)&&cr(i.size))this._data=i.data,this._size=i.size,this._datatype=i.datatype,this._min=typeof i.min<"u"?i.min:null,this._max=typeof i.max<"u"?i.max:null;else{if(i)throw new TypeError("Unsupported type of data ("+dr(i)+")");this._data=[],this._size=[0],this._datatype=s,this._min=null,this._max=null}}return n.prototype=new t,n.prototype.type="ImmutableDenseMatrix",n.prototype.isImmutableDenseMatrix=!0,n.prototype.subset=function(i){switch(arguments.length){case 1:{var s=t.prototype.subset.call(this,i);return ot(s)?new n({data:s._data,size:s._size,datatype:s._datatype}):s}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},n.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},n.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},n.prototype.clone=function(){return new n({data:gt(this._data),size:gt(this._size),datatype:this._datatype})},n.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.fromJSON=function(i){return new n(i)},n.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},n.prototype.min=function(){if(this._min===null){var i=null;this.forEach(function(s){(i===null||e(s,i))&&(i=s)}),this._min=i!==null?i:void 0}return this._min},n.prototype.max=function(){if(this._max===null){var i=null;this.forEach(function(s){(i===null||e(i,s))&&(i=s)}),this._max=i!==null?i:void 0}return this._max},n},{isClass:!0}),nAe="Index",iAe=["ImmutableDenseMatrix","getMatrixDataType"],sAe=X(nAe,iAe,r=>{var{ImmutableDenseMatrix:e,getMatrixDataType:t}=r;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var s=0,a=arguments.length;s<a;s++){var o=s<0||arguments.length<=s?void 0:arguments[s],l=cr(o),u=ot(o),c=typeof o,h=null;if($F(o))this._dimensions.push(o),this._isScalar=!1;else if(l||u){var d=void 0;this._isScalar=!1,t(o)==="boolean"?(l&&(d=i(_V(o).valueOf())),u&&(d=i(_V(o._data).valueOf())),h=o.valueOf().length):d=i(o.valueOf()),this._dimensions.push(d)}else if(c==="number")this._dimensions.push(o);else if(c==="bigint")this._dimensions.push(Number(o));else if(c==="string")this._dimensions.push(o);else throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");this._sourceSize.push(h)}}n.prototype.type="Index",n.prototype.isIndex=!0;function i(s){for(var a=0,o=s.length;a<o;a++)if(!it(s[a])||!tt(s[a]))throw new TypeError("Index parameters must be positive integer numbers");var l=new e;return l._data=s,l._size=[s.length],l}return n.prototype.clone=function(){var s=new n;return s._dimensions=gt(this._dimensions),s._isScalar=this._isScalar,s._sourceSize=this._sourceSize,s},n.create=function(s){var a=new n;return n.apply(a,s),a},n.prototype.size=function(){for(var s=[],a=0,o=this._dimensions.length;a<o;a++){var l=this._dimensions[a];s[a]=mn(l)||it(l)?1:l.size()[0]}return s},n.prototype.max=function(){for(var s=[],a=0,o=this._dimensions.length;a<o;a++){var l=this._dimensions[a];s[a]=mn(l)||it(l)?l:l.max()}return s},n.prototype.min=function(){for(var s=[],a=0,o=this._dimensions.length;a<o;a++){var l=this._dimensions[a];s[a]=mn(l)||it(l)?l:l.min()}return s},n.prototype.forEach=function(s){for(var a=0,o=this._dimensions.length;a<o;a++)s(this._dimensions[a],a,this)},n.prototype.dimension=function(s){var a;return it(s)&&(a=this._dimensions[s])!==null&&a!==void 0?a:null},n.prototype.isObjectProperty=function(){return this._dimensions.length===1&&mn(this._dimensions[0])},n.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},n.prototype.isScalar=function(){return this._isScalar},n.prototype.toArray=function(){for(var s=[],a=0,o=this._dimensions.length;a<o;a++){var l=this._dimensions[a];s.push(mn(l)||it(l)?l:l.toArray())}return s},n.prototype.valueOf=n.prototype.toArray,n.prototype.toString=function(){for(var s=[],a=0,o=this._dimensions.length;a<o;a++){var l=this._dimensions[a];mn(l)?s.push(JSON.stringify(l)):s.push(l.toString())}return"["+s.join(", ")+"]"},n.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},n.fromJSON=function(s){return n.create(s.dimensions)},n},{isClass:!0});function _V(r){var e=[];return r.forEach((t,n)=>{t&&e.push(n)}),e}var aAe="FibonacciHeap",oAe=["smaller","larger"],lAe=X(aAe,oAe,r=>{var{smaller:e,larger:t}=r,n=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(c,h){var d={key:c,value:h,degree:0};if(this._minimum){var f=this._minimum;d.left=f,d.right=f.right,f.right=d,d.right.left=d,e(c,f.key)&&(this._minimum=d)}else d.left=d,d.right=d,this._minimum=d;return this._size++,d},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return this._size===0},i.prototype.extractMinimum=function(){var c=this._minimum;if(c===null)return c;for(var h=this._minimum,d=c.degree,f=c.child;d>0;){var p=f.right;f.left.right=f.right,f.right.left=f.left,f.left=h,f.right=h.right,h.right=f,f.right.left=f,f.parent=null,f=p,d--}return c.left.right=c.right,c.right.left=c.left,c===c.right?h=null:(h=c.right,h=u(h,this._size)),this._size--,this._minimum=h,c},i.prototype.remove=function(c){this._minimum=s(this._minimum,c,-1),this.extractMinimum()};function s(c,h,d){h.key=d;var f=h.parent;return f&&e(h.key,f.key)&&(a(c,h,f),o(c,f)),e(h.key,c.key)&&(c=h),c}function a(c,h,d){h.left.right=h.right,h.right.left=h.left,d.degree--,d.child===h&&(d.child=h.right),d.degree===0&&(d.child=null),h.left=c,h.right=c.right,c.right=h,h.right.left=h,h.parent=null,h.mark=!1}function o(c,h){var d=h.parent;d&&(h.mark?(a(c,h,d),o(d)):h.mark=!0)}var l=function(h,d){h.left.right=h.right,h.right.left=h.left,h.parent=d,d.child?(h.left=d.child,h.right=d.child.right,d.child.right=h,h.right.left=h):(d.child=h,h.right=h,h.left=h),d.degree++,h.mark=!1};function u(c,h){var d=Math.floor(Math.log(h)*n)+1,f=new Array(d),p=0,g=c;if(g)for(p++,g=g.right;g!==c;)p++,g=g.right;for(var b;p>0;){for(var v=g.degree,w=g.right;b=f[v],!!b;){if(t(g.key,b.key)){var y=b;b=g,g=y}l(b,g),f[v]=null,v++}f[v]=g,g=w,p--}c=null;for(var A=0;A<d;A++)b=f[A],b&&(c?(b.left.right=b.right,b.right.left=b.left,b.left=c,b.right=c.right,c.right=b,b.right.left=b,e(b.key,c.key)&&(c=b)):c=b);return c}return i},{isClass:!0}),uAe="Spa",cAe=["addScalar","equalScalar","FibonacciHeap"],hAe=X(uAe,cAe,r=>{var{addScalar:e,equalScalar:t,FibonacciHeap:n}=r;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new n}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(s,a){if(this._values[s])this._values[s].value=a;else{var o=this._heap.insert(s,a);this._values[s]=o}},i.prototype.get=function(s){var a=this._values[s];return a?a.value:0},i.prototype.accumulate=function(s,a){var o=this._values[s];o?o.value=e(o.value,a):(o=this._heap.insert(s,a),this._values[s]=o)},i.prototype.forEach=function(s,a,o){var l=this._heap,u=this._values,c=[],h=l.extractMinimum();for(h&&c.push(h);h&&h.key<=a;)h.key>=s&&(t(h.value,0)||o(h.key,h.value,this)),h=l.extractMinimum(),h&&c.push(h);for(var d=0;d<c.length;d++){var f=c[d];h=l.insert(f.key,f.value),u[h.key]=h}},i.prototype.swap=function(s,a){var o=this._values[s],l=this._values[a];if(!o&&l)o=this._heap.insert(s,l.value),this._heap.remove(l),this._values[s]=o,this._values[a]=void 0;else if(o&&!l)l=this._heap.insert(a,o.value),this._heap.remove(o),this._values[a]=l,this._values[s]=void 0;else if(o&&l){var u=o.value;o.value=l.value,l.value=u}},i},{isClass:!0});function dAe(r){var e=0,t=1,n=Object.create(null),i=Object.create(null),s=0,a=function(l){var u=i[l];if(u&&(delete n[u],delete i[l],--e,t===u)){if(!e){s=0,t=1;return}for(;!Object.prototype.hasOwnProperty.call(n,++t););}};return r=Math.abs(r),{hit:function(l){var u=i[l],c=++s;if(n[c]=l,i[l]=c,!u)return++e,e<=r?void 0:(l=n[t],a(l),l);if(delete n[u],t===u)for(;!Object.prototype.hasOwnProperty.call(n,++t););},delete:a,clear:function(){e=s=0,t=1,n=Object.create(null),i=Object.create(null)}}}function m_(r){var{hasher:e,limit:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t=t??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function n(){typeof n.cache!="object"&&(n.cache={values:new Map,lru:dAe(t||Number.POSITIVE_INFINITY)});for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=e(i);if(n.cache.values.has(a))return n.cache.lru.hit(a),n.cache.values.get(a);var o=r.apply(r,i);return n.cache.values.set(a,o),n.cache.values.delete(n.cache.lru.hit(a)),o}}var fAe=m_(function(r){return new r(1).exp()},{hasher:cN}),mAe=m_(function(r){return new r(1).plus(new r(5).sqrt()).div(2)},{hasher:cN}),JF=m_(function(r){return r.acos(-1)},{hasher:cN}),pAe=m_(function(r){return JF(r).times(2)},{hasher:cN});function cN(r){return r[0].precision}function AV(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Z2(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?AV(Object(t),!0).forEach(function(n){Fn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):AV(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var gAe="Unit",vAe=["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],yAe=X(gAe,vAe,r=>{var{on:e,config:t,addScalar:n,subtractScalar:i,multiplyScalar:s,divideScalar:a,pow:o,abs:l,fix:u,round:c,equal:h,isNumeric:d,format:f,number:p,Complex:g,BigNumber:b,Fraction:v}=r,w=p,y=!1,A=!0;function x(Z,ce){if(!(this instanceof x))throw new Error("Constructor must be called with the new operator");if(!(Z==null||d(Z)||uc(Z)))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=y,this.skipAutomaticSimplification=A,ce===void 0)this.units=[],this.dimensions=Y.map(Q=>0);else if(typeof ce=="string"){var q=x.parse(ce);this.units=q.units,this.dimensions=q.dimensions}else if(_a(ce)&&ce.value===null)this.fixPrefix=ce.fixPrefix,this.skipAutomaticSimplification=ce.skipAutomaticSimplification,this.dimensions=ce.dimensions.slice(0),this.units=ce.units.map(Q=>An({},Q));else throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.value=this._normalize(Z)}Object.defineProperty(x,"name",{value:"Unit"}),x.prototype.constructor=x,x.prototype.type="Unit",x.prototype.isUnit=!0;var _,S,E;function C(){for(;E===" "||E==="	";)M()}function N(Z){return Z>="0"&&Z<="9"||Z==="."}function D(Z){return Z>="0"&&Z<="9"}function M(){S++,E=_.charAt(S)}function I(Z){S=Z,E=_.charAt(S)}function V(){var Z="",ce=S;if(E==="+"?M():E==="-"&&(Z+=E,M()),!N(E))return I(ce),null;if(E==="."){if(Z+=E,M(),!D(E))return I(ce),null}else{for(;D(E);)Z+=E,M();E==="."&&(Z+=E,M())}for(;D(E);)Z+=E,M();if(E==="E"||E==="e"){var q="",Q=S;if(q+=E,M(),(E==="+"||E==="-")&&(q+=E,M()),!D(E))return I(Q),Z;for(Z=Z+q;D(E);)Z+=E,M()}return Z}function K(){for(var Z="";D(E)||x.isValidAlpha(E);)Z+=E,M();var ce=Z.charAt(0);return x.isValidAlpha(ce)?Z:null}function F(Z){return E===Z?(M(),Z):null}x.parse=function(Z,ce){if(ce=ce||{},_=Z,S=-1,E="",typeof _!="string")throw new TypeError("Invalid argument in Unit.parse, string expected");var q=new x;q.units=[];var Q=1,ae=!1;M(),C();var de=V(),ge=null;if(de){if(t.number==="BigNumber")ge=new b(de);else if(t.number==="Fraction")try{ge=new v(de)}catch{ge=parseFloat(de)}else ge=parseFloat(de);C(),F("*")?(Q=1,ae=!0):F("/")&&(Q=-1,ae=!0)}for(var pe=[],Ne=1;;){for(C();E==="(";)pe.push(Q),Ne*=Q,Q=1,M(),C();var Ee=void 0;if(E){var Oe=E;if(Ee=K(),Ee===null)throw new SyntaxError('Unexpected "'+Oe+'" in "'+_+'" at index '+S.toString())}else break;var Se=U(Ee);if(Se===null)throw new SyntaxError('Unit "'+Ee+'" not found.');var et=Q*Ne;if(C(),F("^")){C();var Ct=V();if(Ct===null)throw new SyntaxError('In "'+Z+'", "^" must be followed by a floating-point number');et*=Ct}q.units.push({unit:Se.unit,prefix:Se.prefix,power:et});for(var zt=0;zt<Y.length;zt++)q.dimensions[zt]+=(Se.unit.dimensions[zt]||0)*et;for(C();E===")";){if(pe.length===0)throw new SyntaxError('Unmatched ")" in "'+_+'" at index '+S.toString());Ne/=pe.pop(),M(),C()}if(ae=!1,F("*")?(Q=1,ae=!0):F("/")?(Q=-1,ae=!0):Q=1,Se.unit.base){var lt=Se.unit.base.key;le.auto[lt]={unit:Se.unit,prefix:Se.prefix}}}if(C(),E)throw new SyntaxError('Could not parse: "'+Z+'"');if(ae)throw new SyntaxError('Trailing characters: "'+Z+'"');if(pe.length!==0)throw new SyntaxError('Unmatched "(" in "'+_+'"');if(q.units.length===0&&!ce.allowNoUnits)throw new SyntaxError('"'+Z+'" contains no units');return q.value=ge!==void 0?q._normalize(ge):null,q},x.prototype.clone=function(){var Z=new x;Z.fixPrefix=this.fixPrefix,Z.skipAutomaticSimplification=this.skipAutomaticSimplification,Z.value=gt(this.value),Z.dimensions=this.dimensions.slice(0),Z.units=[];for(var ce=0;ce<this.units.length;ce++){Z.units[ce]={};for(var q in this.units[ce])Je(this.units[ce],q)&&(Z.units[ce][q]=this.units[ce][q])}return Z},x.prototype.valueType=function(){return dr(this.value)},x.prototype._isDerived=function(){return this.units.length===0?!1:this.units.length>1||Math.abs(this.units[0].power-1)>1e-15},x.prototype._normalize=function(Z){if(Z==null||this.units.length===0)return Z;for(var ce=Z,q=x._getNumberConverter(dr(Z)),Q=0;Q<this.units.length;Q++){var ae=q(this.units[Q].unit.value),de=q(this.units[Q].prefix.value),ge=q(this.units[Q].power);ce=s(ce,o(s(ae,de),ge))}return ce},x.prototype._denormalize=function(Z,ce){if(Z==null||this.units.length===0)return Z;for(var q=Z,Q=x._getNumberConverter(dr(Z)),ae=0;ae<this.units.length;ae++){var de=Q(this.units[ae].unit.value),ge=Q(this.units[ae].prefix.value),pe=Q(this.units[ae].power);q=a(q,o(s(de,ge),pe))}return q};var U=m_(Z=>{if(Je(W,Z)){var ce=W[Z],q=ce.prefixes[""];return{unit:ce,prefix:q}}for(var Q in W)if(Je(W,Q)&&b0e(Z,Q)){var ae=W[Q],de=Z.length-Q.length,ge=Z.substring(0,de),pe=Je(ae.prefixes,ge)?ae.prefixes[ge]:void 0;if(pe!==void 0)return{unit:ae,prefix:pe}}return null},{hasher:Z=>Z[0],limit:100});x.isValuelessUnit=function(Z){return U(Z)!==null},x.prototype.hasBase=function(Z){if(typeof Z=="string"&&(Z=H[Z]),!Z)return!1;for(var ce=0;ce<Y.length;ce++)if(Math.abs((this.dimensions[ce]||0)-(Z.dimensions[ce]||0))>1e-12)return!1;return!0},x.prototype.equalBase=function(Z){for(var ce=0;ce<Y.length;ce++)if(Math.abs((this.dimensions[ce]||0)-(Z.dimensions[ce]||0))>1e-12)return!1;return!0},x.prototype.equals=function(Z){return this.equalBase(Z)&&h(this.value,Z.value)},x.prototype.multiply=function(Z){for(var ce=this.clone(),q=_a(Z)?Z:new x(Z),Q=0;Q<Y.length;Q++)ce.dimensions[Q]=(this.dimensions[Q]||0)+(q.dimensions[Q]||0);for(var ae=0;ae<q.units.length;ae++){var de=Z2({},q.units[ae]);ce.units.push(de)}if(this.value!==null||q.value!==null){var ge=this.value===null?this._normalize(G(q.value)):this.value,pe=q.value===null?q._normalize(G(this.value)):q.value;ce.value=s(ge,pe)}else ce.value=null;return _a(Z)&&(ce.skipAutomaticSimplification=!1),j(ce)},x.prototype.divideInto=function(Z){return new x(Z).divide(this)},x.prototype.divide=function(Z){for(var ce=this.clone(),q=_a(Z)?Z:new x(Z),Q=0;Q<Y.length;Q++)ce.dimensions[Q]=(this.dimensions[Q]||0)-(q.dimensions[Q]||0);for(var ae=0;ae<q.units.length;ae++){var de=Z2(Z2({},q.units[ae]),{},{power:-q.units[ae].power});ce.units.push(de)}if(this.value!==null||q.value!==null){var ge=this.value===null?this._normalize(G(q.value)):this.value,pe=q.value===null?q._normalize(G(this.value)):q.value;ce.value=a(ge,pe)}else ce.value=null;return _a(Z)&&(ce.skipAutomaticSimplification=!1),j(ce)},x.prototype.pow=function(Z){for(var ce=this.clone(),q=0;q<Y.length;q++)ce.dimensions[q]=(this.dimensions[q]||0)*Z;for(var Q=0;Q<ce.units.length;Q++)ce.units[Q].power*=Z;return ce.value!==null?ce.value=o(ce.value,Z):ce.value=null,ce.skipAutomaticSimplification=!1,j(ce)};function j(Z){return Z.equalBase(H.NONE)&&Z.value!==null&&!t.predictable?Z.value:Z}function G(Z){var ce=x._getNumberConverter(dr(Z));return ce(1)}x.prototype.abs=function(){var Z=this.clone();if(Z.value!==null)if(Z._isDerived()||Z.units.length===0||Z.units[0].unit.offset===0)Z.value=l(Z.value);else{var ce=Z._numberConverter(),q=ce(Z.units[0].unit.value),Q=ce(Z.units[0].unit.offset),ae=s(q,Q);Z.value=i(l(n(Z.value,ae)),ae)}for(var de in Z.units)(Z.units[de].unit.name==="VA"||Z.units[de].unit.name==="VAR")&&(Z.units[de].unit=W.W);return Z},x.prototype.to=function(Z){var ce=this.value===null?this._normalize(1):this.value,q;if(typeof Z=="string")q=x.parse(Z);else if(_a(Z))q=Z.clone();else throw new Error("String or Unit expected as parameter");if(!this.equalBase(q))throw new Error("Units do not match ('".concat(q.toString(),"' != '").concat(this.toString(),"')"));if(q.value!==null)throw new Error("Cannot convert to a unit with a value");if(this.value===null||this._isDerived()||this.units.length===0||q.units.length===0||this.units[0].unit.offset===q.units[0].unit.offset)q.value=gt(ce);else{var Q=x._getNumberConverter(dr(ce)),ae=this.units[0].unit.value,de=this.units[0].unit.offset,ge=s(ae,de),pe=q.units[0].unit.value,Ne=q.units[0].unit.offset,Ee=s(pe,Ne);q.value=n(ce,Q(i(ge,Ee)))}return q.fixPrefix=!0,q.skipAutomaticSimplification=!0,q},x.prototype.toNumber=function(Z){return w(this.toNumeric(Z))},x.prototype.toNumeric=function(Z){var ce;return Z?ce=this.to(Z):ce=this.clone(),ce._isDerived()||ce.units.length===0?ce._denormalize(ce.value):ce._denormalize(ce.value,ce.units[0].prefix.value)},x.prototype.toString=function(){return this.format()},x.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix,skipSimp:this.skipAutomaticSimplification}},x.fromJSON=function(Z){var ce,q,Q,ae=new x(Z.value,(ce=Z.unit)!==null&&ce!==void 0?ce:void 0);return ae.fixPrefix=(q=Z.fixPrefix)!==null&&q!==void 0?q:y,ae.skipAutomaticSimplification=(Q=Z.skipSimp)!==null&&Q!==void 0?Q:A,ae},x.prototype.valueOf=x.prototype.toString,x.prototype.simplify=function(){var Z=this.clone(),ce=[],q;for(var Q in ve)if(Je(ve,Q)&&Z.hasBase(H[Q])){q=Q;break}if(q==="NONE")Z.units=[];else{var ae;if(q&&Je(ve,q)&&(ae=ve[q]),ae)Z.units=[{unit:ae.unit,prefix:ae.prefix,power:1}];else{for(var de=!1,ge=0;ge<Y.length;ge++){var pe=Y[ge];Math.abs(Z.dimensions[ge]||0)>1e-12&&(Je(ve,pe)?ce.push({unit:ve[pe].unit,prefix:ve[pe].prefix,power:Z.dimensions[ge]||0}):de=!0)}ce.length<Z.units.length&&!de&&(Z.units=ce)}}return Z},x.prototype.toSI=function(){for(var Z=this.clone(),ce=[],q=0;q<Y.length;q++){var Q=Y[q];if(Math.abs(Z.dimensions[q]||0)>1e-12)if(Je(le.si,Q))ce.push({unit:le.si[Q].unit,prefix:le.si[Q].prefix,power:Z.dimensions[q]||0});else throw new Error("Cannot express custom unit "+Q+" in SI units")}return Z.units=ce,Z.fixPrefix=!0,Z.skipAutomaticSimplification=!0,this.value!==null?(Z.value=null,this.to(Z)):Z},x.prototype.formatUnits=function(){for(var Z="",ce="",q=0,Q=0,ae=0;ae<this.units.length;ae++)this.units[ae].power>0?(q++,Z+=" "+this.units[ae].prefix.name+this.units[ae].unit.name,Math.abs(this.units[ae].power-1)>1e-15&&(Z+="^"+this.units[ae].power)):this.units[ae].power<0&&Q++;if(Q>0)for(var de=0;de<this.units.length;de++)this.units[de].power<0&&(q>0?(ce+=" "+this.units[de].prefix.name+this.units[de].unit.name,Math.abs(this.units[de].power+1)>1e-15&&(ce+="^"+-this.units[de].power)):(ce+=" "+this.units[de].prefix.name+this.units[de].unit.name,ce+="^"+this.units[de].power));Z=Z.substr(1),ce=ce.substr(1),q>1&&Q>0&&(Z="("+Z+")"),Q>1&&q>0&&(ce="("+ce+")");var ge=Z;return q>0&&Q>0&&(ge+=" / "),ge+=ce,ge},x.prototype.toBest=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Z&&!Array.isArray(Z))throw new Error("Invalid unit type. Expected string or Unit.");var q=this.units[0].unit.prefixes;if(Z&&Z.length>0){var Q=Z.map(ge=>{var pe=null;if(typeof ge=="string"){if(pe=x.parse(ge),!pe)throw new Error("Invalid unit type. Expected compatible string or Unit.")}else if(!_a(ge))throw new Error("Invalid unit type. Expected compatible string or Unit.");pe===null&&(pe=ge.clone());try{return this.to(pe.formatUnits()),pe}catch{throw new Error("Invalid unit type. Expected compatible string or Unit.")}}),ae=Q.map(ge=>ge.units[0].prefix);this.units[0].unit.prefixes=ae.reduce((ge,pe)=>(ge[pe.name]=pe,ge),{}),this.units[0].prefix=ae[0]}var de=ee(this,ce).simp;return this.units[0].unit.prefixes=q,de.fixPrefix=!0,de},x.prototype.format=function(Z){var{simp:ce,valueStr:q,unitStr:Q}=ee(this,Z),ae=q;return ce.value&&uc(ce.value)&&(ae="("+ae+")"),Q.length>0&&ae.length>0&&(ae+=" "),ae+=Q,ae};function ee(Z){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},q=Z.skipAutomaticSimplification||Z.value===null?Z.clone():Z.simplify();ue(q),te(q,ce.offset);var Q=q._denormalize(q.value),ae=q.value!==null?f(Q,ce||{}):"",de=q.formatUnits();return{simp:q,valueStr:ae,unitStr:de}}function ue(Z){var ce=!1;typeof Z.value<"u"&&Z.value!==null&&uc(Z.value)&&(ce=Math.abs(Z.value.re)<1e-14);for(var q in Z.units)Je(Z.units,q)&&Z.units[q].unit&&(Z.units[q].unit.name==="VA"&&ce?Z.units[q].unit=W.VAR:Z.units[q].unit.name==="VAR"&&!ce&&(Z.units[q].unit=W.VA))}function te(Z,ce){Z.units.length===1&&!Z.fixPrefix&&Math.abs(Z.units[0].power-Math.round(Z.units[0].power))<1e-14&&(Z.units[0].prefix=Z._bestPrefix(ce))}x.prototype._bestPrefix=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1.2;if(this.units.length!==1)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var ce=this.value!==null?l(this.value):0,q=l(this.units[0].unit.value),Q=this.units[0].prefix;if(ce===0)return Q;var ae=this.units[0].power,de=Math.log(ce/Math.pow(Q.value*q,ae))/Math.LN10-Z;if(de>-2.200001&&de<1.800001)return Q;de=Math.abs(de);var ge=this.units[0].unit.prefixes;for(var pe in ge)if(Je(ge,pe)){var Ne=ge[pe];if(Ne.scientific){var Ee=Math.abs(Math.log(ce/Math.pow(Ne.value*q,ae))/Math.LN10-Z);(Ee<de||Ee===de&&Ne.name.length<Q.name.length)&&(Q=Ne,de=Ee)}}return Q},x.prototype.splitUnit=function(Z){for(var ce=this.clone(),q=[],Q=0;Q<Z.length&&(ce=ce.to(Z[Q]),Q!==Z.length-1);Q++){var ae=ce.toNumeric(),de=c(ae),ge=void 0,pe=h(de,ae);pe?ge=de:ge=u(ce.toNumeric());var Ne=new x(ge,Z[Q].toString());q.push(Ne),ce=i(ce,Ne)}for(var Ee=0,Oe=0;Oe<q.length;Oe++)Ee=n(Ee,q[Oe].value);return h(Ee,this.value)&&(ce.value=0),q.push(ce),q};var R={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};R.SHORTLONG=An({},R.SHORT,R.LONG),R.BINARY_SHORT=An({},R.BINARY_SHORT_SI,R.BINARY_SHORT_IEC),R.BINARY_LONG=An({},R.BINARY_LONG_SI,R.BINARY_LONG_IEC);var Y=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],H={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var he in H)Je(H,he)&&(H[he].key=he);var fe={},re={name:"",base:fe,value:1,offset:0,dimensions:Y.map(Z=>0)},W={meter:{name:"meter",base:H.LENGTH,prefixes:R.LONG,value:1,offset:0},inch:{name:"inch",base:H.LENGTH,prefixes:R.NONE,value:.0254,offset:0},foot:{name:"foot",base:H.LENGTH,prefixes:R.NONE,value:.3048,offset:0},yard:{name:"yard",base:H.LENGTH,prefixes:R.NONE,value:.9144,offset:0},mile:{name:"mile",base:H.LENGTH,prefixes:R.NONE,value:1609.344,offset:0},link:{name:"link",base:H.LENGTH,prefixes:R.NONE,value:.201168,offset:0},rod:{name:"rod",base:H.LENGTH,prefixes:R.NONE,value:5.0292,offset:0},chain:{name:"chain",base:H.LENGTH,prefixes:R.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:H.LENGTH,prefixes:R.NONE,value:1e-10,offset:0},m:{name:"m",base:H.LENGTH,prefixes:R.SHORT,value:1,offset:0},in:{name:"in",base:H.LENGTH,prefixes:R.NONE,value:.0254,offset:0},ft:{name:"ft",base:H.LENGTH,prefixes:R.NONE,value:.3048,offset:0},yd:{name:"yd",base:H.LENGTH,prefixes:R.NONE,value:.9144,offset:0},mi:{name:"mi",base:H.LENGTH,prefixes:R.NONE,value:1609.344,offset:0},li:{name:"li",base:H.LENGTH,prefixes:R.NONE,value:.201168,offset:0},rd:{name:"rd",base:H.LENGTH,prefixes:R.NONE,value:5.02921,offset:0},ch:{name:"ch",base:H.LENGTH,prefixes:R.NONE,value:20.1168,offset:0},mil:{name:"mil",base:H.LENGTH,prefixes:R.NONE,value:254e-7,offset:0},m2:{name:"m2",base:H.SURFACE,prefixes:R.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:H.SURFACE,prefixes:R.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:H.SURFACE,prefixes:R.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:H.SURFACE,prefixes:R.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:H.SURFACE,prefixes:R.NONE,value:2589988110336e-6,offset:0},sqrd:{name:"sqrd",base:H.SURFACE,prefixes:R.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:H.SURFACE,prefixes:R.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:H.SURFACE,prefixes:R.NONE,value:64516e-14,offset:0},acre:{name:"acre",base:H.SURFACE,prefixes:R.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:H.SURFACE,prefixes:R.NONE,value:1e4,offset:0},m3:{name:"m3",base:H.VOLUME,prefixes:R.CUBIC,value:1,offset:0},L:{name:"L",base:H.VOLUME,prefixes:R.SHORT,value:.001,offset:0},l:{name:"l",base:H.VOLUME,prefixes:R.SHORT,value:.001,offset:0},litre:{name:"litre",base:H.VOLUME,prefixes:R.LONG,value:.001,offset:0},cuin:{name:"cuin",base:H.VOLUME,prefixes:R.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:H.VOLUME,prefixes:R.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:H.VOLUME,prefixes:R.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:H.VOLUME,prefixes:R.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:H.VOLUME,prefixes:R.NONE,value:15e-6,offset:0},drop:{name:"drop",base:H.VOLUME,prefixes:R.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:H.VOLUME,prefixes:R.NONE,value:5e-8,offset:0},minim:{name:"minim",base:H.VOLUME,prefixes:R.NONE,value:61611519921875e-21,offset:0},fluiddram:{name:"fluiddram",base:H.VOLUME,prefixes:R.NONE,value:36966911953125e-19,offset:0},fluidounce:{name:"fluidounce",base:H.VOLUME,prefixes:R.NONE,value:295735295625e-16,offset:0},gill:{name:"gill",base:H.VOLUME,prefixes:R.NONE,value:.00011829411825,offset:0},cc:{name:"cc",base:H.VOLUME,prefixes:R.NONE,value:1e-6,offset:0},cup:{name:"cup",base:H.VOLUME,prefixes:R.NONE,value:.0002365882365,offset:0},pint:{name:"pint",base:H.VOLUME,prefixes:R.NONE,value:.000473176473,offset:0},quart:{name:"quart",base:H.VOLUME,prefixes:R.NONE,value:.000946352946,offset:0},gallon:{name:"gallon",base:H.VOLUME,prefixes:R.NONE,value:.003785411784,offset:0},beerbarrel:{name:"beerbarrel",base:H.VOLUME,prefixes:R.NONE,value:.117347765304,offset:0},oilbarrel:{name:"oilbarrel",base:H.VOLUME,prefixes:R.NONE,value:.158987294928,offset:0},hogshead:{name:"hogshead",base:H.VOLUME,prefixes:R.NONE,value:.238480942392,offset:0},g:{name:"g",base:H.MASS,prefixes:R.SHORT,value:.001,offset:0},gram:{name:"gram",base:H.MASS,prefixes:R.LONG,value:.001,offset:0},ton:{name:"ton",base:H.MASS,prefixes:R.SHORT,value:907.18474,offset:0},t:{name:"t",base:H.MASS,prefixes:R.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:H.MASS,prefixes:R.LONG,value:1e3,offset:0},grain:{name:"grain",base:H.MASS,prefixes:R.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:H.MASS,prefixes:R.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:H.MASS,prefixes:R.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:H.MASS,prefixes:R.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:H.MASS,prefixes:R.NONE,value:45.359237,offset:0},stick:{name:"stick",base:H.MASS,prefixes:R.NONE,value:.115,offset:0},stone:{name:"stone",base:H.MASS,prefixes:R.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:H.MASS,prefixes:R.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:H.MASS,prefixes:R.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:H.MASS,prefixes:R.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:H.MASS,prefixes:R.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:H.MASS,prefixes:R.NONE,value:45.359237,offset:0},s:{name:"s",base:H.TIME,prefixes:R.SHORT,value:1,offset:0},min:{name:"min",base:H.TIME,prefixes:R.NONE,value:60,offset:0},h:{name:"h",base:H.TIME,prefixes:R.NONE,value:3600,offset:0},second:{name:"second",base:H.TIME,prefixes:R.LONG,value:1,offset:0},sec:{name:"sec",base:H.TIME,prefixes:R.LONG,value:1,offset:0},minute:{name:"minute",base:H.TIME,prefixes:R.NONE,value:60,offset:0},hour:{name:"hour",base:H.TIME,prefixes:R.NONE,value:3600,offset:0},day:{name:"day",base:H.TIME,prefixes:R.NONE,value:86400,offset:0},week:{name:"week",base:H.TIME,prefixes:R.NONE,value:7*86400,offset:0},month:{name:"month",base:H.TIME,prefixes:R.NONE,value:2629800,offset:0},year:{name:"year",base:H.TIME,prefixes:R.NONE,value:31557600,offset:0},decade:{name:"decade",base:H.TIME,prefixes:R.NONE,value:315576e3,offset:0},century:{name:"century",base:H.TIME,prefixes:R.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:H.TIME,prefixes:R.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:H.FREQUENCY,prefixes:R.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:H.FREQUENCY,prefixes:R.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:H.ANGLE,prefixes:R.SHORT,value:1,offset:0},radian:{name:"radian",base:H.ANGLE,prefixes:R.LONG,value:1,offset:0},deg:{name:"deg",base:H.ANGLE,prefixes:R.SHORT,value:null,offset:0},degree:{name:"degree",base:H.ANGLE,prefixes:R.LONG,value:null,offset:0},grad:{name:"grad",base:H.ANGLE,prefixes:R.SHORT,value:null,offset:0},gradian:{name:"gradian",base:H.ANGLE,prefixes:R.LONG,value:null,offset:0},cycle:{name:"cycle",base:H.ANGLE,prefixes:R.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:H.ANGLE,prefixes:R.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:H.ANGLE,prefixes:R.NONE,value:null,offset:0},A:{name:"A",base:H.CURRENT,prefixes:R.SHORT,value:1,offset:0},ampere:{name:"ampere",base:H.CURRENT,prefixes:R.LONG,value:1,offset:0},K:{name:"K",base:H.TEMPERATURE,prefixes:R.SHORT,value:1,offset:0},degC:{name:"degC",base:H.TEMPERATURE,prefixes:R.SHORT,value:1,offset:273.15},degF:{name:"degF",base:H.TEMPERATURE,prefixes:R.SHORT,value:new v(5,9),offset:459.67},degR:{name:"degR",base:H.TEMPERATURE,prefixes:R.SHORT,value:new v(5,9),offset:0},kelvin:{name:"kelvin",base:H.TEMPERATURE,prefixes:R.LONG,value:1,offset:0},celsius:{name:"celsius",base:H.TEMPERATURE,prefixes:R.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:H.TEMPERATURE,prefixes:R.LONG,value:new v(5,9),offset:459.67},rankine:{name:"rankine",base:H.TEMPERATURE,prefixes:R.LONG,value:new v(5,9),offset:0},mol:{name:"mol",base:H.AMOUNT_OF_SUBSTANCE,prefixes:R.SHORT,value:1,offset:0},mole:{name:"mole",base:H.AMOUNT_OF_SUBSTANCE,prefixes:R.LONG,value:1,offset:0},cd:{name:"cd",base:H.LUMINOUS_INTENSITY,prefixes:R.SHORT,value:1,offset:0},candela:{name:"candela",base:H.LUMINOUS_INTENSITY,prefixes:R.LONG,value:1,offset:0},N:{name:"N",base:H.FORCE,prefixes:R.SHORT,value:1,offset:0},newton:{name:"newton",base:H.FORCE,prefixes:R.LONG,value:1,offset:0},dyn:{name:"dyn",base:H.FORCE,prefixes:R.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:H.FORCE,prefixes:R.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:H.FORCE,prefixes:R.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:H.FORCE,prefixes:R.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:H.FORCE,prefixes:R.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:H.FORCE,prefixes:R.NONE,value:9.80665,offset:0},J:{name:"J",base:H.ENERGY,prefixes:R.SHORT,value:1,offset:0},joule:{name:"joule",base:H.ENERGY,prefixes:R.LONG,value:1,offset:0},erg:{name:"erg",base:H.ENERGY,prefixes:R.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:H.ENERGY,prefixes:R.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:H.ENERGY,prefixes:R.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:H.ENERGY,prefixes:R.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:H.ENERGY,prefixes:R.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:H.POWER,prefixes:R.SHORT,value:1,offset:0},watt:{name:"watt",base:H.POWER,prefixes:R.LONG,value:1,offset:0},hp:{name:"hp",base:H.POWER,prefixes:R.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:H.POWER,prefixes:R.SHORT,value:g.I,offset:0},VA:{name:"VA",base:H.POWER,prefixes:R.SHORT,value:1,offset:0},Pa:{name:"Pa",base:H.PRESSURE,prefixes:R.SHORT,value:1,offset:0},psi:{name:"psi",base:H.PRESSURE,prefixes:R.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:H.PRESSURE,prefixes:R.NONE,value:101325,offset:0},bar:{name:"bar",base:H.PRESSURE,prefixes:R.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:H.PRESSURE,prefixes:R.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:H.PRESSURE,prefixes:R.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:H.PRESSURE,prefixes:R.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:H.PRESSURE,prefixes:R.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:H.ELECTRIC_CHARGE,prefixes:R.LONG,value:1,offset:0},C:{name:"C",base:H.ELECTRIC_CHARGE,prefixes:R.SHORT,value:1,offset:0},farad:{name:"farad",base:H.ELECTRIC_CAPACITANCE,prefixes:R.LONG,value:1,offset:0},F:{name:"F",base:H.ELECTRIC_CAPACITANCE,prefixes:R.SHORT,value:1,offset:0},volt:{name:"volt",base:H.ELECTRIC_POTENTIAL,prefixes:R.LONG,value:1,offset:0},V:{name:"V",base:H.ELECTRIC_POTENTIAL,prefixes:R.SHORT,value:1,offset:0},ohm:{name:"ohm",base:H.ELECTRIC_RESISTANCE,prefixes:R.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:H.ELECTRIC_INDUCTANCE,prefixes:R.LONG,value:1,offset:0},H:{name:"H",base:H.ELECTRIC_INDUCTANCE,prefixes:R.SHORT,value:1,offset:0},siemens:{name:"siemens",base:H.ELECTRIC_CONDUCTANCE,prefixes:R.LONG,value:1,offset:0},S:{name:"S",base:H.ELECTRIC_CONDUCTANCE,prefixes:R.SHORT,value:1,offset:0},weber:{name:"weber",base:H.MAGNETIC_FLUX,prefixes:R.LONG,value:1,offset:0},Wb:{name:"Wb",base:H.MAGNETIC_FLUX,prefixes:R.SHORT,value:1,offset:0},tesla:{name:"tesla",base:H.MAGNETIC_FLUX_DENSITY,prefixes:R.LONG,value:1,offset:0},T:{name:"T",base:H.MAGNETIC_FLUX_DENSITY,prefixes:R.SHORT,value:1,offset:0},b:{name:"b",base:H.BIT,prefixes:R.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:H.BIT,prefixes:R.BINARY_LONG,value:1,offset:0},B:{name:"B",base:H.BIT,prefixes:R.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:H.BIT,prefixes:R.BINARY_LONG,value:8,offset:0}},ie={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fldr:"fluiddram",fluiddrams:"fluiddram",floz:"fluidounce",fluidounces:"fluidounce",gi:"gill",gills:"gill",cp:"cup",cups:"cup",pt:"pint",pints:"pint",qt:"quart",quarts:"quart",gal:"gallon",gallons:"gallon",bbl:"beerbarrel",beerbarrels:"beerbarrel",obl:"oilbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function me(Z){if(Z.number==="BigNumber"){var ce=JF(b);W.rad.value=new b(1),W.deg.value=ce.div(180),W.grad.value=ce.div(200),W.cycle.value=ce.times(2),W.arcsec.value=ce.div(648e3),W.arcmin.value=ce.div(10800)}else W.rad.value=1,W.deg.value=Math.PI/180,W.grad.value=Math.PI/200,W.cycle.value=Math.PI*2,W.arcsec.value=Math.PI/648e3,W.arcmin.value=Math.PI/10800;W.radian.value=W.rad.value,W.degree.value=W.deg.value,W.gradian.value=W.grad.value}me(t),e&&e("config",function(Z,ce){Z.number!==ce.number&&me(Z)});var le={si:{NONE:{unit:re,prefix:R.NONE[""]},LENGTH:{unit:W.m,prefix:R.SHORT[""]},MASS:{unit:W.g,prefix:R.SHORT.k},TIME:{unit:W.s,prefix:R.SHORT[""]},CURRENT:{unit:W.A,prefix:R.SHORT[""]},TEMPERATURE:{unit:W.K,prefix:R.SHORT[""]},LUMINOUS_INTENSITY:{unit:W.cd,prefix:R.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:W.mol,prefix:R.SHORT[""]},ANGLE:{unit:W.rad,prefix:R.SHORT[""]},BIT:{unit:W.bits,prefix:R.SHORT[""]},FORCE:{unit:W.N,prefix:R.SHORT[""]},ENERGY:{unit:W.J,prefix:R.SHORT[""]},POWER:{unit:W.W,prefix:R.SHORT[""]},PRESSURE:{unit:W.Pa,prefix:R.SHORT[""]},ELECTRIC_CHARGE:{unit:W.C,prefix:R.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:W.F,prefix:R.SHORT[""]},ELECTRIC_POTENTIAL:{unit:W.V,prefix:R.SHORT[""]},ELECTRIC_RESISTANCE:{unit:W.ohm,prefix:R.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:W.H,prefix:R.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:W.S,prefix:R.SHORT[""]},MAGNETIC_FLUX:{unit:W.Wb,prefix:R.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:W.T,prefix:R.SHORT[""]},FREQUENCY:{unit:W.Hz,prefix:R.SHORT[""]}}};le.cgs=JSON.parse(JSON.stringify(le.si)),le.cgs.LENGTH={unit:W.m,prefix:R.SHORT.c},le.cgs.MASS={unit:W.g,prefix:R.SHORT[""]},le.cgs.FORCE={unit:W.dyn,prefix:R.SHORT[""]},le.cgs.ENERGY={unit:W.erg,prefix:R.NONE[""]},le.us=JSON.parse(JSON.stringify(le.si)),le.us.LENGTH={unit:W.ft,prefix:R.NONE[""]},le.us.MASS={unit:W.lbm,prefix:R.NONE[""]},le.us.TEMPERATURE={unit:W.degF,prefix:R.NONE[""]},le.us.FORCE={unit:W.lbf,prefix:R.NONE[""]},le.us.ENERGY={unit:W.BTU,prefix:R.BTU[""]},le.us.POWER={unit:W.hp,prefix:R.NONE[""]},le.us.PRESSURE={unit:W.psi,prefix:R.NONE[""]},le.auto=JSON.parse(JSON.stringify(le.si));var ve=le.auto;x.setUnitSystem=function(Z){if(Je(le,Z))ve=le[Z];else throw new Error("Unit system "+Z+" does not exist. Choices are: "+Object.keys(le).join(", "))},x.getUnitSystem=function(){for(var Z in le)if(Je(le,Z)&&le[Z]===ve)return Z},x.typeConverters={BigNumber:function(ce){return ce!=null&&ce.isFraction?new b(String(ce.n)).div(String(ce.d)).times(String(ce.s)):new b(ce+"")},Fraction:function(ce){return new v(ce)},Complex:function(ce){return ce},number:function(ce){return ce!=null&&ce.isFraction?p(ce):ce}},x.prototype._numberConverter=function(){var Z=x.typeConverters[this.valueType()];if(Z)return Z;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},x._getNumberConverter=function(Z){if(!x.typeConverters[Z])throw new TypeError('Unsupported type "'+Z+'"');return x.typeConverters[Z]};for(var ye in W)if(Je(W,ye)){var Ie=W[ye];Ie.dimensions=Ie.base.dimensions}for(var Ue in ie)if(Je(ie,Ue)){var Ge=W[ie[Ue]],Be={};for(var $e in Ge)Je(Ge,$e)&&(Be[$e]=Ge[$e]);Be.name=Ue,W[Ue]=Be}x.isValidAlpha=function(ce){return/^[a-zA-Z]$/.test(ce)};function He(Z){for(var ce=0;ce<Z.length;ce++){if(E=Z.charAt(ce),ce===0&&!x.isValidAlpha(E))throw new Error('Invalid unit name (must begin with alpha character): "'+Z+'"');if(ce>0&&!(x.isValidAlpha(E)||D(E)))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+Z+'"')}}return x.createUnit=function(Z,ce){if(typeof Z!="object")throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(ce&&ce.override){for(var q in Z)if(Je(Z,q)&&x.deleteUnit(q),Z[q].aliases)for(var Q=0;Q<Z[q].aliases.length;Q++)x.deleteUnit(Z[q].aliases[Q])}var ae;for(var de in Z)Je(Z,de)&&(ae=x.createUnitSingle(de,Z[de]));return ae},x.createUnitSingle=function(Z,ce){if((typeof ce>"u"||ce===null)&&(ce={}),typeof Z!="string")throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(Je(W,Z))throw new Error('Cannot create unit "'+Z+'": a unit with that name already exists');He(Z);var q=null,Q=[],ae=0,de,ge,pe;if(ce&&ce.type==="Unit")q=ce.clone();else if(typeof ce=="string")ce!==""&&(de=ce);else if(typeof ce=="object")de=ce.definition,ge=ce.prefixes,ae=ce.offset,pe=ce.baseName,ce.aliases&&(Q=ce.aliases.valueOf());else throw new TypeError('Cannot create unit "'+Z+'" from "'+ce.toString()+'": expecting "string" or "Unit" or "Object"');if(Q){for(var Ne=0;Ne<Q.length;Ne++)if(Je(W,Q[Ne]))throw new Error('Cannot create alias "'+Q[Ne]+'": a unit with that name already exists')}if(de&&typeof de=="string"&&!q)try{q=x.parse(de,{allowNoUnits:!0})}catch(ut){throw ut.message='Could not create unit "'+Z+'" from "'+de+'": '+ut.message,ut}else de&&de.type==="Unit"&&(q=de.clone());Q=Q||[],ae=ae||0,ge&&ge.toUpperCase?ge=R[ge.toUpperCase()]||R.NONE:ge=R.NONE;var Ee={};if(q){Ee={name:Z,value:q.value,dimensions:q.dimensions.slice(0),prefixes:ge,offset:ae};var Ct=!1;for(var zt in H)if(Je(H,zt)){for(var lt=!0,pr=0;pr<Y.length;pr++)if(Math.abs((Ee.dimensions[pr]||0)-(H[zt].dimensions[pr]||0))>1e-12){lt=!1;break}if(lt){Ct=!0,Ee.base=H[zt];break}}if(!Ct){pe=pe||Z+"_STUFF";var B={dimensions:q.dimensions.slice(0)};B.key=pe,H[pe]=B,ve[pe]={unit:Ee,prefix:R.NONE[""]},Ee.base=H[pe]}}else{if(pe=pe||Z+"_STUFF",Y.indexOf(pe)>=0)throw new Error('Cannot create new base unit "'+Z+'": a base unit with that name already exists (and cannot be overridden)');Y.push(pe);for(var Oe in H)Je(H,Oe)&&(H[Oe].dimensions[Y.length-1]=0);for(var Se={dimensions:[]},et=0;et<Y.length;et++)Se.dimensions[et]=0;Se.dimensions[Y.length-1]=1,Se.key=pe,H[pe]=Se,Ee={name:Z,value:1,dimensions:H[pe].dimensions.slice(0),prefixes:ge,offset:ae,base:H[pe]},ve[pe]={unit:Ee,prefix:R.NONE[""]}}x.UNITS[Z]=Ee;for(var oe=0;oe<Q.length;oe++){var we=Q[oe],Me={};for(var ze in Ee)Je(Ee,ze)&&(Me[ze]=Ee[ze]);Me.name=we,x.UNITS[we]=Me}return delete U.cache,new x(null,Z)},x.deleteUnit=function(Z){delete x.UNITS[Z],delete U.cache},x.PREFIXES=R,x.BASE_DIMENSIONS=Y,x.BASE_UNITS=H,x.UNIT_SYSTEMS=le,x.UNITS=W,x},{isClass:!0}),EV="unit",bAe=["typed","Unit"],wAe=X(EV,bAe,r=>{var{typed:e,Unit:t}=r;return e(EV,{Unit:function(i){return i.clone()},string:function(i){return t.isValuelessUnit(i)?new t(null,i):t.parse(i,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(i,s){return new t(i,s)},"number | BigNumber | Fraction":function(i){return new t(i)},"Array | Matrix":e.referToSelf(n=>i=>_t(i,n))})}),SV="sparse",xAe=["typed","SparseMatrix"],_Ae=X(SV,xAe,r=>{var{typed:e,SparseMatrix:t}=r;return e(SV,{"":function(){return new t([])},string:function(i){return new t([],i)},"Array | Matrix":function(i){return new t(i)},"Array | Matrix, string":function(i,s){return new t(i,s)}})}),TV="createUnit",AAe=["typed","Unit"],EAe=X(TV,AAe,r=>{var{typed:e,Unit:t}=r;return e(TV,{"Object, Object":function(i,s){return t.createUnit(i,s)},Object:function(i){return t.createUnit(i,{})},"string, Unit | string | Object, Object":function(i,s,a){var o={};return o[i]=s,t.createUnit(o,a)},"string, Unit | string | Object":function(i,s){var a={};return a[i]=s,t.createUnit(a,{})},string:function(i){var s={};return s[i]={},t.createUnit(s,{})}})}),CV="acos",SAe=["typed","config","Complex"],TAe=X(CV,SAe,r=>{var{typed:e,config:t,Complex:n}=r;return e(CV,{number:function(s){return s>=-1&&s<=1||t.predictable?Math.acos(s):new n(s,0).acos()},Complex:function(s){return s.acos()},BigNumber:function(s){return s.acos()}})}),NV="acosh",CAe=["typed","config","Complex"],NAe=X(NV,CAe,r=>{var{typed:e,config:t,Complex:n}=r;return e(NV,{number:function(s){return s>=1||t.predictable?SX(s):s<=-1?new n(Math.log(Math.sqrt(s*s-1)-s),Math.PI):new n(s,0).acosh()},Complex:function(s){return s.acosh()},BigNumber:function(s){return s.acosh()}})}),DV="acot",DAe=["typed","BigNumber"],MAe=X(DV,DAe,r=>{var{typed:e,BigNumber:t}=r;return e(DV,{number:TX,Complex:function(i){return i.acot()},BigNumber:function(i){return new t(1).div(i).atan()}})}),MV="acoth",IAe=["typed","config","Complex","BigNumber"],PAe=X(MV,IAe,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(MV,{number:function(a){return a>=1||a<=-1||t.predictable?CX(a):new n(a,0).acoth()},Complex:function(a){return a.acoth()},BigNumber:function(a){return new i(1).div(a).atanh()}})}),IV="acsc",RAe=["typed","config","Complex","BigNumber"],kAe=X(IV,RAe,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(IV,{number:function(a){return a<=-1||a>=1||t.predictable?NX(a):new n(a,0).acsc()},Complex:function(a){return a.acsc()},BigNumber:function(a){return new i(1).div(a).asin()}})}),PV="acsch",FAe=["typed","BigNumber"],OAe=X(PV,FAe,r=>{var{typed:e,BigNumber:t}=r;return e(PV,{number:DX,Complex:function(i){return i.acsch()},BigNumber:function(i){return new t(1).div(i).asinh()}})}),RV="asec",BAe=["typed","config","Complex","BigNumber"],LAe=X(RV,BAe,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(RV,{number:function(a){return a<=-1||a>=1||t.predictable?MX(a):new n(a,0).asec()},Complex:function(a){return a.asec()},BigNumber:function(a){return new i(1).div(a).acos()}})}),kV="asech",$Ae=["typed","config","Complex","BigNumber"],VAe=X(kV,$Ae,r=>{var{typed:e,config:t,Complex:n,BigNumber:i}=r;return e(kV,{number:function(a){if(a<=1&&a>=-1||t.predictable){var o=1/a;if(o>0||t.predictable)return IX(a);var l=Math.sqrt(o*o-1);return new n(Math.log(l-o),Math.PI)}return new n(a,0).asech()},Complex:function(a){return a.asech()},BigNumber:function(a){return new i(1).div(a).acosh()}})}),FV="asin",UAe=["typed","config","Complex"],zAe=X(FV,UAe,r=>{var{typed:e,config:t,Complex:n}=r;return e(FV,{number:function(s){return s>=-1&&s<=1||t.predictable?Math.asin(s):new n(s,0).asin()},Complex:function(s){return s.asin()},BigNumber:function(s){return s.asin()}})}),jAe="asinh",qAe=["typed"],HAe=X(jAe,qAe,r=>{var{typed:e}=r;return e("asinh",{number:PX,Complex:function(n){return n.asinh()},BigNumber:function(n){return n.asinh()}})}),GAe="atan",WAe=["typed"],KAe=X(GAe,WAe,r=>{var{typed:e}=r;return e("atan",{number:function(n){return Math.atan(n)},Complex:function(n){return n.atan()},BigNumber:function(n){return n.atan()}})}),OV="atan2",XAe=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],YAe=X(OV,XAe,r=>{var{typed:e,matrix:t,equalScalar:n,BigNumber:i,DenseMatrix:s,concat:a}=r,o=tl({typed:e,equalScalar:n}),l=ss({typed:e}),u=WX({typed:e,equalScalar:n}),c=Bi({typed:e,equalScalar:n}),h=Yn({typed:e,DenseMatrix:s}),d=Ar({typed:e,matrix:t,concat:a});return e(OV,{"number, number":Math.atan2,"BigNumber, BigNumber":(f,p)=>i.atan2(f,p)},d({scalar:"number | BigNumber",SS:u,DS:l,SD:o,Ss:c,sS:h}))}),BV="atanh",QAe=["typed","config","Complex"],JAe=X(BV,QAe,r=>{var{typed:e,config:t,Complex:n}=r;return e(BV,{number:function(s){return s<=1&&s>=-1||t.predictable?RX(s):new n(s,0).atanh()},Complex:function(s){return s.atanh()},BigNumber:function(s){return s.atanh()}})}),sy=X("trigUnit",["typed"],r=>{var{typed:e}=r;return{Unit:e.referToSelf(t=>n=>{if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(t,n.valueType())(n.value)})}}),LV="cos",ZAe=["typed"],eEe=X(LV,ZAe,r=>{var{typed:e}=r,t=sy({typed:e});return e(LV,{number:Math.cos,"Complex | BigNumber":n=>n.cos()},t)}),$V="cosh",tEe=["typed"],rEe=X($V,tEe,r=>{var{typed:e}=r;return e($V,{number:Hge,"Complex | BigNumber":t=>t.cosh()})}),VV="cot",nEe=["typed","BigNumber"],iEe=X(VV,nEe,r=>{var{typed:e,BigNumber:t}=r,n=sy({typed:e});return e(VV,{number:kX,Complex:i=>i.cot(),BigNumber:i=>new t(1).div(i.tan())},n)}),UV="coth",sEe=["typed","BigNumber"],aEe=X(UV,sEe,r=>{var{typed:e,BigNumber:t}=r;return e(UV,{number:FX,Complex:n=>n.coth(),BigNumber:n=>new t(1).div(n.tanh())})}),zV="csc",oEe=["typed","BigNumber"],lEe=X(zV,oEe,r=>{var{typed:e,BigNumber:t}=r,n=sy({typed:e});return e(zV,{number:OX,Complex:i=>i.csc(),BigNumber:i=>new t(1).div(i.sin())},n)}),jV="csch",uEe=["typed","BigNumber"],cEe=X(jV,uEe,r=>{var{typed:e,BigNumber:t}=r;return e(jV,{number:BX,Complex:n=>n.csch(),BigNumber:n=>new t(1).div(n.sinh())})}),qV="sec",hEe=["typed","BigNumber"],dEe=X(qV,hEe,r=>{var{typed:e,BigNumber:t}=r,n=sy({typed:e});return e(qV,{number:LX,Complex:i=>i.sec(),BigNumber:i=>new t(1).div(i.cos())},n)}),HV="sech",fEe=["typed","BigNumber"],mEe=X(HV,fEe,r=>{var{typed:e,BigNumber:t}=r;return e(HV,{number:$X,Complex:n=>n.sech(),BigNumber:n=>new t(1).div(n.cosh())})}),GV="sin",pEe=["typed"],gEe=X(GV,pEe,r=>{var{typed:e}=r,t=sy({typed:e});return e(GV,{number:Math.sin,"Complex | BigNumber":n=>n.sin()},t)}),WV="sinh",vEe=["typed"],yEe=X(WV,vEe,r=>{var{typed:e}=r;return e(WV,{number:VX,"Complex | BigNumber":t=>t.sinh()})}),KV="tan",bEe=["typed"],wEe=X(KV,bEe,r=>{var{typed:e}=r,t=sy({typed:e});return e(KV,{number:Math.tan,"Complex | BigNumber":n=>n.tan()},t)}),xEe="tanh",_Ee=["typed"],AEe=X(xEe,_Ee,r=>{var{typed:e}=r;return e("tanh",{number:Wge,"Complex | BigNumber":t=>t.tanh()})}),XV="setCartesian",EEe=["typed","size","subset","compareNatural","Index","DenseMatrix"],SEe=X(XV,EEe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:s,DenseMatrix:a}=r;return e(XV,{"Array | Matrix, Array | Matrix":function(l,u){var c=[];if(n(t(l),new s(0))!==0&&n(t(u),new s(0))!==0){var h=Yt(Array.isArray(l)?l:l.toArray()).sort(i),d=Yt(Array.isArray(u)?u:u.toArray()).sort(i);c=[];for(var f=0;f<h.length;f++)for(var p=0;p<d.length;p++)c.push([h[f],d[p]])}return Array.isArray(l)&&Array.isArray(u)?c:new a(c)}})}),YV="setDifference",TEe=["typed","size","subset","compareNatural","Index","DenseMatrix"],CEe=X(YV,TEe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:s,DenseMatrix:a}=r;return e(YV,{"Array | Matrix, Array | Matrix":function(l,u){var c;if(n(t(l),new s(0))===0)c=[];else{if(n(t(u),new s(0))===0)return Yt(l.toArray());var h=R0(Yt(Array.isArray(l)?l:l.toArray()).sort(i)),d=R0(Yt(Array.isArray(u)?u:u.toArray()).sort(i));c=[];for(var f,p=0;p<h.length;p++){f=!1;for(var g=0;g<d.length;g++)if(i(h[p].value,d[g].value)===0&&h[p].identifier===d[g].identifier){f=!0;break}f||c.push(h[p])}}return Array.isArray(l)&&Array.isArray(u)?vT(c):new a(vT(c))}})}),QV="setDistinct",NEe=["typed","size","subset","compareNatural","Index","DenseMatrix"],DEe=X(QV,NEe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:s,DenseMatrix:a}=r;return e(QV,{"Array | Matrix":function(l){var u;if(n(t(l),new s(0))===0)u=[];else{var c=Yt(Array.isArray(l)?l:l.toArray()).sort(i);u=[],u.push(c[0]);for(var h=1;h<c.length;h++)i(c[h],c[h-1])!==0&&u.push(c[h])}return Array.isArray(l)?u:new a(u)}})}),JV="setIntersect",MEe=["typed","size","subset","compareNatural","Index","DenseMatrix"],IEe=X(JV,MEe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:s,DenseMatrix:a}=r;return e(JV,{"Array | Matrix, Array | Matrix":function(l,u){var c;if(n(t(l),new s(0))===0||n(t(u),new s(0))===0)c=[];else{var h=R0(Yt(Array.isArray(l)?l:l.toArray()).sort(i)),d=R0(Yt(Array.isArray(u)?u:u.toArray()).sort(i));c=[];for(var f=0;f<h.length;f++)for(var p=0;p<d.length;p++)if(i(h[f].value,d[p].value)===0&&h[f].identifier===d[p].identifier){c.push(h[f]);break}}return Array.isArray(l)&&Array.isArray(u)?vT(c):new a(vT(c))}})}),ZV="setIsSubset",PEe=["typed","size","subset","compareNatural","Index"],REe=X(ZV,PEe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:s}=r;return e(ZV,{"Array | Matrix, Array | Matrix":function(o,l){if(n(t(o),new s(0))===0)return!0;if(n(t(l),new s(0))===0)return!1;for(var u=R0(Yt(Array.isArray(o)?o:o.toArray()).sort(i)),c=R0(Yt(Array.isArray(l)?l:l.toArray()).sort(i)),h,d=0;d<u.length;d++){h=!1;for(var f=0;f<c.length;f++)if(i(u[d].value,c[f].value)===0&&u[d].identifier===c[f].identifier){h=!0;break}if(h===!1)return!1}return!0}})}),e8="setMultiplicity",kEe=["typed","size","subset","compareNatural","Index"],FEe=X(e8,kEe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:s}=r;return e(e8,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(o,l){if(n(t(l),new s(0))===0)return 0;for(var u=Yt(Array.isArray(l)?l:l.toArray()),c=0,h=0;h<u.length;h++)i(u[h],o)===0&&c++;return c}})}),t8="setPowerset",OEe=["typed","size","subset","compareNatural","Index"],BEe=X(t8,OEe,r=>{var{typed:e,size:t,subset:n,compareNatural:i,Index:s}=r;return e(t8,{"Array | Matrix":function(u){if(n(t(u),new s(0))===0)return[];for(var c=Yt(Array.isArray(u)?u:u.toArray()).sort(i),h=[],d=0;d.toString(2).length<=c.length;)h.push(a(c,d.toString(2).split("").reverse())),d++;return o(h)}});function a(l,u){for(var c=[],h=0;h<u.length;h++)u[h]==="1"&&c.push(l[h]);return c}function o(l){for(var u=[],c=l.length-1;c>0;c--)for(var h=0;h<c;h++)l[h].length>l[h+1].length&&(u=l[h],l[h]=l[h+1],l[h+1]=u);return l}}),r8="setSize",LEe=["typed","compareNatural"],$Ee=X(r8,LEe,r=>{var{typed:e,compareNatural:t}=r;return e(r8,{"Array | Matrix":function(i){return Array.isArray(i)?Yt(i).length:Yt(i.toArray()).length},"Array | Matrix, boolean":function(i,s){if(s===!1||i.length===0)return Array.isArray(i)?Yt(i).length:Yt(i.toArray()).length;for(var a=Yt(Array.isArray(i)?i:i.toArray()).sort(t),o=1,l=1;l<a.length;l++)t(a[l],a[l-1])!==0&&o++;return o}})}),n8="setSymDifference",VEe=["typed","size","concat","subset","setDifference","Index"],UEe=X(n8,VEe,r=>{var{typed:e,size:t,concat:n,subset:i,setDifference:s,Index:a}=r;return e(n8,{"Array | Matrix, Array | Matrix":function(l,u){if(i(t(l),new a(0))===0)return Yt(u);if(i(t(u),new a(0))===0)return Yt(l);var c=Yt(l),h=Yt(u);return n(s(c,h),s(h,c))}})}),i8="setUnion",zEe=["typed","size","concat","subset","setIntersect","setSymDifference","Index"],jEe=X(i8,zEe,r=>{var{typed:e,size:t,concat:n,subset:i,setIntersect:s,setSymDifference:a,Index:o}=r;return e(i8,{"Array | Matrix, Array | Matrix":function(u,c){if(i(t(u),new o(0))===0)return Yt(c);if(i(t(c),new o(0))===0)return Yt(u);var h=Yt(u),d=Yt(c);return n(a(h,d),s(h,d))}})}),s8="add",qEe=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],HEe=X(s8,qEe,r=>{var{typed:e,matrix:t,addScalar:n,equalScalar:i,DenseMatrix:s,SparseMatrix:a,concat:o}=r,l=zd({typed:e}),u=GF({typed:e,equalScalar:i}),c=bp({typed:e,DenseMatrix:s}),h=Ar({typed:e,matrix:t,concat:o});return e(s8,{"any, any":n,"any, any, ...any":e.referToSelf(d=>(f,p,g)=>{for(var b=d(f,p),v=0;v<g.length;v++)b=d(b,g[v]);return b})},h({elop:n,DS:l,SS:u,Ss:c}))}),a8="hypot",GEe=["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],WEe=X(a8,GEe,r=>{var{typed:e,abs:t,addScalar:n,divideScalar:i,multiplyScalar:s,sqrt:a,smaller:o,isPositive:l}=r;return e(a8,{"... number | BigNumber":u,Array:u,Matrix:c=>u(Yt(c.toArray(),!0))});function u(c){for(var h=0,d=0,f=0;f<c.length;f++){if(uc(c[f]))throw new TypeError("Unexpected type of argument to hypot");var p=t(c[f]);o(d,p)?(h=s(h,s(i(d,p),i(d,p))),h=n(h,1),d=p):h=n(h,l(p)?s(i(p,d),i(p,d)):p)}return s(d,a(h))}}),o8="norm",KEe=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],XEe=X(o8,KEe,r=>{var{typed:e,abs:t,add:n,pow:i,conj:s,sqrt:a,multiply:o,equalScalar:l,larger:u,smaller:c,matrix:h,ctranspose:d,eigs:f}=r;return e(o8,{number:Math.abs,Complex:function(E){return E.abs()},BigNumber:function(E){return E.abs()},boolean:function(E){return Math.abs(E)},Array:function(E){return _(h(E),2)},Matrix:function(E){return _(E,2)},"Array, number | BigNumber | string":function(E,C){return _(h(E),C)},"Matrix, number | BigNumber | string":function(E,C){return _(E,C)}});function p(S){var E=0;return S.forEach(function(C){var N=t(C);u(N,E)&&(E=N)},!0),E}function g(S){var E;return S.forEach(function(C){var N=t(C);(!E||c(N,E))&&(E=N)},!0),E||0}function b(S,E){if(E===Number.POSITIVE_INFINITY||E==="inf")return p(S);if(E===Number.NEGATIVE_INFINITY||E==="-inf")return g(S);if(E==="fro")return _(S,2);if(typeof E=="number"&&!isNaN(E)){if(!l(E,0)){var C=0;return S.forEach(function(N){C=n(i(t(N),E),C)},!0),i(C,1/E)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function v(S){var E=0;return S.forEach(function(C,N){E=n(E,o(C,s(C)))}),t(a(E))}function w(S){var E=[],C=0;return S.forEach(function(N,D){var M=D[1],I=n(E[M]||0,t(N));u(I,C)&&(C=I),E[M]=I},!0),C}function y(S){var E=S.size();if(E[0]!==E[1])throw new RangeError("Invalid matrix dimensions");var C=d(S),N=o(C,S),D=f(N).values.toArray(),M=D[D.length-1];return t(a(M))}function A(S){var E=[],C=0;return S.forEach(function(N,D){var M=D[0],I=n(E[M]||0,t(N));u(I,C)&&(C=I),E[M]=I},!0),C}function x(S,E){if(E===1)return w(S);if(E===Number.POSITIVE_INFINITY||E==="inf")return A(S);if(E==="fro")return v(S);if(E===2)return y(S);throw new Error("Unsupported parameter value "+E)}function _(S,E){var C=S.size();if(C.length===1)return b(S,E);if(C.length===2){if(C[0]&&C[1])return x(S,E);throw new RangeError("Invalid matrix dimensions")}}}),l8="dot",YEe=["typed","addScalar","multiplyScalar","conj","size"],QEe=X(l8,YEe,r=>{var{typed:e,addScalar:t,multiplyScalar:n,conj:i,size:s}=r;return e(l8,{"Array | DenseMatrix, Array | DenseMatrix":o,"SparseMatrix, SparseMatrix":l});function a(u,c){var h=s(u),d=s(c),f,p;if(h.length===1)f=h[0];else if(h.length===2&&h[1]===1)f=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(d.length===1)p=d[0];else if(d.length===2&&d[1]===1)p=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(f!==p)throw new RangeError("Vectors must have equal length ("+f+" != "+p+")");if(f===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return f}function o(u,c){var h=a(u,c),d=ot(u)?u._data:u,f=ot(u)?u._datatype||u.getDataType():void 0,p=ot(c)?c._data:c,g=ot(c)?c._datatype||c.getDataType():void 0,b=s(u).length===2,v=s(c).length===2,w=t,y=n;if(f&&g&&f===g&&typeof f=="string"&&f!=="mixed"){var A=f;w=e.find(t,[A,A]),y=e.find(n,[A,A])}if(!b&&!v){for(var x=y(i(d[0]),p[0]),_=1;_<h;_++)x=w(x,y(i(d[_]),p[_]));return x}if(!b&&v){for(var S=y(i(d[0]),p[0][0]),E=1;E<h;E++)S=w(S,y(i(d[E]),p[E][0]));return S}if(b&&!v){for(var C=y(i(d[0][0]),p[0]),N=1;N<h;N++)C=w(C,y(i(d[N][0]),p[N]));return C}if(b&&v){for(var D=y(i(d[0][0]),p[0][0]),M=1;M<h;M++)D=w(D,y(i(d[M][0]),p[M][0]));return D}}function l(u,c){a(u,c);for(var h=u._index,d=u._values,f=c._index,p=c._values,g=0,b=t,v=n,w=0,y=0;w<h.length&&y<f.length;){var A=h[w],x=f[y];if(A<x){w++;continue}if(A>x){y++;continue}A===x&&(g=b(g,v(d[w],p[y])),w++,y++)}return g}}),JEe="trace",ZEe=["typed","matrix","add"],eSe=X(JEe,ZEe,r=>{var{typed:e,matrix:t,add:n}=r;return e("trace",{Array:function(o){return i(t(o))},SparseMatrix:s,DenseMatrix:i,any:gt});function i(a){var o=a._size,l=a._data;switch(o.length){case 1:if(o[0]===1)return gt(l[0]);throw new RangeError("Matrix must be square (size: "+Pt(o)+")");case 2:{var u=o[0],c=o[1];if(u===c){for(var h=0,d=0;d<u;d++)h=n(h,l[d][d]);return h}else throw new RangeError("Matrix must be square (size: "+Pt(o)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Pt(o)+")")}}function s(a){var o=a._values,l=a._index,u=a._ptr,c=a._size,h=c[0],d=c[1];if(h===d){var f=0;if(o.length>0)for(var p=0;p<d;p++)for(var g=u[p],b=u[p+1],v=g;v<b;v++){var w=l[v];if(w===p){f=n(f,o[v]);break}if(w>p)break}return f}throw new RangeError("Matrix must be square (size: "+Pt(c)+")")}}),u8="index",tSe=["typed","Index"],rSe=X(u8,tSe,r=>{var{typed:e,Index:t}=r;return e(u8,{"...number | string | BigNumber | Range | Array | Matrix":function(i){var s=i.map(function(o){return xt(o)?o.toNumber():cr(o)||ot(o)?o.map(function(l){return xt(l)?l.toNumber():l}):o}),a=new t;return t.apply(a,s),a}})}),fY=new Set(["end"]),nSe="Node",iSe=["mathWithTransform"],sSe=X(nSe,iSe,r=>{var{mathWithTransform:e}=r;function t(i){for(var s of[...fY])if(i.has(s))throw new Error('Scope contains an illegal symbol, "'+s+'" is a reserved keyword')}class n{get type(){return"Node"}get isNode(){return!0}evaluate(s){return this.compile().evaluate(s)}compile(){var s=this._compile(e,{}),a={},o=null;function l(u){var c=Vg(u);return t(c),s(c,a,o)}return{evaluate:l}}_compile(s,a){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(s){throw new Error("Cannot run forEach on a Node interface")}map(s){throw new Error("Cannot run map on a Node interface")}_ifNode(s){if(!sr(s))throw new TypeError("Callback function must return a Node");return s}traverse(s){s(this,null,null);function a(o,l){o.forEach(function(u,c,h){l(u,c,h),a(u,l)})}a(this,s)}transform(s){function a(o,l,u){var c=s(o,l,u);return c!==o?c:o.map(a)}return a(this,null,null)}filter(s){var a=[];return this.traverse(function(o,l,u){s(o,l,u)&&a.push(o)}),a}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map(function(s){return s.cloneDeep()})}equals(s){return s?this.type===s.type&&Cc(this,s):!1}toString(s){var a=this._getCustomString(s);return typeof a<"u"?a:this._toString(s)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(s){var a=this._getCustomString(s);return typeof a<"u"?a:this._toHTML(s)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(s){var a=this._getCustomString(s);return typeof a<"u"?a:this._toTex(s)}_toTex(s){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(s){if(s&&typeof s=="object")switch(typeof s.handler){case"object":case"undefined":return;case"function":return s.handler(this,s);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}return n},{isClass:!0,isNode:!0});function Ds(r){return r&&r.isIndexError?new Zo(r.index+1,r.min+1,r.max!==void 0?r.max+1:void 0):r}function mY(r){var{subset:e}=r;return function(n,i){try{if(Array.isArray(n))return e(n,i);if(n&&typeof n.subset=="function")return n.subset(i);if(typeof n=="string")return e(n,i);if(typeof n=="object"){if(!i.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return xs(n,i.getObjectProperty())}else throw new TypeError("Cannot apply index: unsupported type of object")}catch(s){throw Ds(s)}}}var TA="AccessorNode",aSe=["subset","Node"],oSe=X(TA,aSe,r=>{var{subset:e,Node:t}=r,n=mY({subset:e});function i(a){return!(Sc(a)||ro(a)||Vt(a)||Td(a)||tN(a)||Tc(a)||mi(a))}class s extends t{constructor(o,l){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(super(),!sr(o))throw new TypeError('Node expected for parameter "object"');if(!ey(l))throw new TypeError('IndexNode expected for parameter "index"');this.object=o,this.index=l,this.optionalChaining=u}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return TA}get isAccessorNode(){return!0}_compile(o,l){var u=this.object._compile(o,l),c=this.index._compile(o,l),h=this.optionalChaining,d=Sc(this.object)&&this.object.optionalChaining;if(this.index.isObjectProperty()){var f=this.index.getObjectProperty();return function(g,b,v){var w=v||{},y=u(g,b,w);if(h&&y==null){w.optionalShortCircuit=!0;return}if(!(d&&w!==null&&w!==void 0&&w.optionalShortCircuit))return xs(y,f)}}else return function(g,b,v){var w=v||{},y=u(g,b,w);if(h&&y==null){w.optionalShortCircuit=!0;return}if(!(d&&w!==null&&w!==void 0&&w.optionalShortCircuit)){var A=c(g,b,y);return n(y,A)}}}forEach(o){o(this.object,"object",this),o(this.index,"index",this)}map(o){return new s(this._ifNode(o(this.object,"object",this)),this._ifNode(o(this.index,"index",this)),this.optionalChaining)}clone(){return new s(this.object,this.index,this.optionalChaining)}_toString(o){var l=this.object.toString(o);i(this.object)&&(l="("+l+")");var u=this.optionalChaining?this.index.dotNotation?"?":"?.":"";return l+u+this.index.toString(o)}_toHTML(o){var l=this.object.toHTML(o);return i(this.object)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+this.index.toHTML(o)}_toTex(o){var l=this.object.toTex(o);return i(this.object)&&(l="\\left(' + object + '\\right)"),l+this.index.toTex(o)}toJSON(){return{mathjs:TA,object:this.object,index:this.index,optionalChaining:this.optionalChaining}}static fromJSON(o){return new s(o.object,o.index,o.optionalChaining)}}return Fn(s,"name",TA),s},{isClass:!0,isNode:!0}),CA="ArrayNode",lSe=["Node"],uSe=X(CA,lSe,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),this.items=i||[],!Array.isArray(this.items)||!this.items.every(sr))throw new TypeError("Array containing Nodes expected")}get type(){return CA}get isArrayNode(){return!0}_compile(i,s){var a=dd(this.items,function(u){return u._compile(i,s)}),o=i.config.matrix!=="Array";if(o){var l=i.matrix;return function(c,h,d){return l(dd(a,function(f){return f(c,h,d)}))}}else return function(c,h,d){return dd(a,function(f){return f(c,h,d)})}}forEach(i){for(var s=0;s<this.items.length;s++){var a=this.items[s];i(a,"items["+s+"]",this)}}map(i){for(var s=[],a=0;a<this.items.length;a++)s[a]=this._ifNode(i(this.items[a],"items["+a+"]",this));return new t(s)}clone(){return new t(this.items.slice(0))}_toString(i){var s=this.items.map(function(a){return a.toString(i)});return"["+s.join(", ")+"]"}toJSON(){return{mathjs:CA,items:this.items}}static fromJSON(i){return new t(i.items)}_toHTML(i){var s=this.items.map(function(a){return a.toHTML(i)});return'<span class="math-parenthesis math-square-parenthesis">[</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(i){function s(a,o){var l=a.some(ro)&&!a.every(ro),u=o||l,c=u?"&":"\\\\",h=a.map(function(d){return d.items?s(d.items,!o):d.toTex(i)}).join(c);return l||!u||u&&!o?"\\begin{bmatrix}"+h+"\\end{bmatrix}":h}return s(this.items,!1)}}return Fn(t,"name",CA),t},{isClass:!0,isNode:!0});function cSe(r){var{subset:e,matrix:t}=r;return function(i,s,a){try{if(Array.isArray(i)){var o=t(i).subset(s,a).valueOf();return o.forEach((l,u)=>{i[u]=l}),i}else{if(i&&typeof i.subset=="function")return i.subset(s,a);if(typeof i=="string")return e(i,s,a);if(typeof i=="object"){if(!s.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return D0(i,s.getObjectProperty(),a),i}else throw new TypeError("Cannot apply index: unsupported type of object")}}catch(l){throw Ds(l)}}}var zo=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:nullish":{op:"??",associativity:"left",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function NA(r,e){if(!e||e!=="auto")return r;for(var t=r;Tc(t);)t=t.content;return t}function hr(r,e,t,n){var i=r;e!=="keep"&&(i=r.getContent());for(var s=i.getIdentifier(),a=null,o=0;o<zo.length;o++)if(s in zo[o]){a=o;break}if(s==="OperatorNode:multiply"&&i.implicit&&t!=="show"){var l=NA(i.args[0],e);!(Vt(l)&&n&&n.getIdentifier()==="OperatorNode:divide"&&EP(NA(n.args[0],e)))&&!(l.getIdentifier()==="OperatorNode:divide"&&EP(NA(l.args[0],e))&&Vt(NA(l.args[1])))&&(a+=1)}return a}function jy(r,e){var t=r;e!=="keep"&&(t=r.getContent());var n=t.getIdentifier(),i=hr(t,e);if(i===null)return null;var s=zo[i][n];if(Je(s,"associativity")){if(s.associativity==="left")return"left";if(s.associativity==="right")return"right";throw Error("'"+n+"' has the invalid associativity '"+s.associativity+"'.")}return null}function eD(r,e,t){var n=t!=="keep"?r.getContent():r,i=t!=="keep"?r.getContent():e,s=n.getIdentifier(),a=i.getIdentifier(),o=hr(n,t);if(o===null)return null;var l=zo[o][s];if(Je(l,"associativeWith")&&l.associativeWith instanceof Array){for(var u=0;u<l.associativeWith.length;u++)if(l.associativeWith[u]===a)return!0;return!1}return null}function hSe(r){var e="OperatorNode:"+r;for(var t of zo)if(e in t)return t[e].op;return null}var DA="AssignmentNode",dSe=["subset","?matrix","Node"],fSe=X(DA,dSe,r=>{var{subset:e,matrix:t,Node:n}=r,i=mY({subset:e}),s=cSe({subset:e,matrix:t});function a(l,u,c){u||(u="keep");var h=hr(l,u,c),d=hr(l.value,u,c);return u==="all"||d!==null&&d<=h}class o extends n{constructor(u,c,h){if(super(),this.object=u,this.index=h?c:null,this.value=h||c,!mi(u)&&!Sc(u))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(mi(u)&&u.name==="end")throw new Error('Cannot assign to symbol "end"');if(this.index&&!ey(this.index))throw new TypeError('IndexNode expected as "index"');if(!sr(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return DA}get isAssignmentNode(){return!0}_compile(u,c){var h=this.object._compile(u,c),d=this.index?this.index._compile(u,c):null,f=this.value._compile(u,c),p=this.object.name;if(this.index)if(this.index.isObjectProperty()){var g=this.index.getObjectProperty();return function(A,x,_){var S=h(A,x,_),E=f(A,x,_);return D0(S,g,E),E}}else{if(mi(this.object))return function(A,x,_){var S=h(A,x,_),E=f(A,x,_),C=d(A,x,S);return A.set(p,s(S,C,E)),E};var b=this.object.object._compile(u,c);if(this.object.index.isObjectProperty()){var v=this.object.index.getObjectProperty();return function(A,x,_){var S=b(A,x,_),E=xs(S,v),C=d(A,x,E),N=f(A,x,_);return D0(S,v,s(E,C,N)),N}}else{var w=this.object.index._compile(u,c);return function(A,x,_){var S=b(A,x,_),E=w(A,x,S),C=i(S,E),N=d(A,x,C),D=f(A,x,_);return s(S,E,s(C,N,D)),D}}}else{if(!mi(this.object))throw new TypeError("SymbolNode expected as object");return function(A,x,_){var S=f(A,x,_);return A.set(p,S),S}}}forEach(u){u(this.object,"object",this),this.index&&u(this.index,"index",this),u(this.value,"value",this)}map(u){var c=this._ifNode(u(this.object,"object",this)),h=this.index?this._ifNode(u(this.index,"index",this)):null,d=this._ifNode(u(this.value,"value",this));return new o(c,h,d)}clone(){return new o(this.object,this.index,this.value)}_toString(u){var c=this.object.toString(u),h=this.index?this.index.toString(u):"",d=this.value.toString(u);return a(this,u&&u.parenthesis,u&&u.implicit)&&(d="("+d+")"),c+h+" = "+d}toJSON(){return{mathjs:DA,object:this.object,index:this.index,value:this.value}}static fromJSON(u){return new o(u.object,u.index,u.value)}_toHTML(u){var c=this.object.toHTML(u),h=this.index?this.index.toHTML(u):"",d=this.value.toHTML(u);return a(this,u&&u.parenthesis,u&&u.implicit)&&(d='<span class="math-paranthesis math-round-parenthesis">(</span>'+d+'<span class="math-paranthesis math-round-parenthesis">)</span>'),c+h+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+d}_toTex(u){var c=this.object.toTex(u),h=this.index?this.index.toTex(u):"",d=this.value.toTex(u);return a(this,u&&u.parenthesis,u&&u.implicit)&&(d="\\left(".concat(d,"\\right)")),c+h+"="+d}}return Fn(o,"name",DA),o},{isClass:!0,isNode:!0}),MA="BlockNode",mSe=["ResultSet","Node"],pSe=X(MA,mSe,r=>{var{ResultSet:e,Node:t}=r;class n extends t{constructor(s){if(super(),!Array.isArray(s))throw new Error("Array expected");this.blocks=s.map(function(a){var o=a&&a.node,l=a&&a.visible!==void 0?a.visible:!0;if(!sr(o))throw new TypeError('Property "node" must be a Node');if(typeof l!="boolean")throw new TypeError('Property "visible" must be a boolean');return{node:o,visible:l}})}get type(){return MA}get isBlockNode(){return!0}_compile(s,a){var o=dd(this.blocks,function(l){return{evaluate:l.node._compile(s,a),visible:l.visible}});return function(u,c,h){var d=[];return XK(o,function(p){var g=p.evaluate(u,c,h);p.visible&&d.push(g)}),new e(d)}}forEach(s){for(var a=0;a<this.blocks.length;a++)s(this.blocks[a].node,"blocks["+a+"].node",this)}map(s){for(var a=[],o=0;o<this.blocks.length;o++){var l=this.blocks[o],u=this._ifNode(s(l.node,"blocks["+o+"].node",this));a[o]={node:u,visible:l.visible}}return new n(a)}clone(){var s=this.blocks.map(function(a){return{node:a.node,visible:a.visible}});return new n(s)}_toString(s){return this.blocks.map(function(a){return a.node.toString(s)+(a.visible?"":";")}).join(`
`)}toJSON(){return{mathjs:MA,blocks:this.blocks}}static fromJSON(s){return new n(s.blocks)}_toHTML(s){return this.blocks.map(function(a){return a.node.toHTML(s)+(a.visible?"":'<span class="math-separator">;</span>')}).join('<span class="math-separator"><br /></span>')}_toTex(s){return this.blocks.map(function(a){return a.node.toTex(s)+(a.visible?"":";")}).join(`\\;\\;
`)}}return Fn(n,"name",MA),n},{isClass:!0,isNode:!0}),IA="ConditionalNode",gSe=["Node"],vSe=X(IA,gSe,r=>{var{Node:e}=r;function t(i){if(typeof i=="number"||typeof i=="boolean"||typeof i=="string")return!!i;if(i){if(xt(i))return!i.isZero();if(uc(i))return!!(i.re||i.im);if(_a(i))return!!i.value}if(i==null)return!1;throw new TypeError('Unsupported type of condition "'+dr(i)+'"')}class n extends e{constructor(s,a,o){if(super(),!sr(s))throw new TypeError("Parameter condition must be a Node");if(!sr(a))throw new TypeError("Parameter trueExpr must be a Node");if(!sr(o))throw new TypeError("Parameter falseExpr must be a Node");this.condition=s,this.trueExpr=a,this.falseExpr=o}get type(){return IA}get isConditionalNode(){return!0}_compile(s,a){var o=this.condition._compile(s,a),l=this.trueExpr._compile(s,a),u=this.falseExpr._compile(s,a);return function(h,d,f){return t(o(h,d,f))?l(h,d,f):u(h,d,f)}}forEach(s){s(this.condition,"condition",this),s(this.trueExpr,"trueExpr",this),s(this.falseExpr,"falseExpr",this)}map(s){return new n(this._ifNode(s(this.condition,"condition",this)),this._ifNode(s(this.trueExpr,"trueExpr",this)),this._ifNode(s(this.falseExpr,"falseExpr",this)))}clone(){return new n(this.condition,this.trueExpr,this.falseExpr)}_toString(s){var a=s&&s.parenthesis?s.parenthesis:"keep",o=hr(this,a,s&&s.implicit),l=this.condition.toString(s),u=hr(this.condition,a,s&&s.implicit);(a==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=o)&&(l="("+l+")");var c=this.trueExpr.toString(s),h=hr(this.trueExpr,a,s&&s.implicit);(a==="all"||this.trueExpr.type==="OperatorNode"||h!==null&&h<=o)&&(c="("+c+")");var d=this.falseExpr.toString(s),f=hr(this.falseExpr,a,s&&s.implicit);return(a==="all"||this.falseExpr.type==="OperatorNode"||f!==null&&f<=o)&&(d="("+d+")"),l+" ? "+c+" : "+d}toJSON(){return{mathjs:IA,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(s){return new n(s.condition,s.trueExpr,s.falseExpr)}_toHTML(s){var a=s&&s.parenthesis?s.parenthesis:"keep",o=hr(this,a,s&&s.implicit),l=this.condition.toHTML(s),u=hr(this.condition,a,s&&s.implicit);(a==="all"||this.condition.type==="OperatorNode"||u!==null&&u<=o)&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>');var c=this.trueExpr.toHTML(s),h=hr(this.trueExpr,a,s&&s.implicit);(a==="all"||this.trueExpr.type==="OperatorNode"||h!==null&&h<=o)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>');var d=this.falseExpr.toHTML(s),f=hr(this.falseExpr,a,s&&s.implicit);return(a==="all"||this.falseExpr.type==="OperatorNode"||f!==null&&f<=o)&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+'<span class="math-operator math-conditional-operator">?</span>'+c+'<span class="math-operator math-conditional-operator">:</span>'+d}_toTex(s){return"\\begin{cases} {"+this.trueExpr.toTex(s)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(s)+"}\\\\{"+this.falseExpr.toTex(s)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return Fn(n,"name",IA),n},{isClass:!0,isNode:!0}),zP=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},ySe={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},bSe={"":"\\--","":"\\---"," ":"~","	":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},wSe=function(e,t){return zP({},e,t)},xSe=function(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.preserveFormatting,n=t===void 0?!1:t,i=e.escapeMapFn,s=i===void 0?wSe:i,a=String(r),o="",l=s(zP({},ySe),n?zP({},bSe):{}),u=Object.keys(l),c=function(){var d=!1;u.forEach(function(f,p){d||a.length>=f.length&&a.slice(0,f.length)===f&&(o+=l[u[p]],a=a.slice(f.length,a.length),d=!0)}),d||(o+=a.slice(0,1),a=a.slice(1,a.length))};a;)c();return o};const _Se=tC(xSe);var jP={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},Wt={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},c8={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(Wt.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(Wt.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(Wt.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(Wt.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(Wt.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},fraction:{2:"\\frac{${args[0]}}{${args[1]}}"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(Wt.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(Wt.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : y^${args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(Wt.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(Wt.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(Wt.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(Wt.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(Wt.bitAnd,"${args[1]}\\right)")},bitNot:{1:Wt.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(Wt.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(Wt.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(Wt.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(Wt.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(Wt.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(Wt.and,"${args[1]}\\right)")},not:{1:Wt.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(Wt.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(Wt.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(Wt.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(Wt.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(Wt.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(Wt.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(Wt.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(Wt.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(Wt.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(Wt.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(Wt.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(Wt.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(Wt.to,"${args[1]}\\right)")},numeric:function(e,t){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},bigint:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(jP.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},ASe="\\mathrm{${name}}\\left(${args}\\right)",h8={deg:"^\\circ"};function qP(r){return _Se(r,{preserveFormatting:!0})}function pY(r,e){return e=typeof e>"u"?!1:e,e?Je(h8,r)?h8[r]:"\\mathrm{"+qP(r)+"}":Je(jP,r)?jP[r]:qP(r)}var PA="ConstantNode",ESe=["Node","isBounded"],SSe=X(PA,ESe,r=>{var{Node:e,isBounded:t}=r;class n extends e{constructor(s){super(),this.value=s}get type(){return PA}get isConstantNode(){return!0}_compile(s,a){var o=this.value;return function(){return o}}forEach(s){}map(s){return this.clone()}clone(){return new n(this.value)}_toString(s){return Pt(this.value,s)}_toHTML(s){var a=this._toString(s);switch(dr(this.value)){case"number":case"bigint":case"BigNumber":case"Fraction":return'<span class="math-number">'+a+"</span>";case"string":return'<span class="math-string">'+a+"</span>";case"boolean":return'<span class="math-boolean">'+a+"</span>";case"null":return'<span class="math-null-symbol">'+a+"</span>";case"undefined":return'<span class="math-undefined">'+a+"</span>";default:return'<span class="math-symbol">'+a+"</span>"}}toJSON(){return{mathjs:PA,value:this.value}}static fromJSON(s){return new n(s.value)}_toTex(s){var a=this._toString(s),o=dr(this.value);switch(o){case"string":return"\\mathtt{"+qP(a)+"}";case"number":case"BigNumber":{if(!t(this.value))return this.value.valueOf()<0?"-\\infty":"\\infty";var l=a.toLowerCase().indexOf("e");return l!==-1?a.substring(0,l)+"\\cdot10^{"+a.substring(l+1)+"}":a}case"bigint":return a.toString();case"Fraction":return this.value.toLatex();default:return a}}}return Fn(n,"name",PA),n},{isClass:!0,isNode:!0}),RA="FunctionAssignmentNode",TSe=["typed","Node"],CSe=X(RA,TSe,r=>{var{typed:e,Node:t}=r;function n(s,a,o){var l=hr(s,a,o),u=hr(s.expr,a,o);return a==="all"||u!==null&&u<=l}class i extends t{constructor(a,o,l){if(super(),typeof a!="string")throw new TypeError('String expected for parameter "name"');if(!Array.isArray(o))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!sr(l))throw new TypeError('Node expected for parameter "expr"');if(fY.has(a))throw new Error('Illegal function name, "'+a+'" is a reserved keyword');var u=new Set;for(var c of o){var h=typeof c=="string"?c:c.name;if(u.has(h))throw new Error('Duplicate parameter name "'.concat(h,'"'));u.add(h)}this.name=a,this.params=o.map(function(d){return d&&d.name||d}),this.types=o.map(function(d){return d&&d.type||"any"}),this.expr=l}get type(){return RA}get isFunctionAssignmentNode(){return!0}_compile(a,o){var l=Object.create(o);XK(this.params,function(g){l[g]=!0});var u=this.expr,c=u._compile(a,l),h=this.name,d=this.params,f=l6(this.types,","),p=h+"("+l6(this.params,", ")+")";return function(b,v,w){var y={};y[f]=function(){for(var x=Object.create(v),_=0;_<d.length;_++)x[d[_]]=arguments[_];return c(b,x,w)};var A=e(h,y);return A.syntax=p,A.expr=u.toString(),b.set(h,A),A}}forEach(a){a(this.expr,"expr",this)}map(a){var o=this._ifNode(a(this.expr,"expr",this));return new i(this.name,this.params.slice(0),o)}clone(){return new i(this.name,this.params.slice(0),this.expr)}_toString(a){var o=a&&a.parenthesis?a.parenthesis:"keep",l=this.expr.toString(a);return n(this,o,a&&a.implicit)&&(l="("+l+")"),this.name+"("+this.params.join(", ")+") = "+l}toJSON(){var a=this.types;return{mathjs:RA,name:this.name,params:this.params.map(function(o,l){return{name:o,type:a[l]}}),expr:this.expr}}static fromJSON(a){return new i(a.name,a.params,a.expr)}_toHTML(a){for(var o=a&&a.parenthesis?a.parenthesis:"keep",l=[],u=0;u<this.params.length;u++)l.push('<span class="math-symbol math-parameter">'+ao(this.params[u])+"</span>");var c=this.expr.toHTML(a);return n(this,o,a&&a.implicit)&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+ao(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+l.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+c}_toTex(a){var o=a&&a.parenthesis?a.parenthesis:"keep",l=this.expr.toTex(a);return n(this,o,a&&a.implicit)&&(l="\\left(".concat(l,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(pY).join(",")+"\\right)="+l}}return Fn(i,"name",RA),i},{isClass:!0,isNode:!0}),kA="IndexNode",NSe=["Node","size"],DSe=X(kA,NSe,r=>{var{Node:e,size:t}=r;class n extends e{constructor(s,a){if(super(),this.dimensions=s,this.dotNotation=a||!1,!Array.isArray(s)||!s.every(sr))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return kA}get isIndexNode(){return!0}_compile(s,a){var o=dd(this.dimensions,function(u,c){var h=u.filter(p=>p.isSymbolNode&&p.name==="end").length>0;if(h){var d=Object.create(a);d.end=!0;var f=u._compile(s,d);return function(g,b,v){if(!ot(v)&&!cr(v)&&!mn(v))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+dr(v));var w=t(v),y=Object.create(b);return y.end=w[c],f(g,y,v)}}else return u._compile(s,a)}),l=xs(s,"index");return function(c,h,d){var f=dd(o,function(p){return p(c,h,d)});return l(...f)}}forEach(s){for(var a=0;a<this.dimensions.length;a++)s(this.dimensions[a],"dimensions["+a+"]",this)}map(s){for(var a=[],o=0;o<this.dimensions.length;o++)a[o]=this._ifNode(s(this.dimensions[o],"dimensions["+o+"]",this));return new n(a,this.dotNotation)}clone(){return new n(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return this.dimensions.length===1&&Vt(this.dimensions[0])&&typeof this.dimensions[0].value=="string"}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(s){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:kA,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(s){return new n(s.dimensions,s.dotNotation)}_toHTML(s){for(var a=[],o=0;o<this.dimensions.length;o++)a[o]=this.dimensions[o].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+ao(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+a.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(s){var a=this.dimensions.map(function(o){return o.toTex(s)});return this.dotNotation?"."+this.getObjectProperty():"_{"+a.join(",")+"}"}}return Fn(n,"name",kA),n},{isClass:!0,isNode:!0}),FA="ObjectNode",MSe=["Node"],ISe=X(FA,MSe,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),this.properties=i||{},i&&(typeof i!="object"||!Object.keys(i).every(function(s){return sr(i[s])})))throw new TypeError("Object containing Nodes expected")}get type(){return FA}get isObjectNode(){return!0}_compile(i,s){var a={};for(var o in this.properties)if(Je(this.properties,o)){var l=Ag(o),u=JSON.parse(l),c=xs(this.properties,o);a[u]=c._compile(i,s)}return function(d,f,p){var g={};for(var b in a)Je(a,b)&&(g[b]=a[b](d,f,p));return g}}forEach(i){for(var s in this.properties)Je(this.properties,s)&&i(this.properties[s],"properties["+Ag(s)+"]",this)}map(i){var s={};for(var a in this.properties)Je(this.properties,a)&&(s[a]=this._ifNode(i(this.properties[a],"properties["+Ag(a)+"]",this)));return new t(s)}clone(){var i={};for(var s in this.properties)Je(this.properties,s)&&(i[s]=this.properties[s]);return new t(i)}_toString(i){var s=[];for(var a in this.properties)Je(this.properties,a)&&s.push(Ag(a)+": "+this.properties[a].toString(i));return"{"+s.join(", ")+"}"}toJSON(){return{mathjs:FA,properties:this.properties}}static fromJSON(i){return new t(i.properties)}_toHTML(i){var s=[];for(var a in this.properties)Je(this.properties,a)&&s.push('<span class="math-symbol math-property">'+ao(a)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[a].toHTML(i));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+s.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(i){var s=[];for(var a in this.properties)Je(this.properties,a)&&s.push("\\mathbf{"+a+":} & "+this.properties[a].toTex(i)+"\\\\");var o="\\left\\{\\begin{array}{ll}"+s.join(`
`)+"\\end{array}\\right\\}";return o}}return Fn(t,"name",FA),t},{isClass:!0,isNode:!0});function Eb(r,e){return new wK(r,new JC(e),new Set(Object.keys(e)))}var OA="OperatorNode",PSe=["Node"],RSe=X(OA,PSe,r=>{var{Node:e}=r;function t(s,a){var o=s;if(a==="auto")for(;Tc(o);)o=o.content;return Vt(o)?!0:xn(o)?t(o.args[0],a):!1}function n(s,a,o,l,u){var c=hr(s,a,o),h=jy(s,a);if(a==="all"||l.length>2&&s.getIdentifier()!=="OperatorNode:add"&&s.getIdentifier()!=="OperatorNode:multiply")return l.map(function(N){switch(N.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}});var d;switch(l.length){case 0:d=[];break;case 1:{var f=hr(l[0],a,o,s);if(u&&f!==null){var p,g;if(a==="keep"?(p=l[0].getIdentifier(),g=s.getIdentifier()):(p=l[0].getContent().getIdentifier(),g=s.getContent().getIdentifier()),zo[c][g].latexLeftParens===!1){d=[!1];break}if(zo[f][p].latexParens===!1){d=[!1];break}}if(f===null){d=[!1];break}if(f<=c){d=[!0];break}d=[!1]}break;case 2:{var b,v=hr(l[0],a,o,s),w=eD(s,l[0],a);v===null?b=!1:v===c&&h==="right"&&!w||v<c?b=!0:b=!1;var y,A=hr(l[1],a,o,s),x=eD(s,l[1],a);if(A===null?y=!1:A===c&&h==="left"&&!x||A<c?y=!0:y=!1,u){var _,S,E;a==="keep"?(_=s.getIdentifier(),S=s.args[0].getIdentifier(),E=s.args[1].getIdentifier()):(_=s.getContent().getIdentifier(),S=s.args[0].getContent().getIdentifier(),E=s.args[1].getContent().getIdentifier()),v!==null&&(zo[c][_].latexLeftParens===!1&&(b=!1),zo[v][S].latexParens===!1&&(b=!1)),A!==null&&(zo[c][_].latexRightParens===!1&&(y=!1),zo[A][E].latexParens===!1&&(y=!1))}d=[b,y]}break;default:(s.getIdentifier()==="OperatorNode:add"||s.getIdentifier()==="OperatorNode:multiply")&&(d=l.map(function(N){var D=hr(N,a,o,s),M=eD(s,N,a),I=jy(N,a);return D===null?!1:c===D&&h===I&&!M?!0:D<c}));break}if(l.length>=2&&s.getIdentifier()==="OperatorNode:multiply"&&s.implicit&&a!=="all"&&o==="hide")for(var C=1;C<d.length;++C)t(l[C],a)&&!d[C-1]&&(a!=="keep"||!Tc(l[C-1]))&&(d[C]=!0);return d}class i extends e{constructor(a,o,l,u,c){if(super(),typeof a!="string")throw new TypeError('string expected for parameter "op"');if(typeof o!="string")throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(l)||!l.every(sr))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=u===!0,this.isPercentage=c===!0,this.op=a,this.fn=o,this.args=l||[]}get type(){return OA}get isOperatorNode(){return!0}_compile(a,o){if(typeof this.fn!="string"||!LF(a,this.fn))throw a[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var l=xs(a,this.fn),u=dd(this.args,function(p){return p._compile(a,o)});if(typeof l=="function"&&l.rawArgs===!0){var c=this.args;return function(g,b,v){return l(c,a,Eb(g,b))}}else if(u.length===1){var h=u[0];return function(g,b,v){return l(h(g,b,v))}}else if(u.length===2){var d=u[0],f=u[1];return function(g,b,v){return l(d(g,b,v),f(g,b,v))}}else return function(g,b,v){return l.apply(null,dd(u,function(w){return w(g,b,v)}))}}forEach(a){for(var o=0;o<this.args.length;o++)a(this.args[o],"args["+o+"]",this)}map(a){for(var o=[],l=0;l<this.args.length;l++)o[l]=this._ifNode(a(this.args[l],"args["+l+"]",this));return new i(this.op,this.fn,o,this.implicit,this.isPercentage)}clone(){return new i(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return this.args.length===1}isBinary(){return this.args.length===2}_toString(a){var o=a&&a.parenthesis?a.parenthesis:"keep",l=a&&a.implicit?a.implicit:"hide",u=this.args,c=n(this,o,l,u,!1);if(u.length===1){var h=jy(this,o),d=u[0].toString(a);c[0]&&(d="("+d+")");var f=/[a-zA-Z]+/.test(this.op);return h==="right"?this.op+(f?" ":"")+d:h==="left"?d+(f?" ":"")+this.op:d+this.op}else if(u.length===2){var p=u[0].toString(a),g=u[1].toString(a);return c[0]&&(p="("+p+")"),c[1]&&(g="("+g+")"),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?p+" "+g:p+" "+this.op+" "+g}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var b=u.map(function(v,w){return v=v.toString(a),c[w]&&(v="("+v+")"),v});return this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?b.join(" "):b.join(" "+this.op+" ")}else return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:OA,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(a){return new i(a.op,a.fn,a.args,a.implicit,a.isPercentage)}_toHTML(a){var o=a&&a.parenthesis?a.parenthesis:"keep",l=a&&a.implicit?a.implicit:"hide",u=this.args,c=n(this,o,l,u,!1);if(u.length===1){var h=jy(this,o),d=u[0].toHTML(a);return c[0]&&(d='<span class="math-parenthesis math-round-parenthesis">(</span>'+d+'<span class="math-parenthesis math-round-parenthesis">)</span>'),h==="right"?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+ao(this.op)+"</span>"+d:d+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+ao(this.op)+"</span>"}else if(u.length===2){var f=u[0].toHTML(a),p=u[1].toHTML(a);return c[0]&&(f='<span class="math-parenthesis math-round-parenthesis">(</span>'+f+'<span class="math-parenthesis math-round-parenthesis">)</span>'),c[1]&&(p='<span class="math-parenthesis math-round-parenthesis">(</span>'+p+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?f+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+p:f+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ao(this.op)+"</span>"+p}else{var g=u.map(function(b,v){return b=b.toHTML(a),c[v]&&(b='<span class="math-parenthesis math-round-parenthesis">(</span>'+b+'<span class="math-parenthesis math-round-parenthesis">)</span>'),b});return u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")?this.implicit&&this.getIdentifier()==="OperatorNode:multiply"&&l==="hide"?g.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):g.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ao(this.op)+"</span>"):'<span class="math-function">'+ao(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+g.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}}_toTex(a){var o=a&&a.parenthesis?a.parenthesis:"keep",l=a&&a.implicit?a.implicit:"hide",u=this.args,c=n(this,o,l,u,!0),h=Wt[this.fn];if(h=typeof h>"u"?this.op:h,u.length===1){var d=jy(this,o),f=u[0].toTex(a);return c[0]&&(f="\\left(".concat(f,"\\right)")),d==="right"?h+f:f+h}else if(u.length===2){var p=u[0],g=p.toTex(a);c[0]&&(g="\\left(".concat(g,"\\right)"));var b=u[1],v=b.toTex(a);c[1]&&(v="\\left(".concat(v,"\\right)"));var w;switch(o==="keep"?w=p.getIdentifier():w=p.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return h+"{"+g+"}{"+v+"}";case"OperatorNode:pow":switch(g="{"+g+"}",v="{"+v+"}",w){case"ConditionalNode":case"OperatorNode:divide":g="\\left(".concat(g,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&l==="hide")return g+"~"+v}return g+h+v}else if(u.length>2&&(this.getIdentifier()==="OperatorNode:add"||this.getIdentifier()==="OperatorNode:multiply")){var y=u.map(function(A,x){return A=A.toTex(a),c[x]&&(A="\\left(".concat(A,"\\right)")),A});return this.getIdentifier()==="OperatorNode:multiply"&&this.implicit&&l==="hide"?y.join("~"):y.join(h)}else return"\\mathrm{"+this.fn+"}\\left("+u.map(function(A){return A.toTex(a)}).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return Fn(i,"name",OA),i},{isClass:!0,isNode:!0}),BA="ParenthesisNode",kSe=["Node"],FSe=X(BA,kSe,r=>{var{Node:e}=r;class t extends e{constructor(i){if(super(),!sr(i))throw new TypeError('Node expected for parameter "content"');this.content=i}get type(){return BA}get isParenthesisNode(){return!0}_compile(i,s){return this.content._compile(i,s)}getContent(){return this.content.getContent()}forEach(i){i(this.content,"content",this)}map(i){var s=i(this.content,"content",this);return new t(s)}clone(){return new t(this.content)}_toString(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"("+this.content.toString(i)+")":this.content.toString(i)}toJSON(){return{mathjs:BA,content:this.content}}static fromJSON(i){return new t(i.content)}_toHTML(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(i)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(i)}_toTex(i){return!i||i&&!i.parenthesis||i&&i.parenthesis==="keep"?"\\left(".concat(this.content.toTex(i),"\\right)"):this.content.toTex(i)}}return Fn(t,"name",BA),t},{isClass:!0,isNode:!0}),LA="RangeNode",OSe=["Node"],BSe=X(LA,OSe,r=>{var{Node:e}=r;function t(i,s,a){var o=hr(i,s,a),l={},u=hr(i.start,s,a);if(l.start=u!==null&&u<=o||s==="all",i.step){var c=hr(i.step,s,a);l.step=c!==null&&c<=o||s==="all"}var h=hr(i.end,s,a);return l.end=h!==null&&h<=o||s==="all",l}class n extends e{constructor(s,a,o){if(super(),!sr(s))throw new TypeError("Node expected");if(!sr(a))throw new TypeError("Node expected");if(o&&!sr(o))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=s,this.end=a,this.step=o||null}get type(){return LA}get isRangeNode(){return!0}needsEnd(){var s=this.filter(function(a){return mi(a)&&a.name==="end"});return s.length>0}_compile(s,a){var o=s.range,l=this.start._compile(s,a),u=this.end._compile(s,a);if(this.step){var c=this.step._compile(s,a);return function(d,f,p){return o(l(d,f,p),u(d,f,p),c(d,f,p))}}else return function(d,f,p){return o(l(d,f,p),u(d,f,p))}}forEach(s){s(this.start,"start",this),s(this.end,"end",this),this.step&&s(this.step,"step",this)}map(s){return new n(this._ifNode(s(this.start,"start",this)),this._ifNode(s(this.end,"end",this)),this.step&&this._ifNode(s(this.step,"step",this)))}clone(){return new n(this.start,this.end,this.step&&this.step)}_toString(s){var a=s&&s.parenthesis?s.parenthesis:"keep",o=t(this,a,s&&s.implicit),l,u=this.start.toString(s);if(o.start&&(u="("+u+")"),l=u,this.step){var c=this.step.toString(s);o.step&&(c="("+c+")"),l+=":"+c}var h=this.end.toString(s);return o.end&&(h="("+h+")"),l+=":"+h,l}toJSON(){return{mathjs:LA,start:this.start,end:this.end,step:this.step}}static fromJSON(s){return new n(s.start,s.end,s.step)}_toHTML(s){var a=s&&s.parenthesis?s.parenthesis:"keep",o=t(this,a,s&&s.implicit),l,u=this.start.toHTML(s);if(o.start&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l=u,this.step){var c=this.step.toHTML(s);o.step&&(c='<span class="math-parenthesis math-round-parenthesis">(</span>'+c+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+c}var h=this.end.toHTML(s);return o.end&&(h='<span class="math-parenthesis math-round-parenthesis">(</span>'+h+'<span class="math-parenthesis math-round-parenthesis">)</span>'),l+='<span class="math-operator math-range-operator">:</span>'+h,l}_toTex(s){var a=s&&s.parenthesis?s.parenthesis:"keep",o=t(this,a,s&&s.implicit),l=this.start.toTex(s);if(o.start&&(l="\\left(".concat(l,"\\right)")),this.step){var u=this.step.toTex(s);o.step&&(u="\\left(".concat(u,"\\right)")),l+=":"+u}var c=this.end.toTex(s);return o.end&&(c="\\left(".concat(c,"\\right)")),l+=":"+c,l}}return Fn(n,"name",LA),n},{isClass:!0,isNode:!0}),$A="RelationalNode",LSe=["Node"],$Se=X($A,LSe,r=>{var{Node:e}=r,t={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class n extends e{constructor(s,a){if(super(),!Array.isArray(s))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(a))throw new TypeError("Parameter params must be an array");if(s.length!==a.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=s,this.params=a}get type(){return $A}get isRelationalNode(){return!0}_compile(s,a){var o=this,l=this.params.map(u=>u._compile(s,a));return function(c,h,d){for(var f,p=l[0](c,h,d),g=0;g<o.conditionals.length;g++){f=p,p=l[g+1](c,h,d);var b=xs(s,o.conditionals[g]);if(!b(f,p))return!1}return!0}}forEach(s){this.params.forEach((a,o)=>s(a,"params["+o+"]",this),this)}map(s){return new n(this.conditionals.slice(),this.params.map((a,o)=>this._ifNode(s(a,"params["+o+"]",this)),this))}clone(){return new n(this.conditionals,this.params)}_toString(s){for(var a=s&&s.parenthesis?s.parenthesis:"keep",o=hr(this,a,s&&s.implicit),l=this.params.map(function(h,d){var f=hr(h,a,s&&s.implicit);return a==="all"||f!==null&&f<=o?"("+h.toString(s)+")":h.toString(s)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=" "+t[this.conditionals[c]],u+=" "+l[c+1];return u}toJSON(){return{mathjs:$A,conditionals:this.conditionals,params:this.params}}static fromJSON(s){return new n(s.conditionals,s.params)}_toHTML(s){for(var a=s&&s.parenthesis?s.parenthesis:"keep",o=hr(this,a,s&&s.implicit),l=this.params.map(function(h,d){var f=hr(h,a,s&&s.implicit);return a==="all"||f!==null&&f<=o?'<span class="math-parenthesis math-round-parenthesis">(</span>'+h.toHTML(s)+'<span class="math-parenthesis math-round-parenthesis">)</span>':h.toHTML(s)}),u=l[0],c=0;c<this.conditionals.length;c++)u+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+ao(t[this.conditionals[c]])+"</span>"+l[c+1];return u}_toTex(s){for(var a=s&&s.parenthesis?s.parenthesis:"keep",o=hr(this,a,s&&s.implicit),l=this.params.map(function(h,d){var f=hr(h,a,s&&s.implicit);return a==="all"||f!==null&&f<=o?"\\left("+h.toTex(s)+"\right)":h.toTex(s)}),u=l[0],c=0;c<this.conditionals.length;c++)u+=Wt[this.conditionals[c]]+l[c+1];return u}}return Fn(n,"name",$A),n},{isClass:!0,isNode:!0}),VSe="SymbolNode",USe=["math","?Unit","Node"],zSe=X(VSe,USe,r=>{var{math:e,Unit:t,Node:n}=r;function i(a){return t?t.isValuelessUnit(a):!1}class s extends n{constructor(o){if(super(),typeof o!="string")throw new TypeError('String expected for parameter "name"');this.name=o}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(o,l){var u=this.name;if(l[u]===!0)return function(h,d,f){return xs(d,u)};if(u in o)return function(h,d,f){return h.has(u)?h.get(u):xs(o,u)};var c=i(u);return function(h,d,f){return h.has(u)?h.get(u):c?new t(null,u):s.onUndefinedSymbol(u)}}forEach(o){}map(o){return this.clone()}static onUndefinedSymbol(o){throw new Error("Undefined symbol "+o)}clone(){return new s(this.name)}_toString(o){return this.name}_toHTML(o){var l=ao(this.name);return l==="true"||l==="false"?'<span class="math-symbol math-boolean">'+l+"</span>":l==="i"?'<span class="math-symbol math-imaginary-symbol">'+l+"</span>":l==="Infinity"?'<span class="math-symbol math-infinity-symbol">'+l+"</span>":l==="NaN"?'<span class="math-symbol math-nan-symbol">'+l+"</span>":l==="null"?'<span class="math-symbol math-null-symbol">'+l+"</span>":l==="undefined"?'<span class="math-symbol math-undefined-symbol">'+l+"</span>":'<span class="math-symbol">'+l+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(o){return new s(o.name)}_toTex(o){var l=!1;typeof e[this.name]>"u"&&i(this.name)&&(l=!0);var u=pY(this.name,l);return u[0]==="\\"?u:" "+u}}return s},{isClass:!0,isNode:!0}),VA="FunctionNode",jSe=["math","Node","SymbolNode"],qSe=X(VA,jSe,r=>{var e,{math:t,Node:n,SymbolNode:i}=r,s=l=>Pt(l,{truncate:78});function a(l,u,c){for(var h="",d=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,f=0,p;(p=d.exec(l))!==null;)if(h+=l.substring(f,p.index),f=p.index,p[0]==="$$")h+="$",f++;else{f+=p[0].length;var g=u[p[1]];if(!g)throw new ReferenceError("Template: Property "+p[1]+" does not exist.");if(p[2]===void 0)switch(typeof g){case"string":h+=g;break;case"object":if(sr(g))h+=g.toTex(c);else if(Array.isArray(g))h+=g.map(function(b,v){if(sr(b))return b.toTex(c);throw new TypeError("Template: "+p[1]+"["+v+"] is not a Node.")}).join(",");else throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes");break;default:throw new TypeError("Template: "+p[1]+" has to be a Node, String or array of Nodes")}else if(sr(g[p[2]]&&g[p[2]]))h+=g[p[2]].toTex(c);else throw new TypeError("Template: "+p[1]+"["+p[2]+"] is not a Node.")}return h+=l.slice(f),h}class o extends n{constructor(u,c,h){if(super(),typeof u=="string"&&(u=new i(u)),!sr(u))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(c)||!c.every(sr))throw new TypeError('Array containing Nodes expected for parameter "args"');var d=typeof h;if(!(d==="undefined"||d==="boolean"))throw new TypeError("optional flag, if specified, must be boolean");this.fn=u,this.args=c||[],this.optional=!!h}get name(){return this.fn.name||""}get type(){return VA}get isFunctionNode(){return!0}_compile(u,c){var h=this.args.map(C=>C._compile(u,c)),d=this.optional||Sc(this.fn)&&this.fn.optionalChaining;if(mi(this.fn)){var f=this.fn.name;if(c[f]){var w=this.args;return function(N,D,M){var I=xs(D,f);if(!(d&&I===void 0)){if(typeof I!="function")throw new TypeError("Argument '".concat(f,"' was not a function; received: ").concat(s(I)));if(I.rawArgs)return I(w,u,Eb(N,D));var V=h.map(K=>K(N,D,M));return I.apply(I,V)}}}else{var p=f in u?xs(u,f):void 0,g=typeof p=="function"&&p.rawArgs===!0,b=C=>{var N;if(C.has(f))N=C.get(f);else if(f in u)N=xs(u,f);else if(d)N=void 0;else return o.onUndefinedFunction(f);if(typeof N=="function"||d&&N===void 0)return N;throw new TypeError("'".concat(f,`' is not a function; its value is:
  `).concat(s(N)))};if(g){var v=this.args;return function(N,D,M){var I=b(N);if(I.rawArgs===!0)return I(v,u,Eb(N,D));var V=h.map(K=>K(N,D,M));return I(...V)}}else switch(h.length){case 0:return function(N,D,M){var I=b(N);if(!(d&&I===void 0))return I()};case 1:return function(N,D,M){var I=b(N);if(!(d&&I===void 0)){var V=h[0];return I(V(N,D,M))}};case 2:return function(N,D,M){var I=b(N);if(!(d&&I===void 0)){var V=h[0],K=h[1];return I(V(N,D,M),K(N,D,M))}};default:return function(N,D,M){var I=b(N);if(!(d&&I===void 0)){var V=h.map(K=>K(N,D,M));return I(...V)}}}}}else if(Sc(this.fn)&&ey(this.fn.index)&&this.fn.index.isObjectProperty()){var y=this.fn.object._compile(u,c),A=this.fn.index.getObjectProperty(),x=this.args;return function(N,D,M){var I=y(N,D,M);if(!(d&&(I==null||I[A]===void 0))){var V=cge(I,A);if(V!=null&&V.rawArgs)return V(x,u,Eb(N,D));var K=h.map(F=>F(N,D,M));return V.apply(I,K)}}}else{var _=this.fn.toString(),S=this.fn._compile(u,c),E=this.args;return function(N,D,M){var I=S(N,D,M);if(!(d&&I===void 0)){if(typeof I!="function")throw new TypeError("Expression '".concat(_,"' did not evaluate to a function; value is:")+`
  `.concat(s(I)));if(I.rawArgs)return I(E,u,Eb(N,D));var V=h.map(K=>K(N,D,M));return I.apply(I,V)}}}}forEach(u){u(this.fn,"fn",this);for(var c=0;c<this.args.length;c++)u(this.args[c],"args["+c+"]",this)}map(u){for(var c=this._ifNode(u(this.fn,"fn",this)),h=[],d=0;d<this.args.length;d++)h[d]=this._ifNode(u(this.args[d],"args["+d+"]",this));return new o(c,h)}clone(){return new o(this.fn,this.args.slice(0))}toString(u){var c,h=this.fn.toString(u);return u&&typeof u.handler=="object"&&Je(u.handler,h)&&(c=u.handler[h](this,u)),typeof c<"u"?c:super.toString(u)}_toString(u){var c=this.args.map(function(d){return d.toString(u)}),h=h_(this.fn)?"("+this.fn.toString(u)+")":this.fn.toString(u);return h+"("+c.join(", ")+")"}toJSON(){return{mathjs:VA,fn:this.fn,args:this.args}}_toHTML(u){var c=this.args.map(function(h){return h.toHTML(u)});return'<span class="math-function">'+ao(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(u){var c;return u&&typeof u.handler=="object"&&Je(u.handler,this.name)&&(c=u.handler[this.name](this,u)),typeof c<"u"?c:super.toTex(u)}_toTex(u){var c=this.args.map(function(f){return f.toTex(u)}),h;c8[this.name]&&(h=c8[this.name]),t[this.name]&&(typeof t[this.name].toTex=="function"||typeof t[this.name].toTex=="object"||typeof t[this.name].toTex=="string")&&(h=t[this.name].toTex);var d;switch(typeof h){case"function":d=h(this,u);break;case"string":d=a(h,this,u);break;case"object":switch(typeof h[c.length]){case"function":d=h[c.length](this,u);break;case"string":d=a(h[c.length],this,u);break}}return typeof d<"u"?d:a(ASe,this,u)}getIdentifier(){return this.type+":"+this.name}}return e=o,Fn(o,"name",VA),Fn(o,"onUndefinedFunction",function(l){throw new Error("Undefined function "+l)}),Fn(o,"fromJSON",function(l){return new e(l.fn,l.args)}),o},{isClass:!0,isNode:!0}),d8="parse",HSe=["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],GSe=X(d8,HSe,r=>{var{typed:e,numeric:t,config:n,AccessorNode:i,ArrayNode:s,AssignmentNode:a,BlockNode:o,ConditionalNode:l,ConstantNode:u,FunctionAssignmentNode:c,FunctionNode:h,IndexNode:d,ObjectNode:f,OperatorNode:p,ParenthesisNode:g,RangeNode:b,RelationalNode:v,SymbolNode:w}=r,y=e(d8,{string:function(oe){return ue(oe,{})},"Array | Matrix":function(oe){return A(oe,{})},"string, Object":function(oe,we){var Me=we.nodes!==void 0?we.nodes:{};return ue(oe,Me)},"Array | Matrix, Object":A});function A(B){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},we=oe.nodes!==void 0?oe.nodes:{};return _t(B,function(Me){if(typeof Me!="string")throw new TypeError("String expected");return ue(Me,we)})}var x={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},_={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"?.":!0,"??":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},S={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},E={true:!0,false:!1,null:null,undefined:void 0},C=["NaN","Infinity"],N={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function D(){return{extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:x.NULL,nestingLevel:0,conditionalLevel:null}}function M(B,oe){return B.expression.substr(B.index,oe)}function I(B){return M(B,1)}function V(B){B.index++}function K(B){return B.expression.charAt(B.index-1)}function F(B){return B.expression.charAt(B.index+1)}function U(B){for(B.tokenType=x.NULL,B.token="",B.comment="";;){if(I(B)==="#")for(;I(B)!==`
`&&I(B)!=="";)B.comment+=I(B),V(B);if(y.isWhitespace(I(B),B.nestingLevel))V(B);else break}if(I(B)===""){B.tokenType=x.DELIMITER;return}if(I(B)===`
`&&!B.nestingLevel){B.tokenType=x.DELIMITER,B.token=I(B),V(B);return}var oe=I(B),we=M(B,2),Me=M(B,3);if(Me.length===3&&_[Me]){B.tokenType=x.DELIMITER,B.token=Me,V(B),V(B),V(B);return}if(we.length===2&&_[we]&&(we!=="?."||!y.isDigit(B.expression.charAt(B.index+2)))){B.tokenType=x.DELIMITER,B.token=we,V(B),V(B);return}if(_[oe]){B.tokenType=x.DELIMITER,B.token=oe,V(B);return}if(y.isDigitDot(oe)){B.tokenType=x.NUMBER;var ze=M(B,2);if(ze==="0b"||ze==="0o"||ze==="0x"){for(B.token+=I(B),V(B),B.token+=I(B),V(B);y.isAlpha(I(B),K(B),F(B))||y.isDigit(I(B));)B.token+=I(B),V(B);if(I(B)===".")for(B.token+=".",V(B);y.isAlpha(I(B),K(B),F(B))||y.isDigit(I(B));)B.token+=I(B),V(B);else if(I(B)==="i")for(B.token+="i",V(B);y.isDigit(I(B));)B.token+=I(B),V(B);return}if(I(B)==="."){if(B.token+=I(B),V(B),!y.isDigit(I(B))){B.tokenType=x.DELIMITER;return}}else{for(;y.isDigit(I(B));)B.token+=I(B),V(B);y.isDecimalMark(I(B),F(B))&&(B.token+=I(B),V(B))}for(;y.isDigit(I(B));)B.token+=I(B),V(B);if(I(B)==="E"||I(B)==="e"){if(y.isDigit(F(B))||F(B)==="-"||F(B)==="+"){if(B.token+=I(B),V(B),(I(B)==="+"||I(B)==="-")&&(B.token+=I(B),V(B)),!y.isDigit(I(B)))throw lt(B,'Digit expected, got "'+I(B)+'"');for(;y.isDigit(I(B));)B.token+=I(B),V(B);if(y.isDecimalMark(I(B),F(B)))throw lt(B,'Digit expected, got "'+I(B)+'"')}else if(y.isDecimalMark(F(B),B.expression.charAt(B.index+2)))throw V(B),lt(B,'Digit expected, got "'+I(B)+'"')}return}if(y.isAlpha(I(B),K(B),F(B))){for(;y.isAlpha(I(B),K(B),F(B))||y.isDigit(I(B));)B.token+=I(B),V(B);Je(S,B.token)?B.tokenType=x.DELIMITER:B.tokenType=x.SYMBOL;return}for(B.tokenType=x.UNKNOWN;I(B)!=="";)B.token+=I(B),V(B);throw lt(B,'Syntax error in part "'+B.token+'"')}function j(B){do U(B);while(B.token===`
`)}function G(B){B.nestingLevel++}function ee(B){B.nestingLevel--}y.isAlpha=function(oe,we,Me){return y.isValidLatinOrGreek(oe)||y.isValidMathSymbol(oe,Me)||y.isValidMathSymbol(we,oe)},y.isValidLatinOrGreek=function(oe){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(oe)},y.isValidMathSymbol=function(oe,we){return/^[\uD835]$/.test(oe)&&/^[\uDC00-\uDFFF]$/.test(we)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(we)},y.isWhitespace=function(oe,we){return oe===" "||oe==="	"||oe===""||oe===`
`&&we>0},y.isDecimalMark=function(oe,we){return oe==="."&&we!=="/"&&we!=="*"&&we!=="^"},y.isDigitDot=function(oe){return oe>="0"&&oe<="9"||oe==="."},y.isDigit=function(oe){return oe>="0"&&oe<="9"};function ue(B,oe){var we=D();An(we,{expression:B,extraNodes:oe}),U(we);var Me=te(we);if(we.token!=="")throw we.tokenType===x.DELIMITER?pr(we,"Unexpected operator "+we.token):lt(we,'Unexpected part "'+we.token+'"');return Me}function te(B){var oe,we=[],Me;for(B.token!==""&&B.token!==`
`&&B.token!==";"&&(oe=R(B),B.comment&&(oe.comment=B.comment));B.token===`
`||B.token===";";)we.length===0&&oe&&(Me=B.token!==";",we.push({node:oe,visible:Me})),U(B),B.token!==`
`&&B.token!==";"&&B.token!==""&&(oe=R(B),B.comment&&(oe.comment=B.comment),Me=B.token!==";",we.push({node:oe,visible:Me}));return we.length>0?new o(we):(oe||(oe=new u(void 0),B.comment&&(oe.comment=B.comment)),oe)}function R(B){var oe,we,Me,ze,ut=Y(B);if(B.token==="="){if(mi(ut))return oe=ut.name,j(B),Me=R(B),new a(new w(oe),Me);if(Sc(ut)){if(ut.optionalChaining)throw lt(B,"Cannot assign to optional chain");return j(B),Me=R(B),new a(ut.object,ut.index,Me)}else if(Td(ut)&&mi(ut.fn)&&(ze=!0,we=[],oe=ut.name,ut.args.forEach(function(vn,Oa){mi(vn)?we[Oa]=vn.name:ze=!1}),ze))return j(B),Me=R(B),new c(oe,we,Me);throw lt(B,"Invalid left hand side of assignment operator =")}return ut}function Y(B){for(var oe=H(B);B.token==="?";){var we=B.conditionalLevel;B.conditionalLevel=B.nestingLevel,j(B);var Me=oe,ze=R(B);if(B.token!==":")throw lt(B,"False part of conditional expression expected");B.conditionalLevel=null,j(B);var ut=R(B);oe=new l(Me,ze,ut),B.conditionalLevel=we}return oe}function H(B){for(var oe=he(B);B.token==="or";)j(B),oe=new p("or","or",[oe,he(B)]);return oe}function he(B){for(var oe=fe(B);B.token==="xor";)j(B),oe=new p("xor","xor",[oe,fe(B)]);return oe}function fe(B){for(var oe=re(B);B.token==="and";)j(B),oe=new p("and","and",[oe,re(B)]);return oe}function re(B){for(var oe=W(B);B.token==="|";)j(B),oe=new p("|","bitOr",[oe,W(B)]);return oe}function W(B){for(var oe=ie(B);B.token==="^|";)j(B),oe=new p("^|","bitXor",[oe,ie(B)]);return oe}function ie(B){for(var oe=me(B);B.token==="&";)j(B),oe=new p("&","bitAnd",[oe,me(B)]);return oe}function me(B){for(var oe=[le(B)],we=[],Me={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};Je(Me,B.token);){var ze={name:B.token,fn:Me[B.token]};we.push(ze),j(B),oe.push(le(B))}return oe.length===1?oe[0]:oe.length===2?new p(we[0].name,we[0].fn,oe):new v(we.map(ut=>ut.fn),oe)}function le(B){var oe,we,Me,ze;oe=ve(B);for(var ut={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};Je(ut,B.token);)we=B.token,Me=ut[we],j(B),ze=[oe,ve(B)],oe=new p(we,Me,ze);return oe}function ve(B){var oe,we,Me,ze;oe=ye(B);for(var ut={to:"to",in:"to"};Je(ut,B.token);)we=B.token,Me=ut[we],j(B),we==="in"&&"])},;".includes(B.token)?oe=new p("*","multiply",[oe,new w("in")],!0):(ze=[oe,ye(B)],oe=new p(we,Me,ze));return oe}function ye(B){var oe,we=[];if(B.token===":"?oe=new u(1):oe=Ie(B),B.token===":"&&B.conditionalLevel!==B.nestingLevel){for(we.push(oe);B.token===":"&&we.length<3;)j(B),B.token===")"||B.token==="]"||B.token===","||B.token===""?we.push(new w("end")):we.push(Ie(B));we.length===3?oe=new b(we[0],we[2],we[1]):oe=new b(we[0],we[1])}return oe}function Ie(B){var oe,we,Me,ze;oe=Ue(B);for(var ut={"+":"add","-":"subtract"};Je(ut,B.token);){we=B.token,Me=ut[we],j(B);var vn=Ue(B);vn.isPercentage?ze=[oe,new p("*","multiply",[oe,vn])]:ze=[oe,vn],oe=new p(we,Me,ze)}return oe}function Ue(B){var oe,we,Me,ze;oe=Ge(B),we=oe;for(var ut={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};Je(ut,B.token);)Me=B.token,ze=ut[Me],j(B),we=Ge(B),oe=new p(Me,ze,[oe,we]);return oe}function Ge(B){var oe,we;for(oe=Be(B),we=oe;B.tokenType===x.SYMBOL||B.token==="in"&&Vt(oe)||B.token==="in"&&xn(oe)&&oe.fn==="unaryMinus"&&Vt(oe.args[0])||B.tokenType===x.NUMBER&&!Vt(we)&&(!xn(we)||we.op==="!")||B.token==="(";)we=Be(B),oe=new p("*","multiply",[oe,we],!0);return oe}function Be(B){for(var oe=$e(B),we=oe,Me=[];B.token==="/"&&EP(we);)if(Me.push(An({},B)),j(B),B.tokenType===x.NUMBER)if(Me.push(An({},B)),j(B),B.tokenType===x.SYMBOL||B.token==="("||B.token==="in")An(B,Me.pop()),Me.pop(),we=$e(B),oe=new p("/","divide",[oe,we]);else{Me.pop(),An(B,Me.pop());break}else{An(B,Me.pop());break}return oe}function $e(B){var oe=He(B);if(B.token==="%"){var we=An({},B);j(B);try{He(B),An(B,we)}catch{oe=new p("/","divide",[oe,new u(100)],!1,!0)}}return oe}function He(B){var oe,we,Me,ze={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return Je(ze,B.token)?(Me=ze[B.token],oe=B.token,j(B),we=[He(B)],new p(oe,Me,we)):Z(B)}function Z(B){var oe,we,Me,ze;return oe=ce(B),(B.token==="^"||B.token===".^")&&(we=B.token,Me=we==="^"?"pow":"dotPow",j(B),ze=[oe,He(B)],oe=new p(we,Me,ze)),oe}function ce(B){for(var oe=q(B);B.token==="??";)j(B),oe=new p("??","nullish",[oe,q(B)]);return oe}function q(B){var oe,we,Me,ze;oe=Q(B);for(var ut={"!":"factorial","'":"ctranspose"};Je(ut,B.token);)we=B.token,Me=ut[we],U(B),ze=[oe],oe=new p(we,Me,ze),oe=de(B,oe);return oe}function Q(B){var oe=[];if(B.tokenType===x.SYMBOL&&Je(B.extraNodes,B.token)){var we=B.extraNodes[B.token];if(U(B),B.token==="("){if(oe=[],G(B),U(B),B.token!==")")for(oe.push(R(B));B.token===",";)U(B),oe.push(R(B));if(B.token!==")")throw lt(B,"Parenthesis ) expected");ee(B),U(B)}return new we(oe)}return ae(B)}function ae(B){var oe,we;return B.tokenType===x.SYMBOL||B.tokenType===x.DELIMITER&&B.token in S?(we=B.token,U(B),Je(E,we)?oe=new u(E[we]):C.includes(we)?oe=new u(t(we,"number")):oe=new w(we),oe=de(B,oe),oe):ge(B)}function de(B,oe,we){for(var Me;;){var ze=!1;B.token==="?."&&(ze=!0,U(B));var ut=(B.token==="("||B.token==="["||B.token===".")&&!0;if(!(ze||ut))break;if(Me=[],B.token==="(")if(ze||mi(oe)||Sc(oe)){if(G(B),U(B),B.token!==")")for(Me.push(R(B));B.token===",";)U(B),Me.push(R(B));if(B.token!==")")throw lt(B,"Parenthesis ) expected");ee(B),U(B),oe=new h(oe,Me,ze)}else return oe;else if(B.token==="["){if(G(B),U(B),B.token!=="]")for(Me.push(R(B));B.token===",";)U(B),Me.push(R(B));if(B.token!=="]")throw lt(B,"Parenthesis ] expected");ee(B),U(B),oe=new i(oe,new d(Me),ze)}else{ze||U(B);var vn=B.tokenType===x.SYMBOL||B.tokenType===x.DELIMITER&&B.token in S;if(!vn){var Oa="Property name expected after ";throw Oa+=ze?"optional chain":"dot",lt(B,Oa)}Me.push(new u(B.token)),U(B);var dy=!0;oe=new i(oe,new d(Me,dy),ze)}}return oe}function ge(B){var oe,we;return B.token==='"'||B.token==="'"?(we=pe(B,B.token),oe=new u(we),oe=de(B,oe),oe):Ne(B)}function pe(B,oe){for(var we="";I(B)!==""&&I(B)!==oe;)if(I(B)==="\\"){V(B);var Me=I(B),ze=N[Me];if(ze!==void 0)we+=ze,B.index+=1;else if(Me==="u"){var ut=B.expression.slice(B.index+1,B.index+5);if(/^[0-9A-Fa-f]{4}$/.test(ut))we+=String.fromCharCode(parseInt(ut,16)),B.index+=5;else throw lt(B,"Invalid unicode character \\u".concat(ut))}else throw lt(B,"Bad escape character \\".concat(Me))}else we+=I(B),V(B);if(U(B),B.token!==oe)throw lt(B,"End of string ".concat(oe," expected"));return U(B),we}function Ne(B){var oe,we,Me,ze;if(B.token==="["){if(G(B),U(B),B.token!=="]"){var ut=Ee(B);if(B.token===";"){for(Me=1,we=[ut];B.token===";";)U(B),B.token!=="]"&&(we[Me]=Ee(B),Me++);if(B.token!=="]")throw lt(B,"End of matrix ] expected");ee(B),U(B),ze=we[0].items.length;for(var vn=1;vn<Me;vn++)if(we[vn].items.length!==ze)throw pr(B,"Column dimensions mismatch ("+we[vn].items.length+" !== "+ze+")");oe=new s(we)}else{if(B.token!=="]")throw lt(B,"End of matrix ] expected");ee(B),U(B),oe=ut}}else ee(B),U(B),oe=new s([]);return de(B,oe)}return Oe(B)}function Ee(B){for(var oe=[R(B)],we=1;B.token===",";)U(B),B.token!=="]"&&B.token!==";"&&(oe[we]=R(B),we++);return new s(oe)}function Oe(B){if(B.token==="{"){G(B);var oe,we={};do if(U(B),B.token!=="}"){if(B.token==='"'||B.token==="'")oe=pe(B,B.token);else if(B.tokenType===x.SYMBOL||B.tokenType===x.DELIMITER&&B.token in S)oe=B.token,U(B);else throw lt(B,"Symbol or string expected as object key");if(B.token!==":")throw lt(B,"Colon : expected after object key");U(B),we[oe]=R(B)}while(B.token===",");if(B.token!=="}")throw lt(B,"Comma , or bracket } expected after object value");ee(B),U(B);var Me=new f(we);return Me=de(B,Me),Me}return Se(B)}function Se(B){var oe;if(B.tokenType===x.NUMBER){oe=B.token,U(B);var we=Vd(oe,n),Me=t(oe,we);return new u(Me)}return et(B)}function et(B){var oe;if(B.token==="("){if(G(B),U(B),oe=R(B),B.token!==")")throw lt(B,"Parenthesis ) expected");return ee(B),U(B),oe=new g(oe),oe=de(B,oe),oe}return Ct(B)}function Ct(B){throw B.token===""?lt(B,"Unexpected end of expression"):lt(B,"Value expected")}function zt(B){return B.index-B.token.length+1}function lt(B,oe){var we=zt(B),Me=new SyntaxError(oe+" (char "+we+")");return Me.char=we,Me}function pr(B,oe){var we=zt(B),Me=new SyntaxError(oe+" (char "+we+")");return Me.char=we,Me}return e.addConversion({from:"string",to:"Node",convert:y}),y}),f8="compile",WSe=["typed","parse"],KSe=X(f8,WSe,r=>{var{typed:e,parse:t}=r;return e(f8,{string:function(i){return t(i).compile()},"Array | Matrix":function(i){return _t(i,function(s){return t(s).compile()})}})}),m8="evaluate",XSe=["typed","parse"],YSe=X(m8,XSe,r=>{var{typed:e,parse:t}=r;return e(m8,{string:function(i){var s=F1();return t(i).compile().evaluate(s)},"string, Map | Object":function(i,s){return t(i).compile().evaluate(s)},"Array | Matrix":function(i){var s=F1();return _t(i,function(a){return t(a).compile().evaluate(s)})},"Array | Matrix, Map | Object":function(i,s){return _t(i,function(a){return t(a).compile().evaluate(s)})}})}),QSe="Parser",JSe=["evaluate","parse"],ZSe=X(QSe,JSe,r=>{var{evaluate:e,parse:t}=r;function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:F1(),writable:!1})}n.prototype.type="Parser",n.prototype.isParser=!0,n.prototype.evaluate=function(s){return e(s,this.scope)},n.prototype.get=function(s){if(this.scope.has(s))return this.scope.get(s)},n.prototype.getAll=function(){return mge(this.scope)},n.prototype.getAllAsMap=function(){return this.scope};function i(s){if(s.length===0)return!1;for(var a=0;a<s.length;a++){var o=s.charAt(a-1),l=s.charAt(a),u=s.charAt(a+1),c=t.isAlpha(l,o,u)||a>0&&t.isDigit(l);if(!c)return!1}return!0}return n.prototype.set=function(s,a){if(!i(s))throw new Error("Invalid variable name: '".concat(s,"'. Variable names must follow the specified rules."));return this.scope.set(s,a),a},n.prototype.remove=function(s){this.scope.delete(s)},n.prototype.clear=function(){this.scope.clear()},n.prototype.toJSON=function(){var s={mathjs:"Parser",variables:{},functions:{}};for(var[a,o]of this.scope)if(AK(o)){if(!eTe(o))throw new Error("Cannot serialize external function ".concat(a));s.functions[a]="".concat(o.syntax," = ").concat(o.expr)}else s.variables[a]=o;return s},n.fromJSON=function(s){var a=new n;return Object.entries(s.variables).forEach(o=>{var[l,u]=o;return a.set(l,u)}),Object.entries(s.functions).forEach(o=>{var[l,u]=o;return a.evaluate(u)}),a},n},{isClass:!0});function eTe(r){return typeof r=="function"&&typeof r.syntax=="string"&&typeof r.expr=="string"}var p8="parser",tTe=["typed","Parser"],rTe=X(p8,tTe,r=>{var{typed:e,Parser:t}=r;return e(p8,{"":function(){return new t}})}),g8="lup",nTe=["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],iTe=X(g8,nTe,r=>{var{typed:e,matrix:t,abs:n,addScalar:i,divideScalar:s,multiplyScalar:a,subtractScalar:o,larger:l,equalScalar:u,unaryMinus:c,DenseMatrix:h,SparseMatrix:d,Spa:f}=r;return e(g8,{DenseMatrix:function(v){return p(v)},SparseMatrix:function(v){return g(v)},Array:function(v){var w=t(v),y=p(w);return{L:y.L.valueOf(),U:y.U.valueOf(),p:y.p}}});function p(b){var v=b._size[0],w=b._size[1],y=Math.min(v,w),A=gt(b._data),x=[],_=[v,y],S=[],E=[y,w],C,N,D,M=[];for(C=0;C<v;C++)M[C]=C;for(N=0;N<w;N++){if(N>0)for(C=0;C<v;C++){var I=Math.min(C,N),V=0;for(D=0;D<I;D++)V=i(V,a(A[C][D],A[D][N]));A[C][N]=o(A[C][N],V)}var K=N,F=0,U=0;for(C=N;C<v;C++){var j=A[C][N],G=n(j);l(G,F)&&(K=C,F=G,U=j)}if(N!==K&&(M[N]=[M[K],M[K]=M[N]][0],h._swapRows(N,K,A)),N<v)for(C=N+1;C<v;C++){var ee=A[C][N];u(ee,0)||(A[C][N]=s(A[C][N],U))}}for(N=0;N<w;N++)for(C=0;C<v;C++){if(N===0&&(C<w&&(S[C]=[]),x[C]=[]),C<N){C<w&&(S[C][N]=A[C][N]),N<v&&(x[C][N]=0);continue}if(C===N){C<w&&(S[C][N]=A[C][N]),N<v&&(x[C][N]=1);continue}C<w&&(S[C][N]=0),N<v&&(x[C][N]=A[C][N])}var ue=new h({data:x,size:_}),te=new h({data:S,size:E}),R=[];for(C=0,y=M.length;C<y;C++)R[M[C]]=C;return{L:ue,U:te,p:R,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}function g(b){var v=b._size[0],w=b._size[1],y=Math.min(v,w),A=b._values,x=b._index,_=b._ptr,S=[],E=[],C=[],N=[v,y],D=[],M=[],I=[],V=[y,w],K,F,U,j=[],G=[];for(K=0;K<v;K++)j[K]=K,G[K]=K;var ee=function(R,Y){var H=G[R],he=G[Y];j[H]=Y,j[he]=R,G[R]=he,G[Y]=H},ue=function(){var R=new f;F<v&&(C.push(S.length),S.push(1),E.push(F)),I.push(D.length);var Y=_[F],H=_[F+1];for(U=Y;U<H;U++)K=x[U],R.set(j[K],A[U]);F>0&&R.forEach(0,F-1,function(W,ie){d._forEachRow(W,S,E,C,function(me,le){me>W&&R.accumulate(me,c(a(le,ie)))})});var he=F,fe=R.get(F),re=n(fe);R.forEach(F+1,v-1,function(W,ie){var me=n(ie);l(me,re)&&(he=W,re=me,fe=ie)}),F!==he&&(d._swapRows(F,he,N[1],S,E,C),d._swapRows(F,he,V[1],D,M,I),R.swap(F,he),ee(F,he)),R.forEach(0,v-1,function(W,ie){W<=F?(D.push(ie),M.push(W)):(ie=s(ie,fe),u(ie,0)||(S.push(ie),E.push(W)))})};for(F=0;F<w;F++)ue();return I.push(D.length),C.push(S.length),{L:new d({values:S,index:E,ptr:C,size:N}),U:new d({values:D,index:M,ptr:I,size:V}),p:j,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
P: `+this.p}}}}),v8="qr",sTe=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],aTe=X(v8,sTe,r=>{var{typed:e,matrix:t,zeros:n,identity:i,isZero:s,equal:a,sign:o,sqrt:l,conj:u,unaryMinus:c,addScalar:h,divideScalar:d,multiplyScalar:f,subtractScalar:p,complex:g}=r;return An(e(v8,{DenseMatrix:function(A){return v(A)},SparseMatrix:function(A){return w()},Array:function(A){var x=t(A),_=v(x);return{Q:_.Q.valueOf(),R:_.R.valueOf()}}}),{_denseQRimpl:b});function b(y){var A=y._size[0],x=y._size[1],_=i([A],"dense"),S=_._data,E=y.clone(),C=E._data,N,D,M,I=n([A],"");for(M=0;M<Math.min(x,A);++M){var V=C[M][M],K=c(a(V,0)?1:o(V)),F=u(K),U=0;for(N=M;N<A;N++)U=h(U,f(C[N][M],u(C[N][M])));var j=f(K,l(U));if(!s(j)){var G=p(V,j);for(I[M]=1,N=M+1;N<A;N++)I[N]=d(C[N][M],G);var ee=c(u(d(G,j))),ue=void 0;for(D=M;D<x;D++){for(ue=0,N=M;N<A;N++)ue=h(ue,f(u(I[N]),C[N][D]));for(ue=f(ue,ee),N=M;N<A;N++)C[N][D]=f(p(C[N][D],f(I[N],ue)),F)}for(N=0;N<A;N++){for(ue=0,D=M;D<A;D++)ue=h(ue,f(S[N][D],I[D]));for(ue=f(ue,ee),D=M;D<A;++D)S[N][D]=d(p(S[N][D],f(ue,u(I[D]))),F)}}}return{Q:_,R:E,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function v(y){var A=b(y),x=A.R._data;if(y._data.length>0)for(var _=x[0][0].type==="Complex"?g(0):0,S=0;S<x.length;++S)for(var E=0;E<S&&E<(x[0]||[]).length;++E)x[S][E]=_;return A}function w(y){throw new Error("qr not implemented for sparse matrices yet")}});function oTe(r,e,t,n){r._values;for(var i=r._index,s=r._ptr,a=r._size,o=r._datatype,l=a[0],u=a[1],c=null,h=[],d=[],f=0,p=0;p<u;p++){d[p]=f;for(var g=t?t[p]:p,b=s[g],v=s[g+1],w=b;w<v;w++){var y=i[w];h[f]=y,f++}}return d[u]=f,r.createSparseMatrix({values:c,index:h,ptr:d,size:[l,u],datatype:o})}function gY(r,e,t,n,i,s,a){var o=0;for(t[a]=r;o>=0;){var l=t[a+o],u=t[n+l];u===-1?(o--,s[e++]=l):(t[n+l]=t[i+u],++o,t[a+o]=u)}return e}function lTe(r,e){if(!r)return null;var t=0,n,i=[],s=[],a=0,o=e,l=2*e;for(n=0;n<e;n++)s[a+n]=-1;for(n=e-1;n>=0;n--)r[n]!==-1&&(s[o+n]=s[a+r[n]],s[a+r[n]]=n);for(n=0;n<e;n++)r[n]===-1&&(t=gY(n,t,s,a,o,i,l));return i}function uTe(r,e){if(!r)return null;var t=r._index,n=r._ptr,i=r._size,s=i[0],a=i[1],o=[],l=[],u=0,c=a,h,d;for(h=0;h<s;h++)l[c+h]=-1;for(var f=0;f<a;f++){o[f]=-1,l[u+f]=-1;for(var p=n[f],g=n[f+1],b=p;b<g;b++){var v=t[b];for(h=l[c+v];h!==-1&&h<f;h=d)d=l[u+h],l[u+h]=f,d===-1&&(o[h]=f);l[c+v]=f}}return o}function cTe(r,e,t){for(var n=r._values,i=r._index,s=r._ptr,a=r._size,o=a[1],l=0,u=0;u<o;u++){var c=s[u];for(s[u]=l;c<s[u+1];c++)e(i[c],u,n?n[c]:1,t)&&(i[l]=i[c],n&&(n[l]=n[c]),l++)}return s[o]=l,i.splice(l,i.length-l),n&&n.splice(l,n.length-l),l}function Kc(r){return-r-2}var hTe="csAmd",dTe=["add","multiply","transpose"],fTe=X(hTe,dTe,r=>{var{add:e,multiply:t,transpose:n}=r;return function(c,h){if(!h||c<=0||c>3)return null;var d=h._size,f=d[0],p=d[1],g=0,b=Math.max(16,10*Math.sqrt(p));b=Math.min(p-2,b);var v=i(c,h,f,p,b);cTe(v,l,null);for(var w=v._index,y=v._ptr,A=y[p],x=[],_=[],S=0,E=p+1,C=2*(p+1),N=3*(p+1),D=4*(p+1),M=5*(p+1),I=6*(p+1),V=7*(p+1),K=x,F=s(p,y,_,S,N,K,C,V,E,I,D,M),U=a(p,y,_,M,D,I,b,E,N,K,C),j=0,G,ee,ue,te,R,Y,H,he,fe,re,W,ie,me,le,ve,ye;U<p;){for(ue=-1;j<p&&(ue=_[N+j])===-1;j++);_[C+ue]!==-1&&(K[_[C+ue]]=-1),_[N+j]=_[C+ue];var Ie=_[D+ue],Ue=_[E+ue];U+=Ue;var Ge=0;_[E+ue]=-Ue;var Be=y[ue],$e=Ie===0?Be:A,He=$e;for(te=1;te<=Ie+1;te++){for(te>Ie?(Y=ue,H=Be,he=_[S+ue]-Ie):(Y=w[Be++],H=y[Y],he=_[S+Y]),R=1;R<=he;R++)G=w[H++],!((fe=_[E+G])<=0)&&(Ge+=fe,_[E+G]=-fe,w[He++]=G,_[C+G]!==-1&&(K[_[C+G]]=K[G]),K[G]!==-1?_[C+K[G]]=_[C+G]:_[N+_[M+G]]=_[C+G]);Y!==ue&&(y[Y]=Kc(ue),_[I+Y]=0)}for(Ie!==0&&(A=He),_[M+ue]=Ge,y[ue]=$e,_[S+ue]=He-$e,_[D+ue]=-2,F=o(F,g,_,I,p),re=$e;re<He;re++)if(G=w[re],!((W=_[D+G])<=0)){fe=-_[E+G];var Z=F-fe;for(Be=y[G],ie=y[G]+W-1;Be<=ie;Be++)Y=w[Be],_[I+Y]>=F?_[I+Y]-=fe:_[I+Y]!==0&&(_[I+Y]=_[M+Y]+Z)}for(re=$e;re<He;re++){for(G=w[re],ie=y[G],me=ie+_[D+G]-1,le=ie,ve=0,ye=0,Be=ie;Be<=me;Be++)if(Y=w[Be],_[I+Y]!==0){var ce=_[I+Y]-F;ce>0?(ye+=ce,w[le++]=Y,ve+=Y):(y[Y]=Kc(ue),_[I+Y]=0)}_[D+G]=le-ie+1;var q=le,Q=ie+_[S+G];for(Be=me+1;Be<Q;Be++){ee=w[Be];var ae=_[E+ee];ae<=0||(ye+=ae,w[le++]=ee,ve+=ee)}ye===0?(y[G]=Kc(ue),fe=-_[E+G],Ge-=fe,Ue+=fe,U+=fe,_[E+G]=0,_[D+G]=-1):(_[M+G]=Math.min(_[M+G],ye),w[le]=w[q],w[q]=w[ie],w[ie]=ue,_[S+G]=le-ie+1,ve=(ve<0?-ve:ve)%p,_[C+G]=_[V+ve],_[V+ve]=G,K[G]=ve)}for(_[M+ue]=Ge,g=Math.max(g,Ge),F=o(F+g,g,_,I,p),re=$e;re<He;re++)if(G=w[re],!(_[E+G]>=0))for(ve=K[G],G=_[V+ve],_[V+ve]=-1;G!==-1&&_[C+G]!==-1;G=_[C+G],F++){for(he=_[S+G],W=_[D+G],Be=y[G]+1;Be<=y[G]+he-1;Be++)_[I+w[Be]]=F;var de=G;for(ee=_[C+G];ee!==-1;){var ge=_[S+ee]===he&&_[D+ee]===W;for(Be=y[ee]+1;ge&&Be<=y[ee]+he-1;Be++)_[I+w[Be]]!==F&&(ge=0);ge?(y[ee]=Kc(G),_[E+G]+=_[E+ee],_[E+ee]=0,_[D+ee]=-1,ee=_[C+ee],_[C+de]=ee):(de=ee,ee=_[C+ee])}}for(Be=$e,re=$e;re<He;re++)G=w[re],!((fe=-_[E+G])<=0)&&(_[E+G]=fe,ye=_[M+G]+Ge-fe,ye=Math.min(ye,p-U-fe),_[N+ye]!==-1&&(K[_[N+ye]]=G),_[C+G]=_[N+ye],K[G]=-1,_[N+ye]=G,j=Math.min(j,ye),_[M+G]=ye,w[Be++]=G);_[E+ue]=Ue,(_[S+ue]=Be-$e)===0&&(y[ue]=-1,_[I+ue]=0),Ie!==0&&(A=Be)}for(G=0;G<p;G++)y[G]=Kc(y[G]);for(ee=0;ee<=p;ee++)_[N+ee]=-1;for(ee=p;ee>=0;ee--)_[E+ee]>0||(_[C+ee]=_[N+y[ee]],_[N+y[ee]]=ee);for(Y=p;Y>=0;Y--)_[E+Y]<=0||y[Y]!==-1&&(_[C+Y]=_[N+y[Y]],_[N+y[Y]]=Y);for(ue=0,G=0;G<=p;G++)y[G]===-1&&(ue=gY(G,ue,_,N,C,x,I));return x.splice(x.length-1,1),x};function i(u,c,h,d,f){var p=n(c);if(u===1&&d===h)return e(c,p);if(u===2){for(var g=p._index,b=p._ptr,v=0,w=0;w<h;w++){var y=b[w];if(b[w]=v,!(b[w+1]-y>f))for(var A=b[w+1];y<A;y++)g[v++]=g[y]}return b[h]=v,c=n(p),t(p,c)}return t(p,c)}function s(u,c,h,d,f,p,g,b,v,w,y,A){for(var x=0;x<u;x++)h[d+x]=c[x+1]-c[x];h[d+u]=0;for(var _=0;_<=u;_++)h[f+_]=-1,p[_]=-1,h[g+_]=-1,h[b+_]=-1,h[v+_]=1,h[w+_]=1,h[y+_]=0,h[A+_]=h[d+_];var S=o(0,0,h,w,u);return h[y+u]=-2,c[u]=-1,h[w+u]=0,S}function a(u,c,h,d,f,p,g,b,v,w,y){for(var A=0,x=0;x<u;x++){var _=h[d+x];if(_===0)h[f+x]=-2,A++,c[x]=-1,h[p+x]=0;else if(_>g)h[b+x]=0,h[f+x]=-1,A++,c[x]=Kc(u),h[b+u]++;else{var S=h[v+_];S!==-1&&(w[S]=x),h[y+x]=h[v+_],h[v+_]=x}}return A}function o(u,c,h,d,f){if(u<2||u+c<0){for(var p=0;p<f;p++)h[d+p]!==0&&(h[d+p]=1);u=2}return u}function l(u,c){return u!==c}});function mTe(r,e,t,n,i,s,a){var o,l,u=0,c;if(r<=e||t[n+e]<=t[i+r])return-1;t[i+r]=t[n+e];var h=t[s+r];if(t[s+r]=e,h===-1)u=1,c=r;else{for(u=2,c=h;c!==t[a+c];c=t[a+c]);for(o=h;o!==c;o=l)l=t[a+o],t[a+o]=c}return{jleaf:u,q:c}}var pTe="csCounts",gTe=["transpose"],vTe=X(pTe,gTe,r=>{var{transpose:e}=r;return function(t,n,i,s){if(!t||!n||!i)return null;var a=t._size,o=a[0],l=a[1],u,c,h,d,f,p,g,b=4*l+(s?l+o+1:0),v=[],w=0,y=l,A=2*l,x=3*l,_=4*l,S=5*l+1;for(h=0;h<b;h++)v[h]=-1;var E=[],C=e(t),N=C._index,D=C._ptr;for(h=0;h<l;h++)for(c=i[h],E[c]=v[x+c]===-1?1:0;c!==-1&&v[x+c]===-1;c=n[c])v[x+c]=h;if(s){for(h=0;h<l;h++)v[i[h]]=h;for(u=0;u<o;u++){for(h=l,p=D[u],g=D[u+1],f=p;f<g;f++)h=Math.min(h,v[N[f]]);v[S+u]=v[_+h],v[_+h]=u}}for(u=0;u<l;u++)v[w+u]=u;for(h=0;h<l;h++){for(c=i[h],n[c]!==-1&&E[n[c]]--,d=s?v[_+h]:c;d!==-1;d=s?v[S+d]:-1)for(f=D[d];f<D[d+1];f++){u=N[f];var M=mTe(u,c,v,x,y,A,w);M.jleaf>=1&&E[c]++,M.jleaf===2&&E[M.q]--}n[c]!==-1&&(v[w+c]=n[c])}for(c=0;c<l;c++)n[c]!==-1&&(E[n[c]]+=E[c]);return E}}),yTe="csSqr",bTe=["add","multiply","transpose"],wTe=X(yTe,bTe,r=>{var{add:e,multiply:t,transpose:n}=r,i=fTe({add:e,multiply:t,transpose:n}),s=vTe({transpose:n});return function(l,u,c){var h=u._ptr,d=u._size,f=d[1],p,g={};if(g.q=i(l,u),l&&!g.q)return null;if(c){var b=l?oTe(u,null,g.q):u;g.parent=uTe(b);var v=lTe(g.parent,f);if(g.cp=s(b,g.parent,v,1),b&&g.parent&&g.cp&&a(b,g))for(g.unz=0,p=0;p<f;p++)g.unz+=g.cp[p]}else g.unz=4*h[f]+f,g.lnz=g.unz;return g};function a(o,l){var u=o._ptr,c=o._index,h=o._size,d=h[0],f=h[1];l.pinv=[],l.leftmost=[];var p=l.parent,g=l.pinv,b=l.leftmost,v=[],w=0,y=d,A=d+f,x=d+2*f,_,S,E,C,N;for(S=0;S<f;S++)v[y+S]=-1,v[A+S]=-1,v[x+S]=0;for(_=0;_<d;_++)b[_]=-1;for(S=f-1;S>=0;S--)for(C=u[S],N=u[S+1],E=C;E<N;E++)b[c[E]]=S;for(_=d-1;_>=0;_--)g[_]=-1,S=b[_],S!==-1&&(v[x+S]++===0&&(v[A+S]=_),v[w+_]=v[y+S],v[y+S]=_);for(l.lnz=0,l.m2=d,S=0;S<f;S++)if(_=v[y+S],l.lnz++,_<0&&(_=l.m2++),g[_]=S,!(--x[S]<=0)){l.lnz+=v[x+S];var D=p[S];D!==-1&&(v[x+D]===0&&(v[A+D]=v[A+S]),v[w+v[A+S]]=v[y+D],v[y+D]=v[w+_],v[x+D]+=v[x+S])}for(_=0;_<d;_++)g[_]<0&&(g[_]=S++);return!0}});function HP(r,e){return r[e]<0}function vY(r,e){r[e]=Kc(r[e])}function y8(r){return r<0?Kc(r):r}function xTe(r,e,t,n,i){var s=e._index,a=e._ptr,o=e._size,l=o[1],u,c,h,d=0;for(n[0]=r;d>=0;){r=n[d];var f=i?i[r]:r;HP(a,r)||(vY(a,r),n[l+d]=f<0?0:y8(a[f]));var p=1;for(c=n[l+d],h=f<0?0:y8(a[f+1]);c<h;c++)if(u=s[c],!HP(a,u)){n[l+d]=c,n[++d]=u,p=0;break}p&&(d--,n[--t]=r)}return t}function _Te(r,e,t,n,i){var s=r._ptr,a=r._size,o=e._index,l=e._ptr,u=a[1],c,h,d,f=u;for(h=l[t],d=l[t+1],c=h;c<d;c++){var p=o[c];HP(s,p)||(f=xTe(p,r,f,n,i))}for(c=f;c<u;c++)vY(s,n[c]);return f}var ATe="csSpsolve",ETe=["divideScalar","multiply","subtract"],STe=X(ATe,ETe,r=>{var{divideScalar:e,multiply:t,subtract:n}=r;return function(s,a,o,l,u,c,h){var d=s._values,f=s._index,p=s._ptr,g=s._size,b=g[1],v=a._values,w=a._index,y=a._ptr,A,x,_,S,E=_Te(s,a,o,l,c);for(A=E;A<b;A++)u[l[A]]=0;for(x=y[o],_=y[o+1],A=x;A<_;A++)u[w[A]]=v[A];for(var C=E;C<b;C++){var N=l[C],D=c?c[N]:N;if(!(D<0))for(x=p[D],_=p[D+1],u[N]=e(u[N],d[h?x:_-1]),A=h?x+1:x,S=h?_:_-1;A<S;A++){var M=f[A];u[M]=n(u[M],t(d[A],u[N]))}}return E}}),TTe="csLu",CTe=["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],NTe=X(TTe,CTe,r=>{var{abs:e,divideScalar:t,multiply:n,subtract:i,larger:s,largerEq:a,SparseMatrix:o}=r,l=STe({divideScalar:t,multiply:n,subtract:i});return function(c,h,d){if(!c)return null;var f=c._size,p=f[1],g,b=100,v=100;h&&(g=h.q,b=h.lnz||b,v=h.unz||v);var w=[],y=[],A=[],x=new o({values:w,index:y,ptr:A,size:[p,p]}),_=[],S=[],E=[],C=new o({values:_,index:S,ptr:E,size:[p,p]}),N=[],D,M,I=[],V=[];for(D=0;D<p;D++)I[D]=0,N[D]=-1,A[D+1]=0;b=0,v=0;for(var K=0;K<p;K++){A[K]=b,E[K]=v;var F=g?g[K]:K,U=l(x,c,F,V,I,N,1),j=-1,G=-1;for(M=U;M<p;M++)if(D=V[M],N[D]<0){var ee=e(I[D]);s(ee,G)&&(G=ee,j=D)}else S[v]=N[D],_[v++]=I[D];if(j===-1||G<=0)return null;N[F]<0&&a(e(I[F]),n(G,d))&&(j=F);var ue=I[j];for(S[v]=K,_[v++]=ue,N[j]=K,y[b]=j,w[b++]=1,M=U;M<p;M++)D=V[M],N[D]<0&&(y[b]=D,w[b++]=t(I[D],ue)),I[D]=0}for(A[p]=b,E[p]=v,M=0;M<b;M++)y[M]=N[y[M]];return w.splice(b,w.length-b),y.splice(b,y.length-b),_.splice(v,_.length-v),S.splice(v,S.length-v),{L:x,U:C,pinv:N}}}),b8="slu",DTe=["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],MTe=X(b8,DTe,r=>{var{typed:e,abs:t,add:n,multiply:i,transpose:s,divideScalar:a,subtract:o,larger:l,largerEq:u,SparseMatrix:c}=r,h=wTe({add:n,multiply:i,transpose:s}),d=NTe({abs:t,divideScalar:a,multiply:i,subtract:o,larger:l,largerEq:u,SparseMatrix:c});return e(b8,{"SparseMatrix, number, number":function(p,g,b){if(!tt(g)||g<0||g>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(b<0||b>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var v=h(g,p,!1),w=d(p,v,b);return{L:w.L,U:w.U,p:w.pinv,q:v.q,toString:function(){return"L: "+this.L.toString()+`
U: `+this.U.toString()+`
p: `+this.p.toString()+(this.q?`
q: `+this.q.toString():"")+`
`}}}})});function w8(r,e){var t,n=e.length,i=[];if(r)for(t=0;t<n;t++)i[r[t]]=e[t];else for(t=0;t<n;t++)i[t]=e[t];return i}var x8="lusolve",ITe=["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],PTe=X(x8,ITe,r=>{var{typed:e,matrix:t,lup:n,slu:i,usolve:s,lsolve:a,DenseMatrix:o}=r,l=f_({DenseMatrix:o});return e(x8,{"Array, Array | Matrix":function(d,f){d=t(d);var p=n(d),g=c(p.L,p.U,p.p,null,f);return g.valueOf()},"DenseMatrix, Array | Matrix":function(d,f){var p=n(d);return c(p.L,p.U,p.p,null,f)},"SparseMatrix, Array | Matrix":function(d,f){var p=n(d);return c(p.L,p.U,p.p,null,f)},"SparseMatrix, Array | Matrix, number, number":function(d,f,p,g){var b=i(d,p,g);return c(b.L,b.U,b.p,b.q,f)},"Object, Array | Matrix":function(d,f){return c(d.L,d.U,d.p,d.q,f)}});function u(h){if(ot(h))return h;if(cr(h))return t(h);throw new TypeError("Invalid Matrix LU decomposition")}function c(h,d,f,p,g){h=u(h),d=u(d),f&&(g=l(h,g,!0),g._data=w8(f,g._data));var b=a(h,g),v=s(d,b);return p&&(v._data=w8(p,v._data)),v}}),_8="polynomialRoot",RTe=["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],kTe=X(_8,RTe,r=>{var{typed:e,isZero:t,equalScalar:n,add:i,subtract:s,multiply:a,divide:o,sqrt:l,unaryMinus:u,cbrt:c,typeOf:h,im:d,re:f}=r;return e(_8,{"number|Complex, ...number|Complex":(p,g)=>{for(var b=[p,...g];b.length>0&&t(b[b.length-1]);)b.pop();if(b.length<2)throw new RangeError("Polynomial [".concat(p,", ").concat(g,"] must have a non-zero non-constant coefficient"));switch(b.length){case 2:return[u(o(b[0],b[1]))];case 3:{var[v,w,y]=b,A=a(2,y),x=a(w,w),_=a(4,y,v);if(n(x,_))return[o(u(w),A)];var S=l(s(x,_));return[o(s(S,w),A),o(s(u(S),w),A)]}case 4:{var[E,C,N,D]=b,M=u(a(3,D)),I=a(N,N),V=a(3,D,C),K=i(a(2,N,N,N),a(27,D,D,E)),F=a(9,D,N,C);if(n(I,V)&&n(K,F))return[o(N,M)];var U=s(I,V),j=s(K,F),G=i(a(18,D,N,C,E),a(N,N,C,C)),ee=i(a(4,N,N,N,E),a(4,D,C,C,C),a(27,D,D,E,E));if(n(G,ee))return[o(s(a(4,D,N,C),i(a(9,D,D,E),a(N,N,N))),a(D,U)),o(s(a(9,D,E),a(N,C)),a(2,U))];var ue;n(I,V)?ue=j:ue=o(i(j,l(s(a(j,j),a(4,U,U,U)))),2);var te=!0,R=c(ue,te).toArray().map(Y=>o(i(N,Y,o(U,Y)),M));return R.map(Y=>h(Y)==="Complex"&&n(f(Y),f(Y)+d(Y))?f(Y):Y)}default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(b))}}})}),FTe="Help",OTe=["evaluate"],BTe=X(FTe,OTe,r=>{var{evaluate:e}=r;function t(n){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(!n)throw new Error('Argument "doc" missing');this.doc=n}return t.prototype.type="Help",t.prototype.isHelp=!0,t.prototype.toString=function(){var n=this.doc||{},i=`
`;if(n.name&&(i+="Name: "+n.name+`

`),n.category&&(i+="Category: "+n.category+`

`),n.description&&(i+=`Description:
    `+n.description+`

`),n.syntax&&(i+=`Syntax:
    `+n.syntax.join(`
    `)+`

`),n.examples){i+=`Examples:
`;for(var s=!1,a=e("config()"),o={config:h=>(s=!0,e("config(newConfig)",{newConfig:h}))},l=0;l<n.examples.length;l++){var u=n.examples[l];i+="    "+u+`
`;var c=void 0;try{c=e(u,o)}catch(h){c=h}c!==void 0&&!_K(c)&&(i+="        "+Pt(c,{precision:14})+`
`)}i+=`
`,s&&e("config(originalConfig)",{originalConfig:a})}return n.mayThrow&&n.mayThrow.length&&(i+="Throws: "+n.mayThrow.join(", ")+`

`),n.seealso&&n.seealso.length&&(i+="See also: "+n.seealso.join(", ")+`
`),i},t.prototype.toJSON=function(){var n=gt(this.doc);return n.mathjs="Help",n},t.fromJSON=function(n){var i={};return Object.keys(n).filter(s=>s!=="mathjs").forEach(s=>{i[s]=n[s]}),new t(i)},t.prototype.valueOf=t.prototype.toString,t},{isClass:!0}),LTe="Chain",$Te=["?on","math","typed"],VTe=X(LTe,$Te,r=>{var{on:e,math:t,typed:n}=r;function i(u){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");SK(u)?this.value=u.value:this.value=u}i.prototype.type="Chain",i.prototype.isChain=!0,i.prototype.done=function(){return this.value},i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return Pt(this.value)},i.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},i.fromJSON=function(u){return new i(u.value)};function s(u,c){typeof c=="function"&&(i.prototype[u]=o(c))}function a(u,c){Cge(i.prototype,u,function(){var d=c();if(typeof d=="function")return o(d)})}function o(u){return function(){if(arguments.length===0)return new i(u(this.value));for(var c=[this.value],h=0;h<arguments.length;h++)c[h+1]=arguments[h];if(n.isTypedFunction(u)){var d=n.resolve(u,c);if(d.params.length===1)throw new Error("chain function "+u.name+" cannot match rest parameter between chain value and additional arguments.");return new i(d.implementation.apply(u,c))}return new i(u.apply(u,c))}}i.createProxy=function(u,c){if(typeof u=="string")s(u,c);else{var h=function(p){Je(u,p)&&l[p]===void 0&&a(p,()=>u[p])};for(var d in u)h(d)}};var l={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return i.createProxy(t),e&&e("import",function(u,c,h){h||a(u,c)}),i},{isClass:!0}),A8={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},UTe={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},zTe={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},jTe={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},qTe={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},HTe={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},GTe={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},WTe={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},KTe={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},XTe={name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},YTe={name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},E8={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},QTe={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},JTe={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},ZTe={name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},eCe={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},tCe={name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},rCe={name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","bigint","complex","fraction","index","matrix","string","unit"]},nCe={name:"bigint",category:"Construction",syntax:["bigint(x)"],description:"Create a bigint, an integer with an arbitrary number of digits, from a number or string.",examples:["123123123123123123 # a large number will lose digits",'bigint("123123123123123123")','bignumber(["1", "3", "5"])'],seealso:["boolean","bignumber","number","complex","fraction","index","matrix","string","unit"]},iCe={name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},sCe={name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},aCe={name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},oCe={name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},lCe={name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix","number","range","string","unit"]},uCe={name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},cCe={name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","bigint","boolean","complex","fraction","index","matrix","string","unit"]},hCe={name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},dCe={name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},fCe={name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},mCe={name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},pCe={name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},gCe={name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},vCe={name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},yCe={name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},bCe={name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},wCe={name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},xCe={name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},_Ce={name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},ACe={name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},ECe={name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},SCe={name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},TCe={name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},CCe={name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},NCe={name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},DCe={name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},MCe={name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},ICe={name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},PCe={name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},RCe={name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},kCe={name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},FCe={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},OCe={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},BCe={name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},LCe={name:"ceil",category:"Arithmetic",syntax:["ceil(x)","ceil(x, n)","ceil(unit, valuelessUnit)","ceil(unit, n, valuelessUnit)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)","ceil(3.241cm, cm)","ceil(3.241cm, 2, cm)"],seealso:["floor","fix","round"]},$Ce={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},VCe={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},UCe={name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},zCe={name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},jCe={name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},qCe={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},HCe={name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},GCe={name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},WCe={name:"fix",category:"Arithmetic",syntax:["fix(x)","fix(x, n)","fix(unit, valuelessUnit)","fix(unit, n, valuelessUnit)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)","fix(3.241cm, cm)","fix(3.241cm, 2, cm)"],seealso:["ceil","floor","round"]},KCe={name:"floor",category:"Arithmetic",syntax:["floor(x)","floor(x, n)","floor(unit, valuelessUnit)","floor(unit, n, valuelessUnit)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)","floor(3.241cm, cm)","floor(3.241cm, 2, cm)"],seealso:["ceil","fix","round"]},XCe={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},YCe={name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenuse of a list with values.",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},QCe={name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax  1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},JCe={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},ZCe={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},eNe={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},tNe={name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},rNe={name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},nNe={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},iNe={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},sNe={name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},aNe={name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},oNe={name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},lNe={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},uNe={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},cNe={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>0, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},hNe={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},dNe={name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},fNe={name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},mNe={name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},pNe={name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},gNe={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},vNe={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},yNe={name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},bNe={name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},wNe={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},xNe={name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},_Ne={name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},ANe={name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},ENe={name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},SNe={name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},TNe={name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},CNe={name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},NNe={name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},DNe={name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},MNe={name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},INe={name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"The Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers","bernoulli"]},PNe={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},RNe={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},kNe={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},FNe={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},ONe={name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:["parser","parse","compile"]},BNe={name:"parser",category:"Expression",syntax:["parser()"],description:"Create a parser object that keeps a context of variables and their values, allowing the evaluation of expressions in that context.",examples:["myParser = parser()",'myParser.evaluate("sqrt(3^2 + 4^2)")','myParser.set("x", 3)','myParser.evaluate("y = x + 3")','myParser.evaluate(["y = x + 3", "y = y + 1"])','myParser.get("y")'],seealso:["evaluate","parse","compile"]},LNe={name:"parse",category:"Expression",syntax:["parse(expr)","parse(expr, options)","parse([expr1, expr2, expr3, ...])","parse([expr1, expr2, expr3, ...], options)"],description:"Parse an expression. Returns a node tree, which can be evaluated by invoking node.evaluate() or transformed into a functional object via node.compile().",examples:['node1 = parse("sqrt(3^2 + 4^2)")',"node1.evaluate()","code1 = node1.compile()","code1.evaluate()","scope = {a: 3, b: 4}",'node2 = parse("a * b")',"node2.evaluate(scope)","code2 = node2.compile()","code2.evaluate(scope)"],seealso:["parser","evaluate","compile"]},$Ne={name:"compile",category:"Expression",syntax:["compile(expr) ","compile([expr1, expr2, expr3, ...])"],description:"Parse and compile an expression. Returns a an object with a function evaluate([scope]) to evaluate the compiled expression.",examples:['code1 = compile("sqrt(3^2 + 4^2)")',"code1.evaluate() ",'code2 = compile("a * b")',"code2.evaluate({a: 3, b: 4})"],seealso:["parser","parse","evaluate"]},VNe={name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},UNe={name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},zNe={name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},jNe={name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},qNe={name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},HNe={name:"nullish",category:"Logical",syntax:["x ?? y","nullish(x, y)"],description:"Nullish coalescing operator. Returns the right-hand operand when the left-hand operand is null or undefined, and otherwise returns the left-hand operand.",examples:["null ?? 42","undefined ?? 42","0 ?? 42","false ?? 42","null ?? undefined ?? 42"],seealso:["and","or","not"]},GNe={name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},WNe={name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},KNe={name:"mapSlices",category:"Matrix",syntax:["mapSlices(A, dim, callback)"],description:"Generate a matrix one dimension less than A by applying callback to each slice of A along dimension dim.",examples:["A = [[1, 2], [3, 4]]","mapSlices(A, 1, sum)","mapSlices(A, 2, prod)"],seealso:["map","forEach"]},XNe={name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},YNe={name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},QNe={name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},JNe={name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},ZNe={name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},e2e={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},t2e={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},r2e={name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicate the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},n2e={name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},i2e={name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},s2e={name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},a2e={name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},o2e={name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},l2e={name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},u2e={name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},c2e={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},h2e={name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the MoorePenrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},d2e={name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the Kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},f2e={name:"map",category:"Matrix",syntax:["map(x, callback)","map(x, y, ..., callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array or the matrices/arrays.",examples:["map([1, 2, 3], square)","map([1, 2], [3, 4], f(a,b) = a + b)"],seealso:["filter","forEach"]},m2e={name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},p2e={name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},g2e={name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},v2e={name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},y2e={name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},b2e={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},w2e={name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},x2e={name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},_2e={name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},A2e={name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},E2e={name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},S2e={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},T2e={name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},C2e={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},N2e={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},D2e={name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},M2e={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},I2e={name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},P2e={name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional Fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},R2e={name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse Fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},k2e={name:"bernoulli",category:"Probability",syntax:["bernoulli(n)"],description:"The nth Bernoulli number",examples:["bernoulli(4)","bernoulli(fraction(12))"],seealso:["combinations","gamma","stirlingS2"]},F2e={name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},O2e={name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},B2e={name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},L2e={name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},$2e={name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},V2e={name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},U2e={name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},z2e={name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},j2e={name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},q2e={name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},H2e={name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},G2e={name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},W2e={name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},K2e={name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},X2e={name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},Y2e={name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},Q2e={name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},J2e={name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not. Comparing a value with NaN returns false.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},Z2e={name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},eDe={name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not. Comparing a value with NaN returns false.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},tDe={name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},rDe={name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},nDe={name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},iDe={name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},sDe={name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},aDe={name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},oDe={name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},lDe={name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},uDe={name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},cDe={name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},hDe={name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},dDe={name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},fDe={name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},mDe={name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},pDe={name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},gDe={name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemann's Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},vDe={name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},yDe={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},bDe={name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},wDe={name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},xDe={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values. If any NaN values are found, the function yields the last NaN in the input.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},_De={name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},ADe={name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},EDe={name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:`Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probability are: Number, BigNumber. 

In case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.`,examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},SDe={name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},TDe={name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},CDe={name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","variance"]},NDe={name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},DDe={name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},MDe={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},IDe={name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},PDe={name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},RDe={name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the inverse hyperbolic tangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},kDe={name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},FDe={name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the inverse hyperbolic cosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},ODe={name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},BDe={name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},LDe={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},$De={name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},VDe={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},UDe={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},zDe={name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},jDe={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},qDe={name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},HDe={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},GDe={name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},WDe={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},KDe={name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},XDe={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},YDe={name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},QDe={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},JDe={name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},ZDe={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},eMe={name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},tMe={name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},rMe={name:"toBest",category:"Units",syntax:["toBest(x)","toBest(x, unitList)","toBest(x, unitList, options)"],description:"Converts to the most appropriate display unit.",examples:['toBest(unit(5000, "m"))','toBest(unit(3500000, "W"))','toBest(unit(0.000000123, "A"))','toBest(unit(10, "m"), "cm")','toBest(unit(10, "m"), "mm,km", {offset: 1.5})'],seealso:[]},nMe={name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},iMe={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables, and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},sMe={name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},aMe={name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},oMe={name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},lMe={name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},uMe={name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero","isFinite","isBounded"]},cMe={name:"isBounded",category:"Utils",syntax:["isBounded(x)"],description:"Test whether a value or its entries are bounded.",examples:["isBounded(Infinity)","isBounded(bigint(3))","isBounded([3, -Infinity, -3])"],seealso:["isFinite","isNumeric","isNaN","isNegative","isPositive"]},hMe={name:"isFinite",category:"Utils",syntax:["isFinite(x)"],description:"Test whether a value is finite, elementwise on collections.",examples:["isFinite(Infinity)","isFinite(bigint(3))","isFinite([3, -Infinity, -3])"],seealso:["isBounded","isNumeric","isNaN","isNegative","isPositive"]},dMe={name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},fMe={name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue","isFinite","isBounded"]},mMe={name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},pMe={name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},gMe={name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},vMe={name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, bigint, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "bigint")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","bigint","fraction","bignumber","string","format"]},yMe={name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},bMe={name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},wMe={name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},xMe={name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},_Me={bignumber:rCe,bigint:nCe,boolean:iCe,complex:sCe,createUnit:aCe,fraction:oCe,index:lCe,matrix:uCe,number:cCe,sparse:hCe,splitUnit:dCe,string:fCe,unit:mCe,e:A8,E:A8,false:UTe,i:zTe,Infinity:jTe,LN2:HTe,LN10:qTe,LOG2E:WTe,LOG10E:GTe,NaN:KTe,null:XTe,pi:E8,PI:E8,phi:YTe,SQRT1_2:QTe,SQRT2:JTe,tau:ZTe,true:eCe,version:tCe,speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant. Deprecated in favor of coulombConstant",examples:["coulombConstant"]},coulombConstant:{description:"Coulomb's constant",examples:["coulombConstant"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Bohr magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Bohr radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:yCe,lsolve:wCe,lsolveAll:xCe,lup:_Ce,lusolve:ACe,leafCount:bCe,polynomialRoot:ECe,resolve:CCe,simplify:NCe,simplifyConstant:DCe,simplifyCore:MCe,symbolicEqual:PCe,rationalize:TCe,slu:ICe,usolve:RCe,usolveAll:kCe,qr:SCe,abs:FCe,add:OCe,cbrt:BCe,ceil:LCe,cube:$Ce,divide:VCe,dotDivide:UCe,dotMultiply:zCe,dotPow:jCe,exp:qCe,expm:HCe,expm1:GCe,fix:WCe,floor:KCe,gcd:XCe,hypot:YCe,lcm:JCe,log:ZCe,log2:rNe,log1p:tNe,log10:eNe,mod:nNe,multiply:iNe,norm:sNe,nthRoot:aNe,nthRoots:oNe,pow:lNe,round:uNe,sign:cNe,sqrt:hNe,sqrtm:dNe,square:gNe,subtract:vNe,unaryMinus:yNe,unaryPlus:bNe,xgcd:wNe,invmod:QCe,bitAnd:xNe,bitNot:_Ne,bitOr:ANe,bitXor:ENe,leftShift:SNe,rightArithShift:TNe,rightLogShift:CNe,bellNumbers:NNe,catalan:DNe,composition:MNe,stirlingS2:INe,config:pCe,import:gCe,typed:vCe,arg:PNe,conj:RNe,re:FNe,im:kNe,evaluate:ONe,help:VNe,parse:LNe,parser:BNe,compile:$Ne,distance:UNe,intersect:zNe,and:jNe,not:qNe,nullish:HNe,or:GNe,xor:WNe,mapSlices:KNe,concat:YNe,count:QNe,cross:JNe,column:XNe,ctranspose:ZNe,det:e2e,diag:t2e,diff:r2e,dot:n2e,getMatrixDataType:l2e,identity:u2e,filter:s2e,flatten:a2e,forEach:o2e,inv:c2e,pinv:h2e,eigs:i2e,kron:d2e,matrixFromFunction:p2e,matrixFromRows:g2e,matrixFromColumns:m2e,map:f2e,ones:v2e,partitionSelect:y2e,range:b2e,resize:x2e,reshape:w2e,rotate:_2e,rotationMatrix:A2e,row:E2e,size:S2e,sort:T2e,squeeze:C2e,subset:N2e,trace:D2e,transpose:M2e,zeros:I2e,fft:P2e,ifft:R2e,sylvester:fNe,schur:mNe,lyap:pNe,solveODE:xMe,bernoulli:k2e,combinations:F2e,combinationsWithRep:O2e,factorial:B2e,gamma:L2e,kldivergence:V2e,lgamma:$2e,multinomial:U2e,permutations:z2e,pickRandom:j2e,random:q2e,randomInt:H2e,compare:G2e,compareNatural:W2e,compareText:K2e,deepEqual:X2e,equal:Y2e,equalText:Q2e,larger:J2e,largerEq:Z2e,smaller:eDe,smallerEq:tDe,unequal:rDe,setCartesian:nDe,setDifference:iDe,setDistinct:sDe,setIntersect:aDe,setIsSubset:oDe,setMultiplicity:lDe,setPowerset:uDe,setSize:cDe,setSymDifference:hDe,setUnion:dDe,zpk2tf:fDe,freqz:mDe,erf:pDe,zeta:gDe,cumsum:TDe,mad:vDe,max:yDe,mean:bDe,median:wDe,min:xDe,mode:_De,prod:ADe,quantileSeq:EDe,std:SDe,sum:CDe,variance:NDe,corr:DDe,acos:MDe,acosh:IDe,acot:PDe,acoth:RDe,acsc:kDe,acsch:FDe,asec:ODe,asech:BDe,asin:LDe,asinh:$De,atan:VDe,atanh:zDe,atan2:UDe,cos:jDe,cosh:qDe,cot:HDe,coth:GDe,csc:WDe,csch:KDe,sec:XDe,sech:YDe,sin:QDe,sinh:JDe,tan:ZDe,tanh:eMe,to:tMe,toBest:rMe,clone:iMe,format:sMe,bin:nMe,oct:yMe,hex:oMe,isNaN:uMe,isBounded:cMe,isFinite:hMe,isInteger:lMe,isNegative:dMe,isNumeric:fMe,hasNumericValue:aMe,isPositive:mMe,isPrime:pMe,isZero:gMe,print:bMe,typeOf:wMe,numeric:vMe},S8="help",AMe=["typed","mathWithTransform","Help"],EMe=X(S8,AMe,r=>{var{typed:e,mathWithTransform:t,Help:n}=r;return e(S8,{any:function(s){var a,o=s;if(typeof s!="string"){for(a in t)if(Je(t,a)&&s===t[a]){o=a;break}}var l=xs(_Me,o);if(!l){var u=typeof o=="function"?o.name:o;throw new Error('No documentation found on "'+u+'"')}return new n(l)}})}),T8="chain",SMe=["typed","Chain"],TMe=X(T8,SMe,r=>{var{typed:e,Chain:t}=r;return e(T8,{"":function(){return new t},any:function(i){return new t(i)}})}),C8="det",CMe=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],NMe=X(C8,CMe,r=>{var{typed:e,matrix:t,subtractScalar:n,multiply:i,divideScalar:s,isZero:a,unaryMinus:o}=r;return e(C8,{any:function(c){return gt(c)},"Array | Matrix":function(c){var h;switch(ot(c)?h=c.size():Array.isArray(c)?(c=t(c),h=c.size()):h=[],h.length){case 0:return gt(c);case 1:if(h[0]===1)return gt(c.valueOf()[0]);if(h[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+Pt(h)+")");case 2:{var d=h[0],f=h[1];if(d===f)return l(c.clone().valueOf(),d);if(f===0)return 1;throw new RangeError("Matrix must be square (size: "+Pt(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Pt(h)+")")}}});function l(u,c,h){if(c===1)return gt(u[0][0]);if(c===2)return n(i(u[0][0],u[1][1]),i(u[1][0],u[0][1]));for(var d=!1,f=new Array(c).fill(0).map((S,E)=>E),p=0;p<c;p++){var g=f[p];if(a(u[g][p])){var b=void 0;for(b=p+1;b<c;b++)if(!a(u[f[b]][p])){g=f[b],f[b]=f[p],f[p]=g,d=!d;break}if(b===c)return u[g][p]}for(var v=u[g][p],w=p===0?1:u[f[p-1]][p-1],y=p+1;y<c;y++)for(var A=f[y],x=p+1;x<c;x++)u[A][x]=s(n(i(u[A][x],v),i(u[A][p],u[g][x])),w)}var _=u[f[c-1]][c-1];return d?o(_):_}}),N8="inv",DMe=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],MMe=X(N8,DMe,r=>{var{typed:e,matrix:t,divideScalar:n,addScalar:i,multiply:s,unaryMinus:a,det:o,identity:l,abs:u}=r;return e(N8,{"Array | Matrix":function(d){var f=ot(d)?d.size():vt(d);switch(f.length){case 1:if(f[0]===1)return ot(d)?t([n(1,d.valueOf()[0])]):[n(1,d[0])];throw new RangeError("Matrix must be square (size: "+Pt(f)+")");case 2:{var p=f[0],g=f[1];if(p===g)return ot(d)?t(c(d.valueOf(),p,g),d.storage()):c(d,p,g);throw new RangeError("Matrix must be square (size: "+Pt(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Pt(f)+")")}},any:function(d){return n(1,d)}});function c(h,d,f){var p,g,b,v,w;if(d===1){if(v=h[0][0],v===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,v)]]}else if(d===2){var y=o(h);if(y===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(h[1][1],y),n(a(h[0][1]),y)],[n(a(h[1][0]),y),n(h[0][0],y)]]}else{var A=h.concat();for(p=0;p<d;p++)A[p]=A[p].concat();for(var x=l(d).valueOf(),_=0;_<f;_++){var S=u(A[_][_]),E=_;for(p=_+1;p<d;)u(A[p][_])>S&&(S=u(A[p][_]),E=p),p++;if(S===0)throw Error("Cannot calculate inverse, determinant is zero");p=E,p!==_&&(w=A[_],A[_]=A[p],A[p]=w,w=x[_],x[_]=x[p],x[p]=w);var C=A[_],N=x[_];for(p=0;p<d;p++){var D=A[p],M=x[p];if(p!==_){if(D[_]!==0){for(b=n(a(D[_]),C[_]),g=_;g<f;g++)D[g]=i(D[g],s(b,C[g]));for(g=0;g<f;g++)M[g]=i(M[g],s(b,N[g]))}}else{for(b=C[_],g=_;g<f;g++)D[g]=n(D[g],b);for(g=0;g<f;g++)M[g]=n(M[g],b)}}}return x}}}),D8="pinv",IMe=["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],PMe=X(D8,IMe,r=>{var{typed:e,matrix:t,inv:n,deepEqual:i,equal:s,dotDivide:a,dot:o,ctranspose:l,divideScalar:u,multiply:c,add:h,Complex:d}=r;return e(D8,{"Array | Matrix":function(y){var A=ot(y)?y.size():vt(y);switch(A.length){case 1:return v(y)?l(y):A[0]===1?n(y):a(l(y),o(y,y));case 2:{if(v(y))return l(y);var x=A[0],_=A[1];if(x===_)try{return n(y)}catch(S){if(!(S instanceof Error&&S.message.match(/Cannot calculate inverse, determinant is zero/)))throw S}return ot(y)?t(f(y.valueOf(),x,_),y.storage()):f(y,x,_)}default:throw new RangeError("Matrix must be two dimensional (size: "+Pt(A)+")")}},any:function(y){return s(y,0)?gt(y):u(1,y)}});function f(w,y,A){var{C:x,F:_}=g(w,y,A),S=c(n(c(l(x),x)),l(x)),E=c(l(_),n(c(_,l(_))));return c(E,S)}function p(w,y,A){for(var x=gt(w),_=0,S=0;S<y;S++){if(A<=_)return x;for(var E=S;b(x[E][_]);)if(E++,y===E&&(E=S,_++,A===_))return x;[x[E],x[S]]=[x[S],x[E]];for(var C=x[S][_],N=0;N<A;N++)x[S][N]=a(x[S][N],C);for(var D=0;D<y;D++)if(D!==S){C=x[D][_];for(var M=0;M<A;M++)x[D][M]=h(x[D][M],c(-1,c(C,x[S][M])))}_++}return x}function g(w,y,A){var x=p(w,y,A),_=w.map((E,C)=>E.filter((N,D)=>D<y&&!b(o(x[D],x[D])))),S=x.filter((E,C)=>!b(o(x[C],x[C])));return{C:_,F:S}}function b(w){return s(h(w,d(1,1)),h(0,d(1,1)))}function v(w){return i(h(w,d(1,1)),h(c(w,0),d(1,1)))}});function RMe(r){var{addScalar:e,subtract:t,flatten:n,multiply:i,multiplyScalar:s,divideScalar:a,sqrt:o,abs:l,bignumber:u,diag:c,size:h,reshape:d,inv:f,qr:p,usolve:g,usolveAll:b,equal:v,complex:w,larger:y,smaller:A,matrixFromColumns:x,dot:_}=r;function S(te,R,Y,H){var he=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,fe=E(te,R,Y,H,he);C(te,R,Y,H,he,fe);var{values:re,C:W}=N(te,R,Y,H,he);if(he){var ie=D(te,R,W,fe,re,Y,H);return{values:re,eigenvectors:ie}}return{values:re}}function E(te,R,Y,H,he){var fe=H==="BigNumber",re=H==="Complex",W=fe?u(0):0,ie=fe?u(1):re?w(1):1,me=fe?u(1):1,le=fe?u(10):2,ve=s(le,le),ye;he&&(ye=Array(R).fill(ie));for(var Ie=!1;!Ie;){Ie=!0;for(var Ue=0;Ue<R;Ue++){for(var Ge=W,Be=W,$e=0;$e<R;$e++)Ue!==$e&&(Ge=e(Ge,l(te[$e][Ue])),Be=e(Be,l(te[Ue][$e])));if(!v(Ge,0)&&!v(Be,0)){for(var He=me,Z=Ge,ce=a(Be,le),q=s(Be,le);A(Z,ce);)Z=s(Z,ve),He=s(He,le);for(;y(Z,q);)Z=a(Z,ve),He=a(He,le);var Q=A(a(e(Z,Be),He),s(e(Ge,Be),.95));if(Q){Ie=!1;for(var ae=a(1,He),de=0;de<R;de++)Ue!==de&&(te[Ue][de]=s(te[Ue][de],ae),te[de][Ue]=s(te[de][Ue],He));he&&(ye[Ue]=s(ye[Ue],ae))}}}}return he?c(ye):null}function C(te,R,Y,H,he,fe){var re=H==="BigNumber",W=H==="Complex",ie=re?u(0):W?w(0):0;re&&(Y=u(Y));for(var me=0;me<R-2;me++){for(var le=0,ve=ie,ye=me+1;ye<R;ye++){var Ie=te[ye][me];A(l(ve),l(Ie))&&(ve=Ie,le=ye)}if(!A(l(ve),Y)){if(le!==me+1){var Ue=te[le];te[le]=te[me+1],te[me+1]=Ue;for(var Ge=0;Ge<R;Ge++){var Be=te[Ge][le];te[Ge][le]=te[Ge][me+1],te[Ge][me+1]=Be}if(he){var $e=fe[le];fe[le]=fe[me+1],fe[me+1]=$e}}for(var He=me+2;He<R;He++){var Z=a(te[He][me],ve);if(Z!==0){for(var ce=0;ce<R;ce++)te[He][ce]=t(te[He][ce],s(Z,te[me+1][ce]));for(var q=0;q<R;q++)te[q][me+1]=e(te[q][me+1],s(Z,te[q][He]));if(he)for(var Q=0;Q<R;Q++)fe[He][Q]=t(fe[He][Q],s(Z,fe[me+1][Q]))}}}}return fe}function N(te,R,Y,H,he){var fe=H==="BigNumber",re=H==="Complex",W=fe?u(1):re?w(1):1;fe&&(Y=u(Y));for(var ie=gt(te),me=[],le=R,ve=[],ye=he?c(Array(R).fill(W)):void 0,Ie=he?c(Array(le).fill(W)):void 0,Ue=0;Ue<=100;){Ue+=1;for(var Ge=ie[le-1][le-1],Be=0;Be<le;Be++)ie[Be][Be]=t(ie[Be][Be],Ge);var{Q:$e,R:He}=p(ie);ie=i(He,$e);for(var Z=0;Z<le;Z++)ie[Z][Z]=e(ie[Z][Z],Ge);if(he&&(Ie=i(Ie,$e)),le===1||A(l(ie[le-1][le-2]),Y)){Ue=0,me.push(ie[le-1][le-1]),he&&(ve.unshift([[1]]),V(Ie,R),ye=i(ye,Ie),le>1&&(Ie=c(Array(le-1).fill(W)))),le-=1,ie.pop();for(var ce=0;ce<le;ce++)ie[ce].pop()}else if(le===2||A(l(ie[le-2][le-3]),Y)){Ue=0;var q=M(ie[le-2][le-2],ie[le-2][le-1],ie[le-1][le-2],ie[le-1][le-1]);me.push(...q),he&&(ve.unshift(I(ie[le-2][le-2],ie[le-2][le-1],ie[le-1][le-2],ie[le-1][le-1],q[0],q[1],Y,H)),V(Ie,R),ye=i(ye,Ie),le>2&&(Ie=c(Array(le-2).fill(W)))),le-=2,ie.pop(),ie.pop();for(var Q=0;Q<le;Q++)ie[Q].pop(),ie[Q].pop()}if(le===0)break}if(me.sort((ge,pe)=>+t(l(ge),l(pe))),Ue>100){var ae=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+me.join(", "));throw ae.values=me,ae.vectors=[],ae}var de=he?i(ye,K(ve,R)):void 0;return{values:me,C:de}}function D(te,R,Y,H,he,fe,re){var W=f(Y),ie=i(W,te,Y),me=re==="BigNumber",le=re==="Complex",ve=me?u(0):le?w(0):0,ye=me?u(1):le?w(1):1,Ie=[],Ue=[];for(var Ge of he){var Be=F(Ie,Ge,v);Be===-1?(Ie.push(Ge),Ue.push(1)):Ue[Be]+=1}for(var $e=[],He=Ie.length,Z=Array(R).fill(ve),ce=c(Array(R).fill(ye)),q=function(){var de=Ie[Q],ge=t(ie,i(de,ce)),pe=b(ge,Z);for(pe.shift();pe.length<Ue[Q];){var Ne=U(ge,R,pe,fe,re);if(Ne===null)break;pe.push(Ne)}var Ee=i(f(H),Y);pe=pe.map(Oe=>i(Ee,Oe)),$e.push(...pe.map(Oe=>({value:de,vector:n(Oe)})))},Q=0;Q<He;Q++)q();return $e}function M(te,R,Y,H){var he=e(te,H),fe=t(s(te,H),s(R,Y)),re=s(he,.5),W=s(o(t(s(he,he),s(4,fe))),.5);return[e(re,W),t(re,W)]}function I(te,R,Y,H,he,fe,re,W){var ie=W==="BigNumber",me=W==="Complex",le=ie?u(0):me?w(0):0,ve=ie?u(1):me?w(1):1;if(A(l(Y),re))return[[ve,le],[le,ve]];if(y(l(t(he,fe)),re))return[[t(he,H),t(fe,H)],[Y,Y]];var ye=t(te,he),Ie=t(H,he);return A(l(R),re)&&A(l(Ie),re)?[[ye,ve],[Y,le]]:[[R,le],[Ie,ve]]}function V(te,R){for(var Y=0;Y<te.length;Y++)te[Y].push(...Array(R-te[Y].length).fill(0));for(var H=te.length;H<R;H++)te.push(Array(R).fill(0)),te[H][H]=1;return te}function K(te,R){for(var Y=[],H=0;H<R;H++)Y[H]=Array(R).fill(0);var he=0;for(var fe of te){for(var re=fe.length,W=0;W<re;W++)for(var ie=0;ie<re;ie++)Y[he+W][he+ie]=fe[W][ie];he+=re}return Y}function F(te,R,Y){for(var H=0;H<te.length;H++)if(Y(te[H],R))return H;return-1}function U(te,R,Y,H,he){for(var fe=he==="BigNumber"?u(1e3):1e3,re,W=0;W<5;++W){re=j(R,Y,he);try{re=g(te,re)}catch{continue}if(y(ee(re),fe))break}if(W>=5)return null;for(W=0;;){var ie=g(te,re);if(A(ee(G(re,[ie])),H))break;if(++W>=10)return null;re=ue(ie)}return re}function j(te,R,Y){var H=Y==="BigNumber",he=Y==="Complex",fe=Array(te).fill(0).map(re=>2*Math.random()-1);return H&&(fe=fe.map(re=>u(re))),he&&(fe=fe.map(re=>w(re))),fe=G(fe,R),ue(fe,Y)}function G(te,R){var Y=h(te);for(var H of R)H=d(H,Y),te=t(te,i(a(_(H,te),_(H,H)),H));return te}function ee(te){return l(o(_(te,te)))}function ue(te,R){var Y=R==="BigNumber",H=R==="Complex",he=Y?u(1):H?w(1):1;return i(a(he,ee(te)),te)}return S}function kMe(r){var{config:e,addScalar:t,subtract:n,abs:i,atan:s,cos:a,sin:o,multiplyScalar:l,inv:u,bignumber:c,multiply:h,add:d}=r;function f(C,N){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.relTol,M=arguments.length>3?arguments[3]:void 0,I=arguments.length>4?arguments[4]:void 0;if(M==="number")return p(C,D,I);if(M==="BigNumber")return g(C,D,I);throw TypeError("Unsupported data type: "+M)}function p(C,N,D){var M=C.length,I=Math.abs(N/M),V,K;if(D){K=new Array(M);for(var F=0;F<M;F++)K[F]=Array(M).fill(0),K[F][F]=1}for(var U=_(C);Math.abs(U[1])>=Math.abs(I);){var j=U[0][0],G=U[0][1];V=b(C[j][j],C[G][G],C[j][G]),C=x(C,V,j,G),D&&(K=w(K,V,j,G)),U=_(C)}for(var ee=Array(M).fill(0),ue=0;ue<M;ue++)ee[ue]=C[ue][ue];return E(gt(ee),K,D)}function g(C,N,D){var M=C.length,I=i(N/M),V,K;if(D){K=new Array(M);for(var F=0;F<M;F++)K[F]=Array(M).fill(0),K[F][F]=1}for(var U=S(C);i(U[1])>=i(I);){var j=U[0][0],G=U[0][1];V=v(C[j][j],C[G][G],C[j][G]),C=A(C,V,j,G),D&&(K=y(K,V,j,G)),U=S(C)}for(var ee=Array(M).fill(0),ue=0;ue<M;ue++)ee[ue]=C[ue][ue];return E(gt(ee),K,D)}function b(C,N,D){var M=N-C;return Math.abs(M)<=e.relTol?Math.PI/4:.5*Math.atan(2*D/(N-C))}function v(C,N,D){var M=n(N,C);return i(M)<=e.relTol?c(-1).acos().div(4):l(.5,s(h(2,D,u(M))))}function w(C,N,D,M){for(var I=C.length,V=Math.cos(N),K=Math.sin(N),F=Array(I).fill(0),U=Array(I).fill(0),j=0;j<I;j++)F[j]=V*C[j][D]-K*C[j][M],U[j]=K*C[j][D]+V*C[j][M];for(var G=0;G<I;G++)C[G][D]=F[G],C[G][M]=U[G];return C}function y(C,N,D,M){for(var I=C.length,V=a(N),K=o(N),F=Array(I).fill(c(0)),U=Array(I).fill(c(0)),j=0;j<I;j++)F[j]=n(l(V,C[j][D]),l(K,C[j][M])),U[j]=t(l(K,C[j][D]),l(V,C[j][M]));for(var G=0;G<I;G++)C[G][D]=F[G],C[G][M]=U[G];return C}function A(C,N,D,M){for(var I=C.length,V=c(a(N)),K=c(o(N)),F=l(V,V),U=l(K,K),j=Array(I).fill(c(0)),G=Array(I).fill(c(0)),ee=h(c(2),V,K,C[D][M]),ue=t(n(l(F,C[D][D]),ee),l(U,C[M][M])),te=d(l(U,C[D][D]),ee,l(F,C[M][M])),R=0;R<I;R++)j[R]=n(l(V,C[D][R]),l(K,C[M][R])),G[R]=t(l(K,C[D][R]),l(V,C[M][R]));C[D][D]=ue,C[M][M]=te,C[D][M]=c(0),C[M][D]=c(0);for(var Y=0;Y<I;Y++)Y!==D&&Y!==M&&(C[D][Y]=j[Y],C[Y][D]=j[Y],C[M][Y]=G[Y],C[Y][M]=G[Y]);return C}function x(C,N,D,M){for(var I=C.length,V=Math.cos(N),K=Math.sin(N),F=V*V,U=K*K,j=Array(I).fill(0),G=Array(I).fill(0),ee=F*C[D][D]-2*V*K*C[D][M]+U*C[M][M],ue=U*C[D][D]+2*V*K*C[D][M]+F*C[M][M],te=0;te<I;te++)j[te]=V*C[D][te]-K*C[M][te],G[te]=K*C[D][te]+V*C[M][te];C[D][D]=ee,C[M][M]=ue,C[D][M]=0,C[M][D]=0;for(var R=0;R<I;R++)R!==D&&R!==M&&(C[D][R]=j[R],C[R][D]=j[R],C[M][R]=G[R],C[R][M]=G[R]);return C}function _(C){for(var N=C.length,D=0,M=[0,1],I=0;I<N;I++)for(var V=I+1;V<N;V++)Math.abs(D)<Math.abs(C[I][V])&&(D=Math.abs(C[I][V]),M=[I,V]);return[M,D]}function S(C){for(var N=C.length,D=0,M=[0,1],I=0;I<N;I++)for(var V=I+1;V<N;V++)i(D)<i(C[I][V])&&(D=i(C[I][V]),M=[I,V]);return[M,D]}function E(C,N,D){var M=C.length,I=Array(M),V;if(D){V=Array(M);for(var K=0;K<M;K++)V[K]=Array(M)}for(var F=0;F<M;F++){for(var U=0,j=C[0],G=0;G<C.length;G++)i(C[G])<i(j)&&(U=G,j=C[U]);if(I[F]=C.splice(U,1)[0],D)for(var ee=0;ee<M;ee++)V[F][ee]=N[ee][U],N[ee].splice(U,1)}if(!D)return{values:I};var ue=V.map((te,R)=>({value:I[R],vector:te}));return{values:I,eigenvectors:ue}}return f}var FMe="eigs",OMe=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],BMe=X(FMe,OMe,r=>{var{config:e,typed:t,matrix:n,addScalar:i,subtract:s,equal:a,abs:o,atan:l,cos:u,sin:c,multiplyScalar:h,divideScalar:d,inv:f,bignumber:p,multiply:g,add:b,larger:v,column:w,flatten:y,number:A,complex:x,sqrt:_,diag:S,size:E,reshape:C,qr:N,usolve:D,usolveAll:M,im:I,re:V,smaller:K,matrixFromColumns:F,dot:U}=r,j=kMe({config:e,addScalar:i,subtract:s,abs:o,atan:l,cos:u,sin:c,multiplyScalar:h,inv:f,bignumber:p,multiply:g,add:b}),G=RMe({addScalar:i,subtract:s,multiply:g,multiplyScalar:h,flatten:y,divideScalar:d,sqrt:_,abs:o,bignumber:p,diag:S,size:E,reshape:C,qr:N,inv:f,usolve:D,usolveAll:M,equal:a,complex:x,larger:v,smaller:K,matrixFromColumns:F,dot:U});return t("eigs",{Array:function(fe){return ee(n(fe))},"Array, number|BigNumber":function(fe,re){return ee(n(fe),{precision:re})},"Array, Object"(he,fe){return ee(n(he),fe)},Matrix:function(fe){return ee(fe,{matricize:!0})},"Matrix, number|BigNumber":function(fe,re){return ee(fe,{precision:re,matricize:!0})},"Matrix, Object":function(fe,re){var W={matricize:!0};return An(W,re),ee(fe,W)}});function ee(he){var fe,re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},W="eigenvectors"in re?re.eigenvectors:!0,ie=(fe=re.precision)!==null&&fe!==void 0?fe:e.relTol,me=ue(he,ie,W);return re.matricize&&(me.values=n(me.values),W&&(me.eigenvectors=me.eigenvectors.map(le=>{var{value:ve,vector:ye}=le;return{value:ve,vector:n(ye)}}))),W&&Object.defineProperty(me,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),me}function ue(he,fe,re){var W=he.toArray(),ie=he.size();if(ie.length!==2||ie[0]!==ie[1])throw new RangeError("Matrix must be square (size: ".concat(Pt(ie),")"));var me=ie[0];if(R(W,me,fe)&&(Y(W,me),te(W,me,fe))){var le=H(he,W,me);return j(W,me,fe,le,re)}var ve=H(he,W,me);return G(W,me,fe,ve,re)}function te(he,fe,re){for(var W=0;W<fe;W++)for(var ie=W;ie<fe;ie++)if(v(p(o(s(he[W][ie],he[ie][W]))),re))return!1;return!0}function R(he,fe,re){for(var W=0;W<fe;W++)for(var ie=0;ie<fe;ie++)if(v(p(o(I(he[W][ie]))),re))return!1;return!0}function Y(he,fe){for(var re=0;re<fe;re++)for(var W=0;W<fe;W++)he[re][W]=V(he[re][W])}function H(he,fe,re){var W=he.datatype();if(W==="number"||W==="BigNumber"||W==="Complex")return W;for(var ie=!1,me=!1,le=!1,ve=0;ve<re;ve++)for(var ye=0;ye<re;ye++){var Ie=fe[ve][ye];if(it(Ie)||c_(Ie))ie=!0;else if(xt(Ie))me=!0;else if(uc(Ie))le=!0;else throw TypeError("Unsupported type in Matrix: "+dr(Ie))}if(me&&le&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),le){for(var Ue=0;Ue<re;Ue++)for(var Ge=0;Ge<re;Ge++)fe[Ue][Ge]=x(fe[Ue][Ge]);return"Complex"}if(me){for(var Be=0;Be<re;Be++)for(var $e=0;$e<re;$e++)fe[Be][$e]=p(fe[Be][$e]);return"BigNumber"}if(ie){for(var He=0;He<re;He++)for(var Z=0;Z<re;Z++)fe[He][Z]=A(fe[He][Z]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),M8="expm",LMe=["typed","abs","add","identity","inv","multiply"],$Me=X(M8,LMe,r=>{var{typed:e,abs:t,add:n,identity:i,inv:s,multiply:a}=r;return e(M8,{Matrix:function(h){var d=h.size();if(d.length!==2||d[0]!==d[1])throw new RangeError("Matrix must be square (size: "+Pt(d)+")");for(var f=d[0],p=1e-15,g=o(h),b=l(g,p),v=b.q,w=b.j,y=a(h,Math.pow(2,-w)),A=i(f),x=i(f),_=1,S=y,E=-1,C=1;C<=v;C++)C>1&&(S=a(S,y),E=-E),_=_*(v-C+1)/((2*v-C+1)*C),A=n(A,a(_,S)),x=n(x,a(_*E,S));for(var N=a(s(x),A),D=0;D<w;D++)N=a(N,N);return Af(h)?h.createSparseMatrix(N):N}});function o(c){for(var h=c.size()[0],d=0,f=0;f<h;f++){for(var p=0,g=0;g<h;g++)p+=t(c.get([f,g]));d=Math.max(p,d)}return d}function l(c,h){for(var d=30,f=0;f<d;f++)for(var p=0;p<=f;p++){var g=f-p;if(u(c,p,g)<h)return{q:p,j:g}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}function u(c,h,d){for(var f=1,p=2;p<=h;p++)f*=p;for(var g=f,b=h+1;b<=2*h;b++)g*=b;var v=g*(2*h+1);return 8*Math.pow(c/Math.pow(2,d),2*h)*f*f/(g*v)}}),I8="sqrtm",VMe=["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],UMe=X(I8,VMe,r=>{var{typed:e,abs:t,add:n,multiply:i,map:s,sqrt:a,subtract:o,inv:l,size:u,max:c,identity:h}=r,d=1e3,f=1e-6;function p(g){var b,v=0,w=g,y=h(u(g));do{var A=w;if(w=i(.5,n(A,l(y))),y=i(.5,n(y,l(A))),b=c(t(o(w,A))),b>f&&++v>d)throw new Error("computing square root of matrix: iterative method could not converge")}while(b>f);return w}return e(I8,{"Array | Matrix":function(b){var v=ot(b)?b.size():vt(b);switch(v.length){case 1:if(v[0]===1)return s(b,a);throw new RangeError("Matrix must be square (size: "+Pt(v)+")");case 2:{var w=v[0],y=v[1];if(w===y)return p(b);throw new RangeError("Matrix must be square (size: "+Pt(v)+")")}default:throw new RangeError("Matrix must be at most two dimensional (size: "+Pt(v)+")")}}})}),P8="sylvester",zMe=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],jMe=X(P8,zMe,r=>{var{typed:e,schur:t,matrixFromColumns:n,matrix:i,multiply:s,range:a,concat:o,transpose:l,index:u,subset:c,add:h,subtract:d,identity:f,lusolve:p,abs:g,config:b}=r;return e(P8,{"Matrix, Matrix, Matrix":v,"Array, Matrix, Matrix":function(y,A,x){return v(i(y),A,x)},"Array, Array, Matrix":function(y,A,x){return v(i(y),i(A),x)},"Array, Matrix, Array":function(y,A,x){return v(i(y),A,i(x))},"Matrix, Array, Matrix":function(y,A,x){return v(y,i(A),x)},"Matrix, Array, Array":function(y,A,x){return v(y,i(A),i(x))},"Matrix, Matrix, Array":function(y,A,x){return v(y,A,i(x))},"Array, Array, Array":function(y,A,x){return v(i(y),i(A),i(x)).toArray()}});function v(w,y,A){for(var x=y.size()[0],_=w.size()[0],S=t(w),E=S.T,C=S.U,N=t(s(-1,y)),D=N.T,M=N.U,I=s(s(l(C),A),M),V=a(0,_),K=[],F=(ve,ye)=>o(ve,ye,1),U=(ve,ye)=>o(ve,ye,0),j=0;j<x;j++)if(j<x-1&&g(c(D,u(j+1,j)))>1e-5){for(var G=U(c(I,u(V,[j])),c(I,u(V,[j+1]))),ee=0;ee<j;ee++)G=h(G,U(s(K[ee],c(D,u(ee,j))),s(K[ee],c(D,u(ee,j+1)))));var ue=s(f(_),s(-1,c(D,u(j,j)))),te=s(f(_),s(-1,c(D,u(j+1,j)))),R=s(f(_),s(-1,c(D,u(j,j+1)))),Y=s(f(_),s(-1,c(D,u(j+1,j+1)))),H=U(F(h(E,ue),te),F(R,h(E,Y))),he=p(H,G);K[j]=he.subset(u(a(0,_),[0])),K[j+1]=he.subset(u(a(_,2*_),[0])),j++}else{for(var fe=c(I,u(V,[j])),re=0;re<j;re++)fe=h(fe,s(K[re],c(D,u(re,j))));var W=c(D,u(j,j)),ie=d(E,s(W,f(_)));K[j]=p(ie,fe)}var me=i(n(...K)),le=s(C,s(me,l(M)));return le}}),R8="schur",qMe=["typed","matrix","identity","multiply","qr","norm","subtract"],HMe=X(R8,qMe,r=>{var{typed:e,matrix:t,identity:n,multiply:i,qr:s,norm:a,subtract:o}=r;return e(R8,{Array:function(c){var h=l(t(c));return{U:h.U.valueOf(),T:h.T.valueOf()}},Matrix:function(c){return l(c)}});function l(u){var c=u.size()[0],h=u,d=n(c),f=0,p;do{p=h;var g=s(h),b=g.Q,v=g.R;if(h=i(v,b),d=i(d,b),f++>100)break}while(a(o(h,p))>1e-4);return{U:d,T:h}}}),k8="lyap",GMe=["typed","matrix","sylvester","multiply","transpose"],WMe=X(k8,GMe,r=>{var{typed:e,matrix:t,sylvester:n,multiply:i,transpose:s}=r;return e(k8,{"Matrix, Matrix":function(o,l){return n(o,s(o),i(-1,l))},"Array, Matrix":function(o,l){return n(t(o),s(t(o)),i(-1,l))},"Matrix, Array":function(o,l){return n(o,s(t(o)),t(i(-1,l)))},"Array, Array":function(o,l){return n(t(o),s(t(o)),t(i(-1,l))).toArray()}})}),KMe="divide",XMe=["typed","matrix","multiply","equalScalar","divideScalar","inv"],YMe=X(KMe,XMe,r=>{var{typed:e,matrix:t,multiply:n,equalScalar:i,divideScalar:s,inv:a}=r,o=Bi({typed:e,equalScalar:i}),l=bo({typed:e});return e("divide",TK({"Array | Matrix, Array | Matrix":function(c,h){return n(c,a(h))},"DenseMatrix, any":function(c,h){return l(c,h,s,!1)},"SparseMatrix, any":function(c,h){return o(c,h,s,!1)},"Array, any":function(c,h){return l(t(c),h,s,!1).valueOf()},"any, Array | Matrix":function(c,h){return n(c,a(h))}},s.signatures))}),F8="distance",QMe=["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],JMe=X(F8,QMe,r=>{var{typed:e,addScalar:t,subtractScalar:n,multiplyScalar:i,divideScalar:s,deepEqual:a,sqrt:o,abs:l}=r;return e(F8,{"Array, Array, Array":function(x,_,S){if(x.length===2&&_.length===2&&S.length===2){if(!c(x))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(_))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(S))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(a(_,S))throw new TypeError("LinePoint1 should not be same with LinePoint2");var E=n(S[1],_[1]),C=n(_[0],S[0]),N=n(i(S[0],_[1]),i(_[0],S[1]));return b(x[0],x[1],E,C,N)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(x,_,S){if(Object.keys(x).length===2&&Object.keys(_).length===2&&Object.keys(S).length===2){if(!c(x))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(_))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(S))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(a(p(_),p(S)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in x&&"pointY"in x&&"lineOnePtX"in _&&"lineOnePtY"in _&&"lineTwoPtX"in S&&"lineTwoPtY"in S){var E=n(S.lineTwoPtY,_.lineOnePtY),C=n(_.lineOnePtX,S.lineTwoPtX),N=n(i(S.lineTwoPtX,_.lineOnePtY),i(_.lineOnePtX,S.lineTwoPtY));return b(x.pointX,x.pointY,E,C,N)}else throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(x,_){if(x.length===2&&_.length===3){if(!c(x))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!h(_))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return b(x[0],x[1],_[0],_[1],_[2])}else if(x.length===3&&_.length===6){if(!h(x))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!f(_))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return v(x[0],x[1],x[2],_[0],_[1],_[2],_[3],_[4],_[5])}else if(x.length===_.length&&x.length>0){if(!d(x))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!d(_))throw new TypeError("All values of an array should be numbers or BigNumbers");return w(x,_)}else throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(x,_){if(Object.keys(x).length===2&&Object.keys(_).length===3){if(!c(x))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!h(_))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in x&&"pointY"in x&&"xCoeffLine"in _&&"yCoeffLine"in _&&"constant"in _)return b(x.pointX,x.pointY,_.xCoeffLine,_.yCoeffLine,_.constant);throw new TypeError("Key names do not match")}else if(Object.keys(x).length===3&&Object.keys(_).length===6){if(!h(x))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!f(_))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in x&&"pointY"in x&&"x0"in _&&"y0"in _&&"z0"in _&&"a"in _&&"b"in _&&"c"in _)return v(x.pointX,x.pointY,x.pointZ,_.x0,_.y0,_.z0,_.a,_.b,_.c);throw new TypeError("Key names do not match")}else if(Object.keys(x).length===2&&Object.keys(_).length===2){if(!c(x))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(_))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in x&&"pointOneY"in x&&"pointTwoX"in _&&"pointTwoY"in _)return w([x.pointOneX,x.pointOneY],[_.pointTwoX,_.pointTwoY]);throw new TypeError("Key names do not match")}else if(Object.keys(x).length===3&&Object.keys(_).length===3){if(!h(x))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!h(_))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in x&&"pointOneY"in x&&"pointOneZ"in x&&"pointTwoX"in _&&"pointTwoY"in _&&"pointTwoZ"in _)return w([x.pointOneX,x.pointOneY,x.pointOneZ],[_.pointTwoX,_.pointTwoY,_.pointTwoZ]);throw new TypeError("Key names do not match")}else throw new TypeError("Invalid Arguments: Try again")},Array:function(x){if(!g(x))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return y(x)}});function u(A){return typeof A=="number"||xt(A)}function c(A){return A.constructor!==Array&&(A=p(A)),u(A[0])&&u(A[1])}function h(A){return A.constructor!==Array&&(A=p(A)),u(A[0])&&u(A[1])&&u(A[2])}function d(A){return Array.isArray(A)||(A=p(A)),A.every(u)}function f(A){return A.constructor!==Array&&(A=p(A)),u(A[0])&&u(A[1])&&u(A[2])&&u(A[3])&&u(A[4])&&u(A[5])}function p(A){for(var x=Object.keys(A),_=[],S=0;S<x.length;S++)_.push(A[x[S]]);return _}function g(A){if(A[0].length===2&&u(A[0][0])&&u(A[0][1])){if(A.some(x=>x.length!==2||!u(x[0])||!u(x[1])))return!1}else if(A[0].length===3&&u(A[0][0])&&u(A[0][1])&&u(A[0][2])){if(A.some(x=>x.length!==3||!u(x[0])||!u(x[1])||!u(x[2])))return!1}else return!1;return!0}function b(A,x,_,S,E){var C=l(t(t(i(_,A),i(S,x)),E)),N=o(t(i(_,_),i(S,S)));return s(C,N)}function v(A,x,_,S,E,C,N,D,M){var I=[n(i(n(E,x),M),i(n(C,_),D)),n(i(n(C,_),N),i(n(S,A),M)),n(i(n(S,A),D),i(n(E,x),N))];I=o(t(t(i(I[0],I[0]),i(I[1],I[1])),i(I[2],I[2])));var V=o(t(t(i(N,N),i(D,D)),i(M,M)));return s(I,V)}function w(A,x){for(var _=A.length,S=0,E=0,C=0;C<_;C++)E=n(A[C],x[C]),S=t(i(E,E),S);return o(S)}function y(A){for(var x=[],_=[],S=[],E=0;E<A.length-1;E++)for(var C=E+1;C<A.length;C++)A[0].length===2?(_=[A[E][0],A[E][1]],S=[A[C][0],A[C][1]]):A[0].length===3&&(_=[A[E][0],A[E][1],A[E][2]],S=[A[C][0],A[C][1],A[C][2]]),x.push(w(_,S));return x}}),ZMe="intersect",eIe=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],tIe=X(ZMe,eIe,r=>{var{typed:e,config:t,abs:n,add:i,addScalar:s,matrix:a,multiply:o,multiplyScalar:l,divideScalar:u,subtract:c,smaller:h,equalScalar:d,flatten:f,isZero:p,isNumeric:g}=r;return e("intersect",{"Array, Array, Array":b,"Array, Array, Array, Array":v,"Matrix, Matrix, Matrix":function(D,M,I){var V=b(D.valueOf(),M.valueOf(),I.valueOf());return V===null?null:a(V)},"Matrix, Matrix, Matrix, Matrix":function(D,M,I,V){var K=v(D.valueOf(),M.valueOf(),I.valueOf(),V.valueOf());return K===null?null:a(K)}});function b(N,D,M){if(N=w(N),D=w(D),M=w(M),!A(N))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!A(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!x(M))throw new TypeError("Array with 4 numbers expected as third argument");return C(N[0],N[1],N[2],D[0],D[1],D[2],M[0],M[1],M[2],M[3])}function v(N,D,M,I){if(N=w(N),D=w(D),M=w(M),I=w(I),N.length===2){if(!y(N))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!y(D))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!y(M))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!y(I))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return _(N,D,M,I)}else if(N.length===3){if(!A(N))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!A(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!A(M))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!A(I))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return E(N[0],N[1],N[2],D[0],D[1],D[2],M[0],M[1],M[2],I[0],I[1],I[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function w(N){return N.length===1?N[0]:N.length>1&&Array.isArray(N[0])&&N.every(D=>Array.isArray(D)&&D.length===1)?f(N):N}function y(N){return N.length===2&&g(N[0])&&g(N[1])}function A(N){return N.length===3&&g(N[0])&&g(N[1])&&g(N[2])}function x(N){return N.length===4&&g(N[0])&&g(N[1])&&g(N[2])&&g(N[3])}function _(N,D,M,I){var V=N,K=M,F=c(V,D),U=c(K,I),j=c(l(F[0],U[1]),l(U[0],F[1]));if(p(j)||h(n(j),t.relTol))return null;var G=l(U[0],V[1]),ee=l(U[1],V[0]),ue=l(U[0],K[1]),te=l(U[1],K[0]),R=u(s(c(c(G,ee),ue),te),j);return i(o(F,R),V)}function S(N,D,M,I,V,K,F,U,j,G,ee,ue){var te=l(c(N,D),c(M,I)),R=l(c(V,K),c(F,U)),Y=l(c(j,G),c(ee,ue));return s(s(te,R),Y)}function E(N,D,M,I,V,K,F,U,j,G,ee,ue){var te=S(N,F,G,F,D,U,ee,U,M,j,ue,j),R=S(G,F,I,N,ee,U,V,D,ue,j,K,M),Y=S(N,F,I,N,D,U,V,D,M,j,K,M),H=S(G,F,G,F,ee,U,ee,U,ue,j,ue,j),he=S(I,N,I,N,V,D,V,D,K,M,K,M),fe=c(l(te,R),l(Y,H)),re=c(l(he,H),l(R,R));if(p(re))return null;var W=u(fe,re),ie=u(s(te,l(W,R)),H),me=s(N,l(W,c(I,N))),le=s(D,l(W,c(V,D))),ve=s(M,l(W,c(K,M))),ye=s(F,l(ie,c(G,F))),Ie=s(U,l(ie,c(ee,U))),Ue=s(j,l(ie,c(ue,j)));return d(me,ye)&&d(le,Ie)&&d(ve,Ue)?[me,le,ve]:null}function C(N,D,M,I,V,K,F,U,j,G){var ee=l(N,F),ue=l(I,F),te=l(D,U),R=l(V,U),Y=l(M,j),H=l(K,j),he=c(c(c(G,ee),te),Y),fe=c(c(c(s(s(ue,R),H),ee),te),Y),re=u(he,fe),W=s(N,l(re,c(I,N))),ie=s(D,l(re,c(V,D))),me=s(M,l(re,c(K,M)));return[W,ie,me]}}),O8="sum",rIe=["typed","config","add","numeric"],yY=X(O8,rIe,r=>{var{typed:e,config:t,add:n,numeric:i}=r;return e(O8,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":a,"...":function(l){if(ty(l))throw new TypeError("Scalar values expected in function sum");return s(l)}});function s(o){var l;return Dd(o,function(u){try{l=l===void 0?u:n(l,u)}catch(c){throw Ts(c,"sum",u)}}),l===void 0&&(l=i(0,t.number)),typeof l=="string"&&(l=i(l,Vd(l,t))),l}function a(o,l){try{var u=oN(o,l,n);return u}catch(c){throw Ts(c,"sum")}}}),UA="cumsum",nIe=["typed","add","unaryPlus"],bY=X(UA,nIe,r=>{var{typed:e,add:t,unaryPlus:n}=r;return e(UA,{Array:i,Matrix:function(u){return u.create(i(u.valueOf(),u.datatype()))},"Array, number | BigNumber":a,"Matrix, number | BigNumber":function(u,c){return u.create(a(u.valueOf(),c),u.datatype())},"...":function(u){if(ty(u))throw new TypeError("All values expected to be scalar in function cumsum");return i(u)}});function i(l){try{return s(l)}catch(u){throw Ts(u,UA)}}function s(l){if(l.length===0)return[];for(var u=[n(l[0])],c=1;c<l.length;++c)u.push(t(u[c-1],l[c]));return u}function a(l,u){var c=vt(l);if(u<0||u>=c.length)throw new Zo(u,c.length);try{return o(l,u)}catch(h){throw Ts(h,UA)}}function o(l,u){var c,h,d;if(u<=0){var f=l[0][0];if(Array.isArray(f)){for(d=eX(l),h=[],c=0;c<d.length;c++)h[c]=o(d[c],u-1);return h}else return s(l)}else{for(h=[],c=0;c<l.length;c++)h[c]=o(l[c],u-1);return h}}}),B8="mean",iIe=["typed","add","divide"],wY=X(B8,iIe,r=>{var{typed:e,add:t,divide:n}=r;return e(B8,{"Array | Matrix":s,"Array | Matrix, number | BigNumber":i,"...":function(o){if(ty(o))throw new TypeError("Scalar values expected in function mean");return s(o)}});function i(a,o){try{var l=oN(a,o,t),u=Array.isArray(a)?vt(a):a.size();return n(l,u[o])}catch(c){throw Ts(c,"mean")}}function s(a){var o,l=0;if(Dd(a,function(u){try{o=o===void 0?u:t(o,u),l++}catch(c){throw Ts(c,"mean",u)}}),l===0)throw new Error("Cannot calculate the mean of an empty array");return n(o,l)}}),L8="median",sIe=["typed","add","divide","compare","partitionSelect"],aIe=X(L8,sIe,r=>{var{typed:e,add:t,divide:n,compare:i,partitionSelect:s}=r;function a(u){try{u=Yt(u.valueOf());var c=u.length;if(c===0)throw new Error("Cannot calculate median of an empty array");if(c%2===0){for(var h=c/2-1,d=s(u,h+1),f=u[h],p=0;p<h;++p)i(u[p],f)>0&&(f=u[p]);return l(f,d)}else{var g=s(u,(c-1)/2);return o(g)}}catch(b){throw Ts(b,"median")}}var o=e({"number | BigNumber | Complex | Unit":function(c){return c}}),l=e({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(c,h){return n(t(c,h),2)}});return e(L8,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(c,h){throw new Error("median(A, dim) is not yet supported")},"...":function(c){if(ty(c))throw new TypeError("Scalar values expected in function median");return a(c)}})}),$8="mad",oIe=["typed","abs","map","median","subtract"],lIe=X($8,oIe,r=>{var{typed:e,abs:t,map:n,median:i,subtract:s}=r;return e($8,{"Array | Matrix":a,"...":function(l){return a(l)}});function a(o){if(o=Yt(o.valueOf()),o.length===0)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var l=i(o);return i(n(o,function(u){return t(s(u,l))}))}catch(u){throw u instanceof TypeError&&u.message.includes("median")?new TypeError(u.message.replace("median","mad")):Ts(u,"mad")}}}),tD="unbiased",V8="variance",uIe=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],xY=X(V8,uIe,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:s,mapSlices:a,isNaN:o}=r;return e(V8,{"Array | Matrix":function(h){return l(h,tD)},"Array | Matrix, string":l,"Array | Matrix, number | BigNumber":function(h,d){return u(h,d,tD)},"Array | Matrix, number | BigNumber, string":u,"...":function(h){return l(h,tD)}});function l(c,h){var d,f=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(Dd(c,function(b){try{d=d===void 0?b:t(d,b),f++}catch(v){throw Ts(v,"variance",b)}}),f===0)throw new Error("Cannot calculate variance of an empty array");var p=s(d,f);if(d=void 0,Dd(c,function(b){var v=n(b,p);d=d===void 0?i(v,v):t(d,i(v,v))}),o(d))return d;switch(h){case"uncorrected":return s(d,f);case"biased":return s(d,f+1);case"unbiased":{var g=xt(d)?d.mul(0):0;return f===1?g:s(d,f-1)}default:throw new Error('Unknown normalization "'+h+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function u(c,h,d){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return a(c,h,f=>l(f,d))}catch(f){throw Ts(f,"variance")}}}),U8="quantileSeq",cIe=["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],_Y=X(U8,cIe,r=>{var{typed:e,bignumber:t,add:n,subtract:i,divide:s,multiply:a,partitionSelect:o,compare:l,isInteger:u,smaller:c,smallerEq:h,larger:d,mapSlices:f}=r;return e(U8,{"Array | Matrix, number | BigNumber":(w,y)=>g(w,y,!1),"Array | Matrix, number | BigNumber, number":(w,y,A)=>p(w,y,!1,A,g),"Array | Matrix, number | BigNumber, boolean":g,"Array | Matrix, number | BigNumber, boolean, number":(w,y,A,x)=>p(w,y,A,x,g),"Array | Matrix, Array | Matrix":(w,y)=>b(w,y,!1),"Array | Matrix, Array | Matrix, number":(w,y,A)=>p(w,y,!1,A,b),"Array | Matrix, Array | Matrix, boolean":b,"Array | Matrix, Array | Matrix, boolean, number":(w,y,A,x)=>p(w,y,A,x,b)});function p(w,y,A,x,_){return f(w,x,S=>_(S,y,A))}function g(w,y,A){var x,_=w.valueOf();if(c(y,0))throw new Error("N/prob must be non-negative");if(h(y,1))return it(y)?v(_,y,A):t(v(_,y,A));if(d(y,1)){if(!u(y))throw new Error("N must be a positive integer");if(d(y,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var S=n(y,1);x=[];for(var E=0;c(E,y);E++){var C=s(E+1,S);x.push(v(_,C,A))}return it(y)?x:t(x)}}function b(w,y,A){for(var x=w.valueOf(),_=y.valueOf(),S=[],E=0;E<_.length;++E)S.push(v(x,_[E],A));return S}function v(w,y,A){var x=Yt(w),_=x.length;if(_===0)throw new Error("Cannot calculate quantile of an empty sequence");var S=it(y)?y*(_-1):y.times(_-1),E=it(y)?Math.floor(S):S.floor().toNumber(),C=it(y)?S%1:S.minus(E);if(u(S))return A?x[S]:o(x,it(y)?S:S.valueOf());var N,D;if(A)N=x[E],D=x[E+1];else{D=o(x,E+1),N=x[E];for(var M=0;M<E;++M)l(x[M],N)>0&&(N=x[M])}return n(a(N,i(1,C)),a(D,C))}}),z8="std",hIe=["typed","map","sqrt","variance"],AY=X(z8,hIe,r=>{var{typed:e,map:t,sqrt:n,variance:i}=r;return e(z8,{"Array | Matrix":s,"Array | Matrix, string":s,"Array | Matrix, number | BigNumber":s,"Array | Matrix, number | BigNumber, string":s,"...":function(o){return s(o)}});function s(a,o){if(a.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var l=i.apply(null,arguments);return Ia(l)?t(l,n):n(l)}catch(u){throw u instanceof TypeError&&u.message.includes(" variance")?new TypeError(u.message.replace(" variance"," std")):u}}}),j8="corr",dIe=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],fIe=X(j8,dIe,r=>{var{typed:e,matrix:t,sqrt:n,sum:i,add:s,subtract:a,multiply:o,pow:l,divide:u}=r;return e(j8,{"Array, Array":function(f,p){return c(f,p)},"Matrix, Matrix":function(f,p){var g=c(f.toArray(),p.toArray());return Array.isArray(g)?t(g):g}});function c(d,f){var p=[];if(Array.isArray(d[0])&&Array.isArray(f[0])){if(d.length!==f.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var g=0;g<d.length;g++){if(d[g].length!==f[g].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");p.push(h(d[g],f[g]))}return p}else{if(d.length!==f.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return h(d,f)}}function h(d,f){var p=d.length,g=i(d),b=i(f),v=d.reduce((_,S,E)=>s(_,o(S,f[E])),0),w=i(d.map(_=>l(_,2))),y=i(f.map(_=>l(_,2))),A=a(o(p,v),o(g,b)),x=n(o(a(o(p,w),l(g,2)),a(o(p,y),l(b,2))));return u(A,x)}}),q8="bernoulli",mIe=["typed","config","isInteger","number","?BigNumber","?Fraction"],pIe=X(q8,mIe,r=>{var{typed:e,config:t,number:n,BigNumber:i,Fraction:s}=r,a=[void 0],o=[void 0],l=[void 0],u=50;return e(q8,{number:c=>rD(c,h=>h,a,(h,d)=>h+d,(h,d)=>h*d,(h,d)=>h/d),"bigint | Fraction":c=>rD(n(c),h=>new s(h),o,(h,d)=>h.add(d),(h,d)=>h.mul(d),(h,d)=>h.div(d)),BigNumber:c=>(t.precision!==u&&(l=[void 0],u=t.precision),rD(n(c),h=>new i(h),l,(h,d)=>h.add(d),(h,d)=>h.mul(d),(h,d)=>h.div(d)))})});function rD(r,e,t,n,i,s){if(r<0||!tt(r))throw new RangeError("Bernoulli index must be nonnegative integer");if(r===0)return e(1);if(r===1)return s(e(-1),e(2));if(r%2===1)return e(0);var a=e(1);t.length===1&&t.push([s(a,e(-3)),s(a,e(-2)),s(a,e(6))]);for(var o=r/2,l=e(0),u=e(2);t.length<=o;){for(var c=t.length,h=Math.floor((c+1)/2),d=l,f=1;f<h;++f)d=n(d,i(t[f][0],t[c-f][0]));d=i(d,u),c%2===0&&(d=n(d,i(t[h][0],t[h][0]))),d=s(d,e(-(2*c+1)));var p=s(i(t[c-1][1],e(-c*(2*c-1))),u);t.push([d,p,i(p,d)])}return t[o][2]}var H8="combinations",gIe=["typed"],vIe=X(H8,gIe,r=>{var{typed:e}=r;return e(H8,{"number, number":xX,"BigNumber, BigNumber":function(n,i){var s=n.constructor,a,o,l=n.minus(i),u=new s(1);if(!G8(n)||!G8(i))throw new TypeError("Positive integer value expected in function combinations");if(i.gt(n))throw new TypeError("k must be less than n in function combinations");if(a=u,i.lt(l))for(o=u;o.lte(l);o=o.plus(u))a=a.times(i.plus(o)).dividedBy(o);else for(o=u;o.lte(i);o=o.plus(u))a=a.times(l.plus(o)).dividedBy(o);return a}})});function G8(r){return r.isInteger()&&r.gte(0)}var W8="combinationsWithRep",yIe=["typed"],bIe=X(W8,yIe,r=>{var{typed:e}=r;return e(W8,{"number, number":function(n,i){if(!tt(n)||n<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!tt(i)||i<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n<1)throw new TypeError("k must be less than or equal to n + k - 1");if(i<n-1){var s=sc(n,n+i-1);return s/sc(1,i)}var a=sc(i+1,n+i-1);return a/sc(1,n-1)},"BigNumber, BigNumber":function(n,i){var s=n.constructor,a,o,l=new s(1),u=n.minus(l);if(!K8(n)||!K8(i))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(n.lt(l))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(a=l,i.lt(u))for(o=l;o.lte(u);o=o.plus(l))a=a.times(i.plus(o)).dividedBy(o);else for(o=l;o.lte(i);o=o.plus(l))a=a.times(u.plus(o)).dividedBy(o);return a}})});function K8(r){return r.isInteger()&&r.gte(0)}var X8="gamma",wIe=["typed","config","multiplyScalar","pow","BigNumber","Complex"],xIe=X(X8,wIe,r=>{var{typed:e,config:t,multiplyScalar:n,pow:i,BigNumber:s,Complex:a}=r;function o(u){if(u.im===0)return _T(u.re);if(u.re<.5){var c=new a(1-u.re,-u.im),h=new a(Math.PI*u.re,Math.PI*u.im);return new a(Math.PI).div(h.sin()).div(o(c))}u=new a(u.re-1,u.im);for(var d=new a(zg[0],0),f=1;f<zg.length;++f){var p=new a(zg[f],0);d=d.add(p.div(u.add(f)))}var g=new a(u.re+AX+.5,u.im),b=Math.sqrt(2*Math.PI),v=g.pow(u.add(.5)),w=g.neg().exp();return d.mul(b).mul(v).mul(w)}return e(X8,{number:_T,Complex:o,BigNumber:function(c){if(c.isInteger())return c.isNegative()||c.isZero()?new s(1/0):l(c.minus(1));if(!c.isFinite())return new s(c.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function l(u){if(u<8)return new s([1,1,2,6,24,120,720,5040][u]);var c=t.precision+(Math.log(u.toNumber())|0),h=s.clone({precision:c});if(u%2===1)return u.times(l(new s(u-1)));for(var d=u,f=new h(u),p=u.toNumber();d>2;)d-=2,p+=d,f=f.times(p);return new s(f.toPrecision(s.precision))}}),Y8="lgamma",_Ie=["Complex","typed"],AIe=X(Y8,_Ie,r=>{var{Complex:e,typed:t}=r,n=7,i=7,s=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return t(Y8,{number:AT,Complex:a,BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function a(u){var c=6.283185307179586,h=1.1447298858494002,d=.1;if(u.isNaN())return new e(NaN,NaN);if(u.im===0)return new e(AT(u.re),0);if(u.re>=n||Math.abs(u.im)>=i)return o(u);if(u.re<=d){var f=Kge(c,u.im)*Math.floor(.5*u.re+.25),p=u.mul(Math.PI).sin().log(),g=a(new e(1-u.re,-u.im));return new e(h,f).sub(p).sub(g)}else return u.im>=0?l(u):l(u.conjugate()).conjugate()}function o(u){for(var c=u.sub(.5).mul(u.log()).sub(u).add(EX),h=new e(1,0).div(u),d=h.div(u),f=s[0],p=s[1],g=2*d.re,b=d.re*d.re+d.im*d.im,v=2;v<8;v++){var w=p;p=-b*f+s[v],f=g*f+w}var y=h.mul(d.mul(f).add(p));return c.add(y)}function l(u){var c=0,h=0,d=u;for(u=u.add(1);u.re<=n;){d=d.mul(u);var f=d.im<0?1:0;f!==0&&h===0&&c++,h=f,u=u.add(1)}return o(u).sub(d.log()).sub(new e(0,c*2*Math.PI*1))}}),Q8="factorial",EIe=["typed","gamma"],SIe=X(Q8,EIe,r=>{var{typed:e,gamma:t}=r;return e(Q8,{number:function(i){if(i<0)throw new Error("Value must be non-negative");return t(i+1)},BigNumber:function(i){if(i.isNegative())throw new Error("Value must be non-negative");return t(i.plus(1))},"Array | Matrix":e.referToSelf(n=>i=>_t(i,n))})}),J8="kldivergence",TIe=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],CIe=X(J8,TIe,r=>{var{typed:e,matrix:t,divide:n,sum:i,multiply:s,map:a,dotDivide:o,log:l,isNumeric:u}=r;return e(J8,{"Array, Array":function(d,f){return c(t(d),t(f))},"Matrix, Array":function(d,f){return c(d,t(f))},"Array, Matrix":function(d,f){return c(t(d),f)},"Matrix, Matrix":function(d,f){return c(d,f)}});function c(h,d){var f=d.size().length,p=h.size().length;if(f>1)throw new Error("first object must be one dimensional");if(p>1)throw new Error("second object must be one dimensional");if(f!==p)throw new Error("Length of two vectors must be equal");var g=i(h);if(g===0)throw new Error("Sum of elements in first object must be non zero");var b=i(d);if(b===0)throw new Error("Sum of elements in second object must be non zero");var v=n(h,i(h)),w=n(d,i(d)),y=i(s(v,a(o(v,w),A=>l(A))));return u(y)?y:Number.NaN}}),Z8="multinomial",NIe=["typed","add","divide","multiply","factorial","isInteger","isPositive"],DIe=X(Z8,NIe,r=>{var{typed:e,add:t,divide:n,multiply:i,factorial:s,isInteger:a,isPositive:o}=r;return e(Z8,{"Array | Matrix":function(u){var c=0,h=1;return Dd(u,function(d){if(!a(d)||!o(d))throw new TypeError("Positive integer value expected in function multinomial");c=t(c,d),h=i(h,s(d))}),n(s(c),h)}})}),eU="permutations",MIe=["typed","factorial"],IIe=X(eU,MIe,r=>{var{typed:e,factorial:t}=r;return e(eU,{"number | BigNumber":t,"number, number":function(i,s){if(!tt(i)||i<0)throw new TypeError("Positive integer value expected in function permutations");if(!tt(s)||s<0)throw new TypeError("Positive integer value expected in function permutations");if(s>i)throw new TypeError("second argument k must be less than or equal to first argument n");return sc(i-s+1,i)},"BigNumber, BigNumber":function(i,s){var a,o;if(!tU(i)||!tU(s))throw new TypeError("Positive integer value expected in function permutations");if(s.gt(i))throw new TypeError("second argument k must be less than or equal to first argument n");var l=i.mul(0).add(1);for(a=l,o=i.minus(s).plus(1);o.lte(i);o=o.plus(1))a=a.times(o);return a}})});function tU(r){return r.isInteger()&&r.gte(0)}var ZF={exports:{}};ZF.exports;(function(r){(function(e,t,n){function i(l){var u=this,c=o();u.next=function(){var h=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=h-(u.c=h|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function s(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function a(l,u){var c=new i(l),h=u&&u.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,h&&(typeof h=="object"&&s(h,c),d.state=function(){return s(c,{})}),d}function o(){var l=4022871197,u=function(c){c=String(c);for(var h=0;h<c.length;h++){l+=c.charCodeAt(h);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return u}t&&t.exports?t.exports=a:this.alea=a})(up,r)})(ZF);var PIe=ZF.exports,eO={exports:{}};eO.exports;(function(r){(function(e,t,n){function i(o){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var h=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^h^h>>>8},o===(o|0)?l.x=o:u+=o;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function s(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function a(o,l){var u=new i(o),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&s(c,u),h.state=function(){return s(u,{})}),h}t&&t.exports?t.exports=a:this.xor128=a})(up,r)})(eO);var RIe=eO.exports,tO={exports:{}};tO.exports;(function(r){(function(e,t,n){function i(o){var l=this,u="";l.next=function(){var h=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(h^h<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:u+=o;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function a(o,l){var u=new i(o),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&s(c,u),h.state=function(){return s(u,{})}),h}t&&t.exports?t.exports=a:this.xorwow=a})(up,r)})(tO);var kIe=tO.exports,rO={exports:{}};rO.exports;(function(r){(function(e,t,n){function i(o){var l=this;l.next=function(){var c=l.x,h=l.i,d,f;return d=c[h],d^=d>>>7,f=d^d<<24,d=c[h+1&7],f^=d^d>>>10,d=c[h+3&7],f^=d^d>>>3,d=c[h+4&7],f^=d^d<<7,d=c[h+7&7],d=d^d<<13,f^=d^d<<9,c[h]=f,l.i=h+1&7,f};function u(c,h){var d,f=[];if(h===(h|0))f[0]=h;else for(h=""+h,d=0;d<h.length;++d)f[d&7]=f[d&7]<<15^h.charCodeAt(d)+f[d+1&7]<<13;for(;f.length<8;)f.push(0);for(d=0;d<8&&f[d]===0;++d);for(d==8?f[7]=-1:f[d],c.x=f,c.i=0,d=256;d>0;--d)c.next()}u(l,o)}function s(o,l){return l.x=o.x.slice(),l.i=o.i,l}function a(o,l){o==null&&(o=+new Date);var u=new i(o),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(c.x&&s(c,u),h.state=function(){return s(u,{})}),h}t&&t.exports?t.exports=a:this.xorshift7=a})(up,r)})(rO);var FIe=rO.exports,nO={exports:{}};nO.exports;(function(r){(function(e,t,n){function i(o){var l=this;l.next=function(){var c=l.w,h=l.X,d=l.i,f,p;return l.w=c=c+1640531527|0,p=h[d+34&127],f=h[d=d+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,p=h[d]=p^f,l.i=d,p+(c^c>>>16)|0};function u(c,h){var d,f,p,g,b,v=[],w=128;for(h===(h|0)?(f=h,h=null):(h=h+"\0",f=0,w=Math.max(w,h.length)),p=0,g=-32;g<w;++g)h&&(f^=h.charCodeAt((g+32)%h.length)),g===0&&(b=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,g>=0&&(b=b+1640531527|0,d=v[g&127]^=f+b,p=d==0?p+1:0);for(p>=128&&(v[(h&&h.length||0)&127]=-1),p=127,g=4*128;g>0;--g)f=v[p+34&127],d=v[p=p+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,v[p]=f^d;c.w=b,c.X=v,c.i=p}u(l,o)}function s(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function a(o,l){o==null&&(o=+new Date);var u=new i(o),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(c.X&&s(c,u),h.state=function(){return s(u,{})}),h}t&&t.exports?t.exports=a:this.xor4096=a})(up,r)})(nO);var OIe=nO.exports,iO={exports:{}};iO.exports;(function(r){(function(e,t,n){function i(o){var l=this,u="";l.next=function(){var h=l.b,d=l.c,f=l.d,p=l.a;return h=h<<25^h>>>7^d,d=d-f|0,f=f<<24^f>>>8^p,p=p-h|0,l.b=h=h<<20^h>>>12^d,l.c=d=d-f|0,l.d=f<<16^d>>>16^p,l.a=p-h|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):u+=o;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function s(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function a(o,l){var u=new i(o),c=l&&l.state,h=function(){return(u.next()>>>0)/4294967296};return h.double=function(){do var d=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(d+f)/(1<<21);while(p===0);return p},h.int32=u.next,h.quick=h,c&&(typeof c=="object"&&s(c,u),h.state=function(){return s(u,{})}),h}t&&t.exports?t.exports=a:this.tychei=a})(up,r)})(iO);var BIe=iO.exports,EY={exports:{}};const LIe={},$Ie=Object.freeze(Object.defineProperty({__proto__:null,default:LIe},Symbol.toStringTag,{value:"Module"})),VIe=LQ($Ie);(function(r){(function(e,t,n){var i=256,s=6,a=52,o="random",l=n.pow(i,s),u=n.pow(2,a),c=u*2,h=i-1,d;function f(A,x,_){var S=[];x=x==!0?{entropy:!0}:x||{};var E=v(b(x.entropy?[A,y(t)]:A??w(),3),S),C=new p(S),N=function(){for(var D=C.g(s),M=l,I=0;D<u;)D=(D+I)*i,M*=i,I=C.g(1);for(;D>=c;)D/=2,M/=2,I>>>=1;return(D+I)/M};return N.int32=function(){return C.g(4)|0},N.quick=function(){return C.g(4)/4294967296},N.double=N,v(y(C.S),t),(x.pass||_||function(D,M,I,V){return V&&(V.S&&g(V,C),D.state=function(){return g(C,{})}),I?(n[o]=D,M):D})(N,E,"global"in x?x.global:this==n,x.state)}function p(A){var x,_=A.length,S=this,E=0,C=S.i=S.j=0,N=S.S=[];for(_||(A=[_++]);E<i;)N[E]=E++;for(E=0;E<i;E++)N[E]=N[C=h&C+A[E%_]+(x=N[E])],N[C]=x;(S.g=function(D){for(var M,I=0,V=S.i,K=S.j,F=S.S;D--;)M=F[V=h&V+1],I=I*i+F[h&(F[V]=F[K=h&K+M])+(F[K]=M)];return S.i=V,S.j=K,I})(i)}function g(A,x){return x.i=A.i,x.j=A.j,x.S=A.S.slice(),x}function b(A,x){var _=[],S=typeof A,E;if(x&&S=="object")for(E in A)try{_.push(b(A[E],x-1))}catch{}return _.length?_:S=="string"?A:A+"\0"}function v(A,x){for(var _=A+"",S,E=0;E<_.length;)x[h&E]=h&(S^=x[h&E]*19)+_.charCodeAt(E++);return y(x)}function w(){try{var A;return d&&(A=d.randomBytes)?A=A(i):(A=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(A)),y(A)}catch{var x=e.navigator,_=x&&x.plugins;return[+new Date,e,_,e.screen,y(t)]}}function y(A){return String.fromCharCode.apply(0,A)}if(v(n.random(),t),r.exports){r.exports=f;try{d=VIe}catch{}}else n["seed"+o]=f})(typeof self<"u"?self:up,[],Math)})(EY);var UIe=EY.exports,zIe=PIe,jIe=RIe,qIe=kIe,HIe=FIe,GIe=OIe,WIe=BIe,xp=UIe;xp.alea=zIe;xp.xor128=jIe;xp.xorwow=qIe;xp.xorshift7=HIe;xp.xor4096=GIe;xp.tychei=WIe;var KIe=xp;const SY=tC(KIe);var XIe=SY(Date.now());function k0(r){var e;function t(i){e=i===null?XIe:SY(String(i))}t(r);function n(){return e()}return n}var rU="pickRandom",YIe=["typed","config","?on"],QIe=X(rU,YIe,r=>{var{typed:e,config:t,on:n}=r,i=k0(t.randomSeed);return n&&n("config",function(a,o){a.randomSeed!==o.randomSeed&&(i=k0(a.randomSeed))}),e(rU,{"Array | Matrix":function(o){return s(o,{})},"Array | Matrix, Object":function(o,l){return s(o,l)},"Array | Matrix, number":function(o,l){return s(o,{number:l})},"Array | Matrix, Array | Matrix":function(o,l){return s(o,{weights:l})},"Array | Matrix, Array | Matrix, number":function(o,l,u){return s(o,{number:u,weights:l})},"Array | Matrix, number, Array | Matrix":function(o,l,u){return s(o,{number:l,weights:u})}});function s(a,o){var{number:l,weights:u,elementWise:c=!0}=o,h=typeof l>"u";h&&(l=1);var d=ot(a)?a.create:ot(u)?u.create:null;a=a.valueOf(),u&&(u=u.valueOf()),c===!0&&(a=Yt(a),u=Yt(u));var f=0;if(typeof u<"u"){if(u.length!==a.length)throw new Error("Weights must have the same length as possibles");for(var p=0,g=u.length;p<g;p++){if(!it(u[p])||u[p]<0)throw new Error("Weights must be an array of positive numbers");f+=u[p]}}for(var b=a.length,v=[],w;v.length<l;){if(typeof u>"u")w=a[Math.floor(i()*b)];else for(var y=i()*f,A=0,x=a.length;A<x;A++)if(y-=u[A],y<0){w=a[A];break}v.push(w)}return h?v[0]:d?d(v):v}});function sO(r,e){var t=[];if(r=r.slice(0),r.length>1)for(var n=0,i=r.shift();n<i;n++)t.push(sO(r,e));else for(var s=0,a=r.shift();s<a;s++)t.push(e());return t}var nU="random",JIe=["typed","config","?on"],ZIe=X(nU,JIe,r=>{var{typed:e,config:t,on:n}=r,i=k0(t.randomSeed);return n&&n("config",function(o,l){o.randomSeed!==l.randomSeed&&(i=k0(o.randomSeed))}),e(nU,{"":()=>a(0,1),number:o=>a(0,o),"number, number":(o,l)=>a(o,l),"Array | Matrix":o=>s(o,0,1),"Array | Matrix, number":(o,l)=>s(o,0,l),"Array | Matrix, number, number":(o,l,u)=>s(o,l,u)});function s(o,l,u){var c=sO(o.valueOf(),()=>a(l,u));return ot(o)?o.create(c,"number"):c}function a(o,l){return o+i()*(l-o)}}),iU="randomInt",ePe=["typed","config","log2","?on"],tPe=X(iU,ePe,r=>{var{typed:e,config:t,log2:n,on:i}=r,s=k0(t.randomSeed);return i&&i("config",function(u,c){u.randomSeed!==c.randomSeed&&(s=k0(u.randomSeed))}),e(iU,{"":()=>o(0,2),number:u=>o(0,u),"number, number":(u,c)=>o(u,c),bigint:u=>l(0n,u),"bigint, bigint":l,"Array | Matrix":u=>a(u,0,1),"Array | Matrix, number":(u,c)=>a(u,0,c),"Array | Matrix, number, number":(u,c,h)=>a(u,c,h)});function a(u,c,h){var d=sO(u.valueOf(),()=>o(c,h));return ot(u)?u.create(d,"number"):d}function o(u,c){return Math.floor(u+s()*(c-u))}function l(u,c){var h=2n**30n,d=c-u;if(d<=h)return u+BigInt(o(0,Number(d)));for(var f=n(d),p=d;p>=d;){p=0n;for(var g=0;g<f;++g)p=2n*p+(s()<.5?0n:1n)}return u+p}}),sU="stirlingS2",rPe=["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],nPe=X(sU,rPe,r=>{var{typed:e,addScalar:t,subtractScalar:n,multiplyScalar:i,divideScalar:s,pow:a,factorial:o,combinations:l,isNegative:u,isInteger:c,number:h,bignumber:d,larger:f}=r,p=[],g=[];return e(sU,{"number | BigNumber, number | BigNumber":function(v,w){if(!c(v)||u(v)||!c(w)||u(w))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(f(w,v))throw new TypeError("k must be less than or equal to n in function stirlingS2");var y=!(it(v)&&it(w)),A=y?g:p,x=y?d:h,_=h(v),S=h(w);if(A[_]&&A[_].length>S)return A[_][S];for(var E=0;E<=_;++E)if(A[E]||(A[E]=[x(E===0?1:0)]),E!==0)for(var C=A[E],N=A[E-1],D=C.length;D<=E&&D<=S;++D)D===E?C[D]=1:C[D]=t(i(x(D),N[D]),N[D-1]);return A[_][S]}})}),aU="bellNumbers",iPe=["typed","addScalar","isNegative","isInteger","stirlingS2"],sPe=X(aU,iPe,r=>{var{typed:e,addScalar:t,isNegative:n,isInteger:i,stirlingS2:s}=r;return e(aU,{"number | BigNumber":function(o){if(!i(o)||n(o))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var l=0,u=0;u<=o;u++)l=t(l,s(o,u));return l}})}),oU="catalan",aPe=["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],oPe=X(oU,aPe,r=>{var{typed:e,addScalar:t,divideScalar:n,multiplyScalar:i,combinations:s,isNegative:a,isInteger:o}=r;return e(oU,{"number | BigNumber":function(u){if(!o(u)||a(u))throw new TypeError("Non-negative integer value expected in function catalan");return n(s(i(u,2),u),t(u,1))}})}),lU="composition",lPe=["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],uPe=X(lU,lPe,r=>{var{typed:e,addScalar:t,combinations:n,isPositive:i,isNegative:s,isInteger:a,larger:o}=r;return e(lU,{"number | BigNumber, number | BigNumber":function(u,c){if(!a(u)||!i(u)||!a(c)||!i(c))throw new TypeError("Positive integer value expected in function composition");if(o(c,u))throw new TypeError("k must be less than or equal to n in function composition");return n(t(u,-1),t(c,-1))}})}),uU="leafCount",cPe=["parse","typed"],hPe=X(uU,cPe,r=>{var{parse:e,typed:t}=r;function n(i){var s=0;return i.forEach(a=>{s+=n(a)}),s||1}return t(uU,{Node:function(s){return n(s)}})});function cU(r){return Vt(r)||xn(r)&&r.isUnary()&&Vt(r.args[0])}function RT(r){return!!(Vt(r)||(Td(r)||xn(r))&&r.args.every(RT)||Tc(r)&&RT(r.content))}function hU(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function nD(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hU(Object(t),!0).forEach(function(n){Fn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):hU(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var dPe="simplifyUtil",fPe=["FunctionNode","OperatorNode","SymbolNode"],aO=X(dPe,fPe,r=>{var{FunctionNode:e,OperatorNode:t,SymbolNode:n}=r,i=!0,s=!1,a="defaultF",o={add:{trivial:i,total:i,commutative:i,associative:i},unaryPlus:{trivial:i,total:i,commutative:i,associative:i},subtract:{trivial:s,total:i,commutative:s,associative:s},multiply:{trivial:i,total:i,commutative:i,associative:i},divide:{trivial:s,total:i,commutative:s,associative:s},paren:{trivial:i,total:i,commutative:i,associative:s},defaultF:{trivial:s,total:i,commutative:s,associative:s}},l={divide:{total:s},log:{total:s}},u={subtract:{total:s},abs:{trivial:i},log:{total:i}};function c(y,A){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o,_=a;if(typeof y=="string"?_=y:xn(y)?_=y.fn.toString():Td(y)?_=y.name:Tc(y)&&(_="paren"),Je(x,_)){var S=x[_];if(Je(S,A))return S[A];if(Je(o,_))return o[_][A]}if(Je(x,a)){var E=x[a];return Je(E,A)?E[A]:o[a][A]}if(Je(o,_)){var C=o[_];if(Je(C,A))return C[A]}return o[a][A]}function h(y){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(y,"commutative",A)}function d(y){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;return c(y,"associative",A)}function f(y,A){var x=nD({},y);for(var _ in A)Je(y,_)?x[_]=nD(nD({},A[_]),y[_]):x[_]=A[_];return x}function p(y,A){if(!y.args||y.args.length===0)return y;y.args=g(y,A);for(var x=0;x<y.args.length;x++)p(y.args[x],A)}function g(y,A){var x,_=[],S=function(C){for(var N=0;N<C.args.length;N++){var D=C.args[N];xn(D)&&x===D.op?S(D):_.push(D)}};return d(y,A)?(x=y.op,S(y),_):y.args}function b(y,A){if(!(!y.args||y.args.length===0)){for(var x=w(y),_=y.args.length,S=0;S<_;S++)b(y.args[S],A);if(_>2&&d(y,A)){for(var E=y.args.pop();y.args.length>0;)E=x([y.args.pop(),E]);y.args=E.args}}}function v(y,A){if(!(!y.args||y.args.length===0)){for(var x=w(y),_=y.args.length,S=0;S<_;S++)v(y.args[S],A);if(_>2&&d(y,A)){for(var E=y.args.shift();y.args.length>0;)E=x([E,y.args.shift()]);y.args=E.args}}}function w(y){return xn(y)?function(A){try{return new t(y.op,y.fn,A,y.implicit)}catch(x){return console.error(x),[]}}:function(A){return new e(new n(y.name),A)}}return{createMakeNodeFunction:w,hasProperty:c,isCommutative:h,isAssociative:d,mergeContext:f,flatten:p,allChildren:g,unflattenr:b,unflattenl:v,defaultContext:o,realContext:l,positiveContext:u}}),mPe="simplify",pPe=["typed","parse","equal","resolve","simplifyConstant","simplifyCore","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode","replacer"],gPe=X(mPe,pPe,r=>{var{typed:e,parse:t,equal:n,resolve:i,simplifyConstant:s,simplifyCore:a,AccessorNode:o,ArrayNode:l,ConstantNode:u,FunctionNode:c,IndexNode:h,ObjectNode:d,OperatorNode:f,ParenthesisNode:p,SymbolNode:g,replacer:b}=r,{hasProperty:v,isCommutative:w,isAssociative:y,mergeContext:A,flatten:x,unflattenr:_,unflattenl:S,createMakeNodeFunction:E,defaultContext:C,realContext:N,positiveContext:D}=aO({FunctionNode:c,OperatorNode:f,SymbolNode:g});e.addConversion({from:"Object",to:"Map",convert:Vg});var M=e("simplify",{Node:G,"Node, Map":(re,W)=>G(re,!1,W),"Node, Map, Object":(re,W,ie)=>G(re,!1,W,ie),"Node, Array":G,"Node, Array, Map":G,"Node, Array, Map, Object":G});e.removeConversion({from:"Object",to:"Map",convert:Vg}),M.defaultContext=C,M.realContext=N,M.positiveContext=D;function I(re){return re.transform(function(W){return Tc(W)?I(W.content):W})}var V={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};M.rules=[a,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},s,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},s,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];function K(re,W){var ie={};if(re.s){var me=re.s.split("->");if(me.length===2)ie.l=me[0],ie.r=me[1];else throw SyntaxError("Could not parse rule: "+re.s)}else ie.l=re.l,ie.r=re.r;ie.l=I(t(ie.l)),ie.r=I(t(ie.r));for(var le of["imposeContext","repeat","assuming"])le in re&&(ie[le]=re[le]);if(re.evaluate&&(ie.evaluate=t(re.evaluate)),y(ie.l,W)){var ve=!w(ie.l,W),ye;ve&&(ye=j());var Ie=E(ie.l),Ue=j();ie.expanded={},ie.expanded.l=Ie([ie.l,Ue]),x(ie.expanded.l,W),_(ie.expanded.l,W),ie.expanded.r=Ie([ie.r,Ue]),ve&&(ie.expandedNC1={},ie.expandedNC1.l=Ie([ye,ie.l]),ie.expandedNC1.r=Ie([ye,ie.r]),ie.expandedNC2={},ie.expandedNC2.l=Ie([ye,ie.expanded.l]),ie.expandedNC2.r=Ie([ye,ie.expanded.r]))}return ie}function F(re,W){for(var ie=[],me=0;me<re.length;me++){var le=re[me],ve=void 0,ye=typeof le;switch(ye){case"string":le={s:le};case"object":ve=K(le,W);break;case"function":ve=le;break;default:throw TypeError("Unsupported type of rule: "+ye)}ie.push(ve)}return ie}var U=0;function j(){return new g("_p"+U++)}function G(re,W){var ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:F1(),me=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},le=me.consoleDebug;W=F(W||M.rules,me.context);var ve=i(re,ie);ve=I(ve);for(var ye={},Ie=ve.toString({parenthesis:"all"});!ye[Ie];){ye[Ie]=!0,U=0;var Ue=Ie;le&&console.log("Working on: ",Ie);for(var Ge=0;Ge<W.length;Ge++){var Be="";if(typeof W[Ge]=="function"?(ve=W[Ge](ve,me),le&&(Be=W[Ge].name)):(x(ve,me.context),ve=ue(ve,W[Ge],me.context),le&&(Be="".concat(W[Ge].l.toString()," -> ").concat(W[Ge].r.toString()))),le){var $e=ve.toString({parenthesis:"all"});$e!==Ue&&(console.log("Applying",Be,"produced",$e),Ue=$e)}S(ve,me.context)}Ie=ve.toString({parenthesis:"all"})}return ve}function ee(re,W,ie){var me=re;if(re)for(var le=0;le<re.length;++le){var ve=ue(re[le],W,ie);ve!==re[le]&&(me===re&&(me=re.slice()),me[le]=ve)}return me}function ue(re,W,ie){if(W.assuming){for(var me in W.assuming)for(var le in W.assuming[me])if(v(me,le,ie)!==W.assuming[me][le])return re}var ve=A(W.imposeContext,ie),ye=re;if(ye instanceof f||ye instanceof c){var Ie=ee(ye.args,W,ie);Ie!==ye.args&&(ye=ye.clone(),ye.args=Ie)}else if(ye instanceof p){if(ye.content){var Ue=ue(ye.content,W,ie);Ue!==ye.content&&(ye=new p(Ue))}}else if(ye instanceof l){var Ge=ee(ye.items,W,ie);Ge!==ye.items&&(ye=new l(Ge))}else if(ye instanceof o){var Be=ye.object;ye.object&&(Be=ue(ye.object,W,ie));var $e=ye.index;ye.index&&($e=ue(ye.index,W,ie)),(Be!==ye.object||$e!==ye.index)&&(ye=new o(Be,$e))}else if(ye instanceof h){var He=ee(ye.dimensions,W,ie);He!==ye.dimensions&&(ye=new h(He))}else if(ye instanceof d){var Z=!1,ce={};for(var q in ye.properties)ce[q]=ue(ye.properties[q],W,ie),ce[q]!==ye.properties[q]&&(Z=!0);Z&&(ye=new d(ce))}var Q=W.r,ae=he(W.l,ye,ve)[0];if(!ae&&W.expanded&&(Q=W.expanded.r,ae=he(W.expanded.l,ye,ve)[0]),!ae&&W.expandedNC1&&(Q=W.expandedNC1.r,ae=he(W.expandedNC1.l,ye,ve)[0],ae||(Q=W.expandedNC2.r,ae=he(W.expandedNC2.l,ye,ve)[0])),ae){var de=ye.implicit;ye=Q.clone(),de&&"implicit"in Q&&(ye.implicit=!0),ye=ye.transform(function(ge){return ge.isSymbolNode&&Je(ae.placeholders,ge.name)?ae.placeholders[ge.name].clone():ge})}return W.repeat&&ye!==re&&(ye=ue(ye,W,ie)),ye}function te(re,W){var ie=[],me,le,ve=E(re);if(w(re,W))for(var ye=0;ye<re.args.length;ye++)le=re.args.slice(0),le.splice(ye,1),me=le.length===1?le[0]:ve(le),ie.push(ve([re.args[ye],me]));else for(var Ie=1;Ie<re.args.length;Ie++){var Ue=re.args[0];Ie>1&&(Ue=ve(re.args.slice(0,Ie))),le=re.args.slice(Ie),me=le.length===1?le[0]:ve(le),ie.push(ve([Ue,me]))}return ie}function R(re,W){var ie={placeholders:{}};if(!re.placeholders&&!W.placeholders)return ie;if(re.placeholders){if(!W.placeholders)return re}else return W;for(var me in re.placeholders)if(Je(re.placeholders,me)&&(ie.placeholders[me]=re.placeholders[me],Je(W.placeholders,me)&&!fe(re.placeholders[me],W.placeholders[me])))return null;for(var le in W.placeholders)Je(W.placeholders,le)&&(ie.placeholders[le]=W.placeholders[le]);return ie}function Y(re,W){var ie=[];if(re.length===0||W.length===0)return ie;for(var me,le=0;le<re.length;le++)for(var ve=0;ve<W.length;ve++)me=R(re[le],W[ve]),me&&ie.push(me);return ie}function H(re){if(re.length===0)return re;for(var W=re.reduce(Y),ie=[],me={},le=0;le<W.length;le++){var ve=JSON.stringify(W[le],b);me[ve]||(me[ve]=!0,ie.push(W[le]))}return ie}function he(re,W,ie,me){var le=[{placeholders:{}}];if(re instanceof f&&W instanceof f||re instanceof c&&W instanceof c){if(re instanceof f){if(re.op!==W.op||re.fn!==W.fn)return[]}else if(re instanceof c&&re.name!==W.name)return[];if(W.args.length===1&&re.args.length===1||!y(W,ie)&&W.args.length===re.args.length||me){for(var ve=[],ye=0;ye<re.args.length;ye++){var Ie=he(re.args[ye],W.args[ye],ie);if(Ie.length===0)break;ve.push(Ie)}if(ve.length!==re.args.length){if(!w(W,ie)||re.args.length===1)return[];if(re.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var Ue=he(re.args[0],W.args[1],ie);if(Ue.length===0)return[];var Ge=he(re.args[1],W.args[0],ie);if(Ge.length===0)return[];ve=[Ue,Ge]}le=H(ve)}else if(W.args.length>=2&&re.args.length===2){for(var Be=te(W,ie),$e=[],He=0;He<Be.length;He++){var Z=he(re,Be[He],ie,!0);$e=$e.concat(Z)}return $e}else{if(re.args.length>2)throw Error("Unexpected non-binary associative function: "+re.toString());return[]}}else if(re instanceof g){if(re.name.length===0)throw new Error("Symbol in rule has 0 length...!?");if(V[re.name]){if(re.name!==W.name)return[]}else switch(re.name[1]>="a"&&re.name[1]<="z"?re.name.substring(0,2):re.name[0]){case"n":case"_p":le[0].placeholders[re.name]=W;break;case"c":case"cl":if(Vt(W))le[0].placeholders[re.name]=W;else return[];break;case"v":if(!Vt(W))le[0].placeholders[re.name]=W;else return[];break;case"vl":if(mi(W))le[0].placeholders[re.name]=W;else return[];break;case"cd":if(cU(W))le[0].placeholders[re.name]=W;else return[];break;case"vd":if(!cU(W))le[0].placeholders[re.name]=W;else return[];break;case"ce":if(RT(W))le[0].placeholders[re.name]=W;else return[];break;case"ve":if(!RT(W))le[0].placeholders[re.name]=W;else return[];break;default:throw new Error("Invalid symbol in rule: "+re.name)}}else if(re instanceof u){if(!n(re.value,W.value))return[]}else return[];return le}function fe(re,W){if(re instanceof u&&W instanceof u){if(!n(re.value,W.value))return!1}else if(re instanceof g&&W instanceof g){if(re.name!==W.name)return!1}else if(re instanceof f&&W instanceof f||re instanceof c&&W instanceof c){if(re instanceof f){if(re.op!==W.op||re.fn!==W.fn)return!1}else if(re instanceof c&&re.name!==W.name)return!1;if(re.args.length!==W.args.length)return!1;for(var ie=0;ie<re.args.length;ie++)if(!fe(re.args[ie],W.args[ie]))return!1}else return!1;return!0}return M}),vPe="simplifyConstant",yPe=["typed","config","mathWithTransform","matrix","isBounded","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],bPe=X(vPe,yPe,r=>{var{typed:e,config:t,mathWithTransform:n,matrix:i,isBounded:s,fraction:a,bignumber:o,AccessorNode:l,ArrayNode:u,ConstantNode:c,FunctionNode:h,IndexNode:d,ObjectNode:f,OperatorNode:p,SymbolNode:g}=r,{isCommutative:b,isAssociative:v,allChildren:w,createMakeNodeFunction:y}=aO({FunctionNode:h,OperatorNode:p,SymbolNode:g}),A=e("simplifyConstant",{Node:F=>E(K(F,{})),"Node, Object":function(U,j){return E(K(U,j))}});function x(F){return c_(F)?F.valueOf():F instanceof Array?F.map(x):ot(F)?i(x(F.valueOf())):F}function _(F,U,j){try{return n[F].apply(null,U)}catch{return U=U.map(x),N(n[F].apply(null,U),j)}}var S=e({Fraction:M,number:function(U){return U<0?D(new c(-U)):new c(U)},BigNumber:function(U){return U<0?D(new c(-U)):new c(U)},bigint:function(U){return U<0n?D(new c(-U)):new c(U)},Complex:function(U){throw new Error("Cannot convert Complex number to Node")},string:function(U){return new c(U)},Matrix:function(U){return new u(U.valueOf().map(j=>S(j)))}});function E(F){return sr(F)?F:S(F)}function C(F,U){var j=U&&U.exactFractions!==!1;if(j&&s(F)&&a){var G=a(F),ee=U&&typeof U.fractionsLimit=="number"?U.fractionsLimit:1/0;if(G.valueOf()===F&&G.n<ee&&G.d<ee)return G}return F}var N=e({"string, Object":function(U,j){var G=Vd(U,t);if(G==="BigNumber")return o===void 0&&XF(),o(U);if(G==="bigint")return BigInt(U);if(G==="Fraction")return a===void 0&&iY(),a(U);var ee=parseFloat(U);return C(ee,j)},"Fraction, Object":function(U,j){return U},"BigNumber, Object":function(U,j){return U},"number, Object":function(U,j){return C(U,j)},"bigint, Object":function(U,j){return U},"Complex, Object":function(U,j){return U.im!==0?U:C(U.re,j)},"Matrix, Object":function(U,j){return i(C(U.valueOf()))},"Array, Object":function(U,j){return U.map(C)}});function D(F){return new p("-","unaryMinus",[F])}function M(F){var U=ee=>t.number==="BigNumber"&&o?o(ee):Number(ee),j=F.s*F.n,G=j<0n?new p("-","unaryMinus",[new c(-U(j))]):new c(U(j));return F.d===1n?G:new p("/","divide",[G,new c(U(F.d))])}function I(F,U,j){if(!ey(U))return new l(E(F),E(U));if(ro(F)||ot(F)){for(var G=Array.from(U.dimensions);G.length>0;)if(Vt(G[0])&&typeof G[0].value!="string"){var ee=N(G.shift().value,j);ro(F)?F=F.items[ee-1]:(F=F.valueOf()[ee-1],F instanceof Array&&(F=i(F)))}else if(G.length>1&&Vt(G[1])&&typeof G[1].value!="string"){var ue=N(G[1].value,j),te=[],R=ro(F)?F.items:F.valueOf();for(var Y of R)if(ro(Y))te.push(Y.items[ue-1]);else if(ot(F))te.push(Y[ue-1]);else break;if(te.length===R.length)ro(F)?F=new u(te):F=i(te),G.splice(1,1);else break}else break;return G.length===U.dimensions.length?new l(E(F),U):G.length>0?(U=new d(G),new l(E(F),U)):F}if(tN(F)&&U.dimensions.length===1&&Vt(U.dimensions[0])){var H=U.dimensions[0].value;return H in F.properties?F.properties[H]:new c}return new l(E(F),U)}function V(F,U,j,G){var ee=U.shift(),ue=U.reduce((te,R)=>{if(!sr(R)){var Y=te.pop();if(sr(Y))return[Y,R];try{return te.push(_(F,[Y,R],G)),te}catch{te.push(Y)}}te.push(E(te.pop()));var H=te.length===1?te[0]:j(te);return[j([H,E(R)])]},[ee]);return ue.length===1?ue[0]:j([ue[0],S(ue[1])])}function K(F,U){switch(F.type){case"SymbolNode":return F;case"ConstantNode":switch(typeof F.value){case"number":return N(F.value,U);case"bigint":return N(F.value,U);case"string":return F.value;default:if(!isNaN(F.value))return N(F.value,U)}return F;case"FunctionNode":if(n[F.name]&&n[F.name].rawArgs)return F;{var j=["add","multiply"];if(!j.includes(F.name)){var G=F.args.map(le=>K(le,U));if(!G.some(sr))try{return _(F.name,G,U)}catch{}if(F.name==="size"&&G.length===1&&ro(G[0])){for(var ee=[],ue=G[0];ro(ue);)ee.push(ue.items.length),ue=ue.items[0];return i(ee)}return new h(F.name,G.map(E))}}case"OperatorNode":{var te=F.fn.toString(),R,Y,H=y(F);if(xn(F)&&F.isUnary())R=[K(F.args[0],U)],sr(R[0])?Y=H(R):Y=_(te,R,U);else if(v(F,U.context))if(R=w(F,U.context),R=R.map(le=>K(le,U)),b(te,U.context)){for(var he=[],fe=[],re=0;re<R.length;re++)sr(R[re])?fe.push(R[re]):he.push(R[re]);he.length>1?(Y=V(te,he,H,U),fe.unshift(Y),Y=V(te,fe,H,U)):Y=V(te,R,H,U)}else Y=V(te,R,H,U);else R=F.args.map(le=>K(le,U)),Y=V(te,R,H,U);return Y}case"ParenthesisNode":return K(F.content,U);case"AccessorNode":return I(K(F.object,U),K(F.index,U),U);case"ArrayNode":{var W=F.items.map(le=>K(le,U));return W.some(sr)?new u(W.map(E)):i(W)}case"IndexNode":return new d(F.dimensions.map(le=>A(le,U)));case"ObjectNode":{var ie={};for(var me in F.properties)ie[me]=A(F.properties[me],U);return new f(ie)}case"AssignmentNode":case"BlockNode":case"FunctionAssignmentNode":case"RangeNode":case"ConditionalNode":default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(F.type))}}return A}),dU="simplifyCore",wPe=["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],xPe=X(dU,wPe,r=>{var{typed:e,parse:t,equal:n,isZero:i,add:s,subtract:a,multiply:o,divide:l,pow:u,AccessorNode:c,ArrayNode:h,ConstantNode:d,FunctionNode:f,IndexNode:p,ObjectNode:g,OperatorNode:b,ParenthesisNode:v,SymbolNode:w}=r,y=new d(0),A=new d(1),x=new d(!0),_=new d(!1);function S(D){return xn(D)&&["and","not","or"].includes(D.op)}var{hasProperty:E,isCommutative:C}=aO({FunctionNode:f,OperatorNode:b,SymbolNode:w});function N(D){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},I=M?M.context:void 0;if(E(D,"trivial",I)){if(Td(D)&&D.args.length===1)return N(D.args[0],M);var V=!1,K=0;if(D.forEach(he=>{++K,K===1&&(V=N(he,M))}),K===1)return V}var F=D;if(Td(F)){var U=hSe(F.name);if(U){if(F.args.length>2&&E(F,"associative",I))for(;F.args.length>2;){var j=F.args.pop(),G=F.args.pop();F.args.push(new b(U,F.name,[j,G]))}F=new b(U,F.name,F.args)}else return new f(N(F.fn),F.args.map(he=>N(he,M)))}if(xn(F)&&F.isUnary()){var ee=N(F.args[0],M);if(F.op==="~"&&xn(ee)&&ee.isUnary()&&ee.op==="~"||F.op==="not"&&xn(ee)&&ee.isUnary()&&ee.op==="not"&&S(ee.args[0]))return ee.args[0];var ue=!0;if(F.op==="-"&&xn(ee)&&(ee.isBinary()&&ee.fn==="subtract"&&(F=new b("-","subtract",[ee.args[1],ee.args[0]]),ue=!1),ee.isUnary()&&ee.op==="-"))return ee.args[0];if(ue)return new b(F.op,F.fn,[ee])}if(xn(F)&&F.isBinary()){var te=N(F.args[0],M),R=N(F.args[1],M);if(F.op==="+"){if(Vt(te)&&i(te.value))return R;if(Vt(R)&&i(R.value))return te;xn(R)&&R.isUnary()&&R.op==="-"&&(R=R.args[0],F=new b("-","subtract",[te,R]))}if(F.op==="-")return xn(R)&&R.isUnary()&&R.op==="-"?N(new b("+","add",[te,R.args[0]]),M):Vt(te)&&i(te.value)?N(new b("-","unaryMinus",[R])):Vt(R)&&i(R.value)?te:new b(F.op,F.fn,[te,R]);if(F.op==="*"){if(Vt(te)){if(i(te.value))return y;if(n(te.value,1))return R}if(Vt(R)){if(i(R.value))return y;if(n(R.value,1))return te;if(C(F,I))return new b(F.op,F.fn,[R,te],F.implicit)}return new b(F.op,F.fn,[te,R],F.implicit)}if(F.op==="/")return Vt(te)&&i(te.value)?y:Vt(R)&&n(R.value,1)?te:new b(F.op,F.fn,[te,R]);if(F.op==="^"&&Vt(R)){if(i(R.value))return A;if(n(R.value,1))return te}if(F.op==="and"){if(Vt(te))if(te.value){if(S(R))return R;if(Vt(R))return R.value?x:_}else return _;if(Vt(R))if(R.value){if(S(te))return te}else return _}if(F.op==="or"){if(Vt(te)){if(te.value)return x;if(S(R))return R}if(Vt(R)){if(R.value)return x;if(S(te))return te}}return new b(F.op,F.fn,[te,R])}if(xn(F))return new b(F.op,F.fn,F.args.map(he=>N(he,M)));if(ro(F))return new h(F.items.map(he=>N(he,M)));if(Sc(F))return new c(N(F.object,M),N(F.index,M));if(ey(F))return new p(F.dimensions.map(he=>N(he,M)));if(tN(F)){var Y={};for(var H in F.properties)Y[H]=N(F.properties[H],M);return new g(Y)}return F}return e(dU,{Node:N,"Node,Object":N})}),_Pe="resolve",APe=["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],EPe=X(_Pe,APe,r=>{var{typed:e,parse:t,ConstantNode:n,FunctionNode:i,OperatorNode:s,ParenthesisNode:a}=r;function o(l,u){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set;if(!u)return l;if(mi(l)){if(c.has(l.name)){var h=Array.from(c).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(h,"}"))}var d=u.get(l.name);if(sr(d)){var f=new Set(c);return f.add(l.name),o(d,u,f)}else return typeof d=="number"?t(String(d)):d!==void 0?new n(d):l}else if(xn(l)){var p=l.args.map(function(b){return o(b,u,c)});return new s(l.op,l.fn,p,l.implicit)}else{if(Tc(l))return new a(o(l.content,u,c));if(Td(l)){var g=l.args.map(function(b){return o(b,u,c)});return new i(l.name,g)}}return l.map(b=>o(b,u,c))}return e("resolve",{Node:o,"Node, Map | null | undefined":o,"Node, Object":(l,u)=>o(l,Vg(u)),"Array | Matrix":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array | Matrix, null | undefined":e.referToSelf(l=>u=>u.map(c=>l(c))),"Array, Object":e.referTo("Array,Map",l=>(u,c)=>l(u,Vg(c))),"Matrix, Object":e.referTo("Matrix,Map",l=>(u,c)=>l(u,Vg(c))),"Array | Matrix, Map":e.referToSelf(l=>(u,c)=>u.map(h=>l(h,c)))})}),fU="symbolicEqual",SPe=["parse","simplify","typed","OperatorNode"],TPe=X(fU,SPe,r=>{var{parse:e,simplify:t,typed:n,OperatorNode:i}=r;function s(a,o){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=new i("-","subtract",[a,o]),c=t(u,{},l);return Vt(c)&&!c.value}return n(fU,{"Node, Node":s,"Node, Node, Object":s})}),mU="derivative",CPe=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],NPe=X(mU,CPe,r=>{var{typed:e,config:t,parse:n,simplify:i,equal:s,isZero:a,numeric:o,ConstantNode:l,FunctionNode:u,OperatorNode:c,ParenthesisNode:h,SymbolNode:d}=r;function f(A,x){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{simplify:!0},S=new Map,E=x.name;function C(D){var M=S.get(D);if(M!==void 0)return M;var I=v(C,D,E);return S.set(D,I),I}var N=w(A,C);return _.simplify?i(N):N}function p(A){var x=n(A);if(!x.isSymbolNode)throw new TypeError("Invalid variable. "+"Cannot parse ".concat(JSON.stringify(A)," into a variable in function derivative"));return x}var g=e(mU,{"Node, SymbolNode":f,"Node, SymbolNode, Object":f,"Node, string":(A,x)=>f(A,p(x)),"Node, string, Object":(A,x,_)=>f(A,p(x),_)});g._simplify=!0,g.toTex=function(A){return b.apply(null,A.args)};var b=e("_derivTex",{"Node, SymbolNode":function(x,_){return Vt(x)&&dr(x.value)==="string"?b(n(x.value).toString(),_.toString(),1):b(x.toTex(),_.toString(),1)},"Node, ConstantNode":function(x,_){if(dr(_.value)==="string")return b(x,n(_.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(x,_,S){return b(x.toString(),_.name,S.value)},"string, string, number":function(x,_,S){var E;return S===1?E="{d\\over d"+_+"}":E="{d^{"+S+"}\\over d"+_+"^{"+S+"}}",E+"\\left[".concat(x,"\\right]")}}),v=e("_isConst",{"function, ConstantNode, string":function(){return!0},"function, SymbolNode, string":function(x,_,S){return _.name!==S},"function, ParenthesisNode, string":function(x,_,S){return x(_.content,S)},"function, FunctionAssignmentNode, string":function(x,_,S){return _.params.includes(S)?x(_.expr,S):!0},"function, FunctionNode | OperatorNode, string":function(x,_,S){return _.args.every(E=>x(E,S))}}),w=e("_derivative",{"ConstantNode, function":function(){return y(0)},"SymbolNode, function":function(x,_){return _(x)?y(0):y(1)},"ParenthesisNode, function":function(x,_){return new h(w(x.content,_))},"FunctionAssignmentNode, function":function(x,_){return _(x)?y(0):w(x.expr,_)},"FunctionNode, function":function(x,_){if(_(x))return y(0);var S=x.args[0],E,C=!1,N=!1,D;switch(x.name){case"cbrt":C=!0,D=new c("*","multiply",[y(3),new c("^","pow",[S,new c("/","divide",[y(2),y(3)])])]);break;case"sqrt":case"nthRoot":if(x.args.length===1)C=!0,D=new c("*","multiply",[y(2),new u("sqrt",[S])]);else if(x.args.length===2)return E=new c("/","divide",[y(1),x.args[1]]),w(new c("^","pow",[S,E]),_);break;case"log10":E=y(10);case"log":if(!E&&x.args.length===1)D=S.clone(),C=!0;else if(x.args.length===1&&E||x.args.length===2&&_(x.args[1]))D=new c("*","multiply",[S.clone(),new u("log",[E||x.args[1]])]),C=!0;else if(x.args.length===2)return w(new c("/","divide",[new u("log",[S]),new u("log",[x.args[1]])]),_);break;case"pow":if(x.args.length===2)return w(new c("^","pow",[S,x.args[1]]),_);break;case"exp":D=new u("exp",[S.clone()]);break;case"sin":D=new u("cos",[S.clone()]);break;case"cos":D=new c("-","unaryMinus",[new u("sin",[S.clone()])]);break;case"tan":D=new c("^","pow",[new u("sec",[S.clone()]),y(2)]);break;case"sec":D=new c("*","multiply",[x,new u("tan",[S.clone()])]);break;case"csc":N=!0,D=new c("*","multiply",[x,new u("cot",[S.clone()])]);break;case"cot":N=!0,D=new c("^","pow",[new u("csc",[S.clone()]),y(2)]);break;case"asin":C=!0,D=new u("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[S.clone(),y(2)])])]);break;case"acos":C=!0,N=!0,D=new u("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[S.clone(),y(2)])])]);break;case"atan":C=!0,D=new c("+","add",[new c("^","pow",[S.clone(),y(2)]),y(1)]);break;case"asec":C=!0,D=new c("*","multiply",[new u("abs",[S.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[S.clone(),y(2)]),y(1)])])]);break;case"acsc":C=!0,N=!0,D=new c("*","multiply",[new u("abs",[S.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[S.clone(),y(2)]),y(1)])])]);break;case"acot":C=!0,N=!0,D=new c("+","add",[new c("^","pow",[S.clone(),y(2)]),y(1)]);break;case"sinh":D=new u("cosh",[S.clone()]);break;case"cosh":D=new u("sinh",[S.clone()]);break;case"tanh":D=new c("^","pow",[new u("sech",[S.clone()]),y(2)]);break;case"sech":N=!0,D=new c("*","multiply",[x,new u("tanh",[S.clone()])]);break;case"csch":N=!0,D=new c("*","multiply",[x,new u("coth",[S.clone()])]);break;case"coth":N=!0,D=new c("^","pow",[new u("csch",[S.clone()]),y(2)]);break;case"asinh":C=!0,D=new u("sqrt",[new c("+","add",[new c("^","pow",[S.clone(),y(2)]),y(1)])]);break;case"acosh":C=!0,D=new u("sqrt",[new c("-","subtract",[new c("^","pow",[S.clone(),y(2)]),y(1)])]);break;case"atanh":C=!0,D=new c("-","subtract",[y(1),new c("^","pow",[S.clone(),y(2)])]);break;case"asech":C=!0,N=!0,D=new c("*","multiply",[S.clone(),new u("sqrt",[new c("-","subtract",[y(1),new c("^","pow",[S.clone(),y(2)])])])]);break;case"acsch":C=!0,N=!0,D=new c("*","multiply",[new u("abs",[S.clone()]),new u("sqrt",[new c("+","add",[new c("^","pow",[S.clone(),y(2)]),y(1)])])]);break;case"acoth":C=!0,N=!0,D=new c("-","subtract",[y(1),new c("^","pow",[S.clone(),y(2)])]);break;case"abs":D=new c("/","divide",[new u(new d("abs"),[S.clone()]),S.clone()]);break;case"gamma":default:throw new Error('Cannot process function "'+x.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}var M,I;C?(M="/",I="divide"):(M="*",I="multiply");var V=w(S,_);return N&&(V=new c("-","unaryMinus",[V])),new c(M,I,[V,D])},"OperatorNode, function":function(x,_){if(_(x))return y(0);if(x.op==="+")return new c(x.op,x.fn,x.args.map(function(F){return w(F,_)}));if(x.op==="-"){if(x.isUnary())return new c(x.op,x.fn,[w(x.args[0],_)]);if(x.isBinary())return new c(x.op,x.fn,[w(x.args[0],_),w(x.args[1],_)])}if(x.op==="*"){var S=x.args.filter(function(F){return _(F)});if(S.length>0){var E=x.args.filter(function(F){return!_(F)}),C=E.length===1?E[0]:new c("*","multiply",E),N=S.concat(w(C,_));return new c("*","multiply",N)}return new c("+","add",x.args.map(function(F){return new c("*","multiply",x.args.map(function(U){return U===F?w(U,_):U.clone()}))}))}if(x.op==="/"&&x.isBinary()){var D=x.args[0],M=x.args[1];return _(M)?new c("/","divide",[w(D,_),M]):_(D)?new c("*","multiply",[new c("-","unaryMinus",[D]),new c("/","divide",[w(M,_),new c("^","pow",[M.clone(),y(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[w(D,_),M.clone()]),new c("*","multiply",[D.clone(),w(M,_)])]),new c("^","pow",[M.clone(),y(2)])])}if(x.op==="^"&&x.isBinary()){var I=x.args[0],V=x.args[1];if(_(I))return Vt(I)&&(a(I.value)||s(I.value,1))?y(0):new c("*","multiply",[x,new c("*","multiply",[new u("log",[I.clone()]),w(V.clone(),_)])]);if(_(V)){if(Vt(V)){if(a(V.value))return y(0);if(s(V.value,1))return w(I,_)}var K=new c("^","pow",[I.clone(),new c("-","subtract",[V,y(1)])]);return new c("*","multiply",[V.clone(),new c("*","multiply",[w(I,_),K])])}return new c("*","multiply",[new c("^","pow",[I.clone(),V.clone()]),new c("+","add",[new c("*","multiply",[w(I,_),new c("/","divide",[V.clone(),I.clone()])]),new c("*","multiply",[w(V,_),new u("log",[I.clone()])])])])}throw new Error('Cannot process operator "'+x.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function y(A,x){return new l(o(A,Vd(String(A),t)))}return g}),pU="rationalize",DPe=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],MPe=X(pU,DPe,r=>{var{config:e,typed:t,equal:n,isZero:i,add:s,subtract:a,multiply:o,divide:l,pow:u,parse:c,simplifyConstant:h,simplifyCore:d,simplify:f,fraction:p,bignumber:g,mathWithTransform:b,matrix:v,AccessorNode:w,ArrayNode:y,ConstantNode:A,FunctionNode:x,IndexNode:_,ObjectNode:S,OperatorNode:E,SymbolNode:C,ParenthesisNode:N}=r;function D(F){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,G=I(),ee=M(F,U,!0,G.firstRules),ue=ee.variables.length,te={exactFractions:!1},R={exactFractions:!0};if(F=ee.expression,ue>=1){F=V(F);var Y,H,he=!0,fe=!1;F=f(F,G.firstRules,{},te);for(var re;H=he?G.distrDivRules:G.sucDivRules,F=f(F,H,{},R),he=!he,re=F.toString(),re!==Y;)fe=!0,Y=re;fe&&(F=f(F,G.firstRulesAgain,{},te)),F=f(F,G.finalRules,{},te)}var W=[],ie={};return F.type==="OperatorNode"&&F.isBinary()&&F.op==="/"?(ue===1&&(F.args[0]=K(F.args[0],W),F.args[1]=K(F.args[1])),j&&(ie.numerator=F.args[0],ie.denominator=F.args[1])):(ue===1&&(F=K(F,W)),j&&(ie.numerator=F,ie.denominator=null)),j?(ie.coefficients=W,ie.variables=ee.variables,ie.expression=F,ie):F}return t(pU,{Node:D,"Node, boolean":(F,U)=>D(F,{},U),"Node, Object":D,"Node, Object, boolean":D});function M(F,U,j,G){var ee=[],ue=f(F,G,U,{exactFractions:!1});j=!!j;var te="+-*"+(j?"/":"");Y(ue);var R={};return R.expression=ue,R.variables=ee,R;function Y(H){var he=H.type;if(he==="FunctionNode")throw new Error("There is an unsolved function call");if(he==="OperatorNode")if(H.op==="^"){if(H.args[1].type!=="ConstantNode"||!tt(parseFloat(H.args[1].value)))throw new Error("There is a non-integer exponent");Y(H.args[0])}else{if(!te.includes(H.op))throw new Error("Operator "+H.op+" invalid in polynomial expression");for(var fe=0;fe<H.args.length;fe++)Y(H.args[fe])}else if(he==="SymbolNode"){var re=H.name,W=ee.indexOf(re);W===-1&&ee.push(re)}else if(he==="ParenthesisNode")Y(H.content);else if(he!=="ConstantNode")throw new Error("type "+he+" is not allowed in polynomial expression")}}function I(){var F=[d,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},h,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],U=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],j=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],G=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],ee={};return ee.firstRules=F.concat(U,G),ee.distrDivRules=j,ee.sucDivRules=G,ee.firstRulesAgain=F.concat(U),ee.finalRules=[d,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},h,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],ee}function V(F,U,j){var G=F.type,ee=arguments.length>1;if(G==="OperatorNode"&&F.isBinary()){var ue=!1,te;if(F.op==="^"&&(F.args[0].type==="ParenthesisNode"||F.args[0].type==="OperatorNode")&&F.args[1].type==="ConstantNode"&&(te=parseFloat(F.args[1].value),ue=te>=2&&tt(te)),ue){if(te>2){var R=F.args[0],Y=new E("^","pow",[F.args[0].cloneDeep(),new A(te-1)]);F=new E("*","multiply",[R,Y])}else F=new E("*","multiply",[F.args[0],F.args[0].cloneDeep()]);ee&&(j==="content"?U.content=F:U.args[j]=F)}}if(G==="ParenthesisNode")V(F.content,F,"content");else if(G!=="ConstantNode"&&G!=="SymbolNode")for(var H=0;H<F.args.length;H++)V(F.args[H],F,H);if(!ee)return F}function K(F,U){U===void 0&&(U=[]),U[0]=0;var j={};j.cte=1,j.oper="+",j.fire="";var G=0,ee="";re(F,null,j),G=U.length-1;for(var ue=!0,te,R=G;R>=0;R--)if(U[R]!==0){var Y=new A(ue?U[R]:Math.abs(U[R])),H=U[R]<0?"-":"+";if(R>0){var he=new C(ee);if(R>1){var fe=new A(R);he=new E("^","pow",[he,fe])}U[R]===-1&&ue?Y=new E("-","unaryMinus",[he]):Math.abs(U[R])===1?Y=he:Y=new E("*","multiply",[Y,he])}ue?te=Y:H==="+"?te=new E("+","add",[te,Y]):te=new E("-","subtract",[te,Y]),ue=!1}if(ue)return new A(0);return te;function re(W,ie,me){var le=W.type;if(le==="FunctionNode")throw new Error("There is an unsolved function call");if(le==="OperatorNode"){if(!"+-*^".includes(W.op))throw new Error("Operator "+W.op+" invalid");if(ie!==null){if((W.fn==="unaryMinus"||W.fn==="pow")&&ie.fn!=="add"&&ie.fn!=="subtract"&&ie.fn!=="multiply")throw new Error("Invalid "+W.op+" placing");if((W.fn==="subtract"||W.fn==="add"||W.fn==="multiply")&&ie.fn!=="add"&&ie.fn!=="subtract")throw new Error("Invalid "+W.op+" placing");if((W.fn==="subtract"||W.fn==="add"||W.fn==="unaryMinus")&&me.noFil!==0)throw new Error("Invalid "+W.op+" placing")}(W.op==="^"||W.op==="*")&&(me.fire=W.op);for(var ve=0;ve<W.args.length;ve++)W.fn==="unaryMinus"&&(me.oper="-"),(W.op==="+"||W.fn==="subtract")&&(me.fire="",me.cte=1,me.oper=ve===0?"+":W.op),me.noFil=ve,re(W.args[ve],W,me)}else if(le==="SymbolNode"){if(W.name!==ee&&ee!=="")throw new Error("There is more than one variable");if(ee=W.name,ie===null){U[1]=1;return}if(ie.op==="^"&&me.noFil!==0)throw new Error("In power the variable should be the first parameter");if(ie.op==="*"&&me.noFil!==1)throw new Error("In multiply the variable should be the second parameter");(me.fire===""||me.fire==="*")&&(G<1&&(U[1]=0),U[1]+=me.cte*(me.oper==="+"?1:-1),G=Math.max(1,G))}else if(le==="ConstantNode"){var ye=parseFloat(W.value);if(ie===null){U[0]=ye;return}if(ie.op==="^"){if(me.noFil!==1)throw new Error("Constant cannot be powered");if(!tt(ye)||ye<=0)throw new Error("Non-integer exponent is not allowed");for(var Ie=G+1;Ie<ye;Ie++)U[Ie]=0;ye>G&&(U[ye]=0),U[ye]+=me.cte*(me.oper==="+"?1:-1),G=Math.max(ye,G);return}me.cte=ye,me.fire===""&&(U[0]+=me.cte*(me.oper==="+"?1:-1))}else throw new Error("Type "+le+" is not allowed")}}}),gU="zpk2tf",IPe=["typed","add","multiply","Complex","number"],PPe=X(gU,IPe,r=>{var{typed:e,add:t,multiply:n,Complex:i,number:s}=r;return e(gU,{"Array,Array,number":function(u,c,h){return a(u,c,h)},"Array,Array":function(u,c){return a(u,c,1)},"Matrix,Matrix,number":function(u,c,h){return a(u.valueOf(),c.valueOf(),h)},"Matrix,Matrix":function(u,c){return a(u.valueOf(),c.valueOf(),1)}});function a(l,u,c){l.some(w=>w.type==="BigNumber")&&(l=l.map(w=>s(w))),u.some(w=>w.type==="BigNumber")&&(u=u.map(w=>s(w)));for(var h=[i(1,0)],d=[i(1,0)],f=0;f<l.length;f++){var p=l[f];typeof p=="number"&&(p=i(p,0)),h=o(h,[i(1,0),i(-p.re,-p.im)])}for(var g=0;g<u.length;g++){var b=u[g];typeof b=="number"&&(b=i(b,0)),d=o(d,[i(1,0),i(-b.re,-b.im)])}for(var v=0;v<h.length;v++)h[v]=n(h[v],c);return[h,d]}function o(l,u){for(var c=[],h=0;h<l.length+u.length-1;h++){c[h]=i(0,0);for(var d=0;d<l.length;d++)h-d>=0&&h-d<u.length&&(c[h]=t(c[h],n(l[d],u[h-d])))}return c}}),vU="freqz",RPe=["typed","add","multiply","Complex","divide","matrix"],kPe=X(vU,RPe,r=>{var{typed:e,add:t,multiply:n,Complex:i,divide:s,matrix:a}=r;return e(vU,{"Array, Array":function(c,h){var d=l(512);return o(c,h,d)},"Array, Array, Array":function(c,h,d){return o(c,h,d)},"Array, Array, number":function(c,h,d){if(d<0)throw new Error("w must be a positive number");var f=l(d);return o(c,h,f)},"Matrix, Matrix":function(c,h){var d=l(512),{w:f,h:p}=o(c.valueOf(),h.valueOf(),d);return{w:a(f),h:a(p)}},"Matrix, Matrix, Matrix":function(c,h,d){var{h:f}=o(c.valueOf(),h.valueOf(),d.valueOf());return{h:a(f),w:a(d)}},"Matrix, Matrix, number":function(c,h,d){if(d<0)throw new Error("w must be a positive number");var f=l(d),{h:p}=o(c.valueOf(),h.valueOf(),f);return{h:a(p),w:a(f)}}});function o(u,c,h){for(var d=[],f=[],p=0;p<h.length;p++){for(var g=i(0,0),b=i(0,0),v=0;v<u.length;v++)g=t(g,n(u[v],i(Math.cos(-v*h[p]),Math.sin(-v*h[p]))));for(var w=0;w<c.length;w++)b=t(b,n(c[w],i(Math.cos(-w*h[p]),Math.sin(-w*h[p]))));d.push(g),f.push(b)}for(var y=[],A=0;A<d.length;A++)y.push(s(d[A],f[A]));return{h:y,w:h}}function l(u){for(var c=[],h=0;h<u;h++)c.push(h/u*Math.PI);return c}}),FPe="reviver",OPe=["classes"],BPe=X(FPe,OPe,r=>{var{classes:e}=r;return function(n,i){var s=e[i&&i.mathjs];return s&&typeof s.fromJSON=="function"?s.fromJSON(i):i}}),LPe="replacer",$Pe=[],VPe=X(LPe,$Pe,()=>function(e,t){return typeof t=="number"&&(!Number.isFinite(t)||isNaN(t))?{mathjs:"number",value:String(t)}:typeof t=="bigint"?{mathjs:"bigint",value:String(t)}:t}),UPe="15.1.0",zPe=X("true",[],()=>!0),jPe=X("false",[],()=>!1),qPe=X("null",[],()=>null),HPe=ka("Infinity",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1/0):1/0}),GPe=ka("NaN",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(NaN):NaN}),WPe=ka("pi",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?JF(t):B0e}),KPe=ka("tau",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?pAe(t):L0e}),XPe=ka("e",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?fAe(t):$0e}),YPe=ka("phi",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?mAe(t):V0e}),QPe=ka("LN2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(2).ln():Math.LN2}),JPe=ka("LN10",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(10).ln():Math.LN10}),ZPe=ka("LOG2E",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1).div(new t(2).ln()):Math.LOG2E}),eRe=ka("LOG10E",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(1).div(new t(10).ln()):Math.LOG10E}),tRe=ka("SQRT1_2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t("0.5").sqrt():Math.SQRT1_2}),rRe=ka("SQRT2",["config","?BigNumber"],r=>{var{config:e,BigNumber:t}=r;return e.number==="BigNumber"?new t(2).sqrt():Math.SQRT2}),nRe=ka("i",["Complex"],r=>{var{Complex:e}=r;return e.I}),iRe=X("version",[],()=>UPe);function ka(r,e,t){return X(r,e,t,{recreateOnConfigChange:!0})}var sRe=yt("speedOfLight","299792458","m s^-1"),aRe=yt("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),oRe=yt("planckConstant","6.62607015e-34","J s"),lRe=yt("reducedPlanckConstant","1.0545718176461565e-34","J s"),uRe=yt("magneticConstant","1.25663706212e-6","N A^-2"),cRe=yt("electricConstant","8.8541878128e-12","F m^-1"),hRe=yt("vacuumImpedance","376.730313667","ohm"),dRe=yt("coulomb","8.987551792261171e9","N m^2 C^-2"),fRe=yt("coulombConstant","8.987551792261171e9","N m^2 C^-2"),mRe=yt("elementaryCharge","1.602176634e-19","C"),pRe=yt("bohrMagneton","9.2740100783e-24","J T^-1"),gRe=yt("conductanceQuantum","7.748091729863649e-5","S"),vRe=yt("inverseConductanceQuantum","12906.403729652257","ohm"),yRe=yt("magneticFluxQuantum","2.0678338484619295e-15","Wb"),bRe=yt("nuclearMagneton","5.0507837461e-27","J T^-1"),wRe=yt("klitzing","25812.807459304513","ohm"),xRe=yt("bohrRadius","5.29177210903e-11","m"),_Re=yt("classicalElectronRadius","2.8179403262e-15","m"),ARe=yt("electronMass","9.1093837015e-31","kg"),ERe=yt("fermiCoupling","1.1663787e-5","GeV^-2"),SRe=hN("fineStructure",.0072973525693),TRe=yt("hartreeEnergy","4.3597447222071e-18","J"),CRe=yt("protonMass","1.67262192369e-27","kg"),NRe=yt("deuteronMass","3.3435830926e-27","kg"),DRe=yt("neutronMass","1.6749271613e-27","kg"),MRe=yt("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),IRe=yt("rydberg","10973731.568160","m^-1"),PRe=yt("thomsonCrossSection","6.6524587321e-29","m^2"),RRe=hN("weakMixingAngle",.2229),kRe=hN("efimovFactor",22.7),FRe=yt("atomicMass","1.66053906660e-27","kg"),ORe=yt("avogadro","6.02214076e23","mol^-1"),BRe=yt("boltzmann","1.380649e-23","J K^-1"),LRe=yt("faraday","96485.33212331001","C mol^-1"),$Re=yt("firstRadiation","3.7417718521927573e-16","W m^2"),VRe=yt("loschmidt","2.686780111798444e25","m^-3"),URe=yt("gasConstant","8.31446261815324","J K^-1 mol^-1"),zRe=yt("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),jRe=yt("molarVolume","0.022413969545014137","m^3 mol^-1"),qRe=hN("sackurTetrode",-1.16487052358),HRe=yt("secondRadiation","0.014387768775039337","m K"),GRe=yt("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),WRe=yt("wienDisplacement","2.897771955e-3","m K"),KRe=yt("molarMass","0.99999999965e-3","kg mol^-1"),XRe=yt("molarMassC12","11.9999999958e-3","kg mol^-1"),YRe=yt("gravity","9.80665","m s^-2"),QRe=yt("planckLength","1.616255e-35","m"),JRe=yt("planckMass","2.176435e-8","kg"),ZRe=yt("planckTime","5.391245e-44","s"),eke=yt("planckCharge","1.87554603778e-18","C"),tke=yt("planckTemperature","1.416785e+32","K");function yt(r,e,t){var n=["config","Unit","BigNumber"];return X(r,n,i=>{var{config:s,Unit:a,BigNumber:o}=i,l=s.number==="BigNumber"?new o(e):parseFloat(e),u=new a(l,t);return u.fixPrefix=!0,u})}function hN(r,e){var t=["config","BigNumber"];return X(r,t,n=>{var{config:i,BigNumber:s}=n;return i.number==="BigNumber"?new s(e):e})}function yU(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function rke(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yU(Object(t),!0).forEach(function(n){Fn(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):yU(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var nke="mapSlices",ike=["typed","isInteger"],ske=X(nke,ike,r=>{var{typed:e,isInteger:t}=r,n=BP({typed:e,isInteger:t});return e("mapSlices",{"...any":function(s){var a=s[1];it(a)?s[1]=a-1:xt(a)&&(s[1]=a.minus(1));try{return n.apply(null,s)}catch(o){throw Ds(o)}}})},rke({isTransformFunction:!0},BP.meta)),ake="column",oke=["typed","Index","matrix","range"],lke=X(ake,oke,r=>{var{typed:e,Index:t,matrix:n,range:i}=r,s=ZX({typed:e,Index:t,matrix:n,range:i});return e("column",{"...any":function(o){var l=o.length-1,u=o[l];it(u)&&(o[l]=u-1);try{return s.apply(null,o)}catch(c){throw Ds(c)}}})},{isTransformFunction:!0});function oO(r,e,t){var n=r.filter(function(l){return mi(l)&&!(l.name in e)&&!t.has(l.name)})[0];if(!n)throw new Error('No undefined variable found in inline expression "'+r+'"');var i=n.name,s=new Map,a=new wK(t,s,new Set([i])),o=r.compile();return function(u){return s.set(i,u),o.evaluate(a)}}var uke="transformCallback",cke=["typed"],lO=X(uke,cke,r=>{var{typed:e}=r;return function(n,i){return e.isTypedFunction(n)?t(n,i):bU(n,n.length,i)};function t(n,i){var s=Object.fromEntries(Object.entries(n.signatures).map(a=>{var[o,l]=a,u=o.split(",").length;return e.isTypedFunction(l)?[o,t(l,i)]:[o,bU(l,u,i)]}));return typeof n.name=="string"?e(n.name,s):e(s)}});function bU(r,e,t){return e===t?r:e===t+1?function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var a=i.slice(0,t),o=wU(i[t]);return r(...a,o)}:e>t+1?function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var a=i.slice(0,t),o=wU(i[t]),l=i.slice(t+1);return r(...a,o,...l)}:r}function wU(r){return r.map(e=>e+1)}var hke="filter",dke=["typed"],fke=X(hke,dke,r=>{var{typed:e}=r;function t(i,s,a){var o=eY({typed:e}),l=lO({typed:e});if(i.length===0)return o();var u=i[0];if(i.length===1)return o(u);var c=i.length-1,h=i[c];return u&&(u=n(u,a)),h&&(mi(h)||h_(h)?h=n(h,a):h=oO(h,s,a)),o(u,l(h,c))}t.rawArgs=!0;function n(i,s){return i.compile().evaluate(s)}return t},{isTransformFunction:!0}),mke="forEach",pke=["typed"],gke=X(mke,pke,r=>{var{typed:e}=r,t=tY({typed:e}),n=lO({typed:e});function i(a,o,l){if(a.length===0)return t();var u=a[0];if(a.length===1)return t(u);var c=a.length-1,h=a[c];return u&&(u=s(u,l)),h&&(mi(h)||h_(h)?h=s(h,l):h=oO(h,o,l)),t(u,n(h,c))}i.rawArgs=!0;function s(a,o){return a.compile().evaluate(o)}return i},{isTransformFunction:!0}),vke="index",yke=["Index","getMatrixDataType"],bke=X(vke,yke,r=>{var{Index:e,getMatrixDataType:t}=r;return function(){for(var i=[],s=0,a=arguments.length;s<a;s++){var o=arguments[s];if($F(o))o.start--,o.end-=o.step>0?0:2;else if(o&&o.isSet===!0)o=o.map(function(u){return u-1});else if(cr(o)||ot(o))t(o)!=="boolean"&&(o=o.map(function(u){return u-1}));else if(it(o)||Hb(o))o--;else if(xt(o))o=o.toNumber()-1;else if(typeof o!="string")throw new TypeError("Dimension must be an Array, Matrix, number, bigint, string, or Range");i[s]=o}var l=new e;return e.apply(l,i),l}},{isTransformFunction:!0}),wke="map",xke=["typed"],_ke=X(wke,xke,r=>{var{typed:e}=r,t=rY({typed:e}),n=lO({typed:e});function i(s,a,o){if(s.length===0)return t();if(s.length===1)return t(s[0]);var l=s.length-1,u=s.slice(0,l),c=s[l];return u=u.map(d=>h(d,o)),c&&(mi(c)||h_(c)?c=h(c,o):c=oO(c,a,o)),t(...u,n(c,l));function h(d,f){return d.compile().evaluate(f)}}return i.rawArgs=!0,i},{isTransformFunction:!0});function Ake(r){return it(r)?r-1:xt(r)?r.minus(1):r}function Eke(r){return it(r)||xt(r)}function jd(r){if(r.length===2&&Ia(r[0])){r=r.slice();var e=r[1];Eke(e)&&(r[1]=Ake(e))}return r}var Ske="max",Tke=["typed","config","numeric","larger","isNaN"],Cke=X(Ske,Tke,r=>{var{typed:e,config:t,numeric:n,larger:i,isNaN:s}=r,a=hY({typed:e,config:t,numeric:n,larger:i,isNaN:s});return e("max",{"...any":function(l){l=jd(l);try{return a.apply(null,l)}catch(u){throw Ds(u)}}})},{isTransformFunction:!0}),Nke="mean",Dke=["typed","add","divide"],Mke=X(Nke,Dke,r=>{var{typed:e,add:t,divide:n}=r,i=wY({typed:e,add:t,divide:n});return e("mean",{"...any":function(a){a=jd(a);try{return i.apply(null,a)}catch(o){throw Ds(o)}}})},{isTransformFunction:!0}),Ike="min",Pke=["typed","config","numeric","smaller","isNaN"],Rke=X(Ike,Pke,r=>{var{typed:e,config:t,numeric:n,smaller:i,isNaN:s}=r,a=dY({typed:e,config:t,numeric:n,smaller:i,isNaN:s});return e("min",{"...any":function(l){l=jd(l);try{return a.apply(null,l)}catch(u){throw Ds(u)}}})},{isTransformFunction:!0}),kke="range",Fke=["typed","config","?matrix","?bignumber","equal","smaller","smallerEq","larger","largerEq","add","isZero","isPositive"],Oke=X(kke,Fke,r=>{var{typed:e,config:t,matrix:n,bignumber:i,equal:s,smaller:a,smallerEq:o,larger:l,largerEq:u,add:c,isZero:h,isPositive:d}=r,f=sY({typed:e,config:t,matrix:n,bignumber:i,equal:s,smaller:a,smallerEq:o,larger:l,largerEq:u,add:c,isZero:h,isPositive:d});return e("range",{"...any":function(g){var b=g.length-1,v=g[b];return typeof v!="boolean"&&g.push(!0),f.apply(null,g)}})},{isTransformFunction:!0}),Bke="row",Lke=["typed","Index","matrix","range"],$ke=X(Bke,Lke,r=>{var{typed:e,Index:t,matrix:n,range:i}=r,s=aY({typed:e,Index:t,matrix:n,range:i});return e("row",{"...any":function(o){var l=o.length-1,u=o[l];it(u)&&(o[l]=u-1);try{return s.apply(null,o)}catch(c){throw Ds(c)}}})},{isTransformFunction:!0}),Vke="subset",Uke=["typed","matrix","zeros","add"],zke=X(Vke,Uke,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r,s=oY({typed:e,matrix:t,zeros:n,add:i});return e("subset",{"...any":function(o){try{return s.apply(null,o)}catch(l){throw Ds(l)}}})},{isTransformFunction:!0}),jke="concat",qke=["typed","matrix","isInteger"],Hke=X(jke,qke,r=>{var{typed:e,matrix:t,isInteger:n}=r,i=JX({typed:e,matrix:t,isInteger:n});return e("concat",{"...any":function(a){var o=a.length-1,l=a[o];it(l)?a[o]=l-1:xt(l)&&(a[o]=l.minus(1));try{return i.apply(null,a)}catch(u){throw Ds(u)}}})},{isTransformFunction:!0}),xU="diff",Gke=["typed","matrix","subtract","number","bignumber"],Wke=X(xU,Gke,r=>{var{typed:e,matrix:t,subtract:n,number:i,bignumber:s}=r,a=nY({typed:e,matrix:t,subtract:n,number:i,bignumber:s});return e(xU,{"...any":function(l){l=jd(l);try{return a.apply(null,l)}catch(u){throw Ds(u)}}})},{isTransformFunction:!0}),Kke="std",Xke=["typed","map","sqrt","variance"],Yke=X(Kke,Xke,r=>{var{typed:e,map:t,sqrt:n,variance:i}=r,s=AY({typed:e,map:t,sqrt:n,variance:i});return e("std",{"...any":function(o){o=jd(o);try{return s.apply(null,o)}catch(l){throw Ds(l)}}})},{isTransformFunction:!0}),_U="sum",Qke=["typed","config","add","numeric"],Jke=X(_U,Qke,r=>{var{typed:e,config:t,add:n,numeric:i}=r,s=yY({typed:e,config:t,add:n,numeric:i});return e(_U,{"...any":function(o){o=jd(o);try{return s.apply(null,o)}catch(l){throw Ds(l)}}})},{isTransformFunction:!0}),Zke="quantileSeq",eFe=["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger","mapSlices"],tFe=X(Zke,eFe,r=>{var{typed:e,bignumber:t,add:n,subtract:i,divide:s,multiply:a,partitionSelect:o,compare:l,isInteger:u,smaller:c,smallerEq:h,larger:d,mapSlices:f}=r,p=_Y({typed:e,bignumber:t,add:n,subtract:i,divide:s,multiply:a,partitionSelect:o,compare:l,isInteger:u,smaller:c,smallerEq:h,larger:d,mapSlices:f});return e("quantileSeq",{"Array | Matrix, number | BigNumber":p,"Array | Matrix, number | BigNumber, number":(b,v,w)=>p(b,v,g(w)),"Array | Matrix, number | BigNumber, boolean":p,"Array | Matrix, number | BigNumber, boolean, number":(b,v,w,y)=>p(b,v,w,g(y)),"Array | Matrix, Array | Matrix":p,"Array | Matrix, Array | Matrix, number":(b,v,w)=>p(b,v,g(w)),"Array | Matrix, Array | Matrix, boolean":p,"Array | Matrix, Array | Matrix, boolean, number":(b,v,w,y)=>p(b,v,w,g(y))});function g(b){return jd([[],b])[1]}},{isTransformFunction:!0}),AU="cumsum",rFe=["typed","add","unaryPlus"],nFe=X(AU,rFe,r=>{var{typed:e,add:t,unaryPlus:n}=r,i=bY({typed:e,add:t,unaryPlus:n});return e(AU,{"...any":function(a){if(a.length===2&&Ia(a[0])){var o=a[1];it(o)?a[1]=o-1:xt(o)&&(a[1]=o.minus(1))}try{return i.apply(null,a)}catch(l){throw Ds(l)}}})},{isTransformFunction:!0}),EU="variance",iFe=["typed","add","subtract","multiply","divide","mapSlices","isNaN"],sFe=X(EU,iFe,r=>{var{typed:e,add:t,subtract:n,multiply:i,divide:s,mapSlices:a,isNaN:o}=r,l=xY({typed:e,add:t,subtract:n,multiply:i,divide:s,mapSlices:a,isNaN:o});return e(EU,{"...any":function(c){c=jd(c);try{return l.apply(null,c)}catch(h){throw Ds(h)}}})},{isTransformFunction:!0}),SU="print",aFe=["typed","matrix","zeros","add"],oFe=X(SU,aFe,r=>{var{typed:e,matrix:t,zeros:n,add:i}=r,s=uY({typed:e,matrix:t,zeros:n,add:i});return e(SU,{"string, Object | Array":function(l,u){return s(a(l),u)},"string, Object | Array, number | Object":function(l,u,c){return s(a(l),u,c)}});function a(o){return o.replace(lY,l=>{var u=l.slice(1).split("."),c=u.map(function(h){return!isNaN(h)&&h.length>0?parseInt(h)-1:h});return"$"+c.join(".")})}},{isTransformFunction:!0}),lFe="and",uFe=["typed","matrix","zeros","add","equalScalar","not","concat"],cFe=X(lFe,uFe,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,not:s,concat:a}=r,o=cY({typed:e,matrix:t,equalScalar:n,zeros:i,not:s,concat:a});function l(u,c,h){var d=u[0].compile().evaluate(h);if(!Ia(d)&&!o(d,!0))return!1;var f=u[1].compile().evaluate(h);return o(d,f)}return l.rawArgs=!0,l},{isTransformFunction:!0}),hFe="or",dFe=["typed","matrix","equalScalar","DenseMatrix","concat"],fFe=X(hFe,dFe,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:s}=r,a=QX({typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:s});function o(l,u,c){var h=l[0].compile().evaluate(c);if(!Ia(h)&&a(h,!1))return!0;var d=l[1].compile().evaluate(c);return a(h,d)}return o.rawArgs=!0,o},{isTransformFunction:!0}),mFe="nullish",pFe=["typed","matrix","size","flatten","deepEqual"],gFe=X(mFe,pFe,r=>{var{typed:e,matrix:t,size:n,flatten:i,deepEqual:s}=r,a=YX({typed:e,matrix:t,size:n,flatten:i,deepEqual:s});function o(l,u,c){var h=l[0].compile().evaluate(c);if(!Ia(h)&&h!=null&&h!==void 0)return h;var d=l[1].compile().evaluate(c);return a(h,d)}return o.rawArgs=!0,o},{isTransformFunction:!0}),vFe="bitAnd",yFe=["typed","matrix","zeros","add","equalScalar","not","concat"],bFe=X(vFe,yFe,r=>{var{typed:e,matrix:t,equalScalar:n,zeros:i,not:s,concat:a}=r,o=KX({typed:e,matrix:t,equalScalar:n,zeros:i,not:s,concat:a});function l(u,c,h){var d=u[0].compile().evaluate(h);if(!Ia(d)){if(isNaN(d))return NaN;if(d===0||d===!1)return 0}var f=u[1].compile().evaluate(h);return o(d,f)}return l.rawArgs=!0,l},{isTransformFunction:!0}),wFe="bitOr",xFe=["typed","matrix","equalScalar","DenseMatrix","concat"],_Fe=X(wFe,xFe,r=>{var{typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:s}=r,a=XX({typed:e,matrix:t,equalScalar:n,DenseMatrix:i,concat:s});function o(l,u,c){var h=l[0].compile().evaluate(c);if(!Ia(h)){if(isNaN(h))return NaN;if(h===-1)return-1;if(h===!0)return 1}var d=l[1].compile().evaluate(c);return a(h,d)}return o.rawArgs=!0,o},{isTransformFunction:!0}),ke=Yve({config:Ae}),mr=t0e({}),TU=XPe({BigNumber:ke,config:Ae}),AFe=jPe({}),EFe=SRe({BigNumber:ke,config:Ae}),qd=u0e({}),TY=nRe({Complex:mr}),SFe=HPe({BigNumber:ke,config:Ae}),TFe=JPe({BigNumber:ke,config:Ae}),CFe=eRe({BigNumber:ke,config:Ae}),dN=p0e({}),NFe=GPe({BigNumber:ke,config:Ae}),DFe=qPe({}),MFe=YPe({BigNumber:ke,config:Ae}),IFe=d0e({}),CY=eve({}),PFe=tRe({BigNumber:ke,config:Ae}),RFe=qRe({BigNumber:ke,config:Ae}),NY=KPe({BigNumber:ke,config:Ae}),kFe=zPe({}),FFe=iRe({}),Tt=I0e({Matrix:dN,config:Ae}),OFe=kRe({BigNumber:ke,config:Ae}),BFe=QPe({BigNumber:ke,config:Ae}),GP=WPe({BigNumber:ke,config:Ae}),DY=VPe({}),LFe=rRe({BigNumber:ke,config:Ae}),ne=Yge({BigNumber:ke,Complex:mr,DenseMatrix:Tt,Fraction:qd}),$Fe=RRe({BigNumber:ke,config:Ae}),Oi=Yye({typed:ne}),VFe=TAe({Complex:mr,config:Ae,typed:ne}),UFe=MAe({BigNumber:ke,typed:ne}),zFe=kAe({BigNumber:ke,Complex:mr,config:Ae,typed:ne}),Qn=ebe({typed:ne}),jFe=U1e({typed:ne}),qFe=VAe({BigNumber:ke,Complex:mr,config:Ae,typed:ne}),HFe=HAe({typed:ne}),MY=KAe({typed:ne}),GFe=JAe({Complex:mr,config:Ae,typed:ne}),WFe=xye({typed:ne}),KFe=k1e({typed:ne}),XFe=Sye({typed:ne}),YFe=R0e({typed:ne}),fN=vIe({typed:ne}),Wm=Iye({Complex:mr,typed:ne}),_p=j1e({typed:ne}),uO=eEe({typed:ne}),QFe=iEe({BigNumber:ke,typed:ne}),JFe=lEe({BigNumber:ke,typed:ne}),ZFe=gbe({typed:ne}),Rt=cye({config:Ae,typed:ne}),eOe=uxe({typed:ne}),IY=ybe({typed:ne}),tOe=wbe({Complex:mr,typed:ne}),rOe=eY({typed:ne}),Ap=hwe({typed:ne}),nOe=tY({typed:ne}),p_=wxe({typed:ne}),cO=pwe({typed:ne}),iOe=Txe({format:p_,typed:ne}),hO=H1e({typed:ne}),g_=nye({typed:ne}),cc=tye({typed:ne}),Ep=W0e({typed:ne}),sOe=Rxe({typed:ne}),aOe=ZPe({BigNumber:ke,config:Ae}),oOe=AIe({Complex:mr,typed:ne}),lOe=e1e({Complex:mr,config:Ae,typed:ne}),dO=r1e({Complex:mr,config:Ae,typed:ne}),Hd=rY({typed:ne}),uOe=gxe({isNaN:cc,isNumeric:Ep,typed:ne}),gn=s1e({typed:ne}),kT=X1e({typed:ne}),ou=yye({typed:ne}),cOe=Exe({format:p_,typed:ne}),hOe=QIe({config:Ae,typed:ne}),dOe=uY({typed:ne}),fOe=ZIe({config:Ae,typed:ne}),fO=W1e({typed:ne}),mOe=dEe({BigNumber:ke,typed:ne}),PY=h1e({BigNumber:ke,Fraction:qd,complex:Wm,typed:ne}),mN=gEe({typed:ne}),Jn=Lwe({typed:ne}),Zn=fye({Matrix:dN,equalScalar:Rt,typed:ne}),pOe=qye({typed:ne}),gOe=g1e({typed:ne}),vOe=Aye({typed:ne}),wo=rbe({typed:ne}),yOe=wEe({typed:ne}),bOe=Ixe({typed:ne}),pN=oye({typed:ne}),wOe=NAe({Complex:mr,config:Ae,typed:ne}),xOe=OAe({BigNumber:ke,typed:ne}),_Oe=LAe({BigNumber:ke,Complex:mr,config:Ae,typed:ne}),Xs=Nye({BigNumber:ke,typed:ne}),AOe=bIe({typed:ne}),EOe=rEe({typed:ne}),SOe=cEe({BigNumber:ke,typed:ne}),gN=QEe({addScalar:Qn,conj:_p,multiplyScalar:gn,size:Jn,typed:ne}),TOe=X0e({isNumeric:Ep,typed:ne}),COe=sye({isBounded:g_,map:Hd,typed:ne}),Gd=H0e({config:Ae,typed:ne}),xo=Z0e({equalScalar:Rt,typed:ne}),Re=Oye({DenseMatrix:Tt,Matrix:dN,SparseMatrix:Zn,typed:ne}),NOe=Lye({isZero:xo,matrix:Re,typed:ne}),nr=o1e({addScalar:Qn,dot:gN,equalScalar:Rt,matrix:Re,multiplyScalar:gn,typed:ne}),DOe=Ewe({BigNumber:ke,config:Ae,matrix:Re,typed:ne}),MOe=tPe({config:Ae,log2:dO,typed:ne}),IOe=Iwe({config:Ae,matrix:Re}),POe=mEe({BigNumber:ke,typed:ne}),ROe=yEe({typed:ne}),kOe=_Ae({SparseMatrix:Zn,typed:ne}),rl=m1e({Complex:mr,config:Ae,typed:ne}),FOe=Vwe({typed:ne}),OOe=AEe({typed:ne}),v_=Gwe({matrix:Re,typed:ne}),RY=w1e({BigNumber:ke,config:Ae,matrix:Re,typed:ne}),Ii=Ywe({BigNumber:ke,config:Ae,matrix:Re,typed:ne}),BOe=PAe({BigNumber:ke,Complex:mr,config:Ae,typed:ne}),LOe=zAe({Complex:mr,config:Ae,typed:ne}),$Oe=_xe({format:p_,typed:ne}),VOe=aEe({BigNumber:ke,typed:ne}),mO=Kwe({conj:_p,transpose:v_,typed:ne}),kY=owe({DenseMatrix:Tt,SparseMatrix:Zn,matrix:Re,typed:ne}),as=C_e({DenseMatrix:Tt,SparseMatrix:Zn,equalScalar:Rt,matrix:Re,typed:ne}),y_=kye({Fraction:qd,typed:ne}),Wd=vwe({BigNumber:ke,DenseMatrix:Tt,SparseMatrix:Zn,config:Ae,matrix:Re,typed:ne}),_s=F0e({equal:as,typed:ne}),UOe=bwe({matrix:Re,multiplyScalar:gn,typed:ne}),$1=BP({isInteger:_s,typed:ne}),pO=zye({flatten:Ap,matrix:Re,size:Jn,typed:ne}),fo=Oxe({bignumber:Xs,fraction:y_,number:ou}),FY=yxe({config:Ae,multiplyScalar:gn,numeric:fo,typed:ne}),OY=Nwe({isInteger:_s,matrix:Re,typed:ne}),ay=zxe({BigNumber:ke,DenseMatrix:Tt,config:Ae,equalScalar:Rt,matrix:Re,typed:ne,zeros:Ii}),lu=Gye({typed:ne}),zOe=pIe({BigNumber:ke,Fraction:qd,config:Ae,isInteger:_s,number:ou,typed:ne}),BY=ibe({BigNumber:ke,Complex:mr,Fraction:qd,config:Ae,isNegative:Gd,matrix:Re,typed:ne,unaryMinus:lu}),Qt=JX({isInteger:_s,matrix:Re,typed:ne}),jOe=nwe({prod:FY,size:Jn,typed:ne}),b_=q_e({equal:as,typed:ne}),Wr=Lxe({numeric:fo,typed:ne}),qOe=T1e({concat:Qt,equalScalar:Rt,matrix:Re,multiplyScalar:gn,typed:ne}),LY=qX({DenseMatrix:Tt,config:Ae,equalScalar:Rt,matrix:Re,round:ay,typed:ne,zeros:Ii}),HOe=Wbe({BigNumber:ke,DenseMatrix:Tt,concat:Qt,config:Ae,equalScalar:Rt,matrix:Re,round:ay,typed:ne,zeros:Ii}),Sp=Q0e({config:Ae,typed:ne}),As=L_e({DenseMatrix:Tt,SparseMatrix:Zn,bignumber:Xs,concat:Qt,config:Ae,matrix:Re,typed:ne}),GOe=Qbe({concat:Qt,equalScalar:Rt,matrix:Re,typed:ne}),WOe=h_e({DenseMatrix:Tt,concat:Qt,equalScalar:Rt,matrix:Re,typed:ne,zeros:Ii}),$Y=t_e({DenseMatrix:Tt,divideScalar:Wr,equalScalar:Rt,matrix:Re,multiplyScalar:gn,subtractScalar:wo,typed:ne}),gO=hY({config:Ae,isNaN:cc,larger:As,numeric:fo,typed:ne}),VY=GX({DenseMatrix:Tt,concat:Qt,config:Ae,equalScalar:Rt,matrix:Re,round:ay,typed:ne,zeros:Ii}),KOe=u1e({BigNumber:ke,concat:Qt,equalScalar:Rt,matrix:Re,typed:ne}),XOe=YX({deepEqual:b_,flatten:Ap,matrix:Re,size:Jn,typed:ne}),YOe=QX({DenseMatrix:Tt,concat:Qt,equalScalar:Rt,matrix:Re,typed:ne}),vO=aTe({addScalar:Qn,complex:Wm,conj:_p,divideScalar:Wr,equal:as,identity:Wd,isZero:xo,matrix:Re,multiplyScalar:gn,sign:PY,sqrt:rl,subtractScalar:wo,typed:ne,unaryMinus:lu,zeros:Ii}),QOe=f_e({DenseMatrix:Tt,concat:Qt,equalScalar:Rt,matrix:Re,typed:ne,zeros:Ii}),Es=P_e({DenseMatrix:Tt,SparseMatrix:Zn,bignumber:Xs,concat:Qt,config:Ae,matrix:Re,typed:ne}),en=y1e({DenseMatrix:Tt,concat:Qt,equalScalar:Rt,matrix:Re,subtractScalar:wo,typed:ne,unaryMinus:lu}),JOe=Dxe({concat:Qt,matrix:Re,typed:ne}),yO=Kye({config:Ae,numeric:fo,typed:ne}),bO=n_e({DenseMatrix:Tt,divideScalar:Wr,equalScalar:Rt,matrix:Re,multiplyScalar:gn,subtractScalar:wo,typed:ne}),ZOe=Z1e({DenseMatrix:Tt,SparseMatrix:Zn,concat:Qt,matrix:Re,typed:ne}),Lt=HEe({DenseMatrix:Tt,SparseMatrix:Zn,addScalar:Qn,concat:Qt,equalScalar:Rt,matrix:Re,typed:ne}),e3e=YAe({BigNumber:ke,DenseMatrix:Tt,concat:Qt,equalScalar:Rt,matrix:Re,typed:ne}),t3e=KX({concat:Qt,equalScalar:Rt,matrix:Re,typed:ne}),r3e=XX({DenseMatrix:Tt,concat:Qt,equalScalar:Rt,matrix:Re,typed:ne}),n3e=$1e({DenseMatrix:Tt,SparseMatrix:Zn,concat:Qt,matrix:Re,typed:ne}),i3e=oPe({addScalar:Qn,combinations:fN,divideScalar:Wr,isInteger:_s,isNegative:Gd,multiplyScalar:gn,typed:ne}),Tp=y_e({BigNumber:ke,DenseMatrix:Tt,Fraction:qd,concat:Qt,config:Ae,equalScalar:Rt,matrix:Re,typed:ne}),UY=S_e({concat:Qt,matrix:Re,typed:ne}),s3e=uPe({addScalar:Qn,combinations:fN,isInteger:_s,isNegative:Gd,isPositive:Sp,larger:As,typed:ne}),a3e=swe({matrix:Re,multiply:nr,subtract:en,typed:ne}),zY=NMe({divideScalar:Wr,isZero:xo,matrix:Re,multiply:nr,subtractScalar:wo,typed:ne,unaryMinus:lu}),o3e=nY({matrix:Re,number:ou,subtract:en,typed:ne}),l3e=JMe({abs:Oi,addScalar:Qn,deepEqual:b_,divideScalar:Wr,multiplyScalar:gn,sqrt:rl,subtractScalar:wo,typed:ne}),w_=Zxe({DenseMatrix:Tt,SparseMatrix:Zn,concat:Qt,divideScalar:Wr,equalScalar:Rt,matrix:Re,typed:ne}),u3e=M_e({compareText:UY,isZero:xo,typed:ne}),jY=lAe({larger:As,smaller:Es}),c3e=WEe({abs:Oi,addScalar:Qn,divideScalar:Wr,isPositive:Sp,multiplyScalar:gn,smaller:Es,sqrt:rl,typed:ne}),qY=rAe({DenseMatrix:Tt,smaller:Es}),es=sAe({ImmutableDenseMatrix:qY,getMatrixDataType:cO}),h3e=tIe({abs:Oi,add:Lt,addScalar:Qn,config:Ae,divideScalar:Wr,equalScalar:Rt,flatten:Ap,isNumeric:Ep,isZero:xo,matrix:Re,multiply:nr,multiplyScalar:gn,smaller:Es,subtract:en,typed:ne}),d3e=_1e({BigNumber:ke,add:Lt,config:Ae,equal:as,isInteger:_s,mod:VY,smaller:Es,typed:ne,xgcd:RY}),vN=U_e({DenseMatrix:Tt,SparseMatrix:Zn,concat:Qt,config:Ae,matrix:Re,typed:ne}),wO=Hxe({Complex:mr,config:Ae,divideScalar:Wr,typeOf:pN,typed:ne}),f3e=s_e({DenseMatrix:Tt,divideScalar:Wr,equalScalar:Rt,matrix:Re,multiplyScalar:gn,subtractScalar:wo,typed:ne}),m3e=Vye({flatten:Ap,matrix:Re,size:Jn,typed:ne}),p3e=dY({config:Ae,isNaN:cc,numeric:fo,smaller:Es,typed:ne}),g3e=Xxe({Complex:mr,config:Ae,divideScalar:Wr,typed:ne}),yN=X_e({compare:Tp,isNaN:cc,isNumeric:Ep,typed:ne}),v3e=p_e({DenseMatrix:Tt,concat:Qt,equalScalar:Rt,matrix:Re,typed:ne,zeros:Ii}),HY=MTe({SparseMatrix:Zn,abs:Oi,add:Lt,divideScalar:Wr,larger:As,largerEq:vN,multiply:nr,subtract:en,transpose:v_,typed:ne}),GY=hAe({FibonacciHeap:jY,addScalar:Qn,equalScalar:Rt}),Fa=oY({add:Lt,matrix:Re,typed:ne,zeros:Ii}),xO=yY({add:Lt,config:Ae,numeric:fo,typed:ne}),y3e=eSe({add:Lt,matrix:Re,typed:ne}),WY=o_e({DenseMatrix:Tt,divideScalar:Wr,equalScalar:Rt,matrix:Re,multiplyScalar:gn,subtractScalar:wo,typed:ne}),b3e=PPe({Complex:mr,add:Lt,multiply:nr,number:ou,typed:ne}),_O=mbe({DenseMatrix:Tt,config:Ae,equalScalar:Rt,matrix:Re,round:ay,typed:ne,zeros:Ii}),uu=__e({compare:Tp,typed:ne}),w3e=bY({add:Lt,typed:ne,unaryPlus:yO}),KY=Abe({Complex:mr,DenseMatrix:Tt,ceil:_O,equalScalar:Rt,floor:LY,matrix:Re,typed:ne,zeros:Ii}),XY=rSe({Index:es,typed:ne}),Cp=MMe({abs:Oi,addScalar:Qn,det:zY,divideScalar:Wr,identity:Wd,matrix:Re,multiply:nr,typed:ne,unaryMinus:lu}),x3e=Wxe({Complex:mr,config:Ae,divideScalar:Wr,log:wO,typed:ne}),YY=iTe({DenseMatrix:Tt,Spa:GY,SparseMatrix:Zn,abs:Oi,addScalar:Qn,divideScalar:Wr,equalScalar:Rt,larger:As,matrix:Re,multiplyScalar:gn,subtractScalar:wo,typed:ne,unaryMinus:lu}),_3e=PMe({Complex:mr,add:Lt,ctranspose:mO,deepEqual:b_,divideScalar:Wr,dot:gN,dotDivide:w_,equal:as,inv:Cp,matrix:Re,multiply:nr,typed:ne}),nl=Vxe({Complex:mr,config:Ae,fraction:y_,identity:Wd,inv:Cp,matrix:Re,multiply:nr,number:ou,typed:ne}),A3e=SEe({DenseMatrix:Tt,Index:es,compareNatural:uu,size:Jn,subset:Fa,typed:ne}),E3e=DEe({DenseMatrix:Tt,Index:es,compareNatural:uu,size:Jn,subset:Fa,typed:ne}),S3e=REe({Index:es,compareNatural:uu,size:Jn,subset:Fa,typed:ne}),T3e=BEe({Index:es,compareNatural:uu,size:Jn,subset:Fa,typed:ne}),F0=F_e({DenseMatrix:Tt,SparseMatrix:Zn,concat:Qt,config:Ae,matrix:Re,typed:ne}),C3e=Q_e({compare:Tp,compareNatural:uu,matrix:Re,typed:ne}),N3e=UMe({abs:Oi,add:Lt,identity:Wd,inv:Cp,map:Hd,max:gO,multiply:nr,size:Jn,sqrt:rl,subtract:en,typed:ne}),D3e=G_e({DenseMatrix:Tt,SparseMatrix:Zn,concat:Qt,config:Ae,equalScalar:Rt,matrix:Re,typed:ne}),M3e=cY({concat:Qt,equalScalar:Rt,matrix:Re,not:kT,typed:ne,zeros:Ii}),Xn=YMe({divideScalar:Wr,equalScalar:Rt,inv:Cp,matrix:Re,multiply:nr,typed:ne}),I3e=$Me({abs:Oi,add:Lt,identity:Wd,inv:Cp,multiply:nr,typed:ne}),QY=Jwe({addScalar:Qn,ceil:_O,conj:_p,divideScalar:Wr,dotDivide:w_,exp:IY,i:TY,log2:dO,matrix:Re,multiplyScalar:gn,pow:nl,tau:NY,typed:ne}),P3e=kPe({Complex:mr,add:Lt,divide:Xn,matrix:Re,multiply:nr,typed:ne}),AO=xIe({BigNumber:ke,Complex:mr,config:Ae,multiplyScalar:gn,pow:nl,typed:ne}),R3e=exe({conj:_p,dotDivide:w_,fft:QY,typed:ne}),k3e=CIe({divide:Xn,dotDivide:w_,isNumeric:Ep,log:wO,map:Hd,matrix:Re,multiply:nr,sum:xO,typed:ne}),JY=PTe({DenseMatrix:Tt,lsolve:$Y,lup:YY,matrix:Re,slu:HY,typed:ne,usolve:bO}),ZY=wY({add:Lt,divide:Xn,typed:ne}),eQ=aIe({add:Lt,compare:Tp,divide:Xn,partitionSelect:yN,typed:ne}),F3e=kTe({add:Lt,cbrt:BY,divide:Xn,equalScalar:Rt,im:hO,isZero:xo,multiply:nr,re:fO,sqrt:rl,subtract:en,typeOf:pN,typed:ne,unaryMinus:lu}),O3e=_Y({bignumber:Xs,add:Lt,compare:Tp,divide:Xn,isInteger:_s,larger:As,mapSlices:$1,multiply:nr,partitionSelect:yN,smaller:Es,smallerEq:F0,subtract:en,typed:ne}),O0=sY({bignumber:Xs,matrix:Re,add:Lt,config:Ae,equal:as,isPositive:Sp,isZero:xo,larger:As,largerEq:vN,smaller:Es,smallerEq:F0,typed:ne}),B3e=aY({Index:es,matrix:Re,range:O0,typed:ne}),tQ=CEe({DenseMatrix:Tt,Index:es,compareNatural:uu,size:Jn,subset:Fa,typed:ne}),L3e=FEe({Index:es,compareNatural:uu,size:Jn,subset:Fa,typed:ne}),rQ=UEe({Index:es,concat:Qt,setDifference:tQ,size:Jn,subset:Fa,typed:ne}),$3e=axe({abs:Oi,add:Lt,bignumber:Xs,divide:Xn,isNegative:Gd,isPositive:Sp,larger:As,map:Hd,matrix:Re,max:gO,multiply:nr,smaller:Es,subtract:en,typed:ne,unaryMinus:lu}),dt=yAe({BigNumber:ke,Complex:mr,Fraction:qd,abs:Oi,addScalar:Qn,config:Ae,divideScalar:Wr,equal:as,fix:KY,format:p_,isNumeric:Ep,multiplyScalar:gn,number:ou,pow:nl,round:ay,subtractScalar:wo}),V3e=hRe({BigNumber:ke,Unit:dt,config:Ae}),U3e=FRe({BigNumber:ke,Unit:dt,config:Ae}),z3e=pRe({BigNumber:ke,Unit:dt,config:Ae}),j3e=BRe({BigNumber:ke,Unit:dt,config:Ae}),nQ=ZX({Index:es,matrix:Re,range:O0,typed:ne}),q3e=gRe({BigNumber:ke,Unit:dt,config:Ae}),H3e=dRe({BigNumber:ke,Unit:dt,config:Ae}),G3e=EAe({Unit:dt,typed:ne}),W3e=NRe({BigNumber:ke,Unit:dt,config:Ae}),iQ=BMe({abs:Oi,add:Lt,addScalar:Qn,atan:MY,bignumber:Xs,column:nQ,complex:Wm,config:Ae,cos:uO,diag:kY,divideScalar:Wr,dot:gN,equal:as,flatten:Ap,im:hO,inv:Cp,larger:As,matrix:Re,matrixFromColumns:pO,multiply:nr,multiplyScalar:gn,number:ou,qr:vO,re:fO,reshape:OY,sin:mN,size:Jn,smaller:Es,sqrt:rl,subtract:en,typed:ne,usolve:bO,usolveAll:WY}),K3e=ARe({BigNumber:ke,Unit:dt,config:Ae}),x_=SIe({gamma:AO,typed:ne}),X3e=ERe({BigNumber:ke,Unit:dt,config:Ae}),Y3e=URe({BigNumber:ke,Unit:dt,config:Ae}),Q3e=YRe({BigNumber:ke,Unit:dt,config:Ae}),J3e=wRe({BigNumber:ke,Unit:dt,config:Ae}),Z3e=VRe({BigNumber:ke,Unit:dt,config:Ae}),eBe=lIe({abs:Oi,map:Hd,median:eQ,subtract:en,typed:ne}),tBe=yRe({BigNumber:ke,Unit:dt,config:Ae}),rBe=KRe({BigNumber:ke,Unit:dt,config:Ae}),nBe=zRe({BigNumber:ke,Unit:dt,config:Ae}),iBe=DIe({add:Lt,divide:Xn,factorial:x_,isInteger:_s,isPositive:Sp,multiply:nr,typed:ne}),EO=XEe({abs:Oi,add:Lt,conj:_p,ctranspose:mO,eigs:iQ,equalScalar:Rt,larger:As,matrix:Re,multiply:nr,pow:nl,smaller:Es,sqrt:rl,typed:ne}),sBe=IIe({factorial:x_,typed:ne}),aBe=oRe({BigNumber:ke,Unit:dt,config:Ae}),oBe=JRe({BigNumber:ke,Unit:dt,config:Ae}),lBe=ZRe({BigNumber:ke,Unit:dt,config:Ae}),uBe=lRe({BigNumber:ke,Unit:dt,config:Ae}),sQ=Fwe({BigNumber:ke,DenseMatrix:Tt,SparseMatrix:Zn,addScalar:Qn,config:Ae,cos:uO,matrix:Re,multiplyScalar:gn,norm:EO,sin:mN,typed:ne,unaryMinus:lu}),cBe=IRe({BigNumber:ke,Unit:dt,config:Ae}),hBe=HRe({BigNumber:ke,Unit:dt,config:Ae}),dBe=$Ee({compareNatural:uu,typed:ne}),fBe=sRe({BigNumber:ke,Unit:dt,config:Ae}),mBe=GRe({BigNumber:ke,Unit:dt,config:Ae}),pBe=PRe({BigNumber:ke,Unit:dt,config:Ae}),SO=xY({add:Lt,divide:Xn,isNaN:cc,mapSlices:$1,multiply:nr,subtract:en,typed:ne}),gBe=mxe({BigNumber:ke,Complex:mr,add:Lt,config:Ae,divide:Xn,equal:as,factorial:x_,gamma:AO,isBounded:g_,isNegative:Gd,multiply:nr,pi:GP,pow:nl,sin:mN,smallerEq:F0,subtract:en,typed:ne}),vBe=ORe({BigNumber:ke,Unit:dt,config:Ae}),yBe=xRe({BigNumber:ke,Unit:dt,config:Ae}),bBe=fIe({add:Lt,divide:Xn,matrix:Re,mean:ZY,multiply:nr,pow:nl,sqrt:rl,subtract:en,sum:xO,typed:ne}),wBe=Qxe({DenseMatrix:Tt,SparseMatrix:Zn,concat:Qt,equalScalar:Rt,matrix:Re,pow:nl,typed:ne}),xBe=mRe({BigNumber:ke,Unit:dt,config:Ae}),_Be=LRe({BigNumber:ke,Unit:dt,config:Ae}),ABe=TRe({BigNumber:ke,Unit:dt,config:Ae}),EBe=vRe({BigNumber:ke,Unit:dt,config:Ae}),SBe=uRe({BigNumber:ke,Unit:dt,config:Ae}),TBe=XRe({BigNumber:ke,Unit:dt,config:Ae}),CBe=DRe({BigNumber:ke,Unit:dt,config:Ae}),NBe=eke({BigNumber:ke,Unit:dt,config:Ae}),DBe=tke({BigNumber:ke,Unit:dt,config:Ae}),MBe=MRe({BigNumber:ke,Unit:dt,config:Ae}),aQ=IEe({DenseMatrix:Tt,Index:es,compareNatural:uu,size:Jn,subset:Fa,typed:ne}),IBe=AY({map:Hd,sqrt:rl,typed:ne,variance:SO}),oQ=nPe({bignumber:Xs,addScalar:Qn,combinations:fN,divideScalar:Wr,factorial:x_,isInteger:_s,isNegative:Gd,larger:As,multiplyScalar:gn,number:ou,pow:nl,subtractScalar:wo,typed:ne}),PBe=wAe({Unit:dt,typed:ne}),RBe=sPe({addScalar:Qn,isInteger:_s,isNegative:Gd,stirlingS2:oQ,typed:ne}),kBe=cRe({BigNumber:ke,Unit:dt,config:Ae}),FBe=$Re({BigNumber:ke,Unit:dt,config:Ae}),OBe=bRe({BigNumber:ke,Unit:dt,config:Ae}),BBe=QRe({BigNumber:ke,Unit:dt,config:Ae}),LBe=Rwe({multiply:nr,rotationMatrix:sQ,typed:ne}),$Be=jEe({Index:es,concat:Qt,setIntersect:aQ,setSymDifference:rQ,size:Jn,subset:Fa,typed:ne}),VBe=WRe({BigNumber:ke,Unit:dt,config:Ae}),UBe=_Re({BigNumber:ke,Unit:dt,config:Ae}),zBe=jRe({BigNumber:ke,Unit:dt,config:Ae}),lQ=HMe({identity:Wd,matrix:Re,multiply:nr,norm:EO,qr:vO,subtract:en,typed:ne}),jBe=fRe({BigNumber:ke,Unit:dt,config:Ae}),qBe=aRe({BigNumber:ke,Unit:dt,config:Ae}),HBe=CRe({BigNumber:ke,Unit:dt,config:Ae}),uQ=jMe({abs:Oi,add:Lt,concat:Qt,identity:Wd,index:XY,lusolve:JY,matrix:Re,matrixFromColumns:pO,multiply:nr,range:O0,schur:lQ,subset:Fa,subtract:en,transpose:v_,typed:ne}),GBe=WMe({matrix:Re,multiply:nr,sylvester:uQ,transpose:v_,typed:ne}),oy={},__={},cQ={},os=sSe({mathWithTransform:__}),ly=ISe({Node:os}),Pc=RSe({Node:os}),Np=FSe({Node:os}),hQ=$Se({Node:os}),uy=uSe({Node:os}),dQ=pSe({Node:os,ResultSet:CY}),fQ=vSe({Node:os}),mQ=BSe({Node:os}),WBe=BPe({classes:cQ}),TO=VTe({math:oy,typed:ne}),pQ=CSe({Node:os,typed:ne}),KBe=TMe({Chain:TO,typed:ne}),Kd=SSe({Node:os,isBounded:g_}),cy=DSe({Node:os,size:Jn}),hy=oSe({Node:os,subset:Fa}),gQ=fSe({matrix:Re,Node:os,subset:Fa}),Xd=zSe({Unit:dt,Node:os,math:oy}),Yd=qSe({Node:os,SymbolNode:Xd,math:oy}),il=GSe({AccessorNode:hy,ArrayNode:uy,AssignmentNode:gQ,BlockNode:dQ,ConditionalNode:fQ,ConstantNode:Kd,FunctionAssignmentNode:pQ,FunctionNode:Yd,IndexNode:cy,ObjectNode:ly,OperatorNode:Pc,ParenthesisNode:Np,RangeNode:mQ,RelationalNode:hQ,SymbolNode:Xd,config:Ae,numeric:fo,typed:ne}),vQ=EPe({ConstantNode:Kd,FunctionNode:Yd,OperatorNode:Pc,ParenthesisNode:Np,parse:il,typed:ne}),CO=bPe({bignumber:Xs,fraction:y_,AccessorNode:hy,ArrayNode:uy,ConstantNode:Kd,FunctionNode:Yd,IndexNode:cy,ObjectNode:ly,OperatorNode:Pc,SymbolNode:Xd,config:Ae,isBounded:g_,mathWithTransform:__,matrix:Re,typed:ne}),XBe=KSe({parse:il,typed:ne}),YBe=hPe({parse:il,typed:ne}),NO=xPe({AccessorNode:hy,ArrayNode:uy,ConstantNode:Kd,FunctionNode:Yd,IndexNode:cy,ObjectNode:ly,OperatorNode:Pc,ParenthesisNode:Np,SymbolNode:Xd,add:Lt,divide:Xn,equal:as,isZero:xo,multiply:nr,parse:il,pow:nl,subtract:en,typed:ne}),A_=YSe({parse:il,typed:ne}),yQ=BTe({evaluate:A_}),bQ=ZSe({evaluate:A_,parse:il}),QBe=rTe({Parser:bQ,typed:ne}),bN=gPe({AccessorNode:hy,ArrayNode:uy,ConstantNode:Kd,FunctionNode:Yd,IndexNode:cy,ObjectNode:ly,OperatorNode:Pc,ParenthesisNode:Np,SymbolNode:Xd,equal:as,parse:il,replacer:DY,resolve:vQ,simplifyConstant:CO,simplifyCore:NO,typed:ne}),JBe=TPe({OperatorNode:Pc,parse:il,simplify:bN,typed:ne}),wQ=NPe({ConstantNode:Kd,FunctionNode:Yd,OperatorNode:Pc,ParenthesisNode:Np,SymbolNode:Xd,config:Ae,equal:as,isZero:xo,numeric:fo,parse:il,simplify:bN,typed:ne}),ZBe=EMe({Help:yQ,mathWithTransform:__,typed:ne}),e4e=MPe({bignumber:Xs,fraction:y_,AccessorNode:hy,ArrayNode:uy,ConstantNode:Kd,FunctionNode:Yd,IndexNode:cy,ObjectNode:ly,OperatorNode:Pc,ParenthesisNode:Np,SymbolNode:Xd,add:Lt,config:Ae,divide:Xn,equal:as,isZero:xo,mathWithTransform:__,matrix:Re,multiply:nr,parse:il,pow:nl,simplify:bN,simplifyConstant:CO,simplifyCore:NO,subtract:en,typed:ne});An(oy,{e:TU,false:AFe,fineStructure:EFe,i:TY,Infinity:SFe,LN10:TFe,LOG10E:CFe,NaN:NFe,null:DFe,phi:MFe,SQRT1_2:PFe,sackurTetrode:RFe,tau:NY,true:kFe,E:TU,version:FFe,efimovFactor:OFe,LN2:BFe,pi:GP,replacer:DY,reviver:WBe,SQRT2:LFe,typed:ne,PI:GP,weakMixingAngle:$Fe,abs:Oi,acos:VFe,acot:UFe,acsc:zFe,addScalar:Qn,arg:jFe,asech:qFe,asinh:HFe,atan:MY,atanh:GFe,bigint:WFe,bitNot:KFe,boolean:XFe,clone:YFe,combinations:fN,complex:Wm,conj:_p,cos:uO,cot:QFe,csc:JFe,cube:ZFe,equalScalar:Rt,erf:eOe,exp:IY,expm1:tOe,filter:rOe,flatten:Ap,forEach:nOe,format:p_,getMatrixDataType:cO,hex:iOe,im:hO,isBounded:g_,isNaN:cc,isNumeric:Ep,isPrime:sOe,LOG2E:aOe,lgamma:oOe,log10:lOe,log2:dO,map:Hd,mode:uOe,multiplyScalar:gn,not:kT,number:ou,oct:cOe,pickRandom:hOe,print:dOe,random:fOe,re:fO,sec:mOe,sign:PY,sin:mN,size:Jn,splitUnit:pOe,square:gOe,string:vOe,subtractScalar:wo,tan:yOe,toBest:bOe,typeOf:pN,acosh:wOe,acsch:xOe,asec:_Oe,bignumber:Xs,chain:KBe,combinationsWithRep:AOe,cosh:EOe,csch:SOe,dot:gN,hasNumericValue:TOe,isFinite:COe,isNegative:Gd,isZero:xo,matrix:Re,matrixFromFunction:NOe,multiply:nr,ones:DOe,randomInt:MOe,resize:IOe,sech:POe,sinh:ROe,sparse:kOe,sqrt:rl,squeeze:FOe,tanh:OOe,transpose:v_,xgcd:RY,zeros:Ii,acoth:BOe,asin:LOe,bin:$Oe,coth:VOe,ctranspose:mO,diag:kY,equal:as,fraction:y_,identity:Wd,isInteger:_s,kron:UOe,mapSlices:$1,matrixFromColumns:pO,numeric:fo,prod:FY,reshape:OY,round:ay,unaryMinus:lu,bernoulli:zOe,cbrt:BY,concat:Qt,count:jOe,deepEqual:b_,divideScalar:Wr,dotMultiply:qOe,floor:LY,gcd:HOe,isPositive:Sp,larger:As,lcm:GOe,leftShift:WOe,lsolve:$Y,max:gO,mod:VY,nthRoot:KOe,nullish:XOe,or:YOe,qr:vO,rightArithShift:QOe,smaller:Es,subtract:en,to:JOe,unaryPlus:yO,usolve:bO,xor:ZOe,add:Lt,atan2:e3e,bitAnd:t3e,bitOr:r3e,bitXor:n3e,catalan:i3e,compare:Tp,compareText:UY,composition:s3e,cross:a3e,det:zY,diff:o3e,distance:l3e,dotDivide:w_,equalText:u3e,hypot:c3e,intersect:h3e,invmod:d3e,largerEq:vN,log:wO,lsolveAll:f3e,matrixFromRows:m3e,min:p3e,nthRoots:g3e,partitionSelect:yN,rightLogShift:v3e,slu:HY,subset:Fa,sum:xO,trace:y3e,usolveAll:WY,zpk2tf:b3e,ceil:_O,compareNatural:uu,cumsum:w3e,fix:KY,index:XY,inv:Cp,log1p:x3e,lup:YY,pinv:_3e,pow:nl,setCartesian:A3e,setDistinct:E3e,setIsSubset:S3e,setPowerset:T3e,smallerEq:F0,sort:C3e,sqrtm:N3e,unequal:D3e,and:M3e,divide:Xn,expm:I3e,fft:QY,freqz:P3e,gamma:AO,ifft:R3e,kldivergence:k3e,lusolve:JY,mean:ZY,median:eQ,polynomialRoot:F3e,quantileSeq:O3e,range:O0,row:B3e,setDifference:tQ,setMultiplicity:L3e,setSymDifference:rQ,solveODE:$3e,vacuumImpedance:V3e,atomicMass:U3e,bohrMagneton:z3e,boltzmann:j3e,column:nQ,conductanceQuantum:q3e,coulomb:H3e,createUnit:G3e,deuteronMass:W3e,eigs:iQ,electronMass:K3e,factorial:x_,fermiCoupling:X3e,gasConstant:Y3e,gravity:Q3e,klitzing:J3e,loschmidt:Z3e,mad:eBe,magneticFluxQuantum:tBe,molarMass:rBe,molarPlanckConstant:nBe,multinomial:iBe,norm:EO,permutations:sBe,planckConstant:aBe,planckMass:oBe,planckTime:lBe,reducedPlanckConstant:uBe,rotationMatrix:sQ,rydberg:cBe,secondRadiation:hBe,setSize:dBe,speedOfLight:fBe,stefanBoltzmann:mBe,thomsonCrossSection:pBe,variance:SO,zeta:gBe,avogadro:vBe,bohrRadius:yBe,corr:bBe,dotPow:wBe,elementaryCharge:xBe,faraday:_Be,hartreeEnergy:ABe,inverseConductanceQuantum:EBe,magneticConstant:SBe,molarMassC12:TBe,neutronMass:CBe,parse:il,planckCharge:NBe,planckTemperature:DBe,quantumOfCirculation:MBe,resolve:vQ,setIntersect:aQ,simplifyConstant:CO,std:IBe,stirlingS2:oQ,unit:PBe,bellNumbers:RBe,compile:XBe,electricConstant:kBe,firstRadiation:FBe,leafCount:YBe,nuclearMagneton:OBe,planckLength:BBe,rotate:LBe,setUnion:$Be,simplifyCore:NO,wienDisplacement:VBe,classicalElectronRadius:UBe,evaluate:A_,molarVolume:zBe,schur:lQ,coulombConstant:jBe,gravitationConstant:qBe,parser:QBe,simplify:bN,symbolicEqual:JBe,derivative:wQ,protonMass:HBe,sylvester:uQ,help:ZBe,rationalize:e4e,lyap:GBe,config:Ae});An(__,oy,{map:_ke({typed:ne}),filter:fke({typed:ne}),forEach:gke({typed:ne}),mapSlices:ske({isInteger:_s,typed:ne}),and:cFe({add:Lt,concat:Qt,equalScalar:Rt,matrix:Re,not:kT,typed:ne,zeros:Ii}),cumsum:nFe({add:Lt,typed:ne,unaryPlus:yO}),nullish:gFe({deepEqual:b_,flatten:Ap,matrix:Re,size:Jn,typed:ne}),print:oFe({add:Lt,matrix:Re,typed:ne,zeros:Ii}),bitAnd:bFe({add:Lt,concat:Qt,equalScalar:Rt,matrix:Re,not:kT,typed:ne,zeros:Ii}),concat:Hke({isInteger:_s,matrix:Re,typed:ne}),diff:Wke({bignumber:Xs,matrix:Re,number:ou,subtract:en,typed:ne}),max:Cke({config:Ae,isNaN:cc,larger:As,numeric:fo,typed:ne}),min:Rke({config:Ae,isNaN:cc,numeric:fo,smaller:Es,typed:ne}),or:fFe({DenseMatrix:Tt,concat:Qt,equalScalar:Rt,matrix:Re,typed:ne}),subset:zke({add:Lt,matrix:Re,typed:ne,zeros:Ii}),bitOr:_Fe({DenseMatrix:Tt,concat:Qt,equalScalar:Rt,matrix:Re,typed:ne}),sum:Jke({add:Lt,config:Ae,numeric:fo,typed:ne}),variance:sFe({add:Lt,divide:Xn,isNaN:cc,mapSlices:$1,multiply:nr,subtract:en,typed:ne}),index:bke({Index:es,getMatrixDataType:cO}),quantileSeq:tFe({add:Lt,bignumber:Xs,compare:Tp,divide:Xn,isInteger:_s,larger:As,mapSlices:$1,multiply:nr,partitionSelect:yN,smaller:Es,smallerEq:F0,subtract:en,typed:ne}),range:Oke({bignumber:Xs,matrix:Re,add:Lt,config:Ae,equal:as,isPositive:Sp,isZero:xo,larger:As,largerEq:vN,smaller:Es,smallerEq:F0,typed:ne}),column:lke({Index:es,matrix:Re,range:O0,typed:ne}),row:$ke({Index:es,matrix:Re,range:O0,typed:ne}),mean:Mke({add:Lt,divide:Xn,typed:ne}),std:Yke({map:Hd,sqrt:rl,typed:ne,variance:SO})});An(cQ,{BigNumber:ke,Complex:mr,Fraction:qd,Matrix:dN,Node:os,ObjectNode:ly,OperatorNode:Pc,ParenthesisNode:Np,Range:IFe,RelationalNode:hQ,ResultSet:CY,ArrayNode:uy,BlockNode:dQ,ConditionalNode:fQ,DenseMatrix:Tt,RangeNode:mQ,Chain:TO,FunctionAssignmentNode:pQ,SparseMatrix:Zn,ConstantNode:Kd,IndexNode:cy,FibonacciHeap:jY,ImmutableDenseMatrix:qY,Index:es,Spa:GY,AccessorNode:hy,AssignmentNode:gQ,Unit:dt,SymbolNode:Xd,FunctionNode:Yd,Help:yQ,Parser:bQ});TO.createProxy(oy);const t4e=[["7","8","9","/"],["4","5","6","*"],["1","2","3","-"],["0",".","=","+"],["(",")","ANS","DEL"]],r4e=[["sin(","cos(","tan(","asin(","acos("],["log(","ln(","exp(","sqrt(","^"],["pi","e","i","abs(","pow("]],n4e=[{label:"det 2x2",snippet:"det([[3,-1],[2,5]])"},{label:"dot ",snippet:"dot([1,2,3],[4,5,6])"},{label:"cross ",snippet:"cross([1,0,0],[0,1,0])"},{label:"|z|",snippet:"abs(3 + 4i)"},{label:"exp(-jw t)",snippet:"exp(-i*2*pi*60*t)"},{label:"sqrt(3)",snippet:"sqrt(3)"}],i4e=[{id:"standard",label:" ",description:"  + ",badge:"Standard"},{id:"roots",label:" ",description:"  ",badge:" "},{id:"derivative",label:" ",description:"/ ",badge:""},{id:"integral",label:" ",description:"Simpson Rule",badge:""},{id:"guide",label:" ",description:"  & ",badge:""}],s4e=(r,e)=>r.reduce((t,n)=>Lt(nr(t,e),n)),CU=r=>{if(typeof r=="number")return r.toFixed(6).replace(/\.0+$/,"");const e=r.re||0,t=r.im||0,n=Math.abs(e)<1e-9?"0":e.toFixed(6).replace(/\.0+$/,""),i=Math.abs(t)<1e-9?"0":t.toFixed(6).replace(/\.0+$/,"");if(Math.abs(t)<1e-9)return n;const s=t>=0?"+":"-";return`${n} ${s} ${Math.abs(i)}i`},a4e=r=>{const e=r.map(o=>Wm(o,0)),t=e[0];if(as(t,0))throw new Error("  0   .");const n=e.map(o=>Xn(o,t)),i=n.length-1,s=1+Math.max(...n.slice(1).map(o=>Oi(o))),a=Array.from({length:i},(o,l)=>Wm({r:s,phi:2*Math.PI*l/i}));for(let o=0;o<80;o++){let l=0;for(let u=0;u<a.length;u++){let c=s4e(n,a[u]),h=Wm(1,0);for(let f=0;f<a.length;f++)u!==f&&(h=nr(h,en(a[u],a[f])));const d=Xn(c,h);a[u]=en(a[u],d),l=Math.max(l,Oi(d))}if(l<1e-9)break}return a},o4e=(r,e,t,n,i=600)=>{i%2!==0&&(i+=1);const s={},a=(n-t)/i;let o=0;for(let l=0;l<=i;l++){const u=t+l*a;s[e]=u;const c=A_(r,s);l===0||l===i?o+=c:l%2===0?o+=2*c:o+=4*c}return a/3*o};function l4e(){const{isDark:r}=Qs(),[e,t]=se.useState(""),[n,i]=se.useState(""),[s,a]=se.useState([]),[o,l]=se.useState("1,-3,2"),[u,c]=se.useState([]),[h,d]=se.useState(""),[f,p]=se.useState("x^3 + 2*x"),[g,b]=se.useState("x"),[v,w]=se.useState(""),[y,A]=se.useState("sin(x)"),[x,_]=se.useState("x"),[S,E]=se.useState({from:"0",to:"3.14159"}),[C,N]=se.useState(""),[D,M]=se.useState(""),[I,V]=se.useState("standard"),K=r?"bg-gray-900 border-gray-800 text-white":"bg-white border-gray-200 text-gray-900",F=r?"bg-gray-800 hover:bg-gray-700 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-900",U=r?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white",j=R=>{if(R==="DEL"){t(Y=>Y.slice(0,-1));return}if(R==="="){G();return}if(R==="ANS"){s.length>0&&t(Y=>Y+s[s.length-1].result);return}t(Y=>Y+R)},G=()=>{if(e.trim())try{const R=e.replace(//g,"pi").replace(//g,"sqrt");let Y=A_(R);typeof Y=="number"?Y=Y.toPrecision(10).replace(/\.0+$/,""):pN(Y)==="Complex"&&(Y=CU(Y)),i(String(Y)),a(H=>[...H.slice(-9),{expression:e,result:String(Y)}])}catch(R){i(`: ${R.message}`)}},ee=()=>{d("");try{const R=o.split(",").map(H=>H.trim()).filter(H=>H.length>0).map(H=>Number(H));if(R.length<2)throw new Error(" 2  . (: 1,-3,2)");if(R.some(H=>Number.isNaN(H)))throw new Error("   .");const Y=a4e(R);c(Y.map(H=>CU(H)))}catch(R){d(R.message),c([])}},ue=()=>{try{const R=wQ(f,g).toString();w(`d/d${g} = ${R}`)}catch(R){w(` : ${R.message}`)}},te=()=>{M("");try{const R=Number(S.from),Y=Number(S.to);if(Number.isNaN(R)||Number.isNaN(Y))throw new Error("  .");if(R===Y)throw new Error("  0.");const H=o4e(y,x,R,Y);N(` ${y} d${x} = ${Number(H).toPrecision(8)}`)}catch(R){M(R.message),N("")}};return P.jsxs("div",{className:"space-y-10",children:[P.jsxs(Ye.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.5},children:[P.jsx("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-indigo-500 to-blue-500 dark:from-indigo-300 dark:to-blue-300 bg-clip-text text-transparent",children:"  "}),P.jsx("p",{className:`text-sm sm:text-base ${r?"text-gray-300":"text-gray-600"}`,children:"  ,   , /      ."}),P.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4 mt-6",children:[{label:" ",value:"  + "},{label:" ",value:" 10 Durand-Kerner"},{label:"/ ",value:"math.js  + Simpson"},{label:"  ",value:"i, det, dot/cross "}].map(R=>P.jsxs("div",{className:`p-4 rounded-2xl border text-sm ${r?"bg-gray-900/70 border-gray-700 text-gray-200":"bg-white border-gray-200 text-gray-700"}`,children:[P.jsx("p",{className:"font-semibold text-xs uppercase tracking-wide text-blue-500",children:R.label}),P.jsx("p",{className:"mt-2 text-base font-medium",children:R.value})]},R.label))})]}),P.jsx("div",{className:"space-y-6",children:P.jsxs(Ye.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},className:`p-6 rounded-3xl border shadow-sm ${K}`,children:[P.jsx("div",{className:"flex flex-wrap gap-3",children:i4e.map(R=>P.jsxs("button",{onClick:()=>V(R.id),className:`flex-1 min-w-[140px] p-4 rounded-2xl border text-left transition ${I===R.id?r?"bg-blue-900/40 border-blue-500 text-white":"bg-blue-50 border-blue-400 text-blue-900":r?"bg-gray-800 border-gray-700 text-gray-200":"bg-white border-gray-200 text-gray-700"}`,children:[P.jsx("p",{className:"text-xs uppercase tracking-wide text-blue-400",children:R.badge}),P.jsx("p",{className:"text-lg font-semibold mt-1",children:R.label}),P.jsx("p",{className:"text-sm mt-1 opacity-80",children:R.description})]},R.id))}),P.jsxs("div",{className:"mt-8",children:[I==="standard"&&P.jsxs("div",{className:"space-y-6",children:[P.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-6 ${r?"bg-gradient-to-br from-gray-900 via-slate-900 to-gray-800":"bg-gradient-to-br from-white via-blue-50 to-blue-100 border border-blue-100"}`,children:[P.jsx("span",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-blue-300",children:"Expression"}),P.jsx("input",{className:`w-full bg-transparent text-right text-3xl font-semibold mt-3 focus:outline-none ${r?"text-white placeholder:text-gray-500":"text-gray-900 placeholder:text-gray-500"}`,value:e,onChange:R=>t(R.target.value),placeholder:"  (: (3+4i)*(2-i) + sin(pi/3))"}),n&&P.jsxs("p",{className:`text-right text-lg font-mono mt-2 ${n.startsWith("")?"text-red-300":"text-emerald-300"}`,children:["= ",n]}),P.jsx("button",{onClick:G,className:`mt-4 px-4 py-2 rounded-full text-sm font-semibold ${U}`,children:" / ENTER"})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx("p",{className:`text-xs font-semibold tracking-wide ${r?"text-gray-400":"text-gray-500"}`,children:"   "}),P.jsx("div",{className:"flex flex-wrap gap-2",children:n4e.map(R=>P.jsx("button",{onClick:()=>j(R.snippet),className:`px-3 py-1.5 rounded-full text-xs font-medium border ${r?"border-gray-700 text-gray-200 hover:bg-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:R.label},R.label))})]}),P.jsxs("div",{className:"grid gap-5 md:grid-cols-2",children:[P.jsxs("div",{className:`p-4 rounded-2xl border ${r?"border-gray-700 bg-gray-900/40":"border-gray-200 bg-white"}`,children:[P.jsxs("div",{className:"flex items-center justify-between mb-3",children:[P.jsx("h3",{className:"text-lg font-semibold",children:" "}),P.jsx("span",{className:"text-xs text-blue-500",children:"   "})]}),P.jsx("div",{className:"grid grid-cols-4 gap-3",children:t4e.map((R,Y)=>P.jsx("div",{className:"contents",children:R.map(H=>P.jsx("button",{onClick:()=>j(H==="pi"?"":H),className:`py-3 rounded-xl font-semibold text-lg transition ${["/","*","-","+","=","ANS"].includes(H)?U:F}`,children:H},H))},`basic-${Y}`))})]}),P.jsxs("div",{className:`p-4 rounded-2xl border ${r?"border-gray-700 bg-gray-900/40":"border-gray-200 bg-white"}`,children:[P.jsxs("div",{className:"flex items-center justify-between mb-3",children:[P.jsx("h3",{className:"text-lg font-semibold",children:" "}),P.jsx("span",{className:"text-xs text-blue-500",children:"    "})]}),P.jsx("div",{className:"grid grid-cols-5 gap-3",children:r4e.map((R,Y)=>P.jsx("div",{className:"contents",children:R.map(H=>P.jsx("button",{onClick:()=>j(H==="pi"?"":H),className:`py-3 rounded-xl font-semibold text-sm transition ${U}`,children:H},H))},`sci-${Y}`))}),P.jsx("button",{onClick:G,className:`w-full mt-3 py-3 rounded-xl font-semibold text-lg ${U}`,children:" (=)"})]})]}),P.jsxs("div",{className:`p-5 rounded-2xl border ${r?"border-gray-700 bg-gray-900/40":"border-gray-200 bg-white"}`,children:[P.jsxs("div",{className:"flex items-center justify-between mb-2",children:[P.jsx("p",{className:"font-semibold",children:" 10 "}),P.jsx("button",{onClick:()=>a([]),className:`text-sm ${r?"text-red-300":"text-red-500"}`,children:" "})]}),P.jsxs("div",{className:"max-h-64 overflow-y-auto space-y-2",children:[s.length===0&&P.jsx("p",{className:"text-sm text-gray-500",children:" "}),s.map((R,Y)=>P.jsxs("button",{onClick:()=>{t(R.expression),i(R.result)},className:`w-full text-left p-3 rounded-xl ${r?"bg-gray-800 hover:bg-gray-700":"bg-gray-100 hover:bg-gray-200"}`,children:[P.jsx("p",{className:"text-sm break-words",children:R.expression}),P.jsxs("p",{className:"text-sm font-semibold text-green-500",children:["= ",R.result]})]},`${R.expression}-${Y}`))]})]})]}),I==="roots"&&P.jsxs("div",{children:[P.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),P.jsxs("p",{className:`text-sm mb-3 ${r?"text-gray-300":"text-gray-600"}`,children:["   (: x - 3x + 2  ",P.jsx("span",{className:"font-mono",children:"1,-3,2"}),")"]}),P.jsx("input",{value:o,onChange:R=>l(R.target.value),className:`w-full mb-3 px-4 py-2 rounded-xl border ${r?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`}),P.jsx("button",{onClick:ee,className:`w-full py-3 rounded-xl font-semibold ${U}`,children:" "}),h&&P.jsx("p",{className:"text-sm text-red-400 mt-3",children:h}),u.length>0&&P.jsx("ul",{className:"mt-4 space-y-1 text-sm font-mono",children:u.map((R,Y)=>P.jsxs("li",{children:["x",Y+1," = ",R]},Y))})]}),I==="derivative"&&P.jsxs("div",{children:[P.jsx("h2",{className:"text-xl font-bold mb-4",children:" "}),P.jsx("input",{value:f,onChange:R=>p(R.target.value),className:`w-full mb-3 px-4 py-2 rounded-xl border ${r?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"f(x) = "}),P.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[P.jsx("label",{className:"text-sm",children:""}),P.jsx("input",{value:g,onChange:R=>b(R.target.value),className:`w-20 text-center px-2 py-2 rounded-xl border ${r?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`}),P.jsxs("button",{onClick:ue,className:`flex-1 min-w-[140px] py-2 rounded-xl font-semibold ${U}`,children:["d/d",g]})]}),v&&P.jsx("p",{className:"text-sm font-mono text-green-400",children:v})]}),I==="integral"&&P.jsxs("div",{children:[P.jsx("h2",{className:"text-xl font-bold mb-4",children:" "}),P.jsx("input",{value:y,onChange:R=>A(R.target.value),className:`w-full mb-3 px-4 py-2 rounded-xl border ${r?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:"f(x)"}),P.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[P.jsx("label",{className:"text-sm",children:""}),P.jsx("input",{value:x,onChange:R=>_(R.target.value),className:`w-24 text-center px-3 py-2 rounded-xl border ${r?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`}),P.jsx("input",{value:S.from,onChange:R=>E(Y=>({...Y,from:R.target.value})),className:`flex-1 min-w-[140px] px-3 py-2 rounded-xl border ${r?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:""}),P.jsx("input",{value:S.to,onChange:R=>E(Y=>({...Y,to:R.target.value})),className:`flex-1 min-w-[140px] px-3 py-2 rounded-xl border ${r?"bg-gray-800 border-gray-700 text-white":"bg-white border-gray-300 text-gray-900"}`,placeholder:""})]}),P.jsx("button",{onClick:te,className:`w-full py-3 rounded-xl font-semibold ${U}`,children:" "}),D&&P.jsx("p",{className:"text-sm text-red-400 mt-3",children:D}),C&&P.jsx("p",{className:"text-sm font-mono text-green-400 mt-3",children:C})]}),I==="guide"&&P.jsxs("div",{children:[P.jsx("h2",{className:"text-xl font-bold mb-3",children:"  "}),P.jsxs("ul",{className:`text-sm space-y-2 ${r?"text-gray-300":"text-gray-600"}`,children:[P.jsx("li",{children:"   (: (3+4i)*(2-i))"}),P.jsx("li",{children:"   ( 10, Durand-Kerner )"}),P.jsx("li",{children:"   (math.js )"}),P.jsx("li",{children:"   (Simpson rule)"}),P.jsx("li",{children:"    : , e, i, trig/log, pow"})]})]})]})]})})]})}const FT=r=>{const e=r.code||r.message;return{"auth/email-already-in-use":"  .","auth/invalid-email":"   .","auth/weak-password":"  . ( 6)","auth/user-not-found":"  .","auth/wrong-password":" .","auth/too-many-requests":"   .    .","auth/network-request-failed":"  ."}[e]||r.message||"  ."},u4e=async(r,e,t)=>{try{const n=JSON.parse(localStorage.getItem("firebaseUsers")||"{}"),i=btoa(r);if(n[i])throw new Error("  .");await iK(lT,kF);let s=null,a=!1;try{s=(await Promise.race([tme(lT,r,e),new Promise((u,c)=>setTimeout(()=>c(new Error("Firebase timeout")),5e3))])).user}catch(l){if(console.warn("Firebase  :",FT(l)),l.code==="auth/email-already-in-use")throw l;a=!0}const o={uid:(s==null?void 0:s.uid)||"local-"+Date.now(),email:r,password:btoa(e),username:t.username,affiliation:t.affiliation||"",bio:"",created_at:new Date().toISOString(),isLocal:a||!s};return n[i]=o,localStorage.setItem("firebaseUsers",JSON.stringify(n)),{uid:o.uid,email:o.email,username:o.username,isLocal:o.isLocal}}catch(n){throw console.error(" :",n),new Error(FT(n))}},c4e=async(r,e)=>{try{await iK(lT,kF);let t=null,n=!1;try{t=(await Promise.race([rme(lT,r,e),new Promise((s,a)=>setTimeout(()=>a(new Error("Firebase timeout")),5e3))])).user}catch(i){console.warn("Firebase  ,   :",FT(i));const s=JSON.parse(localStorage.getItem("firebaseUsers")||"{}"),a=btoa(r);if(s[a]){const o=s[a];if(btoa(e)===o.password)n=!0,t={uid:o.uid,email:o.email,displayName:o.username};else throw new Error(" .")}else throw new Error("  .")}if(!t)throw new Error(" ");return{uid:t.uid,email:t.email,username:t.displayName||r.split("@")[0],isLocal:n}}catch(t){throw console.error(" :",t),new Error(FT(t))}},h4e=r=>{localStorage.setItem("currentUser",JSON.stringify(r)),localStorage.setItem("authToken",r.uid)};function d4e(){const r=j0(),{isDark:e}=Qs(),[t,n]=se.useState({email:"",password:""}),[i,s]=se.useState(""),[a,o]=se.useState(!1),l="auto",u=h=>{const{name:d,value:f}=h.target;n(p=>({...p,[d]:f})),s("")},c=async h=>{h.preventDefault(),o(!0),s("");try{if(!t.email||!t.password){s("  ."),o(!1);return}if(!t.email.includes("@")){s("   ."),o(!1);return}let d=null;if(l==="auto"||l==="firebase")try{d=await c4e(t.email,t.password);const f={uid:d.uid,email:d.email,username:d.username,role:"user",authProvider:d.isLocal?"firebase-local":"firebase"};h4e(f),localStorage.setItem("user",JSON.stringify(f)),localStorage.setItem("authToken",d.uid),localStorage.setItem("isAuthenticated","true"),console.log(`   (${d.isLocal?" ":"Firebase"}):`),window.dispatchEvent(new Event("auth-change")),setTimeout(()=>r("/"),500);return}catch(f){console.warn("Firebase  :",f.message)}s(" :     .")}catch(d){console.error(" :",d),s("   .")}finally{o(!1)}};return P.jsx("div",{className:`min-h-screen flex items-center justify-center px-4 sm:px-6 lg:px-8 transition-colors duration-200 ${e?"bg-gray-900":"bg-gray-50"}`,children:P.jsxs(Ye.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:`w-full max-w-md space-y-8 rounded-lg shadow-lg p-8 transition-colors duration-200 ${e?"bg-gray-800":"bg-white"}`,children:[P.jsxs("div",{className:"text-center",children:[P.jsx(Ye.h1,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.1},className:`text-3xl font-bold mb-2 transition-colors duration-200 ${e?"text-white":"text-gray-900"}`,children:""}),P.jsx(Ye.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:"   "})]}),i&&P.jsx(Ye.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`p-3 rounded-lg text-sm border-l-4 transition-colors duration-200 ${e?"bg-red-900/30 border-red-600 text-red-200":"bg-red-50 border-red-500 text-red-800"}`,children:i}),P.jsxs(Ye.form,{onSubmit:c,className:"space-y-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.3},children:[P.jsxs("div",{children:[P.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),P.jsx(Ye.input,{whileFocus:{scale:1.02},type:"email",id:"email",name:"email",value:t.email,onChange:u,placeholder:"your@example.com",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"}`})]}),P.jsxs("div",{children:[P.jsx("label",{htmlFor:"password",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),P.jsx(Ye.input,{whileFocus:{scale:1.02},type:"password",id:"password",name:"password",value:t.password,onChange:u,placeholder:"",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"}`})]}),P.jsx(Ye.button,{type:"submit",disabled:a,whileHover:{scale:1.02},whileTap:{scale:.98},className:`w-full py-2 px-4 rounded-lg font-medium text-white transition-all duration-200 ${a?"bg-blue-400 cursor-not-allowed opacity-50":"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800"}`,children:a?" ...":""})]}),P.jsxs(Ye.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},className:`text-center text-sm transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:[" ?"," ",P.jsx(Cr,{to:"/signup",className:"text-blue-600 hover:text-blue-700 font-medium",children:""})]})]})})}function f4e(){const r=j0(),{isDark:e}=Qs(),[t,n]=se.useState({username:"",email:"",password:"",confirmPassword:"",affiliation:"",agreeTerms:!1}),[i,s]=se.useState({}),[a,o]=se.useState(!1),[l,u]=se.useState(""),c="auto",h=p=>{const{name:g,value:b,type:v,checked:w}=p.target;n(y=>({...y,[g]:v==="checkbox"?w:b})),i[g]&&s(y=>({...y,[g]:""}))},d=()=>{const p={};return t.username.trim()?t.username.length<3&&(p.username=" 3  ."):p.username=" .",t.email?t.email.includes("@")||(p.email="   ."):p.email=" .",t.password?t.password.length<8?p.password=" 8  .":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(t.password)||(p.password=" , ,   ."):p.password=" .",t.password!==t.confirmPassword&&(p.confirmPassword="  ."),t.agreeTerms||(p.agreeTerms=" ."),p},f=async p=>{p.preventDefault();const g=d();if(Object.keys(g).length>0){s(g);return}o(!0),u("");try{let b=!1,v=null;if(c==="auto"||c==="firebase")try{const w=await u4e(t.email,t.password,{username:t.username,affiliation:t.affiliation});console.log("  :",w.username),b=!0}catch(w){console.warn("Firebase  :",w.message),v=w.message}if(!b&&(c==="auto"||c==="local")){const w=JSON.parse(localStorage.getItem("firebaseUsers")||"{}"),y=btoa(t.email);if(w[y]){s({submit:"  ."}),o(!1);return}const A={uid:"local-"+Date.now(),email:t.email,password:btoa(t.password),username:t.username,affiliation:t.affiliation||"",bio:"",created_at:new Date().toISOString(),isLocal:!0};w[y]=A,localStorage.setItem("firebaseUsers",JSON.stringify(w)),console.log("    "),b=!0}b&&(u(" .   ..."),setTimeout(()=>{r("/login")},2e3))}catch(b){console.error(" :",b),s({submit:"   .  ."})}finally{o(!1)}};return P.jsx("div",{className:`min-h-screen flex items-center justify-center px-4 sm:px-6 lg:px-8 transition-colors duration-200 ${e?"bg-gray-900":"bg-gray-50"}`,children:P.jsxs(Ye.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:`w-full max-w-md space-y-8 rounded-lg shadow-lg p-8 transition-colors duration-200 ${e?"bg-gray-800":"bg-white"}`,children:[P.jsxs("div",{className:"text-center",children:[P.jsx(Ye.h1,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.1},className:`text-3xl font-bold mb-2 transition-colors duration-200 ${e?"text-white":"text-gray-900"}`,children:""}),P.jsx(Ye.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:`transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:"   "})]}),l&&P.jsx(Ye.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg dark:bg-green-900 dark:border-green-700 dark:text-green-200",children:l}),i.submit&&P.jsx(Ye.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg dark:bg-red-900 dark:border-red-700 dark:text-red-200",children:i.submit}),P.jsxs(Ye.form,{onSubmit:f,className:"space-y-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.3},children:[P.jsxs("div",{children:[P.jsx("label",{htmlFor:"username",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),P.jsx(Ye.input,{whileFocus:{scale:1.02},type:"text",id:"username",name:"username",value:t.username,onChange:h,placeholder:"  ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.username?"border-red-500":""}`}),i.username&&P.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.username})]}),P.jsxs("div",{children:[P.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),P.jsx(Ye.input,{whileFocus:{scale:1.02},type:"email",id:"email",name:"email",value:t.email,onChange:h,placeholder:"your@institution.edu",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.email?"border-red-500":""}`}),i.email&&P.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.email})]}),P.jsxs("div",{children:[P.jsx("label",{htmlFor:"affiliation",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:"  ()"}),P.jsx(Ye.input,{whileFocus:{scale:1.02},type:"text",id:"affiliation",name:"affiliation",value:t.affiliation,onChange:h,placeholder:",  ",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"}`})]}),P.jsxs("div",{children:[P.jsx("label",{htmlFor:"password",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:""}),P.jsx(Ye.input,{whileFocus:{scale:1.02},type:"password",id:"password",name:"password",value:t.password,onChange:h,placeholder:"",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.password?"border-red-500":""}`}),P.jsx("p",{className:`text-xs mt-1 transition-colors duration-200 ${e?"text-gray-400":"text-gray-500"}`,children:" 8, // "}),i.password&&P.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.password})]}),P.jsxs("div",{children:[P.jsx("label",{htmlFor:"confirmPassword",className:`block text-sm font-medium mb-2 transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:" "}),P.jsx(Ye.input,{whileFocus:{scale:1.02},type:"password",id:"confirmPassword",name:"confirmPassword",value:t.confirmPassword,onChange:h,placeholder:"",className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 ${e?"bg-gray-700 border-gray-600 text-white placeholder-gray-500":"bg-white border-gray-300 text-gray-900 placeholder-gray-400"} ${i.confirmPassword?"border-red-500":""}`}),i.confirmPassword&&P.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.confirmPassword})]}),P.jsxs("div",{className:"flex items-center",children:[P.jsx("input",{type:"checkbox",id:"agreeTerms",name:"agreeTerms",checked:t.agreeTerms,onChange:h,className:"h-4 w-4 rounded"}),P.jsx("label",{htmlFor:"agreeTerms",className:`ml-3 text-sm transition-colors duration-200 ${e?"text-gray-300":"text-gray-700"}`,children:"   "})]}),i.agreeTerms&&P.jsx("p",{className:"text-red-600 text-sm mt-1 dark:text-red-400",children:i.agreeTerms}),P.jsx(Ye.button,{type:"submit",disabled:a,whileHover:{scale:1.02},whileTap:{scale:.98},className:`w-full py-2 px-4 rounded-lg font-medium text-white transition-all duration-200 ${a?"bg-blue-400 cursor-not-allowed opacity-50":"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800"}`,children:a?" ...":""})]}),P.jsxs(Ye.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},className:`text-center text-sm transition-colors duration-200 ${e?"text-gray-400":"text-gray-600"}`,children:["  ?"," ",P.jsx(Cr,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-medium",children:""})]})]})})}const qy=({children:r})=>eM()?r:P.jsx(ite,{to:"/login",replace:!0});function m4e(){return P.jsx(yte,{children:P.jsx(mte,{basename:"/1201-project/",children:P.jsxs(ote,{children:[P.jsx(ri,{path:"/login",element:P.jsx(d4e,{})}),P.jsx(ri,{path:"/signup",element:P.jsx(f4e,{})}),P.jsxs(ri,{element:P.jsx(Ste,{}),children:[P.jsx(ri,{path:"/",element:P.jsx(sae,{})}),P.jsx(ri,{path:"/concepts",element:P.jsx(aae,{})}),P.jsx(ri,{path:"/concepts/:slug",element:P.jsx(lae,{})}),P.jsx(ri,{path:"/papers",element:P.jsx(Kpe,{})}),P.jsx(ri,{path:"/whiteboard",element:P.jsx(sge,{})}),P.jsx(ri,{path:"/virtual-lab",element:P.jsx(uge,{})}),P.jsx(ri,{path:"/calculator",element:P.jsx(l4e,{})}),P.jsx(ri,{path:"/forum",element:P.jsx(qy,{children:P.jsx(Xpe,{})})}),P.jsx(ri,{path:"/forum/:postId",element:P.jsx(qy,{children:P.jsx(Ype,{})})}),P.jsx(ri,{path:"/profile",element:P.jsx(qy,{children:P.jsx(Zpe,{})})}),P.jsx(ri,{path:"/bookmarks",element:P.jsx(qy,{children:P.jsx(ege,{})})}),P.jsx(ri,{path:"/notes",element:P.jsx(qy,{children:P.jsx(tge,{})})}),P.jsx(ri,{path:"/glossary",element:P.jsx(Qpe,{})}),P.jsx(ri,{path:"/references",element:P.jsx(Jpe,{})})]})]})})})}iD.createRoot(document.getElementById("root")).render(P.jsx($U.StrictMode,{children:P.jsx(m4e,{})}));
